var Hl=Object.defineProperty;var Wl=(t,e,n)=>e in t?Hl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>(Wl(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function ue(){}const Qt=t=>t;function G(t,e){for(const n in e)t[n]=e[n];return t}function Js(t){return t()}function eo(){return Object.create(null)}function z(t){t.forEach(Js)}function ee(t){return typeof t=="function"}function ke(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Xl(t){return Object.keys(t).length===0}function Zs(t,...e){if(t==null)return ue;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function gt(t){let e;return Zs(t,n=>e=n)(),e}function Ne(t,e,n){t.$$.on_destroy.push(Zs(e,n))}function K(t,e,n,r){if(t){const i=$s(t,e,n,r);return t[0](i)}}function $s(t,e,n,r){return t[1]&&r?G(n.ctx.slice(),t[1](r(e))):n.ctx}function Y(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],l=Math.max(e.dirty.length,i.length);for(let c=0;c<l;c+=1)o[c]=e.dirty[c]|i[c];return o}return e.dirty|i}return e.dirty}function J(t,e,n,r,i,o){if(i){const l=$s(e,n,r,o);t.p(l,i)}}function Z(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function Kt(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function et(t,e){const n={};e=new Set(e);for(const r in t)!e.has(r)&&r[0]!=="$"&&(n[r]=t[r]);return n}function Rr(t){return t==null?"":t}function to(t,e,n){return t.set(n),e}function L(t){return t&&ee(t.destroy)?t.destroy:ue}const ea=typeof window<"u";let Jn=ea?()=>window.performance.now():()=>Date.now(),Li=ea?t=>requestAnimationFrame(t):ue;const ln=new Set;function ta(t){ln.forEach(e=>{e.c(t)||(ln.delete(e),e.f())}),ln.size!==0&&Li(ta)}function Zn(t){let e;return ln.size===0&&Li(ta),{promise:new Promise(n=>{ln.add(e={c:t,f:n})}),abort(){ln.delete(e)}}}function M(t,e){t.appendChild(e)}function na(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ql(t){const e=A("style");return Kl(na(t),e),e.sheet}function Kl(t,e){return M(t.head||t,e),e.sheet}function T(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode.removeChild(t)}function Nt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function Dt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Je(t){return document.createTextNode(t)}function te(){return Je(" ")}function lt(){return Je("")}function ne(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Yl(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Jl(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function P(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)e[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=e[r]:r==="__value"?t.value=t[r]=e[r]:n[r]&&n[r].set?t[r]=e[r]:P(t,r,e[r])}function tt(t,e){for(const n in e)P(t,n,e[n])}function Zl(t){return Array.from(t.childNodes)}function Wt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function no(t,e){t.value=e==null?"":e}function ro(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function or(t,e,n){t.classList[n?"add":"remove"](e)}function ra(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}class $l{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,r=null){this.e||(this.is_svg?this.e=Dt(n.nodeName):this.e=A(n.nodeName),this.t=n,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)T(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(E)}}function Pr(t,e){return new t(e)}const Or=new Map;let Dr=0;function ec(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function tc(t,e){const n={stylesheet:Ql(e),rules:{}};return Or.set(t,n),n}function jn(t,e,n,r,i,o,l,c=0){const s=16.666/r;let u=`{
`;for(let g=0;g<=1;g+=s){const v=e+(n-e)*o(g);u+=g*100+`%{${l(v,1-v)}}
`}const d=u+`100% {${l(n,1-n)}}
}`,a=`__svelte_${ec(d)}_${c}`,f=na(t),{stylesheet:h,rules:p}=Or.get(f)||tc(f,t);p[a]||(p[a]=!0,h.insertRule(`@keyframes ${a} ${d}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${a} ${r}ms linear ${i}ms 1 both`,Dr+=1,a}function Vn(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(t.style.animation=r.join(", "),Dr-=i,Dr||nc())}function nc(){Li(()=>{Dr||(Or.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&E(e)}),Or.clear())})}function rc(t,e,n,r){if(!e)return ue;const i=t.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return ue;const{delay:o=0,duration:l=300,easing:c=Qt,start:s=Jn()+o,end:u=s+l,tick:d=ue,css:a}=n(t,{from:e,to:i},r);let f=!0,h=!1,p;function m(){a&&(p=jn(t,0,1,l,o,c,a)),o||(h=!0)}function g(){a&&Vn(t,p),f=!1}return Zn(v=>{if(!h&&v>=s&&(h=!0),h&&v>=u&&(d(1,0),g()),!f)return!1;if(h){const y=v-s,C=0+1*c(y/l);d(C,1-C)}return!0}),m(),d(0,1),g}function ic(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:r}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,ia(t,i)}}function ia(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),i=r.transform==="none"?"":r.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let Un;function Ln(t){Un=t}function vt(){if(!Un)throw new Error("Function called outside component initialization");return Un}function vn(t){vt().$$.on_mount.push(t)}function Vt(t){vt().$$.on_destroy.push(t)}function $n(){const t=vt();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=ra(e,n,{cancelable:r});return i.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}function er(t,e){return vt().$$.context.set(t,e),e}function yn(t){return vt().$$.context.get(t)}function oc(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const Tn=[],q=[],yr=[],ai=[],oa=Promise.resolve();let li=!1;function sa(){li||(li=!0,oa.then(aa))}function xi(){return sa(),oa}function it(t){yr.push(t)}function mt(t){ai.push(t)}const Zr=new Set;let sr=0;function aa(){const t=Un;do{for(;sr<Tn.length;){const e=Tn[sr];sr++,Ln(e),sc(e.$$)}for(Ln(null),Tn.length=0,sr=0;q.length;)q.pop()();for(let e=0;e<yr.length;e+=1){const n=yr[e];Zr.has(n)||(Zr.add(n),n())}yr.length=0}while(Tn.length);for(;ai.length;)ai.pop()();li=!1,Zr.clear(),Ln(t)}function sc(t){if(t.fragment!==null){t.update(),z(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(it)}}let An;function Fi(){return An||(An=Promise.resolve(),An.then(()=>{An=null})),An}function Ut(t,e,n){t.dispatchEvent(ra(`${e?"intro":"outro"}${n}`))}const _r=new Set;let ht;function Mt(){ht={r:0,c:[],p:ht}}function It(){ht.r||z(ht.c),ht=ht.p}function S(t,e){t&&t.i&&(_r.delete(t),t.i(e))}function w(t,e,n,r){if(t&&t.o){if(_r.has(t))return;_r.add(t),ht.c.push(()=>{_r.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const Ni={duration:0};function Gi(t,e,n){let r=e(t,n),i=!1,o,l,c=0;function s(){o&&Vn(t,o)}function u(){const{delay:a=0,duration:f=300,easing:h=Qt,tick:p=ue,css:m}=r||Ni;m&&(o=jn(t,0,1,f,a,h,m,c++)),p(0,1);const g=Jn()+a,v=g+f;l&&l.abort(),i=!0,it(()=>Ut(t,!0,"start")),l=Zn(y=>{if(i){if(y>=v)return p(1,0),Ut(t,!0,"end"),s(),i=!1;if(y>=g){const C=h((y-g)/f);p(C,1-C)}}return i})}let d=!1;return{start(){d||(d=!0,Vn(t),ee(r)?(r=r(),Fi().then(u)):u())},invalidate(){d=!1},end(){i&&(s(),i=!1)}}}function ac(t,e,n){let r=e(t,n),i=!0,o;const l=ht;l.r+=1;function c(){const{delay:s=0,duration:u=300,easing:d=Qt,tick:a=ue,css:f}=r||Ni;f&&(o=jn(t,1,0,u,s,d,f));const h=Jn()+s,p=h+u;it(()=>Ut(t,!1,"start")),Zn(m=>{if(i){if(m>=p)return a(0,1),Ut(t,!1,"end"),--l.r||z(l.c),!1;if(m>=h){const g=d((m-h)/u);a(1-g,g)}}return i})}return ee(r)?Fi().then(()=>{r=r(),c()}):c(),{end(s){s&&r.tick&&r.tick(1,0),i&&(o&&Vn(t,o),i=!1)}}}function an(t,e,n,r){let i=e(t,n),o=r?0:1,l=null,c=null,s=null;function u(){s&&Vn(t,s)}function d(f,h){const p=f.b-o;return h*=Math.abs(p),{a:o,b:f.b,d:p,duration:h,start:f.start,end:f.start+h,group:f.group}}function a(f){const{delay:h=0,duration:p=300,easing:m=Qt,tick:g=ue,css:v}=i||Ni,y={start:Jn()+h,b:f};f||(y.group=ht,ht.r+=1),l||c?c=y:(v&&(u(),s=jn(t,o,f,p,h,m,v)),f&&g(0,1),l=d(y,p),it(()=>Ut(t,f,"start")),Zn(C=>{if(c&&C>c.start&&(l=d(c,p),c=null,Ut(t,l.b,"start"),v&&(u(),s=jn(t,o,l.b,l.duration,0,m,i.css))),l){if(C>=l.end)g(o=l.b,1-o),Ut(t,l.b,"end"),c||(l.b?u():--l.group.r||z(l.group.c)),l=null;else if(C>=l.start){const D=C-l.start;o=l.a+l.d*m(D/l.duration),g(o,1-o)}}return!!(l||c)}))}return{run(f){ee(i)?Fi().then(()=>{i=i(),a(f)}):a(f)},end(){u(),l=c=null}}}const la=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function lc(t,e){w(t,1,1,()=>{e.delete(t.key)})}function cc(t,e){t.f(),lc(t,e)}function uc(t,e,n,r,i,o,l,c,s,u,d,a){let f=t.length,h=o.length,p=f;const m={};for(;p--;)m[t[p].key]=p;const g=[],v=new Map,y=new Map;for(p=h;p--;){const I=a(i,o,p),O=n(I);let N=l.get(O);N?r&&N.p(I,e):(N=u(O,I),N.c()),v.set(O,g[p]=N),O in m&&y.set(O,Math.abs(p-m[O]))}const C=new Set,D=new Set;function k(I){S(I,1),I.m(c,d),l.set(I.key,I),d=I.first,h--}for(;f&&h;){const I=g[h-1],O=t[f-1],N=I.key,H=O.key;I===O?(d=I.first,f--,h--):v.has(H)?!l.has(N)||C.has(N)?k(I):D.has(H)?f--:y.get(N)>y.get(H)?(D.add(N),k(I)):(C.add(H),f--):(s(O,l),f--)}for(;f--;){const I=t[f];v.has(I.key)||s(I,l)}for(;h;)k(g[h-1]);return g}function W(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const l=t[o],c=e[o];if(c){for(const s in l)s in c||(r[s]=1);for(const s in c)i[s]||(n[s]=c[s],i[s]=1);t[o]=c}else for(const s in l)i[s]=1}for(const l in r)l in n||(n[l]=void 0);return n}function zn(t){return typeof t=="object"&&t!==null?t:{}}function ft(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function se(t){t&&t.c()}function ie(t,e,n,r){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),r||it(()=>{const l=t.$$.on_mount.map(Js).filter(ee);t.$$.on_destroy?t.$$.on_destroy.push(...l):z(l),t.$$.on_mount=[]}),o.forEach(it)}function oe(t,e){const n=t.$$;n.fragment!==null&&(z(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function fc(t,e){t.$$.dirty[0]===-1&&(Tn.push(t),sa(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Re(t,e,n,r,i,o,l,c=[-1]){const s=Un;Ln(t);const u=t.$$={fragment:null,ctx:[],props:o,update:ue,not_equal:i,bound:eo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:eo(),dirty:c,skip_bound:!1,root:e.target||s.$$.root};l&&l(u.root);let d=!1;if(u.ctx=n?n(t,e.props||{},(a,f,...h)=>{const p=h.length?h[0]:f;return u.ctx&&i(u.ctx[a],u.ctx[a]=p)&&(!u.skip_bound&&u.bound[a]&&u.bound[a](p),d&&fc(t,a)),f}):[],u.update(),d=!0,z(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const a=Zl(e.target);u.fragment&&u.fragment.l(a),a.forEach(E)}else u.fragment&&u.fragment.c();e.intro&&S(t.$$.fragment),ie(t,e.target,e.anchor,e.customElement),aa()}Ln(s)}class Pe{$destroy(){oe(this,1),this.$destroy=ue}$on(e,n){if(!ee(n))return ue;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Xl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $t=[];function Qe(t,e=ue){let n;const r=new Set;function i(c){if(ke(t,c)&&(t=c,n)){const s=!$t.length;for(const u of r)u[1](),$t.push(u,t);if(s){for(let u=0;u<$t.length;u+=2)$t[u][0]($t[u+1]);$t.length=0}}}function o(c){i(c(t))}function l(c,s=ue){const u=[c,s];return r.add(u),r.size===1&&(n=e(i)||ue),c(t),()=>{r.delete(u),r.size===0&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pt=function(){return pt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},pt.apply(this,arguments)};function dc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function hc(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F=function(){return F=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},F.apply(this,arguments)};function ji(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function de(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){l={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o}function Ae(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var be;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(be||(be={}));var Ot;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(Ot||(Ot={}));var ci=be.Start,Vi=be.Stop,dn=be.Raise,hn=be.Send,ca=be.Cancel,pc=be.NullEvent,Ui=be.Assign;be.After;be.DoneState;var ua=be.Log,gc=be.Init,ui=be.Invoke;be.ErrorExecution;var io=be.ErrorPlatform,mc=be.ErrorCustom,fa=be.Update,vc=be.Choose,yc=be.Pure,da=".",oo={},fi="xstate.guard",_c="",ha=!0,ar;function zi(t,e,n){n===void 0&&(n=da);var r=xn(t,n),i=xn(e,n);return pe(i)?pe(r)?i===r:!1:pe(r)?r in i:Object.keys(r).every(function(o){return o in i?zi(r[o],i[o]):!1})}function pa(t){try{return pe(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function di(t,e){try{return _n(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function bc(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function xn(t,e){if(bc(t))return t.value;if(_n(t))return Mr(t);if(typeof t!="string")return t;var n=di(t,e);return Mr(n)}function Mr(t){if(t.length===1)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function wn(t,e){for(var n={},r=Object.keys(t),i=0;i<r.length;i++){var o=r[i];n[o]=e(t[o],o,t,i)}return n}function so(t,e,n){var r,i,o={};try{for(var l=de(Object.keys(t)),c=l.next();!c.done;c=l.next()){var s=c.value,u=t[s];!n(u)||(o[s]=e(u,s,t))}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}var Cc=function(t){return function(e){var n,r,i=e;try{for(var o=de(t),l=o.next();!l.done;l=o.next()){var c=l.value;i=i[c]}}catch(s){n={error:s}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}};function Ac(t,e){return function(n){var r,i,o=n;try{for(var l=de(t),c=l.next();!c.done;c=l.next()){var s=c.value;o=o[e][s]}}catch(u){r={error:u}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}}function br(t){if(!t)return[[]];if(pe(t))return[[t]];var e=Oe(Object.keys(t).map(function(n){var r=t[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:br(t[n]).map(function(i){return[n].concat(i)})}));return e}function Oe(t){var e;return(e=[]).concat.apply(e,Ae([],fe(t),!1))}function ga(t){return _n(t)?t:[t]}function at(t){return t===void 0?[]:ga(t)}function Ir(t,e,n){var r,i;if(_e(t))return t(e,n.data);var o={};try{for(var l=de(Object.keys(t)),c=l.next();!c.done;c=l.next()){var s=c.value,u=t[s];_e(u)?o[s]=u(e,n.data):o[s]=u}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}function Sc(t){return/^(done|error)\./.test(t)}function ao(t){return!!(t instanceof Promise||t!==null&&(_e(t)||typeof t=="object")&&_e(t.then))}function Ec(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function kc(t,e){var n,r,i=fe([[],[]],2),o=i[0],l=i[1];try{for(var c=de(t),s=c.next();!s.done;s=c.next()){var u=s.value;e(u)?o.push(u):l.push(u)}}catch(d){n={error:d}}finally{try{s&&!s.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return[o,l]}function ma(t,e){return wn(t.states,function(n,r){if(!!n){var i=(pe(e)?void 0:e[r])||(n?n.current:void 0);if(!!i)return{current:i,states:ma(n,i)}}})}function Tc(t,e){return{current:e,states:ma(t,e)}}function lo(t,e,n,r){var i=t&&n.reduce(function(o,l){var c,s,u=l.assignment,d={state:r,action:l,_event:e},a={};if(_e(u))a=u(o,e.data,d);else try{for(var f=de(Object.keys(u)),h=f.next();!h.done;h=f.next()){var p=h.value,m=u[p];a[p]=_e(m)?m(o,e.data,d):m}}catch(g){c={error:g}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(c)throw c.error}}return Object.assign({},o,a)},t);return i}var va=function(){};ha||(va=function(t,e){var n=t instanceof Error?t:void 0;if(!(!n&&t)&&console!==void 0){var r=["Warning: ".concat(e)];n&&r.push(n),console.warn.apply(console,r)}});function _n(t){return Array.isArray(t)}function _e(t){return typeof t=="function"}function pe(t){return typeof t=="string"}function ya(t,e){if(!!t)return pe(t)?{type:fi,name:t,predicate:e?e[t]:void 0}:_e(t)?{type:fi,name:t.name,predicate:t}:t}function wc(t){try{return"subscribe"in t&&_e(t.subscribe)}catch{return!1}}var Tt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();ar={},ar[Tt]=function(){return this},ar[Symbol.observable]=function(){return this};function pn(t){return!!t&&"__xstatenode"in t}function Rc(t){return!!t&&typeof t.send=="function"}function Wr(t,e){return pe(t)||typeof t=="number"?F({type:t},e):t}function Fe(t,e){if(!pe(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=Wr(t);return F({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function en(t,e){var n=ga(e).map(function(r){return typeof r>"u"||typeof r=="string"||pn(r)?{target:r,event:t}:F(F({},r),{event:t})});return n}function Pc(t){if(!(t===void 0||t===_c))return at(t)}function _a(t,e,n,r,i){var o=t.options.guards,l={state:i,cond:e,_event:r};if(e.type===fi)return((o==null?void 0:o[e.name])||e.predicate)(n,r.data,l);var c=o==null?void 0:o[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,r.data,l)}function ba(t){return typeof t=="string"?{type:t}:t}function Fn(t,e,n){var r=function(){},i=typeof t=="object",o=i?t:null;return{next:((i?t.next:t)||r).bind(o),error:((i?t.error:e)||r).bind(o),complete:((i?t.complete:n)||r).bind(o)}}function lr(t,e){return"".concat(t,":invocation[").concat(e,"]")}var cn=Fe({type:gc});function hi(t,e){return e&&e[t]||void 0}function qn(t,e){var n;if(pe(t)||typeof t=="number"){var r=hi(t,e);_e(r)?n={type:t,exec:r}:r?n=r:n={type:t,exec:void 0}}else if(_e(t))n={type:t.name||t.toString(),exec:t};else{var r=hi(t.type,e);if(_e(r))n=F(F({},t),{exec:r});else if(r){var i=r.type||t.type;n=F(F(F({},r),t),{type:i})}else n=t}return n}var wt=function(t,e){if(!t)return[];var n=_n(t)?t:[t];return n.map(function(r){return qn(r,e)})};function qi(t){var e=qn(t);return F(F({id:pe(t)?t:e.id},e),{type:e.type})}function Oc(t){return pe(t)?{type:dn,event:t}:Ca(t,{to:Ot.Internal})}function Dc(t){return{type:dn,_event:Fe(t.event)}}function Ca(t,e){return{to:e?e.to:void 0,type:hn,event:_e(t)?t:Wr(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:_e(t)?t.name:pa(t)}}function Mc(t,e,n,r){var i={_event:n},o=Fe(_e(t.event)?t.event(e,n.data,i):t.event),l;if(pe(t.delay)){var c=r&&r[t.delay];l=_e(c)?c(e,n.data,i):c}else l=_e(t.delay)?t.delay(e,n.data,i):t.delay;var s=_e(t.to)?t.to(e,n.data,i):t.to;return F(F({},t),{to:s,_event:o,event:o.data,delay:l})}var Ic=function(t,e,n){return F(F({},t),{value:pe(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},Bc=function(t){return{type:ca,sendId:t}};function Lc(t){var e=qi(t);return{type:be.Start,activity:e,exec:void 0}}function xc(t){var e=_e(t)?t:qi(t);return{type:be.Stop,activity:e,exec:void 0}}function Fc(t,e,n){var r=_e(t.activity)?t.activity(e,n.data):t.activity,i=typeof r=="string"?{id:r}:r,o={type:be.Stop,activity:i};return o}var Nc=function(t){return{type:Ui,assignment:t}};function Gc(t,e){var n=e?"#".concat(e):"";return"".concat(be.After,"(").concat(t,")").concat(n)}function cr(t,e){var n="".concat(be.DoneState,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function Cr(t,e){var n="".concat(be.DoneInvoke,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function Rn(t,e){var n="".concat(be.ErrorPlatform,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}var jc=function(t){var e,n,r=[];try{for(var i=de(t),o=i.next();!o.done;o=i.next())for(var l=o.value,c=0;c<l.length;){if(l[c].type===Ui){r.push(l[c]),l.splice(c,1);continue}c++}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r};function Br(t,e,n,r,i,o,l){l===void 0&&(l=!1);var c=l?[]:jc(i),s=c.length?lo(n,r,c,e):n,u=l?[n]:void 0,d=[];function a(p){var m;switch(p.type){case dn:return Dc(p);case hn:var g=Mc(p,s,r,t.options.delays);return o&&g.to!==Ot.Internal&&d.push(g),g;case ua:{var v=Ic(p,s,r);return o==null||o(v,s,r),v}case vc:{var y=p,C=(m=y.conds.find(function(me){var ve=ya(me.cond,t.options.guards);return!ve||_a(t,ve,s,r,o?void 0:e)}))===null||m===void 0?void 0:m.actions;if(!C)return[];var D=fe(Br(t,e,s,r,[wt(at(C),t.options.actions)],o,l),2),k=D[0],I=D[1];return s=I,u==null||u.push(s),k}case yc:{var C=p.get(s,r.data);if(!C)return[];var O=fe(Br(t,e,s,r,[wt(at(C),t.options.actions)],o,l),2),N=O[0],H=O[1];return s=H,u==null||u.push(s),N}case Vi:{var v=Fc(p,s,r);return o==null||o(v,n,r),v}case Ui:{s=lo(s,r,[p],o?void 0:e),u==null||u.push(s);break}default:var R=qn(p,t.options.actions),X=R.exec;if(o)o(R,s,r);else if(X&&u){var ce=u.length-1;R=F(F({},R),{exec:function(me){for(var ve=[],Se=1;Se<arguments.length;Se++)ve[Se-1]=arguments[Se];X.apply(void 0,Ae([u[ce]],fe(ve),!1))}})}return R}}function f(p){var m,g,v=[];try{for(var y=de(p),C=y.next();!C.done;C=y.next()){var D=C.value,k=a(D);k&&(v=v.concat(k))}}catch(I){m={error:I}}finally{try{C&&!C.done&&(g=y.return)&&g.call(y)}finally{if(m)throw m.error}}return d.forEach(function(I){o(I,s,r)}),d.length=0,v}var h=Oe(i.map(f));return[h,s]}var on=function(t,e){var n=e(t);return n};function Aa(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Tt]=function(){return this},e}function Vc(t,e,n,r){var i,o=ba(t.src),l=(i=e==null?void 0:e.options.services)===null||i===void 0?void 0:i[o.type],c=t.data?Ir(t.data,n,r):void 0,s=l?Sa(l,t.id,c):Aa(t.id);return s.meta=t,s}function Sa(t,e,n){var r=Aa(e);if(r.deferred=!0,pn(t)){var i=r.state=on(void 0,function(){return(n?t.withContext(n):t).initialState});r.getSnapshot=function(){return i}}return r}function Uc(t){try{return typeof t.send=="function"}catch{return!1}}function zc(t){return Uc(t)&&"id"in t}function qc(t){var e;return F((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Tt]=function(){return this},e),t)}var Lr=function(t){return t.type==="atomic"||t.type==="final"};function Ea(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function Hn(t){return Ea(t).filter(function(e){return e.type!=="history"})}function ka(t){var e=[t];return Lr(t)?e:e.concat(Oe(Hn(t).map(ka)))}function Pn(t,e){var n,r,i,o,l,c,s,u,d=new Set(t),a=pi(d),f=new Set(e);try{for(var h=de(f),p=h.next();!p.done;p=h.next())for(var m=p.value,g=m.parent;g&&!f.has(g);)f.add(g),g=g.parent}catch(H){n={error:H}}finally{try{p&&!p.done&&(r=h.return)&&r.call(h)}finally{if(n)throw n.error}}var v=pi(f);try{for(var y=de(f),C=y.next();!C.done;C=y.next()){var m=C.value;if(m.type==="compound"&&(!v.get(m)||!v.get(m).length))a.get(m)?a.get(m).forEach(function(R){return f.add(R)}):m.initialStateNodes.forEach(function(R){return f.add(R)});else if(m.type==="parallel")try{for(var D=(l=void 0,de(Hn(m))),k=D.next();!k.done;k=D.next()){var I=k.value;f.has(I)||(f.add(I),a.get(I)?a.get(I).forEach(function(R){return f.add(R)}):I.initialStateNodes.forEach(function(R){return f.add(R)}))}}catch(R){l={error:R}}finally{try{k&&!k.done&&(c=D.return)&&c.call(D)}finally{if(l)throw l.error}}}}catch(H){i={error:H}}finally{try{C&&!C.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}try{for(var O=de(f),N=O.next();!N.done;N=O.next())for(var m=N.value,g=m.parent;g&&!f.has(g);)f.add(g),g=g.parent}catch(H){s={error:H}}finally{try{N&&!N.done&&(u=O.return)&&u.call(O)}finally{if(s)throw s.error}}return f}function Ta(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var r=n[0];if(r){if(Lr(r))return r.key}else return{}}var i={};return n.forEach(function(o){i[o.key]=Ta(o,e)}),i}function pi(t){var e,n,r=new Map;try{for(var i=de(t),o=i.next();!o.done;o=i.next()){var l=o.value;r.has(l)||r.set(l,[]),l.parent&&(r.has(l.parent)||r.set(l.parent,[]),r.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Hc(t,e){var n=Pn([t],e);return Ta(t,pi(n))}function On(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function Wc(t){return Ae([],fe(new Set(Oe(Ae([],fe(t.map(function(e){return e.ownEvents})),!1)))),!1)}function Ar(t,e){return e.type==="compound"?Hn(e).some(function(n){return n.type==="final"&&On(t,n)}):e.type==="parallel"?Hn(e).every(function(n){return Ar(t,n)}):!1}function Xc(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function co(t){return new Set(Oe(t.map(function(e){return e.tags})))}function wa(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(pe(t)||pe(e))return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(i){return wa(t[i],e[i])})}function Qc(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function Kc(t,e){var n=t.exec,r=F(F({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return r}var dt=function(){function t(e){var n=this,r;this.actions=[],this.activities=oo,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||oo,this.meta=Xc(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(r=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&r!==void 0?r:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return Wc(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var r=cn;return new t({value:e,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=cn;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var r=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),pe(e))return[e];var i=Object.keys(e);return i.concat.apply(i,Ae([],fe(i.map(function(o){return r.toStrings(e[o],n).map(function(l){return o+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var r=ji(e,["configuration","transitions","tags","machine"]);return F(F({},r),{tags:Array.from(n)})},t.prototype.matches=function(e){return zi(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;va(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(r!=null&&r.transitions.length)&&r.transitions.some(function(i){return i.target!==void 0||i.actions.length})},t}(),Yc={deferEvents:!1},uo=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=F(F({},Yc),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t}(),$r=new Map,Jc=0,ur={bookId:function(){return"x:".concat(Jc++)},register:function(t,e){return $r.set(t,e),t},get:function(t){return $r.get(t)},free:function(t){$r.delete(t)}};function Hi(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Zc(){var t=Hi();if(t&&"__xstate__"in t)return t.__xstate__}function $c(t){if(!!Hi()){var e=Zc();e&&e.register(t)}}function eu(t,e){e===void 0&&(e={});var n=t.initialState,r=new Set,i=[],o=!1,l=function(){if(!o){for(o=!0;i.length>0;){var u=i.shift();n=t.transition(n,u,s),r.forEach(function(d){return d.next(n)})}o=!1}},c=qc({id:e.id,send:function(u){i.push(u),l()},getSnapshot:function(){return n},subscribe:function(u,d,a){var f=Fn(u,d,a);return r.add(f),f.next(n),{unsubscribe:function(){r.delete(f)}}}}),s={parent:e.parent,self:c,id:e.id||"anonymous",observers:r};return n=t.start?t.start(s):n,c}var tu={sync:!1,autoForward:!1},je;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(je||(je={}));var nu=function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var r=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=je.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(d,a){if(_n(d))return r.batch(d),r.state;var f=Fe(Wr(d,a));if(r.status===je.Stopped)return r.state;if(r.status!==je.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(f.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(f.data)));return r.scheduler.schedule(function(){r.forward(f);var h=r._nextState(f);r.update(h,f)}),r._state},this.sendTo=function(d,a,f){var h=r.parent&&(a===Ot.Parent||r.parent.id===a),p=h?r.parent:pe(a)?r.children.get(a)||ur.get(a):Rc(a)?a:void 0;if(!p){if(!h)throw new Error("Unable to send event to child '".concat(a,"' from service '").concat(r.id,"'."));return}if("machine"in p){if(r.status!==je.Stopped||r.parent!==p||r.state.done){var m=F(F({},d),{name:d.name===mc?"".concat(Rn(r.id)):d.name,origin:r.sessionId});!f&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([p,m]):p.send(m)}}else!f&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([p,d.data]):p.send(d.data)},this._exec=function(d,a,f,h){h===void 0&&(h=r.machine.options.actions);var p=d.exec||hi(d.type,h),m=_e(p)?p:p?p.exec:d.exec;if(m)try{return m(a,f.data,r.machine.config.predictableActionArguments?{action:d,_event:f}:{action:d,state:r.state,_event:f})}catch(ce){throw r.parent&&r.parent.send({type:"xstate.error",data:ce}),ce}switch(d.type){case hn:var g=d;if(typeof g.delay=="number"){r.defer(g);return}else g.to?r.sendTo(g._event,g.to,f===cn):r.send(g._event);break;case ca:r.cancel(d.sendId);break;case ci:{if(r.status!==je.Running)return;var v=d.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[v.id||v.type])break;if(v.type===be.Invoke){var y=ba(v.src),C=r.machine.options.services?r.machine.options.services[y.type]:void 0,D=v.id,k=v.data,I="autoForward"in v?v.autoForward:!!v.forward;if(!C)return;var O=k?Ir(k,a,f):void 0;if(typeof C=="string")return;var N=_e(C)?C(a,f.data,{data:O,src:y,meta:v.meta}):C;if(!N)return;var H=void 0;pn(N)&&(N=O?N.withContext(O):N,H={autoForward:I}),r.spawn(N,D,H)}else r.spawnActivity(v);break}case Vi:{r.stopChild(d.activity.id);break}case ua:var R=d.label,X=d.value;R?r.logger(R,X):r.logger(X);break}};var i=F(F({},t.defaultOptions),n),o=i.clock,l=i.logger,c=i.parent,s=i.id,u=s!==void 0?s:e.id;this.id=u,this.logger=l,this.clock=o,this.parent=c,this.options=i,this.scheduler=new uo({deferEvents:this.options.deferEvents}),this.sessionId=ur.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:on(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var r,i;try{for(var o=de(e.actions),l=o.next();!l.done;l=o.next()){var c=l.value;this.exec(c,e,n)}}catch(s){r={error:s}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},t.prototype.update=function(e,n){var r,i,o,l,c,s,u,d,a=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===cn)&&this.options.execute)this.execute(this.state);else for(var f=void 0;f=this._outgoingQueue.shift();)f[0].send(f[1]);if(this.children.forEach(function(H){a.state.children[H.id]=H}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var h=de(this.eventListeners),p=h.next();!p.done;p=h.next()){var m=p.value;m(e.event)}}catch(H){r={error:H}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}try{for(var g=de(this.listeners),v=g.next();!v.done;v=g.next()){var m=v.value;m(e,e.event)}}catch(H){o={error:H}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}try{for(var y=de(this.contextListeners),C=y.next();!C.done;C=y.next()){var D=C.value;D(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(H){c={error:H}}finally{try{C&&!C.done&&(s=y.return)&&s.call(y)}finally{if(c)throw c.error}}if(this.state.done){var k=e.configuration.find(function(H){return H.type==="final"&&H.parent===a.machine}),I=k&&k.doneData?Ir(k.doneData,e.context,n):void 0;try{for(var O=de(this.doneListeners),N=O.next();!N.done;N=O.next()){var m=N.value;m(Cr(this.id,I))}}catch(H){u={error:H}}finally{try{N&&!N.done&&(d=O.return)&&d.call(O)}finally{if(u)throw u.error}}this._stop(),this._stopChildren()}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===je.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,r){var i=this,o=Fn(e,n,r);this.listeners.add(o.next),this.status!==je.NotStarted&&o.next(this.state);var l=function(){i.doneListeners.delete(l),i.stopListeners.delete(l),o.complete()};return this.status===je.Stopped?o.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){i.listeners.delete(o.next),i.doneListeners.delete(l),i.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===je.Running)return this;this.machine._init(),ur.register(this.sessionId,this),this.initialized=!0,this.status=je.Running;var r=e===void 0?this.initialState:on(this,function(){return Qc(e)?n.machine.resolveState(e):n.machine.resolveState(dt.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,cn)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){_e(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,r,i,o,l,c,s,u,d;try{for(var a=de(this.listeners),f=a.next();!f.done;f=a.next()){var h=f.value;this.listeners.delete(h)}}catch(O){e={error:O}}finally{try{f&&!f.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}try{for(var p=de(this.stopListeners),m=p.next();!m.done;m=p.next()){var h=m.value;h(),this.stopListeners.delete(h)}}catch(O){r={error:O}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}try{for(var g=de(this.contextListeners),v=g.next();!v.done;v=g.next()){var h=v.value;this.contextListeners.delete(h)}}catch(O){o={error:O}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}try{for(var y=de(this.doneListeners),C=y.next();!C.done;C=y.next()){var h=C.value;this.doneListeners.delete(h)}}catch(O){c={error:O}}finally{try{C&&!C.done&&(s=y.return)&&s.call(y)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=je.Stopped,this._initialState=void 0;try{for(var D=de(Object.keys(this.delayedEventsMap)),k=D.next();!k.done;k=D.next()){var I=k.value;this.clock.clearTimeout(this.delayedEventsMap[I])}}catch(O){u={error:O}}finally{try{k&&!k.done&&(d=D.return)&&d.call(D)}finally{if(u)throw u.error}}this.scheduler.clear(),this.scheduler=new uo({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var r=Fe({type:"xstate.stop"}),i=on(e,function(){var o=Oe(Ae([],fe(e.state.configuration),!1).sort(function(d,a){return a.order-d.order}).map(function(d){return wt(d.onExit,e.machine.options.actions)})),l=fe(Br(e.machine,e.state,e.state.context,r,[o],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),c=l[0],s=l[1],u=new dt({value:e.state.value,context:s,_event:r,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:c.filter(function(d){return d.type!==dn&&(d.type!==hn||!!d.to&&d.to!==Ot.Internal)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return u.changed=!0,u});e.update(i,r),e._stopChildren(),ur.free(e.sessionId)}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===je.NotStarted&&this.options.deferEvents)){if(this.status!==je.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(!!e.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var i,o,l=n.state,c=!1,s=[],u=function(h){var p=Fe(h);n.forward(p),l=on(n,function(){return n.machine.transition(l,p,void 0,r||void 0)}),s.push.apply(s,Ae([],fe(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(m){return Kc(m,l)})),!1)),c=c||!!l.changed};try{for(var d=de(e),a=d.next();!a.done;a=d.next()){var f=a.value;u(f)}}catch(h){i={error:h}}finally{try{a&&!a.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}l.changed=c,l.actions=s,n.update(l,Fe(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var r=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var i=Fe(e);if(i.name.indexOf(io)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(io)===0}))throw i.data.data;var o=on(this,function(){return r.machine.transition(r.state,i,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,r;try{for(var i=de(this.forwardTo),o=i.next();!o.done;o=i.next()){var l=o.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this;this.delayedEventsMap[e.id]=this.clock.setTimeout(function(){e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,r){r===void 0&&(r=this.machine.options.actions),this._exec(e,n.context,n._event,r)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);!n||(this.removeChild(e),_e(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,r){if(this.status!==je.Running)return Sa(e,n);if(ao(e))return this.spawnPromise(Promise.resolve(e),n);if(_e(e))return this.spawnCallback(e,n);if(zc(e))return this.spawnActor(e,n);if(wc(e))return this.spawnObservable(e,n);if(pn(e))return this.spawnMachine(e,F(F({},r),{id:n}));if(Ec(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var r=this;n===void 0&&(n={});var i=new t(e,F(F({},this.options),{parent:this,id:n.id||e.id})),o=F(F({},tu),n);o.sync&&i.onTransition(function(c){r.send(fa,{state:c,id:i.id})});var l=i;return this.children.set(i.id,l),o.autoForward&&this.forwardTo.add(i.id),i.onDone(function(c){r.removeChild(i.id),r.send(Fe(c,{origin:i.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var r=eu(e,{id:n,parent:this});return this.children.set(n,r),r},t.prototype.spawnPromise=function(e,n){var r,i=this,o=!1,l;e.then(function(s){o||(l=s,i.removeChild(n),i.send(Fe(Cr(n,s),{origin:n})))},function(s){if(!o){i.removeChild(n);var u=Rn(n,s);try{i.send(Fe(u,{origin:n}))}catch{i.devTools&&i.devTools.send(u,i.state),i.machine.strict&&i.stop()}}});var c=(r={id:n,send:function(){},subscribe:function(s,u,d){var a=Fn(s,u,d),f=!1;return e.then(function(h){f||(a.next(h),!f&&a.complete())},function(h){f||a.error(h)}),{unsubscribe:function(){return f=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},r[Tt]=function(){return this},r);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var r,i=this,o=!1,l=new Set,c=new Set,s,u=function(f){s=f,c.forEach(function(h){return h(f)}),!o&&i.send(Fe(f,{origin:n}))},d;try{d=e(u,function(f){l.add(f)})}catch(f){this.send(Rn(n,f))}if(ao(d))return this.spawnPromise(d,n);var a=(r={id:n,send:function(f){return l.forEach(function(h){return h(f)})},subscribe:function(f){var h=Fn(f);return c.add(h.next),{unsubscribe:function(){c.delete(h.next)}}},stop:function(){o=!0,_e(d)&&d()},toJSON:function(){return{id:n}},getSnapshot:function(){return s}},r[Tt]=function(){return this},r);return this.children.set(n,a),a},t.prototype.spawnObservable=function(e,n){var r,i=this,o,l=e.subscribe(function(s){o=s,i.send(Fe(s,{origin:n}))},function(s){i.removeChild(n),i.send(Fe(Rn(n,s),{origin:n}))},function(){i.removeChild(n),i.send(Fe(Cr(n),{origin:n}))}),c=(r={id:n,send:function(){},subscribe:function(s,u,d){return e.subscribe(s,u,d)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},r[Tt]=function(){return this},r);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(!!n){var r=n(this.state.context,e);this.spawnEffect(e.id,r)}},t.prototype.spawnEffect=function(e,n){var r;this.children.set(e,(r={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},r[Tt]=function(){return this},r))},t.prototype.attachDev=function(){var e=Hi();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(F(F({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:F({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}$c(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Tt]=function(){return this},t.prototype.getSnapshot=function(){return this.status===je.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=bn,t}();function bn(t,e){var n=new nu(t,e);return n}function ru(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function fr(t){return F(F({type:ui},t),{toJSON:function(){t.onDone,t.onError;var e=ji(t,["onDone","onError"]);return F(F({},e),{type:ui,src:ru(t.src)})}})}var dr="",gi="#",ei="*",tn={},nn=function(t){return t[0]===gi},iu=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},ou=function(){function t(e,n,r,i){r===void 0&&(r="context"in e?e.context:void 0);var o=this,l;this.config=e,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(iu(),n),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:da),this.id=this.config.id||Ae([this.machine.key],fe(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?wn(this.config.states,function(u,d){var a,f=new t(u,{},void 0,{parent:o,key:d});return Object.assign(o.idMap,F((a={},a[f.id]=f,a),f.idMap)),f}):tn;var c=0;function s(u){var d,a;u.order=c++;try{for(var f=de(Ea(u)),h=f.next();!h.done;h=f.next()){var p=h.value;s(p)}}catch(m){d={error:m}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(d)throw d.error}}}s(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(u){var d=u.event;return d===dr}):dr in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=at(this.config.entry||this.config.onEntry).map(function(u){return qn(u)}),this.onExit=at(this.config.exit||this.config.onExit).map(function(u){return qn(u)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=at(this.config.invoke).map(function(u,d){var a,f;if(pn(u)){var h=lr(o.id,d);return o.machine.options.services=F((a={},a[h]=u,a),o.machine.options.services),fr({src:h,id:h})}else if(pe(u.src)){var h=u.id||lr(o.id,d);return fr(F(F({},u),{id:h,src:u.src}))}else if(pn(u.src)||_e(u.src)){var h=u.id||lr(o.id,d);return o.machine.options.services=F((f={},f[h]=u.src,f),o.machine.options.services),fr(F(F({id:h},u),{src:h}))}else{var p=u.src;return fr(F(F({id:lr(o.id,d)},u),{src:p}))}}),this.activities=at(this.config.activities).concat(this.invoke).map(function(u){return qi(u)}),this.transition=this.transition.bind(this),this.tags=at(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||ka(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var r=this.options,i=r.actions,o=r.activities,l=r.guards,c=r.services,s=r.delays;return new t(this.config,{actions:F(F({},i),e.actions),activities:F(F({},o),e.activities),guards:F(F({},l),e.guards),services:F(F({},c),e.services),delays:F(F({},s),e.delays)},n!=null?n:this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return _e(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:wn(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===dr,r=this.transitions.filter(function(i){var o=i.eventType===e;return n?o:o||i.eventType===ei});return this.__cache.candidates[e]=r,r},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var r=function(o,l){var c=_e(o)?"".concat(e.id,":delay[").concat(l,"]"):o,s=Gc(c,e.id);return e.onEntry.push(Ca(s,{delay:o})),e.onExit.push(Bc(s)),s},i=_n(n)?n.map(function(o,l){var c=r(o.delay,l);return F(F({},o),{event:c})}):Oe(Object.keys(n).map(function(o,l){var c=n[o],s=pe(c)?{target:c}:c,u=isNaN(+o)?o:+o,d=r(u,l);return at(s).map(function(a){return F(F({},a),{event:d,delay:u})})}));return i.map(function(o){var l=o.delay;return F(F({},e.formatTransition(o)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,r=this;if(!e)return[];var i=e instanceof dt?e.value:xn(e,this.delimiter);if(pe(i)){var o=this.getStateNode(i).initial;return o!==void 0?this.getStateNodes((n={},n[i]=o,n)):[this,this.states[i]]}var l=Object.keys(i),c=[this];return c.push.apply(c,Ae([],fe(Oe(l.map(function(s){return r.getStateNode(s).getStateNodes(i[s])}))),!1)),c},t.prototype.handles=function(e){var n=pa(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof dt?e:dt.create(e),r=Array.from(Pn([],this.getStateNodes(n.value)));return new dt(F(F({},n),{value:this.resolve(n.value),configuration:r,done:Ar(r,this),tags:co(r),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,r){var i=this.getStateNode(e),o=i.next(n,r);return!o||!o.transitions.length?this.next(n,r):o},t.prototype.transitionCompoundNode=function(e,n,r){var i=Object.keys(e),o=this.getStateNode(i[0]),l=o._transition(e[i[0]],n,r);return!l||!l.transitions.length?this.next(n,r):l},t.prototype.transitionParallelNode=function(e,n,r){var i,o,l={};try{for(var c=de(Object.keys(e)),s=c.next();!s.done;s=c.next()){var u=s.value,d=e[u];if(!!d){var a=this.getStateNode(u),f=a._transition(d,n,r);f&&(l[u]=f)}}}catch(y){i={error:y}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}var h=Object.keys(l).map(function(y){return l[y]}),p=Oe(h.map(function(y){return y.transitions})),m=h.some(function(y){return y.transitions.length>0});if(!m)return this.next(n,r);var g=Oe(h.map(function(y){return y.entrySet})),v=Oe(Object.keys(l).map(function(y){return l[y].configuration}));return{transitions:p,entrySet:g,exitSet:Oe(h.map(function(y){return y.exitSet})),configuration:v,source:n,actions:Oe(Object.keys(l).map(function(y){return l[y].actions}))}},t.prototype._transition=function(e,n,r){return pe(e)?this.transitionLeafNode(e,n,r):Object.keys(e).length===1?this.transitionCompoundNode(e,n,r):this.transitionParallelNode(e,n,r)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,Fe(n))},t.prototype.next=function(e,n){var r,i,o=this,l=n.name,c=[],s=[],u;try{for(var d=de(this.getCandidates(l)),a=d.next();!a.done;a=d.next()){var f=a.value,h=f.cond,p=f.in,m=e.context,g=p?pe(p)&&nn(p)?e.matches(xn(this.getStateNodeById(p).path,this.delimiter)):zi(xn(p,this.delimiter),Cc(this.path.slice(0,-2))(e.value)):!0,v=!1;try{v=!h||_a(this.machine,h,m,n,e)}catch(k){throw new Error("Unable to evaluate guard '".concat(h.name||h.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(k.message))}if(v&&g){f.target!==void 0&&(s=f.target),c.push.apply(c,Ae([],fe(f.actions),!1)),u=f;break}}}catch(k){r={error:k}}finally{try{a&&!a.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}if(!!u){if(!s.length)return{transitions:[u],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var y=Oe(s.map(function(k){return o.getRelativeStateNodes(k,e.historyValue)})),C=!!u.internal,D=[];return C||s.forEach(function(k){D.push.apply(D,Ae([],fe(o.getExternalReentryNodes(k)),!1))}),{transitions:[u],entrySet:D,exitSet:C?[]:[this],configuration:y,source:e,actions:c}}},t.prototype.getExternalReentryNodes=function(e){for(var n=[],r=fe(e.order>this.order?[e,this]:[this,e],2),i=r[0],o=r[1];i&&i!==o;)n.push(i),i=i.parent;return i!==o?[]:(n.push(o),n)},t.prototype.getActions=function(e,n,r,i,o,l,c){var s,u,d,a,f=this,h=Pn([],l?this.getStateNodes(l.value):[this]);try{for(var p=de(e),m=p.next();!m.done;m=p.next()){var g=m.value;(!On(h,g)||On(r.entrySet,g.parent))&&r.entrySet.push(g)}}catch(R){s={error:R}}finally{try{m&&!m.done&&(u=p.return)&&u.call(p)}finally{if(s)throw s.error}}try{for(var v=de(h),y=v.next();!y.done;y=v.next()){var g=y.value;(!On(e,g)||On(r.exitSet,g.parent))&&r.exitSet.push(g)}}catch(R){d={error:R}}finally{try{y&&!y.done&&(a=v.return)&&a.call(v)}finally{if(d)throw d.error}}var C=Oe(r.entrySet.map(function(R){var X=[];if(R.type!=="final")return X;var ce=R.parent;if(!ce.parent)return X;X.push(cr(R.id,R.doneData),cr(ce.id,R.doneData?Ir(R.doneData,i,o):void 0));var me=ce.parent;return me.type==="parallel"&&Hn(me).every(function(ve){return Ar(r.configuration,ve)})&&X.push(cr(me.id)),X}));r.exitSet.sort(function(R,X){return X.order-R.order}),r.entrySet.sort(function(R,X){return R.order-X.order});var D=new Set(r.entrySet),k=new Set(r.exitSet),I=Array.from(D).map(function(R){var X=R.onEntry,ce=R.activities.map(function(me){return Lc(me)});return wt(c?Ae(Ae([],fe(X),!1),fe(ce),!1):Ae(Ae([],fe(ce),!1),fe(X),!1),f.machine.options.actions)}).concat([C.map(Oc)]),O=Array.from(k).map(function(R){return wt(Ae(Ae([],fe(R.onExit),!1),fe(R.activities.map(function(X){return xc(X)})),!1),f.machine.options.actions)}),N=O.concat([wt(r.actions,this.machine.options.actions)]).concat(I);if(n){var H=wt(Oe(Ae([],fe(e),!1).sort(function(R,X){return X.order-R.order}).map(function(R){return R.onExit})),this.machine.options.actions).filter(function(R){return R.type!==dn&&(R.type!==hn||!!R.to&&R.to!==Ot.Internal)});return N.concat([H])}return N},t.prototype.transition=function(e,n,r,i){e===void 0&&(e=this.initialState);var o=Fe(n),l;if(e instanceof dt)l=r===void 0?e:this.resolveState(dt.from(e,r));else{var c=pe(e)?this.resolve(Mr(this.getResolvedPath(e))):this.resolve(e),s=r!=null?r:this.machine.context;l=this.resolveState(dt.from(c,s))}if(this.strict&&!this.events.includes(o.name)&&!Sc(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var u=this._transition(l.value,l,o)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:l,actions:[]},d=Pn([],this.getStateNodes(l.value)),a=u.configuration.length?Pn(d,u.configuration):d;return u.configuration=Ae([],fe(a),!1),this.resolveTransition(u,l,l.context,i,o)},t.prototype.resolveRaisedTransition=function(e,n,r,i){var o,l=e.actions;return e=this.transition(e,n,void 0,i),e._event=r,e.event=r.data,(o=e.actions).unshift.apply(o,Ae([],fe(l),!1)),e},t.prototype.resolveTransition=function(e,n,r,i,o){var l,c,s,u,d=this;o===void 0&&(o=cn);var a=e.configuration,f=!n||e.transitions.length>0,h=f?e.configuration:n?n.configuration:[],p=Ar(h,this),m=f?Hc(this.machine,a):void 0,g=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,v=this.getActions(new Set(h),p,e,r,o,n,i),y=n?F({},n.activities):{};try{for(var C=de(v),D=C.next();!D.done;D=C.next()){var k=D.value;try{for(var I=(s=void 0,de(k)),O=I.next();!O.done;O=I.next()){var N=O.value;N.type===ci?y[N.activity.id||N.activity.type]=N:N.type===Vi&&(y[N.activity.id||N.activity.type]=!1)}}catch(Ce){s={error:Ce}}finally{try{O&&!O.done&&(u=I.return)&&u.call(I)}finally{if(s)throw s.error}}}}catch(Ce){l={error:Ce}}finally{try{D&&!D.done&&(c=C.return)&&c.call(C)}finally{if(l)throw l.error}}var H=fe(Br(this,n,r,o,v,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),R=H[0],X=H[1],ce=fe(kc(R,function(Ce){return Ce.type===dn||Ce.type===hn&&Ce.to===Ot.Internal}),2),me=ce[0],ve=ce[1],Se=R.filter(function(Ce){var Ye;return Ce.type===ci&&((Ye=Ce.activity)===null||Ye===void 0?void 0:Ye.type)===ui}),Ke=Se.reduce(function(Ce,Ye){return Ce[Ye.activity.id]=Vc(Ye.activity,d.machine,X,o),Ce},n?F({},n.children):{}),Te=new dt({value:m||n.value,context:X,_event:o,_sessionid:n?n._sessionid:null,historyValue:m?g?Tc(g,m):void 0:n?n.historyValue:void 0,history:!m||e.source?n:void 0,actions:m?ve:[],activities:m?y:n?n.activities:{},events:[],configuration:h,transitions:e.transitions,children:Ke,done:p,tags:co(h),machine:this}),_=r!==X;Te.changed=o.name===fa||_;var $=Te.history;$&&delete $.history;var re=!p&&(this._transient||a.some(function(Ce){return Ce._transient}));if(!f&&(!re||o.name===dr))return Te;var ye=Te;if(!p)for(re&&(ye=this.resolveRaisedTransition(ye,{type:pc},o,i));me.length;){var De=me.shift();ye=this.resolveRaisedTransition(ye,De._event,o,i)}var ot=ye.changed||($?!!ye.actions.length||_||typeof $.value!=typeof ye.value||!wa(ye.value,$.value):void 0);return ye.changed=ot,ye.history=$,ye},t.prototype.getStateNode=function(e){if(nn(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=nn(e)?e.slice(gi.length):e;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&nn(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=di(e,this.delimiter).slice(),r=this;n.length;){var i=n.shift();if(!i.length)break;r=r.getStateNode(i)}return r},t.prototype.resolve=function(e){var n,r=this;if(!e)return this.initialStateValue||tn;switch(this.type){case"parallel":return wn(this.initialStateValue,function(o,l){return o?r.getStateNode(l).resolve(e[l]||o):tn});case"compound":if(pe(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(n={},n[e]=i.initialStateValue,n):e}return Object.keys(e).length?wn(e,function(o,l){return o?r.getStateNode(l).resolve(o):tn}):this.initialStateValue||{};default:return e||tn}},t.prototype.getResolvedPath=function(e){if(nn(e)){var n=this.machine.idMap[e.slice(gi.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return di(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=so(this.states,function(r){return r.initialStateValue||tn},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=Lr(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var r=this.getStateNodes(e);return this.resolveTransition({configuration:r,entrySet:Ae([],fe(r),!1),exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n!=null?n:this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;pe(n.target)?e=nn(n.target)?Mr(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,r){return r===void 0&&(r=!0),r?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(Lr(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=br(this.initialStateValue);return Oe(n.map(function(r){return e.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=fe(e),r=n[0],i=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var o=this.getStateNode(r);if(o.type==="history")return o.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(i)},t.prototype.historyValue=function(e){if(!!Object.keys(this.states).length)return{current:e||this.initialStateValue,states:so(this.states,function(n,r){if(!e)return n.historyValue();var i=pe(e)?void 0:e[r];return n.historyValue(i||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!e){var i=this.target;return i?Oe(br(i).map(function(l){return r.getFromRelativePath(l)})):r.initialStateNodes}var o=Ac(r.path,"states")(e).current;return pe(o)?[r.getStateNode(o)]:Oe(br(o).map(function(l){return n.history==="deep"?r.getFromRelativePath(l):[r.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=Oe(Object.keys(this.states).map(function(r){return e.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,r,i;if(this.__cache.events)return this.__cache.events;var o=this.states,l=new Set(this.ownEvents);if(o)try{for(var c=de(Object.keys(o)),s=c.next();!s.done;s=c.next()){var u=s.value,d=o[u];if(d.states)try{for(var a=(r=void 0,de(d.events)),f=a.next();!f.done;f=a.next()){var h=f.value;l.add("".concat(h))}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}}catch(p){e={error:p}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(r){if(!pe(r))return r;var i=r[0]===n.delimiter;if(i&&!n.parent)return n.getStateNodeByPath(r.slice(1));var o=i?n.key+r:r;if(n.parent)try{var l=n.parent.getStateNodeByPath(o);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,r=Pc(e.target),i="internal"in e?e.internal:r?r.some(function(s){return pe(s)&&s[0]===n.delimiter}):!0,o=this.machine.options.guards,l=this.resolveTarget(r),c=F(F({},e),{actions:wt(at(e.actions)),cond:ya(e.cond,o),target:l,source:this,internal:i,eventType:e.event,toJSON:function(){return F(F({},c),{target:c.target?c.target.map(function(s){return"#".concat(s.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,r=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var o=this.config.on,l=ei,c=o[l],s=c===void 0?[]:c,u=ji(o,[typeof l=="symbol"?l:l+""]);i=Oe(Object.keys(u).map(function(y){var C=en(y,u[y]);return C}).concat(en(ei,s)))}var d=this.config.always?en("",this.config.always):[],a=this.config.onDone?en(String(cr(this.id)),this.config.onDone):[],f=Oe(this.invoke.map(function(y){var C=[];return y.onDone&&C.push.apply(C,Ae([],fe(en(String(Cr(y.id)),y.onDone)),!1)),y.onError&&C.push.apply(C,Ae([],fe(en(String(Rn(y.id)),y.onError)),!1)),C})),h=this.after,p=Oe(Ae(Ae(Ae(Ae([],fe(a),!1),fe(f),!1),fe(i),!1),fe(d),!1).map(function(y){return at(y).map(function(C){return r.formatTransition(C)})}));try{for(var m=de(h),g=m.next();!g.done;g=m.next()){var v=g.value;p.push(v)}}catch(y){e={error:y}}finally{try{g&&!g.done&&(n=m.return)&&n.call(m)}finally{if(e)throw e.error}}return p},t}(),fo=!1;function tr(t,e){return!ha&&!t.predictableActionArguments&&!fo&&(fo=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new ou(t,e)}var su=Nc,au=Wn;Wn.default=Wn;Wn.stable=Oa;Wn.stableStringify=Oa;var xr="[...]",Ra="[Circular]",Xt=[],Gt=[];function Pa(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Wn(t,e,n,r){typeof r>"u"&&(r=Pa()),mi(t,"",0,[],void 0,0,r);var i;try{Gt.length===0?i=JSON.stringify(t,e,n):i=JSON.stringify(t,Da(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Xt.length!==0;){var o=Xt.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function un(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),Xt.push([r,n,e,i])):Gt.push([e,n,t]):(r[n]=t,Xt.push([r,n,e]))}function mi(t,e,n,r,i,o,l){o+=1;var c;if(typeof t=="object"&&t!==null){for(c=0;c<r.length;c++)if(r[c]===t){un(Ra,t,e,i);return}if(typeof l.depthLimit<"u"&&o>l.depthLimit){un(xr,t,e,i);return}if(typeof l.edgesLimit<"u"&&n+1>l.edgesLimit){un(xr,t,e,i);return}if(r.push(t),Array.isArray(t))for(c=0;c<t.length;c++)mi(t[c],c,c,r,t,o,l);else{var s=Object.keys(t);for(c=0;c<s.length;c++){var u=s[c];mi(t[u],u,c,r,t,o,l)}}r.pop()}}function lu(t,e){return t<e?-1:t>e?1:0}function Oa(t,e,n,r){typeof r>"u"&&(r=Pa());var i=vi(t,"",0,[],void 0,0,r)||t,o;try{Gt.length===0?o=JSON.stringify(i,e,n):o=JSON.stringify(i,Da(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Xt.length!==0;){var l=Xt.pop();l.length===4?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return o}function vi(t,e,n,r,i,o,l){o+=1;var c;if(typeof t=="object"&&t!==null){for(c=0;c<r.length;c++)if(r[c]===t){un(Ra,t,e,i);return}try{if(typeof t.toJSON=="function")return}catch{return}if(typeof l.depthLimit<"u"&&o>l.depthLimit){un(xr,t,e,i);return}if(typeof l.edgesLimit<"u"&&n+1>l.edgesLimit){un(xr,t,e,i);return}if(r.push(t),Array.isArray(t))for(c=0;c<t.length;c++)vi(t[c],c,c,r,t,o,l);else{var s={},u=Object.keys(t).sort(lu);for(c=0;c<u.length;c++){var d=u[c];vi(t[d],d,c,r,t,o,l),s[d]=t[d]}if(typeof i<"u")Xt.push([i,e,t]),i[e]=s;else return s}r.pop()}}function Da(t){return t=typeof t<"u"?t:function(e,n){return n},function(e,n){if(Gt.length>0)for(var r=0;r<Gt.length;r++){var i=Gt[r];if(i[1]===e&&i[0]===n){n=i[2],Gt.splice(r,1);break}}return t.call(this,e,n)}}const cu=au;function ho(t){return typeof t=="function"?t():t}function yi(t,e){try{return JSON.stringify(t,e)}catch{return cu(t,e)}}function Ma(t,e,n){var r,i,o={};try{for(var l=hc(e),c=l.next();!c.done;c=l.next()){var s=c.value;o[s]=t[s]}}catch(d){r={error:d}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}var u=JSON.parse(yi(o,n));return yi(pt(pt({},t),u))}function _i(t,e){t.machine,t.configuration,t.history;var n=dc(t,["machine","configuration","history"]);return Ma(n,["context","event","_event"],e)}function Ia(t,e){return Ma(t.definition,["context"],e)}function uu(t,e){t===void 0&&(t=globalThis.__xstate__);var n=new Map,r=t.onRegister(function(i){n.set(i.sessionId,i)});return tr({initial:"pendingConnection",context:{client:void 0},states:{pendingConnection:{},connected:{on:{"service.state":{actions:function(i,o){return i.client.send(o)}},"service.event":{actions:function(i,o){return i.client.send(o)}},"service.register":{actions:function(i,o){return i.client.send(o)}},"service.stop":{actions:function(i,o){return i.client.send(o)}},"xstate.event":{actions:function(i,o){var l=o.event,c=JSON.parse(l),s=n.get(c.origin);s==null||s.send(c)}},unload:{actions:function(i){i.client.send({type:"xstate.disconnect"})}},disconnect:"disconnected"}},disconnected:{entry:function(){r.unsubscribe()},type:"final"}},on:{"xstate.inspecting":{target:".connected",actions:[su({client:function(i,o){return o.client}}),function(i){t.services.forEach(function(o){var l;(l=i.client)===null||l===void 0||l.send({type:"service.register",machine:Ia(o.machine,e==null?void 0:e.serialize),state:_i(o.state||o.initialState,e==null?void 0:e.serialize),sessionId:o.sessionId})})}]}}})}var ti=new Map;function fu(){var t=new Set,e=new Set;return{services:t,register:function(n){t.add(n),ti.set(n.sessionId,n),e.forEach(function(r){return r(n)}),n.onStop(function(){t.delete(n),ti.delete(n.sessionId)})},unregister:function(n){t.delete(n),ti.delete(n.sessionId)},onRegister:function(n){return e.add(n),t.forEach(function(r){return n(r)}),{unsubscribe:function(){e.delete(n)}}}}}var du={url:"https://stately.ai/viz?inspect",iframe:function(){return document.querySelector("iframe[data-xstate]")},devTools:function(){var t=fu();return globalThis.__xstate__=t,t},serialize:void 0},hu=function(t){var e=pt(pt({},du),t);return pt(pt({},e),{url:new URL(e.url),iframe:ho(e.iframe),devTools:ho(e.devTools)})},po=new Set;function pu(t){var e=hu(t),n=e.iframe,r=e.url,i=e.devTools;if(n===null){console.warn("No suitable <iframe> found to embed the inspector. Please pass an <iframe> element to `inspect(iframe)` or create an <iframe data-xstate></iframe> element.");return}var o=uu(i,t),l=bn(o).start(),c=new Set,s=l.subscribe(function(h){c.forEach(function(p){return p.next(h)})}),u,d,a=function(h){if(typeof h.data=="object"&&h.data!==null&&"type"in h.data){n&&!u&&(u=n.contentWindow),d||(d={send:function(m){u.postMessage(m,r.origin)}});var p=pt(pt({},h.data),{client:d});l.send(p)}};window.addEventListener("message",a),window.addEventListener("unload",function(){l.send({type:"unload"})});var f=function(h){return yi(h,t==null?void 0:t.serialize)};return i.onRegister(function(h){var p,m=h.state||h.initialState;if(l.send({type:"service.register",machine:Ia(h.machine,t==null?void 0:t.serialize),state:_i(m,t==null?void 0:t.serialize),sessionId:h.sessionId,id:h.id,parent:(p=h.parent)===null||p===void 0?void 0:p.sessionId}),l.send({type:"service.event",event:f(m._event),sessionId:h.sessionId}),!po.has(h)){po.add(h);var g=h.send.bind(h);h.send=function(y,C){return l.send({type:"service.event",event:f(Fe(Wr(y,C))),sessionId:h.sessionId}),g(y,C)}}h.subscribe(function(v){v!==void 0&&l.send({type:"service.state",state:_i(v,t==null?void 0:t.serialize),sessionId:h.sessionId})}),h.onStop(function(){l.send({type:"service.stop",sessionId:h.sessionId})})}),n?(n.addEventListener("load",function(){u=n.contentWindow}),n.setAttribute("src",String(r))):u=window.open(String(r),"xstateinspector"),{send:function(h){l.send(h)},subscribe:function(h,p,m){var g=Fn(h,p,m);return c.add(g),g.next(l.state),{unsubscribe:function(){c.delete(g)}}},disconnect:function(){l.send("disconnect"),window.removeEventListener("message",a),s.unsubscribe()}}}function Wi(t){const e=t-1;return e*e*e+1}function Xn(t,{delay:e=0,duration:n=400,easing:r=Qt}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:o=>`opacity: ${o*i}`}}function gu(t,{delay:e=0,duration:n=400,easing:r=Wi,x:i=0,y:o=0,opacity:l=0}={}){const c=getComputedStyle(t),s=+c.opacity,u=c.transform==="none"?"":c.transform,d=s*(1-l);return{delay:e,duration:n,easing:r,css:(a,f)=>`
			transform: ${u} translate(${(1-a)*i}px, ${(1-a)*o}px);
			opacity: ${s-d*f}`}}function Fr(t,{delay:e=0,duration:n=400,easing:r=Wi}={}){const i=getComputedStyle(t),o=+i.opacity,l=parseFloat(i.height),c=parseFloat(i.paddingTop),s=parseFloat(i.paddingBottom),u=parseFloat(i.marginTop),d=parseFloat(i.marginBottom),a=parseFloat(i.borderTopWidth),f=parseFloat(i.borderBottomWidth);return{delay:e,duration:n,easing:r,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*o};height: ${h*l}px;padding-top: ${h*c}px;padding-bottom: ${h*s}px;margin-top: ${h*u}px;margin-bottom: ${h*d}px;border-top-width: ${h*a}px;border-bottom-width: ${h*f}px;`}}function mu(t,{from:e,to:n},r={}){const i=getComputedStyle(t),o=i.transform==="none"?"":i.transform,[l,c]=i.transformOrigin.split(" ").map(parseFloat),s=e.left+e.width*l/n.width-(n.left+l),u=e.top+e.height*c/n.height-(n.top+c),{delay:d=0,duration:a=h=>Math.sqrt(h)*120,easing:f=Wi}=r;return{delay:d,duration:ee(a)?a(Math.sqrt(s*s+u*u)):a,easing:f,css:(h,p)=>{const m=p*s,g=p*u,v=h+p*e.width/n.width,y=h+p*e.height/n.height;return`transform: ${o} translate(${m}px, ${g}px) scale(${v}, ${y});`}}}const vu={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},yu=()=>{const{subscribe:t,update:e}=Qe([]);let n=0;const r={},i=u=>u instanceof Object;return{subscribe:t,push:(u,d={})=>{const a={target:"default",...i(u)?u:{...d,msg:u}},f=r[a.target]||{},h={...vu,...f,...a,theme:{...f.theme,...a.theme},classes:[...f.classes||[],...a.classes||[]],id:++n};return e(p=>h.reversed?[...p,h]:[h,...p]),n},pop:u=>{e(d=>{if(!d.length||u===0)return[];if(i(u))return d.filter(f=>u(f));const a=u||Math.max(...d.map(f=>f.id));return d.filter(f=>f.id!==a)})},set:(u,d={})=>{const a=i(u)?{...u}:{...d,id:u};e(f=>{const h=f.findIndex(p=>p.id===a.id);return h>-1&&(f[h]={...f[h],...a}),f})},_init:(u="default",d={})=>(r[u]=d,r)}},Qn=yu();function go(t){return Object.prototype.toString.call(t)==="[object Date]"}function bi(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,o)=>bi(t[o],i));return i=>r.map(o=>o(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(go(t)&&go(e)){t=t.getTime(),e=e.getTime();const o=e-t;return l=>new Date(t+l*o)}const r=Object.keys(e),i={};return r.forEach(o=>{i[o]=bi(t[o],e[o])}),o=>{const l={};return r.forEach(c=>{l[c]=i[c](o)}),l}}if(n==="number"){const r=e-t;return i=>t+i*r}throw new Error(`Cannot interpolate ${n} values`)}function _u(t,e={}){const n=Qe(t);let r,i=t;function o(l,c){if(t==null)return n.set(t=l),Promise.resolve();i=l;let s=r,u=!1,{delay:d=0,duration:a=400,easing:f=Qt,interpolate:h=bi}=G(G({},e),c);if(a===0)return s&&(s.abort(),s=null),n.set(t=i),Promise.resolve();const p=Jn()+d;let m;return r=Zn(g=>{if(g<p)return!0;u||(m=h(t,l),typeof a=="function"&&(a=a(t,l)),u=!0),s&&(s.abort(),s=null);const v=g-p;return v>a?(n.set(t=l),!1):(n.set(t=m(f(v/a))),!0)}),r.promise}return{set:o,update:(l,c)=>o(l(i,t),c),subscribe:n.subscribe}}function bu(t){let e,n=t[0].msg+"",r;return{c(){e=new $l(!1),r=lt(),e.a=r},m(i,o){e.m(n,i,o),T(i,r,o)},p(i,o){o&1&&n!==(n=i[0].msg+"")&&e.p(n)},i:ue,o:ue,d(i){i&&E(r),i&&e.d()}}}function Cu(t){let e,n,r;const i=[t[6]()];var o=t[0].component.src;function l(c){let s={};for(let u=0;u<i.length;u+=1)s=G(s,i[u]);return{props:s}}return o&&(e=Pr(o,l())),{c(){e&&se(e.$$.fragment),n=lt()},m(c,s){e&&ie(e,c,s),T(c,n,s),r=!0},p(c,s){const u=s&64?W(i,[zn(c[6]())]):{};if(o!==(o=c[0].component.src)){if(e){Mt();const d=e;w(d.$$.fragment,1,0,()=>{oe(d,1)}),It()}o?(e=Pr(o,l()),se(e.$$.fragment),S(e.$$.fragment,1),ie(e,n.parentNode,n)):e=null}else o&&e.$set(u)},i(c){r||(e&&S(e.$$.fragment,c),r=!0)},o(c){e&&w(e.$$.fragment,c),r=!1},d(c){c&&E(n),e&&oe(e,c)}}}function mo(t){let e,n,r;return{c(){e=A("div"),e.textContent="\u2715",P(e,"class","_toastBtn pe svelte-5er0t9"),P(e,"role","button"),P(e,"tabindex","-1")},m(i,o){T(i,e,o),n||(r=ne(e,"click",t[3]),n=!0)},p:ue,d(i){i&&E(e),n=!1,r()}}}function Au(t){let e,n,r,i,o,l,c,s,u,d;const a=[Cu,bu],f=[];function h(m,g){return m[0].component?0:1}r=h(t),i=f[r]=a[r](t);let p=t[0].dismissable&&mo(t);return{c(){e=A("div"),n=A("div"),i.c(),o=te(),p&&p.c(),l=te(),c=A("progress"),P(n,"role","status"),P(n,"class","_toastMsg svelte-5er0t9"),or(n,"pe",t[0].component),P(c,"class","_toastBar svelte-5er0t9"),c.value=t[1],P(e,"class","_toastItem svelte-5er0t9"),or(e,"pe",t[0].pausable)},m(m,g){T(m,e,g),M(e,n),f[r].m(n,null),M(e,o),p&&p.m(e,null),M(e,l),M(e,c),s=!0,u||(d=[ne(e,"mouseenter",t[4]),ne(e,"mouseleave",t[5])],u=!0)},p(m,[g]){let v=r;r=h(m),r===v?f[r].p(m,g):(Mt(),w(f[v],1,1,()=>{f[v]=null}),It(),i=f[r],i?i.p(m,g):(i=f[r]=a[r](m),i.c()),S(i,1),i.m(n,null)),(!s||g&1)&&or(n,"pe",m[0].component),m[0].dismissable?p?p.p(m,g):(p=mo(m),p.c(),p.m(e,l)):p&&(p.d(1),p=null),(!s||g&2)&&(c.value=m[1]),(!s||g&1)&&or(e,"pe",m[0].pausable)},i(m){s||(S(i),s=!0)},o(m){w(i),s=!1},d(m){m&&E(e),f[r].d(),p&&p.d(),u=!1,z(d)}}}function Su(t,e,n){let r,{item:i}=e;const o=_u(i.initial,{duration:i.duration,easing:Qt});Ne(t,o,p=>n(1,r=p));const l=()=>Qn.pop(i.id),c=()=>{(r===1||r===0)&&l()};let s=i.initial,u=s,d=!1;const a=()=>{i.pausable&&!d&&r!==s&&(o.set(r,{duration:0}),d=!0)},f=()=>{if(d){const p=i.duration,m=p-p*((r-u)/(s-u));o.set(s,{duration:m}).then(c),d=!1}},h=()=>{const{props:p={},sendIdTo:m}=i.component;return m&&(p[m]=i.id),p};return Vt(()=>{typeof i.onpop=="function"&&i.onpop(i.id)}),t.$$set=p=>{"item"in p&&n(0,i=p.item)},t.$$.update=()=>{t.$$.dirty&1&&typeof i.progress<"u"&&n(0,i.next=i.progress,i),t.$$.dirty&131&&s!==i.next&&(n(7,s=i.next),u=r,d=!1,o.set(s).then(c))},[i,r,o,l,a,f,h,s]}class Eu extends Pe{constructor(e){super(),Re(this,e,Su,Au,ke,{item:0})}}function vo(t,e,n){const r=t.slice();return r[5]=e[n],r}function yo(t,e){let n,r,i,o,l,c,s,u,d=ue,a;return r=new Eu({props:{item:e[5]}}),{key:t,first:null,c(){n=A("li"),se(r.$$.fragment),i=te(),P(n,"class",o=Rr(e[5].classes.join(" "))+" svelte-yh90az"),P(n,"style",l=e[1](e[5].theme)),this.first=n},m(f,h){T(f,n,h),ie(r,n,null),M(n,i),a=!0},p(f,h){e=f;const p={};h&1&&(p.item=e[5]),r.$set(p),(!a||h&1&&o!==(o=Rr(e[5].classes.join(" "))+" svelte-yh90az"))&&P(n,"class",o),(!a||h&1&&l!==(l=e[1](e[5].theme)))&&P(n,"style",l)},r(){u=n.getBoundingClientRect()},f(){ic(n),d(),ia(n,u)},a(){d(),d=rc(n,u,mu,{duration:200})},i(f){a||(S(r.$$.fragment,f),it(()=>{s&&s.end(1),c=Gi(n,gu,e[5].intro),c.start()}),a=!0)},o(f){w(r.$$.fragment,f),c&&c.invalidate(),s=ac(n,Xn,{}),a=!1},d(f){f&&E(n),oe(r),f&&s&&s.end()}}}function ku(t){let e,n=[],r=new Map,i,o=t[0];const l=c=>c[5].id;for(let c=0;c<o.length;c+=1){let s=vo(t,o,c),u=l(s);r.set(u,n[c]=yo(u,s))}return{c(){e=A("ul");for(let c=0;c<n.length;c+=1)n[c].c();P(e,"class","_toastContainer svelte-yh90az")},m(c,s){T(c,e,s);for(let u=0;u<n.length;u+=1)n[u].m(e,null);i=!0},p(c,[s]){if(s&3){o=c[0],Mt();for(let u=0;u<n.length;u+=1)n[u].r();n=uc(n,s,l,1,c,o,r,e,cc,yo,null,vo);for(let u=0;u<n.length;u+=1)n[u].a();It()}},i(c){if(!i){for(let s=0;s<o.length;s+=1)S(n[s]);i=!0}},o(c){for(let s=0;s<n.length;s+=1)w(n[s]);i=!1},d(c){c&&E(e);for(let s=0;s<n.length;s+=1)n[s].d()}}}function Tu(t,e,n){let r;Ne(t,Qn,s=>n(4,r=s));let{options:i={}}=e,{target:o="default"}=e,l;const c=s=>Object.keys(s).reduce((u,d)=>`${u}${d}:${s[d]};`,"");return t.$$set=s=>{"options"in s&&n(2,i=s.options),"target"in s&&n(3,o=s.target)},t.$$.update=()=>{t.$$.dirty&12&&Qn._init(o,i),t.$$.dirty&24&&n(0,l=r.filter(s=>s.target===o))},[l,c,i,o,r]}class wu extends Pe{constructor(e){super(),Re(this,e,Tu,ku,ke,{options:2,target:3})}}var Nn;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(Nn||(Nn={}));const Ru="headlessui-open-closed-context";function Pu(){return yn(Ru)}function Ci(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Ci),r}let Ou=0;function Du(){return++Ou}function Xr(){return Du()}let rn=new Set,Et=new Map;function _o(t){t.setAttribute("aria-hidden","true"),t.inert=!0}function bo(t){let e=Et.get(t);!e||(e["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",e["aria-hidden"]),t.inert=e.inert)}function Mu(t,e=!0){if(!e||!t)return;let n=t;rn.add(n);for(let r of Et.keys())r.contains(n)&&(bo(r),Et.delete(r));return document.querySelectorAll("body > *").forEach(r=>{if(r instanceof HTMLElement){for(let i of rn)if(r.contains(i))return;rn.size===1&&(Et.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),_o(r))}}),()=>{if(rn.delete(n),rn.size>0)document.querySelectorAll("body > *").forEach(r=>{if(r instanceof HTMLElement&&!Et.has(r)){for(let i of rn)if(r.contains(i))return;Et.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),_o(r)}});else for(let r of Et.keys())bo(r),Et.delete(r)}}function Ai(t,e){for(let n of t)if(n.contains(e))return!0;return!1}var Nr;(function(t){t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab"})(Nr||(Nr={}));let Iu=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var He;(function(t){t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll"})(He||(He={}));var Rt;(function(t){t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow"})(Rt||(Rt={}));var Gr;(function(t){t[t.Previous=-1]="Previous",t[t.Next=1]="Next"})(Gr||(Gr={}));function Bu(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(Iu))}var Co;(function(t){t[t.Strict=0]="Strict",t[t.Loose=1]="Loose"})(Co||(Co={}));function Sn(t){t==null||t.focus({preventScroll:!0})}function Ao(t,e){let n=Array.isArray(t)?t:Bu(t),r=document.activeElement,i=(()=>{if(e&(He.First|He.Next))return Gr.Next;if(e&(He.Previous|He.Last))return Gr.Previous;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),o=(()=>{if(e&He.First)return 0;if(e&He.Previous)return Math.max(0,n.indexOf(r))-1;if(e&He.Next)return Math.max(0,n.indexOf(r))+1;if(e&He.Last)return n.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=e&He.NoScroll?{preventScroll:!0}:{},c=0,s=n.length,u;do{if(c>=s||c+s<=0)return Rt.Error;let d=o+c;if(e&He.WrapAround)d=(d+s)%s;else{if(d<0)return Rt.Underflow;if(d>=s)return Rt.Overflow}u=n[d],u==null||u.focus(l),c+=i}while(u!==document.activeElement);return u.hasAttribute("tabindex")||u.setAttribute("tabindex","0"),Rt.Success}const{window:So}=la;function Lu(t){let e,n;return{c:ue,m(r,i){e||(n=[ne(So,"keydown",t[0]),ne(So,"focus",t[1],!0)],e=!0)},p:ue,i:ue,o:ue,d(r){e=!1,z(n)}}}function xu(t,e,n){let{containers:r}=e,{enabled:i=!0}=e,{options:o={}}=e,l=typeof window<"u"?document.activeElement:null,c=null;async function s(){if(!i||r.size!==1)return;let{initialFocus:h}=o;await xi();let p=document.activeElement;if(h){if(h===p)return}else if(Ai(r,p))return;if(l=p,h)Sn(h);else{let m=!1;for(let g of r)if(Ao(g,He.First)===Rt.Success){m=!0;break}m||console.warn("There are no focusable elements inside the <FocusTrap />")}c=document.activeElement}function u(){Sn(l),l=null,c=null}vn(s);let d=!1;Vt(()=>{d=!0,u()});function a(h){if(!!i&&h.key===Nr.Tab&&!!document.activeElement&&r.size===1){h.preventDefault();for(let p of r)if(Ao(p,(h.shiftKey?He.Previous:He.Next)|He.WrapAround)===Rt.Success){c=document.activeElement;break}}}function f(h){if(h.target===window.document.body||!i||r.size!==1||d)return;let p=c;if(!p)return;let m=h.target;m&&m instanceof HTMLElement?Ai(r,m)?(c=m,Sn(m)):(h.preventDefault(),h.stopPropagation(),Sn(p)):Sn(c)}return t.$$set=h=>{"containers"in h&&n(2,r=h.containers),"enabled"in h&&n(3,i=h.enabled),"options"in h&&n(4,o=h.options)},t.$$.update=()=>{t.$$.dirty&12&&(i&&r?s():u())},[a,f,r,i,o]}class Fu extends Pe{constructor(e){super(),Re(this,e,xu,Lu,ke,{containers:2,enabled:3,options:4})}}function Nu(t){let e;const n=t[4].default,r=K(n,t,t[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,[o]){r&&r.p&&(!e||o&8)&&J(r,n,i,i[3],e?Y(n,i[3],o,null):Z(i[3]),null)},i(i){e||(S(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}var gn;(function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove"})(gn||(gn={}));const Eo="headlessui-stack-context";function Gu(t,e,n){let r,{$$slots:i={},$$scope:o}=e,{onUpdate:l}=e,{element:c}=e;function s(...d){l==null||l(...d),u==null||u(...d)}let u=yn(Eo);return er(Eo,s),Vt(()=>{r&&r()}),t.$$set=d=>{"onUpdate"in d&&n(0,l=d.onUpdate),"element"in d&&n(1,c=d.element),"$$scope"in d&&n(3,o=d.$$scope)},t.$$.update=()=>{t.$$.dirty&6&&n(2,r=(()=>{if(r&&r(),!c)return null;let d=c;return s(gn.Add,d),()=>s(gn.Remove,d)})())},[l,c,r,o,i]}class ju extends Pe{constructor(e){super(),Re(this,e,Gu,Nu,ke,{onUpdate:0,element:1})}}const Vu=t=>({describedby:t&1}),ko=t=>({describedby:t[0].descriptionIds});function Uu(t){let e;const n=t[6].default,r=K(n,t,t[5],ko);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,[o]){r&&r.p&&(!e||o&33)&&J(r,n,i,i[5],e?Y(n,i[5],o,Vu):Z(i[5]),ko)},i(i){e||(S(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}const Ba="headlessui-description-context";function zu(){return yn(Ba)}function qu(t,e,n){const r=["name","slotProps"];let i=et(e,r),o,{$$slots:l={},$$scope:c}=e,{name:s}=e,{slotProps:u={}}=e,d=[],a=Qe({name:s,slotProps:u,props:i,register:f});Ne(t,a,h=>n(0,o=h)),er(Ba,a);function f(h){return n(4,d=[...d,h]),()=>{n(4,d=d.filter(p=>p!==h))}}return t.$$set=h=>{e=G(G({},e),Kt(h)),n(8,i=et(e,r)),"name"in h&&n(2,s=h.name),"slotProps"in h&&n(3,u=h.slotProps),"$$scope"in h&&n(5,c=h.$$scope)},t.$$.update=()=>{a.set({name:s,slotProps:u,props:i,register:f,descriptionIds:d.length>0?d.join(" "):void 0})},[o,a,s,u,d,c,l]}class Hu extends Pe{constructor(e){super(),Re(this,e,qu,Uu,ke,{name:2,slotProps:3})}}function Wu(t){let e;const n=t[2].default,r=K(n,t,t[1],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,[o]){r&&r.p&&(!e||o&2)&&J(r,n,i,i[1],e?Y(n,i[1],o,null):Z(i[1]),null)},i(i){e||(S(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}const La="headlessui-force-portal-root-context";function Xu(){return yn(La)}function Qu(t,e,n){let{$$slots:r={},$$scope:i}=e,{force:o}=e;return er(La,Qe(o)),t.$$set=l=>{"force"in l&&n(0,o=l.force),"$$scope"in l&&n(1,i=l.$$scope)},[o,i,r]}class xa extends Pe{constructor(e){super(),Re(this,e,Qu,Wu,ke,{force:0})}}function Ku(t){let e;const n=t[2].default,r=K(n,t,t[1],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,[o]){r&&r.p&&(!e||o&2)&&J(r,n,i,i[1],e?Y(n,i[1],o,null):Z(i[1]),null)},i(i){e||(S(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}const Fa="headlessui-portal-group-context";function Yu(){return yn(Fa)}function Ju(t,e,n){let{$$slots:r={},$$scope:i}=e,{target:o}=e,l=Qe(o);return er(Fa,l),t.$$set=c=>{"target"in c&&n(0,o=c.target),"$$scope"in c&&n(1,i=c.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&l.set(o)},[o,i,r]}class Zu extends Pe{constructor(e){super(),Re(this,e,Ju,Ku,ke,{target:0})}}function $u(t,e){return e&&e.append(t),{update(n){e=n,n.append(t)},destroy(){var n;e!=null&&e.contains(t)&&e.removeChild(t),e&&e.childNodes.length<=0&&((n=e.parentElement)==null||n.removeChild(e))}}}function ef(t){let e,n,r,i,o;const l=t[6].default,c=K(l,t,t[5],null);return{c(){e=A("div"),c&&c.c()},m(s,u){T(s,e,u),c&&c.m(e,null),r=!0,i||(o=L(n=$u.call(null,e,t[0])),i=!0)},p(s,[u]){c&&c.p&&(!r||u&32)&&J(c,l,s,s[5],r?Y(l,s[5],u,null):Z(s[5]),null),n&&ee(n.update)&&u&1&&n.update.call(null,s[0])},i(s){r||(S(c,s),r=!0)},o(s){w(c,s),r=!1},d(s){s&&E(e),c&&c.d(s),i=!1,o()}}}function tf(t,e,n){let r,i,o,{$$slots:l={},$$scope:c}=e,s=Xu();Ne(t,s,d=>n(4,o=d));let u=Yu();return Ne(t,u,d=>n(3,i=d)),t.$$set=d=>{"$$scope"in d&&n(5,c=d.$$scope)},t.$$.update=()=>{t.$$.dirty&24&&n(0,r=(()=>{if(!(s&&o)&&u!==void 0&&i!==null)return i;if(typeof window>"u")return null;let d=document.getElementById("headlessui-portal-root");if(d)return d;let a=document.createElement("div");return a.setAttribute("id","headlessui-portal-root"),xi().then(()=>{a!==document.body.lastChild&&document.body.appendChild(a)}),document.body.appendChild(a)})())},[r,s,u,i,o,c,l]}class nf extends Pe{constructor(e){super(),Re(this,e,tf,ef,ke,{})}}const Si="!",rf=new RegExp(`^[^${Si}]+(?:${Si}(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$`);function nr(t,e=[]){let n,r=[];t.$on=(o,l)=>{let c=o,s=()=>{};for(let u of e){if(typeof u=="string"&&u===c){const d=t.$$.callbacks[c]||(t.$$.callbacks[c]=[]);return d.push(l),()=>{const a=d.indexOf(l);a!==-1&&d.splice(a,1)}}if(typeof u=="object"&&u.name===c){let d=l;l=(...a)=>{typeof u=="object"&&u.shouldExclude()||d(...a)}}}return n?s=n(c,l):r.push([c,l]),()=>{s()}};function i(o){oc(t,o)}return o=>{const l=[],c={};n=(s,u)=>{let d=s,a=u,f=!1;if(d.match(rf)){const g=d.split(Si);d=g[0];const v=Object.fromEntries(g.slice(1).map(y=>[y,!0]));v.passive&&(f=f||{},f.passive=!0),v.nonpassive&&(f=f||{},f.passive=!1),v.capture&&(f=f||{},f.capture=!0),v.once&&(f=f||{},f.once=!0),v.preventDefault&&(a=Yl(a)),v.stopPropagation&&(a=Jl(a))}const p=ne(o,d,a,f),m=()=>{p();const g=l.indexOf(m);g>-1&&l.splice(g,1)};return l.push(m),d in c||(c[d]=ne(o,d,i)),m};for(let s=0;s<r.length;s++)n(r[s][0],r[s][1]);return{destroy:()=>{for(let s=0;s<l.length;s++)l[s]();for(let s of Object.entries(c))s[1]()}}}}const of=["a","address","article","aside","b","bdi","bdo","blockquote","button","cite","code","data","datalist","dd","dl","dt","div","em","footer","form","h1","h2","h3","h4","h5","h6","header","i","input","label","li","main","nav","ol","p","section","span","strong","ul"];function sf(t){return!(typeof t=="string"&&!of.includes(t))}function ae(t,e){let n=[];if(e)for(let r=0;r<e.length;r++){const i=e[r],o=Array.isArray(i)?i[0]:i;Array.isArray(i)&&i.length>1?n.push(o(t,i[1])):n.push(o(t))}return{update(r){if((r&&r.length||0)!=n.length)throw new Error("You must not change the length of an actions array.");if(r)for(let i=0;i<r.length;i++){const o=n[i];if(o&&o.update){const l=r[i];Array.isArray(l)&&l.length>1?o.update(l[1]):o.update()}}},destroy(){for(let r=0;r<n.length;r++){const i=n[r];i&&i.destroy&&i.destroy()}}}}var ct;(function(t){t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static"})(ct||(ct={}));function To(t){let e,n,r,i;const o=[Wf,Hf,qf,zf,Uf,Vf,jf,Gf,Nf,Ff,xf,Lf,Bf,If,Mf,Df,Of,Pf,Rf,wf,Tf,kf,Ef,Sf,Af,Cf,bf,_f,yf,vf,mf,gf,pf,hf,df,ff,uf,cf,lf,af],l=[];function c(s,u){return s[1]==="a"?0:s[1]==="address"?1:s[1]==="article"?2:s[1]==="aside"?3:s[1]==="b"?4:s[1]==="bdi"?5:s[1]==="bdo"?6:s[1]==="blockquote"?7:s[1]==="button"?8:s[1]==="cite"?9:s[1]==="code"?10:s[1]==="data"?11:s[1]==="datalist"?12:s[1]==="dd"?13:s[1]==="dl"?14:s[1]==="dt"?15:s[1]==="div"?16:s[1]==="em"?17:s[1]==="footer"?18:s[1]==="form"?19:s[1]==="h1"?20:s[1]==="h2"?21:s[1]==="h3"?22:s[1]==="h4"?23:s[1]==="h5"?24:s[1]==="h6"?25:s[1]==="header"?26:s[1]==="i"?27:s[1]==="input"?28:s[1]==="label"?29:s[1]==="li"?30:s[1]==="main"?31:s[1]==="nav"?32:s[1]==="ol"?33:s[1]==="p"?34:s[1]==="section"?35:s[1]==="span"?36:s[1]==="strong"?37:s[1]==="ul"?38:39}return e=c(t),n=l[e]=o[e](t),{c(){n.c(),r=lt()},m(s,u){l[e].m(s,u),T(s,r,u),i=!0},p(s,u){let d=e;e=c(s),e===d?l[e].p(s,u):(Mt(),w(l[d],1,1,()=>{l[d]=null}),It(),n=l[e],n?n.p(s,u):(n=l[e]=o[e](s),n.c()),S(n,1),n.m(r.parentNode,r))},i(s){i||(S(n),i=!0)},o(s){w(n),i=!1},d(s){l[e].d(s),s&&E(r)}}}function af(t){let e,n,r,i;const o=[{use:[...t[2],t[6]]},t[7],t[3],{hidden:t[4]||void 0}];function l(u){t[58](u)}var c=t[1];function s(u){let d={$$slots:{default:[Xf]},$$scope:{ctx:u}};for(let a=0;a<o.length;a+=1)d=G(d,o[a]);return u[0]!==void 0&&(d.el=u[0]),{props:d}}return c&&(e=Pr(c,s(t)),q.push(()=>ft(e,"el",l))),{c(){e&&se(e.$$.fragment),r=lt()},m(u,d){e&&ie(e,u,d),T(u,r,d),i=!0},p(u,d){const a=d[0]&220?W(o,[d[0]&68&&{use:[...u[2],u[6]]},d[0]&128&&zn(u[7]),d[0]&8&&zn(u[3]),d[0]&16&&{hidden:u[4]||void 0}]):{};if(d[1]&268435456&&(a.$$scope={dirty:d,ctx:u}),!n&&d[0]&1&&(n=!0,a.el=u[0],mt(()=>n=!1)),c!==(c=u[1])){if(e){Mt();const f=e;w(f.$$.fragment,1,0,()=>{oe(f,1)}),It()}c?(e=Pr(c,s(u)),q.push(()=>ft(e,"el",l)),se(e.$$.fragment),S(e.$$.fragment,1),ie(e,r.parentNode,r)):e=null}else c&&e.$set(a)},i(u){i||(e&&S(e.$$.fragment,u),i=!0)},o(u){e&&w(e.$$.fragment,u),i=!1},d(u){u&&E(r),e&&oe(e,u)}}}function lf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("ul"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[57](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[57](null),o=!1,z(l)}}}function cf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("strong"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[56](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[56](null),o=!1,z(l)}}}function uf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("span"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[55](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[55](null),o=!1,z(l)}}}function ff(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("section"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[54](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[54](null),o=!1,z(l)}}}function df(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("p"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[53](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[53](null),o=!1,z(l)}}}function hf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("ol"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[52](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[52](null),o=!1,z(l)}}}function pf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("nav"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[51](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[51](null),o=!1,z(l)}}}function gf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("main"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[50](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[50](null),o=!1,z(l)}}}function mf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("li"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[49](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[49](null),o=!1,z(l)}}}function vf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("label"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[48](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[48](null),o=!1,z(l)}}}function yf(t){let e,n,r,i,o,l=[t[7],t[3],{hidden:n=t[4]||void 0}],c={};for(let s=0;s<l.length;s+=1)c=G(c,l[s]);return{c(){e=A("input"),x(e,c)},m(s,u){T(s,e,u),e.autofocus&&e.focus(),t[47](e),i||(o=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],i=!0)},p(s,u){x(e,c=W(l,[u[0]&128&&s[7],u[0]&8&&s[3],u[0]&16&&n!==(n=s[4]||void 0)&&{hidden:n}])),r&&ee(r.update)&&u[0]&4&&r.update.call(null,s[2])},i:ue,o:ue,d(s){s&&E(e),t[47](null),i=!1,z(o)}}}function _f(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("i"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[46](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[46](null),o=!1,z(l)}}}function bf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("header"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[45](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[45](null),o=!1,z(l)}}}function Cf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("h6"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[44](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[44](null),o=!1,z(l)}}}function Af(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("h5"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[43](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[43](null),o=!1,z(l)}}}function Sf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("h4"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[42](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[42](null),o=!1,z(l)}}}function Ef(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("h3"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[41](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[41](null),o=!1,z(l)}}}function kf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("h2"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[40](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[40](null),o=!1,z(l)}}}function Tf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("h1"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[39](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[39](null),o=!1,z(l)}}}function wf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("form"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[38](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[38](null),o=!1,z(l)}}}function Rf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("footer"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[37](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[37](null),o=!1,z(l)}}}function Pf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("em"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[36](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[36](null),o=!1,z(l)}}}function Of(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("div"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[35](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[35](null),o=!1,z(l)}}}function Df(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("dt"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[34](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[34](null),o=!1,z(l)}}}function Mf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("dl"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[33](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[33](null),o=!1,z(l)}}}function If(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("dd"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[32](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[32](null),o=!1,z(l)}}}function Bf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("datalist"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[31](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[31](null),o=!1,z(l)}}}function Lf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("data"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[30](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[30](null),o=!1,z(l)}}}function xf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("code"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[29](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[29](null),o=!1,z(l)}}}function Ff(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("cite"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[28](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[28](null),o=!1,z(l)}}}function Nf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("button"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),e.autofocus&&e.focus(),t[27](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[27](null),o=!1,z(l)}}}function Gf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("blockquote"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[26](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[26](null),o=!1,z(l)}}}function jf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("bdo"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[25](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[25](null),o=!1,z(l)}}}function Vf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("bdi"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[24](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[24](null),o=!1,z(l)}}}function Uf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("b"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[23](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[23](null),o=!1,z(l)}}}function zf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("aside"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[22](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[22](null),o=!1,z(l)}}}function qf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("article"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[21](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[21](null),o=!1,z(l)}}}function Hf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("address"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[20](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[20](null),o=!1,z(l)}}}function Wf(t){let e,n,r,i,o,l;const c=t[18].default,s=K(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],d={};for(let a=0;a<u.length;a+=1)d=G(d,u[a]);return{c(){e=A("a"),s&&s.c(),x(e,d)},m(a,f){T(a,e,f),s&&s.m(e,null),t[19](e),i=!0,o||(l=[L(r=ae.call(null,e,t[2])),L(t[6].call(null,e))],o=!0)},p(a,f){s&&s.p&&(!i||f[1]&268435456)&&J(s,c,a,a[59],i?Y(c,a[59],f,null):Z(a[59]),null),x(e,d=W(u,[f[0]&128&&a[7],f[0]&8&&a[3],(!i||f[0]&16&&n!==(n=a[4]||void 0))&&{hidden:n}])),r&&ee(r.update)&&f[0]&4&&r.update.call(null,a[2])},i(a){i||(S(s,a),i=!0)},o(a){w(s,a),i=!1},d(a){a&&E(e),s&&s.d(a),t[19](null),o=!1,z(l)}}}function Xf(t){let e;const n=t[18].default,r=K(n,t,t[59],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o[1]&268435456)&&J(r,n,i,i[59],e?Y(n,i[59],o,null):Z(i[59]),null)},i(i){e||(S(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}function Qf(t){let e,n,r=t[5]&&To(t);return{c(){r&&r.c(),e=lt()},m(i,o){r&&r.m(i,o),T(i,e,o),n=!0},p(i,o){i[5]?r?(r.p(i,o),o[0]&32&&S(r,1)):(r=To(i),r.c(),S(r,1),r.m(e.parentNode,e)):r&&(Mt(),w(r,1,1,()=>{r=null}),It())},i(i){n||(S(r),n=!0)},o(i){w(r),n=!1},d(i){r&&r.d(i),i&&E(e)}}}var wo;(function(t){t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden"})(wo||(wo={}));function Kf(t,e,n){let r,i,o,l,c;const s=["name","as","slotProps","el","use","visible","features","unmount","static","class","style"];let u=et(e,s),{$$slots:d={},$$scope:a}=e;const f=nr(vt());let{name:h}=e,{as:p}=e,{slotProps:m}=e,{el:g=null}=e,{use:v=[]}=e,{visible:y=!0}=e,{features:C=ct.None}=e,{unmount:D=!0}=e,{static:k=!1}=e,{class:I=void 0}=e,{style:O=void 0}=e;if(!p)throw new Error(`<${h}> did not provide an \`as\` value to <Render>`);if(!sf(p))throw new Error(`<${h}> has an invalid or unsupported \`as\` prop: ${p}`);function N(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function H(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function R(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function X(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function ce(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function me(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function ve(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Se(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Ke(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Te(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function _(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function $(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function re(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function ye(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function De(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function ot(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Ce(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Ye(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function st(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Yt(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Jt(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Be(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Bt(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Zt(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function ir(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function B(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Le(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Ml(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Il(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Bl(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Ll(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function xl(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Fl(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Nl(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Gl(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function jl(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Vl(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function Ul(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function zl(b){q[b?"unshift":"push"](()=>{g=b,n(0,g)})}function ql(b){g=b,n(0,g)}return t.$$set=b=>{e=G(G({},e),Kt(b)),n(7,u=et(e,s)),"name"in b&&n(8,h=b.name),"as"in b&&n(1,p=b.as),"slotProps"in b&&n(9,m=b.slotProps),"el"in b&&n(0,g=b.el),"use"in b&&n(2,v=b.use),"visible"in b&&n(10,y=b.visible),"features"in b&&n(11,C=b.features),"unmount"in b&&n(12,D=b.unmount),"static"in b&&n(13,k=b.static),"class"in b&&n(14,I=b.class),"style"in b&&n(15,O=b.style),"$$scope"in b&&n(59,a=b.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&16896&&n(17,r=typeof I=="function"?I(m):I),t.$$.dirty[0]&33280&&n(16,i=typeof O=="function"?O(m):O),t.$$.dirty[0]&15360&&n(5,o=y||C&ct.Static&&k||!(C&ct.RenderStrategy&&D)),t.$$.dirty[0]&15360&&n(4,l=!y&&!(C&ct.Static&&k)&&C&ct.RenderStrategy&&!D),t.$$.dirty[0]&196624&&n(3,c={class:r,style:`${i!=null?i:""}${l?" display: none":""}`||void 0}),t.$$.dirty[0]&8&&c.style===void 0&&delete c.style},[g,p,v,c,l,o,f,u,h,m,y,C,D,k,I,O,i,r,d,N,H,R,X,ce,me,ve,Se,Ke,Te,_,$,re,ye,De,ot,Ce,Ye,st,Yt,Jt,Be,Bt,Zt,ir,B,Le,Ml,Il,Bl,Ll,xl,Fl,Nl,Gl,jl,Vl,Ul,zl,ql,a]}class Qr extends Pe{constructor(e){super(),Re(this,e,Kf,Qf,ke,{name:8,as:1,slotProps:9,el:0,use:2,visible:10,features:11,unmount:12,static:13,class:14,style:15},null,[-1,-1])}}const{window:Ro}=la,Yf=t=>t&64,Jf=t=>({}),Po=t=>({...t[6]});function Zf(t){let e;const n=t[24].default,r=K(n,t,t[27],Po);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&134217792)&&J(r,n,i,i[27],Yf(o)||!e?Z(i[27]):Y(n,i[27],o,Jf),Po)},i(i){e||(S(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}function $f(t){let e,n,r;const i=[{...t[14],...t[7]},{as:t[0]},{slotProps:t[6]},{use:[...t[1],t[9]]},{name:"Dialog"},{"aria-describedby":t[30]},{visible:t[8]},{features:ct.RenderStrategy|ct.Static}];function o(c){t[25](c)}let l={$$slots:{default:[Zf]},$$scope:{ctx:t}};for(let c=0;c<i.length;c+=1)l=G(l,i[c]);return t[3]!==void 0&&(l.el=t[3]),e=new Qr({props:l}),q.push(()=>ft(e,"el",o)),e.$on("click",sd),{c(){se(e.$$.fragment)},m(c,s){ie(e,c,s),r=!0},p(c,s){const u=s&1073759171?W(i,[s&16512&&{...c[14],...c[7]},s&1&&{as:c[0]},s&64&&{slotProps:c[6]},s&514&&{use:[...c[1],c[9]]},i[4],s&1073741824&&{"aria-describedby":c[30]},s&256&&{visible:c[8]},s&0&&{features:ct.RenderStrategy|ct.Static}]):{};s&134217792&&(u.$$scope={dirty:s,ctx:c}),!n&&s&8&&(n=!0,u.el=c[3],mt(()=>n=!1)),e.$set(u)},i(c){r||(S(e.$$.fragment,c),r=!0)},o(c){w(e.$$.fragment,c),r=!1},d(c){oe(e,c)}}}function ed(t){let e,n;return e=new Hu({props:{name:"DialogDescription",slotProps:t[6],$$slots:{default:[$f,({describedby:r})=>({30:r}),({describedby:r})=>r?1073741824:0]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,i){const o={};i&64&&(o.slotProps=r[6]),i&1207976395&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){oe(e,r)}}}function td(t){let e,n;return e=new xa({props:{force:!1,$$slots:{default:[ed]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,i){const o={};i&134234571&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){oe(e,r)}}}function nd(t){let e,n;return e=new Zu({props:{target:t[3],$$slots:{default:[td]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,i){const o={};i&8&&(o.target=r[3]),i&134234571&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){oe(e,r)}}}function rd(t){let e,n;return e=new nf({props:{$$slots:{default:[nd]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,i){const o={};i&134234571&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){oe(e,r)}}}function id(t){let e,n;return e=new xa({props:{force:!0,$$slots:{default:[rd]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,i){const o={};i&134234571&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){oe(e,r)}}}function od(t){let e,n,r,i,o,l;return e=new Fu({props:{containers:t[5],enabled:t[4],options:{initialFocus:t[2]}}}),r=new ju({props:{element:t[3],onUpdate:t[26],$$slots:{default:[id]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment),n=te(),se(r.$$.fragment)},m(c,s){ie(e,c,s),T(c,n,s),ie(r,c,s),i=!0,o||(l=[ne(Ro,"mousedown",t[12]),ne(Ro,"keydown",t[13])],o=!0)},p(c,[s]){const u={};s&32&&(u.containers=c[5]),s&16&&(u.enabled=c[4]),s&4&&(u.options={initialFocus:c[2]}),e.$set(u);const d={};s&8&&(d.element=c[3]),s&32&&(d.onUpdate=c[26]),s&134234571&&(d.$$scope={dirty:s,ctx:c}),r.$set(d)},i(c){i||(S(e.$$.fragment,c),S(r.$$.fragment,c),i=!0)},o(c){w(e.$$.fragment,c),w(r.$$.fragment,c),i=!1},d(c){oe(e,c),c&&E(n),oe(r,c),o=!1,z(l)}}}var nt;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(nt||(nt={}));const Na="headlessui-dialog-context";function Ga(t){let e=yn(Na);if(e===void 0)throw new Error(`<${t} /> is missing a parent <Dialog /> component.`);return e}function sd(t){t.stopPropagation()}function ad(t,e,n){let r,i,o,l,c,s,u,d;const a=["as","use","open","initialFocus"];let f=et(e,a),h,p,{$$slots:m={},$$scope:g}=e,{as:v="div"}=e,{use:y=[]}=e,{open:C=void 0}=e,{initialFocus:D=null}=e;const k=nr(vt(),["close"]),I=$n();let O=new Set,N=Pu();Ne(t,N,_=>n(23,p=_));let H=null;const R=`headlessui-dialog-${Xr()}`;Vt(()=>{l&&l()});let X,ce=Qe({titleId:X,dialogState:r,setTitleId(_){X!==_&&n(16,X=_)},close(){I("close",!1)}});Ne(t,ce,_=>n(22,h=_)),er(Na,ce);async function me(_){let $=_.target;r===nt.Open&&O.size===1&&(Ai(O,$)||(h.close(),await xi(),$==null||$.focus()))}function ve(_){_.key===Nr.Escape&&r===nt.Open&&(O.size>1||(_.preventDefault(),_.stopPropagation(),h.close()))}let Se=!1;vn(()=>n(17,Se=!0)),Vt(()=>{c&&c()}),Vt(()=>{s&&s()});function Ke(_){H=_,n(3,H)}const Te=(_,$)=>Ci(_,{[gn.Add](){n(5,O=new Set([...O,$]))},[gn.Remove](){O.delete($),n(5,O=new Set([...O]))}});return t.$$set=_=>{e=G(G({},e),Kt(_)),n(14,f=et(e,a)),"as"in _&&n(0,v=_.as),"use"in _&&n(1,y=_.use),"open"in _&&n(15,C=_.open),"initialFocus"in _&&n(2,D=_.initialFocus),"$$scope"in _&&n(27,g=_.$$scope)},t.$$.update=()=>{if(t.$$.dirty&8421376){if(n(15,C=C===void 0&&N!==void 0?Ci(p,{[Nn.Open]:!0,[Nn.Closed]:!1}):C),!(C!==void 0||N!==void 0))throw new Error("You forgot to provide an `open` prop to the `Dialog` component.");if(typeof C!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${C}`)}t.$$.dirty&32768&&n(18,r=C?nt.Open:nt.Closed),t.$$.dirty&8650752&&n(8,i=N!==void 0?p===Nn.Open:r===nt.Open),t.$$.dirty&262144&&n(4,o=r===nt.Open),t.$$.dirty&2097176&&n(21,l=(()=>(l&&l(),Mu(H,o)))()),t.$$.dirty&327680&&ce.update(_=>({..._,titleId:X,dialogState:r})),t.$$.dirty&1441792&&n(20,c=(()=>{if(c&&c(),r!==nt.Open||!Se)return;let _=document.documentElement.style.overflow,$=document.documentElement.style.paddingRight,re=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${re}px`,()=>{document.documentElement.style.overflow=_,document.documentElement.style.paddingRight=$}})()),t.$$.dirty&4980744&&n(19,s=(()=>{if(s&&s(),r!==nt.Open)return;let _=H;if(!_)return;let $=new IntersectionObserver(re=>{for(let ye of re)ye.boundingClientRect.x===0&&ye.boundingClientRect.y===0&&ye.boundingClientRect.width===0&&ye.boundingClientRect.height===0&&h.close()});return $.observe(_),()=>$.disconnect()})()),t.$$.dirty&327680&&n(7,u={id:R,role:"dialog","aria-modal":r===nt.Open?!0:void 0,"aria-labelledby":X}),t.$$.dirty&32768&&n(6,d={open:C})},[v,y,D,H,o,O,d,u,i,k,N,ce,me,ve,f,C,X,Se,r,s,c,l,h,p,m,Ke,Te,g]}class ld extends Pe{constructor(e){super(),Re(this,e,ad,od,ke,{as:0,use:1,open:15,initialFocus:2})}}const cd=t=>t&4,ud=t=>({}),Oo=t=>({...t[2]});function fd(t){let e;const n=t[8].default,r=K(n,t,t[9],Oo);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&516)&&J(r,n,i,i[9],cd(o)||!e?Z(i[9]):Y(n,i[9],o,ud),Oo)},i(i){e||(S(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}function dd(t){let e,n;const r=[{...t[6],...t[3]},{as:t[0]},{slotProps:t[2]},{use:[...t[1],t[4]]},{name:"DialogTitle"}];let i={$$slots:{default:[fd]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=G(i,r[o]);return e=new Qr({props:i}),{c(){se(e.$$.fragment)},m(o,l){ie(e,o,l),n=!0},p(o,[l]){const c=l&95?W(r,[l&72&&{...o[6],...o[3]},l&1&&{as:o[0]},l&4&&{slotProps:o[2]},l&18&&{use:[...o[1],o[4]]},r[4]]):{};l&516&&(c.$$scope={dirty:l,ctx:o}),e.$set(c)},i(o){n||(S(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){oe(e,o)}}}function hd(t,e,n){let r,i;const o=["as","use"];let l=et(e,o),c,{$$slots:s={},$$scope:u}=e,{as:d="h2"}=e,{use:a=[]}=e;const f=nr(vt());let h=Ga("DialogTitle");Ne(t,h,m=>n(7,c=m));let p=`headlessui-dialog-title-${Xr()}`;return vn(()=>(c.setTitleId(p),()=>c.setTitleId(void 0))),t.$$set=m=>{e=G(G({},e),Kt(m)),n(6,l=et(e,o)),"as"in m&&n(0,d=m.as),"use"in m&&n(1,a=m.use),"$$scope"in m&&n(9,u=m.$$scope)},t.$$.update=()=>{t.$$.dirty&128&&n(2,i={open:c.dialogState===nt.Open})},n(3,r={id:p}),[d,a,i,r,f,h,l,c,s,u]}class Kr extends Pe{constructor(e){super(),Re(this,e,hd,dd,ke,{as:0,use:1})}}const pd=t=>t&4,gd=t=>({}),Do=t=>({...t[2]});function md(t){let e;const n=t[9].default,r=K(n,t,t[10],Do);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&1028)&&J(r,n,i,i[10],pd(o)||!e?Z(i[10]):Y(n,i[10],o,gd),Do)},i(i){e||(S(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}function vd(t){let e,n;const r=[{...t[7],...t[3]},{as:t[0]},{slotProps:t[2]},{use:[...t[1],t[4]]},{name:"DialogOverlay"}];let i={$$slots:{default:[md]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=G(i,r[o]);return e=new Qr({props:i}),e.$on("click",t[6]),{c(){se(e.$$.fragment)},m(o,l){ie(e,o,l),n=!0},p(o,[l]){const c=l&159?W(r,[l&136&&{...o[7],...o[3]},l&1&&{as:o[0]},l&4&&{slotProps:o[2]},l&18&&{use:[...o[1],o[4]]},r[4]]):{};l&1028&&(c.$$scope={dirty:l,ctx:o}),e.$set(c)},i(o){n||(S(e.$$.fragment,o),n=!0)},o(o){w(e.$$.fragment,o),n=!1},d(o){oe(e,o)}}}function yd(t,e,n){let r,i;const o=["as","use"];let l=et(e,o),c,{$$slots:s={},$$scope:u}=e,{as:d="div"}=e,{use:a=[]}=e;const f=nr(vt());let h=Ga("DialogOverlay");Ne(t,h,g=>n(8,c=g));let p=`headlessui-dialog-overlay-${Xr()}`;function m(g){let v=g;v.target===v.currentTarget&&(v.preventDefault(),v.stopPropagation(),c.close())}return t.$$set=g=>{e=G(G({},e),Kt(g)),n(7,l=et(e,o)),"as"in g&&n(0,d=g.as),"use"in g&&n(1,a=g.use),"$$scope"in g&&n(10,u=g.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(2,i={open:c.dialogState===nt.Open})},n(3,r={id:p,"aria-hidden":!0}),[d,a,i,r,f,h,m,l,c,s,u]}class _d extends Pe{constructor(e){super(),Re(this,e,yd,vd,ke,{as:0,use:1})}}const bd=t=>t&8,Cd=t=>({}),Mo=t=>({...t[3]});function Ad(t){let e;const n=t[8].default,r=K(n,t,t[9],Mo);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&520)&&J(r,n,i,i[9],bd(o)||!e?Z(i[9]):Y(n,i[9],o,Cd),Mo)},i(i){e||(S(r,i),e=!0)},o(i){w(r,i),e=!1},d(i){r&&r.d(i)}}}function Sd(t){var o;let e,n;const r=[{name:"Description"},t[7],{as:t[0]},{slotProps:t[3]},(o=t[2])==null?void 0:o.props,{id:t[5]},{use:[...t[1],t[4]]}];let i={$$slots:{default:[Ad]},$$scope:{ctx:t}};for(let l=0;l<r.length;l+=1)i=G(i,r[l]);return e=new Qr({props:i}),{c(){se(e.$$.fragment)},m(l,c){ie(e,l,c),n=!0},p(l,[c]){var u;const s=c&191?W(r,[r[0],c&128&&zn(l[7]),c&1&&{as:l[0]},c&8&&{slotProps:l[3]},c&4&&zn((u=l[2])==null?void 0:u.props),c&32&&{id:l[5]},c&18&&{use:[...l[1],l[4]]}]):{};c&520&&(s.$$scope={dirty:c,ctx:l}),e.$set(s)},i(l){n||(S(e.$$.fragment,l),n=!0)},o(l){w(e.$$.fragment,l),n=!1},d(l){oe(e,l)}}}function Ed(t,e,n){let r;const i=["as","use"];let o=et(e,i),l,{$$slots:c={},$$scope:s}=e;const u=nr(vt());let{as:d="p"}=e,{use:a=[]}=e;const f=`headlessui-description-${Xr()}`;let h=zu();if(Ne(t,h,p=>n(2,l=p)),!h)throw new Error("You used a <Description /> component, but it is not inside a relevant parent.");return vn(()=>l==null?void 0:l.register(f)),t.$$set=p=>{e=G(G({},e),Kt(p)),n(7,o=et(e,i)),"as"in p&&n(0,d=p.as),"use"in p&&n(1,a=p.use),"$$scope"in p&&n(9,s=p.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&n(3,r=l.slotProps||{})},[d,a,l,r,u,f,h,o,c,s]}class kd extends Pe{constructor(e){super(),Re(this,e,Ed,Sd,ke,{as:0,use:1})}}var Io;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(Io||(Io={}));var Bo;(function(t){t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing"})(Bo||(Bo={}));var Lo;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(Lo||(Lo={}));var xo;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(xo||(xo={}));var Fo;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(Fo||(Fo={}));var No;(function(t){t.Finished="finished",t.Cancelled="cancelled"})(No||(No={}));var Go;(function(t){t.Visible="visible",t.Hidden="hidden"})(Go||(Go={}));function Td(t){let e;return{c(){e=Je("Dialog w/o content")},m(n,r){T(n,e,r)},d(n){n&&E(e)}}}function wd(t){let e;return{c(){e=Je("Please add some content")},m(n,r){T(n,e,r)},d(n){n&&E(e)}}}function Rd(t){let e,n,r,i,o,l,c,s,u,d,a;return e=new Kr({props:{as:"h3",class:"font-bold text-lg",$$slots:{default:[Td]},$$scope:{ctx:t}}}),r=new kd({props:{class:"py-",$$slots:{default:[wd]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment),n=te(),se(r.$$.fragment),i=te(),o=A("button"),o.textContent="\u2715",l=te(),c=A("div"),s=A("button"),s.textContent="Got it, thanks!",P(o,"for",""),P(o,"class","btn btn-sm btn-circle absolute right-2 top-2"),P(s,"type","button"),P(s,"class","btn"),P(c,"class","modal-action")},m(f,h){ie(e,f,h),T(f,n,h),ie(r,f,h),T(f,i,h),T(f,o,h),T(f,l,h),T(f,c,h),M(c,s),u=!0,d||(a=[ne(o,"click",t[3]),ne(s,"click",t[3])],d=!0)},p(f,h){const p={};h&256&&(p.$$scope={dirty:h,ctx:f}),e.$set(p);const m={};h&256&&(m.$$scope={dirty:h,ctx:f}),r.$set(m)},i(f){u||(S(e.$$.fragment,f),S(r.$$.fragment,f),u=!0)},o(f){w(e.$$.fragment,f),w(r.$$.fragment,f),u=!1},d(f){oe(e,f),f&&E(n),oe(r,f),f&&E(i),f&&E(o),f&&E(l),f&&E(c),d=!1,z(a)}}}function Pd(t){let e,n,r,i,o,l,c,s,u,d;n=new _d({props:{class:"absolute inset-0 bg-black opacity-70"}});const a=t[5].default,f=K(a,t,t[8],null),h=f||Rd(t);return{c(){e=A("div"),se(n.$$.fragment),i=te(),o=A("div"),h&&h.c(),P(e,"class","inset-0 absolute"),P(o,"class",l="modal-box max-w-2xl "+t[0]),P(o,"style",t[1])},m(p,m){T(p,e,m),ie(n,e,null),T(p,i,m),T(p,o,m),h&&h.m(o,null),s=!0,u||(d=[ne(o,"introstart",t[6]),ne(o,"outroend",t[7])],u=!0)},p(p,m){f&&f.p&&(!s||m&256)&&J(f,a,p,p[8],s?Y(a,p[8],m,null):Z(p[8]),null),(!s||m&1&&l!==(l="modal-box max-w-2xl "+p[0]))&&P(o,"class",l),(!s||m&2)&&P(o,"style",p[1])},i(p){s||(S(n.$$.fragment,p),it(()=>{r||(r=an(e,Xn,{duration:300},!0)),r.run(1)}),S(h,p),it(()=>{c||(c=an(o,Fr,{duration:300},!0)),c.run(1)}),s=!0)},o(p){w(n.$$.fragment,p),r||(r=an(e,Xn,{duration:300},!1)),r.run(0),w(h,p),c||(c=an(o,Fr,{duration:300},!1)),c.run(0),s=!1},d(p){p&&E(e),oe(n),p&&r&&r.end(),p&&E(i),p&&E(o),h&&h.d(p),p&&c&&c.end(),u=!1,z(d)}}}function Od(t){let e,n;return e=new ld({props:{class:"inset-0 fixed modal modal-bottom modal-open",open:t[2],static:!0,$$slots:{default:[Pd]},$$scope:{ctx:t}}}),e.$on("close",t[3]),{c(){se(e.$$.fragment)},m(r,i){ie(e,r,i),n=!0},p(r,[i]){const o={};i&4&&(o.open=r[2]),i&263&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(S(e.$$.fragment,r),n=!0)},o(r){w(e.$$.fragment,r),n=!1},d(r){oe(e,r)}}}function Dd(t,e,n){let{$$slots:r={},$$scope:i}=e,{isOpen:o=!0}=e,{modalClass:l="mx-10"}=e,{modalStyle:c=""}=e,s=!0;const u=$n();function d(){n(4,o=!1),u("close")}const a=()=>n(2,s=!0),f=()=>n(2,s=!1);return t.$$set=h=>{"isOpen"in h&&n(4,o=h.isOpen),"modalClass"in h&&n(0,l=h.modalClass),"modalStyle"in h&&n(1,c=h.modalStyle),"$$scope"in h&&n(8,i=h.$$scope)},[l,c,s,d,o,r,a,f,i]}class Xi extends Pe{constructor(e){super(),Re(this,e,Dd,Od,ke,{isOpen:4,modalClass:0,modalStyle:1})}}function Md(t){let e;return{c(){e=Je(t[1])},m(n,r){T(n,e,r)},p(n,r){r&2&&Wt(e,n[1])},d(n){n&&E(e)}}}function Id(t){let e,n,r,i,o,l,c,s;return e=new Kr({props:{as:"h3",class:"font-bold text-lg mb-5",$$slots:{default:[Md]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment),n=te(),r=A("button"),r.textContent="Ok",i=te(),o=A("button"),o.textContent="Cancel",P(r,"type","button"),P(r,"class","btn btn-primary btn-block flex-1 mb-2"),P(o,"type","button"),P(o,"class","btn btn-outline btn-block flex-1")},m(u,d){ie(e,u,d),T(u,n,d),T(u,r,d),T(u,i,d),T(u,o,d),l=!0,c||(s=[ne(r,"click",t[4]),ne(o,"click",t[5])],c=!0)},p(u,d){const a={};d&514&&(a.$$scope={dirty:d,ctx:u}),e.$set(a)},i(u){l||(S(e.$$.fragment,u),l=!0)},o(u){w(e.$$.fragment,u),l=!1},d(u){oe(e,u),u&&E(n),u&&E(r),u&&E(i),u&&E(o),c=!1,z(s)}}}function Bd(t){let e,n,r,i,o;function l(s){t[6](s)}let c={modalStyle:"max-width:16rem; text-align:center",modalClass:"modal-bottom",$$slots:{default:[Id]},$$scope:{ctx:t}};return t[0]!==void 0&&(c.isOpen=t[0]),r=new Xi({props:c}),q.push(()=>ft(r,"isOpen",l)),r.$on("close",t[7]),{c(){e=A("br"),n=te(),se(r.$$.fragment)},m(s,u){T(s,e,u),T(s,n,u),ie(r,s,u),o=!0},p(s,[u]){const d={};u&514&&(d.$$scope={dirty:u,ctx:s}),!i&&u&1&&(i=!0,d.isOpen=s[0],mt(()=>i=!1)),r.$set(d)},i(s){o||(S(r.$$.fragment,s),o=!0)},o(s){w(r.$$.fragment,s),o=!1},d(s){s&&E(e),s&&E(n),oe(r,s)}}}function Ld(t,e,n){let r;const i=$n();let{isOpen:o=!0}=e,{extraData:l={}}=e;function c(f){i("close",f),n(0,o=!1)}const s=()=>c(!0),u=()=>c(!1);function d(f){o=f,n(0,o)}const a=()=>c(!1);return t.$$set=f=>{"isOpen"in f&&n(0,o=f.isOpen),"extraData"in f&&n(3,l=f.extraData)},t.$$.update=()=>{t.$$.dirty&8&&n(1,r=l.title||"Are you sure?")},[o,r,c,l,s,u,d,a]}class xd extends Pe{constructor(e){super(),Re(this,e,Ld,Bd,ke,{isOpen:0,extraData:3})}}function Fd(t){let e;return{c(){e=Je("Please enter the driver password")},m(n,r){T(n,e,r)},d(n){n&&E(e)}}}function Nd(t){let e,n,r,i,o,l,c,s,u,d;return e=new Kr({props:{as:"h3",class:"font-bold text-lg",$$slots:{default:[Fd]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment),n=te(),r=A("input"),i=te(),o=A("button"),o.textContent="Ok",l=te(),c=A("button"),c.textContent="Cancel",P(r,"type","password"),P(r,"placeholder","Password"),P(r,"class","input input-bordered block w-full my-5"),P(o,"type","button"),P(o,"class","btn btn-primary btn-block btn-shadow flex-1 mb-2"),P(c,"type","button"),P(c,"class","btn btn-outline btn-block flex-1")},m(a,f){ie(e,a,f),T(a,n,f),T(a,r,f),no(r,t[1]),T(a,i,f),T(a,o,f),T(a,l,f),T(a,c,f),s=!0,u||(d=[ne(r,"input",t[3]),ne(r,"keypress",t[4]),ne(o,"click",t[5]),ne(c,"click",t[6])],u=!0)},p(a,f){const h={};f&1024&&(h.$$scope={dirty:f,ctx:a}),e.$set(h),f&2&&r.value!==a[1]&&no(r,a[1])},i(a){s||(S(e.$$.fragment,a),s=!0)},o(a){w(e.$$.fragment,a),s=!1},d(a){oe(e,a),a&&E(n),a&&E(r),a&&E(i),a&&E(o),a&&E(l),a&&E(c),u=!1,z(d)}}}function Gd(t){let e,n,r,i,o;function l(s){t[7](s)}let c={modalStyle:"max-width:16rem; text-align:center",modalClass:"modal-bottom",$$slots:{default:[Nd]},$$scope:{ctx:t}};return t[0]!==void 0&&(c.isOpen=t[0]),r=new Xi({props:c}),q.push(()=>ft(r,"isOpen",l)),r.$on("close",t[8]),{c(){e=A("br"),n=te(),se(r.$$.fragment)},m(s,u){T(s,e,u),T(s,n,u),ie(r,s,u),o=!0},p(s,[u]){const d={};u&1026&&(d.$$scope={dirty:u,ctx:s}),!i&&u&1&&(i=!0,d.isOpen=s[0],mt(()=>i=!1)),r.$set(d)},i(s){o||(S(r.$$.fragment,s),o=!0)},o(s){w(r.$$.fragment,s),o=!1},d(s){s&&E(e),s&&E(n),oe(r,s)}}}function jd(t,e,n){let{isOpen:r=!0}=e,i="";const o=$n();function l(h){if(h&&i.length==0){console.log("Password is empty");return}else h?o("close",i):o("close",null);n(0,r=!1)}function c(){i=this.value,n(1,i)}const s=h=>{h.key=="Enter"&&l(!0)},u=()=>l(!0),d=()=>l(!1);function a(h){r=h,n(0,r)}const f=()=>l(!1);return t.$$set=h=>{"isOpen"in h&&n(0,r=h.isOpen)},[r,i,l,c,s,u,d,a,f]}class Vd extends Pe{constructor(e){super(),Re(this,e,jd,Gd,ke,{isOpen:0})}}const ja="ROV-",Ud=74646,jr={host:"0.peerjs.com",secure:!0,path:"/",port:443},zd={host:"raspberrypi.local",path:"/",secure:!1,port:9e3};var V=(t=>(t.connecting="Connecting",t.connected="Connected",t.reconnecting="Reconnecting",t.disconnected="Disconnected",t))(V||{}),zt=(t=>(t.ping="ping",t.password_attempt="password_attempt",t.authtoken_attempt="authtoken_attempt",t.take_control="take_control",t.move="move",t.begin_video_stream="begin_video_stream",t.take_photo="take_photo",t.start_video_rec="start_video_rec",t.stop_video_rec="stop_video_rec",t.toogle_lights="toogle_lights",t.shutdown_rov="shutdown_rov",t.reboot_rov="reboot_rov",t.enable_wifi="enable_wifi",t.disable_wifi="disable_wifi",t.rov_status_report="rov_status_report",t.restart_rov_services="restart_rov_services",t.rov_logs="rov_logs",t))(zt||{});const Ei={default:"Loading...","ip-scan":"Scanning for ROV IP address...","internet-check":"Checking internet access...","server-connecting":"Connecting to peer server...","server-reconnecting":"Reconnecting to peer server...","webrtc-connecting":"Searching for ROV...","webrtc-reconnecting":"Reconnecting to ROV...","reloading-site":"Reloading site...","awaiting-video-call":"Waiting for livestream...","awaiting-rov-reconnect":"Waiting for ROV to reconnect..."},qd=["button_1","button_2","button_3","button_4","shoulder_btn_front_left","shoulder_btn_front_right","shoulder_trigger_back_left","shoulder_trigger_back_right","select","start","stick_button_left","stick_button_right","d_pad_up","d_pad_down","d_pad_left","d_pad_right"],jo="touched",Vo="pressed";var Yr=(t=>(t[t.Alert=0]="Alert",t[t.Password=1]="Password",t[t.ScrollingText=2]="ScrollingText",t))(Yr||{});const Ee={connManager:null,msgHandler:null,gpadCtrl:null,openDialog:(t,e,n)=>r=>{}},mn=Qe(!1),Va=Qe(!1);document.addEventListener("fullscreenchange",t=>{console.log("fullscreenchange",t),Va.set(document.fullscreenElement!==null)});const Uo=Qe({}),Hd=Qe("raspberrypi.local"),Ct=Qe(0),zo=Qe(!1),qt=Qe("No Peer Id"),jt=Qe(V.disconnected),Kn=Qe(V.disconnected),qo=Qe(V.disconnected);function Ho(t,e,n){const r=t.slice();return r[10]=e[n],r}function Wd(t){let e;return{c(){e=Je(t[3])},m(n,r){T(n,e,r)},p(n,r){r&8&&Wt(e,n[3])},d(n){n&&E(e)}}}function Wo(t){let e=t[10]+"",n;return{c(){n=Je(e)},m(r,i){T(r,n,i)},p(r,i){i&4&&e!==(e=r[10]+"")&&Wt(n,e)},d(r){r&&E(n)}}}function Xd(t){let e,n,r,i,o,l,c,s,u,d;r=new Kr({props:{as:"h3",class:"font-bold text-lg mb-5",$$slots:{default:[Wd]},$$scope:{ctx:t}}});let a=t[2],f=[];for(let h=0;h<a.length;h+=1)f[h]=Wo(Ho(t,a,h));return{c(){e=A("button"),e.textContent="\u2715",n=te(),se(r.$$.fragment),i=te(),o=A("pre"),l=Je("    ");for(let h=0;h<f.length;h+=1)f[h].c();c=Je(`
  `),P(e,"class","btn btn-sm btn-circle absolute right-2 top-2"),P(o,"class","overflow-auto flex-1 -mx-5 px-6 -mb-2 pb-2")},m(h,p){T(h,e,p),T(h,n,p),ie(r,h,p),T(h,i,p),T(h,o,p),M(o,l);for(let m=0;m<f.length;m+=1)f[m].m(o,null);M(o,c),t[6](o),s=!0,u||(d=ne(e,"click",t[4]),u=!0)},p(h,p){const m={};if(p&8200&&(m.$$scope={dirty:p,ctx:h}),r.$set(m),p&4){a=h[2];let g;for(g=0;g<a.length;g+=1){const v=Ho(h,a,g);f[g]?f[g].p(v,p):(f[g]=Wo(v),f[g].c(),f[g].m(o,c))}for(;g<f.length;g+=1)f[g].d(1);f.length=a.length}},i(h){s||(S(r.$$.fragment,h),s=!0)},o(h){w(r.$$.fragment,h),s=!1},d(h){h&&E(e),h&&E(n),oe(r,h),h&&E(i),h&&E(o),Nt(f,h),t[6](null),u=!1,d()}}}function Qd(t){let e,n,r,i,o;function l(s){t[7](s)}let c={modalClass:"flex-col flex",$$slots:{default:[Xd]},$$scope:{ctx:t}};return t[0]!==void 0&&(c.isOpen=t[0]),r=new Xi({props:c}),q.push(()=>ft(r,"isOpen",l)),r.$on("close",t[8]),{c(){e=A("br"),n=te(),se(r.$$.fragment)},m(s,u){T(s,e,u),T(s,n,u),ie(r,s,u),o=!0},p(s,[u]){const d={};u&8206&&(d.$$scope={dirty:u,ctx:s}),!i&&u&1&&(i=!0,d.isOpen=s[0],mt(()=>i=!1)),r.$set(d)},i(s){o||(S(r.$$.fragment,s),o=!0)},o(s){w(r.$$.fragment,s),o=!1},d(s){s&&E(e),s&&E(n),oe(r,s)}}}function Kd(t,e,n){let r,i;const o=$n();let{isOpen:l=!0}=e,{extraData:c={title:"Title",messageLines:[]}}=e,s=null;function u(){o("close",null),n(0,l=!1)}function d(h){q[h?"unshift":"push"](()=>{s=h,n(1,s),n(5,c)})}function a(h){l=h,n(0,l)}const f=()=>u();return t.$$set=h=>{"isOpen"in h&&n(0,l=h.isOpen),"extraData"in h&&n(5,c=h.extraData)},t.$$.update=()=>{t.$$.dirty&32&&n(3,r=c.title||""),t.$$.dirty&32&&n(2,i=c.messageLines||[]),t.$$.dirty&34&&c&&s!=null&&s.scrollTop&&s.scrollTop+s.clientHeight+100>s.scrollHeight&&n(1,s.scrollTop=s.scrollHeight,s)},[l,s,i,r,u,c,d,a,f]}class Yd extends Pe{constructor(e){super(),Re(this,e,Kd,Qd,ke,{isOpen:0,extraData:5})}}function Jd(t){let e,n,r,i;function o(s){t[5](s)}function l(s){t[6](s)}let c={};return t[0].isOpen!==void 0&&(c.isOpen=t[0].isOpen),t[0].extraData!==void 0&&(c.extraData=t[0].extraData),e=new Yd({props:c}),q.push(()=>ft(e,"isOpen",o)),q.push(()=>ft(e,"extraData",l)),e.$on("close",t[1]),{c(){se(e.$$.fragment)},m(s,u){ie(e,s,u),i=!0},p(s,u){const d={};!n&&u&1&&(n=!0,d.isOpen=s[0].isOpen,mt(()=>n=!1)),!r&&u&1&&(r=!0,d.extraData=s[0].extraData,mt(()=>r=!1)),e.$set(d)},i(s){i||(S(e.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),i=!1},d(s){oe(e,s)}}}function Zd(t){let e,n,r,i;function o(s){t[3](s)}function l(s){t[4](s)}let c={};return t[0].isOpen!==void 0&&(c.isOpen=t[0].isOpen),t[0].extraData!==void 0&&(c.extraData=t[0].extraData),e=new xd({props:c}),q.push(()=>ft(e,"isOpen",o)),q.push(()=>ft(e,"extraData",l)),e.$on("close",t[1]),{c(){se(e.$$.fragment)},m(s,u){ie(e,s,u),i=!0},p(s,u){const d={};!n&&u&1&&(n=!0,d.isOpen=s[0].isOpen,mt(()=>n=!1)),!r&&u&1&&(r=!0,d.extraData=s[0].extraData,mt(()=>r=!1)),e.$set(d)},i(s){i||(S(e.$$.fragment,s),i=!0)},o(s){w(e.$$.fragment,s),i=!1},d(s){oe(e,s)}}}function $d(t){let e,n,r;function i(l){t[2](l)}let o={};return t[0].isOpen!==void 0&&(o.isOpen=t[0].isOpen),e=new Vd({props:o}),q.push(()=>ft(e,"isOpen",i)),e.$on("close",t[1]),{c(){se(e.$$.fragment)},m(l,c){ie(e,l,c),r=!0},p(l,c){const s={};!n&&c&1&&(n=!0,s.isOpen=l[0].isOpen,mt(()=>n=!1)),e.$set(s)},i(l){r||(S(e.$$.fragment,l),r=!0)},o(l){w(e.$$.fragment,l),r=!1},d(l){oe(e,l)}}}function eh(t){let e,n,r,i;const o=[$d,Zd,Jd],l=[];function c(s,u){return s[0].dialogType=="password"?0:s[0].dialogType=="alert"?1:s[0].dialogType=="scrollText"?2:-1}return~(e=c(t))&&(n=l[e]=o[e](t)),{c(){n&&n.c(),r=lt()},m(s,u){~e&&l[e].m(s,u),T(s,r,u),i=!0},p(s,[u]){let d=e;e=c(s),e===d?~e&&l[e].p(s,u):(n&&(Mt(),w(l[d],1,1,()=>{l[d]=null}),It()),~e?(n=l[e],n?n.p(s,u):(n=l[e]=o[e](s),n.c()),S(n,1),n.m(r.parentNode,r)):n=null)},i(s){i||(S(n),i=!0)},o(s){w(n),i=!1},d(s){~e&&l[e].d(s),s&&E(r)}}}function th(t,e,n){let r=[],i={};function o(f,h,p){let g={isOpen:!0,dialogType:f,callback:p,extraData:h};return r=[...r,g],n(0,i=g),v=>{g.extraData=v(g.extraData),n(0,i)}}Ee.openDialog=o;function l(f){n(0,i.isOpen=!1,i),n(0,i),i.callback&&i.callback(f.detail),r.pop(),n(0,i=r[r.length-1]),i?(n(0,i.isOpen=!0,i),n(0,i)):n(0,i={})}function c(f){t.$$.not_equal(i.isOpen,f)&&(i.isOpen=f,n(0,i))}function s(f){t.$$.not_equal(i.isOpen,f)&&(i.isOpen=f,n(0,i))}function u(f){t.$$.not_equal(i.extraData,f)&&(i.extraData=f,n(0,i))}function d(f){t.$$.not_equal(i.isOpen,f)&&(i.isOpen=f,n(0,i))}function a(f){t.$$.not_equal(i.extraData,f)&&(i.extraData=f,n(0,i))}return[i,l,c,s,u,d,a]}class nh extends Pe{constructor(e){super(),Re(this,e,th,eh,ke,{})}}function Xo(t,e,n){const r=t.slice();return r[5]=e[n],r}function Qo(t,e,n){const r=t.slice();return r[5]=e[n],r}function Ko(t,e,n){const r=t.slice();return r[5]=e[n],r}function Yo(t,e,n){const r=t.slice();return r[5]=e[n],r}function Jo(t,e,n){const r=t.slice();return r[5]=e[n],r}function Zo(t,e,n){const r=t.slice();return r[5]=e[n],r}function $o(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=G(r,n[i]);return{c(){e=Dt("path"),tt(e,r)},m(i,o){T(i,e,o)},p(i,o){tt(e,r=W(n,[o&2&&i[5]]))},d(i){i&&E(e)}}}function es(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=G(r,n[i]);return{c(){e=Dt("rect"),tt(e,r)},m(i,o){T(i,e,o)},p(i,o){tt(e,r=W(n,[o&2&&i[5]]))},d(i){i&&E(e)}}}function ts(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=G(r,n[i]);return{c(){e=Dt("circle"),tt(e,r)},m(i,o){T(i,e,o)},p(i,o){tt(e,r=W(n,[o&2&&i[5]]))},d(i){i&&E(e)}}}function ns(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=G(r,n[i]);return{c(){e=Dt("polygon"),tt(e,r)},m(i,o){T(i,e,o)},p(i,o){tt(e,r=W(n,[o&2&&i[5]]))},d(i){i&&E(e)}}}function rs(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=G(r,n[i]);return{c(){e=Dt("polyline"),tt(e,r)},m(i,o){T(i,e,o)},p(i,o){tt(e,r=W(n,[o&2&&i[5]]))},d(i){i&&E(e)}}}function is(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=G(r,n[i]);return{c(){e=Dt("line"),tt(e,r)},m(i,o){T(i,e,o)},p(i,o){tt(e,r=W(n,[o&2&&i[5]]))},d(i){i&&E(e)}}}function rh(t){var k,I,O,N,H,R,X,ce,me,ve,Se,Ke,Te;let e,n,r,i,o,l,c=(I=(k=t[1])==null?void 0:k.path)!=null?I:[],s=[];for(let _=0;_<c.length;_+=1)s[_]=$o(Zo(t,c,_));let u=(N=(O=t[1])==null?void 0:O.rect)!=null?N:[],d=[];for(let _=0;_<u.length;_+=1)d[_]=es(Jo(t,u,_));let a=(R=(H=t[1])==null?void 0:H.circle)!=null?R:[],f=[];for(let _=0;_<a.length;_+=1)f[_]=ts(Yo(t,a,_));let h=(ce=(X=t[1])==null?void 0:X.polygon)!=null?ce:[],p=[];for(let _=0;_<h.length;_+=1)p[_]=ns(Ko(t,h,_));let m=(ve=(me=t[1])==null?void 0:me.polyline)!=null?ve:[],g=[];for(let _=0;_<m.length;_+=1)g[_]=rs(Qo(t,m,_));let v=(Ke=(Se=t[1])==null?void 0:Se.line)!=null?Ke:[],y=[];for(let _=0;_<v.length;_+=1)y[_]=is(Xo(t,v,_));let C=[(Te=t[1])==null?void 0:Te.a,{xmlns:"http://www.w3.org/2000/svg"},{width:t[0]},{height:t[0]},t[2]],D={};for(let _=0;_<C.length;_+=1)D=G(D,C[_]);return{c(){e=Dt("svg");for(let _=0;_<s.length;_+=1)s[_].c();n=lt();for(let _=0;_<d.length;_+=1)d[_].c();r=lt();for(let _=0;_<f.length;_+=1)f[_].c();i=lt();for(let _=0;_<p.length;_+=1)p[_].c();o=lt();for(let _=0;_<g.length;_+=1)g[_].c();l=lt();for(let _=0;_<y.length;_+=1)y[_].c();tt(e,D)},m(_,$){T(_,e,$);for(let re=0;re<s.length;re+=1)s[re].m(e,null);M(e,n);for(let re=0;re<d.length;re+=1)d[re].m(e,null);M(e,r);for(let re=0;re<f.length;re+=1)f[re].m(e,null);M(e,i);for(let re=0;re<p.length;re+=1)p[re].m(e,null);M(e,o);for(let re=0;re<g.length;re+=1)g[re].m(e,null);M(e,l);for(let re=0;re<y.length;re+=1)y[re].m(e,null)},p(_,[$]){var re,ye,De,ot,Ce,Ye,st,Yt,Jt,Be,Bt,Zt,ir;if($&2){c=(ye=(re=_[1])==null?void 0:re.path)!=null?ye:[];let B;for(B=0;B<c.length;B+=1){const Le=Zo(_,c,B);s[B]?s[B].p(Le,$):(s[B]=$o(Le),s[B].c(),s[B].m(e,n))}for(;B<s.length;B+=1)s[B].d(1);s.length=c.length}if($&2){u=(ot=(De=_[1])==null?void 0:De.rect)!=null?ot:[];let B;for(B=0;B<u.length;B+=1){const Le=Jo(_,u,B);d[B]?d[B].p(Le,$):(d[B]=es(Le),d[B].c(),d[B].m(e,r))}for(;B<d.length;B+=1)d[B].d(1);d.length=u.length}if($&2){a=(Ye=(Ce=_[1])==null?void 0:Ce.circle)!=null?Ye:[];let B;for(B=0;B<a.length;B+=1){const Le=Yo(_,a,B);f[B]?f[B].p(Le,$):(f[B]=ts(Le),f[B].c(),f[B].m(e,i))}for(;B<f.length;B+=1)f[B].d(1);f.length=a.length}if($&2){h=(Yt=(st=_[1])==null?void 0:st.polygon)!=null?Yt:[];let B;for(B=0;B<h.length;B+=1){const Le=Ko(_,h,B);p[B]?p[B].p(Le,$):(p[B]=ns(Le),p[B].c(),p[B].m(e,o))}for(;B<p.length;B+=1)p[B].d(1);p.length=h.length}if($&2){m=(Be=(Jt=_[1])==null?void 0:Jt.polyline)!=null?Be:[];let B;for(B=0;B<m.length;B+=1){const Le=Qo(_,m,B);g[B]?g[B].p(Le,$):(g[B]=rs(Le),g[B].c(),g[B].m(e,l))}for(;B<g.length;B+=1)g[B].d(1);g.length=m.length}if($&2){v=(Zt=(Bt=_[1])==null?void 0:Bt.line)!=null?Zt:[];let B;for(B=0;B<v.length;B+=1){const Le=Xo(_,v,B);y[B]?y[B].p(Le,$):(y[B]=is(Le),y[B].c(),y[B].m(e,null))}for(;B<y.length;B+=1)y[B].d(1);y.length=v.length}tt(e,D=W(C,[$&2&&((ir=_[1])==null?void 0:ir.a),{xmlns:"http://www.w3.org/2000/svg"},$&1&&{width:_[0]},$&1&&{height:_[0]},$&4&&_[2]]))},i:ue,o:ue,d(_){_&&E(e),Nt(s,_),Nt(d,_),Nt(f,_),Nt(p,_),Nt(g,_),Nt(y,_)}}}function ih(t,e,n){let r;const i=["src","size","theme"];let o=et(e,i),{src:l}=e,{size:c="100%"}=e,{theme:s="default"}=e;if(c!=="100%"&&c.slice(-1)!="x"&&c.slice(-1)!="m"&&c.slice(-1)!="%")try{c=parseInt(c)+"px"}catch{c="100%"}return t.$$set=u=>{e=G(G({},e),Kt(u)),n(2,o=et(e,i)),"src"in u&&n(3,l=u.src),"size"in u&&n(0,c=u.size),"theme"in u&&n(4,s=u.theme)},t.$$.update=()=>{var u;t.$$.dirty&24&&n(1,r=(u=l==null?void 0:l[s])!=null?u:l==null?void 0:l.default)},[c,r,o,l,s]}class fn extends Pe{constructor(e){super(),Re(this,e,ih,rh,ke,{src:3,size:0,theme:4})}}const oh={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M10 3.75a2 2 0 10-4 0 2 2 0 004 0zM17.25 4.5a.75.75 0 000-1.5h-5.5a.75.75 0 000 1.5h5.5zM5 3.75a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5a.75.75 0 01.75.75zM4.25 17a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5zM17.25 17a.75.75 0 000-1.5h-5.5a.75.75 0 000 1.5h5.5zM9 10a.75.75 0 01-.75.75h-5.5a.75.75 0 010-1.5h5.5A.75.75 0 019 10zM17.25 10.75a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5zM14 10a2 2 0 10-4 0 2 2 0 004 0zM10 16.25a2 2 0 10-4 0 2 2 0 004 0z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{d:"M18.75 12.75h1.5a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5zM12 6a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 0112 6zM12 18a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 0112 18zM3.75 6.75h1.5a.75.75 0 100-1.5h-1.5a.75.75 0 000 1.5zM5.25 18.75h-1.5a.75.75 0 010-1.5h1.5a.75.75 0 010 1.5zM3 12a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 013 12zM9 3.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5zM12.75 12a2.25 2.25 0 114.5 0 2.25 2.25 0 01-4.5 0zM9 15.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z"}]}},os={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M3.28 2.22a.75.75 0 00-1.06 1.06L5.44 6.5H2.75a.75.75 0 000 1.5h4.5A.75.75 0 008 7.25v-4.5a.75.75 0 00-1.5 0v2.69L3.28 2.22zM13.5 2.75a.75.75 0 00-1.5 0v4.5c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-2.69l3.22-3.22a.75.75 0 00-1.06-1.06L13.5 5.44V2.75zM3.28 17.78l3.22-3.22v2.69a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.69l-3.22 3.22a.75.75 0 101.06 1.06zM13.5 14.56l3.22 3.22a.75.75 0 101.06-1.06l-3.22-3.22h2.69a.75.75 0 000-1.5h-4.5a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0v-2.69z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M3.22 3.22a.75.75 0 011.06 0l3.97 3.97V4.5a.75.75 0 011.5 0V9a.75.75 0 01-.75.75H4.5a.75.75 0 010-1.5h2.69L3.22 4.28a.75.75 0 010-1.06zm17.56 0a.75.75 0 010 1.06l-3.97 3.97h2.69a.75.75 0 010 1.5H15a.75.75 0 01-.75-.75V4.5a.75.75 0 011.5 0v2.69l3.97-3.97a.75.75 0 011.06 0zM3.75 15a.75.75 0 01.75-.75H9a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-2.69l-3.97 3.97a.75.75 0 01-1.06-1.06l3.97-3.97H4.5a.75.75 0 01-.75-.75zm10.5 0a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-2.69l3.97 3.97a.75.75 0 11-1.06 1.06l-3.97-3.97v2.69a.75.75 0 01-1.5 0V15z","clip-rule":"evenodd"}]}},ss={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M13.28 7.78l3.22-3.22v2.69a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.69l-3.22 3.22a.75.75 0 001.06 1.06zM2 17.25v-4.5a.75.75 0 011.5 0v2.69l3.22-3.22a.75.75 0 011.06 1.06L4.56 16.5h2.69a.75.75 0 010 1.5h-4.5a.747.747 0 01-.75-.75zM12.22 13.28l3.22 3.22h-2.69a.75.75 0 000 1.5h4.5a.747.747 0 00.75-.75v-4.5a.75.75 0 00-1.5 0v2.69l-3.22-3.22a.75.75 0 10-1.06 1.06zM3.5 4.56l3.22 3.22a.75.75 0 001.06-1.06L4.56 3.5h2.69a.75.75 0 000-1.5h-4.5a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0V4.56z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M15 3.75a.75.75 0 01.75-.75h4.5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0V5.56l-3.97 3.97a.75.75 0 11-1.06-1.06l3.97-3.97h-2.69a.75.75 0 01-.75-.75zm-12 0A.75.75 0 013.75 3h4.5a.75.75 0 010 1.5H5.56l3.97 3.97a.75.75 0 01-1.06 1.06L4.5 5.56v2.69a.75.75 0 01-1.5 0v-4.5zm11.47 11.78a.75.75 0 111.06-1.06l3.97 3.97v-2.69a.75.75 0 011.5 0v4.5a.75.75 0 01-.75.75h-4.5a.75.75 0 010-1.5h2.69l-3.97-3.97zm-4.94-1.06a.75.75 0 010 1.06L5.56 19.5h2.69a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75v-4.5a.75.75 0 011.5 0v2.69l3.97-3.97a.75.75 0 011.06 0z","clip-rule":"evenodd"}]}},sh={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"}]}},ah={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"}]}},lh={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.636 5.636a9 9 0 1012.728 0M12 3v9"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M10 2a.75.75 0 01.75.75v7.5a.75.75 0 01-1.5 0v-7.5A.75.75 0 0110 2zM5.404 4.343a.75.75 0 010 1.06 6.5 6.5 0 109.192 0 .75.75 0 111.06-1.06 8 8 0 11-11.313 0 .75.75 0 011.06 0z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 01.75.75v9a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM6.166 5.106a.75.75 0 010 1.06 8.25 8.25 0 1011.668 0 .75.75 0 111.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 011.06 0z","clip-rule":"evenodd"}]}},ch={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75a4.5 4.5 0 01-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 11-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 016.336-4.486l-3.276 3.276a3.004 3.004 0 002.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852z"},{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.867 19.125h.008v.008h-.008v-.008z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M19 5.5a4.5 4.5 0 01-4.791 4.49c-.873-.055-1.808.128-2.368.8l-6.024 7.23a2.724 2.724 0 11-3.837-3.837L9.21 8.16c.672-.56.855-1.495.8-2.368a4.5 4.5 0 015.873-4.575c.324.105.39.51.15.752L13.34 4.66a.455.455 0 00-.11.494 3.01 3.01 0 001.617 1.617c.17.07.363.02.493-.111l2.692-2.692c.241-.241.647-.174.752.15.14.435.216.9.216 1.382zM4 17a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M12 6.75a5.25 5.25 0 016.775-5.025.75.75 0 01.313 1.248l-3.32 3.319c.063.475.276.934.641 1.299.365.365.824.578 1.3.64l3.318-3.319a.75.75 0 011.248.313 5.25 5.25 0 01-5.472 6.756c-1.018-.086-1.87.1-2.309.634L7.344 21.3A3.298 3.298 0 112.7 16.657l8.684-7.151c.533-.44.72-1.291.634-2.309A5.342 5.342 0 0112 6.75zM4.117 19.125a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75h-.008a.75.75 0 01-.75-.75v-.008z","clip-rule":"evenodd"}]}};function At(t){return e=>{(e.key==="Enter"||e.key===" ")&&t(e)}}function as(t,e){for(var n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}const Vr=["Ancient","Dawn","Small","Broken","Red","Cold","Wild","Divine","Empty","Patient","Holy","Long","Wispy","White","Delicate","Bold","Billowing","Blue","Crimson","Aged","Misty","Snowy","Withered","Little","Frosty","Weathered","Nameless","Fragrant","Lively","Quiet","Purple","Proud","Dry","Bitter","Dark","Icy","Twilight","Wandering","Solitary","Morning","Lingering","Still","Late","Sparkling","Restless","Winter","Silent","Floral","Young","Green","Cool","Autumn","Falling","Spring","Summer","Polished","Hidden","Damp","Muddy","Black","Old","Rough"],Ur=["Pond","Snow","Glade","Hill","Voice","River","Sun","Dawn","Forest","Frog","Grass","Shadow","Dust","Water","Meadow","Moon","Thunder","Sun","Wildflower","Snowflake","Silence","Haze","Shape","Pine","Waterfall","Sound","Wood","Tree","Night","Flower","Dream","Cherry","Resonance","Firefly","Bush","Star","Darkness","Lake","Frost","Paper","Surf","Fog","Brook","Mountain","Field","Bird","Leaf","Sea","Water","Sky","Smoke","Sunset","Glitter","Dew","Butterfly","Wind","Fire","Rain","Morning","Feather","Cloud","Breeze","Violet","Wave"];function uh(t,e){let n=Vr.length>>>0,r=Ur.length>>>0,i=Math.max(n,r)>>>0,o=Math.max(1,(t+1)%i)>>>0,l=Math.max(1,(e+1)%i)>>>0,c=Vr[(o+l)%n],s=Ur[o*l%r];return c+"-"+s}function ls(){var t=Vr[Math.floor(Math.random()*Vr.length)],e=Ur[Math.floor(Math.random()*Ur.length)];return t+"-"+e}function fh(t){for(var e=window.location.search.substring(1),n=e.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(decodeURIComponent(i[0])==t)return decodeURIComponent(i[1])}}function cs(t,e,n){var r,i,o,l=null,c=0;n||(n={});var s=function(){c=n.leading===!1?0:Date.now(),l=null,o=t.apply(r,i),l||(r=i=null)};return function(){var u=Date.now();!c&&n.leading===!1&&(c=u);var d=e-(u-c);return r=this,i=arguments,d<=0||d>e?(l&&(clearTimeout(l),l=null),c=u,o=t.apply(r,i),l||(r=i=null)):!l&&n.trailing!==!1&&(l=setTimeout(s,d)),o}}class dh{constructor(){this.items=[]}push(e){this.items.push(e)}pop(){if(!this.isEmpty())return this.items.splice(0,1)}peak(){if(!this.isEmpty())return this.items[0]}isEmpty(){return this.items.length==0}printQueue(){for(var e="",n=0;n<this.items.length;n++)e+=this.items[n]+" ";return e}}function hh(t){return new Promise(e=>{console.info("checkingUrl",t);try{fetch(t).then(()=>{e(!0)}).catch(n=>{console.warn("Internet Offline, starting switch to local mode",n),e(!1)})}catch(n){console.warn("Error Checking internet, starting switch to local mode",n),e(!1)}})}window.closeFullscreen=()=>{const t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(t){const e=()=>{t.classList.remove("fullscreen-open")};document.exitFullscreen?document.exitFullscreen().then(e):document.msExitFullscreen?document.msExitFullscreen().then(e):document.mozCancelFullScreen?document.mozCancelFullScreen().then(e):document.webkitExitFullscreen&&document.webkitExitFullscreen().then(e)}};window.toggleFullscreen=(t,e)=>{e=e||document.documentElement,t&&t.initialTarget&&t.initialTarget.classList.toggle("fullscreen-open");const n=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,r=()=>{e.classList.add("fullscreen-open")},i=()=>{n.classList.remove("fullscreen-open"),e!==n&&(e.requestFullscreen?e.requestFullscreen().then(r):e.msRequestFullscreen?e.msRequestFullscreen().then(r):e.mozRequestFullScreen?e.mozRequestFullScreen().then(r):e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT).then(r))};n?document.exitFullscreen?document.exitFullscreen().then(i):document.msExitFullscreen?document.msExitFullscreen().then(i):document.mozCancelFullScreen?document.mozCancelFullScreen().then(i):document.webkitExitFullscreen&&document.webkitExitFullscreen().then(i):e.requestFullscreen?e.requestFullscreen().then(r):e.msRequestFullscreen?e.msRequestFullscreen().then(r):e.mozRequestFullScreen?e.mozRequestFullScreen().then(r):e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT).then(r)};function ph(t,e){e=e||document.documentElement,console.log("toggleFullscreen",e);var n=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(console.log(n,e),!n||e!==n){const r=i=>e.requestFullscreen(i);console.log("requestFullscreenFunc",r),r(Element.ALLOW_KEYBOARD_INPUT)}else(i=>document.exitFullscreen(i))()}function zr(t){return ja+uh(t,Ud)}function gh(t){var e=Number(t[0].toFixed(3)),n=-1*Number(t[1].toFixed(3)),r=Number(t[2].toFixed(3)),i=-1*Number(t[3].toFixed(3));return{thrustVector:[r,n,i],turnRate:e}}let ni={};function we(t,e,n){if(ni[t])return;let i=Qn.push({msg:t,duration:e||5e3});return ni[t]=i,Qn.subscribe(o=>{o.find(c=>c.msg===t)||(delete ni[t],n&&n())}),i}function hr(t,e){Ee.openDialog(Yr.Alert,{title:t},n=>{e&&n==!0&&e(n)})}let us=!1;function mh(t,e){us||(us=!0,Ee.openDialog(Yr.Password,{},n=>{n!=null&&e&&e(n)}))}function vh(t,e){let n=Ee.openDialog(Yr.ScrollingText,{title:t,messageLines:[]},i=>{e&&e(null)});return i=>{n(o=>({...o,messageLines:[...o.messageLines,i]}))}}const yh=document.getElementById("connect_btn"),_h=document.getElementById("connect_btn_options");document.getElementById("disconnect_btn");const bh=document.getElementById("connected_rov_label");document.getElementById("rov_connection_bar");function fs(){document.body.classList.remove("rov-connected"),rt("all")}function ds(t){console.log("showROVConnectingUi",_h),document.body.classList.remove("rov-connected"),Ht("webrtc-connecting","Searching for "+t)}function Ch(){Ti(!1),document.body.classList.add("rov-connected"),rt("webrtc-connecting"),rt("webrtc-reconnecting")}function hs(){let t=gt(Ct),e=zr(t),n="ROV "+t+" ("+e.replace(ja,"")+")";yh.innerText="Connect to "+n,bh.innerText=n}function ps(){document.getElementById("scan_for_ip_btn").style.display="block"}function Ah(){document.getElementById("scan_for_ip_btn").style.display="none"}const ki=document.getElementById("site_loading_indicator"),Ua=document.getElementById("site_loading_text");let Dn={};function Ht(t,e){const n=Dn[t]=e||Ei[t]||Ei.default;ki.style.display="block",Ua.innerHTML=n}function rt(t){delete Dn[t];const e=Object.keys(Dn);if(t=="all"||e.length==0)ki.style.display="none",Dn={},console.log("Done Loading:",t);else{console.log("Loading:",t);const n=Dn[e[e.length-1]];Ua.innerHTML=n||Ei.default,ki.style.display="block"}}document.getElementById("livestream_container");document.getElementById("client_peer_id_label");document.getElementById("role_display_text");const gs=document.getElementById("take_control_btn");function Ti(t){t?(document.body.classList.add("rov-driver"),gs.classList.add("hidden")):(document.body.classList.remove("rov-driver"),gs.classList.remove("hidden"))}var Sh=document.getElementById("ping_value");function Eh(t){Sh.innerText=t}document.getElementById("battery_value");var kh=document.getElementById("pressure_value"),Th=document.getElementById("temp_value");function wh(t){t.pressure&&(kh.innerText=String(t.pressure/.001*(1023.6*9.8065))),t.temperature&&(Th.innerText=t.temperature),t.yaw&&Oh(t.yaw),t.pitch&&t.roll&&Mh(t.roll,-t.pitch)}document.getElementById("actions-menu-overlay");document.getElementById("actions-menu-button");var Rh=document.getElementById("compassDiscImg");const Ph=135;function Oh(t){var e=-(t+Ph);Rh.style.transform=`translateX(${e}px)`}const Dh=document.body;function Mh(t,e){var n=Math.min(Math.max(e,-90),90)/90*100;Dh.style.backgroundImage=`linear-gradient(${t}deg, rgba(2,0,36,1) ${-100+n}%, rgba(9,88,116,1) ${50+n}%, rgba(10,109,140,1) ${50+n}%, rgba(0,255,235,1) ${200+n}%)`}let pr;const Ih=new Uint8Array(16);function Bh(){if(!pr&&(pr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!pr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pr(Ih)}const Ge=[];for(let t=0;t<256;++t)Ge.push((t+256).toString(16).slice(1));function Lh(t,e=0){return(Ge[t[e+0]]+Ge[t[e+1]]+Ge[t[e+2]]+Ge[t[e+3]]+"-"+Ge[t[e+4]]+Ge[t[e+5]]+"-"+Ge[t[e+6]]+Ge[t[e+7]]+"-"+Ge[t[e+8]]+Ge[t[e+9]]+"-"+Ge[t[e+10]]+Ge[t[e+11]]+Ge[t[e+12]]+Ge[t[e+13]]+Ge[t[e+14]]+Ge[t[e+15]]).toLowerCase()}const xh=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ms={randomUUID:xh};function Fh(t,e,n){if(ms.randomUUID&&!e&&!t)return ms.randomUUID();t=t||{};const r=t.random||(t.rng||Bh)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return Lh(r)}let vs=NaN;const Ie=class{static handlePasswordChallenge(e){mh("Please enter the driver password",n=>{if(n){const r={cid:e,action:"password_attempt",val:n};Ie.sendRovMessage(r,null)}else delete Ie.replyContinuityCallbacks[e]})}static handleReplyMsgRecived(e,n){const r=e.status,i=e.val,o=Ie.replyContinuityCallbacks[n].callback;if(r=="error")console.warn("Rov Action Error: "+i),we(i);else if(r=="pong"){console.log("Ping->Pong received"),vs=Date.now();const l=vs-Number.parseFloat(i);Eh(l)}else if(r=="done")o?o(e):we(Ie.replyContinuityCallbacks[n].originalMsgData.action+": OK");else if(r=="password-required")o&&o(e),Ie.handlePasswordChallenge(n);else if(r=="password-invalid")o&&o(e),we("Invalid password"),o&&o(e),Ie.handlePasswordChallenge(n);else if(r=="password-accepted"){we("Password accepted"),o&&o(e);const l=Ie.replyContinuityCallbacks[n].original_msg;console.log("originalMsgData: ",l),Ie.sendRovMessage(l,null)}else o&&o(e)}static handleDriverChange(e){let n=Ee.connManager.getThisPeerId();e==n?(we("You are now the driver"),Ti(!0),zo.set(!0)):(we("ROV Driver is now "+e),Ti(!1),zo.set(!1))}static handleBroadcastMsgRecived(e){const n=e.status,r=e.val;n=="error"?console.error("Rov Error: "+r):n=="sensor-update"?wh(r):n=="driver-changed"&&Ie.handleDriverChange(r)}static handleRecivedMessage(e){const n=JSON.parse(e),r=n.cid;r&&r in Ie.replyContinuityCallbacks?Ie.handleReplyMsgRecived(n,r):Ie.handleBroadcastMsgRecived(n)}};let We=Ie;U(We,"replyContinuityCallbacks",{}),U(We,"sendMessageCallback",null),U(We,"setSendMessageCallback",e=>{Ie.sendMessageCallback=e}),U(We,"sendRovMessage",(e,n,r=!1)=>{let i=e.cid;i||(i=e.cid=Fh().substring(0,8)),Ie.replyContinuityCallbacks[i]||(Ie.replyContinuityCallbacks[i]={original_msg:e}),n&&(Ie.replyContinuityCallbacks[i].callback=n);const o=JSON.stringify(e);Ie.sendMessageCallback&&Ie.sendMessageCallback(o,r)});const xe=class{static sendActionAndWaitForDone(e,n){let r="";We.sendRovMessage(e,i=>{r+=(i.val||"")+`
`;const l=i.status;l&&n&&(l=="done"?n(r):l=="error"&&n("Error: "+r))})}static startPingLoop(){const e=setInterval(()=>{We.sendRovMessage({action:"ping",val:Date.now()},null,!0)},2e3);return()=>{clearInterval(e)}}static showCommandOutputPopup(e,n,r){let i=vh(e);return i(n),o=>{let l=o.status;l=="password-required"||l=="password-invalid"||l=="password-accepted"||l=="token-accepted"||(l=="error"?i(`
Error:
`+o.val):o.val?i(o.val):o.status=="done"&&i(r))}}static connectToRov(){Ee.connManager&&Ee.connManager.connectToCurrentTargetRov()}static disconnectFromRov(){Ee.connManager&&Ee.connManager.disconnectFromCurrentRov()}static switchToNextRovPeerId(){Ct.update(e=>(e++,localStorage.setItem("rovPeerIdEndNumber",e.toString()),e)),hs(),xe.disconnectFromRov()}static switchToPrevRovPeerId(){Ct.update(e=>(e=Math.max(e-1,0),localStorage.setItem("rovPeerIdEndNumber",e.toString()),e)),hs(),xe.disconnectFromRov()}static takeControl(){We.sendRovMessage({action:zt.take_control},null)}static moveRov(e,n){console.info("moveRovEq",as(e,xe.lastMove.thrustVector),n==xe.lastMove.turnRate),!(as(e,xe.lastMove.thrustVector)&&n==xe.lastMove.turnRate)&&(xe.lastMove={thrustVector:e,turnRate:n},We.sendRovMessage({action:zt.move,val:{thrustVector:e,turnRate:n}},null,!0))}static toggleLights(){We.sendRovMessage({action:zt.toogle_lights},null)}};let he=xe;U(he,"lastMove",{thrustVector:[0,0,0],turnRate:0}),U(he,"shutdownRov",()=>{hr("Are you sure you want to shutdown the ROV?",e=>{we("Sending Shutdown Request..."),xe.sendActionAndWaitForDone({action:"shutdown_rov"},n=>{we("Please wait 20 seconds before unplugging"),we("ROV:"+n),xe.disconnectFromRov()})})}),U(he,"rebootRov",()=>{hr("Are you sure you want to reboot the ROV?",e=>{we("Sending Reboot Request..."),xe.sendActionAndWaitForDone({action:"reboot_rov"},n=>{we("Press Connect again in about 30 seconds"),we("ROV:"+n),xe.disconnectFromRov()})})}),U(he,"restartRovServices",()=>{hr("Are you sure you want to restart services? - The ROV will stop responding for about a minute and then you can re-connect.",()=>{let e=xe.showCommandOutputPopup("Restarting ROV Services",`Sending Service Restart Request (Please Wait)...
`,`

Done.`);We.sendRovMessage({action:"restart_rov_services"},e)})}),U(he,"getRovStatusReport",()=>{let e=xe.showCommandOutputPopup("ROV Status Report",`Sending Status Request (Please Wait)...
`,`

Done.`);We.sendRovMessage({action:"rov_status_report"},e)}),U(he,"getRovLogs",()=>{let e=xe.showCommandOutputPopup("ROV Logs",`Sending Request (Please Wait)...
`,`

Done.`);We.sendRovMessage({action:"rov_logs"},e)}),U(he,"enableRovWifi",()=>{we("Sending Enable Wifi Command..."),xe.sendActionAndWaitForDone({action:"enable_wifi"},e=>{we("Wifi Enabled! "+e)})}),U(he,"disableRovWifi",()=>{hr("Are you sure you want to disable rov wifi? If the ROV is connected via wifi, don't do this!",()=>{we("Sending Disable Wifi Command..."),xe.sendActionAndWaitForDone({action:"disable_wifi"},e=>{we("Wifi Disabled! "+e)})})});window.RovActions=he;function ys(t){let e,n,r,i;return{c(){e=A("p"),n=Je("You Are: "),r=A("span"),i=Je(t[5]),P(r,"class","font-bold"),P(e,"class","text-center p-2 text-white")},m(o,l){T(o,e,l),M(e,n),M(e,r),M(r,i)},p(o,l){l&32&&Wt(i,o[5])},d(o){o&&E(e)}}}function _s(t){let e,n;return{c(){e=A("h2"),n=Je(t[2]),P(e,"class","text-center p-2 pt-0 font-bold ")},m(r,i){T(r,e,i),M(e,n)},p(r,i){i&4&&Wt(n,r[2])},d(r){r&&E(e)}}}function Nh(t){let e,n,r,i,o,l=t[4]?"Disconnect":"Connect",c,s,u,d,a;return{c(){e=A("button"),n=A("span"),r=Je(t[2]),i=te(),o=A("span"),c=Je(l),P(n,"class","swap-off"),P(o,"class","swap-on whitespace-nowrap inline"),P(e,"class",s=`btn btn-sm btn-primary align-top swap ${t[3]?"swap-active":""}`)},m(f,h){T(f,e,h),M(e,n),M(n,r),M(e,i),M(e,o),M(o,c),d||(a=[ne(e,"mouseenter",t[11]),ne(e,"mouseleave",t[12]),ne(e,"click",t[13])],d=!0)},p(f,h){h&4&&Wt(r,f[2]),h&16&&l!==(l=f[4]?"Disconnect":"Connect")&&Wt(c,l),h&8&&s!==(s=`btn btn-sm btn-primary align-top swap ${f[3]?"swap-active":""}`)&&P(e,"class",s)},i(f){u||it(()=>{u=Gi(e,Xn,{}),u.start()})},o:ue,d(f){f&&E(e),d=!1,z(a)}}}function Gh(t){let e,n,r,i;return{c(){e=A("button"),e.textContent="Connect",P(e,"class","btn btn-sm btn-primary align-top")},m(o,l){T(o,e,l),r||(i=ne(e,"click",t[10]),r=!0)},p:ue,i(o){n||it(()=>{n=Gi(e,Xn,{}),n.start()})},o:ue,d(o){o&&E(e),r=!1,i()}}}function jh(t){let e,n,r,i,o,l,c,s,u,d,a,f,h,p,m,g=t[4]&&ys(t),v=!t[4]&&_s(t);l=new fn({props:{theme:"solid",src:sh,class:"w-6 h-6"}});function y(k,I){return k[4]?Nh:Gh}let C=y(t),D=C(t);return d=new fn({props:{theme:"solid",src:ah,class:"w-6 h-6"}}),{c(){e=A("div"),g&&g.c(),n=te(),r=A("div"),v&&v.c(),i=te(),o=A("button"),se(l.$$.fragment),c=te(),D.c(),s=te(),u=A("button"),se(d.$$.fragment),P(o,"class","btn btn-sm btn-ghost btn-secondary"),P(o,"aria-label","Switch to Previous ROV"),P(u,"class","btn btn-sm btn-ghost btn-secondary"),P(u,"aria-label","Switch to Next ROV"),P(r,"class",a=`bg-base-100 m-0 p-2 pb-1 whitespace-nowrap text-center rounded-xl  ${t[4]?"rounded-b-none":""}`),P(e,"id","rov_chooser"),P(e,"class",f=Rr(`fixed left-1/2 bottom-0  -translate-x-1/2 transition-all overflow-hidden z-50  ${t[4]?" ":"disconnected"} `)+" svelte-1simma4")},m(k,I){T(k,e,I),g&&g.m(e,null),M(e,n),M(e,r),v&&v.m(r,null),M(r,i),M(r,o),ie(l,o,null),M(r,c),D.m(r,null),M(r,s),M(r,u),ie(d,u,null),h=!0,p||(m=[ne(o,"click",t[1]),ne(u,"click",t[0])],p=!0)},p(k,[I]){k[4]?g?g.p(k,I):(g=ys(k),g.c(),g.m(e,n)):g&&(g.d(1),g=null),k[4]?v&&(v.d(1),v=null):v?v.p(k,I):(v=_s(k),v.c(),v.m(r,i)),C===(C=y(k))&&D?D.p(k,I):(D.d(1),D=C(k),D&&(D.c(),S(D,1),D.m(r,s))),(!h||I&16&&a!==(a=`bg-base-100 m-0 p-2 pb-1 whitespace-nowrap text-center rounded-xl  ${k[4]?"rounded-b-none":""}`))&&P(r,"class",a),(!h||I&16&&f!==(f=Rr(`fixed left-1/2 bottom-0  -translate-x-1/2 transition-all overflow-hidden z-50  ${k[4]?" ":"disconnected"} `)+" svelte-1simma4"))&&P(e,"class",f)},i(k){h||(S(l.$$.fragment,k),S(D),S(d.$$.fragment,k),h=!0)},o(k){w(l.$$.fragment,k),w(d.$$.fragment,k),h=!1},d(k){k&&E(e),g&&g.d(),v&&v.d(),oe(l),D.d(),oe(d),p=!1,z(m)}}}function Vh(t,e,n){let r,i,o,l,c;Ne(t,Ct,v=>n(7,i=v)),Ne(t,jt,v=>n(8,o=v)),Ne(t,Kn,v=>n(9,l=v)),Ne(t,qt,v=>n(5,c=v));let{selectedRov:s=""}=e,u="";const d=()=>{he.disconnectFromRov(),to(Ct,i=i+1,i),r&&he.connectToRov()},a=()=>{he.disconnectFromRov(),to(Ct,i=Math.max(i-1,0),i),r&&he.connectToRov()};let f=!1;const h=()=>{he.connectToRov()},p=()=>{n(3,f=!0)},m=()=>{n(3,f=!1)},g=()=>{he.disconnectFromRov(),n(3,f=!1)};return t.$$set=v=>{"selectedRov"in v&&n(6,s=v.selectedRov)},t.$$.update=()=>{t.$$.dirty&768&&n(4,r=l===V.connected||l===V.connecting||l===V.reconnecting||o===V.connecting||o===V.reconnecting||o===V.disconnected),t.$$.dirty&128&&n(6,s=zr(i)),t.$$.dirty&192&&n(2,u="ROV "+i+s.replace("ROV-"," | "))},[d,a,u,f,r,c,s,i,o,l,h,p,m,g]}class Uh extends Pe{constructor(e){super(),Re(this,e,Vh,jh,ke,{selectedRov:6,nextRov:0,prevRov:1})}get nextRov(){return this.$$.ctx[0]}get prevRov(){return this.$$.ctx[1]}}function zh(t){let e,n,r,i;return{c(){e=A("div"),n=A("div"),r=te(),i=A("div"),P(n,"class","line svelte-wxznj7"),P(i,"class","bg svelte-wxznj7"),P(i,"id","compassDiscImg"),ro(i,"transform",`translateX(${t[0]}px)`,!1),P(e,"class","compass bg-base-100 svelte-wxznj7")},m(o,l){T(o,e,l),M(e,n),M(e,r),M(e,i)},p(o,[l]){l&1&&ro(i,"transform",`translateX(${o[0]}px)`,!1)},i:ue,o:ue,d(o){o&&E(e)}}}function qh(t,e,n){let{angle:r=0}=e,i=()=>{n(0,r=(r+1)%360),requestAnimationFrame(i)};return requestAnimationFrame(i),t.$$set=o=>{"angle"in o&&n(0,r=o.angle)},[r]}class Hh extends Pe{constructor(e){super(),Re(this,e,qh,zh,ke,{angle:0})}}function bs(t){let e,n,r,i,o,l,c,s,u,d,a,f,h,p,m,g,v,y,C,D,k,I,O,N,H,R,X,ce,me,ve,Se,Ke,Te,_,$,re,ye;return o=new fn({props:{theme:"mini",src:lh,class:"h-12"}}),v=new fn({props:{theme:"solid",src:ch,class:"h-12"}}),me=new fn({props:{theme:"solid",src:oh,class:"h-12"}}),{c(){e=A("div"),n=A("div"),r=A("ul"),i=A("li"),se(o.$$.fragment),l=te(),c=A("li"),c.innerHTML='<span class="btn btn-ghost svelte-14r7sea">Shutdown ROV</span>',s=te(),u=A("li"),u.innerHTML='<span class="btn btn-ghost svelte-14r7sea">Reboot ROV</span>',d=te(),a=A("li"),a.innerHTML='<span class="btn btn-ghost svelte-14r7sea">Restart ROV Services</span>',f=te(),h=A("div"),p=te(),m=A("ul"),g=A("li"),se(v.$$.fragment),y=te(),C=A("li"),C.innerHTML='<span class="btn btn-ghost svelte-14r7sea">System Status</span>',D=te(),k=A("li"),k.innerHTML='<span class="btn btn-ghost svelte-14r7sea">ROV Logs</span>',I=te(),O=A("li"),O.innerHTML='<span class="btn btn-ghost svelte-14r7sea">Local Debug Links</span>',N=te(),H=A("div"),R=te(),X=A("ul"),ce=A("li"),se(me.$$.fragment),ve=te(),Se=A("li"),Se.innerHTML='<span class="btn btn-ghost svelte-14r7sea">Enable ROV Wifi</span>',Ke=te(),Te=A("li"),Te.innerHTML='<span class="btn btn-ghost svelte-14r7sea">Disable ROV Wifi</span>',P(i,"class","pointer-events-none"),P(i,"aria-hidden","true"),P(c,"role","menuitem"),P(u,"role","menuitem"),P(a,"role","menuitem"),P(r,"class","menu inline-block menu-normal flex-1 svelte-14r7sea"),P(h,"class","divider md:divider-horizontal md:m-0"),P(g,"class","pointer-events-none"),P(g,"aria-hidden","true"),P(C,"role","menuitem"),P(k,"role","menuitem"),P(O,"role","menuitem"),P(m,"class","menu inline-block menu-normal flex-1 svelte-14r7sea"),P(H,"class","divider md:divider-horizontal md:m-0"),P(ce,"class","pointer-events-none"),P(ce,"aria-hidden","true"),P(Se,"role","menuitem"),P(Te,"role","menuitem"),P(X,"class","menu inline-block menu-normal flex-1 svelte-14r7sea"),P(n,"class","multi-menu card-body md:flex-row rounded-box  svelte-14r7sea"),P(e,"class","mt-1 m-auto z-50 w-full max-w-max card card-compact dropdown-content bg-base-100 shadow p-1")},m(De,ot){T(De,e,ot),M(e,n),M(n,r),M(r,i),ie(o,i,null),M(r,l),M(r,c),M(r,s),M(r,u),M(r,d),M(r,a),M(n,f),M(n,h),M(n,p),M(n,m),M(m,g),ie(v,g,null),M(m,y),M(m,C),M(m,D),M(m,k),M(m,I),M(m,O),M(n,N),M(n,H),M(n,R),M(n,X),M(X,ce),ie(me,ce,null),M(X,ve),M(X,Se),M(X,Ke),M(X,Te),$=!0,re||(ye=[ne(c,"click",he.shutdownRov),ne(c,"keypress",At(he.shutdownRov)),ne(u,"click",he.rebootRov),ne(u,"keypress",At(he.rebootRov)),ne(a,"click",he.restartRovServices),ne(a,"keypress",At(he.rebootRov)),ne(C,"click",he.getRovStatusReport),ne(C,"keypress",At(he.rebootRov)),ne(k,"click",he.getRovLogs),ne(k,"keypress",At(he.rebootRov)),ne(O,"click",t[4]),ne(O,"keypress",At(t[5])),ne(Se,"click",he.enableRovWifi),ne(Se,"keypress",At(he.rebootRov)),ne(Te,"click",he.disableRovWifi),ne(Te,"keypress",At(he.rebootRov))],re=!0)},p:ue,i(De){$||(S(o.$$.fragment,De),S(v.$$.fragment,De),S(me.$$.fragment,De),it(()=>{_||(_=an(e,Fr,{},!0)),_.run(1)}),$=!0)},o(De){w(o.$$.fragment,De),w(v.$$.fragment,De),w(me.$$.fragment,De),_||(_=an(e,Fr,{},!1)),_.run(0),$=!1},d(De){De&&E(e),oe(o),oe(v),oe(me),De&&_&&_.end(),re=!1,z(ye)}}}function Wh(t){let e,n,r,i,o,l,c,s,u,d,a,f,h,p,m;c=new Hh({}),a=new fn({props:{theme:"solid",src:t[1]?os:ss,class:"w-6 h-6"}});let g=t[0]&&bs(t);return{c(){e=A("div"),n=A("div"),r=A("div"),i=A("button"),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path></svg>',o=te(),l=A("div"),se(c.$$.fragment),s=te(),u=A("div"),d=A("button"),se(a.$$.fragment),f=te(),g&&g.c(),P(i,"tabindex","0"),P(i,"class","btn btn-ghost btn-square"),P(r,"class","pr-3 justify-start flex-shrink"),P(l,"class","navbar-center flex-1 self-stretch"),P(d,"class","btn btn-square btn-ghost"),P(u,"class","pl-3 justify-end flex-shrink"),P(n,"class","navbar rounded-t-none shadow-xl rounded-box h-9 p-0 min-h-0 lg:rounded-t-none bg-base-100 m-auto max-w-xl"),P(e,"class","px-1 fixed w-full block")},m(v,y){T(v,e,y),M(e,n),M(n,r),M(r,i),M(n,o),M(n,l),ie(c,l,null),M(n,s),M(n,u),M(u,d),ie(a,d,null),M(e,f),g&&g.m(e,null),h=!0,p||(m=[ne(i,"click",t[2]),ne(d,"click",t[3])],p=!0)},p(v,[y]){const C={};y&2&&(C.src=v[1]?os:ss),a.$set(C),v[0]?g?(g.p(v,y),y&1&&S(g,1)):(g=bs(v),g.c(),S(g,1),g.m(e,null)):g&&(Mt(),w(g,1,1,()=>{g=null}),It())},i(v){h||(S(c.$$.fragment,v),S(a.$$.fragment,v),S(g),h=!0)},o(v){w(c.$$.fragment,v),w(a.$$.fragment,v),w(g),h=!1},d(v){v&&E(e),oe(c),oe(a),g&&g.d(),p=!1,z(m)}}}function Xh(t,e,n){let r;Ne(t,Va,u=>n(1,r=u));let i=!1;return[i,r,()=>n(0,i=!i),u=>ph(u.target,null),()=>window.open("./404.html"),()=>window.open("./404.html")]}class Qh extends Pe{constructor(e){super(),Re(this,e,Xh,Wh,ke,{})}}const Kh=`<svg width="100%" height="100%" viewBox="0 0 123 232" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd">
  <g id="left_side_of_controller">
    <path d="M112.977 140.769c-6 29.375-13.537 33.424-35.28 43.583-35.355 16.519-33.138 57.105-56.59 45.51-14.36-7.1-21.13-19.23-21.13-38.4 0-24.92 11.42-65.99 32.4-119.1 10.625-22.199 25.844-16.641 42.794-16.641 7.93 0 15.744-1.226 22.454 2.224 14.564 7.511 21.031 55.022 15.352 82.824Z"/>
    <g id="stick_button_left">
      <text id="l_stick_action_help_label" x="58.522" y="222.614" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:11px">Forward</text>
      <g id="stick_bg_left">
        <circle id="shadow10" cx="81.987" cy="176.33" r="26.46" style="fill-opacity:.5"/>
        <circle id="Oval5" cx="80.737" cy="175.09" r="25.21" style="fill:#6180b0;stroke:#000;stroke-width:2.49px"/>
      </g>
      <path d="M80.737 179.329v-8.477h25.442v-7.872l12.11 12.11-12.11 12.11v-7.871H80.737Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_right_direction_highlight"/>
      <path d="M76.499 175.09h8.477v25.442h7.872l-12.11 12.11-12.11-12.11h7.871V175.09Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_down_direction_highlight"/>
      <path d="M80.737 170.852v8.477H55.295v7.871l-12.11-12.11 12.11-12.11v7.872h25.442Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_left_direction_highlight"/>
      <path d="M84.976 175.09h-8.477v-25.442h-7.872l12.11-12.11 12.11 12.11h-7.871v25.442Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_up_direction_highlight"/>
      <g id="stick_left">
        <circle id="shadow11" cx="82.597" cy="176.96" r="17.12" style="fill-opacity:.5"/>
        <use xlink:href="#2a" x="48" y="143" width="65" height="65" class="gpad-highlight" id="stick_button_left_highlight"/>
        <g id="Group-6">
          <circle id="Oval-Copy" cx="80.737" cy="175.09" r="15.88" style="fill:#fff;stroke:#000;stroke-width:2.49px"/>
          <circle id="Oval-Copy-2" cx="80.737" cy="175.09" r="12.14" style="fill:#fff;stroke:#000;stroke-width:1.25px"/>
        </g>
      </g>
    </g>
    <g id="select_button">
      <use xlink:href="#2b" x="78" y="118" width="43" height="39" class="gpad-highlight" id="select_button_highlight"/>
      <path id="select" d="M105.267 133.325a7.506 7.506 0 0 1 2.496 5.595 7.507 7.507 0 0 1-2.496 5.596H95.213a7.507 7.507 0 0 1-2.496-5.596c0-2.22.964-4.217 2.496-5.595h10.054Z" style="fill:#9a9a9a;fill-opacity:.5"/>
      <path id="select1" d="M104.162 132.138a7.506 7.506 0 0 1 2.496 5.595 7.507 7.507 0 0 1-2.496 5.596H94.108a7.507 7.507 0 0 1-2.496-5.596c0-2.22.964-4.217 2.496-5.595h10.054Z" style="fill:#fff;stroke:#000;stroke-width:1.35px"/>
      <text x="96.295" y="141.267" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:9.858px">?</text>
    </g>
    <g id="d_pad">
      <path d="M86.434 71.626c.913 0 1.659.746 1.659 1.659v18.212h18.212c.913 0 1.66.747 1.66 1.659v14.893c0 .913-.747 1.66-1.66 1.66H88.093v18.211c0 .913-.746 1.66-1.659 1.66H71.541c-.911 0-1.66-.749-1.66-1.66v-18.211H51.67c-.911 0-1.66-.749-1.66-1.66V93.156c0-.902.747-1.659 1.66-1.659h18.211V73.285c0-.902.747-1.659 1.66-1.659h14.893Z" style="fill:#9a9a9a;fill-opacity:.5" id="shadow14"/>
      <use xlink:href="#2c" x="53" y="54" width="48" height="53" class="gpad-highlight" id="d_pad_up_highlight"/>
      <use xlink:href="#2d" x="53" y="91" width="48" height="52" class="gpad-highlight" id="d_pad_down_highlight"/>
      <use xlink:href="#2e" x="70" y="75" width="52" height="48" class="gpad-highlight" id="d_pad_right_highlight"/>
      <use xlink:href="#2f" x="33" y="75" width="52" height="48" class="gpad-highlight" id="d_pad_left_highlight"/>
      <path d="M84.774 69.966c.913 0 1.66.747 1.66 1.66v18.211h18.222c.902 0 1.659.747 1.659 1.66V106.4c0 .903-.757 1.66-1.659 1.66H86.434v18.211c0 .903-.747 1.66-1.66 1.66H69.892c-.911 0-1.66-.749-1.66-1.66v-18.222H50.01c-.91 0-1.659-.749-1.659-1.659V91.497c0-.913.747-1.66 1.659-1.66h18.212V71.626c0-.913.747-1.66 1.659-1.66h14.893Z" style="fill:#fff;stroke:#000;stroke-width:1.66px;stroke-linejoin:round"/>
      <path d="m91.827 94.401 9.095 4.542-9.105 4.564V94.39l.01.011Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_right"/>
      <path d="m62.839 103.496-9.106-4.553 9.106-4.553v9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_left"/>
      <path d="m81.881 113.432-4.553 9.106-4.553-9.106h9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_down"/>
      <path d="m72.775 84.455 4.563-9.106 4.543 9.106h-9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_up"/>
      <path id="center_icon" d="M71.374 99.114c0-.817.672-1.49 1.49-1.49h8.939c.817 0 1.49.673 1.49 1.49v3.642c0 .817-.673 1.49-1.49 1.49h-8.939c-.818 0-1.49-.673-1.49-1.49v-3.642Zm1.071 1.382v2.389c0 .268.219.485.49.485h8.83a.49.49 0 0 0 .491-.485v-1.742l-1.452-1.437a.497.497 0 0 0-.694 0l-1.249 1.236.308.305c.099.091.156.22.156.355a.491.491 0 0 1-.85.331l-3.394-3.36a.497.497 0 0 0-.694 0l-1.942 1.923Zm5.55-2.209a.662.662 0 1 1 .001 1.323.662.662 0 0 1-.001-1.323Zm-5.131-1.656-.082.001c.21-.594.775-.995 1.406-.994h6.29c.649 0 1.202.415 1.406.994l-.081-.001h-8.939Zm1.242-1.985.082-.002h6.29c.028 0 .055 0 .082.002a1.493 1.493 0 0 0-1.406-.995h-3.642c-.63 0-1.196.4-1.406.995Z"/>
    </g>
    <g id="shoulder_trigger_back_left">
      <g class="direction_highlight" id="shoulder_trigger_back_left_direction_highlight">
        <path d="M110.415 51.254 98.146 34.763h24.538l-12.269 16.491Z" style="fill:#ff00bf"/>
        <path d="M97.161 17.167c2.534 0 13.254.512 13.218 21" style="fill:none;stroke:#ff00bf;stroke-width:8.5px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"/>
      </g>
      <path id="shadow4" d="M54.417 40.591h37.84c1.52 0 2.77-.618 2.77-1.36a.695.695 0 0 0-.07-.309l-10.9-23.604c-.7-1.545-3.53-2.648-6.75-2.648h-11.8c-7.66 0-13.86 3.05-13.86 6.811v19.761c0 .741 1.25 1.36 2.77 1.36v-.011Z" style="fill-opacity:.5"/>
      <use xlink:href="#2g" x="32" y="3" width="76" height="56" transform="translate(0 -4.346)" class="gpad-highlight" id="shoulder_trigger_back_left_highlight"/>
      <path id="bg" d="M51.957 38.16c-.38 0-.73-.072-.98-.196-.25-.124-.4-.288-.4-.484V17.719c0-1.69 1.4-3.225 3.65-4.327a20.546 20.546 0 0 1 8.83-1.803h11.79c1.26 0 2.48.206 3.46.597.98.392 1.67.928 1.95 1.525l10.9 23.625c.03.34-.13.515-.38.628-.26.134-.6.206-.98.206h-37.84v-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.2px"/>
      <path d="m74.228 32.999-.217-.942a.766.766 0 0 0-1.493.343l.9 3.914 3.914-.9a.766.766 0 0 0-.343-1.493l-1.606.369c.66-1.61.965-3.317.85-5.04a.766.766 0 0 0-1.529.101 9.59 9.59 0 0 1-.476 3.648Zm-9.227-13.535a2.177 2.177 0 1 1 4.168-.327.93.93 0 0 1 .191.118l2.594 2.023a.986.986 0 0 1-1.213 1.555l-2.594-2.023a1.04 1.04 0 0 1-.16-.158 2.16 2.16 0 0 1-1.678.093l-3.292 3.361.048.141.046.179c.021.101.036.205.043.312v.269c-.006.101-.019.2-.038.297l-.055.216a1.959 1.959 0 0 1-.044.129l3.292 3.361a2.16 2.16 0 0 1 1.678.093.957.957 0 0 1 .16-.158l2.594-2.023a.986.986 0 0 1 1.213 1.555L69.36 30.5a.97.97 0 0 1-.191.117 2.179 2.179 0 1 1-4.308.516 2.184 2.184 0 0 1 .14-.842l-3.291-3.362-.006.002a2.14 2.14 0 0 1-.356.093l-.131.018-.236.013-.171-.007-.188-.023a2.142 2.142 0 0 1-.447-.125l-.232-.108-.19-.117-.204-.158-.153-.147-.147-.173-.081-.113-.129-.221-.084-.186a2.661 2.661 0 0 1-.035-.095h-2.107v1.616a.704.704 0 1 1-1.408 0v-4.641a.704.704 0 1 1 1.408 0v1.616h2.107l.084-.209.08-.155.124-.195.144-.181.089-.095.125-.115.144-.113.065-.045.274-.156a2.182 2.182 0 0 1 .737-.2l.313-.006.24.027c.128.021.251.053.371.095l3.291-3.361Zm1.228 10.811.04-.038a1.127 1.127 0 1 1-.04.038Zm-4.929-6.48a1.13 1.13 0 0 0-1.401.76l-.032.141-.014.181.016.195.03.128a1.13 1.13 0 0 0 1.396.761l.113-.04c.411-.168.7-.572.7-1.044l-.002-.072a1.13 1.13 0 0 0-.698-.972l-.108-.038Zm12.928-7.039a9.59 9.59 0 0 1 .476 3.648.766.766 0 0 0 1.529.101c.115-1.723-.19-3.43-.85-5.04l1.606.369a.766.766 0 0 0 .343-1.493l-3.914-.901-.9 3.915a.765.765 0 1 0 1.493.343l.217-.942Zm-7.959 2.762a1.128 1.128 0 1 0-.04-.039l.04.039Z"/>
    </g>
    <g id="shoulder_button_front_left">
      <path id="shadow5" d="M94.279 44.584H54.287c-2.643 0-4.818 2.591-4.818 5.74v6.9c.004 1.258.875 2.29 1.931 2.29h45.767c1.059 0 1.93-1.038 1.93-2.3v-6.88c0-3.149-2.175-5.74-4.818-5.74v-.01Z" style="fill-opacity:.5"/>
      <use xlink:href="#2h" x="30" y="31" width="86" height="41" class="gpad-highlight" id="shoulder_button_front_left_highlight"/>
      <path id="bg1" d="M92.769 44.934h.017c2.109 0 3.844 2.067 3.844 4.58v6.92c0 .625-.433 1.14-.957 1.14H49.897c-.529 0-.965-.519-.965-1.15v-6.9c0-2.513 1.735-4.58 3.844-4.58h39.993v-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.12px"/>
      <text x="70.61" y="54.634" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:15px">-</text>
    </g>
    <g id="l_touch_targets" opacity="0">
      <path id="stick_button_left_touch_target" d="M103.497 149.101c7.227 6.337 11.792 15.634 11.792 25.989 0 19.069-15.482 34.551-34.552 34.551-19.069 0-34.551-15.482-34.551-34.551 0-19.07 15.482-34.552 34.551-34.552 2.258 0 4.466.217 6.601.631 1.548 5.051 6.247 8.728 11.797 8.728 1.535 0 3.005-.281 4.362-.796Z" style="fill:#419bf3"/>
      <path id="select_button_touch_target" d="M93.558 126.53a12.266 12.266 0 0 1 5.577-1.333c6.809 0 12.336 5.534 12.336 12.35s-5.527 12.35-12.336 12.35-12.337-5.534-12.337-12.35c0-1.681.336-3.284.945-4.744a18.743 18.743 0 0 0 5.815-6.273Z" style="fill:#419bf3"/>
      <path id="d_pad_left_touch_target" d="M57.9 116.925c-10.093-.218-18.219-8.48-18.219-18.625 0-10.281 8.346-18.628 18.628-18.628.14 0 .279.002.419.005l18.205 18.204v.01L57.9 116.925Z" style="fill:#419bf3"/>
      <path id="d_pad_down_touch_target" d="m57.9 116.925 19.042-19.043 19.033 19.042c.004.14.006.279.006.419 0 10.282-8.348 18.629-18.629 18.629-10.282 0-19.452-8.765-19.452-19.047Z" style="fill:#419bf3"/>
      <path id="d_pad_up_touch_target" d="M67.141 63.678h20.421c4.962 3.261 8.277 8.827 8.413 15.17L76.942 97.882l-.009-.001-18.205-18.204c-.004-.14-.005-.279-.005-.419 0-6.512 3.349-12.249 8.418-15.58Z" style="fill:#419bf3"/>
      <path id="d_pad_right_touch_target" d="m76.942 97.882 19.033-19.034c10.281 0 19.048 9.171 19.048 19.452 0 10.282-8.348 18.629-18.629 18.629-.14 0-.279-.002-.419-.005L76.942 97.882Z" style="fill:#419bf3"/>
      <path id="shoulder_button_front_left_touch_target" d="M99.096 41.101H47.503c-2.766 0-5.009 2.197-5.009 4.908v15.706c0 1.077.905 1.963 2.004 1.963h57.603c1.099 0 2.004-.886 2.004-1.963V46.009c0-2.711-2.243-4.908-5.009-4.908Z" style="fill:#419bf3"/>
      <path id="shoulder_trigger_back_left_touch_target" d="M47.697 41.101h52.635c1.521 0 2.816-1.579 2.065-2.955-2.77-5.082-14.508-29.61-14.508-29.61-.743-1.517-3.545-2.595-6.742-2.595H58.788c-7.657 0-13.864 3.027-13.864 6.761v27.047c0 .741 1.252 1.352 2.773 1.352Z" style="fill:#419bf3"/>
    </g>
  </g>
  <defs>
    <image id="2a" width="65" height="65" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAYAAACO98lFAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHVUlEQVR4nO1b2XLjOAyEnawzmUxm9mF+Ll84P5eXzX1rX9R2q9UAacXeo2pQhaJsyyLRBEAQoCJ+U6yO3cHVcF31wb8N1XN+rX6Wv3+GDg6CEXqVXLvPQ8f1wQE5GAgi/Iralfmu6nugdjDfcXsQQD4NAgmfCb6m79w9TApAxXz/p8BYDIKZeeU1teuoAcmE/2i0/J/FQCwCQWY/E/wkdgDoZwUCpIJ+RMR7cs33TjRjXzD2AiFRfSf4CfEpXfM9CgTPPgRWfpPfGJCJqewDRDcIjdlXoStWDQE5AN4a/B5TDVkERBcICQCs5izkHyNvpMVvuJ+1gUFgAF6JX+RawXCa0QVEE4QEAFZtFXwTEWcjb6hlMAACgGBTUABeRn4e+YVaAMNAvIc4zxYQJQgFAGAV/ovhM2LcD7NQTWAteCF+MsygODC6gTitQCgAwGzyrH+JiPOI+Dq2zApECwTWAAj9SLwZ28zJxvic7bOvhutVBkQKgokD1AfwzEP4rxFxMTI+n9N9bBIsAIMAO4faMwD3MQdyLc9R+qDnW7J/FDNQ4aH+EP58FPrbyBfUAoweEODUMhDuie9G5u8eY2cmMA82jSEiBqcNlTm4ZRAgQP0x85ej4N/HFp9bILR8AoPAPkafEfQMx1vf4MxiBkLDDDIAvgs7ELBKYJlsgfAaO+f3GFOfwv93ALggivuZUKYJLhaAZz+LnQ/ArH+PiB8jA4hvsfML0IJNzE0hixPgHJ9juszy/0P+68LrWRCl2tBjDuuYrwbsBy5H4f8kEKAJcIwQgqNGFzazENAGaE/lUF2kmQZQIdowAWE0hSwiZFNgENgMGISL2K0MmUME8+BUG3oAYNBcJAkwuC8PApFziKwF8AfQBJgErlULsiUt20WC3X6DVxNeUl2IrXuMLRBsEg6EbEUACOwUsSxexnSJhC9QZ1htpVUbPuh+5z8yJ1pFkuvYOcm5TyBTyIBgTWBtUGYNYC1o5RIYiHUCAoPk4gkXVmeOeEtLNUEjRF4FeL9Q+QFHmCHdrkN4sGoAYomHmC/HzpdMNIGXGR4IO0V1jNAGjhg1NNaVwM2oCuoY/9Gdqu5XdBwZCJP+EROpJlQD0G2y2yXqdtl2boDXMTBhojAZ78k4dOfauyKVq4NLmigQbneone4DgI6BgRhkLFn+QnMXThMn4ziNmMUHVe7glDrQIIYB4I6dUPuQbubURJndmHg81h9lPsFtnnQWeBDaoVtplpBqg45HweCxuQnRcW0fnHXOJqEdaxY5iwGWCu/G4sbVGlO2Kk3GpSC4DhWMjDPhDwGEjqd3TOqXus1BB5517B5+aC1okY7N9d8cRwbC/5UWgZ+BoGXxfQqkQ5id2pFor6JtRgqCCuCyNRW7zg8FiEuZVXXLtESnVGmCE94lLcoszgFIn9Ma01vUEzQbmwMhE5737e46A8MJsi9l2tiqV2ZF28mY1hHb6oyzbdeRqw06MPa2zUL4bFJeC66AmFCPJrjSWFUT1PzeUiBckoXzCK5OWY1HD3ZsyW2gVAu0LMZJDG6fY7qF5nUbYHO+oEf4TCN1LDoOl1VKtUFBcB5YkXe1Qc0ouw0Lg9EiTaCw+nONksfwFL4K5Uw0InbVqGwrrabANQDuHJkczihzzM5CnYwt5/laAGAM7IdU+AdigPBkQHBARPBAxTmqCjotuDeMgWAwmLXsMIXz9u6QhuYRIXTWP7Sh0oQttXwCA4GBcElMK0PsC0Ke00q5u5WAfYCCfyfMILBfqFasFAQFwiU1HyKvDPEzGEg1lSyR6lYBgP8wCnwbETfEt+Gr06lTTMtwv1Y/h6vhWoVgTeAMkzuMxQKxWmsZTvOOFfCqBbcCAj7fxdQc1Cfg2TOqapGo1mBASGI8xTTL5CpDqsqupL5PQRbaB9W/iYi/Rr6h7wFCtjyiny4QcKMCAdWsKkPOo6OyzOajOcjM/GAKUHc1BTaHh5g7xdIULAijSTihNHHhhMhmkeOIpYc02CECCDUFtypMTqqovBYEEUqBeI25QwOp/2BbZhCqMwZVXIIl0a0KrAXOF2yF7z6uQ9rAzgpm8TrexiDoHkM9egWC9pNFhi420CAJS2PXxglUpqI6zitofZKLtb2lscqhsk+Ac3yMeVDmAjPd1qdnGXvOMbKTzH6vljWtUbp4gUFwTtUd5tQNE+8auwGIaGhChD3VmhVruQSmJTp3rLfn4BYD8WyuOafhEjsR4Y/t7QVCAwitVbqS2Ea+1/AZ5OIE1iz2E5o44VcAOChqAtANQgJEVglypTqefY4RqjDbpfSyM0k2rXfQo/6gxjsPzkyyFz9aYbPbUb4bThO8R3npA1S8+8RVKYDBbVa2Y9JUGgPCbZZB3hsACLGIirfgtETXKtsxue20u7bCRyx7GexT9cLGu5A97MgJyMLrPRHxL70SyFSAgTa7VhpMm11HxH/k5VClBJDq2tFMWLk+6KvCRy2fFy+L94IwoWO9NP5PnCGYUfUm/THfjv9NBf0N6UGHaHzqzbQAAAAASUVORK5CYII="/>
    <image id="2b" width="43" height="39" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAnCAYAAACWn7G7AAAACXBIWXMAAA7EAAAOxAGVKw4bAAADoklEQVRYhdWZ3XbaMBCExxQSCm2v8nJ5wrxc7hrCT0joBRo8HkayKTetztkjY2T0abzeXQvgP2rdPRc/n15vuv6lezrdM9/kySpgty72CvaWBYxOZpCd9a3jBHeq9ADGwauwDUg1hOMxODXYcRM4wgpogpxVjn1xNcCvyufLomrAV7AG6pDJHFqbQyVLC4jA87SCBuQ3s5n0Duygn8X0mIZy/rLI59Nr58AD2KCqQs5LvyjHcznnwAqrcMdgXQ04KZhAOSlBCLgA8GD9QhbjsAr6IXawzx8YKn/xY1XX3cBvPyEI9wDg0YzQhJ0JrIPui81LX/NxXfClJZ8lrKq6KGBLAN+LLYspMN1BYY84K7kHsCtG9/G7cBXa1HdryrqvPhSwVbF16QlOYMJ26F2Aiu4AvNuiUqTQ8wN156SXVSosXUBV/SFG6GWBpWIoEx8L7A7AVsbMZIxHB57TWN3DBmXpBuqvVHYN4KfYWtRdmLJ8mLblewflYmjHApxi9k1u8FigVjir+kuAV+hdwWH3shCqRfc4iGk00bsco0GKsUldAqvCa/SuoG5AWILwlh/QP2yMJBqvo7IzP9FQV4Edeo3eh92naXwgGUGoNkFTFgSAjjkguYEDc8WatTTuauylssxKFOOIs8KaSGrZr1bBVWsDH5ySRaoVaLz2qzI2FUC1krSawbTV6koP3MmmjPM5Rt8YWrA6ocdCFiEaduboowBKzyedY3ldqgPSIppxNtWfDsfUyaxEPz2VMeqzmhD49O9lERpbFXoAnNKtDkqgmt81G2lMZSrt5Fqm2TcAm3K8FWgHdujJynohQkiFIugSOYPxug2A3w1gugbnVgGbsKosb70GcIYkfs906rBc6LYAbnBW+A29a4y5Q4RlHcmB6gJ7DMMOTDktZLRE1EKG7rARo7qEHXeDl+7pVLJETVl9DyMoVeND5qqrG/GB3Iq9o3/gkrLAiBtwACdK+wRepzKLadrk7xBWo8gO15HBX2viW27y2Rqwnqeq/h6Wqn8HTqZuEF0AsPwrRbgXMlobaG6vVUyE1fcwTySeKLiwC3DzVVwmAa5fi9WXGfy9YvIqTtXldQrvbwieyQZtyo6MFh1exPjOTGuTQ+0znBvE17QjM2WvK+1z1Xr9TS9ofKuounUE5O2jCBuAE3iKFGkfQIHHKrQqaBPWgB261aeWqqmrWPrX+7Pawq732OfUqrXr1N3vSbDabv0fodbu/X/hn29/AAo2VaYa5XYBAAAAAElFTkSuQmCC"/>
    <image id="2c" width="48" height="53" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA1CAYAAAAHz2g0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEw0lEQVRoge1ay3LbMAxc2c6zSU/5uX5hfq7HJo7t2OqhXGu1Akgp8UybmXIGI1mWCCxeBCEBX3x0l5zsR/9z9nzP3VN/CZ6zGTaE+4wiUiBzQFYZB0J3M86XDBewz/7LwISMTfAuOEbXqnPOELSvnAOIQawajCjsqtBaaFPoSug6+H2dXL+S5znXWnithH8HxG48uSA36cMrjIH4uVNtuJZ7ACc5nux3bzSyxIhZRXhqPzq6xhAcM8Ep5LFxTEFsAg258O426j68Hpm9BYCaPhZ6lyPPO/lf5ziPCAAZq+YjfydFQDIAmfCHIvSh0L781mdPMt/UhYr7uNtQcAbdTaFrOXoQasyQBxmqb1PbFJi0kyMB0SLqUnjunvqaC6n2KfwtgLtyvDVAbgkH4D5PzVPYt0Jre0YDW90zjQFg6j4EcAfgXohgbjB2J89OketQuxScSlglwiuIswttgGb2oQsRwLdCD+VIEHQnWiED4K6zBfBa+FAOve8d09g6j6UuRAs8APhuIOhKfCYCoBlnXzRP63FR7TEOaMbAezDnBIBaIosBAngUusdgBQY05+Bw36ffq/CnIuiuEC0apWg4ABde44DLf2SFR4ytQADKUC1A7e/wx31UeALTmPK5VN5qFuowXsAiEIyFBwyxQMYRALoCAWwEGAPa03O2SALIs5ACURAszDSlalYiALpFBmBX5gTGWteU7MWdr/DNGMhKCq0oyVTXBwVAxsxAmlW6co3C+6JY1TxH5kIKwuNBXcpLZi2dIwDUKMrvPaZliS6IUYU7y4VaVakXeFrb1yygeV6fy4pCz/2z1gG9ObJGVGJHwByAW2Jtz9VcZpELZUBq8VEjXfqz/1s80jEHQAZmCS19dvZo7Yn/+fEfwN8eXx7A0iDm8C5BjT5y/0UBLGGuOyeOLvhvCdgPA/AJsibUEeMNN6/xfgVwrDwTAYzkmAXABc+E9l7OAUMez4o53WFpD8gBZZZpAshMqUyU+R7D/la3hVp6qAVYPvO5rHUSWQN23rRApHFtPnHr9ybC877WfoDdCAejVoksMRoOQG/yJpRvB7UdssZgJVajmQV0Q78t5GAia7g7hQCAMeJoI07ht0V4ap7WWbInfgXwUohA2KE7CO80MymAKHDVb1Xzrxh3E44YNunaScgAaE/oVyGC2GJoK6ornVuKKm/kQpp1nCGFp4ZVeG8xZgBcIS8BCI0LtYIruupC3kVjn0aF57Zwi6EVottB7wtFc7IzF7kSreAL5DgGnrunvrQXI/+nz2r3mf97K6TVG82sQBAkBrRaIEqp1TQaaUv3tEcM2ve+aK297n1PTwzMSG6BZhC78J0wUoGYz9WtXPiwEYtxbEXvB3ZCTKe+JgDuQia8g2BTlde1Nc7umm7mo62kr+6e4XyB1BU6WwvOk59H8pbGXzMp8frSd2RuCa+rDnZtEsS1l3zqr35d/Td7SxkJXwORValRTaRzxEwaLzuixpNnnEz4CERU6Wal9dl99D1xaz/AoUy0xsnaIXMBKBAFk9Hkc4OQUeVbicg6Ps+cvo6XBBEY+DH6VqLKLAGi5/783KaUCxLV+6N7Fn2t4qPyrdCiLlpjhAK2vhn6lABLvtBqjUt9wfXlxm/KDCtMj03mWAAAAABJRU5ErkJggg=="/>
    <image id="2d" width="48" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA0CAYAAADMk7uRAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEkklEQVRoge1ay3LbMAxcp3bzcnvqz+UL+3O5tY3t2I57CDdergBISjLT8Uw5g6EsiyQWDxKABFx4W7x34MPp8d1js/Zz8eM0d8wkJhJmPx0AgAGAMVAlE8b4wvrqemo7BdfRvRRIuGjBuBKC62yNaHFn+CSE4DoEMVg0YF7pqvjt80WAXLoRvRT/DUAsg0V0cWXyqqBIM1lzCb8kpP+9jX04PS4URLeQSF8lTPpipPci7VQAnPmj9E4KaKCJSAPOPJlcJqSAFIjOF9m5Mn8IiHwc29hOEzo5gIH0lXkyugLw1fqVAXGT8qY2TgkfAOyFnu33Hr02Oi24BtxBKd0VgGujr9JnIDhnJXkyvWvEOYDEkaVPTcg1QKnfALi1niBWGJqTamGM+Y3MsQjGqPbezHKKDyxxlvYtgDsA962/MxDqExkAmgOZ3zZS5v3ZI3rr6DVg9s+eGqCtE8A9gHUjAiGISAsKwO2ekn9CL/nIuY9tztFzINqBqIGbxvAawLdG6wbMtaBmRPuNpH/dxizkmUP7n+QCSU0ocmL6gAK4b8x/b71qgQ6dAXDpr0SyCi4TRre7KYAohJgK4h5nLXBr1TNBbZoAto1JMk+pq0/4zubCHmyjzny0ExGEOvS6XRMApaoaUADPOPvLS7tHjegcszQADLUwBQSB0IwyAJTyHmcTO+FsTrodZwfjqA8o81VIQSYJhoBucLZdXZwaOMh/aL/1QIxO9jJQzEwoA6LB3Ao9EPYVADJFh3WmXfJVWJICUMZ57SG1AllKr3FTBEC3yiwgrCQ/AJIByIAoiAyQMqMAXBORpCczPhWAA4kmnkJznw93nI8AGAP0WQBmNz8cLq79B/Cv28UDmOvEWb2moo+M+xQAY8xkdR22xchzUSErWnc2gGgyLzhl9Rw/8DQWiuo+Xv/pqg8VkAzAWB1H0709+iiTDGcAtIyi6aKCc804XyWAqvRX1XI0RGb+mgHYoU8Znw3MmGmlACo7V+lx0R1esyeV/AF1PnCQcVsD41rRYlbYKhPyLMrrOFvEOe2UlJKp41OjjYEhkMycysKWS96LUGScqd9Ve46ZlQNg87l2jfnfAP60a2qFIMZ8ogOQ2b5LbYM+adG0UMuMEQCaIoWxacw7iB36umjq0JUPZNL3ChptmmkhkxuNMr0uFJnRrwaC5kTHTkvsEQAgNh/aPbMnzawoSa+PRgAioWzQa8K1QBDhwbYEXsvUrbyYmQ/rOOqUR7mv9aCpxd29jKdpqkNHzjz5HIg04DUelaAXdmn7DkDn1SocS+tb9Nur+sCoE3MRj130bQmfoenorqPmVQGITMnPFj8X3JHfQHRpXDMjjWO8qLWy65X87wl6BSA6Y/x090Ot00L1joyLvST3OCnDh6yCFuW4WRSrsVAWG+VOHCzC5i/WdCusXrVWCXoWjntkmtp++poVCF+1qllFdaG51YUs0o3Cdb33NrYEEICIwIyVRTIQUWjsGokoZL5aaOx7Cb9XzlU0D86igC00HWcsbMFnNnN/Zy0KjyPtAKg/uZkstZkfOI058Wh7z8dPF9n+Akw5M9cvVTL/AAAAAElFTkSuQmCC"/>
    <image id="2e" width="52" height="48" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAwCAYAAABe6Vn9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEqUlEQVRogd2a3VLjMAyFT0qh/C1XvBxPyMtxudAW0nYv8GmOFclWYHd2Bs9o8m/7i2RbUgL8sDIsufnp9LLo/r9VnofHU/bebgcdiN7xd4vtfHXcgws7Y0CG5DbTRqtDp+Q2BJt1pAESCcx+rw2vI9phu2/lfL8HtQ464UGsgq0HGMF4QB7AMdhWUE+nl8FCVQ2KdiyIyoVzboWctrIgh7JP0eOZxhTK05CFIcC67FPWmMNFmuoB2c5bGWSrYLNyBnLGDmHY+TWAS7OlEExNMQOkmlGAEcBHkRHTSzrIs4Psz4EExJoaAS4BXAHYlC2PLZRqqgekJqYg70a0vuZYikxOYdYCsgFwXYTHERTrimDU1AhDgH2RHWqNe+NtELiuhi5Qa+YGwG3ZUiyUN0lYGKAeNwqzK7KVeuw4O5ZrqqmpsTJ+KBwzBLkuELcA7ozcYtIWoXQ8tTSk2qGZEeQNwKsjO3xq7r08o7MfnofH01c0dAfgF4D7IoTiuOJE0gLSscNxsy8wfDGD3KMTxEfrhbWmbR1Dl6XTBLoH8FDA7sr5a0yznzU7D8iOnR0+XxqfP2E+tqwFzIqnIUiHaH5XmMxPtfSASUs3mGZD1ZA3hjxz25ZnCUOQPWLtq8xmObvSe1A6MaimCKQNR2bhAe1Qa8ZqTde9pvZ7JqdAOpaoKU4W95hmvCVAHBM6Zgi4kfq0zqZHEpmcB8UJwgMjHE1zCRAXTh7vUS/e6nJ5MFX9GW/bQlnPgbKRfZpGC+ggnaSZ7aVugnhLQRiHRSbXg7L+nQXMaEg9ilHqinxE6yemx5CCWCjrgVvPW497QDzv1WE9eDsJhH5iy+QUJhMnRTFS5Pqcks96bYelBxTBWclcz9aVrcMtq/4t3ZJOMSXq+XZdWQ1FCYue/Ou6FgNFWRjrynsC9NchK/Za1P5ioAyIjftHTDMUkFuHxiJah02Q2KwP0IDygDIg7MiHEcJwnekBqXPK8MBCehmfEKqlIW1cQTQu0ZD5Qu4fE0Dq+uxFCMd2ohSWC2WB9IaWVjTmp2cAuSfjKaiGGKky/FYw1pmCUqDI1Gw2hiCMLglzwDx8QACkmR6+IIbdb6Vu1ZiaoQflAtkG7VvUN6lhAmHekQ/wbOqK4fcrgN8CRm2p+SnUrEQm540b1Yx2+lCuaQieySl4ITi1RCjVFKHClLAHBMw1pKa2xeR4ApNmliRJ7MxpkyRvqLW0RZ3lsWZXFU9D3szGN6hjQ+1f46BeGssbozaNRfOLzC5cYM8NltxcKzmiYTejVM3JeWFy1UYAZLVE06Z2KJwB3UkiSgV7Da0whcm8R7VmTe07qWA7k+qWIHZdqkp2DOm1I2oT0YlgyScVbzZV70OT9TznwYTrEMxN6mDqubFAaOIv+vLQ0lALSsVziapJwf3g9Tw8nuQbkQKNpmH1BqIPXi0YDyjyF72PX19aWFmO5rw25n3kysC0oDwwL8QIve1Zw8F3Vi9R0gJZAuRBachwdM6dn29+NA6gIjh7rVlno9jB7XkArlfgfdYPG1/440WzrmTxZi0PFsCCHy9sSfwak6onWWwnZ53+8q8xXvkfPy8t+XHpR5Y/ZaguuvoNjWEAAAAASUVORK5CYII="/>
    <image id="2f" width="52" height="48" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAwCAYAAABe6Vn9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEqElEQVRogd2ay3LbMAxFIT/qxE26ys/lC/Nz2bV1/IisLsprXV0BJNRkughnMPRDgngEkAQgmX2x1i05+Hl4XXT8Z7WX7mnIHtscoAPR+v7RpoOffG/BhYMRkC7ZZ/VHgxqSfQjmXpBguI/E5HPrGt5AvIFHcjvOg5oNQmBYVkHvAYb6HSgP4hr0MziFmlwwgFmJrJ3fGK4G4oGpXIv0wecq1Ma5iMKsqd+UHp8VMLJUBIMeA8XAezN7L31fdPc2BVM9UyBnEcBgMXjItgj/5kGxrgjEs8p7kYv0nehwFwW1kOdqDPHNkQyU1xgGdx8AFzM7F1mXXm+ClXOH5+G1g9tFLsfzBUA7M7srsqOeLcZQ0FWDgZsxzNnMTmZ2JH16DgQ3LpxD3vzZ2F9L3JnZfZF96QG1s9FSGSupdRjmWAQ3qLO5a+o8mgBg/kB4zsASgPhuZg+l3xPYzkb3w13NAME6bJk3MzuY2W8z+1X6Q5G3Anu2ca7d4F66p6FmIV4QYCGGeiSw+3LMls5rAfHcYTfDjenkOMyt6g2rLdvqcrDWvsA8mtmPAuVZKQvE1jnY6Lb6v87TFBAOiBYFdr1Hkn2BZStFexLPB7gNXG1brjvYOK9ONl8kvAhltspFUQIv2zynGApWAtDG8kCXMljcCMAAYmdT6zDUrLVcji3lQQHswUa3w8Ait2AgzAu42UCAvC3oXhdGJJHL6Txi18MGy/sS4DCPMkB90XW20WVgGejJwEz0exZiOLWWBwYBIAaRAbrYaJm+wOhGnbJMDUjjMAXS+G4rkrUQz4N30uXFiOkcLLKQdyLnQRyBaxTOkXgNCG7m6dC0JJ2e1FyOYTJ5UitHUqAhea537bC1gCK4mgtE/y/Rl9Uxa6v2Ic2WLjEl9HxYV9ZCtaJFq6DxWbpSsC0grbREYbwnZu2NtSUK0gSLgDIgvQjiMrhxZh/COapLiyIKl07BcbBe3APhdBnhy7qcd10AhGgatQMPsGaxJhBftFbA4Lz/ZKNlEHRmgXA+BDoBGJWw3KZASu/B8AA4IeNBZmM5jraRjR4JTK3mWWoCx0DqnzUYDABhTkeD42jbKkCcPiAfQrrtgcH9qitfNIc0RdZqzIFgrBx7so8leEeb1hFgsZNN3Q+WSi0K3iKgd5HTbLOxJsApOIcv3g3DTVDLHwrQT4Fi9wtLwh4QX5Tdja2DAWNQKD1p0TEKJBmI5xFbCZaC+8H1eC6lXE4txCsacnoMEP/DBZE+aIpcA/IKJVzGgpXU7XhvmrTbxUptrlUxvRfRQqOX87eA+MZxofGN4PBdV7+btaJSsLfCIatE49+RYWKByGaW0UrKloIL4vMMwlOcWeW4TKQbIldrPqtYD92wRGajDYF4L9LasQfkZZmZzFKvA70aVnEfwrgPvF66p4GeEUVA7O/6wItT5RoM62sFvhrX4b/FGyuaPimDwpWNc0v3nGyG6UXzHlgrpZi02YUrD421UKK/qb6MhfizB6apw1WOrz80DqAiOP09C6JNg0wvAvC+5x7roy188aKqK9m8PCfql714wS3xakxKT7LpIGeD/udXY6L2v19gWvLi0pdsfwDrTzKXc+jmowAAAABJRU5ErkJggg=="/>
    <image id="2g" width="76" height="56" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAA4CAYAAABXJB78AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGn0lEQVR4nO2c21LjSBBE0zYwHhhmX/bn+ML9OV6XGTCL5wGllU5ltSSDL0RsRXRIsmypdZRVXX2BBQ6wh+3jwj5ajGx9Px23bFsc63YbzuOfxd/+2w/ZnEo7KIXi++kzv98hwBxQOvbPPxXapEoHUA5jiX1QfpygHQpMy1uxTfA+BdxopQVWAkA4Xha2z2O9zqT7YwhL4Wj5z44dIICPQ7uqThSqqgCtuuL7DjEpDsjgPCZVkFheZZ/ngH1wH7b4hk1VwFA1KytXXVnJVov+vnLRylxZDollY8cKT1X3IZWVChPjQ/LBFcy1bK/lWIsqz6EhbIFaXQSgkDYAXqRsunts7Bq8/vZh+7g4FNoAmKnL3Y4QrgHcyPabHSu8ltKAoWsmWAqMyiKoZym/u62rltd8s+PZtnfhEODV/RQUIa1ty0JoqjKNa61YVgFTV1RYvwH8ksJjQqQK1UUPds3kkim4ExaBrAF8t7KWQqhJZZXCKlUkddH9COeb3Gtp10jphl5/llUxTKFRJVTVdwC3XbmTrYKjym7QBtZqKStgqq5fAJ7sPgv7nacZy+46OCSW7YCNuCNdkcq6A/DDikKjEt0tk0vS5gKjutbdfRSW52baWu41AFMgqbnCUsBXd1zjXVE/ANwD+NkVQrtFrzIN/p6XTUktHBhbRwWm6lrK9z030zRjKd+ZrbJWDGMqkYDd4R3UX9iHRpW5wsYC/lRgrjDeY2nf9bSDOZoq7SCVJYW5S2rryPhFl7xHD+0e+8CosKkpRWXeSjLoV8ry/EyBEdoS0lrOUdlYK+nAGPTvunIv5Sd6lySwsdg1BxgV9ophkFdlpfzM0wsG/9kt5hUQx7c8YVVgDPzaUtId79C3ktrMt3IvhGN/CI9jvK7D0txMy3N37hq9yhby+8k2xSWTyqi0VBjw2ToqMGAfzhyFEYymJ8AwtikwTWYJ7Qq9e+/ysoft46REVoGltz4GbW0l5V9V33GOKTRVlsYtz/yf0L9EBcZ4tkIf/CerbBk+S+Nd2o/0znYq3vn2/mQaGkolfcf7s/riCOhWiifTnubsXmYITQNr5WGpi6TDNz4qkTraKaP3e7VM377ur9C7qCbVz6i7bApMYxmD/ySlJYVpZVvgWspJY1+toN8yd2etCxukqlFyaBouYsgYU1nLJb2CDi1l7mMjqx+xKV235J4JWiuhbtqYwvx4rACfC6mql6usFdNSHKsapVGVtYBp5Vpx6BhqatVH7+sNkrvlVJWt7NqljQFLFT4VnCn1GFOZw9JeiELT8AKgVtlcYJdgVQMwBiy1mD4aPCqGrwhMjQ9XJdeem6UWM+VlALLKviqwlO60eiNJaaqyyS3mVwWmlhoATWbHgLW6cQP76sAODf4p+48qc7f86sDUpuZlSWUpxfg0l0yrY85R1LTldGg+slL1L8s4piqbslQgVXTsYXTM/BT5mgKs4lk18awd8pfudzrAuNcpbwHzN+mTotUqGr0ZcDxg1Qy5jm5U4HTrs/Qb+e0bzCpgaXjYZ2/SCppX9G+E4+anUpgOKOrypgpcGsOr5h+aCqvcLkHSaSzKWYeSTwHM66v1TODSgKivbxukF5xZcmB+c1eUT2FxRobZMrrvpbH8Y1uaXdKZIp73vM231UjMFpgWw1rLjDh+zhu9dee9f3Zsq1TGenIsfzD5gZmDnJVLJlgbDCcZqCxW8kU+a+YzR7KkMs6ScyLEZ8G9cVsU+wD2gSV3rFTFNQ3qhi/o5yMndTOOZD6HyRfNl8xpN50NT8uhorViWLWe4Ql9oFRl6XzkuYHpC2cco2f8i/25ypbiBvAql1RY+pZ80RorpAtD0mz3KSylQmnFD5X21B3rXKUuiYpKuwLely526X+KXwqMyoFU5hm9i5ZjSye2VlhRaFzaOdk9W4kr3Y2BU4dwWRG6Ykr+zjmMnV68p0O6lKByTcCgtVpJfTv68FqBm+6GVaYMnAcaH9LX9qvSfIXPC4ZryAbQdsA6t9QbsgP9ahXRuDBnSeYprZWAew9F15Gl4D+qMN5o0PHEEJguHUiB/pwzS1N6Lakkhe1W9rT6ktz3v9nhzVLf69yu6OZpUjWAUC0ebivMWktguBaUAKulApeiLprHoGp4qvoruIHFh5r4J39V38uvec6g758lcNvieHcdXWhXPkz4izaHkiBdgqoq81CThrH83GBVYvMBiz9Z1v1LUNMcc2i+vwcnLeGc9ICN1SyXDmjMBkDG1rke/MBTljdeun32fxz434L9AZ7ptX/DaxeNAAAAAElFTkSuQmCC"/>
    <image id="2h" width="86" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAApCAYAAACvIt7jAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEmklEQVRoge2bzVLbQBCEW8YGgiG58HI8IS/HMeBfrBy0Y/W2ZlaKqyivEqZqSrKx1t6Pdmt2JAPf8SXRXHLQS/t20XFzjNfmub3kuMmAHJhjj+caCjJ7PBX0KAwB2jhb7++Tx79yRBDHtqOAw4k7QBliE6SOOSewLXKAUWbHRYDdiRNU3i7QA1wEW++4mqME8hRsFbILd6lPCFTORcob2rfHCnfMIq4dnlIV4mfanuSx/V3HySKbcACVAXIuaZ+Bl6yhplC1KsBj2rc8Ygj8rFxV7UCxKRgqw1ylY2xr+/waDy6Pe83wTlYK1SAeARxou0j7HGflvrRvDcM9g3XUyko1gCsAt04aZA8uR01g1QIM6oFyn/Imbb3P79qCKlY9kqHeArgDcJ/yjvIWvYrHVFtLqFpZpTvKLfrzSCPHtum58ZMXhjawRAfOgD4A+EFpkFm5pvbawbIFGNQ9OqCblCaWRo4bwGU7iBTL3mpg79BBXVM+pDTlqmoXzvjXDLUCBstQt+jnY1C9E5xlA1HuEjj7q+exbAP36BS6BvAE4DHlOj3PluCBvTZUC64G2AbMArbolOpB5ZOb7S8wwQo8xTJYU+wTgJ/oAT+gtwS1Ax67hlCwbANmAe/o5wDndau0b3YHeIqV4IogUuwjOqi/0naNHizbQa21LPsjn7TYAkyJahO36CuFwYrzpX3Da/PcMlhvpcUe66nWlPuI3g4MLCu2JrCRYvfwobLvWkbVT6jYUg3L5ZZVBKZeO5HNWbF7dJ+7Qe+7O3Tz/IBfUnL1k0Vp5aVLWV4gcD1roLXs8qqCmkIVy35qfmvzUaiuDfDgpTrWg7uUXAVpYGutY1mx9jkNsjcXXVmO9kM8K9B9D3Qpoz5trTF1bl4HDwjmtyz90Qlt9p6C/PzLca8RuqTlDBvbEuH8Io8d+wBWIHOpwsU0e1CtYfOyQt8aLtyEsXkqdB1jEEt6AZcLpXaavak1KTbIyxNeec0BLK+8uKTaIYfNq62sF+uFp1gPKjcobMmnNd8BeSOmdn/VliEvad/RlVgb9JBLcCd1t7x2mgfV4BlUr4atHSyQfxttjh8AfqMHzAo+0DGhDzNYbfx6PcoNelWCXrNF3oCZE1hdfe3RwXxHDneDoXJDS1DFMlzuqO+Q13S8OuGloNZ6tYc3V1atwWXVRmBHr3mVbICLaf7q6OWZ2k9cFp7PavtQFbuH77UA0EaN7ugaEC9PuePD3SBdQ88NLFufNl7sasIWuc9OUqxXah0x7N5wg4IvJmpjAqgbrjdfrs3Nb3eSXn3re+xr89zSVVp7kyYdzHD4K8NrafZVbf7WGgrWvol60uZFg9a0JxnnHJ4V2PYkz9sbHzFsTER9gtpjbEHECuYcrWOzydO1L68xoXfC6O1Gk5oTFUYEVwGfZL94N0xUFVjof8UGv6jjU2noV9nmWWoy8WsGUAEHQHCnoQKMvvZzAqrhea6KynsewASwQHhvLO/r43CsmYWnXg84v8a9jTOEUbg13muGF8eaWWhbMHqueFf3JBjBjzn+FZBjMYA35XcIF8P5X345c+mvZr7ji+IPPk7IumiDX5AAAAAASUVORK5CYII="/>
  </defs>
</svg>
`,Yh=`<svg width="100%" height="100%" viewBox="0 0 123 232" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd">
  <g id="right_side_of_controller">
    <path d="M10.5 140.855c6 29.375 13.537 33.424 35.28 43.583 35.355 16.519 33.138 57.105 56.59 45.51 14.36-7.1 21.13-19.23 21.13-38.4 0-24.92-11.42-65.99-32.4-119.1-10.625-22.2-25.844-16.642-42.794-16.642-7.93 0-15.744-1.225-22.454 2.225-14.564 7.511-21.031 55.022-15.352 82.824Z"/>
    <g id="stick_button_right">
      <text id="r_stick_action_help_label" x="17.001" y="222.47" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:11px">Forward</text>
      <g id="stick_bg_right">
        <circle id="shadow12" cx="42.54" cy="176.272" r="26.46" style="fill-opacity:.5"/>
        <circle id="Oval6" cx="41.3" cy="175.022" r="25.21" style="fill:#6180b0;stroke:#000;stroke-width:2.49px"/>
      </g>
      <path d="M41.215 179.291v-8.477h25.442v-7.872l12.11 12.11-12.11 12.11v-7.871H41.215Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_right_direction_highlight"/>
      <path d="M36.977 175.052h8.477v25.442h7.871l-12.11 12.11-12.11-12.11h7.872v-25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_down_direction_highlight"/>
      <path d="M41.216 170.814v8.477H15.774v7.871l-12.11-12.11 12.11-12.11v7.872h25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_left_direction_highlight"/>
      <path d="M45.454 175.052h-8.477V149.61h-7.872l12.11-12.11 12.11 12.11h-7.871v25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_up_direction_highlight"/>
      <g id="stick_right">
        <circle id="shadow13" cx="43.16" cy="176.892" r="17.12" style="fill-opacity:.5"/>
        <use xlink:href="#4a" x="161" y="142" width="65" height="66" transform="translate(-152)" class="gpad-highlight" id="stick_button_right_highlight"/>
        <g id="Group-61">
          <circle id="Oval-Copy1" cx="41.3" cy="175.022" r="15.88" style="fill:#fff;stroke:#000;stroke-width:2.49px"/>
          <circle id="Oval-Copy-21" cx="41.3" cy="175.022" r="12.14" style="fill:#fff;stroke:#000;stroke-width:1.25px"/>
        </g>
      </g>
    </g>
    <g id="start_button">
      <path id="start" d="M30.051 132.744a8.497 8.497 0 0 1 2.825 6.334 8.495 8.495 0 0 1-2.825 6.333H18.67a8.495 8.495 0 0 1-2.825-6.333 8.497 8.497 0 0 1 2.825-6.334h11.381Z" style="fill:#9a9a9a;fill-opacity:.5"/>
      <use xlink:href="#4b" x="152" y="117" width="46" height="41" transform="translate(-152)" class="gpad-highlight" id="start_button_highlight"/>
      <path id="start1" d="M28.85 131.196a8.494 8.494 0 0 1 2.826 6.333 8.496 8.496 0 0 1-2.826 6.333H17.47a8.495 8.495 0 0 1-2.825-6.333 8.493 8.493 0 0 1 2.825-6.333h11.38Z" style="fill:#fff;stroke:#000;stroke-width:1.35px"/>
      <path id="Playstation_Btn_Icon" d="m20.832 134.571 5.982 2.961-5.975 2.955v-5.916h-.007Z" style="stroke:#000;stroke-width:1.1px;stroke-linejoin:round"/>
    </g>
    <g id="button_1">
      <g id="Group">
        <circle id="shadow" cx="45.85" cy="121.855" r="11.806" style="fill:#00ff04;fill-opacity:.5"/>
        <use xlink:href="#4c" x="171" y="95" width="52" height="52" transform="translate(-152)" class="gpad-highlight" id="button_1_highlight"/>
        <circle id="Oval" cx="44.99" cy="121.007" r="10.945" style="fill:#00ff04;stroke:#000;stroke-width:1.72px"/>
      </g>
      <g id="Playstation_Btn_Icon1">
        <path id="Line" d="m41.345 117.35 7.72 7.731" style="fill:none;stroke:#000;stroke-width:1.72px;stroke-linecap:round;stroke-linejoin:round"/>
        <path id="Line-Copy" d="m41.345 125.081 7.72-7.731" style="fill:none;stroke:#000;stroke-width:1.72px;stroke-linecap:round;stroke-linejoin:round"/>
      </g>
    </g>
    <g id="button_2">
      <g id="Group1">
        <circle id="shadow1" cx="66.7" cy="101.005" r="11.806" style="fill:#ff0009;fill-opacity:.5"/>
        <use xlink:href="#4d" x="192" y="74" width="52" height="52" transform="translate(-152)" class="gpad-highlight" id="button_2_highlight"/>
        <circle id="Oval1" cx="65.851" cy="100.145" r="10.945" style="fill:#ff0009;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path d="M60.941 95.78c-.898 0-1.637.739-1.637 1.637v5.456c0 .898.739 1.637 1.637 1.637h5.456c.898 0 1.637-.739 1.637-1.637v-5.456c0-.898-.739-1.637-1.637-1.637h-5.456Zm11.457.546a.548.548 0 0 0-.931-.386l-2.182 2.183a.542.542 0 0 0-.16.385v3.274c0 .145.057.284.16.386l2.182 2.182c.103.102.241.16.386.16a.548.548 0 0 0 .545-.546v-7.638Zm-8.746.911a2.905 2.905 0 0 1 2.898 2.908 2.906 2.906 0 0 1-2.898 2.909 2.905 2.905 0 0 1-2.897-2.909 2.904 2.904 0 0 1 2.897-2.908Zm0 1.212c.933 0 1.69.76 1.69 1.696 0 .936-.757 1.696-1.69 1.696-.932 0-1.689-.76-1.689-1.696 0-.936.757-1.696 1.689-1.696Z"/>
    </g>
    <g id="button_3">
      <g id="Group2">
        <circle id="shadow2" cx="25" cy="101.005" r="11.806" style="fill:#48c0fb;fill-opacity:.5"/>
        <use xlink:href="#4e" x="151" y="74" width="51" height="52" transform="translate(-152)" class="gpad-highlight" id="button_3_highlight"/>
        <circle id="Oval3" cx="24.14" cy="100.145" r="10.945" style="fill:#48c0fb;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path d="M17.592 98.69c0-.798.657-1.455 1.455-1.455h.677c.486 0 .941-.243 1.21-.647l.591-.888c.27-.404.725-.647 1.211-.647h2.808c.486 0 .941.243 1.21.647l.591.888c.27.404.725.647 1.211.647h.676c.798 0 1.455.657 1.455 1.455v5.093c0 .798-.657 1.455-1.455 1.455H19.047a1.462 1.462 0 0 1-1.455-1.455V98.69Zm9.821 2.183a3.288 3.288 0 0 1-3.273 3.273 3.289 3.289 0 0 1-3.274-3.273 3.29 3.29 0 0 1 3.274-3.274 3.289 3.289 0 0 1 3.273 3.274Zm-3.273 2.182a2.192 2.192 0 0 0 2.182-2.182 2.193 2.193 0 0 0-2.182-2.183 2.193 2.193 0 0 0-2.183 2.183c0 1.197.985 2.182 2.183 2.182Z"/>
    </g>
    <g id="button_4">
      <g id="Group3">
        <circle id="shadow3" cx="45.85" cy="80.155" r="11.806" style="fill:#fff000;fill-opacity:.5"/>
        <use xlink:href="#4f" x="173" y="56" width="48" height="47" transform="translate(-152)" class="gpad-highlight" id="button_4_highlight"/>
        <circle id="Oval4" cx="44.99" cy="79.295" r="10.945" style="fill:#fff000;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path id="Light_Icon" d="M44.99 72.753c.336 0 .613.277.613.613v1.227a.616.616 0 0 1-.613.613.616.616 0 0 1-.614-.613v-1.227c0-.336.277-.613.614-.613Zm0 10.631c.336 0 .613.277.613.613v1.227a.616.616 0 0 1-.613.613.617.617 0 0 1-.614-.613v-1.227c0-.336.277-.613.614-.613Zm0-6.542a2.465 2.465 0 0 0-2.454 2.453 2.465 2.465 0 0 0 2.454 2.453 2.464 2.464 0 0 0 2.453-2.453 2.464 2.464 0 0 0-2.453-2.453Zm4.626-1.305a.616.616 0 0 0 .195-.449.616.616 0 0 0-.613-.613.616.616 0 0 0-.449.195l-.868.867a.615.615 0 0 0-.164.418c0 .336.277.613.613.613a.615.615 0 0 0 .418-.164l.867-.867h.001Zm-7.518 7.517a.612.612 0 0 0-.418-1.062c-.17 0-.333.07-.449.195l-.866.867a.612.612 0 0 0 .866.866l.867-.866Zm9.434-3.759a.617.617 0 0 1-.614.614h-1.226a.616.616 0 0 1-.613-.614c0-.336.276-.613.613-.613h1.226c.337 0 .614.277.614.613Zm-10.631 0a.617.617 0 0 1-.613.614h-1.227a.617.617 0 0 1-.613-.614c0-.336.277-.613.613-.613h1.227c.336 0 .613.277.613.613Zm7.847 4.626a.614.614 0 0 0 .867-.867l-.867-.867a.616.616 0 1 0-.867.867l.867.866v.001Zm-7.517-7.517a.617.617 0 0 0 1.032-.449.612.612 0 0 0-.165-.418l-.867-.867a.611.611 0 0 0-.441-.187.613.613 0 0 0-.426 1.054l.867.867Z" style="fill-rule:nonzero"/>
    </g>
    <g id="shoulder_trigger_back_right">
      <g class="direction_highlight" id="shoulder_trigger_back_right_direction_highlight">
        <path d="m12.269 51.254 12.27-16.491H0l12.269 16.491Z" style="fill:#ff00bf"/>
        <path d="M25.523 17.167c-2.534 0-13.254.512-13.218 21" style="fill:none;stroke:#ff00bf;stroke-width:8.5px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"/>
      </g>
      <path id="shadow6" d="M70.5 39.658H32.67c-1.52 0-2.78-.6-2.78-1.32 0-.1.03-.2.07-.3l10.9-22.92c.71-1.5 3.53-2.57 6.76-2.57h11.8c7.65 0 13.86 2.96 13.86 6.61v19.18c0 .72-1.25 1.32-2.78 1.32Z" style="fill-opacity:.5"/>
      <use xlink:href="#4g" x="165" y="3" width="76" height="55" transform="translate(-152 -4.306)" class="gpad-highlight" id="shoulder_trigger_back_right_highlight"/>
      <path id="bg" d="M31.21 37.298c-.37 0-.72-.06-.98-.19-.25-.12-.4-.28-.4-.47l10.92-23.07c.28-.58.97-1.1 1.95-1.48.99-.37 2.2-.58 3.46-.58h11.8c3.44 0 6.56.67 8.82 1.75 2.34 1.11 3.66 2.63 3.65 4.2v19.18c0 .19-.15.35-.4.47-.26.13-.62.2-.98.2H31.2l.01-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.17px"/>
      <path d="M60.102 31.312a10.054 10.054 0 0 1-1.374 2.86.681.681 0 0 0 1.122.769c.892-1.302 1.505-2.722 1.785-4.195l1.075 1.05a.68.68 0 1 0 .95-.974l-2.551-2.49-2.489 2.551a.68.68 0 1 0 .973.95l.509-.521Zm-8.281-11.708a1.932 1.932 0 1 1 3.698-.289.862.862 0 0 1 .17.104l2.302 1.795a.876.876 0 0 1-1.077 1.38l-2.301-1.796a.82.82 0 0 1-.143-.139 1.924 1.924 0 0 1-1.489.082l-2.921 2.983a1.183 1.183 0 0 1 .043.125c.011.038.022.076.031.115l.01.043c.019.09.031.183.037.277l.002.022.001.037a.508.508 0 0 1 .001.039v.026l-.001.071v.006l-.002.038a1.91 1.91 0 0 1-.034.263l-.014.066-.025.096-.004.012a1.515 1.515 0 0 1-.045.132l2.921 2.983a1.939 1.939 0 0 1 1.489.082.898.898 0 0 1 .143-.139l2.301-1.796a.875.875 0 0 1 1.077 1.38l-2.302 1.795a.862.862 0 0 1-.17.104 1.933 1.933 0 0 1-1.828 2.326 1.932 1.932 0 0 1-1.87-2.615L48.9 26.229l-.005.002a1.954 1.954 0 0 1-.339.085c-.026.005-.053.008-.079.011l-.014.002c-.035.004-.07.006-.105.008l-.018.001-.012.001-.048.001h-.027l-.074-.001-.013-.001-.015-.001a13.143 13.143 0 0 1-.119-.01l-.013-.001-.063-.009-.021-.003a1.881 1.881 0 0 1-.54-.175l-.011-.005-.02-.011-.011-.005-.01-.006-.01-.005-.046-.026-.018-.01-.007-.005c-.03-.018-.06-.036-.089-.056l-.009-.007a1.622 1.622 0 0 1-.141-.106l-.013-.01-.027-.024a1.461 1.461 0 0 1-.128-.122l-.008-.009-.039-.042-.005-.006-.028-.033-.027-.032-.007-.009-.012-.015-.012-.016-.029-.038-.005-.008-.032-.045-.006-.01a1.934 1.934 0 0 1-.076-.123l-.024-.044a.773.773 0 0 1-.015-.029l-.038-.079-.005-.011-.004-.011-.004-.008-.015-.035-.004-.011-.004-.009c-.011-.028-.022-.056-.031-.085h-1.87v1.434a.625.625 0 0 1-1.25 0v-4.118a.625.625 0 0 1 1.25 0v1.434h1.87a1.351 1.351 0 0 1 .05-.132l.005-.011.019-.043.034-.069.005-.01.006-.01.003-.007.023-.041a1.82 1.82 0 0 1 .095-.151l.006-.01.009-.012.023-.032.009-.012.007-.009a.106.106 0 0 0 .009-.011l.006-.008.009-.012.028-.034.036-.042.001-.001.063-.067.008-.009.008-.008.076-.072.026-.023.009-.007c.041-.035.083-.068.126-.099l.002-.002.047-.033.01-.006a2.03 2.03 0 0 1 .201-.118l.011-.005.021-.01.011-.005a1.924 1.924 0 0 1 .654-.178l.012-.001.058-.004.015-.001.015-.001h.022l.038-.001h.05l.012.001h.025l.012.001.018.001.032.002.012.001.024.002c.045.004.09.009.133.016l.012.002c.113.019.223.048.329.085l2.921-2.983Zm1.089 9.594.036-.034a1.002 1.002 0 1 1-.036.034Zm-4.373-5.75a1.002 1.002 0 0 0-1.269.783l-.003.016c-.006.04-.01.081-.012.122v.013l-.001.026c0 .054.005.107.013.158l.001.007.001.008c.007.037.015.073.026.109l.001.004a1.002 1.002 0 0 0 1.238.675l.007-.001.012-.004.011-.004a.142.142 0 0 0 .022-.007l.013-.005.009-.003a1.001 1.001 0 0 0 .648-.937l-.002-.064a1.002 1.002 0 0 0-.619-.862l-.027-.011-.009-.003-.013-.005-.01-.003-.012-.004-.009-.003-.016-.005Zm11.565-5.943-.509-.522a.681.681 0 0 0-.962-.012.681.681 0 0 0-.011.962l2.489 2.551 2.551-2.49a.68.68 0 0 0-.95-.974l-1.075 1.05c-.28-1.472-.893-2.893-1.785-4.195a.68.68 0 0 0-1.122.769 10.047 10.047 0 0 1 1.374 2.861Zm-7.156 2.147a1.002 1.002 0 1 0-.036-.034l.036.034Z"/>
    </g>
    <g id="shoulder_button_front_right">
      <path id="shadow7" d="M32.192 43.878h39.986c2.643 0 4.817 2.645 4.817 5.859v7.033c0 1.288-.871 2.347-1.93 2.347h-45.76c-1.059 0-1.93-1.059-1.93-2.347v-7.033c0-3.214 2.175-5.859 4.817-5.859Z" style="fill-opacity:.5"/>
      <use xlink:href="#4h" x="159" y="30" width="87" height="41" transform="translate(-152)" class="gpad-highlight" id="shoulder_button_front_right_highlight"/>
      <path id="bg1" d="M30.673 44.236h40.011c2.109 0 3.844 2.109 3.844 4.674v7.053c0 .638-.432 1.164-.957 1.164H27.795c-.53 0-.965-.53-.965-1.174V48.91c0-2.565 1.735-4.674 3.843-4.674Z" style="fill:#fff;stroke:#000;stroke-width:2.15px"/>
      <text x="48.396" y="55.277" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:13px">+</text>
    </g>
    <g id="r_touch_targets" opacity="0">
      <path id="stick_button_right_touch_target" d="M34.841 141.791a34.686 34.686 0 0 1 6.374-.588c19.07 0 34.552 15.482 34.552 34.552s-15.482 34.552-34.552 34.552c-19.069 0-34.551-15.482-34.551-34.552 0-10.648 4.827-20.178 12.411-26.518 1.298.465 2.697.718 4.155.718 5.345 0 9.9-3.406 11.611-8.164Z" style="fill:#419bf3"/>
      <path id="start_button_touch_target" d="M35.167 134.497c.26.997.399 2.043.399 3.122 0 6.809-5.528 12.336-12.336 12.336-6.808 0-12.336-5.527-12.336-12.336s5.528-12.337 12.336-12.337c2.48 0 4.789.734 6.723 1.995a16.16 16.16 0 0 0 5.214 7.22Z" style="fill:#419bf3"/>
      <path id="button_1_touch_target" d="M39.627 106.677a16.066 16.066 0 0 1 5.496-.963c1.93 0 3.781.34 5.496.963l9.655 9.656c.623 1.715.963 3.566.963 5.496 0 8.894-7.22 16.114-16.114 16.114-8.894 0-16.115-7.22-16.115-16.114 0-1.93.34-3.781.963-5.496l9.656-9.656Z" style="fill:#419bf3"/>
      <path id="button_2_touch_target" d="M60.481 85.823a16.066 16.066 0 0 1 5.496-.963c8.894 0 16.114 7.221 16.114 16.115 0 8.894-7.22 16.114-16.114 16.114-2.186 0-4.271-.436-6.173-1.226l-8.715-8.715a16.056 16.056 0 0 1-1.227-6.173c0-1.93.34-3.781.963-5.496l9.656-9.656Z" style="fill:#419bf3"/>
      <path id="button_3_touch_target" d="M30.442 115.863a16.056 16.056 0 0 1-6.173 1.226c-8.894 0-16.115-7.22-16.115-16.114 0-8.894 7.221-16.115 16.115-16.115 1.93 0 3.781.34 5.495.963l9.656 9.656c.623 1.715.963 3.566.963 5.496 0 2.186-.436 4.271-1.226 6.173l-8.715 8.715Z" style="fill:#419bf3"/>
      <path id="button_4_touch_target" d="M30.235 86.294a16.056 16.056 0 0 1-1.227-6.173c0-8.894 7.221-16.115 16.115-16.115 8.894 0 16.114 7.221 16.114 16.115 0 2.186-.436 4.271-1.226 6.173l-8.715 8.715a16.056 16.056 0 0 1-6.173 1.226c-2.186 0-4.271-.436-6.173-1.226l-8.715-8.715Z" style="fill:#419bf3"/>
      <path id="shoulder_trigger_back_right_touch_target" d="M76.155 41.187H23.519c-1.52 0-2.586-2.458-1.769-4.167.046-.096 14.212-28.399 14.212-28.399.743-1.517 3.546-2.595 6.744-2.595h22.358c7.656 0 13.863 3.027 13.863 6.762v27.046c0 .742-1.252 1.353-2.772 1.353Z" style="fill:#419bf3"/>
      <path id="shoulder_button_front_right_touch_target" d="M25.477 41.187h48.72c2.613 0 4.73 2.007 4.73 4.483v14.346c0 .983-.854 1.793-1.892 1.793H22.639c-1.038 0-1.892-.81-1.892-1.793V45.67c0-2.476 2.117-4.483 4.73-4.483Z" style="fill:#419bf3"/>
    </g>
  </g>
  <defs>
    <image id="4a" width="65" height="66" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABCCAYAAAAIY7vrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHcElEQVR4nO1c23YbNwyEZEduLm7ykJ/LF+bn8lK7kZVa1vahHO3s7IDk6hK3J+U5OEtJ3iUwBEAQ4Dri/xar1xr4y/BtMvbX1efhtXi5KggqaMe4KRDXBOmiIBihVx19bkNH/+KAXAQEEX5lru67rA10zfrHdglAzgKhInwP6fgqcIv4nrPAOAkEIzw+r+nzmq5r+Y7vQYMQhxgFPdBnvc7AOBWIxSAQADrz64RuzHcOCBZ8iIiXGEHgPpPTjsVgLAJBANAZh7A3QrfUx+98X4ggLPRLROzLVckBgmctAqIbBAOACg9hb4neyGcGg0EA8xCchX8u/T31+fdMM7qB6AJBAGD75tmG0KCNXAEIA8Hjs+qz0M8R8ZdcQaolJwHRBCEBgNVdBb8j2tBVgYA2BDENYVh40A8ifMdg7MNrRROIKggNADDzGxL2t4TwO5sHO0g1BQbgR0TsEsLvAEP9RRcQt50AgHT2N0XIu4h4W+gd9UHQDNaGDASYgQLwFBHbGLXqtnzH/uWZREgjzm4QBAC2fwiCmWfh3xdCH78BKAiAZ9VAgOrvivBb8wznYFnwA/pfhm+rTBusORQtUA2AGrPqvyOBPxC9J2qBgJaBAA3YRsT3iPhTCL89FcBgHrp6pGYx0wQTDXLQwyaA2f8QEfeGMhB4haiBAHN4kme0nKsjjkdmLTMHDYZ4CYQWYPZ/NwSNgKawT+hdHQCCA5F9igKQRZNDxD+TrNowASHRAvYF0AKYwH0R+iORgsArBAdNDLRGi/sYV4ddTE1J74+YCp9Fk3YXOgOBhFczUC14G1NN+BgRn8qVzQGziGXUaYGCcCgg3BUQWHi+n4XngCkLoDi0boKgQDhfAAAgsDMHaIFTY14e0RgEAMFLKmuA/r1GmfuYB1DrGE1i4iCPICR7Aw2KEA+oOYDuYzQF1gKdxWwrzRrR2ms4R+oiSWgEm96kqSb0moJbFnl5ZC3g4Eh9gYIA4QbhgUFgJ6oriQut+f6DA2IdvmWaoCAoIVrUuEB3kS7HoFtx3pNgddHYRMfG+M6RTvIYvAhkmuBAACMcITJBeHWENT/gwNckSbaCaEAFcoEZg40o8tgYBN0sZT6BgdCw2M2+A6C1e4XQDMCbmJoBtHKX8OFWFF2WRxAqGaNsv6DEAOjAtbxiCwB8vinfuQnJ+ADPuk+Z8aA+weULNWGyScghvxQA5gNXTeIwP7yN56vzB6k5OsfoNMFljXiwLGu0VHjlA1d1oK1MVpbO4wDt6BwZBBcnuBSaI/b6TvhzgUC/pqGtnGbqj5w54FozjWzJY/U9VxOUL8ePTpJbgpu81MyhNrAjB8AlmptBHq+XtxSMLFhiBmpUVbMrNF1me6jJWwuEX6K1QDipOHrFpsnTi/DmQHAPcnVATWBkDJzbVBDODdR4q/FV3UDxQG4Q3rfzNrWrUHpmY35cMqVWq6zywiAoACy4Cu8If+cGPBWIGk86vuYQdJJS06iZgwNAa4NaBktrgie0TCuVH02kKBiqpcdnI7ukW2lnBln2xtUFwZwGT2i9y6jaf2tCwA/zxxNTTbiuGZFOAFxNEAyoVpziMJ0GMACuROd4USDS8VkTsH11qqcpLNQGOZFRK4+57HILBD6xUivSMh9cqOUibdVBZuaQaQIXRjmRwQlVBWCIMR/Qyi6pxrhSPQu+jWkZjktxrJkMxKxlKXenCaoB25gmMlxNgQUDENneQjUAaXcUYjiNhrokE9cjoQ0100xBaGkCGPke8wSG7ibVrLKUO5tHNjZXp7ko+0h9BoI1oXle4QjC19XnoSQZFAg1B06quNMnTpieVFfLF0HtHws9UJ9BYHNwWjBrNXOATa6JGZfI0KSFizFq6S4ez/kBqDe04MEQl+mz8vxxjGpBlhiKGAsVXCDVBIbu2bOZdGcTHAjZGQVoAUzgISL+KARtYJ/Q7RRnIJBJgDEwBW2oJSxqqpwVZdkc2PzYGaovAAggNgf2B7VAKQeBmjoq1PIcACyEW1K1JKexBMYZzP18UgWrwGNM/QIDAFNwq0JEdJ5UMdoA5laFOXVqzpZ1SatVp/UZz+YZteM6uipokNSMVGsHt9g3RHlohPfoDAKH1xpPuIMaaO6AhsYGrBEcKGmkuOgYX7qhaZTqtT7Jp9j0GJ/WJ3tPr7FP4NBYo8NWhGhXBG6pJkjcEDHOdsTcZ2THbJ5iWhrrPbjFjpH3K3jmjr7v3TWmrbm17TjVqiUxPdp7F9MKkYscNTjTnSsLzH13GKPbDLpBqADhqlPZ4W72BVmAxfsFPt2uh7tZ7fko7ws9oxuAbhAMELpc6vsNXBJzhzSyiDFLn+k5JKf6s5Xgokf9K0DUymKuNFarEDMImkR1L36o8DZ11tMWV42S13+ystiN6bvKleYRXEq/O6t91dd/0JIXwbL6pfZdiUxTagdz1e8Gue/nvQjGrfJWXFaz1N+5KRAt4nt+/iuB2ha+HOr+NmIumBP2osI7Js5uF3hNOGIa3MyEjviXviactRNeGI9IIrz/zAvjS5oD6DX/fcAv3/4G1s+EbdFAgYoAAAAASUVORK5CYII="/>
    <image id="4b" width="46" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAApCAYAAABKvBuPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAD00lEQVRYhdWZzXKjQAyEm8R2kv075eX8hHk533Ydm9gJe8g0NI0EYzuXTJVqKBjgk9BImgH4pq255eZtt7vp/pfmubv23otenIDWnMsAJ+drlakCN+BmoV9q3UIPYFmB2ZcFwI0dN8H56LkRpAqC41n4FFygHfYuONZz2XMd9sP6SFL4ENygVe4WhGP02W7RjwpZhJ+AJ9AEuy/9qhzfyzn27j6Edrj3Imc5zhSYwK8cPIFWyFWRtRyrIu42EAiFdTnJdb2Pik8A+2bWVisTeF1kU2QtfQTPlzr0qcib9ZR3EX6tkdUji0cuQuiHRAi/FnD6Ol+s0G9FjgBauUebzokGZvU5V3HoTYF8EnksPeE3GFtdwRW6LdCqbDQnCN8A6LbdrqHVe/BkUqqLPBTQHwB+lp6i8Gp1YJhoZ4M+YHAxdSudvGrxkdXd4lEUuRfwpwL6S4RKPJYxDk7/JvgRwGsZuwrGqXyU65ykfatxFX5OB/8N4I/BE5xAjVjvhE9rH2RcpBxd6oxpeF20uIdB+q+6CsEJT6tvAksSpsWntTkXgKn/U05ivN6Nt90OL81zNxdVCM44zQgyZ3W6C0Mjwd4xuMlarumX4NfQ0Fplca811M89HDKq0PoE5yTNwNU9VJkDhq+q0FEyG8CTKtBDIhXgCxhlGBIpDk5XYcija7SY5oG5DDyCr035DI1RFvVsqlYDhsjACcjxXjZEwGm1mYHPKXJJxcjWJdfnnhsVaxeDZ/Wy19cqnlR8TM0z04VEBp4V/FpzeLFEF2lkPDDOmicTrQ416WQro77dAWGh7laMqjqGsCOGyKDyGpw7yHiKKhTV5uGaVC2efXqv6hSUEYRWPmOcyjWKnDCk+70ppgoQfrISysAjBTRdK/Qe46qO0C3qMucewF8A/0QBlrhV8A4eQetLaTGGL1qU1xmTGdqAuFZ5LdAO3xYDRT4PAN2krA0UUPA3jOMu3aCT61o80X2a4DnqLrT83sC5Cqq2uEJHFteCX6GPyOtxL2u1HqevE5y+rq4yKWlH4C/Nc7ftdg7PF3pSIQx932uNaOkWrYA84lzt4w7eCKAnFPXba9acLcYhVd0kAl9cLGvc5Av1WrSiUehLV/nRSt/jePWGULagWJloRRfV0AoeZV5d7UQZtAev3RDSQbopE312tXJUQ2dJLZNwJ8vbLXuHDpttv2XwX7t3mMCzX9qpjWpoL5ayAi6sDC/arQ3gOTb7ErNF/4ICfq4fe9X+eAKv92R99NwuOI6qvv74pj8S3maUqHlmBDI596X/gLJ261834LY/b9+y/QdJLrfuY2EtwQAAAABJRU5ErkJggg=="/>
    <image id="4c" width="52" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE3ElEQVRogd2a3XbaMBCEF0ISaJr2Ji+XJ8zL5aZJgAQK7kU0ZjyelQ1JTlt0zh7xI2R9Hmm1WhNxZmXymZ3dN48n9fcwuWs+awwfAkoA9DN9r4PvwXwE8CQgAZkM1FlpBuqTwI4CqoA40zY8WK6dcZujwEYDEYyCTM1r/ox/oyB7qfV1+5uxUINARhU3eNgFveY2XBRkHxE7eu0gR0NVgRJVptGHcMZtuPDAd4ntow+Im1EFS4EMDO42BnsREbOKqVoYEMP8rtiO2uF3g1CzDEiKKoJBXxa7ktpBRQKziYgt1dvSHt/jd1ynxSok6jAMg1yRXZPhs8s4TD9WSGE2EfFGhveAQ9veFHQq9YAEBkCsCkPMiy3o9ZyAAKVAGCwgXiNiXWoY4DbRn4apo8imnMIASEG+kS1KPY+DUgDiKQcgKLEuhhs1i9w7ouzNZ+3A22KmGmAwxa7LwBcRcUP2vdQAA1QGhDsPZZZiLxGxKsZqbaPrCXsqOYVYHZ5urA4gbqVmKNzxDAhTbRUHRVUd3mx5/diIIgNSKHYCmGYA+kEGqGOBoCa8Yg2GbaIwHaAy3TJ1LuOgDoBuC8jPYj8EqDbl4BCwdrQdQNze1HMM981jO+2GphxPt6s4LHxMMwd0E/01xHcdg3uL7r7FMHDtW6rZhQOqp5ICqUpOITgEhoJBIXbdbmPdJjBQBV6Q9yk4BSjJYx10CjV3DTcNKDV4OQzW7UPuO4XBGmPT6KMXOUwjeusnUwhOASrxHsTejTfZ68Tm1Fb70b54TwMQbkRr2HJqCjkgVmoRfYDapopyEe8qsTK82a6ju5c5IA162+LW0FgoNQ53eG0oEB/82AFoXwrCMO7waIH4gm4tcYTtjKcEfpslTbRfvWncpyqjUBbI5Qj0VJod5rLDnb1oHBa0zoIxh0XXZ+vpdDq44pyFmiZHsj7cZ3pkz8wlYHrXGwP0X5UxJ1ZNMbm4SgNG10fWryZGMnPXyGO56EavLs1US2qo8T7hQI7tdzSYU0iB0CkHidvE4JV4n6klSXamT4Q7WfymYJ2iQKySJjQ4JHHGmym7Zr0ob6QM4PIKAEuP4Np/ppDeRb0wTprrqEfW7sDGfXJOgfMKqBkQYKxUT6FpRHuEdYtf1eELr8iWpQakJjvUXD/LpK8MqDPe2nlIFdLodxXdOCs7xA0dHzbU30ux5+jmFlgpBurkFLi4NQTjRYvpwUkNl6bim5BNQz2xAuipAD2X9wqEdJZTKAViKJ5ymzK4dfgwXgd7zBEcWZ7niPhFYDz1VKFhL/cwuWvum0e8xfFWFdKYS4/NrOQxQMsC8WSAXqPuFJqhNBYGyIkKflTCIbwOks8zY4HgCKASphxyc7qGUnUyIDRUlTZxCCC5rbrhMYlGtyaxljjR6BxCdWPNctvuPMTZU5cK1qwp59rGpIJ1K8DaqWVNm7G5bY0YFJ5dO68xbLScp86ePnB0oBurS9bbnJyWv/U4xUUfX/M4RaBq2dQxD7xqoQ8Hpe6hVy0oPfkJngaAteB1Fu93lnMAeoxwm/axjySrJVUo4sweGhsotM8SKPpYP0toZAc8BeiFNx9+rJ+AaZJial7XEifZiVg/G63KSUACxb91aWQH3w5Oamfc5mv+GsPlbP68pOVs/l6WlX/hD4BnV/4AcperLpSp2XYAAAAASUVORK5CYII="/>
    <image id="4d" width="52" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFUElEQVRogd2a0XbaSBBEC+LY2E68L/k5f2F+zi+7iQO2A+yDp6BUqh4JzO5D5pw+EiCGuaqenp5GwB/WFpfu8HH/dFKf3xff9pf8/Q8DBYBT+hzBfBTwLKAORHXUtg/nfgRwHtxJQAaig15MvNamg1dDOD8ZajaQwKSBL4tzBTsMUga+K84ddDbYJFBQxUEqUzgFUoBkFdwsqC5QAeMD/2S2lKOqxcE4wDaYA86GKoGCiyWQKzm68Rp1O1VmC+B3YT2wLtRVjxbZvRTgc8dUMQfSwb81e5Vz/Zxtxz4e90+LCioqZOq4aynINYCbZtdyVCh+n3dYlXlt9tKM5wRMinWVGgEVMEscVbmWwa+CKRRdkn2qqxFm0yDW7ZyvCaiKTbpf5XLualTGQW4B3DW7bcbPVCUHepNBbwD8Km5CFfL9vQwUopqqQxdTkHsAX9rx3qBuZHBLAeK8IcwaR1VdUQ7ajSqNWlLIg4C6GmEI8gXAVzm/b6AESgop0Brv6lRADqDutgCAx/3TwO0OQBOBwNW5byAPzb42I9CtATEoJKCVwPB3HWZrxx2Ga9uhuUIOlebOHY7KPAD4qxmVIhDnhANtcYxmq3DdAsMFV6OcAlGlQRifcjmq87kB6dxxoAcBSgNVICpEFakOMF503zBcnxTMs5CoUFpEk0KqEk3nEIF0YdXBOrB//mqmUBwfF9tDuwIO88ez6ASkYToFBgJxknMO8i7qwprWKCqii+2m9feCYdTUpWWWQp4VMCNQt6PdYbgeeUDQQXPgHs3oilxsGTBW7VzXKAUatKW9rnI3T3N0YVXTTEFTIE2V1FYn9KVJr2fyC0bpKihUiahD3WCYyymEh2HgXQlPVqnMTWEK4wnvSCEFqnaivQzbVah+WIE0hdlZn1V/qk7aCUegHpRv4vyHFGDkDtY/oaoN4ty+dZyH5nPI4c7dcleFE++711/v5pQK9YD0x/+vNue3utf0gKpyU8p6q3JUKk8hXHNKFSj1NQlUVWY0v6pyrAqy6jcVSXr5WxfOg0J11zy38hyLlhbTuUWS1J/uVuM23JsCpSJgShKZlngtgJ9rblZVfbahT+9Pc7gKaHL74C6hLuDbZq0BpM0c+/GFNeVsGzGvLejNqqD2ve1DUkjv3lpMawEpCdXFEBjmcszZfhVGMC+W+JwaNHe5pBDvjiqj22bfz/D7ugtV1ejCWiB5BvCz2XMzh3KgVDR5B/q++LZvyZ1CqbtRoTWO+dxUVceV88/ZH2H+AfCj2c+ZQJNziM0jkQJpnqUBQBNN3Y1OFUkU6G8BokobHAOE1uYiVC9s6938hOMGyxNFYHznvepT1RQU6EeDolJUaVKhWPUJbscfXwqUJonAsKDBqLVGLpIQ3BXXOaQu94yjy1GdbkAYAElzlX4jJ568lnON6nBz1gNSl6NKhPKg4OpsbYyDVtW2aZrW6zbcy8BeDtYImOaQRrkUugmawvZg/sytbfMiraq4MmmR5OC0PNUr1qdFdS3vazBIOd2oxVTcVPKiif4DoVvytBWvgofOuZdgnvak6Bb/Tun94aUX7+z9lJNRIa8BpBpClcvpH1+alM6CATqbJat1u1Is4mupS498PxVJNP2hUp7JE9i3L0CYN9pKhSyMsx06xVClbYN4Ra4BoPO9yvxfcX6/2ya3vMXzCVpD0GLHVC2gyhf1XD8bheez/wUvoPidFDTSMRUzfIud/vtxT7jcgxcFWJpfwDCDKCszGN75tJ0+SRVtZ1V0Jp758fe8edpfHf/7h5e8TTxa1uvbBzp4/ZFHzC5Wczv1wT9tl34I8I9q/wJ8hc/eTcdQhAAAAABJRU5ErkJggg=="/>
    <image id="4e" width="51" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAA0CAYAAAAnpACSAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFSElEQVRogd2a3VIbOxCE28TYQIDc5OV4wrwcNyfhP8CeC9S41duzP4FTpyqqmtLaXmv1aUajmbGBv6htPnOwq+F61Xg/Nt+Hz3z+h2CKya8Zs4P5KNxqmACwKfpq/GGmB/BnYKtgBER7v/b3tOnEh5nXANZBLYKZgKAcFdf+jMHktbjuoJYCzcIYSAI4KsS1xMm9Sl+JQ2MJ1CRMAaIT/hKE7/Nefl818ArgRXqVCmwWqIQJIAliW8gX9BqCTEon/hxEoV5kAThGCbRdCeIAx012cn0s9zmMauJ3kCcDg4NIP2ojzRQgrglOft9kJ/0OvYY4jpqXTv6xyZP0/JxQbnZROx3MhEZUE5z4HsAJgNPWnwQgmhtwMLFnA3kQuTc41dQsUDIz3+zUiGriVOSsiUJRcwnGQe6b8H7VJuS77Df23iQMgVwr1AgBvgI4b/1XA9q3yXHfAAcTew4gt+g1SRh30Z27vhquN6qdd5hmYnNaOZXJXzQY9gqUYAYcTIYwdw2E9yoMFyAdqNEZVGbm3su1cgHgssmFARFmZ5PTzf+IN42oFtW81PNpP4oYVDtb0QrQa8a1ws1+3uQSwLcmBFJT42qrN1MY3kdn4Rrxw9QPVM53bGaYNrEd+r3CyRPmMmhGHYDDPOHNzBQEsuL0eCp6oKoG31sys8rETtBvfALR3AiTTIcTpQN4Qu3t+LnLb/SRxasDLdWMmpkDnYucoTcd3wdcWXUO+pkfpDx/+Nq9HQBsroZr/Nh8H1wzafPrQelA7Hl9hrEncxN6KTSiIHQOqmU9h9x9v2kmuGQ/YxyGQCr64D0OZ1OKzdz0uEe4jzSqoFesQLqWNFPFYx7KEE7js2O5N53k6okUZB9Eg1eP9SLQ2nBmSqoUII09tPtebAzGdT6ujpcy2cM5EyCmkrCUu6gJaAaa8qWp3Cj1R6jNqxvfV64CS4C+UmnVgPEqrkm9Uwoe98sUzP/VNtavalXUDExHrFVFpcvXZZylY84VNapnABhrZu4BPKFTzOSxkz90auwUh6V4LI353rbhg1QG0gzR4ya+3rX7qlKTAmgxI9UCPG1WsDINcDPzVfM0lxGv5+16sKn7raozzzbuUxhXYzICVRoCABy1XCCpX0E00tWY6R7j+EknkTToabPXAXQ8h5kESppx02KooanuHfpwI4XxanL6PqF0LGact+2a6bQukGonOoKpPaPhuINoyOEg/F5KATwOuwNwI3IrokDUqGtG513uGX6Bq6gwt+jjsKqUNFedUZifAH41IdQdenNTU+s006XNBYhv/gfkeClNtCpoaNr8gIMWfgL4R6DU3HzvaLDatS3JWirgDkAfrvGY7wVf8SUFDYX51UAIc4NeM+7RZvcMm5uZBoR+hvg+eETtGBIMN/4NDmammnnAQSvRk8W6mYCwZ+FAgVKy5ftqrgioGuQepKgToNt391yGNKnWnBK0lDpr+sxrVmY829QF8vRY3TOFIHTN0cyW1Jp5g24yr/u6+3atLCmcc6KcuB7A1Mii8yVNEsCoIKjm5emzp9ApfU6OQrXjYYxqQn8BGMGknzRGmik8G9qgujI+sUeMXXc6ND1MUrCq6DerFWAiCSoK6SmF1vzffzXz1Fm9ZIrE9f3kvUYeTNtUcgb03o19ynGqH2qr6kzKYRxgFQgwk57avzGW1ALSWeQpQJUvOcAo/vrQT+cBSienE/aKTFWoc6DUu2AJyGIYA3KoqpJTjZ0m7GbM68//u4m2ALWk11btQ33vv/8jkLaJfzctGXsorj/0N60/hvG29o9z2j77T3R/RfsXSO/jtpPsGBMAAAAASUVORK5CYII="/>
    <image id="4f" width="48" height="47" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAvCAYAAAClgknJAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE80lEQVRogd1a21bbMBCchJAGSri0/BxfyM/RQkm4E9wHdvBovLKdwEurc/bY2Eaa2V2tdqUA/3ibfEUnF83VTv1cTs6bz469MwEDPalcvTWV685ktiYgwCcjRFuTyJu925rIaAIV4FO57tnfSkIB87qxv5XYaCKjCBj4qcieyEzu+V4JvAnwDYBXud/Ie5IZRWKQQIBXjRP4LGQ/ZC7PZhUCryEvJnyuRBoAzRCJXgIJeAIn4G8mcyFCSwCt5l8BPIc8AXiMK5+RjLpXL4kqAQOvbkKwCwAHIYdxXcS7fbRWIAFqnsAfANzH9UHIPKG1yCCJlID4PF2GWifwQwDfARzZlSRoBSfwHEDvQ9YhdyH3QoTWoEulc2KWEegBfxBAlwCORZZBgpaYx/8ogZcgQM2vAdwmhFWpul6Ms4C4joM/DJBLAKchZwBOQpZBjm6UWYDucwdgBeAPgBuTW7TW4Pz4mBNuhZoFdNLuo3Ubgv8B4GdcSUIJDLnQHVqXc7LUdiciIbFCQSCZuLMAs4gBjwPweQhJnKB1IUajLAox+ih4utpEgNfWiclFc1XMhcwCrn26zzKAngVoEqAFCErDqK4DGkZppf34Tr/J1ogirCrYDwKVmK/uc2QEKKdBLtO+L2S0AsMsSfIdw6wK14cpEivULODuQwscBwlO4pN4ptrnmpHlQhuUKzXfcY3QEEuZBwlaomhOQNMFEqALefj00Kn+7OGQQGlZdy2d3Gu8RyiuKfdCmFaozoEshHLFJQmKrr7qzxl47TvLjzixuSDqJHeXLPpWAppx0g005zkwUeCa+2S1gLZpgNecStMS9q3h2INC0Zk2zeU1ccuSNmah2vkQeA8SrqRaYlirMzoE9HktbXbg2umY+qKWJPoYWX2RAh0qE7MCRifqNuBrRLw48nE6SiLmmgV0AL/3wT/bvI9ss6DanIBnf16A630RzlDJFgfa0DgunXGmQCfPdpCal2h+0qlhR5JwJWV1so/TSeaIOXMh7Vhr2GeUpV+WpwyR0G9UOcyRXpD3v3ECbErAzVirYSlZDav7PDXwrnHNf7R/zYOqlvCVWF1HNc8qisI6doF2BZ5If9nkc+Wwb62PWchojUwCbumUAAdS7XMAzVO0cNG8H8gXNdWcal2Br1HWyKzItDYerInd/zVDVPBMnVX7/L8soVPLUvPa5y3ey8vbkDVaKzAT7a8HLifnzUVzpYNpBcXB/qDcOvF8ni7Vt7FFpdwF2BsA1yhrYlrhEeU862yx1Fwos8BcRCsp/VbT6ixtVtehQq4B/Aq5jmcrlC5UjUJ9BHxA5irMURz8I9q5we+UgGufuxIZAbqQEhieA4kbcdAHdHeg1c0e0e5KaF2c7UowICiBawC/47pC6z4d/x+7reJW0KSO7zOX2JYAJ+8N2km8Qqv9bKEsWt/Wohf3Wh+zvFRheTm0L6Shc2Xi24sFgW23FmmF2vNso8orqdrGli9cCtwjT1X7wPDuNL/JttYXJlrD9u1OkwRFV93aFnv1sGPM+YCTcCIuXmYC5equiaGC1oOO0Sc1Y09olERWCnqI7dvYUiKvIln6PHjMtMsZWXbctJfcZ7mQkvD7nQ76tioJR5xU+s5Blsz5yeTOJ5RbE6gQcUL+jq1Wrn682+Ww+1NFeeW0vq/ftIb+zE8OvmJX4aON/c3EV/xG4r9pfwEs4yD3oK/mAAAAAABJRU5ErkJggg=="/>
    <image id="4g" width="76" height="55" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAA3CAYAAACmcqwpAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiUlEQVR4nO2b3XbaSBCES9ixN7G9e5OXyxPm5XK3scHGMnuByiqVumckgQHnbJ8zRwKEfj6qe3p6hgZHth+7X4289P3G3tfPo9cl2xVe7ypbAMDP5rufo2pzbrBqAku3UfPPltxPBsj3S68BzAN3FGCBqrStgv1VcNzc+4nUE7W3wmcKcBK4g4ElqlIwKwBXsu9tCbQM1luw9VaCCKAM7nrCzU0xPqSCuqo0HuOK83OquRtGatLWyra19xzg+3l/7H41GbSDFGbqUtUQynXXvtg+P6tBy6wES8G8BlvuO8CR2iJoixUWwFJlEcwXADeyvZH3CVDdtaSyTF2qklYa4Wxlu5XXbA2Gqouu926HuqTGH6pKQd0mjeAITdXJ8+o26xE9VikoQnqR7XO35XurbqvGcyJyzUUuKeqiKhQWlfRX175K43sO7QrlDiACFgV2AlM1PUvb2Fbhqbuqiw5c8xCFKbQVhjGKoL517U72Ce4Wscqy3jJySXdHPjAV9YIezlqa/kh+Tv1B/LrzgSWBXhV2iz2QbwDurREclXYjN68qA5YDU1ekmjYAntCr2q+l52RrEMSxpQrzxFTd8Ra9uu4BPAD4u9sSGlWmD7AEmMcvdUl1wycMw4BeJ0pHVhBoGstmATN1Rb0i1fW1A3MP4B/sgSk0qowKm+KSfDhuHZoDozuuMQwBTGN4njZo2mMOlLZEYZG6CIzBXtX1gD00glO3dBc5BJgHfbrkGmNYmRtvu2NaecZlMaygLnVHDfZ36N1RGxXmLnIl565ZNCRiIwAC086FAFo5hsfxGKYbKozFCvOAn7kjgTHYP0ijwgjM49cSYO6aVIt2Ko19TpfddPeysWNXkESWcWwSMKtGRD0jgz3d8U6a95IM+uom7o5A2SX1tbe2O+8r+thIWKo8j21RTjiyOQqrxa5IYWyag2kPWUpaS1bK/N+683LYw89aDDuCaNQRDdMG91MFFtS6VGERLE1YtXmWr+44B5ZbFM90mEVYW8TDsxIsfe5ZaYUqa4q6tPmQKJP/lMprqcCnGTrP9ybXiwoAURGgWJtb4pI+DNJkVVukKt6kFxSnwPLPHB5VoMMdLzN50w4nKmqO7qcIrHPHSF2RO7rC+FpdIBoGzam0qtXAaqytVX2ze1mssFIJx2OXqoywSvWv2sPPMc8VFZz+6BGoST/gKnoTKKqLD671rgiaDrCzLvtYoCKL4mKpZd8bWAosOIHGg6xn9LqXBtnJgfXIVgOVgQstBJYMgzyViIqEWaBfmm9dnJUU5rC8Tu+B3iurHuirPdBnsBGwyiDb3dFL0A7rj1IXkCtsbqIauWMtQf2U0AbAJhQIS+qKhj61Icens0hhcwbZJXf842ABkrhWBtlTgHmSGtXpgcIEw5GstvAkXE8x1TzTj9QVAdOEVV/rWNFr56wkfCQsXsvXTpRgzQIYDY1qAd+hZfUkvRmdUPBrHduiyV2f3MhW8QAVcCVgUQzztRJRT+g33WKoro82vbavo4gWo7gS9TwjuwbC3tFdMiqTRDHKZ2PQ7Z9q/Kj3QGC6HMABOrhIbQNThWUDVS/r+MIRYDzFxQmEVzv21ApjDZ+THZzcdYAltRWn2bIBaZSl88Z0WovnY109KhCewhTYFv3s9xN6eL4QZbQIJbKsHpaN4N3ldLqK0+uv2P+KOmNzSmDa0eiygTWAx65xUYqqLYI2a21FNufnN8EJUk40cH7vXAmrA+MPuMEe1r8AfqNX2zMqy51kmwLzqatIUTr13qIH6DV74HzAdIab02u/u/aIMTTvAIBKDMsu7LCoIKD/BT0fO2dlgg/MXpDxao09pEeMVfaCcQcwySWjX0hnjHVBB2+GytJ041xVidLSAV0rRnCMZcU4li13ihZ38IIEweN0JnnKZOiprBZOdJGdB38CS3tKBcZBcXQxTQ34/gvyucYI1qng6cNmy6AITtuk9CJTmALz3EsDqWf9mrPRzuGS3PoQTZeh6+pqTWJHWf9oUfDP5vtOhkc6WG7lRtxFFdSlwKK5W/KHZgem8LI/PFRdEnaQgvPhhs8mR4nuOYuFWelGqxdRJaMNvjOwwUMlJWodT/qM8SXCopWgedshcEVg/PeZWh6mBT8uIypNgF4CKLcMXFQPK8ICggdM/lEbgfGe8BJh0TxrLxUNU1hA8pAGTY/LAF0yLGAci6Jhz/t+6f+S1QcN4E363oVbCOTD/pGbQPw0tuTP8f/bQvsPPoCzn/bfs3UAAAAASUVORK5CYII="/>
    <image id="4h" width="87" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAAApCAYAAABA4LXdAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEk0lEQVRoge2bzVLbQBCE24kxhJ+ceDmekJfjCBhwsHKw2ttqzeyakFStUkzV1Aphy9qP9uzMrAC+7J/Z6rMXuBsePn2Nnu1+dTv86Xs/BCYBeeq53i2CODv3EdgnQTCoKxuzcydfvwNzYENjPAlydfIVqOp+rnbdXmDXVKqjO+y4CjmdrICNAH5Ljk+F3JNlUPfJ8Qx4BjicvIF1qDVfImBVIiHq+D6O++D3VcDryodmUL8nnkEG+gTsilVwhJo5X3+81t3wsHLAM7hBnHWo69HP5HiNOWQHDPQDebDjCOqvxFdIAPuHZMp11RLq2egbG+mq5ChE9GSq3AjsbvQ3GVU0NCoert4JXIu1qliC3QA4F7+Qcw44U29Ppqp1sG8AXsU5J3/vgDK/elhArlpC/CF+MY6EraHCw0NvpnAIV8G+iHM+sPfMMgdVbw2uxlmqljCvAFzK6IAj9fZmCkVVq2C3AJ5Qwpy+j6Hkm5yDjAVusJApYIVLqDcArjEHvEFZ4HqGCxT1uWq3o29Q5hGFD03TVmiEhdpCxhh7iQPUGwA/x+NrlDDBRS6C2wtkX8wUripWw4G/bocCOBRQLVtgzGQM9bBwjQNcAqZ6CZc3thTlaqy9QBEIMA0Z6pp6EnKcLYym6vWYywWN6iXgGxyAMzRo3O0VbrSYveIAd4OiWAf/giKe8Nt5NzzgfnU7tMJCFhoI+ApFxQwNmjUsRbksEHjvjLHvKFC3mK4phOv5/FS5QZ+2BpgKvsAUNMelwNVsgXDXKIAYBhRqlGqmc/xIhaalr4Kmn9vPS8oWtEBgGPDqU8FmRdJkngq31WJsNW68iaM30Kvp13iP+Ty8Z6Jzagqn1hXTG+AY/YWyi0+ayp1a1Ah3q805YnO0U+BGN6L9Te8iaV6oyu1NwV6haedL24tpDxcN8bTgttpx2uDQxeAdywgLXv5qs4bdMLrCznYmJhbB9TcoWE2ktf5mSrJHWXV7znFpOkev0OgvKHOmqBxwaArXW2cOVVXKG2BWgPF1ryh5oKYpvZrDZSHB8vcJwPP4s6pZ+wqpejPlcnTFEuwzpnU3b0qrs6XB9SrtGQe4jyiAqWIHvPcLA3O4mpaocrX80wIBKLGKSs6aNj2ahz4V0RYHqI8ogB1uFH+PtgYOO5dSpbUayNqCI/gXzCuzpcAFpnA1/D2jKPgJ0/AQhYaJtRY0hcutDsLay/lom6fHVqObw/X5qoI1NFC5rl4AGLKdCC5qvqDtUJSoC4B2kWo7EEuAG+1I6DpDz5Sr1wNQVy7BKiRVNP+63iWKFrLe4UYblZrjEihhZzF3Yke4jbjrKZp+dTKwvQKNzEOhhwjdfdCQEKVjR6ulYp5e+Kq6w7xZ0/uzCjVrlfY6eml8hJo+tyDq9VxXj9kzYB9B1cr0rPdY6xaFB193oufGUtUC7d4CdzX9gxWutt8QjEuwwY6j8t+hzyozf1YsBJBss9ccwbhUcxXX/Pj66CnHFETjafKsj7l0sMBcxRw93QrjrFoTRrK/1nr/EiFn3a0INoD2o/sfgvC//+fOKfaZ/+75sr9ovwE6VuMXJQtz3QAAAABJRU5ErkJggg=="/>
  </defs>
</svg>
`;function Jh(t){let e,n,r,i,o,l,c,s,u;return{c(){e=A("div"),n=A("div"),r=te(),i=A("div"),o=te(),l=A("div"),c=te(),s=A("div"),P(n,"class","hidden gpad-display gpad-display-left"),P(i,"class","hidden gpad-display gpad-display-right"),P(l,"id","gamepad-joystick-touch-area-left"),P(l,"class","gamepad-joystick-touch-area svelte-1i9x4h2"),P(s,"id","gamepad-joystick-touch-area-right"),P(s,"class","gamepad-joystick-touch-area svelte-1i9x4h2"),P(e,"id","gamepad-container"),P(e,"class",u=t[1]?"":"hidden")},m(d,a){T(d,e,a),M(e,n),n.innerHTML=Kh,M(e,r),M(e,i),i.innerHTML=Yh,M(e,o),M(e,l),M(e,c),M(e,s),t[4](e)},p(d,[a]){a&2&&u!==(u=d[1]?"":"hidden")&&P(e,"class",u)},i:ue,o:ue,d(d){d&&E(e),t[4](null)}}}function Zh(t,e,n){let r,i,o;Ne(t,jt,s=>n(2,i=s)),Ne(t,Kn,s=>n(3,o=s));let l;vn(()=>{const s=Ee.gpadCtrl;s&&s.setupOnscreenGamepad(l)});function c(s){q[s?"unshift":"push"](()=>{l=s,n(0,l)})}return t.$$.update=()=>{t.$$.dirty&12&&n(1,r=o===V.connected||o===V.connecting||o===V.reconnecting||i===V.connecting||i===V.reconnecting||i===V.disconnected)},[l,r,i,o,c]}class $h extends Pe{constructor(e){super(),Re(this,e,Zh,Jh,ke,{})}}const ep=new TextEncoder,tp=new TextDecoder;let np=t=>{console.info("Toast: "+t)};class ri{constructor(e,n,r,i){U(this,"eventHandlers",{});U(this,"currentPeer",null);U(this,"rovPeerId",null);U(this,"currentState",null);U(this,"connectionTimeout");U(this,"runningMachine",null);U(this,"lastRecivedMessageTime",0);U(this,"onStateChangeCallback",e=>{});U(this,"onMessageRecivedCallback",e=>{});U(this,"xstateMachineLayout",tr({predictableActionArguments:!0,preserveActionOrder:!0,id:"DataConnection",initial:"Connecting",states:{Connecting:{entry:"onConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Reconnecting:{entry:"onConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Connected:{entry:"onConnectedFunction",on:{ON_DISCONNECTED:{target:"Reconnecting"},ON_DESTROY:{target:"Destroyed"}}},Destroyed:{entry:"onDestoyedFunction",type:"final"}}},{actions:{onConnectingFunction:this.onConnecting.bind(this),onConnectedFunction:this.onConnected.bind(this),onDestoyedFunction:this.cleanup.bind(this)}}));this.currentState=null,this.onStateChangeCallback=r,this.onMessageRecivedCallback=i,this.currentPeer=e,this.rovPeerId=n,console.log("DataConnectionMachine created")}start(){if(this.runningMachine=bn(this.xstateMachineLayout,{devTools:gt(mn)}),this.runningMachine.onTransition(e=>{this.currentState!=e.value&&(this.currentState=e.value,this.onStateChangeCallback(this.currentState))}),this.runningMachine.start(),this.currentPeer==null)return this.cleanup();this.dataConnection=this.currentPeer.connect(this.rovPeerId,{reliable:!0,serialization:"none"}),console.info("connecting to rov peer: "+this.rovPeerId),this.eventHandlers.onOpen=()=>{this.sendEventToMachine("ON_CONNECTED"),np("Rov datachannel Open!")},this.dataConnection.on("open",this.eventHandlers.onOpen),this.eventHandlers.onError=e=>{console.warn("!!!UNHANDLED!! DATACHANNEL_ERROR:",e),this.sendEventToMachine("ON_DESTROY")},this.dataConnection.on("error",this.eventHandlers.onError),this.eventHandlers.onClose=e=>{console.warn("!!UNHANDLED!! DATACHANNEL_CLOSE:",e),this.sendEventToMachine("ON_DESTROY")},this.dataConnection.on("close",this.eventHandlers.onClose),this.eventHandlers.onPeerError=e=>{e.type=="peer-unavailable"&&this.sendEventToMachine("ON_DESTROY")},this.currentPeer.on("error",this.eventHandlers.onPeerError),this.eventHandlers.onData=e=>{this.sendEventToMachine("ON_CONNECTED");const n=tp.decode(e);this.onMessageRecivedCallback(n)},this.dataConnection.on("data",this.eventHandlers.onData)}sendEventToMachine(e){this.runningMachine&&this.runningMachine.send(e)}onConnecting(){this.connectionTimeout=setTimeout(()=>{this.sendEventToMachine("ON_DESTROY")},12e3)}onConnected(){clearInterval(this.disconnectPollInterval),clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0,this.lastRecivedMessageTime=Date.now(),this.disconnectPollInterval=setInterval(()=>{console.info("last msg since: "+(Date.now()-this.lastRecivedMessageTime));let e=Date.now()-this.lastRecivedMessageTime<3e3;e&&this.connectionTimeout!=null?(clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0):!e&&this.connectionTimeout==null&&(this.connectionTimeout=setTimeout(()=>{this.sendEventToMachine("ON_DISCONNECTED"),this.connectionTimeout=setTimeout(()=>{this.sendEventToMachine("ON_DESTROY")},8e3)},1200))},1e3)}sendMessage(e){if(this.dataConnection&&this.currentState=="Connected"){const n=ep.encode(e);return this.dataConnection.send(n)||!0}else return!1}setLastRecivedMessageTime(){this.lastRecivedMessageTime=Date.now()}cleanup(){clearTimeout(this.connectionTimeout),clearTimeout(this.disconnectPollInterval),this.runningMachine.stop(),this.currentState="Destroyed",this.onStateChangeCallback(this.currentState),this.eventHandlers&&(this.currentPeer&&this.currentPeer.off("error",this.eventHandlers.onPeerError),this.dataConnection&&(this.dataConnection.off("open",this.eventHandlers.onOpen),this.dataConnection.off("error",this.eventHandlers.onError),this.dataConnection.off("close",this.eventHandlers.onClose),this.dataConnection.off("data",this.eventHandlers.onData),this.dataConnection.close()),this.eventHandlers=null)}}new TextEncoder;new TextDecoder;class ii{constructor(e,n,r){U(this,"eventHandlers",{});U(this,"currentPeer",null);U(this,"connectionTimeout");U(this,"runningMachine",null);U(this,"mediaChannel",null);U(this,"mainTrack",null);U(this,"onStateChangeCallback",e=>{});U(this,"lastRecivedFrameTime",0);U(this,"xstateMachineLayout",tr({predictableActionArguments:!0,preserveActionOrder:!0,id:"DataConnection",initial:"Connecting",states:{Connecting:{entry:"onConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Reconnecting:{entry:"onConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Connected:{entry:"onConnectedFunction",on:{ON_DISCONNECTED:{target:"Reconnecting"},ON_DESTROY:{target:"Destroyed"}}},Destroyed:{entry:"onDestoyedFunction",type:"final"}}},{actions:{onConnectingFunction:this.onConnecting.bind(this),onConnectedFunction:this.onConnected.bind(this),onDestoyedFunction:this.cleanup.bind(this)}}));this.currentState=this.xstateMachineLayout.config.initial,this.onStateChangeCallback=r,this.currentPeer=e,this.rovPeerId=n}start(){this.runningMachine=bn(this.xstateMachineLayout,{devTools:gt(mn)}),this.runningMachine.onTransition(e=>{this.currentState!=e.value&&(this.currentState=e.value,this.onStateChangeCallback(this.currentState))}),this.runningMachine.start(),console.info("Waiting for rov peer to call: "+this.rovPeerId),this.eventHandlers.onCall=e=>{console.info("Rov peer called us, answering call"),e.answer(),this.eventHandlers.onStream=n=>{this.sendEventToMachine("ON_CONNECTED"),this.mainTrack=n.getVideoTracks()[0];let r=document.getElementById("video-livestream");console.log("MediaChannel got Stream: ",n,this.mainTrack,r),this.eventHandlers.onStreamMute=()=>{we("Frozen video stream detected!",1e3)},this.mainTrack.addEventListener("mute",this.eventHandlers.onStreamMute),r.srcObject=n,r.muted=!0,r.autoplay=!0,r.controls=!1,r.play()},e.on("stream",this.eventHandlers.onStream),this.eventHandlers.onError=n=>{console.log("MediaChannel Error: ",n),this.sendEventToMachine("ON_DESTROY")},e.on("error",this.eventHandlers.onError),this.eventHandlers.onClose=()=>{this.sendEventToMachine("ON_DESTROY")},e.on("close",this.eventHandlers.onClose)},this.currentPeer.on("call",this.eventHandlers.onCall)}sendEventToMachine(e){this.runningMachine&&this.runningMachine.send(e)}onConnecting(){this.connectionTimeout=setTimeout(()=>{this.sendEventToMachine("ON_DESTROY")},8e3)}onConnected(){clearInterval(this.disconnectPollInterval),clearTimeout(this.connectionTimeout),this.currentPeer.off("call",this.eventHandlers.onCall),this.connectionTimeout=void 0,this.disconnectPollInterval=setInterval(()=>{this.connectionTimeout!=null&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0)},1e3)}cleanup(){clearTimeout(this.connectionTimeout),clearTimeout(this.disconnectPollInterval),this.runningMachine.stop(),this.currentState="Destroyed",this.onStateChangeCallback(this.currentState),this.eventHandlers&&(this.currentPeer&&this.currentPeer.off("call",this.eventHandlers.onCall),this.mediaChannel&&(this.mediaChannel.off("stream",this.eventHandlers.onStream),this.mediaChannel.off("error",this.eventHandlers.onError),this.mediaChannel.off("close",this.eventHandlers.onClose),this.mediaChannel.close()),this.mainTrack&&(this.mainTrack.removeEventListener("mute",this.eventHandlers.onStreamMute),this.mainTrack.ended=!0),this.eventHandlers=null)}}var Qi={exports:{}};(function(t){var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),t.exports.binaryFeatures=e;var n=t.exports.BlobBuilder;typeof window<"u"&&(n=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function r(){this._pieces=[],this._parts=[]}r.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},r.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);e.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var i=new n,o=0,l=this._parts.length;o<l;o++)i.append(this._parts[o]);return i.getBlob()}else return new Blob(this._parts)},t.exports.BufferBuilder=r})(Qi);var rp=Qi.exports.BufferBuilder,Cs=Qi.exports.binaryFeatures,ip={unpack:function(t){var e=new Ue(t);return e.unpack()},pack:function(t){var e=new ze;e.pack(t);var n=e.getBuffer();return n}},As=ip;function Ue(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}Ue.prototype.unpack=function(){var t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;var e;if((e=t^160)<=15)return this.unpack_raw(e);if((e=t^176)<=15)return this.unpack_string(e);if((e=t^144)<=15)return this.unpack_array(e);if((e=t^128)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}};Ue.prototype.unpack_uint8=function(){var t=this.dataView[this.index]&255;return this.index++,t};Ue.prototype.unpack_uint16=function(){var t=this.read(2),e=(t[0]&255)*256+(t[1]&255);return this.index+=2,e};Ue.prototype.unpack_uint32=function(){var t=this.read(4),e=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,e};Ue.prototype.unpack_uint64=function(){var t=this.read(8),e=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,e};Ue.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-(1<<8)};Ue.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-(1<<16)};Ue.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)};Ue.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)};Ue.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e};Ue.prototype.unpack_string=function(t){for(var e=this.read(t),n=0,r="",i,o;n<t;)i=e[n],i<128?(r+=String.fromCharCode(i),n++):(i^192)<32?(o=(i^192)<<6|e[n+1]&63,r+=String.fromCharCode(o),n+=2):(o=(i&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,r+=String.fromCharCode(o),n+=3);return this.index+=t,r};Ue.prototype.unpack_array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.unpack();return e};Ue.prototype.unpack_map=function(t){for(var e={},n=0;n<t;n++){var r=this.unpack(),i=this.unpack();e[r]=i}return e};Ue.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,n=(t>>23&255)-127,r=t&8388607|8388608;return(e===0?1:-1)*r*Math.pow(2,n-23)};Ue.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),n=t>>31,r=(t>>20&2047)-1023,i=t&1048575|1048576,o=i*Math.pow(2,r-20)+e*Math.pow(2,r-52);return(n===0?1:-1)*o};Ue.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")};function ze(){this.bufferBuilder=new rp}ze.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};ze.prototype.pack=function(t){var e=typeof t;if(e==="string")this.pack_string(t);else if(e==="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(e==="boolean")t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if(e==="undefined")this.bufferBuilder.append(192);else if(e==="object")if(t===null)this.bufferBuilder.append(192);else{var n=t.constructor;if(n==Array)this.pack_array(t);else if(n==Blob||n==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(n==ArrayBuffer)Cs.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)Cs.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(t);else if(n==Date)this.pack_string(t.toString());else if(typeof t.toBinaryPack=="function")this.bufferBuilder.append(t.toBinaryPack());else throw new Error('Type "'+n.toString()+'" not yet supported')}else throw new Error('Type "'+e+'" not yet supported');this.bufferBuilder.flush()};ze.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};ze.prototype.pack_string=function(t){var e=sp(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};ze.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(e);else throw new Error("Invalid length");for(var n=0;n<e;n++)this.pack(t[n])};ze.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(t&255);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")};ze.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var n=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),o=Math.pow(2,32),l=e<<31|n+1023<<20|i/o&1048575,c=i%o;this.bufferBuilder.append(203),this.pack_int32(l),this.pack_int32(c)};ze.prototype.pack_object=function(t){var e=Object.keys(t),n=e.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this.bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");for(var r in t)t.hasOwnProperty(r)&&(this.pack(r),this.pack(t[r]))};ze.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)};ze.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(t&255)};ze.prototype.pack_uint32=function(t){var e=t&4294967295;this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};ze.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};ze.prototype.pack_int8=function(t){this.bufferBuilder.append(t&255)};ze.prototype.pack_int16=function(t){this.bufferBuilder.append((t&65280)>>8),this.bufferBuilder.append(t&255)};ze.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};ze.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};function op(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function sp(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,op).length}let za=!0,qa=!0;function Mn(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function Cn(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,c){if(l!==e)return i.apply(this,arguments);const s=u=>{const d=n(u);d&&(c.handleEvent?c.handleEvent(d):c(d))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(c,s),i.apply(this,[l,s])};const o=r.removeEventListener;r.removeEventListener=function(l,c){if(l!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(c))return o.apply(this,arguments);const s=this._eventMap[e].get(c);return this._eventMap[e].delete(c),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[l,s])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(l){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),l&&this.addEventListener(e,this["_on"+e]=l)},enumerable:!0,configurable:!0})}function ap(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(za=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function lp(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(qa=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Ki(){if(typeof window=="object"){if(za)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Jr(t,e){!qa||console.warn(t+" is deprecated, please use "+e+" instead.")}function cp(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=Mn(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=Mn(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=Mn(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=Mn(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function Ss(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ha(t){return Ss(t)?Object.keys(t).reduce(function(e,n){const r=Ss(t[n]),i=r?Ha(t[n]):t[n],o=r&&!Object.keys(i).length;return i===void 0||o?e:Object.assign(e,{[n]:i})},{}):t}function wi(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?wi(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{wi(t,t.get(i),n)})}))}function Es(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const o=[];return t.forEach(l=>{l.type==="track"&&l.trackIdentifier===e.id&&o.push(l)}),o.forEach(l=>{t.forEach(c=>{c.type===r&&c.trackId===l.id&&wi(t,c,i)})}),i}const ks=Ki;function Wa(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(c){if(typeof c!="object"||c.mandatory||c.optional)return c;const s={};return Object.keys(c).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const d=typeof c[u]=="object"?c[u]:{ideal:c[u]};d.exact!==void 0&&typeof d.exact=="number"&&(d.min=d.max=d.exact);const a=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(d.ideal!==void 0){s.optional=s.optional||[];let f={};typeof d.ideal=="number"?(f[a("min",u)]=d.ideal,s.optional.push(f),f={},f[a("max",u)]=d.ideal,s.optional.push(f)):(f[a("",u)]=d.ideal,s.optional.push(f))}d.exact!==void 0&&typeof d.exact!="number"?(s.mandatory=s.mandatory||{},s.mandatory[a("",u)]=d.exact):["min","max"].forEach(f=>{d[f]!==void 0&&(s.mandatory=s.mandatory||{},s.mandatory[a(f,u)]=d[f])})}),c.advanced&&(s.optional=(s.optional||[]).concat(c.advanced)),s},i=function(c,s){if(e.version>=61)return s(c);if(c=JSON.parse(JSON.stringify(c)),c&&typeof c.audio=="object"){const u=function(d,a,f){a in d&&!(f in d)&&(d[f]=d[a],delete d[a])};c=JSON.parse(JSON.stringify(c)),u(c.audio,"autoGainControl","googAutoGainControl"),u(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=r(c.audio)}if(c&&typeof c.video=="object"){let u=c.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const d=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!d)){delete c.video.facingMode;let a;if(u.exact==="environment"||u.ideal==="environment"?a=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(a=["front"]),a)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let h=f.find(p=>a.some(m=>p.label.toLowerCase().includes(m)));return!h&&f.length&&a.includes("back")&&(h=f[f.length-1]),h&&(c.video.deviceId=u.exact?{exact:h.deviceId}:{ideal:h.deviceId}),c.video=r(c.video),ks("chrome: "+JSON.stringify(c)),s(c)})}c.video=r(c.video)}return ks("chrome: "+JSON.stringify(c)),s(c)},o=function(c){return e.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(c,s,u){i(c,d=>{n.webkitGetUserMedia(d,s,a=>{u&&u(o(a))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(s){return i(s,u=>c(u).then(d=>{if(u.audio&&!d.getAudioTracks().length||u.video&&!d.getVideoTracks().length)throw d.getTracks().forEach(a=>{a.stop()}),new DOMException("","NotFoundError");return d},d=>Promise.reject(o(d))))}}}function up(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&!!t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const o=r.video&&r.video.width,l=r.video&&r.video.height,c=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:c||3}},o&&(r.video.mandatory.maxWidth=o),l&&(r.video.mandatory.maxHeight=l),t.navigator.mediaDevices.getUserMedia(r)})}}}function Xa(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Qa(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(c=>c.track&&c.track.id===i.track.id):o={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=o,l.transceiver={receiver:o},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(c=>c.track&&c.track.id===i.id):o={track:i};const l=new Event("track");l.track=i,l.receiver=o,l.transceiver={receiver:o},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Cn(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Ka(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,s){let u=i.apply(this,arguments);return u||(u=e(this,c),this._senders.push(u)),u};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){o.apply(this,arguments);const s=this._senders.indexOf(c);s!==-1&&this._senders.splice(s,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(l=>{this._senders.push(e(this,l))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(l=>{const c=this._senders.find(s=>s.track===l);c&&this._senders.splice(this._senders.indexOf(c),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Ya(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const l=function(s){const u={};return s.result().forEach(a=>{const f={id:a.id,timestamp:a.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[a.type]||a.type};a.names().forEach(h=>{f[h]=a.stat(h)}),u[f.id]=f}),u},c=function(s){return new Map(Object.keys(s).map(u=>[u,s[u]]))};if(arguments.length>=2){const s=function(u){i(c(l(u)))};return e.apply(this,[s,r])}return new Promise((s,u)=>{e.apply(this,[function(d){s(c(l(d)))},u])}).then(i,o)}}function Ja(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(l=>l._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(l=>Es(l,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Cn(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Es(o,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,o,l;return this.getSenders().forEach(c=>{c.track===r&&(i?l=!0:i=c)}),this.getReceivers().forEach(c=>(c.track===r&&(o?l=!0:o=c),c.track===r)),l||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Za(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,c){if(!c)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const s=e.apply(this,arguments);return this._shimmedLocalStreams[c.id]?this._shimmedLocalStreams[c.id].indexOf(s)===-1&&this._shimmedLocalStreams[c.id].push(s):this._shimmedLocalStreams[c.id]=[c,s],s};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(u=>{if(this.getSenders().find(a=>a.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const c=this.getSenders();n.apply(this,arguments);const s=this.getSenders().filter(u=>c.indexOf(u)===-1);this._shimmedLocalStreams[l.id]=[l].concat(s)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(c=>{const s=this._shimmedLocalStreams[c].indexOf(l);s!==-1&&this._shimmedLocalStreams[c].splice(s,1),this._shimmedLocalStreams[c].length===1&&delete this._shimmedLocalStreams[c]}),i.apply(this,arguments)}}function $a(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Za(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const d=n.apply(this);return this._reverseStreams=this._reverseStreams||{},d.map(a=>this._reverseStreams[a.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(d){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},d.getTracks().forEach(a=>{if(this.getSenders().find(h=>h.track===a))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[d.id]){const a=new t.MediaStream(d.getTracks());this._streams[d.id]=a,this._reverseStreams[a.id]=d,d=a}r.apply(this,[d])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(d){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[d.id]||d]),delete this._reverseStreams[this._streams[d.id]?this._streams[d.id].id:d.id],delete this._streams[d.id]},t.RTCPeerConnection.prototype.addTrack=function(d,a){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(m=>m===d))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===d))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[a.id];if(p)p.addTrack(d),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new t.MediaStream([d]);this._streams[a.id]=m,this._reverseStreams[m.id]=a,this.addStream(m)}return this.getSenders().find(m=>m.track===d)};function o(u,d){let a=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{const h=u._reverseStreams[f],p=u._streams[h.id];a=a.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:d.type,sdp:a})}function l(u,d){let a=d.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{const h=u._reverseStreams[f],p=u._streams[h.id];a=a.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:d.type,sdp:a})}["createOffer","createAnswer"].forEach(function(u){const d=t.RTCPeerConnection.prototype[u],a={[u](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?d.apply(this,[p=>{const m=o(this,p);f[0].apply(null,[m])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):d.apply(this,arguments).then(p=>o(this,p))}};t.RTCPeerConnection.prototype[u]=a[u]});const c=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?c.apply(this,arguments):(arguments[0]=l(this,arguments[0]),c.apply(this,arguments))};const s=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=s.get.apply(this);return u.type===""?u:o(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!d._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(d._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(m=>d.track===m)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(d.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Ri(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),!!t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function el(t,e){Cn(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Ts=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream:Xa,shimOnTrack:Qa,shimGetSendersWithDtmf:Ka,shimGetStats:Ya,shimSenderReceiverGetStats:Ja,shimAddTrackRemoveTrackWithNative:Za,shimAddTrackRemoveTrack:$a,shimPeerConnection:Ri,fixNegotiationNeeded:el,shimGetUserMedia:Wa,shimGetDisplayMedia:up},Symbol.toStringTag,{value:"Module"}));function fp(t,e){let n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(r=>{if(r&&(r.urls||r.url)){let i=r.urls||r.url;r.url&&!r.urls&&Jr("RTCIceServer.url","RTCIceServer.urls");const o=typeof i=="string";return o&&(i=[i]),i=i.filter(l=>{if(l.indexOf("stun:")===0)return!1;const c=l.startsWith("turn")&&!l.startsWith("turn:[")&&l.includes("transport=udp");return c&&!n?(n=!0,!0):c&&!n}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}var Yi={exports:{}};(function(t){var e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(function(r){return r.trim()})},e.splitSections=function(n){var r=n.split(`
m=`);return r.map(function(i,o){return(o>0?"m="+i:i).trim()+`\r
`})},e.getDescription=function(n){var r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){var r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(function(i){return i.indexOf(r)===0})},e.parseCandidate=function(n){var r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");for(var i={foundation:r[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]=r[o+1];break}return i},e.writeCandidate=function(n){var r=[];r.push(n.foundation),r.push(n.component),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);var i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substr(14).split(" ")},e.parseRtpMap=function(n){var r=n.substr(9).split(" "),i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){var r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);var i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){var r=n.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},e.parseFmtp=function(n){for(var r={},i,o=n.substr(n.indexOf(" ")+1).split(";"),l=0;l<o.length;l++)i=o[l].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){var r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var o=[];Object.keys(n.parameters).forEach(function(l){n.parameters[l]?o.push(l+"="+n.parameters[l]):o.push(l)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){var r=n.substr(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){var r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(o){r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){var r=n.indexOf(" "),i={ssrc:parseInt(n.substr(7,r-7),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substr(r+1,o-r-1),i.value=n.substr(o+1)):i.attribute=n.substr(r+1),i},e.parseSsrcGroup=function(n){var r=n.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(i){return parseInt(i,10)})}},e.getMid=function(n){var r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substr(6)},e.parseFingerprint=function(n){var r=n.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},e.getDtlsParameters=function(n,r){var i=e.matchPrefix(n+r,"a=fingerprint:");return{role:"auto",fingerprints:i.map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){var i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(function(o){i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},e.parseCryptoLine=function(n){var r=n.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var r=n.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){var i=e.matchPrefix(n+r,"a=crypto:");return i.map(e.parseCryptoLine)},e.getIceParameters=function(n,r){var i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substr(12),password:o.substr(10)}:null},e.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},e.parseRtpParameters=function(n){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(n),o=i[0].split(" "),l=3;l<o.length;l++){var c=o[l],s=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(s){var u=e.parseRtpMap(s),d=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}return e.matchPrefix(n,"a=extmap:").forEach(function(a){r.headerExtensions.push(e.parseExtmap(a))}),r},e.writeRtpDescription=function(n,r){var i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map(function(l){return l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(function(l){i+=e.writeRtpMap(l),i+=e.writeFmtp(l),i+=e.writeRtcpFb(l)});var o=0;return r.codecs.forEach(function(l){l.maxptime>o&&(o=l.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),i+=`a=rtcp-mux\r
`,r.headerExtensions&&r.headerExtensions.forEach(function(l){i+=e.writeExtmap(l)}),i},e.parseRtpEncodingParameters=function(n){var r=[],i=e.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,c=e.matchPrefix(n,"a=ssrc:").map(function(f){return e.parseSsrcMedia(f)}).filter(function(f){return f.attribute==="cname"}),s=c.length>0&&c[0].ssrc,u,d=e.matchPrefix(n,"a=ssrc-group:FID").map(function(f){var h=f.substr(17).split(" ");return h.map(function(p){return parseInt(p,10)})});d.length>0&&d[0].length>1&&d[0][0]===s&&(u=d[0][1]),i.codecs.forEach(function(f){if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){var h={ssrc:s,codecPayloadType:parseInt(f.parameters.apt,10)};s&&u&&(h.rtx={ssrc:u}),r.push(h),o&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:s,mechanism:l?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&s&&r.push({ssrc:s});var a=e.matchPrefix(n,"b=");return a.length&&(a[0].indexOf("b=TIAS:")===0?a=parseInt(a[0].substr(7),10):a[0].indexOf("b=AS:")===0?a=parseInt(a[0].substr(5),10)*1e3*.95-50*40*8:a=void 0,r.forEach(function(f){f.maxBitrate=a})),r},e.parseRtcpParameters=function(n){var r={},i=e.matchPrefix(n,"a=ssrc:").map(function(c){return e.parseSsrcMedia(c)}).filter(function(c){return c.attribute==="cname"})[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;var l=e.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},e.parseMsid=function(n){var r,i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substr(7).split(" "),{stream:r[0],track:r[1]};var o=e.matchPrefix(n,"a=ssrc:").map(function(l){return e.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="msid"});if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){var r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:"),o;i.length>0&&(o=parseInt(i[0].substr(19),10)),isNaN(o)&&(o=65536);var l=e.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substr(12),10),protocol:r.fmt,maxMessageSize:o};var c=e.matchPrefix(n,"a=sctpmap:");if(c.length>0){var s=e.matchPrefix(n,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(s[0],10),protocol:s[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){var i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(n,r,i){var o,l=r!==void 0?r:2;n?o=n:o=e.generateSessionId();var c=i||"thisisadapterortc";return`v=0\r
o=`+c+" "+o+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(n,r,i,o){var l=e.writeRtpDescription(n.kind,r);if(l+=e.writeIceParameters(n.iceGatherer.getLocalParameters()),l+=e.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),l+="a=mid:"+n.mid+`\r
`,n.direction?l+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?l+=`a=sendrecv\r
`:n.rtpSender?l+=`a=sendonly\r
`:n.rtpReceiver?l+=`a=recvonly\r
`:l+=`a=inactive\r
`,n.rtpSender){var c="msid:"+o.id+" "+n.rtpSender.track.id+`\r
`;l+="a="+c,l+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+c,n.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+c,l+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return l+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),l},e.getDirection=function(n,r){for(var i=e.splitLines(n),o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substr(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){var r=e.splitLines(n),i=r[0].split(" ");return i[0].substr(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){var r=e.splitLines(n),i=r[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){var r=e.matchPrefix(n,"o=")[0],i=r.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var r=e.splitLines(n),i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(Yi);const Sr=Yi.exports;var Q=Yi.exports;function dp(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}function ws(t,e,n,r,i){var o=Q.writeRtpDescription(t.kind,e);if(o+=Q.writeIceParameters(t.iceGatherer.getLocalParameters()),o+=Q.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":i||"active"),o+="a=mid:"+t.mid+`\r
`,t.rtpSender&&t.rtpReceiver?o+=`a=sendrecv\r
`:t.rtpSender?o+=`a=sendonly\r
`:t.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,t.rtpSender){var l=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=l;var c="msid:"+(r?r.id:"-")+" "+l+`\r
`;o+="a="+c,o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+c,t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+c,o+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+Q.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+Q.localCName+`\r
`),o}function hp(t,e){var n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(function(r){if(r&&(r.urls||r.url)){var i=r.urls||r.url;r.url&&!r.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o=typeof i=="string";return o&&(i=[i]),i=i.filter(function(l){var c=l.indexOf("turn:")===0&&l.indexOf("transport=udp")!==-1&&l.indexOf("turn:[")===-1&&!n;return c?(n=!0,!0):l.indexOf("stun:")===0&&e>=14393&&l.indexOf("?transport=udp")===-1}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}function gr(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(o,l){o=parseInt(o,10);for(var c=0;c<l.length;c++)if(l[c].payloadType===o||l[c].preferredPayloadType===o)return l[c]},i=function(o,l,c,s){var u=r(o.parameters.apt,c),d=r(l.parameters.apt,s);return u&&d&&u.name.toLowerCase()===d.name.toLowerCase()};return t.codecs.forEach(function(o){for(var l=0;l<e.codecs.length;l++){var c=e.codecs[l];if(o.name.toLowerCase()===c.name.toLowerCase()&&o.clockRate===c.clockRate){if(o.name.toLowerCase()==="rtx"&&o.parameters&&c.parameters.apt&&!i(o,c,t.codecs,e.codecs))continue;c=JSON.parse(JSON.stringify(c)),c.numChannels=Math.min(o.numChannels,c.numChannels),n.codecs.push(c),c.rtcpFeedback=c.rtcpFeedback.filter(function(s){for(var u=0;u<o.rtcpFeedback.length;u++)if(o.rtcpFeedback[u].type===s.type&&o.rtcpFeedback[u].parameter===s.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(o){for(var l=0;l<e.headerExtensions.length;l++){var c=e.headerExtensions[l];if(o.uri===c.uri){n.headerExtensions.push(c);break}}}),n}function Rs(t,e,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(n)!==-1}function oi(t,e){var n=t.getRemoteCandidates().find(function(r){return e.foundation===r.foundation&&e.ip===r.ip&&e.port===r.port&&e.priority===r.priority&&e.protocol===r.protocol&&e.type===r.type});return n||t.addRemoteCandidate(e),!n}function qe(t,e){var n=new Error(e);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}var pp=function(t,e){function n(s,u){u.addTrack(s),u.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:s}))}function r(s,u){u.removeTrack(s),u.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:s}))}function i(s,u,d,a){var f=new Event("track");f.track=u,f.receiver=d,f.transceiver={receiver:d},f.streams=a,t.setTimeout(function(){s._dispatchEvent("track",f)})}var o=function(s){var u=this,d=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(f){u[f]=d[f].bind(d)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",s=JSON.parse(JSON.stringify(s||{})),this.usingBundle=s.bundlePolicy==="max-bundle",s.rtcpMuxPolicy==="negotiate")throw qe("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(s.rtcpMuxPolicy||(s.rtcpMuxPolicy="require"),s.iceTransportPolicy){case"all":case"relay":break;default:s.iceTransportPolicy="all";break}switch(s.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:s.bundlePolicy="balanced";break}if(s.iceServers=hp(s.iceServers||[],e),this._iceGatherers=[],s.iceCandidatePoolSize)for(var a=s.iceCandidatePoolSize;a>0;a--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:s.iceServers,gatherPolicy:s.iceTransportPolicy}));else s.iceCandidatePoolSize=0;this._config=s,this.transceivers=[],this._sdpSessionId=Q.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(o.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(o.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),o.prototype.onicecandidate=null,o.prototype.onaddstream=null,o.prototype.ontrack=null,o.prototype.onremovestream=null,o.prototype.onsignalingstatechange=null,o.prototype.oniceconnectionstatechange=null,o.prototype.onconnectionstatechange=null,o.prototype.onicegatheringstatechange=null,o.prototype.onnegotiationneeded=null,o.prototype.ondatachannel=null,o.prototype._dispatchEvent=function(s,u){this._isClosed||(this.dispatchEvent(u),typeof this["on"+s]=="function"&&this["on"+s](u))},o.prototype._emitGatheringStateChange=function(){var s=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",s)},o.prototype.getConfiguration=function(){return this._config},o.prototype.getLocalStreams=function(){return this.localStreams},o.prototype.getRemoteStreams=function(){return this.remoteStreams},o.prototype._createTransceiver=function(s,u){var d=this.transceivers.length>0,a={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:s,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&d)a.iceTransport=this.transceivers[0].iceTransport,a.dtlsTransport=this.transceivers[0].dtlsTransport;else{var f=this._createIceAndDtlsTransports();a.iceTransport=f.iceTransport,a.dtlsTransport=f.dtlsTransport}return u||this.transceivers.push(a),a},o.prototype.addTrack=function(s,u){if(this._isClosed)throw qe("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var d=this.transceivers.find(function(h){return h.track===s});if(d)throw qe("InvalidAccessError","Track already exists.");for(var a,f=0;f<this.transceivers.length;f++)!this.transceivers[f].track&&this.transceivers[f].kind===s.kind&&(a=this.transceivers[f]);return a||(a=this._createTransceiver(s.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(u)===-1&&this.localStreams.push(u),a.track=s,a.stream=u,a.rtpSender=new t.RTCRtpSender(s,a.dtlsTransport),a.rtpSender},o.prototype.addStream=function(s){var u=this;if(e>=15025)s.getTracks().forEach(function(a){u.addTrack(a,s)});else{var d=s.clone();s.getTracks().forEach(function(a,f){var h=d.getTracks()[f];a.addEventListener("enabled",function(p){h.enabled=p.enabled})}),d.getTracks().forEach(function(a){u.addTrack(a,d)})}},o.prototype.removeTrack=function(s){if(this._isClosed)throw qe("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(s instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var u=this.transceivers.find(function(f){return f.rtpSender===s});if(!u)throw qe("InvalidAccessError","Sender was not created by this connection.");var d=u.stream;u.rtpSender.stop(),u.rtpSender=null,u.track=null,u.stream=null;var a=this.transceivers.map(function(f){return f.stream});a.indexOf(d)===-1&&this.localStreams.indexOf(d)>-1&&this.localStreams.splice(this.localStreams.indexOf(d),1),this._maybeFireNegotiationNeeded()},o.prototype.removeStream=function(s){var u=this;s.getTracks().forEach(function(d){var a=u.getSenders().find(function(f){return f.track===d});a&&u.removeTrack(a)})},o.prototype.getSenders=function(){return this.transceivers.filter(function(s){return!!s.rtpSender}).map(function(s){return s.rtpSender})},o.prototype.getReceivers=function(){return this.transceivers.filter(function(s){return!!s.rtpReceiver}).map(function(s){return s.rtpReceiver})},o.prototype._createIceGatherer=function(s,u){var d=this;if(u&&s>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var a=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(a,"state",{value:"new",writable:!0}),this.transceivers[s].bufferedCandidateEvents=[],this.transceivers[s].bufferCandidates=function(f){var h=!f.candidate||Object.keys(f.candidate).length===0;a.state=h?"completed":"gathering",d.transceivers[s].bufferedCandidateEvents!==null&&d.transceivers[s].bufferedCandidateEvents.push(f)},a.addEventListener("localcandidate",this.transceivers[s].bufferCandidates),a},o.prototype._gather=function(s,u){var d=this,a=this.transceivers[u].iceGatherer;if(!a.onlocalcandidate){var f=this.transceivers[u].bufferedCandidateEvents;this.transceivers[u].bufferedCandidateEvents=null,a.removeEventListener("localcandidate",this.transceivers[u].bufferCandidates),a.onlocalcandidate=function(h){if(!(d.usingBundle&&u>0)){var p=new Event("icecandidate");p.candidate={sdpMid:s,sdpMLineIndex:u};var m=h.candidate,g=!m||Object.keys(m).length===0;if(g)(a.state==="new"||a.state==="gathering")&&(a.state="completed");else{a.state==="new"&&(a.state="gathering"),m.component=1,m.ufrag=a.getLocalParameters().usernameFragment;var v=Q.writeCandidate(m);p.candidate=Object.assign(p.candidate,Q.parseCandidate(v)),p.candidate.candidate=v,p.candidate.toJSON=function(){return{candidate:p.candidate.candidate,sdpMid:p.candidate.sdpMid,sdpMLineIndex:p.candidate.sdpMLineIndex,usernameFragment:p.candidate.usernameFragment}}}var y=Q.getMediaSections(d._localDescription.sdp);g?y[p.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:y[p.candidate.sdpMLineIndex]+="a="+p.candidate.candidate+`\r
`,d._localDescription.sdp=Q.getDescription(d._localDescription.sdp)+y.join("");var C=d.transceivers.every(function(D){return D.iceGatherer&&D.iceGatherer.state==="completed"});d.iceGatheringState!=="gathering"&&(d.iceGatheringState="gathering",d._emitGatheringStateChange()),g||d._dispatchEvent("icecandidate",p),C&&(d._dispatchEvent("icecandidate",new Event("icecandidate")),d.iceGatheringState="complete",d._emitGatheringStateChange())}},t.setTimeout(function(){f.forEach(function(h){a.onlocalcandidate(h)})},0)}},o.prototype._createIceAndDtlsTransports=function(){var s=this,u=new t.RTCIceTransport(null);u.onicestatechange=function(){s._updateIceConnectionState(),s._updateConnectionState()};var d=new t.RTCDtlsTransport(u);return d.ondtlsstatechange=function(){s._updateConnectionState()},d.onerror=function(){Object.defineProperty(d,"state",{value:"failed",writable:!0}),s._updateConnectionState()},{iceTransport:u,dtlsTransport:d}},o.prototype._disposeIceAndDtlsTransports=function(s){var u=this.transceivers[s].iceGatherer;u&&(delete u.onlocalcandidate,delete this.transceivers[s].iceGatherer);var d=this.transceivers[s].iceTransport;d&&(delete d.onicestatechange,delete this.transceivers[s].iceTransport);var a=this.transceivers[s].dtlsTransport;a&&(delete a.ondtlsstatechange,delete a.onerror,delete this.transceivers[s].dtlsTransport)},o.prototype._transceive=function(s,u,d){var a=gr(s.localCapabilities,s.remoteCapabilities);u&&s.rtpSender&&(a.encodings=s.sendEncodingParameters,a.rtcp={cname:Q.localCName,compound:s.rtcpParameters.compound},s.recvEncodingParameters.length&&(a.rtcp.ssrc=s.recvEncodingParameters[0].ssrc),s.rtpSender.send(a)),d&&s.rtpReceiver&&a.codecs.length>0&&(s.kind==="video"&&s.recvEncodingParameters&&e<15019&&s.recvEncodingParameters.forEach(function(f){delete f.rtx}),s.recvEncodingParameters.length?a.encodings=s.recvEncodingParameters:a.encodings=[{}],a.rtcp={compound:s.rtcpParameters.compound},s.rtcpParameters.cname&&(a.rtcp.cname=s.rtcpParameters.cname),s.sendEncodingParameters.length&&(a.rtcp.ssrc=s.sendEncodingParameters[0].ssrc),s.rtpReceiver.receive(a))},o.prototype.setLocalDescription=function(s){var u=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(qe("TypeError",'Unsupported type "'+s.type+'"'));if(!Rs("setLocalDescription",s.type,u.signalingState)||u._isClosed)return Promise.reject(qe("InvalidStateError","Can not set local "+s.type+" in state "+u.signalingState));var d,a;if(s.type==="offer")d=Q.splitSections(s.sdp),a=d.shift(),d.forEach(function(h,p){var m=Q.parseRtpParameters(h);u.transceivers[p].localCapabilities=m}),u.transceivers.forEach(function(h,p){u._gather(h.mid,p)});else if(s.type==="answer"){d=Q.splitSections(u._remoteDescription.sdp),a=d.shift();var f=Q.matchPrefix(a,"a=ice-lite").length>0;d.forEach(function(h,p){var m=u.transceivers[p],g=m.iceGatherer,v=m.iceTransport,y=m.dtlsTransport,C=m.localCapabilities,D=m.remoteCapabilities,k=Q.isRejected(h)&&Q.matchPrefix(h,"a=bundle-only").length===0;if(!k&&!m.rejected){var I=Q.getIceParameters(h,a),O=Q.getDtlsParameters(h,a);f&&(O.role="server"),(!u.usingBundle||p===0)&&(u._gather(m.mid,p),v.state==="new"&&v.start(g,I,f?"controlling":"controlled"),y.state==="new"&&y.start(O));var N=gr(C,D);u._transceive(m,N.codecs.length>0,!1)}})}return u._localDescription={type:s.type,sdp:s.sdp},s.type==="offer"?u._updateSignalingState("have-local-offer"):u._updateSignalingState("stable"),Promise.resolve()},o.prototype.setRemoteDescription=function(s){var u=this;if(["offer","answer"].indexOf(s.type)===-1)return Promise.reject(qe("TypeError",'Unsupported type "'+s.type+'"'));if(!Rs("setRemoteDescription",s.type,u.signalingState)||u._isClosed)return Promise.reject(qe("InvalidStateError","Can not set remote "+s.type+" in state "+u.signalingState));var d={};u.remoteStreams.forEach(function(v){d[v.id]=v});var a=[],f=Q.splitSections(s.sdp),h=f.shift(),p=Q.matchPrefix(h,"a=ice-lite").length>0,m=Q.matchPrefix(h,"a=group:BUNDLE ").length>0;u.usingBundle=m;var g=Q.matchPrefix(h,"a=ice-options:")[0];return g?u.canTrickleIceCandidates=g.substr(14).split(" ").indexOf("trickle")>=0:u.canTrickleIceCandidates=!1,f.forEach(function(v,y){var C=Q.splitLines(v),D=Q.getKind(v),k=Q.isRejected(v)&&Q.matchPrefix(v,"a=bundle-only").length===0,I=C[0].substr(2).split(" ")[2],O=Q.getDirection(v,h),N=Q.parseMsid(v),H=Q.getMid(v)||Q.generateIdentifier();if(k||D==="application"&&(I==="DTLS/SCTP"||I==="UDP/DTLS/SCTP")){u.transceivers[y]={mid:H,kind:D,protocol:I,rejected:!0};return}!k&&u.transceivers[y]&&u.transceivers[y].rejected&&(u.transceivers[y]=u._createTransceiver(D,!0));var R,X,ce,me,ve,Se,Ke,Te,_,$=Q.parseRtpParameters(v),re,ye;k||(re=Q.getIceParameters(v,h),ye=Q.getDtlsParameters(v,h),ye.role="client"),Ke=Q.parseRtpEncodingParameters(v);var De=Q.parseRtcpParameters(v),ot=Q.matchPrefix(v,"a=end-of-candidates",h).length>0,Ce=Q.matchPrefix(v,"a=candidate:").map(function(Be){return Q.parseCandidate(Be)}).filter(function(Be){return Be.component===1});if((s.type==="offer"||s.type==="answer")&&!k&&m&&y>0&&u.transceivers[y]&&(u._disposeIceAndDtlsTransports(y),u.transceivers[y].iceGatherer=u.transceivers[0].iceGatherer,u.transceivers[y].iceTransport=u.transceivers[0].iceTransport,u.transceivers[y].dtlsTransport=u.transceivers[0].dtlsTransport,u.transceivers[y].rtpSender&&u.transceivers[y].rtpSender.setTransport(u.transceivers[0].dtlsTransport),u.transceivers[y].rtpReceiver&&u.transceivers[y].rtpReceiver.setTransport(u.transceivers[0].dtlsTransport)),s.type==="offer"&&!k){R=u.transceivers[y]||u._createTransceiver(D),R.mid=H,R.iceGatherer||(R.iceGatherer=u._createIceGatherer(y,m)),Ce.length&&R.iceTransport.state==="new"&&(ot&&(!m||y===0)?R.iceTransport.setRemoteCandidates(Ce):Ce.forEach(function(Be){oi(R.iceTransport,Be)})),Te=t.RTCRtpReceiver.getCapabilities(D),e<15019&&(Te.codecs=Te.codecs.filter(function(Be){return Be.name!=="rtx"})),Se=R.sendEncodingParameters||[{ssrc:(2*y+2)*1001}];var Ye=!1;if(O==="sendrecv"||O==="sendonly"){if(Ye=!R.rtpReceiver,ve=R.rtpReceiver||new t.RTCRtpReceiver(R.dtlsTransport,D),Ye){var st;_=ve.track,N&&N.stream==="-"||(N?(d[N.stream]||(d[N.stream]=new t.MediaStream,Object.defineProperty(d[N.stream],"id",{get:function(){return N.stream}})),Object.defineProperty(_,"id",{get:function(){return N.track}}),st=d[N.stream]):(d.default||(d.default=new t.MediaStream),st=d.default)),st&&(n(_,st),R.associatedRemoteMediaStreams.push(st)),a.push([_,ve,st])}}else R.rtpReceiver&&R.rtpReceiver.track&&(R.associatedRemoteMediaStreams.forEach(function(Be){var Bt=Be.getTracks().find(function(Zt){return Zt.id===R.rtpReceiver.track.id});Bt&&r(Bt,Be)}),R.associatedRemoteMediaStreams=[]);R.localCapabilities=Te,R.remoteCapabilities=$,R.rtpReceiver=ve,R.rtcpParameters=De,R.sendEncodingParameters=Se,R.recvEncodingParameters=Ke,u._transceive(u.transceivers[y],!1,Ye)}else if(s.type==="answer"&&!k){R=u.transceivers[y],X=R.iceGatherer,ce=R.iceTransport,me=R.dtlsTransport,ve=R.rtpReceiver,Se=R.sendEncodingParameters,Te=R.localCapabilities,u.transceivers[y].recvEncodingParameters=Ke,u.transceivers[y].remoteCapabilities=$,u.transceivers[y].rtcpParameters=De,Ce.length&&ce.state==="new"&&((p||ot)&&(!m||y===0)?ce.setRemoteCandidates(Ce):Ce.forEach(function(Be){oi(R.iceTransport,Be)})),(!m||y===0)&&(ce.state==="new"&&ce.start(X,re,"controlling"),me.state==="new"&&me.start(ye));var Yt=gr(R.localCapabilities,R.remoteCapabilities),Jt=Yt.codecs.filter(function(Be){return Be.name.toLowerCase()==="rtx"}).length;!Jt&&R.sendEncodingParameters[0].rtx&&delete R.sendEncodingParameters[0].rtx,u._transceive(R,O==="sendrecv"||O==="recvonly",O==="sendrecv"||O==="sendonly"),ve&&(O==="sendrecv"||O==="sendonly")?(_=ve.track,N?(d[N.stream]||(d[N.stream]=new t.MediaStream),n(_,d[N.stream]),a.push([_,ve,d[N.stream]])):(d.default||(d.default=new t.MediaStream),n(_,d.default),a.push([_,ve,d.default]))):delete R.rtpReceiver}}),u._dtlsRole===void 0&&(u._dtlsRole=s.type==="offer"?"active":"passive"),u._remoteDescription={type:s.type,sdp:s.sdp},s.type==="offer"?u._updateSignalingState("have-remote-offer"):u._updateSignalingState("stable"),Object.keys(d).forEach(function(v){var y=d[v];if(y.getTracks().length){if(u.remoteStreams.indexOf(y)===-1){u.remoteStreams.push(y);var C=new Event("addstream");C.stream=y,t.setTimeout(function(){u._dispatchEvent("addstream",C)})}a.forEach(function(D){var k=D[0],I=D[1];y.id===D[2].id&&i(u,k,I,[y])})}}),a.forEach(function(v){v[2]||i(u,v[0],v[1],[])}),t.setTimeout(function(){!(u&&u.transceivers)||u.transceivers.forEach(function(v){v.iceTransport&&v.iceTransport.state==="new"&&v.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),v.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},o.prototype.close=function(){this.transceivers.forEach(function(s){s.iceTransport&&s.iceTransport.stop(),s.dtlsTransport&&s.dtlsTransport.stop(),s.rtpSender&&s.rtpSender.stop(),s.rtpReceiver&&s.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},o.prototype._updateSignalingState=function(s){this.signalingState=s;var u=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",u)},o.prototype._maybeFireNegotiationNeeded=function(){var s=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,t.setTimeout(function(){if(s.needNegotiation){s.needNegotiation=!1;var u=new Event("negotiationneeded");s._dispatchEvent("negotiationneeded",u)}},0))},o.prototype._updateIceConnectionState=function(){var s,u={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(a){a.iceTransport&&!a.rejected&&u[a.iceTransport.state]++}),s="new",u.failed>0?s="failed":u.checking>0?s="checking":u.disconnected>0?s="disconnected":u.new>0?s="new":u.connected>0?s="connected":u.completed>0&&(s="completed"),s!==this.iceConnectionState){this.iceConnectionState=s;var d=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",d)}},o.prototype._updateConnectionState=function(){var s,u={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(a){a.iceTransport&&a.dtlsTransport&&!a.rejected&&(u[a.iceTransport.state]++,u[a.dtlsTransport.state]++)}),u.connected+=u.completed,s="new",u.failed>0?s="failed":u.connecting>0?s="connecting":u.disconnected>0?s="disconnected":u.new>0?s="new":u.connected>0&&(s="connected"),s!==this.connectionState){this.connectionState=s;var d=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",d)}},o.prototype.createOffer=function(){var s=this;if(s._isClosed)return Promise.reject(qe("InvalidStateError","Can not call createOffer after close"));var u=s.transceivers.filter(function(p){return p.kind==="audio"}).length,d=s.transceivers.filter(function(p){return p.kind==="video"}).length,a=arguments[0];if(a){if(a.mandatory||a.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");a.offerToReceiveAudio!==void 0&&(a.offerToReceiveAudio===!0?u=1:a.offerToReceiveAudio===!1?u=0:u=a.offerToReceiveAudio),a.offerToReceiveVideo!==void 0&&(a.offerToReceiveVideo===!0?d=1:a.offerToReceiveVideo===!1?d=0:d=a.offerToReceiveVideo)}for(s.transceivers.forEach(function(p){p.kind==="audio"?(u--,u<0&&(p.wantReceive=!1)):p.kind==="video"&&(d--,d<0&&(p.wantReceive=!1))});u>0||d>0;)u>0&&(s._createTransceiver("audio"),u--),d>0&&(s._createTransceiver("video"),d--);var f=Q.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.transceivers.forEach(function(p,m){var g=p.track,v=p.kind,y=p.mid||Q.generateIdentifier();p.mid=y,p.iceGatherer||(p.iceGatherer=s._createIceGatherer(m,s.usingBundle));var C=t.RTCRtpSender.getCapabilities(v);e<15019&&(C.codecs=C.codecs.filter(function(k){return k.name!=="rtx"})),C.codecs.forEach(function(k){k.name==="H264"&&k.parameters["level-asymmetry-allowed"]===void 0&&(k.parameters["level-asymmetry-allowed"]="1"),p.remoteCapabilities&&p.remoteCapabilities.codecs&&p.remoteCapabilities.codecs.forEach(function(I){k.name.toLowerCase()===I.name.toLowerCase()&&k.clockRate===I.clockRate&&(k.preferredPayloadType=I.payloadType)})}),C.headerExtensions.forEach(function(k){var I=p.remoteCapabilities&&p.remoteCapabilities.headerExtensions||[];I.forEach(function(O){k.uri===O.uri&&(k.id=O.id)})});var D=p.sendEncodingParameters||[{ssrc:(2*m+1)*1001}];g&&e>=15019&&v==="video"&&!D[0].rtx&&(D[0].rtx={ssrc:D[0].ssrc+1}),p.wantReceive&&(p.rtpReceiver=new t.RTCRtpReceiver(p.dtlsTransport,v)),p.localCapabilities=C,p.sendEncodingParameters=D}),s._config.bundlePolicy!=="max-compat"&&(f+="a=group:BUNDLE "+s.transceivers.map(function(p){return p.mid}).join(" ")+`\r
`),f+=`a=ice-options:trickle\r
`,s.transceivers.forEach(function(p,m){f+=ws(p,p.localCapabilities,"offer",p.stream,s._dtlsRole),f+=`a=rtcp-rsize\r
`,p.iceGatherer&&s.iceGatheringState!=="new"&&(m===0||!s.usingBundle)&&(p.iceGatherer.getLocalCandidates().forEach(function(g){g.component=1,f+="a="+Q.writeCandidate(g)+`\r
`}),p.iceGatherer.state==="completed"&&(f+=`a=end-of-candidates\r
`))});var h=new t.RTCSessionDescription({type:"offer",sdp:f});return Promise.resolve(h)},o.prototype.createAnswer=function(){var s=this;if(s._isClosed)return Promise.reject(qe("InvalidStateError","Can not call createAnswer after close"));if(!(s.signalingState==="have-remote-offer"||s.signalingState==="have-local-pranswer"))return Promise.reject(qe("InvalidStateError","Can not call createAnswer in signalingState "+s.signalingState));var u=Q.writeSessionBoilerplate(s._sdpSessionId,s._sdpSessionVersion++);s.usingBundle&&(u+="a=group:BUNDLE "+s.transceivers.map(function(f){return f.mid}).join(" ")+`\r
`),u+=`a=ice-options:trickle\r
`;var d=Q.getMediaSections(s._remoteDescription.sdp).length;s.transceivers.forEach(function(f,h){if(!(h+1>d)){if(f.rejected){f.kind==="application"?f.protocol==="DTLS/SCTP"?u+=`m=application 0 DTLS/SCTP 5000\r
`:u+="m=application 0 "+f.protocol+` webrtc-datachannel\r
`:f.kind==="audio"?u+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:f.kind==="video"&&(u+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),u+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+f.mid+`\r
`;return}if(f.stream){var p;f.kind==="audio"?p=f.stream.getAudioTracks()[0]:f.kind==="video"&&(p=f.stream.getVideoTracks()[0]),p&&e>=15019&&f.kind==="video"&&!f.sendEncodingParameters[0].rtx&&(f.sendEncodingParameters[0].rtx={ssrc:f.sendEncodingParameters[0].ssrc+1})}var m=gr(f.localCapabilities,f.remoteCapabilities),g=m.codecs.filter(function(v){return v.name.toLowerCase()==="rtx"}).length;!g&&f.sendEncodingParameters[0].rtx&&delete f.sendEncodingParameters[0].rtx,u+=ws(f,m,"answer",f.stream,s._dtlsRole),f.rtcpParameters&&f.rtcpParameters.reducedSize&&(u+=`a=rtcp-rsize\r
`)}});var a=new t.RTCSessionDescription({type:"answer",sdp:u});return Promise.resolve(a)},o.prototype.addIceCandidate=function(s){var u=this,d;return s&&!(s.sdpMLineIndex!==void 0||s.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(a,f){if(u._remoteDescription)if(!s||s.candidate==="")for(var h=0;h<u.transceivers.length&&!(!u.transceivers[h].rejected&&(u.transceivers[h].iceTransport.addRemoteCandidate({}),d=Q.getMediaSections(u._remoteDescription.sdp),d[h]+=`a=end-of-candidates\r
`,u._remoteDescription.sdp=Q.getDescription(u._remoteDescription.sdp)+d.join(""),u.usingBundle));h++);else{var p=s.sdpMLineIndex;if(s.sdpMid){for(var m=0;m<u.transceivers.length;m++)if(u.transceivers[m].mid===s.sdpMid){p=m;break}}var g=u.transceivers[p];if(g){if(g.rejected)return a();var v=Object.keys(s.candidate).length>0?Q.parseCandidate(s.candidate):{};if(v.protocol==="tcp"&&(v.port===0||v.port===9)||v.component&&v.component!==1)return a();if((p===0||p>0&&g.iceTransport!==u.transceivers[0].iceTransport)&&!oi(g.iceTransport,v))return f(qe("OperationError","Can not add ICE candidate"));var y=s.candidate.trim();y.indexOf("a=")===0&&(y=y.substr(2)),d=Q.getMediaSections(u._remoteDescription.sdp),d[p]+="a="+(v.type?y:"end-of-candidates")+`\r
`,u._remoteDescription.sdp=Q.getDescription(u._remoteDescription.sdp)+d.join("")}else return f(qe("OperationError","Can not add ICE candidate"))}else return f(qe("InvalidStateError","Can not add ICE candidate without a remote description"));a()})},o.prototype.getStats=function(s){if(s&&s instanceof t.MediaStreamTrack){var u=null;if(this.transceivers.forEach(function(a){a.rtpSender&&a.rtpSender.track===s?u=a.rtpSender:a.rtpReceiver&&a.rtpReceiver.track===s&&(u=a.rtpReceiver)}),!u)throw qe("InvalidAccessError","Invalid selector.");return u.getStats()}var d=[];return this.transceivers.forEach(function(a){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(f){a[f]&&d.push(a[f].getStats())})}),Promise.all(d).then(function(a){var f=new Map;return a.forEach(function(h){h.forEach(function(p){f.set(p.id,p)})}),f})};var l=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];l.forEach(function(s){var u=t[s];if(u&&u.prototype&&u.prototype.getStats){var d=u.prototype.getStats;u.prototype.getStats=function(){return d.apply(this).then(function(a){var f=new Map;return Object.keys(a).forEach(function(h){a[h].type=dp(a[h]),f.set(h,a[h])}),f})}}});var c=["createOffer","createAnswer"];return c.forEach(function(s){var u=o.prototype[s];o.prototype[s]=function(){var d=arguments;return typeof d[0]=="function"||typeof d[1]=="function"?u.apply(this,[arguments[2]]).then(function(a){typeof d[0]=="function"&&d[0].apply(null,[a])},function(a){typeof d[1]=="function"&&d[1].apply(null,[a])}):u.apply(this,arguments)}}),c=["setLocalDescription","setRemoteDescription","addIceCandidate"],c.forEach(function(s){var u=o.prototype[s];o.prototype[s]=function(){var d=arguments;return typeof d[1]=="function"||typeof d[2]=="function"?u.apply(this,arguments).then(function(){typeof d[1]=="function"&&d[1].apply(null)},function(a){typeof d[2]=="function"&&d[2].apply(null,[a])}):u.apply(this,arguments)}}),["getStats"].forEach(function(s){var u=o.prototype[s];o.prototype[s]=function(){var d=arguments;return typeof d[1]=="function"?u.apply(this,arguments).then(function(){typeof d[1]=="function"&&d[1].apply(null)}):u.apply(this,arguments)}}),o};function tl(t){const e=t&&t.navigator,n=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},r=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(i){return r(i).catch(o=>Promise.reject(n(o)))}}function nl(t){"getDisplayMedia"in t.navigator&&(!t.navigator.mediaDevices||t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}function Pi(t,e){if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(i){return i}),t.RTCSessionDescription||(t.RTCSessionDescription=function(i){return i}),e.version<15025)){const r=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set(i){r.set.call(this,i);const o=new Event("enabled");o.enabled=i,this.dispatchEvent(o)}})}t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)&&Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new t.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);const n=pp(t,e.version);t.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=fp(i.iceServers,e.version),Ki("ICE servers after filtering:",i.iceServers)),new n(i)},t.RTCPeerConnection.prototype=n.prototype}function rl(t){t.RTCRtpSender&&!("replaceTrack"in t.RTCRtpSender.prototype)&&(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)}const Ps=Object.freeze(Object.defineProperty({__proto__:null,shimPeerConnection:Pi,shimReplaceTrack:rl,shimGetUserMedia:tl,shimGetDisplayMedia:nl},Symbol.toStringTag,{value:"Module"}));function il(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,o,l){Jr("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,l)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,c,s){c in l&&!(s in l)&&(l[s]=l[c],delete l[c])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),o(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const c=l.apply(this,arguments);return i(c,"mozAutoGainControl","autoGainControl"),i(c,"mozNoiseSuppression","noiseSuppression"),c}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(c){return this.kind==="audio"&&typeof c=="object"&&(c=JSON.parse(JSON.stringify(c)),i(c,"autoGainControl","mozAutoGainControl"),i(c,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[c])}}}}function gp(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||!t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function ol(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Oi(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=t.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,l,c]=arguments;return r.apply(this,[o||null]).then(s=>{if(e.version<53&&!l)try{s.forEach(u=>{u.type=n[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;s.forEach((d,a)=>{s.set(a,Object.assign({},d,{type:n[d.type]||d.type}))})}return s}).then(l,c)}}function sl(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function al(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Cn(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function ll(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Jr("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function cl(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function ul(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],i=r&&"sendEncodings"in r;i&&r.sendEncodings.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(i){const{sender:l}=o,c=l.getParameters();(!("encodings"in c)||c.encodings.length===1&&Object.keys(c.encodings[0]).length===0)&&(c.encodings=r.sendEncodings,l.sendEncodings=r.sendEncodings,this.setParametersPromises.push(l.setParameters(c).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return o})}function fl(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function dl(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function hl(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Os=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack:ol,shimPeerConnection:Oi,shimSenderGetStats:sl,shimReceiverGetStats:al,shimRemoveStream:ll,shimRTCDataChannel:cl,shimAddTransceiver:ul,shimGetParameters:fl,shimCreateOffer:dl,shimCreateAnswer:hl,shimGetUserMedia:il,shimGetDisplayMedia:gp},Symbol.toStringTag,{value:"Module"}));function pl(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function gl(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const l=new Event("addstream");l.stream=o,r.dispatchEvent(l)})}),e.apply(r,arguments)}}}function ml(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,o=e.setRemoteDescription,l=e.addIceCandidate;e.createOffer=function(u,d){const a=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[a]);return d?(f.then(u,d),Promise.resolve()):f},e.createAnswer=function(u,d){const a=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[a]);return d?(f.then(u,d),Promise.resolve()):f};let c=function(s,u,d){const a=i.apply(this,[s]);return d?(a.then(u,d),Promise.resolve()):a};e.setLocalDescription=c,c=function(s,u,d){const a=o.apply(this,[s]);return d?(a.then(u,d),Promise.resolve()):a},e.setRemoteDescription=c,c=function(s,u,d){const a=l.apply(this,[s]);return d?(a.then(u,d),Promise.resolve()):a},e.addIceCandidate=c}function vl(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(yl(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(r,i,o){e.mediaDevices.getUserMedia(r).then(i,o)}.bind(e))}function yl(t){return t&&t.video!==void 0?Object.assign({},t,{video:Ha(t.video)}):t}function _l(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let l=0;l<r.iceServers.length;l++){let c=r.iceServers[l];!c.hasOwnProperty("urls")&&c.hasOwnProperty("url")?(Jr("RTCIceServer.url","RTCIceServer.urls"),c=JSON.parse(JSON.stringify(c)),c.urls=c.url,delete c.url,o.push(c)):o.push(r.iceServers[l])}r.iceServers=o}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function bl(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Cl(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video")}return e.apply(this,arguments)}}function Al(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Ds=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI:pl,shimRemoteStreamsAPI:gl,shimCallbacksAPI:ml,shimGetUserMedia:vl,shimConstraints:yl,shimRTCIceServerUrls:_l,shimTrackEventTransceiver:bl,shimCreateOfferLegacy:Cl,shimAudioContext:Al},Symbol.toStringTag,{value:"Module"}));function Er(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const i=new e(r),o=Sr.parseCandidate(r.candidate),l=Object.assign(i,o);return l.toJSON=function(){return{candidate:l.candidate,sdpMid:l.sdpMid,sdpMLineIndex:l.sdpMLineIndex,usernameFragment:l.usernameFragment}},l}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Cn(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function In(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(c){if(!c||!c.sdp)return!1;const s=Sr.splitSections(c.sdp);return s.shift(),s.some(u=>{const d=Sr.parseMLine(u);return d&&d.kind==="application"&&d.protocol.indexOf("SCTP")!==-1})},r=function(c){const s=c.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(s===null||s.length<2)return-1;const u=parseInt(s[1],10);return u!==u?-1:u},i=function(c){let s=65536;return e.browser==="firefox"&&(e.version<57?c===-1?s=16384:s=2147483637:e.version<60?s=e.version===57?65535:65536:s=2147483637),s},o=function(c,s){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const d=Sr.matchPrefix(c.sdp,"a=max-message-size:");return d.length>0?u=parseInt(d[0].substr(19),10):e.browser==="firefox"&&s!==-1&&(u=2147483637),u},l=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:s}=this.getConfiguration();s==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const s=r(arguments[0]),u=i(s),d=o(arguments[0],s);let a;u===0&&d===0?a=Number.POSITIVE_INFINITY:u===0||d===0?a=Math.max(u,d):a=Math.min(u,d);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return a}}),this._sctp=f}return l.apply(this,arguments)}}function Bn(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const o=r.send;r.send=function(){const c=arguments[0],s=c.length||c.size||c.byteLength;if(r.readyState==="open"&&i.sctp&&s>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},Cn(t,"datachannel",r=>(e(r.channel,r.target),r))}function Di(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const l=new Event("connectionstatechange",i);o.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Mi(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function kr(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const mp=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate:Er,shimMaxMessageSize:In,shimSendThrowTypeError:Bn,shimConnectionState:Di,removeExtmapAllowMixed:Mi,shimAddIceCandidateNullOrEmpty:kr},Symbol.toStringTag,{value:"Module"}));function vp({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=Ki,r=cp(t),i={browserDetails:r,commonShim:mp,extractVersion:Mn,disableLog:ap,disableWarnings:lp};switch(r.browser){case"chrome":if(!Ts||!Ri||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Ts,kr(t,r),Wa(t,r),Xa(t),Ri(t,r),Qa(t),$a(t,r),Ka(t),Ya(t),Ja(t),el(t,r),Er(t),Di(t),In(t,r),Bn(t),Mi(t,r);break;case"firefox":if(!Os||!Oi||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Os,kr(t,r),il(t,r),Oi(t,r),ol(t),ll(t),sl(t),al(t),cl(t),ul(t),fl(t),dl(t),hl(t),Er(t),Di(t),In(t,r),Bn(t);break;case"edge":if(!Ps||!Pi||!e.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=Ps,tl(t),nl(t),Pi(t,r),rl(t),In(t,r),Bn(t);break;case"safari":if(!Ds||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Ds,kr(t,r),_l(t),Cl(t),ml(t),pl(t),gl(t),bl(t),vl(t),Al(t),Er(t),In(t,r),Bn(t),Mi(t,r);break;default:n("Unsupported browser!");break}return i}const Ms=vp({window:typeof window>"u"?void 0:window});function yt(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var si=Ms.default||Ms,En=new(function(){function t(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return t.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},t.prototype.isBrowserSupported=function(){var e=this.getBrowser(),n=this.getVersion(),r=this.supportedBrowsers.includes(e);return r?e==="chrome"?n>=this.minChromeVersion:e==="firefox"?n>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&n>=this.minSafariVersion:!1:!1},t.prototype.getBrowser=function(){return si.browserDetails.browser},t.prototype.getVersion=function(){return si.browserDetails.version||0},t.prototype.isUnifiedPlanSupported=function(){var e=this.getBrowser(),n=si.browserDetails.version||0;if(e==="chrome"&&n<this.minChromeVersion)return!1;if(e==="firefox"&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,i=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),i=!0}catch{}finally{r&&r.close()}return i},t.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},t}()),Is={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},yp=function(){function t(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=Is,this.browser=En.getBrowser(),this.browserVersion=En.getVersion(),this.supports=function(){var e={browser:En.isBrowserSupported(),webRTC:En.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;var n;try{n=new RTCPeerConnection(Is),e.audioVideo=!0;var r=void 0;try{r=n.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!En.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{n&&n.close()}return e}(),this.pack=As.pack,this.unpack=As.unpack,this._dataCount=1}return t.prototype.noop=function(){},t.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},t.prototype.chunk=function(e){for(var n=[],r=e.size,i=Math.ceil(r/ge.chunkedMTU),o=0,l=0;l<r;){var c=Math.min(r,l+ge.chunkedMTU),s=e.slice(l,c),u={__peerData:this._dataCount,n:o,data:s,total:i};n.push(u),l=c,o++}return this._dataCount++,n},t.prototype.blobToArrayBuffer=function(e,n){var r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r},t.prototype.binaryStringToArrayBuffer=function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer},t.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},t.prototype.isSecure=function(){return location.protocol==="https:"},t}(),ge=new yp,Sl={};yt(Sl,"Peer",()=>qs,t=>qs=t);var rr={},_p=Object.prototype.hasOwnProperty,Ze="~";function Yn(){}Object.create&&(Yn.prototype=Object.create(null),new Yn().__proto__||(Ze=!1));function bp(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function El(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new bp(n,r||t,i),l=Ze?Ze+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function Tr(t,e){--t._eventsCount===0?t._events=new Yn:delete t._events[e]}function Xe(){this._events=new Yn,this._eventsCount=0}Xe.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)_p.call(n,r)&&e.push(Ze?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};Xe.prototype.listeners=function(e){var n=Ze?Ze+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,l=new Array(o);i<o;i++)l[i]=r[i].fn;return l};Xe.prototype.listenerCount=function(e){var n=Ze?Ze+e:e,r=this._events[n];return r?r.fn?1:r.length:0};Xe.prototype.emit=function(e,n,r,i,o,l){var c=Ze?Ze+e:e;if(!this._events[c])return!1;var s=this._events[c],u=arguments.length,d,a;if(s.fn){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),u){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,n),!0;case 3:return s.fn.call(s.context,n,r),!0;case 4:return s.fn.call(s.context,n,r,i),!0;case 5:return s.fn.call(s.context,n,r,i,o),!0;case 6:return s.fn.call(s.context,n,r,i,o,l),!0}for(a=1,d=new Array(u-1);a<u;a++)d[a-1]=arguments[a];s.fn.apply(s.context,d)}else{var f=s.length,h;for(a=0;a<f;a++)switch(s[a].once&&this.removeListener(e,s[a].fn,void 0,!0),u){case 1:s[a].fn.call(s[a].context);break;case 2:s[a].fn.call(s[a].context,n);break;case 3:s[a].fn.call(s[a].context,n,r);break;case 4:s[a].fn.call(s[a].context,n,r,i);break;default:if(!d)for(h=1,d=new Array(u-1);h<u;h++)d[h-1]=arguments[h];s[a].fn.apply(s[a].context,d)}}return!0};Xe.prototype.on=function(e,n,r){return El(this,e,n,r,!1)};Xe.prototype.once=function(e,n,r){return El(this,e,n,r,!0)};Xe.prototype.removeListener=function(e,n,r,i){var o=Ze?Ze+e:e;if(!this._events[o])return this;if(!n)return Tr(this,o),this;var l=this._events[o];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&Tr(this,o);else{for(var c=0,s=[],u=l.length;c<u;c++)(l[c].fn!==n||i&&!l[c].once||r&&l[c].context!==r)&&s.push(l[c]);s.length?this._events[o]=s.length===1?s[0]:s:Tr(this,o)}return this};Xe.prototype.removeAllListeners=function(e){var n;return e?(n=Ze?Ze+e:e,this._events[n]&&Tr(this,n)):(this._events=new Yn,this._eventsCount=0),this};Xe.prototype.off=Xe.prototype.removeListener;Xe.prototype.addListener=Xe.prototype.on;Xe.prefixed=Ze;Xe.EventEmitter=Xe;rr=Xe;var j={};yt(j,"LogLevel",()=>$e,t=>$e=t);yt(j,"default",()=>Bs,t=>Bs=t);var Lt=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){l={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},xt=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Cp="PeerJS: ",$e;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})($e||($e={}));var Ap=function(){function t(){this._logLevel=$e.Disabled}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=$e.All&&this._print.apply(this,xt([$e.All],Lt(e),!1))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=$e.Warnings&&this._print.apply(this,xt([$e.Warnings],Lt(e),!1))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=$e.Errors&&this._print.apply(this,xt([$e.Errors],Lt(e),!1))},t.prototype.setLogFunction=function(e){this._print=e},t.prototype._print=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=xt([Cp],Lt(n),!1);for(var o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);e>=$e.All?console.log.apply(console,xt([],Lt(i),!1)):e>=$e.Warnings?console.warn.apply(console,xt(["WARNING"],Lt(i),!1)):e>=$e.Errors&&console.error.apply(console,xt(["ERROR"],Lt(i),!1))},t}(),Bs=new Ap,kl={};yt(kl,"Socket",()=>Ls,t=>Ls=t);var ut;(function(t){t.Data="data",t.Media="media"})(ut||(ut={}));var Me;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})(Me||(Me={}));var _t;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json"})(_t||(_t={}));var bt;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(bt||(bt={}));var Ve;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(Ve||(Ve={}));var Ji={};Ji=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xFCckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var Sp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ep=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){l={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},kp=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Tp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ls=function(t){Sp(e,t);function e(n,r,i,o,l,c){c===void 0&&(c=5e3);var s=t.call(this)||this;s.pingInterval=c,s._disconnected=!0,s._messagesQueue=[];var u=n?"wss://":"ws://";return s._baseUrl=u+r+":"+i+o+"peerjs?key="+l,s}return e.prototype.start=function(n,r){var i=this;this._id=n;var o="".concat(this._baseUrl,"&id=").concat(n,"&token=").concat(r);!!this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+Ji.version),this._disconnected=!1,this._socket.onmessage=function(l){var c;try{c=JSON.parse(l.data),j.default.log("Server message received:",c)}catch{j.default.log("Invalid server message",l.data);return}i.emit(bt.Message,c)},this._socket.onclose=function(l){i._disconnected||(j.default.log("Socket closed.",l),i._cleanup(),i._disconnected=!0,i.emit(bt.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),j.default.log("Socket open"),i._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var n=this;this._wsPingTimer=setTimeout(function(){n._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(!this._wsOpen()){j.default.log("Cannot send heartbeat, because socket closed");return}var n=JSON.stringify({type:Ve.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()},e.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},e.prototype._sendQueuedMessages=function(){var n,r,i=kp([],Ep(this._messagesQueue),!1);this._messagesQueue=[];try{for(var o=Tp(i),l=o.next();!l.done;l=o.next()){var c=l.value;this.send(c)}}catch(s){n={error:s}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.send=function(n){if(!this._disconnected){if(!this._id){this._messagesQueue.push(n);return}if(!n.type){this.emit(bt.Error,"Invalid message");return}if(!!this._wsOpen()){var r=JSON.stringify(n);this._socket.send(r)}}},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}(rr.EventEmitter),Ii={};yt(Ii,"MediaConnection",()=>Ns,t=>Ns=t);var Zi={};yt(Zi,"Negotiator",()=>xs,t=>xs=t);var qr=function(){return qr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qr.apply(this,arguments)},mr=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(d){try{u(r.next(d))}catch(a){l(a)}}function s(d){try{u(r.throw(d))}catch(a){l(a)}}function u(d){d.done?o(d.value):i(d.value).then(c,s)}u((r=r.apply(t,e||[])).next())})},vr=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(u){return function(d){return s([u,d])}}function s(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},xs=function(){function t(e){this.connection=e}return t.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===ut.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===ut.Data){var r=this.connection,i={ordered:!!e.reliable},o=n.createDataChannel(r.label,i);r.initialize(o)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},t.prototype._startPeerConnection=function(){j.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},t.prototype._setupListeners=function(e){var n=this,r=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,l=this.connection.provider;j.default.log("Listening for ICE candidates."),e.onicecandidate=function(c){!c.candidate||!c.candidate.candidate||(j.default.log("Received ICE candidates for ".concat(r,":"),c.candidate),l.socket.send({type:Ve.Candidate,payload:{candidate:c.candidate,type:o,connectionId:i},dst:r}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":j.default.log("iceConnectionState is failed, closing connections to "+r),n.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),n.connection.close();break;case"closed":j.default.log("iceConnectionState is closed, closing connections to "+r),n.connection.emit("error",new Error("Connection to "+r+" closed.")),n.connection.close();break;case"disconnected":j.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=ge.noop;break}n.connection.emit("iceStateChanged",e.iceConnectionState)},j.default.log("Listening for data channel"),e.ondatachannel=function(c){j.default.log("Received data channel");var s=c.channel,u=l.getConnection(r,i);u.initialize(s)},j.default.log("Listening for remote stream"),e.ontrack=function(c){j.default.log("Received remote stream");var s=c.streams[0],u=l.getConnection(r,i);if(u.type===ut.Media){var d=u;n._addStreamToMediaConnection(s,d)}}},t.prototype.cleanup=function(){j.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(!!e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n=e.signalingState!=="closed",r=!1;if(this.connection.type===ut.Data){var i=this.connection,o=i.dataChannel;o&&(r=!!o.readyState&&o.readyState!=="closed")}(n||r)&&e.close()}},t.prototype._makeOffer=function(){return mr(this,void 0,Promise,function(){var e,n,r,i,o,l,c;return vr(this,function(s){switch(s.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:r=s.sent(),j.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return s.sent(),j.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:ge.browser},this.connection.type===ut.Data&&(o=this.connection,i=qr(qr({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),n.socket.send({type:Ve.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return l=s.sent(),l!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(Me.WebRTC,l),j.default.log("Failed to setLocalDescription, ",l)),[3,6];case 6:return[3,8];case 7:return c=s.sent(),n.emitError(Me.WebRTC,c),j.default.log("Failed to createOffer, ",c),[3,8];case 8:return[2]}})})},t.prototype._makeAnswer=function(){return mr(this,void 0,Promise,function(){var e,n,r,i,o;return vr(this,function(l){switch(l.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,l.label=1;case 1:return l.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:r=l.sent(),j.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),l.label=3;case 3:return l.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return l.sent(),j.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),n.socket.send({type:Ve.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:ge.browser},dst:this.connection.peer}),[3,6];case 5:return i=l.sent(),n.emitError(Me.WebRTC,i),j.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return o=l.sent(),n.emitError(Me.WebRTC,o),j.default.log("Failed to create answer, ",o),[3,8];case 8:return[2]}})})},t.prototype.handleSDP=function(e,n){return mr(this,void 0,Promise,function(){var r,i,o,l;return vr(this,function(c){switch(c.label){case 0:n=new RTCSessionDescription(n),r=this.connection.peerConnection,i=this.connection.provider,j.default.log("Setting remote description",n),o=this,c.label=1;case 1:return c.trys.push([1,5,,6]),[4,r.setRemoteDescription(n)];case 2:return c.sent(),j.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),e!=="OFFER"?[3,4]:[4,o._makeAnswer()];case 3:c.sent(),c.label=4;case 4:return[3,6];case 5:return l=c.sent(),i.emitError(Me.WebRTC,l),j.default.log("Failed to setRemoteDescription, ",l),[3,6];case 6:return[2]}})})},t.prototype.handleCandidate=function(e){return mr(this,void 0,Promise,function(){var n,r,i,o,l,c;return vr(this,function(s){switch(s.label){case 0:j.default.log("handleCandidate:",e),n=e.candidate,r=e.sdpMLineIndex,i=e.sdpMid,o=this.connection.peerConnection,l=this.connection.provider,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,o.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:r,candidate:n}))];case 2:return s.sent(),j.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return c=s.sent(),l.emitError(Me.WebRTC,c),j.default.log("Failed to handleCandidate, ",c),[3,4];case 4:return[2]}})})},t.prototype._addTracksToConnection=function(e,n){if(j.default.log("add tracks from stream ".concat(e.id," to peer connection")),!n.addTrack)return j.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(r){n.addTrack(r,e)})},t.prototype._addStreamToMediaConnection=function(e,n){j.default.log("add stream ".concat(e.id," to media connection ").concat(n.connectionId)),n.addStream(e)},t}(),$i={};yt($i,"BaseConnection",()=>Fs,t=>Fs=t);var wp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fs=function(t){wp(e,t);function e(n,r,i){var o=t.call(this)||this;return o.peer=n,o.provider=r,o.options=i,o._open=!1,o.metadata=i.metadata,o}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}(rr.EventEmitter),Rp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hr=function(){return Hr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Hr.apply(this,arguments)},Pp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ns=function(t){Rp(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||e.ID_PREFIX+ge.randomToken(),o._negotiator=new Zi.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return Object.defineProperty(e.prototype,"type",{get:function(){return ut.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(n){j.default.log("Receiving stream",n),this._remoteStream=n,t.prototype.emit.call(this,"stream",n)},e.prototype.handleMessage=function(n){var r=n.type,i=n.payload;switch(n.type){case Ve.Answer:this._negotiator.handleSDP(r,i.sdp),this._open=!0;break;case Ve.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:j.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer));break}},e.prototype.answer=function(n,r){var i,o;if(r===void 0&&(r={}),this._localStream){j.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(Hr(Hr({},this.options._payload),{_stream:n}));var l=this.provider._getMessages(this.connectionId);try{for(var c=Pp(l),s=c.next();!s.done;s=c.next()){var u=s.value;this.handleMessage(u)}}catch(d){i={error:d}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}this._open=!0},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.ID_PREFIX="mc_",e}($i.BaseConnection),Bi={};yt(Bi,"DataConnection",()=>js,t=>js=t);var Tl={};yt(Tl,"EncodingQueue",()=>Gs,t=>Gs=t);var Op=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gs=function(t){Op(e,t);function e(){var n=t.call(this)||this;return n.fileReader=new FileReader,n._queue=[],n._processing=!1,n.fileReader.onload=function(r){n._processing=!1,r.target&&n.emit("done",r.target.result),n.doNextTask()},n.fileReader.onerror=function(r){j.default.error("EncodingQueue error:",r),n._processing=!1,n.destroy(),n.emit("error",r)},n}return Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(n){this.queue.push(n),!this.processing&&this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}(rr.EventEmitter),Dp=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Mp=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},js=function(t){Dp(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new Tl.EncodingQueue,o.connectionId=o.options.connectionId||e.ID_PREFIX+ge.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||_t.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(l){o._bufferedSend(l)}),o._encodingQueue.on("error",function(){j.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()}),o._negotiator=new Zi.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return Object.defineProperty(e.prototype,"type",{get:function(){return ut.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(n){this._dc=n,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var n=this;(!ge.supports.binaryBlob||ge.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){j.default.log("DC#".concat(n.connectionId," dc connection success")),n._open=!0,n.emit("open")},this.dataChannel.onmessage=function(r){j.default.log("DC#".concat(n.connectionId," dc onmessage:"),r.data),n._handleDataMessage(r)},this.dataChannel.onclose=function(){j.default.log("DC#".concat(n.connectionId," dc closed for:"),n.peer),n.close()}},e.prototype._handleDataMessage=function(n){var r=this,i=n.data,o=i.constructor,l=this.serialization===_t.Binary||this.serialization===_t.BinaryUTF8,c=i;if(l){if(o===Blob){ge.blobToArrayBuffer(i,function(u){var d=ge.unpack(u);r.emit("data",d)});return}else if(o===ArrayBuffer)c=ge.unpack(i);else if(o===String){var s=ge.binaryStringToArrayBuffer(i);c=ge.unpack(s)}}else this.serialization===_t.JSON&&(c=this.parse(i));if(c.__peerData){this._handleChunk(c);return}t.prototype.emit.call(this,"data",c)},e.prototype._handleChunk=function(n){var r=n.__peerData,i=this._chunkedData[r]||{data:[],count:0,total:n.total};if(i.data[n.n]=n.data,i.count++,this._chunkedData[r]=i,i.total===i.count){delete this._chunkedData[r];var o=new Blob(i.data);this._handleDataMessage({data:o})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.prototype.send=function(n,r){if(!this.open){t.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===_t.JSON)this._bufferedSend(this.stringify(n));else if(this.serialization===_t.Binary||this.serialization===_t.BinaryUTF8){var i=ge.pack(n);if(!r&&i.size>ge.chunkedMTU){this._sendChunks(i);return}ge.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(n)},e.prototype._bufferedSend=function(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(i){return j.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){if(!!this.open&&this._buffer.length!==0){var n=this._buffer[0];this._trySend(n)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},e.prototype._sendChunks=function(n){var r,i,o=ge.chunk(n);j.default.log("DC#".concat(this.connectionId," Try to send ").concat(o.length," chunks..."));try{for(var l=Mp(o),c=l.next();!c.done;c=l.next()){var s=c.value;this.send(s,!0)}}catch(u){r={error:u}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}},e.prototype.handleMessage=function(n){var r=n.payload;switch(n.type){case Ve.Answer:this._negotiator.handleSDP(n.type,r.sdp);break;case Ve.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:j.default.warn("Unrecognized message type:",n.type,"from peer:",this.peer);break}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}($i.BaseConnection),wl={};yt(wl,"API",()=>zs,t=>zs=t);var Vs=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(d){try{u(r.next(d))}catch(a){l(a)}}function s(d){try{u(r.throw(d))}catch(a){l(a)}}function u(d){d.done?o(d.value):i(d.value).then(c,s)}u((r=r.apply(t,e||[])).next())})},Us=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(u){return function(d){return s([u,d])}}function s(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},zs=function(){function t(e){this._options=e}return t.prototype._buildRequest=function(e){var n=this._options.secure?"https":"http",r=this._options,i=r.host,o=r.port,l=r.path,c=r.key,s=new URL("".concat(n,"://").concat(i,":").concat(o).concat(l).concat(c,"/").concat(e));return s.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),s.searchParams.set("version",Ji.version),fetch(s.href,{referrerPolicy:this._options.referrerPolicy})},t.prototype.retrieveId=function(){return Vs(this,void 0,Promise,function(){var e,n,r;return Us(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(e=i.sent(),e.status!==200)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw n=i.sent(),j.default.error("Error retrieving ID",n),r="",this._options.path==="/"&&this._options.host!==ge.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},t.prototype.listAllPeers=function(){return Vs(this,void 0,Promise,function(){var e,n,r;return Us(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(e=i.sent(),e.status!==200)throw e.status===401?(n="",this._options.host===ge.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)):new Error("Error. Status:".concat(e.status));return[2,e.json()];case 2:throw r=i.sent(),j.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},t}(),Ip=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gn=function(){return Gn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gn.apply(this,arguments)},kn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bp=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){l={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},qs=function(t){Ip(e,t);function e(n,r){var i=t.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var o;return n&&n.constructor==Object?r=n:n&&(o=n.toString()),r=Gn({debug:0,host:ge.CLOUD_HOST,port:ge.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:ge.randomToken(),config:ge.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),i._options=r,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==ge.CLOUD_HOST?i._options.secure=ge.isSecure():i._options.host==ge.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&j.default.setLogFunction(i._options.logFunction),j.default.logLevel=i._options.debug||0,i._api=new wl.API(r),i._socket=i._createServerConnection(),!ge.supports.audioVideo&&!ge.supports.data?(i._delayedAbort(Me.BrowserIncompatible,"The current browser does not support WebRTC"),i):!!o&&!ge.validateId(o)?(i._delayedAbort(Me.InvalidID,'ID "'.concat(o,'" is invalid')),i):(o?i._initialize(o):i._api.retrieveId().then(function(l){return i._initialize(l)}).catch(function(l){return i._abort(Me.ServerError,l)}),i)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var n,r,i=Object.create(null);try{for(var o=kn(this._connections),l=o.next();!l.done;l=o.next()){var c=Bp(l.value,2),s=c[0],u=c[1];i[s]=u}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var n=this,r=new kl.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(bt.Message,function(i){n._handleMessage(i)}),r.on(bt.Error,function(i){n._abort(Me.SocketError,i)}),r.on(bt.Disconnected,function(){n.disconnected||(n.emitError(Me.Network,"Lost connection to server."),n.disconnect())}),r.on(bt.Close,function(){n.disconnected||n._abort(Me.SocketClosed,"Underlying socket is already closed.")}),r},e.prototype._initialize=function(n){this._id=n,this.socket.start(n,this._options.token)},e.prototype._handleMessage=function(n){var r,i,o=n.type,l=n.payload,c=n.src;switch(o){case Ve.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ve.Error:this._abort(Me.ServerError,l.msg);break;case Ve.IdTaken:this._abort(Me.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case Ve.InvalidKey:this._abort(Me.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case Ve.Leave:j.default.log("Received leave message from ".concat(c)),this._cleanupPeer(c),this._connections.delete(c);break;case Ve.Expire:this.emitError(Me.PeerUnavailable,"Could not connect to peer ".concat(c));break;case Ve.Offer:var p=l.connectionId,m=this.getConnection(c,p);if(m&&(m.close(),j.default.warn("Offer received for existing Connection ID:".concat(p))),l.type===ut.Media){var s=new Ii.MediaConnection(c,this,{connectionId:p,_payload:l,metadata:l.metadata});m=s,this._addConnection(c,m),this.emit("call",s)}else if(l.type===ut.Data){var u=new Bi.DataConnection(c,this,{connectionId:p,_payload:l,metadata:l.metadata,label:l.label,serialization:l.serialization,reliable:l.reliable});m=u,this._addConnection(c,m),this.emit("connection",u)}else{j.default.warn("Received malformed connection type:".concat(l.type));return}var d=this._getMessages(p);try{for(var a=kn(d),f=a.next();!f.done;f=a.next()){var h=f.value;m.handleMessage(h)}}catch(g){r={error:g}}finally{try{f&&!f.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}break;default:if(!l){j.default.warn("You received a malformed message from ".concat(c," of type ").concat(o));return}var p=l.connectionId,m=this.getConnection(c,p);m&&m.peerConnection?m.handleMessage(n):p?this._storeMessage(p,n):j.default.warn("You received an unrecognized message:",n);break}},e.prototype._storeMessage=function(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)},e.prototype._getMessages=function(n){var r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]},e.prototype.connect=function(n,r){if(r===void 0&&(r={}),this.disconnected){j.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(Me.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new Bi.DataConnection(n,this,r);return this._addConnection(n,i),i},e.prototype.call=function(n,r,i){if(i===void 0&&(i={}),this.disconnected){j.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(Me.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){j.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var o=new Ii.MediaConnection(n,this,Gn(Gn({},i),{_stream:r}));return this._addConnection(n,o),o},e.prototype._addConnection=function(n,r){j.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(n)),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)},e.prototype._removeConnection=function(n){var r=this._connections.get(n.peer);if(r){var i=r.indexOf(n);i!==-1&&r.splice(i,1)}this._lostMessages.delete(n.connectionId)},e.prototype.getConnection=function(n,r){var i,o,l=this._connections.get(n);if(!l)return null;try{for(var c=kn(l),s=c.next();!s.done;s=c.next()){var u=s.value;if(u.connectionId===r)return u}}catch(d){i={error:d}}finally{try{s&&!s.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return null},e.prototype._delayedAbort=function(n,r){var i=this;setTimeout(function(){i._abort(n,r)},0)},e.prototype._abort=function(n,r){j.default.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(n,r){j.default.error("Error:",r);var i;typeof r=="string"?i=new Error(r):i=r,i.type=n,this.emit("error",i)},e.prototype.destroy=function(){this.destroyed||(j.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},e.prototype._cleanup=function(){var n,r;try{for(var i=kn(this._connections.keys()),o=i.next();!o.done;o=i.next()){var l=o.value;this._cleanupPeer(l),this._connections.delete(l)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(n){var r,i,o=this._connections.get(n);if(!!o)try{for(var l=kn(o),c=l.next();!c.done;c=l.next()){var s=c.value;s.close()}}catch(u){r={error:u}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var n=this.id;j.default.log("Disconnect peer with ID:".concat(n)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)j.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)j.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},e.prototype.listAllPeers=function(n){var r=this;n===void 0&&(n=function(i){}),this._api.listAllPeers().then(function(i){return n(i)}).catch(function(i){return r._abort(Me.ServerError,i)})},e.DEFAULT_KEY="peerjs",e}(rr.EventEmitter),Lp=Sl.Peer;class Hs{constructor(e){U(this,"eventHandlers",{});U(this,"connectionTimeout");U(this,"runningMachine",null);U(this,"peer",null);U(this,"ourPeerId",null);U(this,"onStateChangeCallback",e=>{});U(this,"xstateMachineLayout",tr({predictableActionArguments:!0,preserveActionOrder:!0,id:"DataConnection",initial:"Connecting",states:{Connecting:{entry:"onConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Reconnecting:{entry:"onReConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Connected:{entry:"onConnectedFunction",on:{ON_DISCONNECTED:{target:"Reconnecting"},ON_DESTROY:{target:"Destroyed"}}},Destroyed:{entry:"onDestoyedFunction",type:"final"}}},{actions:{onConnectingFunction:()=>{this.onConnecting()},onReConnectingFunction:()=>{this.onReConnecting()},onConnectedFunction:()=>{this.onConnected()},onDestoyedFunction:()=>{this.cleanup()}}}));this.currentState=this.xstateMachineLayout.config.initial,this.onStateChangeCallback=e}start(){this.runningMachine=bn(this.xstateMachineLayout,{devTools:gt(mn)}),this.runningMachine.onTransition(r=>{this.currentState=r.value,this.onStateChangeCallback(this.currentState)}),this.runningMachine.start(),this.ourPeerId=gt(qt),this.ourPeerId||(this.ourPeerId=ls(),localStorage.setItem("ourPeerId",this.ourPeerId),qt.set(this.ourPeerId));let e=localStorage.getItem("peerToken"),n=e?{...jr,token:e}:jr;this.peer=new Lp(this.ourPeerId,n),console.log("Our PeerToken:",this.peer.options.token),!e&&this.peer.options.token&&localStorage.setItem("peerToken",this.peer.options.token),this.eventHandlers.onOpen=()=>{this.sendEventToMachine("ON_CONNECTED"),we("OurPeer Open!")},this.peer.on("open",this.eventHandlers.onOpen),this.eventHandlers.onError=r=>{r.type!="peer-unavailable"&&(r.type=="unavailable-id"?(we("peer id "+this.ourPeerId+" already taken"),this.ourPeerId=ls(),qt.set(this.ourPeerId)):r.type=="webrtc"&&r.message.indexOf("No remoteDescription")==-1?we("Webrtc Error: "+r.message):console.log("!!!UNHANDLED!! OURPEER_ERROR:"+r.message+" | "+r.type),this.sendEventToMachine("ON_DESTROY"))},this.peer.on("error",this.eventHandlers.onError),this.eventHandlers.onClose=r=>{console.warn("!!UNHANDLED!! OURPEER_CLOSE:",r),this.sendEventToMachine("ON_DESTROY")},this.peer.on("close",this.eventHandlers.onClose),this.eventHandlers.onDisconnected=r=>{console.warn("!!UNHANDLED!! OURPEER_CLOSE:",r),this.sendEventToMachine("ON_DISCONNECTED")},this.peer.on("disconnected",this.eventHandlers.onDisconnected)}sendEventToMachine(e){this.runningMachine&&this.runningMachine.send(e)}onConnecting(){console.log("OnConnecting...."),this.connectionTimeout=setTimeout(()=>{this.sendEventToMachine("ON_DESTROY")},12e3)}onReConnecting(){console.log("OnReConnecting...."),this.peer.reconnect(),this.onConnecting()}onConnected(){clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0}cleanup(){clearTimeout(this.connectionTimeout),this.runningMachine.stop(),this.currentState="Destroyed",this.onStateChangeCallback(this.currentState),this.peer&&(this.peer.off("open",this.eventHandlers.onOpen),this.peer.off("error",this.eventHandlers.onError),this.peer.off("close",this.eventHandlers.onClose),this.peer.off("disconnected",this.eventHandlers.onDisconnected),this.peer.destroy(),this.peer=null)}}class xp{constructor(e,n,r,i){U(this,"rovPeerId",null);U(this,"ourPeerMachine",null);U(this,"trusted",!1);U(this,"done",!1);U(this,"dataConnections",[]);U(this,"mediaConnections",[]);U(this,"msgQueue",new dh);U(this,"connectedDataConnIndex",0);U(this,"overallDCState",null);U(this,"overallMCState",null);U(this,"onOverallStateChange",e=>{});U(this,"onMesssageRecivedCallback",e=>{});U(this,"reconnectFailureCount",0);this.rovPeerId=e,this.ourPeerMachine=n,this.onMesssageRecivedCallback=o=>{this.dataConnections.forEach(l=>{l.setLastRecivedMessageTime()}),r(o,this.rovPeerId)},this.onOverallStateChange=()=>{console.log("onOverallStateChangeCallback",i),i(this.overallDCState,this.overallMCState,this.rovPeerId)},console.log("Rov constructor",e,i)}start(){if(this.dataConnections.length==0){let e=new ri(this.ourPeerMachine.peer,this.rovPeerId,this.dcStateChange.bind(this),this.onMesssageRecivedCallback);this.dataConnections=[e],e.start()}if(this.mediaConnections.length==0){let e=new ii(this.ourPeerMachine.peer,this.rovPeerId,this.mcStateChange.bind(this));this.mediaConnections=[e],e.start(),this.sendMessage({action:zt.begin_video_stream})}}sendMsgDirectlyToRov(e){for(let n=0;n<this.dataConnections.length;n++){const r=(this.connectedDataConnIndex+n)%this.dataConnections.length;if(this.dataConnections[r].sendMessage(e.msg))return console.debug(`Msg sent to rov: ${this.rovPeerId}`,e.msg,e.onSendCallback),e.onSendCallback&&e.onSendCallback(e.msg),this.msgQueue.pop(),this.connectedDataConnIndex=r,!0;console.info('Failed to send "{}" to rov: {}',e.msg,this.rovPeerId)}return!1}emptyMsgQueue(){if(this.overallDCState!=V.connected)return;e:for(;!this.msgQueue.isEmpty();){let e=this.msgQueue.peak();if(!this.sendMsgDirectlyToRov(e))break e}}sendMessage(e,n,r=!1){typeof e!="string"&&(e=JSON.stringify(e));let i={msg:e,onSendCallback:n};r?this.sendMsgDirectlyToRov(i):(console.debug("Adding msg to queue:",e),this.msgQueue.push(i),setTimeout(this.emptyMsgQueue.bind(this),0))}stateChangeHandler(e,n,r){if(this[e]==null||this[e].length==0)return[-1,[]];let i=this[e].map(l=>l.currentState),o=0;console.log(e,i);for(let l=0;l<i.length;l++){const c=i[l];if(c==V.connected)o++,o>1&&(this[e][l].cleanup(),this[e].splice(l,1)),this.reconnectFailureCount=0;else if(c==V.reconnecting&&i.length<=1){let s=n();this[e].push(s),r(s)}else if(c=="Destroyed"){if(this.reconnectFailureCount++,this[e].splice(l,1),this.reconnectFailureCount>=5)return this.reconnectFailureCount=0,console.info("Rov "+e+" Too Many Failures, exiting..."),[0,[]];if(this[e].length===0){let s=n();return this[e]=[s],r(s),[-1,[]]}}}return console.log("Returning states"),[o,i]}dcStateChange(){if(this.done||this.dataConnections.length==0)return;let[e,n]=this.stateChangeHandler("dataConnections",()=>new ri(this.ourPeerMachine.peer,this.rovPeerId,this.dcStateChange.bind(this),this.onMesssageRecivedCallback.bind(this)),r=>{r.start()});if(e!=-1)if(console.debug("dc states:",n,e),e>0){if(this.overallDCState==V.connected)return;this.overallDCState=V.connected,this.onOverallStateChange(),this.emptyMsgQueue()}else if(n.indexOf(V.reconnecting)!=-1){if(this.overallDCState==V.reconnecting)return;this.overallDCState=V.reconnecting,this.onOverallStateChange()}else if(n.indexOf(V.connecting)!=-1){if(this.overallDCState==V.connecting)return;this.overallDCState=V.connecting,this.onOverallStateChange()}else this.overallDCState!=V.disconnected&&(this.overallDCState=V.disconnected,this.onOverallStateChange(),this.overallMCState!=V.disconnected&&this.mediaConnections.forEach(r=>{r.cleanup()}))}mcStateChange(){if(this.done||this.dataConnections.length==0)return;let[e,n]=this.stateChangeHandler("mediaConnections",()=>new ii(this.ourPeerMachine.peer,this.rovPeerId,this.mcStateChange.bind(this)),r=>{r.start(),this.sendMessage({action:zt.begin_video_stream})});if(e!=-1)if(console.debug("mc states:",n,e),e>0){if(this.overallMCState==V.connected)return;this.overallMCState=V.connected,this.onOverallStateChange()}else if(n.indexOf(V.reconnecting)!=-1){if(this.overallMCState==V.reconnecting)return;this.overallMCState=V.reconnecting,this.onOverallStateChange()}else if(n.indexOf(V.connecting)!=-1){if(this.overallMCState==V.connecting)return;this.overallMCState=V.connecting,this.onOverallStateChange()}else this.overallMCState!=V.disconnected&&(this.overallMCState=V.disconnected,this.onOverallStateChange())}switchOutThisPeer(e){this.ourPeerMachine=e;let n=new ri(this.ourPeerMachine.peer,this.rovPeerId,this.dcStateChange.bind(this),this.onMesssageRecivedCallback);this.dataConnections=[...this.dataConnections,n],n.start();let r=new ii(this.ourPeerMachine.peer,this.rovPeerId,this.mcStateChange.bind(this));this.mediaConnections=[...this.mediaConnections,r],r.start(),this.sendMessage({action:zt.begin_video_stream})}cleanup(){console.info("Cleaning up RovConnection: ",this.rovPeerId),this.done=!0,this.dataConnections.forEach(e=>{e.cleanup()}),this.mediaConnections.forEach(e=>{e.cleanup()})}}class Fp{constructor(e){U(this,"ROVs",{});U(this,"currentTargetRovId",zr(gt(Ct)));U(this,"ourPeerMachines",[]);U(this,"overallPeerServerState",V.disconnected);U(this,"reconnectFailureCount",0);U(this,"onMessageRecivedCallback",e=>{console.debug("msg recived:"+e)});this.onMessageRecivedCallback=e}start(){if(this.ourPeerMachines.length==0){let e=new Hs(this.peerConnStateChange.bind(this));this.ourPeerMachines=[e],e.start()}}getThisPeerId(){return gt(qt)}peerConnStateChange(){let e=this.ourPeerMachines.map(r=>r.currentState);console.log("PeerStatesChange: ",e);let n=0;for(let r=0;r<e.length;r++){const i=e[r];let o=null;if(i==V.connected?(n++,n>1&&(this.ourPeerMachines[r].cleanup(),this.ourPeerMachines.splice(r,1)),this.reconnectFailureCount=0):i==V.reconnecting&&e.length<=1?(o=new Hs(this.peerConnStateChange.bind(this)),this.ourPeerMachines=[...this.ourPeerMachines,o]):i=="Destroyed"&&(this.reconnectFailureCount++,this.ourPeerMachines.splice(r,1),this.reconnectFailureCount>=3?(this.reconnectFailureCount=0,we("Our Peer has Too Many Failures, try reloading the page...")):this.ourPeerMachines.length===0&&this.start()),o){o.start();for(const l in this.ROVs){const c=this.ROVs[l].switchOutThisPeer;c&&c(o)}}}if(n!=-1)if(console.debug("peer states:",e,n),n>0){if(this.overallPeerServerState==V.connected)return;jt.set(V.connected)}else if(e.indexOf(V.reconnecting)!=-1){if(this.overallPeerServerState==V.reconnecting)return;jt.set(V.reconnecting)}else if(e.indexOf(V.connecting)!=-1){if(this.overallPeerServerState==V.connecting)return;jt.set(V.connecting)}else this.overallPeerServerState!=V.disconnected&&jt.set(V.disconnected)}rovConnStateChange(e,n,r){console.info(r+" Conn State: dc:"+e+" mc:"+n),r==this.currentTargetRovId&&(console.info("Current Rov "+r+" state changed"),Kn.set(e),qo.set(n))}messageRecived(e,n){n===this.currentTargetRovId&&this.onMessageRecivedCallback(e)}connectToRov(e){this.ROVs[e]||(console.log("new Rov: ",e,this.rovConnStateChange.bind(this)),this.ROVs[e]=new xp(e,this.ourPeerMachines[0],this.messageRecived.bind(this),this.rovConnStateChange.bind(this))),this.ROVs[e].start()}connectToCurrentTargetRov(){this.currentTargetRovId=zr(gt(Ct)),this.connectToRov(this.currentTargetRovId)}disconnectFromRov(e){if(e==this.currentTargetRovId&&(Kn.set(V.disconnected),qo.set(V.disconnected)),this.ROVs[e]===void 0){console.warn("Tried to disconnect from a rov that is not connected: ",e);return}this.ROVs[e].cleanup(),delete this.ROVs[e]}disconnectFromCurrentRov(){this.disconnectFromRov(this.currentTargetRovId)}sendMessageToRov(e,n,r=!1){this.ROVs[n].sendMessage(e,null,r)}sendMessageToCurrentRov(e,n=!1){this.sendMessageToRov(e,this.currentTargetRovId,n)}cleanup(){for(const e in this.ROVs)this.disconnectFromRov(e);for(const e of this.ourPeerMachines)e.cleanup();this.ourPeerMachines=[]}}const Np=t=>{function e(i){r&&r.send(i)}const n=tr({context:{peerServerConfig:{},rovIpAddr:null},predictableActionArguments:!0,preserveActionOrder:!0,id:"siteInit",initial:"Checking_Internet_Access",states:{Checking_Internet_Access:{entry:"checkInternetAvailable",on:{URL_IS_ROV_IP:{actions:["setLocalPeerServerConfig","showHttpGamepadSupportDisabledAlert"],target:"#siteInit.Site_Ready"},INTERNET_AVAILABLE:{actions:"setCloudPeerServerConfig",target:"#siteInit.Site_Ready"},INTERNET_OFFLINE:{actions:["showIpScanButton","hideLoadingUi"],target:"#siteInit.Waiting_For_User_Scan_Button_Press"}}},Waiting_For_User_Scan_Button_Press:{entry:"setupWaitForUserScanButtonPress",on:{SCAN_BUTTON_CLICKED:{actions:["showIpScanningUi","hideIpScanButton"],target:"#siteInit.Scanning_For_ROV_IP"}}},Scanning_For_ROV_IP:{entry:"scanForRovIP",on:{ROV_IP_FOUND:{actions:"setRovIpAddr",target:"#siteInit.Redirect_Browser_To_ROV_IP"},IP_SCANNING_ERROR:{actions:["showIpScanButton","hideLoadingUi"],target:"#siteInit.Waiting_For_User_Scan_Button_Press"}}},Redirect_Browser_To_ROV_IP:{entry:"redirectBrowserToRovIp"},Site_Ready:{entry:"siteReady",type:"final"}}},{actions:{setCloudPeerServerConfig:()=>{Uo.set(jr)},setLocalPeerServerConfig:()=>{Uo.set(zd)},setRovIpAddr:(i,o)=>{Hd.set(o.data)},showIpScanButton:()=>{we("Click scan to find the ROV locally."),we("No internet connection."),ps()},hideIpScanButton:()=>{Ah()},hideLoadingUi:()=>{rt("ip-scan"),rt("internet-check")},showIpScanningUi:()=>{Ht("ip-scan")},redirectBrowserToRovIp:(i,o)=>{window.location.href=`http://${o.data}`},siteReady:()=>{t("SITE_READY")},checkInternetAvailable:()=>{Ht("internet-check");const i=jr;hh((i.secure?"https://":"http://")+i.host+":"+i.port).then(o=>{if(o)e("INTERNET_AVAILABLE");else{const l=window.location.host.split(".");l.length==4&&!isNaN(Number(l[3]))||l.length==2&&l[1]=="local"?e("URL_IS_ROV_IP"):e("INTERNET_OFFLINE")}})},setupWaitForUserScanButtonPress:()=>{ps();const i=()=>{e("SCAN_BUTTON_CLICKED")},o=document.getElementById("scan_for_ip_btn");return o.addEventListener("click",i),()=>{o.removeEventListener("click",i)}},scanForRovIP:()=>{Ht("ip-scan")}},guards:{}}),r=bn(n,{devTools:gt(mn)}).start();return r};class Gp{constructor(){this.gpadButtonHighlightElements=qd.map(e=>document.getElementById(e+"_highlight")),this.gamepadHelpTooltip=document.querySelector("#gamepad-help-tooltip"),this.gamepadHelpTooltipText=document.querySelector("#gamepad-help-text"),this.defaultTooltipTarget=document.querySelector("#select_button"),this.gamepadConnectNotice=document.getElementById("gamepad-connect-notice"),this.tooManyGamepadsNotice=document.getElementById("too-many-gamepads-notice"),this.currentPopperTarget=this.defaultTooltipTarget,this.touchingButtonsCount=0,this.someAxiesNotCentered=!1,this.someButtonsPressed=!1,this.gamepadContainer=document.getElementById("gamepad-container"),this.gamepadHelpVisible=!1}showExtraniousGamepadsConnected(e){this.tooManyGamepadsNotice.style.display=e?"block":"none"}showGamepadConnected(e){e?this.gamepadContainer.classList.add("gamepad-connected"):this.gamepadContainer.classList.remove("gamepad-connected")}showNoGamepads(e){this.gamepadConnectNotice.style.display=e?"block":"none"}toggleGamepadHelpScreen(){this.gamepadHelpVisible=!this.gamepadHelpVisible,this.gamepadHelpVisible?(document.body.classList.add("gamepad-help-open"),document.body.classList.remove("driving-now")):document.body.classList.remove("gamepad-help-open")}showGamepadStatus(e){}showNotSupported(){alert("Gamepad interface not supported, please use a more modern browser.")}showHelpTooltip(e,n){}handleGamepadVisualFeedbackAxisEvents(e,n){e.forEach(i=>{var o=i.thumbStickElement,l=i.axisRange,c=i.xValue||0,s=i.yValue||0;o.style.transform=`rotateY(${-c*30}deg) rotateX(${s*30}deg) translate(${c*l}px,${s*l}px)`,this.gamepadHelpVisible&&(i.upIndicatorElement&&i.downIndicatorElement&&(Math.abs(c)<n?s<-n?(i.upIndicatorElement.style.opacity=Math.max(-s,0),i.downIndicatorElement.style.opacity=0,this.showHelpTooltip(i.upIndicatorElement,i.upHelpText||"None")):s>n?(i.upIndicatorElement.style.opacity=0,i.downIndicatorElement.style.opacity=Math.max(s,0),this.showHelpTooltip(i.downIndicatorElement,i.downHelpText||"None")):(i.upIndicatorElement.style.opacity=0,i.downIndicatorElement.style.opacity=0):(i.upIndicatorElement.style.opacity=0,i.downIndicatorElement.style.opacity=0)),i.leftIndicatorElement&&i.rightIndicatorElement&&(Math.abs(s)<n?c<-n?(i.leftIndicatorElement.style.opacity=Math.max(-c,0),i.rightIndicatorElement.style.opacity=0,this.showHelpTooltip(i.leftIndicatorElement,i.leftHelpText||"None")):c>n?(i.leftIndicatorElement.style.opacity=0,i.rightIndicatorElement.style.opacity=Math.max(c,0),this.showHelpTooltip(i.rightIndicatorElement,i.rightHelpText||"None")):(i.leftIndicatorElement.style.opacity=0,i.rightIndicatorElement.style.opacity=0):(i.leftIndicatorElement.style.opacity=0,i.rightIndicatorElement.style.opacity=0)))});let r=e.reduce((i,o)=>i+Math.abs(o.xValue)+Math.abs(o.yValue)>.05?1:0,0);!this.gamepadHelpVisible&&r>0&&this.someAxiesNotCentered==!1?(this.someAxiesNotCentered=!0,this.setGamepadVisability()):this.someAxiesNotCentered==!0&&r==0&&(this.someAxiesNotCentered=!1,this.setGamepadVisability())}setGamepadVisability(){!this.gamepadHelpVisible&&(this.someAxiesNotCentered||this.someButtonsPressed)?document.body.classList.add("driving-now"):document.body.classList.remove("driving-now")}setGamepadButtonClass(e,n){var r=n[e],i=this.gpadButtonHighlightElements[e];!r||!i||(r.touched?i.classList.add(jo):i.classList.remove(jo),r.pressed?i.classList.add(Vo):i.classList.remove(Vo))}handleGamepadVisualFeedbackButtonEvents(e){let n=0;for(var r=0;r<e.length;r++)this.setGamepadButtonClass(r,e),n+=e[r].pressed?1:0;!this.gamepadHelpVisible&&n>0&&this.someButtonsPressed==!1?(this.someButtonsPressed=!0,this.setGamepadVisability()):this.someButtonsPressed==!0&&(this.someButtonsPressed=!1,this.setGamepadVisability())}handleGamepadVisualFeedbackVariableTriggerButtonEvents(e,n){for(var r=0;r<n.length;r++){const o=n[r],l=o.buttonIndex;this.setGamepadButtonClass(l,e);var i=e[l]?e[l].value:0;o.buttonElement.style.transform=`rotateX(${i*30}deg) translateY(${i*o.axisRange}px)`}}getButtonHighlightElements(){return console.log("getButtonHighlightElements",this.gpadButtonHighlightElements),this.gpadButtonHighlightElements}}var le=(t=>(t.up="up",t.down="down",t.left="left",t.right="right",t))(le||{}),Pt=(t=>(t.onOff="onOff",t.variable="variable",t))(Pt||{}),sn=(t=>(t.real="real",t.emulated="emulated",t.overlay="overlay",t))(sn||{});function jp(t,e,n){const r=Math.sqrt(t*t+e*e);return r>n?{x:t/r,y:e/r}:{x:t/n,y:e/n}}function Vp(t){if(t instanceof SVGGraphicsElement){t.getAttribute("transform")&&console.warn("Setting Transform origin on an element that already has a transform attribute. This may break the transform!",t);const e=t.getBBox();t.style.transformOrigin=`${e.x+e.width/2}px ${e.y+e.height/2}px`}else if(t instanceof HTMLElement){console.warn("Setting Transform origin on an element that is not an SVG element. This may break the transform!",t);const e=t.getBoundingClientRect();t.style.transformOrigin=`${e.width/2}px ${e.height/2}px`}}var Up=Object.defineProperty,zp=(t,e,n)=>e in t?Up(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kt=(t,e,n)=>(zp(t,typeof e!="symbol"?e+"":e,n),n);const Rl=18,Pl=4,wr=class{constructor(t){if(kt(this,"getNativeGamepads",()=>[]),kt(this,"buttonPressThreshold",.1),kt(this,"realGpadToPatchedIndexMap",[]),kt(this,"patchedGpadToRealIndexMap",[]),kt(this,"emulatedGamepads",[]),kt(this,"emulatedGamepadsMetadata",[]),kt(this,"undoEventPatch",()=>{}),this.buttonPressThreshold=t||this.buttonPressThreshold,wr.instanceRunning)throw new Error("Only one GamepadEmulator instance may exist at a time!");wr.instanceRunning=!0,this.undoEventPatch=this.monkeyPatchGamepadEvents(),this.monkeyPatchGetGamepads()}AddEmulatedGamepad(t,e,n=Rl,r=Pl){if((t===-1||!t&&t!==0)&&(t=this.nextEmptyEGpadIndex(e)),this.emulatedGamepads[t])return!1;const i={emulation:sn.emulated,connected:!0,timestamp:Math.floor(Date.now()/1e3),displayId:"Emulated Gamepad "+t,id:"Emulated Gamepad "+t+" (Xinput STANDARD GAMEPAD)",mapping:"standard",index:t,buttons:new Array(n).fill({pressed:!1,value:0,touched:!1},0,n),axes:new Array(r).fill(0,0,r),hapticActuators:[]};this.emulatedGamepads[t]=i,this.emulatedGamepadsMetadata[t]={overlayMode:e};const o=new Event("gamepadconnected");return o.gamepad=i,window.dispatchEvent(o),i}RemoveEmulatedGamepad(t){this.ClearDisplayButtonEventListeners(t),this.ClearDisplayJoystickEventListeners(t);var e=this.emulatedGamepads[t];if(e){delete this.emulatedGamepads[t],delete this.emulatedGamepadsMetadata[t];const n={...e,connected:!1,timestamp:Math.floor(Date.now()/1e3)},r=new Event("gamepaddisconnected");r.gamepad=n,window.dispatchEvent(r)}else console.warn("Error: removing emulated gamepad. No emulated gamepad exists at index "+t)}PressButton(t,e,n,r){if(this.emulatedGamepads[t]===void 0)throw new Error("Error: PressButton() - no emulated gamepad at index "+t+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");var i=n>this.buttonPressThreshold;this.emulatedGamepads[t].buttons[e]={pressed:i,value:n||0,touched:i||r||!1}}MoveAxis(t,e,n){if(!this.emulatedGamepads[t])throw new Error("Error: MoveAxis() - no emulated gamepad at index "+t+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");this.emulatedGamepads[t].axes[e]=n}AddDisplayButtonEventListeners(t,e){if(!this.emulatedGamepads[t])throw new Error("Error: AddDisplayJoystickEventListeners() - no emulated gamepad at index "+t+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");let n=[];for(var r=0;r<e.length;r++){const i=e[r],o=i.buttonIndex,l=i.tapTarget;if(!l){console.warn("AddDisplayButtonEventListeners() - no tap target in button config "+o+", skipping...");continue}const c=a=>{a.changedTouches[0].target==l&&a.preventDefault()};window.addEventListener("touchstart",c,{passive:!1});const s=a=>{const f=a.buttons==1?1:0;(!i.lockTargetWhilePressed||f==0)&&this.PressButton(t,o,f,!0)};l.addEventListener("pointerenter",s);const u=a=>{const f=a.buttons==1?1:0;(!i.lockTargetWhilePressed||f==0)&&this.PressButton(t,o,0,!1)};l.addEventListener("pointerleave",u);const d=a=>{};if(l.addEventListener("pointercancel",d),i.type==Pt.onOff){const a=h=>{h.preventDefault(),this.PressButton(t,o,1,!0),i.lockTargetWhilePressed?l.setPointerCapture(h.pointerId):l.releasePointerCapture(h.pointerId),console.log("on/off pointer down",l.hasPointerCapture(h.pointerId))};l.addEventListener("pointerdown",a);const f=()=>{this.PressButton(t,o,0,!0)};l.addEventListener("pointerup",f),n.push(function(){window.removeEventListener("touchstart",c),l.removeEventListener("pointerenter",s),l.removeEventListener("pointerleave",u),l.removeEventListener("pointerdown",a),l.removeEventListener("pointerup",f),l.removeEventListener("pointercancel",d)})}else if(i.type==Pt.variable){const a={...i},f=this.AddDragControlListener(a,(h,p,m)=>{let g=h?this.buttonPressThreshold+1e-5:0;g+=i.directions[le.left]||i.directions[le.right]?Math.abs(p):0,g+=i.directions[le.up]||i.directions[le.down]?Math.abs(m):0,this.PressButton(t,i.buttonIndex,Math.min(g,1),h)});n.push(function(){window.removeEventListener("touchstart",c),l.removeEventListener("pointerenter",s),l.removeEventListener("pointerleave",u),l.removeEventListener("pointercancel",d),f()})}}this.emulatedGamepadsMetadata[t].removeButtonListenersFunc=()=>{n.forEach(i=>i())}}AddDisplayJoystickEventListeners(t,e){if(!this.emulatedGamepads[t])throw new Error("Error: AddDisplayJoystickEventListeners() - no emulated gamepad at index "+t+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");let n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i.tapTarget==null){console.warn(`AddDisplayJoystickEventListeners() - no tap target in joystick config ${r}, skipping...`);continue}const o=this.AddDragControlListener(i,(l,c,s)=>{i.xAxisIndex!==void 0&&this.MoveAxis(t,i.xAxisIndex,c),i.yAxisIndex!==void 0&&this.MoveAxis(t,i.yAxisIndex,s)});n.push(o)}this.emulatedGamepadsMetadata[t].removeJoystickListenersFunc=()=>{n.forEach(r=>r())}}ClearDisplayButtonEventListeners(t){var e;this.emulatedGamepadsMetadata[t]&&((e=this.emulatedGamepadsMetadata[t])==null?void 0:e.removeButtonListenersFunc)&&this.emulatedGamepadsMetadata[t].removeButtonListenersFunc()}ClearDisplayJoystickEventListeners(t){var e;this.emulatedGamepadsMetadata[t]&&((e=this.emulatedGamepadsMetadata[t])==null?void 0:e.removeJoystickListenersFunc)&&this.emulatedGamepadsMetadata[t].removeJoystickListenersFunc()}AddDragControlListener(t,e){let n={startX:0,startY:0},r=-1;const i=c=>{var s=c.pointerId;if(r===s){const u=t.directions[le.left]?-1:0,d=t.directions[le.right]?1:0,a=t.directions[le.up]?-1:0,f=t.directions[le.down]?1:0,h=c.clientX-n.startX,p=c.clientY-n.startY;let{x:m,y:g}=jp(h,p,t.dragDistance);m=Math.max(Math.min(m,d),u),g=Math.max(Math.min(g,f),a),e(!0,m,g)}},o=c=>{r==c.pointerId&&(document.removeEventListener("pointermove",i,!1),document.removeEventListener("pointerup",o,!1),r=-1,e(!1,0,0))};t.tapTarget.addEventListener("pointerdown",c=>{c.preventDefault(),n.startX=c.clientX,n.startY=c.clientY,r=c.pointerId,t.lockTargetWhilePressed?t.tapTarget.setPointerCapture(c.pointerId):t.tapTarget.releasePointerCapture(c.pointerId),console.log("stick pointer down",t.tapTarget.hasPointerCapture(c.pointerId)),e(!0,0,0),document.addEventListener("pointermove",i,!1),document.addEventListener("pointerup",o,!1)});const l=c=>{c.changedTouches[0].target==t.tapTarget&&c.preventDefault()};return window.addEventListener("touchstart",l,{passive:!1}),function(){window.removeEventListener("touchstart",l),t.tapTarget.removeEventListener("pointerdown",i)}}cloneGamepad(t){if(!t)return t;const e=t.axes?t.axes.length:0,n=t.buttons?t.buttons.length:0,r={};for(let i in t)if(i==="axes"){const o=new Array(e);for(let l=0;l<e;l++)o[l]=Number(t.axes[l]);Object.defineProperty(r,"axes",{value:o,enumerable:!0})}else if(i==="buttons"){const o=new Array(n);for(let l=0;l<n;l++){const c=t.buttons[l];if(c==null)o[l]=c;else{const s=c.pressed,u=c.value,d=c.touched||!1;o[l]={pressed:s,value:u,touched:d}}}Object.defineProperty(r,"buttons",{value:o,enumerable:!0})}else Object.defineProperty(r,i,{get:()=>t[i],configurable:!0,enumerable:!0});return r.emulation||(r.emulation=sn.real),r}nextEmptyEGpadIndex(t){let e=0;if(t)do{if(!this.emulatedGamepads[e])break;e++}while(e<this.emulatedGamepads.length);else{const n=Math.max(this.emulatedGamepads.length,this.patchedGpadToRealIndexMap.length);do{if(!this.emulatedGamepads[e]&&this.patchedGpadToRealIndexMap[e]==null)break;console.log("nextEmptyEGpadIndex",e,!this.emulatedGamepads[e],this.patchedGpadToRealIndexMap[e]==null),e++}while(e<n)}return e}nextEmptyRealGpadIndex(t){let e=t;const n=Math.max(this.emulatedGamepads.length,this.patchedGpadToRealIndexMap.length);do{const r=this.emulatedGamepadsMetadata[e],i=this.realGpadToPatchedIndexMap[e]==null&&this.patchedGpadToRealIndexMap[e]==null;if(!!r&&r.overlayMode||!r&&i)break;e++}while(e<n);return e}monkeyPatchGamepadEvents(){let t,e,n,r;window.hasOwnProperty("ongamepadconnected")&&(t=Object.getOwnPropertyDescriptor(window,"ongamepadconnected"),n=window.ongamepadconnected,window.ongamepadconnected=null,Object.defineProperty(window,"ongamepadconnected",{get:()=>function(l){},set:l=>{n=l},configurable:!0})),window.hasOwnProperty("ongamepaddisconnected")&&(e=Object.getOwnPropertyDescriptor(window,"ongamepaddisconnected"),r=window.ongamepaddisconnected,window.ongamepaddisconnected=null,Object.defineProperty(window,"ongamepaddisconnected",{get:()=>function(l){},set:l=>{n=l},configurable:!0}));const i=l=>{const c=l.gamepad;if(c&&c.emulation===void 0){l.stopImmediatePropagation();const s=this.cloneGamepad(l.gamepad),u=s.index,d=this.nextEmptyRealGpadIndex(u);this.realGpadToPatchedIndexMap[u]=d,this.patchedGpadToRealIndexMap[d]=u,Object.defineProperty(s,"index",{get:()=>d}),Object.defineProperty(s,"emulation",{get:()=>sn.real}),console.log(`real gamepad connected ${s.id} (${u}>${d})`,this.realGpadToPatchedIndexMap,this.emulatedGamepads,this.emulatedGamepadsMetadata),l=new Event("gamepadconnected"),l.gamepad=s,window.dispatchEvent(l)}console.log("windowOngamepadconnected",n),n&&n.call(window,l)};window.addEventListener("gamepadconnected",i);const o=l=>{const c=l.gamepad;if(c&&c.emulation===void 0){l.stopImmediatePropagation();const s=this.cloneGamepad(l.gamepad),u=this.realGpadToPatchedIndexMap[s.index]||s.index;Object.defineProperty(s,"index",{get:()=>u}),delete this.realGpadToPatchedIndexMap[s.index],delete this.patchedGpadToRealIndexMap[u],l=new Event("gamepaddisconnected"),l.gamepad=s,window.dispatchEvent(l)}r&&r.call(window,l)};return window.addEventListener("gamepaddisconnected",o),function(){window.removeEventListener("gamepadconnected",i),window.hasOwnProperty("ongamepadconnected")&&(Object.defineProperty(window,"ongamepadconnected",t),window.ongamepadconnected=n),window.removeEventListener("gamepaddisconnected",o),window.hasOwnProperty("ongamepaddisconnected")&&(Object.defineProperty(window,"ongamepaddisconnected",e),window.ongamepaddisconnected=r)}}monkeyPatchGetGamepads(){const t=this;let e=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads||navigator.msGetGamepads;e&&(this.getNativeGamepads=e),navigator.getGamepads=function(){let n=[],r=e!=null?t.getNativeGamepads.apply(navigator):[];for(let o=0;o<r.length;o++){const l=r[o];if(!l)continue;let c=t.cloneGamepad(l),s=t.realGpadToPatchedIndexMap[c.index]||c.index;Object.defineProperty(c,"index",{get:()=>s}),n[s]=c}let i=t.emulatedGamepads;for(let o=0;o<i.length;o++){let l=n[o],c=i[o];if(c&&l){l.emulation=sn.overlay;let s=Math.max(l.buttons.length,c.buttons.length);for(let d=0;d<s;d++){const a=c.buttons[d]||{touched:!1,pressed:!1,value:0},f=l.buttons[d]||{touched:!1,pressed:!1,value:0};n[o].buttons[d]={touched:a.touched||f.touched||!1,pressed:a.pressed||f.pressed||!1,value:Math.max(a.value,f.value)||0}}let u=Math.max(c.axes.length,l.axes.length);for(let d=0;d<u;d++){const a=c.axes[d]||0,f=l.axes[d]||0;n[o].axes[d]=Math.abs(a||0)>Math.abs(f||0)?a||0:f||0}}else c&&(c.emulation=sn.emulated,c.timestamp=Math.floor(Date.now()/1e3),n[o]=t.cloneGamepad(c))}return n}}cleanup(){for(let t=0;t<this.emulatedGamepads.length;t++)this.ClearDisplayButtonEventListeners(t),this.ClearDisplayJoystickEventListeners(t);this.emulatedGamepads=[],this.undoEventPatch(),navigator.getGamepads=this.getNativeGamepads,wr.instanceRunning=!1}};let Ol=wr;kt(Ol,"instanceRunning",!1);var qp=Object.defineProperty,Hp=(t,e,n)=>e in t?qp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,St=(t,e,n)=>(Hp(t,typeof e!="symbol"?e+"":e,n),n);class Dl{constructor(e){St(this,"updateDelay"),St(this,"axisDeadZone"),St(this,"buttonConfigs"),St(this,"currentStateOfGamepads"),St(this,"gamepadConnectListeners"),St(this,"gamepadDisconnectListeners"),St(this,"gamepadButtonChangeListeners"),St(this,"gamepadAxisChangeListeners"),this.updateDelay=e.updateDelay||0,this.axisDeadZone=e.axisDeadZone||0,this.buttonConfigs=e.buttonConfigs||[],this.currentStateOfGamepads=[],this.gamepadConnectListeners=[],this.gamepadDisconnectListeners=[],this.gamepadButtonChangeListeners=[],this.gamepadAxisChangeListeners=[],navigator.gamepadInputEmulation="gamepad",window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,navigator.getGamepads=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads||navigator.msGetGamepads,this.gamepadApiSupported()&&this.tickLoop()}setButtonsConfig(e){this.buttonConfigs=e}onGamepadConnect(e){return this.gamepadConnectListeners.push(e),window.addEventListener("gamepadconnected",e,!0),e}offGamepadConnect(e){this.gamepadConnectListeners=this.gamepadConnectListeners.filter(n=>n!==e),window.removeEventListener("gamepadconnected",e,!0)}onGamepadDisconnect(e){return this.gamepadDisconnectListeners.push(e),window.addEventListener("gamepaddisconnected",e,!0),e}offGamepadDisconnect(e){this.gamepadDisconnectListeners=this.gamepadDisconnectListeners.filter(n=>n!==e),window.removeEventListener("gamepaddisconnected",e,!0)}onGamepadAxisChange(e){return this.gamepadAxisChangeListeners.push(e),e}offGamepadAxisChange(e){this.gamepadAxisChangeListeners=this.gamepadAxisChangeListeners.filter(n=>n!==e)}onGamepadButtonChange(e){return this.gamepadButtonChangeListeners.push(e),e}offGamepadButtonChange(e){this.gamepadButtonChangeListeners=this.gamepadButtonChangeListeners.filter(n=>n!==e)}gamepadApiSupported(){return!!navigator.getGamepads&&!!navigator.getGamepads()}getCurrentGamepadStates(e=!1){return e&&this.checkForGamepadChanges(),this.currentStateOfGamepads}tickLoop(){this.checkForGamepadChanges(),this.updateDelay==0?requestAnimationFrame(this.tickLoop.bind(this)):setTimeout(()=>{requestAnimationFrame(this.tickLoop.bind(this))},this.updateDelay)}checkForGamepadChanges(){let e=navigator.getGamepads();for(var n=0;n<e.length;n++){let r=e[n];!r||(this.currentStateOfGamepads[n]||(this.currentStateOfGamepads[n]=r),this.checkForAxisChanges(n,r),this.checkForButtonChanges(n,r),this.currentStateOfGamepads[n]=r)}}checkForAxisChanges(e,n){let r=n.axes;if(r.length==0)return;let i=this.currentStateOfGamepads[e].axes||[],o=[],l,c=!1;for(l=0;l<r.length;l++){let s=r[l]||0,u=i[l]||0;if(s!=u){if(Math.abs(s)<this.axisDeadZone&&Math.abs(u)<this.axisDeadZone)continue;o[l]=!0,c=!0}else o[l]=!1}c&&this.gamepadAxisChangeListeners.forEach(s=>s(e,n,o))}checkForButtonChanges(e,n){let r=n.buttons;if(r.length==0)return;const i=this.currentStateOfGamepads[e].buttons||r;let o=[],l,c=!1;for(l=0;l<r.length;l++){let s=!1;const u=r[l]||{pressed:!1,value:0,touched:!1},d=i[l]||{pressed:!1,value:0,touched:!1},a=this.buttonConfigs[l]||{},f={};u.touched&&!d.touched?(f.touchDown=!0,s=!0):!u.touched&&d.touched&&(f.touchUp=!0,s=!0),u.pressed&&!d.pressed?(f.pressed=!0,s=!0):!u.pressed&&d.pressed&&(f.released=!0,s=!0),a.fireWhileHolding&&u.pressed&&d.pressed&&(f.heldDown=!0,s=!0),u.value!=d.value&&(f.valueChanged=!0,s=!0),s?(c=!0,o[l]=f):o[l]=!1}c&&this.gamepadButtonChangeListeners.forEach(s=>s(e,n,o))}}var Wp=Object.defineProperty,Xp=(t,e,n)=>e in t?Wp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ft=(t,e,n)=>(Xp(t,typeof e!="symbol"?e+"":e,n),n);class Qp{constructor(e,n){Ft(this,"config"),Ft(this,"apiWrapper"),Ft(this,"btnChangeListener"),Ft(this,"axisChangeListener"),Ft(this,"DefaultJoystickDisplayFunction",(r,i,o)=>{const l=r.movementRange;if(r.joystickElement.style.transform=`translate(${i*l}px,${o*l}px)`,r.highlights&&this.config.moveDirectionHighlightClass){const c=r.highlights[le.up],s=r.highlights[le.down],u=r.highlights[le.left],d=r.highlights[le.right];c&&o<-.1?c.classList.add(this.config.moveDirectionHighlightClass||""):c&&c.classList.remove(this.config.moveDirectionHighlightClass||""),s&&o>.1?s.classList.add(this.config.moveDirectionHighlightClass||""):s&&s.classList.remove(this.config.moveDirectionHighlightClass||""),u&&i<-.1?u.classList.add(this.config.moveDirectionHighlightClass||""):u&&u.classList.remove(this.config.moveDirectionHighlightClass||""),d&&i>.1?d.classList.add(this.config.moveDirectionHighlightClass||""):d&&d.classList.remove(this.config.moveDirectionHighlightClass||"")}}),Ft(this,"DefaultButtonDisplayFunction",(r,i,o,l,c,s)=>{const u=r.highlight;if(this.config.touchedHighlightClass&&u&&(c.touchDown?u.classList.add(this.config.touchedHighlightClass):c.touchUp&&u.classList.remove(this.config.touchedHighlightClass)),this.config.pressedHighlightClass&&u&&(c.pressed?u.classList.add(this.config.pressedHighlightClass):c.released&&u.classList.remove(this.config.pressedHighlightClass)),r.type==Pt.variable){const d=r.directionHighlight;if(this.config.moveDirectionHighlightClass&&d&&(c.pressed?d.classList.add(this.config.moveDirectionHighlightClass):c.released&&d.classList.remove(this.config.moveDirectionHighlightClass)),r.buttonElement){const a=r.direction==le.left||r.direction==le.right,f=r.direction==le.right||r.direction==le.down;r.buttonElement.style.transform=`translate${a?"X":"Y"}(${f?"":"-"}${i*r.movementRange}px)`}}}),Ft(this,"displayButtonChanges",(r,i,o)=>{if(r!=this.config.gamepadIndex)return;const l=this.config.buttons;for(let c=0;c<l.length;c++){const s=o[c];if(!s||Object.keys(s).length==0)continue;const u=l[c],d=i.buttons[c].value,a=i.buttons[c].touched,f=i.buttons[c].pressed;this.config.buttonDisplayFunction?this.config.buttonDisplayFunction(u,d,a,f,s,c):this.DefaultButtonDisplayFunction(u,d,a,f,s,c)}}),this.config=e,this.apiWrapper=n||new Dl({buttonConfigs:[],updateDelay:0}),this.btnChangeListener=this.apiWrapper.onGamepadButtonChange(this.displayButtonChanges.bind(this)),this.axisChangeListener=this.apiWrapper.onGamepadAxisChange(this.displayJoystickChanges.bind(this))}displayJoystickChanges(e,n,r){if(e!=this.config.gamepadIndex)return;const i=this.config.sticks;for(let o=0;o<i.length;o++){const l=i[o];if(l.xAxisIndex!==void 0&&r[l.xAxisIndex]||l.yAxisIndex!==void 0&&r[l.yAxisIndex]){const c=n.axes,s=l.xAxisIndex!==void 0&&c[l.xAxisIndex]||0,u=l.yAxisIndex!==void 0&&c[l.yAxisIndex]||0;this.config.joystickDisplayFunction?this.config.joystickDisplayFunction(l,s,u):this.DefaultJoystickDisplayFunction(l,s,u)}}}Cleanup(){this.apiWrapper.offGamepadButtonChange(this.btnChangeListener),this.apiWrapper.offGamepadAxisChange(this.axisChangeListener)}}const Ws=0,Xs=1,Qs=2,Ks=3,Ys=["button_1","button_2","button_3","button_4","shoulder_button_front_left","shoulder_button_front_right","shoulder_trigger_back_left","shoulder_trigger_back_right","select_button","start_button","stick_button_left","stick_button_right","d_pad_up","d_pad_down","d_pad_left","d_pad_right"];class Kp{constructor(e=250){this.gpadUi=new Gp,this.touchedGpadButtonCount=0,this.throttleDelay=e,this.gpadEmulator=new Ol(.1),this.gpadApiWrapper=new Dl({axisDeadZone:.05,updateDelay:0,buttonConfigs:[]}),this.gpadApiWrapper.gamepadApiSupported()||this.gpadUi.showNotSupported(),this.gpadApiWrapper.onGamepadConnect(this.gamepadConnectDisconnectHandler.bind(this)),this.gpadApiWrapper.onGamepadDisconnect(this.gamepadConnectDisconnectHandler.bind(this)),this.gpadApiWrapper.onGamepadAxisChange(this.handleAxisChange.bind(this)),this.gpadApiWrapper.onGamepadButtonChange(this.handleButtonChange.bind(this)),this.setupGamepadEvents(this.throttleDelay)}setupOnscreenGamepad(e){this.gpadEmulator.AddEmulatedGamepad(0,!0,Rl,Pl),this.setupGamepadDisplay(0,e),this.setupEmulatedGamepadInput(0,e),this.addEmulatedGamepadKeyboardBindings(0)}setupGamepadEvents(e){console.info("gamepad throttle delay: "+e),this.throttleDelay=e,this.clearExternalEventListenerCallbacks(),this.setupExternalEventListenerCallbacks((n,r)=>{if(n.buttons[12].pressed){let i=this.throttleDelay+1;this.setupGamepadEvents(i)}else if(n.buttons[13].pressed){let i=Math.max(this.throttleDelay-1,1);this.setupGamepadEvents(i)}else n.buttons[14].pressed?this.setupGamepadEvents(10):n.buttons[15].pressed&&this.setupGamepadEvents(100)},n=>{var{thrustVector:r,turnRate:i}=gh(n.axes);he.moveRov(r,i)})}gamepadConnectDisconnectHandler(){const e=navigator.getGamepads();var n=e.reduce((r,i)=>i?r+1:r,0);n!=0&&e[0].emulated&&(n-=1),this.gpadUi.showGamepadStatus(n),n>1&&console.log("WARNING: More than one gamepad connected!",e)}setupExternalEventListenerCallbacks(e,n){this.onButtonChange=cs(e,this.throttleDelay,{trailing:!0,leading:!0}),this.onAxisChange=cs(n,this.throttleDelay,{trailing:!0,leading:!0})}clearExternalEventListenerCallbacks(){this.onButtonChange=null,this.onAxisChange=null}handleButtonChange(e,n,r){if(!(e!=0||!n||!n.buttons)){(r[8]&&r[8].released||r[9]&&r[9].released)&&this.gpadUi.toggleGamepadHelpScreen();for(let i=0;i<r.length;i++)r[i]&&r[i].touchDown||n.buttons[i]&&n.buttons[i].touched}}handleAxisChange(e,n){if(e!=0||!n||!n.axes)return;const r=[{axisRange:14,xValue:n.axes[0]||0,yValue:n.axes[1]||0,thumbStickElement:document.getElementById("stick_left"),upIndicatorElement:document.getElementById("l_stick_up_direction_highlight"),downIndicatorElement:document.getElementById("l_stick_down_direction_highlight"),leftIndicatorElement:document.getElementById("l_stick_left_direction_highlight"),rightIndicatorElement:document.getElementById("l_stick_right_direction_highlight"),upHelpText:"Forward",downHelpText:"Back",leftHelpText:"Turn Left",rightHelpText:"Turn Right"},{axisRange:14,xValue:n.axes[2]||0,yValue:n.axes[3]||0,thumbStickElement:document.getElementById("stick_right"),upIndicatorElement:document.getElementById("r_stick_up_direction_highlight"),downIndicatorElement:document.getElementById("r_stick_down_direction_highlight"),leftIndicatorElement:document.getElementById("r_stick_left_direction_highlight"),rightIndicatorElement:document.getElementById("r_stick_right_direction_highlight"),upHelpText:"Up",downHelpText:"Down",leftHelpText:"Strafe Left",rightHelpText:"Strafe Right"}];this.gpadUi.handleGamepadVisualFeedbackAxisEvents(r,.4)}setupGamepadDisplay(e,n){n.querySelectorAll("#stick_right, #stick_left").forEach(o=>{Vp(o)});const r=Ys.map((o,l)=>(console.log(o),o.includes("trigger")?{type:Pt.variable,highlight:n.querySelector("#"+o+"_highlight"),buttonElement:n.querySelector("#"+o),direction:le.down,directionHighlight:n.querySelector("#"+o+"_direction_highlight"),movementRange:10}:{type:Pt.onOff,highlight:n.querySelector("#"+o+"_highlight")})),i=[{joystickElement:n.querySelector("#stick_left"),xAxisIndex:0,yAxisIndex:1,movementRange:10,highlights:{[le.up]:n.querySelector("#l_stick_up_direction_highlight"),[le.down]:n.querySelector("#l_stick_down_direction_highlight"),[le.left]:n.querySelector("#l_stick_left_direction_highlight"),[le.right]:n.querySelector("#l_stick_right_direction_highlight")}},{joystickElement:n.querySelector("#stick_right"),xAxisIndex:2,yAxisIndex:3,movementRange:10,highlights:{[le.up]:n.querySelector("#r_stick_up_direction_highlight"),[le.down]:n.querySelector("#r_stick_down_direction_highlight"),[le.left]:n.querySelector("#r_stick_left_direction_highlight"),[le.right]:n.querySelector("#r_stick_right_direction_highlight")}}];new Qp({gamepadIndex:e,pressedHighlightClass:"pressed",touchedHighlightClass:"touched",moveDirectionHighlightClass:"moved",buttons:r,sticks:i},this.gpadApiWrapper)}setupEmulatedGamepadInput(e,n){const r=Ys.map((o,l)=>o.includes("trigger")?{type:Pt.variable,buttonIndex:l,tapTarget:n.querySelector("#"+o+"_touch_target"),dragDistance:50,lockTargetWhilePressed:!0,directions:{[le.up]:!1,[le.down]:!0,[le.left]:!1,[le.right]:!1}}:{type:Pt.onOff,buttonIndex:l,lockTargetWhilePressed:o.includes("stick"),tapTarget:n.querySelector("#"+o+"_touch_target")});this.gpadEmulator.AddDisplayButtonEventListeners(e,r);const i=[{tapTarget:n.querySelector("#gamepad-joystick-touch-area-left"),dragDistance:30,xAxisIndex:0,yAxisIndex:1,lockTargetWhilePressed:!0,directions:{[le.up]:!0,[le.down]:!0,[le.left]:!0,[le.right]:!0}},{tapTarget:n.querySelector("#gamepad-joystick-touch-area-right"),dragDistance:30,xAxisIndex:2,yAxisIndex:3,lockTargetWhilePressed:!0,directions:{[le.up]:!0,[le.down]:!0,[le.left]:!0,[le.right]:!0}}];this.gpadEmulator.AddDisplayJoystickEventListeners(e,i)}addEmulatedGamepadKeyboardBindings(e){const n=(r,i)=>{const o=parseInt(i.key);i.key==="a"?this.gpadEmulator.MoveAxis(e,Ws,r?-1:0):i.key==="d"?this.gpadEmulator.MoveAxis(e,Ws,r?1:0):i.key==="w"?this.gpadEmulator.MoveAxis(e,Xs,r?-1:0):i.key==="s"?this.gpadEmulator.MoveAxis(e,Xs,r?1:0):i.key==="ArrowLeft"?(this.gpadEmulator.MoveAxis(e,Qs,r?-1:0),i.preventDefault()):i.key==="ArrowRight"?(this.gpadEmulator.MoveAxis(e,Qs,r?1:0),i.preventDefault()):i.key==="ArrowUp"?(this.gpadEmulator.MoveAxis(e,Ks,r?-1:0),i.preventDefault()):i.key==="ArrowDown"?(this.gpadEmulator.MoveAxis(e,Ks,r?1:0),i.preventDefault()):isNaN(o)?i.keyCode&&this.gpadEmulator.PressButton(e,i.keyCode-66+10,r?1:0,r):this.gpadEmulator.PressButton(e,o,r?1:0,r)};window.onkeydown=r=>n(!0,r),window.onkeyup=r=>n(!1,r)}}function Yp(t){let e,n,r,i,o,l,c,s,u,d,a;return n=new nh({}),i=new wu({props:{options:{reversed:!0,intro:{y:192},pausable:!0,classes:["toast-msg"]}}}),l=new Qh({}),s=new Uh({}),d=new $h({}),{c(){e=A("main"),se(n.$$.fragment),r=te(),se(i.$$.fragment),o=te(),se(l.$$.fragment),c=te(),se(s.$$.fragment),u=te(),se(d.$$.fragment)},m(f,h){T(f,e,h),ie(n,e,null),M(e,r),ie(i,e,null),M(e,o),ie(l,e,null),M(e,c),ie(s,e,null),M(e,u),ie(d,e,null),a=!0},p:ue,i(f){a||(S(n.$$.fragment,f),S(i.$$.fragment,f),S(l.$$.fragment,f),S(s.$$.fragment,f),S(d.$$.fragment,f),a=!0)},o(f){w(n.$$.fragment,f),w(i.$$.fragment,f),w(l.$$.fragment,f),w(s.$$.fragment,f),w(d.$$.fragment,f),a=!1},d(f){f&&E(e),oe(n),oe(i),oe(l),oe(s),oe(d)}}}function Jp(t,e,n){let r;Ne(t,Kn,o=>n(2,r=o)),mn.set(!!fh("debug")),Ct.set(parseInt(localStorage.getItem("rovPeerIdEndNumber")||"0")),qt.set(localStorage.getItem("ourPeerId")||null),qt.subscribe(o=>{localStorage.setItem("ourPeerId",o)}),Ee.gpadCtrl=new Kp(100);let i=null;return gt(mn)&&pu({iframe:!1}),vn(()=>{let o=!0;jt.subscribe(l=>{if(o){o=!1;return}console.log("peerServerConnState: ",l),l==V.connecting?Ht("server-connecting"):l==V.reconnecting?rt("server-reconnecting"):l==V.disconnected?(rt("server-connecting"),rt("server-reconnecting"),fs()):l==V.connected&&(rt("server-connecting"),rt("server-reconnecting"))}),Np(l=>{rt("internet-check");let c=n(0,Ee.msgHandler=We,Ee),s=n(0,Ee.connManager=new Fp(We.handleRecivedMessage),Ee);c.setSendMessageCallback(s.sendMessageToCurrentRov.bind(s)),s.start()})}),Vt(()=>{console.log("cleaning up"),Ee.connManager&&Ee.connManager.cleanup()}),t.$$.update=()=>{t.$$.dirty&7&&(r==V.connecting?(i&&i(),Ee.gpadCtrl.clearExternalEventListenerCallbacks(),ds(Ee.connManager&&Ee.connManager.currentTargetRovId)):r==V.reconnecting?(i&&i(),Ee.gpadCtrl.clearExternalEventListenerCallbacks(),Ht("webrtc-reconnecting"),ds(Ee.connManager&&Ee.connManager.currentTargetRovId),Ht("webrtc-connecting")):r==V.disconnected?(i&&i(),Ee.gpadCtrl.clearExternalEventListenerCallbacks(),fs(),rt("webrtc-reconnecting"),rt("webrtc-connecting")):r==V.connected&&(Ch(),we("Connected to ROV!",1e3),n(1,i=he.startPingLoop())))},[Ee,i,r]}class Zp extends Pe{constructor(e){super(),Re(this,e,Jp,Yp,ke,{})}}new Zp({target:document.getElementById("app")});window.addEventListener("pagehide",()=>{});window.addEventListener("pageshow",()=>{});
