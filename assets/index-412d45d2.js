var $e=Object.defineProperty;var Oe=(n,e,r)=>e in n?$e(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r;var q=(n,e,r)=>(Oe(n,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();const app="";function noop$1(){}const identity=n=>n;function assign$3(n,e){for(const r in e)n[r]=e[r];return n}function run(n){return n()}function blank_object(){return Object.create(null)}function run_all(n){n.forEach(run)}function is_function(n){return typeof n=="function"}function safe_not_equal(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function is_empty(n){return Object.keys(n).length===0}function subscribe(n,...e){if(n==null)return noop$1;const r=n.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function component_subscribe(n,e,r){n.$$.on_destroy.push(subscribe(e,r))}function create_slot(n,e,r,t){if(n){const a=get_slot_context(n,e,r,t);return n[0](a)}}function get_slot_context(n,e,r,t){return n[1]&&t?assign$3(r.ctx.slice(),n[1](t(e))):r.ctx}function get_slot_changes(n,e,r,t){if(n[2]&&t){const a=n[2](t(r));if(e.dirty===void 0)return a;if(typeof a=="object"){const s=[],u=Math.max(e.dirty.length,a.length);for(let d=0;d<u;d+=1)s[d]=e.dirty[d]|a[d];return s}return e.dirty|a}return e.dirty}function update_slot_base(n,e,r,t,a,s){if(a){const u=get_slot_context(e,r,t,s);n.p(u,a)}}function get_all_dirty_from_scope(n){if(n.ctx.length>32){const e=[],r=n.ctx.length/32;for(let t=0;t<r;t++)e[t]=-1;return e}return-1}function exclude_internal_props(n){const e={};for(const r in n)r[0]!=="$"&&(e[r]=n[r]);return e}function compute_rest_props(n,e){const r={};e=new Set(e);for(const t in n)!e.has(t)&&t[0]!=="$"&&(r[t]=n[t]);return r}function null_to_empty(n){return n??""}function set_store_value(n,e,r){return n.set(r),e}function action_destroyer(n){return n&&is_function(n.destroy)?n.destroy:noop$1}const is_client=typeof window<"u";let now=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?n=>requestAnimationFrame(n):noop$1;const tasks=new Set;function run_tasks(n){tasks.forEach(e=>{e.c(n)||(tasks.delete(e),e.f())}),tasks.size!==0&&raf(run_tasks)}function loop(n){let e;return tasks.size===0&&raf(run_tasks),{promise:new Promise(r=>{tasks.add(e={c:n,f:r})}),abort(){tasks.delete(e)}}}function append(n,e){n.appendChild(e)}function get_root_for_style(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function append_empty_stylesheet(n){const e=element("style");return append_stylesheet(get_root_for_style(n),e),e.sheet}function append_stylesheet(n,e){return append(n.head||n,e),e.sheet}function insert(n,e,r){n.insertBefore(e,r||null)}function detach(n){n.parentNode&&n.parentNode.removeChild(n)}function destroy_each(n,e){for(let r=0;r<n.length;r+=1)n[r]&&n[r].d(e)}function element(n){return document.createElement(n)}function svg_element(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function text(n){return document.createTextNode(n)}function space(){return text(" ")}function empty(){return text("")}function listen(n,e,r,t){return n.addEventListener(e,r,t),()=>n.removeEventListener(e,r,t)}function prevent_default(n){return function(e){return e.preventDefault(),n.call(this,e)}}function stop_propagation(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function attr(n,e,r){r==null?n.removeAttribute(e):n.getAttribute(e)!==r&&n.setAttribute(e,r)}function set_attributes(n,e){const r=Object.getOwnPropertyDescriptors(n.__proto__);for(const t in e)e[t]==null?n.removeAttribute(t):t==="style"?n.style.cssText=e[t]:t==="__value"?n.value=n[t]=e[t]:r[t]&&r[t].set?n[t]=e[t]:attr(n,t,e[t])}function set_svg_attributes(n,e){for(const r in e)attr(n,r,e[r])}function children$1(n){return Array.from(n.childNodes)}function set_data(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function set_input_value(n,e){n.value=e??""}function set_style(n,e,r,t){r===null?n.style.removeProperty(e):n.style.setProperty(e,r,t?"important":"")}function toggle_class(n,e,r){n.classList[r?"add":"remove"](e)}function custom_event(n,e,{bubbles:r=!1,cancelable:t=!1}={}){const a=document.createEvent("CustomEvent");return a.initCustomEvent(n,r,t,e),a}class HtmlTag{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,r,t=null){this.e||(this.is_svg?this.e=svg_element(r.nodeName):this.e=element(r.nodeName),this.t=r,this.c(e)),this.i(t)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let r=0;r<this.n.length;r+=1)insert(this.t,this.n[r],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(detach)}}function construct_svelte_component(n,e){return new n(e)}const managed_styles=new Map;let active=0;function hash$2(n){let e=5381,r=n.length;for(;r--;)e=(e<<5)-e^n.charCodeAt(r);return e>>>0}function create_style_information(n,e){const r={stylesheet:append_empty_stylesheet(e),rules:{}};return managed_styles.set(n,r),r}function create_rule(n,e,r,t,a,s,u,d=0){const c=16.666/t;let g=`{
`;for(let w=0;w<=1;w+=c){const k=e+(r-e)*s(w);g+=w*100+`%{${u(k,1-k)}}
`}const m=g+`100% {${u(r,1-r)}}
}`,_=`__svelte_${hash$2(m)}_${d}`,b=get_root_for_style(n),{stylesheet:S,rules:C}=managed_styles.get(b)||create_style_information(b,n);C[_]||(C[_]=!0,S.insertRule(`@keyframes ${_} ${m}`,S.cssRules.length));const R=n.style.animation||"";return n.style.animation=`${R?`${R}, `:""}${_} ${t}ms linear ${a}ms 1 both`,active+=1,_}function delete_rule(n,e){const r=(n.style.animation||"").split(", "),t=r.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),a=r.length-t.length;a&&(n.style.animation=t.join(", "),active-=a,active||clear_rules())}function clear_rules(){raf(()=>{active||(managed_styles.forEach(n=>{const{ownerNode:e}=n.stylesheet;e&&detach(e)}),managed_styles.clear())})}function create_animation(n,e,r,t){if(!e)return noop$1;const a=n.getBoundingClientRect();if(e.left===a.left&&e.right===a.right&&e.top===a.top&&e.bottom===a.bottom)return noop$1;const{delay:s=0,duration:u=300,easing:d=identity,start:c=now()+s,end:g=c+u,tick:m=noop$1,css:_}=r(n,{from:e,to:a},t);let b=!0,S=!1,C;function R(){_&&(C=create_rule(n,0,1,u,s,d,_)),s||(S=!0)}function w(){_&&delete_rule(n,C),b=!1}return loop(k=>{if(!S&&k>=c&&(S=!0),S&&k>=g&&(m(1,0),w()),!b)return!1;if(S){const $=k-c,O=0+1*d($/u);m(O,1-O)}return!0}),R(),m(0,1),w}function fix_position(n){const e=getComputedStyle(n);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:r,height:t}=e,a=n.getBoundingClientRect();n.style.position="absolute",n.style.width=r,n.style.height=t,add_transform(n,a)}}function add_transform(n,e){const r=n.getBoundingClientRect();if(e.left!==r.left||e.top!==r.top){const t=getComputedStyle(n),a=t.transform==="none"?"":t.transform;n.style.transform=`${a} translate(${e.left-r.left}px, ${e.top-r.top}px)`}}let current_component;function set_current_component(n){current_component=n}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(n){get_current_component().$$.on_mount.push(n)}function onDestroy(n){get_current_component().$$.on_destroy.push(n)}function createEventDispatcher(){const n=get_current_component();return(e,r,{cancelable:t=!1}={})=>{const a=n.$$.callbacks[e];if(a){const s=custom_event(e,r,{cancelable:t});return a.slice().forEach(u=>{u.call(n,s)}),!s.defaultPrevented}return!0}}function setContext(n,e){return get_current_component().$$.context.set(n,e),e}function getContext(n){return get_current_component().$$.context.get(n)}function bubble(n,e){const r=n.$$.callbacks[e.type];r&&r.slice().forEach(t=>t.call(this,e))}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(n){render_callbacks.push(n)}function add_flush_callback(n){flush_callbacks.push(n)}const seen_callbacks=new Set;let flushidx=0;function flush(){const n=current_component;do{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update$1(e.$$)}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const r=render_callbacks[e];seen_callbacks.has(r)||(seen_callbacks.add(r),r())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(n)}function update$1(n){if(n.fragment!==null){n.update(),run_all(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(add_render_callback)}}let promise;function wait$1(){return promise||(promise=Promise.resolve(),promise.then(()=>{promise=null})),promise}function dispatch(n,e,r){n.dispatchEvent(custom_event(`${e?"intro":"outro"}${r}`))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(n,e){n&&n.i&&(outroing.delete(n),n.i(e))}function transition_out(n,e,r,t){if(n&&n.o){if(outroing.has(n))return;outroing.add(n),outros.c.push(()=>{outroing.delete(n),t&&(r&&n.d(1),t())}),n.o(e)}else t&&t()}const null_transition={duration:0};function create_in_transition(n,e,r){const t={direction:"in"};let a=e(n,r,t),s=!1,u,d,c=0;function g(){u&&delete_rule(n,u)}function m(){const{delay:b=0,duration:S=300,easing:C=identity,tick:R=noop$1,css:w}=a||null_transition;w&&(u=create_rule(n,0,1,S,b,C,w,c++)),R(0,1);const k=now()+b,$=k+S;d&&d.abort(),s=!0,add_render_callback(()=>dispatch(n,!0,"start")),d=loop(O=>{if(s){if(O>=$)return R(1,0),dispatch(n,!0,"end"),g(),s=!1;if(O>=k){const I=C((O-k)/S);R(I,1-I)}}return s})}let _=!1;return{start(){_||(_=!0,delete_rule(n),is_function(a)?(a=a(t),wait$1().then(m)):m())},invalidate(){_=!1},end(){s&&(g(),s=!1)}}}function create_out_transition(n,e,r){const t={direction:"out"};let a=e(n,r,t),s=!0,u;const d=outros;d.r+=1;function c(){const{delay:g=0,duration:m=300,easing:_=identity,tick:b=noop$1,css:S}=a||null_transition;S&&(u=create_rule(n,1,0,m,g,_,S));const C=now()+g,R=C+m;add_render_callback(()=>dispatch(n,!1,"start")),loop(w=>{if(s){if(w>=R)return b(0,1),dispatch(n,!1,"end"),--d.r||run_all(d.c),!1;if(w>=C){const k=_((w-C)/m);b(1-k,k)}}return s})}return is_function(a)?wait$1().then(()=>{a=a(t),c()}):c(),{end(g){g&&a.tick&&a.tick(1,0),s&&(u&&delete_rule(n,u),s=!1)}}}function create_bidirectional_transition(n,e,r,t){const a={direction:"both"};let s=e(n,r,a),u=t?0:1,d=null,c=null,g=null;function m(){g&&delete_rule(n,g)}function _(S,C){const R=S.b-u;return C*=Math.abs(R),{a:u,b:S.b,d:R,duration:C,start:S.start,end:S.start+C,group:S.group}}function b(S){const{delay:C=0,duration:R=300,easing:w=identity,tick:k=noop$1,css:$}=s||null_transition,O={start:now()+C,b:S};S||(O.group=outros,outros.r+=1),d||c?c=O:($&&(m(),g=create_rule(n,u,S,R,C,w,$)),S&&k(0,1),d=_(O,R),add_render_callback(()=>dispatch(n,S,"start")),loop(I=>{if(c&&I>c.start&&(d=_(c,R),c=null,dispatch(n,d.b,"start"),$&&(m(),g=create_rule(n,u,d.b,d.duration,0,w,s.css))),d){if(I>=d.end)k(u=d.b,1-u),dispatch(n,d.b,"end"),c||(d.b?m():--d.group.r||run_all(d.group.c)),d=null;else if(I>=d.start){const x=I-d.start;u=d.a+d.d*w(x/d.duration),k(u,1-u)}}return!!(d||c)}))}return{run(S){is_function(s)?wait$1().then(()=>{s=s(a),b(S)}):b(S)},end(){m(),d=c=null}}}const globals=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function outro_and_destroy_block(n,e){transition_out(n,1,1,()=>{e.delete(n.key)})}function fix_and_outro_and_destroy_block(n,e){n.f(),outro_and_destroy_block(n,e)}function update_keyed_each(n,e,r,t,a,s,u,d,c,g,m,_){let b=n.length,S=s.length,C=b;const R={};for(;C--;)R[n[C].key]=C;const w=[],k=new Map,$=new Map;for(C=S;C--;){const P=_(a,s,C),B=r(P);let j=u.get(B);j?t&&j.p(P,e):(j=g(B,P),j.c()),k.set(B,w[C]=j),B in R&&$.set(B,Math.abs(C-R[B]))}const O=new Set,I=new Set;function x(P){transition_in(P,1),P.m(d,m),u.set(P.key,P),m=P.first,S--}for(;b&&S;){const P=w[S-1],B=n[b-1],j=P.key,W=B.key;P===B?(m=P.first,b--,S--):k.has(W)?!u.has(j)||O.has(j)?x(P):I.has(W)?b--:$.get(j)>$.get(W)?(I.add(j),x(P)):(O.add(W),b--):(c(B,u),b--)}for(;b--;){const P=n[b];k.has(P.key)||c(P,u)}for(;S;)x(w[S-1]);return w}function get_spread_update(n,e){const r={},t={},a={$$scope:1};let s=n.length;for(;s--;){const u=n[s],d=e[s];if(d){for(const c in u)c in d||(t[c]=1);for(const c in d)a[c]||(r[c]=d[c],a[c]=1);n[s]=d}else for(const c in u)a[c]=1}for(const u in t)u in r||(r[u]=void 0);return r}function get_spread_object(n){return typeof n=="object"&&n!==null?n:{}}function bind(n,e,r,t){const a=n.$$.props[e];a!==void 0&&(n.$$.bound[a]=r,t===void 0&&r(n.$$.ctx[a]))}function create_component(n){n&&n.c()}function mount_component(n,e,r,t){const{fragment:a,after_update:s}=n.$$;a&&a.m(e,r),t||add_render_callback(()=>{const u=n.$$.on_mount.map(run).filter(is_function);n.$$.on_destroy?n.$$.on_destroy.push(...u):run_all(u),n.$$.on_mount=[]}),s.forEach(add_render_callback)}function destroy_component(n,e){const r=n.$$;r.fragment!==null&&(run_all(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function make_dirty(n,e){n.$$.dirty[0]===-1&&(dirty_components.push(n),schedule_update(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function init$1(n,e,r,t,a,s,u,d=[-1]){const c=current_component;set_current_component(n);const g=n.$$={fragment:null,ctx:[],props:s,update:noop$1,not_equal:a,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:blank_object(),dirty:d,skip_bound:!1,root:e.target||c.$$.root};u&&u(g.root);let m=!1;if(g.ctx=r?r(n,e.props||{},(_,b,...S)=>{const C=S.length?S[0]:b;return g.ctx&&a(g.ctx[_],g.ctx[_]=C)&&(!g.skip_bound&&g.bound[_]&&g.bound[_](C),m&&make_dirty(n,_)),b}):[],g.update(),m=!0,run_all(g.before_update),g.fragment=t?t(g.ctx):!1,e.target){if(e.hydrate){const _=children$1(e.target);g.fragment&&g.fragment.l(_),_.forEach(detach)}else g.fragment&&g.fragment.c();e.intro&&transition_in(n.$$.fragment),mount_component(n,e.target,e.anchor,e.customElement),flush()}set_current_component(c)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop$1}$on(e,r){if(!is_function(r))return noop$1;const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(r),()=>{const a=t.indexOf(r);a!==-1&&t.splice(a,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var __assign$1=function(){return __assign$1=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++){r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},__assign$1.apply(this,arguments)};function __rest$1(n,e){var r={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.indexOf(t)<0&&(r[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(r[t[a]]=n[t[a]]);return r}function __values$1(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var __assign=function(){return __assign=Object.assign||function(e){for(var r,t=1,a=arguments.length;t<a;t++){r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},__assign.apply(this,arguments)};function __rest(n,e){var r={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.indexOf(t)<0&&(r[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(r[t[a]]=n[t[a]]);return r}function __values(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],u;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(d){u={error:d}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(u)throw u.error}}return s}function __spreadArray(n,e,r){if(r||arguments.length===2)for(var t=0,a=e.length,s;t<a;t++)(s||!(t in e))&&(s||(s=Array.prototype.slice.call(e,0,t)),s[t]=e[t]);return n.concat(s||Array.prototype.slice.call(e))}var ActionTypes;(function(n){n.Start="xstate.start",n.Stop="xstate.stop",n.Raise="xstate.raise",n.Send="xstate.send",n.Cancel="xstate.cancel",n.NullEvent="",n.Assign="xstate.assign",n.After="xstate.after",n.DoneState="done.state",n.DoneInvoke="done.invoke",n.Log="xstate.log",n.Init="xstate.init",n.Invoke="xstate.invoke",n.ErrorExecution="error.execution",n.ErrorCommunication="error.communication",n.ErrorPlatform="error.platform",n.ErrorCustom="xstate.error",n.Update="xstate.update",n.Pure="xstate.pure",n.Choose="xstate.choose"})(ActionTypes||(ActionTypes={}));var SpecialTargets;(function(n){n.Parent="#_parent",n.Internal="#_internal"})(SpecialTargets||(SpecialTargets={}));var start$2=ActionTypes.Start,stop$1=ActionTypes.Stop,raise$1=ActionTypes.Raise,send$1=ActionTypes.Send,cancel$1=ActionTypes.Cancel,nullEvent=ActionTypes.NullEvent,assign$2=ActionTypes.Assign;ActionTypes.After;ActionTypes.DoneState;var log$1=ActionTypes.Log,init=ActionTypes.Init,invoke=ActionTypes.Invoke;ActionTypes.ErrorExecution;var errorPlatform=ActionTypes.ErrorPlatform,error$3=ActionTypes.ErrorCustom,update=ActionTypes.Update,choose=ActionTypes.Choose,pure=ActionTypes.Pure,STATE_DELIMITER=".",EMPTY_ACTIVITY_MAP={},DEFAULT_GUARD_TYPE="xstate.guard",TARGETLESS_KEY="",IS_PRODUCTION=!0,_a;function matchesState(n,e,r){r===void 0&&(r=STATE_DELIMITER);var t=toStateValue(n,r),a=toStateValue(e,r);return isString(a)?isString(t)?a===t:!1:isString(t)?t in a:Object.keys(t).every(function(s){return s in a?matchesState(t[s],a[s]):!1})}function getEventType(n){try{return isString(n)||typeof n=="number"?"".concat(n):n.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function toStatePath(n,e){try{return isArray(n)?n:n.toString().split(e)}catch{throw new Error("'".concat(n,"' is not a valid state path."))}}function isStateLike(n){return typeof n=="object"&&"value"in n&&"context"in n&&"event"in n&&"_event"in n}function toStateValue(n,e){if(isStateLike(n))return n.value;if(isArray(n))return pathToStateValue(n);if(typeof n!="string")return n;var r=toStatePath(n,e);return pathToStateValue(r)}function pathToStateValue(n){if(n.length===1)return n[0];for(var e={},r=e,t=0;t<n.length-1;t++)t===n.length-2?r[n[t]]=n[t+1]:(r[n[t]]={},r=r[n[t]]);return e}function mapValues(n,e){for(var r={},t=Object.keys(n),a=0;a<t.length;a++){var s=t[a];r[s]=e(n[s],s,n,a)}return r}function mapFilterValues(n,e,r){var t,a,s={};try{for(var u=__values(Object.keys(n)),d=u.next();!d.done;d=u.next()){var c=d.value,g=n[c];!r(g)||(s[c]=e(g,c,n))}}catch(m){t={error:m}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(t)throw t.error}}return s}var path=function(n){return function(e){var r,t,a=e;try{for(var s=__values(n),u=s.next();!u.done;u=s.next()){var d=u.value;a=a[d]}}catch(c){r={error:c}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}return a}};function nestedPath(n,e){return function(r){var t,a,s=r;try{for(var u=__values(n),d=u.next();!d.done;d=u.next()){var c=d.value;s=s[e][c]}}catch(g){t={error:g}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(t)throw t.error}}return s}}function toStatePaths(n){if(!n)return[[]];if(isString(n))return[[n]];var e=flatten(Object.keys(n).map(function(r){var t=n[r];return typeof t!="string"&&(!t||!Object.keys(t).length)?[[r]]:toStatePaths(n[r]).map(function(a){return[r].concat(a)})}));return e}function flatten(n){var e;return(e=[]).concat.apply(e,__spreadArray([],__read(n),!1))}function toArrayStrict(n){return isArray(n)?n:[n]}function toArray(n){return n===void 0?[]:toArrayStrict(n)}function mapContext(n,e,r){var t,a;if(isFunction(n))return n(e,r.data);var s={};try{for(var u=__values(Object.keys(n)),d=u.next();!d.done;d=u.next()){var c=d.value,g=n[c];isFunction(g)?s[c]=g(e,r.data):s[c]=g}}catch(m){t={error:m}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(t)throw t.error}}return s}function isBuiltInEvent(n){return/^(done|error)\./.test(n)}function isPromiseLike(n){return!!(n instanceof Promise||n!==null&&(isFunction(n)||typeof n=="object")&&isFunction(n.then))}function isBehavior(n){return n!==null&&typeof n=="object"&&"transition"in n&&typeof n.transition=="function"}function partition(n,e){var r,t,a=__read([[],[]],2),s=a[0],u=a[1];try{for(var d=__values(n),c=d.next();!c.done;c=d.next()){var g=c.value;e(g)?s.push(g):u.push(g)}}catch(m){r={error:m}}finally{try{c&&!c.done&&(t=d.return)&&t.call(d)}finally{if(r)throw r.error}}return[s,u]}function updateHistoryStates(n,e){return mapValues(n.states,function(r,t){if(!!r){var a=(isString(e)?void 0:e[t])||(r?r.current:void 0);if(!!a)return{current:a,states:updateHistoryStates(r,a)}}})}function updateHistoryValue(n,e){return{current:e,states:updateHistoryStates(n,e)}}function updateContext(n,e,r,t){var a=n&&r.reduce(function(s,u){var d,c,g=u.assignment,m={state:t,action:u,_event:e},_={};if(isFunction(g))_=g(s,e.data,m);else try{for(var b=__values(Object.keys(g)),S=b.next();!S.done;S=b.next()){var C=S.value,R=g[C];_[C]=isFunction(R)?R(s,e.data,m):R}}catch(w){d={error:w}}finally{try{S&&!S.done&&(c=b.return)&&c.call(b)}finally{if(d)throw d.error}}return Object.assign({},s,_)},n);return a}var warn=function(){};IS_PRODUCTION||(warn=function(n,e){var r=n instanceof Error?n:void 0;if(!(!r&&n)&&console!==void 0){var t=["Warning: ".concat(e)];r&&t.push(r),console.warn.apply(console,t)}});function isArray(n){return Array.isArray(n)}function isFunction(n){return typeof n=="function"}function isString(n){return typeof n=="string"}function toGuard(n,e){if(!!n)return isString(n)?{type:DEFAULT_GUARD_TYPE,name:n,predicate:e?e[n]:void 0}:isFunction(n)?{type:DEFAULT_GUARD_TYPE,name:n.name,predicate:n}:n}function isObservable(n){try{return"subscribe"in n&&isFunction(n.subscribe)}catch{return!1}}var symbolObservable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();_a={},_a[symbolObservable]=function(){return this},_a[Symbol.observable]=function(){return this};function isMachine(n){return!!n&&"__xstatenode"in n}function isActor$1(n){return!!n&&typeof n.send=="function"}function toEventObject(n,e){return isString(n)||typeof n=="number"?__assign({type:n},e):n}function toSCXMLEvent(n,e){if(!isString(n)&&"$$type"in n&&n.$$type==="scxml")return n;var r=toEventObject(n);return __assign({name:r.type,data:r,$$type:"scxml",type:"external"},e)}function toTransitionConfigArray(n,e){var r=toArrayStrict(e).map(function(t){return typeof t>"u"||typeof t=="string"||isMachine(t)?{target:t,event:n}:__assign(__assign({},t),{event:n})});return r}function normalizeTarget(n){if(!(n===void 0||n===TARGETLESS_KEY))return toArray(n)}function reportUnhandledExceptionOnInvocation(n,e,r){if(!IS_PRODUCTION){var t=n.stack?" Stacktrace was '".concat(n.stack,"'"):"";if(n===e)console.error("Missing onError handler for invocation '".concat(r,"', error was '").concat(n,"'.").concat(t));else{var a=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(r,"'. ")+"Original error: '".concat(n,"'. ").concat(t," Current error is '").concat(e,"'.").concat(a))}}}function evaluateGuard(n,e,r,t,a){var s=n.options.guards,u={state:a,cond:e,_event:t};if(e.type===DEFAULT_GUARD_TYPE)return((s==null?void 0:s[e.name])||e.predicate)(r,t.data,u);var d=s==null?void 0:s[e.type];if(!d)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(n.id,"'."));return d(r,t.data,u)}function toInvokeSource$1(n){return typeof n=="string"?{type:n}:n}function toObserver(n,e,r){var t=function(){},a=typeof n=="object",s=a?n:null;return{next:((a?n.next:n)||t).bind(s),error:((a?n.error:e)||t).bind(s),complete:((a?n.complete:r)||t).bind(s)}}function createInvokeId(n,e){return"".concat(n,":invocation[").concat(e,"]")}var initEvent=toSCXMLEvent({type:init});function getActionFunction(n,e){return e&&e[n]||void 0}function toActionObject(n,e){var r;if(isString(n)||typeof n=="number"){var t=getActionFunction(n,e);isFunction(t)?r={type:n,exec:t}:t?r=t:r={type:n,exec:void 0}}else if(isFunction(n))r={type:n.name||n.toString(),exec:n};else{var t=getActionFunction(n.type,e);if(isFunction(t))r=__assign(__assign({},n),{exec:t});else if(t){var a=t.type||n.type;r=__assign(__assign(__assign({},t),n),{type:a})}else r=n}return r}var toActionObjects=function(n,e){if(!n)return[];var r=isArray(n)?n:[n];return r.map(function(t){return toActionObject(t,e)})};function toActivityDefinition(n){var e=toActionObject(n);return __assign(__assign({id:isString(n)?n:e.id},e),{type:e.type})}function raise(n){return isString(n)?{type:raise$1,event:n}:send(n,{to:SpecialTargets.Internal})}function resolveRaise(n){return{type:raise$1,_event:toSCXMLEvent(n.event)}}function send(n,e){return{to:e?e.to:void 0,type:send$1,event:isFunction(n)?n:toEventObject(n),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:isFunction(n)?n.name:getEventType(n)}}function resolveSend(n,e,r,t){var a={_event:r},s=toSCXMLEvent(isFunction(n.event)?n.event(e,r.data,a):n.event),u;if(isString(n.delay)){var d=t&&t[n.delay];u=isFunction(d)?d(e,r.data,a):d}else u=isFunction(n.delay)?n.delay(e,r.data,a):n.delay;var c=isFunction(n.to)?n.to(e,r.data,a):n.to;return __assign(__assign({},n),{to:c,_event:s,event:s.data,delay:u})}var resolveLog=function(n,e,r){return __assign(__assign({},n),{value:isString(n.expr)?n.expr:n.expr(e,r.data,{_event:r})})},cancel=function(n){return{type:cancel$1,sendId:n}};function start$1(n){var e=toActivityDefinition(n);return{type:ActionTypes.Start,activity:e,exec:void 0}}function stop(n){var e=isFunction(n)?n:toActivityDefinition(n);return{type:ActionTypes.Stop,activity:e,exec:void 0}}function resolveStop(n,e,r){var t=isFunction(n.activity)?n.activity(e,r.data):n.activity,a=typeof t=="string"?{id:t}:t,s={type:ActionTypes.Stop,activity:a};return s}var assign$1=function(n){return{type:assign$2,assignment:n}};function after(n,e){var r=e?"#".concat(e):"";return"".concat(ActionTypes.After,"(").concat(n,")").concat(r)}function done(n,e){var r="".concat(ActionTypes.DoneState,".").concat(n),t={type:r,data:e};return t.toString=function(){return r},t}function doneInvoke(n,e){var r="".concat(ActionTypes.DoneInvoke,".").concat(n),t={type:r,data:e};return t.toString=function(){return r},t}function error$2(n,e){var r="".concat(ActionTypes.ErrorPlatform,".").concat(n),t={type:r,data:e};return t.toString=function(){return r},t}var pluckAssigns=function(n){var e,r,t=[];try{for(var a=__values(n),s=a.next();!s.done;s=a.next())for(var u=s.value,d=0;d<u.length;){if(u[d].type===assign$2){t.push(u[d]),u.splice(d,1);continue}d++}}catch(c){e={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return t};function resolveActions(n,e,r,t,a,s,u){u===void 0&&(u=!1);var d=u?[]:pluckAssigns(a),c=d.length?updateContext(r,t,d,e):r,g=u?[r]:void 0,m=[];function _(C){var R;switch(C.type){case raise$1:return resolveRaise(C);case send$1:var w=resolveSend(C,c,t,n.options.delays);return s&&w.to!==SpecialTargets.Internal&&m.push(w),w;case log$1:{var k=resolveLog(C,c,t);return s==null||s(k,c,t),k}case choose:{var $=C,O=(R=$.conds.find(function(Y){var X=toGuard(Y.cond,n.options.guards);return!X||evaluateGuard(n,X,c,t,s?void 0:e)}))===null||R===void 0?void 0:R.actions;if(!O)return[];var I=__read(resolveActions(n,e,c,t,[toActionObjects(toArray(O),n.options.actions)],s,u),2),x=I[0],P=I[1];return c=P,g==null||g.push(c),x}case pure:{var O=C.get(c,t.data);if(!O)return[];var B=__read(resolveActions(n,e,c,t,[toActionObjects(toArray(O),n.options.actions)],s,u),2),j=B[0],W=B[1];return c=W,g==null||g.push(c),j}case stop$1:{var k=resolveStop(C,c,t);return s==null||s(k,r,t),k}case assign$2:{c=updateContext(c,t,[C],s?void 0:e),g==null||g.push(c);break}default:var U=toActionObject(C,n.options.actions),z=U.exec;if(s)s(U,c,t);else if(z&&g){var F=g.length-1;U=__assign(__assign({},U),{exec:function(Y){for(var X=[],K=1;K<arguments.length;K++)X[K-1]=arguments[K];z.apply(void 0,__spreadArray([g[F]],__read(X),!1))}})}return U}}function b(C){var R,w,k=[];try{for(var $=__values(C),O=$.next();!O.done;O=$.next()){var I=O.value,x=_(I);x&&(k=k.concat(x))}}catch(P){R={error:P}}finally{try{O&&!O.done&&(w=$.return)&&w.call($)}finally{if(R)throw R.error}}return m.forEach(function(P){s(P,c,t)}),m.length=0,k}var S=flatten(a.map(b));return[S,c]}var provide=function(n,e){var r=e(n);return r};function createNullActor(n){var e;return e={id:n,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:n}}},e[symbolObservable]=function(){return this},e}function createInvocableActor(n,e,r,t){var a,s=toInvokeSource$1(n.src),u=(a=e==null?void 0:e.options.services)===null||a===void 0?void 0:a[s.type],d=n.data?mapContext(n.data,r,t):void 0,c=u?createDeferredActor(u,n.id,d):createNullActor(n.id);return c.meta=n,c}function createDeferredActor(n,e,r){var t=createNullActor(e);if(t.deferred=!0,isMachine(n)){var a=t.state=provide(void 0,function(){return(r?n.withContext(r):n).initialState});t.getSnapshot=function(){return a}}return t}function isActor(n){try{return typeof n.send=="function"}catch{return!1}}function isSpawnedActor(n){return isActor(n)&&"id"in n}function toActorRef(n){var e;return __assign((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[symbolObservable]=function(){return this},e),n)}var isLeafNode=function(n){return n.type==="atomic"||n.type==="final"};function getAllChildren(n){return Object.keys(n.states).map(function(e){return n.states[e]})}function getChildren(n){return getAllChildren(n).filter(function(e){return e.type!=="history"})}function getAllStateNodes(n){var e=[n];return isLeafNode(n)?e:e.concat(flatten(getChildren(n).map(getAllStateNodes)))}function getConfiguration(n,e){var r,t,a,s,u,d,c,g,m=new Set(n),_=getAdjList(m),b=new Set(e);try{for(var S=__values(b),C=S.next();!C.done;C=S.next())for(var R=C.value,w=R.parent;w&&!b.has(w);)b.add(w),w=w.parent}catch(W){r={error:W}}finally{try{C&&!C.done&&(t=S.return)&&t.call(S)}finally{if(r)throw r.error}}var k=getAdjList(b);try{for(var $=__values(b),O=$.next();!O.done;O=$.next()){var R=O.value;if(R.type==="compound"&&(!k.get(R)||!k.get(R).length))_.get(R)?_.get(R).forEach(function(U){return b.add(U)}):R.initialStateNodes.forEach(function(U){return b.add(U)});else if(R.type==="parallel")try{for(var I=(u=void 0,__values(getChildren(R))),x=I.next();!x.done;x=I.next()){var P=x.value;b.has(P)||(b.add(P),_.get(P)?_.get(P).forEach(function(U){return b.add(U)}):P.initialStateNodes.forEach(function(U){return b.add(U)}))}}catch(U){u={error:U}}finally{try{x&&!x.done&&(d=I.return)&&d.call(I)}finally{if(u)throw u.error}}}}catch(W){a={error:W}}finally{try{O&&!O.done&&(s=$.return)&&s.call($)}finally{if(a)throw a.error}}try{for(var B=__values(b),j=B.next();!j.done;j=B.next())for(var R=j.value,w=R.parent;w&&!b.has(w);)b.add(w),w=w.parent}catch(W){c={error:W}}finally{try{j&&!j.done&&(g=B.return)&&g.call(B)}finally{if(c)throw c.error}}return b}function getValueFromAdj(n,e){var r=e.get(n);if(!r)return{};if(n.type==="compound"){var t=r[0];if(t){if(isLeafNode(t))return t.key}else return{}}var a={};return r.forEach(function(s){a[s.key]=getValueFromAdj(s,e)}),a}function getAdjList(n){var e,r,t=new Map;try{for(var a=__values(n),s=a.next();!s.done;s=a.next()){var u=s.value;t.has(u)||t.set(u,[]),u.parent&&(t.has(u.parent)||t.set(u.parent,[]),t.get(u.parent).push(u))}}catch(d){e={error:d}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return t}function getValue(n,e){var r=getConfiguration([n],e);return getValueFromAdj(n,getAdjList(r))}function has(n,e){return Array.isArray(n)?n.some(function(r){return r===e}):n instanceof Set?n.has(e):!1}function nextEvents(n){return __spreadArray([],__read(new Set(flatten(__spreadArray([],__read(n.map(function(e){return e.ownEvents})),!1)))),!1)}function isInFinalState(n,e){return e.type==="compound"?getChildren(e).some(function(r){return r.type==="final"&&has(n,r)}):e.type==="parallel"?getChildren(e).every(function(r){return isInFinalState(n,r)}):!1}function getMeta(n){return n===void 0&&(n=[]),n.reduce(function(e,r){return r.meta!==void 0&&(e[r.id]=r.meta),e},{})}function getTagsFromConfiguration(n){return new Set(flatten(n.map(function(e){return e.tags})))}function stateValuesEqual(n,e){if(n===e)return!0;if(n===void 0||e===void 0)return!1;if(isString(n)||isString(e))return n===e;var r=Object.keys(n),t=Object.keys(e);return r.length===t.length&&r.every(function(a){return stateValuesEqual(n[a],e[a])})}function isStateConfig(n){return typeof n!="object"||n===null?!1:"value"in n&&"_event"in n}function bindActionToState(n,e){var r=n.exec,t=__assign(__assign({},n),{exec:r!==void 0?function(){return r(e.context,e.event,{action:n,state:e,_event:e._event})}:void 0});return t}var State$2=function(){function n(e){var r=this,t;this.actions=[],this.activities=EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||EMPTY_ACTIVITY_MAP,this.meta=getMeta(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(t=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&t!==void 0?t:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return nextEvents(r.configuration)}})}return n.from=function(e,r){if(e instanceof n)return e.context!==r?new n({value:e.value,context:r,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var t=initEvent;return new n({value:e,context:r,_event:t,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},n.create=function(e){return new n(e)},n.inert=function(e,r){if(e instanceof n){if(!e.actions.length)return e;var t=initEvent;return new n({value:e.value,context:r,_event:t,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return n.from(e,r)},n.prototype.toStrings=function(e,r){var t=this;if(e===void 0&&(e=this.value),r===void 0&&(r="."),isString(e))return[e];var a=Object.keys(e);return a.concat.apply(a,__spreadArray([],__read(a.map(function(s){return t.toStrings(e[s],r).map(function(u){return s+r+u})})),!1))},n.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var r=e.tags;e.machine;var t=__rest(e,["configuration","transitions","tags","machine"]);return __assign(__assign({},t),{tags:Array.from(r)})},n.prototype.matches=function(e){return matchesState(e,this.value)},n.prototype.hasTag=function(e){return this.tags.has(e)},n.prototype.can=function(e){var r;warn(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var t=(r=this.machine)===null||r===void 0?void 0:r.getTransitionData(this,e);return!!(t!=null&&t.transitions.length)&&t.transitions.some(function(a){return a.target!==void 0||a.actions.length})},n}(),defaultOptions$1={deferEvents:!1},Scheduler=function(){function n(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=__assign(__assign({},defaultOptions$1),e)}return n.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},n.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},n.prototype.clear=function(){this.queue=[]},n.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},n.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(r){throw this.clear(),r}finally{this.processingEvent=!1}},n}(),children=new Map,sessionIdIndex=0,registry={bookId:function(){return"x:".concat(sessionIdIndex++)},register:function(n,e){return children.set(n,e),n},get:function(n){return children.get(n)},free:function(n){children.delete(n)}};function getGlobal(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;IS_PRODUCTION||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues")}function getDevTools(){var n=getGlobal();if(n&&"__xstate__"in n)return n.__xstate__}function registerService(n){if(!!getGlobal()){var e=getDevTools();e&&e.register(n)}}function spawnBehavior(n,e){e===void 0&&(e={});var r=n.initialState,t=new Set,a=[],s=!1,u=function(){if(!s){for(s=!0;a.length>0;){var g=a.shift();r=n.transition(r,g,c),t.forEach(function(m){return m.next(r)})}s=!1}},d=toActorRef({id:e.id,send:function(g){a.push(g),u()},getSnapshot:function(){return r},subscribe:function(g,m,_){var b=toObserver(g,m,_);return t.add(b),b.next(r),{unsubscribe:function(){t.delete(b)}}}}),c={parent:e.parent,self:d,id:e.id||"anonymous",observers:t};return r=n.start?n.start(c):r,d}var DEFAULT_SPAWN_OPTIONS={sync:!1,autoForward:!1},InterpreterStatus;(function(n){n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped"})(InterpreterStatus||(InterpreterStatus={}));var Interpreter=function(){function n(e,r){r===void 0&&(r=n.defaultOptions);var t=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(m,_){if(isArray(m))return t.batch(m),t.state;var b=toSCXMLEvent(toEventObject(m,_));if(t.status===InterpreterStatus.Stopped)return t.state;if(t.status!==InterpreterStatus.Running&&!t.options.deferEvents)throw new Error('Event "'.concat(b.name,'" was sent to uninitialized service "').concat(t.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(b.data)));return t.scheduler.schedule(function(){t.forward(b);var S=t._nextState(b);t.update(S,b)}),t._state},this.sendTo=function(m,_,b){var S=t.parent&&(_===SpecialTargets.Parent||t.parent.id===_),C=S?t.parent:isString(_)?t.children.get(_)||registry.get(_):isActor$1(_)?_:void 0;if(!C){if(!S)throw new Error("Unable to send event to child '".concat(_,"' from service '").concat(t.id,"'."));return}if("machine"in C){if(t.status!==InterpreterStatus.Stopped||t.parent!==C||t.state.done){var R=__assign(__assign({},m),{name:m.name===error$3?"".concat(error$2(t.id)):m.name,origin:t.sessionId});!b&&t.machine.config.predictableActionArguments?t._outgoingQueue.push([C,R]):C.send(R)}}else!b&&t.machine.config.predictableActionArguments?t._outgoingQueue.push([C,m.data]):C.send(m.data)},this._exec=function(m,_,b,S){S===void 0&&(S=t.machine.options.actions);var C=m.exec||getActionFunction(m.type,S),R=isFunction(C)?C:C?C.exec:m.exec;if(R)try{return R(_,b.data,t.machine.config.predictableActionArguments?{action:m,_event:b}:{action:m,state:t.state,_event:b})}catch(F){throw t.parent&&t.parent.send({type:"xstate.error",data:F}),F}switch(m.type){case send$1:var w=m;if(typeof w.delay=="number"){t.defer(w);return}else w.to?t.sendTo(w._event,w.to,b===initEvent):t.send(w._event);break;case cancel$1:t.cancel(m.sendId);break;case start$2:{if(t.status!==InterpreterStatus.Running)return;var k=m.activity;if(!t.machine.config.predictableActionArguments&&!t.state.activities[k.id||k.type])break;if(k.type===ActionTypes.Invoke){var $=toInvokeSource$1(k.src),O=t.machine.options.services?t.machine.options.services[$.type]:void 0,I=k.id,x=k.data,P="autoForward"in k?k.autoForward:!!k.forward;if(!O)return;var B=x?mapContext(x,_,b):void 0;if(typeof O=="string")return;var j=isFunction(O)?O(_,b.data,{data:B,src:$,meta:k.meta}):O;if(!j)return;var W=void 0;isMachine(j)&&(j=B?j.withContext(B):j,W={autoForward:P}),t.spawn(j,I,W)}else t.spawnActivity(k);break}case stop$1:{t.stopChild(m.activity.id);break}case log$1:var U=m.label,z=m.value;U?t.logger(U,z):t.logger(z);break}};var a=__assign(__assign({},n.defaultOptions),r),s=a.clock,u=a.logger,d=a.parent,c=a.id,g=c!==void 0?c:e.id;this.id=g,this.logger=u,this.clock=s,this.parent=d,this.options=a,this.scheduler=new Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=registry.bookId()}return Object.defineProperty(n.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:provide(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),n.prototype.execute=function(e,r){var t,a;try{for(var s=__values(e.actions),u=s.next();!u.done;u=s.next()){var d=u.value;this.exec(d,e,r)}}catch(c){t={error:c}}finally{try{u&&!u.done&&(a=s.return)&&a.call(s)}finally{if(t)throw t.error}}},n.prototype.update=function(e,r){var t,a,s,u,d,c,g,m,_=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||r===initEvent)&&this.options.execute)this.execute(this.state);else for(var b=void 0;b=this._outgoingQueue.shift();)b[0].send(b[1]);if(this.children.forEach(function(W){_.state.children[W.id]=W}),this.devTools&&this.devTools.send(r.data,e),e.event)try{for(var S=__values(this.eventListeners),C=S.next();!C.done;C=S.next()){var R=C.value;R(e.event)}}catch(W){t={error:W}}finally{try{C&&!C.done&&(a=S.return)&&a.call(S)}finally{if(t)throw t.error}}try{for(var w=__values(this.listeners),k=w.next();!k.done;k=w.next()){var R=k.value;R(e,e.event)}}catch(W){s={error:W}}finally{try{k&&!k.done&&(u=w.return)&&u.call(w)}finally{if(s)throw s.error}}try{for(var $=__values(this.contextListeners),O=$.next();!O.done;O=$.next()){var I=O.value;I(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(W){d={error:W}}finally{try{O&&!O.done&&(c=$.return)&&c.call($)}finally{if(d)throw d.error}}if(this.state.done){var x=e.configuration.find(function(W){return W.type==="final"&&W.parent===_.machine}),P=x&&x.doneData?mapContext(x.doneData,e.context,r):void 0;try{for(var B=__values(this.doneListeners),j=B.next();!j.done;j=B.next()){var R=j.value;R(doneInvoke(this.id,P))}}catch(W){g={error:W}}finally{try{j&&!j.done&&(m=B.return)&&m.call(B)}finally{if(g)throw g.error}}this._stop(),this._stopChildren()}},n.prototype.onTransition=function(e){return this.listeners.add(e),this.status===InterpreterStatus.Running&&e(this.state,this.state.event),this},n.prototype.subscribe=function(e,r,t){var a=this,s=toObserver(e,r,t);this.listeners.add(s.next),this.status!==InterpreterStatus.NotStarted&&s.next(this.state);var u=function(){a.doneListeners.delete(u),a.stopListeners.delete(u),s.complete()};return this.status===InterpreterStatus.Stopped?s.complete():(this.onDone(u),this.onStop(u)),{unsubscribe:function(){a.listeners.delete(s.next),a.doneListeners.delete(u),a.stopListeners.delete(u)}}},n.prototype.onEvent=function(e){return this.eventListeners.add(e),this},n.prototype.onSend=function(e){return this.sendListeners.add(e),this},n.prototype.onChange=function(e){return this.contextListeners.add(e),this},n.prototype.onStop=function(e){return this.stopListeners.add(e),this},n.prototype.onDone=function(e){return this.doneListeners.add(e),this},n.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},n.prototype.start=function(e){var r=this;if(this.status===InterpreterStatus.Running)return this;this.machine._init(),registry.register(this.sessionId,this),this.initialized=!0,this.status=InterpreterStatus.Running;var t=e===void 0?this.initialState:provide(this,function(){return isStateConfig(e)?r.machine.resolveState(e):r.machine.resolveState(State$2.from(e,r.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){r.update(t,initEvent)}),this},n.prototype._stopChildren=function(){this.children.forEach(function(e){isFunction(e.stop)&&e.stop()}),this.children.clear()},n.prototype._stop=function(){var e,r,t,a,s,u,d,c,g,m;try{for(var _=__values(this.listeners),b=_.next();!b.done;b=_.next()){var S=b.value;this.listeners.delete(S)}}catch(B){e={error:B}}finally{try{b&&!b.done&&(r=_.return)&&r.call(_)}finally{if(e)throw e.error}}try{for(var C=__values(this.stopListeners),R=C.next();!R.done;R=C.next()){var S=R.value;S(),this.stopListeners.delete(S)}}catch(B){t={error:B}}finally{try{R&&!R.done&&(a=C.return)&&a.call(C)}finally{if(t)throw t.error}}try{for(var w=__values(this.contextListeners),k=w.next();!k.done;k=w.next()){var S=k.value;this.contextListeners.delete(S)}}catch(B){s={error:B}}finally{try{k&&!k.done&&(u=w.return)&&u.call(w)}finally{if(s)throw s.error}}try{for(var $=__values(this.doneListeners),O=$.next();!O.done;O=$.next()){var S=O.value;this.doneListeners.delete(S)}}catch(B){d={error:B}}finally{try{O&&!O.done&&(c=$.return)&&c.call($)}finally{if(d)throw d.error}}if(!this.initialized)return this;this.initialized=!1,this.status=InterpreterStatus.Stopped,this._initialState=void 0;try{for(var I=__values(Object.keys(this.delayedEventsMap)),x=I.next();!x.done;x=I.next()){var P=x.value;this.clock.clearTimeout(this.delayedEventsMap[P])}}catch(B){g={error:B}}finally{try{x&&!x.done&&(m=I.return)&&m.call(I)}finally{if(g)throw g.error}}this.scheduler.clear(),this.scheduler=new Scheduler({deferEvents:this.options.deferEvents})},n.prototype.stop=function(){var e=this,r=this.scheduler;return this._stop(),r.schedule(function(){var t=toSCXMLEvent({type:"xstate.stop"}),a=provide(e,function(){var s=flatten(__spreadArray([],__read(e.state.configuration),!1).sort(function(m,_){return _.order-m.order}).map(function(m){return toActionObjects(m.onExit,e.machine.options.actions)})),u=__read(resolveActions(e.machine,e.state,e.state.context,t,[s],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=u[0],c=u[1],g=new State$2({value:e.state.value,context:c,_event:t,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(m){return m.type!==raise$1&&(m.type!==send$1||!!m.to&&m.to!==SpecialTargets.Internal)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return g.changed=!0,g});e.update(a,t),e._stopChildren(),registry.free(e.sessionId)}),this},n.prototype.batch=function(e){var r=this;if(this.status===InterpreterStatus.NotStarted&&this.options.deferEvents)IS_PRODUCTION||warn(!1,"".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,`" and are deferred. Make sure .start() is called for this service.
Event: `).concat(JSON.stringify(event)));else if(this.status!==InterpreterStatus.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(!!e.length){var t=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var a,s,u=r.state,d=!1,c=[],g=function(S){var C=toSCXMLEvent(S);r.forward(C),u=provide(r,function(){return r.machine.transition(u,C,void 0,t||void 0)}),c.push.apply(c,__spreadArray([],__read(r.machine.config.predictableActionArguments?u.actions:u.actions.map(function(R){return bindActionToState(R,u)})),!1)),d=d||!!u.changed};try{for(var m=__values(e),_=m.next();!_.done;_=m.next()){var b=_.value;g(b)}}catch(S){a={error:S}}finally{try{_&&!_.done&&(s=m.return)&&s.call(m)}finally{if(a)throw a.error}}u.changed=d,u.actions=c,r.update(u,toSCXMLEvent(e[e.length-1]))})}},n.prototype.sender=function(e){return this.send.bind(this,e)},n.prototype._nextState=function(e,r){var t=this;r===void 0&&(r=!!this.machine.config.predictableActionArguments&&this._exec);var a=toSCXMLEvent(e);if(a.name.indexOf(errorPlatform)===0&&!this.state.nextEvents.some(function(u){return u.indexOf(errorPlatform)===0}))throw a.data.data;var s=provide(this,function(){return t.machine.transition(t.state,a,void 0,r||void 0)});return s},n.prototype.nextState=function(e){return this._nextState(e,!1)},n.prototype.forward=function(e){var r,t;try{for(var a=__values(this.forwardTo),s=a.next();!s.done;s=a.next()){var u=s.value,d=this.children.get(u);if(!d)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(u,"'."));d.send(e)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(r)throw r.error}}},n.prototype.defer=function(e){var r=this;this.delayedEventsMap[e.id]=this.clock.setTimeout(function(){e.to?r.sendTo(e._event,e.to,!0):r.send(e._event)},e.delay)},n.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},n.prototype.exec=function(e,r,t){t===void 0&&(t=this.machine.options.actions),this._exec(e,r.context,r._event,t)},n.prototype.removeChild=function(e){var r;this.children.delete(e),this.forwardTo.delete(e),(r=this.state)===null||r===void 0||delete r.children[e]},n.prototype.stopChild=function(e){var r=this.children.get(e);!r||(this.removeChild(e),isFunction(r.stop)&&r.stop())},n.prototype.spawn=function(e,r,t){if(this.status!==InterpreterStatus.Running)return createDeferredActor(e,r);if(isPromiseLike(e))return this.spawnPromise(Promise.resolve(e),r);if(isFunction(e))return this.spawnCallback(e,r);if(isSpawnedActor(e))return this.spawnActor(e,r);if(isObservable(e))return this.spawnObservable(e,r);if(isMachine(e))return this.spawnMachine(e,__assign(__assign({},t),{id:r}));if(isBehavior(e))return this.spawnBehavior(e,r);throw new Error('Unable to spawn entity "'.concat(r,'" of type "').concat(typeof e,'".'))},n.prototype.spawnMachine=function(e,r){var t=this;r===void 0&&(r={});var a=new n(e,__assign(__assign({},this.options),{parent:this,id:r.id||e.id})),s=__assign(__assign({},DEFAULT_SPAWN_OPTIONS),r);s.sync&&a.onTransition(function(d){t.send(update,{state:d,id:a.id})});var u=a;return this.children.set(a.id,u),s.autoForward&&this.forwardTo.add(a.id),a.onDone(function(d){t.removeChild(a.id),t.send(toSCXMLEvent(d,{origin:a.id}))}).start(),u},n.prototype.spawnBehavior=function(e,r){var t=spawnBehavior(e,{id:r,parent:this});return this.children.set(r,t),t},n.prototype.spawnPromise=function(e,r){var t,a=this,s=!1,u;e.then(function(c){s||(u=c,a.removeChild(r),a.send(toSCXMLEvent(doneInvoke(r,c),{origin:r})))},function(c){if(!s){a.removeChild(r);var g=error$2(r,c);try{a.send(toSCXMLEvent(g,{origin:r}))}catch(m){reportUnhandledExceptionOnInvocation(c,m,r),a.devTools&&a.devTools.send(g,a.state),a.machine.strict&&a.stop()}}});var d=(t={id:r,send:function(){},subscribe:function(c,g,m){var _=toObserver(c,g,m),b=!1;return e.then(function(S){b||(_.next(S),!b&&_.complete())},function(S){b||_.error(S)}),{unsubscribe:function(){return b=!0}}},stop:function(){s=!0},toJSON:function(){return{id:r}},getSnapshot:function(){return u}},t[symbolObservable]=function(){return this},t);return this.children.set(r,d),d},n.prototype.spawnCallback=function(e,r){var t,a=this,s=!1,u=new Set,d=new Set,c,g=function(b){c=b,d.forEach(function(S){return S(b)}),!s&&a.send(toSCXMLEvent(b,{origin:r}))},m;try{m=e(g,function(b){u.add(b)})}catch(b){this.send(error$2(r,b))}if(isPromiseLike(m))return this.spawnPromise(m,r);var _=(t={id:r,send:function(b){return u.forEach(function(S){return S(b)})},subscribe:function(b){var S=toObserver(b);return d.add(S.next),{unsubscribe:function(){d.delete(S.next)}}},stop:function(){s=!0,isFunction(m)&&m()},toJSON:function(){return{id:r}},getSnapshot:function(){return c}},t[symbolObservable]=function(){return this},t);return this.children.set(r,_),_},n.prototype.spawnObservable=function(e,r){var t,a=this,s,u=e.subscribe(function(c){s=c,a.send(toSCXMLEvent(c,{origin:r}))},function(c){a.removeChild(r),a.send(toSCXMLEvent(error$2(r,c),{origin:r}))},function(){a.removeChild(r),a.send(toSCXMLEvent(doneInvoke(r),{origin:r}))}),d=(t={id:r,send:function(){},subscribe:function(c,g,m){return e.subscribe(c,g,m)},stop:function(){return u.unsubscribe()},getSnapshot:function(){return s},toJSON:function(){return{id:r}}},t[symbolObservable]=function(){return this},t);return this.children.set(r,d),d},n.prototype.spawnActor=function(e,r){return this.children.set(r,e),e},n.prototype.spawnActivity=function(e){var r=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(!r){IS_PRODUCTION||warn(!1,"No implementation found for activity '".concat(e.type,"'"));return}var t=r(this.state.context,e);this.spawnEffect(e.id,t)},n.prototype.spawnEffect=function(e,r){var t;this.children.set(e,(t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:r||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},t[symbolObservable]=function(){return this},t))},n.prototype.attachDev=function(){var e=getGlobal();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var r=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign(__assign({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},r),{features:__assign({jump:!1,skip:!1},r?r.features:void 0)}),this.machine),this.devTools.init(this.state)}registerService(this)}},n.prototype.toJSON=function(){return{id:this.id}},n.prototype[symbolObservable]=function(){return this},n.prototype.getSnapshot=function(){return this.status===InterpreterStatus.NotStarted?this.initialState:this._state},n.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,r){return setTimeout(e,r)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},n.interpret=interpret,n}();function interpret(n,e){var r=new Interpreter(n,e);return r}function toInvokeSource(n){if(typeof n=="string"){var e={type:n};return e.toString=function(){return n},e}return n}function toInvokeDefinition(n){return __assign(__assign({type:invoke},n),{toJSON:function(){n.onDone,n.onError;var e=__rest(n,["onDone","onError"]);return __assign(__assign({},e),{type:invoke,src:toInvokeSource(n.src)})}})}var NULL_EVENT="",STATE_IDENTIFIER="#",WILDCARD="*",EMPTY_OBJECT={},isStateId=function(n){return n[0]===STATE_IDENTIFIER},createDefaultOptions=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},StateNode=function(){function n(e,r,t,a){t===void 0&&(t="context"in e?e.context:void 0);var s=this,u;this.config=e,this._context=t,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(createDefaultOptions(),r),this.parent=a==null?void 0:a.parent,this.key=this.config.key||(a==null?void 0:a.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:STATE_DELIMITER),this.id=this.config.id||__spreadArray([this.machine.key],__read(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(u=this.config.schema)!==null&&u!==void 0?u:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?mapValues(this.config.states,function(g,m){var _,b=new n(g,{},void 0,{parent:s,key:m});return Object.assign(s.idMap,__assign((_={},_[b.id]=b,_),b.idMap)),b}):EMPTY_OBJECT;var d=0;function c(g){var m,_;g.order=d++;try{for(var b=__values(getAllChildren(g)),S=b.next();!S.done;S=b.next()){var C=S.value;c(C)}}catch(R){m={error:R}}finally{try{S&&!S.done&&(_=b.return)&&_.call(b)}finally{if(m)throw m.error}}}c(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(g){var m=g.event;return m===NULL_EVENT}):NULL_EVENT in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=toArray(this.config.entry||this.config.onEntry).map(function(g){return toActionObject(g)}),this.onExit=toArray(this.config.exit||this.config.onExit).map(function(g){return toActionObject(g)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=toArray(this.config.invoke).map(function(g,m){var _,b;if(isMachine(g)){var S=createInvokeId(s.id,m);return s.machine.options.services=__assign((_={},_[S]=g,_),s.machine.options.services),toInvokeDefinition({src:S,id:S})}else if(isString(g.src)){var S=g.id||createInvokeId(s.id,m);return toInvokeDefinition(__assign(__assign({},g),{id:S,src:g.src}))}else if(isMachine(g.src)||isFunction(g.src)){var S=g.id||createInvokeId(s.id,m);return s.machine.options.services=__assign((b={},b[S]=g.src,b),s.machine.options.services),toInvokeDefinition(__assign(__assign({id:S},g),{src:S}))}else{var C=g.src;return toInvokeDefinition(__assign(__assign({id:createInvokeId(s.id,m)},g),{src:C}))}}),this.activities=toArray(this.config.activities).concat(this.invoke).map(function(g){return toActivityDefinition(g)}),this.transition=this.transition.bind(this),this.tags=toArray(this.config.tags)}return n.prototype._init=function(){this.__cache.transitions||getAllStateNodes(this).forEach(function(e){return e.on})},n.prototype.withConfig=function(e,r){var t=this.options,a=t.actions,s=t.activities,u=t.guards,d=t.services,c=t.delays;return new n(this.config,{actions:__assign(__assign({},a),e.actions),activities:__assign(__assign({},s),e.activities),guards:__assign(__assign({},u),e.guards),services:__assign(__assign({},d),e.services),delays:__assign(__assign({},c),e.delays)},r??this.context)},n.prototype.withContext=function(e){return new n(this.config,this.options,e)},Object.defineProperty(n.prototype,"context",{get:function(){return isFunction(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:mapValues(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return this.definition},Object.defineProperty(n.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(r,t){return r[t.eventType]=r[t.eventType]||[],r[t.eventType].push(t),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),n.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var r=e===NULL_EVENT,t=this.transitions.filter(function(a){var s=a.eventType===e;return r?s:s||a.eventType===WILDCARD});return this.__cache.candidates[e]=t,t},n.prototype.getDelayedTransitions=function(){var e=this,r=this.config.after;if(!r)return[];var t=function(s,u){var d=isFunction(s)?"".concat(e.id,":delay[").concat(u,"]"):s,c=after(d,e.id);return e.onEntry.push(send(c,{delay:s})),e.onExit.push(cancel(c)),c},a=isArray(r)?r.map(function(s,u){var d=t(s.delay,u);return __assign(__assign({},s),{event:d})}):flatten(Object.keys(r).map(function(s,u){var d=r[s],c=isString(d)?{target:d}:d,g=isNaN(+s)?s:+s,m=t(g,u);return toArray(c).map(function(_){return __assign(__assign({},_),{event:m,delay:g})})}));return a.map(function(s){var u=s.delay;return __assign(__assign({},e.formatTransition(s)),{delay:u})})},n.prototype.getStateNodes=function(e){var r,t=this;if(!e)return[];var a=e instanceof State$2?e.value:toStateValue(e,this.delimiter);if(isString(a)){var s=this.getStateNode(a).initial;return s!==void 0?this.getStateNodes((r={},r[a]=s,r)):[this,this.states[a]]}var u=Object.keys(a),d=[this];return d.push.apply(d,__spreadArray([],__read(flatten(u.map(function(c){return t.getStateNode(c).getStateNodes(a[c])}))),!1)),d},n.prototype.handles=function(e){var r=getEventType(e);return this.events.includes(r)},n.prototype.resolveState=function(e){var r=e instanceof State$2?e:State$2.create(e),t=Array.from(getConfiguration([],this.getStateNodes(r.value)));return new State$2(__assign(__assign({},r),{value:this.resolve(r.value),configuration:t,done:isInFinalState(t,this),tags:getTagsFromConfiguration(t),machine:this.machine}))},n.prototype.transitionLeafNode=function(e,r,t){var a=this.getStateNode(e),s=a.next(r,t);return!s||!s.transitions.length?this.next(r,t):s},n.prototype.transitionCompoundNode=function(e,r,t){var a=Object.keys(e),s=this.getStateNode(a[0]),u=s._transition(e[a[0]],r,t);return!u||!u.transitions.length?this.next(r,t):u},n.prototype.transitionParallelNode=function(e,r,t){var a,s,u={};try{for(var d=__values(Object.keys(e)),c=d.next();!c.done;c=d.next()){var g=c.value,m=e[g];if(!!m){var _=this.getStateNode(g),b=_._transition(m,r,t);b&&(u[g]=b)}}}catch(k){a={error:k}}finally{try{c&&!c.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}var S=Object.keys(u).map(function(k){return u[k]}),C=flatten(S.map(function(k){return k.transitions})),R=S.some(function(k){return k.transitions.length>0});if(!R)return this.next(r,t);var w=flatten(Object.keys(u).map(function(k){return u[k].configuration}));return{transitions:C,exitSet:flatten(S.map(function(k){return k.exitSet})),configuration:w,source:r,actions:flatten(Object.keys(u).map(function(k){return u[k].actions}))}},n.prototype._transition=function(e,r,t){return isString(e)?this.transitionLeafNode(e,r,t):Object.keys(e).length===1?this.transitionCompoundNode(e,r,t):this.transitionParallelNode(e,r,t)},n.prototype.getTransitionData=function(e,r){return this._transition(e.value,e,toSCXMLEvent(r))},n.prototype.next=function(e,r){var t,a,s=this,u=r.name,d=[],c=[],g;try{for(var m=__values(this.getCandidates(u)),_=m.next();!_.done;_=m.next()){var b=_.value,S=b.cond,C=b.in,R=e.context,w=C?isString(C)&&isStateId(C)?e.matches(toStateValue(this.getStateNodeById(C).path,this.delimiter)):matchesState(toStateValue(C,this.delimiter),path(this.path.slice(0,-2))(e.value)):!0,k=!1;try{k=!S||evaluateGuard(this.machine,S,R,r,e)}catch(I){throw new Error("Unable to evaluate guard '".concat(S.name||S.type,"' in transition for event '").concat(u,"' in state node '").concat(this.id,`':
`).concat(I.message))}if(k&&w){b.target!==void 0&&(c=b.target),d.push.apply(d,__spreadArray([],__read(b.actions),!1)),g=b;break}}}catch(I){t={error:I}}finally{try{_&&!_.done&&(a=m.return)&&a.call(m)}finally{if(t)throw t.error}}if(!!g){if(!c.length)return{transitions:[g],exitSet:[],configuration:e.value?[this]:[],source:e,actions:d};var $=flatten(c.map(function(I){return s.getRelativeStateNodes(I,e.historyValue)})),O=!!g.internal;return{transitions:[g],exitSet:O?[]:flatten(c.map(function(I){return s.getPotentiallyReenteringNodes(I)})),configuration:$,source:e,actions:d}}},n.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var r=[],t=this,a=e;t&&t!==a;)r.push(t),t=t.parent;return t!==a?[]:(r.push(a),r)},n.prototype.getActions=function(e,r,t,a,s,u,d){var c,g,m,_,b=this,S=u?getConfiguration([],this.getStateNodes(u.value)):[],C=new Set;try{for(var R=__values(Array.from(e).sort(function(z,F){return z.order-F.order})),w=R.next();!w.done;w=R.next()){var k=w.value;(!has(S,k)||has(t.exitSet,k)||k.parent&&C.has(k.parent))&&C.add(k)}}catch(z){c={error:z}}finally{try{w&&!w.done&&(g=R.return)&&g.call(R)}finally{if(c)throw c.error}}try{for(var $=__values(S),O=$.next();!O.done;O=$.next()){var k=O.value;(!has(e,k)||has(t.exitSet,k.parent))&&t.exitSet.push(k)}}catch(z){m={error:z}}finally{try{O&&!O.done&&(_=$.return)&&_.call($)}finally{if(m)throw m.error}}t.exitSet.sort(function(z,F){return F.order-z.order});var I=Array.from(C).sort(function(z,F){return z.order-F.order}),x=new Set(t.exitSet),P=flatten(I.map(function(z){var F=[];if(z.type!=="final")return F;var Y=z.parent;if(!Y.parent)return F;F.push(done(z.id,z.doneData),done(Y.id,z.doneData?mapContext(z.doneData,a,s):void 0));var X=Y.parent;return X.type==="parallel"&&getChildren(X).every(function(K){return isInFinalState(t.configuration,K)})&&F.push(done(X.id)),F})),B=I.map(function(z){var F=z.onEntry,Y=z.activities.map(function(X){return start$1(X)});return toActionObjects(d?__spreadArray(__spreadArray([],__read(F),!1),__read(Y),!1):__spreadArray(__spreadArray([],__read(Y),!1),__read(F),!1),b.machine.options.actions)}).concat([P.map(raise)]),j=Array.from(x).map(function(z){return toActionObjects(__spreadArray(__spreadArray([],__read(z.onExit),!1),__read(z.activities.map(function(F){return stop(F)})),!1),b.machine.options.actions)}),W=j.concat([toActionObjects(t.actions,this.machine.options.actions)]).concat(B);if(r){var U=toActionObjects(flatten(__spreadArray([],__read(e),!1).sort(function(z,F){return F.order-z.order}).map(function(z){return z.onExit})),this.machine.options.actions).filter(function(z){return z.type!==raise$1&&(z.type!==send$1||!!z.to&&z.to!==SpecialTargets.Internal)});return W.concat([U])}return W},n.prototype.transition=function(e,r,t,a){e===void 0&&(e=this.initialState);var s=toSCXMLEvent(r),u;if(e instanceof State$2)u=t===void 0?e:this.resolveState(State$2.from(e,t));else{var d=isString(e)?this.resolve(pathToStateValue(this.getResolvedPath(e))):this.resolve(e),c=t??this.machine.context;u=this.resolveState(State$2.from(d,c))}if(this.strict&&!this.events.includes(s.name)&&!isBuiltInEvent(s.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(s.name,"'"));var g=this._transition(u.value,u,s)||{transitions:[],configuration:[],exitSet:[],source:u,actions:[]},m=getConfiguration([],this.getStateNodes(u.value)),_=g.configuration.length?getConfiguration(m,g.configuration):m;return g.configuration=__spreadArray([],__read(_),!1),this.resolveTransition(g,u,u.context,a,s)},n.prototype.resolveRaisedTransition=function(e,r,t,a){var s,u=e.actions;return e=this.transition(e,r,void 0,a),e._event=t,e.event=t.data,(s=e.actions).unshift.apply(s,__spreadArray([],__read(u),!1)),e},n.prototype.resolveTransition=function(e,r,t,a,s){var u,d,c,g,m=this;s===void 0&&(s=initEvent);var _=e.configuration,b=!r||e.transitions.length>0,S=b?e.configuration:r?r.configuration:[],C=isInFinalState(S,this),R=b?getValue(this.machine,_):void 0,w=r?r.historyValue?r.historyValue:e.source?this.machine.historyValue(r.value):void 0:void 0,k=this.getActions(new Set(S),C,e,t,s,r,a),$=r?__assign({},r.activities):{};try{for(var O=__values(k),I=O.next();!I.done;I=O.next()){var x=I.value;try{for(var P=(c=void 0,__values(x)),B=P.next();!B.done;B=P.next()){var j=B.value;j.type===start$2?$[j.activity.id||j.activity.type]=j:j.type===stop$1&&($[j.activity.id||j.activity.type]=!1)}}catch(ee){c={error:ee}}finally{try{B&&!B.done&&(g=P.return)&&g.call(P)}finally{if(c)throw c.error}}}}catch(ee){u={error:ee}}finally{try{I&&!I.done&&(d=O.return)&&d.call(O)}finally{if(u)throw u.error}}var W=__read(resolveActions(this,r,t,s,k,a,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),U=W[0],z=W[1],F=__read(partition(U,function(ee){return ee.type===raise$1||ee.type===send$1&&ee.to===SpecialTargets.Internal}),2),Y=F[0],X=F[1],K=U.filter(function(ee){var ie;return ee.type===start$2&&((ie=ee.activity)===null||ie===void 0?void 0:ie.type)===invoke}),te=K.reduce(function(ee,ie){return ee[ie.activity.id]=createInvocableActor(ie.activity,m.machine,z,s),ee},r?__assign({},r.children):{}),Z=new State$2({value:R||r.value,context:z,_event:s,_sessionid:r?r._sessionid:null,historyValue:R?w?updateHistoryValue(w,R):void 0:r?r.historyValue:void 0,history:!R||e.source?r:void 0,actions:R?X:[],activities:R?$:r?r.activities:{},events:[],configuration:S,transitions:e.transitions,children:te,done:C,tags:getTagsFromConfiguration(S),machine:this}),H=t!==z;Z.changed=s.name===update||H;var Q=Z.history;Q&&delete Q.history;var ne=!C&&(this._transient||_.some(function(ee){return ee._transient}));if(!b&&(!ne||s.name===NULL_EVENT))return Z;var V=Z;if(!C)for(ne&&(V=this.resolveRaisedTransition(V,{type:nullEvent},s,a));Y.length;){var J=Y.shift();V=this.resolveRaisedTransition(V,J._event,s,a)}var ce=V.changed||(Q?!!V.actions.length||H||typeof Q.value!=typeof V.value||!stateValuesEqual(V.value,Q.value):void 0);return V.changed=ce,V.history=Q,V},n.prototype.getStateNode=function(e){if(isStateId(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[e];if(!r)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return r},n.prototype.getStateNodeById=function(e){var r=isStateId(e)?e.slice(STATE_IDENTIFIER.length):e;if(r===this.id)return this;var t=this.machine.idMap[r];if(!t)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return t},n.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&isStateId(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var r=toStatePath(e,this.delimiter).slice(),t=this;r.length;){var a=r.shift();if(!a.length)break;t=t.getStateNode(a)}return t},n.prototype.resolve=function(e){var r,t=this;if(!e)return this.initialStateValue||EMPTY_OBJECT;switch(this.type){case"parallel":return mapValues(this.initialStateValue,function(s,u){return s?t.getStateNode(u).resolve(e[u]||s):EMPTY_OBJECT});case"compound":if(isString(e)){var a=this.getStateNode(e);return a.type==="parallel"||a.type==="compound"?(r={},r[e]=a.initialStateValue,r):e}return Object.keys(e).length?mapValues(e,function(s,u){return s?t.getStateNode(u).resolve(s):EMPTY_OBJECT}):this.initialStateValue||{};default:return e||EMPTY_OBJECT}},n.prototype.getResolvedPath=function(e){if(isStateId(e)){var r=this.machine.idMap[e.slice(STATE_IDENTIFIER.length)];if(!r)throw new Error("Unable to find state node '".concat(e,"'"));return r.path}return toStatePath(e,this.delimiter)},Object.defineProperty(n.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var r;if(this.type==="parallel")r=mapFilterValues(this.states,function(t){return t.initialStateValue||EMPTY_OBJECT},function(t){return t.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=isLeafNode(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),n.prototype.getInitialState=function(e,r){this._init();var t=this.getStateNodes(e);return this.resolveTransition({configuration:t,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r??this.machine.context,void 0)},Object.defineProperty(n.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"target",{get:function(){var e;if(this.type==="history"){var r=this.config;isString(r.target)?e=isStateId(r.target)?pathToStateValue(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target:e=r.target}return e},enumerable:!1,configurable:!0}),n.prototype.getRelativeStateNodes=function(e,r,t){return t===void 0&&(t=!0),t?e.type==="history"?e.resolveHistory(r):e.initialStateNodes:[e]},Object.defineProperty(n.prototype,"initialStateNodes",{get:function(){var e=this;if(isLeafNode(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var r=toStatePaths(this.initialStateValue);return flatten(r.map(function(t){return e.getFromRelativePath(t)}))},enumerable:!1,configurable:!0}),n.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var r=__read(e),t=r[0],a=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(t,"' from node with no states"));var s=this.getStateNode(t);if(s.type==="history")return s.resolveHistory();if(!this.states[t])throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return this.states[t].getFromRelativePath(a)},n.prototype.historyValue=function(e){if(!!Object.keys(this.states).length)return{current:e||this.initialStateValue,states:mapFilterValues(this.states,function(r,t){if(!e)return r.historyValue();var a=isString(e)?void 0:e[t];return r.historyValue(a||r.initialStateValue)},function(r){return!r.history})}},n.prototype.resolveHistory=function(e){var r=this;if(this.type!=="history")return[this];var t=this.parent;if(!e){var a=this.target;return a?flatten(toStatePaths(a).map(function(u){return t.getFromRelativePath(u)})):t.initialStateNodes}var s=nestedPath(t.path,"states")(e).current;return isString(s)?[t.getStateNode(s)]:flatten(toStatePaths(s).map(function(u){return r.history==="deep"?t.getFromRelativePath(u):[t.states[u[0]]]}))},Object.defineProperty(n.prototype,"stateIds",{get:function(){var e=this,r=flatten(Object.keys(this.states).map(function(t){return e.states[t].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"events",{get:function(){var e,r,t,a;if(this.__cache.events)return this.__cache.events;var s=this.states,u=new Set(this.ownEvents);if(s)try{for(var d=__values(Object.keys(s)),c=d.next();!c.done;c=d.next()){var g=c.value,m=s[g];if(m.states)try{for(var _=(t=void 0,__values(m.events)),b=_.next();!b.done;b=_.next()){var S=b.value;u.add("".concat(S))}}catch(C){t={error:C}}finally{try{b&&!b.done&&(a=_.return)&&a.call(_)}finally{if(t)throw t.error}}}}catch(C){e={error:C}}finally{try{c&&!c.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(u)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),n.prototype.resolveTarget=function(e){var r=this;if(e!==void 0)return e.map(function(t){if(!isString(t))return t;var a=t[0]===r.delimiter;if(a&&!r.parent)return r.getStateNodeByPath(t.slice(1));var s=a?r.key+t:t;if(r.parent)try{var u=r.parent.getStateNodeByPath(s);return u}catch(d){throw new Error("Invalid transition definition for state node '".concat(r.id,`':
`).concat(d.message))}else return r.getStateNodeByPath(s)})},n.prototype.formatTransition=function(e){var r=this,t=normalizeTarget(e.target),a="internal"in e?e.internal:t?t.some(function(c){return isString(c)&&c[0]===r.delimiter}):!0,s=this.machine.options.guards,u=this.resolveTarget(t),d=__assign(__assign({},e),{actions:toActionObjects(toArray(e.actions)),cond:toGuard(e.cond,s),target:u,source:this,internal:a,eventType:e.event,toJSON:function(){return __assign(__assign({},d),{target:d.target?d.target.map(function(c){return"#".concat(c.id)}):void 0,source:"#".concat(r.id)})}});return d},n.prototype.formatTransitions=function(){var e,r,t=this,a;if(!this.config.on)a=[];else if(Array.isArray(this.config.on))a=this.config.on;else{var s=this.config.on,u=WILDCARD,d=s[u],c=d===void 0?[]:d,g=__rest(s,[typeof u=="symbol"?u:u+""]);a=flatten(Object.keys(g).map(function($){var O=toTransitionConfigArray($,g[$]);return O}).concat(toTransitionConfigArray(WILDCARD,c)))}var m=this.config.always?toTransitionConfigArray("",this.config.always):[],_=this.config.onDone?toTransitionConfigArray(String(done(this.id)),this.config.onDone):[],b=flatten(this.invoke.map(function($){var O=[];return $.onDone&&O.push.apply(O,__spreadArray([],__read(toTransitionConfigArray(String(doneInvoke($.id)),$.onDone)),!1)),$.onError&&O.push.apply(O,__spreadArray([],__read(toTransitionConfigArray(String(error$2($.id)),$.onError)),!1)),O})),S=this.after,C=flatten(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],__read(_),!1),__read(b),!1),__read(a),!1),__read(m),!1).map(function($){return toArray($).map(function(O){return t.formatTransition(O)})}));try{for(var R=__values(S),w=R.next();!w.done;w=R.next()){var k=w.value;C.push(k)}}catch($){e={error:$}}finally{try{w&&!w.done&&(r=R.return)&&r.call(R)}finally{if(e)throw e.error}}return C},n}(),warned=!1;function createMachine(n,e){return!IS_PRODUCTION&&!("predictableActionArguments"in n)&&!warned&&(warned=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new StateNode(n,e)}var assign=assign$1,commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fastSafeStringify=stringify$1;stringify$1.default=stringify$1;stringify$1.stable=deterministicStringify;stringify$1.stableStringify=deterministicStringify;var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE="[Circular]",arr=[],replacerStack=[];function defaultOptions(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function stringify$1(n,e,r,t){typeof t>"u"&&(t=defaultOptions()),decirc(n,"",0,[],void 0,0,t);var a;try{replacerStack.length===0?a=JSON.stringify(n,e,r):a=JSON.stringify(n,replaceGetterValues(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var s=arr.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return a}function setReplace(n,e,r,t){var a=Object.getOwnPropertyDescriptor(t,r);a.get!==void 0?a.configurable?(Object.defineProperty(t,r,{value:n}),arr.push([t,r,e,a])):replacerStack.push([e,r,n]):(t[r]=n,arr.push([t,r,e]))}function decirc(n,e,r,t,a,s,u){s+=1;var d;if(typeof n=="object"&&n!==null){for(d=0;d<t.length;d++)if(t[d]===n){setReplace(CIRCULAR_REPLACE_NODE,n,e,a);return}if(typeof u.depthLimit<"u"&&s>u.depthLimit){setReplace(LIMIT_REPLACE_NODE,n,e,a);return}if(typeof u.edgesLimit<"u"&&r+1>u.edgesLimit){setReplace(LIMIT_REPLACE_NODE,n,e,a);return}if(t.push(n),Array.isArray(n))for(d=0;d<n.length;d++)decirc(n[d],d,d,t,n,s,u);else{var c=Object.keys(n);for(d=0;d<c.length;d++){var g=c[d];decirc(n[g],g,d,t,n,s,u)}}t.pop()}}function compareFunction(n,e){return n<e?-1:n>e?1:0}function deterministicStringify(n,e,r,t){typeof t>"u"&&(t=defaultOptions());var a=deterministicDecirc(n,"",0,[],void 0,0,t)||n,s;try{replacerStack.length===0?s=JSON.stringify(a,e,r):s=JSON.stringify(a,replaceGetterValues(e),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;arr.length!==0;){var u=arr.pop();u.length===4?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}}return s}function deterministicDecirc(n,e,r,t,a,s,u){s+=1;var d;if(typeof n=="object"&&n!==null){for(d=0;d<t.length;d++)if(t[d]===n){setReplace(CIRCULAR_REPLACE_NODE,n,e,a);return}try{if(typeof n.toJSON=="function")return}catch{return}if(typeof u.depthLimit<"u"&&s>u.depthLimit){setReplace(LIMIT_REPLACE_NODE,n,e,a);return}if(typeof u.edgesLimit<"u"&&r+1>u.edgesLimit){setReplace(LIMIT_REPLACE_NODE,n,e,a);return}if(t.push(n),Array.isArray(n))for(d=0;d<n.length;d++)deterministicDecirc(n[d],d,d,t,n,s,u);else{var c={},g=Object.keys(n).sort(compareFunction);for(d=0;d<g.length;d++){var m=g[d];deterministicDecirc(n[m],m,d,t,n,s,u),c[m]=n[m]}if(typeof a<"u")arr.push([a,e,n]),a[e]=c;else return c}t.pop()}}function replaceGetterValues(n){return n=typeof n<"u"?n:function(e,r){return r},function(e,r){if(replacerStack.length>0)for(var t=0;t<replacerStack.length;t++){var a=replacerStack[t];if(a[1]===e&&a[0]===r){r=a[2],replacerStack.splice(t,1);break}}return n.call(this,e,r)}}const safeStringify=fastSafeStringify;function getLazy(n){return typeof n=="function"?n():n}function stringify(n,e){try{return JSON.stringify(n,e)}catch{return safeStringify(n,e)}}function selectivelyStringify(n,e,r){var t,a,s={};try{for(var u=__values$1(e),d=u.next();!d.done;d=u.next()){var c=d.value;s[c]=n[c]}}catch(m){t={error:m}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(t)throw t.error}}var g=JSON.parse(stringify(s,r));return stringify(__assign$1(__assign$1({},n),g))}function stringifyState(n,e){n.machine,n.configuration,n.history;var r=__rest$1(n,["machine","configuration","history"]);return selectivelyStringify(r,["context","event","_event"],e)}function stringifyMachine(n,e){return selectivelyStringify(n.definition,["context"],e)}function createInspectMachine(n,e){n===void 0&&(n=globalThis.__xstate__);var r=new Map,t=n.onRegister(function(a){r.set(a.sessionId,a)});return createMachine({initial:"pendingConnection",context:{client:void 0},states:{pendingConnection:{},connected:{on:{"service.state":{actions:function(a,s){return a.client.send(s)}},"service.event":{actions:function(a,s){return a.client.send(s)}},"service.register":{actions:function(a,s){return a.client.send(s)}},"service.stop":{actions:function(a,s){return a.client.send(s)}},"xstate.event":{actions:function(a,s){var u=s.event,d=JSON.parse(u),c=r.get(d.origin);c==null||c.send(d)}},unload:{actions:function(a){a.client.send({type:"xstate.disconnect"})}},disconnect:"disconnected"}},disconnected:{entry:function(){t.unsubscribe()},type:"final"}},on:{"xstate.inspecting":{target:".connected",actions:[assign({client:function(a,s){return s.client}}),function(a){n.services.forEach(function(s){var u;(u=a.client)===null||u===void 0||u.send({type:"service.register",machine:stringifyMachine(s.machine,e==null?void 0:e.serialize),state:stringifyState(s.state||s.initialState,e==null?void 0:e.serialize),sessionId:s.sessionId})})}]}}})}var serviceMap=new Map;function createDevTools(){var n=new Set,e=new Set;return{services:n,register:function(r){n.add(r),serviceMap.set(r.sessionId,r),e.forEach(function(t){return t(r)}),r.onStop(function(){n.delete(r),serviceMap.delete(r.sessionId)})},unregister:function(r){n.delete(r),serviceMap.delete(r.sessionId)},onRegister:function(r){return e.add(r),n.forEach(function(t){return r(t)}),{unsubscribe:function(){e.delete(r)}}}}}var defaultInspectorOptions={url:"https://stately.ai/viz?inspect",iframe:function(){return document.querySelector("iframe[data-xstate]")},devTools:function(){var n=createDevTools();return globalThis.__xstate__=n,n},serialize:void 0},getFinalOptions=function(n){var e=__assign$1(__assign$1({},defaultInspectorOptions),n);return __assign$1(__assign$1({},e),{url:new URL(e.url),iframe:getLazy(e.iframe),devTools:getLazy(e.devTools)})},patchedInterpreters=new Set;function inspect(n){var e=getFinalOptions(n),r=e.iframe,t=e.url,a=e.devTools;if(r===null){console.warn("No suitable <iframe> found to embed the inspector. Please pass an <iframe> element to `inspect(iframe)` or create an <iframe data-xstate></iframe> element.");return}var s=createInspectMachine(a,n),u=interpret(s).start(),d=new Set,c=u.subscribe(function(S){d.forEach(function(C){return C.next(S)})}),g,m,_=function(S){if(typeof S.data=="object"&&S.data!==null&&"type"in S.data){r&&!g&&(g=r.contentWindow),m||(m={send:function(R){g.postMessage(R,t.origin)}});var C=__assign$1(__assign$1({},S.data),{client:m});u.send(C)}};window.addEventListener("message",_),window.addEventListener("unload",function(){u.send({type:"unload"})});var b=function(S){return stringify(S,n==null?void 0:n.serialize)};return a.onRegister(function(S){var C,R=S.state||S.initialState;if(u.send({type:"service.register",machine:stringifyMachine(S.machine,n==null?void 0:n.serialize),state:stringifyState(R,n==null?void 0:n.serialize),sessionId:S.sessionId,id:S.id,parent:(C=S.parent)===null||C===void 0?void 0:C.sessionId}),u.send({type:"service.event",event:b(R._event),sessionId:S.sessionId}),!patchedInterpreters.has(S)){patchedInterpreters.add(S);var w=S.send.bind(S);S.send=function($,O){return u.send({type:"service.event",event:b(toSCXMLEvent(toEventObject($,O))),sessionId:S.sessionId}),w($,O)}}S.subscribe(function(k){k!==void 0&&u.send({type:"service.state",state:stringifyState(k,n==null?void 0:n.serialize),sessionId:S.sessionId})}),S.onStop(function(){u.send({type:"service.stop",sessionId:S.sessionId})})}),r?(r.addEventListener("load",function(){g=r.contentWindow}),r.setAttribute("src",String(t))):g=window.open(String(t),"xstateinspector"),{send:function(S){u.send(S)},subscribe:function(S,C,R){var w=toObserver(S,C,R);return d.add(w),w.next(u.state),{unsubscribe:function(){d.delete(w)}}},disconnect:function(){u.send("disconnect"),window.removeEventListener("message",_),c.unsubscribe()}}}const ROV_PEERID_BASE="ROV-",MEMORABLE_PEER_ID_OFFSET=74646,peerServerCloudOptions={host:"0.peerjs.com",secure:!0,path:"/",port:443},peerServerLocalOptions={host:"raspberrypi.local",path:"/",secure:!1,port:9e3};var ConnectionState=(n=>(n.connecting="Connecting",n.connected="Connected",n.reconnecting="Reconnecting",n.disconnected="Disconnected",n))(ConnectionState||{}),RovApiAction=(n=>(n.ping="ping",n.password_attempt="password_attempt",n.authtoken_attempt="authtoken_attempt",n.take_control="take_control",n.move="move",n.begin_video_stream="begin_video_stream",n.take_photo="take_photo",n.start_video_rec="start_video_rec",n.stop_video_rec="stop_video_rec",n.toogle_lights="toogle_lights",n.shutdown_rov="shutdown_rov",n.reboot_rov="reboot_rov",n.enable_wifi="enable_wifi",n.disable_wifi="disable_wifi",n.rov_status_report="rov_status_report",n.restart_rov_services="restart_rov_services",n.rov_logs="rov_logs",n))(RovApiAction||{}),LOADING_MESSAGE=(n=>(n.clearAll="all",n.default="Loading...",n.ipScan="Scanning for ROV IP address...",n.internetCheck="Checking internet access...",n.serverConnecting="Connecting to peer server...",n.serverReconnecting="Reconnecting to peer server...",n.webrtcConnecting="Searching for ROV...",n.webrtcReconnecting="Reconnecting to ROV...",n.reloadingSite="Reloading site...",n.awaitingVideoCall="Waiting for livestream...",n.awaitingRovReconnect="Waiting for ROV to reconnect...",n))(LOADING_MESSAGE||{});const GAME_CONTROLLER_BUTTON_CONFIG=[{btnName:"button_1",helpLabel:"TBD",tooltipPlacement:"left"},{btnName:"button_2",remoteAction:"record",helpLabel:"Start/Stop Recording",tooltipPlacement:"left"},{btnName:"button_3",remoteAction:"photo",helpLabel:"Take Photo",tooltipPlacement:"left"},{btnName:"button_4",remoteAction:"lights",helpLabel:"Toggle Lights",tooltipPlacement:"left"},{btnName:"shoulder_button_front_left",helpLabel:"TBD",tooltipPlacement:"right"},{btnName:"shoulder_button_front_right",remoteAction:"claw_open",helpLabel:"TBD",tooltipPlacement:"left"},{btnName:"shoulder_trigger_back_left",remoteAction:"claw_close",helpLabel:"Open Claw",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"shoulder_trigger_back_right",remoteAction:"claw_close",helpLabel:"Close Claw",holdAllowed:!0,tooltipPlacement:"left"},{btnName:"select_button",helpLabel:"Show/Hide Gamepad Help",tooltipPlacement:"right"},{btnName:"start_button",helpLabel:"Show/Hide Gamepad Help",tooltipPlacement:"left"},{btnName:"stick_button_left",helpLabel:"Move Forward/Back & Turn",tooltipPlacement:"right"},{btnName:"stick_button_right",helpLabel:"Move Up/Down & Left/Right",tooltipPlacement:"left"},{btnName:"d_pad_up",remoteAction:"exposure_plus",helpLabel:"Increase Camera Brightness",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"d_pad_down",remoteAction:"exposure_minus",helpLabel:"Decreases Camera Brightness",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"d_pad_left",remoteAction:"v_quality_plus",helpLabel:"Decrease Video Quality (reduces latency)",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"d_pad_right",remoteAction:"v_quality_minus",helpLabel:"Increase Video Quality (increases latency)",holdAllowed:!0,tooltipPlacement:"right"}],ONSCREEN_GPAD_BUTTON_LABELS=["button_1","button_2","button_3","button_4","shoulder_button_front_left","shoulder_button_front_right","shoulder_trigger_back_left","shoulder_trigger_back_right","select_button","start_button","stick_button_left","stick_button_right","d_pad_up","d_pad_down","d_pad_left","d_pad_right"],ONSCREEN_GPAD_BUTTON_TOUCHED_CLASS="touched",ONSCREEN_GPAD_BUTTON_PRESSED_CLASS="pressed";let computedTracker=[];function nStore(n){let e=[],r=(u,d=!0)=>(e.includes(u)||e.push(u),d&&u(n),()=>{e=e.filter(c=>c!=u)});function t(u){if(u===n&&(n===null||typeof n!="object"))return;let d=n;n=u;for(let c of e)c(n,d)}function a(){let u=computedTracker[computedTracker.length-1];return u&&r(u[0],!1),n}if(typeof n=="function")return computed(n);function s(){for(let u of e)u(n,n)}return{subscribe:r,set:t,get:a,refresh:s,update:u=>{typeof u=="function"&&t(u(n))}}}function computed(n){let e=nStore(null),r=[t];return t(),e;function t(){if(computedTracker.includes(r))throw Error("Circular computation");computedTracker.push(r);let a;try{a=n()}catch(s){throw computedTracker.pop(),s}computedTracker.pop(),e.set(a)}}var DIALOG_TYPE=(n=>(n[n.Alert=0]="Alert",n[n.Password=1]="Password",n[n.ScrollingText=2]="ScrollingText",n))(DIALOG_TYPE||{});const appReady=nStore(!1),debugXstateMode=nStore(!1);nStore(!1);const fullscreenOpen=nStore(!1);document.addEventListener("fullscreenchange",n=>{fullscreenOpen.set(document.fullscreenElement!==null)});const peerServerConfig=nStore(null),rovIpAddr=nStore("raspberrypi.local"),rovPeerIdEndNumber=nStore(0);nStore(!1);const isRovDriver=nStore(!1),ourPeerId=nStore("No Peer Id");nStore(null);nStore(null);const connectionManager=nStore(null),messageHandler=nStore(null),gamepadController=nStore(null),peerServerConnState=nStore(ConnectionState.disconnected),rovDataChannelConnState=nStore(ConnectionState.disconnected),rovVideoStreamConnState=nStore(ConnectionState.disconnected),rovVideoStream=nStore(null),subscriber_queue=[];function writable(n,e=noop$1){let r;const t=new Set;function a(d){if(safe_not_equal(n,d)&&(n=d,r)){const c=!subscriber_queue.length;for(const g of t)g[1](),subscriber_queue.push(g,n);if(c){for(let g=0;g<subscriber_queue.length;g+=2)subscriber_queue[g][0](subscriber_queue[g+1]);subscriber_queue.length=0}}}function s(d){a(d(n))}function u(d,c=noop$1){const g=[d,c];return t.add(g),t.size===1&&(r=e(a)||noop$1),d(n),()=>{t.delete(g),t.size===0&&(r(),r=null)}}return{set:a,update:s,subscribe:u}}function selectKeypressFactory(n){return e=>{(e.key==="Enter"||e.key===" ")&&n(e)}}function arraysEqual(n,e){for(var r=n.length;r--;)if(n[r]!==e[r])return!1;return!0}const adjectives=["Ancient","Dawn","Small","Broken","Red","Cold","Wild","Divine","Empty","Patient","Holy","Long","Wispy","White","Delicate","Bold","Billowing","Blue","Crimson","Aged","Misty","Snowy","Withered","Little","Frosty","Weathered","Nameless","Fragrant","Lively","Quiet","Purple","Proud","Dry","Bitter","Dark","Icy","Twilight","Wandering","Solitary","Morning","Lingering","Still","Late","Sparkling","Restless","Winter","Silent","Floral","Young","Green","Cool","Autumn","Falling","Spring","Summer","Polished","Hidden","Damp","Muddy","Black","Old","Rough"],nouns=["Pond","Snow","Glade","Hill","Voice","River","Sun","Dawn","Forest","Frog","Grass","Shadow","Dust","Water","Meadow","Moon","Thunder","Sun","Wildflower","Snowflake","Silence","Haze","Shape","Pine","Waterfall","Sound","Wood","Tree","Night","Flower","Dream","Cherry","Resonance","Firefly","Bush","Star","Darkness","Lake","Frost","Paper","Surf","Fog","Brook","Mountain","Field","Bird","Leaf","Sea","Water","Sky","Smoke","Sunset","Glitter","Dew","Butterfly","Wind","Fire","Rain","Morning","Feather","Cloud","Breeze","Violet","Wave"];function getUniqueName(n,e){let r=adjectives.length>>>0,t=nouns.length>>>0,a=Math.max(r,t)>>>0,s=Math.max(1,(n+1)%a)>>>0,u=Math.max(1,(e+1)%a)>>>0,d=adjectives[(s+u)%r],c=nouns[s*u%t];return d+"-"+c}function getRandomName(){var n=adjectives[Math.floor(Math.random()*adjectives.length)],e=nouns[Math.floor(Math.random()*nouns.length)];return n+"-"+e}function getURLQueryStringVariable(n){for(var e=window.location.search.substring(1),r=e.split("&"),t=0;t<r.length;t++){var a=r[t].split("=");if(decodeURIComponent(a[0])==n)return decodeURIComponent(a[1])}}function throttle(n,e,r){var t,a,s,u=null,d=0;r||(r={});var c=function(){d=r.leading===!1?0:Date.now(),u=null,s=n.apply(t,a),u||(t=a=null)};return function(){var g=Date.now();!d&&r.leading===!1&&(d=g);var m=e-(g-d);return t=this,a=arguments,m<=0||m>e?(u&&(clearTimeout(u),u=null),d=g,s=n.apply(t,a),u||(t=a=null)):!u&&r.trailing!==!1&&(u=setTimeout(c,m)),s}}class Queue{constructor(){q(this,"items",[]);this.items=[]}push(e){this.items.push(e)}pop(){if(!this.isEmpty())return this.items.splice(0,1)}peak(){if(!this.isEmpty())return this.items[0]}isEmpty(){return this.items.length==0}printQueue(){for(var e="",r=0;r<this.items.length;r++)e+=this.items[r]+" ";return e}}function isInternetAvailable(n){return new Promise(e=>{console.info("checkingUrl",n);try{fetch(n).then(()=>{e(!0)}).catch(r=>{console.warn("Internet Offline, starting switch to local mode",r),e(!1)})}catch(r){console.warn("Error Checking internet, starting switch to local mode",r),e(!1)}})}window.closeFullscreen=()=>{const n=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(n){const e=()=>{n.classList.remove("fullscreen-open")};document.exitFullscreen?document.exitFullscreen().then(e):document.msExitFullscreen?document.msExitFullscreen().then(e):document.mozCancelFullScreen?document.mozCancelFullScreen().then(e):document.webkitExitFullscreen&&document.webkitExitFullscreen().then(e)}};function toggleFullscreen(n,e){e=e||document.documentElement;var r=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;!r||e!==r?(e.requestFullscreen||e.webkitEnterFullscreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen).apply(e):(document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen).apply(document)}var bufferbuilder={exports:{}};(function(n){var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),n.exports.binaryFeatures=e;var r=n.exports.BlobBuilder;typeof window<"u"&&(r=n.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function t(){this._pieces=[],this._parts=[]}t.prototype.append=function(a){typeof a=="number"?this._pieces.push(a):(this.flush(),this._parts.push(a))},t.prototype.flush=function(){if(this._pieces.length>0){var a=new Uint8Array(this._pieces);e.useArrayBufferView||(a=a.buffer),this._parts.push(a),this._pieces=[]}},t.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var a=new r,s=0,u=this._parts.length;s<u;s++)a.append(this._parts[s]);return a.getBlob()}else return new Blob(this._parts)},n.exports.BufferBuilder=t})(bufferbuilder);var BufferBuilder=bufferbuilder.exports.BufferBuilder,binaryFeatures=bufferbuilder.exports.binaryFeatures,BinaryPack={unpack:function(n){var e=new Unpacker(n);return e.unpack()},pack:function(n){var e=new Packer;e.pack(n);var r=e.getBuffer();return r}},binarypack=BinaryPack;function Unpacker(n){this.index=0,this.dataBuffer=n,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}Unpacker.prototype.unpack=function(){var n=this.unpack_uint8();if(n<128)return n;if((n^224)<32)return(n^224)-32;var e;if((e=n^160)<=15)return this.unpack_raw(e);if((e=n^176)<=15)return this.unpack_string(e);if((e=n^144)<=15)return this.unpack_array(e);if((e=n^128)<=15)return this.unpack_map(e);switch(n){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}};Unpacker.prototype.unpack_uint8=function(){var n=this.dataView[this.index]&255;return this.index++,n};Unpacker.prototype.unpack_uint16=function(){var n=this.read(2),e=(n[0]&255)*256+(n[1]&255);return this.index+=2,e};Unpacker.prototype.unpack_uint32=function(){var n=this.read(4),e=((n[0]*256+n[1])*256+n[2])*256+n[3];return this.index+=4,e};Unpacker.prototype.unpack_uint64=function(){var n=this.read(8),e=((((((n[0]*256+n[1])*256+n[2])*256+n[3])*256+n[4])*256+n[5])*256+n[6])*256+n[7];return this.index+=8,e};Unpacker.prototype.unpack_int8=function(){var n=this.unpack_uint8();return n<128?n:n-(1<<8)};Unpacker.prototype.unpack_int16=function(){var n=this.unpack_uint16();return n<32768?n:n-(1<<16)};Unpacker.prototype.unpack_int32=function(){var n=this.unpack_uint32();return n<Math.pow(2,31)?n:n-Math.pow(2,32)};Unpacker.prototype.unpack_int64=function(){var n=this.unpack_uint64();return n<Math.pow(2,63)?n:n-Math.pow(2,64)};Unpacker.prototype.unpack_raw=function(n){if(this.length<this.index+n)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+n+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+n);return this.index+=n,e};Unpacker.prototype.unpack_string=function(n){for(var e=this.read(n),r=0,t="",a,s;r<n;)a=e[r],a<128?(t+=String.fromCharCode(a),r++):(a^192)<32?(s=(a^192)<<6|e[r+1]&63,t+=String.fromCharCode(s),r+=2):(s=(a&15)<<12|(e[r+1]&63)<<6|e[r+2]&63,t+=String.fromCharCode(s),r+=3);return this.index+=n,t};Unpacker.prototype.unpack_array=function(n){for(var e=new Array(n),r=0;r<n;r++)e[r]=this.unpack();return e};Unpacker.prototype.unpack_map=function(n){for(var e={},r=0;r<n;r++){var t=this.unpack(),a=this.unpack();e[t]=a}return e};Unpacker.prototype.unpack_float=function(){var n=this.unpack_uint32(),e=n>>31,r=(n>>23&255)-127,t=n&8388607|8388608;return(e===0?1:-1)*t*Math.pow(2,r-23)};Unpacker.prototype.unpack_double=function(){var n=this.unpack_uint32(),e=this.unpack_uint32(),r=n>>31,t=(n>>20&2047)-1023,a=n&1048575|1048576,s=a*Math.pow(2,t-20)+e*Math.pow(2,t-52);return(r===0?1:-1)*s};Unpacker.prototype.read=function(n){var e=this.index;if(e+n<=this.length)return this.dataView.subarray(e,e+n);throw new Error("BinaryPackFailure: read index out of range")};function Packer(){this.bufferBuilder=new BufferBuilder}Packer.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};Packer.prototype.pack=function(n){var e=typeof n;if(e==="string")this.pack_string(n);else if(e==="number")Math.floor(n)===n?this.pack_integer(n):this.pack_double(n);else if(e==="boolean")n===!0?this.bufferBuilder.append(195):n===!1&&this.bufferBuilder.append(194);else if(e==="undefined")this.bufferBuilder.append(192);else if(e==="object")if(n===null)this.bufferBuilder.append(192);else{var r=n.constructor;if(r==Array)this.pack_array(n);else if(r==Blob||r==File||n instanceof Blob||n instanceof File)this.pack_bin(n);else if(r==ArrayBuffer)binaryFeatures.useArrayBufferView?this.pack_bin(new Uint8Array(n)):this.pack_bin(n);else if("BYTES_PER_ELEMENT"in n)binaryFeatures.useArrayBufferView?this.pack_bin(new Uint8Array(n.buffer)):this.pack_bin(n.buffer);else if(r==Object||r.toString().startsWith("class"))this.pack_object(n);else if(r==Date)this.pack_string(n.toString());else if(typeof n.toBinaryPack=="function")this.bufferBuilder.append(n.toBinaryPack());else throw new Error('Type "'+r.toString()+'" not yet supported')}else throw new Error('Type "'+e+'" not yet supported');this.bufferBuilder.flush()};Packer.prototype.pack_bin=function(n){var e=n.length||n.byteLength||n.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(n)};Packer.prototype.pack_string=function(n){var e=utf8Length(n);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(n)};Packer.prototype.pack_array=function(n){var e=n.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(e);else throw new Error("Invalid length");for(var r=0;r<e;r++)this.pack(n[r])};Packer.prototype.pack_integer=function(n){if(n>=-32&&n<=127)this.bufferBuilder.append(n&255);else if(n>=0&&n<=255)this.bufferBuilder.append(204),this.pack_uint8(n);else if(n>=-128&&n<=127)this.bufferBuilder.append(208),this.pack_int8(n);else if(n>=0&&n<=65535)this.bufferBuilder.append(205),this.pack_uint16(n);else if(n>=-32768&&n<=32767)this.bufferBuilder.append(209),this.pack_int16(n);else if(n>=0&&n<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(n);else if(n>=-2147483648&&n<=2147483647)this.bufferBuilder.append(210),this.pack_int32(n);else if(n>=-9223372036854776e3&&n<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(n);else if(n>=0&&n<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(n);else throw new Error("Invalid integer")};Packer.prototype.pack_double=function(n){var e=0;n<0&&(e=1,n=-n);var r=Math.floor(Math.log(n)/Math.LN2),t=n/Math.pow(2,r)-1,a=Math.floor(t*Math.pow(2,52)),s=Math.pow(2,32),u=e<<31|r+1023<<20|a/s&1048575,d=a%s;this.bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(d)};Packer.prototype.pack_object=function(n){var e=Object.keys(n),r=e.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this.bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");for(var t in n)n.hasOwnProperty(t)&&(this.pack(t),this.pack(n[t]))};Packer.prototype.pack_uint8=function(n){this.bufferBuilder.append(n)};Packer.prototype.pack_uint16=function(n){this.bufferBuilder.append(n>>8),this.bufferBuilder.append(n&255)};Packer.prototype.pack_uint32=function(n){var e=n&4294967295;this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};Packer.prototype.pack_uint64=function(n){var e=n/Math.pow(2,32),r=n%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};Packer.prototype.pack_int8=function(n){this.bufferBuilder.append(n&255)};Packer.prototype.pack_int16=function(n){this.bufferBuilder.append((n&65280)>>8),this.bufferBuilder.append(n&255)};Packer.prototype.pack_int32=function(n){this.bufferBuilder.append(n>>>24&255),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};Packer.prototype.pack_int64=function(n){var e=Math.floor(n/Math.pow(2,32)),r=n%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((r&4278190080)>>>24),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};function _utf8Replace(n){var e=n.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function utf8Length(n){return n.length>600?new Blob([n]).size:n.replace(/[^\u0000-\u007F]/g,_utf8Replace).length}let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(n,e,r){const t=n.match(e);return t&&t.length>=r&&parseInt(t[r],10)}function wrapPeerConnectionEvent(n,e,r){if(!n.RTCPeerConnection)return;const t=n.RTCPeerConnection.prototype,a=t.addEventListener;t.addEventListener=function(u,d){if(u!==e)return a.apply(this,arguments);const c=g=>{const m=r(g);m&&(d.handleEvent?d.handleEvent(m):d(m))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(d,c),a.apply(this,[u,c])};const s=t.removeEventListener;t.removeEventListener=function(u,d){if(u!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(d))return s.apply(this,arguments);const c=this._eventMap[e].get(d);return this._eventMap[e].delete(d),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[u,c])},Object.defineProperty(t,"on"+e,{get(){return this["_on"+e]},set(u){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),u&&this.addEventListener(e,this["_on"+e]=u)},enumerable:!0,configurable:!0})}function disableLog(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(logDisabled_=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(n){return typeof n!="boolean"?new Error("Argument type: "+typeof n+". Please use a boolean."):(deprecationWarnings_=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(n,e){!deprecationWarnings_||console.warn(n+" is deprecated, please use "+e+" instead.")}function detectBrowser(n){const e={browser:null,version:null};if(typeof n>"u"||!n.navigator)return e.browser="Not a browser.",e;const{navigator:r}=n;if(r.mozGetUserMedia)e.browser="firefox",e.version=extractVersion(r.userAgent,/Firefox\/(\d+)\./,1);else if(r.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection&&!n.RTCIceGatherer)e.browser="chrome",e.version=extractVersion(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(r.mediaDevices&&r.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=extractVersion(r.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(n.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=extractVersion(r.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function isObject(n){return Object.prototype.toString.call(n)==="[object Object]"}function compactObject(n){return isObject(n)?Object.keys(n).reduce(function(e,r){const t=isObject(n[r]),a=t?compactObject(n[r]):n[r],s=t&&!Object.keys(a).length;return a===void 0||s?e:Object.assign(e,{[r]:a})},{}):n}function walkStats(n,e,r){!e||r.has(e.id)||(r.set(e.id,e),Object.keys(e).forEach(t=>{t.endsWith("Id")?walkStats(n,n.get(e[t]),r):t.endsWith("Ids")&&e[t].forEach(a=>{walkStats(n,n.get(a),r)})}))}function filterStats(n,e,r){const t=r?"outbound-rtp":"inbound-rtp",a=new Map;if(e===null)return a;const s=[];return n.forEach(u=>{u.type==="track"&&u.trackIdentifier===e.id&&s.push(u)}),s.forEach(u=>{n.forEach(d=>{d.type===t&&d.trackId===u.id&&walkStats(n,d,a)})}),a}const logging=log;function shimGetUserMedia$3(n,e){const r=n&&n.navigator;if(!r.mediaDevices)return;const t=function(d){if(typeof d!="object"||d.mandatory||d.optional)return d;const c={};return Object.keys(d).forEach(g=>{if(g==="require"||g==="advanced"||g==="mediaSource")return;const m=typeof d[g]=="object"?d[g]:{ideal:d[g]};m.exact!==void 0&&typeof m.exact=="number"&&(m.min=m.max=m.exact);const _=function(b,S){return b?b+S.charAt(0).toUpperCase()+S.slice(1):S==="deviceId"?"sourceId":S};if(m.ideal!==void 0){c.optional=c.optional||[];let b={};typeof m.ideal=="number"?(b[_("min",g)]=m.ideal,c.optional.push(b),b={},b[_("max",g)]=m.ideal,c.optional.push(b)):(b[_("",g)]=m.ideal,c.optional.push(b))}m.exact!==void 0&&typeof m.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[_("",g)]=m.exact):["min","max"].forEach(b=>{m[b]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[_(b,g)]=m[b])})}),d.advanced&&(c.optional=(c.optional||[]).concat(d.advanced)),c},a=function(d,c){if(e.version>=61)return c(d);if(d=JSON.parse(JSON.stringify(d)),d&&typeof d.audio=="object"){const g=function(m,_,b){_ in m&&!(b in m)&&(m[b]=m[_],delete m[_])};d=JSON.parse(JSON.stringify(d)),g(d.audio,"autoGainControl","googAutoGainControl"),g(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=t(d.audio)}if(d&&typeof d.video=="object"){let g=d.video.facingMode;g=g&&(typeof g=="object"?g:{ideal:g});const m=e.version<66;if(g&&(g.exact==="user"||g.exact==="environment"||g.ideal==="user"||g.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!m)){delete d.video.facingMode;let _;if(g.exact==="environment"||g.ideal==="environment"?_=["back","rear"]:(g.exact==="user"||g.ideal==="user")&&(_=["front"]),_)return r.mediaDevices.enumerateDevices().then(b=>{b=b.filter(C=>C.kind==="videoinput");let S=b.find(C=>_.some(R=>C.label.toLowerCase().includes(R)));return!S&&b.length&&_.includes("back")&&(S=b[b.length-1]),S&&(d.video.deviceId=g.exact?{exact:S.deviceId}:{ideal:S.deviceId}),d.video=t(d.video),logging("chrome: "+JSON.stringify(d)),c(d)})}d.video=t(d.video)}return logging("chrome: "+JSON.stringify(d)),c(d)},s=function(d){return e.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},u=function(d,c,g){a(d,m=>{r.webkitGetUserMedia(m,c,_=>{g&&g(s(_))})})};if(r.getUserMedia=u.bind(r),r.mediaDevices.getUserMedia){const d=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(c){return a(c,g=>d(g).then(m=>{if(g.audio&&!m.getAudioTracks().length||g.video&&!m.getVideoTracks().length)throw m.getTracks().forEach(_=>{_.stop()}),new DOMException("","NotFoundError");return m},m=>Promise.reject(s(m))))}}}function shimGetDisplayMedia$2(n,e){if(!(n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices)&&!!n.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}n.navigator.mediaDevices.getDisplayMedia=function(t){return e(t).then(a=>{const s=t.video&&t.video.width,u=t.video&&t.video.height,d=t.video&&t.video.frameRate;return t.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,maxFrameRate:d||3}},s&&(t.video.mandatory.maxWidth=s),u&&(t.video.mandatory.maxHeight=u),n.navigator.mediaDevices.getUserMedia(t)})}}}function shimMediaStream(n){n.MediaStream=n.MediaStream||n.webkitMediaStream}function shimOnTrack$1(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("ontrack"in n.RTCPeerConnection.prototype)){Object.defineProperty(n.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",a=>{let s;n.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(d=>d.track&&d.track.id===a.track.id):s={track:a.track};const u=new Event("track");u.track=a.track,u.receiver=s,u.transceiver={receiver:s},u.streams=[t.stream],this.dispatchEvent(u)}),t.stream.getTracks().forEach(a=>{let s;n.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(d=>d.track&&d.track.id===a.id):s={track:a};const u=new Event("track");u.track=a,u.receiver=s,u.transceiver={receiver:s},u.streams=[t.stream],this.dispatchEvent(u)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else wrapPeerConnectionEvent(n,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function shimGetSendersWithDtmf(n){if(typeof n=="object"&&n.RTCPeerConnection&&!("getSenders"in n.RTCPeerConnection.prototype)&&"createDTMFSender"in n.RTCPeerConnection.prototype){const e=function(a,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=a.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:a}};if(!n.RTCPeerConnection.prototype.getSenders){n.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(d,c){let g=a.apply(this,arguments);return g||(g=e(this,d),this._senders.push(g)),g};const s=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(d){s.apply(this,arguments);const c=this._senders.indexOf(d);c!==-1&&this._senders.splice(c,1)}}const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(u=>{this._senders.push(e(this,u))})};const t=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],t.apply(this,[s]),s.getTracks().forEach(u=>{const d=this._senders.find(c=>c.track===u);d&&this._senders.splice(this._senders.indexOf(d),1)})}}else if(typeof n=="object"&&n.RTCPeerConnection&&"getSenders"in n.RTCPeerConnection.prototype&&"createDTMFSender"in n.RTCPeerConnection.prototype&&n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)){const e=n.RTCPeerConnection.prototype.getSenders;n.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach(a=>a._pc=this),t},Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[t,a,s]=arguments;if(arguments.length>0&&typeof t=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof t!="function"))return e.apply(this,[]);const u=function(c){const g={};return c.result().forEach(_=>{const b={id:_.id,timestamp:_.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[_.type]||_.type};_.names().forEach(S=>{b[S]=_.stat(S)}),g[b.id]=b}),g},d=function(c){return new Map(Object.keys(c).map(g=>[g,c[g]]))};if(arguments.length>=2){const c=function(g){a(d(u(g)))};return e.apply(this,[c,t])}return new Promise((c,g)=>{e.apply(this,[function(m){c(d(u(m)))},g])}).then(a,s)}}function shimSenderReceiverGetStats(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender&&n.RTCRtpReceiver))return;if(!("getStats"in n.RTCRtpSender.prototype)){const r=n.RTCPeerConnection.prototype.getSenders;r&&(n.RTCPeerConnection.prototype.getSenders=function(){const s=r.apply(this,[]);return s.forEach(u=>u._pc=this),s});const t=n.RTCPeerConnection.prototype.addTrack;t&&(n.RTCPeerConnection.prototype.addTrack=function(){const s=t.apply(this,arguments);return s._pc=this,s}),n.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(u=>filterStats(u,s.track,!0))}}if(!("getStats"in n.RTCRtpReceiver.prototype)){const r=n.RTCPeerConnection.prototype.getReceivers;r&&(n.RTCPeerConnection.prototype.getReceivers=function(){const a=r.apply(this,[]);return a.forEach(s=>s._pc=this),a}),wrapPeerConnectionEvent(n,"track",t=>(t.receiver._pc=t.srcElement,t)),n.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(s=>filterStats(s,a.track,!1))}}if(!("getStats"in n.RTCRtpSender.prototype&&"getStats"in n.RTCRtpReceiver.prototype))return;const e=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof n.MediaStreamTrack){const t=arguments[0];let a,s,u;return this.getSenders().forEach(d=>{d.track===t&&(a?u=!0:a=d)}),this.getReceivers().forEach(d=>(d.track===t&&(s?u=!0:s=d),d.track===t)),u||a&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(n){n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(u=>this._shimmedLocalStreams[u][0])};const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addTrack=function(u,d){if(!d)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[d.id]?this._shimmedLocalStreams[d.id].indexOf(c)===-1&&this._shimmedLocalStreams[d.id].push(c):this._shimmedLocalStreams[d.id]=[d,c],c};const r=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(u){this._shimmedLocalStreams=this._shimmedLocalStreams||{},u.getTracks().forEach(g=>{if(this.getSenders().find(_=>_.track===g))throw new DOMException("Track already exists.","InvalidAccessError")});const d=this.getSenders();r.apply(this,arguments);const c=this.getSenders().filter(g=>d.indexOf(g)===-1);this._shimmedLocalStreams[u.id]=[u].concat(c)};const t=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[u.id],t.apply(this,arguments)};const a=n.RTCPeerConnection.prototype.removeTrack;n.RTCPeerConnection.prototype.removeTrack=function(u){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},u&&Object.keys(this._shimmedLocalStreams).forEach(d=>{const c=this._shimmedLocalStreams[d].indexOf(u);c!==-1&&this._shimmedLocalStreams[d].splice(c,1),this._shimmedLocalStreams[d].length===1&&delete this._shimmedLocalStreams[d]}),a.apply(this,arguments)}}function shimAddTrackRemoveTrack(n,e){if(!n.RTCPeerConnection)return;if(n.RTCPeerConnection.prototype.addTrack&&e.version>=65)return shimAddTrackRemoveTrackWithNative(n);const r=n.RTCPeerConnection.prototype.getLocalStreams;n.RTCPeerConnection.prototype.getLocalStreams=function(){const m=r.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(_=>this._reverseStreams[_.id])};const t=n.RTCPeerConnection.prototype.addStream;n.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(_=>{if(this.getSenders().find(S=>S.track===_))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const _=new n.MediaStream(m.getTracks());this._streams[m.id]=_,this._reverseStreams[_.id]=m,m=_}t.apply(this,[m])};const a=n.RTCPeerConnection.prototype.removeStream;n.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},n.RTCPeerConnection.prototype.addTrack=function(m,_){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const b=[].slice.call(arguments,1);if(b.length!==1||!b[0].getTracks().find(R=>R===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(R=>R.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const C=this._streams[_.id];if(C)C.addTrack(m),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const R=new n.MediaStream([m]);this._streams[_.id]=R,this._reverseStreams[R.id]=_,this.addStream(R)}return this.getSenders().find(R=>R.track===m)};function s(g,m){let _=m.sdp;return Object.keys(g._reverseStreams||[]).forEach(b=>{const S=g._reverseStreams[b],C=g._streams[S.id];_=_.replace(new RegExp(C.id,"g"),S.id)}),new RTCSessionDescription({type:m.type,sdp:_})}function u(g,m){let _=m.sdp;return Object.keys(g._reverseStreams||[]).forEach(b=>{const S=g._reverseStreams[b],C=g._streams[S.id];_=_.replace(new RegExp(S.id,"g"),C.id)}),new RTCSessionDescription({type:m.type,sdp:_})}["createOffer","createAnswer"].forEach(function(g){const m=n.RTCPeerConnection.prototype[g],_={[g](){const b=arguments;return arguments.length&&typeof arguments[0]=="function"?m.apply(this,[C=>{const R=s(this,C);b[0].apply(null,[R])},C=>{b[1]&&b[1].apply(null,C)},arguments[2]]):m.apply(this,arguments).then(C=>s(this,C))}};n.RTCPeerConnection.prototype[g]=_[g]});const d=n.RTCPeerConnection.prototype.setLocalDescription;n.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?d.apply(this,arguments):(arguments[0]=u(this,arguments[0]),d.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(n.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(n.RTCPeerConnection.prototype,"localDescription",{get(){const g=c.get.apply(this);return g.type===""?g:s(this,g)}}),n.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(m._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let b;Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(R=>m.track===R)&&(b=this._streams[S])}),b&&(b.getTracks().length===1?this.removeStream(this._reverseStreams[b.id]):b.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$2(n,e){!n.RTCPeerConnection&&n.webkitRTCPeerConnection&&(n.RTCPeerConnection=n.webkitRTCPeerConnection),!!n.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const t=n.RTCPeerConnection.prototype[r],a={[r](){return arguments[0]=new(r==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}};n.RTCPeerConnection.prototype[r]=a[r]})}function fixNegotiationNeeded(n,e){wrapPeerConnectionEvent(n,"negotiationneeded",r=>{const t=r.target;if(!((e.version<72||t.getConfiguration&&t.getConfiguration().sdpSemantics==="plan-b")&&t.signalingState!=="stable"))return r})}const chromeShim=Object.freeze(Object.defineProperty({__proto__:null,shimMediaStream,shimOnTrack:shimOnTrack$1,shimGetSendersWithDtmf,shimGetStats,shimSenderReceiverGetStats,shimAddTrackRemoveTrackWithNative,shimAddTrackRemoveTrack,shimPeerConnection:shimPeerConnection$2,fixNegotiationNeeded,shimGetUserMedia:shimGetUserMedia$3,shimGetDisplayMedia:shimGetDisplayMedia$2},Symbol.toStringTag,{value:"Module"}));function filterIceServers$1(n,e){let r=!1;return n=JSON.parse(JSON.stringify(n)),n.filter(t=>{if(t&&(t.urls||t.url)){let a=t.urls||t.url;t.url&&!t.urls&&deprecated("RTCIceServer.url","RTCIceServer.urls");const s=typeof a=="string";return s&&(a=[a]),a=a.filter(u=>{if(u.indexOf("stun:")===0)return!1;const d=u.startsWith("turn")&&!u.startsWith("turn:[")&&u.includes("transport=udp");return d&&!r?(r=!0,!0):d&&!r}),delete t.url,t.urls=s?a[0]:a,!!a.length}})}var sdp={exports:{}};(function(n){var e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(r){return r.trim().split(`
`).map(function(t){return t.trim()})},e.splitSections=function(r){var t=r.split(`
m=`);return t.map(function(a,s){return(s>0?"m="+a:a).trim()+`\r
`})},e.getDescription=function(r){var t=e.splitSections(r);return t&&t[0]},e.getMediaSections=function(r){var t=e.splitSections(r);return t.shift(),t},e.matchPrefix=function(r,t){return e.splitLines(r).filter(function(a){return a.indexOf(t)===0})},e.parseCandidate=function(r){var t;r.indexOf("a=candidate:")===0?t=r.substring(12).split(" "):t=r.substring(10).split(" ");for(var a={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},s=8;s<t.length;s+=2)switch(t[s]){case"raddr":a.relatedAddress=t[s+1];break;case"rport":a.relatedPort=parseInt(t[s+1],10);break;case"tcptype":a.tcpType=t[s+1];break;case"ufrag":a.ufrag=t[s+1],a.usernameFragment=t[s+1];break;default:a[t[s]]=t[s+1];break}return a},e.writeCandidate=function(r){var t=[];t.push(r.foundation),t.push(r.component),t.push(r.protocol.toUpperCase()),t.push(r.priority),t.push(r.address||r.ip),t.push(r.port);var a=r.type;return t.push("typ"),t.push(a),a!=="host"&&r.relatedAddress&&r.relatedPort&&(t.push("raddr"),t.push(r.relatedAddress),t.push("rport"),t.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(t.push("tcptype"),t.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(t.push("ufrag"),t.push(r.usernameFragment||r.ufrag)),"candidate:"+t.join(" ")},e.parseIceOptions=function(r){return r.substr(14).split(" ")},e.parseRtpMap=function(r){var t=r.substr(9).split(" "),a={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),a.name=t[0],a.clockRate=parseInt(t[1],10),a.channels=t.length===3?parseInt(t[2],10):1,a.numChannels=a.channels,a},e.writeRtpMap=function(r){var t=r.payloadType;r.preferredPayloadType!==void 0&&(t=r.preferredPayloadType);var a=r.channels||r.numChannels||1;return"a=rtpmap:"+t+" "+r.name+"/"+r.clockRate+(a!==1?"/"+a:"")+`\r
`},e.parseExtmap=function(r){var t=r.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},e.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+`\r
`},e.parseFmtp=function(r){for(var t={},a,s=r.substr(r.indexOf(" ")+1).split(";"),u=0;u<s.length;u++)a=s[u].trim().split("="),t[a[0].trim()]=a[1];return t},e.writeFmtp=function(r){var t="",a=r.payloadType;if(r.preferredPayloadType!==void 0&&(a=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var s=[];Object.keys(r.parameters).forEach(function(u){r.parameters[u]?s.push(u+"="+r.parameters[u]):s.push(u)}),t+="a=fmtp:"+a+" "+s.join(";")+`\r
`}return t},e.parseRtcpFb=function(r){var t=r.substr(r.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},e.writeRtcpFb=function(r){var t="",a=r.payloadType;return r.preferredPayloadType!==void 0&&(a=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(s){t+="a=rtcp-fb:"+a+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),t},e.parseSsrcMedia=function(r){var t=r.indexOf(" "),a={ssrc:parseInt(r.substr(7,t-7),10)},s=r.indexOf(":",t);return s>-1?(a.attribute=r.substr(t+1,s-t-1),a.value=r.substr(s+1)):a.attribute=r.substr(t+1),a},e.parseSsrcGroup=function(r){var t=r.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(a){return parseInt(a,10)})}},e.getMid=function(r){var t=e.matchPrefix(r,"a=mid:")[0];if(t)return t.substr(6)},e.parseFingerprint=function(r){var t=r.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},e.getDtlsParameters=function(r,t){var a=e.matchPrefix(r+t,"a=fingerprint:");return{role:"auto",fingerprints:a.map(e.parseFingerprint)}},e.writeDtlsParameters=function(r,t){var a="a=setup:"+t+`\r
`;return r.fingerprints.forEach(function(s){a+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),a},e.parseCryptoLine=function(r){var t=r.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},e.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?e.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;var t=r.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},e.getCryptoParameters=function(r,t){var a=e.matchPrefix(r+t,"a=crypto:");return a.map(e.parseCryptoLine)},e.getIceParameters=function(r,t){var a=e.matchPrefix(r+t,"a=ice-ufrag:")[0],s=e.matchPrefix(r+t,"a=ice-pwd:")[0];return a&&s?{usernameFragment:a.substr(12),password:s.substr(10)}:null},e.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`},e.parseRtpParameters=function(r){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},a=e.splitLines(r),s=a[0].split(" "),u=3;u<s.length;u++){var d=s[u],c=e.matchPrefix(r,"a=rtpmap:"+d+" ")[0];if(c){var g=e.parseRtpMap(c),m=e.matchPrefix(r,"a=fmtp:"+d+" ");switch(g.parameters=m.length?e.parseFmtp(m[0]):{},g.rtcpFeedback=e.matchPrefix(r,"a=rtcp-fb:"+d+" ").map(e.parseRtcpFb),t.codecs.push(g),g.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(g.name.toUpperCase());break}}}return e.matchPrefix(r,"a=extmap:").forEach(function(_){t.headerExtensions.push(e.parseExtmap(_))}),t},e.writeRtpDescription=function(r,t){var a="";a+="m="+r+" ",a+=t.codecs.length>0?"9":"0",a+=" UDP/TLS/RTP/SAVPF ",a+=t.codecs.map(function(u){return u.preferredPayloadType!==void 0?u.preferredPayloadType:u.payloadType}).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,t.codecs.forEach(function(u){a+=e.writeRtpMap(u),a+=e.writeFmtp(u),a+=e.writeRtcpFb(u)});var s=0;return t.codecs.forEach(function(u){u.maxptime>s&&(s=u.maxptime)}),s>0&&(a+="a=maxptime:"+s+`\r
`),a+=`a=rtcp-mux\r
`,t.headerExtensions&&t.headerExtensions.forEach(function(u){a+=e.writeExtmap(u)}),a},e.parseRtpEncodingParameters=function(r){var t=[],a=e.parseRtpParameters(r),s=a.fecMechanisms.indexOf("RED")!==-1,u=a.fecMechanisms.indexOf("ULPFEC")!==-1,d=e.matchPrefix(r,"a=ssrc:").map(function(b){return e.parseSsrcMedia(b)}).filter(function(b){return b.attribute==="cname"}),c=d.length>0&&d[0].ssrc,g,m=e.matchPrefix(r,"a=ssrc-group:FID").map(function(b){var S=b.substr(17).split(" ");return S.map(function(C){return parseInt(C,10)})});m.length>0&&m[0].length>1&&m[0][0]===c&&(g=m[0][1]),a.codecs.forEach(function(b){if(b.name.toUpperCase()==="RTX"&&b.parameters.apt){var S={ssrc:c,codecPayloadType:parseInt(b.parameters.apt,10)};c&&g&&(S.rtx={ssrc:g}),t.push(S),s&&(S=JSON.parse(JSON.stringify(S)),S.fec={ssrc:c,mechanism:u?"red+ulpfec":"red"},t.push(S))}}),t.length===0&&c&&t.push({ssrc:c});var _=e.matchPrefix(r,"b=");return _.length&&(_[0].indexOf("b=TIAS:")===0?_=parseInt(_[0].substr(7),10):_[0].indexOf("b=AS:")===0?_=parseInt(_[0].substr(5),10)*1e3*.95-50*40*8:_=void 0,t.forEach(function(b){b.maxBitrate=_})),t},e.parseRtcpParameters=function(r){var t={},a=e.matchPrefix(r,"a=ssrc:").map(function(d){return e.parseSsrcMedia(d)}).filter(function(d){return d.attribute==="cname"})[0];a&&(t.cname=a.value,t.ssrc=a.ssrc);var s=e.matchPrefix(r,"a=rtcp-rsize");t.reducedSize=s.length>0,t.compound=s.length===0;var u=e.matchPrefix(r,"a=rtcp-mux");return t.mux=u.length>0,t},e.parseMsid=function(r){var t,a=e.matchPrefix(r,"a=msid:");if(a.length===1)return t=a[0].substr(7).split(" "),{stream:t[0],track:t[1]};var s=e.matchPrefix(r,"a=ssrc:").map(function(u){return e.parseSsrcMedia(u)}).filter(function(u){return u.attribute==="msid"});if(s.length>0)return t=s[0].value.split(" "),{stream:t[0],track:t[1]}},e.parseSctpDescription=function(r){var t=e.parseMLine(r),a=e.matchPrefix(r,"a=max-message-size:"),s;a.length>0&&(s=parseInt(a[0].substr(19),10)),isNaN(s)&&(s=65536);var u=e.matchPrefix(r,"a=sctp-port:");if(u.length>0)return{port:parseInt(u[0].substr(12),10),protocol:t.fmt,maxMessageSize:s};var d=e.matchPrefix(r,"a=sctpmap:");if(d.length>0){var c=e.matchPrefix(r,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},e.writeSctpDescription=function(r,t){var a=[];return r.protocol!=="DTLS/SCTP"?a=["m="+r.kind+" 9 "+r.protocol+" "+t.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+t.port+`\r
`]:a=["m="+r.kind+" 9 "+r.protocol+" "+t.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+t.port+" "+t.protocol+` 65535\r
`],t.maxMessageSize!==void 0&&a.push("a=max-message-size:"+t.maxMessageSize+`\r
`),a.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(r,t,a){var s,u=t!==void 0?t:2;r?s=r:s=e.generateSessionId();var d=a||"thisisadapterortc";return`v=0\r
o=`+d+" "+s+" "+u+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(r,t,a,s){var u=e.writeRtpDescription(r.kind,t);if(u+=e.writeIceParameters(r.iceGatherer.getLocalParameters()),u+=e.writeDtlsParameters(r.dtlsTransport.getLocalParameters(),a==="offer"?"actpass":"active"),u+="a=mid:"+r.mid+`\r
`,r.direction?u+="a="+r.direction+`\r
`:r.rtpSender&&r.rtpReceiver?u+=`a=sendrecv\r
`:r.rtpSender?u+=`a=sendonly\r
`:r.rtpReceiver?u+=`a=recvonly\r
`:u+=`a=inactive\r
`,r.rtpSender){var d="msid:"+s.id+" "+r.rtpSender.track.id+`\r
`;u+="a="+d,u+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" "+d,r.sendEncodingParameters[0].rtx&&(u+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" "+d,u+="a=ssrc-group:FID "+r.sendEncodingParameters[0].ssrc+" "+r.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return u+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,r.rtpSender&&r.sendEncodingParameters[0].rtx&&(u+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),u},e.getDirection=function(r,t){for(var a=e.splitLines(r),s=0;s<a.length;s++)switch(a[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[s].substr(2)}return t?e.getDirection(t):"sendrecv"},e.getKind=function(r){var t=e.splitLines(r),a=t[0].split(" ");return a[0].substr(2)},e.isRejected=function(r){return r.split(" ",2)[1]==="0"},e.parseMLine=function(r){var t=e.splitLines(r),a=t[0].substr(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},e.parseOLine=function(r){var t=e.matchPrefix(r,"o=")[0],a=t.substr(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},e.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;for(var t=e.splitLines(r),a=0;a<t.length;a++)if(t[a].length<2||t[a].charAt(1)!=="=")return!1;return!0},n.exports=e})(sdp);const SDPUtils$1=sdp.exports;var SDPUtils=sdp.exports;function fixStatsType(n){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[n.type]||n.type}function writeMediaSection(n,e,r,t,a){var s=SDPUtils.writeRtpDescription(n.kind,e);if(s+=SDPUtils.writeIceParameters(n.iceGatherer.getLocalParameters()),s+=SDPUtils.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),r==="offer"?"actpass":a||"active"),s+="a=mid:"+n.mid+`\r
`,n.rtpSender&&n.rtpReceiver?s+=`a=sendrecv\r
`:n.rtpSender?s+=`a=sendonly\r
`:n.rtpReceiver?s+=`a=recvonly\r
`:s+=`a=inactive\r
`,n.rtpSender){var u=n.rtpSender._initialTrackId||n.rtpSender.track.id;n.rtpSender._initialTrackId=u;var d="msid:"+(t?t.id:"-")+" "+u+`\r
`;s+="a="+d,s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+d,n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+d,s+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+SDPUtils.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+SDPUtils.localCName+`\r
`),s}function filterIceServers(n,e){var r=!1;return n=JSON.parse(JSON.stringify(n)),n.filter(function(t){if(t&&(t.urls||t.url)){var a=t.urls||t.url;t.url&&!t.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var s=typeof a=="string";return s&&(a=[a]),a=a.filter(function(u){var d=u.indexOf("turn:")===0&&u.indexOf("transport=udp")!==-1&&u.indexOf("turn:[")===-1&&!r;return d?(r=!0,!0):u.indexOf("stun:")===0&&e>=14393&&u.indexOf("?transport=udp")===-1}),delete t.url,t.urls=s?a[0]:a,!!a.length}})}function getCommonCapabilities(n,e){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},t=function(s,u){s=parseInt(s,10);for(var d=0;d<u.length;d++)if(u[d].payloadType===s||u[d].preferredPayloadType===s)return u[d]},a=function(s,u,d,c){var g=t(s.parameters.apt,d),m=t(u.parameters.apt,c);return g&&m&&g.name.toLowerCase()===m.name.toLowerCase()};return n.codecs.forEach(function(s){for(var u=0;u<e.codecs.length;u++){var d=e.codecs[u];if(s.name.toLowerCase()===d.name.toLowerCase()&&s.clockRate===d.clockRate){if(s.name.toLowerCase()==="rtx"&&s.parameters&&d.parameters.apt&&!a(s,d,n.codecs,e.codecs))continue;d=JSON.parse(JSON.stringify(d)),d.numChannels=Math.min(s.numChannels,d.numChannels),r.codecs.push(d),d.rtcpFeedback=d.rtcpFeedback.filter(function(c){for(var g=0;g<s.rtcpFeedback.length;g++)if(s.rtcpFeedback[g].type===c.type&&s.rtcpFeedback[g].parameter===c.parameter)return!0;return!1});break}}}),n.headerExtensions.forEach(function(s){for(var u=0;u<e.headerExtensions.length;u++){var d=e.headerExtensions[u];if(s.uri===d.uri){r.headerExtensions.push(d);break}}}),r}function isActionAllowedInSignalingState(n,e,r){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][n].indexOf(r)!==-1}function maybeAddCandidate(n,e){var r=n.getRemoteCandidates().find(function(t){return e.foundation===t.foundation&&e.ip===t.ip&&e.port===t.port&&e.priority===t.priority&&e.protocol===t.protocol&&e.type===t.type});return r||n.addRemoteCandidate(e),!r}function makeError(n,e){var r=new Error(e);return r.name=n,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[n],r}var rtcpeerconnection=function(n,e){function r(c,g){g.addTrack(c),g.dispatchEvent(new n.MediaStreamTrackEvent("addtrack",{track:c}))}function t(c,g){g.removeTrack(c),g.dispatchEvent(new n.MediaStreamTrackEvent("removetrack",{track:c}))}function a(c,g,m,_){var b=new Event("track");b.track=g,b.receiver=m,b.transceiver={receiver:m},b.streams=_,n.setTimeout(function(){c._dispatchEvent("track",b)})}var s=function(c){var g=this,m=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(b){g[b]=m[b].bind(m)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",c=JSON.parse(JSON.stringify(c||{})),this.usingBundle=c.bundlePolicy==="max-bundle",c.rtcpMuxPolicy==="negotiate")throw makeError("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(c.rtcpMuxPolicy||(c.rtcpMuxPolicy="require"),c.iceTransportPolicy){case"all":case"relay":break;default:c.iceTransportPolicy="all";break}switch(c.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:c.bundlePolicy="balanced";break}if(c.iceServers=filterIceServers(c.iceServers||[],e),this._iceGatherers=[],c.iceCandidatePoolSize)for(var _=c.iceCandidatePoolSize;_>0;_--)this._iceGatherers.push(new n.RTCIceGatherer({iceServers:c.iceServers,gatherPolicy:c.iceTransportPolicy}));else c.iceCandidatePoolSize=0;this._config=c,this.transceivers=[],this._sdpSessionId=SDPUtils.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(s.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(s.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),s.prototype.onicecandidate=null,s.prototype.onaddstream=null,s.prototype.ontrack=null,s.prototype.onremovestream=null,s.prototype.onsignalingstatechange=null,s.prototype.oniceconnectionstatechange=null,s.prototype.onconnectionstatechange=null,s.prototype.onicegatheringstatechange=null,s.prototype.onnegotiationneeded=null,s.prototype.ondatachannel=null,s.prototype._dispatchEvent=function(c,g){this._isClosed||(this.dispatchEvent(g),typeof this["on"+c]=="function"&&this["on"+c](g))},s.prototype._emitGatheringStateChange=function(){var c=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",c)},s.prototype.getConfiguration=function(){return this._config},s.prototype.getLocalStreams=function(){return this.localStreams},s.prototype.getRemoteStreams=function(){return this.remoteStreams},s.prototype._createTransceiver=function(c,g){var m=this.transceivers.length>0,_={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:c,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&m)_.iceTransport=this.transceivers[0].iceTransport,_.dtlsTransport=this.transceivers[0].dtlsTransport;else{var b=this._createIceAndDtlsTransports();_.iceTransport=b.iceTransport,_.dtlsTransport=b.dtlsTransport}return g||this.transceivers.push(_),_},s.prototype.addTrack=function(c,g){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var m=this.transceivers.find(function(S){return S.track===c});if(m)throw makeError("InvalidAccessError","Track already exists.");for(var _,b=0;b<this.transceivers.length;b++)!this.transceivers[b].track&&this.transceivers[b].kind===c.kind&&(_=this.transceivers[b]);return _||(_=this._createTransceiver(c.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(g)===-1&&this.localStreams.push(g),_.track=c,_.stream=g,_.rtpSender=new n.RTCRtpSender(c,_.dtlsTransport),_.rtpSender},s.prototype.addStream=function(c){var g=this;if(e>=15025)c.getTracks().forEach(function(_){g.addTrack(_,c)});else{var m=c.clone();c.getTracks().forEach(function(_,b){var S=m.getTracks()[b];_.addEventListener("enabled",function(C){S.enabled=C.enabled})}),m.getTracks().forEach(function(_){g.addTrack(_,m)})}},s.prototype.removeTrack=function(c){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(c instanceof n.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var g=this.transceivers.find(function(b){return b.rtpSender===c});if(!g)throw makeError("InvalidAccessError","Sender was not created by this connection.");var m=g.stream;g.rtpSender.stop(),g.rtpSender=null,g.track=null,g.stream=null;var _=this.transceivers.map(function(b){return b.stream});_.indexOf(m)===-1&&this.localStreams.indexOf(m)>-1&&this.localStreams.splice(this.localStreams.indexOf(m),1),this._maybeFireNegotiationNeeded()},s.prototype.removeStream=function(c){var g=this;c.getTracks().forEach(function(m){var _=g.getSenders().find(function(b){return b.track===m});_&&g.removeTrack(_)})},s.prototype.getSenders=function(){return this.transceivers.filter(function(c){return!!c.rtpSender}).map(function(c){return c.rtpSender})},s.prototype.getReceivers=function(){return this.transceivers.filter(function(c){return!!c.rtpReceiver}).map(function(c){return c.rtpReceiver})},s.prototype._createIceGatherer=function(c,g){var m=this;if(g&&c>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var _=new n.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(_,"state",{value:"new",writable:!0}),this.transceivers[c].bufferedCandidateEvents=[],this.transceivers[c].bufferCandidates=function(b){var S=!b.candidate||Object.keys(b.candidate).length===0;_.state=S?"completed":"gathering",m.transceivers[c].bufferedCandidateEvents!==null&&m.transceivers[c].bufferedCandidateEvents.push(b)},_.addEventListener("localcandidate",this.transceivers[c].bufferCandidates),_},s.prototype._gather=function(c,g){var m=this,_=this.transceivers[g].iceGatherer;if(!_.onlocalcandidate){var b=this.transceivers[g].bufferedCandidateEvents;this.transceivers[g].bufferedCandidateEvents=null,_.removeEventListener("localcandidate",this.transceivers[g].bufferCandidates),_.onlocalcandidate=function(S){if(!(m.usingBundle&&g>0)){var C=new Event("icecandidate");C.candidate={sdpMid:c,sdpMLineIndex:g};var R=S.candidate,w=!R||Object.keys(R).length===0;if(w)(_.state==="new"||_.state==="gathering")&&(_.state="completed");else{_.state==="new"&&(_.state="gathering"),R.component=1,R.ufrag=_.getLocalParameters().usernameFragment;var k=SDPUtils.writeCandidate(R);C.candidate=Object.assign(C.candidate,SDPUtils.parseCandidate(k)),C.candidate.candidate=k,C.candidate.toJSON=function(){return{candidate:C.candidate.candidate,sdpMid:C.candidate.sdpMid,sdpMLineIndex:C.candidate.sdpMLineIndex,usernameFragment:C.candidate.usernameFragment}}}var $=SDPUtils.getMediaSections(m._localDescription.sdp);w?$[C.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:$[C.candidate.sdpMLineIndex]+="a="+C.candidate.candidate+`\r
`,m._localDescription.sdp=SDPUtils.getDescription(m._localDescription.sdp)+$.join("");var O=m.transceivers.every(function(I){return I.iceGatherer&&I.iceGatherer.state==="completed"});m.iceGatheringState!=="gathering"&&(m.iceGatheringState="gathering",m._emitGatheringStateChange()),w||m._dispatchEvent("icecandidate",C),O&&(m._dispatchEvent("icecandidate",new Event("icecandidate")),m.iceGatheringState="complete",m._emitGatheringStateChange())}},n.setTimeout(function(){b.forEach(function(S){_.onlocalcandidate(S)})},0)}},s.prototype._createIceAndDtlsTransports=function(){var c=this,g=new n.RTCIceTransport(null);g.onicestatechange=function(){c._updateIceConnectionState(),c._updateConnectionState()};var m=new n.RTCDtlsTransport(g);return m.ondtlsstatechange=function(){c._updateConnectionState()},m.onerror=function(){Object.defineProperty(m,"state",{value:"failed",writable:!0}),c._updateConnectionState()},{iceTransport:g,dtlsTransport:m}},s.prototype._disposeIceAndDtlsTransports=function(c){var g=this.transceivers[c].iceGatherer;g&&(delete g.onlocalcandidate,delete this.transceivers[c].iceGatherer);var m=this.transceivers[c].iceTransport;m&&(delete m.onicestatechange,delete this.transceivers[c].iceTransport);var _=this.transceivers[c].dtlsTransport;_&&(delete _.ondtlsstatechange,delete _.onerror,delete this.transceivers[c].dtlsTransport)},s.prototype._transceive=function(c,g,m){var _=getCommonCapabilities(c.localCapabilities,c.remoteCapabilities);g&&c.rtpSender&&(_.encodings=c.sendEncodingParameters,_.rtcp={cname:SDPUtils.localCName,compound:c.rtcpParameters.compound},c.recvEncodingParameters.length&&(_.rtcp.ssrc=c.recvEncodingParameters[0].ssrc),c.rtpSender.send(_)),m&&c.rtpReceiver&&_.codecs.length>0&&(c.kind==="video"&&c.recvEncodingParameters&&e<15019&&c.recvEncodingParameters.forEach(function(b){delete b.rtx}),c.recvEncodingParameters.length?_.encodings=c.recvEncodingParameters:_.encodings=[{}],_.rtcp={compound:c.rtcpParameters.compound},c.rtcpParameters.cname&&(_.rtcp.cname=c.rtcpParameters.cname),c.sendEncodingParameters.length&&(_.rtcp.ssrc=c.sendEncodingParameters[0].ssrc),c.rtpReceiver.receive(_))},s.prototype.setLocalDescription=function(c){var g=this;if(["offer","answer"].indexOf(c.type)===-1)return Promise.reject(makeError("TypeError",'Unsupported type "'+c.type+'"'));if(!isActionAllowedInSignalingState("setLocalDescription",c.type,g.signalingState)||g._isClosed)return Promise.reject(makeError("InvalidStateError","Can not set local "+c.type+" in state "+g.signalingState));var m,_;if(c.type==="offer")m=SDPUtils.splitSections(c.sdp),_=m.shift(),m.forEach(function(S,C){var R=SDPUtils.parseRtpParameters(S);g.transceivers[C].localCapabilities=R}),g.transceivers.forEach(function(S,C){g._gather(S.mid,C)});else if(c.type==="answer"){m=SDPUtils.splitSections(g._remoteDescription.sdp),_=m.shift();var b=SDPUtils.matchPrefix(_,"a=ice-lite").length>0;m.forEach(function(S,C){var R=g.transceivers[C],w=R.iceGatherer,k=R.iceTransport,$=R.dtlsTransport,O=R.localCapabilities,I=R.remoteCapabilities,x=SDPUtils.isRejected(S)&&SDPUtils.matchPrefix(S,"a=bundle-only").length===0;if(!x&&!R.rejected){var P=SDPUtils.getIceParameters(S,_),B=SDPUtils.getDtlsParameters(S,_);b&&(B.role="server"),(!g.usingBundle||C===0)&&(g._gather(R.mid,C),k.state==="new"&&k.start(w,P,b?"controlling":"controlled"),$.state==="new"&&$.start(B));var j=getCommonCapabilities(O,I);g._transceive(R,j.codecs.length>0,!1)}})}return g._localDescription={type:c.type,sdp:c.sdp},c.type==="offer"?g._updateSignalingState("have-local-offer"):g._updateSignalingState("stable"),Promise.resolve()},s.prototype.setRemoteDescription=function(c){var g=this;if(["offer","answer"].indexOf(c.type)===-1)return Promise.reject(makeError("TypeError",'Unsupported type "'+c.type+'"'));if(!isActionAllowedInSignalingState("setRemoteDescription",c.type,g.signalingState)||g._isClosed)return Promise.reject(makeError("InvalidStateError","Can not set remote "+c.type+" in state "+g.signalingState));var m={};g.remoteStreams.forEach(function(k){m[k.id]=k});var _=[],b=SDPUtils.splitSections(c.sdp),S=b.shift(),C=SDPUtils.matchPrefix(S,"a=ice-lite").length>0,R=SDPUtils.matchPrefix(S,"a=group:BUNDLE ").length>0;g.usingBundle=R;var w=SDPUtils.matchPrefix(S,"a=ice-options:")[0];return w?g.canTrickleIceCandidates=w.substr(14).split(" ").indexOf("trickle")>=0:g.canTrickleIceCandidates=!1,b.forEach(function(k,$){var O=SDPUtils.splitLines(k),I=SDPUtils.getKind(k),x=SDPUtils.isRejected(k)&&SDPUtils.matchPrefix(k,"a=bundle-only").length===0,P=O[0].substr(2).split(" ")[2],B=SDPUtils.getDirection(k,S),j=SDPUtils.parseMsid(k),W=SDPUtils.getMid(k)||SDPUtils.generateIdentifier();if(x||I==="application"&&(P==="DTLS/SCTP"||P==="UDP/DTLS/SCTP")){g.transceivers[$]={mid:W,kind:I,protocol:P,rejected:!0};return}!x&&g.transceivers[$]&&g.transceivers[$].rejected&&(g.transceivers[$]=g._createTransceiver(I,!0));var U,z,F,Y,X,K,te,Z,H,Q=SDPUtils.parseRtpParameters(k),ne,V;x||(ne=SDPUtils.getIceParameters(k,S),V=SDPUtils.getDtlsParameters(k,S),V.role="client"),te=SDPUtils.parseRtpEncodingParameters(k);var J=SDPUtils.parseRtcpParameters(k),ce=SDPUtils.matchPrefix(k,"a=end-of-candidates",S).length>0,ee=SDPUtils.matchPrefix(k,"a=candidate:").map(function(oe){return SDPUtils.parseCandidate(oe)}).filter(function(oe){return oe.component===1});if((c.type==="offer"||c.type==="answer")&&!x&&R&&$>0&&g.transceivers[$]&&(g._disposeIceAndDtlsTransports($),g.transceivers[$].iceGatherer=g.transceivers[0].iceGatherer,g.transceivers[$].iceTransport=g.transceivers[0].iceTransport,g.transceivers[$].dtlsTransport=g.transceivers[0].dtlsTransport,g.transceivers[$].rtpSender&&g.transceivers[$].rtpSender.setTransport(g.transceivers[0].dtlsTransport),g.transceivers[$].rtpReceiver&&g.transceivers[$].rtpReceiver.setTransport(g.transceivers[0].dtlsTransport)),c.type==="offer"&&!x){U=g.transceivers[$]||g._createTransceiver(I),U.mid=W,U.iceGatherer||(U.iceGatherer=g._createIceGatherer($,R)),ee.length&&U.iceTransport.state==="new"&&(ce&&(!R||$===0)?U.iceTransport.setRemoteCandidates(ee):ee.forEach(function(oe){maybeAddCandidate(U.iceTransport,oe)})),Z=n.RTCRtpReceiver.getCapabilities(I),e<15019&&(Z.codecs=Z.codecs.filter(function(oe){return oe.name!=="rtx"})),K=U.sendEncodingParameters||[{ssrc:(2*$+2)*1001}];var ie=!1;if(B==="sendrecv"||B==="sendonly"){if(ie=!U.rtpReceiver,X=U.rtpReceiver||new n.RTCRtpReceiver(U.dtlsTransport,I),ie){var se;H=X.track,j&&j.stream==="-"||(j?(m[j.stream]||(m[j.stream]=new n.MediaStream,Object.defineProperty(m[j.stream],"id",{get:function(){return j.stream}})),Object.defineProperty(H,"id",{get:function(){return j.track}}),se=m[j.stream]):(m.default||(m.default=new n.MediaStream),se=m.default)),se&&(r(H,se),U.associatedRemoteMediaStreams.push(se)),_.push([H,X,se])}}else U.rtpReceiver&&U.rtpReceiver.track&&(U.associatedRemoteMediaStreams.forEach(function(oe){var pe=oe.getTracks().find(function(fe){return fe.id===U.rtpReceiver.track.id});pe&&t(pe,oe)}),U.associatedRemoteMediaStreams=[]);U.localCapabilities=Z,U.remoteCapabilities=Q,U.rtpReceiver=X,U.rtcpParameters=J,U.sendEncodingParameters=K,U.recvEncodingParameters=te,g._transceive(g.transceivers[$],!1,ie)}else if(c.type==="answer"&&!x){U=g.transceivers[$],z=U.iceGatherer,F=U.iceTransport,Y=U.dtlsTransport,X=U.rtpReceiver,K=U.sendEncodingParameters,Z=U.localCapabilities,g.transceivers[$].recvEncodingParameters=te,g.transceivers[$].remoteCapabilities=Q,g.transceivers[$].rtcpParameters=J,ee.length&&F.state==="new"&&((C||ce)&&(!R||$===0)?F.setRemoteCandidates(ee):ee.forEach(function(oe){maybeAddCandidate(U.iceTransport,oe)})),(!R||$===0)&&(F.state==="new"&&F.start(z,ne,"controlling"),Y.state==="new"&&Y.start(V));var de=getCommonCapabilities(U.localCapabilities,U.remoteCapabilities),le=de.codecs.filter(function(oe){return oe.name.toLowerCase()==="rtx"}).length;!le&&U.sendEncodingParameters[0].rtx&&delete U.sendEncodingParameters[0].rtx,g._transceive(U,B==="sendrecv"||B==="recvonly",B==="sendrecv"||B==="sendonly"),X&&(B==="sendrecv"||B==="sendonly")?(H=X.track,j?(m[j.stream]||(m[j.stream]=new n.MediaStream),r(H,m[j.stream]),_.push([H,X,m[j.stream]])):(m.default||(m.default=new n.MediaStream),r(H,m.default),_.push([H,X,m.default]))):delete U.rtpReceiver}}),g._dtlsRole===void 0&&(g._dtlsRole=c.type==="offer"?"active":"passive"),g._remoteDescription={type:c.type,sdp:c.sdp},c.type==="offer"?g._updateSignalingState("have-remote-offer"):g._updateSignalingState("stable"),Object.keys(m).forEach(function(k){var $=m[k];if($.getTracks().length){if(g.remoteStreams.indexOf($)===-1){g.remoteStreams.push($);var O=new Event("addstream");O.stream=$,n.setTimeout(function(){g._dispatchEvent("addstream",O)})}_.forEach(function(I){var x=I[0],P=I[1];$.id===I[2].id&&a(g,x,P,[$])})}}),_.forEach(function(k){k[2]||a(g,k[0],k[1],[])}),n.setTimeout(function(){!(g&&g.transceivers)||g.transceivers.forEach(function(k){k.iceTransport&&k.iceTransport.state==="new"&&k.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),k.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},s.prototype.close=function(){this.transceivers.forEach(function(c){c.iceTransport&&c.iceTransport.stop(),c.dtlsTransport&&c.dtlsTransport.stop(),c.rtpSender&&c.rtpSender.stop(),c.rtpReceiver&&c.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},s.prototype._updateSignalingState=function(c){this.signalingState=c;var g=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",g)},s.prototype._maybeFireNegotiationNeeded=function(){var c=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,n.setTimeout(function(){if(c.needNegotiation){c.needNegotiation=!1;var g=new Event("negotiationneeded");c._dispatchEvent("negotiationneeded",g)}},0))},s.prototype._updateIceConnectionState=function(){var c,g={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(_){_.iceTransport&&!_.rejected&&g[_.iceTransport.state]++}),c="new",g.failed>0?c="failed":g.checking>0?c="checking":g.disconnected>0?c="disconnected":g.new>0?c="new":g.connected>0?c="connected":g.completed>0&&(c="completed"),c!==this.iceConnectionState){this.iceConnectionState=c;var m=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",m)}},s.prototype._updateConnectionState=function(){var c,g={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(_){_.iceTransport&&_.dtlsTransport&&!_.rejected&&(g[_.iceTransport.state]++,g[_.dtlsTransport.state]++)}),g.connected+=g.completed,c="new",g.failed>0?c="failed":g.connecting>0?c="connecting":g.disconnected>0?c="disconnected":g.new>0?c="new":g.connected>0&&(c="connected"),c!==this.connectionState){this.connectionState=c;var m=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",m)}},s.prototype.createOffer=function(){var c=this;if(c._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createOffer after close"));var g=c.transceivers.filter(function(C){return C.kind==="audio"}).length,m=c.transceivers.filter(function(C){return C.kind==="video"}).length,_=arguments[0];if(_){if(_.mandatory||_.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");_.offerToReceiveAudio!==void 0&&(_.offerToReceiveAudio===!0?g=1:_.offerToReceiveAudio===!1?g=0:g=_.offerToReceiveAudio),_.offerToReceiveVideo!==void 0&&(_.offerToReceiveVideo===!0?m=1:_.offerToReceiveVideo===!1?m=0:m=_.offerToReceiveVideo)}for(c.transceivers.forEach(function(C){C.kind==="audio"?(g--,g<0&&(C.wantReceive=!1)):C.kind==="video"&&(m--,m<0&&(C.wantReceive=!1))});g>0||m>0;)g>0&&(c._createTransceiver("audio"),g--),m>0&&(c._createTransceiver("video"),m--);var b=SDPUtils.writeSessionBoilerplate(c._sdpSessionId,c._sdpSessionVersion++);c.transceivers.forEach(function(C,R){var w=C.track,k=C.kind,$=C.mid||SDPUtils.generateIdentifier();C.mid=$,C.iceGatherer||(C.iceGatherer=c._createIceGatherer(R,c.usingBundle));var O=n.RTCRtpSender.getCapabilities(k);e<15019&&(O.codecs=O.codecs.filter(function(x){return x.name!=="rtx"})),O.codecs.forEach(function(x){x.name==="H264"&&x.parameters["level-asymmetry-allowed"]===void 0&&(x.parameters["level-asymmetry-allowed"]="1"),C.remoteCapabilities&&C.remoteCapabilities.codecs&&C.remoteCapabilities.codecs.forEach(function(P){x.name.toLowerCase()===P.name.toLowerCase()&&x.clockRate===P.clockRate&&(x.preferredPayloadType=P.payloadType)})}),O.headerExtensions.forEach(function(x){var P=C.remoteCapabilities&&C.remoteCapabilities.headerExtensions||[];P.forEach(function(B){x.uri===B.uri&&(x.id=B.id)})});var I=C.sendEncodingParameters||[{ssrc:(2*R+1)*1001}];w&&e>=15019&&k==="video"&&!I[0].rtx&&(I[0].rtx={ssrc:I[0].ssrc+1}),C.wantReceive&&(C.rtpReceiver=new n.RTCRtpReceiver(C.dtlsTransport,k)),C.localCapabilities=O,C.sendEncodingParameters=I}),c._config.bundlePolicy!=="max-compat"&&(b+="a=group:BUNDLE "+c.transceivers.map(function(C){return C.mid}).join(" ")+`\r
`),b+=`a=ice-options:trickle\r
`,c.transceivers.forEach(function(C,R){b+=writeMediaSection(C,C.localCapabilities,"offer",C.stream,c._dtlsRole),b+=`a=rtcp-rsize\r
`,C.iceGatherer&&c.iceGatheringState!=="new"&&(R===0||!c.usingBundle)&&(C.iceGatherer.getLocalCandidates().forEach(function(w){w.component=1,b+="a="+SDPUtils.writeCandidate(w)+`\r
`}),C.iceGatherer.state==="completed"&&(b+=`a=end-of-candidates\r
`))});var S=new n.RTCSessionDescription({type:"offer",sdp:b});return Promise.resolve(S)},s.prototype.createAnswer=function(){var c=this;if(c._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createAnswer after close"));if(!(c.signalingState==="have-remote-offer"||c.signalingState==="have-local-pranswer"))return Promise.reject(makeError("InvalidStateError","Can not call createAnswer in signalingState "+c.signalingState));var g=SDPUtils.writeSessionBoilerplate(c._sdpSessionId,c._sdpSessionVersion++);c.usingBundle&&(g+="a=group:BUNDLE "+c.transceivers.map(function(b){return b.mid}).join(" ")+`\r
`),g+=`a=ice-options:trickle\r
`;var m=SDPUtils.getMediaSections(c._remoteDescription.sdp).length;c.transceivers.forEach(function(b,S){if(!(S+1>m)){if(b.rejected){b.kind==="application"?b.protocol==="DTLS/SCTP"?g+=`m=application 0 DTLS/SCTP 5000\r
`:g+="m=application 0 "+b.protocol+` webrtc-datachannel\r
`:b.kind==="audio"?g+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:b.kind==="video"&&(g+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),g+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+b.mid+`\r
`;return}if(b.stream){var C;b.kind==="audio"?C=b.stream.getAudioTracks()[0]:b.kind==="video"&&(C=b.stream.getVideoTracks()[0]),C&&e>=15019&&b.kind==="video"&&!b.sendEncodingParameters[0].rtx&&(b.sendEncodingParameters[0].rtx={ssrc:b.sendEncodingParameters[0].ssrc+1})}var R=getCommonCapabilities(b.localCapabilities,b.remoteCapabilities),w=R.codecs.filter(function(k){return k.name.toLowerCase()==="rtx"}).length;!w&&b.sendEncodingParameters[0].rtx&&delete b.sendEncodingParameters[0].rtx,g+=writeMediaSection(b,R,"answer",b.stream,c._dtlsRole),b.rtcpParameters&&b.rtcpParameters.reducedSize&&(g+=`a=rtcp-rsize\r
`)}});var _=new n.RTCSessionDescription({type:"answer",sdp:g});return Promise.resolve(_)},s.prototype.addIceCandidate=function(c){var g=this,m;return c&&!(c.sdpMLineIndex!==void 0||c.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(_,b){if(g._remoteDescription)if(!c||c.candidate==="")for(var S=0;S<g.transceivers.length&&!(!g.transceivers[S].rejected&&(g.transceivers[S].iceTransport.addRemoteCandidate({}),m=SDPUtils.getMediaSections(g._remoteDescription.sdp),m[S]+=`a=end-of-candidates\r
`,g._remoteDescription.sdp=SDPUtils.getDescription(g._remoteDescription.sdp)+m.join(""),g.usingBundle));S++);else{var C=c.sdpMLineIndex;if(c.sdpMid){for(var R=0;R<g.transceivers.length;R++)if(g.transceivers[R].mid===c.sdpMid){C=R;break}}var w=g.transceivers[C];if(w){if(w.rejected)return _();var k=Object.keys(c.candidate).length>0?SDPUtils.parseCandidate(c.candidate):{};if(k.protocol==="tcp"&&(k.port===0||k.port===9)||k.component&&k.component!==1)return _();if((C===0||C>0&&w.iceTransport!==g.transceivers[0].iceTransport)&&!maybeAddCandidate(w.iceTransport,k))return b(makeError("OperationError","Can not add ICE candidate"));var $=c.candidate.trim();$.indexOf("a=")===0&&($=$.substr(2)),m=SDPUtils.getMediaSections(g._remoteDescription.sdp),m[C]+="a="+(k.type?$:"end-of-candidates")+`\r
`,g._remoteDescription.sdp=SDPUtils.getDescription(g._remoteDescription.sdp)+m.join("")}else return b(makeError("OperationError","Can not add ICE candidate"))}else return b(makeError("InvalidStateError","Can not add ICE candidate without a remote description"));_()})},s.prototype.getStats=function(c){if(c&&c instanceof n.MediaStreamTrack){var g=null;if(this.transceivers.forEach(function(_){_.rtpSender&&_.rtpSender.track===c?g=_.rtpSender:_.rtpReceiver&&_.rtpReceiver.track===c&&(g=_.rtpReceiver)}),!g)throw makeError("InvalidAccessError","Invalid selector.");return g.getStats()}var m=[];return this.transceivers.forEach(function(_){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(b){_[b]&&m.push(_[b].getStats())})}),Promise.all(m).then(function(_){var b=new Map;return _.forEach(function(S){S.forEach(function(C){b.set(C.id,C)})}),b})};var u=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];u.forEach(function(c){var g=n[c];if(g&&g.prototype&&g.prototype.getStats){var m=g.prototype.getStats;g.prototype.getStats=function(){return m.apply(this).then(function(_){var b=new Map;return Object.keys(_).forEach(function(S){_[S].type=fixStatsType(_[S]),b.set(S,_[S])}),b})}}});var d=["createOffer","createAnswer"];return d.forEach(function(c){var g=s.prototype[c];s.prototype[c]=function(){var m=arguments;return typeof m[0]=="function"||typeof m[1]=="function"?g.apply(this,[arguments[2]]).then(function(_){typeof m[0]=="function"&&m[0].apply(null,[_])},function(_){typeof m[1]=="function"&&m[1].apply(null,[_])}):g.apply(this,arguments)}}),d=["setLocalDescription","setRemoteDescription","addIceCandidate"],d.forEach(function(c){var g=s.prototype[c];s.prototype[c]=function(){var m=arguments;return typeof m[1]=="function"||typeof m[2]=="function"?g.apply(this,arguments).then(function(){typeof m[1]=="function"&&m[1].apply(null)},function(_){typeof m[2]=="function"&&m[2].apply(null,[_])}):g.apply(this,arguments)}}),["getStats"].forEach(function(c){var g=s.prototype[c];s.prototype[c]=function(){var m=arguments;return typeof m[1]=="function"?g.apply(this,arguments).then(function(){typeof m[1]=="function"&&m[1].apply(null)}):g.apply(this,arguments)}}),s};function shimGetUserMedia$2(n){const e=n&&n.navigator,r=function(a){return{name:{PermissionDeniedError:"NotAllowedError"}[a.name]||a.name,message:a.message,constraint:a.constraint,toString(){return this.name}}},t=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(a){return t(a).catch(s=>Promise.reject(r(s)))}}function shimGetDisplayMedia$1(n){"getDisplayMedia"in n.navigator&&(!n.navigator.mediaDevices||n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=n.navigator.getDisplayMedia.bind(n.navigator)))}function shimPeerConnection$1(n,e){if(n.RTCIceGatherer&&(n.RTCIceCandidate||(n.RTCIceCandidate=function(a){return a}),n.RTCSessionDescription||(n.RTCSessionDescription=function(a){return a}),e.version<15025)){const t=Object.getOwnPropertyDescriptor(n.MediaStreamTrack.prototype,"enabled");Object.defineProperty(n.MediaStreamTrack.prototype,"enabled",{set(a){t.set.call(this,a);const s=new Event("enabled");s.enabled=a,this.dispatchEvent(s)}})}n.RTCRtpSender&&!("dtmf"in n.RTCRtpSender.prototype)&&Object.defineProperty(n.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new n.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),n.RTCDtmfSender&&!n.RTCDTMFSender&&(n.RTCDTMFSender=n.RTCDtmfSender);const r=rtcpeerconnection(n,e.version);n.RTCPeerConnection=function(a){return a&&a.iceServers&&(a.iceServers=filterIceServers$1(a.iceServers,e.version),log("ICE servers after filtering:",a.iceServers)),new r(a)},n.RTCPeerConnection.prototype=r.prototype}function shimReplaceTrack(n){n.RTCRtpSender&&!("replaceTrack"in n.RTCRtpSender.prototype)&&(n.RTCRtpSender.prototype.replaceTrack=n.RTCRtpSender.prototype.setTrack)}const edgeShim=Object.freeze(Object.defineProperty({__proto__:null,shimPeerConnection:shimPeerConnection$1,shimReplaceTrack,shimGetUserMedia:shimGetUserMedia$2,shimGetDisplayMedia:shimGetDisplayMedia$1},Symbol.toStringTag,{value:"Module"}));function shimGetUserMedia$1(n,e){const r=n&&n.navigator,t=n&&n.MediaStreamTrack;if(r.getUserMedia=function(a,s,u){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(a).then(s,u)},!(e.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const a=function(u,d,c){d in u&&!(c in u)&&(u[c]=u[d],delete u[d])},s=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(u){return typeof u=="object"&&typeof u.audio=="object"&&(u=JSON.parse(JSON.stringify(u)),a(u.audio,"autoGainControl","mozAutoGainControl"),a(u.audio,"noiseSuppression","mozNoiseSuppression")),s(u)},t&&t.prototype.getSettings){const u=t.prototype.getSettings;t.prototype.getSettings=function(){const d=u.apply(this,arguments);return a(d,"mozAutoGainControl","autoGainControl"),a(d,"mozNoiseSuppression","noiseSuppression"),d}}if(t&&t.prototype.applyConstraints){const u=t.prototype.applyConstraints;t.prototype.applyConstraints=function(d){return this.kind==="audio"&&typeof d=="object"&&(d=JSON.parse(JSON.stringify(d)),a(d,"autoGainControl","mozAutoGainControl"),a(d,"noiseSuppression","mozNoiseSuppression")),u.apply(this,[d])}}}}function shimGetDisplayMedia(n,e){n.navigator.mediaDevices&&"getDisplayMedia"in n.navigator.mediaDevices||!n.navigator.mediaDevices||(n.navigator.mediaDevices.getDisplayMedia=function(t){if(!(t&&t.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return t.video===!0?t.video={mediaSource:e}:t.video.mediaSource=e,n.navigator.mediaDevices.getUserMedia(t)})}function shimOnTrack(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(n,e){if(typeof n!="object"||!(n.RTCPeerConnection||n.mozRTCPeerConnection))return;!n.RTCPeerConnection&&n.mozRTCPeerConnection&&(n.RTCPeerConnection=n.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const s=n.RTCPeerConnection.prototype[a],u={[a](){return arguments[0]=new(a==="addIceCandidate"?n.RTCIceCandidate:n.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};n.RTCPeerConnection.prototype[a]=u[a]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},t=n.RTCPeerConnection.prototype.getStats;n.RTCPeerConnection.prototype.getStats=function(){const[s,u,d]=arguments;return t.apply(this,[s||null]).then(c=>{if(e.version<53&&!u)try{c.forEach(g=>{g.type=r[g.type]||g.type})}catch(g){if(g.name!=="TypeError")throw g;c.forEach((m,_)=>{c.set(_,Object.assign({},m,{type:r[m.type]||m.type}))})}return c}).then(u,d)}}function shimSenderGetStats(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpSender.prototype)return;const e=n.RTCPeerConnection.prototype.getSenders;e&&(n.RTCPeerConnection.prototype.getSenders=function(){const a=e.apply(this,[]);return a.forEach(s=>s._pc=this),a});const r=n.RTCPeerConnection.prototype.addTrack;r&&(n.RTCPeerConnection.prototype.addTrack=function(){const a=r.apply(this,arguments);return a._pc=this,a}),n.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(n){if(!(typeof n=="object"&&n.RTCPeerConnection&&n.RTCRtpSender)||n.RTCRtpSender&&"getStats"in n.RTCRtpReceiver.prototype)return;const e=n.RTCPeerConnection.prototype.getReceivers;e&&(n.RTCPeerConnection.prototype.getReceivers=function(){const t=e.apply(this,[]);return t.forEach(a=>a._pc=this),t}),wrapPeerConnectionEvent(n,"track",r=>(r.receiver._pc=r.srcElement,r)),n.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(n){!n.RTCPeerConnection||"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(r){deprecated("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&r.getTracks().includes(t.track)&&this.removeTrack(t)})})}function shimRTCDataChannel(n){n.DataChannel&&!n.RTCDataChannel&&(n.RTCDataChannel=n.DataChannel)}function shimAddTransceiver(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.addTransceiver;e&&(n.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const t=arguments[1],a=t&&"sendEncodings"in t;a&&t.sendEncodings.forEach(u=>{if("rid"in u&&!/^[a-z0-9]{0,16}$/i.test(u.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in u&&!(parseFloat(u.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in u&&!(parseFloat(u.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(a){const{sender:u}=s,d=u.getParameters();(!("encodings"in d)||d.encodings.length===1&&Object.keys(d.encodings[0]).length===0)&&(d.encodings=t.sendEncodings,u.sendEncodings=t.sendEncodings,this.setParametersPromises.push(u.setParameters(d).then(()=>{delete u.sendEncodings}).catch(()=>{delete u.sendEncodings})))}return s})}function shimGetParameters(n){if(!(typeof n=="object"&&n.RTCRtpSender))return;const e=n.RTCRtpSender.prototype.getParameters;e&&(n.RTCRtpSender.prototype.getParameters=function(){const t=e.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function shimCreateOffer(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function shimCreateAnswer(n){if(!(typeof n=="object"&&n.RTCPeerConnection))return;const e=n.RTCPeerConnection.prototype.createAnswer;n.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const firefoxShim=Object.freeze(Object.defineProperty({__proto__:null,shimOnTrack,shimPeerConnection,shimSenderGetStats,shimReceiverGetStats,shimRemoveStream,shimRTCDataChannel,shimAddTransceiver,shimGetParameters,shimCreateOffer,shimCreateAnswer,shimGetUserMedia:shimGetUserMedia$1,shimGetDisplayMedia},Symbol.toStringTag,{value:"Module"}));function shimLocalStreamsAPI(n){if(!(typeof n!="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){const e=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(a=>e.call(this,a,t)),t.getVideoTracks().forEach(a=>e.call(this,a,t))},n.RTCPeerConnection.prototype.addTrack=function(t,...a){return a&&a.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(r);if(t===-1)return;this._localStreams.splice(t,1);const a=r.getTracks();this.getSenders().forEach(s=>{a.includes(s.track)&&this.removeTrack(s)})})}}function shimRemoteStreamsAPI(n){if(!(typeof n!="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=t=>{t.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const s=new Event("addstream");s.stream=a,this.dispatchEvent(s)})})}});const e=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){const t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(s=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(s)>=0)return;t._remoteStreams.push(s);const u=new Event("addstream");u.stream=s,t.dispatchEvent(u)})}),e.apply(t,arguments)}}}function shimCallbacksAPI(n){if(typeof n!="object"||!n.RTCPeerConnection)return;const e=n.RTCPeerConnection.prototype,r=e.createOffer,t=e.createAnswer,a=e.setLocalDescription,s=e.setRemoteDescription,u=e.addIceCandidate;e.createOffer=function(g,m){const _=arguments.length>=2?arguments[2]:arguments[0],b=r.apply(this,[_]);return m?(b.then(g,m),Promise.resolve()):b},e.createAnswer=function(g,m){const _=arguments.length>=2?arguments[2]:arguments[0],b=t.apply(this,[_]);return m?(b.then(g,m),Promise.resolve()):b};let d=function(c,g,m){const _=a.apply(this,[c]);return m?(_.then(g,m),Promise.resolve()):_};e.setLocalDescription=d,d=function(c,g,m){const _=s.apply(this,[c]);return m?(_.then(g,m),Promise.resolve()):_},e.setRemoteDescription=d,d=function(c,g,m){const _=u.apply(this,[c]);return m?(_.then(g,m),Promise.resolve()):_},e.addIceCandidate=d}function shimGetUserMedia(n){const e=n&&n.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const r=e.mediaDevices,t=r.getUserMedia.bind(r);e.mediaDevices.getUserMedia=a=>t(shimConstraints(a))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(t,a,s){e.mediaDevices.getUserMedia(t).then(a,s)}.bind(e))}function shimConstraints(n){return n&&n.video!==void 0?Object.assign({},n,{video:compactObject(n.video)}):n}function shimRTCIceServerUrls(n){if(!n.RTCPeerConnection)return;const e=n.RTCPeerConnection;n.RTCPeerConnection=function(t,a){if(t&&t.iceServers){const s=[];for(let u=0;u<t.iceServers.length;u++){let d=t.iceServers[u];!d.hasOwnProperty("urls")&&d.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,s.push(d)):s.push(t.iceServers[u])}t.iceServers=s}return new e(t,a)},n.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function shimTrackEventTransceiver(n){typeof n=="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(n){const e=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(t){if(t){typeof t.offerToReceiveAudio<"u"&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);const a=this.getTransceivers().find(u=>u.receiver.track.kind==="audio");t.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):t.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio"),typeof t.offerToReceiveVideo<"u"&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);const s=this.getTransceivers().find(u=>u.receiver.track.kind==="video");t.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):t.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video")}return e.apply(this,arguments)}}function shimAudioContext(n){typeof n!="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}const safariShim=Object.freeze(Object.defineProperty({__proto__:null,shimLocalStreamsAPI,shimRemoteStreamsAPI,shimCallbacksAPI,shimGetUserMedia,shimConstraints,shimRTCIceServerUrls,shimTrackEventTransceiver,shimCreateOfferLegacy,shimAudioContext},Symbol.toStringTag,{value:"Module"}));function shimRTCIceCandidate(n){if(!n.RTCIceCandidate||n.RTCIceCandidate&&"foundation"in n.RTCIceCandidate.prototype)return;const e=n.RTCIceCandidate;n.RTCIceCandidate=function(t){if(typeof t=="object"&&t.candidate&&t.candidate.indexOf("a=")===0&&(t=JSON.parse(JSON.stringify(t)),t.candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){const a=new e(t),s=SDPUtils$1.parseCandidate(t.candidate),u=Object.assign(a,s);return u.toJSON=function(){return{candidate:u.candidate,sdpMid:u.sdpMid,sdpMLineIndex:u.sdpMLineIndex,usernameFragment:u.usernameFragment}},u}return new e(t)},n.RTCIceCandidate.prototype=e.prototype,wrapPeerConnectionEvent(n,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new n.RTCIceCandidate(r.candidate),writable:"false"}),r))}function shimMaxMessageSize(n,e){if(!n.RTCPeerConnection)return;"sctp"in n.RTCPeerConnection.prototype||Object.defineProperty(n.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(d){if(!d||!d.sdp)return!1;const c=SDPUtils$1.splitSections(d.sdp);return c.shift(),c.some(g=>{const m=SDPUtils$1.parseMLine(g);return m&&m.kind==="application"&&m.protocol.indexOf("SCTP")!==-1})},t=function(d){const c=d.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const g=parseInt(c[1],10);return g!==g?-1:g},a=function(d){let c=65536;return e.browser==="firefox"&&(e.version<57?d===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},s=function(d,c){let g=65536;e.browser==="firefox"&&e.version===57&&(g=65535);const m=SDPUtils$1.matchPrefix(d.sdp,"a=max-message-size:");return m.length>0?g=parseInt(m[0].substr(19),10):e.browser==="firefox"&&c!==-1&&(g=2147483637),g},u=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const c=t(arguments[0]),g=a(c),m=s(arguments[0],c);let _;g===0&&m===0?_=Number.POSITIVE_INFINITY:g===0||m===0?_=Math.max(g,m):_=Math.min(g,m);const b={};Object.defineProperty(b,"maxMessageSize",{get(){return _}}),this._sctp=b}return u.apply(this,arguments)}}function shimSendThrowTypeError(n){if(!(n.RTCPeerConnection&&"createDataChannel"in n.RTCPeerConnection.prototype))return;function e(t,a){const s=t.send;t.send=function(){const d=arguments[0],c=d.length||d.size||d.byteLength;if(t.readyState==="open"&&a.sctp&&c>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return s.apply(t,arguments)}}const r=n.RTCPeerConnection.prototype.createDataChannel;n.RTCPeerConnection.prototype.createDataChannel=function(){const a=r.apply(this,arguments);return e(a,this),a},wrapPeerConnectionEvent(n,"datachannel",t=>(e(t.channel,t.target),t))}function shimConnectionState(n){if(!n.RTCPeerConnection||"connectionState"in n.RTCPeerConnection.prototype)return;const e=n.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const t=e[r];e[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const s=a.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const u=new Event("connectionstatechange",a);s.dispatchEvent(u)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}})}function removeExtmapAllowMixed(n,e){if(!n.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=a.sdp.split(`
`).filter(u=>u.trim()!=="a=extmap-allow-mixed").join(`
`);n.RTCSessionDescription&&a instanceof n.RTCSessionDescription?arguments[0]=new n.RTCSessionDescription({type:a.type,sdp:s}):a.sdp=s}return r.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(n,e){if(!(n.RTCPeerConnection&&n.RTCPeerConnection.prototype))return;const r=n.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(n.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const commonShim=Object.freeze(Object.defineProperty({__proto__:null,shimRTCIceCandidate,shimMaxMessageSize,shimSendThrowTypeError,shimConnectionState,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty},Symbol.toStringTag,{value:"Module"}));function adapterFactory({window:n}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const r=log,t=detectBrowser(n),a={browserDetails:t,commonShim,extractVersion,disableLog,disableWarnings};switch(t.browser){case"chrome":if(!chromeShim||!shimPeerConnection$2||!e.shimChrome)return r("Chrome shim is not included in this adapter release."),a;if(t.version===null)return r("Chrome shim can not determine version, not shimming."),a;r("adapter.js shimming chrome."),a.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(n,t),shimGetUserMedia$3(n,t),shimMediaStream(n),shimPeerConnection$2(n,t),shimOnTrack$1(n),shimAddTrackRemoveTrack(n,t),shimGetSendersWithDtmf(n),shimGetStats(n),shimSenderReceiverGetStats(n),fixNegotiationNeeded(n,t),shimRTCIceCandidate(n),shimConnectionState(n),shimMaxMessageSize(n,t),shimSendThrowTypeError(n),removeExtmapAllowMixed(n,t);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!e.shimFirefox)return r("Firefox shim is not included in this adapter release."),a;r("adapter.js shimming firefox."),a.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(n,t),shimGetUserMedia$1(n,t),shimPeerConnection(n,t),shimOnTrack(n),shimRemoveStream(n),shimSenderGetStats(n),shimReceiverGetStats(n),shimRTCDataChannel(n),shimAddTransceiver(n),shimGetParameters(n),shimCreateOffer(n),shimCreateAnswer(n),shimRTCIceCandidate(n),shimConnectionState(n),shimMaxMessageSize(n,t),shimSendThrowTypeError(n);break;case"edge":if(!edgeShim||!shimPeerConnection$1||!e.shimEdge)return r("MS edge shim is not included in this adapter release."),a;r("adapter.js shimming edge."),a.browserShim=edgeShim,shimGetUserMedia$2(n),shimGetDisplayMedia$1(n),shimPeerConnection$1(n,t),shimReplaceTrack(n),shimMaxMessageSize(n,t),shimSendThrowTypeError(n);break;case"safari":if(!safariShim||!e.shimSafari)return r("Safari shim is not included in this adapter release."),a;r("adapter.js shimming safari."),a.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(n,t),shimRTCIceServerUrls(n),shimCreateOfferLegacy(n),shimCallbacksAPI(n),shimLocalStreamsAPI(n),shimRemoteStreamsAPI(n),shimTrackEventTransceiver(n),shimGetUserMedia(n),shimAudioContext(n),shimRTCIceCandidate(n),shimMaxMessageSize(n,t),shimSendThrowTypeError(n),removeExtmapAllowMixed(n,t);break;default:r("Unsupported browser!");break}return a}const adapter=adapterFactory({window:typeof window>"u"?void 0:window});function $parcel$export(n,e,r,t){Object.defineProperty(n,e,{get:r,set:t,enumerable:!0,configurable:!0})}var $af8cf1f663f490f4$var$webRTCAdapter=adapter.default||adapter,$af8cf1f663f490f4$export$25be9502477c137d=new(function(){function n(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return n.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},n.prototype.isBrowserSupported=function(){var e=this.getBrowser(),r=this.getVersion(),t=this.supportedBrowsers.includes(e);return t?e==="chrome"?r>=this.minChromeVersion:e==="firefox"?r>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&r>=this.minSafariVersion:!1:!1},n.prototype.getBrowser=function(){return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.browser},n.prototype.getVersion=function(){return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version||0},n.prototype.isUnifiedPlanSupported=function(){var e=this.getBrowser(),r=$af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version||0;if(e==="chrome"&&r<this.minChromeVersion)return!1;if(e==="firefox"&&r>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var t,a=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),a=!0}catch{}finally{t&&t.close()}return a},n.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},n}()),$06cb531ed7840f78$var$DEFAULT_CONFIG={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},$06cb531ed7840f78$var$Util=function(){function n(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=$06cb531ed7840f78$var$DEFAULT_CONFIG,this.browser=$af8cf1f663f490f4$export$25be9502477c137d.getBrowser(),this.browserVersion=$af8cf1f663f490f4$export$25be9502477c137d.getVersion(),this.supports=function(){var e={browser:$af8cf1f663f490f4$export$25be9502477c137d.isBrowserSupported(),webRTC:$af8cf1f663f490f4$export$25be9502477c137d.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;var r;try{r=new RTCPeerConnection($06cb531ed7840f78$var$DEFAULT_CONFIG),e.audioVideo=!0;var t=void 0;try{t=r.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!t.ordered;try{t.binaryType="blob",e.binaryBlob=!$af8cf1f663f490f4$export$25be9502477c137d.isIOS}catch{}}catch{}finally{t&&t.close()}}catch{}finally{r&&r.close()}return e}(),this.pack=binarypack.pack,this.unpack=binarypack.unpack,this._dataCount=1}return n.prototype.noop=function(){},n.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},n.prototype.chunk=function(e){for(var r=[],t=e.size,a=Math.ceil(t/$06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU),s=0,u=0;u<t;){var d=Math.min(t,u+$06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU),c=e.slice(u,d),g={__peerData:this._dataCount,n:s,data:c,total:a};r.push(g),u=d,s++}return this._dataCount++,r},n.prototype.blobToArrayBuffer=function(e,r){var t=new FileReader;return t.onload=function(a){a.target&&r(a.target.result)},t.readAsArrayBuffer(e),t},n.prototype.binaryStringToArrayBuffer=function(e){for(var r=new Uint8Array(e.length),t=0;t<e.length;t++)r[t]=e.charCodeAt(t)&255;return r.buffer},n.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},n.prototype.isSecure=function(){return location.protocol==="https:"},n}(),$06cb531ed7840f78$export$7debb50ef11d5e0b=new $06cb531ed7840f78$var$Util,$26088d7da5b03f69$exports={};$parcel$export($26088d7da5b03f69$exports,"Peer",()=>$26088d7da5b03f69$export$ecd1fc136c422448,n=>$26088d7da5b03f69$export$ecd1fc136c422448=n);var $ac9b757d51178e15$exports={},$ac9b757d51178e15$var$has=Object.prototype.hasOwnProperty,$ac9b757d51178e15$var$prefix="~";function $ac9b757d51178e15$var$Events(){}Object.create&&($ac9b757d51178e15$var$Events.prototype=Object.create(null),new $ac9b757d51178e15$var$Events().__proto__||($ac9b757d51178e15$var$prefix=!1));function $ac9b757d51178e15$var$EE(n,e,r){this.fn=n,this.context=e,this.once=r||!1}function $ac9b757d51178e15$var$addListener(n,e,r,t,a){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new $ac9b757d51178e15$var$EE(r,t||n,a),u=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e;return n._events[u]?n._events[u].fn?n._events[u]=[n._events[u],s]:n._events[u].push(s):(n._events[u]=s,n._eventsCount++),n}function $ac9b757d51178e15$var$clearEvent(n,e){--n._eventsCount===0?n._events=new $ac9b757d51178e15$var$Events:delete n._events[e]}function $ac9b757d51178e15$var$EventEmitter(){this._events=new $ac9b757d51178e15$var$Events,this._eventsCount=0}$ac9b757d51178e15$var$EventEmitter.prototype.eventNames=function(){var e=[],r,t;if(this._eventsCount===0)return e;for(t in r=this._events)$ac9b757d51178e15$var$has.call(r,t)&&e.push($ac9b757d51178e15$var$prefix?t.slice(1):t);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};$ac9b757d51178e15$var$EventEmitter.prototype.listeners=function(e){var r=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e,t=this._events[r];if(!t)return[];if(t.fn)return[t.fn];for(var a=0,s=t.length,u=new Array(s);a<s;a++)u[a]=t[a].fn;return u};$ac9b757d51178e15$var$EventEmitter.prototype.listenerCount=function(e){var r=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e,t=this._events[r];return t?t.fn?1:t.length:0};$ac9b757d51178e15$var$EventEmitter.prototype.emit=function(e,r,t,a,s,u){var d=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e;if(!this._events[d])return!1;var c=this._events[d],g=arguments.length,m,_;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),g){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,r),!0;case 3:return c.fn.call(c.context,r,t),!0;case 4:return c.fn.call(c.context,r,t,a),!0;case 5:return c.fn.call(c.context,r,t,a,s),!0;case 6:return c.fn.call(c.context,r,t,a,s,u),!0}for(_=1,m=new Array(g-1);_<g;_++)m[_-1]=arguments[_];c.fn.apply(c.context,m)}else{var b=c.length,S;for(_=0;_<b;_++)switch(c[_].once&&this.removeListener(e,c[_].fn,void 0,!0),g){case 1:c[_].fn.call(c[_].context);break;case 2:c[_].fn.call(c[_].context,r);break;case 3:c[_].fn.call(c[_].context,r,t);break;case 4:c[_].fn.call(c[_].context,r,t,a);break;default:if(!m)for(S=1,m=new Array(g-1);S<g;S++)m[S-1]=arguments[S];c[_].fn.apply(c[_].context,m)}}return!0};$ac9b757d51178e15$var$EventEmitter.prototype.on=function(e,r,t){return $ac9b757d51178e15$var$addListener(this,e,r,t,!1)};$ac9b757d51178e15$var$EventEmitter.prototype.once=function(e,r,t){return $ac9b757d51178e15$var$addListener(this,e,r,t,!0)};$ac9b757d51178e15$var$EventEmitter.prototype.removeListener=function(e,r,t,a){var s=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e;if(!this._events[s])return this;if(!r)return $ac9b757d51178e15$var$clearEvent(this,s),this;var u=this._events[s];if(u.fn)u.fn===r&&(!a||u.once)&&(!t||u.context===t)&&$ac9b757d51178e15$var$clearEvent(this,s);else{for(var d=0,c=[],g=u.length;d<g;d++)(u[d].fn!==r||a&&!u[d].once||t&&u[d].context!==t)&&c.push(u[d]);c.length?this._events[s]=c.length===1?c[0]:c:$ac9b757d51178e15$var$clearEvent(this,s)}return this};$ac9b757d51178e15$var$EventEmitter.prototype.removeAllListeners=function(e){var r;return e?(r=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e,this._events[r]&&$ac9b757d51178e15$var$clearEvent(this,r)):(this._events=new $ac9b757d51178e15$var$Events,this._eventsCount=0),this};$ac9b757d51178e15$var$EventEmitter.prototype.off=$ac9b757d51178e15$var$EventEmitter.prototype.removeListener;$ac9b757d51178e15$var$EventEmitter.prototype.addListener=$ac9b757d51178e15$var$EventEmitter.prototype.on;$ac9b757d51178e15$var$EventEmitter.prefixed=$ac9b757d51178e15$var$prefix;$ac9b757d51178e15$var$EventEmitter.EventEmitter=$ac9b757d51178e15$var$EventEmitter;$ac9b757d51178e15$exports=$ac9b757d51178e15$var$EventEmitter;var $1615705ecc6adca3$exports={};$parcel$export($1615705ecc6adca3$exports,"LogLevel",()=>$1615705ecc6adca3$export$243e62d78d3b544d,n=>$1615705ecc6adca3$export$243e62d78d3b544d=n);$parcel$export($1615705ecc6adca3$exports,"default",()=>$1615705ecc6adca3$export$2e2bcd8739ae039,n=>$1615705ecc6adca3$export$2e2bcd8739ae039=n);var $1615705ecc6adca3$var$__read=function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],u;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(d){u={error:d}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(u)throw u.error}}return s},$1615705ecc6adca3$var$__spreadArray=function(n,e,r){if(r||arguments.length===2)for(var t=0,a=e.length,s;t<a;t++)(s||!(t in e))&&(s||(s=Array.prototype.slice.call(e,0,t)),s[t]=e[t]);return n.concat(s||Array.prototype.slice.call(e))},$1615705ecc6adca3$var$LOG_PREFIX="PeerJS: ",$1615705ecc6adca3$export$243e62d78d3b544d;(function(n){n[n.Disabled=0]="Disabled",n[n.Errors=1]="Errors",n[n.Warnings=2]="Warnings",n[n.All=3]="All"})($1615705ecc6adca3$export$243e62d78d3b544d||($1615705ecc6adca3$export$243e62d78d3b544d={}));var $1615705ecc6adca3$var$Logger=function(){function n(){this._logLevel=$1615705ecc6adca3$export$243e62d78d3b544d.Disabled}return Object.defineProperty(n.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),n.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._logLevel>=$1615705ecc6adca3$export$243e62d78d3b544d.All&&this._print.apply(this,$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.All],$1615705ecc6adca3$var$__read(e),!1))},n.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._logLevel>=$1615705ecc6adca3$export$243e62d78d3b544d.Warnings&&this._print.apply(this,$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.Warnings],$1615705ecc6adca3$var$__read(e),!1))},n.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this._logLevel>=$1615705ecc6adca3$export$243e62d78d3b544d.Errors&&this._print.apply(this,$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.Errors],$1615705ecc6adca3$var$__read(e),!1))},n.prototype.setLogFunction=function(e){this._print=e},n.prototype._print=function(e){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];var a=$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$var$LOG_PREFIX],$1615705ecc6adca3$var$__read(r),!1);for(var s in a)a[s]instanceof Error&&(a[s]="("+a[s].name+") "+a[s].message);e>=$1615705ecc6adca3$export$243e62d78d3b544d.All?console.log.apply(console,$1615705ecc6adca3$var$__spreadArray([],$1615705ecc6adca3$var$__read(a),!1)):e>=$1615705ecc6adca3$export$243e62d78d3b544d.Warnings?console.warn.apply(console,$1615705ecc6adca3$var$__spreadArray(["WARNING"],$1615705ecc6adca3$var$__read(a),!1)):e>=$1615705ecc6adca3$export$243e62d78d3b544d.Errors&&console.error.apply(console,$1615705ecc6adca3$var$__spreadArray(["ERROR"],$1615705ecc6adca3$var$__read(a),!1))},n}(),$1615705ecc6adca3$export$2e2bcd8739ae039=new $1615705ecc6adca3$var$Logger,$31d11a8d122cb4b7$exports={};$parcel$export($31d11a8d122cb4b7$exports,"Socket",()=>$31d11a8d122cb4b7$export$4798917dbf149b79,n=>$31d11a8d122cb4b7$export$4798917dbf149b79=n);var $60fadef21a2daafc$export$3157d57b4135e3bc;(function(n){n.Data="data",n.Media="media"})($60fadef21a2daafc$export$3157d57b4135e3bc||($60fadef21a2daafc$export$3157d57b4135e3bc={}));var $60fadef21a2daafc$export$9547aaa2e39030ff;(function(n){n.BrowserIncompatible="browser-incompatible",n.Disconnected="disconnected",n.InvalidID="invalid-id",n.InvalidKey="invalid-key",n.Network="network",n.PeerUnavailable="peer-unavailable",n.SslUnavailable="ssl-unavailable",n.ServerError="server-error",n.SocketError="socket-error",n.SocketClosed="socket-closed",n.UnavailableID="unavailable-id",n.WebRTC="webrtc"})($60fadef21a2daafc$export$9547aaa2e39030ff||($60fadef21a2daafc$export$9547aaa2e39030ff={}));var $60fadef21a2daafc$export$89f507cf986a947;(function(n){n.Binary="binary",n.BinaryUTF8="binary-utf8",n.JSON="json"})($60fadef21a2daafc$export$89f507cf986a947||($60fadef21a2daafc$export$89f507cf986a947={}));var $60fadef21a2daafc$export$3b5c4a4b6354f023;(function(n){n.Message="message",n.Disconnected="disconnected",n.Error="error",n.Close="close"})($60fadef21a2daafc$export$3b5c4a4b6354f023||($60fadef21a2daafc$export$3b5c4a4b6354f023={}));var $60fadef21a2daafc$export$adb4a1754da6f10d;(function(n){n.Heartbeat="HEARTBEAT",n.Candidate="CANDIDATE",n.Offer="OFFER",n.Answer="ANSWER",n.Open="OPEN",n.Error="ERROR",n.IdTaken="ID-TAKEN",n.InvalidKey="INVALID-KEY",n.Leave="LEAVE",n.Expire="EXPIRE"})($60fadef21a2daafc$export$adb4a1754da6f10d||($60fadef21a2daafc$export$adb4a1754da6f10d={}));var $0d1ed891c5cb27c0$exports={};$0d1ed891c5cb27c0$exports=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var $31d11a8d122cb4b7$var$__extends=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}}(),$31d11a8d122cb4b7$var$__read=function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],u;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(d){u={error:d}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(u)throw u.error}}return s},$31d11a8d122cb4b7$var$__spreadArray=function(n,e,r){if(r||arguments.length===2)for(var t=0,a=e.length,s;t<a;t++)(s||!(t in e))&&(s||(s=Array.prototype.slice.call(e,0,t)),s[t]=e[t]);return n.concat(s||Array.prototype.slice.call(e))},$31d11a8d122cb4b7$var$__values=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$31d11a8d122cb4b7$export$4798917dbf149b79=function(n){$31d11a8d122cb4b7$var$__extends(e,n);function e(r,t,a,s,u,d){d===void 0&&(d=5e3);var c=n.call(this)||this;c.pingInterval=d,c._disconnected=!0,c._messagesQueue=[];var g=r?"wss://":"ws://";return c._baseUrl=g+t+":"+a+s+"peerjs?key="+u,c}return e.prototype.start=function(r,t){var a=this;this._id=r;var s="".concat(this._baseUrl,"&id=").concat(r,"&token=").concat(t);!!this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+$0d1ed891c5cb27c0$exports.version),this._disconnected=!1,this._socket.onmessage=function(u){var d;try{d=JSON.parse(u.data),$1615705ecc6adca3$exports.default.log("Server message received:",d)}catch{$1615705ecc6adca3$exports.default.log("Invalid server message",u.data);return}a.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Message,d)},this._socket.onclose=function(u){a._disconnected||($1615705ecc6adca3$exports.default.log("Socket closed.",u),a._cleanup(),a._disconnected=!0,a.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected))},this._socket.onopen=function(){a._disconnected||(a._sendQueuedMessages(),$1615705ecc6adca3$exports.default.log("Socket open"),a._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var r=this;this._wsPingTimer=setTimeout(function(){r._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(!this._wsOpen()){$1615705ecc6adca3$exports.default.log("Cannot send heartbeat, because socket closed");return}var r=JSON.stringify({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Heartbeat});this._socket.send(r),this._scheduleHeartbeat()},e.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},e.prototype._sendQueuedMessages=function(){var r,t,a=$31d11a8d122cb4b7$var$__spreadArray([],$31d11a8d122cb4b7$var$__read(this._messagesQueue),!1);this._messagesQueue=[];try{for(var s=$31d11a8d122cb4b7$var$__values(a),u=s.next();!u.done;u=s.next()){var d=u.value;this.send(d)}}catch(c){r={error:c}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}},e.prototype.send=function(r){if(!this._disconnected){if(!this._id){this._messagesQueue.push(r);return}if(!r.type){this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Error,"Invalid message");return}if(!!this._wsOpen()){var t=JSON.stringify(r);this._socket.send(t)}}},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}($ac9b757d51178e15$exports.EventEmitter),$353dee38f9ab557b$exports={};$parcel$export($353dee38f9ab557b$exports,"MediaConnection",()=>$353dee38f9ab557b$export$4a84e95a2324ac29,n=>$353dee38f9ab557b$export$4a84e95a2324ac29=n);var $77f14d3e81888156$exports={};$parcel$export($77f14d3e81888156$exports,"Negotiator",()=>$77f14d3e81888156$export$89e6bb5ad64bf4a,n=>$77f14d3e81888156$export$89e6bb5ad64bf4a=n);var $77f14d3e81888156$var$__assign=function(){return $77f14d3e81888156$var$__assign=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},$77f14d3e81888156$var$__assign.apply(this,arguments)},$77f14d3e81888156$var$__awaiter=function(n,e,r,t){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function d(m){try{g(t.next(m))}catch(_){u(_)}}function c(m){try{g(t.throw(m))}catch(_){u(_)}}function g(m){m.done?s(m.value):a(m.value).then(d,c)}g((t=t.apply(n,e||[])).next())})},$77f14d3e81888156$var$__generator=function(n,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},t,a,s,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(g){return function(m){return c([g,m])}}function c(g){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,a&&(s=g[0]&2?a.return:g[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,g[1])).done)return s;switch(a=0,s&&(g=[g[0]&2,s.value]),g[0]){case 0:case 1:s=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!s||g[1]>s[0]&&g[1]<s[3])){r.label=g[1];break}if(g[0]===6&&r.label<s[1]){r.label=s[1],s=g;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(g);break}s[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(n,r)}catch(m){g=[6,m],a=0}finally{t=s=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},$77f14d3e81888156$export$89e6bb5ad64bf4a=function(){function n(e){this.connection=e}return n.prototype.startConnection=function(e){var r=this._startPeerConnection();if(this.connection.peerConnection=r,this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Media&&e._stream&&this._addTracksToConnection(e._stream,r),e.originator){if(this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data){var t=this.connection,a={ordered:!!e.reliable},s=r.createDataChannel(t.label,a);t.initialize(s)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},n.prototype._startPeerConnection=function(){$1615705ecc6adca3$exports.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},n.prototype._setupListeners=function(e){var r=this,t=this.connection.peer,a=this.connection.connectionId,s=this.connection.type,u=this.connection.provider;$1615705ecc6adca3$exports.default.log("Listening for ICE candidates."),e.onicecandidate=function(d){!d.candidate||!d.candidate.candidate||($1615705ecc6adca3$exports.default.log("Received ICE candidates for ".concat(t,":"),d.candidate),u.socket.send({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Candidate,payload:{candidate:d.candidate,type:s,connectionId:a},dst:t}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":$1615705ecc6adca3$exports.default.log("iceConnectionState is failed, closing connections to "+t),r.connection.emit("error",new Error("Negotiation of connection to "+t+" failed.")),r.connection.close();break;case"closed":$1615705ecc6adca3$exports.default.log("iceConnectionState is closed, closing connections to "+t),r.connection.emit("error",new Error("Connection to "+t+" closed.")),r.connection.close();break;case"disconnected":$1615705ecc6adca3$exports.default.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=$06cb531ed7840f78$export$7debb50ef11d5e0b.noop;break}r.connection.emit("iceStateChanged",e.iceConnectionState)},$1615705ecc6adca3$exports.default.log("Listening for data channel"),e.ondatachannel=function(d){$1615705ecc6adca3$exports.default.log("Received data channel");var c=d.channel,g=u.getConnection(t,a);g.initialize(c)},$1615705ecc6adca3$exports.default.log("Listening for remote stream"),e.ontrack=function(d){$1615705ecc6adca3$exports.default.log("Received remote stream");var c=d.streams[0],g=u.getConnection(t,a);if(g.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Media){var m=g;r._addStreamToMediaConnection(c,m)}}},n.prototype.cleanup=function(){$1615705ecc6adca3$exports.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(!!e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var r=e.signalingState!=="closed",t=!1;if(this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data){var a=this.connection,s=a.dataChannel;s&&(t=!!s.readyState&&s.readyState!=="closed")}(r||t)&&e.close()}},n.prototype._makeOffer=function(){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var e,r,t,a,s,u,d;return $77f14d3e81888156$var$__generator(this,function(c){switch(c.label){case 0:e=this.connection.peerConnection,r=this.connection.provider,c.label=1;case 1:return c.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:t=c.sent(),$1615705ecc6adca3$exports.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(t.sdp=this.connection.options.sdpTransform(t.sdp)||t.sdp),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,e.setLocalDescription(t)];case 4:return c.sent(),$1615705ecc6adca3$exports.default.log("Set localDescription:",t,"for:".concat(this.connection.peer)),a={sdp:t,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:$06cb531ed7840f78$export$7debb50ef11d5e0b.browser},this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data&&(s=this.connection,a=$77f14d3e81888156$var$__assign($77f14d3e81888156$var$__assign({},a),{label:s.label,reliable:s.reliable,serialization:s.serialization})),r.socket.send({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Offer,payload:a,dst:this.connection.peer}),[3,6];case 5:return u=c.sent(),u!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(r.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,u),$1615705ecc6adca3$exports.default.log("Failed to setLocalDescription, ",u)),[3,6];case 6:return[3,8];case 7:return d=c.sent(),r.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,d),$1615705ecc6adca3$exports.default.log("Failed to createOffer, ",d),[3,8];case 8:return[2]}})})},n.prototype._makeAnswer=function(){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var e,r,t,a,s;return $77f14d3e81888156$var$__generator(this,function(u){switch(u.label){case 0:e=this.connection.peerConnection,r=this.connection.provider,u.label=1;case 1:return u.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:t=u.sent(),$1615705ecc6adca3$exports.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(t.sdp=this.connection.options.sdpTransform(t.sdp)||t.sdp),u.label=3;case 3:return u.trys.push([3,5,,6]),[4,e.setLocalDescription(t)];case 4:return u.sent(),$1615705ecc6adca3$exports.default.log("Set localDescription:",t,"for:".concat(this.connection.peer)),r.socket.send({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Answer,payload:{sdp:t,type:this.connection.type,connectionId:this.connection.connectionId,browser:$06cb531ed7840f78$export$7debb50ef11d5e0b.browser},dst:this.connection.peer}),[3,6];case 5:return a=u.sent(),r.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,a),$1615705ecc6adca3$exports.default.log("Failed to setLocalDescription, ",a),[3,6];case 6:return[3,8];case 7:return s=u.sent(),r.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,s),$1615705ecc6adca3$exports.default.log("Failed to create answer, ",s),[3,8];case 8:return[2]}})})},n.prototype.handleSDP=function(e,r){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var t,a,s,u;return $77f14d3e81888156$var$__generator(this,function(d){switch(d.label){case 0:r=new RTCSessionDescription(r),t=this.connection.peerConnection,a=this.connection.provider,$1615705ecc6adca3$exports.default.log("Setting remote description",r),s=this,d.label=1;case 1:return d.trys.push([1,5,,6]),[4,t.setRemoteDescription(r)];case 2:return d.sent(),$1615705ecc6adca3$exports.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),e!=="OFFER"?[3,4]:[4,s._makeAnswer()];case 3:d.sent(),d.label=4;case 4:return[3,6];case 5:return u=d.sent(),a.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,u),$1615705ecc6adca3$exports.default.log("Failed to setRemoteDescription, ",u),[3,6];case 6:return[2]}})})},n.prototype.handleCandidate=function(e){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var r,t,a,s,u,d;return $77f14d3e81888156$var$__generator(this,function(c){switch(c.label){case 0:$1615705ecc6adca3$exports.default.log("handleCandidate:",e),r=e.candidate,t=e.sdpMLineIndex,a=e.sdpMid,s=this.connection.peerConnection,u=this.connection.provider,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,s.addIceCandidate(new RTCIceCandidate({sdpMid:a,sdpMLineIndex:t,candidate:r}))];case 2:return c.sent(),$1615705ecc6adca3$exports.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return d=c.sent(),u.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,d),$1615705ecc6adca3$exports.default.log("Failed to handleCandidate, ",d),[3,4];case 4:return[2]}})})},n.prototype._addTracksToConnection=function(e,r){if($1615705ecc6adca3$exports.default.log("add tracks from stream ".concat(e.id," to peer connection")),!r.addTrack)return $1615705ecc6adca3$exports.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(t){r.addTrack(t,e)})},n.prototype._addStreamToMediaConnection=function(e,r){$1615705ecc6adca3$exports.default.log("add stream ".concat(e.id," to media connection ").concat(r.connectionId)),r.addStream(e)},n}(),$0b3b332fd86c5202$exports={};$parcel$export($0b3b332fd86c5202$exports,"BaseConnection",()=>$0b3b332fd86c5202$export$23a2a68283c24d80,n=>$0b3b332fd86c5202$export$23a2a68283c24d80=n);var $0b3b332fd86c5202$var$__extends=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}}(),$0b3b332fd86c5202$export$23a2a68283c24d80=function(n){$0b3b332fd86c5202$var$__extends(e,n);function e(r,t,a){var s=n.call(this)||this;return s.peer=r,s.provider=t,s.options=a,s._open=!1,s.metadata=a.metadata,s}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}($ac9b757d51178e15$exports.EventEmitter),$353dee38f9ab557b$var$__extends=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}}(),$353dee38f9ab557b$var$__assign=function(){return $353dee38f9ab557b$var$__assign=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},$353dee38f9ab557b$var$__assign.apply(this,arguments)},$353dee38f9ab557b$var$__values=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$353dee38f9ab557b$export$4a84e95a2324ac29=function(n){$353dee38f9ab557b$var$__extends(e,n);function e(r,t,a){var s=n.call(this,r,t,a)||this;return s._localStream=s.options._stream,s.connectionId=s.options.connectionId||e.ID_PREFIX+$06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),s._negotiator=new $77f14d3e81888156$exports.Negotiator(s),s._localStream&&s._negotiator.startConnection({_stream:s._localStream,originator:!0}),s}return Object.defineProperty(e.prototype,"type",{get:function(){return $60fadef21a2daafc$export$3157d57b4135e3bc.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(r){$1615705ecc6adca3$exports.default.log("Receiving stream",r),this._remoteStream=r,n.prototype.emit.call(this,"stream",r)},e.prototype.handleMessage=function(r){var t=r.type,a=r.payload;switch(r.type){case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:this._negotiator.handleSDP(t,a.sdp),this._open=!0;break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:this._negotiator.handleCandidate(a.candidate);break;default:$1615705ecc6adca3$exports.default.warn("Unrecognized message type:".concat(t," from peer:").concat(this.peer));break}},e.prototype.answer=function(r,t){var a,s;if(t===void 0&&(t={}),this._localStream){$1615705ecc6adca3$exports.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=r,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection($353dee38f9ab557b$var$__assign($353dee38f9ab557b$var$__assign({},this.options._payload),{_stream:r}));var u=this.provider._getMessages(this.connectionId);try{for(var d=$353dee38f9ab557b$var$__values(u),c=d.next();!c.done;c=d.next()){var g=c.value;this.handleMessage(g)}}catch(m){a={error:m}}finally{try{c&&!c.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}this._open=!0},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,n.prototype.emit.call(this,"close"))},e.ID_PREFIX="mc_",e}($0b3b332fd86c5202$exports.BaseConnection),$3356170d7bce7f20$exports={};$parcel$export($3356170d7bce7f20$exports,"DataConnection",()=>$3356170d7bce7f20$export$d365f7ad9d7df9c9,n=>$3356170d7bce7f20$export$d365f7ad9d7df9c9=n);var $3014d862dcc9946b$exports={};$parcel$export($3014d862dcc9946b$exports,"EncodingQueue",()=>$3014d862dcc9946b$export$c6913ae0ed687038,n=>$3014d862dcc9946b$export$c6913ae0ed687038=n);var $3014d862dcc9946b$var$__extends=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}}(),$3014d862dcc9946b$export$c6913ae0ed687038=function(n){$3014d862dcc9946b$var$__extends(e,n);function e(){var r=n.call(this)||this;return r.fileReader=new FileReader,r._queue=[],r._processing=!1,r.fileReader.onload=function(t){r._processing=!1,t.target&&r.emit("done",t.target.result),r.doNextTask()},r.fileReader.onerror=function(t){$1615705ecc6adca3$exports.default.error("EncodingQueue error:",t),r._processing=!1,r.destroy(),r.emit("error",t)},r}return Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(r){this.queue.push(r),!this.processing&&this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}($ac9b757d51178e15$exports.EventEmitter),$3356170d7bce7f20$var$__extends=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}}(),$3356170d7bce7f20$var$__values=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$3356170d7bce7f20$export$d365f7ad9d7df9c9=function(n){$3356170d7bce7f20$var$__extends(e,n);function e(r,t,a){var s=n.call(this,r,t,a)||this;return s.stringify=JSON.stringify,s.parse=JSON.parse,s._buffer=[],s._bufferSize=0,s._buffering=!1,s._chunkedData={},s._encodingQueue=new $3014d862dcc9946b$exports.EncodingQueue,s.connectionId=s.options.connectionId||e.ID_PREFIX+$06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),s.label=s.options.label||s.connectionId,s.serialization=s.options.serialization||$60fadef21a2daafc$export$89f507cf986a947.Binary,s.reliable=!!s.options.reliable,s._encodingQueue.on("done",function(u){s._bufferedSend(u)}),s._encodingQueue.on("error",function(){$1615705ecc6adca3$exports.default.error("DC#".concat(s.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),s.close()}),s._negotiator=new $77f14d3e81888156$exports.Negotiator(s),s._negotiator.startConnection(s.options._payload||{originator:!0}),s}return Object.defineProperty(e.prototype,"type",{get:function(){return $60fadef21a2daafc$export$3157d57b4135e3bc.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(r){this._dc=r,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var r=this;(!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob||$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){$1615705ecc6adca3$exports.default.log("DC#".concat(r.connectionId," dc connection success")),r._open=!0,r.emit("open")},this.dataChannel.onmessage=function(t){$1615705ecc6adca3$exports.default.log("DC#".concat(r.connectionId," dc onmessage:"),t.data),r._handleDataMessage(t)},this.dataChannel.onclose=function(){$1615705ecc6adca3$exports.default.log("DC#".concat(r.connectionId," dc closed for:"),r.peer),r.close()}},e.prototype._handleDataMessage=function(r){var t=this,a=r.data,s=a.constructor,u=this.serialization===$60fadef21a2daafc$export$89f507cf986a947.Binary||this.serialization===$60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8,d=a;if(u){if(s===Blob){$06cb531ed7840f78$export$7debb50ef11d5e0b.blobToArrayBuffer(a,function(g){var m=$06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(g);t.emit("data",m)});return}else if(s===ArrayBuffer)d=$06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(a);else if(s===String){var c=$06cb531ed7840f78$export$7debb50ef11d5e0b.binaryStringToArrayBuffer(a);d=$06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(c)}}else this.serialization===$60fadef21a2daafc$export$89f507cf986a947.JSON&&(d=this.parse(a));if(d.__peerData){this._handleChunk(d);return}n.prototype.emit.call(this,"data",d)},e.prototype._handleChunk=function(r){var t=r.__peerData,a=this._chunkedData[t]||{data:[],count:0,total:r.total};if(a.data[r.n]=r.data,a.count++,this._chunkedData[t]=a,a.total===a.count){delete this._chunkedData[t];var s=new Blob(a.data);this._handleDataMessage({data:s})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,n.prototype.emit.call(this,"close"))},e.prototype.send=function(r,t){if(!this.open){n.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===$60fadef21a2daafc$export$89f507cf986a947.JSON)this._bufferedSend(this.stringify(r));else if(this.serialization===$60fadef21a2daafc$export$89f507cf986a947.Binary||this.serialization===$60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8){var a=$06cb531ed7840f78$export$7debb50ef11d5e0b.pack(r);if(!t&&a.size>$06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU){this._sendChunks(a);return}$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob?this._bufferedSend(a):this._encodingQueue.enque(a)}else this._bufferedSend(r)},e.prototype._bufferedSend=function(r){(this._buffering||!this._trySend(r))&&(this._buffer.push(r),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(r){var t=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){t._buffering=!1,t._tryBuffer()},50),!1;try{this.dataChannel.send(r)}catch(a){return $1615705ecc6adca3$exports.default.error("DC#:".concat(this.connectionId," Error when sending:"),a),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){if(!!this.open&&this._buffer.length!==0){var r=this._buffer[0];this._trySend(r)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},e.prototype._sendChunks=function(r){var t,a,s=$06cb531ed7840f78$export$7debb50ef11d5e0b.chunk(r);$1615705ecc6adca3$exports.default.log("DC#".concat(this.connectionId," Try to send ").concat(s.length," chunks..."));try{for(var u=$3356170d7bce7f20$var$__values(s),d=u.next();!d.done;d=u.next()){var c=d.value;this.send(c,!0)}}catch(g){t={error:g}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(t)throw t.error}}},e.prototype.handleMessage=function(r){var t=r.payload;switch(r.type){case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:this._negotiator.handleSDP(r.type,t.sdp);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:$1615705ecc6adca3$exports.default.warn("Unrecognized message type:",r.type,"from peer:",this.peer);break}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}($0b3b332fd86c5202$exports.BaseConnection),$9e85b3e1327369e6$exports={};$parcel$export($9e85b3e1327369e6$exports,"API",()=>$9e85b3e1327369e6$export$2c4e825dc9120f87,n=>$9e85b3e1327369e6$export$2c4e825dc9120f87=n);var $9e85b3e1327369e6$var$__awaiter=function(n,e,r,t){function a(s){return s instanceof r?s:new r(function(u){u(s)})}return new(r||(r=Promise))(function(s,u){function d(m){try{g(t.next(m))}catch(_){u(_)}}function c(m){try{g(t.throw(m))}catch(_){u(_)}}function g(m){m.done?s(m.value):a(m.value).then(d,c)}g((t=t.apply(n,e||[])).next())})},$9e85b3e1327369e6$var$__generator=function(n,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},t,a,s,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(g){return function(m){return c([g,m])}}function c(g){if(t)throw new TypeError("Generator is already executing.");for(;r;)try{if(t=1,a&&(s=g[0]&2?a.return:g[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,g[1])).done)return s;switch(a=0,s&&(g=[g[0]&2,s.value]),g[0]){case 0:case 1:s=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,a=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!s||g[1]>s[0]&&g[1]<s[3])){r.label=g[1];break}if(g[0]===6&&r.label<s[1]){r.label=s[1],s=g;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(g);break}s[2]&&r.ops.pop(),r.trys.pop();continue}g=e.call(n,r)}catch(m){g=[6,m],a=0}finally{t=s=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},$9e85b3e1327369e6$export$2c4e825dc9120f87=function(){function n(e){this._options=e}return n.prototype._buildRequest=function(e){var r=this._options.secure?"https":"http",t=this._options,a=t.host,s=t.port,u=t.path,d=t.key,c=new URL("".concat(r,"://").concat(a,":").concat(s).concat(u).concat(d,"/").concat(e));return c.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),c.searchParams.set("version",$0d1ed891c5cb27c0$exports.version),fetch(c.href,{referrerPolicy:this._options.referrerPolicy})},n.prototype.retrieveId=function(){return $9e85b3e1327369e6$var$__awaiter(this,void 0,Promise,function(){var e,r,t;return $9e85b3e1327369e6$var$__generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(e=a.sent(),e.status!==200)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw r=a.sent(),$1615705ecc6adca3$exports.default.error("Error retrieving ID",r),t="",this._options.path==="/"&&this._options.host!==$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t);case 3:return[2]}})})},n.prototype.listAllPeers=function(){return $9e85b3e1327369e6$var$__awaiter(this,void 0,Promise,function(){var e,r,t;return $9e85b3e1327369e6$var$__generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(e=a.sent(),e.status!==200)throw e.status===401?(r="",this._options.host===$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST?r="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":r="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+r)):new Error("Error. Status:".concat(e.status));return[2,e.json()];case 2:throw t=a.sent(),$1615705ecc6adca3$exports.default.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t);case 3:return[2]}})})},n}(),$26088d7da5b03f69$var$__extends=function(){var n=function(e,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,a){t.__proto__=a}||function(t,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])},n(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");n(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}}(),$26088d7da5b03f69$var$__assign=function(){return $26088d7da5b03f69$var$__assign=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n},$26088d7da5b03f69$var$__assign.apply(this,arguments)},$26088d7da5b03f69$var$__values=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&n[e],t=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&t>=n.length&&(n=void 0),{value:n&&n[t++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$26088d7da5b03f69$var$__read=function(n,e){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var t=r.call(n),a,s=[],u;try{for(;(e===void 0||e-- >0)&&!(a=t.next()).done;)s.push(a.value)}catch(d){u={error:d}}finally{try{a&&!a.done&&(r=t.return)&&r.call(t)}finally{if(u)throw u.error}}return s},$26088d7da5b03f69$export$ecd1fc136c422448=function(n){$26088d7da5b03f69$var$__extends(e,n);function e(r,t){var a=n.call(this)||this;a._id=null,a._lastServerId=null,a._destroyed=!1,a._disconnected=!1,a._open=!1,a._connections=new Map,a._lostMessages=new Map;var s;return r&&r.constructor==Object?t=r:r&&(s=r.toString()),t=$26088d7da5b03f69$var$__assign({debug:0,host:$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST,port:$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:$06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),config:$06cb531ed7840f78$export$7debb50ef11d5e0b.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},t),a._options=t,a._options.host==="/"&&(a._options.host=window.location.hostname),a._options.path&&(a._options.path[0]!=="/"&&(a._options.path="/"+a._options.path),a._options.path[a._options.path.length-1]!=="/"&&(a._options.path+="/")),a._options.secure===void 0&&a._options.host!==$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST?a._options.secure=$06cb531ed7840f78$export$7debb50ef11d5e0b.isSecure():a._options.host==$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST&&(a._options.secure=!0),a._options.logFunction&&$1615705ecc6adca3$exports.default.setLogFunction(a._options.logFunction),$1615705ecc6adca3$exports.default.logLevel=a._options.debug||0,a._api=new $9e85b3e1327369e6$exports.API(t),a._socket=a._createServerConnection(),!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.audioVideo&&!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.data?(a._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.BrowserIncompatible,"The current browser does not support WebRTC"),a):!!s&&!$06cb531ed7840f78$export$7debb50ef11d5e0b.validateId(s)?(a._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidID,'ID "'.concat(s,'" is invalid')),a):(s?a._initialize(s):a._api.retrieveId().then(function(u){return a._initialize(u)}).catch(function(u){return a._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError,u)}),a)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var r,t,a=Object.create(null);try{for(var s=$26088d7da5b03f69$var$__values(this._connections),u=s.next();!u.done;u=s.next()){var d=$26088d7da5b03f69$var$__read(u.value,2),c=d[0],g=d[1];a[c]=g}}catch(m){r={error:m}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}return a},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var r=this,t=new $31d11a8d122cb4b7$exports.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Message,function(a){r._handleMessage(a)}),t.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Error,function(a){r._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketError,a)}),t.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected,function(){r.disconnected||(r.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Network,"Lost connection to server."),r.disconnect())}),t.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Close,function(){r.disconnected||r._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketClosed,"Underlying socket is already closed.")}),t},e.prototype._initialize=function(r){this._id=r,this.socket.start(r,this._options.token)},e.prototype._handleMessage=function(r){var t,a,s=r.type,u=r.payload,d=r.src;switch(s){case $60fadef21a2daafc$export$adb4a1754da6f10d.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Error:this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError,u.msg);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.IdTaken:this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case $60fadef21a2daafc$export$adb4a1754da6f10d.InvalidKey:this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Leave:$1615705ecc6adca3$exports.default.log("Received leave message from ".concat(d)),this._cleanupPeer(d),this._connections.delete(d);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Expire:this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.PeerUnavailable,"Could not connect to peer ".concat(d));break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Offer:var C=u.connectionId,R=this.getConnection(d,C);if(R&&(R.close(),$1615705ecc6adca3$exports.default.warn("Offer received for existing Connection ID:".concat(C))),u.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Media){var c=new $353dee38f9ab557b$exports.MediaConnection(d,this,{connectionId:C,_payload:u,metadata:u.metadata});R=c,this._addConnection(d,R),this.emit("call",c)}else if(u.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data){var g=new $3356170d7bce7f20$exports.DataConnection(d,this,{connectionId:C,_payload:u,metadata:u.metadata,label:u.label,serialization:u.serialization,reliable:u.reliable});R=g,this._addConnection(d,R),this.emit("connection",g)}else{$1615705ecc6adca3$exports.default.warn("Received malformed connection type:".concat(u.type));return}var m=this._getMessages(C);try{for(var _=$26088d7da5b03f69$var$__values(m),b=_.next();!b.done;b=_.next()){var S=b.value;R.handleMessage(S)}}catch(w){t={error:w}}finally{try{b&&!b.done&&(a=_.return)&&a.call(_)}finally{if(t)throw t.error}}break;default:if(!u){$1615705ecc6adca3$exports.default.warn("You received a malformed message from ".concat(d," of type ").concat(s));return}var C=u.connectionId,R=this.getConnection(d,C);R&&R.peerConnection?R.handleMessage(r):C?this._storeMessage(C,r):$1615705ecc6adca3$exports.default.warn("You received an unrecognized message:",r);break}},e.prototype._storeMessage=function(r,t){this._lostMessages.has(r)||this._lostMessages.set(r,[]),this._lostMessages.get(r).push(t)},e.prototype._getMessages=function(r){var t=this._lostMessages.get(r);return t?(this._lostMessages.delete(r),t):[]},e.prototype.connect=function(r,t){if(t===void 0&&(t={}),this.disconnected){$1615705ecc6adca3$exports.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var a=new $3356170d7bce7f20$exports.DataConnection(r,this,t);return this._addConnection(r,a),a},e.prototype.call=function(r,t,a){if(a===void 0&&(a={}),this.disconnected){$1615705ecc6adca3$exports.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){$1615705ecc6adca3$exports.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var s=new $353dee38f9ab557b$exports.MediaConnection(r,this,$26088d7da5b03f69$var$__assign($26088d7da5b03f69$var$__assign({},a),{_stream:t}));return this._addConnection(r,s),s},e.prototype._addConnection=function(r,t){$1615705ecc6adca3$exports.default.log("add connection ".concat(t.type,":").concat(t.connectionId," to peerId:").concat(r)),this._connections.has(r)||this._connections.set(r,[]),this._connections.get(r).push(t)},e.prototype._removeConnection=function(r){var t=this._connections.get(r.peer);if(t){var a=t.indexOf(r);a!==-1&&t.splice(a,1)}this._lostMessages.delete(r.connectionId)},e.prototype.getConnection=function(r,t){var a,s,u=this._connections.get(r);if(!u)return null;try{for(var d=$26088d7da5b03f69$var$__values(u),c=d.next();!c.done;c=d.next()){var g=c.value;if(g.connectionId===t)return g}}catch(m){a={error:m}}finally{try{c&&!c.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return null},e.prototype._delayedAbort=function(r,t){var a=this;setTimeout(function(){a._abort(r,t)},0)},e.prototype._abort=function(r,t){$1615705ecc6adca3$exports.default.error("Aborting!"),this.emitError(r,t),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(r,t){$1615705ecc6adca3$exports.default.error("Error:",t);var a;typeof t=="string"?a=new Error(t):a=t,a.type=r,this.emit("error",a)},e.prototype.destroy=function(){this.destroyed||($1615705ecc6adca3$exports.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},e.prototype._cleanup=function(){var r,t;try{for(var a=$26088d7da5b03f69$var$__values(this._connections.keys()),s=a.next();!s.done;s=a.next()){var u=s.value;this._cleanupPeer(u),this._connections.delete(u)}}catch(d){r={error:d}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(r)throw r.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(r){var t,a,s=this._connections.get(r);if(!!s)try{for(var u=$26088d7da5b03f69$var$__values(s),d=u.next();!d.done;d=u.next()){var c=d.value;c.close()}}catch(g){t={error:g}}finally{try{d&&!d.done&&(a=u.return)&&a.call(u)}finally{if(t)throw t.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var r=this.id;$1615705ecc6adca3$exports.default.log("Disconnect peer with ID:".concat(r)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=r,this._id=null,this.emit("disconnected",r)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)$1615705ecc6adca3$exports.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)$1615705ecc6adca3$exports.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},e.prototype.listAllPeers=function(r){var t=this;r===void 0&&(r=function(a){}),this._api.listAllPeers().then(function(a){return r(a)}).catch(function(a){return t._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError,a)})},e.DEFAULT_KEY="peerjs",e}($ac9b757d51178e15$exports.EventEmitter),$70d766613f57b014$export$2e2bcd8739ae039=$26088d7da5b03f69$exports.Peer;function cubicOut(n){const e=n-1;return e*e*e+1}function fade(n,{delay:e=0,duration:r=400,easing:t=identity}={}){const a=+getComputedStyle(n).opacity;return{delay:e,duration:r,easing:t,css:s=>`opacity: ${s*a}`}}function fly(n,{delay:e=0,duration:r=400,easing:t=cubicOut,x:a=0,y:s=0,opacity:u=0}={}){const d=getComputedStyle(n),c=+d.opacity,g=d.transform==="none"?"":d.transform,m=c*(1-u);return{delay:e,duration:r,easing:t,css:(_,b)=>`
			transform: ${g} translate(${(1-_)*a}px, ${(1-_)*s}px);
			opacity: ${c-m*b}`}}function slide(n,{delay:e=0,duration:r=400,easing:t=cubicOut}={}){const a=getComputedStyle(n),s=+a.opacity,u=parseFloat(a.height),d=parseFloat(a.paddingTop),c=parseFloat(a.paddingBottom),g=parseFloat(a.marginTop),m=parseFloat(a.marginBottom),_=parseFloat(a.borderTopWidth),b=parseFloat(a.borderBottomWidth);return{delay:e,duration:r,easing:t,css:S=>`overflow: hidden;opacity: ${Math.min(S*20,1)*s};height: ${S*u}px;padding-top: ${S*d}px;padding-bottom: ${S*c}px;margin-top: ${S*g}px;margin-bottom: ${S*m}px;border-top-width: ${S*_}px;border-bottom-width: ${S*b}px;`}}function flip$2(n,{from:e,to:r},t={}){const a=getComputedStyle(n),s=a.transform==="none"?"":a.transform,[u,d]=a.transformOrigin.split(" ").map(parseFloat),c=e.left+e.width*u/r.width-(r.left+u),g=e.top+e.height*d/r.height-(r.top+d),{delay:m=0,duration:_=S=>Math.sqrt(S)*120,easing:b=cubicOut}=t;return{delay:m,duration:is_function(_)?_(Math.sqrt(c*c+g*g)):_,easing:b,css:(S,C)=>{const R=C*c,w=C*g,k=S+C*e.width/r.width,$=S+C*e.height/r.height;return`transform: ${s} translate(${R}px, ${w}px) scale(${k}, ${$});`}}}const defaults={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},createToast=()=>{const{subscribe:n,update:e}=writable([]);let r=0;const t={},a=g=>g instanceof Object;return{subscribe:n,push:(g,m={})=>{const _={target:"default",...a(g)?g:{...m,msg:g}},b=t[_.target]||{},S={...defaults,...b,..._,theme:{...b.theme,..._.theme},classes:[...b.classes||[],..._.classes||[]],id:++r};return e(C=>S.reversed?[...C,S]:[S,...C]),r},pop:g=>{e(m=>{if(!m.length||g===0)return[];if(a(g))return m.filter(b=>g(b));const _=g||Math.max(...m.map(b=>b.id));return m.filter(b=>b.id!==_)})},set:(g,m={})=>{const _=a(g)?{...g}:{...m,id:g};e(b=>{const S=b.findIndex(C=>C.id===_.id);return S>-1&&(b[S]={...b[S],..._}),b})},_init:(g="default",m={})=>(t[g]=m,t)}},toast=createToast();function is_date(n){return Object.prototype.toString.call(n)==="[object Date]"}function get_interpolator(n,e){if(n===e||n!==n)return()=>n;const r=typeof n;if(r!==typeof e||Array.isArray(n)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const t=e.map((a,s)=>get_interpolator(n[s],a));return a=>t.map(s=>s(a))}if(r==="object"){if(!n||!e)throw new Error("Object cannot be null");if(is_date(n)&&is_date(e)){n=n.getTime(),e=e.getTime();const s=e-n;return u=>new Date(n+u*s)}const t=Object.keys(e),a={};return t.forEach(s=>{a[s]=get_interpolator(n[s],e[s])}),s=>{const u={};return t.forEach(d=>{u[d]=a[d](s)}),u}}if(r==="number"){const t=e-n;return a=>n+a*t}throw new Error(`Cannot interpolate ${r} values`)}function tweened(n,e={}){const r=writable(n);let t,a=n;function s(u,d){if(n==null)return r.set(n=u),Promise.resolve();a=u;let c=t,g=!1,{delay:m=0,duration:_=400,easing:b=identity,interpolate:S=get_interpolator}=assign$3(assign$3({},e),d);if(_===0)return c&&(c.abort(),c=null),r.set(n=a),Promise.resolve();const C=now()+m;let R;return t=loop(w=>{if(w<C)return!0;g||(R=S(n,u),typeof _=="function"&&(_=_(n,u)),g=!0),c&&(c.abort(),c=null);const k=w-C;return k>_?(r.set(n=u),!1):(r.set(n=R(b(k/_))),!0)}),t.promise}return{set:s,update:(u,d)=>s(u(a,n),d),subscribe:r.subscribe}}const ToastItem_svelte_svelte_type_style_lang="";function create_else_block$2(n){let e,r=n[0].msg+"",t;return{c(){e=new HtmlTag(!1),t=empty(),e.a=t},m(a,s){e.m(r,a,s),insert(a,t,s)},p(a,s){s&1&&r!==(r=a[0].msg+"")&&e.p(r)},i:noop$1,o:noop$1,d(a){a&&detach(t),a&&e.d()}}}function create_if_block_1$4(n){let e,r,t;const a=[n[2]];var s=n[0].component.src;function u(d){let c={};for(let g=0;g<a.length;g+=1)c=assign$3(c,a[g]);return{props:c}}return s&&(e=construct_svelte_component(s,u())),{c(){e&&create_component(e.$$.fragment),r=empty()},m(d,c){e&&mount_component(e,d,c),insert(d,r,c),t=!0},p(d,c){const g=c&4?get_spread_update(a,[get_spread_object(d[2])]):{};if(s!==(s=d[0].component.src)){if(e){group_outros();const m=e;transition_out(m.$$.fragment,1,0,()=>{destroy_component(m,1)}),check_outros()}s?(e=construct_svelte_component(s,u()),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,r.parentNode,r)):e=null}else s&&e.$set(g)},i(d){t||(e&&transition_in(e.$$.fragment,d),t=!0)},o(d){e&&transition_out(e.$$.fragment,d),t=!1},d(d){d&&detach(r),e&&destroy_component(e,d)}}}function create_if_block$7(n){let e,r,t;return{c(){e=element("div"),attr(e,"class","_toastBtn pe svelte-l65oht"),attr(e,"role","button"),attr(e,"tabindex","0")},m(a,s){insert(a,e,s),r||(t=[listen(e,"click",n[4]),listen(e,"keydown",n[8])],r=!0)},p:noop$1,d(a){a&&detach(e),r=!1,run_all(t)}}}function create_fragment$s(n){let e,r,t,a,s,u,d,c,g,m;const _=[create_if_block_1$4,create_else_block$2],b=[];function S(R,w){return R[0].component?0:1}t=S(n),a=b[t]=_[t](n);let C=n[0].dismissable&&create_if_block$7(n);return{c(){e=element("div"),r=element("div"),a.c(),s=space(),C&&C.c(),u=space(),d=element("progress"),attr(r,"role","status"),attr(r,"class","_toastMsg svelte-l65oht"),toggle_class(r,"pe",n[0].component),attr(d,"class","_toastBar svelte-l65oht"),d.value=n[1],attr(e,"class","_toastItem svelte-l65oht"),toggle_class(e,"pe",n[0].pausable)},m(R,w){insert(R,e,w),append(e,r),b[t].m(r,null),append(e,s),C&&C.m(e,null),append(e,u),append(e,d),c=!0,g||(m=[listen(e,"mouseenter",n[9]),listen(e,"mouseleave",n[6])],g=!0)},p(R,[w]){let k=t;t=S(R),t===k?b[t].p(R,w):(group_outros(),transition_out(b[k],1,1,()=>{b[k]=null}),check_outros(),a=b[t],a?a.p(R,w):(a=b[t]=_[t](R),a.c()),transition_in(a,1),a.m(r,null)),(!c||w&1)&&toggle_class(r,"pe",R[0].component),R[0].dismissable?C?C.p(R,w):(C=create_if_block$7(R),C.c(),C.m(e,u)):C&&(C.d(1),C=null),(!c||w&2)&&(d.value=R[1]),(!c||w&1)&&toggle_class(e,"pe",R[0].pausable)},i(R){c||(transition_in(a),c=!0)},o(R){transition_out(a),c=!1},d(R){R&&detach(e),b[t].d(),C&&C.d(),g=!1,run_all(m)}}}function instance$q(n,e,r){let t,{item:a}=e;const s=tweened(a.initial,{duration:a.duration,easing:identity});component_subscribe(n,s,O=>r(1,t=O));const u=()=>toast.pop(a.id),d=()=>{(t===1||t===0)&&u()};let c=a.initial,g=c,m=!1;const _=()=>{!m&&t!==c&&(s.set(t,{duration:0}),m=!0)},b=()=>{if(m){const O=a.duration,I=O-O*((t-g)/(c-g));s.set(c,{duration:I}).then(d),m=!1}};let S={};const C=(O,I="undefined")=>typeof O===I;let R;onMount((O=document)=>{if(C(O.hidden))return;const I=()=>O.hidden?_():b(),x="visibilitychange";O.addEventListener(x,I),R=()=>O.removeEventListener(x,I),I()}),onDestroy(()=>{C(a.onpop,"function")&&a.onpop(a.id),R&&R()});const k=O=>{O instanceof KeyboardEvent&&["Enter"," "].includes(O.key)&&u()},$=()=>{a.pausable&&_()};return n.$$set=O=>{"item"in O&&r(0,a=O.item)},n.$$.update=()=>{if(n.$$.dirty&1&&(C(a.progress)||r(0,a.next=a.progress,a)),n.$$.dirty&131&&c!==a.next&&(r(7,c=a.next),g=t,m=!1,s.set(c).then(d)),n.$$.dirty&1&&a.component){const{props:O={},sendIdTo:I}=a.component;r(2,S={...O,...I&&{[I]:a.id}})}},[a,t,S,s,u,_,b,c,k,$]}class ToastItem extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$q,create_fragment$s,safe_not_equal,{item:0})}}const SvelteToast_svelte_svelte_type_style_lang="";function get_each_context$4(n,e,r){const t=n.slice();return t[5]=e[r],t}function create_each_block$4(n,e){let r,t,a,s,u,d,c,g,m=noop$1,_;return t=new ToastItem({props:{item:e[5]}}),{key:n,first:null,c(){r=element("li"),create_component(t.$$.fragment),a=space(),attr(r,"class",s=null_to_empty(e[5].classes.join(" "))+" svelte-yh90az"),attr(r,"style",u=e[1](e[5].theme)),this.first=r},m(b,S){insert(b,r,S),mount_component(t,r,null),append(r,a),_=!0},p(b,S){e=b;const C={};S&1&&(C.item=e[5]),t.$set(C),(!_||S&1&&s!==(s=null_to_empty(e[5].classes.join(" "))+" svelte-yh90az"))&&attr(r,"class",s),(!_||S&1&&u!==(u=e[1](e[5].theme)))&&attr(r,"style",u)},r(){g=r.getBoundingClientRect()},f(){fix_position(r),m(),add_transform(r,g)},a(){m(),m=create_animation(r,g,flip$2,{duration:200})},i(b){_||(transition_in(t.$$.fragment,b),add_render_callback(()=>{c&&c.end(1),d=create_in_transition(r,fly,e[5].intro),d.start()}),_=!0)},o(b){transition_out(t.$$.fragment,b),d&&d.invalidate(),c=create_out_transition(r,fade,{}),_=!1},d(b){b&&detach(r),destroy_component(t),b&&c&&c.end()}}}function create_fragment$r(n){let e,r=[],t=new Map,a,s=n[0];const u=d=>d[5].id;for(let d=0;d<s.length;d+=1){let c=get_each_context$4(n,s,d),g=u(c);t.set(g,r[d]=create_each_block$4(g,c))}return{c(){e=element("ul");for(let d=0;d<r.length;d+=1)r[d].c();attr(e,"class","_toastContainer svelte-yh90az")},m(d,c){insert(d,e,c);for(let g=0;g<r.length;g+=1)r[g].m(e,null);a=!0},p(d,[c]){if(c&3){s=d[0],group_outros();for(let g=0;g<r.length;g+=1)r[g].r();r=update_keyed_each(r,c,u,1,d,s,t,e,fix_and_outro_and_destroy_block,create_each_block$4,null,get_each_context$4);for(let g=0;g<r.length;g+=1)r[g].a();check_outros()}},i(d){if(!a){for(let c=0;c<s.length;c+=1)transition_in(r[c]);a=!0}},o(d){for(let c=0;c<r.length;c+=1)transition_out(r[c]);a=!1},d(d){d&&detach(e);for(let c=0;c<r.length;c+=1)r[c].d()}}}function instance$p(n,e,r){let t;component_subscribe(n,toast,c=>r(4,t=c));let{options:a={}}=e,{target:s="default"}=e,u;const d=c=>Object.keys(c).reduce((g,m)=>`${g}${m}:${c[m]};`,"");return n.$$set=c=>{"options"in c&&r(2,a=c.options),"target"in c&&r(3,s=c.target)},n.$$.update=()=>{n.$$.dirty&12&&toast._init(s,a),n.$$.dirty&24&&r(0,u=t.filter(c=>c.target===s))},[u,d,a,s,t]}class SvelteToast extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$p,create_fragment$r,safe_not_equal,{options:2,target:3})}}const LoadingIndicator_svelte_svelte_type_style_lang="";function create_if_block$6(n){let e,r,t,a,s;return{c(){e=element("div"),r=element("div"),t=space(),a=element("span"),s=text(n[0]),attr(r,"class","svelte-19tuhcz"),attr(a,"id","site_loading_text"),attr(a,"class","svelte-19tuhcz"),attr(e,"id","site_loading_indicator"),attr(e,"class","lds-circle svelte-19tuhcz")},m(u,d){insert(u,e,d),append(e,r),append(e,t),append(e,a),append(a,s)},p(u,d){d&1&&set_data(s,u[0])},d(u){u&&detach(e)}}}function create_fragment$q(n){let e,r=n[0]!=null&&create_if_block$6(n);return{c(){r&&r.c(),e=empty()},m(t,a){r&&r.m(t,a),insert(t,e,a)},p(t,[a]){t[0]!=null?r?r.p(t,a):(r=create_if_block$6(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:noop$1,o:noop$1,d(t){r&&r.d(t),t&&detach(e)}}}let currentMsg=nStore(null),loadingStack={};const showLoadingUi=(n,e)=>{const r=e||n||LOADING_MESSAGE.default;currentMsg.set(r),console.debug("showLoadingUi",r),loadingStack[n]=r},hideLoadingUi=n=>{n===LOADING_MESSAGE.clearAll?loadingStack={}:delete loadingStack[n];const e=Object.keys(loadingStack);e.length===0?currentMsg.set(null):(currentMsg.set(loadingStack[e[e.length-1]]),console.debug("hideLoadingUi Nonempty stack",n))};function instance$o(n,e,r){let t;return component_subscribe(n,currentMsg,a=>r(0,t=a)),[t]}class LoadingIndicator extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$o,create_fragment$q,safe_not_equal,{})}}function getROVName(n){return ROV_PEERID_BASE+getUniqueName(n,MEMORABLE_PEER_ID_OFFSET)}function calculateDesiredMotion(n){var e=Number(n[0].toFixed(3)),r=-1*Number(n[1].toFixed(3)),t=Number(n[2].toFixed(3)),a=-1*Number(n[3].toFixed(3));return{thrustVector:[t,r,a],turnRate:e}}var State$1;(function(n){n[n.Open=0]="Open",n[n.Closed=1]="Closed"})(State$1||(State$1={}));const OPEN_CLOSED_CONTEXT_NAME="headlessui-open-closed-context";function useOpenClosed(){return getContext(OPEN_CLOSED_CONTEXT_NAME)}function match(n,e,...r){if(n in e){let a=e[n];return typeof a=="function"?a(...r):a}let t=new Error(`Tried to handle "${n}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,match),t}let id=0;function generateId(){return++id}function useId(){return generateId()}let interactables=new Set,originals=new Map;function inert(n){n.setAttribute("aria-hidden","true"),n.inert=!0}function restore(n){let e=originals.get(n);!e||(e["aria-hidden"]===null?n.removeAttribute("aria-hidden"):n.setAttribute("aria-hidden",e["aria-hidden"]),n.inert=e.inert)}function useInertOthers(n,e=!0){if(!e||!n)return;let r=n;interactables.add(r);for(let t of originals.keys())t.contains(r)&&(restore(t),originals.delete(t));return document.querySelectorAll("body > *").forEach(t=>{if(t instanceof HTMLElement){for(let a of interactables)if(t.contains(a))return;interactables.size===1&&(originals.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),inert(t))}}),()=>{if(interactables.delete(r),interactables.size>0)document.querySelectorAll("body > *").forEach(t=>{if(t instanceof HTMLElement&&!originals.has(t)){for(let a of interactables)if(t.contains(a))return;originals.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),inert(t)}});else for(let t of originals.keys())restore(t),originals.delete(t)}}function contains$1(n,e){for(let r of n)if(r.contains(e))return!0;return!1}var Keys;(function(n){n.Space=" ",n.Enter="Enter",n.Escape="Escape",n.Backspace="Backspace",n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n.Home="Home",n.End="End",n.PageUp="PageUp",n.PageDown="PageDown",n.Tab="Tab"})(Keys||(Keys={}));let focusableSelector=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(n=>`${n}:not([tabindex='-1'])`).join(",");var Focus$1;(function(n){n[n.First=1]="First",n[n.Previous=2]="Previous",n[n.Next=4]="Next",n[n.Last=8]="Last",n[n.WrapAround=16]="WrapAround",n[n.NoScroll=32]="NoScroll"})(Focus$1||(Focus$1={}));var FocusResult;(function(n){n[n.Error=0]="Error",n[n.Overflow=1]="Overflow",n[n.Success=2]="Success",n[n.Underflow=3]="Underflow"})(FocusResult||(FocusResult={}));var Direction;(function(n){n[n.Previous=-1]="Previous",n[n.Next=1]="Next"})(Direction||(Direction={}));function getFocusableElements(n=document.body){return n==null?[]:Array.from(n.querySelectorAll(focusableSelector))}var FocusableMode;(function(n){n[n.Strict=0]="Strict",n[n.Loose=1]="Loose"})(FocusableMode||(FocusableMode={}));function focusElement(n){n==null||n.focus({preventScroll:!0})}function focusIn(n,e){let r=Array.isArray(n)?n:getFocusableElements(n),t=document.activeElement,a=(()=>{if(e&(Focus$1.First|Focus$1.Next))return Direction.Next;if(e&(Focus$1.Previous|Focus$1.Last))return Direction.Previous;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),s=(()=>{if(e&Focus$1.First)return 0;if(e&Focus$1.Previous)return Math.max(0,r.indexOf(t))-1;if(e&Focus$1.Next)return Math.max(0,r.indexOf(t))+1;if(e&Focus$1.Last)return r.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&Focus$1.NoScroll?{preventScroll:!0}:{},d=0,c=r.length,g;do{if(d>=c||d+c<=0)return FocusResult.Error;let m=s+d;if(e&Focus$1.WrapAround)m=(m+c)%c;else{if(m<0)return FocusResult.Underflow;if(m>=c)return FocusResult.Overflow}g=r[m],g==null||g.focus(u),d+=a}while(g!==document.activeElement);return g.hasAttribute("tabindex")||g.setAttribute("tabindex","0"),FocusResult.Success}const{window:window_1$1}=globals;function create_fragment$p(n){let e,r;return{c:noop$1,m(t,a){e||(r=[listen(window_1$1,"keydown",n[0]),listen(window_1$1,"focus",n[1],!0)],e=!0)},p:noop$1,i:noop$1,o:noop$1,d(t){e=!1,run_all(r)}}}function instance$n(n,e,r){let{containers:t}=e,{enabled:a=!0}=e,{options:s={}}=e,u=typeof window<"u"?document.activeElement:null,d=null;async function c(){if(!a||t.size!==1)return;let{initialFocus:S}=s;await tick();let C=document.activeElement;if(S){if(S===C)return}else if(contains$1(t,C))return;if(u=C,S)focusElement(S);else{let R=!1;for(let w of t)if(focusIn(w,Focus$1.First)===FocusResult.Success){R=!0;break}R||console.warn("There are no focusable elements inside the <FocusTrap />")}d=document.activeElement}function g(){focusElement(u),u=null,d=null}onMount(c);let m=!1;onDestroy(()=>{m=!0,g()});function _(S){if(!!a&&S.key===Keys.Tab&&!!document.activeElement&&t.size===1){S.preventDefault();for(let C of t)if(focusIn(C,(S.shiftKey?Focus$1.Previous:Focus$1.Next)|Focus$1.WrapAround)===FocusResult.Success){d=document.activeElement;break}}}function b(S){if(S.target===window.document.body||!a||t.size!==1||m)return;let C=d;if(!C)return;let R=S.target;R&&R instanceof HTMLElement?contains$1(t,R)?(d=R,focusElement(R)):(S.preventDefault(),S.stopPropagation(),focusElement(C)):focusElement(d)}return n.$$set=S=>{"containers"in S&&r(2,t=S.containers),"enabled"in S&&r(3,a=S.enabled),"options"in S&&r(4,s=S.options)},n.$$.update=()=>{n.$$.dirty&12&&(a&&t?c():g())},[_,b,t,a,s]}class FocusTrap extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$n,create_fragment$p,safe_not_equal,{containers:2,enabled:3,options:4})}}function create_fragment$o(n){let e;const r=n[4].default,t=create_slot(r,n,n[3],null);return{c(){t&&t.c()},m(a,s){t&&t.m(a,s),e=!0},p(a,[s]){t&&t.p&&(!e||s&8)&&update_slot_base(t,r,a,a[3],e?get_slot_changes(r,a[3],s,null):get_all_dirty_from_scope(a[3]),null)},i(a){e||(transition_in(t,a),e=!0)},o(a){transition_out(t,a),e=!1},d(a){t&&t.d(a)}}}var StackMessage;(function(n){n[n.Add=0]="Add",n[n.Remove=1]="Remove"})(StackMessage||(StackMessage={}));const STACK_CONTEXT_NAME="headlessui-stack-context";function instance$m(n,e,r){let t,{$$slots:a={},$$scope:s}=e,{onUpdate:u}=e,{element:d}=e;function c(...m){u==null||u(...m),g==null||g(...m)}let g=getContext(STACK_CONTEXT_NAME);return setContext(STACK_CONTEXT_NAME,c),onDestroy(()=>{t&&t()}),n.$$set=m=>{"onUpdate"in m&&r(0,u=m.onUpdate),"element"in m&&r(1,d=m.element),"$$scope"in m&&r(3,s=m.$$scope)},n.$$.update=()=>{n.$$.dirty&6&&r(2,t=(()=>{if(t&&t(),!d)return null;let m=d;return c(StackMessage.Add,m),()=>c(StackMessage.Remove,m)})())},[u,d,t,s,a]}class StackContextProvider extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$m,create_fragment$o,safe_not_equal,{onUpdate:0,element:1})}}const get_default_slot_changes$4=n=>({describedby:n&1}),get_default_slot_context$4=n=>({describedby:n[0].descriptionIds});function create_fragment$n(n){let e;const r=n[6].default,t=create_slot(r,n,n[5],get_default_slot_context$4);return{c(){t&&t.c()},m(a,s){t&&t.m(a,s),e=!0},p(a,[s]){t&&t.p&&(!e||s&33)&&update_slot_base(t,r,a,a[5],e?get_slot_changes(r,a[5],s,get_default_slot_changes$4):get_all_dirty_from_scope(a[5]),get_default_slot_context$4)},i(a){e||(transition_in(t,a),e=!0)},o(a){transition_out(t,a),e=!1},d(a){t&&t.d(a)}}}const DESCRIPTION_CONTEXT_NAME="headlessui-description-context";function useDescriptionContext(){return getContext(DESCRIPTION_CONTEXT_NAME)}function instance$l(n,e,r){const t=["name","slotProps"];let a=compute_rest_props(e,t),s,{$$slots:u={},$$scope:d}=e,{name:c}=e,{slotProps:g={}}=e,m=[],_=writable({name:c,slotProps:g,props:a,register:b});component_subscribe(n,_,S=>r(0,s=S)),setContext(DESCRIPTION_CONTEXT_NAME,_);function b(S){return r(4,m=[...m,S]),()=>{r(4,m=m.filter(C=>C!==S))}}return n.$$set=S=>{e=assign$3(assign$3({},e),exclude_internal_props(S)),r(8,a=compute_rest_props(e,t)),"name"in S&&r(2,c=S.name),"slotProps"in S&&r(3,g=S.slotProps),"$$scope"in S&&r(5,d=S.$$scope)},n.$$.update=()=>{_.set({name:c,slotProps:g,props:a,register:b,descriptionIds:m.length>0?m.join(" "):void 0})},[s,_,c,g,m,d,u]}class DescriptionProvider extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$l,create_fragment$n,safe_not_equal,{name:2,slotProps:3})}}function create_fragment$m(n){let e;const r=n[2].default,t=create_slot(r,n,n[1],null);return{c(){t&&t.c()},m(a,s){t&&t.m(a,s),e=!0},p(a,[s]){t&&t.p&&(!e||s&2)&&update_slot_base(t,r,a,a[1],e?get_slot_changes(r,a[1],s,null):get_all_dirty_from_scope(a[1]),null)},i(a){e||(transition_in(t,a),e=!0)},o(a){transition_out(t,a),e=!1},d(a){t&&t.d(a)}}}const FORCE_PORTAL_ROOT_CONTEXT_NAME="headlessui-force-portal-root-context";function usePortalRoot(){return getContext(FORCE_PORTAL_ROOT_CONTEXT_NAME)}function instance$k(n,e,r){let{$$slots:t={},$$scope:a}=e,{force:s}=e;return setContext(FORCE_PORTAL_ROOT_CONTEXT_NAME,writable(s)),n.$$set=u=>{"force"in u&&r(0,s=u.force),"$$scope"in u&&r(1,a=u.$$scope)},[s,a,t]}class ForcePortalRootContext extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$k,create_fragment$m,safe_not_equal,{force:0})}}function create_fragment$l(n){let e;const r=n[2].default,t=create_slot(r,n,n[1],null);return{c(){t&&t.c()},m(a,s){t&&t.m(a,s),e=!0},p(a,[s]){t&&t.p&&(!e||s&2)&&update_slot_base(t,r,a,a[1],e?get_slot_changes(r,a[1],s,null):get_all_dirty_from_scope(a[1]),null)},i(a){e||(transition_in(t,a),e=!0)},o(a){transition_out(t,a),e=!1},d(a){t&&t.d(a)}}}const PORTAL_GROUP_CONTEXT_NAME="headlessui-portal-group-context";function usePortalGroupContext(){return getContext(PORTAL_GROUP_CONTEXT_NAME)}function instance$j(n,e,r){let{$$slots:t={},$$scope:a}=e,{target:s}=e,u=writable(s);return setContext(PORTAL_GROUP_CONTEXT_NAME,u),n.$$set=d=>{"target"in d&&r(0,s=d.target),"$$scope"in d&&r(1,a=d.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&u.set(s)},[s,a,t]}class PortalGroup extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$j,create_fragment$l,safe_not_equal,{target:0})}}function portal(n,e){return e&&e.append(n),{update(r){e=r,r.append(n)},destroy(){var r;e!=null&&e.contains(n)&&e.removeChild(n),e&&e.childNodes.length<=0&&((r=e.parentElement)==null||r.removeChild(e))}}}function create_fragment$k(n){let e,r,t,a,s;const u=n[6].default,d=create_slot(u,n,n[5],null);return{c(){e=element("div"),d&&d.c()},m(c,g){insert(c,e,g),d&&d.m(e,null),t=!0,a||(s=action_destroyer(r=portal.call(null,e,n[0])),a=!0)},p(c,[g]){d&&d.p&&(!t||g&32)&&update_slot_base(d,u,c,c[5],t?get_slot_changes(u,c[5],g,null):get_all_dirty_from_scope(c[5]),null),r&&is_function(r.update)&&g&1&&r.update.call(null,c[0])},i(c){t||(transition_in(d,c),t=!0)},o(c){transition_out(d,c),t=!1},d(c){c&&detach(e),d&&d.d(c),a=!1,s()}}}function instance$i(n,e,r){let t,a,s,{$$slots:u={},$$scope:d}=e,c=usePortalRoot();component_subscribe(n,c,m=>r(4,s=m));let g=usePortalGroupContext();return component_subscribe(n,g,m=>r(3,a=m)),n.$$set=m=>{"$$scope"in m&&r(5,d=m.$$scope)},n.$$.update=()=>{n.$$.dirty&24&&r(0,t=(()=>{if(!(c&&s)&&g!==void 0&&a!==null)return a;if(typeof window>"u")return null;let m=document.getElementById("headlessui-portal-root");if(m)return m;let _=document.createElement("div");return _.setAttribute("id","headlessui-portal-root"),tick().then(()=>{_!==document.body.lastChild&&document.body.appendChild(_)}),document.body.appendChild(_)})())},[t,c,g,a,s,d,u]}class Portal extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$i,create_fragment$k,safe_not_equal,{})}}const MODIFIER_DIVIDER="!",modifierRegex=new RegExp(`^[^${MODIFIER_DIVIDER}]+(?:${MODIFIER_DIVIDER}(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$`);function forwardEventsBuilder(n,e=[]){let r,t=[];n.$on=(s,u)=>{let d=s,c=()=>{};for(let g of e){if(typeof g=="string"&&g===d){const m=n.$$.callbacks[d]||(n.$$.callbacks[d]=[]);return m.push(u),()=>{const _=m.indexOf(u);_!==-1&&m.splice(_,1)}}if(typeof g=="object"&&g.name===d){let m=u;u=(..._)=>{typeof g=="object"&&g.shouldExclude()||m(..._)}}}return r?c=r(d,u):t.push([d,u]),()=>{c()}};function a(s){bubble(n,s)}return s=>{const u=[],d={};r=(c,g)=>{let m=c,_=g,b=!1;if(m.match(modifierRegex)){const w=m.split(MODIFIER_DIVIDER);m=w[0];const k=Object.fromEntries(w.slice(1).map($=>[$,!0]));k.passive&&(b=b||{},b.passive=!0),k.nonpassive&&(b=b||{},b.passive=!1),k.capture&&(b=b||{},b.capture=!0),k.once&&(b=b||{},b.once=!0),k.preventDefault&&(_=prevent_default(_)),k.stopPropagation&&(_=stop_propagation(_))}const C=listen(s,m,_,b),R=()=>{C();const w=u.indexOf(R);w>-1&&u.splice(w,1)};return u.push(R),m in d||(d[m]=listen(s,m,a)),R};for(let c=0;c<t.length;c++)r(t[c][0],t[c][1]);return{destroy:()=>{for(let c=0;c<u.length;c++)u[c]();for(let c of Object.entries(d))c[1]()}}}}const components=["a","address","article","aside","b","bdi","bdo","blockquote","button","cite","code","data","datalist","dd","dl","dt","div","em","footer","form","h1","h2","h3","h4","h5","h6","header","i","input","label","li","main","nav","ol","p","section","span","strong","ul"];function isValidElement(n){return!(typeof n=="string"&&!components.includes(n))}function useActions(n,e){let r=[];if(e)for(let t=0;t<e.length;t++){const a=e[t],s=Array.isArray(a)?a[0]:a;Array.isArray(a)&&a.length>1?r.push(s(n,a[1])):r.push(s(n))}return{update(t){if((t&&t.length||0)!=r.length)throw new Error("You must not change the length of an actions array.");if(t)for(let a=0;a<t.length;a++){const s=r[a];if(s&&s.update){const u=t[a];Array.isArray(u)&&u.length>1?s.update(u[1]):s.update()}}},destroy(){for(let t=0;t<r.length;t++){const a=r[t];a&&a.destroy&&a.destroy()}}}}var Features;(function(n){n[n.None=0]="None",n[n.RenderStrategy=1]="RenderStrategy",n[n.Static=2]="Static"})(Features||(Features={}));function create_if_block$5(n){let e,r,t,a;const s=[create_if_block_1$3,create_if_block_2$2,create_if_block_3$2,create_if_block_4,create_if_block_5,create_if_block_6,create_if_block_7,create_if_block_8,create_if_block_9,create_if_block_10,create_if_block_11,create_if_block_12,create_if_block_13,create_if_block_14,create_if_block_15,create_if_block_16,create_if_block_17,create_if_block_18,create_if_block_19,create_if_block_20,create_if_block_21,create_if_block_22,create_if_block_23,create_if_block_24,create_if_block_25,create_if_block_26,create_if_block_27,create_if_block_28,create_if_block_29,create_if_block_30,create_if_block_31,create_if_block_32,create_if_block_33,create_if_block_34,create_if_block_35,create_if_block_36,create_if_block_37,create_if_block_38,create_if_block_39,create_else_block$1],u=[];function d(c,g){return c[1]==="a"?0:c[1]==="address"?1:c[1]==="article"?2:c[1]==="aside"?3:c[1]==="b"?4:c[1]==="bdi"?5:c[1]==="bdo"?6:c[1]==="blockquote"?7:c[1]==="button"?8:c[1]==="cite"?9:c[1]==="code"?10:c[1]==="data"?11:c[1]==="datalist"?12:c[1]==="dd"?13:c[1]==="dl"?14:c[1]==="dt"?15:c[1]==="div"?16:c[1]==="em"?17:c[1]==="footer"?18:c[1]==="form"?19:c[1]==="h1"?20:c[1]==="h2"?21:c[1]==="h3"?22:c[1]==="h4"?23:c[1]==="h5"?24:c[1]==="h6"?25:c[1]==="header"?26:c[1]==="i"?27:c[1]==="input"?28:c[1]==="label"?29:c[1]==="li"?30:c[1]==="main"?31:c[1]==="nav"?32:c[1]==="ol"?33:c[1]==="p"?34:c[1]==="section"?35:c[1]==="span"?36:c[1]==="strong"?37:c[1]==="ul"?38:39}return e=d(n),r=u[e]=s[e](n),{c(){r.c(),t=empty()},m(c,g){u[e].m(c,g),insert(c,t,g),a=!0},p(c,g){let m=e;e=d(c),e===m?u[e].p(c,g):(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros(),r=u[e],r?r.p(c,g):(r=u[e]=s[e](c),r.c()),transition_in(r,1),r.m(t.parentNode,t))},i(c){a||(transition_in(r),a=!0)},o(c){transition_out(r),a=!1},d(c){u[e].d(c),c&&detach(t)}}}function create_else_block$1(n){let e,r,t,a;const s=[{use:[...n[2],n[6]]},n[7],n[3],{hidden:n[4]||void 0}];function u(g){n[58](g)}var d=n[1];function c(g){let m={$$slots:{default:[create_default_slot$8]},$$scope:{ctx:g}};for(let _=0;_<s.length;_+=1)m=assign$3(m,s[_]);return g[0]!==void 0&&(m.el=g[0]),{props:m}}return d&&(e=construct_svelte_component(d,c(n)),binding_callbacks.push(()=>bind(e,"el",u,n[0]))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(g,m){e&&mount_component(e,g,m),insert(g,t,m),a=!0},p(g,m){const _=m[0]&220?get_spread_update(s,[m[0]&68&&{use:[...g[2],g[6]]},m[0]&128&&get_spread_object(g[7]),m[0]&8&&get_spread_object(g[3]),m[0]&16&&{hidden:g[4]||void 0}]):{};if(m[1]&268435456&&(_.$$scope={dirty:m,ctx:g}),!r&&m[0]&1&&(r=!0,_.el=g[0],add_flush_callback(()=>r=!1)),d!==(d=g[1])){if(e){group_outros();const b=e;transition_out(b.$$.fragment,1,0,()=>{destroy_component(b,1)}),check_outros()}d?(e=construct_svelte_component(d,c(g)),binding_callbacks.push(()=>bind(e,"el",u,g[0])),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else d&&e.$set(_)},i(g){a||(e&&transition_in(e.$$.fragment,g),a=!0)},o(g){e&&transition_out(e.$$.fragment,g),a=!1},d(g){g&&detach(t),e&&destroy_component(e,g)}}}function create_if_block_39(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("ul"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[57](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[57](null),s=!1,run_all(u)}}}function create_if_block_38(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("strong"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[56](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[56](null),s=!1,run_all(u)}}}function create_if_block_37(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("span"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[55](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[55](null),s=!1,run_all(u)}}}function create_if_block_36(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("section"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[54](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[54](null),s=!1,run_all(u)}}}function create_if_block_35(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("p"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[53](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[53](null),s=!1,run_all(u)}}}function create_if_block_34(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("ol"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[52](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[52](null),s=!1,run_all(u)}}}function create_if_block_33(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("nav"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[51](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[51](null),s=!1,run_all(u)}}}function create_if_block_32(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("main"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[50](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[50](null),s=!1,run_all(u)}}}function create_if_block_31(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("li"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[49](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[49](null),s=!1,run_all(u)}}}function create_if_block_30(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("label"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[48](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[48](null),s=!1,run_all(u)}}}function create_if_block_29(n){let e,r,t,a,s,u=[n[7],n[3],{hidden:r=n[4]||void 0}],d={};for(let c=0;c<u.length;c+=1)d=assign$3(d,u[c]);return{c(){e=element("input"),set_attributes(e,d)},m(c,g){insert(c,e,g),e.autofocus&&e.focus(),n[47](e),a||(s=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],a=!0)},p(c,g){set_attributes(e,d=get_spread_update(u,[g[0]&128&&c[7],g[0]&8&&c[3],g[0]&16&&r!==(r=c[4]||void 0)&&{hidden:r}])),t&&is_function(t.update)&&g[0]&4&&t.update.call(null,c[2])},i:noop$1,o:noop$1,d(c){c&&detach(e),n[47](null),a=!1,run_all(s)}}}function create_if_block_28(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("i"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[46](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[46](null),s=!1,run_all(u)}}}function create_if_block_27(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("header"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[45](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[45](null),s=!1,run_all(u)}}}function create_if_block_26(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("h6"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[44](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[44](null),s=!1,run_all(u)}}}function create_if_block_25(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("h5"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[43](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[43](null),s=!1,run_all(u)}}}function create_if_block_24(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("h4"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[42](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[42](null),s=!1,run_all(u)}}}function create_if_block_23(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("h3"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[41](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[41](null),s=!1,run_all(u)}}}function create_if_block_22(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("h2"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[40](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[40](null),s=!1,run_all(u)}}}function create_if_block_21(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("h1"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[39](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[39](null),s=!1,run_all(u)}}}function create_if_block_20(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("form"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[38](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[38](null),s=!1,run_all(u)}}}function create_if_block_19(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("footer"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[37](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[37](null),s=!1,run_all(u)}}}function create_if_block_18(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("em"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[36](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[36](null),s=!1,run_all(u)}}}function create_if_block_17(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("div"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[35](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[35](null),s=!1,run_all(u)}}}function create_if_block_16(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("dt"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[34](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[34](null),s=!1,run_all(u)}}}function create_if_block_15(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("dl"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[33](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[33](null),s=!1,run_all(u)}}}function create_if_block_14(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("dd"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[32](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[32](null),s=!1,run_all(u)}}}function create_if_block_13(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("datalist"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[31](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[31](null),s=!1,run_all(u)}}}function create_if_block_12(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("data"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[30](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[30](null),s=!1,run_all(u)}}}function create_if_block_11(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("code"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[29](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[29](null),s=!1,run_all(u)}}}function create_if_block_10(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("cite"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[28](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[28](null),s=!1,run_all(u)}}}function create_if_block_9(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("button"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),e.autofocus&&e.focus(),n[27](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[27](null),s=!1,run_all(u)}}}function create_if_block_8(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("blockquote"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[26](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[26](null),s=!1,run_all(u)}}}function create_if_block_7(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("bdo"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[25](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[25](null),s=!1,run_all(u)}}}function create_if_block_6(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("bdi"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[24](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[24](null),s=!1,run_all(u)}}}function create_if_block_5(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("b"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[23](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[23](null),s=!1,run_all(u)}}}function create_if_block_4(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("aside"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[22](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[22](null),s=!1,run_all(u)}}}function create_if_block_3$2(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("article"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[21](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[21](null),s=!1,run_all(u)}}}function create_if_block_2$2(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("address"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[20](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[20](null),s=!1,run_all(u)}}}function create_if_block_1$3(n){let e,r,t,a,s,u;const d=n[18].default,c=create_slot(d,n,n[59],null);let g=[n[7],n[3],{hidden:r=n[4]||void 0}],m={};for(let _=0;_<g.length;_+=1)m=assign$3(m,g[_]);return{c(){e=element("a"),c&&c.c(),set_attributes(e,m)},m(_,b){insert(_,e,b),c&&c.m(e,null),n[19](e),a=!0,s||(u=[action_destroyer(t=useActions.call(null,e,n[2])),action_destroyer(n[6].call(null,e))],s=!0)},p(_,b){c&&c.p&&(!a||b[1]&268435456)&&update_slot_base(c,d,_,_[59],a?get_slot_changes(d,_[59],b,null):get_all_dirty_from_scope(_[59]),null),set_attributes(e,m=get_spread_update(g,[b[0]&128&&_[7],b[0]&8&&_[3],(!a||b[0]&16&&r!==(r=_[4]||void 0))&&{hidden:r}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,_[2])},i(_){a||(transition_in(c,_),a=!0)},o(_){transition_out(c,_),a=!1},d(_){_&&detach(e),c&&c.d(_),n[19](null),s=!1,run_all(u)}}}function create_default_slot$8(n){let e;const r=n[18].default,t=create_slot(r,n,n[59],null);return{c(){t&&t.c()},m(a,s){t&&t.m(a,s),e=!0},p(a,s){t&&t.p&&(!e||s[1]&268435456)&&update_slot_base(t,r,a,a[59],e?get_slot_changes(r,a[59],s,null):get_all_dirty_from_scope(a[59]),null)},i(a){e||(transition_in(t,a),e=!0)},o(a){transition_out(t,a),e=!1},d(a){t&&t.d(a)}}}function create_fragment$j(n){let e,r,t=n[5]&&create_if_block$5(n);return{c(){t&&t.c(),e=empty()},m(a,s){t&&t.m(a,s),insert(a,e,s),r=!0},p(a,s){a[5]?t?(t.p(a,s),s[0]&32&&transition_in(t,1)):(t=create_if_block$5(a),t.c(),transition_in(t,1),t.m(e.parentNode,e)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(a){r||(transition_in(t),r=!0)},o(a){transition_out(t),r=!1},d(a){t&&t.d(a),a&&detach(e)}}}var RenderStrategy;(function(n){n[n.Unmount=0]="Unmount",n[n.Hidden=1]="Hidden"})(RenderStrategy||(RenderStrategy={}));function instance$h(n,e,r){let t,a,s,u,d;const c=["name","as","slotProps","el","use","visible","features","unmount","static","class","style"];let g=compute_rest_props(e,c),{$$slots:m={},$$scope:_}=e;const b=forwardEventsBuilder(get_current_component());let{name:S}=e,{as:C}=e,{slotProps:R}=e,{el:w=null}=e,{use:k=[]}=e,{visible:$=!0}=e,{features:O=Features.None}=e,{unmount:I=!0}=e,{static:x=!1}=e,{class:P=void 0}=e,{style:B=void 0}=e;if(!C)throw new Error(`<${S}> did not provide an \`as\` value to <Render>`);if(!isValidElement(C))throw new Error(`<${S}> has an invalid or unsupported \`as\` prop: ${C}`);function j(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function W(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function U(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function z(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function F(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function Y(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function X(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function K(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function te(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function Z(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function H(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function Q(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function ne(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function V(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function J(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function ce(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function ee(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function ie(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function se(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function de(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function le(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function oe(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function pe(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function fe(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function Ce(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function ge(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function Re(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function Ee(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function me(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function ve(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function we(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function ke(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function ue(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function he(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function ye(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function be(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function _e(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function Se(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function Ae(N){binding_callbacks[N?"unshift":"push"](()=>{w=N,r(0,w)})}function Te(N){w=N,r(0,w)}return n.$$set=N=>{e=assign$3(assign$3({},e),exclude_internal_props(N)),r(7,g=compute_rest_props(e,c)),"name"in N&&r(8,S=N.name),"as"in N&&r(1,C=N.as),"slotProps"in N&&r(9,R=N.slotProps),"el"in N&&r(0,w=N.el),"use"in N&&r(2,k=N.use),"visible"in N&&r(10,$=N.visible),"features"in N&&r(11,O=N.features),"unmount"in N&&r(12,I=N.unmount),"static"in N&&r(13,x=N.static),"class"in N&&r(14,P=N.class),"style"in N&&r(15,B=N.style),"$$scope"in N&&r(59,_=N.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16896&&r(17,t=typeof P=="function"?P(R):P),n.$$.dirty[0]&33280&&r(16,a=typeof B=="function"?B(R):B),n.$$.dirty[0]&15360&&r(5,s=$||O&Features.Static&&x||!(O&Features.RenderStrategy&&I)),n.$$.dirty[0]&15360&&r(4,u=!$&&!(O&Features.Static&&x)&&O&Features.RenderStrategy&&!I),n.$$.dirty[0]&196624&&r(3,d={class:t,style:`${a??""}${u?" display: none":""}`||void 0}),n.$$.dirty[0]&8&&d.style===void 0&&delete d.style},[w,C,k,d,u,s,b,g,S,R,$,O,I,x,P,B,a,t,m,j,W,U,z,F,Y,X,K,te,Z,H,Q,ne,V,J,ce,ee,ie,se,de,le,oe,pe,fe,Ce,ge,Re,Ee,me,ve,we,ke,ue,he,ye,be,_e,Se,Ae,Te,_]}class Render extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$h,create_fragment$j,safe_not_equal,{name:8,as:1,slotProps:9,el:0,use:2,visible:10,features:11,unmount:12,static:13,class:14,style:15},null,[-1,-1])}}const{window:window_1}=globals,get_default_slot_spread_changes$3=n=>n&64,get_default_slot_changes$3=n=>({}),get_default_slot_context$3=n=>({...n[6]});function create_default_slot_6(n){let e;const r=n[24].default,t=create_slot(r,n,n[27],get_default_slot_context$3);return{c(){t&&t.c()},m(a,s){t&&t.m(a,s),e=!0},p(a,s){t&&t.p&&(!e||s&134217792)&&update_slot_base(t,r,a,a[27],get_default_slot_spread_changes$3(s)||!e?get_all_dirty_from_scope(a[27]):get_slot_changes(r,a[27],s,get_default_slot_changes$3),get_default_slot_context$3)},i(a){e||(transition_in(t,a),e=!0)},o(a){transition_out(t,a),e=!1},d(a){t&&t.d(a)}}}function create_default_slot_5(n){let e,r,t;const a=[{...n[14],...n[7]},{as:n[0]},{slotProps:n[6]},{use:[...n[1],n[9]]},{name:"Dialog"},{"aria-describedby":n[30]},{visible:n[8]},{features:Features.RenderStrategy|Features.Static}];function s(d){n[25](d)}let u={$$slots:{default:[create_default_slot_6]},$$scope:{ctx:n}};for(let d=0;d<a.length;d+=1)u=assign$3(u,a[d]);return n[3]!==void 0&&(u.el=n[3]),e=new Render({props:u}),binding_callbacks.push(()=>bind(e,"el",s,n[3])),e.$on("click",handleClick),{c(){create_component(e.$$.fragment)},m(d,c){mount_component(e,d,c),t=!0},p(d,c){const g=c&1073759171?get_spread_update(a,[c&16512&&{...d[14],...d[7]},c&1&&{as:d[0]},c&64&&{slotProps:d[6]},c&514&&{use:[...d[1],d[9]]},a[4],c&1073741824&&{"aria-describedby":d[30]},c&256&&{visible:d[8]},c&0&&{features:Features.RenderStrategy|Features.Static}]):{};c&134217792&&(g.$$scope={dirty:c,ctx:d}),!r&&c&8&&(r=!0,g.el=d[3],add_flush_callback(()=>r=!1)),e.$set(g)},i(d){t||(transition_in(e.$$.fragment,d),t=!0)},o(d){transition_out(e.$$.fragment,d),t=!1},d(d){destroy_component(e,d)}}}function create_default_slot_4(n){let e,r;return e=new DescriptionProvider({props:{name:"DialogDescription",slotProps:n[6],$$slots:{default:[create_default_slot_5,({describedby:t})=>({30:t}),({describedby:t})=>t?1073741824:0]},$$scope:{ctx:n}}}),{c(){create_component(e.$$.fragment)},m(t,a){mount_component(e,t,a),r=!0},p(t,a){const s={};a&64&&(s.slotProps=t[6]),a&1207976395&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){r||(transition_in(e.$$.fragment,t),r=!0)},o(t){transition_out(e.$$.fragment,t),r=!1},d(t){destroy_component(e,t)}}}function create_default_slot_3(n){let e,r;return e=new ForcePortalRootContext({props:{force:!1,$$slots:{default:[create_default_slot_4]},$$scope:{ctx:n}}}),{c(){create_component(e.$$.fragment)},m(t,a){mount_component(e,t,a),r=!0},p(t,a){const s={};a&134234571&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){r||(transition_in(e.$$.fragment,t),r=!0)},o(t){transition_out(e.$$.fragment,t),r=!1},d(t){destroy_component(e,t)}}}function create_default_slot_2$1(n){let e,r;return e=new PortalGroup({props:{target:n[3],$$slots:{default:[create_default_slot_3]},$$scope:{ctx:n}}}),{c(){create_component(e.$$.fragment)},m(t,a){mount_component(e,t,a),r=!0},p(t,a){const s={};a&8&&(s.target=t[3]),a&134234571&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){r||(transition_in(e.$$.fragment,t),r=!0)},o(t){transition_out(e.$$.fragment,t),r=!1},d(t){destroy_component(e,t)}}}function create_default_slot_1$4(n){let e,r;return e=new Portal({props:{$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:n}}}),{c(){create_component(e.$$.fragment)},m(t,a){mount_component(e,t,a),r=!0},p(t,a){const s={};a&134234571&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){r||(transition_in(e.$$.fragment,t),r=!0)},o(t){transition_out(e.$$.fragment,t),r=!1},d(t){destroy_component(e,t)}}}function create_default_slot$7(n){let e,r;return e=new ForcePortalRootContext({props:{force:!0,$$slots:{default:[create_default_slot_1$4]},$$scope:{ctx:n}}}),{c(){create_component(e.$$.fragment)},m(t,a){mount_component(e,t,a),r=!0},p(t,a){const s={};a&134234571&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){r||(transition_in(e.$$.fragment,t),r=!0)},o(t){transition_out(e.$$.fragment,t),r=!1},d(t){destroy_component(e,t)}}}function create_fragment$i(n){let e,r,t,a,s,u;return e=new FocusTrap({props:{containers:n[5],enabled:n[4],options:{initialFocus:n[2]}}}),t=new StackContextProvider({props:{element:n[3],onUpdate:n[26],$$slots:{default:[create_default_slot$7]},$$scope:{ctx:n}}}),{c(){create_component(e.$$.fragment),r=space(),create_component(t.$$.fragment)},m(d,c){mount_component(e,d,c),insert(d,r,c),mount_component(t,d,c),a=!0,s||(u=[listen(window_1,"mousedown",n[12]),listen(window_1,"keydown",n[13])],s=!0)},p(d,[c]){const g={};c&32&&(g.containers=d[5]),c&16&&(g.enabled=d[4]),c&4&&(g.options={initialFocus:d[2]}),e.$set(g);const m={};c&8&&(m.element=d[3]),c&32&&(m.onUpdate=d[26]),c&134234571&&(m.$$scope={dirty:c,ctx:d}),t.$set(m)},i(d){a||(transition_in(e.$$.fragment,d),transition_in(t.$$.fragment,d),a=!0)},o(d){transition_out(e.$$.fragment,d),transition_out(t.$$.fragment,d),a=!1},d(d){destroy_component(e,d),d&&detach(r),destroy_component(t,d),s=!1,run_all(u)}}}var DialogStates;(function(n){n[n.Open=0]="Open",n[n.Closed=1]="Closed"})(DialogStates||(DialogStates={}));const DIALOG_CONTEXT_NAME="headlessui-dialog-context";function useDialogContext(n){let e=getContext(DIALOG_CONTEXT_NAME);if(e===void 0)throw new Error(`<${n} /> is missing a parent <Dialog /> component.`);return e}function handleClick(n){n.stopPropagation()}function instance$g(n,e,r){let t,a,s,u,d,c,g,m;const _=["as","use","open","initialFocus"];let b=compute_rest_props(e,_),S,C,{$$slots:R={},$$scope:w}=e,{as:k="div"}=e,{use:$=[]}=e,{open:O=void 0}=e,{initialFocus:I=null}=e;const x=forwardEventsBuilder(get_current_component(),["close"]),P=createEventDispatcher();let B=new Set,j=useOpenClosed();component_subscribe(n,j,H=>r(23,C=H));let W=null;const U=`headlessui-dialog-${useId()}`;onDestroy(()=>{u&&u()});let z,F=writable({titleId:z,dialogState:t,setTitleId(H){z!==H&&r(16,z=H)},close(){P("close",!1)}});component_subscribe(n,F,H=>r(22,S=H)),setContext(DIALOG_CONTEXT_NAME,F);async function Y(H){let Q=H.target;t===DialogStates.Open&&B.size===1&&(contains$1(B,Q)||(S.close(),await tick(),Q==null||Q.focus()))}function X(H){H.key===Keys.Escape&&t===DialogStates.Open&&(B.size>1||(H.preventDefault(),H.stopPropagation(),S.close()))}let K=!1;onMount(()=>r(17,K=!0)),onDestroy(()=>{d&&d()}),onDestroy(()=>{c&&c()});function te(H){W=H,r(3,W)}const Z=(H,Q)=>match(H,{[StackMessage.Add](){r(5,B=new Set([...B,Q]))},[StackMessage.Remove](){B.delete(Q),r(5,B=new Set([...B]))}});return n.$$set=H=>{e=assign$3(assign$3({},e),exclude_internal_props(H)),r(14,b=compute_rest_props(e,_)),"as"in H&&r(0,k=H.as),"use"in H&&r(1,$=H.use),"open"in H&&r(15,O=H.open),"initialFocus"in H&&r(2,I=H.initialFocus),"$$scope"in H&&r(27,w=H.$$scope)},n.$$.update=()=>{if(n.$$.dirty&8421376){if(r(15,O=O===void 0&&j!==void 0?match(C,{[State$1.Open]:!0,[State$1.Closed]:!1}):O),!(O!==void 0||j!==void 0))throw new Error("You forgot to provide an `open` prop to the `Dialog` component.");if(typeof O!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${O}`)}n.$$.dirty&32768&&r(18,t=O?DialogStates.Open:DialogStates.Closed),n.$$.dirty&8650752&&r(8,a=j!==void 0?C===State$1.Open:t===DialogStates.Open),n.$$.dirty&262144&&r(4,s=t===DialogStates.Open),n.$$.dirty&2097176&&r(21,u=(()=>(u&&u(),useInertOthers(W,s)))()),n.$$.dirty&327680&&F.update(H=>({...H,titleId:z,dialogState:t})),n.$$.dirty&1441792&&r(20,d=(()=>{if(d&&d(),t!==DialogStates.Open||!K)return;let H=document.documentElement.style.overflow,Q=document.documentElement.style.paddingRight,ne=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${ne}px`,()=>{document.documentElement.style.overflow=H,document.documentElement.style.paddingRight=Q}})()),n.$$.dirty&4980744&&r(19,c=(()=>{if(c&&c(),t!==DialogStates.Open)return;let H=W;if(!H)return;let Q=new IntersectionObserver(ne=>{for(let V of ne)V.boundingClientRect.x===0&&V.boundingClientRect.y===0&&V.boundingClientRect.width===0&&V.boundingClientRect.height===0&&S.close()});return Q.observe(H),()=>Q.disconnect()})()),n.$$.dirty&327680&&r(7,g={id:U,role:"dialog","aria-modal":t===DialogStates.Open?!0:void 0,"aria-labelledby":z}),n.$$.dirty&32768&&r(6,m={open:O})},[k,$,I,W,s,B,m,g,a,x,j,F,Y,X,b,O,z,K,t,c,d,u,S,C,R,te,Z,w]}class Dialog extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$g,create_fragment$i,safe_not_equal,{as:0,use:1,open:15,initialFocus:2})}}const get_default_slot_spread_changes$2=n=>n&4,get_default_slot_changes$2=n=>({}),get_default_slot_context$2=n=>({...n[2]});function create_default_slot$6(n){let e;const r=n[8].default,t=create_slot(r,n,n[9],get_default_slot_context$2);return{c(){t&&t.c()},m(a,s){t&&t.m(a,s),e=!0},p(a,s){t&&t.p&&(!e||s&516)&&update_slot_base(t,r,a,a[9],get_default_slot_spread_changes$2(s)||!e?get_all_dirty_from_scope(a[9]):get_slot_changes(r,a[9],s,get_default_slot_changes$2),get_default_slot_context$2)},i(a){e||(transition_in(t,a),e=!0)},o(a){transition_out(t,a),e=!1},d(a){t&&t.d(a)}}}function create_fragment$h(n){let e,r;const t=[{...n[6],...n[3]},{as:n[0]},{slotProps:n[2]},{use:[...n[1],n[4]]},{name:"DialogTitle"}];let a={$$slots:{default:[create_default_slot$6]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)a=assign$3(a,t[s]);return e=new Render({props:a}),{c(){create_component(e.$$.fragment)},m(s,u){mount_component(e,s,u),r=!0},p(s,[u]){const d=u&95?get_spread_update(t,[u&72&&{...s[6],...s[3]},u&1&&{as:s[0]},u&4&&{slotProps:s[2]},u&18&&{use:[...s[1],s[4]]},t[4]]):{};u&516&&(d.$$scope={dirty:u,ctx:s}),e.$set(d)},i(s){r||(transition_in(e.$$.fragment,s),r=!0)},o(s){transition_out(e.$$.fragment,s),r=!1},d(s){destroy_component(e,s)}}}function instance$f(n,e,r){let t,a;const s=["as","use"];let u=compute_rest_props(e,s),d,{$$slots:c={},$$scope:g}=e,{as:m="h2"}=e,{use:_=[]}=e;const b=forwardEventsBuilder(get_current_component());let S=useDialogContext("DialogTitle");component_subscribe(n,S,R=>r(7,d=R));let C=`headlessui-dialog-title-${useId()}`;return onMount(()=>(d.setTitleId(C),()=>d.setTitleId(void 0))),n.$$set=R=>{e=assign$3(assign$3({},e),exclude_internal_props(R)),r(6,u=compute_rest_props(e,s)),"as"in R&&r(0,m=R.as),"use"in R&&r(1,_=R.use),"$$scope"in R&&r(9,g=R.$$scope)},n.$$.update=()=>{n.$$.dirty&128&&r(2,a={open:d.dialogState===DialogStates.Open})},r(3,t={id:C}),[m,_,a,t,b,S,u,d,c,g]}class DialogTitle extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$f,create_fragment$h,safe_not_equal,{as:0,use:1})}}const get_default_slot_spread_changes$1=n=>n&4,get_default_slot_changes$1=n=>({}),get_default_slot_context$1=n=>({...n[2]});function create_default_slot$5(n){let e;const r=n[9].default,t=create_slot(r,n,n[10],get_default_slot_context$1);return{c(){t&&t.c()},m(a,s){t&&t.m(a,s),e=!0},p(a,s){t&&t.p&&(!e||s&1028)&&update_slot_base(t,r,a,a[10],get_default_slot_spread_changes$1(s)||!e?get_all_dirty_from_scope(a[10]):get_slot_changes(r,a[10],s,get_default_slot_changes$1),get_default_slot_context$1)},i(a){e||(transition_in(t,a),e=!0)},o(a){transition_out(t,a),e=!1},d(a){t&&t.d(a)}}}function create_fragment$g(n){let e,r;const t=[{...n[7],...n[3]},{as:n[0]},{slotProps:n[2]},{use:[...n[1],n[4]]},{name:"DialogOverlay"}];let a={$$slots:{default:[create_default_slot$5]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)a=assign$3(a,t[s]);return e=new Render({props:a}),e.$on("click",n[6]),{c(){create_component(e.$$.fragment)},m(s,u){mount_component(e,s,u),r=!0},p(s,[u]){const d=u&159?get_spread_update(t,[u&136&&{...s[7],...s[3]},u&1&&{as:s[0]},u&4&&{slotProps:s[2]},u&18&&{use:[...s[1],s[4]]},t[4]]):{};u&1028&&(d.$$scope={dirty:u,ctx:s}),e.$set(d)},i(s){r||(transition_in(e.$$.fragment,s),r=!0)},o(s){transition_out(e.$$.fragment,s),r=!1},d(s){destroy_component(e,s)}}}function instance$e(n,e,r){let t,a;const s=["as","use"];let u=compute_rest_props(e,s),d,{$$slots:c={},$$scope:g}=e,{as:m="div"}=e,{use:_=[]}=e;const b=forwardEventsBuilder(get_current_component());let S=useDialogContext("DialogOverlay");component_subscribe(n,S,w=>r(8,d=w));let C=`headlessui-dialog-overlay-${useId()}`;function R(w){let k=w;k.target===k.currentTarget&&(k.preventDefault(),k.stopPropagation(),d.close())}return n.$$set=w=>{e=assign$3(assign$3({},e),exclude_internal_props(w)),r(7,u=compute_rest_props(e,s)),"as"in w&&r(0,m=w.as),"use"in w&&r(1,_=w.use),"$$scope"in w&&r(10,g=w.$$scope)},n.$$.update=()=>{n.$$.dirty&256&&r(2,a={open:d.dialogState===DialogStates.Open})},r(3,t={id:C,"aria-hidden":!0}),[m,_,a,t,b,S,R,u,d,c,g]}class DialogOverlay extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$e,create_fragment$g,safe_not_equal,{as:0,use:1})}}const get_default_slot_spread_changes=n=>n&8,get_default_slot_changes=n=>({}),get_default_slot_context=n=>({...n[3]});function create_default_slot$4(n){let e;const r=n[8].default,t=create_slot(r,n,n[9],get_default_slot_context);return{c(){t&&t.c()},m(a,s){t&&t.m(a,s),e=!0},p(a,s){t&&t.p&&(!e||s&520)&&update_slot_base(t,r,a,a[9],get_default_slot_spread_changes(s)||!e?get_all_dirty_from_scope(a[9]):get_slot_changes(r,a[9],s,get_default_slot_changes),get_default_slot_context)},i(a){e||(transition_in(t,a),e=!0)},o(a){transition_out(t,a),e=!1},d(a){t&&t.d(a)}}}function create_fragment$f(n){var s;let e,r;const t=[{name:"Description"},n[7],{as:n[0]},{slotProps:n[3]},(s=n[2])==null?void 0:s.props,{id:n[5]},{use:[...n[1],n[4]]}];let a={$$slots:{default:[create_default_slot$4]},$$scope:{ctx:n}};for(let u=0;u<t.length;u+=1)a=assign$3(a,t[u]);return e=new Render({props:a}),{c(){create_component(e.$$.fragment)},m(u,d){mount_component(e,u,d),r=!0},p(u,[d]){var g;const c=d&191?get_spread_update(t,[t[0],d&128&&get_spread_object(u[7]),d&1&&{as:u[0]},d&8&&{slotProps:u[3]},d&4&&get_spread_object((g=u[2])==null?void 0:g.props),d&32&&{id:u[5]},d&18&&{use:[...u[1],u[4]]}]):{};d&520&&(c.$$scope={dirty:d,ctx:u}),e.$set(c)},i(u){r||(transition_in(e.$$.fragment,u),r=!0)},o(u){transition_out(e.$$.fragment,u),r=!1},d(u){destroy_component(e,u)}}}function instance$d(n,e,r){let t;const a=["as","use"];let s=compute_rest_props(e,a),u,{$$slots:d={},$$scope:c}=e;const g=forwardEventsBuilder(get_current_component());let{as:m="p"}=e,{use:_=[]}=e;const b=`headlessui-description-${useId()}`;let S=useDescriptionContext();if(component_subscribe(n,S,C=>r(2,u=C)),!S)throw new Error("You used a <Description /> component, but it is not inside a relevant parent.");return onMount(()=>u==null?void 0:u.register(b)),n.$$set=C=>{e=assign$3(assign$3({},e),exclude_internal_props(C)),r(7,s=compute_rest_props(e,a)),"as"in C&&r(0,m=C.as),"use"in C&&r(1,_=C.use),"$$scope"in C&&r(9,c=C.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&r(3,t=u.slotProps||{})},[m,_,u,t,g,b,S,s,d,c]}class Description extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$d,create_fragment$f,safe_not_equal,{as:0,use:1})}}var DisclosureStates;(function(n){n[n.Open=0]="Open",n[n.Closed=1]="Closed"})(DisclosureStates||(DisclosureStates={}));var Focus;(function(n){n[n.First=0]="First",n[n.Previous=1]="Previous",n[n.Next=2]="Next",n[n.Last=3]="Last",n[n.Specific=4]="Specific",n[n.Nothing=5]="Nothing"})(Focus||(Focus={}));var ListboxStates;(function(n){n[n.Open=0]="Open",n[n.Closed=1]="Closed"})(ListboxStates||(ListboxStates={}));var MenuStates;(function(n){n[n.Open=0]="Open",n[n.Closed=1]="Closed"})(MenuStates||(MenuStates={}));var PopoverStates;(function(n){n[n.Open=0]="Open",n[n.Closed=1]="Closed"})(PopoverStates||(PopoverStates={}));var Reason;(function(n){n.Finished="finished",n.Cancelled="cancelled"})(Reason||(Reason={}));var TreeStates;(function(n){n.Visible="visible",n.Hidden="hidden"})(TreeStates||(TreeStates={}));function create_default_slot_2(n){let e;return{c(){e=text("Dialog w/o content")},m(r,t){insert(r,e,t)},d(r){r&&detach(e)}}}function create_default_slot_1$3(n){let e;return{c(){e=text("Please add some content")},m(r,t){insert(r,e,t)},d(r){r&&detach(e)}}}function fallback_block(n){let e,r,t,a,s,u,d,c,g,m,_;return e=new DialogTitle({props:{as:"h3",class:"font-bold text-lg",$$slots:{default:[create_default_slot_2]},$$scope:{ctx:n}}}),t=new Description({props:{class:"py-",$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:n}}}),{c(){create_component(e.$$.fragment),r=space(),create_component(t.$$.fragment),a=space(),s=element("button"),s.textContent="✕",u=space(),d=element("div"),c=element("button"),c.textContent="Got it, thanks!",attr(s,"for",""),attr(s,"class","btn btn-sm btn-circle absolute right-2 top-2"),attr(c,"type","button"),attr(c,"class","btn"),attr(d,"class","modal-action")},m(b,S){mount_component(e,b,S),insert(b,r,S),mount_component(t,b,S),insert(b,a,S),insert(b,s,S),insert(b,u,S),insert(b,d,S),append(d,c),g=!0,m||(_=[listen(s,"click",n[3]),listen(c,"click",n[3])],m=!0)},p(b,S){const C={};S&256&&(C.$$scope={dirty:S,ctx:b}),e.$set(C);const R={};S&256&&(R.$$scope={dirty:S,ctx:b}),t.$set(R)},i(b){g||(transition_in(e.$$.fragment,b),transition_in(t.$$.fragment,b),g=!0)},o(b){transition_out(e.$$.fragment,b),transition_out(t.$$.fragment,b),g=!1},d(b){destroy_component(e,b),b&&detach(r),destroy_component(t,b),b&&detach(a),b&&detach(s),b&&detach(u),b&&detach(d),m=!1,run_all(_)}}}function create_default_slot$3(n){let e,r,t,a,s,u,d,c,g,m;r=new DialogOverlay({props:{class:"absolute inset-0 bg-black opacity-70"}});const _=n[5].default,b=create_slot(_,n,n[8],null),S=b||fallback_block(n);return{c(){e=element("div"),create_component(r.$$.fragment),a=space(),s=element("div"),S&&S.c(),attr(e,"class","inset-0 absolute"),attr(s,"class",u="modal-box max-w-2xl "+n[0]),attr(s,"style",n[1])},m(C,R){insert(C,e,R),mount_component(r,e,null),insert(C,a,R),insert(C,s,R),S&&S.m(s,null),c=!0,g||(m=[listen(s,"introstart",n[6]),listen(s,"outroend",n[7])],g=!0)},p(C,R){b&&b.p&&(!c||R&256)&&update_slot_base(b,_,C,C[8],c?get_slot_changes(_,C[8],R,null):get_all_dirty_from_scope(C[8]),null),(!c||R&1&&u!==(u="modal-box max-w-2xl "+C[0]))&&attr(s,"class",u),(!c||R&2)&&attr(s,"style",C[1])},i(C){c||(transition_in(r.$$.fragment,C),add_render_callback(()=>{t||(t=create_bidirectional_transition(e,fade,{duration:300},!0)),t.run(1)}),transition_in(S,C),add_render_callback(()=>{d||(d=create_bidirectional_transition(s,slide,{duration:300},!0)),d.run(1)}),c=!0)},o(C){transition_out(r.$$.fragment,C),t||(t=create_bidirectional_transition(e,fade,{duration:300},!1)),t.run(0),transition_out(S,C),d||(d=create_bidirectional_transition(s,slide,{duration:300},!1)),d.run(0),c=!1},d(C){C&&detach(e),destroy_component(r),C&&t&&t.end(),C&&detach(a),C&&detach(s),S&&S.d(C),C&&d&&d.end(),g=!1,run_all(m)}}}function create_fragment$e(n){let e,r;return e=new Dialog({props:{class:"inset-0 absolute modal modal-bottom modal-open",open:n[2],static:!0,$$slots:{default:[create_default_slot$3]},$$scope:{ctx:n}}}),e.$on("close",n[3]),{c(){create_component(e.$$.fragment)},m(t,a){mount_component(e,t,a),r=!0},p(t,[a]){const s={};a&4&&(s.open=t[2]),a&263&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){r||(transition_in(e.$$.fragment,t),r=!0)},o(t){transition_out(e.$$.fragment,t),r=!1},d(t){destroy_component(e,t)}}}function instance$c(n,e,r){let{$$slots:t={},$$scope:a}=e,{isOpen:s=!0}=e,{modalClass:u="mx-10"}=e,{modalStyle:d=""}=e,c=!0;const g=createEventDispatcher();function m(){r(4,s=!1),g("close")}const _=()=>r(2,c=!0),b=()=>r(2,c=!1);return n.$$set=S=>{"isOpen"in S&&r(4,s=S.isOpen),"modalClass"in S&&r(0,u=S.modalClass),"modalStyle"in S&&r(1,d=S.modalStyle),"$$scope"in S&&r(8,a=S.$$scope)},[u,d,c,m,s,t,_,b,a]}class Dialog_1 extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$c,create_fragment$e,safe_not_equal,{isOpen:4,modalClass:0,modalStyle:1})}}function get_each_context$3(n,e,r){const t=n.slice();return t[10]=e[r],t}function create_default_slot_1$2(n){let e;return{c(){e=text(n[3])},m(r,t){insert(r,e,t)},p(r,t){t&8&&set_data(e,r[3])},d(r){r&&detach(e)}}}function create_each_block$3(n){let e=n[10]+"",r;return{c(){r=text(e)},m(t,a){insert(t,r,a)},p(t,a){a&4&&e!==(e=t[10]+"")&&set_data(r,e)},d(t){t&&detach(r)}}}function create_default_slot$2(n){let e,r,t,a,s,u,d,c,g,m;t=new DialogTitle({props:{as:"h3",class:"font-bold text-lg mb-5",$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:n}}});let _=n[2],b=[];for(let S=0;S<_.length;S+=1)b[S]=create_each_block$3(get_each_context$3(n,_,S));return{c(){e=element("button"),e.textContent="✕",r=space(),create_component(t.$$.fragment),a=space(),s=element("pre"),u=text("    ");for(let S=0;S<b.length;S+=1)b[S].c();d=text(`
  `),attr(e,"class","btn btn-sm btn-circle absolute right-2 top-2"),attr(s,"class","overflow-auto flex-1 -mx-5 px-6 -mb-2 pb-2")},m(S,C){insert(S,e,C),insert(S,r,C),mount_component(t,S,C),insert(S,a,C),insert(S,s,C),append(s,u);for(let R=0;R<b.length;R+=1)b[R].m(s,null);append(s,d),n[6](s),c=!0,g||(m=listen(e,"click",n[4]),g=!0)},p(S,C){const R={};if(C&8200&&(R.$$scope={dirty:C,ctx:S}),t.$set(R),C&4){_=S[2];let w;for(w=0;w<_.length;w+=1){const k=get_each_context$3(S,_,w);b[w]?b[w].p(k,C):(b[w]=create_each_block$3(k),b[w].c(),b[w].m(s,d))}for(;w<b.length;w+=1)b[w].d(1);b.length=_.length}},i(S){c||(transition_in(t.$$.fragment,S),c=!0)},o(S){transition_out(t.$$.fragment,S),c=!1},d(S){S&&detach(e),S&&detach(r),destroy_component(t,S),S&&detach(a),S&&detach(s),destroy_each(b,S),n[6](null),g=!1,m()}}}function create_fragment$d(n){let e,r,t,a,s;function u(c){n[7](c)}let d={modalClass:"flex-col flex",$$slots:{default:[create_default_slot$2]},$$scope:{ctx:n}};return n[0]!==void 0&&(d.isOpen=n[0]),t=new Dialog_1({props:d}),binding_callbacks.push(()=>bind(t,"isOpen",u,n[0])),t.$on("close",n[8]),{c(){e=element("br"),r=space(),create_component(t.$$.fragment)},m(c,g){insert(c,e,g),insert(c,r,g),mount_component(t,c,g),s=!0},p(c,[g]){const m={};g&8206&&(m.$$scope={dirty:g,ctx:c}),!a&&g&1&&(a=!0,m.isOpen=c[0],add_flush_callback(()=>a=!1)),t.$set(m)},i(c){s||(transition_in(t.$$.fragment,c),s=!0)},o(c){transition_out(t.$$.fragment,c),s=!1},d(c){c&&detach(e),c&&detach(r),destroy_component(t,c)}}}function instance$b(n,e,r){let t,a;const s=createEventDispatcher();let{isOpen:u=!0}=e,{extraData:d={title:"Title",messageLines:[]}}=e,c=null;function g(){s("close",null),r(0,u=!1)}function m(S){binding_callbacks[S?"unshift":"push"](()=>{c=S,r(1,c),r(5,d)})}function _(S){u=S,r(0,u)}const b=()=>g();return n.$$set=S=>{"isOpen"in S&&r(0,u=S.isOpen),"extraData"in S&&r(5,d=S.extraData)},n.$$.update=()=>{n.$$.dirty&32&&r(3,t=d.title||""),n.$$.dirty&32&&r(2,a=d.messageLines||[]),n.$$.dirty&34&&d&&c!=null&&c.scrollTop&&c.scrollTop+c.clientHeight+100>c.scrollHeight&&r(1,c.scrollTop=c.scrollHeight,c)},[u,c,a,t,g,d,m,_,b]}class ScrollingTextDialog extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$b,create_fragment$d,safe_not_equal,{isOpen:0,extraData:5})}}function create_default_slot_1$1(n){let e;return{c(){e=text("Please enter the driver password")},m(r,t){insert(r,e,t)},d(r){r&&detach(e)}}}function create_default_slot$1(n){let e,r,t,a,s,u,d,c,g,m;return e=new DialogTitle({props:{as:"h3",class:"font-bold text-lg",$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:n}}}),{c(){create_component(e.$$.fragment),r=space(),t=element("input"),a=space(),s=element("button"),s.textContent="Ok",u=space(),d=element("button"),d.textContent="Cancel",attr(t,"type","password"),attr(t,"placeholder","Password"),attr(t,"class","input input-bordered block w-full my-5"),attr(s,"type","button"),attr(s,"class","btn btn-primary btn-block btn-shadow flex-1 mb-2"),attr(d,"type","button"),attr(d,"class","btn btn-outline btn-block flex-1")},m(_,b){mount_component(e,_,b),insert(_,r,b),insert(_,t,b),set_input_value(t,n[1]),insert(_,a,b),insert(_,s,b),insert(_,u,b),insert(_,d,b),c=!0,g||(m=[listen(t,"input",n[3]),listen(t,"keypress",n[4]),listen(s,"click",n[5]),listen(d,"click",n[6])],g=!0)},p(_,b){const S={};b&1024&&(S.$$scope={dirty:b,ctx:_}),e.$set(S),b&2&&t.value!==_[1]&&set_input_value(t,_[1])},i(_){c||(transition_in(e.$$.fragment,_),c=!0)},o(_){transition_out(e.$$.fragment,_),c=!1},d(_){destroy_component(e,_),_&&detach(r),_&&detach(t),_&&detach(a),_&&detach(s),_&&detach(u),_&&detach(d),g=!1,run_all(m)}}}function create_fragment$c(n){let e,r,t,a,s;function u(c){n[7](c)}let d={modalStyle:"max-width:16rem; text-align:center",modalClass:"modal-bottom",$$slots:{default:[create_default_slot$1]},$$scope:{ctx:n}};return n[0]!==void 0&&(d.isOpen=n[0]),t=new Dialog_1({props:d}),binding_callbacks.push(()=>bind(t,"isOpen",u,n[0])),t.$on("close",n[8]),{c(){e=element("br"),r=space(),create_component(t.$$.fragment)},m(c,g){insert(c,e,g),insert(c,r,g),mount_component(t,c,g),s=!0},p(c,[g]){const m={};g&1026&&(m.$$scope={dirty:g,ctx:c}),!a&&g&1&&(a=!0,m.isOpen=c[0],add_flush_callback(()=>a=!1)),t.$set(m)},i(c){s||(transition_in(t.$$.fragment,c),s=!0)},o(c){transition_out(t.$$.fragment,c),s=!1},d(c){c&&detach(e),c&&detach(r),destroy_component(t,c)}}}function instance$a(n,e,r){let{isOpen:t=!0}=e,a="";const s=createEventDispatcher();function u(S){if(S&&a.length==0){console.log("Password is empty");return}else S?s("close",a):s("close",null);r(0,t=!1)}function d(){a=this.value,r(1,a)}const c=S=>{S.key=="Enter"&&u(!0)},g=()=>u(!0),m=()=>u(!1);function _(S){t=S,r(0,t)}const b=()=>u(!1);return n.$$set=S=>{"isOpen"in S&&r(0,t=S.isOpen)},[t,a,u,d,c,g,m,_,b]}class PasswordDialog extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$a,create_fragment$c,safe_not_equal,{isOpen:0})}}function create_default_slot_1(n){let e;return{c(){e=text(n[1])},m(r,t){insert(r,e,t)},p(r,t){t&2&&set_data(e,r[1])},d(r){r&&detach(e)}}}function create_default_slot(n){let e,r,t,a,s,u,d,c;return e=new DialogTitle({props:{as:"h3",class:"font-bold text-lg mb-5",$$slots:{default:[create_default_slot_1]},$$scope:{ctx:n}}}),{c(){create_component(e.$$.fragment),r=space(),t=element("button"),t.textContent="Ok",a=space(),s=element("button"),s.textContent="Cancel",attr(t,"type","button"),attr(t,"class","btn btn-primary btn-block flex-1 mb-2"),attr(s,"type","button"),attr(s,"class","btn btn-outline btn-block flex-1")},m(g,m){mount_component(e,g,m),insert(g,r,m),insert(g,t,m),insert(g,a,m),insert(g,s,m),u=!0,d||(c=[listen(t,"click",n[4]),listen(s,"click",n[5])],d=!0)},p(g,m){const _={};m&514&&(_.$$scope={dirty:m,ctx:g}),e.$set(_)},i(g){u||(transition_in(e.$$.fragment,g),u=!0)},o(g){transition_out(e.$$.fragment,g),u=!1},d(g){destroy_component(e,g),g&&detach(r),g&&detach(t),g&&detach(a),g&&detach(s),d=!1,run_all(c)}}}function create_fragment$b(n){let e,r,t,a,s;function u(c){n[6](c)}let d={modalStyle:"max-width:16rem; text-align:center",modalClass:"modal-bottom",$$slots:{default:[create_default_slot]},$$scope:{ctx:n}};return n[0]!==void 0&&(d.isOpen=n[0]),t=new Dialog_1({props:d}),binding_callbacks.push(()=>bind(t,"isOpen",u,n[0])),t.$on("close",n[7]),{c(){e=element("br"),r=space(),create_component(t.$$.fragment)},m(c,g){insert(c,e,g),insert(c,r,g),mount_component(t,c,g),s=!0},p(c,[g]){const m={};g&514&&(m.$$scope={dirty:g,ctx:c}),!a&&g&1&&(a=!0,m.isOpen=c[0],add_flush_callback(()=>a=!1)),t.$set(m)},i(c){s||(transition_in(t.$$.fragment,c),s=!0)},o(c){transition_out(t.$$.fragment,c),s=!1},d(c){c&&detach(e),c&&detach(r),destroy_component(t,c)}}}function instance$9(n,e,r){let t;const a=createEventDispatcher();let{isOpen:s=!0}=e,{extraData:u={}}=e;function d(b){a("close",b),r(0,s=!1)}const c=()=>d(!0),g=()=>d(!1);function m(b){s=b,r(0,s)}const _=()=>d(!1);return n.$$set=b=>{"isOpen"in b&&r(0,s=b.isOpen),"extraData"in b&&r(3,u=b.extraData)},n.$$.update=()=>{n.$$.dirty&8&&r(1,t=u.title||"Are you sure?")},[s,t,d,u,c,g,m,_]}class AlertDialog extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$9,create_fragment$b,safe_not_equal,{isOpen:0,extraData:3})}}function create_if_block$4(n){let e,r,t,a;const s=[create_if_block_1$2,create_if_block_2$1,create_if_block_3$1],u=[];function d(c,g){return c[0].dialogType==DIALOG_TYPE.Password?0:c[0].dialogType==DIALOG_TYPE.Alert?1:c[0].dialogType==DIALOG_TYPE.ScrollingText?2:-1}return~(e=d(n))&&(r=u[e]=s[e](n)),{c(){r&&r.c(),t=empty()},m(c,g){~e&&u[e].m(c,g),insert(c,t,g),a=!0},p(c,g){let m=e;e=d(c),e===m?~e&&u[e].p(c,g):(r&&(group_outros(),transition_out(u[m],1,1,()=>{u[m]=null}),check_outros()),~e?(r=u[e],r?r.p(c,g):(r=u[e]=s[e](c),r.c()),transition_in(r,1),r.m(t.parentNode,t)):r=null)},i(c){a||(transition_in(r),a=!0)},o(c){transition_out(r),a=!1},d(c){~e&&u[e].d(c),c&&detach(t)}}}function create_if_block_3$1(n){let e,r,t,a;function s(c){n[4](c)}function u(c){n[5](c)}let d={};return n[0].isOpen!==void 0&&(d.isOpen=n[0].isOpen),n[0].extraData!==void 0&&(d.extraData=n[0].extraData),e=new ScrollingTextDialog({props:d}),binding_callbacks.push(()=>bind(e,"isOpen",s,n[0].isOpen)),binding_callbacks.push(()=>bind(e,"extraData",u,n[0].extraData)),e.$on("close",closeTopDialog),{c(){create_component(e.$$.fragment)},m(c,g){mount_component(e,c,g),a=!0},p(c,g){const m={};!r&&g&1&&(r=!0,m.isOpen=c[0].isOpen,add_flush_callback(()=>r=!1)),!t&&g&1&&(t=!0,m.extraData=c[0].extraData,add_flush_callback(()=>t=!1)),e.$set(m)},i(c){a||(transition_in(e.$$.fragment,c),a=!0)},o(c){transition_out(e.$$.fragment,c),a=!1},d(c){destroy_component(e,c)}}}function create_if_block_2$1(n){let e,r,t,a;function s(c){n[2](c)}function u(c){n[3](c)}let d={};return n[0].isOpen!==void 0&&(d.isOpen=n[0].isOpen),n[0].extraData!==void 0&&(d.extraData=n[0].extraData),e=new AlertDialog({props:d}),binding_callbacks.push(()=>bind(e,"isOpen",s,n[0].isOpen)),binding_callbacks.push(()=>bind(e,"extraData",u,n[0].extraData)),e.$on("close",closeTopDialog),{c(){create_component(e.$$.fragment)},m(c,g){mount_component(e,c,g),a=!0},p(c,g){const m={};!r&&g&1&&(r=!0,m.isOpen=c[0].isOpen,add_flush_callback(()=>r=!1)),!t&&g&1&&(t=!0,m.extraData=c[0].extraData,add_flush_callback(()=>t=!1)),e.$set(m)},i(c){a||(transition_in(e.$$.fragment,c),a=!0)},o(c){transition_out(e.$$.fragment,c),a=!1},d(c){destroy_component(e,c)}}}function create_if_block_1$2(n){let e,r,t;function a(u){n[1](u)}let s={};return n[0].isOpen!==void 0&&(s.isOpen=n[0].isOpen),e=new PasswordDialog({props:s}),binding_callbacks.push(()=>bind(e,"isOpen",a,n[0].isOpen)),e.$on("close",closeTopDialog),{c(){create_component(e.$$.fragment)},m(u,d){mount_component(e,u,d),t=!0},p(u,d){const c={};!r&&d&1&&(r=!0,c.isOpen=u[0].isOpen,add_flush_callback(()=>r=!1)),e.$set(c)},i(u){t||(transition_in(e.$$.fragment,u),t=!0)},o(u){transition_out(e.$$.fragment,u),t=!1},d(u){destroy_component(e,u)}}}function create_fragment$a(n){let e,r,t=n[0]&&create_if_block$4(n);return{c(){t&&t.c(),e=empty()},m(a,s){t&&t.m(a,s),insert(a,e,s),r=!0},p(a,[s]){a[0]?t?(t.p(a,s),s&1&&transition_in(t,1)):(t=create_if_block$4(a),t.c(),transition_in(t,1),t.m(e.parentNode,e)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(a){r||(transition_in(t),r=!0)},o(a){transition_out(t),r=!1},d(a){t&&t.d(a),a&&detach(e)}}}let dialogStack=[],topDialog=nStore(null);const openDialog=(n,e,r)=>{let a={isOpen:!0,dialogType:n,callback:r,extraData:e};return dialogStack=[...dialogStack,a],topDialog.set(a),s=>{a.extraData=s(a.extraData),topDialog=topDialog}},closeTopDialog=n=>{const e=topDialog.get();e.isOpen=!1,e.callback&&e.callback(n.detail),dialogStack.pop();let r=dialogStack[dialogStack.length-1];r?(r.isOpen=!0,topDialog.set(r)):topDialog.set(null)};function instance$8(n,e,r){let t;component_subscribe(n,topDialog,g=>r(0,t=g));function a(g){n.$$.not_equal(t.isOpen,g)&&(t.isOpen=g,topDialog.set(t))}function s(g){n.$$.not_equal(t.isOpen,g)&&(t.isOpen=g,topDialog.set(t))}function u(g){n.$$.not_equal(t.extraData,g)&&(t.extraData=g,topDialog.set(t))}function d(g){n.$$.not_equal(t.isOpen,g)&&(t.isOpen=g,topDialog.set(t))}function c(g){n.$$.not_equal(t.extraData,g)&&(t.extraData=g,topDialog.set(t))}return[t,a,s,u,d,c]}class DialogSpawner extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$8,create_fragment$a,safe_not_equal,{})}}let toastDeduplicationCache={};function showToastMessage(n,e=2e3,r=null){if(toastDeduplicationCache[n])return;let a=toast.push({msg:n,duration:e});return toastDeduplicationCache[n]=a,toast.subscribe(s=>{s.find(d=>d.msg===n)||(delete toastDeduplicationCache[n],r&&r())}),a}function showConfirmationMsg(n,e){openDialog(DIALOG_TYPE.Alert,{title:n},r=>{e&&r&&e(r)})}let passwordPromptOpen=!1;function showPasswordPrompt(n,e){passwordPromptOpen||(passwordPromptOpen=!0,openDialog(DIALOG_TYPE.Password,{},r=>{r!=null&&e&&e(r)}))}function showScrollableTextPopup(n,e){let r=openDialog(DIALOG_TYPE.ScrollingText,{title:n,messageLines:[]},a=>{e&&e(null)});return a=>{r(s=>({...s,messageLines:[...s.messageLines,a]}))}}const connectBtn=document.getElementById("connect_btn");document.getElementById("connect_btn_options");document.getElementById("disconnect_btn");const connectedRovLabel=document.getElementById("connected_rov_label");document.getElementById("rov_connection_bar");function setCurrentRovName(){let n=rovPeerIdEndNumber.get(),e=getROVName(n),r="ROV "+n+" ("+e.replace(ROV_PEERID_BASE,"")+")";connectBtn.innerText="Connect to "+r,connectedRovLabel.innerText=r}document.getElementById("client_peer_id_label");document.getElementById("role_display_text");document.getElementById("take_control_btn");function updateRoleDisplay(n){n?document.body.classList.add("rov-driver"):document.body.classList.remove("rov-driver")}document.getElementById("ping_value");document.getElementById("battery_value");document.getElementById("pressure_value");document.getElementById("temp_value");function updateDisplayedSensorValues(n){n.yaw&&setCompassHeading(n.yaw),n.pitch&&n.roll&&setArtificialHorizonBackground(n.roll,-n.pitch)}document.getElementById("actions-menu-overlay");document.getElementById("actions-menu-button");var compassDisc=document.getElementById("compassDiscImg");const compassOffset=135;function setCompassHeading(n){var e=-(n+compassOffset);compassDisc.style.transform=`translateX(${e}px)`}const gradientArtificialHorizonBackground=document.body;function setArtificialHorizonBackground(n,e){var r=Math.min(Math.max(e,-90),90)/90*100;gradientArtificialHorizonBackground.style.backgroundImage=`linear-gradient(${n}deg, rgba(2,0,36,1) ${-100+r}%, rgba(9,88,116,1) ${50+r}%, rgba(10,109,140,1) ${50+r}%, rgba(0,255,235,1) ${200+r}%)`}class OurPeerMachine{constructor(e){q(this,"eventHandlers",{});q(this,"connectionTimeout");q(this,"runningMachine",null);q(this,"peer",null);q(this,"ourPeerId",null);q(this,"onStateChangeCallback",e=>{});q(this,"xstateMachineLayout",createMachine({predictableActionArguments:!0,preserveActionOrder:!0,id:"DataConnection",initial:"Connecting",states:{Connecting:{entry:"onConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Reconnecting:{entry:"onReConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Connected:{entry:"onConnectedFunction",on:{ON_DISCONNECTED:{target:"Reconnecting"},ON_DESTROY:{target:"Destroyed"}}},Destroyed:{entry:"onDestoyedFunction",type:"final"}}},{actions:{onConnectingFunction:()=>{this.onConnecting()},onReConnectingFunction:()=>{this.onReConnecting()},onConnectedFunction:()=>{this.onConnected()},onDestoyedFunction:()=>{this.cleanup()}}}));this.currentState=this.xstateMachineLayout.config.initial,this.onStateChangeCallback=e}start(){this.runningMachine=interpret(this.xstateMachineLayout,{devTools:debugXstateMode.get()}),this.runningMachine.onTransition(t=>{this.currentState=t.value,this.onStateChangeCallback(this.currentState)}),this.runningMachine.start(),this.ourPeerId=ourPeerId.get(),this.ourPeerId||(this.ourPeerId=getRandomName(),localStorage.setItem("ourPeerId",this.ourPeerId),ourPeerId.set(this.ourPeerId));let e=localStorage.getItem("peerToken"),r=e?{...peerServerCloudOptions,token:e}:peerServerCloudOptions;this.peer=new $70d766613f57b014$export$2e2bcd8739ae039(this.ourPeerId,r),console.log("Our PeerToken:",this.peer.options.token),!e&&this.peer.options.token&&localStorage.setItem("peerToken",this.peer.options.token),this.eventHandlers.onOpen=()=>{this.sendEventToMachine("ON_CONNECTED"),showToastMessage("OurPeer Open!")},this.peer.on("open",this.eventHandlers.onOpen),this.eventHandlers.onError=t=>{t.type!="peer-unavailable"&&(t.type=="unavailable-id"?(showToastMessage("peer id "+this.ourPeerId+" already taken"),this.ourPeerId=getRandomName(),ourPeerId.set(this.ourPeerId)):t.type=="webrtc"&&t.message.indexOf("No remoteDescription")==-1?showToastMessage("Webrtc Error: "+t.message):console.log("!!!UNHANDLED!! OURPEER_ERROR:"+t.message+" | "+t.type),this.sendEventToMachine("ON_DESTROY"))},this.peer.on("error",this.eventHandlers.onError),this.eventHandlers.onClose=t=>{console.warn("!!UNHANDLED!! OURPEER_CLOSE:",t),this.sendEventToMachine("ON_DESTROY")},this.peer.on("close",this.eventHandlers.onClose),this.eventHandlers.onDisconnected=t=>{console.warn("!!UNHANDLED!! OURPEER_CLOSE:",t),this.sendEventToMachine("ON_DISCONNECTED")},this.peer.on("disconnected",this.eventHandlers.onDisconnected)}sendEventToMachine(e){this.runningMachine&&this.runningMachine.send(e)}onConnecting(){console.log("OnConnecting...."),this.connectionTimeout=setTimeout(()=>{this.sendEventToMachine("ON_DESTROY")},12e3)}onReConnecting(){console.log("OnReConnecting...."),this.peer.reconnect(),this.onConnecting()}onConnected(){clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0}cleanup(){clearTimeout(this.connectionTimeout),this.runningMachine.stop(),this.currentState="Destroyed",this.onStateChangeCallback(this.currentState),this.peer&&(this.peer.off("open",this.eventHandlers.onOpen),this.peer.off("error",this.eventHandlers.onError),this.peer.off("close",this.eventHandlers.onClose),this.peer.off("disconnected",this.eventHandlers.onDisconnected),this.peer.destroy(),this.peer=null)}}const INITIAL_CONNECTION_TIMEOUT=12e3,CONNECTION_TIMEOUT=2e3,RETRY_CONNECTION_TIMEOUT=5e3,messageEncoder=new TextEncoder,messageDecoder=new TextDecoder;class DataConnectionMachine{constructor(e,r,t,a){q(this,"closed",!1);q(this,"rovPeerId",null);q(this,"currentPeer",null);q(this,"dataConnection",null);q(this,"lastRecivedMessageTime",0);q(this,"connectionTimeoutId",-1);q(this,"currentState",ConnectionState.disconnected);q(this,"onMessageRecived");q(this,"onStateChange");q(this,"eventHandlers",null);this.onMessageRecived=t,this.onStateChange=a,this.currentPeer=e,this.rovPeerId=r}setCurrentPeer(e){this.currentPeer=e}restart(){this.closed||(this._changeState(ConnectionState.reconnecting),this.cleanup(),this.start())}start(){if(this.closed||this.eventHandlers!=null){console.warn("start called on running DataConnectionMachine");return}if(this.eventHandlers={},this._changeState(ConnectionState.connecting),console.info("Connecting to rov peer: "+this.rovPeerId),this.dataConnection=this.currentPeer.connect(this.rovPeerId,{reliable:!0,serialization:"none"}),!this.dataConnection){console.warn("Failed to connect to peer: "+this.rovPeerId),this.restart();return}this.connectionTimeoutId=window.setTimeout(()=>{this.restart()},INITIAL_CONNECTION_TIMEOUT),console.log("Setting connection timeout",this.connectionTimeoutId),this.dataConnection.on("open",this.eventHandlers.onOpen=()=>{console.info("DataConnection Open!"),this._changeState(ConnectionState.connected),this.resetConnectionTimeout()}),this.dataConnection.on("iceStateChanged",this.eventHandlers.onIceChange=e=>{console.info("DATACHANNEL_ICE_CHANGE:",e)}),this.dataConnection.on("error",this.eventHandlers.onError=e=>{console.warn("!!!UNHANDLED!! DATACHANNEL_ERROR:",e),this.restart()}),this.dataConnection.on("close",this.eventHandlers.onClose=()=>{console.warn("!!UNHANDLED!! DATACHANNEL_CLOSE:"),this.restart()}),this.currentPeer.on("error",this.eventHandlers.onPeerError=e=>{e.type=="peer-unavailable"&&(this.connectionTimeoutId=window.setTimeout(()=>{this.restart()},CONNECTION_TIMEOUT))}),this.dataConnection.on("data",this.eventHandlers.onData=e=>{this._changeState(ConnectionState.connected),this.resetConnectionTimeout();const r=messageDecoder.decode(e);console.log("Message Recived: "+r),this.onMessageRecived(r)})}resetConnectionTimeout(){window.clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=setTimeout(()=>{this._changeState(ConnectionState.reconnecting),this.connectionTimeoutId=setTimeout(()=>{this.restart()},RETRY_CONNECTION_TIMEOUT)},CONNECTION_TIMEOUT)}sendMessage(e){if(this.dataConnection&&this.dataConnection.open&&this.currentState==ConnectionState.connected){const r=messageEncoder.encode(e);return this.dataConnection.send(r),!0}return!1}cleanup(){console.debug("Cleaning up data connection",this.rovPeerId,this.connectionTimeoutId),window.clearTimeout(this.connectionTimeoutId),this.eventHandlers&&(this.currentPeer&&this.currentPeer.off("error",this.eventHandlers.onPeerError),this.dataConnection&&(this.dataConnection.off("open",this.eventHandlers.onOpen),this.dataConnection.off("error",this.eventHandlers.onError),this.dataConnection.off("close",this.eventHandlers.onClose),this.dataConnection.off("data",this.eventHandlers.onData),this.dataConnection.close()),this.eventHandlers=null)}close(){this.closed=!0,this.cleanup()}_changeState(e){this.currentState!=e&&(this.currentState=e,this.onStateChange(e))}}const FROZEN_VIDEO_TIMEOUT=6e3;class MediaConnectionMachine{constructor(e,r,t){q(this,"closed",!1);q(this,"rovPeerId",null);q(this,"currentPeer",null);q(this,"lastRecivedFrameTime",0);q(this,"frozenVideoTimeoutId",null);q(this,"mediaChannel",null);q(this,"mainTrack",null);q(this,"currentState",ConnectionState.disconnected);q(this,"onStateChange");q(this,"eventHandlers",null);this.onStateChange=t,this.currentPeer=e,this.rovPeerId=r,this.mediaChannel=null}setCurrentPeer(e){this.currentPeer=e}restart(){this.closed||(this._changeState(ConnectionState.reconnecting),this.cleanup(),this.start())}start(){if(this.closed||this.eventHandlers!=null){console.warn("Start() called on running MediaConnectionMachine");return}this.eventHandlers={},console.info("Waiting for "+this.rovPeerId+" to media call us..."),this.eventHandlers.onCall=e=>{window.clearTimeout(this.frozenVideoTimeoutId),console.info(e.peer+" media called us!"),!(this.mediaChannel&&this.mediaChannel.peer!=this.rovPeerId)&&(console.info(e.peer+" media called us- acceping!"),this.mediaChannel&&this.cleanup(),this.eventHandlers={},this.mediaChannel=e,e.answer(),console.log("streamb4",this.eventHandlers),e.on("stream",this.eventHandlers.onStream=r=>{rovVideoStream.set(r),this.mainTrack=r.getVideoTracks()[0],this._changeState(ConnectionState.connected),this.mainTrack.addEventListener("mute",this.eventHandlers.onStreamMute=()=>{console.info("Frozen video stream timeout started!"),this.frozenVideoTimeoutId=setTimeout(()=>{console.info("Frozen video stream timeout reached!"),this.cleanup()},FROZEN_VIDEO_TIMEOUT)}),this.mainTrack.addEventListener("unmute",this.eventHandlers.onStreamUnMute=()=>{console.info("Frozen video stream timeout cleared!"),clearTimeout(this.frozenVideoTimeoutId)})}),e.on("error",this.eventHandlers.onError=r=>{console.log("MediaChannel Error: ",r),this.restart()}),e.on("close",this.eventHandlers.onClose=r=>{this.restart()}))},this.currentPeer.on("call",this.eventHandlers.onCall)}cleanup(){console.debug("Cleaning up media connection",this.rovPeerId,this.frozenVideoTimeoutId),this.eventHandlers&&(this.currentPeer&&this.currentPeer.off("call",this.eventHandlers.onCall),this.mediaChannel&&(this.mediaChannel.off("stream",this.eventHandlers.onStream),this.mediaChannel.off("error",this.eventHandlers.onError),this.mediaChannel.off("close",this.eventHandlers.onClose),this.mediaChannel.close(),this.mediaChannel=null),this.mainTrack&&(this.mainTrack.removeEventListener("mute",this.eventHandlers.onStreamMute),this.mainTrack.removeEventListener("unmute",this.eventHandlers.onStreamMute),this.mainTrack=null),this.eventHandlers=null)}close(){this.closed=!0,this.cleanup()}_changeState(e){this.currentState!=e&&(this.currentState=e,this.onStateChange(e))}}class RovConnection{constructor(e,r,t,a){q(this,"closed",!1);q(this,"rovPeerId");q(this,"ourPeerMachine");q(this,"dataConnection",null);q(this,"mediaConnection",null);q(this,"msgQueue",new Queue);q(this,"connectionFailureCount",0);q(this,"onMesssageRecived");this.rovPeerId=e,this.ourPeerMachine=r,this.onMesssageRecived=s=>t(s,e)}start(){this.mediaConnection&&this.mediaConnection.cleanup(),(this.mediaConnection=new MediaConnectionMachine(this.ourPeerMachine.peer,this.rovPeerId,this.mcStateChange.bind(this))).start(),this.dataConnection&&this.dataConnection.cleanup(),(this.dataConnection=new DataConnectionMachine(this.ourPeerMachine.peer,this.rovPeerId,this.onMesssageRecived,this.dcStateChange.bind(this))).start()}_sendMsgToRov(e){return this.dataConnection.sendMessage(e.msg)?(console.debug(`Msg sent to rov: ${this.rovPeerId}`,e.msg,e.onSendCallback),e.onSendCallback&&e.onSendCallback(e.msg),!0):(console.info('Failed to send "{}" to rov: {}',e.msg,this.rovPeerId),!1)}emptyMsgQueue(){if(this.dataConnection.currentState==ConnectionState.connected)for(;!this.msgQueue.isEmpty();){let e=this.msgQueue.peak();if(!this._sendMsgToRov(e))break;this.msgQueue.pop()}}sendMessage(e,r,t=!1){typeof e!="string"&&(e=JSON.stringify(e));let a={msg:e,onSendCallback:r};t?this._sendMsgToRov(a):(console.debug("Adding msg to queue:",e),this.msgQueue.push(a),setTimeout(this.emptyMsgQueue.bind(this),0))}dcStateChange(e){this.closed||(rovDataChannelConnState.set(e),console.debug("dcStateChange",e),e==ConnectionState.connected?(this.emptyMsgQueue(),this.connectionFailureCount=0):e==ConnectionState.reconnecting?this.connectionFailureCount++:e==ConnectionState.disconnected&&this.close())}mcStateChange(e){this.closed||(rovVideoStreamConnState.set(e),console.debug("mcStateChange",e),e==ConnectionState.connected||(e==ConnectionState.reconnecting?this.connectionFailureCount++:e==ConnectionState.disconnected&&this.close()))}_checkForTooManyFailures(){this.connectionFailureCount>5&&(console.info("Too many connection failures, closing connection"),this.close())}switchOutThisPeer(e){this.ourPeerMachine=e,this.dataConnection.setCurrentPeer(e.peer)}close(){console.info("Closing Rov Connection: ",this.rovPeerId),this.closed=!0,this.dataConnection.close()}}class ConnectionManager{constructor(e){q(this,"ROVs",{});q(this,"currentTargetRovId",getROVName(rovPeerIdEndNumber.get()));q(this,"ourPeerMachines",[]);q(this,"overallPeerServerState",ConnectionState.disconnected);q(this,"reconnectFailureCount",0);q(this,"onMessageRecivedCallback",e=>{console.debug("msg recived:"+e)});this.onMessageRecivedCallback=e}start(){if(this.ourPeerMachines.length!==0)return;const e=new OurPeerMachine(this.peerConnStateChange.bind(this));this.ourPeerMachines=[e],e.start()}getThisPeerId(){return ourPeerId.get()}peerConnStateChange(){let e=this.ourPeerMachines.map(t=>t.currentState);console.log("PeerStatesChange: ",e);let r=0;for(let t=0;t<e.length;t++)e[t]==ConnectionState.connected&&(r++,r>1?(this.ourPeerMachines[t].cleanup(),this.ourPeerMachines.splice(t,1)):this.connectToCurrentTargetRov(),this.reconnectFailureCount=0);if(r!=-1)if(console.debug("peer states:",e,r),r>0){if(this.overallPeerServerState==ConnectionState.connected)return;peerServerConnState.set(ConnectionState.connected)}else if(e.indexOf(ConnectionState.reconnecting)!=-1){if(this.overallPeerServerState==ConnectionState.reconnecting)return;peerServerConnState.set(ConnectionState.reconnecting)}else if(e.indexOf(ConnectionState.connecting)!=-1){if(this.overallPeerServerState==ConnectionState.connecting)return;peerServerConnState.set(ConnectionState.connecting)}else this.overallPeerServerState!=ConnectionState.disconnected&&peerServerConnState.set(ConnectionState.disconnected)}rovConnStateChange(e,r,t){console.info(t+" Conn State: dc:"+e+" mc:"+r),t==this.currentTargetRovId&&(console.info("Current Rov "+t+" state changed"),rovDataChannelConnState.set(e),rovVideoStreamConnState.set(r))}messageRecived(e,r){console.debug("msg recived:"+e,r,this.currentTargetRovId),r===this.currentTargetRovId&&this.onMessageRecivedCallback(e)}connectToRov(e){this.ROVs[e]||(console.log("new Rov: ",e,this.rovConnStateChange.bind(this)),this.ROVs[e]=new RovConnection(e,this.ourPeerMachines[0],this.messageRecived.bind(this),this.rovConnStateChange.bind(this))),this.ROVs[e].start()}connectToCurrentTargetRov(){this.currentTargetRovId=getROVName(rovPeerIdEndNumber.get()),this.connectToRov(this.currentTargetRovId)}disconnectFromRov(e){if(e==this.currentTargetRovId&&(rovDataChannelConnState.set(ConnectionState.disconnected),rovVideoStreamConnState.set(ConnectionState.disconnected)),this.ROVs[e]===void 0){console.warn("Tried to disconnect from a rov that is not connected: ",e);return}this.ROVs[e].close(),delete this.ROVs[e]}disconnectFromCurrentRov(){this.disconnectFromRov(this.currentTargetRovId)}sendMessageToRov(e,r,t=!1){this.ROVs[r].sendMessage(e,null,t)}sendMessageToCurrentRov(e,r=!1){this.sendMessageToRov(e,this.currentTargetRovId,r)}cleanup(){for(const e in this.ROVs)this.disconnectFromRov(e);for(const e of this.ourPeerMachines)e.cleanup();this.ourPeerMachines=[]}}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let n=0;n<256;++n)byteToHex.push((n+256).toString(16).slice(1));function unsafeStringify(n,e=0){return(byteToHex[n[e+0]]+byteToHex[n[e+1]]+byteToHex[n[e+2]]+byteToHex[n[e+3]]+"-"+byteToHex[n[e+4]]+byteToHex[n[e+5]]+"-"+byteToHex[n[e+6]]+byteToHex[n[e+7]]+"-"+byteToHex[n[e+8]]+byteToHex[n[e+9]]+"-"+byteToHex[n[e+10]]+byteToHex[n[e+11]]+byteToHex[n[e+12]]+byteToHex[n[e+13]]+byteToHex[n[e+14]]+byteToHex[n[e+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(n,e,r){if(native.randomUUID&&!e&&!n)return native.randomUUID();n=n||{};const t=n.random||(n.rng||rng)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){r=r||0;for(let a=0;a<16;++a)e[r+a]=t[a];return e}return unsafeStringify(t)}const ae=class{static handlePasswordChallenge(e){showPasswordPrompt("Please enter the driver password",r=>{if(r){const t={cid:e,action:"password_attempt",val:r};ae.sendRovMessage(t,null)}else delete ae.replyContinuityCallbacks[e]})}static handleReplyMsgRecived(e,r){const t=e.status,a=e.val,s=ae.replyContinuityCallbacks[r].callback;if(console.debug(t+" msg rcvd: "+a,e),t=="error")console.warn("Rov Action Error: "+a),showToastMessage(a);else if(t!="pong")if(t=="done")s?s(e):showToastMessage(ae.replyContinuityCallbacks[r].originalMsgData.action+": OK");else if(t=="password-required")s&&s(e),ae.handlePasswordChallenge(r);else if(t=="password-invalid")s&&s(e),showToastMessage("Invalid password"),s&&s(e),ae.handlePasswordChallenge(r);else if(t=="password-accepted"){showToastMessage("Password accepted"),s&&s(e);const u=ae.replyContinuityCallbacks[r].original_msg;console.log("originalMsgData: ",u),ae.sendRovMessage(u,null)}else s&&s(e)}static handleDriverChange(e){let r=connectionManager.get().getThisPeerId();e==r?(showToastMessage("You are now the driver"),updateRoleDisplay(!0),isRovDriver.set(!0)):(showToastMessage("ROV Driver is now "+e),updateRoleDisplay(!1),isRovDriver.set(!1))}static handleBroadcastMsgRecived(e){const r=e.status,t=e.val;console.debug(r+" msg rcvd: "+t,e),r=="error"?console.error("Rov Error: "+t):r=="sensor-update"?updateDisplayedSensorValues(t):r=="driver-changed"&&ae.handleDriverChange(t)}static handleRecivedMessage(e){const r=JSON.parse(e),t=r.cid;t&&t in ae.replyContinuityCallbacks?ae.handleReplyMsgRecived(r,t):ae.handleBroadcastMsgRecived(r)}};let MessageHandler=ae;q(MessageHandler,"replyContinuityCallbacks",{}),q(MessageHandler,"sendMessageCallback",null),q(MessageHandler,"setSendMessageCallback",e=>{ae.sendMessageCallback=e}),q(MessageHandler,"sendRovMessage",(e,r,t=!1)=>{let a=e.cid;a||(a=e.cid=v4().substring(0,8)),ae.replyContinuityCallbacks[a]||(ae.replyContinuityCallbacks[a]={original_msg:e}),r&&(ae.replyContinuityCallbacks[a].callback=r);const s=JSON.stringify(e);ae.sendMessageCallback&&ae.sendMessageCallback(s,t)});class GamepadUi{constructor(){this.gpadButtonHighlightElements=ONSCREEN_GPAD_BUTTON_LABELS.map(e=>document.getElementById(e+"_highlight")),this.gamepadHelpTooltip=document.querySelector("#gamepad-help-tooltip"),this.gamepadHelpTooltipText=document.querySelector("#gamepad-help-text"),this.defaultTooltipTarget=document.querySelector("#select_button"),this.gamepadConnectNotice=document.getElementById("gamepad-connect-notice"),this.tooManyGamepadsNotice=document.getElementById("too-many-gamepads-notice"),this.currentPopperTarget=this.defaultTooltipTarget,this.touchingButtonsCount=0,this.someAxiesNotCentered=!1,this.someButtonsPressed=!1,this.gamepadContainer=document.getElementById("gamepad-container"),this.gamepadHelpVisible=!1}showExtraniousGamepadsConnected(e){this.tooManyGamepadsNotice.style.display=e?"block":"none"}showGamepadConnected(e){e?this.gamepadContainer.classList.add("gamepad-connected"):this.gamepadContainer.classList.remove("gamepad-connected")}showNoGamepads(e){this.gamepadConnectNotice.style.display=e?"block":"none"}toggleGamepadHelpScreen(){this.gamepadHelpVisible=!this.gamepadHelpVisible,this.gamepadHelpVisible?(document.body.classList.add("gamepad-help-open"),document.body.classList.remove("driving-now")):document.body.classList.remove("gamepad-help-open")}showGamepadStatus(e){}showNotSupported(){alert("Gamepad interface not supported, please use a more modern browser.")}showHelpTooltip(e,r){}handleGamepadVisualFeedbackAxisEvents(e,r){e.forEach(a=>{var s=a.thumbStickElement,u=a.axisRange,d=a.xValue||0,c=a.yValue||0;s.style.transform=`rotateY(${-d*30}deg) rotateX(${c*30}deg) translate(${d*u}px,${c*u}px)`,this.gamepadHelpVisible&&(a.upIndicatorElement&&a.downIndicatorElement&&(Math.abs(d)<r?c<-r?(a.upIndicatorElement.style.opacity=Math.max(-c,0),a.downIndicatorElement.style.opacity=0,this.showHelpTooltip(a.upIndicatorElement,a.upHelpText||"None")):c>r?(a.upIndicatorElement.style.opacity=0,a.downIndicatorElement.style.opacity=Math.max(c,0),this.showHelpTooltip(a.downIndicatorElement,a.downHelpText||"None")):(a.upIndicatorElement.style.opacity=0,a.downIndicatorElement.style.opacity=0):(a.upIndicatorElement.style.opacity=0,a.downIndicatorElement.style.opacity=0)),a.leftIndicatorElement&&a.rightIndicatorElement&&(Math.abs(c)<r?d<-r?(a.leftIndicatorElement.style.opacity=Math.max(-d,0),a.rightIndicatorElement.style.opacity=0,this.showHelpTooltip(a.leftIndicatorElement,a.leftHelpText||"None")):d>r?(a.leftIndicatorElement.style.opacity=0,a.rightIndicatorElement.style.opacity=Math.max(d,0),this.showHelpTooltip(a.rightIndicatorElement,a.rightHelpText||"None")):(a.leftIndicatorElement.style.opacity=0,a.rightIndicatorElement.style.opacity=0):(a.leftIndicatorElement.style.opacity=0,a.rightIndicatorElement.style.opacity=0)))});let t=e.reduce((a,s)=>a+Math.abs(s.xValue)+Math.abs(s.yValue)>.05?1:0,0);!this.gamepadHelpVisible&&t>0&&this.someAxiesNotCentered==!1?(this.someAxiesNotCentered=!0,this.setGamepadVisability()):this.someAxiesNotCentered==!0&&t==0&&(this.someAxiesNotCentered=!1,this.setGamepadVisability())}setGamepadVisability(){!this.gamepadHelpVisible&&(this.someAxiesNotCentered||this.someButtonsPressed)?document.body.classList.add("driving-now"):document.body.classList.remove("driving-now")}setGamepadButtonClass(e,r){var t=r[e],a=this.gpadButtonHighlightElements[e];!t||!a||(t.touched?a.classList.add(ONSCREEN_GPAD_BUTTON_TOUCHED_CLASS):a.classList.remove(ONSCREEN_GPAD_BUTTON_TOUCHED_CLASS),t.pressed?a.classList.add(ONSCREEN_GPAD_BUTTON_PRESSED_CLASS):a.classList.remove(ONSCREEN_GPAD_BUTTON_PRESSED_CLASS))}handleGamepadVisualFeedbackButtonEvents(e){let r=0;for(var t=0;t<e.length;t++)this.setGamepadButtonClass(t,e),r+=e[t].pressed?1:0;!this.gamepadHelpVisible&&r>0&&this.someButtonsPressed==!1?(this.someButtonsPressed=!0,this.setGamepadVisability()):this.someButtonsPressed==!0&&(this.someButtonsPressed=!1,this.setGamepadVisability())}handleGamepadVisualFeedbackVariableTriggerButtonEvents(e,r){for(var t=0;t<r.length;t++){const s=r[t],u=s.buttonIndex;this.setGamepadButtonClass(u,e);var a=e[u]?e[u].value:0;s.buttonElement.style.transform=`rotateX(${a*30}deg) translateY(${a*s.axisRange}px)`}}getButtonHighlightElements(){return console.log("getButtonHighlightElements",this.gpadButtonHighlightElements),this.gpadButtonHighlightElements}}var minimal$1={exports:{}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=n;function n(e,r){for(var t=new Array(arguments.length-1),a=0,s=2,u=!0;s<arguments.length;)t[a++]=arguments[s++];return new Promise(function(c,g){t[a]=function(_){if(u)if(u=!1,_)g(_);else{for(var b=new Array(arguments.length-1),S=0;S<b.length;)b[S++]=arguments[S];c.apply(null,b)}};try{e.apply(r||null,t)}catch(m){u&&(u=!1,g(m))}})}return aspromise}var base64$1={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(n){var e=n;e.length=function(d){var c=d.length;if(!c)return 0;for(var g=0;--c%4>1&&d.charAt(c)==="=";)++g;return Math.ceil(d.length*3)/4-g};for(var r=new Array(64),t=new Array(123),a=0;a<64;)t[r[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;e.encode=function(d,c,g){for(var m=null,_=[],b=0,S=0,C;c<g;){var R=d[c++];switch(S){case 0:_[b++]=r[R>>2],C=(R&3)<<4,S=1;break;case 1:_[b++]=r[C|R>>4],C=(R&15)<<2,S=2;break;case 2:_[b++]=r[C|R>>6],_[b++]=r[R&63],S=0;break}b>8191&&((m||(m=[])).push(String.fromCharCode.apply(String,_)),b=0)}return S&&(_[b++]=r[C],_[b++]=61,S===1&&(_[b++]=61)),m?(b&&m.push(String.fromCharCode.apply(String,_.slice(0,b))),m.join("")):String.fromCharCode.apply(String,_.slice(0,b))};var s="invalid encoding";e.decode=function(d,c,g){for(var m=g,_=0,b,S=0;S<d.length;){var C=d.charCodeAt(S++);if(C===61&&_>1)break;if((C=t[C])===void 0)throw Error(s);switch(_){case 0:b=C,_=1;break;case 1:c[g++]=b<<2|(C&48)>>4,b=C,_=2;break;case 2:c[g++]=(b&15)<<4|(C&60)>>2,b=C,_=3;break;case 3:c[g++]=(b&3)<<6|C,_=0;break}}if(_===1)throw Error(s);return g-m},e.test=function(d){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(d)}}(base64$1)),base64$1}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=n;function n(){this._listeners={}}return n.prototype.on=function(r,t,a){return(this._listeners[r]||(this._listeners[r]=[])).push({fn:t,ctx:a||this}),this},n.prototype.off=function(r,t){if(r===void 0)this._listeners={};else if(t===void 0)this._listeners[r]=[];else for(var a=this._listeners[r],s=0;s<a.length;)a[s].fn===t?a.splice(s,1):++s;return this},n.prototype.emit=function(r){var t=this._listeners[r];if(t){for(var a=[],s=1;s<arguments.length;)a.push(arguments[s++]);for(s=0;s<t.length;)t[s].fn.apply(t[s++].ctx,a)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=n(n);function n(s){return typeof Float32Array<"u"?function(){var u=new Float32Array([-0]),d=new Uint8Array(u.buffer),c=d[3]===128;function g(S,C,R){u[0]=S,C[R]=d[0],C[R+1]=d[1],C[R+2]=d[2],C[R+3]=d[3]}function m(S,C,R){u[0]=S,C[R]=d[3],C[R+1]=d[2],C[R+2]=d[1],C[R+3]=d[0]}s.writeFloatLE=c?g:m,s.writeFloatBE=c?m:g;function _(S,C){return d[0]=S[C],d[1]=S[C+1],d[2]=S[C+2],d[3]=S[C+3],u[0]}function b(S,C){return d[3]=S[C],d[2]=S[C+1],d[1]=S[C+2],d[0]=S[C+3],u[0]}s.readFloatLE=c?_:b,s.readFloatBE=c?b:_}():function(){function u(c,g,m,_){var b=g<0?1:0;if(b&&(g=-g),g===0)c(1/g>0?0:2147483648,m,_);else if(isNaN(g))c(2143289344,m,_);else if(g>34028234663852886e22)c((b<<31|2139095040)>>>0,m,_);else if(g<11754943508222875e-54)c((b<<31|Math.round(g/1401298464324817e-60))>>>0,m,_);else{var S=Math.floor(Math.log(g)/Math.LN2),C=Math.round(g*Math.pow(2,-S)*8388608)&8388607;c((b<<31|S+127<<23|C)>>>0,m,_)}}s.writeFloatLE=u.bind(null,e),s.writeFloatBE=u.bind(null,r);function d(c,g,m){var _=c(g,m),b=(_>>31)*2+1,S=_>>>23&255,C=_&8388607;return S===255?C?NaN:b*(1/0):S===0?b*1401298464324817e-60*C:b*Math.pow(2,S-150)*(C+8388608)}s.readFloatLE=d.bind(null,t),s.readFloatBE=d.bind(null,a)}(),typeof Float64Array<"u"?function(){var u=new Float64Array([-0]),d=new Uint8Array(u.buffer),c=d[7]===128;function g(S,C,R){u[0]=S,C[R]=d[0],C[R+1]=d[1],C[R+2]=d[2],C[R+3]=d[3],C[R+4]=d[4],C[R+5]=d[5],C[R+6]=d[6],C[R+7]=d[7]}function m(S,C,R){u[0]=S,C[R]=d[7],C[R+1]=d[6],C[R+2]=d[5],C[R+3]=d[4],C[R+4]=d[3],C[R+5]=d[2],C[R+6]=d[1],C[R+7]=d[0]}s.writeDoubleLE=c?g:m,s.writeDoubleBE=c?m:g;function _(S,C){return d[0]=S[C],d[1]=S[C+1],d[2]=S[C+2],d[3]=S[C+3],d[4]=S[C+4],d[5]=S[C+5],d[6]=S[C+6],d[7]=S[C+7],u[0]}function b(S,C){return d[7]=S[C],d[6]=S[C+1],d[5]=S[C+2],d[4]=S[C+3],d[3]=S[C+4],d[2]=S[C+5],d[1]=S[C+6],d[0]=S[C+7],u[0]}s.readDoubleLE=c?_:b,s.readDoubleBE=c?b:_}():function(){function u(c,g,m,_,b,S){var C=_<0?1:0;if(C&&(_=-_),_===0)c(0,b,S+g),c(1/_>0?0:2147483648,b,S+m);else if(isNaN(_))c(0,b,S+g),c(2146959360,b,S+m);else if(_>17976931348623157e292)c(0,b,S+g),c((C<<31|2146435072)>>>0,b,S+m);else{var R;if(_<22250738585072014e-324)R=_/5e-324,c(R>>>0,b,S+g),c((C<<31|R/4294967296)>>>0,b,S+m);else{var w=Math.floor(Math.log(_)/Math.LN2);w===1024&&(w=1023),R=_*Math.pow(2,-w),c(R*4503599627370496>>>0,b,S+g),c((C<<31|w+1023<<20|R*1048576&1048575)>>>0,b,S+m)}}}s.writeDoubleLE=u.bind(null,e,0,4),s.writeDoubleBE=u.bind(null,r,4,0);function d(c,g,m,_,b){var S=c(_,b+g),C=c(_,b+m),R=(C>>31)*2+1,w=C>>>20&2047,k=4294967296*(C&1048575)+S;return w===2047?k?NaN:R*(1/0):w===0?R*5e-324*k:R*Math.pow(2,w-1075)*(k+4503599627370496)}s.readDoubleLE=d.bind(null,t,0,4),s.readDoubleBE=d.bind(null,a,4,0)}(),s}function e(s,u,d){u[d]=s&255,u[d+1]=s>>>8&255,u[d+2]=s>>>16&255,u[d+3]=s>>>24}function r(s,u,d){u[d]=s>>>24,u[d+1]=s>>>16&255,u[d+2]=s>>>8&255,u[d+3]=s&255}function t(s,u){return(s[u]|s[u+1]<<8|s[u+2]<<16|s[u+3]<<24)>>>0}function a(s,u){return(s[u]<<24|s[u+1]<<16|s[u+2]<<8|s[u+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}return inquire_1}var utf8$2={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(n){var e=n;e.length=function(t){for(var a=0,s=0,u=0;u<t.length;++u)s=t.charCodeAt(u),s<128?a+=1:s<2048?a+=2:(s&64512)===55296&&(t.charCodeAt(u+1)&64512)===56320?(++u,a+=4):a+=3;return a},e.read=function(t,a,s){var u=s-a;if(u<1)return"";for(var d=null,c=[],g=0,m;a<s;)m=t[a++],m<128?c[g++]=m:m>191&&m<224?c[g++]=(m&31)<<6|t[a++]&63:m>239&&m<365?(m=((m&7)<<18|(t[a++]&63)<<12|(t[a++]&63)<<6|t[a++]&63)-65536,c[g++]=55296+(m>>10),c[g++]=56320+(m&1023)):c[g++]=(m&15)<<12|(t[a++]&63)<<6|t[a++]&63,g>8191&&((d||(d=[])).push(String.fromCharCode.apply(String,c)),g=0);return d?(g&&d.push(String.fromCharCode.apply(String,c.slice(0,g))),d.join("")):String.fromCharCode.apply(String,c.slice(0,g))},e.write=function(t,a,s){for(var u=s,d,c,g=0;g<t.length;++g)d=t.charCodeAt(g),d<128?a[s++]=d:d<2048?(a[s++]=d>>6|192,a[s++]=d&63|128):(d&64512)===55296&&((c=t.charCodeAt(g+1))&64512)===56320?(d=65536+((d&1023)<<10)+(c&1023),++g,a[s++]=d>>18|240,a[s++]=d>>12&63|128,a[s++]=d>>6&63|128,a[s++]=d&63|128):(a[s++]=d>>12|224,a[s++]=d>>6&63|128,a[s++]=d&63|128);return s-u}}(utf8$2)),utf8$2}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=n;function n(e,r,t){var a=t||8192,s=a>>>1,u=null,d=a;return function(g){if(g<1||g>s)return e(g);d+g>a&&(u=e(a),d=0);var m=r.call(u,d,d+=g);return d&7&&(d=(d|7)+1),m}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var n=requireMinimal();function e(s,u){this.lo=s>>>0,this.hi=u>>>0}var r=e.zero=new e(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var t=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(u){if(u===0)return r;var d=u<0;d&&(u=-u);var c=u>>>0,g=(u-c)/4294967296>>>0;return d&&(g=~g>>>0,c=~c>>>0,++c>4294967295&&(c=0,++g>4294967295&&(g=0))),new e(c,g)},e.from=function(u){if(typeof u=="number")return e.fromNumber(u);if(n.isString(u))if(n.Long)u=n.Long.fromString(u);else return e.fromNumber(parseInt(u,10));return u.low||u.high?new e(u.low>>>0,u.high>>>0):r},e.prototype.toNumber=function(u){if(!u&&this.hi>>>31){var d=~this.lo+1>>>0,c=~this.hi>>>0;return d||(c=c+1>>>0),-(d+c*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(u){return n.Long?new n.Long(this.lo|0,this.hi|0,Boolean(u)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(u)}};var a=String.prototype.charCodeAt;return e.fromHash=function(u){return u===t?r:new e((a.call(u,0)|a.call(u,1)<<8|a.call(u,2)<<16|a.call(u,3)<<24)>>>0,(a.call(u,4)|a.call(u,5)<<8|a.call(u,6)<<16|a.call(u,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var u=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^u)>>>0,this.lo=(this.lo<<1^u)>>>0,this},e.prototype.zzDecode=function(){var u=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^u)>>>0,this.hi=(this.hi>>>1^u)>>>0,this},e.prototype.length=function(){var u=this.lo,d=(this.lo>>>28|this.hi<<4)>>>0,c=this.hi>>>24;return c===0?d===0?u<16384?u<128?1:2:u<2097152?3:4:d<16384?d<128?5:6:d<2097152?7:8:c<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(n){var e=n;e.asPromise=requireAspromise(),e.base64=requireBase64(),e.EventEmitter=requireEventemitter(),e.float=requireFloat(),e.inquire=requireInquire(),e.utf8=requireUtf8(),e.pool=requirePool(),e.LongBits=requireLongbits(),e.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},e.isString=function(s){return typeof s=="string"||s instanceof String},e.isObject=function(s){return s&&typeof s=="object"},e.isset=e.isSet=function(s,u){var d=s[u];return d!=null&&s.hasOwnProperty(u)?typeof d!="object"||(Array.isArray(d)?d.length:Object.keys(d).length)>0:!1},e.Buffer=function(){try{var a=e.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(s){return typeof s=="number"?e.Buffer?e._Buffer_allocUnsafe(s):new e.Array(s):e.Buffer?e._Buffer_from(s):typeof Uint8Array>"u"?s:new Uint8Array(s)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(s){return s?e.LongBits.from(s).toHash():e.LongBits.zeroHash},e.longFromHash=function(s,u){var d=e.LongBits.fromHash(s);return e.Long?e.Long.fromBits(d.lo,d.hi,u):d.toNumber(Boolean(u))};function r(a,s,u){for(var d=Object.keys(s),c=0;c<d.length;++c)(a[d[c]]===void 0||!u)&&(a[d[c]]=s[d[c]]);return a}e.merge=r,e.lcFirst=function(s){return s.charAt(0).toLowerCase()+s.substring(1)};function t(a){function s(u,d){if(!(this instanceof s))return new s(u,d);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),d&&r(this,d)}return s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,enumerable:!1,configurable:!0},name:{get(){return a},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),s}e.newError=t,e.ProtocolError=t("ProtocolError"),e.oneOfGetter=function(s){for(var u={},d=0;d<s.length;++d)u[s[d]]=1;return function(){for(var c=Object.keys(this),g=c.length-1;g>-1;--g)if(u[c[g]]===1&&this[c[g]]!==void 0&&this[c[g]]!==null)return c[g]}},e.oneOfSetter=function(s){return function(u){for(var d=0;d<s.length;++d)s[d]!==u&&delete this[s[d]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var a=e.Buffer;if(!a){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=a.from!==Uint8Array.from&&a.from||function(u,d){return new a(u,d)},e._Buffer_allocUnsafe=a.allocUnsafe||function(u){return new a(u)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(n,e,r){this.fn=n,this.len=e,this.next=void 0,this.val=r}function noop(){}function State(n){this.head=n.head,this.tail=n.tail,this.len=n.len,this.next=n.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function n(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function n(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function n(e,r,t){return this.tail=this.tail.next=new Op(e,r,t),this.len+=r,this};function writeByte(n,e,r){e[r]=n&255}function writeVarint32(n,e,r){for(;n>127;)e[r++]=n&127|128,n>>>=7;e[r]=n}function VarintOp(n,e){this.len=n,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function n(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function n(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function n(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(n,e,r){for(;n.hi;)e[r++]=n.lo&127|128,n.lo=(n.lo>>>7|n.hi<<25)>>>0,n.hi>>>=7;for(;n.lo>127;)e[r++]=n.lo&127|128,n.lo=n.lo>>>7;e[r++]=n.lo}Writer$1.prototype.uint64=function n(e){var r=LongBits$1.from(e);return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function n(e){var r=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,r.length(),r)};Writer$1.prototype.bool=function n(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(n,e,r){e[r]=n&255,e[r+1]=n>>>8&255,e[r+2]=n>>>16&255,e[r+3]=n>>>24}Writer$1.prototype.fixed32=function n(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function n(e){var r=LongBits$1.from(e);return this._push(writeFixed32,4,r.lo)._push(writeFixed32,4,r.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function n(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function n(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function n(e,r,t){r.set(e,t)}:function n(e,r,t){for(var a=0;a<e.length;++a)r[t+a]=e[a]};Writer$1.prototype.bytes=function n(e){var r=e.length>>>0;if(!r)return this._push(writeByte,1,0);if(util$4.isString(e)){var t=Writer$1.alloc(r=base64.length(e));base64.decode(e,t,0),e=t}return this.uint32(r)._push(writeBytes,r,e)};Writer$1.prototype.string=function n(e){var r=utf8$1.length(e);return r?this.uint32(r)._push(utf8$1.write,r,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function n(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function n(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function n(){var e=this.head,r=this.tail,t=this.len;return this.reset().uint32(t),t&&(this.tail.next=e.next,this.tail=r,this.len+=t),this};Writer$1.prototype.finish=function n(){for(var e=this.head.next,r=this.constructor.alloc(this.len),t=0;e;)e.fn(e.val,r,t),t+=e.len,e=e.next;return r};Writer$1._configure=function(n){BufferWriter$1=n,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,r,t){r.set(e,t)}:function(e,r,t){if(e.copy)e.copy(r,t,0,e.length);else for(var a=0;a<e.length;)r[t++]=e[a++]}};BufferWriter.prototype.bytes=function n(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(BufferWriter.writeBytesBuffer,r,e),this};function writeStringBuffer(n,e,r){n.length<40?util$3.utf8.write(n,e,r):e.utf8Write?e.utf8Write(n,r):e.write(n,r)}BufferWriter.prototype.string=function n(e){var r=util$3.Buffer.byteLength(e);return this.uint32(r),r&&this._push(writeStringBuffer,r,e),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(n,e){return RangeError("index out of range: "+n.pos+" + "+(e||1)+" > "+n.len)}function Reader$1(n){this.buf=n,this.pos=0,this.len=n.length}var create_array=typeof Uint8Array<"u"?function n(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function n(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create=function n(){return util$2.Buffer?function(r){return(Reader$1.create=function(a){return util$2.Buffer.isBuffer(a)?new BufferReader$1(a):create_array(a)})(r)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function n(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function n(){return this.uint32()|0};Reader$1.prototype.sint32=function n(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var n=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n;if(n.lo=(n.lo|(this.buf[this.pos]&127)<<28)>>>0,n.hi=(n.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return n;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n}return n.lo=(n.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,n}if(this.len-this.pos>4){for(;e<5;++e)if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function n(){return this.uint32()!==0};function readFixed32_end(n,e){return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function n(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function n(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function n(){var e=this.uint32(),r=this.pos,t=this.pos+e;if(t>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,t):r===t?new this.buf.constructor(0):this._slice.call(this.buf,r,t)};Reader$1.prototype.string=function n(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function n(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(n){switch(n){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(n=this.uint32()&7)!==4;)this.skipType(n);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+n+" at offset "+this.pos)}return this};Reader$1._configure=function(n){BufferReader$1=n,Reader$1.create=create(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(n){Reader.call(this,n)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function n(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(n,e,r){if(typeof n!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=n,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(r)}Service.prototype.rpcCall=function n(e,r,t,a,s){if(!a)throw TypeError("request must be specified");var u=this;if(!s)return util.asPromise(n,u,e,r,t,a);if(!u.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return u.rpcImpl(e,r[u.requestDelimited?"encodeDelimited":"encode"](a).finish(),function(c,g){if(c)return u.emit("error",c,e),s(c);if(g===null){u.end(!0);return}if(!(g instanceof t))try{g=t[u.responseDelimited?"decodeDelimited":"decode"](g)}catch(m){return u.emit("error",m,e),s(m)}return u.emit("data",g,e),s(null,g)})}catch(d){u.emit("error",d,e),setTimeout(function(){s(d)},0);return}};Service.prototype.end=function n(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(n){var e=n;e.Service=service})(rpc);var roots={};(function(n){var e=n;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=r;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}r()})(indexMinimal);(function(n){n.exports=indexMinimal})(minimal$1);const $Reader=minimal$1.exports.Reader,$Writer=minimal$1.exports.Writer,$util=minimal$1.exports.util,$root=minimal$1.exports.roots.default||(minimal$1.exports.roots.default={}),rov_action_api=$root.rov_action_api=(()=>{const n={};return n.PingAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.Time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.Time!=null&&Object.hasOwnProperty.call(t,"Time")&&a.uint32(8).int64(t.Time),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.PingAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.Time=t.int64();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Time!=null&&t.hasOwnProperty("Time")&&!$util.isInteger(t.Time)&&!(t.Time&&$util.isInteger(t.Time.low)&&$util.isInteger(t.Time.high))?"Time: integer|Long expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.PingAction)return t;let a=new $root.rov_action_api.PingAction;return t.Time!=null&&($util.Long?(a.Time=$util.Long.fromValue(t.Time)).unsigned=!1:typeof t.Time=="string"?a.Time=parseInt(t.Time,10):typeof t.Time=="number"?a.Time=t.Time:typeof t.Time=="object"&&(a.Time=new $util.LongBits(t.Time.low>>>0,t.Time.high>>>0).toNumber())),a},e.toObject=function(t,a){a||(a={});let s={};if(a.defaults)if($util.Long){let u=new $util.Long(0,0,!1);s.Time=a.longs===String?u.toString():a.longs===Number?u.toNumber():u}else s.Time=a.longs===String?"0":0;return t.Time!=null&&t.hasOwnProperty("Time")&&(typeof t.Time=="number"?s.Time=a.longs===String?String(t.Time):t.Time:s.Time=a.longs===String?$util.Long.prototype.toString.call(t.Time):a.longs===Number?new $util.LongBits(t.Time.low>>>0,t.Time.high>>>0).toNumber():t.Time),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PingAction"},e}(),n.PasswordAttemptAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.Password="",e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.Password!=null&&Object.hasOwnProperty.call(t,"Password")&&a.uint32(10).string(t.Password),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.PasswordAttemptAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.Password=t.string();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Password!=null&&t.hasOwnProperty("Password")&&!$util.isString(t.Password)?"Password: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.PasswordAttemptAction)return t;let a=new $root.rov_action_api.PasswordAttemptAction;return t.Password!=null&&(a.Password=String(t.Password)),a},e.toObject=function(t,a){a||(a={});let s={};return a.defaults&&(s.Password=""),t.Password!=null&&t.hasOwnProperty("Password")&&(s.Password=t.Password),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PasswordAttemptAction"},e}(),n.AuthTokenAttemptAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.Token="",e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.Token!=null&&Object.hasOwnProperty.call(t,"Token")&&a.uint32(10).string(t.Token),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.AuthTokenAttemptAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.Token=t.string();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Token!=null&&t.hasOwnProperty("Token")&&!$util.isString(t.Token)?"Token: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.AuthTokenAttemptAction)return t;let a=new $root.rov_action_api.AuthTokenAttemptAction;return t.Token!=null&&(a.Token=String(t.Token)),a},e.toObject=function(t,a){a||(a={});let s={};return a.defaults&&(s.Token=""),t.Token!=null&&t.hasOwnProperty("Token")&&(s.Token=t.Token),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.AuthTokenAttemptAction"},e}(),n.TakeControlAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.TakeControlAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.TakeControlAction?t:new $root.rov_action_api.TakeControlAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.TakeControlAction"},e}(),n.MoveAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.VelocityX=0,e.prototype.VelocityY=0,e.prototype.VelocityZ=0,e.prototype.AngularVelocityYaw=0,e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.VelocityX!=null&&Object.hasOwnProperty.call(t,"VelocityX")&&a.uint32(13).float(t.VelocityX),t.VelocityY!=null&&Object.hasOwnProperty.call(t,"VelocityY")&&a.uint32(21).float(t.VelocityY),t.VelocityZ!=null&&Object.hasOwnProperty.call(t,"VelocityZ")&&a.uint32(29).float(t.VelocityZ),t.AngularVelocityYaw!=null&&Object.hasOwnProperty.call(t,"AngularVelocityYaw")&&a.uint32(37).float(t.AngularVelocityYaw),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.MoveAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.VelocityX=t.float();break}case 2:{u.VelocityY=t.float();break}case 3:{u.VelocityZ=t.float();break}case 4:{u.AngularVelocityYaw=t.float();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.VelocityX!=null&&t.hasOwnProperty("VelocityX")&&typeof t.VelocityX!="number"?"VelocityX: number expected":t.VelocityY!=null&&t.hasOwnProperty("VelocityY")&&typeof t.VelocityY!="number"?"VelocityY: number expected":t.VelocityZ!=null&&t.hasOwnProperty("VelocityZ")&&typeof t.VelocityZ!="number"?"VelocityZ: number expected":t.AngularVelocityYaw!=null&&t.hasOwnProperty("AngularVelocityYaw")&&typeof t.AngularVelocityYaw!="number"?"AngularVelocityYaw: number expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.MoveAction)return t;let a=new $root.rov_action_api.MoveAction;return t.VelocityX!=null&&(a.VelocityX=Number(t.VelocityX)),t.VelocityY!=null&&(a.VelocityY=Number(t.VelocityY)),t.VelocityZ!=null&&(a.VelocityZ=Number(t.VelocityZ)),t.AngularVelocityYaw!=null&&(a.AngularVelocityYaw=Number(t.AngularVelocityYaw)),a},e.toObject=function(t,a){a||(a={});let s={};return a.defaults&&(s.VelocityX=0,s.VelocityY=0,s.VelocityZ=0,s.AngularVelocityYaw=0),t.VelocityX!=null&&t.hasOwnProperty("VelocityX")&&(s.VelocityX=a.json&&!isFinite(t.VelocityX)?String(t.VelocityX):t.VelocityX),t.VelocityY!=null&&t.hasOwnProperty("VelocityY")&&(s.VelocityY=a.json&&!isFinite(t.VelocityY)?String(t.VelocityY):t.VelocityY),t.VelocityZ!=null&&t.hasOwnProperty("VelocityZ")&&(s.VelocityZ=a.json&&!isFinite(t.VelocityZ)?String(t.VelocityZ):t.VelocityZ),t.AngularVelocityYaw!=null&&t.hasOwnProperty("AngularVelocityYaw")&&(s.AngularVelocityYaw=a.json&&!isFinite(t.AngularVelocityYaw)?String(t.AngularVelocityYaw):t.AngularVelocityYaw),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.MoveAction"},e}(),n.BeginVideoStreamAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.BeginVideoStreamAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.BeginVideoStreamAction?t:new $root.rov_action_api.BeginVideoStreamAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.BeginVideoStreamAction"},e}(),n.TakePhotoAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.TakePhotoAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.TakePhotoAction?t:new $root.rov_action_api.TakePhotoAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.TakePhotoAction"},e}(),n.StartVideoRecAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.StartVideoRecAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.StartVideoRecAction?t:new $root.rov_action_api.StartVideoRecAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.StartVideoRecAction"},e}(),n.StopVideoRecAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.StopVideoRecAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.StopVideoRecAction?t:new $root.rov_action_api.StopVideoRecAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.StopVideoRecAction"},e}(),n.ToogleLightsAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.ToogleLightsAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.ToogleLightsAction?t:new $root.rov_action_api.ToogleLightsAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ToogleLightsAction"},e}(),n.ShutdownRovAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.ShutdownRovAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.ShutdownRovAction?t:new $root.rov_action_api.ShutdownRovAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ShutdownRovAction"},e}(),n.RebootRovAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.RebootRovAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.RebootRovAction?t:new $root.rov_action_api.RebootRovAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.RebootRovAction"},e}(),n.EnableWifiAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.EnableWifiAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.EnableWifiAction?t:new $root.rov_action_api.EnableWifiAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.EnableWifiAction"},e}(),n.DisableWifiAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.DisableWifiAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.DisableWifiAction?t:new $root.rov_action_api.DisableWifiAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.DisableWifiAction"},e}(),n.RovStatusReportAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.RovStatusReportAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.RovStatusReportAction?t:new $root.rov_action_api.RovStatusReportAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.RovStatusReportAction"},e}(),n.RestartRovServicesAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.RestartRovServicesAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.RestartRovServicesAction?t:new $root.rov_action_api.RestartRovServicesAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.RestartRovServicesAction"},e}(),n.RovLogsAction=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.RovLogsAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.RovLogsAction?t:new $root.rov_action_api.RovLogsAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.RovLogsAction"},e}(),n.RovAction=function(){function e(t){if(t)for(let a=Object.keys(t),s=0;s<a.length;++s)t[a[s]]!=null&&(this[a[s]]=t[a[s]])}e.prototype.RovExchangeId=0,e.prototype.Ping=null,e.prototype.PasswordAttempt=null,e.prototype.AuthTokenAttempt=null,e.prototype.TakeControl=null,e.prototype.Move=null,e.prototype.BeginVideoStream=null,e.prototype.TakePhoto=null,e.prototype.StartVideoRec=null,e.prototype.StopVideoRec=null,e.prototype.ToogleLights=null,e.prototype.ShutdownRov=null,e.prototype.RebootRov=null,e.prototype.EnableWifi=null,e.prototype.DisableWifi=null,e.prototype.RovStatusReport=null,e.prototype.RestartRovServices=null,e.prototype.RovLogs=null;let r;return Object.defineProperty(e.prototype,"Body",{get:$util.oneOfGetter(r=["Ping","PasswordAttempt","AuthTokenAttempt","TakeControl","Move","BeginVideoStream","TakePhoto","StartVideoRec","StopVideoRec","ToogleLights","ShutdownRov","RebootRov","EnableWifi","DisableWifi","RovStatusReport","RestartRovServices","RovLogs"]),set:$util.oneOfSetter(r)}),e.create=function(a){return new e(a)},e.encode=function(a,s){return s||(s=$Writer.create()),a.RovExchangeId!=null&&Object.hasOwnProperty.call(a,"RovExchangeId")&&s.uint32(16).int32(a.RovExchangeId),a.Ping!=null&&Object.hasOwnProperty.call(a,"Ping")&&$root.rov_action_api.PingAction.encode(a.Ping,s.uint32(26).fork()).ldelim(),a.PasswordAttempt!=null&&Object.hasOwnProperty.call(a,"PasswordAttempt")&&$root.rov_action_api.PasswordAttemptAction.encode(a.PasswordAttempt,s.uint32(34).fork()).ldelim(),a.AuthTokenAttempt!=null&&Object.hasOwnProperty.call(a,"AuthTokenAttempt")&&$root.rov_action_api.AuthTokenAttemptAction.encode(a.AuthTokenAttempt,s.uint32(42).fork()).ldelim(),a.TakeControl!=null&&Object.hasOwnProperty.call(a,"TakeControl")&&$root.rov_action_api.TakeControlAction.encode(a.TakeControl,s.uint32(50).fork()).ldelim(),a.Move!=null&&Object.hasOwnProperty.call(a,"Move")&&$root.rov_action_api.MoveAction.encode(a.Move,s.uint32(58).fork()).ldelim(),a.BeginVideoStream!=null&&Object.hasOwnProperty.call(a,"BeginVideoStream")&&$root.rov_action_api.BeginVideoStreamAction.encode(a.BeginVideoStream,s.uint32(66).fork()).ldelim(),a.TakePhoto!=null&&Object.hasOwnProperty.call(a,"TakePhoto")&&$root.rov_action_api.TakePhotoAction.encode(a.TakePhoto,s.uint32(74).fork()).ldelim(),a.StartVideoRec!=null&&Object.hasOwnProperty.call(a,"StartVideoRec")&&$root.rov_action_api.StartVideoRecAction.encode(a.StartVideoRec,s.uint32(82).fork()).ldelim(),a.StopVideoRec!=null&&Object.hasOwnProperty.call(a,"StopVideoRec")&&$root.rov_action_api.StopVideoRecAction.encode(a.StopVideoRec,s.uint32(90).fork()).ldelim(),a.ToogleLights!=null&&Object.hasOwnProperty.call(a,"ToogleLights")&&$root.rov_action_api.ToogleLightsAction.encode(a.ToogleLights,s.uint32(98).fork()).ldelim(),a.ShutdownRov!=null&&Object.hasOwnProperty.call(a,"ShutdownRov")&&$root.rov_action_api.ShutdownRovAction.encode(a.ShutdownRov,s.uint32(106).fork()).ldelim(),a.RebootRov!=null&&Object.hasOwnProperty.call(a,"RebootRov")&&$root.rov_action_api.RebootRovAction.encode(a.RebootRov,s.uint32(114).fork()).ldelim(),a.EnableWifi!=null&&Object.hasOwnProperty.call(a,"EnableWifi")&&$root.rov_action_api.EnableWifiAction.encode(a.EnableWifi,s.uint32(122).fork()).ldelim(),a.DisableWifi!=null&&Object.hasOwnProperty.call(a,"DisableWifi")&&$root.rov_action_api.DisableWifiAction.encode(a.DisableWifi,s.uint32(130).fork()).ldelim(),a.RovStatusReport!=null&&Object.hasOwnProperty.call(a,"RovStatusReport")&&$root.rov_action_api.RovStatusReportAction.encode(a.RovStatusReport,s.uint32(138).fork()).ldelim(),a.RestartRovServices!=null&&Object.hasOwnProperty.call(a,"RestartRovServices")&&$root.rov_action_api.RestartRovServicesAction.encode(a.RestartRovServices,s.uint32(146).fork()).ldelim(),a.RovLogs!=null&&Object.hasOwnProperty.call(a,"RovLogs")&&$root.rov_action_api.RovLogsAction.encode(a.RovLogs,s.uint32(154).fork()).ldelim(),s},e.encodeDelimited=function(a,s){return this.encode(a,s).ldelim()},e.decode=function(a,s){a instanceof $Reader||(a=$Reader.create(a));let u=s===void 0?a.len:a.pos+s,d=new $root.rov_action_api.RovAction;for(;a.pos<u;){let c=a.uint32();switch(c>>>3){case 2:{d.RovExchangeId=a.int32();break}case 3:{d.Ping=$root.rov_action_api.PingAction.decode(a,a.uint32());break}case 4:{d.PasswordAttempt=$root.rov_action_api.PasswordAttemptAction.decode(a,a.uint32());break}case 5:{d.AuthTokenAttempt=$root.rov_action_api.AuthTokenAttemptAction.decode(a,a.uint32());break}case 6:{d.TakeControl=$root.rov_action_api.TakeControlAction.decode(a,a.uint32());break}case 7:{d.Move=$root.rov_action_api.MoveAction.decode(a,a.uint32());break}case 8:{d.BeginVideoStream=$root.rov_action_api.BeginVideoStreamAction.decode(a,a.uint32());break}case 9:{d.TakePhoto=$root.rov_action_api.TakePhotoAction.decode(a,a.uint32());break}case 10:{d.StartVideoRec=$root.rov_action_api.StartVideoRecAction.decode(a,a.uint32());break}case 11:{d.StopVideoRec=$root.rov_action_api.StopVideoRecAction.decode(a,a.uint32());break}case 12:{d.ToogleLights=$root.rov_action_api.ToogleLightsAction.decode(a,a.uint32());break}case 13:{d.ShutdownRov=$root.rov_action_api.ShutdownRovAction.decode(a,a.uint32());break}case 14:{d.RebootRov=$root.rov_action_api.RebootRovAction.decode(a,a.uint32());break}case 15:{d.EnableWifi=$root.rov_action_api.EnableWifiAction.decode(a,a.uint32());break}case 16:{d.DisableWifi=$root.rov_action_api.DisableWifiAction.decode(a,a.uint32());break}case 17:{d.RovStatusReport=$root.rov_action_api.RovStatusReportAction.decode(a,a.uint32());break}case 18:{d.RestartRovServices=$root.rov_action_api.RestartRovServicesAction.decode(a,a.uint32());break}case 19:{d.RovLogs=$root.rov_action_api.RovLogsAction.decode(a,a.uint32());break}default:a.skipType(c&7);break}}return d},e.decodeDelimited=function(a){return a instanceof $Reader||(a=new $Reader(a)),this.decode(a,a.uint32())},e.verify=function(a){if(typeof a!="object"||a===null)return"object expected";let s={};if(a.RovExchangeId!=null&&a.hasOwnProperty("RovExchangeId")&&!$util.isInteger(a.RovExchangeId))return"RovExchangeId: integer expected";if(a.Ping!=null&&a.hasOwnProperty("Ping")){s.Body=1;{let u=$root.rov_action_api.PingAction.verify(a.Ping);if(u)return"Ping."+u}}if(a.PasswordAttempt!=null&&a.hasOwnProperty("PasswordAttempt")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.PasswordAttemptAction.verify(a.PasswordAttempt);if(u)return"PasswordAttempt."+u}}if(a.AuthTokenAttempt!=null&&a.hasOwnProperty("AuthTokenAttempt")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.AuthTokenAttemptAction.verify(a.AuthTokenAttempt);if(u)return"AuthTokenAttempt."+u}}if(a.TakeControl!=null&&a.hasOwnProperty("TakeControl")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.TakeControlAction.verify(a.TakeControl);if(u)return"TakeControl."+u}}if(a.Move!=null&&a.hasOwnProperty("Move")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.MoveAction.verify(a.Move);if(u)return"Move."+u}}if(a.BeginVideoStream!=null&&a.hasOwnProperty("BeginVideoStream")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.BeginVideoStreamAction.verify(a.BeginVideoStream);if(u)return"BeginVideoStream."+u}}if(a.TakePhoto!=null&&a.hasOwnProperty("TakePhoto")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.TakePhotoAction.verify(a.TakePhoto);if(u)return"TakePhoto."+u}}if(a.StartVideoRec!=null&&a.hasOwnProperty("StartVideoRec")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.StartVideoRecAction.verify(a.StartVideoRec);if(u)return"StartVideoRec."+u}}if(a.StopVideoRec!=null&&a.hasOwnProperty("StopVideoRec")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.StopVideoRecAction.verify(a.StopVideoRec);if(u)return"StopVideoRec."+u}}if(a.ToogleLights!=null&&a.hasOwnProperty("ToogleLights")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.ToogleLightsAction.verify(a.ToogleLights);if(u)return"ToogleLights."+u}}if(a.ShutdownRov!=null&&a.hasOwnProperty("ShutdownRov")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.ShutdownRovAction.verify(a.ShutdownRov);if(u)return"ShutdownRov."+u}}if(a.RebootRov!=null&&a.hasOwnProperty("RebootRov")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.RebootRovAction.verify(a.RebootRov);if(u)return"RebootRov."+u}}if(a.EnableWifi!=null&&a.hasOwnProperty("EnableWifi")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.EnableWifiAction.verify(a.EnableWifi);if(u)return"EnableWifi."+u}}if(a.DisableWifi!=null&&a.hasOwnProperty("DisableWifi")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.DisableWifiAction.verify(a.DisableWifi);if(u)return"DisableWifi."+u}}if(a.RovStatusReport!=null&&a.hasOwnProperty("RovStatusReport")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.RovStatusReportAction.verify(a.RovStatusReport);if(u)return"RovStatusReport."+u}}if(a.RestartRovServices!=null&&a.hasOwnProperty("RestartRovServices")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.RestartRovServicesAction.verify(a.RestartRovServices);if(u)return"RestartRovServices."+u}}if(a.RovLogs!=null&&a.hasOwnProperty("RovLogs")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.RovLogsAction.verify(a.RovLogs);if(u)return"RovLogs."+u}}return null},e.fromObject=function(a){if(a instanceof $root.rov_action_api.RovAction)return a;let s=new $root.rov_action_api.RovAction;if(a.RovExchangeId!=null&&(s.RovExchangeId=a.RovExchangeId|0),a.Ping!=null){if(typeof a.Ping!="object")throw TypeError(".rov_action_api.RovAction.Ping: object expected");s.Ping=$root.rov_action_api.PingAction.fromObject(a.Ping)}if(a.PasswordAttempt!=null){if(typeof a.PasswordAttempt!="object")throw TypeError(".rov_action_api.RovAction.PasswordAttempt: object expected");s.PasswordAttempt=$root.rov_action_api.PasswordAttemptAction.fromObject(a.PasswordAttempt)}if(a.AuthTokenAttempt!=null){if(typeof a.AuthTokenAttempt!="object")throw TypeError(".rov_action_api.RovAction.AuthTokenAttempt: object expected");s.AuthTokenAttempt=$root.rov_action_api.AuthTokenAttemptAction.fromObject(a.AuthTokenAttempt)}if(a.TakeControl!=null){if(typeof a.TakeControl!="object")throw TypeError(".rov_action_api.RovAction.TakeControl: object expected");s.TakeControl=$root.rov_action_api.TakeControlAction.fromObject(a.TakeControl)}if(a.Move!=null){if(typeof a.Move!="object")throw TypeError(".rov_action_api.RovAction.Move: object expected");s.Move=$root.rov_action_api.MoveAction.fromObject(a.Move)}if(a.BeginVideoStream!=null){if(typeof a.BeginVideoStream!="object")throw TypeError(".rov_action_api.RovAction.BeginVideoStream: object expected");s.BeginVideoStream=$root.rov_action_api.BeginVideoStreamAction.fromObject(a.BeginVideoStream)}if(a.TakePhoto!=null){if(typeof a.TakePhoto!="object")throw TypeError(".rov_action_api.RovAction.TakePhoto: object expected");s.TakePhoto=$root.rov_action_api.TakePhotoAction.fromObject(a.TakePhoto)}if(a.StartVideoRec!=null){if(typeof a.StartVideoRec!="object")throw TypeError(".rov_action_api.RovAction.StartVideoRec: object expected");s.StartVideoRec=$root.rov_action_api.StartVideoRecAction.fromObject(a.StartVideoRec)}if(a.StopVideoRec!=null){if(typeof a.StopVideoRec!="object")throw TypeError(".rov_action_api.RovAction.StopVideoRec: object expected");s.StopVideoRec=$root.rov_action_api.StopVideoRecAction.fromObject(a.StopVideoRec)}if(a.ToogleLights!=null){if(typeof a.ToogleLights!="object")throw TypeError(".rov_action_api.RovAction.ToogleLights: object expected");s.ToogleLights=$root.rov_action_api.ToogleLightsAction.fromObject(a.ToogleLights)}if(a.ShutdownRov!=null){if(typeof a.ShutdownRov!="object")throw TypeError(".rov_action_api.RovAction.ShutdownRov: object expected");s.ShutdownRov=$root.rov_action_api.ShutdownRovAction.fromObject(a.ShutdownRov)}if(a.RebootRov!=null){if(typeof a.RebootRov!="object")throw TypeError(".rov_action_api.RovAction.RebootRov: object expected");s.RebootRov=$root.rov_action_api.RebootRovAction.fromObject(a.RebootRov)}if(a.EnableWifi!=null){if(typeof a.EnableWifi!="object")throw TypeError(".rov_action_api.RovAction.EnableWifi: object expected");s.EnableWifi=$root.rov_action_api.EnableWifiAction.fromObject(a.EnableWifi)}if(a.DisableWifi!=null){if(typeof a.DisableWifi!="object")throw TypeError(".rov_action_api.RovAction.DisableWifi: object expected");s.DisableWifi=$root.rov_action_api.DisableWifiAction.fromObject(a.DisableWifi)}if(a.RovStatusReport!=null){if(typeof a.RovStatusReport!="object")throw TypeError(".rov_action_api.RovAction.RovStatusReport: object expected");s.RovStatusReport=$root.rov_action_api.RovStatusReportAction.fromObject(a.RovStatusReport)}if(a.RestartRovServices!=null){if(typeof a.RestartRovServices!="object")throw TypeError(".rov_action_api.RovAction.RestartRovServices: object expected");s.RestartRovServices=$root.rov_action_api.RestartRovServicesAction.fromObject(a.RestartRovServices)}if(a.RovLogs!=null){if(typeof a.RovLogs!="object")throw TypeError(".rov_action_api.RovAction.RovLogs: object expected");s.RovLogs=$root.rov_action_api.RovLogsAction.fromObject(a.RovLogs)}return s},e.toObject=function(a,s){s||(s={});let u={};return s.defaults&&(u.RovExchangeId=0),a.RovExchangeId!=null&&a.hasOwnProperty("RovExchangeId")&&(u.RovExchangeId=a.RovExchangeId),a.Ping!=null&&a.hasOwnProperty("Ping")&&(u.Ping=$root.rov_action_api.PingAction.toObject(a.Ping,s),s.oneofs&&(u.Body="Ping")),a.PasswordAttempt!=null&&a.hasOwnProperty("PasswordAttempt")&&(u.PasswordAttempt=$root.rov_action_api.PasswordAttemptAction.toObject(a.PasswordAttempt,s),s.oneofs&&(u.Body="PasswordAttempt")),a.AuthTokenAttempt!=null&&a.hasOwnProperty("AuthTokenAttempt")&&(u.AuthTokenAttempt=$root.rov_action_api.AuthTokenAttemptAction.toObject(a.AuthTokenAttempt,s),s.oneofs&&(u.Body="AuthTokenAttempt")),a.TakeControl!=null&&a.hasOwnProperty("TakeControl")&&(u.TakeControl=$root.rov_action_api.TakeControlAction.toObject(a.TakeControl,s),s.oneofs&&(u.Body="TakeControl")),a.Move!=null&&a.hasOwnProperty("Move")&&(u.Move=$root.rov_action_api.MoveAction.toObject(a.Move,s),s.oneofs&&(u.Body="Move")),a.BeginVideoStream!=null&&a.hasOwnProperty("BeginVideoStream")&&(u.BeginVideoStream=$root.rov_action_api.BeginVideoStreamAction.toObject(a.BeginVideoStream,s),s.oneofs&&(u.Body="BeginVideoStream")),a.TakePhoto!=null&&a.hasOwnProperty("TakePhoto")&&(u.TakePhoto=$root.rov_action_api.TakePhotoAction.toObject(a.TakePhoto,s),s.oneofs&&(u.Body="TakePhoto")),a.StartVideoRec!=null&&a.hasOwnProperty("StartVideoRec")&&(u.StartVideoRec=$root.rov_action_api.StartVideoRecAction.toObject(a.StartVideoRec,s),s.oneofs&&(u.Body="StartVideoRec")),a.StopVideoRec!=null&&a.hasOwnProperty("StopVideoRec")&&(u.StopVideoRec=$root.rov_action_api.StopVideoRecAction.toObject(a.StopVideoRec,s),s.oneofs&&(u.Body="StopVideoRec")),a.ToogleLights!=null&&a.hasOwnProperty("ToogleLights")&&(u.ToogleLights=$root.rov_action_api.ToogleLightsAction.toObject(a.ToogleLights,s),s.oneofs&&(u.Body="ToogleLights")),a.ShutdownRov!=null&&a.hasOwnProperty("ShutdownRov")&&(u.ShutdownRov=$root.rov_action_api.ShutdownRovAction.toObject(a.ShutdownRov,s),s.oneofs&&(u.Body="ShutdownRov")),a.RebootRov!=null&&a.hasOwnProperty("RebootRov")&&(u.RebootRov=$root.rov_action_api.RebootRovAction.toObject(a.RebootRov,s),s.oneofs&&(u.Body="RebootRov")),a.EnableWifi!=null&&a.hasOwnProperty("EnableWifi")&&(u.EnableWifi=$root.rov_action_api.EnableWifiAction.toObject(a.EnableWifi,s),s.oneofs&&(u.Body="EnableWifi")),a.DisableWifi!=null&&a.hasOwnProperty("DisableWifi")&&(u.DisableWifi=$root.rov_action_api.DisableWifiAction.toObject(a.DisableWifi,s),s.oneofs&&(u.Body="DisableWifi")),a.RovStatusReport!=null&&a.hasOwnProperty("RovStatusReport")&&(u.RovStatusReport=$root.rov_action_api.RovStatusReportAction.toObject(a.RovStatusReport,s),s.oneofs&&(u.Body="RovStatusReport")),a.RestartRovServices!=null&&a.hasOwnProperty("RestartRovServices")&&(u.RestartRovServices=$root.rov_action_api.RestartRovServicesAction.toObject(a.RestartRovServices,s),s.oneofs&&(u.Body="RestartRovServices")),a.RovLogs!=null&&a.hasOwnProperty("RovLogs")&&(u.RovLogs=$root.rov_action_api.RovLogsAction.toObject(a.RovLogs,s),s.oneofs&&(u.Body="RovLogs")),u},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/rov_action_api.RovAction"},e}(),n.RovSensorTypes=function(){const e={},r=Object.create(e);return r[e[0]="depth_meters"]=0,r[e[1]="water_temp_celsius"]=1,r[e[2]="pressure_mbar"]=2,r[e[3]="yaw_degrees"]=3,r[e[4]="pitch_degrees"]=4,r[e[5]="roll_degrees"]=5,r[e[6]="x_acceleration_m_s2"]=6,r[e[7]="y_acceleration_m_s2"]=7,r[e[8]="z_acceleration_m_s2"]=8,r[e[9]="battery_voltage"]=9,r[e[10]="battery_current"]=10,r}(),n.DoneResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.DoneResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.DoneResponse?t:new $root.rov_action_api.DoneResponse},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.DoneResponse"},e}(),n.ErrorResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.Message="",e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.Message!=null&&Object.hasOwnProperty.call(t,"Message")&&a.uint32(10).string(t.Message),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.ErrorResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.Message=t.string();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Message!=null&&t.hasOwnProperty("Message")&&!$util.isString(t.Message)?"Message: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.ErrorResponse)return t;let a=new $root.rov_action_api.ErrorResponse;return t.Message!=null&&(a.Message=String(t.Message)),a},e.toObject=function(t,a){a||(a={});let s={};return a.defaults&&(s.Message=""),t.Message!=null&&t.hasOwnProperty("Message")&&(s.Message=t.Message),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ErrorResponse"},e}(),n.ContinuedOutputResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.Message="",e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.Message!=null&&Object.hasOwnProperty.call(t,"Message")&&a.uint32(10).string(t.Message),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.ContinuedOutputResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.Message=t.string();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Message!=null&&t.hasOwnProperty("Message")&&!$util.isString(t.Message)?"Message: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.ContinuedOutputResponse)return t;let a=new $root.rov_action_api.ContinuedOutputResponse;return t.Message!=null&&(a.Message=String(t.Message)),a},e.toObject=function(t,a){a||(a={});let s={};return a.defaults&&(s.Message=""),t.Message!=null&&t.hasOwnProperty("Message")&&(s.Message=t.Message),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ContinuedOutputResponse"},e}(),n.PongResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.Time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.Time!=null&&Object.hasOwnProperty.call(t,"Time")&&a.uint32(8).int64(t.Time),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.PongResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.Time=t.int64();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Time!=null&&t.hasOwnProperty("Time")&&!$util.isInteger(t.Time)&&!(t.Time&&$util.isInteger(t.Time.low)&&$util.isInteger(t.Time.high))?"Time: integer|Long expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.PongResponse)return t;let a=new $root.rov_action_api.PongResponse;return t.Time!=null&&($util.Long?(a.Time=$util.Long.fromValue(t.Time)).unsigned=!1:typeof t.Time=="string"?a.Time=parseInt(t.Time,10):typeof t.Time=="number"?a.Time=t.Time:typeof t.Time=="object"&&(a.Time=new $util.LongBits(t.Time.low>>>0,t.Time.high>>>0).toNumber())),a},e.toObject=function(t,a){a||(a={});let s={};if(a.defaults)if($util.Long){let u=new $util.Long(0,0,!1);s.Time=a.longs===String?u.toString():a.longs===Number?u.toNumber():u}else s.Time=a.longs===String?"0":0;return t.Time!=null&&t.hasOwnProperty("Time")&&(typeof t.Time=="number"?s.Time=a.longs===String?String(t.Time):t.Time:s.Time=a.longs===String?$util.Long.prototype.toString.call(t.Time):a.longs===Number?new $util.LongBits(t.Time.low>>>0,t.Time.high>>>0).toNumber():t.Time),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PongResponse"},e}(),n.SensorUpdate=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.SensorType="",e.prototype.Value="",e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.SensorType!=null&&Object.hasOwnProperty.call(t,"SensorType")&&a.uint32(10).string(t.SensorType),t.Value!=null&&Object.hasOwnProperty.call(t,"Value")&&a.uint32(18).string(t.Value),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.SensorUpdate;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.SensorType=t.string();break}case 2:{u.Value=t.string();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.SensorType!=null&&t.hasOwnProperty("SensorType")&&!$util.isString(t.SensorType)?"SensorType: string expected":t.Value!=null&&t.hasOwnProperty("Value")&&!$util.isString(t.Value)?"Value: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.SensorUpdate)return t;let a=new $root.rov_action_api.SensorUpdate;return t.SensorType!=null&&(a.SensorType=String(t.SensorType)),t.Value!=null&&(a.Value=String(t.Value)),a},e.toObject=function(t,a){a||(a={});let s={};return a.defaults&&(s.SensorType="",s.Value=""),t.SensorType!=null&&t.hasOwnProperty("SensorType")&&(s.SensorType=t.SensorType),t.Value!=null&&t.hasOwnProperty("Value")&&(s.Value=t.Value),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.SensorUpdate"},e}(),n.SensorUpdatesResponse=function(){function e(r){if(this.SensorUpdates=[],r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.SensorUpdates=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(t,a){if(a||(a=$Writer.create()),t.SensorUpdates!=null&&t.SensorUpdates.length)for(let s=0;s<t.SensorUpdates.length;++s)$root.rov_action_api.SensorUpdate.encode(t.SensorUpdates[s],a.uint32(10).fork()).ldelim();return a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.SensorUpdatesResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.SensorUpdates&&u.SensorUpdates.length||(u.SensorUpdates=[]),u.SensorUpdates.push($root.rov_action_api.SensorUpdate.decode(t,t.uint32()));break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){if(typeof t!="object"||t===null)return"object expected";if(t.SensorUpdates!=null&&t.hasOwnProperty("SensorUpdates")){if(!Array.isArray(t.SensorUpdates))return"SensorUpdates: array expected";for(let a=0;a<t.SensorUpdates.length;++a){let s=$root.rov_action_api.SensorUpdate.verify(t.SensorUpdates[a]);if(s)return"SensorUpdates."+s}}return null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.SensorUpdatesResponse)return t;let a=new $root.rov_action_api.SensorUpdatesResponse;if(t.SensorUpdates){if(!Array.isArray(t.SensorUpdates))throw TypeError(".rov_action_api.SensorUpdatesResponse.SensorUpdates: array expected");a.SensorUpdates=[];for(let s=0;s<t.SensorUpdates.length;++s){if(typeof t.SensorUpdates[s]!="object")throw TypeError(".rov_action_api.SensorUpdatesResponse.SensorUpdates: object expected");a.SensorUpdates[s]=$root.rov_action_api.SensorUpdate.fromObject(t.SensorUpdates[s])}}return a},e.toObject=function(t,a){a||(a={});let s={};if((a.arrays||a.defaults)&&(s.SensorUpdates=[]),t.SensorUpdates&&t.SensorUpdates.length){s.SensorUpdates=[];for(let u=0;u<t.SensorUpdates.length;++u)s.SensorUpdates[u]=$root.rov_action_api.SensorUpdate.toObject(t.SensorUpdates[u],a)}return s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.SensorUpdatesResponse"},e}(),n.PasswordRequiredResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.RovId="",e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.RovId!=null&&Object.hasOwnProperty.call(t,"RovId")&&a.uint32(10).string(t.RovId),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.PasswordRequiredResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.RovId=t.string();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.RovId!=null&&t.hasOwnProperty("RovId")&&!$util.isString(t.RovId)?"RovId: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.PasswordRequiredResponse)return t;let a=new $root.rov_action_api.PasswordRequiredResponse;return t.RovId!=null&&(a.RovId=String(t.RovId)),a},e.toObject=function(t,a){a||(a={});let s={};return a.defaults&&(s.RovId=""),t.RovId!=null&&t.hasOwnProperty("RovId")&&(s.RovId=t.RovId),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PasswordRequiredResponse"},e}(),n.PasswordAcceptedResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.AuthToken="",e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.AuthToken!=null&&Object.hasOwnProperty.call(t,"AuthToken")&&a.uint32(10).string(t.AuthToken),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.PasswordAcceptedResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.AuthToken=t.string();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.AuthToken!=null&&t.hasOwnProperty("AuthToken")&&!$util.isString(t.AuthToken)?"AuthToken: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.PasswordAcceptedResponse)return t;let a=new $root.rov_action_api.PasswordAcceptedResponse;return t.AuthToken!=null&&(a.AuthToken=String(t.AuthToken)),a},e.toObject=function(t,a){a||(a={});let s={};return a.defaults&&(s.AuthToken=""),t.AuthToken!=null&&t.hasOwnProperty("AuthToken")&&(s.AuthToken=t.AuthToken),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PasswordAcceptedResponse"},e}(),n.PasswordInvalidResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.PasswordInvalidResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.PasswordInvalidResponse?t:new $root.rov_action_api.PasswordInvalidResponse},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PasswordInvalidResponse"},e}(),n.TokenAcceptedResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.TokenAcceptedResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.TokenAcceptedResponse?t:new $root.rov_action_api.TokenAcceptedResponse},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.TokenAcceptedResponse"},e}(),n.TokenInvalidResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.TokenInvalidResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.TokenInvalidResponse?t:new $root.rov_action_api.TokenInvalidResponse},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.TokenInvalidResponse"},e}(),n.DriverChangedResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.DriverPeerId="",e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.DriverPeerId!=null&&Object.hasOwnProperty.call(t,"DriverPeerId")&&a.uint32(10).string(t.DriverPeerId),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.DriverChangedResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.DriverPeerId=t.string();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.DriverPeerId!=null&&t.hasOwnProperty("DriverPeerId")&&!$util.isString(t.DriverPeerId)?"DriverPeerId: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.DriverChangedResponse)return t;let a=new $root.rov_action_api.DriverChangedResponse;return t.DriverPeerId!=null&&(a.DriverPeerId=String(t.DriverPeerId)),a},e.toObject=function(t,a){a||(a={});let s={};return a.defaults&&(s.DriverPeerId=""),t.DriverPeerId!=null&&t.hasOwnProperty("DriverPeerId")&&(s.DriverPeerId=t.DriverPeerId),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.DriverChangedResponse"},e}(),n.ClientConnectedResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.ClientPeerId="",e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.ClientPeerId!=null&&Object.hasOwnProperty.call(t,"ClientPeerId")&&a.uint32(10).string(t.ClientPeerId),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.ClientConnectedResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.ClientPeerId=t.string();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.ClientPeerId!=null&&t.hasOwnProperty("ClientPeerId")&&!$util.isString(t.ClientPeerId)?"ClientPeerId: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.ClientConnectedResponse)return t;let a=new $root.rov_action_api.ClientConnectedResponse;return t.ClientPeerId!=null&&(a.ClientPeerId=String(t.ClientPeerId)),a},e.toObject=function(t,a){a||(a={});let s={};return a.defaults&&(s.ClientPeerId=""),t.ClientPeerId!=null&&t.hasOwnProperty("ClientPeerId")&&(s.ClientPeerId=t.ClientPeerId),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ClientConnectedResponse"},e}(),n.ClientDisconnectedResponse=function(){function e(r){if(r)for(let t=Object.keys(r),a=0;a<t.length;++a)r[t[a]]!=null&&(this[t[a]]=r[t[a]])}return e.prototype.ClientPeerId="",e.create=function(t){return new e(t)},e.encode=function(t,a){return a||(a=$Writer.create()),t.ClientPeerId!=null&&Object.hasOwnProperty.call(t,"ClientPeerId")&&a.uint32(10).string(t.ClientPeerId),a},e.encodeDelimited=function(t,a){return this.encode(t,a).ldelim()},e.decode=function(t,a){t instanceof $Reader||(t=$Reader.create(t));let s=a===void 0?t.len:t.pos+a,u=new $root.rov_action_api.ClientDisconnectedResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{u.ClientPeerId=t.string();break}default:t.skipType(d&7);break}}return u},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.ClientPeerId!=null&&t.hasOwnProperty("ClientPeerId")&&!$util.isString(t.ClientPeerId)?"ClientPeerId: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.ClientDisconnectedResponse)return t;let a=new $root.rov_action_api.ClientDisconnectedResponse;return t.ClientPeerId!=null&&(a.ClientPeerId=String(t.ClientPeerId)),a},e.toObject=function(t,a){a||(a={});let s={};return a.defaults&&(s.ClientPeerId=""),t.ClientPeerId!=null&&t.hasOwnProperty("ClientPeerId")&&(s.ClientPeerId=t.ClientPeerId),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ClientDisconnectedResponse"},e}(),n.RovResponse=function(){function e(t){if(t)for(let a=Object.keys(t),s=0;s<a.length;++s)t[a[s]]!=null&&(this[a[s]]=t[a[s]])}e.prototype.RovExchangeId=0,e.prototype.Done=null,e.prototype.Error=null,e.prototype.Pong=null,e.prototype.ContinuedOutput=null,e.prototype.SensorUpdates=null,e.prototype.PasswordRequired=null,e.prototype.PasswordAccepted=null,e.prototype.PasswordInvalid=null,e.prototype.TokenAccepted=null,e.prototype.TokenInvalid=null,e.prototype.DriverChanged=null,e.prototype.ClientConnected=null,e.prototype.ClientDisconnected=null;let r;return Object.defineProperty(e.prototype,"Body",{get:$util.oneOfGetter(r=["Done","Error","Pong","ContinuedOutput","SensorUpdates","PasswordRequired","PasswordAccepted","PasswordInvalid","TokenAccepted","TokenInvalid","DriverChanged","ClientConnected","ClientDisconnected"]),set:$util.oneOfSetter(r)}),e.create=function(a){return new e(a)},e.encode=function(a,s){return s||(s=$Writer.create()),a.RovExchangeId!=null&&Object.hasOwnProperty.call(a,"RovExchangeId")&&s.uint32(16).int32(a.RovExchangeId),a.Done!=null&&Object.hasOwnProperty.call(a,"Done")&&$root.rov_action_api.DoneResponse.encode(a.Done,s.uint32(26).fork()).ldelim(),a.Error!=null&&Object.hasOwnProperty.call(a,"Error")&&$root.rov_action_api.ErrorResponse.encode(a.Error,s.uint32(34).fork()).ldelim(),a.Pong!=null&&Object.hasOwnProperty.call(a,"Pong")&&$root.rov_action_api.PongResponse.encode(a.Pong,s.uint32(42).fork()).ldelim(),a.ContinuedOutput!=null&&Object.hasOwnProperty.call(a,"ContinuedOutput")&&$root.rov_action_api.ContinuedOutputResponse.encode(a.ContinuedOutput,s.uint32(50).fork()).ldelim(),a.SensorUpdates!=null&&Object.hasOwnProperty.call(a,"SensorUpdates")&&$root.rov_action_api.SensorUpdatesResponse.encode(a.SensorUpdates,s.uint32(58).fork()).ldelim(),a.PasswordRequired!=null&&Object.hasOwnProperty.call(a,"PasswordRequired")&&$root.rov_action_api.PasswordRequiredResponse.encode(a.PasswordRequired,s.uint32(66).fork()).ldelim(),a.PasswordAccepted!=null&&Object.hasOwnProperty.call(a,"PasswordAccepted")&&$root.rov_action_api.PasswordAcceptedResponse.encode(a.PasswordAccepted,s.uint32(74).fork()).ldelim(),a.PasswordInvalid!=null&&Object.hasOwnProperty.call(a,"PasswordInvalid")&&$root.rov_action_api.PasswordInvalidResponse.encode(a.PasswordInvalid,s.uint32(82).fork()).ldelim(),a.TokenAccepted!=null&&Object.hasOwnProperty.call(a,"TokenAccepted")&&$root.rov_action_api.TokenAcceptedResponse.encode(a.TokenAccepted,s.uint32(90).fork()).ldelim(),a.TokenInvalid!=null&&Object.hasOwnProperty.call(a,"TokenInvalid")&&$root.rov_action_api.TokenInvalidResponse.encode(a.TokenInvalid,s.uint32(98).fork()).ldelim(),a.DriverChanged!=null&&Object.hasOwnProperty.call(a,"DriverChanged")&&$root.rov_action_api.DriverChangedResponse.encode(a.DriverChanged,s.uint32(106).fork()).ldelim(),a.ClientConnected!=null&&Object.hasOwnProperty.call(a,"ClientConnected")&&$root.rov_action_api.ClientConnectedResponse.encode(a.ClientConnected,s.uint32(114).fork()).ldelim(),a.ClientDisconnected!=null&&Object.hasOwnProperty.call(a,"ClientDisconnected")&&$root.rov_action_api.ClientDisconnectedResponse.encode(a.ClientDisconnected,s.uint32(122).fork()).ldelim(),s},e.encodeDelimited=function(a,s){return this.encode(a,s).ldelim()},e.decode=function(a,s){a instanceof $Reader||(a=$Reader.create(a));let u=s===void 0?a.len:a.pos+s,d=new $root.rov_action_api.RovResponse;for(;a.pos<u;){let c=a.uint32();switch(c>>>3){case 2:{d.RovExchangeId=a.int32();break}case 3:{d.Done=$root.rov_action_api.DoneResponse.decode(a,a.uint32());break}case 4:{d.Error=$root.rov_action_api.ErrorResponse.decode(a,a.uint32());break}case 5:{d.Pong=$root.rov_action_api.PongResponse.decode(a,a.uint32());break}case 6:{d.ContinuedOutput=$root.rov_action_api.ContinuedOutputResponse.decode(a,a.uint32());break}case 7:{d.SensorUpdates=$root.rov_action_api.SensorUpdatesResponse.decode(a,a.uint32());break}case 8:{d.PasswordRequired=$root.rov_action_api.PasswordRequiredResponse.decode(a,a.uint32());break}case 9:{d.PasswordAccepted=$root.rov_action_api.PasswordAcceptedResponse.decode(a,a.uint32());break}case 10:{d.PasswordInvalid=$root.rov_action_api.PasswordInvalidResponse.decode(a,a.uint32());break}case 11:{d.TokenAccepted=$root.rov_action_api.TokenAcceptedResponse.decode(a,a.uint32());break}case 12:{d.TokenInvalid=$root.rov_action_api.TokenInvalidResponse.decode(a,a.uint32());break}case 13:{d.DriverChanged=$root.rov_action_api.DriverChangedResponse.decode(a,a.uint32());break}case 14:{d.ClientConnected=$root.rov_action_api.ClientConnectedResponse.decode(a,a.uint32());break}case 15:{d.ClientDisconnected=$root.rov_action_api.ClientDisconnectedResponse.decode(a,a.uint32());break}default:a.skipType(c&7);break}}return d},e.decodeDelimited=function(a){return a instanceof $Reader||(a=new $Reader(a)),this.decode(a,a.uint32())},e.verify=function(a){if(typeof a!="object"||a===null)return"object expected";let s={};if(a.RovExchangeId!=null&&a.hasOwnProperty("RovExchangeId")&&!$util.isInteger(a.RovExchangeId))return"RovExchangeId: integer expected";if(a.Done!=null&&a.hasOwnProperty("Done")){s.Body=1;{let u=$root.rov_action_api.DoneResponse.verify(a.Done);if(u)return"Done."+u}}if(a.Error!=null&&a.hasOwnProperty("Error")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.ErrorResponse.verify(a.Error);if(u)return"Error."+u}}if(a.Pong!=null&&a.hasOwnProperty("Pong")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.PongResponse.verify(a.Pong);if(u)return"Pong."+u}}if(a.ContinuedOutput!=null&&a.hasOwnProperty("ContinuedOutput")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.ContinuedOutputResponse.verify(a.ContinuedOutput);if(u)return"ContinuedOutput."+u}}if(a.SensorUpdates!=null&&a.hasOwnProperty("SensorUpdates")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.SensorUpdatesResponse.verify(a.SensorUpdates);if(u)return"SensorUpdates."+u}}if(a.PasswordRequired!=null&&a.hasOwnProperty("PasswordRequired")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.PasswordRequiredResponse.verify(a.PasswordRequired);if(u)return"PasswordRequired."+u}}if(a.PasswordAccepted!=null&&a.hasOwnProperty("PasswordAccepted")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.PasswordAcceptedResponse.verify(a.PasswordAccepted);if(u)return"PasswordAccepted."+u}}if(a.PasswordInvalid!=null&&a.hasOwnProperty("PasswordInvalid")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.PasswordInvalidResponse.verify(a.PasswordInvalid);if(u)return"PasswordInvalid."+u}}if(a.TokenAccepted!=null&&a.hasOwnProperty("TokenAccepted")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.TokenAcceptedResponse.verify(a.TokenAccepted);if(u)return"TokenAccepted."+u}}if(a.TokenInvalid!=null&&a.hasOwnProperty("TokenInvalid")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.TokenInvalidResponse.verify(a.TokenInvalid);if(u)return"TokenInvalid."+u}}if(a.DriverChanged!=null&&a.hasOwnProperty("DriverChanged")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.DriverChangedResponse.verify(a.DriverChanged);if(u)return"DriverChanged."+u}}if(a.ClientConnected!=null&&a.hasOwnProperty("ClientConnected")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.ClientConnectedResponse.verify(a.ClientConnected);if(u)return"ClientConnected."+u}}if(a.ClientDisconnected!=null&&a.hasOwnProperty("ClientDisconnected")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let u=$root.rov_action_api.ClientDisconnectedResponse.verify(a.ClientDisconnected);if(u)return"ClientDisconnected."+u}}return null},e.fromObject=function(a){if(a instanceof $root.rov_action_api.RovResponse)return a;let s=new $root.rov_action_api.RovResponse;if(a.RovExchangeId!=null&&(s.RovExchangeId=a.RovExchangeId|0),a.Done!=null){if(typeof a.Done!="object")throw TypeError(".rov_action_api.RovResponse.Done: object expected");s.Done=$root.rov_action_api.DoneResponse.fromObject(a.Done)}if(a.Error!=null){if(typeof a.Error!="object")throw TypeError(".rov_action_api.RovResponse.Error: object expected");s.Error=$root.rov_action_api.ErrorResponse.fromObject(a.Error)}if(a.Pong!=null){if(typeof a.Pong!="object")throw TypeError(".rov_action_api.RovResponse.Pong: object expected");s.Pong=$root.rov_action_api.PongResponse.fromObject(a.Pong)}if(a.ContinuedOutput!=null){if(typeof a.ContinuedOutput!="object")throw TypeError(".rov_action_api.RovResponse.ContinuedOutput: object expected");s.ContinuedOutput=$root.rov_action_api.ContinuedOutputResponse.fromObject(a.ContinuedOutput)}if(a.SensorUpdates!=null){if(typeof a.SensorUpdates!="object")throw TypeError(".rov_action_api.RovResponse.SensorUpdates: object expected");s.SensorUpdates=$root.rov_action_api.SensorUpdatesResponse.fromObject(a.SensorUpdates)}if(a.PasswordRequired!=null){if(typeof a.PasswordRequired!="object")throw TypeError(".rov_action_api.RovResponse.PasswordRequired: object expected");s.PasswordRequired=$root.rov_action_api.PasswordRequiredResponse.fromObject(a.PasswordRequired)}if(a.PasswordAccepted!=null){if(typeof a.PasswordAccepted!="object")throw TypeError(".rov_action_api.RovResponse.PasswordAccepted: object expected");s.PasswordAccepted=$root.rov_action_api.PasswordAcceptedResponse.fromObject(a.PasswordAccepted)}if(a.PasswordInvalid!=null){if(typeof a.PasswordInvalid!="object")throw TypeError(".rov_action_api.RovResponse.PasswordInvalid: object expected");s.PasswordInvalid=$root.rov_action_api.PasswordInvalidResponse.fromObject(a.PasswordInvalid)}if(a.TokenAccepted!=null){if(typeof a.TokenAccepted!="object")throw TypeError(".rov_action_api.RovResponse.TokenAccepted: object expected");s.TokenAccepted=$root.rov_action_api.TokenAcceptedResponse.fromObject(a.TokenAccepted)}if(a.TokenInvalid!=null){if(typeof a.TokenInvalid!="object")throw TypeError(".rov_action_api.RovResponse.TokenInvalid: object expected");s.TokenInvalid=$root.rov_action_api.TokenInvalidResponse.fromObject(a.TokenInvalid)}if(a.DriverChanged!=null){if(typeof a.DriverChanged!="object")throw TypeError(".rov_action_api.RovResponse.DriverChanged: object expected");s.DriverChanged=$root.rov_action_api.DriverChangedResponse.fromObject(a.DriverChanged)}if(a.ClientConnected!=null){if(typeof a.ClientConnected!="object")throw TypeError(".rov_action_api.RovResponse.ClientConnected: object expected");s.ClientConnected=$root.rov_action_api.ClientConnectedResponse.fromObject(a.ClientConnected)}if(a.ClientDisconnected!=null){if(typeof a.ClientDisconnected!="object")throw TypeError(".rov_action_api.RovResponse.ClientDisconnected: object expected");s.ClientDisconnected=$root.rov_action_api.ClientDisconnectedResponse.fromObject(a.ClientDisconnected)}return s},e.toObject=function(a,s){s||(s={});let u={};return s.defaults&&(u.RovExchangeId=0),a.RovExchangeId!=null&&a.hasOwnProperty("RovExchangeId")&&(u.RovExchangeId=a.RovExchangeId),a.Done!=null&&a.hasOwnProperty("Done")&&(u.Done=$root.rov_action_api.DoneResponse.toObject(a.Done,s),s.oneofs&&(u.Body="Done")),a.Error!=null&&a.hasOwnProperty("Error")&&(u.Error=$root.rov_action_api.ErrorResponse.toObject(a.Error,s),s.oneofs&&(u.Body="Error")),a.Pong!=null&&a.hasOwnProperty("Pong")&&(u.Pong=$root.rov_action_api.PongResponse.toObject(a.Pong,s),s.oneofs&&(u.Body="Pong")),a.ContinuedOutput!=null&&a.hasOwnProperty("ContinuedOutput")&&(u.ContinuedOutput=$root.rov_action_api.ContinuedOutputResponse.toObject(a.ContinuedOutput,s),s.oneofs&&(u.Body="ContinuedOutput")),a.SensorUpdates!=null&&a.hasOwnProperty("SensorUpdates")&&(u.SensorUpdates=$root.rov_action_api.SensorUpdatesResponse.toObject(a.SensorUpdates,s),s.oneofs&&(u.Body="SensorUpdates")),a.PasswordRequired!=null&&a.hasOwnProperty("PasswordRequired")&&(u.PasswordRequired=$root.rov_action_api.PasswordRequiredResponse.toObject(a.PasswordRequired,s),s.oneofs&&(u.Body="PasswordRequired")),a.PasswordAccepted!=null&&a.hasOwnProperty("PasswordAccepted")&&(u.PasswordAccepted=$root.rov_action_api.PasswordAcceptedResponse.toObject(a.PasswordAccepted,s),s.oneofs&&(u.Body="PasswordAccepted")),a.PasswordInvalid!=null&&a.hasOwnProperty("PasswordInvalid")&&(u.PasswordInvalid=$root.rov_action_api.PasswordInvalidResponse.toObject(a.PasswordInvalid,s),s.oneofs&&(u.Body="PasswordInvalid")),a.TokenAccepted!=null&&a.hasOwnProperty("TokenAccepted")&&(u.TokenAccepted=$root.rov_action_api.TokenAcceptedResponse.toObject(a.TokenAccepted,s),s.oneofs&&(u.Body="TokenAccepted")),a.TokenInvalid!=null&&a.hasOwnProperty("TokenInvalid")&&(u.TokenInvalid=$root.rov_action_api.TokenInvalidResponse.toObject(a.TokenInvalid,s),s.oneofs&&(u.Body="TokenInvalid")),a.DriverChanged!=null&&a.hasOwnProperty("DriverChanged")&&(u.DriverChanged=$root.rov_action_api.DriverChangedResponse.toObject(a.DriverChanged,s),s.oneofs&&(u.Body="DriverChanged")),a.ClientConnected!=null&&a.hasOwnProperty("ClientConnected")&&(u.ClientConnected=$root.rov_action_api.ClientConnectedResponse.toObject(a.ClientConnected,s),s.oneofs&&(u.Body="ClientConnected")),a.ClientDisconnected!=null&&a.hasOwnProperty("ClientDisconnected")&&(u.ClientDisconnected=$root.rov_action_api.ClientDisconnectedResponse.toObject(a.ClientDisconnected,s),s.oneofs&&(u.Body="ClientDisconnected")),u},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal$1.exports.util.toJSONOptions)},e.getTypeUrl=function(a){return a===void 0&&(a="type.googleapis.com"),a+"/rov_action_api.RovResponse"},e}(),n})();let lastTimeRecvdPong=NaN;class RovMsgHandlerClass{constructor(){q(this,"replyContinuityCallbacks",[]);q(this,"sendMessageCallback",null);q(this,"setSendMessageCallback",e=>{this.sendMessageCallback=e})}handleRecivedMessage(e){const r=rov_action_api.RovResponse.decode(e);if(this.runExchangeCallback(r.RovExchangeId,r),r.Done)return this.handleDoneMsgRecived(r.RovExchangeId,r.Done);if(r.Error)return this.handleErrorMsgRecived(r.RovExchangeId,r.Error);if(r.Pong)return this.handlePongMsgRecived(r.RovExchangeId,r.Pong);if(r.ContinuedOutput)return this.handleContinuedOutputMsgRecived(r.RovExchangeId,r.ContinuedOutput);if(r.SensorUpdates)return this.handleSensorUpdatesMsgRecived(r.RovExchangeId,r.SensorUpdates);if(r.PasswordRequired)return this.handlePasswordRequiredMsgRecived(r.RovExchangeId,r.PasswordRequired);if(r.PasswordAccepted)return this.handlePasswordAcceptedMsgRecived(r.RovExchangeId,r.PasswordAccepted);if(r.PasswordInvalid)return this.handlePasswordInvalidMsgRecived(r.RovExchangeId,r.PasswordInvalid);if(r.TokenAccepted)return this.handleTokenAcceptedMsgRecived(r.RovExchangeId,r.TokenAccepted);if(r.TokenInvalid)return this.handleTokenInvalidMsgRecived(r.RovExchangeId,r.TokenInvalid);if(r.DriverChanged)return this.handleDriverChangedMsgRecived(r.RovExchangeId,r.DriverChanged);if(r.ClientConnected)return this.handleClientConnectedMsgRecived(r.RovExchangeId,r.ClientConnected);if(r.ClientDisconnected)return this.handleClientDisconnectedMsgRecived(r.RovExchangeId,r.ClientDisconnected)}handleDoneMsgRecived(e,r){console.log("Done: ",r)}handleErrorMsgRecived(e,r){console.warn("ROV Error: ",r),showToastMessage("ROV Error: "+r.Message,2e3,null)}handlePongMsgRecived(e,r){console.log("Pong: ",r),lastTimeRecvdPong=Date.now(),lastTimeRecvdPong-Number.parseFloat(r.Time)}handleContinuedOutputMsgRecived(e,r){}handleSensorUpdatesMsgRecived(e,r){console.log("SensorUpdates: ",r),updateDisplayedSensorValues(r.SensorUpdates)}handlePasswordRequiredMsgRecived(e,r){console.log("PasswordRequired for rovId:",r.RovId),showPasswordPrompt("Enter Driver Password",t=>{t?this.sendRovMessage({PasswordAttempt:{Password:t},RovExchangeId:e},null):delete this.replyContinuityCallbacks[e]})}handlePasswordAcceptedMsgRecived(e,r){showToastMessage("Password Accepted",1e3,null),console.log("TODO: Got AuthToken:",r.AuthToken),this.resendMessage(e)}handlePasswordInvalidMsgRecived(e,r){showToastMessage("Wrong Password",1e3,null),this.handlePasswordRequiredMsgRecived(e,r)}handleTokenAcceptedMsgRecived(e,r){console.debug("Token Accepted: ",r),this.resendMessage(e)}handleTokenInvalidMsgRecived(e,r){console.debug("Token Invalid: ",r),this.handlePasswordRequiredMsgRecived(e,r)}handleDriverChangedMsgRecived(e,r){console.info("Driver Changed: ",r);let t=connectionManager.get().getThisPeerId();r.DriverPeerId==t?(showToastMessage("You are now the driver"),updateRoleDisplay(!0),isRovDriver.set(!0)):(showToastMessage("ROV Driver is now "+r.DriverPeerId),updateRoleDisplay(!1),isRovDriver.set(!1))}handleClientConnectedMsgRecived(e,r){showToastMessage(r.ClientPeerId+" Connected to ROV",1500,null)}handleClientDisconnectedMsgRecived(e,r){showToastMessage(r.ClientPeerId+" Disconnected from ROV",1500,null)}sendRovMessage(e,r=null){!e.RovExchangeId&&r&&(e.RovExchangeId=this.replyContinuityCallbacks.length),this.replyContinuityCallbacks[e.RovExchangeId]||(this.replyContinuityCallbacks[e.RovExchangeId]={callback:r,originalMsgData:e});const t=rov_action_api.RovAction.encode(e).finish();this.sendMessageCallback(t)}resendMessage(e){const r=this.replyContinuityCallbacks[e];r&&r.originalMsgData&&this.sendRovMessage(r.originalMsgData,r.callback)}runExchangeCallback(e,r){const t=this.replyContinuityCallbacks[e];t&&(t.callback&&t.callback(r),delete this.replyContinuityCallbacks[e])}}const rovMessageHandler=new RovMsgHandlerClass;class RovActionsClass{constructor(e){q(this,"pingLoopIntervalId",null);q(this,"lastMove",{VelocityX:0,VelocityY:0,VelocityZ:0,AngularVelocityYaw:0});q(this,"rovMsgHandler",null);q(this,"shutdownRov",()=>{showConfirmationMsg("Are you sure you want to shutdown the ROV?",e=>{showToastMessage("Sending Shutdown Request..."),this.sendActionAndWaitForDone({ShutdownRov:{}},r=>{showToastMessage("Please wait 20 seconds before unplugging"),showToastMessage("ROV:"+r),this.disconnectFromRov()})})});q(this,"rebootRov",()=>{showConfirmationMsg("Are you sure you want to reboot the ROV?",e=>{showToastMessage("Sending Reboot Request..."),this.sendActionAndWaitForDone({RebootRov:{}},r=>{showToastMessage("Press Connect again in about 30 seconds"),showToastMessage("ROV:"+r),this.disconnectFromRov()})})});q(this,"restartRovServices",()=>{showConfirmationMsg("Are you sure you want to restart services? - The ROV will stop responding for about a minute and then you can re-connect.",()=>{let e=this.showCommandOutputPopup("Restarting ROV Services",`Sending Service Restart Request (Please Wait)...
`,`

Done.`);this.rovMsgHandler.sendRovMessage({RestartRovServices:{}},e)})});q(this,"getRovStatusReport",()=>{let e=this.showCommandOutputPopup("ROV Status Report",`Sending Status Request (Please Wait)...
`,`

Done.`);this.rovMsgHandler.sendRovMessage({RovStatusReport:{}},e)});q(this,"getRovLogs",()=>{let e=this.showCommandOutputPopup("ROV Logs",`Sending Request (Please Wait)...
`,`

Done.`);this.rovMsgHandler.sendRovMessage({RovLogs:{}},e)});q(this,"enableRovWifi",()=>{showToastMessage("Sending Enable Wifi Command..."),this.sendActionAndWaitForDone({},e=>{showToastMessage("Wifi Enabled! "+e)})});q(this,"disableRovWifi",()=>{showConfirmationMsg("Are you sure you want to disable rov wifi? If the ROV is connected via wifi, don't do this!",()=>{showToastMessage("Sending Disable Wifi Command..."),this.sendActionAndWaitForDone({DisableWifi:{}},e=>{showToastMessage("Wifi Disabled! "+e)})})});this.rovMsgHandler=e}sendActionAndWaitForDone(e,r){this.rovMsgHandler.sendRovMessage(e,t=>{t.Done&&r?r&&r(null):t.Error&&r?(r(t.Error.Message+`
`),r(null)):t.ContinuedOutput&&r&&r(t.ContinuedOutput.Message+`
`)})}startPingLoop(){this.pingLoopIntervalId||(this.pingLoopIntervalId=setInterval(()=>{this.rovMsgHandler.sendRovMessage({Ping:{Time:Date.now()}},null)},3e3))}stopPingLoop(){clearInterval(this.pingLoopIntervalId),this.pingLoopIntervalId=null}showCommandOutputPopup(e,r,t){let a=showScrollableTextPopup(e,null);return a(r),s=>{let u=s.status;u=="password-required"||u=="password-invalid"||u=="password-accepted"||u=="token-accepted"||(u=="error"?a(`
Error:
`+s.val):s.val?a(s.val):s.status=="done"&&a(t))}}connectToRov(){const e=connectionManager.get();e&&e.connectToCurrentTargetRov()}disconnectFromRov(){const e=connectionManager.get();e&&e.disconnectFromCurrentRov()}switchToNextRovPeerId(){rovPeerIdEndNumber.update(e=>(e++,localStorage.setItem("rovPeerIdEndNumber",e.toString()),e)),setCurrentRovName(),this.disconnectFromRov()}switchToPrevRovPeerId(){rovPeerIdEndNumber.update(e=>(e=Math.max(e-1,0),localStorage.setItem("rovPeerIdEndNumber",e.toString()),e)),setCurrentRovName(),this.disconnectFromRov()}takeControl(){this.rovMsgHandler.sendRovMessage({TakeControl:{}},null)}moveRov(e,r,t,a){if(e==this.lastMove.VelocityX&&r==this.lastMove.VelocityY&&t==this.lastMove.VelocityZ&&a==this.lastMove.AngularVelocityYaw)return;const s={VelocityX:e,VelocityY:r,VelocityZ:t,AngularVelocityYaw:a};this.rovMsgHandler.sendRovMessage({Move:this.lastMove},null),this.lastMove=s}toggleLights(){this.rovMsgHandler.sendRovMessage({ToogleLights:{}},null)}}const RovActions$1=new RovActionsClass(rovMessageHandler);var l$2=(n=>(n.up="up",n.down="down",n.left="left",n.right="right",n))(l$2||{}),v=(n=>(n.onOff="onOff",n.variable="variable",n))(v||{}),f$2=(n=>(n.real="real",n.emulated="emulated",n.overlay="overlay",n))(f$2||{});function i(n,e,r){const t=Math.sqrt(n*n+e*e);return t>r?{x:n/t,y:e/t}:{x:n/r,y:e/r}}function o$1(n){if(n instanceof SVGGraphicsElement){n.getAttribute("transform")&&console.warn("Setting Transform origin on an element that already has a transform attribute. This may break the transform!",n);const e=n.getBBox();n.style.transformOrigin=`${e.x+e.width/2}px ${e.y+e.height/2}px`}else if(n instanceof HTMLElement){console.warn("Setting Transform origin on an element that is not an SVG element. This may break the transform!",n);const e=n.getBoundingClientRect();n.style.transformOrigin=`${e.width/2}px ${e.height/2}px`}}var L=Object.defineProperty,M=(n,e,r)=>e in n?L(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,h=(n,e,r)=>(M(n,typeof e!="symbol"?e+"":e,r),r);const T=18,A=4,E=class{constructor(n){if(h(this,"getNativeGamepads",()=>[]),h(this,"buttonPressThreshold",.1),h(this,"realGpadToPatchedIndexMap",[]),h(this,"patchedGpadToRealIndexMap",[]),h(this,"emulatedGamepads",[]),h(this,"emulatedGamepadsMetadata",[]),h(this,"undoEventPatch",()=>{}),this.buttonPressThreshold=n||this.buttonPressThreshold,E.instanceRunning)throw new Error("Only one GamepadEmulator instance may exist at a time!");E.instanceRunning=!0,this.undoEventPatch=this.monkeyPatchGamepadEvents(),this.monkeyPatchGetGamepads()}AddEmulatedGamepad(n,e,r=T,t=A){if((n===-1||!n&&n!==0)&&(n=this.nextEmptyEGpadIndex(e)),this.emulatedGamepads[n])return!1;const a={emulation:f$2.emulated,connected:!0,timestamp:Math.floor(Date.now()/1e3),displayId:"Emulated Gamepad "+n,id:"Emulated Gamepad "+n+" (Xinput STANDARD GAMEPAD)",mapping:"standard",index:n,buttons:new Array(r).fill({pressed:!1,value:0,touched:!1},0,r),axes:new Array(t).fill(0,0,t),hapticActuators:[]};this.emulatedGamepads[n]=a,this.emulatedGamepadsMetadata[n]={overlayMode:e};const s=new Event("gamepadconnected");return s.gamepad=a,window.dispatchEvent(s),a}RemoveEmulatedGamepad(n){this.ClearDisplayButtonEventListeners(n),this.ClearDisplayJoystickEventListeners(n);var e=this.emulatedGamepads[n];if(e){delete this.emulatedGamepads[n],delete this.emulatedGamepadsMetadata[n];const r={...e,connected:!1,timestamp:Math.floor(Date.now()/1e3)},t=new Event("gamepaddisconnected");t.gamepad=r,window.dispatchEvent(t)}else console.warn("Error: removing emulated gamepad. No emulated gamepad exists at index "+n)}PressButton(n,e,r,t){if(this.emulatedGamepads[n]===void 0)throw new Error("Error: PressButton() - no emulated gamepad at index "+n+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");var a=r>this.buttonPressThreshold;this.emulatedGamepads[n].buttons[e]={pressed:a,value:r||0,touched:a||t||!1}}MoveAxis(n,e,r){if(!this.emulatedGamepads[n])throw new Error("Error: MoveAxis() - no emulated gamepad at index "+n+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");this.emulatedGamepads[n].axes[e]=r}AddDisplayButtonEventListeners(n,e){if(!this.emulatedGamepads[n])throw new Error("Error: AddDisplayJoystickEventListeners() - no emulated gamepad at index "+n+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");let r=[];for(var t=0;t<e.length;t++){const a=e[t],s=a.buttonIndex,u=a.tapTarget;if(!u){console.warn("AddDisplayButtonEventListeners() - no tap target in button config "+s+", skipping...");continue}const d=_=>{_.changedTouches[0].target==u&&_.preventDefault()};window.addEventListener("touchstart",d,{passive:!1});const c=_=>{const b=_.buttons==1?1:0;(!a.lockTargetWhilePressed||b==0)&&this.PressButton(n,s,b,!0)};u.addEventListener("pointerenter",c);const g=_=>{const b=_.buttons==1?1:0;(!a.lockTargetWhilePressed||b==0)&&this.PressButton(n,s,0,!1)};u.addEventListener("pointerleave",g);const m=_=>{};if(u.addEventListener("pointercancel",m),a.type==v.onOff){const _=S=>{S.preventDefault(),this.PressButton(n,s,1,!0),a.lockTargetWhilePressed?u.setPointerCapture(S.pointerId):u.releasePointerCapture(S.pointerId),console.log("on/off pointer down",u.hasPointerCapture(S.pointerId))};u.addEventListener("pointerdown",_);const b=()=>{this.PressButton(n,s,0,!0)};u.addEventListener("pointerup",b),r.push(function(){window.removeEventListener("touchstart",d),u.removeEventListener("pointerenter",c),u.removeEventListener("pointerleave",g),u.removeEventListener("pointerdown",_),u.removeEventListener("pointerup",b),u.removeEventListener("pointercancel",m)})}else if(a.type==v.variable){const _={...a},b=this.AddDragControlListener(_,(S,C,R)=>{let w=S?this.buttonPressThreshold+1e-5:0;w+=a.directions[l$2.left]||a.directions[l$2.right]?Math.abs(C):0,w+=a.directions[l$2.up]||a.directions[l$2.down]?Math.abs(R):0,this.PressButton(n,a.buttonIndex,Math.min(w,1),S)});r.push(function(){window.removeEventListener("touchstart",d),u.removeEventListener("pointerenter",c),u.removeEventListener("pointerleave",g),u.removeEventListener("pointercancel",m),b()})}}this.emulatedGamepadsMetadata[n].removeButtonListenersFunc=()=>{r.forEach(a=>a())}}AddDisplayJoystickEventListeners(n,e){if(!this.emulatedGamepads[n])throw new Error("Error: AddDisplayJoystickEventListeners() - no emulated gamepad at index "+n+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");let r=[];for(let t=0;t<e.length;t++){const a=e[t];if(a.tapTarget==null){console.warn(`AddDisplayJoystickEventListeners() - no tap target in joystick config ${t}, skipping...`);continue}const s=this.AddDragControlListener(a,(u,d,c)=>{a.xAxisIndex!==void 0&&this.MoveAxis(n,a.xAxisIndex,d),a.yAxisIndex!==void 0&&this.MoveAxis(n,a.yAxisIndex,c)});r.push(s)}this.emulatedGamepadsMetadata[n].removeJoystickListenersFunc=()=>{r.forEach(t=>t())}}ClearDisplayButtonEventListeners(n){var e;this.emulatedGamepadsMetadata[n]&&((e=this.emulatedGamepadsMetadata[n])==null?void 0:e.removeButtonListenersFunc)&&this.emulatedGamepadsMetadata[n].removeButtonListenersFunc()}ClearDisplayJoystickEventListeners(n){var e;this.emulatedGamepadsMetadata[n]&&((e=this.emulatedGamepadsMetadata[n])==null?void 0:e.removeJoystickListenersFunc)&&this.emulatedGamepadsMetadata[n].removeJoystickListenersFunc()}AddDragControlListener(n,e){let r={startX:0,startY:0},t=-1;const a=d=>{var c=d.pointerId;if(t===c){const g=n.directions[l$2.left]?-1:0,m=n.directions[l$2.right]?1:0,_=n.directions[l$2.up]?-1:0,b=n.directions[l$2.down]?1:0,S=d.clientX-r.startX,C=d.clientY-r.startY;let{x:R,y:w}=i(S,C,n.dragDistance);R=Math.max(Math.min(R,m),g),w=Math.max(Math.min(w,b),_),e(!0,R,w)}},s=d=>{t==d.pointerId&&(document.removeEventListener("pointermove",a,!1),document.removeEventListener("pointerup",s,!1),t=-1,e(!1,0,0))};n.tapTarget.addEventListener("pointerdown",d=>{d.preventDefault(),r.startX=d.clientX,r.startY=d.clientY,t=d.pointerId,n.lockTargetWhilePressed?n.tapTarget.setPointerCapture(d.pointerId):n.tapTarget.releasePointerCapture(d.pointerId),console.log("stick pointer down",n.tapTarget.hasPointerCapture(d.pointerId)),e(!0,0,0),document.addEventListener("pointermove",a,!1),document.addEventListener("pointerup",s,!1)});const u=d=>{d.changedTouches[0].target==n.tapTarget&&d.preventDefault()};return window.addEventListener("touchstart",u,{passive:!1}),function(){window.removeEventListener("touchstart",u),n.tapTarget.removeEventListener("pointerdown",a)}}cloneGamepad(n){if(!n)return n;const e=n.axes?n.axes.length:0,r=n.buttons?n.buttons.length:0,t={};for(let a in n)if(a==="axes"){const s=new Array(e);for(let u=0;u<e;u++)s[u]=Number(n.axes[u]);Object.defineProperty(t,"axes",{value:s,enumerable:!0})}else if(a==="buttons"){const s=new Array(r);for(let u=0;u<r;u++){const d=n.buttons[u];if(d==null)s[u]=d;else{const c=d.pressed,g=d.value,m=d.touched||!1;s[u]={pressed:c,value:g,touched:m}}}Object.defineProperty(t,"buttons",{value:s,enumerable:!0})}else Object.defineProperty(t,a,{get:()=>n[a],configurable:!0,enumerable:!0});return t.emulation||(t.emulation=f$2.real),t}nextEmptyEGpadIndex(n){let e=0;if(n)do{if(!this.emulatedGamepads[e])break;e++}while(e<this.emulatedGamepads.length);else{const r=Math.max(this.emulatedGamepads.length,this.patchedGpadToRealIndexMap.length);do{if(!this.emulatedGamepads[e]&&this.patchedGpadToRealIndexMap[e]==null)break;console.log("nextEmptyEGpadIndex",e,!this.emulatedGamepads[e],this.patchedGpadToRealIndexMap[e]==null),e++}while(e<r)}return e}nextEmptyRealGpadIndex(n){let e=n;const r=Math.max(this.emulatedGamepads.length,this.patchedGpadToRealIndexMap.length);do{const t=this.emulatedGamepadsMetadata[e],a=this.realGpadToPatchedIndexMap[e]==null&&this.patchedGpadToRealIndexMap[e]==null;if(!!t&&t.overlayMode||!t&&a)break;e++}while(e<r);return e}monkeyPatchGamepadEvents(){let n,e,r,t;window.hasOwnProperty("ongamepadconnected")&&(n=Object.getOwnPropertyDescriptor(window,"ongamepadconnected"),r=window.ongamepadconnected,window.ongamepadconnected=null,Object.defineProperty(window,"ongamepadconnected",{get:()=>function(u){},set:u=>{r=u},configurable:!0})),window.hasOwnProperty("ongamepaddisconnected")&&(e=Object.getOwnPropertyDescriptor(window,"ongamepaddisconnected"),t=window.ongamepaddisconnected,window.ongamepaddisconnected=null,Object.defineProperty(window,"ongamepaddisconnected",{get:()=>function(u){},set:u=>{r=u},configurable:!0}));const a=u=>{const d=u.gamepad;if(d&&d.emulation===void 0){u.stopImmediatePropagation();const c=this.cloneGamepad(u.gamepad),g=c.index,m=this.nextEmptyRealGpadIndex(g);this.realGpadToPatchedIndexMap[g]=m,this.patchedGpadToRealIndexMap[m]=g,Object.defineProperty(c,"index",{get:()=>m}),Object.defineProperty(c,"emulation",{get:()=>f$2.real}),console.log(`real gamepad connected ${c.id} (${g}>${m})`,this.realGpadToPatchedIndexMap,this.emulatedGamepads,this.emulatedGamepadsMetadata),u=new Event("gamepadconnected"),u.gamepad=c,window.dispatchEvent(u)}console.log("windowOngamepadconnected",r),r&&r.call(window,u)};window.addEventListener("gamepadconnected",a);const s=u=>{const d=u.gamepad;if(d&&d.emulation===void 0){u.stopImmediatePropagation();const c=this.cloneGamepad(u.gamepad),g=this.realGpadToPatchedIndexMap[c.index]||c.index;Object.defineProperty(c,"index",{get:()=>g}),delete this.realGpadToPatchedIndexMap[c.index],delete this.patchedGpadToRealIndexMap[g],u=new Event("gamepaddisconnected"),u.gamepad=c,window.dispatchEvent(u)}t&&t.call(window,u)};return window.addEventListener("gamepaddisconnected",s),function(){window.removeEventListener("gamepadconnected",a),window.hasOwnProperty("ongamepadconnected")&&(Object.defineProperty(window,"ongamepadconnected",n),window.ongamepadconnected=r),window.removeEventListener("gamepaddisconnected",s),window.hasOwnProperty("ongamepaddisconnected")&&(Object.defineProperty(window,"ongamepaddisconnected",e),window.ongamepaddisconnected=t)}}monkeyPatchGetGamepads(){const n=this;let e=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads||navigator.msGetGamepads;e&&(this.getNativeGamepads=e),navigator.getGamepads=function(){let r=[],t=e!=null?n.getNativeGamepads.apply(navigator):[];for(let s=0;s<t.length;s++){const u=t[s];if(!u)continue;let d=n.cloneGamepad(u),c=n.realGpadToPatchedIndexMap[d.index]||d.index;Object.defineProperty(d,"index",{get:()=>c}),r[c]=d}let a=n.emulatedGamepads;for(let s=0;s<a.length;s++){let u=r[s],d=a[s];if(d&&u){u.emulation=f$2.overlay;let c=Math.max(u.buttons.length,d.buttons.length);for(let m=0;m<c;m++){const _=d.buttons[m]||{touched:!1,pressed:!1,value:0},b=u.buttons[m]||{touched:!1,pressed:!1,value:0};r[s].buttons[m]={touched:_.touched||b.touched||!1,pressed:_.pressed||b.pressed||!1,value:Math.max(_.value,b.value)||0}}let g=Math.max(d.axes.length,u.axes.length);for(let m=0;m<g;m++){const _=d.axes[m]||0,b=u.axes[m]||0;r[s].axes[m]=Math.abs(_||0)>Math.abs(b||0)?_||0:b||0}}else d&&(d.emulation=f$2.emulated,d.timestamp=Math.floor(Date.now()/1e3),r[s]=n.cloneGamepad(d))}return r}}cleanup(){for(let n=0;n<this.emulatedGamepads.length;n++)this.ClearDisplayButtonEventListeners(n),this.ClearDisplayJoystickEventListeners(n);this.emulatedGamepads=[],this.undoEventPatch(),navigator.getGamepads=this.getNativeGamepads,E.instanceRunning=!1}};let y=E;h(y,"instanceRunning",!1);var f$1=Object.defineProperty,l$1=(n,e,r)=>e in n?f$1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,o=(n,e,r)=>(l$1(n,typeof e!="symbol"?e+"":e,r),r);class G{constructor(e){o(this,"updateDelay"),o(this,"axisDeadZone"),o(this,"buttonConfigs"),o(this,"currentStateOfGamepads"),o(this,"gamepadConnectListeners"),o(this,"gamepadDisconnectListeners"),o(this,"gamepadButtonChangeListeners"),o(this,"gamepadAxisChangeListeners"),this.updateDelay=e.updateDelay||0,this.axisDeadZone=e.axisDeadZone||0,this.buttonConfigs=e.buttonConfigs||[],this.currentStateOfGamepads=[],this.gamepadConnectListeners=[],this.gamepadDisconnectListeners=[],this.gamepadButtonChangeListeners=[],this.gamepadAxisChangeListeners=[],navigator.gamepadInputEmulation="gamepad",window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,navigator.getGamepads=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads||navigator.msGetGamepads,this.gamepadApiSupported()&&this.tickLoop()}setButtonsConfig(e){this.buttonConfigs=e}onGamepadConnect(e){return this.gamepadConnectListeners.push(e),window.addEventListener("gamepadconnected",e,!0),e}offGamepadConnect(e){this.gamepadConnectListeners=this.gamepadConnectListeners.filter(r=>r!==e),window.removeEventListener("gamepadconnected",e,!0)}onGamepadDisconnect(e){return this.gamepadDisconnectListeners.push(e),window.addEventListener("gamepaddisconnected",e,!0),e}offGamepadDisconnect(e){this.gamepadDisconnectListeners=this.gamepadDisconnectListeners.filter(r=>r!==e),window.removeEventListener("gamepaddisconnected",e,!0)}onGamepadAxisChange(e){return this.gamepadAxisChangeListeners.push(e),e}offGamepadAxisChange(e){this.gamepadAxisChangeListeners=this.gamepadAxisChangeListeners.filter(r=>r!==e)}onGamepadButtonChange(e){return this.gamepadButtonChangeListeners.push(e),e}offGamepadButtonChange(e){this.gamepadButtonChangeListeners=this.gamepadButtonChangeListeners.filter(r=>r!==e)}gamepadApiSupported(){return!!navigator.getGamepads&&!!navigator.getGamepads()}getCurrentGamepadStates(e=!1){return e&&this.checkForGamepadChanges(),this.currentStateOfGamepads}tickLoop(){this.checkForGamepadChanges(),this.updateDelay==0?requestAnimationFrame(this.tickLoop.bind(this)):setTimeout(()=>{requestAnimationFrame(this.tickLoop.bind(this))},this.updateDelay)}checkForGamepadChanges(){let e=navigator.getGamepads();for(var r=0;r<e.length;r++){let t=e[r];!t||(this.currentStateOfGamepads[r]||(this.currentStateOfGamepads[r]=t),this.checkForAxisChanges(r,t),this.checkForButtonChanges(r,t),this.currentStateOfGamepads[r]=t)}}checkForAxisChanges(e,r){let t=r.axes;if(t.length==0)return;let a=this.currentStateOfGamepads[e].axes||[],s=[],u,d=!1;for(u=0;u<t.length;u++){let c=t[u]||0,g=a[u]||0;if(c!=g){if(Math.abs(c)<this.axisDeadZone&&Math.abs(g)<this.axisDeadZone)continue;s[u]=!0,d=!0}else s[u]=!1}d&&this.gamepadAxisChangeListeners.forEach(c=>c(e,r,s))}checkForButtonChanges(e,r){let t=r.buttons;if(t.length==0)return;const a=this.currentStateOfGamepads[e].buttons||t;let s=[],u,d=!1;for(u=0;u<t.length;u++){let c=!1;const g=t[u]||{pressed:!1,value:0,touched:!1},m=a[u]||{pressed:!1,value:0,touched:!1},_=this.buttonConfigs[u]||{},b={};g.touched&&!m.touched?(b.touchDown=!0,c=!0):!g.touched&&m.touched&&(b.touchUp=!0,c=!0),g.pressed&&!m.pressed?(b.pressed=!0,c=!0):!g.pressed&&m.pressed&&(b.released=!0,c=!0),_.fireWhileHolding&&g.pressed&&m.pressed&&(b.heldDown=!0,c=!0),g.value!=m.value&&(b.valueChanged=!0,c=!0),c?(d=!0,s[u]=b):s[u]=!1}d&&this.gamepadButtonChangeListeners.forEach(c=>c(e,r,s))}}var p=Object.defineProperty,f=(n,e,r)=>e in n?p(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,l=(n,e,r)=>(f(n,typeof e!="symbol"?e+"":e,r),r);class D{constructor(e,r){l(this,"config"),l(this,"apiWrapper"),l(this,"btnChangeListener"),l(this,"axisChangeListener"),l(this,"DefaultJoystickDisplayFunction",(t,a,s)=>{const u=t.movementRange;if(t.joystickElement.style.transform=`translate(${a*u}px,${s*u}px)`,t.highlights&&this.config.moveDirectionHighlightClass){const d=t.highlights[l$2.up],c=t.highlights[l$2.down],g=t.highlights[l$2.left],m=t.highlights[l$2.right];d&&s<-.1?d.classList.add(this.config.moveDirectionHighlightClass||""):d&&d.classList.remove(this.config.moveDirectionHighlightClass||""),c&&s>.1?c.classList.add(this.config.moveDirectionHighlightClass||""):c&&c.classList.remove(this.config.moveDirectionHighlightClass||""),g&&a<-.1?g.classList.add(this.config.moveDirectionHighlightClass||""):g&&g.classList.remove(this.config.moveDirectionHighlightClass||""),m&&a>.1?m.classList.add(this.config.moveDirectionHighlightClass||""):m&&m.classList.remove(this.config.moveDirectionHighlightClass||"")}}),l(this,"DefaultButtonDisplayFunction",(t,a,s,u,d,c)=>{const g=t.highlight;if(this.config.touchedHighlightClass&&g&&(d.touchDown?g.classList.add(this.config.touchedHighlightClass):d.touchUp&&g.classList.remove(this.config.touchedHighlightClass)),this.config.pressedHighlightClass&&g&&(d.pressed?g.classList.add(this.config.pressedHighlightClass):d.released&&g.classList.remove(this.config.pressedHighlightClass)),t.type==v.variable){const m=t.directionHighlight;if(this.config.moveDirectionHighlightClass&&m&&(d.pressed?m.classList.add(this.config.moveDirectionHighlightClass):d.released&&m.classList.remove(this.config.moveDirectionHighlightClass)),t.buttonElement){const _=t.direction==l$2.left||t.direction==l$2.right,b=t.direction==l$2.right||t.direction==l$2.down;t.buttonElement.style.transform=`translate${_?"X":"Y"}(${b?"":"-"}${a*t.movementRange}px)`}}}),l(this,"displayButtonChanges",(t,a,s)=>{if(t!=this.config.gamepadIndex)return;const u=this.config.buttons;for(let d=0;d<u.length;d++){const c=s[d];if(!c||Object.keys(c).length==0)continue;const g=u[d],m=a.buttons[d].value,_=a.buttons[d].touched,b=a.buttons[d].pressed;this.config.buttonDisplayFunction?this.config.buttonDisplayFunction(g,m,_,b,c,d):this.DefaultButtonDisplayFunction(g,m,_,b,c,d)}}),this.config=e,this.apiWrapper=r||new G({buttonConfigs:[],updateDelay:0}),this.btnChangeListener=this.apiWrapper.onGamepadButtonChange(this.displayButtonChanges.bind(this)),this.axisChangeListener=this.apiWrapper.onGamepadAxisChange(this.displayJoystickChanges.bind(this))}displayJoystickChanges(e,r,t){if(e!=this.config.gamepadIndex)return;const a=this.config.sticks;for(let s=0;s<a.length;s++){const u=a[s];if(u.xAxisIndex!==void 0&&t[u.xAxisIndex]||u.yAxisIndex!==void 0&&t[u.yAxisIndex]){const d=r.axes,c=u.xAxisIndex!==void 0&&d[u.xAxisIndex]||0,g=u.yAxisIndex!==void 0&&d[u.yAxisIndex]||0;this.config.joystickDisplayFunction?this.config.joystickDisplayFunction(u,c,g):this.DefaultJoystickDisplayFunction(u,c,g)}}}Cleanup(){this.apiWrapper.offGamepadButtonChange(this.btnChangeListener),this.apiWrapper.offGamepadAxisChange(this.axisChangeListener)}}var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(n,e){return n.concat([e+"-"+start,e+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(n,e){return n.concat([e,e+"-"+start,e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(n){return n?(n.nodeName||"").toLowerCase():null}function getWindow(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function isElement(n){var e=getWindow(n).Element;return n instanceof e||n instanceof Element}function isHTMLElement(n){var e=getWindow(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function isShadowRoot(n){if(typeof ShadowRoot>"u")return!1;var e=getWindow(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function applyStyles(n){var e=n.state;Object.keys(e.elements).forEach(function(r){var t=e.styles[r]||{},a=e.attributes[r]||{},s=e.elements[r];!isHTMLElement(s)||!getNodeName(s)||(Object.assign(s.style,t),Object.keys(a).forEach(function(u){var d=a[u];d===!1?s.removeAttribute(u):s.setAttribute(u,d===!0?"":d)}))})}function effect$2(n){var e=n.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(t){var a=e.elements[t],s=e.attributes[t]||{},u=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:r[t]),d=u.reduce(function(c,g){return c[g]="",c},{});!isHTMLElement(a)||!getNodeName(a)||(Object.assign(a.style,d),Object.keys(s).forEach(function(c){a.removeAttribute(c)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(n){return n.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var n=navigator.userAgentData;return n!=null&&n.brands?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(n,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var t=n.getBoundingClientRect(),a=1,s=1;e&&isHTMLElement(n)&&(a=n.offsetWidth>0&&round(t.width)/n.offsetWidth||1,s=n.offsetHeight>0&&round(t.height)/n.offsetHeight||1);var u=isElement(n)?getWindow(n):window,d=u.visualViewport,c=!isLayoutViewport()&&r,g=(t.left+(c&&d?d.offsetLeft:0))/a,m=(t.top+(c&&d?d.offsetTop:0))/s,_=t.width/a,b=t.height/s;return{width:_,height:b,top:m,right:g+_,bottom:m+b,left:g,x:g,y:m}}function getLayoutRect(n){var e=getBoundingClientRect(n),r=n.offsetWidth,t=n.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-t)<=1&&(t=e.height),{x:n.offsetLeft,y:n.offsetTop,width:r,height:t}}function contains(n,e){var r=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(r&&isShadowRoot(r)){var t=e;do{if(t&&n.isSameNode(t))return!0;t=t.parentNode||t.host}while(t)}return!1}function getComputedStyle$1(n){return getWindow(n).getComputedStyle(n)}function isTableElement(n){return["table","td","th"].indexOf(getNodeName(n))>=0}function getDocumentElement(n){return((isElement(n)?n.ownerDocument:n.document)||window.document).documentElement}function getParentNode(n){return getNodeName(n)==="html"?n:n.assignedSlot||n.parentNode||(isShadowRoot(n)?n.host:null)||getDocumentElement(n)}function getTrueOffsetParent(n){return!isHTMLElement(n)||getComputedStyle$1(n).position==="fixed"?null:n.offsetParent}function getContainingBlock(n){var e=/firefox/i.test(getUAString()),r=/Trident/i.test(getUAString());if(r&&isHTMLElement(n)){var t=getComputedStyle$1(n);if(t.position==="fixed")return null}var a=getParentNode(n);for(isShadowRoot(a)&&(a=a.host);isHTMLElement(a)&&["html","body"].indexOf(getNodeName(a))<0;){var s=getComputedStyle$1(a);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return a;a=a.parentNode}return null}function getOffsetParent(n){for(var e=getWindow(n),r=getTrueOffsetParent(n);r&&isTableElement(r)&&getComputedStyle$1(r).position==="static";)r=getTrueOffsetParent(r);return r&&(getNodeName(r)==="html"||getNodeName(r)==="body"&&getComputedStyle$1(r).position==="static")?e:r||getContainingBlock(n)||e}function getMainAxisFromPlacement(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function within(n,e,r){return max(n,min(e,r))}function withinMaxClamp(n,e,r){var t=within(n,e,r);return t>r?r:t}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(n){return Object.assign({},getFreshSideObject(),n)}function expandToHashMap(n,e){return e.reduce(function(r,t){return r[t]=n,r},{})}var toPaddingObject=function n(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,mergePaddingObject(typeof e!="number"?e:expandToHashMap(e,basePlacements))};function arrow(n){var e,r=n.state,t=n.name,a=n.options,s=r.elements.arrow,u=r.modifiersData.popperOffsets,d=getBasePlacement(r.placement),c=getMainAxisFromPlacement(d),g=[left,right].indexOf(d)>=0,m=g?"height":"width";if(!(!s||!u)){var _=toPaddingObject(a.padding,r),b=getLayoutRect(s),S=c==="y"?top:left,C=c==="y"?bottom:right,R=r.rects.reference[m]+r.rects.reference[c]-u[c]-r.rects.popper[m],w=u[c]-r.rects.reference[c],k=getOffsetParent(s),$=k?c==="y"?k.clientHeight||0:k.clientWidth||0:0,O=R/2-w/2,I=_[S],x=$-b[m]-_[C],P=$/2-b[m]/2+O,B=within(I,P,x),j=c;r.modifiersData[t]=(e={},e[j]=B,e.centerOffset=B-P,e)}}function effect$1(n){var e=n.state,r=n.options,t=r.element,a=t===void 0?"[data-popper-arrow]":t;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||!contains(e.elements.popper,a)||(e.elements.arrow=a))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(n){return n.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(n){var e=n.x,r=n.y,t=window,a=t.devicePixelRatio||1;return{x:round(e*a)/a||0,y:round(r*a)/a||0}}function mapToStyles(n){var e,r=n.popper,t=n.popperRect,a=n.placement,s=n.variation,u=n.offsets,d=n.position,c=n.gpuAcceleration,g=n.adaptive,m=n.roundOffsets,_=n.isFixed,b=u.x,S=b===void 0?0:b,C=u.y,R=C===void 0?0:C,w=typeof m=="function"?m({x:S,y:R}):{x:S,y:R};S=w.x,R=w.y;var k=u.hasOwnProperty("x"),$=u.hasOwnProperty("y"),O=left,I=top,x=window;if(g){var P=getOffsetParent(r),B="clientHeight",j="clientWidth";if(P===getWindow(r)&&(P=getDocumentElement(r),getComputedStyle$1(P).position!=="static"&&d==="absolute"&&(B="scrollHeight",j="scrollWidth")),P=P,a===top||(a===left||a===right)&&s===end){I=bottom;var W=_&&P===x&&x.visualViewport?x.visualViewport.height:P[B];R-=W-t.height,R*=c?1:-1}if(a===left||(a===top||a===bottom)&&s===end){O=right;var U=_&&P===x&&x.visualViewport?x.visualViewport.width:P[j];S-=U-t.width,S*=c?1:-1}}var z=Object.assign({position:d},g&&unsetSides),F=m===!0?roundOffsetsByDPR({x:S,y:R}):{x:S,y:R};if(S=F.x,R=F.y,c){var Y;return Object.assign({},z,(Y={},Y[I]=$?"0":"",Y[O]=k?"0":"",Y.transform=(x.devicePixelRatio||1)<=1?"translate("+S+"px, "+R+"px)":"translate3d("+S+"px, "+R+"px, 0)",Y))}return Object.assign({},z,(e={},e[I]=$?R+"px":"",e[O]=k?S+"px":"",e.transform="",e))}function computeStyles(n){var e=n.state,r=n.options,t=r.gpuAcceleration,a=t===void 0?!0:t,s=r.adaptive,u=s===void 0?!0:s,d=r.roundOffsets,c=d===void 0?!0:d,g={placement:getBasePlacement(e.placement),variation:getVariation(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},g,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:u,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},g,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(n){var e=n.state,r=n.instance,t=n.options,a=t.scroll,s=a===void 0?!0:a,u=t.resize,d=u===void 0?!0:u,c=getWindow(e.elements.popper),g=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&g.forEach(function(m){m.addEventListener("scroll",r.update,passive)}),d&&c.addEventListener("resize",r.update,passive),function(){s&&g.forEach(function(m){m.removeEventListener("scroll",r.update,passive)}),d&&c.removeEventListener("resize",r.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function n(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(n){return n.replace(/left|right|bottom|top/g,function(e){return hash$1[e]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(n){return n.replace(/start|end/g,function(e){return hash[e]})}function getWindowScroll(n){var e=getWindow(n),r=e.pageXOffset,t=e.pageYOffset;return{scrollLeft:r,scrollTop:t}}function getWindowScrollBarX(n){return getBoundingClientRect(getDocumentElement(n)).left+getWindowScroll(n).scrollLeft}function getViewportRect(n,e){var r=getWindow(n),t=getDocumentElement(n),a=r.visualViewport,s=t.clientWidth,u=t.clientHeight,d=0,c=0;if(a){s=a.width,u=a.height;var g=isLayoutViewport();(g||!g&&e==="fixed")&&(d=a.offsetLeft,c=a.offsetTop)}return{width:s,height:u,x:d+getWindowScrollBarX(n),y:c}}function getDocumentRect(n){var e,r=getDocumentElement(n),t=getWindowScroll(n),a=(e=n.ownerDocument)==null?void 0:e.body,s=max(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),u=max(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),d=-t.scrollLeft+getWindowScrollBarX(n),c=-t.scrollTop;return getComputedStyle$1(a||r).direction==="rtl"&&(d+=max(r.clientWidth,a?a.clientWidth:0)-s),{width:s,height:u,x:d,y:c}}function isScrollParent(n){var e=getComputedStyle$1(n),r=e.overflow,t=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+t)}function getScrollParent(n){return["html","body","#document"].indexOf(getNodeName(n))>=0?n.ownerDocument.body:isHTMLElement(n)&&isScrollParent(n)?n:getScrollParent(getParentNode(n))}function listScrollParents(n,e){var r;e===void 0&&(e=[]);var t=getScrollParent(n),a=t===((r=n.ownerDocument)==null?void 0:r.body),s=getWindow(t),u=a?[s].concat(s.visualViewport||[],isScrollParent(t)?t:[]):t,d=e.concat(u);return a?d:d.concat(listScrollParents(getParentNode(u)))}function rectToClientRect(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function getInnerBoundingClientRect(n,e){var r=getBoundingClientRect(n,!1,e==="fixed");return r.top=r.top+n.clientTop,r.left=r.left+n.clientLeft,r.bottom=r.top+n.clientHeight,r.right=r.left+n.clientWidth,r.width=n.clientWidth,r.height=n.clientHeight,r.x=r.left,r.y=r.top,r}function getClientRectFromMixedType(n,e,r){return e===viewport?rectToClientRect(getViewportRect(n,r)):isElement(e)?getInnerBoundingClientRect(e,r):rectToClientRect(getDocumentRect(getDocumentElement(n)))}function getClippingParents(n){var e=listScrollParents(getParentNode(n)),r=["absolute","fixed"].indexOf(getComputedStyle$1(n).position)>=0,t=r&&isHTMLElement(n)?getOffsetParent(n):n;return isElement(t)?e.filter(function(a){return isElement(a)&&contains(a,t)&&getNodeName(a)!=="body"}):[]}function getClippingRect(n,e,r,t){var a=e==="clippingParents"?getClippingParents(n):[].concat(e),s=[].concat(a,[r]),u=s[0],d=s.reduce(function(c,g){var m=getClientRectFromMixedType(n,g,t);return c.top=max(m.top,c.top),c.right=min(m.right,c.right),c.bottom=min(m.bottom,c.bottom),c.left=max(m.left,c.left),c},getClientRectFromMixedType(n,u,t));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function computeOffsets(n){var e=n.reference,r=n.element,t=n.placement,a=t?getBasePlacement(t):null,s=t?getVariation(t):null,u=e.x+e.width/2-r.width/2,d=e.y+e.height/2-r.height/2,c;switch(a){case top:c={x:u,y:e.y-r.height};break;case bottom:c={x:u,y:e.y+e.height};break;case right:c={x:e.x+e.width,y:d};break;case left:c={x:e.x-r.width,y:d};break;default:c={x:e.x,y:e.y}}var g=a?getMainAxisFromPlacement(a):null;if(g!=null){var m=g==="y"?"height":"width";switch(s){case start:c[g]=c[g]-(e[m]/2-r[m]/2);break;case end:c[g]=c[g]+(e[m]/2-r[m]/2);break}}return c}function detectOverflow(n,e){e===void 0&&(e={});var r=e,t=r.placement,a=t===void 0?n.placement:t,s=r.strategy,u=s===void 0?n.strategy:s,d=r.boundary,c=d===void 0?clippingParents:d,g=r.rootBoundary,m=g===void 0?viewport:g,_=r.elementContext,b=_===void 0?popper:_,S=r.altBoundary,C=S===void 0?!1:S,R=r.padding,w=R===void 0?0:R,k=mergePaddingObject(typeof w!="number"?w:expandToHashMap(w,basePlacements)),$=b===popper?reference:popper,O=n.rects.popper,I=n.elements[C?$:b],x=getClippingRect(isElement(I)?I:I.contextElement||getDocumentElement(n.elements.popper),c,m,u),P=getBoundingClientRect(n.elements.reference),B=computeOffsets({reference:P,element:O,strategy:"absolute",placement:a}),j=rectToClientRect(Object.assign({},O,B)),W=b===popper?j:P,U={top:x.top-W.top+k.top,bottom:W.bottom-x.bottom+k.bottom,left:x.left-W.left+k.left,right:W.right-x.right+k.right},z=n.modifiersData.offset;if(b===popper&&z){var F=z[a];Object.keys(U).forEach(function(Y){var X=[right,bottom].indexOf(Y)>=0?1:-1,K=[top,bottom].indexOf(Y)>=0?"y":"x";U[Y]+=F[K]*X})}return U}function computeAutoPlacement(n,e){e===void 0&&(e={});var r=e,t=r.placement,a=r.boundary,s=r.rootBoundary,u=r.padding,d=r.flipVariations,c=r.allowedAutoPlacements,g=c===void 0?placements:c,m=getVariation(t),_=m?d?variationPlacements:variationPlacements.filter(function(C){return getVariation(C)===m}):basePlacements,b=_.filter(function(C){return g.indexOf(C)>=0});b.length===0&&(b=_);var S=b.reduce(function(C,R){return C[R]=detectOverflow(n,{placement:R,boundary:a,rootBoundary:s,padding:u})[getBasePlacement(R)],C},{});return Object.keys(S).sort(function(C,R){return S[C]-S[R]})}function getExpandedFallbackPlacements(n){if(getBasePlacement(n)===auto)return[];var e=getOppositePlacement(n);return[getOppositeVariationPlacement(n),e,getOppositeVariationPlacement(e)]}function flip(n){var e=n.state,r=n.options,t=n.name;if(!e.modifiersData[t]._skip){for(var a=r.mainAxis,s=a===void 0?!0:a,u=r.altAxis,d=u===void 0?!0:u,c=r.fallbackPlacements,g=r.padding,m=r.boundary,_=r.rootBoundary,b=r.altBoundary,S=r.flipVariations,C=S===void 0?!0:S,R=r.allowedAutoPlacements,w=e.options.placement,k=getBasePlacement(w),$=k===w,O=c||($||!C?[getOppositePlacement(w)]:getExpandedFallbackPlacements(w)),I=[w].concat(O).reduce(function(ee,ie){return ee.concat(getBasePlacement(ie)===auto?computeAutoPlacement(e,{placement:ie,boundary:m,rootBoundary:_,padding:g,flipVariations:C,allowedAutoPlacements:R}):ie)},[]),x=e.rects.reference,P=e.rects.popper,B=new Map,j=!0,W=I[0],U=0;U<I.length;U++){var z=I[U],F=getBasePlacement(z),Y=getVariation(z)===start,X=[top,bottom].indexOf(F)>=0,K=X?"width":"height",te=detectOverflow(e,{placement:z,boundary:m,rootBoundary:_,altBoundary:b,padding:g}),Z=X?Y?right:left:Y?bottom:top;x[K]>P[K]&&(Z=getOppositePlacement(Z));var H=getOppositePlacement(Z),Q=[];if(s&&Q.push(te[F]<=0),d&&Q.push(te[Z]<=0,te[H]<=0),Q.every(function(ee){return ee})){W=z,j=!1;break}B.set(z,Q)}if(j)for(var ne=C?3:1,V=function(ie){var se=I.find(function(de){var le=B.get(de);if(le)return le.slice(0,ie).every(function(oe){return oe})});if(se)return W=se,"break"},J=ne;J>0;J--){var ce=V(J);if(ce==="break")break}e.placement!==W&&(e.modifiersData[t]._skip=!0,e.placement=W,e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(n,e,r){return r===void 0&&(r={x:0,y:0}),{top:n.top-e.height-r.y,right:n.right-e.width+r.x,bottom:n.bottom-e.height+r.y,left:n.left-e.width-r.x}}function isAnySideFullyClipped(n){return[top,right,bottom,left].some(function(e){return n[e]>=0})}function hide(n){var e=n.state,r=n.name,t=e.rects.reference,a=e.rects.popper,s=e.modifiersData.preventOverflow,u=detectOverflow(e,{elementContext:"reference"}),d=detectOverflow(e,{altBoundary:!0}),c=getSideOffsets(u,t),g=getSideOffsets(d,a,s),m=isAnySideFullyClipped(c),_=isAnySideFullyClipped(g);e.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:g,isReferenceHidden:m,hasPopperEscaped:_},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":_})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(n,e,r){var t=getBasePlacement(n),a=[left,top].indexOf(t)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},e,{placement:n})):r,u=s[0],d=s[1];return u=u||0,d=(d||0)*a,[left,right].indexOf(t)>=0?{x:d,y:u}:{x:u,y:d}}function offset(n){var e=n.state,r=n.options,t=n.name,a=r.offset,s=a===void 0?[0,0]:a,u=placements.reduce(function(m,_){return m[_]=distanceAndSkiddingToXY(_,e.rects,s),m},{}),d=u[e.placement],c=d.x,g=d.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=g),e.modifiersData[t]=u}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(n){var e=n.state,r=n.name;e.modifiersData[r]=computeOffsets({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(n){return n==="x"?"y":"x"}function preventOverflow(n){var e=n.state,r=n.options,t=n.name,a=r.mainAxis,s=a===void 0?!0:a,u=r.altAxis,d=u===void 0?!1:u,c=r.boundary,g=r.rootBoundary,m=r.altBoundary,_=r.padding,b=r.tether,S=b===void 0?!0:b,C=r.tetherOffset,R=C===void 0?0:C,w=detectOverflow(e,{boundary:c,rootBoundary:g,padding:_,altBoundary:m}),k=getBasePlacement(e.placement),$=getVariation(e.placement),O=!$,I=getMainAxisFromPlacement(k),x=getAltAxis(I),P=e.modifiersData.popperOffsets,B=e.rects.reference,j=e.rects.popper,W=typeof R=="function"?R(Object.assign({},e.rects,{placement:e.placement})):R,U=typeof W=="number"?{mainAxis:W,altAxis:W}:Object.assign({mainAxis:0,altAxis:0},W),z=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,F={x:0,y:0};if(!!P){if(s){var Y,X=I==="y"?top:left,K=I==="y"?bottom:right,te=I==="y"?"height":"width",Z=P[I],H=Z+w[X],Q=Z-w[K],ne=S?-j[te]/2:0,V=$===start?B[te]:j[te],J=$===start?-j[te]:-B[te],ce=e.elements.arrow,ee=S&&ce?getLayoutRect(ce):{width:0,height:0},ie=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),se=ie[X],de=ie[K],le=within(0,B[te],ee[te]),oe=O?B[te]/2-ne-le-se-U.mainAxis:V-le-se-U.mainAxis,pe=O?-B[te]/2+ne+le+de+U.mainAxis:J+le+de+U.mainAxis,fe=e.elements.arrow&&getOffsetParent(e.elements.arrow),Ce=fe?I==="y"?fe.clientTop||0:fe.clientLeft||0:0,ge=(Y=z==null?void 0:z[I])!=null?Y:0,Re=Z+oe-ge-Ce,Ee=Z+pe-ge,me=within(S?min(H,Re):H,Z,S?max(Q,Ee):Q);P[I]=me,F[I]=me-Z}if(d){var ve,we=I==="x"?top:left,ke=I==="x"?bottom:right,ue=P[x],he=x==="y"?"height":"width",ye=ue+w[we],be=ue-w[ke],_e=[top,left].indexOf(k)!==-1,Se=(ve=z==null?void 0:z[x])!=null?ve:0,Ae=_e?ye:ue-B[he]-j[he]-Se+U.altAxis,Te=_e?ue+B[he]+j[he]-Se-U.altAxis:be,N=S&&_e?withinMaxClamp(Ae,ue,Te):within(S?Ae:ye,ue,S?Te:be);P[x]=N,F[x]=N-ue}e.modifiersData[t]=F}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function getNodeScroll(n){return n===getWindow(n)||!isHTMLElement(n)?getWindowScroll(n):getHTMLElementScroll(n)}function isElementScaled(n){var e=n.getBoundingClientRect(),r=round(e.width)/n.offsetWidth||1,t=round(e.height)/n.offsetHeight||1;return r!==1||t!==1}function getCompositeRect(n,e,r){r===void 0&&(r=!1);var t=isHTMLElement(e),a=isHTMLElement(e)&&isElementScaled(e),s=getDocumentElement(e),u=getBoundingClientRect(n,a,r),d={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(t||!t&&!r)&&((getNodeName(e)!=="body"||isScrollParent(s))&&(d=getNodeScroll(e)),isHTMLElement(e)?(c=getBoundingClientRect(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):s&&(c.x=getWindowScrollBarX(s))),{x:u.left+d.scrollLeft-c.x,y:u.top+d.scrollTop-c.y,width:u.width,height:u.height}}function order(n){var e=new Map,r=new Set,t=[];n.forEach(function(s){e.set(s.name,s)});function a(s){r.add(s.name);var u=[].concat(s.requires||[],s.requiresIfExists||[]);u.forEach(function(d){if(!r.has(d)){var c=e.get(d);c&&a(c)}}),t.push(s)}return n.forEach(function(s){r.has(s.name)||a(s)}),t}function orderModifiers(n){var e=order(n);return modifierPhases.reduce(function(r,t){return r.concat(e.filter(function(a){return a.phase===t}))},[])}function debounce(n){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(n())})})),e}}function mergeByName(n){var e=n.reduce(function(r,t){var a=r[t.name];return r[t.name]=a?Object.assign({},a,t,{options:Object.assign({},a.options,t.options),data:Object.assign({},a.data,t.data)}):t,r},{});return Object.keys(e).map(function(r){return e[r]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return!e.some(function(t){return!(t&&typeof t.getBoundingClientRect=="function")})}function popperGenerator(n){n===void 0&&(n={});var e=n,r=e.defaultModifiers,t=r===void 0?[]:r,a=e.defaultOptions,s=a===void 0?DEFAULT_OPTIONS:a;return function(d,c,g){g===void 0&&(g=s);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,s),modifiersData:{},elements:{reference:d,popper:c},attributes:{},styles:{}},_=[],b=!1,S={state:m,setOptions:function(k){var $=typeof k=="function"?k(m.options):k;R(),m.options=Object.assign({},s,m.options,$),m.scrollParents={reference:isElement(d)?listScrollParents(d):d.contextElement?listScrollParents(d.contextElement):[],popper:listScrollParents(c)};var O=orderModifiers(mergeByName([].concat(t,m.options.modifiers)));return m.orderedModifiers=O.filter(function(I){return I.enabled}),C(),S.update()},forceUpdate:function(){if(!b){var k=m.elements,$=k.reference,O=k.popper;if(!!areValidElements($,O)){m.rects={reference:getCompositeRect($,getOffsetParent(O),m.options.strategy==="fixed"),popper:getLayoutRect(O)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(U){return m.modifiersData[U.name]=Object.assign({},U.data)});for(var I=0;I<m.orderedModifiers.length;I++){if(m.reset===!0){m.reset=!1,I=-1;continue}var x=m.orderedModifiers[I],P=x.fn,B=x.options,j=B===void 0?{}:B,W=x.name;typeof P=="function"&&(m=P({state:m,options:j,name:W,instance:S})||m)}}}},update:debounce(function(){return new Promise(function(w){S.forceUpdate(),w(m)})}),destroy:function(){R(),b=!0}};if(!areValidElements(d,c))return S;S.setOptions(g).then(function(w){!b&&g.onFirstUpdate&&g.onFirstUpdate(w)});function C(){m.orderedModifiers.forEach(function(w){var k=w.name,$=w.options,O=$===void 0?{}:$,I=w.effect;if(typeof I=="function"){var x=I({state:m,name:k,instance:S,options:O}),P=function(){};_.push(x||P)}})}function R(){_.forEach(function(w){return w()}),_=[]}return S}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function createPopperActions(n){let e=null,r,t,a=n;const s=()=>{r!==void 0&&t!==void 0&&(e=createPopper(r,t,a))},u=()=>{e!==null&&(e.destroy(),e=null)},d=m=>"subscribe"in m?(c(m),{}):(r=m,s(),{destroy(){u()}}),c=m=>{const _=m.subscribe(b=>{r===void 0?(r=b,s()):(Object.assign(r,b),e==null||e.update())});onDestroy(_)};return[d,(m,_)=>(t=m,a={...n,..._},s(),{update(b){a={...n,...b},e==null||e.setOptions(a)},destroy(){u()}}),()=>e]}const HelpTooltips_svelte_svelte_type_style_lang="";function get_each_context$2(n,e,r){const t=n.slice();return t[1]=e[r],t}function create_if_block$3(n){let e,r=n[1].label+"",t,a,s,u,d,c;return{c(){e=element("div"),t=text(r),a=space(),attr(e,"class","popper-tooltip help-tooltip svelte-xhlzif")},m(g,m){insert(g,e,m),append(e,t),append(e,a),u=!0,d||(c=action_destroyer(n[1].popperContent(e)),d=!0)},p(g,m){(!u||m&1)&&r!==(r=g[1].label+"")&&set_data(t,r)},i(g){u||(add_render_callback(()=>{s||(s=create_bidirectional_transition(e,fade,{duration:300},!0)),s.run(1)}),u=!0)},o(g){s||(s=create_bidirectional_transition(e,fade,{duration:300},!1)),s.run(0),u=!1},d(g){g&&detach(e),g&&s&&s.end(),d=!1,c()}}}function create_each_block$2(n){let e,r,t=n[1].visible&&create_if_block$3(n);return{c(){t&&t.c(),e=empty()},m(a,s){t&&t.m(a,s),insert(a,e,s),r=!0},p(a,s){a[1].visible?t?(t.p(a,s),s&1&&transition_in(t,1)):(t=create_if_block$3(a),t.c(),transition_in(t,1),t.m(e.parentNode,e)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(a){r||(transition_in(t),r=!0)},o(a){transition_out(t),r=!1},d(a){t&&t.d(a),a&&detach(e)}}}function create_fragment$9(n){let e,r,t=n[0],a=[];for(let u=0;u<t.length;u+=1)a[u]=create_each_block$2(get_each_context$2(n,t,u));const s=u=>transition_out(a[u],1,1,()=>{a[u]=null});return{c(){for(let u=0;u<a.length;u+=1)a[u].c();e=empty()},m(u,d){for(let c=0;c<a.length;c+=1)a[c].m(u,d);insert(u,e,d),r=!0},p(u,[d]){if(d&1){t=u[0];let c;for(c=0;c<t.length;c+=1){const g=get_each_context$2(u,t,c);a[c]?(a[c].p(g,d),transition_in(a[c],1)):(a[c]=create_each_block$2(g),a[c].c(),transition_in(a[c],1),a[c].m(e.parentNode,e))}for(group_outros(),c=t.length;c<a.length;c+=1)s(c);check_outros()}},i(u){if(!r){for(let d=0;d<t.length;d+=1)transition_in(a[d]);r=!0}},o(u){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)transition_out(a[d]);r=!1},d(u){destroy_each(a,u),u&&detach(e)}}}let tooltips=nStore([]);const addTooltip=(n,e,r=!0)=>{const{tooltip:t,showTooltip:a,showTooltipTimeout:s,hideTooltip:u,destroyTooltip:d}=newTooltip(n,e);return r&&(n.addEventListener("pointerenter",s),n.addEventListener("pointerout",u),n.addEventListener("focusin",s),n.addEventListener("focusout",u),n.addEventListener("mousedown",u)),{tooltip:t,showTooltip:a,showTooltipTimeout:s,hideTooltip:u,destroyTooltip:d,destroy(){r&&(n.removeEventListener("pointerenter",a),n.removeEventListener("pointerout",u),n.removeEventListener("focusin",a),n.removeEventListener("focusout",u),n.removeEventListener("mousedown",u)),d()}}},newTooltip=(n,e)=>{const[r,t]=createPopperActions({placement:e.placement||"top",strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,10]}}]});r(n);const a={label:e.label,visible:!1,popperContent:t};tooltips.update(d=>(d.push(a),d));let s=null;const u=()=>{a.visible=!0,tooltips.update(d=>d)};return{tooltip:a,showTooltip:u,showTooltipTimeout:()=>{s=setTimeout(u,e.timeout!=null?e.timeout:750)},hideTooltip:()=>{clearTimeout(s),a.visible=!1,n.blur(),tooltips.update(d=>d)},destroyTooltip:()=>{clearTimeout(s),tooltips.update(d=>d.filter(c=>c!=a))}}};function instance$7(n,e,r){let t;return component_subscribe(n,tooltips,a=>r(0,t=a)),[t]}class HelpTooltips extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$7,create_fragment$9,safe_not_equal,{})}}const LEFT_X_AXIS_INDEX=0,LEFT_Y_AXIS_INDEX=1,RIGHT_X_AXIS_INDEX=2,RIGHT_Y_AXIS_INDEX=3,gpadHelpTooltips=[];class GamepadController{constructor(e=250){this.gpadUi=new GamepadUi,this.touchedGpadButtonCount=0,this.throttleDelay=e,this.gpadEmulator=new y(.1),this.gpadApiWrapper=new G({axisDeadZone:.05,updateDelay:0,buttonConfigs:[]}),this.gpadApiWrapper.gamepadApiSupported()||this.gpadUi.showNotSupported(),this.gpadApiWrapper.onGamepadConnect(this.gamepadConnectDisconnectHandler.bind(this)),this.gpadApiWrapper.onGamepadDisconnect(this.gamepadConnectDisconnectHandler.bind(this)),this.gpadApiWrapper.onGamepadAxisChange(this.handleAxisChange.bind(this)),this.gpadApiWrapper.onGamepadButtonChange(this.handleButtonChange.bind(this)),this.setupGamepadEvents(this.throttleDelay)}setupOnscreenGamepad(e){this.gpadEmulator.AddEmulatedGamepad(0,!0,T,A),this.setupGamepadDisplay(0,e),this.setupEmulatedGamepadInput(0,e),this.addEmulatedGamepadKeyboardBindings(0),this.addHelpTooltips()}setupGamepadEvents(e){showToastMessage("gamepad throttle delay: "+e),this.throttleDelay=e,this.clearExternalEventListenerCallbacks(),this.setupExternalEventListenerCallbacks((r,t)=>{if(r.buttons[12].pressed){let a=this.throttleDelay+1;this.setupGamepadEvents(a)}else if(r.buttons[13].pressed){let a=Math.max(this.throttleDelay-1,1);this.setupGamepadEvents(a)}else r.buttons[14].pressed?this.setupGamepadEvents(10):r.buttons[15].pressed&&this.setupGamepadEvents(100)},r=>{var{thrustVector:t,turnRate:a}=calculateDesiredMotion(r.axes);RovActions$1.moveRov(t,a)})}gamepadConnectDisconnectHandler(){const e=navigator.getGamepads();var r=e.reduce((t,a)=>a?t+1:t,0);r!=0&&e[0].emulated&&(r-=1),this.gpadUi.showGamepadStatus(r),r>1&&console.log("WARNING: More than one gamepad connected!",e)}setupExternalEventListenerCallbacks(e,r){this.onButtonChange=throttle(e,this.throttleDelay,{trailing:!0,leading:!0}),this.onAxisChange=throttle(r,this.throttleDelay,{trailing:!0,leading:!0})}clearExternalEventListenerCallbacks(){this.onButtonChange=null,this.onAxisChange=null}handleButtonChange(e,r,t){if(!(e!=0||!r||!r.buttons)){this.onButtonChange&&this.onButtonChange(r,t),(t[8]&&t[8].released||t[9]&&t[9].released)&&this.gpadUi.toggleGamepadHelpScreen();for(let a=0;a<t.length;a++)t[a]&&t[a].touchDown?gpadHelpTooltips[a]&&gpadHelpTooltips[a].showTooltipTimeout():t[a]&&t[a].touchUp&&gpadHelpTooltips[a]&&gpadHelpTooltips[a].hideTooltip()}}handleAxisChange(e,r){if(e!=0||!r||!r.axes)return;this.onAxisChange&&this.onAxisChange(r);const t=[{axisRange:14,xValue:r.axes[0]||0,yValue:r.axes[1]||0,thumbStickElement:document.getElementById("stick_left"),upIndicatorElement:document.getElementById("l_stick_up_direction_highlight"),downIndicatorElement:document.getElementById("l_stick_down_direction_highlight"),leftIndicatorElement:document.getElementById("l_stick_left_direction_highlight"),rightIndicatorElement:document.getElementById("l_stick_right_direction_highlight"),upHelpText:"Forward",downHelpText:"Back",leftHelpText:"Turn Left",rightHelpText:"Turn Right"},{axisRange:14,xValue:r.axes[2]||0,yValue:r.axes[3]||0,thumbStickElement:document.getElementById("stick_right"),upIndicatorElement:document.getElementById("r_stick_up_direction_highlight"),downIndicatorElement:document.getElementById("r_stick_down_direction_highlight"),leftIndicatorElement:document.getElementById("r_stick_left_direction_highlight"),rightIndicatorElement:document.getElementById("r_stick_right_direction_highlight"),upHelpText:"Up",downHelpText:"Down",leftHelpText:"Strafe Left",rightHelpText:"Strafe Right"}];this.gpadUi.handleGamepadVisualFeedbackAxisEvents(t,.4)}setupGamepadDisplay(e,r){r.querySelectorAll("#stick_right, #stick_left").forEach(s=>{o$1(s)});const t=ONSCREEN_GPAD_BUTTON_LABELS.map((s,u)=>s.includes("trigger")?{type:v.variable,highlight:r.querySelector("#"+s+"_highlight"),buttonElement:r.querySelector("#"+s),direction:l$2.down,directionHighlight:r.querySelector("#"+s+"_direction_highlight"),movementRange:10}:{type:v.onOff,highlight:r.querySelector("#"+s+"_highlight")}),a=[{joystickElement:r.querySelector("#stick_left"),xAxisIndex:0,yAxisIndex:1,movementRange:10,highlights:{[l$2.up]:r.querySelector("#l_stick_up_direction_highlight"),[l$2.down]:r.querySelector("#l_stick_down_direction_highlight"),[l$2.left]:r.querySelector("#l_stick_left_direction_highlight"),[l$2.right]:r.querySelector("#l_stick_right_direction_highlight")}},{joystickElement:r.querySelector("#stick_right"),xAxisIndex:2,yAxisIndex:3,movementRange:10,highlights:{[l$2.up]:r.querySelector("#r_stick_up_direction_highlight"),[l$2.down]:r.querySelector("#r_stick_down_direction_highlight"),[l$2.left]:r.querySelector("#r_stick_left_direction_highlight"),[l$2.right]:r.querySelector("#r_stick_right_direction_highlight")}}];new D({gamepadIndex:e,pressedHighlightClass:"pressed",touchedHighlightClass:"touched",moveDirectionHighlightClass:"moved",buttons:t,sticks:a},this.gpadApiWrapper)}setupEmulatedGamepadInput(e,r){const t=ONSCREEN_GPAD_BUTTON_LABELS.map((s,u)=>s.includes("trigger")?{type:v.variable,buttonIndex:u,tapTarget:r.querySelector("#"+s+"_touch_target"),dragDistance:50,lockTargetWhilePressed:!0,directions:{[l$2.up]:!1,[l$2.down]:!0,[l$2.left]:!1,[l$2.right]:!1}}:{type:v.onOff,buttonIndex:u,lockTargetWhilePressed:s.includes("stick"),tapTarget:r.querySelector("#"+s+"_touch_target")});this.gpadEmulator.AddDisplayButtonEventListeners(e,t);const a=[{tapTarget:r.querySelector("#gamepad-joystick-touch-area-left"),dragDistance:30,xAxisIndex:0,yAxisIndex:1,lockTargetWhilePressed:!0,directions:{[l$2.up]:!0,[l$2.down]:!0,[l$2.left]:!0,[l$2.right]:!0}},{tapTarget:r.querySelector("#gamepad-joystick-touch-area-right"),dragDistance:30,xAxisIndex:2,yAxisIndex:3,lockTargetWhilePressed:!0,directions:{[l$2.up]:!0,[l$2.down]:!0,[l$2.left]:!0,[l$2.right]:!0}},{tapTarget:r.querySelector("#stick_button_left_touch_target"),dragDistance:30,xAxisIndex:0,yAxisIndex:1,lockTargetWhilePressed:!0,directions:{[l$2.up]:!0,[l$2.down]:!0,[l$2.left]:!0,[l$2.right]:!0}},{tapTarget:r.querySelector("#stick_button_right_touch_target"),dragDistance:30,xAxisIndex:2,yAxisIndex:3,lockTargetWhilePressed:!0,directions:{[l$2.up]:!0,[l$2.down]:!0,[l$2.left]:!0,[l$2.right]:!0}}];this.gpadEmulator.AddDisplayJoystickEventListeners(e,a)}addEmulatedGamepadKeyboardBindings(e){const r=(t,a)=>{const s=parseInt(a.key);a.key==="a"?this.gpadEmulator.MoveAxis(e,LEFT_X_AXIS_INDEX,t?-1:0):a.key==="d"?this.gpadEmulator.MoveAxis(e,LEFT_X_AXIS_INDEX,t?1:0):a.key==="w"?this.gpadEmulator.MoveAxis(e,LEFT_Y_AXIS_INDEX,t?-1:0):a.key==="s"?this.gpadEmulator.MoveAxis(e,LEFT_Y_AXIS_INDEX,t?1:0):a.key==="ArrowLeft"?(this.gpadEmulator.MoveAxis(e,RIGHT_X_AXIS_INDEX,t?-1:0),a.preventDefault()):a.key==="ArrowRight"?(this.gpadEmulator.MoveAxis(e,RIGHT_X_AXIS_INDEX,t?1:0),a.preventDefault()):a.key==="ArrowUp"?(this.gpadEmulator.MoveAxis(e,RIGHT_Y_AXIS_INDEX,t?-1:0),a.preventDefault()):a.key==="ArrowDown"?(this.gpadEmulator.MoveAxis(e,RIGHT_Y_AXIS_INDEX,t?1:0),a.preventDefault()):isNaN(s)?a.keyCode&&this.gpadEmulator.PressButton(e,a.keyCode-66+10,t?1:0,t):this.gpadEmulator.PressButton(e,s,t?1:0,t)};window.onkeydown=t=>r(!0,t),window.onkeyup=t=>r(!1,t)}testGamepadJoysticks(){setInterval(()=>{this.gpadEmulator.MoveAxis(0,0,Math.random()*2-1),this.gpadEmulator.MoveAxis(0,1,Math.random()*2-1),this.gpadEmulator.MoveAxis(0,2,Math.random()*2-1),this.gpadEmulator.MoveAxis(0,3,Math.random()*2-1)},10)}addHelpTooltips(){ONSCREEN_GPAD_BUTTON_LABELS.forEach((e,r)=>{const t=document.getElementById(e+"_touch_target");t&&(gpadHelpTooltips[r]=addTooltip(t,{label:GAME_CONTROLLER_BUTTON_CONFIG[r].helpLabel,placement:GAME_CONTROLLER_BUTTON_CONFIG[r].tooltipPlacement},!1))})}}const re=class{static sendActionAndWaitForDone(e,r){let t="";MessageHandler.sendRovMessage(e,a=>{const s=a.val||"";t+=s+`
`;const u=a.status;u&&r&&(u=="done"?r(t):u=="error"&&r("Error: "+t))})}static startPingLoop(){re.pingLoopIntervalId||(re.pingLoopIntervalId=setInterval(()=>{MessageHandler.sendRovMessage({action:RovApiAction.ping,val:Date.now()},null,!0)},2e3))}static stopPingLoop(){clearInterval(re.pingLoopIntervalId),re.pingLoopIntervalId=null}static showCommandOutputPopup(e,r,t){let a=showScrollableTextPopup(e);return a(r),s=>{let u=s.status;u=="password-required"||u=="password-invalid"||u=="password-accepted"||u=="token-accepted"||(u=="error"?a(`
Error:
`+s.val):s.val?a(s.val):s.status=="done"&&a(t))}}static connectToRov(){const e=connectionManager.get();e&&e.connectToCurrentTargetRov()}static disconnectFromRov(){const e=connectionManager.get();e&&e.disconnectFromCurrentRov()}static switchToNextRovPeerId(){rovPeerIdEndNumber.update(e=>(e++,localStorage.setItem("rovPeerIdEndNumber",e.toString()),e)),setCurrentRovName(),re.disconnectFromRov()}static switchToPrevRovPeerId(){rovPeerIdEndNumber.update(e=>(e=Math.max(e-1,0),localStorage.setItem("rovPeerIdEndNumber",e.toString()),e)),setCurrentRovName(),re.disconnectFromRov()}static takeControl(){MessageHandler.sendRovMessage({action:RovApiAction.take_control},null)}static moveRov(e,r){console.info("moveRovEq",arraysEqual(e,re.lastMove.thrustVector),r==re.lastMove.turnRate),!(arraysEqual(e,re.lastMove.thrustVector)&&r==re.lastMove.turnRate)&&(re.lastMove={thrustVector:e,turnRate:r},MessageHandler.sendRovMessage({action:RovApiAction.move,val:{thrustVector:e,turnRate:r}},null,!0))}static toggleLights(){MessageHandler.sendRovMessage({action:RovApiAction.toogle_lights},null)}};let RovActions=re;q(RovActions,"pingLoopIntervalId",null),q(RovActions,"lastMove",{thrustVector:[0,0,0],turnRate:0}),q(RovActions,"shutdownRov",()=>{showConfirmationMsg("Are you sure you want to shutdown the ROV?",e=>{showToastMessage("Sending Shutdown Request..."),re.sendActionAndWaitForDone({action:"shutdown_rov"},r=>{showToastMessage("Please wait 20 seconds before unplugging"),showToastMessage("ROV:"+r),re.disconnectFromRov()})})}),q(RovActions,"rebootRov",()=>{showConfirmationMsg("Are you sure you want to reboot the ROV?",e=>{showToastMessage("Sending Reboot Request..."),re.sendActionAndWaitForDone({action:"reboot_rov"},r=>{showToastMessage("Press Connect again in about 30 seconds"),showToastMessage("ROV:"+r),re.disconnectFromRov()})})}),q(RovActions,"restartRovServices",()=>{showConfirmationMsg("Are you sure you want to restart services? - The ROV will stop responding for about a minute and then you can re-connect.",()=>{let e=re.showCommandOutputPopup("Restarting ROV Services",`Sending Service Restart Request (Please Wait)...
`,`

Done.`);MessageHandler.sendRovMessage({action:"restart_rov_services"},e)})}),q(RovActions,"getRovStatusReport",()=>{let e=re.showCommandOutputPopup("ROV Status Report",`Sending Status Request (Please Wait)...
`,`

Done.`);MessageHandler.sendRovMessage({action:"rov_status_report"},e)}),q(RovActions,"getRovLogs",()=>{let e=re.showCommandOutputPopup("ROV Logs",`Sending Request (Please Wait)...
`,`

Done.`);MessageHandler.sendRovMessage({action:"rov_logs"},e)}),q(RovActions,"enableRovWifi",()=>{showToastMessage("Sending Enable Wifi Command..."),re.sendActionAndWaitForDone({action:"enable_wifi"},e=>{showToastMessage("Wifi Enabled! "+e)})}),q(RovActions,"disableRovWifi",()=>{showConfirmationMsg("Are you sure you want to disable rov wifi? If the ROV is connected via wifi, don't do this!",()=>{showToastMessage("Sending Disable Wifi Command..."),re.sendActionAndWaitForDone({action:"disable_wifi"},e=>{showToastMessage("Wifi Disabled! "+e)})})});window.RovActions=RovActions;const runSiteInitMachine=n=>{function e(a){t&&t.send(a)}const r=createMachine({context:{peerServerConfig:{},rovIpAddr:null},predictableActionArguments:!0,preserveActionOrder:!0,id:"siteInit",initial:"Checking_Internet_Access",states:{Checking_Internet_Access:{entry:"checkInternetAvailable",on:{URL_IS_ROV_IP:{actions:["setLocalPeerServerConfig","showHttpGamepadSupportDisabledAlert"],target:"#siteInit.Site_Ready"},INTERNET_AVAILABLE:{actions:"setCloudPeerServerConfig",target:"#siteInit.Site_Ready"},INTERNET_OFFLINE:{actions:["showIpScanButton","hideLoadingUi"],target:"#siteInit.Waiting_For_User_Scan_Button_Press"}}},Waiting_For_User_Scan_Button_Press:{entry:"setupWaitForUserScanButtonPress",on:{SCAN_BUTTON_CLICKED:{actions:["showIpScanningUi","hideIpScanButton"],target:"#siteInit.Scanning_For_ROV_IP"}}},Scanning_For_ROV_IP:{entry:"scanForRovIP",on:{ROV_IP_FOUND:{actions:"setRovIpAddr",target:"#siteInit.Redirect_Browser_To_ROV_IP"},IP_SCANNING_ERROR:{actions:["showIpScanButton","hideLoadingUi"],target:"#siteInit.Waiting_For_User_Scan_Button_Press"}}},Redirect_Browser_To_ROV_IP:{entry:"redirectBrowserToRovIp"},Site_Ready:{entry:"siteReady",type:"final"}}},{actions:{setCloudPeerServerConfig:()=>{peerServerConfig.set(peerServerCloudOptions)},setLocalPeerServerConfig:()=>{peerServerConfig.set(peerServerLocalOptions)},setRovIpAddr:(a,s)=>{rovIpAddr.set(s.data)},showIpScanButton:()=>{showToastMessage("Click scan to find the ROV locally."),showToastMessage("No internet connection.")},hideIpScanButton:()=>{},hideLoadingUi:()=>{hideLoadingUi(LOADING_MESSAGE.ipScan),hideLoadingUi(LOADING_MESSAGE.internetCheck)},showIpScanningUi:()=>{showLoadingUi(LOADING_MESSAGE.ipScan)},redirectBrowserToRovIp:(a,s)=>{window.location.href=`http://${s.data}`},siteReady:()=>{n("SITE_READY")},checkInternetAvailable:()=>{showLoadingUi(LOADING_MESSAGE.internetCheck);const a=peerServerCloudOptions;isInternetAvailable((a.secure?"https://":"http://")+a.host+":"+a.port).then(s=>{if(s)e("INTERNET_AVAILABLE");else{const u=window.location.host.split(".");u.length==4&&!isNaN(Number(u[3]))||u.length==2&&u[1]=="local"?e("URL_IS_ROV_IP"):e("INTERNET_OFFLINE")}})},setupWaitForUserScanButtonPress:()=>{const a=()=>{e("SCAN_BUTTON_CLICKED")},s=document.getElementById("scan_for_ip_btn");return s.addEventListener("click",a),()=>{s.removeEventListener("click",a)}},scanForRovIP:()=>{showLoadingUi(LOADING_MESSAGE.ipScan)}},guards:{}}),t=interpret(r,{devTools:debugXstateMode.get()}).start();return t};function get_each_context$1(n,e,r){const t=n.slice();return t[5]=e[r],t}function get_each_context_1$1(n,e,r){const t=n.slice();return t[5]=e[r],t}function get_each_context_2(n,e,r){const t=n.slice();return t[5]=e[r],t}function get_each_context_3(n,e,r){const t=n.slice();return t[5]=e[r],t}function get_each_context_4(n,e,r){const t=n.slice();return t[5]=e[r],t}function get_each_context_5(n,e,r){const t=n.slice();return t[5]=e[r],t}function create_each_block_5(n){let e,r=[n[5]],t={};for(let a=0;a<r.length;a+=1)t=assign$3(t,r[a]);return{c(){e=svg_element("path"),set_svg_attributes(e,t)},m(a,s){insert(a,e,s)},p(a,s){set_svg_attributes(e,t=get_spread_update(r,[s&2&&a[5]]))},d(a){a&&detach(e)}}}function create_each_block_4(n){let e,r=[n[5]],t={};for(let a=0;a<r.length;a+=1)t=assign$3(t,r[a]);return{c(){e=svg_element("rect"),set_svg_attributes(e,t)},m(a,s){insert(a,e,s)},p(a,s){set_svg_attributes(e,t=get_spread_update(r,[s&2&&a[5]]))},d(a){a&&detach(e)}}}function create_each_block_3(n){let e,r=[n[5]],t={};for(let a=0;a<r.length;a+=1)t=assign$3(t,r[a]);return{c(){e=svg_element("circle"),set_svg_attributes(e,t)},m(a,s){insert(a,e,s)},p(a,s){set_svg_attributes(e,t=get_spread_update(r,[s&2&&a[5]]))},d(a){a&&detach(e)}}}function create_each_block_2(n){let e,r=[n[5]],t={};for(let a=0;a<r.length;a+=1)t=assign$3(t,r[a]);return{c(){e=svg_element("polygon"),set_svg_attributes(e,t)},m(a,s){insert(a,e,s)},p(a,s){set_svg_attributes(e,t=get_spread_update(r,[s&2&&a[5]]))},d(a){a&&detach(e)}}}function create_each_block_1$1(n){let e,r=[n[5]],t={};for(let a=0;a<r.length;a+=1)t=assign$3(t,r[a]);return{c(){e=svg_element("polyline"),set_svg_attributes(e,t)},m(a,s){insert(a,e,s)},p(a,s){set_svg_attributes(e,t=get_spread_update(r,[s&2&&a[5]]))},d(a){a&&detach(e)}}}function create_each_block$1(n){let e,r=[n[5]],t={};for(let a=0;a<r.length;a+=1)t=assign$3(t,r[a]);return{c(){e=svg_element("line"),set_svg_attributes(e,t)},m(a,s){insert(a,e,s)},p(a,s){set_svg_attributes(e,t=get_spread_update(r,[s&2&&a[5]]))},d(a){a&&detach(e)}}}function create_fragment$8(n){var x,P,B,j,W,U,z;let e,r,t,a,s,u,d=((x=n[1])==null?void 0:x.path)??[],c=[];for(let F=0;F<d.length;F+=1)c[F]=create_each_block_5(get_each_context_5(n,d,F));let g=((P=n[1])==null?void 0:P.rect)??[],m=[];for(let F=0;F<g.length;F+=1)m[F]=create_each_block_4(get_each_context_4(n,g,F));let _=((B=n[1])==null?void 0:B.circle)??[],b=[];for(let F=0;F<_.length;F+=1)b[F]=create_each_block_3(get_each_context_3(n,_,F));let S=((j=n[1])==null?void 0:j.polygon)??[],C=[];for(let F=0;F<S.length;F+=1)C[F]=create_each_block_2(get_each_context_2(n,S,F));let R=((W=n[1])==null?void 0:W.polyline)??[],w=[];for(let F=0;F<R.length;F+=1)w[F]=create_each_block_1$1(get_each_context_1$1(n,R,F));let k=((U=n[1])==null?void 0:U.line)??[],$=[];for(let F=0;F<k.length;F+=1)$[F]=create_each_block$1(get_each_context$1(n,k,F));let O=[(z=n[1])==null?void 0:z.a,{xmlns:"http://www.w3.org/2000/svg"},{width:n[0]},{height:n[0]},n[2]],I={};for(let F=0;F<O.length;F+=1)I=assign$3(I,O[F]);return{c(){e=svg_element("svg");for(let F=0;F<c.length;F+=1)c[F].c();r=empty();for(let F=0;F<m.length;F+=1)m[F].c();t=empty();for(let F=0;F<b.length;F+=1)b[F].c();a=empty();for(let F=0;F<C.length;F+=1)C[F].c();s=empty();for(let F=0;F<w.length;F+=1)w[F].c();u=empty();for(let F=0;F<$.length;F+=1)$[F].c();set_svg_attributes(e,I)},m(F,Y){insert(F,e,Y);for(let X=0;X<c.length;X+=1)c[X].m(e,null);append(e,r);for(let X=0;X<m.length;X+=1)m[X].m(e,null);append(e,t);for(let X=0;X<b.length;X+=1)b[X].m(e,null);append(e,a);for(let X=0;X<C.length;X+=1)C[X].m(e,null);append(e,s);for(let X=0;X<w.length;X+=1)w[X].m(e,null);append(e,u);for(let X=0;X<$.length;X+=1)$[X].m(e,null)},p(F,[Y]){var X,K,te,Z,H,Q,ne;if(Y&2){d=((X=F[1])==null?void 0:X.path)??[];let V;for(V=0;V<d.length;V+=1){const J=get_each_context_5(F,d,V);c[V]?c[V].p(J,Y):(c[V]=create_each_block_5(J),c[V].c(),c[V].m(e,r))}for(;V<c.length;V+=1)c[V].d(1);c.length=d.length}if(Y&2){g=((K=F[1])==null?void 0:K.rect)??[];let V;for(V=0;V<g.length;V+=1){const J=get_each_context_4(F,g,V);m[V]?m[V].p(J,Y):(m[V]=create_each_block_4(J),m[V].c(),m[V].m(e,t))}for(;V<m.length;V+=1)m[V].d(1);m.length=g.length}if(Y&2){_=((te=F[1])==null?void 0:te.circle)??[];let V;for(V=0;V<_.length;V+=1){const J=get_each_context_3(F,_,V);b[V]?b[V].p(J,Y):(b[V]=create_each_block_3(J),b[V].c(),b[V].m(e,a))}for(;V<b.length;V+=1)b[V].d(1);b.length=_.length}if(Y&2){S=((Z=F[1])==null?void 0:Z.polygon)??[];let V;for(V=0;V<S.length;V+=1){const J=get_each_context_2(F,S,V);C[V]?C[V].p(J,Y):(C[V]=create_each_block_2(J),C[V].c(),C[V].m(e,s))}for(;V<C.length;V+=1)C[V].d(1);C.length=S.length}if(Y&2){R=((H=F[1])==null?void 0:H.polyline)??[];let V;for(V=0;V<R.length;V+=1){const J=get_each_context_1$1(F,R,V);w[V]?w[V].p(J,Y):(w[V]=create_each_block_1$1(J),w[V].c(),w[V].m(e,u))}for(;V<w.length;V+=1)w[V].d(1);w.length=R.length}if(Y&2){k=((Q=F[1])==null?void 0:Q.line)??[];let V;for(V=0;V<k.length;V+=1){const J=get_each_context$1(F,k,V);$[V]?$[V].p(J,Y):($[V]=create_each_block$1(J),$[V].c(),$[V].m(e,null))}for(;V<$.length;V+=1)$[V].d(1);$.length=k.length}set_svg_attributes(e,I=get_spread_update(O,[Y&2&&((ne=F[1])==null?void 0:ne.a),{xmlns:"http://www.w3.org/2000/svg"},Y&1&&{width:F[0]},Y&1&&{height:F[0]},Y&4&&F[2]]))},i:noop$1,o:noop$1,d(F){F&&detach(e),destroy_each(c,F),destroy_each(m,F),destroy_each(b,F),destroy_each(C,F),destroy_each(w,F),destroy_each($,F)}}}function instance$6(n,e,r){let t;const a=["src","size","theme"];let s=compute_rest_props(e,a),{src:u}=e,{size:d="100%"}=e,{theme:c="default"}=e;if(d!=="100%"&&d.slice(-1)!="x"&&d.slice(-1)!="m"&&d.slice(-1)!="%")try{d=parseInt(d)+"px"}catch{d="100%"}return n.$$set=g=>{e=assign$3(assign$3({},e),exclude_internal_props(g)),r(2,s=compute_rest_props(e,a)),"src"in g&&r(3,u=g.src),"size"in g&&r(0,d=g.size),"theme"in g&&r(4,c=g.theme)},n.$$.update=()=>{n.$$.dirty&24&&r(1,t=(u==null?void 0:u[c])??(u==null?void 0:u.default))},[d,t,s,u,c]}class Icon extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$6,create_fragment$8,safe_not_equal,{src:3,size:0,theme:4})}}const AdjustmentsHorizontal={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M10 3.75a2 2 0 10-4 0 2 2 0 004 0zM17.25 4.5a.75.75 0 000-1.5h-5.5a.75.75 0 000 1.5h5.5zM5 3.75a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5a.75.75 0 01.75.75zM4.25 17a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5zM17.25 17a.75.75 0 000-1.5h-5.5a.75.75 0 000 1.5h5.5zM9 10a.75.75 0 01-.75.75h-5.5a.75.75 0 010-1.5h5.5A.75.75 0 019 10zM17.25 10.75a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5zM14 10a2 2 0 10-4 0 2 2 0 004 0zM10 16.25a2 2 0 10-4 0 2 2 0 004 0z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{d:"M18.75 12.75h1.5a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5zM12 6a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 0112 6zM12 18a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 0112 18zM3.75 6.75h1.5a.75.75 0 100-1.5h-1.5a.75.75 0 000 1.5zM5.25 18.75h-1.5a.75.75 0 010-1.5h1.5a.75.75 0 010 1.5zM3 12a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 013 12zM9 3.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5zM12.75 12a2.25 2.25 0 114.5 0 2.25 2.25 0 01-4.5 0zM9 15.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z"}]}},ArrowsPointingIn={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M3.28 2.22a.75.75 0 00-1.06 1.06L5.44 6.5H2.75a.75.75 0 000 1.5h4.5A.75.75 0 008 7.25v-4.5a.75.75 0 00-1.5 0v2.69L3.28 2.22zM13.5 2.75a.75.75 0 00-1.5 0v4.5c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-2.69l3.22-3.22a.75.75 0 00-1.06-1.06L13.5 5.44V2.75zM3.28 17.78l3.22-3.22v2.69a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.69l-3.22 3.22a.75.75 0 101.06 1.06zM13.5 14.56l3.22 3.22a.75.75 0 101.06-1.06l-3.22-3.22h2.69a.75.75 0 000-1.5h-4.5a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0v-2.69z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M3.22 3.22a.75.75 0 011.06 0l3.97 3.97V4.5a.75.75 0 011.5 0V9a.75.75 0 01-.75.75H4.5a.75.75 0 010-1.5h2.69L3.22 4.28a.75.75 0 010-1.06zm17.56 0a.75.75 0 010 1.06l-3.97 3.97h2.69a.75.75 0 010 1.5H15a.75.75 0 01-.75-.75V4.5a.75.75 0 011.5 0v2.69l3.97-3.97a.75.75 0 011.06 0zM3.75 15a.75.75 0 01.75-.75H9a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-2.69l-3.97 3.97a.75.75 0 01-1.06-1.06l3.97-3.97H4.5a.75.75 0 01-.75-.75zm10.5 0a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-2.69l3.97 3.97a.75.75 0 11-1.06 1.06l-3.97-3.97v2.69a.75.75 0 01-1.5 0V15z","clip-rule":"evenodd"}]}},ArrowsPointingOut={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M13.28 7.78l3.22-3.22v2.69a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.69l-3.22 3.22a.75.75 0 001.06 1.06zM2 17.25v-4.5a.75.75 0 011.5 0v2.69l3.22-3.22a.75.75 0 011.06 1.06L4.56 16.5h2.69a.75.75 0 010 1.5h-4.5a.747.747 0 01-.75-.75zM12.22 13.28l3.22 3.22h-2.69a.75.75 0 000 1.5h4.5a.747.747 0 00.75-.75v-4.5a.75.75 0 00-1.5 0v2.69l-3.22-3.22a.75.75 0 10-1.06 1.06zM3.5 4.56l3.22 3.22a.75.75 0 001.06-1.06L4.56 3.5h2.69a.75.75 0 000-1.5h-4.5a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0V4.56z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M15 3.75a.75.75 0 01.75-.75h4.5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0V5.56l-3.97 3.97a.75.75 0 11-1.06-1.06l3.97-3.97h-2.69a.75.75 0 01-.75-.75zm-12 0A.75.75 0 013.75 3h4.5a.75.75 0 010 1.5H5.56l3.97 3.97a.75.75 0 01-1.06 1.06L4.5 5.56v2.69a.75.75 0 01-1.5 0v-4.5zm11.47 11.78a.75.75 0 111.06-1.06l3.97 3.97v-2.69a.75.75 0 011.5 0v4.5a.75.75 0 01-.75.75h-4.5a.75.75 0 010-1.5h2.69l-3.97-3.97zm-4.94-1.06a.75.75 0 010 1.06L5.56 19.5h2.69a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75v-4.5a.75.75 0 011.5 0v2.69l3.97-3.97a.75.75 0 011.06 0z","clip-rule":"evenodd"}]}},ChevronLeft={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M7.72 12.53a.75.75 0 010-1.06l7.5-7.5a.75.75 0 111.06 1.06L9.31 12l6.97 6.97a.75.75 0 11-1.06 1.06l-7.5-7.5z","clip-rule":"evenodd"}]}},ChevronRight={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"}]}},Cog6Tooth={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"},{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 00-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 00-2.282.819l-.922 1.597a1.875 1.875 0 00.432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 000 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 00-.432 2.385l.922 1.597a1.875 1.875 0 002.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 002.28-.819l.923-1.597a1.875 1.875 0 00-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 000-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 00-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 00-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 00-1.85-1.567h-1.843zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z","clip-rule":"evenodd"}]}},Power={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.636 5.636a9 9 0 1012.728 0M12 3v9"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M10 2a.75.75 0 01.75.75v7.5a.75.75 0 01-1.5 0v-7.5A.75.75 0 0110 2zM5.404 4.343a.75.75 0 010 1.06 6.5 6.5 0 109.192 0 .75.75 0 111.06-1.06 8 8 0 11-11.313 0 .75.75 0 011.06 0z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 01.75.75v9a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM6.166 5.106a.75.75 0 010 1.06 8.25 8.25 0 1011.668 0 .75.75 0 111.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 011.06 0z","clip-rule":"evenodd"}]}},QuestionMarkCircle={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.061-1.061 3 3 0 112.871 5.026v.345a.75.75 0 01-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 108.94 6.94zM10 15a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 01-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 01-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 01-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584zM12 18a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"}]}},Wrench={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75a4.5 4.5 0 01-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 11-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 016.336-4.486l-3.276 3.276a3.004 3.004 0 002.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852z"},{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.867 19.125h.008v.008h-.008v-.008z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M19 5.5a4.5 4.5 0 01-4.791 4.49c-.873-.055-1.808.128-2.368.8l-6.024 7.23a2.724 2.724 0 11-3.837-3.837L9.21 8.16c.672-.56.855-1.495.8-2.368a4.5 4.5 0 015.873-4.575c.324.105.39.51.15.752L13.34 4.66a.455.455 0 00-.11.494 3.01 3.01 0 001.617 1.617c.17.07.363.02.493-.111l2.692-2.692c.241-.241.647-.174.752.15.14.435.216.9.216 1.382zM4 17a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M12 6.75a5.25 5.25 0 016.775-5.025.75.75 0 01.313 1.248l-3.32 3.319c.063.475.276.934.641 1.299.365.365.824.578 1.3.64l3.318-3.319a.75.75 0 011.248.313 5.25 5.25 0 01-5.472 6.756c-1.018-.086-1.87.1-2.309.634L7.344 21.3A3.298 3.298 0 112.7 16.657l8.684-7.151c.533-.44.72-1.291.634-2.309A5.342 5.342 0 0112 6.75zM4.117 19.125a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75h-.008a.75.75 0 01-.75-.75v-.008z","clip-rule":"evenodd"}]}},RovSelector_svelte_svelte_type_style_lang="";function create_if_block_3(n){let e,r,t,a;return{c(){e=element("p"),r=text("You Are: "),t=element("span"),a=text(n[5]),attr(t,"class","font-bold"),attr(e,"class","text-center p-2 text-white")},m(s,u){insert(s,e,u),append(e,r),append(e,t),append(t,a)},p(s,u){u&32&&set_data(a,s[5])},d(s){s&&detach(e)}}}function create_if_block_2(n){let e,r;return{c(){e=element("h2"),r=text(n[2]),attr(e,"class","text-center p-2 pt-0 font-bold ")},m(t,a){insert(t,e,a),append(e,r)},p(t,a){a&4&&set_data(r,t[2])},d(t){t&&detach(e)}}}function create_else_block(n){let e,r,t,a,s,u=n[4]?"Disconnect":"Connect",d,c,g,m,_;return{c(){e=element("button"),r=element("span"),t=text(n[2]),a=space(),s=element("span"),d=text(u),attr(r,"class","swap-off"),attr(s,"class","swap-on whitespace-nowrap inline"),attr(e,"class",c=`btn btn-sm btn-primary align-top swap ${n[3]?"swap-active":""}`)},m(b,S){insert(b,e,S),append(e,r),append(r,t),append(e,a),append(e,s),append(s,d),m||(_=[listen(e,"mouseenter",n[12]),listen(e,"mouseleave",n[13]),listen(e,"click",n[14])],m=!0)},p(b,S){S&4&&set_data(t,b[2]),S&16&&u!==(u=b[4]?"Disconnect":"Connect")&&set_data(d,u),S&8&&c!==(c=`btn btn-sm btn-primary align-top swap ${b[3]?"swap-active":""}`)&&attr(e,"class",c)},i(b){g||add_render_callback(()=>{g=create_in_transition(e,fade,{}),g.start()})},o:noop$1,d(b){b&&detach(e),m=!1,run_all(_)}}}function create_if_block_1$1(n){let e,r,t,a;return{c(){e=element("button"),e.textContent="Connect",attr(e,"class","btn btn-sm btn-primary align-top")},m(s,u){insert(s,e,u),t||(a=listen(e,"click",n[11]),t=!0)},p:noop$1,i(s){r||add_render_callback(()=>{r=create_in_transition(e,fade,{}),r.start()})},o:noop$1,d(s){s&&detach(e),t=!1,a()}}}function create_if_block$2(n){let e,r,t;return{c(){e=element("button"),e.innerHTML="<span>Drive ROV</span>",attr(e,"class","btn btn-sm btn-warning align-top")},m(a,s){insert(a,e,s),r||(t=listen(e,"click",n[15]),r=!0)},p:noop$1,d(a){a&&detach(e),r=!1,t()}}}function create_fragment$7(n){let e,r,t,a,s,u,d,c,g,m,_,b,S,C,R,w,k=n[4]&&create_if_block_3(n),$=!n[4]&&create_if_block_2(n);u=new Icon({props:{theme:"solid",src:ChevronLeft,class:"w-6 h-6 pointer-events-none"}});function O(B,j){return B[4]?create_else_block:create_if_block_1$1}let I=O(n),x=I(n);m=new Icon({props:{theme:"solid",src:ChevronRight,class:"w-6 h-6 pointer-events-none"}});let P=!n[6]&&create_if_block$2(n);return{c(){e=element("div"),k&&k.c(),r=space(),t=element("div"),$&&$.c(),a=space(),s=element("button"),create_component(u.$$.fragment),d=space(),x.c(),c=space(),g=element("button"),create_component(m.$$.fragment),_=space(),P&&P.c(),attr(s,"class","btn btn-sm btn-ghost btn-secondary"),attr(s,"aria-label","Switch to Previous ROV"),attr(g,"class","btn btn-sm btn-ghost btn-secondary"),attr(g,"aria-label","Switch to Next ROV"),attr(t,"class",b=`bg-base-100 m-0 p-2 pb-1 whitespace-nowrap text-center rounded-xl  ${n[4]?"rounded-b-none":""}`),attr(e,"id","rov_chooser"),attr(e,"class",S=null_to_empty(`absolute left-1/2 bottom-0  -translate-x-1/2 transition-all overflow-hidden z-50  ${n[4]?" ":"disconnected"} `)+" svelte-1simma4")},m(B,j){insert(B,e,j),k&&k.m(e,null),append(e,r),append(e,t),$&&$.m(t,null),append(t,a),append(t,s),mount_component(u,s,null),append(t,d),x.m(t,null),append(t,c),append(t,g),mount_component(m,g,null),append(t,_),P&&P.m(t,null),C=!0,R||(w=[listen(s,"click",n[1]),action_destroyer(addTooltip.call(null,s,{label:"Switch to Previous ROV",placement:"bottom"})),listen(g,"click",n[0]),action_destroyer(addTooltip.call(null,g,{label:"Switch to Next ROV",placement:"bottom"}))],R=!0)},p(B,[j]){B[4]?k?k.p(B,j):(k=create_if_block_3(B),k.c(),k.m(e,r)):k&&(k.d(1),k=null),B[4]?$&&($.d(1),$=null):$?$.p(B,j):($=create_if_block_2(B),$.c(),$.m(t,a)),I===(I=O(B))&&x?x.p(B,j):(x.d(1),x=I(B),x&&(x.c(),transition_in(x,1),x.m(t,c))),B[6]?P&&(P.d(1),P=null):P?P.p(B,j):(P=create_if_block$2(B),P.c(),P.m(t,null)),(!C||j&16&&b!==(b=`bg-base-100 m-0 p-2 pb-1 whitespace-nowrap text-center rounded-xl  ${B[4]?"rounded-b-none":""}`))&&attr(t,"class",b),(!C||j&16&&S!==(S=null_to_empty(`absolute left-1/2 bottom-0  -translate-x-1/2 transition-all overflow-hidden z-50  ${B[4]?" ":"disconnected"} `)+" svelte-1simma4"))&&attr(e,"class",S)},i(B){C||(transition_in(u.$$.fragment,B),transition_in(x),transition_in(m.$$.fragment,B),C=!0)},o(B){transition_out(u.$$.fragment,B),transition_out(m.$$.fragment,B),C=!1},d(B){B&&detach(e),k&&k.d(),$&&$.d(),destroy_component(u),x.d(),destroy_component(m),P&&P.d(),R=!1,run_all(w)}}}function instance$5(n,e,r){let t,a,s,u,d,c;component_subscribe(n,rovPeerIdEndNumber,O=>r(8,a=O)),component_subscribe(n,peerServerConnState,O=>r(9,s=O)),component_subscribe(n,rovDataChannelConnState,O=>r(10,u=O)),component_subscribe(n,ourPeerId,O=>r(5,d=O)),component_subscribe(n,isRovDriver,O=>r(6,c=O));let{selectedRov:g=""}=e,m="";const _=()=>{RovActions.disconnectFromRov(),set_store_value(rovPeerIdEndNumber,a=a+1,a),t&&RovActions.connectToRov()},b=()=>{RovActions.disconnectFromRov(),set_store_value(rovPeerIdEndNumber,a=Math.max(a-1,0),a),t&&RovActions.connectToRov()};let S=!1;const C=()=>{RovActions.connectToRov()},R=()=>{r(3,S=!0)},w=()=>{r(3,S=!1)},k=()=>{RovActions.disconnectFromRov(),r(3,S=!1)},$=()=>{RovActions.takeControl()};return n.$$set=O=>{"selectedRov"in O&&r(7,g=O.selectedRov)},n.$$.update=()=>{n.$$.dirty&1536&&r(4,t=u===ConnectionState.connected||u===ConnectionState.connecting||u===ConnectionState.reconnecting||s===ConnectionState.connecting||s===ConnectionState.reconnecting||s===ConnectionState.disconnected),n.$$.dirty&256&&r(7,g=getROVName(a)),n.$$.dirty&384&&r(2,m="ROV "+a+g.replace("ROV-"," | "))},[_,b,m,S,t,d,c,g,a,s,u,C,R,w,k,$]}class RovSelector extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$5,create_fragment$7,safe_not_equal,{selectedRov:7,nextRov:0,prevRov:1})}get nextRov(){return this.$$.ctx[0]}get prevRov(){return this.$$.ctx[1]}}const CompassDial_svelte_svelte_type_style_lang="";function create_fragment$6(n){let e,r,t,a;return{c(){e=element("div"),r=element("div"),t=space(),a=element("div"),attr(r,"class","line svelte-wxznj7"),attr(a,"class","bg svelte-wxznj7"),attr(a,"id","compassDiscImg"),set_style(a,"transform",`translateX(${angle}px)`),attr(e,"class","compass bg-base-100 svelte-wxznj7")},m(s,u){insert(s,e,u),append(e,r),append(e,t),append(e,a)},p:noop$1,i:noop$1,o:noop$1,d(s){s&&detach(e)}}}let angle=0;class CompassDial extends SvelteComponent{constructor(e){super(),init$1(this,e,null,create_fragment$6,safe_not_equal,{})}}const TopBar_svelte_svelte_type_style_lang="";function create_if_block$1(n){let e,r,t,a,s,u,d,c,g,m,_,b,S,C,R,w,k,$,O,I,x,P,B,j,W,U,z,F,Y,X,K,te,Z,H,Q,ne,V;return s=new Icon({props:{theme:"mini",src:Power,class:"h-12 pointer-events-none"}}),k=new Icon({props:{theme:"solid",src:Wrench,class:"h-12 pointer-events-none"}}),Y=new Icon({props:{theme:"solid",src:AdjustmentsHorizontal,class:"h-12 pointer-events-none"}}),{c(){e=element("div"),r=element("div"),t=element("ul"),a=element("li"),create_component(s.$$.fragment),u=space(),d=element("li"),d.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Shutdown ROV</span>',c=space(),g=element("li"),g.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Reboot ROV</span>',m=space(),_=element("li"),_.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Restart ROV Services</span>',b=space(),S=element("div"),C=space(),R=element("ul"),w=element("li"),create_component(k.$$.fragment),$=space(),O=element("li"),O.innerHTML='<span class="btn btn-ghost svelte-16r1evb">System Status</span>',I=space(),x=element("li"),x.innerHTML='<span class="btn btn-ghost svelte-16r1evb">ROV Logs</span>',P=space(),B=element("li"),B.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Local Debug Links</span>',j=space(),W=element("div"),U=space(),z=element("ul"),F=element("li"),create_component(Y.$$.fragment),X=space(),K=element("li"),K.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Enable ROV Wifi</span>',te=space(),Z=element("li"),Z.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Disable ROV Wifi</span>',attr(a,"aria-hidden","true"),attr(d,"role","menuitem"),attr(g,"role","menuitem"),attr(_,"role","menuitem"),attr(t,"class","menu inline-block menu-normal flex-1 svelte-16r1evb"),attr(S,"class","divider md:divider-horizontal md:m-0"),attr(w,"aria-hidden","true"),attr(O,"role","menuitem"),attr(x,"role","menuitem"),attr(B,"role","menuitem"),attr(R,"class","menu inline-block menu-normal flex-1 svelte-16r1evb"),attr(W,"class","divider md:divider-horizontal md:m-0"),attr(F,"aria-hidden","true"),attr(K,"role","menuitem"),attr(Z,"role","menuitem"),attr(z,"class","menu inline-block menu-normal flex-1 svelte-16r1evb"),attr(r,"class","multi-menu card-body md:flex-row rounded-box  svelte-16r1evb"),attr(e,"class","mt-1 mb-24 m-auto w-full max-w-max card card-compact dropdown-content bg-base-100 shadow p-1 overflow-auto pointer-events-auto")},m(J,ce){insert(J,e,ce),append(e,r),append(r,t),append(t,a),mount_component(s,a,null),append(t,u),append(t,d),append(t,c),append(t,g),append(t,m),append(t,_),append(r,b),append(r,S),append(r,C),append(r,R),append(R,w),mount_component(k,w,null),append(R,$),append(R,O),append(R,I),append(R,x),append(R,P),append(R,B),append(r,j),append(r,W),append(r,U),append(r,z),append(z,F),mount_component(Y,F,null),append(z,X),append(z,K),append(z,te),append(z,Z),Q=!0,ne||(V=[listen(d,"click",RovActions.shutdownRov),listen(d,"keypress",selectKeypressFactory(RovActions.shutdownRov)),listen(g,"click",RovActions.rebootRov),listen(g,"keypress",selectKeypressFactory(RovActions.rebootRov)),listen(_,"click",RovActions.restartRovServices),listen(_,"keypress",selectKeypressFactory(RovActions.rebootRov)),listen(O,"click",RovActions.getRovStatusReport),listen(O,"keypress",selectKeypressFactory(RovActions.rebootRov)),listen(x,"click",RovActions.getRovLogs),listen(x,"keypress",selectKeypressFactory(RovActions.rebootRov)),listen(B,"click",n[4]),listen(B,"keypress",selectKeypressFactory(n[5])),listen(K,"click",RovActions.enableRovWifi),listen(K,"keypress",selectKeypressFactory(RovActions.rebootRov)),listen(Z,"click",RovActions.disableRovWifi),listen(Z,"keypress",selectKeypressFactory(RovActions.rebootRov))],ne=!0)},p:noop$1,i(J){Q||(transition_in(s.$$.fragment,J),transition_in(k.$$.fragment,J),transition_in(Y.$$.fragment,J),add_render_callback(()=>{H||(H=create_bidirectional_transition(e,slide,{},!0)),H.run(1)}),Q=!0)},o(J){transition_out(s.$$.fragment,J),transition_out(k.$$.fragment,J),transition_out(Y.$$.fragment,J),H||(H=create_bidirectional_transition(e,slide,{},!1)),H.run(0),Q=!1},d(J){J&&detach(e),destroy_component(s),destroy_component(k),destroy_component(Y),J&&H&&H.end(),ne=!1,run_all(V)}}}function create_fragment$5(n){let e,r,t,a,s,u,d,c,g,m,_,b,S,C,R,w,k,$,O,I;s=new Icon({props:{theme:"solid",src:Cog6Tooth,class:"w-6 h-6 pointer-events-none"}}),g=new CompassDial({}),S=new Icon({props:{theme:"solid",src:QuestionMarkCircle,class:"w-6 h-6 pointer-events-none"}});let x=n[1]&&create_if_block$1(n);return k=new Icon({props:{theme:"solid",src:n[2]?ArrowsPointingIn:ArrowsPointingOut,class:"w-6 h-6 pointer-events-none"}}),{c(){e=element("div"),r=element("div"),t=element("div"),a=element("button"),create_component(s.$$.fragment),d=space(),c=element("div"),create_component(g.$$.fragment),m=space(),_=element("div"),b=element("button"),create_component(S.$$.fragment),C=space(),x&&x.c(),R=space(),w=element("button"),create_component(k.$$.fragment),attr(a,"class","btn btn-ghost btn-square rounded-tl-none"),a.disabled=u=n[0]!=ConnectionState.connected,attr(t,"class","pr-3 justify-start flex-shrink"),attr(c,"class","navbar-center flex-1 self-stretch"),attr(b,"class","btn btn-square btn-ghost !rounded-tr-none"),attr(_,"class","pl-3 justify-end flex-shrink"),attr(r,"class","navbar rounded-t-none shadow-xl rounded-box h-9 p-0 min-h-0 lg:rounded-t-none bg-base-100 m-auto max-w-sm top-bar flex-none pointer-events-auto overflow-hidden svelte-16r1evb"),attr(e,"class","px-1 absolute flex w-full flex-col max-h-screen pointer-events-none"),attr(w,"class","btn btn-square bg-base-100 pointer-events-auto absolute -right-1 -top-1 rounded-none rounded-bl-2xl")},m(P,B){insert(P,e,B),append(e,r),append(r,t),append(t,a),mount_component(s,a,null),append(r,d),append(r,c),mount_component(g,c,null),append(r,m),append(r,_),append(_,b),mount_component(S,b,null),append(e,C),x&&x.m(e,null),insert(P,R,B),insert(P,w,B),mount_component(k,w,null),$=!0,O||(I=[listen(a,"click",n[3]),action_destroyer(addTooltip.call(null,a,{label:"Menu",placement:"left"})),action_destroyer(addTooltip.call(null,b,{label:"Hover or long-press buttons to show help",placement:"bottom",timeout:0})),listen(w,"click",n[6]),action_destroyer(addTooltip.call(null,w,{label:"Toggle Fullscreen",placement:"right"}))],O=!0)},p(P,[B]){(!$||B&1&&u!==(u=P[0]!=ConnectionState.connected))&&(a.disabled=u),P[1]?x?(x.p(P,B),B&2&&transition_in(x,1)):(x=create_if_block$1(P),x.c(),transition_in(x,1),x.m(e,null)):x&&(group_outros(),transition_out(x,1,1,()=>{x=null}),check_outros());const j={};B&4&&(j.src=P[2]?ArrowsPointingIn:ArrowsPointingOut),k.$set(j)},i(P){$||(transition_in(s.$$.fragment,P),transition_in(g.$$.fragment,P),transition_in(S.$$.fragment,P),transition_in(x),transition_in(k.$$.fragment,P),$=!0)},o(P){transition_out(s.$$.fragment,P),transition_out(g.$$.fragment,P),transition_out(S.$$.fragment,P),transition_out(x),transition_out(k.$$.fragment,P),$=!1},d(P){P&&detach(e),destroy_component(s),destroy_component(g),destroy_component(S),x&&x.d(),P&&detach(R),P&&detach(w),destroy_component(k),O=!1,run_all(I)}}}function instance$4(n,e,r){let t,a;component_subscribe(n,rovDataChannelConnState,m=>r(0,t=m)),component_subscribe(n,fullscreenOpen,m=>r(2,a=m));let s=!1;const u=()=>r(1,s=!s),d=()=>window.open("./404.html"),c=()=>window.open("./404.html"),g=m=>toggleFullscreen(m,null);return n.$$.update=()=>{n.$$.dirty&1&&t!=ConnectionState.connected&&r(1,s=!1)},[t,s,a,u,d,c,g]}class TopBar extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$4,create_fragment$5,safe_not_equal,{})}}const GamepadLeftSvg=`<svg width="100%" height="100%" viewBox="0 0 123 232" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd">
  <g id="left_side_of_controller">
    <path d="M112.977 140.769c-6 29.375-13.537 33.424-35.28 43.583-35.355 16.519-33.138 57.105-56.59 45.51-14.36-7.1-21.13-19.23-21.13-38.4 0-24.92 11.42-65.99 32.4-119.1 10.625-22.199 25.844-16.641 42.794-16.641 7.93 0 15.744-1.226 22.454 2.224 14.564 7.511 21.031 55.022 15.352 82.824Z"/>
    <g id="stick_button_left">
      <g id="stick_bg_left">
        <circle id="shadow10" cx="81.987" cy="176.33" r="26.46" style="fill-opacity:.5"/>
        <circle id="Oval5" cx="80.737" cy="175.09" r="25.21" style="fill:#6180b0;stroke:#000;stroke-width:2.49px"/>
      </g>
      <path d="M80.737 179.329v-8.477h25.442v-7.872l12.11 12.11-12.11 12.11v-7.871H80.737Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_right_direction_highlight"/>
      <path d="M76.499 175.09h8.477v25.442h7.872l-12.11 12.11-12.11-12.11h7.871V175.09Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_down_direction_highlight"/>
      <path d="M80.737 170.852v8.477H55.295v7.871l-12.11-12.11 12.11-12.11v7.872h25.442Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_left_direction_highlight"/>
      <path d="M84.976 175.09h-8.477v-25.442h-7.872l12.11-12.11 12.11 12.11h-7.871v25.442Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_up_direction_highlight"/>
      <g id="stick_left">
        <circle id="shadow11" cx="82.597" cy="176.96" r="17.12" style="fill-opacity:.5"/>
        <use xlink:href="#2a" x="48" y="143" width="65" height="65" class="gpad-highlight" id="stick_button_left_highlight"/>
        <g id="Group-6">
          <circle id="Oval-Copy" cx="80.737" cy="175.09" r="15.88" style="fill:#fff;stroke:#000;stroke-width:2.49px"/>
          <circle id="Oval-Copy-2" cx="80.737" cy="175.09" r="12.14" style="fill:#fff;stroke:#000;stroke-width:1.25px"/>
          <path d="M79.737 170.127a.402.402 0 0 0-.4-.4h-.725a.4.4 0 0 1-.32-.64l2.125-2.833a.4.4 0 0 1 .64 0l2.125 2.833a.4.4 0 0 1-.32.64h-.725a.402.402 0 0 0-.4.4v2.088a.402.402 0 0 0 .354.397c1.712.21 3.36.845 4.718 1.903a.4.4 0 0 0 .481.011l.619-.445a.399.399 0 0 1 .634.332l-.058 3.054a.4.4 0 0 1-.519.374l-2.916-.91a.402.402 0 0 1-.114-.707l.125-.091a.398.398 0 0 0-.018-.662 7.939 7.939 0 0 0-2.845-1.046.4.4 0 0 0-.459.394c-.002 1.15-.002 4.148-.002 5.234a.4.4 0 0 0 .4.4h.725a.4.4 0 0 1 .32.64l-2.125 2.833a.398.398 0 0 1-.64 0l-2.125-2.833a.4.4 0 0 1 .32-.64h.725a.4.4 0 0 0 .4-.4v-5.21a.4.4 0 0 0-.467-.395 8.156 8.156 0 0 0-2.818 1.075.398.398 0 0 0-.024.654c.045.036.093.072.141.108a.4.4 0 0 1-.127.704l-2.93.861a.399.399 0 0 1-.513-.383l-.006-3.054a.4.4 0 0 1 .639-.322l.604.451a.4.4 0 0 0 .486-.005c1.357-1.045 2.985-1.681 4.666-1.909a.4.4 0 0 0 .348-.396l.001-2.105Z"/>
        </g>
      </g>
    </g>
    <g id="select_button">
      <use xlink:href="#2b" x="78" y="118" width="43" height="39" class="gpad-highlight" id="select_button_highlight"/>
      <path id="select" d="M105.267 133.325a7.506 7.506 0 0 1 2.496 5.595 7.507 7.507 0 0 1-2.496 5.596H95.213a7.507 7.507 0 0 1-2.496-5.596c0-2.22.964-4.217 2.496-5.595h10.054Z" style="fill:#9a9a9a;fill-opacity:.5"/>
      <path id="select1" d="M104.162 132.138a7.506 7.506 0 0 1 2.496 5.595 7.507 7.507 0 0 1-2.496 5.596H94.108a7.507 7.507 0 0 1-2.496-5.596c0-2.22.964-4.217 2.496-5.595h10.054Z" style="fill:#fff;stroke:#000;stroke-width:1.35px"/>
      <text x="96.295" y="141.267" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:9.858px">?</text>
    </g>
    <g id="d_pad">
      <path d="M86.434 71.626c.913 0 1.659.746 1.659 1.659v18.212h18.212c.913 0 1.66.747 1.66 1.659v14.893c0 .913-.747 1.66-1.66 1.66H88.093v18.211c0 .913-.746 1.66-1.659 1.66H71.541c-.911 0-1.66-.749-1.66-1.66v-18.211H51.67c-.911 0-1.66-.749-1.66-1.66V93.156c0-.902.747-1.659 1.66-1.659h18.211V73.285c0-.902.747-1.659 1.66-1.659h14.893Z" style="fill:#9a9a9a;fill-opacity:.5" id="shadow14"/>
      <use xlink:href="#2c" x="53" y="54" width="48" height="53" class="gpad-highlight" id="d_pad_up_highlight"/>
      <use xlink:href="#2d" x="53" y="91" width="48" height="52" class="gpad-highlight" id="d_pad_down_highlight"/>
      <use xlink:href="#2e" x="70" y="75" width="52" height="48" class="gpad-highlight" id="d_pad_right_highlight"/>
      <use xlink:href="#2f" x="33" y="75" width="52" height="48" class="gpad-highlight" id="d_pad_left_highlight"/>
      <path d="M84.774 69.966c.913 0 1.66.747 1.66 1.66v18.211h18.222c.902 0 1.659.747 1.659 1.66V106.4c0 .903-.757 1.66-1.659 1.66H86.434v18.211c0 .903-.747 1.66-1.66 1.66H69.892c-.911 0-1.66-.749-1.66-1.66v-18.222H50.01c-.91 0-1.659-.749-1.659-1.659V91.497c0-.913.747-1.66 1.659-1.66h18.212V71.626c0-.913.747-1.66 1.659-1.66h14.893Z" style="fill:#fff;stroke:#000;stroke-width:1.66px;stroke-linejoin:round"/>
      <path d="m91.827 94.401 9.095 4.542-9.105 4.564V94.39l.01.011Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_right"/>
      <path d="m62.839 103.496-9.106-4.553 9.106-4.553v9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_left"/>
      <path d="m81.881 113.432-4.553 9.106-4.553-9.106h9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_down"/>
      <path d="m72.775 84.455 4.563-9.106 4.543 9.106h-9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_up"/>
      <path id="center_icon" d="M71.374 99.114c0-.817.672-1.49 1.49-1.49h8.939c.817 0 1.49.673 1.49 1.49v3.642c0 .817-.673 1.49-1.49 1.49h-8.939c-.818 0-1.49-.673-1.49-1.49v-3.642Zm1.071 1.382v2.389c0 .268.219.485.49.485h8.83a.49.49 0 0 0 .491-.485v-1.742l-1.452-1.437a.497.497 0 0 0-.694 0l-1.249 1.236.308.305c.099.091.156.22.156.355a.491.491 0 0 1-.85.331l-3.394-3.36a.497.497 0 0 0-.694 0l-1.942 1.923Zm5.55-2.209a.662.662 0 1 1 .001 1.323.662.662 0 0 1-.001-1.323Zm-5.131-1.656-.082.001c.21-.594.775-.995 1.406-.994h6.29c.649 0 1.202.415 1.406.994l-.081-.001h-8.939Zm1.242-1.985.082-.002h6.29c.028 0 .055 0 .082.002a1.493 1.493 0 0 0-1.406-.995h-3.642c-.63 0-1.196.4-1.406.995Z"/>
    </g>
    <g id="shoulder_trigger_back_left">
      <g class="direction_highlight" id="shoulder_trigger_back_left_direction_highlight">
        <path d="M110.415 51.254 98.146 34.763h24.538l-12.269 16.491Z" style="fill:#ff00bf"/>
        <path d="M97.161 17.167c2.534 0 13.254.512 13.218 21" style="fill:none;stroke:#ff00bf;stroke-width:8.5px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"/>
      </g>
      <path id="shadow4" d="M54.417 40.591h37.84c1.52 0 2.77-.618 2.77-1.36a.695.695 0 0 0-.07-.309l-10.9-23.604c-.7-1.545-3.53-2.648-6.75-2.648h-11.8c-7.66 0-13.86 3.05-13.86 6.811v19.761c0 .741 1.25 1.36 2.77 1.36v-.011Z" style="fill-opacity:.5"/>
      <use xlink:href="#2g" x="32" y="3" width="76" height="56" transform="translate(0 -4.346)" class="gpad-highlight" id="shoulder_trigger_back_left_highlight"/>
      <path id="bg" d="M51.957 38.16c-.38 0-.73-.072-.98-.196-.25-.124-.4-.288-.4-.484V17.719c0-1.69 1.4-3.225 3.65-4.327a20.546 20.546 0 0 1 8.83-1.803h11.79c1.26 0 2.48.206 3.46.597.98.392 1.67.928 1.95 1.525l10.9 23.625c.03.34-.13.515-.38.628-.26.134-.6.206-.98.206h-37.84v-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.2px"/>
      <path d="m74.228 32.999-.217-.942a.766.766 0 0 0-1.493.343l.9 3.914 3.914-.9a.766.766 0 0 0-.343-1.493l-1.606.369c.66-1.61.965-3.317.85-5.04a.766.766 0 0 0-1.529.101 9.59 9.59 0 0 1-.476 3.648Zm-9.227-13.535a2.177 2.177 0 1 1 4.168-.327.93.93 0 0 1 .191.118l2.594 2.023a.986.986 0 0 1-1.213 1.555l-2.594-2.023a1.04 1.04 0 0 1-.16-.158 2.16 2.16 0 0 1-1.678.093l-3.292 3.361.048.141.046.179c.021.101.036.205.043.312v.269c-.006.101-.019.2-.038.297l-.055.216a1.959 1.959 0 0 1-.044.129l3.292 3.361a2.16 2.16 0 0 1 1.678.093.957.957 0 0 1 .16-.158l2.594-2.023a.986.986 0 0 1 1.213 1.555L69.36 30.5a.97.97 0 0 1-.191.117 2.179 2.179 0 1 1-4.308.516 2.184 2.184 0 0 1 .14-.842l-3.291-3.362-.006.002a2.14 2.14 0 0 1-.356.093l-.131.018-.236.013-.171-.007-.188-.023a2.142 2.142 0 0 1-.447-.125l-.232-.108-.19-.117-.204-.158-.153-.147-.147-.173-.081-.113-.129-.221-.084-.186a2.661 2.661 0 0 1-.035-.095h-2.107v1.616a.704.704 0 1 1-1.408 0v-4.641a.704.704 0 1 1 1.408 0v1.616h2.107l.084-.209.08-.155.124-.195.144-.181.089-.095.125-.115.144-.113.065-.045.274-.156a2.182 2.182 0 0 1 .737-.2l.313-.006.24.027c.128.021.251.053.371.095l3.291-3.361Zm1.228 10.811.04-.038a1.127 1.127 0 1 1-.04.038Zm-4.929-6.48a1.13 1.13 0 0 0-1.401.76l-.032.141-.014.181.016.195.03.128a1.13 1.13 0 0 0 1.396.761l.113-.04c.411-.168.7-.572.7-1.044l-.002-.072a1.13 1.13 0 0 0-.698-.972l-.108-.038Zm12.928-7.039a9.59 9.59 0 0 1 .476 3.648.766.766 0 0 0 1.529.101c.115-1.723-.19-3.43-.85-5.04l1.606.369a.766.766 0 0 0 .343-1.493l-3.914-.901-.9 3.915a.765.765 0 1 0 1.493.343l.217-.942Zm-7.959 2.762a1.128 1.128 0 1 0-.04-.039l.04.039Z"/>
    </g>
    <g id="shoulder_button_front_left">
      <path id="shadow5" d="M94.279 44.584H54.287c-2.643 0-4.818 2.591-4.818 5.74v6.9c.004 1.258.875 2.29 1.931 2.29h45.767c1.059 0 1.93-1.038 1.93-2.3v-6.88c0-3.149-2.175-5.74-4.818-5.74v-.01Z" style="fill-opacity:.5"/>
      <use xlink:href="#2h" x="30" y="31" width="86" height="41" class="gpad-highlight" id="shoulder_button_front_left_highlight"/>
      <path id="bg1" d="M92.769 44.934h.017c2.109 0 3.844 2.067 3.844 4.58v6.92c0 .625-.433 1.14-.957 1.14H49.897c-.529 0-.965-.519-.965-1.15v-6.9c0-2.513 1.735-4.58 3.844-4.58h39.993v-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.12px"/>
      <text x="70.61" y="54.634" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:15px">-</text>
    </g>
    <g id="l_touch_targets" opacity="0">
      <path id="stick_button_left_touch_target" d="M103.497 149.101c7.227 6.337 11.792 15.634 11.792 25.989 0 19.069-15.482 34.551-34.552 34.551-19.069 0-34.551-15.482-34.551-34.551 0-19.07 15.482-34.552 34.551-34.552 2.258 0 4.466.217 6.601.631 1.548 5.051 6.247 8.728 11.797 8.728 1.535 0 3.005-.281 4.362-.796Z" style="fill:#419bf3"/>
      <path id="select_button_touch_target" d="M93.558 126.53a12.266 12.266 0 0 1 5.577-1.333c6.809 0 12.336 5.534 12.336 12.35s-5.527 12.35-12.336 12.35-12.337-5.534-12.337-12.35c0-1.681.336-3.284.945-4.744a18.743 18.743 0 0 0 5.815-6.273Z" style="fill:#419bf3"/>
      <path id="d_pad_left_touch_target" d="M57.9 116.925c-10.093-.218-18.219-8.48-18.219-18.625 0-10.281 8.346-18.628 18.628-18.628.14 0 .279.002.419.005l18.205 18.204v.01L57.9 116.925Z" style="fill:#419bf3"/>
      <path id="d_pad_down_touch_target" d="m57.9 116.925 19.042-19.043 19.033 19.042c.004.14.006.279.006.419 0 10.282-8.348 18.629-18.629 18.629-10.282 0-19.452-8.765-19.452-19.047Z" style="fill:#419bf3"/>
      <path id="d_pad_up_touch_target" d="M67.141 63.678h20.421c4.962 3.261 8.277 8.827 8.413 15.17L76.942 97.882l-.009-.001-18.205-18.204c-.004-.14-.005-.279-.005-.419 0-6.512 3.349-12.249 8.418-15.58Z" style="fill:#419bf3"/>
      <path id="d_pad_right_touch_target" d="m76.942 97.882 19.033-19.034c10.281 0 19.048 9.171 19.048 19.452 0 10.282-8.348 18.629-18.629 18.629-.14 0-.279-.002-.419-.005L76.942 97.882Z" style="fill:#419bf3"/>
      <path id="shoulder_button_front_left_touch_target" d="M99.096 41.101H47.503c-2.766 0-5.009 2.197-5.009 4.908v15.706c0 1.077.905 1.963 2.004 1.963h57.603c1.099 0 2.004-.886 2.004-1.963V46.009c0-2.711-2.243-4.908-5.009-4.908Z" style="fill:#419bf3"/>
      <path id="shoulder_trigger_back_left_touch_target" d="M47.697 41.101h52.635c1.521 0 2.816-1.579 2.065-2.955-2.77-5.082-14.508-29.61-14.508-29.61-.743-1.517-3.545-2.595-6.742-2.595H58.788c-7.657 0-13.864 3.027-13.864 6.761v27.047c0 .741 1.252 1.352 2.773 1.352Z" style="fill:#419bf3"/>
    </g>
  </g>
  <defs>
    <image id="2a" width="65" height="65" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAYAAACO98lFAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHVUlEQVR4nO1b2XLjOAyEnawzmUxm9mF+Ll84P5eXzX1rX9R2q9UAacXeo2pQhaJsyyLRBEAQoCJ+U6yO3cHVcF31wb8N1XN+rX6Wv3+GDg6CEXqVXLvPQ8f1wQE5GAgi/Iralfmu6nugdjDfcXsQQD4NAgmfCb6m79w9TApAxXz/p8BYDIKZeeU1teuoAcmE/2i0/J/FQCwCQWY/E/wkdgDoZwUCpIJ+RMR7cs33TjRjXzD2AiFRfSf4CfEpXfM9CgTPPgRWfpPfGJCJqewDRDcIjdlXoStWDQE5AN4a/B5TDVkERBcICQCs5izkHyNvpMVvuJ+1gUFgAF6JX+RawXCa0QVEE4QEAFZtFXwTEWcjb6hlMAACgGBTUABeRn4e+YVaAMNAvIc4zxYQJQgFAGAV/ovhM2LcD7NQTWAteCF+MsygODC6gTitQCgAwGzyrH+JiPOI+Dq2zApECwTWAAj9SLwZ28zJxvic7bOvhutVBkQKgokD1AfwzEP4rxFxMTI+n9N9bBIsAIMAO4faMwD3MQdyLc9R+qDnW7J/FDNQ4aH+EP58FPrbyBfUAoweEODUMhDuie9G5u8eY2cmMA82jSEiBqcNlTm4ZRAgQP0x85ej4N/HFp9bILR8AoPAPkafEfQMx1vf4MxiBkLDDDIAvgs7ELBKYJlsgfAaO+f3GFOfwv93ALggivuZUKYJLhaAZz+LnQ/ArH+PiB8jA4hvsfML0IJNzE0hixPgHJ9juszy/0P+68LrWRCl2tBjDuuYrwbsBy5H4f8kEKAJcIwQgqNGFzazENAGaE/lUF2kmQZQIdowAWE0hSwiZFNgENgMGISL2K0MmUME8+BUG3oAYNBcJAkwuC8PApFziKwF8AfQBJgErlULsiUt20WC3X6DVxNeUl2IrXuMLRBsEg6EbEUACOwUsSxexnSJhC9QZ1htpVUbPuh+5z8yJ1pFkuvYOcm5TyBTyIBgTWBtUGYNYC1o5RIYiHUCAoPk4gkXVmeOeEtLNUEjRF4FeL9Q+QFHmCHdrkN4sGoAYomHmC/HzpdMNIGXGR4IO0V1jNAGjhg1NNaVwM2oCuoY/9Gdqu5XdBwZCJP+EROpJlQD0G2y2yXqdtl2boDXMTBhojAZ78k4dOfauyKVq4NLmigQbneone4DgI6BgRhkLFn+QnMXThMn4ziNmMUHVe7glDrQIIYB4I6dUPuQbubURJndmHg81h9lPsFtnnQWeBDaoVtplpBqg45HweCxuQnRcW0fnHXOJqEdaxY5iwGWCu/G4sbVGlO2Kk3GpSC4DhWMjDPhDwGEjqd3TOqXus1BB5517B5+aC1okY7N9d8cRwbC/5UWgZ+BoGXxfQqkQ5id2pFor6JtRgqCCuCyNRW7zg8FiEuZVXXLtESnVGmCE94lLcoszgFIn9Ma01vUEzQbmwMhE5737e46A8MJsi9l2tiqV2ZF28mY1hHb6oyzbdeRqw06MPa2zUL4bFJeC66AmFCPJrjSWFUT1PzeUiBckoXzCK5OWY1HD3ZsyW2gVAu0LMZJDG6fY7qF5nUbYHO+oEf4TCN1LDoOl1VKtUFBcB5YkXe1Qc0ouw0Lg9EiTaCw+nONksfwFL4K5Uw0InbVqGwrrabANQDuHJkczihzzM5CnYwt5/laAGAM7IdU+AdigPBkQHBARPBAxTmqCjotuDeMgWAwmLXsMIXz9u6QhuYRIXTWP7Sh0oQttXwCA4GBcElMK0PsC0Ke00q5u5WAfYCCfyfMILBfqFasFAQFwiU1HyKvDPEzGEg1lSyR6lYBgP8wCnwbETfEt+Gr06lTTMtwv1Y/h6vhWoVgTeAMkzuMxQKxWmsZTvOOFfCqBbcCAj7fxdQc1Cfg2TOqapGo1mBASGI8xTTL5CpDqsqupL5PQRbaB9W/iYi/Rr6h7wFCtjyiny4QcKMCAdWsKkPOo6OyzOajOcjM/GAKUHc1BTaHh5g7xdIULAijSTihNHHhhMhmkeOIpYc02CECCDUFtypMTqqovBYEEUqBeI25QwOp/2BbZhCqMwZVXIIl0a0KrAXOF2yF7z6uQ9rAzgpm8TrexiDoHkM9egWC9pNFhi420CAJS2PXxglUpqI6zitofZKLtb2lscqhsk+Ac3yMeVDmAjPd1qdnGXvOMbKTzH6vljWtUbp4gUFwTtUd5tQNE+8auwGIaGhChD3VmhVruQSmJTp3rLfn4BYD8WyuOafhEjsR4Y/t7QVCAwitVbqS2Ea+1/AZ5OIE1iz2E5o44VcAOChqAtANQgJEVglypTqefY4RqjDbpfSyM0k2rXfQo/6gxjsPzkyyFz9aYbPbUb4bThO8R3npA1S8+8RVKYDBbVa2Y9JUGgPCbZZB3hsACLGIirfgtETXKtsxue20u7bCRyx7GexT9cLGu5A97MgJyMLrPRHxL70SyFSAgTa7VhpMm11HxH/k5VClBJDq2tFMWLk+6KvCRy2fFy+L94IwoWO9NP5PnCGYUfUm/THfjv9NBf0N6UGHaHzqzbQAAAAASUVORK5CYII="/>
    <image id="2b" width="43" height="39" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAnCAYAAACWn7G7AAAACXBIWXMAAA7EAAAOxAGVKw4bAAADoklEQVRYhdWZ3XbaMBCExxQSCm2v8nJ5wrxc7hrCT0joBRo8HkayKTetztkjY2T0abzeXQvgP2rdPRc/n15vuv6lezrdM9/kySpgty72CvaWBYxOZpCd9a3jBHeq9ADGwauwDUg1hOMxODXYcRM4wgpogpxVjn1xNcCvyufLomrAV7AG6pDJHFqbQyVLC4jA87SCBuQ3s5n0Duygn8X0mIZy/rLI59Nr58AD2KCqQs5LvyjHcznnwAqrcMdgXQ04KZhAOSlBCLgA8GD9QhbjsAr6IXawzx8YKn/xY1XX3cBvPyEI9wDg0YzQhJ0JrIPui81LX/NxXfClJZ8lrKq6KGBLAN+LLYspMN1BYY84K7kHsCtG9/G7cBXa1HdryrqvPhSwVbF16QlOYMJ26F2Aiu4AvNuiUqTQ8wN156SXVSosXUBV/SFG6GWBpWIoEx8L7A7AVsbMZIxHB57TWN3DBmXpBuqvVHYN4KfYWtRdmLJ8mLblewflYmjHApxi9k1u8FigVjir+kuAV+hdwWH3shCqRfc4iGk00bsco0GKsUldAqvCa/SuoG5AWILwlh/QP2yMJBqvo7IzP9FQV4Edeo3eh92naXwgGUGoNkFTFgSAjjkguYEDc8WatTTuauylssxKFOOIs8KaSGrZr1bBVWsDH5ySRaoVaLz2qzI2FUC1krSawbTV6koP3MmmjPM5Rt8YWrA6ocdCFiEaduboowBKzyedY3ldqgPSIppxNtWfDsfUyaxEPz2VMeqzmhD49O9lERpbFXoAnNKtDkqgmt81G2lMZSrt5Fqm2TcAm3K8FWgHdujJynohQkiFIugSOYPxug2A3w1gugbnVgGbsKosb70GcIYkfs906rBc6LYAbnBW+A29a4y5Q4RlHcmB6gJ7DMMOTDktZLRE1EKG7rARo7qEHXeDl+7pVLJETVl9DyMoVeND5qqrG/GB3Iq9o3/gkrLAiBtwACdK+wRepzKLadrk7xBWo8gO15HBX2viW27y2Rqwnqeq/h6Wqn8HTqZuEF0AsPwrRbgXMlobaG6vVUyE1fcwTySeKLiwC3DzVVwmAa5fi9WXGfy9YvIqTtXldQrvbwieyQZtyo6MFh1exPjOTGuTQ+0znBvE17QjM2WvK+1z1Xr9TS9ofKuounUE5O2jCBuAE3iKFGkfQIHHKrQqaBPWgB261aeWqqmrWPrX+7Pawq732OfUqrXr1N3vSbDabv0fodbu/X/hn29/AAo2VaYa5XYBAAAAAElFTkSuQmCC"/>
    <image id="2c" width="48" height="53" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA1CAYAAAAHz2g0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEw0lEQVRoge1ay3LbMAxc2c6zSU/5uX5hfq7HJo7t2OqhXGu1Akgp8UybmXIGI1mWCCxeBCEBX3x0l5zsR/9z9nzP3VN/CZ6zGTaE+4wiUiBzQFYZB0J3M86XDBewz/7LwISMTfAuOEbXqnPOELSvnAOIQawajCjsqtBaaFPoSug6+H2dXL+S5znXWnithH8HxG48uSA36cMrjIH4uVNtuJZ7ACc5nux3bzSyxIhZRXhqPzq6xhAcM8Ep5LFxTEFsAg258O426j68Hpm9BYCaPhZ6lyPPO/lf5ziPCAAZq+YjfydFQDIAmfCHIvSh0L781mdPMt/UhYr7uNtQcAbdTaFrOXoQasyQBxmqb1PbFJi0kyMB0SLqUnjunvqaC6n2KfwtgLtyvDVAbgkH4D5PzVPYt0Jre0YDW90zjQFg6j4EcAfgXohgbjB2J89OketQuxScSlglwiuIswttgGb2oQsRwLdCD+VIEHQnWiED4K6zBfBa+FAOve8d09g6j6UuRAs8APhuIOhKfCYCoBlnXzRP63FR7TEOaMbAezDnBIBaIosBAngUusdgBQY05+Bw36ffq/CnIuiuEC0apWg4ABde44DLf2SFR4ytQADKUC1A7e/wx31UeALTmPK5VN5qFuowXsAiEIyFBwyxQMYRALoCAWwEGAPa03O2SALIs5ACURAszDSlalYiALpFBmBX5gTGWteU7MWdr/DNGMhKCq0oyVTXBwVAxsxAmlW6co3C+6JY1TxH5kIKwuNBXcpLZi2dIwDUKMrvPaZliS6IUYU7y4VaVakXeFrb1yygeV6fy4pCz/2z1gG9ObJGVGJHwByAW2Jtz9VcZpELZUBq8VEjXfqz/1s80jEHQAZmCS19dvZo7Yn/+fEfwN8eXx7A0iDm8C5BjT5y/0UBLGGuOyeOLvhvCdgPA/AJsibUEeMNN6/xfgVwrDwTAYzkmAXABc+E9l7OAUMez4o53WFpD8gBZZZpAshMqUyU+R7D/la3hVp6qAVYPvO5rHUSWQN23rRApHFtPnHr9ybC877WfoDdCAejVoksMRoOQG/yJpRvB7UdssZgJVajmQV0Q78t5GAia7g7hQCAMeJoI07ht0V4ap7WWbInfgXwUohA2KE7CO80MymAKHDVb1Xzrxh3E44YNunaScgAaE/oVyGC2GJoK6ornVuKKm/kQpp1nCGFp4ZVeG8xZgBcIS8BCI0LtYIruupC3kVjn0aF57Zwi6EVottB7wtFc7IzF7kSreAL5DgGnrunvrQXI/+nz2r3mf97K6TVG82sQBAkBrRaIEqp1TQaaUv3tEcM2ve+aK297n1PTwzMSG6BZhC78J0wUoGYz9WtXPiwEYtxbEXvB3ZCTKe+JgDuQia8g2BTlde1Nc7umm7mo62kr+6e4XyB1BU6WwvOk59H8pbGXzMp8frSd2RuCa+rDnZtEsS1l3zqr35d/Td7SxkJXwORValRTaRzxEwaLzuixpNnnEz4CERU6Wal9dl99D1xaz/AoUy0xsnaIXMBKBAFk9Hkc4OQUeVbicg6Ps+cvo6XBBEY+DH6VqLKLAGi5/783KaUCxLV+6N7Fn2t4qPyrdCiLlpjhAK2vhn6lABLvtBqjUt9wfXlxm/KDCtMj03mWAAAAABJRU5ErkJggg=="/>
    <image id="2d" width="48" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA0CAYAAADMk7uRAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEkklEQVRoge1ay3LbMAxcp3bzcnvqz+UL+3O5tY3t2I57CDdergBISjLT8Uw5g6EsiyQWDxKABFx4W7x34MPp8d1js/Zz8eM0d8wkJhJmPx0AgAGAMVAlE8b4wvrqemo7BdfRvRRIuGjBuBKC62yNaHFn+CSE4DoEMVg0YF7pqvjt80WAXLoRvRT/DUAsg0V0cWXyqqBIM1lzCb8kpP+9jX04PS4URLeQSF8lTPpipPci7VQAnPmj9E4KaKCJSAPOPJlcJqSAFIjOF9m5Mn8IiHwc29hOEzo5gIH0lXkyugLw1fqVAXGT8qY2TgkfAOyFnu33Hr02Oi24BtxBKd0VgGujr9JnIDhnJXkyvWvEOYDEkaVPTcg1QKnfALi1niBWGJqTamGM+Y3MsQjGqPbezHKKDyxxlvYtgDsA962/MxDqExkAmgOZ3zZS5v3ZI3rr6DVg9s+eGqCtE8A9gHUjAiGISAsKwO2ekn9CL/nIuY9tztFzINqBqIGbxvAawLdG6wbMtaBmRPuNpH/dxizkmUP7n+QCSU0ocmL6gAK4b8x/b71qgQ6dAXDpr0SyCi4TRre7KYAohJgK4h5nLXBr1TNBbZoAto1JMk+pq0/4zubCHmyjzny0ExGEOvS6XRMApaoaUADPOPvLS7tHjegcszQADLUwBQSB0IwyAJTyHmcTO+FsTrodZwfjqA8o81VIQSYJhoBucLZdXZwaOMh/aL/1QIxO9jJQzEwoA6LB3Ao9EPYVADJFh3WmXfJVWJICUMZ57SG1AllKr3FTBEC3yiwgrCQ/AJIByIAoiAyQMqMAXBORpCczPhWAA4kmnkJznw93nI8AGAP0WQBmNz8cLq79B/Cv28UDmOvEWb2moo+M+xQAY8xkdR22xchzUSErWnc2gGgyLzhl9Rw/8DQWiuo+Xv/pqg8VkAzAWB1H0709+iiTDGcAtIyi6aKCc804XyWAqvRX1XI0RGb+mgHYoU8Znw3MmGmlACo7V+lx0R1esyeV/AF1PnCQcVsD41rRYlbYKhPyLMrrOFvEOe2UlJKp41OjjYEhkMycysKWS96LUGScqd9Ve46ZlQNg87l2jfnfAP60a2qFIMZ8ogOQ2b5LbYM+adG0UMuMEQCaIoWxacw7iB36umjq0JUPZNL3ChptmmkhkxuNMr0uFJnRrwaC5kTHTkvsEQAgNh/aPbMnzawoSa+PRgAioWzQa8K1QBDhwbYEXsvUrbyYmQ/rOOqUR7mv9aCpxd29jKdpqkNHzjz5HIg04DUelaAXdmn7DkDn1SocS+tb9Nur+sCoE3MRj130bQmfoenorqPmVQGITMnPFj8X3JHfQHRpXDMjjWO8qLWy65X87wl6BSA6Y/x090Ot00L1joyLvST3OCnDh6yCFuW4WRSrsVAWG+VOHCzC5i/WdCusXrVWCXoWjntkmtp++poVCF+1qllFdaG51YUs0o3Cdb33NrYEEICIwIyVRTIQUWjsGokoZL5aaOx7Cb9XzlU0D86igC00HWcsbMFnNnN/Zy0KjyPtAKg/uZkstZkfOI058Wh7z8dPF9n+Akw5M9cvVTL/AAAAAElFTkSuQmCC"/>
    <image id="2e" width="52" height="48" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAwCAYAAABe6Vn9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEqUlEQVRogd2a3VLjMAyFT0qh/C1XvBxPyMtxudAW0nYv8GmOFclWYHd2Bs9o8m/7i2RbUgL8sDIsufnp9LLo/r9VnofHU/bebgcdiN7xd4vtfHXcgws7Y0CG5DbTRqtDp+Q2BJt1pAESCcx+rw2vI9phu2/lfL8HtQ464UGsgq0HGMF4QB7AMdhWUE+nl8FCVQ2KdiyIyoVzboWctrIgh7JP0eOZxhTK05CFIcC67FPWmMNFmuoB2c5bGWSrYLNyBnLGDmHY+TWAS7OlEExNMQOkmlGAEcBHkRHTSzrIs4Psz4EExJoaAS4BXAHYlC2PLZRqqgekJqYg70a0vuZYikxOYdYCsgFwXYTHERTrimDU1AhDgH2RHWqNe+NtELiuhi5Qa+YGwG3ZUiyUN0lYGKAeNwqzK7KVeuw4O5ZrqqmpsTJ+KBwzBLkuELcA7ozcYtIWoXQ8tTSk2qGZEeQNwKsjO3xq7r08o7MfnofH01c0dAfgF4D7IoTiuOJE0gLSscNxsy8wfDGD3KMTxEfrhbWmbR1Dl6XTBLoH8FDA7sr5a0yznzU7D8iOnR0+XxqfP2E+tqwFzIqnIUiHaH5XmMxPtfSASUs3mGZD1ZA3hjxz25ZnCUOQPWLtq8xmObvSe1A6MaimCKQNR2bhAe1Qa8ZqTde9pvZ7JqdAOpaoKU4W95hmvCVAHBM6Zgi4kfq0zqZHEpmcB8UJwgMjHE1zCRAXTh7vUS/e6nJ5MFX9GW/bQlnPgbKRfZpGC+ggnaSZ7aVugnhLQRiHRSbXg7L+nQXMaEg9ilHqinxE6yemx5CCWCjrgVvPW497QDzv1WE9eDsJhH5iy+QUJhMnRTFS5Pqcks96bYelBxTBWclcz9aVrcMtq/4t3ZJOMSXq+XZdWQ1FCYue/Ou6FgNFWRjrynsC9NchK/Za1P5ioAyIjftHTDMUkFuHxiJah02Q2KwP0IDygDIg7MiHEcJwnekBqXPK8MBCehmfEKqlIW1cQTQu0ZD5Qu4fE0Dq+uxFCMd2ohSWC2WB9IaWVjTmp2cAuSfjKaiGGKky/FYw1pmCUqDI1Gw2hiCMLglzwDx8QACkmR6+IIbdb6Vu1ZiaoQflAtkG7VvUN6lhAmHekQ/wbOqK4fcrgN8CRm2p+SnUrEQm540b1Yx2+lCuaQieySl4ITi1RCjVFKHClLAHBMw1pKa2xeR4ApNmliRJ7MxpkyRvqLW0RZ3lsWZXFU9D3szGN6hjQ+1f46BeGssbozaNRfOLzC5cYM8NltxcKzmiYTejVM3JeWFy1UYAZLVE06Z2KJwB3UkiSgV7Da0whcm8R7VmTe07qWA7k+qWIHZdqkp2DOm1I2oT0YlgyScVbzZV70OT9TznwYTrEMxN6mDqubFAaOIv+vLQ0lALSsVziapJwf3g9Tw8nuQbkQKNpmH1BqIPXi0YDyjyF72PX19aWFmO5rw25n3kysC0oDwwL8QIve1Zw8F3Vi9R0gJZAuRBachwdM6dn29+NA6gIjh7rVlno9jB7XkArlfgfdYPG1/440WzrmTxZi0PFsCCHy9sSfwak6onWWwnZ53+8q8xXvkfPy8t+XHpR5Y/ZaguuvoNjWEAAAAASUVORK5CYII="/>
    <image id="2f" width="52" height="48" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAwCAYAAABe6Vn9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEqElEQVRogd2ay3LbMAxFIT/qxE26ys/lC/Nz2bV1/IisLsprXV0BJNRkughnMPRDgngEkAQgmX2x1i05+Hl4XXT8Z7WX7mnIHtscoAPR+v7RpoOffG/BhYMRkC7ZZ/VHgxqSfQjmXpBguI/E5HPrGt5AvIFHcjvOg5oNQmBYVkHvAYb6HSgP4hr0MziFmlwwgFmJrJ3fGK4G4oGpXIv0wecq1Ma5iMKsqd+UHp8VMLJUBIMeA8XAezN7L31fdPc2BVM9UyBnEcBgMXjItgj/5kGxrgjEs8p7kYv0nehwFwW1kOdqDPHNkQyU1xgGdx8AFzM7F1mXXm+ClXOH5+G1g9tFLsfzBUA7M7srsqOeLcZQ0FWDgZsxzNnMTmZ2JH16DgQ3LpxD3vzZ2F9L3JnZfZF96QG1s9FSGSupdRjmWAQ3qLO5a+o8mgBg/kB4zsASgPhuZg+l3xPYzkb3w13NAME6bJk3MzuY2W8z+1X6Q5G3Anu2ca7d4F66p6FmIV4QYCGGeiSw+3LMls5rAfHcYTfDjenkOMyt6g2rLdvqcrDWvsA8mtmPAuVZKQvE1jnY6Lb6v87TFBAOiBYFdr1Hkn2BZStFexLPB7gNXG1brjvYOK9ONl8kvAhltspFUQIv2zynGApWAtDG8kCXMljcCMAAYmdT6zDUrLVcji3lQQHswUa3w8Ait2AgzAu42UCAvC3oXhdGJJHL6Txi18MGy/sS4DCPMkB90XW20WVgGejJwEz0exZiOLWWBwYBIAaRAbrYaJm+wOhGnbJMDUjjMAXS+G4rkrUQz4N30uXFiOkcLLKQdyLnQRyBaxTOkXgNCG7m6dC0JJ2e1FyOYTJ5UitHUqAhea537bC1gCK4mgtE/y/Rl9Uxa6v2Ic2WLjEl9HxYV9ZCtaJFq6DxWbpSsC0grbREYbwnZu2NtSUK0gSLgDIgvQjiMrhxZh/COapLiyIKl07BcbBe3APhdBnhy7qcd10AhGgatQMPsGaxJhBftFbA4Lz/ZKNlEHRmgXA+BDoBGJWw3KZASu/B8AA4IeNBZmM5jraRjR4JTK3mWWoCx0DqnzUYDABhTkeD42jbKkCcPiAfQrrtgcH9qitfNIc0RdZqzIFgrBx7so8leEeb1hFgsZNN3Q+WSi0K3iKgd5HTbLOxJsApOIcv3g3DTVDLHwrQT4Fi9wtLwh4QX5Tdja2DAWNQKD1p0TEKJBmI5xFbCZaC+8H1eC6lXE4txCsacnoMEP/DBZE+aIpcA/IKJVzGgpXU7XhvmrTbxUptrlUxvRfRQqOX87eA+MZxofGN4PBdV7+btaJSsLfCIatE49+RYWKByGaW0UrKloIL4vMMwlOcWeW4TKQbIldrPqtYD92wRGajDYF4L9LasQfkZZmZzFKvA70aVnEfwrgPvF66p4GeEUVA7O/6wItT5RoM62sFvhrX4b/FGyuaPimDwpWNc0v3nGyG6UXzHlgrpZi02YUrD421UKK/qb6MhfizB6apw1WOrz80DqAiOP09C6JNg0wvAvC+5x7roy188aKqK9m8PCfql714wS3xakxKT7LpIGeD/udXY6L2v19gWvLi0pdsfwDrTzKXc+jmowAAAABJRU5ErkJggg=="/>
    <image id="2g" width="76" height="56" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAA4CAYAAABXJB78AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGn0lEQVR4nO2c21LjSBBE0zYwHhhmX/bn+ML9OV6XGTCL5wGllU5ltSSDL0RsRXRIsmypdZRVXX2BBQ6wh+3jwj5ajGx9Px23bFsc63YbzuOfxd/+2w/ZnEo7KIXi++kzv98hwBxQOvbPPxXapEoHUA5jiX1QfpygHQpMy1uxTfA+BdxopQVWAkA4Xha2z2O9zqT7YwhL4Wj5z44dIICPQ7uqThSqqgCtuuL7DjEpDsjgPCZVkFheZZ/ngH1wH7b4hk1VwFA1KytXXVnJVov+vnLRylxZDollY8cKT1X3IZWVChPjQ/LBFcy1bK/lWIsqz6EhbIFaXQSgkDYAXqRsunts7Bq8/vZh+7g4FNoAmKnL3Y4QrgHcyPabHSu8ltKAoWsmWAqMyiKoZym/u62rltd8s+PZtnfhEODV/RQUIa1ty0JoqjKNa61YVgFTV1RYvwH8ksJjQqQK1UUPds3kkim4ExaBrAF8t7KWQqhJZZXCKlUkddH9COeb3Gtp10jphl5/llUxTKFRJVTVdwC3XbmTrYKjym7QBtZqKStgqq5fAJ7sPgv7nacZy+46OCSW7YCNuCNdkcq6A/DDikKjEt0tk0vS5gKjutbdfRSW52baWu41AFMgqbnCUsBXd1zjXVE/ANwD+NkVQrtFrzIN/p6XTUktHBhbRwWm6lrK9z030zRjKd+ZrbJWDGMqkYDd4R3UX9iHRpW5wsYC/lRgrjDeY2nf9bSDOZoq7SCVJYW5S2rryPhFl7xHD+0e+8CosKkpRWXeSjLoV8ry/EyBEdoS0lrOUdlYK+nAGPTvunIv5Sd6lySwsdg1BxgV9ophkFdlpfzM0wsG/9kt5hUQx7c8YVVgDPzaUtId79C3ktrMt3IvhGN/CI9jvK7D0txMy3N37hq9yhby+8k2xSWTyqi0VBjw2ToqMGAfzhyFEYymJ8AwtikwTWYJ7Qq9e+/ysoft46REVoGltz4GbW0l5V9V33GOKTRVlsYtz/yf0L9EBcZ4tkIf/CerbBk+S+Nd2o/0znYq3vn2/mQaGkolfcf7s/riCOhWiifTnubsXmYITQNr5WGpi6TDNz4qkTraKaP3e7VM377ur9C7qCbVz6i7bApMYxmD/ySlJYVpZVvgWspJY1+toN8yd2etCxukqlFyaBouYsgYU1nLJb2CDi1l7mMjqx+xKV235J4JWiuhbtqYwvx4rACfC6mql6usFdNSHKsapVGVtYBp5Vpx6BhqatVH7+sNkrvlVJWt7NqljQFLFT4VnCn1GFOZw9JeiELT8AKgVtlcYJdgVQMwBiy1mD4aPCqGrwhMjQ9XJdeem6UWM+VlALLKviqwlO60eiNJaaqyyS3mVwWmlhoATWbHgLW6cQP76sAODf4p+48qc7f86sDUpuZlSWUpxfg0l0yrY85R1LTldGg+slL1L8s4piqbslQgVXTsYXTM/BT5mgKs4lk18awd8pfudzrAuNcpbwHzN+mTotUqGr0ZcDxg1Qy5jm5U4HTrs/Qb+e0bzCpgaXjYZ2/SCppX9G+E4+anUpgOKOrypgpcGsOr5h+aCqvcLkHSaSzKWYeSTwHM66v1TODSgKivbxukF5xZcmB+c1eUT2FxRobZMrrvpbH8Y1uaXdKZIp73vM231UjMFpgWw1rLjDh+zhu9dee9f3Zsq1TGenIsfzD5gZmDnJVLJlgbDCcZqCxW8kU+a+YzR7KkMs6ScyLEZ8G9cVsU+wD2gSV3rFTFNQ3qhi/o5yMndTOOZD6HyRfNl8xpN50NT8uhorViWLWe4Ql9oFRl6XzkuYHpC2cco2f8i/25ypbiBvAql1RY+pZ80RorpAtD0mz3KSylQmnFD5X21B3rXKUuiYpKuwLely526X+KXwqMyoFU5hm9i5ZjSye2VlhRaFzaOdk9W4kr3Y2BU4dwWRG6Ykr+zjmMnV68p0O6lKByTcCgtVpJfTv68FqBm+6GVaYMnAcaH9LX9qvSfIXPC4ZryAbQdsA6t9QbsgP9ahXRuDBnSeYprZWAew9F15Gl4D+qMN5o0PHEEJguHUiB/pwzS1N6Lakkhe1W9rT6ktz3v9nhzVLf69yu6OZpUjWAUC0ebivMWktguBaUAKulApeiLprHoGp4qvoruIHFh5r4J39V38uvec6g758lcNvieHcdXWhXPkz4izaHkiBdgqoq81CThrH83GBVYvMBiz9Z1v1LUNMcc2i+vwcnLeGc9ICN1SyXDmjMBkDG1rke/MBTljdeun32fxz434L9AZ7ptX/DaxeNAAAAAElFTkSuQmCC"/>
    <image id="2h" width="86" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAApCAYAAACvIt7jAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEmklEQVRoge2bzVLbQBCEW8YGgiG58HI8IS/HMeBfrBy0Y/W2ZlaKqyivEqZqSrKx1t6Pdmt2JAPf8SXRXHLQS/t20XFzjNfmub3kuMmAHJhjj+caCjJ7PBX0KAwB2jhb7++Tx79yRBDHtqOAw4k7QBliE6SOOSewLXKAUWbHRYDdiRNU3i7QA1wEW++4mqME8hRsFbILd6lPCFTORcob2rfHCnfMIq4dnlIV4mfanuSx/V3HySKbcACVAXIuaZ+Bl6yhplC1KsBj2rc8Ygj8rFxV7UCxKRgqw1ylY2xr+/waDy6Pe83wTlYK1SAeARxou0j7HGflvrRvDcM9g3XUyko1gCsAt04aZA8uR01g1QIM6oFyn/Imbb3P79qCKlY9kqHeArgDcJ/yjvIWvYrHVFtLqFpZpTvKLfrzSCPHtum58ZMXhjawRAfOgD4A+EFpkFm5pvbawbIFGNQ9OqCblCaWRo4bwGU7iBTL3mpg79BBXVM+pDTlqmoXzvjXDLUCBstQt+jnY1C9E5xlA1HuEjj7q+exbAP36BS6BvAE4DHlOj3PluCBvTZUC64G2AbMArbolOpB5ZOb7S8wwQo8xTJYU+wTgJ/oAT+gtwS1Ax67hlCwbANmAe/o5wDndau0b3YHeIqV4IogUuwjOqi/0naNHizbQa21LPsjn7TYAkyJahO36CuFwYrzpX3Da/PcMlhvpcUe66nWlPuI3g4MLCu2JrCRYvfwobLvWkbVT6jYUg3L5ZZVBKZeO5HNWbF7dJ+7Qe+7O3Tz/IBfUnL1k0Vp5aVLWV4gcD1roLXs8qqCmkIVy35qfmvzUaiuDfDgpTrWg7uUXAVpYGutY1mx9jkNsjcXXVmO9kM8K9B9D3Qpoz5trTF1bl4HDwjmtyz90Qlt9p6C/PzLca8RuqTlDBvbEuH8Io8d+wBWIHOpwsU0e1CtYfOyQt8aLtyEsXkqdB1jEEt6AZcLpXaavak1KTbIyxNeec0BLK+8uKTaIYfNq62sF+uFp1gPKjcobMmnNd8BeSOmdn/VliEvad/RlVgb9JBLcCd1t7x2mgfV4BlUr4atHSyQfxttjh8AfqMHzAo+0DGhDzNYbfx6PcoNelWCXrNF3oCZE1hdfe3RwXxHDneDoXJDS1DFMlzuqO+Q13S8OuGloNZ6tYc3V1atwWXVRmBHr3mVbICLaf7q6OWZ2k9cFp7PavtQFbuH77UA0EaN7ugaEC9PuePD3SBdQ88NLFufNl7sasIWuc9OUqxXah0x7N5wg4IvJmpjAqgbrjdfrs3Nb3eSXn3re+xr89zSVVp7kyYdzHD4K8NrafZVbf7WGgrWvol60uZFg9a0JxnnHJ4V2PYkz9sbHzFsTER9gtpjbEHECuYcrWOzydO1L68xoXfC6O1Gk5oTFUYEVwGfZL94N0xUFVjof8UGv6jjU2noV9nmWWoy8WsGUAEHQHCnoQKMvvZzAqrhea6KynsewASwQHhvLO/r43CsmYWnXg84v8a9jTOEUbg13muGF8eaWWhbMHqueFf3JBjBjzn+FZBjMYA35XcIF8P5X345c+mvZr7ji+IPPk7IumiDX5AAAAAASUVORK5CYII="/>
  </defs>
</svg>
`,GamepadRightSvg=`<svg width="100%" height="100%" viewBox="0 0 123 232" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd">
  <g id="right_side_of_controller">
    <path d="M10.5 140.855c6 29.375 13.537 33.424 35.28 43.583 35.355 16.519 33.138 57.105 56.59 45.51 14.36-7.1 21.13-19.23 21.13-38.4 0-24.92-11.42-65.99-32.4-119.1-10.625-22.2-25.844-16.642-42.794-16.642-7.93 0-15.744-1.225-22.454 2.225-14.564 7.511-21.031 55.022-15.352 82.824Z"/>
    <g id="stick_button_right">
      <g id="stick_bg_right">
        <circle id="shadow12" cx="42.54" cy="176.272" r="26.46" style="fill-opacity:.5"/>
        <circle id="Oval6" cx="41.3" cy="175.022" r="25.21" style="fill:#6180b0;stroke:#000;stroke-width:2.49px"/>
      </g>
      <path d="M41.215 179.291v-8.477h25.442v-7.872l12.11 12.11-12.11 12.11v-7.871H41.215Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_right_direction_highlight"/>
      <path d="M36.977 175.052h8.477v25.442h7.871l-12.11 12.11-12.11-12.11h7.872v-25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_down_direction_highlight"/>
      <path d="M41.216 170.814v8.477H15.774v7.871l-12.11-12.11 12.11-12.11v7.872h25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_left_direction_highlight"/>
      <path d="M45.454 175.052h-8.477V149.61h-7.872l12.11-12.11 12.11 12.11h-7.871v25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_up_direction_highlight"/>
      <g id="stick_right">
        <circle id="shadow13" cx="43.16" cy="176.892" r="17.12" style="fill-opacity:.5"/>
        <use xlink:href="#4a" x="161" y="142" width="65" height="66" transform="translate(-152)" class="gpad-highlight" id="stick_button_right_highlight"/>
        <g id="Group-61">
          <circle id="Oval-Copy1" cx="41.3" cy="175.022" r="15.88" style="fill:#fff;stroke:#000;stroke-width:2.49px"/>
          <circle id="Oval-Copy-21" cx="41.3" cy="175.022" r="12.14" style="fill:#fff;stroke:#000;stroke-width:1.25px"/>
          <path d="M39.689 175a.318.318 0 0 0 .317-.353l-.282-2.586a.318.318 0 0 0-.317-.284h-2.102a.32.32 0 0 1-.239-.53l3.995-4.543a.317.317 0 0 1 .478 0l3.995 4.543a.32.32 0 0 1-.239.53h-2.102c-.163 0-.3.122-.317.284l-.282 2.586a.318.318 0 0 0 .317.353h3.433a.32.32 0 0 0 .319-.319v-.968a.318.318 0 0 1 .51-.255l3.05 2.287a.32.32 0 0 1 0 .51l-3.05 2.287a.318.318 0 0 1-.51-.255v-.968a.32.32 0 0 0-.319-.319h-3.721a.32.32 0 0 0-.317.284l-.386 3.542a.318.318 0 0 0 .317.353h.029a.318.318 0 0 1 .233.537l-.966 1.034a.318.318 0 0 1-.466 0 972.66 972.66 0 0 1-.966-1.034.318.318 0 0 1 .233-.537h.029a.318.318 0 0 0 .317-.353l-.386-3.542a.32.32 0 0 0-.317-.284h-3.721a.32.32 0 0 0-.319.319v.968a.318.318 0 0 1-.51.255l-3.05-2.287a.32.32 0 0 1 0-.51l3.05-2.287a.318.318 0 0 1 .51.255v.968a.32.32 0 0 0 .319.319h3.433Z"/>
        </g>
      </g>
    </g>
    <g id="start_button">
      <path id="start" d="M30.051 132.744a8.497 8.497 0 0 1 2.825 6.334 8.495 8.495 0 0 1-2.825 6.333H18.67a8.495 8.495 0 0 1-2.825-6.333 8.497 8.497 0 0 1 2.825-6.334h11.381Z" style="fill:#9a9a9a;fill-opacity:.5"/>
      <use xlink:href="#4b" x="152" y="117" width="46" height="41" transform="translate(-152)" class="gpad-highlight" id="start_button_highlight"/>
      <path id="start1" d="M28.85 131.196a8.494 8.494 0 0 1 2.826 6.333 8.496 8.496 0 0 1-2.826 6.333H17.47a8.495 8.495 0 0 1-2.825-6.333 8.493 8.493 0 0 1 2.825-6.333h11.38Z" style="fill:#fff;stroke:#000;stroke-width:1.35px"/>
      <path id="Playstation_Btn_Icon" d="m20.832 134.571 5.982 2.961-5.975 2.955v-5.916h-.007Z" style="stroke:#000;stroke-width:1.1px;stroke-linejoin:round"/>
    </g>
    <g id="button_1">
      <g id="Group">
        <circle id="shadow" cx="45.85" cy="121.855" r="11.806" style="fill:#00ff04;fill-opacity:.5"/>
        <use xlink:href="#4c" x="171" y="95" width="52" height="52" transform="translate(-152)" class="gpad-highlight" id="button_1_highlight"/>
        <circle id="Oval" cx="44.99" cy="121.007" r="10.945" style="fill:#00ff04;stroke:#000;stroke-width:1.72px"/>
      </g>
      <g id="Playstation_Btn_Icon1">
        <path id="Line" d="m41.345 117.35 7.72 7.731" style="fill:none;stroke:#000;stroke-width:1.72px;stroke-linecap:round;stroke-linejoin:round"/>
        <path id="Line-Copy" d="m41.345 125.081 7.72-7.731" style="fill:none;stroke:#000;stroke-width:1.72px;stroke-linecap:round;stroke-linejoin:round"/>
      </g>
    </g>
    <g id="button_2">
      <g id="Group1">
        <circle id="shadow1" cx="66.7" cy="101.005" r="11.806" style="fill:#ff0009;fill-opacity:.5"/>
        <use xlink:href="#4d" x="192" y="74" width="52" height="52" transform="translate(-152)" class="gpad-highlight" id="button_2_highlight"/>
        <circle id="Oval1" cx="65.851" cy="100.145" r="10.945" style="fill:#ff0009;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path d="M60.941 95.78c-.898 0-1.637.739-1.637 1.637v5.456c0 .898.739 1.637 1.637 1.637h5.456c.898 0 1.637-.739 1.637-1.637v-5.456c0-.898-.739-1.637-1.637-1.637h-5.456Zm11.457.546a.548.548 0 0 0-.931-.386l-2.182 2.183a.542.542 0 0 0-.16.385v3.274c0 .145.057.284.16.386l2.182 2.182c.103.102.241.16.386.16a.548.548 0 0 0 .545-.546v-7.638Zm-8.746.911a2.905 2.905 0 0 1 2.898 2.908 2.906 2.906 0 0 1-2.898 2.909 2.905 2.905 0 0 1-2.897-2.909 2.904 2.904 0 0 1 2.897-2.908Zm0 1.212c.933 0 1.69.76 1.69 1.696 0 .936-.757 1.696-1.69 1.696-.932 0-1.689-.76-1.689-1.696 0-.936.757-1.696 1.689-1.696Z"/>
    </g>
    <g id="button_3">
      <g id="Group2">
        <circle id="shadow2" cx="25" cy="101.005" r="11.806" style="fill:#48c0fb;fill-opacity:.5"/>
        <use xlink:href="#4e" x="151" y="74" width="51" height="52" transform="translate(-152)" class="gpad-highlight" id="button_3_highlight"/>
        <circle id="Oval3" cx="24.14" cy="100.145" r="10.945" style="fill:#48c0fb;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path d="M17.592 98.69c0-.798.657-1.455 1.455-1.455h.677c.486 0 .941-.243 1.21-.647l.591-.888c.27-.404.725-.647 1.211-.647h2.808c.486 0 .941.243 1.21.647l.591.888c.27.404.725.647 1.211.647h.676c.798 0 1.455.657 1.455 1.455v5.093c0 .798-.657 1.455-1.455 1.455H19.047a1.462 1.462 0 0 1-1.455-1.455V98.69Zm9.821 2.183a3.288 3.288 0 0 1-3.273 3.273 3.289 3.289 0 0 1-3.274-3.273 3.29 3.29 0 0 1 3.274-3.274 3.289 3.289 0 0 1 3.273 3.274Zm-3.273 2.182a2.192 2.192 0 0 0 2.182-2.182 2.193 2.193 0 0 0-2.182-2.183 2.193 2.193 0 0 0-2.183 2.183c0 1.197.985 2.182 2.183 2.182Z"/>
    </g>
    <g id="button_4">
      <g id="Group3">
        <circle id="shadow3" cx="45.85" cy="80.155" r="11.806" style="fill:#fff000;fill-opacity:.5"/>
        <use xlink:href="#4f" x="173" y="56" width="48" height="47" transform="translate(-152)" class="gpad-highlight" id="button_4_highlight"/>
        <circle id="Oval4" cx="44.99" cy="79.295" r="10.945" style="fill:#fff000;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path id="Light_Icon" d="M44.99 72.753c.336 0 .613.277.613.613v1.227a.616.616 0 0 1-.613.613.616.616 0 0 1-.614-.613v-1.227c0-.336.277-.613.614-.613Zm0 10.631c.336 0 .613.277.613.613v1.227a.616.616 0 0 1-.613.613.617.617 0 0 1-.614-.613v-1.227c0-.336.277-.613.614-.613Zm0-6.542a2.465 2.465 0 0 0-2.454 2.453 2.465 2.465 0 0 0 2.454 2.453 2.464 2.464 0 0 0 2.453-2.453 2.464 2.464 0 0 0-2.453-2.453Zm4.626-1.305a.616.616 0 0 0 .195-.449.616.616 0 0 0-.613-.613.616.616 0 0 0-.449.195l-.868.867a.615.615 0 0 0-.164.418c0 .336.277.613.613.613a.615.615 0 0 0 .418-.164l.867-.867h.001Zm-7.518 7.517a.612.612 0 0 0-.418-1.062c-.17 0-.333.07-.449.195l-.866.867a.612.612 0 0 0 .866.866l.867-.866Zm9.434-3.759a.617.617 0 0 1-.614.614h-1.226a.616.616 0 0 1-.613-.614c0-.336.276-.613.613-.613h1.226c.337 0 .614.277.614.613Zm-10.631 0a.617.617 0 0 1-.613.614h-1.227a.617.617 0 0 1-.613-.614c0-.336.277-.613.613-.613h1.227c.336 0 .613.277.613.613Zm7.847 4.626a.614.614 0 0 0 .867-.867l-.867-.867a.616.616 0 1 0-.867.867l.867.866v.001Zm-7.517-7.517a.617.617 0 0 0 1.032-.449.612.612 0 0 0-.165-.418l-.867-.867a.611.611 0 0 0-.441-.187.613.613 0 0 0-.426 1.054l.867.867Z" style="fill-rule:nonzero"/>
    </g>
    <g id="shoulder_trigger_back_right">
      <g class="direction_highlight" id="shoulder_trigger_back_right_direction_highlight">
        <path d="m12.269 51.254 12.27-16.491H0l12.269 16.491Z" style="fill:#ff00bf"/>
        <path d="M25.523 17.167c-2.534 0-13.254.512-13.218 21" style="fill:none;stroke:#ff00bf;stroke-width:8.5px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"/>
      </g>
      <path id="shadow6" d="M70.5 39.658H32.67c-1.52 0-2.78-.6-2.78-1.32 0-.1.03-.2.07-.3l10.9-22.92c.71-1.5 3.53-2.57 6.76-2.57h11.8c7.65 0 13.86 2.96 13.86 6.61v19.18c0 .72-1.25 1.32-2.78 1.32Z" style="fill-opacity:.5"/>
      <use xlink:href="#4g" x="165" y="3" width="76" height="55" transform="translate(-152 -4.306)" class="gpad-highlight" id="shoulder_trigger_back_right_highlight"/>
      <path id="bg" d="M31.21 37.298c-.37 0-.72-.06-.98-.19-.25-.12-.4-.28-.4-.47l10.92-23.07c.28-.58.97-1.1 1.95-1.48.99-.37 2.2-.58 3.46-.58h11.8c3.44 0 6.56.67 8.82 1.75 2.34 1.11 3.66 2.63 3.65 4.2v19.18c0 .19-.15.35-.4.47-.26.13-.62.2-.98.2H31.2l.01-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.17px"/>
      <path d="M60.102 31.312a10.054 10.054 0 0 1-1.374 2.86.681.681 0 0 0 1.122.769c.892-1.302 1.505-2.722 1.785-4.195l1.075 1.05a.68.68 0 1 0 .95-.974l-2.551-2.49-2.489 2.551a.68.68 0 1 0 .973.95l.509-.521Zm-8.281-11.708a1.932 1.932 0 1 1 3.698-.289.862.862 0 0 1 .17.104l2.302 1.795a.876.876 0 0 1-1.077 1.38l-2.301-1.796a.82.82 0 0 1-.143-.139 1.924 1.924 0 0 1-1.489.082l-2.921 2.983a1.183 1.183 0 0 1 .043.125c.011.038.022.076.031.115l.01.043c.019.09.031.183.037.277l.002.022.001.037a.508.508 0 0 1 .001.039v.026l-.001.071v.006l-.002.038a1.91 1.91 0 0 1-.034.263l-.014.066-.025.096-.004.012a1.515 1.515 0 0 1-.045.132l2.921 2.983a1.939 1.939 0 0 1 1.489.082.898.898 0 0 1 .143-.139l2.301-1.796a.875.875 0 0 1 1.077 1.38l-2.302 1.795a.862.862 0 0 1-.17.104 1.933 1.933 0 0 1-1.828 2.326 1.932 1.932 0 0 1-1.87-2.615L48.9 26.229l-.005.002a1.954 1.954 0 0 1-.339.085c-.026.005-.053.008-.079.011l-.014.002c-.035.004-.07.006-.105.008l-.018.001-.012.001-.048.001h-.027l-.074-.001-.013-.001-.015-.001a13.143 13.143 0 0 1-.119-.01l-.013-.001-.063-.009-.021-.003a1.881 1.881 0 0 1-.54-.175l-.011-.005-.02-.011-.011-.005-.01-.006-.01-.005-.046-.026-.018-.01-.007-.005c-.03-.018-.06-.036-.089-.056l-.009-.007a1.622 1.622 0 0 1-.141-.106l-.013-.01-.027-.024a1.461 1.461 0 0 1-.128-.122l-.008-.009-.039-.042-.005-.006-.028-.033-.027-.032-.007-.009-.012-.015-.012-.016-.029-.038-.005-.008-.032-.045-.006-.01a1.934 1.934 0 0 1-.076-.123l-.024-.044a.773.773 0 0 1-.015-.029l-.038-.079-.005-.011-.004-.011-.004-.008-.015-.035-.004-.011-.004-.009c-.011-.028-.022-.056-.031-.085h-1.87v1.434a.625.625 0 0 1-1.25 0v-4.118a.625.625 0 0 1 1.25 0v1.434h1.87a1.351 1.351 0 0 1 .05-.132l.005-.011.019-.043.034-.069.005-.01.006-.01.003-.007.023-.041a1.82 1.82 0 0 1 .095-.151l.006-.01.009-.012.023-.032.009-.012.007-.009a.106.106 0 0 0 .009-.011l.006-.008.009-.012.028-.034.036-.042.001-.001.063-.067.008-.009.008-.008.076-.072.026-.023.009-.007c.041-.035.083-.068.126-.099l.002-.002.047-.033.01-.006a2.03 2.03 0 0 1 .201-.118l.011-.005.021-.01.011-.005a1.924 1.924 0 0 1 .654-.178l.012-.001.058-.004.015-.001.015-.001h.022l.038-.001h.05l.012.001h.025l.012.001.018.001.032.002.012.001.024.002c.045.004.09.009.133.016l.012.002c.113.019.223.048.329.085l2.921-2.983Zm1.089 9.594.036-.034a1.002 1.002 0 1 1-.036.034Zm-4.373-5.75a1.002 1.002 0 0 0-1.269.783l-.003.016c-.006.04-.01.081-.012.122v.013l-.001.026c0 .054.005.107.013.158l.001.007.001.008c.007.037.015.073.026.109l.001.004a1.002 1.002 0 0 0 1.238.675l.007-.001.012-.004.011-.004a.142.142 0 0 0 .022-.007l.013-.005.009-.003a1.001 1.001 0 0 0 .648-.937l-.002-.064a1.002 1.002 0 0 0-.619-.862l-.027-.011-.009-.003-.013-.005-.01-.003-.012-.004-.009-.003-.016-.005Zm11.565-5.943-.509-.522a.681.681 0 0 0-.962-.012.681.681 0 0 0-.011.962l2.489 2.551 2.551-2.49a.68.68 0 0 0-.95-.974l-1.075 1.05c-.28-1.472-.893-2.893-1.785-4.195a.68.68 0 0 0-1.122.769 10.047 10.047 0 0 1 1.374 2.861Zm-7.156 2.147a1.002 1.002 0 1 0-.036-.034l.036.034Z"/>
    </g>
    <g id="shoulder_button_front_right">
      <path id="shadow7" d="M32.192 43.878h39.986c2.643 0 4.817 2.645 4.817 5.859v7.033c0 1.288-.871 2.347-1.93 2.347h-45.76c-1.059 0-1.93-1.059-1.93-2.347v-7.033c0-3.214 2.175-5.859 4.817-5.859Z" style="fill-opacity:.5"/>
      <use xlink:href="#4h" x="159" y="30" width="87" height="41" transform="translate(-152)" class="gpad-highlight" id="shoulder_button_front_right_highlight"/>
      <path id="bg1" d="M30.673 44.236h40.011c2.109 0 3.844 2.109 3.844 4.674v7.053c0 .638-.432 1.164-.957 1.164H27.795c-.53 0-.965-.53-.965-1.174V48.91c0-2.565 1.735-4.674 3.843-4.674Z" style="fill:#fff;stroke:#000;stroke-width:2.15px"/>
      <text x="48.396" y="55.277" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:13px">+</text>
    </g>
    <g id="r_touch_targets" opacity="0">
      <path id="stick_button_right_touch_target" d="M34.841 141.791a34.686 34.686 0 0 1 6.374-.588c19.07 0 34.552 15.482 34.552 34.552s-15.482 34.552-34.552 34.552c-19.069 0-34.551-15.482-34.551-34.552 0-10.648 4.827-20.178 12.411-26.518 1.298.465 2.697.718 4.155.718 5.345 0 9.9-3.406 11.611-8.164Z" style="fill:#419bf3"/>
      <path id="start_button_touch_target" d="M35.167 134.497c.26.997.399 2.043.399 3.122 0 6.809-5.528 12.336-12.336 12.336-6.808 0-12.336-5.527-12.336-12.336s5.528-12.337 12.336-12.337c2.48 0 4.789.734 6.723 1.995a16.16 16.16 0 0 0 5.214 7.22Z" style="fill:#419bf3"/>
      <path id="button_1_touch_target" d="M39.627 106.677a16.066 16.066 0 0 1 5.496-.963c1.93 0 3.781.34 5.496.963l9.655 9.656c.623 1.715.963 3.566.963 5.496 0 8.894-7.22 16.114-16.114 16.114-8.894 0-16.115-7.22-16.115-16.114 0-1.93.34-3.781.963-5.496l9.656-9.656Z" style="fill:#419bf3"/>
      <path id="button_2_touch_target" d="M60.481 85.823a16.066 16.066 0 0 1 5.496-.963c8.894 0 16.114 7.221 16.114 16.115 0 8.894-7.22 16.114-16.114 16.114-2.186 0-4.271-.436-6.173-1.226l-8.715-8.715a16.056 16.056 0 0 1-1.227-6.173c0-1.93.34-3.781.963-5.496l9.656-9.656Z" style="fill:#419bf3"/>
      <path id="button_3_touch_target" d="M30.442 115.863a16.056 16.056 0 0 1-6.173 1.226c-8.894 0-16.115-7.22-16.115-16.114 0-8.894 7.221-16.115 16.115-16.115 1.93 0 3.781.34 5.495.963l9.656 9.656c.623 1.715.963 3.566.963 5.496 0 2.186-.436 4.271-1.226 6.173l-8.715 8.715Z" style="fill:#419bf3"/>
      <path id="button_4_touch_target" d="M30.235 86.294a16.056 16.056 0 0 1-1.227-6.173c0-8.894 7.221-16.115 16.115-16.115 8.894 0 16.114 7.221 16.114 16.115 0 2.186-.436 4.271-1.226 6.173l-8.715 8.715a16.056 16.056 0 0 1-6.173 1.226c-2.186 0-4.271-.436-6.173-1.226l-8.715-8.715Z" style="fill:#419bf3"/>
      <path id="shoulder_trigger_back_right_touch_target" d="M76.155 41.187H23.519c-1.52 0-2.586-2.458-1.769-4.167.046-.096 14.212-28.399 14.212-28.399.743-1.517 3.546-2.595 6.744-2.595h22.358c7.656 0 13.863 3.027 13.863 6.762v27.046c0 .742-1.252 1.353-2.772 1.353Z" style="fill:#419bf3"/>
      <path id="shoulder_button_front_right_touch_target" d="M25.477 41.187h48.72c2.613 0 4.73 2.007 4.73 4.483v14.346c0 .983-.854 1.793-1.892 1.793H22.639c-1.038 0-1.892-.81-1.892-1.793V45.67c0-2.476 2.117-4.483 4.73-4.483Z" style="fill:#419bf3"/>
    </g>
  </g>
  <defs>
    <image id="4a" width="65" height="66" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABCCAYAAAAIY7vrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHcElEQVR4nO1c23YbNwyEZEduLm7ykJ/LF+bn8lK7kZVa1vahHO3s7IDk6hK3J+U5OEtJ3iUwBEAQ4Dri/xar1xr4y/BtMvbX1efhtXi5KggqaMe4KRDXBOmiIBihVx19bkNH/+KAXAQEEX5lru67rA10zfrHdglAzgKhInwP6fgqcIv4nrPAOAkEIzw+r+nzmq5r+Y7vQYMQhxgFPdBnvc7AOBWIxSAQADrz64RuzHcOCBZ8iIiXGEHgPpPTjsVgLAJBANAZh7A3QrfUx+98X4ggLPRLROzLVckBgmctAqIbBAOACg9hb4neyGcGg0EA8xCchX8u/T31+fdMM7qB6AJBAGD75tmG0KCNXAEIA8Hjs+qz0M8R8ZdcQaolJwHRBCEBgNVdBb8j2tBVgYA2BDENYVh40A8ifMdg7MNrRROIKggNADDzGxL2t4TwO5sHO0g1BQbgR0TsEsLvAEP9RRcQt50AgHT2N0XIu4h4W+gd9UHQDNaGDASYgQLwFBHbGLXqtnzH/uWZREgjzm4QBAC2fwiCmWfh3xdCH78BKAiAZ9VAgOrvivBb8wznYFnwA/pfhm+rTBusORQtUA2AGrPqvyOBPxC9J2qBgJaBAA3YRsT3iPhTCL89FcBgHrp6pGYx0wQTDXLQwyaA2f8QEfeGMhB4haiBAHN4kme0nKsjjkdmLTMHDYZ4CYQWYPZ/NwSNgKawT+hdHQCCA5F9igKQRZNDxD+TrNowASHRAvYF0AKYwH0R+iORgsArBAdNDLRGi/sYV4ddTE1J74+YCp9Fk3YXOgOBhFczUC14G1NN+BgRn8qVzQGziGXUaYGCcCgg3BUQWHi+n4XngCkLoDi0boKgQDhfAAAgsDMHaIFTY14e0RgEAMFLKmuA/r1GmfuYB1DrGE1i4iCPICR7Aw2KEA+oOYDuYzQF1gKdxWwrzRrR2ms4R+oiSWgEm96kqSb0moJbFnl5ZC3g4Eh9gYIA4QbhgUFgJ6oriQut+f6DA2IdvmWaoCAoIVrUuEB3kS7HoFtx3pNgddHYRMfG+M6RTvIYvAhkmuBAACMcITJBeHWENT/gwNckSbaCaEAFcoEZg40o8tgYBN0sZT6BgdCw2M2+A6C1e4XQDMCbmJoBtHKX8OFWFF2WRxAqGaNsv6DEAOjAtbxiCwB8vinfuQnJ+ADPuk+Z8aA+weULNWGyScghvxQA5gNXTeIwP7yN56vzB6k5OsfoNMFljXiwLGu0VHjlA1d1oK1MVpbO4wDt6BwZBBcnuBSaI/b6TvhzgUC/pqGtnGbqj5w54FozjWzJY/U9VxOUL8ePTpJbgpu81MyhNrAjB8AlmptBHq+XtxSMLFhiBmpUVbMrNF1me6jJWwuEX6K1QDipOHrFpsnTi/DmQHAPcnVATWBkDJzbVBDODdR4q/FV3UDxQG4Q3rfzNrWrUHpmY35cMqVWq6zywiAoACy4Cu8If+cGPBWIGk86vuYQdJJS06iZgwNAa4NaBktrgie0TCuVH02kKBiqpcdnI7ukW2lnBln2xtUFwZwGT2i9y6jaf2tCwA/zxxNTTbiuGZFOAFxNEAyoVpziMJ0GMACuROd4USDS8VkTsH11qqcpLNQGOZFRK4+57HILBD6xUivSMh9cqOUibdVBZuaQaQIXRjmRwQlVBWCIMR/Qyi6pxrhSPQu+jWkZjktxrJkMxKxlKXenCaoB25gmMlxNgQUDENneQjUAaXcUYjiNhrokE9cjoQ0100xBaGkCGPke8wSG7ibVrLKUO5tHNjZXp7ko+0h9BoI1oXle4QjC19XnoSQZFAg1B06quNMnTpieVFfLF0HtHws9UJ9BYHNwWjBrNXOATa6JGZfI0KSFizFq6S4ez/kBqDe04MEQl+mz8vxxjGpBlhiKGAsVXCDVBIbu2bOZdGcTHAjZGQVoAUzgISL+KARtYJ/Q7RRnIJBJgDEwBW2oJSxqqpwVZdkc2PzYGaovAAggNgf2B7VAKQeBmjoq1PIcACyEW1K1JKexBMYZzP18UgWrwGNM/QIDAFNwq0JEdJ5UMdoA5laFOXVqzpZ1SatVp/UZz+YZteM6uipokNSMVGsHt9g3RHlohPfoDAKH1xpPuIMaaO6AhsYGrBEcKGmkuOgYX7qhaZTqtT7Jp9j0GJ/WJ3tPr7FP4NBYo8NWhGhXBG6pJkjcEDHOdsTcZ2THbJ5iWhrrPbjFjpH3K3jmjr7v3TWmrbm17TjVqiUxPdp7F9MKkYscNTjTnSsLzH13GKPbDLpBqADhqlPZ4W72BVmAxfsFPt2uh7tZ7fko7ws9oxuAbhAMELpc6vsNXBJzhzSyiDFLn+k5JKf6s5Xgokf9K0DUymKuNFarEDMImkR1L36o8DZ11tMWV42S13+ystiN6bvKleYRXEq/O6t91dd/0JIXwbL6pfZdiUxTagdz1e8Gue/nvQjGrfJWXFaz1N+5KRAt4nt+/iuB2ha+HOr+NmIumBP2osI7Js5uF3hNOGIa3MyEjviXviactRNeGI9IIrz/zAvjS5oD6DX/fcAv3/4G1s+EbdFAgYoAAAAASUVORK5CYII="/>
    <image id="4b" width="46" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAApCAYAAABKvBuPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAD00lEQVRYhdWZzXKjQAyEm8R2kv075eX8hHk533Ydm9gJe8g0NI0EYzuXTJVqKBjgk9BImgH4pq255eZtt7vp/pfmubv23otenIDWnMsAJ+drlakCN+BmoV9q3UIPYFmB2ZcFwI0dN8H56LkRpAqC41n4FFygHfYuONZz2XMd9sP6SFL4ENygVe4WhGP02W7RjwpZhJ+AJ9AEuy/9qhzfyzn27j6Edrj3Imc5zhSYwK8cPIFWyFWRtRyrIu42EAiFdTnJdb2Pik8A+2bWVisTeF1kU2QtfQTPlzr0qcib9ZR3EX6tkdUji0cuQuiHRAi/FnD6Ol+s0G9FjgBauUebzokGZvU5V3HoTYF8EnksPeE3GFtdwRW6LdCqbDQnCN8A6LbdrqHVe/BkUqqLPBTQHwB+lp6i8Gp1YJhoZ4M+YHAxdSudvGrxkdXd4lEUuRfwpwL6S4RKPJYxDk7/JvgRwGsZuwrGqXyU65ykfatxFX5OB/8N4I/BE5xAjVjvhE9rH2RcpBxd6oxpeF20uIdB+q+6CsEJT6tvAksSpsWntTkXgKn/U05ivN6Nt90OL81zNxdVCM44zQgyZ3W6C0Mjwd4xuMlarumX4NfQ0Fplca811M89HDKq0PoE5yTNwNU9VJkDhq+q0FEyG8CTKtBDIhXgCxhlGBIpDk5XYcija7SY5oG5DDyCr035DI1RFvVsqlYDhsjACcjxXjZEwGm1mYHPKXJJxcjWJdfnnhsVaxeDZ/Wy19cqnlR8TM0z04VEBp4V/FpzeLFEF2lkPDDOmicTrQ416WQro77dAWGh7laMqjqGsCOGyKDyGpw7yHiKKhTV5uGaVC2efXqv6hSUEYRWPmOcyjWKnDCk+70ppgoQfrISysAjBTRdK/Qe46qO0C3qMucewF8A/0QBlrhV8A4eQetLaTGGL1qU1xmTGdqAuFZ5LdAO3xYDRT4PAN2krA0UUPA3jOMu3aCT61o80X2a4DnqLrT83sC5Cqq2uEJHFteCX6GPyOtxL2u1HqevE5y+rq4yKWlH4C/Nc7ftdg7PF3pSIQx932uNaOkWrYA84lzt4w7eCKAnFPXba9acLcYhVd0kAl9cLGvc5Av1WrSiUehLV/nRSt/jePWGULagWJloRRfV0AoeZV5d7UQZtAev3RDSQbopE312tXJUQ2dJLZNwJ8vbLXuHDpttv2XwX7t3mMCzX9qpjWpoL5ayAi6sDC/arQ3gOTb7ErNF/4ICfq4fe9X+eAKv92R99NwuOI6qvv74pj8S3maUqHlmBDI596X/gLJ261834LY/b9+y/QdJLrfuY2EtwQAAAABJRU5ErkJggg=="/>
    <image id="4c" width="52" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE3ElEQVRogd2a3XbaMBCEF0ISaJr2Ji+XJ8zL5aZJgAQK7kU0ZjyelQ1JTlt0zh7xI2R9Hmm1WhNxZmXymZ3dN48n9fcwuWs+awwfAkoA9DN9r4PvwXwE8CQgAZkM1FlpBuqTwI4CqoA40zY8WK6dcZujwEYDEYyCTM1r/ox/oyB7qfV1+5uxUINARhU3eNgFveY2XBRkHxE7eu0gR0NVgRJVptGHcMZtuPDAd4ntow+Im1EFS4EMDO42BnsREbOKqVoYEMP8rtiO2uF3g1CzDEiKKoJBXxa7ktpBRQKziYgt1dvSHt/jd1ynxSok6jAMg1yRXZPhs8s4TD9WSGE2EfFGhveAQ9veFHQq9YAEBkCsCkPMiy3o9ZyAAKVAGCwgXiNiXWoY4DbRn4apo8imnMIASEG+kS1KPY+DUgDiKQcgKLEuhhs1i9w7ouzNZ+3A22KmGmAwxa7LwBcRcUP2vdQAA1QGhDsPZZZiLxGxKsZqbaPrCXsqOYVYHZ5urA4gbqVmKNzxDAhTbRUHRVUd3mx5/diIIgNSKHYCmGYA+kEGqGOBoCa8Yg2GbaIwHaAy3TJ1LuOgDoBuC8jPYj8EqDbl4BCwdrQdQNze1HMM981jO+2GphxPt6s4LHxMMwd0E/01xHcdg3uL7r7FMHDtW6rZhQOqp5ICqUpOITgEhoJBIXbdbmPdJjBQBV6Q9yk4BSjJYx10CjV3DTcNKDV4OQzW7UPuO4XBGmPT6KMXOUwjeusnUwhOASrxHsTejTfZ68Tm1Fb70b54TwMQbkRr2HJqCjkgVmoRfYDapopyEe8qsTK82a6ju5c5IA162+LW0FgoNQ53eG0oEB/82AFoXwrCMO7waIH4gm4tcYTtjKcEfpslTbRfvWncpyqjUBbI5Qj0VJod5rLDnb1oHBa0zoIxh0XXZ+vpdDq44pyFmiZHsj7cZ3pkz8wlYHrXGwP0X5UxJ1ZNMbm4SgNG10fWryZGMnPXyGO56EavLs1US2qo8T7hQI7tdzSYU0iB0CkHidvE4JV4n6klSXamT4Q7WfymYJ2iQKySJjQ4JHHGmym7Zr0ob6QM4PIKAEuP4Np/ppDeRb0wTprrqEfW7sDGfXJOgfMKqBkQYKxUT6FpRHuEdYtf1eELr8iWpQakJjvUXD/LpK8MqDPe2nlIFdLodxXdOCs7xA0dHzbU30ux5+jmFlgpBurkFLi4NQTjRYvpwUkNl6bim5BNQz2xAuipAD2X9wqEdJZTKAViKJ5ymzK4dfgwXgd7zBEcWZ7niPhFYDz1VKFhL/cwuWvum0e8xfFWFdKYS4/NrOQxQMsC8WSAXqPuFJqhNBYGyIkKflTCIbwOks8zY4HgCKASphxyc7qGUnUyIDRUlTZxCCC5rbrhMYlGtyaxljjR6BxCdWPNctvuPMTZU5cK1qwp59rGpIJ1K8DaqWVNm7G5bY0YFJ5dO68xbLScp86ePnB0oBurS9bbnJyWv/U4xUUfX/M4RaBq2dQxD7xqoQ8Hpe6hVy0oPfkJngaAteB1Fu93lnMAeoxwm/axjySrJVUo4sweGhsotM8SKPpYP0toZAc8BeiFNx9+rJ+AaZJial7XEifZiVg/G63KSUACxb91aWQH3w5Oamfc5mv+GsPlbP68pOVs/l6WlX/hD4BnV/4AcperLpSp2XYAAAAASUVORK5CYII="/>
    <image id="4d" width="52" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFUElEQVRogd2a0XbaSBBEC+LY2E68L/k5f2F+zi+7iQO2A+yDp6BUqh4JzO5D5pw+EiCGuaqenp5GwB/WFpfu8HH/dFKf3xff9pf8/Q8DBYBT+hzBfBTwLKAORHXUtg/nfgRwHtxJQAaig15MvNamg1dDOD8ZajaQwKSBL4tzBTsMUga+K84ddDbYJFBQxUEqUzgFUoBkFdwsqC5QAeMD/2S2lKOqxcE4wDaYA86GKoGCiyWQKzm68Rp1O1VmC+B3YT2wLtRVjxbZvRTgc8dUMQfSwb81e5Vz/Zxtxz4e90+LCioqZOq4aynINYCbZtdyVCh+n3dYlXlt9tKM5wRMinWVGgEVMEscVbmWwa+CKRRdkn2qqxFm0yDW7ZyvCaiKTbpf5XLualTGQW4B3DW7bcbPVCUHepNBbwD8Km5CFfL9vQwUopqqQxdTkHsAX9rx3qBuZHBLAeK8IcwaR1VdUQ7ajSqNWlLIg4C6GmEI8gXAVzm/b6AESgop0Brv6lRADqDutgCAx/3TwO0OQBOBwNW5byAPzb42I9CtATEoJKCVwPB3HWZrxx2Ga9uhuUIOlebOHY7KPAD4qxmVIhDnhANtcYxmq3DdAsMFV6OcAlGlQRifcjmq87kB6dxxoAcBSgNVICpEFakOMF503zBcnxTMs5CoUFpEk0KqEk3nEIF0YdXBOrB//mqmUBwfF9tDuwIO88ez6ASkYToFBgJxknMO8i7qwprWKCqii+2m9feCYdTUpWWWQp4VMCNQt6PdYbgeeUDQQXPgHs3oilxsGTBW7VzXKAUatKW9rnI3T3N0YVXTTEFTIE2V1FYn9KVJr2fyC0bpKihUiahD3WCYyymEh2HgXQlPVqnMTWEK4wnvSCEFqnaivQzbVah+WIE0hdlZn1V/qk7aCUegHpRv4vyHFGDkDtY/oaoN4ty+dZyH5nPI4c7dcleFE++711/v5pQK9YD0x/+vNue3utf0gKpyU8p6q3JUKk8hXHNKFSj1NQlUVWY0v6pyrAqy6jcVSXr5WxfOg0J11zy38hyLlhbTuUWS1J/uVuM23JsCpSJgShKZlngtgJ9rblZVfbahT+9Pc7gKaHL74C6hLuDbZq0BpM0c+/GFNeVsGzGvLejNqqD2ve1DUkjv3lpMawEpCdXFEBjmcszZfhVGMC+W+JwaNHe5pBDvjiqj22bfz/D7ugtV1ejCWiB5BvCz2XMzh3KgVDR5B/q++LZvyZ1CqbtRoTWO+dxUVceV88/ZH2H+AfCj2c+ZQJNziM0jkQJpnqUBQBNN3Y1OFUkU6G8BokobHAOE1uYiVC9s6938hOMGyxNFYHznvepT1RQU6EeDolJUaVKhWPUJbscfXwqUJonAsKDBqLVGLpIQ3BXXOaQu94yjy1GdbkAYAElzlX4jJ568lnON6nBz1gNSl6NKhPKg4OpsbYyDVtW2aZrW6zbcy8BeDtYImOaQRrkUugmawvZg/sytbfMiraq4MmmR5OC0PNUr1qdFdS3vazBIOd2oxVTcVPKiif4DoVvytBWvgofOuZdgnvak6Bb/Tun94aUX7+z9lJNRIa8BpBpClcvpH1+alM6CATqbJat1u1Is4mupS498PxVJNP2hUp7JE9i3L0CYN9pKhSyMsx06xVClbYN4Ra4BoPO9yvxfcX6/2ya3vMXzCVpD0GLHVC2gyhf1XD8bheez/wUvoPidFDTSMRUzfIud/vtxT7jcgxcFWJpfwDCDKCszGN75tJ0+SRVtZ1V0Jp758fe8edpfHf/7h5e8TTxa1uvbBzp4/ZFHzC5Wczv1wT9tl34I8I9q/wJ8hc/eTcdQhAAAAABJRU5ErkJggg=="/>
    <image id="4e" width="51" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAA0CAYAAAAnpACSAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFSElEQVRogd2a3VIbOxCE28TYQIDc5OV4wrwcNyfhP8CeC9S41duzP4FTpyqqmtLaXmv1aUajmbGBv6htPnOwq+F61Xg/Nt+Hz3z+h2CKya8Zs4P5KNxqmACwKfpq/GGmB/BnYKtgBER7v/b3tOnEh5nXANZBLYKZgKAcFdf+jMHktbjuoJYCzcIYSAI4KsS1xMm9Sl+JQ2MJ1CRMAaIT/hKE7/Nefl818ArgRXqVCmwWqIQJIAliW8gX9BqCTEon/hxEoV5kAThGCbRdCeIAx012cn0s9zmMauJ3kCcDg4NIP2ojzRQgrglOft9kJ/0OvYY4jpqXTv6xyZP0/JxQbnZROx3MhEZUE5z4HsAJgNPWnwQgmhtwMLFnA3kQuTc41dQsUDIz3+zUiGriVOSsiUJRcwnGQe6b8H7VJuS77Df23iQMgVwr1AgBvgI4b/1XA9q3yXHfAAcTew4gt+g1SRh30Z27vhquN6qdd5hmYnNaOZXJXzQY9gqUYAYcTIYwdw2E9yoMFyAdqNEZVGbm3su1cgHgssmFARFmZ5PTzf+IN42oFtW81PNpP4oYVDtb0QrQa8a1ws1+3uQSwLcmBFJT42qrN1MY3kdn4Rrxw9QPVM53bGaYNrEd+r3CyRPmMmhGHYDDPOHNzBQEsuL0eCp6oKoG31sys8rETtBvfALR3AiTTIcTpQN4Qu3t+LnLb/SRxasDLdWMmpkDnYucoTcd3wdcWXUO+pkfpDx/+Nq9HQBsroZr/Nh8H1wzafPrQelA7Hl9hrEncxN6KTSiIHQOqmU9h9x9v2kmuGQ/YxyGQCr64D0OZ1OKzdz0uEe4jzSqoFesQLqWNFPFYx7KEE7js2O5N53k6okUZB9Eg1eP9SLQ2nBmSqoUII09tPtebAzGdT6ujpcy2cM5EyCmkrCUu6gJaAaa8qWp3Cj1R6jNqxvfV64CS4C+UmnVgPEqrkm9Uwoe98sUzP/VNtavalXUDExHrFVFpcvXZZylY84VNapnABhrZu4BPKFTzOSxkz90auwUh6V4LI353rbhg1QG0gzR4ya+3rX7qlKTAmgxI9UCPG1WsDINcDPzVfM0lxGv5+16sKn7raozzzbuUxhXYzICVRoCABy1XCCpX0E00tWY6R7j+EknkTToabPXAXQ8h5kESppx02KooanuHfpwI4XxanL6PqF0LGact+2a6bQukGonOoKpPaPhuINoyOEg/F5KATwOuwNwI3IrokDUqGtG513uGX6Bq6gwt+jjsKqUNFedUZifAH41IdQdenNTU+s006XNBYhv/gfkeClNtCpoaNr8gIMWfgL4R6DU3HzvaLDatS3JWirgDkAfrvGY7wVf8SUFDYX51UAIc4NeM+7RZvcMm5uZBoR+hvg+eETtGBIMN/4NDmammnnAQSvRk8W6mYCwZ+FAgVKy5ftqrgioGuQepKgToNt391yGNKnWnBK0lDpr+sxrVmY829QF8vRY3TOFIHTN0cyW1Jp5g24yr/u6+3atLCmcc6KcuB7A1Mii8yVNEsCoIKjm5emzp9ApfU6OQrXjYYxqQn8BGMGknzRGmik8G9qgujI+sUeMXXc6ND1MUrCq6DerFWAiCSoK6SmF1vzffzXz1Fm9ZIrE9f3kvUYeTNtUcgb03o19ynGqH2qr6kzKYRxgFQgwk57avzGW1ALSWeQpQJUvOcAo/vrQT+cBSienE/aKTFWoc6DUu2AJyGIYA3KoqpJTjZ0m7GbM68//u4m2ALWk11btQ33vv/8jkLaJfzctGXsorj/0N60/hvG29o9z2j77T3R/RfsXSO/jtpPsGBMAAAAASUVORK5CYII="/>
    <image id="4f" width="48" height="47" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAvCAYAAAClgknJAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE80lEQVRogd1a21bbMBCchJAGSri0/BxfyM/RQkm4E9wHdvBovLKdwEurc/bY2Eaa2V2tdqUA/3ibfEUnF83VTv1cTs6bz469MwEDPalcvTWV685ktiYgwCcjRFuTyJu925rIaAIV4FO57tnfSkIB87qxv5XYaCKjCBj4qcieyEzu+V4JvAnwDYBXud/Ie5IZRWKQQIBXjRP4LGQ/ZC7PZhUCryEvJnyuRBoAzRCJXgIJeAIn4G8mcyFCSwCt5l8BPIc8AXiMK5+RjLpXL4kqAQOvbkKwCwAHIYdxXcS7fbRWIAFqnsAfANzH9UHIPKG1yCCJlID4PF2GWifwQwDfARzZlSRoBSfwHEDvQ9YhdyH3QoTWoEulc2KWEegBfxBAlwCORZZBgpaYx/8ogZcgQM2vAdwmhFWpul6Ms4C4joM/DJBLAKchZwBOQpZBjm6UWYDucwdgBeAPgBuTW7TW4Pz4mBNuhZoFdNLuo3Ubgv8B4GdcSUIJDLnQHVqXc7LUdiciIbFCQSCZuLMAs4gBjwPweQhJnKB1IUajLAox+ih4utpEgNfWiclFc1XMhcwCrn26zzKAngVoEqAFCErDqK4DGkZppf34Tr/J1ogirCrYDwKVmK/uc2QEKKdBLtO+L2S0AsMsSfIdw6wK14cpEivULODuQwscBwlO4pN4ptrnmpHlQhuUKzXfcY3QEEuZBwlaomhOQNMFEqALefj00Kn+7OGQQGlZdy2d3Gu8RyiuKfdCmFaozoEshHLFJQmKrr7qzxl47TvLjzixuSDqJHeXLPpWAppx0g005zkwUeCa+2S1gLZpgNecStMS9q3h2INC0Zk2zeU1ccuSNmah2vkQeA8SrqRaYlirMzoE9HktbXbg2umY+qKWJPoYWX2RAh0qE7MCRifqNuBrRLw48nE6SiLmmgV0AL/3wT/bvI9ss6DanIBnf16A630RzlDJFgfa0DgunXGmQCfPdpCal2h+0qlhR5JwJWV1so/TSeaIOXMh7Vhr2GeUpV+WpwyR0G9UOcyRXpD3v3ECbErAzVirYSlZDav7PDXwrnHNf7R/zYOqlvCVWF1HNc8qisI6doF2BZ5If9nkc+Wwb62PWchojUwCbumUAAdS7XMAzVO0cNG8H8gXNdWcal2Br1HWyKzItDYerInd/zVDVPBMnVX7/L8soVPLUvPa5y3ey8vbkDVaKzAT7a8HLifnzUVzpYNpBcXB/qDcOvF8ni7Vt7FFpdwF2BsA1yhrYlrhEeU862yx1Fwos8BcRCsp/VbT6ixtVtehQq4B/Aq5jmcrlC5UjUJ9BHxA5irMURz8I9q5we+UgGufuxIZAbqQEhieA4kbcdAHdHeg1c0e0e5KaF2c7UowICiBawC/47pC6z4d/x+7reJW0KSO7zOX2JYAJ+8N2km8Qqv9bKEsWt/Wohf3Wh+zvFRheTm0L6Shc2Xi24sFgW23FmmF2vNso8orqdrGli9cCtwjT1X7wPDuNL/JttYXJlrD9u1OkwRFV93aFnv1sGPM+YCTcCIuXmYC5equiaGC1oOO0Sc1Y09olERWCnqI7dvYUiKvIln6PHjMtMsZWXbctJfcZ7mQkvD7nQ76tioJR5xU+s5Blsz5yeTOJ5RbE6gQcUL+jq1Wrn682+Ww+1NFeeW0vq/ftIb+zE8OvmJX4aON/c3EV/xG4r9pfwEs4yD3oK/mAAAAAABJRU5ErkJggg=="/>
    <image id="4g" width="76" height="55" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAA3CAYAAACmcqwpAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiUlEQVR4nO2b3XbaSBCES9ixN7G9e5OXyxPm5XK3scHGMnuByiqVumckgQHnbJ8zRwKEfj6qe3p6hgZHth+7X4289P3G3tfPo9cl2xVe7ypbAMDP5rufo2pzbrBqAku3UfPPltxPBsj3S68BzAN3FGCBqrStgv1VcNzc+4nUE7W3wmcKcBK4g4ElqlIwKwBXsu9tCbQM1luw9VaCCKAM7nrCzU0xPqSCuqo0HuOK83OquRtGatLWyra19xzg+3l/7H41GbSDFGbqUtUQynXXvtg+P6tBy6wES8G8BlvuO8CR2iJoixUWwFJlEcwXADeyvZH3CVDdtaSyTF2qklYa4Wxlu5XXbA2Gqouu926HuqTGH6pKQd0mjeAITdXJ8+o26xE9VikoQnqR7XO35XurbqvGcyJyzUUuKeqiKhQWlfRX175K43sO7QrlDiACFgV2AlM1PUvb2Fbhqbuqiw5c8xCFKbQVhjGKoL517U72Ce4Wscqy3jJySXdHPjAV9YIezlqa/kh+Tv1B/LrzgSWBXhV2iz2QbwDurREclXYjN68qA5YDU1ekmjYAntCr2q+l52RrEMSxpQrzxFTd8Ra9uu4BPAD4u9sSGlWmD7AEmMcvdUl1wycMw4BeJ0pHVhBoGstmATN1Rb0i1fW1A3MP4B/sgSk0qowKm+KSfDhuHZoDozuuMQwBTGN4njZo2mMOlLZEYZG6CIzBXtX1gD00glO3dBc5BJgHfbrkGmNYmRtvu2NaecZlMaygLnVHDfZ36N1RGxXmLnIl565ZNCRiIwAC086FAFo5hsfxGKYbKozFCvOAn7kjgTHYP0ijwgjM49cSYO6aVIt2Ko19TpfddPeysWNXkESWcWwSMKtGRD0jgz3d8U6a95IM+uom7o5A2SX1tbe2O+8r+thIWKo8j21RTjiyOQqrxa5IYWyag2kPWUpaS1bK/N+683LYw89aDDuCaNQRDdMG91MFFtS6VGERLE1YtXmWr+44B5ZbFM90mEVYW8TDsxIsfe5ZaYUqa4q6tPmQKJP/lMprqcCnGTrP9ybXiwoAURGgWJtb4pI+DNJkVVukKt6kFxSnwPLPHB5VoMMdLzN50w4nKmqO7qcIrHPHSF2RO7rC+FpdIBoGzam0qtXAaqytVX2ze1mssFIJx2OXqoywSvWv2sPPMc8VFZz+6BGoST/gKnoTKKqLD671rgiaDrCzLvtYoCKL4mKpZd8bWAosOIHGg6xn9LqXBtnJgfXIVgOVgQstBJYMgzyViIqEWaBfmm9dnJUU5rC8Tu+B3iurHuirPdBnsBGwyiDb3dFL0A7rj1IXkCtsbqIauWMtQf2U0AbAJhQIS+qKhj61Icens0hhcwbZJXf842ABkrhWBtlTgHmSGtXpgcIEw5GstvAkXE8x1TzTj9QVAdOEVV/rWNFr56wkfCQsXsvXTpRgzQIYDY1qAd+hZfUkvRmdUPBrHduiyV2f3MhW8QAVcCVgUQzztRJRT+g33WKoro82vbavo4gWo7gS9TwjuwbC3tFdMiqTRDHKZ2PQ7Z9q/Kj3QGC6HMABOrhIbQNThWUDVS/r+MIRYDzFxQmEVzv21ApjDZ+THZzcdYAltRWn2bIBaZSl88Z0WovnY109KhCewhTYFv3s9xN6eL4QZbQIJbKsHpaN4N3ldLqK0+uv2P+KOmNzSmDa0eiygTWAx65xUYqqLYI2a21FNufnN8EJUk40cH7vXAmrA+MPuMEe1r8AfqNX2zMqy51kmwLzqatIUTr13qIH6DV74HzAdIab02u/u/aIMTTvAIBKDMsu7LCoIKD/BT0fO2dlgg/MXpDxao09pEeMVfaCcQcwySWjX0hnjHVBB2+GytJ041xVidLSAV0rRnCMZcU4li13ihZ38IIEweN0JnnKZOiprBZOdJGdB38CS3tKBcZBcXQxTQ34/gvyucYI1qng6cNmy6AITtuk9CJTmALz3EsDqWf9mrPRzuGS3PoQTZeh6+pqTWJHWf9oUfDP5vtOhkc6WG7lRtxFFdSlwKK5W/KHZgem8LI/PFRdEnaQgvPhhs8mR4nuOYuFWelGqxdRJaMNvjOwwUMlJWodT/qM8SXCopWgedshcEVg/PeZWh6mBT8uIypNgF4CKLcMXFQPK8ICggdM/lEbgfGe8BJh0TxrLxUNU1hA8pAGTY/LAF0yLGAci6Jhz/t+6f+S1QcN4E363oVbCOTD/pGbQPw0tuTP8f/bQvsPPoCzn/bfs3UAAAAASUVORK5CYII="/>
    <image id="4h" width="87" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAAApCAYAAABA4LXdAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEk0lEQVRoge2bzVLbQBCE24kxhJ+ceDmekJfjCBhwsHKw2ttqzeyakFStUkzV1Aphy9qP9uzMrAC+7J/Z6rMXuBsePn2Nnu1+dTv86Xs/BCYBeeq53i2CODv3EdgnQTCoKxuzcydfvwNzYENjPAlydfIVqOp+rnbdXmDXVKqjO+y4CjmdrICNAH5Ljk+F3JNlUPfJ8Qx4BjicvIF1qDVfImBVIiHq+D6O++D3VcDryodmUL8nnkEG+gTsilVwhJo5X3+81t3wsHLAM7hBnHWo69HP5HiNOWQHDPQDebDjCOqvxFdIAPuHZMp11RLq2egbG+mq5ChE9GSq3AjsbvQ3GVU0NCoert4JXIu1qliC3QA4F7+Qcw44U29Ppqp1sG8AXsU5J3/vgDK/elhArlpC/CF+MY6EraHCw0NvpnAIV8G+iHM+sPfMMgdVbw2uxlmqljCvAFzK6IAj9fZmCkVVq2C3AJ5Qwpy+j6Hkm5yDjAVusJApYIVLqDcArjEHvEFZ4HqGCxT1uWq3o29Q5hGFD03TVmiEhdpCxhh7iQPUGwA/x+NrlDDBRS6C2wtkX8wUripWw4G/bocCOBRQLVtgzGQM9bBwjQNcAqZ6CZc3thTlaqy9QBEIMA0Z6pp6EnKcLYym6vWYywWN6iXgGxyAMzRo3O0VbrSYveIAd4OiWAf/giKe8Nt5NzzgfnU7tMJCFhoI+ApFxQwNmjUsRbksEHjvjLHvKFC3mK4phOv5/FS5QZ+2BpgKvsAUNMelwNVsgXDXKIAYBhRqlGqmc/xIhaalr4Kmn9vPS8oWtEBgGPDqU8FmRdJkngq31WJsNW68iaM30Kvp13iP+Ty8Z6Jzagqn1hXTG+AY/YWyi0+ayp1a1Ah3q805YnO0U+BGN6L9Te8iaV6oyu1NwV6haedL24tpDxcN8bTgttpx2uDQxeAdywgLXv5qs4bdMLrCznYmJhbB9TcoWE2ktf5mSrJHWXV7znFpOkev0OgvKHOmqBxwaArXW2cOVVXKG2BWgPF1ryh5oKYpvZrDZSHB8vcJwPP4s6pZ+wqpejPlcnTFEuwzpnU3b0qrs6XB9SrtGQe4jyiAqWIHvPcLA3O4mpaocrX80wIBKLGKSs6aNj2ahz4V0RYHqI8ogB1uFH+PtgYOO5dSpbUayNqCI/gXzCuzpcAFpnA1/D2jKPgJ0/AQhYaJtRY0hcutDsLay/lom6fHVqObw/X5qoI1NFC5rl4AGLKdCC5qvqDtUJSoC4B2kWo7EEuAG+1I6DpDz5Sr1wNQVy7BKiRVNP+63iWKFrLe4UYblZrjEihhZzF3Yke4jbjrKZp+dTKwvQKNzEOhhwjdfdCQEKVjR6ulYp5e+Kq6w7xZ0/uzCjVrlfY6eml8hJo+tyDq9VxXj9kzYB9B1cr0rPdY6xaFB193oufGUtUC7d4CdzX9gxWutt8QjEuwwY6j8t+hzyozf1YsBJBss9ccwbhUcxXX/Pj66CnHFETjafKsj7l0sMBcxRw93QrjrFoTRrK/1nr/EiFn3a0INoD2o/sfgvC//+fOKfaZ/+75sr9ovwE6VuMXJQtz3QAAAABJRU5ErkJggg=="/>
  </defs>
</svg>
`,OnscreenGamepads_svelte_svelte_type_style_lang="";function create_fragment$4(n){let e,r,t,a,s,u,d,c,g;return{c(){e=element("div"),r=element("div"),t=space(),a=element("div"),s=space(),u=element("div"),d=space(),c=element("div"),attr(r,"id","gamepad-joystick-touch-area-left"),attr(r,"class","gamepad-joystick-touch-area svelte-h6lsjy"),attr(a,"id","gamepad-joystick-touch-area-right"),attr(a,"class","gamepad-joystick-touch-area svelte-h6lsjy"),attr(u,"class","hidden gpad-display gpad-display-left"),attr(c,"class","hidden gpad-display gpad-display-right"),attr(e,"id","gamepad-container"),attr(e,"class",g=(n[1],""))},m(m,_){insert(m,e,_),append(e,r),append(e,t),append(e,a),append(e,s),append(e,u),u.innerHTML=GamepadLeftSvg,append(e,d),append(e,c),c.innerHTML=GamepadRightSvg,n[4](e)},p(m,[_]){_&2&&g!==(g=(m[1],""))&&attr(e,"class",g)},i:noop$1,o:noop$1,d(m){m&&detach(e),n[4](null)}}}function instance$3(n,e,r){let t,a,s;component_subscribe(n,peerServerConnState,g=>r(2,a=g)),component_subscribe(n,rovDataChannelConnState,g=>r(3,s=g));let u;const d=appReady.subscribe(g=>{if(!g)return;d();const m=gamepadController.get();m&&m.setupOnscreenGamepad(u)});function c(g){binding_callbacks[g?"unshift":"push"](()=>{u=g,r(0,u)})}return n.$$.update=()=>{n.$$.dirty&12&&r(1,t=s===ConnectionState.connected||s===ConnectionState.connecting||s===ConnectionState.reconnecting||a===ConnectionState.connecting||a===ConnectionState.reconnecting||a===ConnectionState.disconnected)},[u,t,a,s,c]}class OnscreenGamepads extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$3,create_fragment$4,safe_not_equal,{})}}const VideoPlayer_svelte_svelte_type_style_lang="";function create_fragment$3(n){let e,r;return{c(){e=element("div"),attr(e,"id","livestream_container"),attr(e,"class",r=null_to_empty(n[1]?"full":"")+" svelte-4narkd")},m(t,a){insert(t,e,a),n[4](e)},p(t,[a]){a&2&&r!==(r=null_to_empty(t[1]?"full":"")+" svelte-4narkd")&&attr(e,"class",r)},i:noop$1,o:noop$1,d(t){t&&detach(e),n[4](null)}}}function instance$2(n,e,r){let t,a,s;component_subscribe(n,rovVideoStreamConnState,_=>r(2,t=_)),component_subscribe(n,appReady,_=>r(3,a=_)),component_subscribe(n,fullscreenOpen,_=>r(1,s=_));let u=null,d=null;const c=_=>{if(!_||_==d)return;d=_;const b=document.createElement("video");b.id="video_livestream",b.muted=!0,b.autoplay=!0,b.controls=!1,b.srcObject=_,b.setAttribute("tabindex","-1"),r(0,u.innerHTML="",u),u.appendChild(b),b.onclick=()=>{b.play()},setTimeout(()=>{b.play().catch(S=>{showToastMessage("Click video to play.",5e3,()=>{b.play()})})},150)},g=rovVideoStream.subscribe(_=>{!_||_==d||(_.onaddtrack=function(b){console.log("Got remote track from relay",b.track),c(new MediaStream([b.track]))},c(_))});onDestroy(()=>{videoElement&&(videoElement.pause(),videoElement.srcObject=null),g()});function m(_){binding_callbacks[_?"unshift":"push"](()=>{u=_,r(0,u)})}return n.$$.update=()=>{n.$$.dirty&12&&a===!0&&(t==ConnectionState.connecting||t==ConnectionState.reconnecting?showLoadingUi(LOADING_MESSAGE.awaitingVideoCall,null):(t==ConnectionState.disconnected||t==ConnectionState.connected)&&hideLoadingUi(LOADING_MESSAGE.awaitingVideoCall))},[u,s,t,a,m]}class VideoPlayer extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$2,create_fragment$3,safe_not_equal,{})}}const NetworkCheck={default:{a:{viewBox:"0 0 24 24"},path:[{d:"M15.9 5c-.17 0-.32.09-.41.23l-.07.15-5.18 11.65c-.16.29-.26.61-.26.96 0 1.11.9 2.01 2.01 2.01.96 0 1.77-.68 1.96-1.59l.01-.03L16.4 5.5c0-.28-.22-.5-.5-.5zM1 9l2 2c2.88-2.88 6.79-4.08 10.53-3.62l1.19-2.68C9.89 3.84 4.74 5.27 1 9zm20 2 2-2a15.367 15.367 0 0 0-5.59-3.57l-.53 2.82c1.5.62 2.9 1.53 4.12 2.75zm-4 4 2-2c-.8-.8-1.7-1.42-2.66-1.89l-.55 2.92c.42.27.83.59 1.21.97zM5 13l2 2a7.1 7.1 0 0 1 4.03-2l1.28-2.88c-2.63-.08-5.3.87-7.31 2.88z"}]},outlined:{a:{viewBox:"0 0 24 24"},path:[{d:"M15.9 5c-.17 0-.32.09-.41.23l-.07.15-5.18 11.65c-.16.29-.26.61-.26.96 0 1.11.9 2.01 2.01 2.01.96 0 1.77-.68 1.96-1.59l.01-.03L16.4 5.5c0-.28-.22-.5-.5-.5zM1 9l2 2c2.88-2.88 6.79-4.08 10.53-3.62l1.19-2.68C9.89 3.84 4.74 5.27 1 9zm20 2 2-2a15.367 15.367 0 0 0-5.59-3.57l-.53 2.82c1.5.62 2.9 1.53 4.12 2.75zm-4 4 2-2c-.8-.8-1.7-1.42-2.66-1.89l-.55 2.92c.42.27.83.59 1.21.97zM5 13l2 2a7.1 7.1 0 0 1 4.03-2l1.28-2.88c-2.63-.08-5.3.87-7.31 2.88z"}]},round:{a:{viewBox:"0 0 24 24"},path:[{d:"M15.9 5c-.17 0-.32.09-.41.23l-.07.15-5.18 11.65c-.16.29-.26.61-.26.96 0 1.11.9 2.01 2.01 2.01.96 0 1.77-.68 1.96-1.59l.01-.03L16.4 5.5c0-.28-.22-.5-.5-.5zM2.06 10.06c.51.51 1.33.55 1.89.09 2.76-2.26 6.24-3.18 9.58-2.76l1.19-2.68c-4.35-.78-8.96.3-12.57 3.25-.64.53-.68 1.51-.09 2.1zm19.88 0c.59-.59.55-1.57-.1-2.1a15.393 15.393 0 0 0-4.44-2.53l-.53 2.82c1.13.47 2.19 1.09 3.17 1.89.58.46 1.39.43 1.9-.08zm-4.03 4.03c.6-.6.56-1.63-.14-2.12-.46-.33-.94-.61-1.44-.86l-.55 2.92c.11.07.22.14.32.22.57.4 1.33.32 1.81-.16zm-11.83-.01c.5.5 1.27.54 1.85.13.94-.66 2.01-1.06 3.1-1.22l1.28-2.88c-2.13-.06-4.28.54-6.09 1.84-.69.51-.74 1.53-.14 2.13z"}]},sharp:{a:{viewBox:"0 0 24 24"},path:[{d:"M15.9 5c-.17 0-.32.09-.41.23l-.07.15-5.18 11.65c-.16.29-.26.61-.26.96 0 1.11.9 2.01 2.01 2.01.96 0 1.77-.68 1.96-1.59l.01-.03L16.4 5.5c0-.28-.22-.5-.5-.5zM1 9l2 2c2.88-2.88 6.79-4.08 10.53-3.62l1.19-2.68C9.89 3.84 4.74 5.27 1 9zm20 2 2-2a15.367 15.367 0 0 0-5.59-3.57l-.53 2.82c1.5.62 2.9 1.53 4.12 2.75zm-4 4 2-2c-.8-.8-1.7-1.42-2.66-1.89l-.55 2.92c.42.27.83.59 1.21.97zM5 13l2 2a7.1 7.1 0 0 1 4.03-2l1.28-2.88c-2.63-.08-5.3.87-7.31 2.88z"}]},twotone:{a:{viewBox:"0 0 24 24"},path:[{d:"M15.9 5c-.17 0-.32.09-.41.23l-.07.15-5.18 11.65c-.16.29-.26.61-.26.96 0 1.11.9 2.01 2.01 2.01.96 0 1.77-.68 1.96-1.59l.01-.03L16.4 5.5c0-.28-.22-.5-.5-.5zM1 9l2 2c2.88-2.88 6.79-4.08 10.53-3.62l1.19-2.68C9.89 3.84 4.74 5.27 1 9zm20 2 2-2a15.367 15.367 0 0 0-5.59-3.57l-.53 2.82c1.5.62 2.9 1.53 4.12 2.75zm-4 4 2-2c-.8-.8-1.7-1.42-2.66-1.89l-.55 2.92c.42.27.83.59 1.21.97zM5 13l2 2a7.1 7.1 0 0 1 4.03-2l1.28-2.88c-2.63-.08-5.3.87-7.31 2.88z"}]}},Thermostat={default:{a:{viewBox:"0 0 24 24"},path:[{d:"M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-2V5c0-.55.45-1 1-1s1 .45 1 1v1h-1v1h1v2h-1v1h1v1h-2z"}]},outlined:{a:{viewBox:"0 0 24 24"},path:[{d:"M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-8c0-.55.45-1 1-1s1 .45 1 1h-1v1h1v2h-1v1h1v2h-2V5z"}]},round:{a:{viewBox:"0 0 24 24"},path:[{d:"M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-2-2h-2V5c0-.55.45-1 1-1s1 .45 1 1h-.5c-.28 0-.5.22-.5.5s.22.5.5.5h.5v2h-.5c-.28 0-.5.22-.5.5s.22.5.5.5h.5v2z"}]},sharp:{a:{viewBox:"0 0 24 24"},path:[{d:"M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-8c0-.55.45-1 1-1s1 .45 1 1h-1v1h1v2h-1v1h1v2h-2V5z"}]},twotone:{a:{viewBox:"0 0 24 24"},path:[{d:"M15 13V5c0-1.66-1.34-3-3-3S9 3.34 9 5v8c-1.21.91-2 2.37-2 4 0 2.76 2.24 5 5 5s5-2.24 5-5c0-1.63-.79-3.09-2-4zm-4-8c0-.55.45-1 1-1s1 .45 1 1h-1v1h1v2h-1v1h1v2h-2V5z"}]}},Waves={default:{a:{viewBox:"0 0 24 24"},path:[{d:"M17 16.99c-1.35 0-2.2.42-2.95.8-.65.33-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.95c1.35 0 2.2-.42 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.42 2.95-.8c.65-.33 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm0-4.45c-1.35 0-2.2.43-2.95.8-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.32-1.17.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm2.95-8.08c-.75-.38-1.58-.8-2.95-.8s-2.2.42-2.95.8c-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.37-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.93c1.35 0 2.2-.43 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V5.04c-.9 0-1.4-.25-2.05-.58zM17 8.09c-1.35 0-2.2.43-2.95.8-.65.35-1.15.6-2.05.6s-1.4-.25-2.05-.6c-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.35-1.15.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.32 1.18-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V9.49c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8z"}]},outlined:{a:{viewBox:"0 0 24 24"},path:[{d:"M17 16.99c-1.35 0-2.2.42-2.95.8-.65.33-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.95c1.35 0 2.2-.42 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.42 2.95-.8c.65-.33 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm0-4.45c-1.35 0-2.2.43-2.95.8-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.32-1.17.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm2.95-8.08c-.75-.38-1.58-.8-2.95-.8s-2.2.42-2.95.8c-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.37-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.93c1.35 0 2.2-.43 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V5.04c-.9 0-1.4-.25-2.05-.58zM17 8.09c-1.35 0-2.2.43-2.95.8-.65.35-1.15.6-2.05.6s-1.4-.25-2.05-.6c-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.35-1.15.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.32 1.18-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V9.49c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8z"}]},round:{a:{viewBox:"0 0 24 24"},path:[{d:"M17 16.99c-1.35 0-2.2.42-2.95.8-.65.33-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.43.22-.81.41-1.27.52-.45.1-.78.46-.78.91v.1c0 .6.56 1.03 1.14.91.74-.15 1.3-.43 1.81-.69.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.42 2.95-.8c.65-.33 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.52.26 1.08.55 1.83.7a.94.94 0 0 0 1.12-.91v-.09c0-.46-.34-.82-.79-.92-.46-.1-.83-.29-1.26-.52-.75-.39-1.6-.81-2.95-.81zm0-4.45c-1.35 0-2.2.43-2.95.8-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.43.21-.81.41-1.28.52-.44.1-.77.46-.77.91v.1a.93.93 0 0 0 1.12.91c.75-.15 1.31-.44 1.83-.69.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.52.26 1.08.55 1.83.7a.94.94 0 0 0 1.12-.92v-.09c0-.46-.34-.82-.79-.92-.46-.1-.83-.29-1.26-.52-.75-.38-1.6-.8-2.95-.8zm2.95-8.08c-.75-.38-1.58-.8-2.95-.8s-2.2.42-2.95.8c-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.37-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.43.22-.81.41-1.27.52-.45.1-.78.46-.78.91v.07c0 .6.54 1.04 1.12.92.75-.15 1.31-.44 1.83-.69.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.52.26 1.08.55 1.83.7A.94.94 0 0 0 22 5.97v-.09c0-.46-.34-.82-.79-.92-.46-.1-.83-.28-1.26-.5zM17 8.09c-1.35 0-2.2.43-2.95.8-.65.35-1.15.6-2.05.6s-1.4-.25-2.05-.6c-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.43.23-.8.42-1.26.52-.45.1-.79.46-.79.92v.09a.93.93 0 0 0 1.12.91c.75-.15 1.31-.44 1.83-.69.65-.32 1.18-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.52.26 1.08.55 1.83.7a.94.94 0 0 0 1.12-.91v-.09c0-.46-.34-.82-.79-.92-.46-.1-.83-.29-1.26-.52-.75-.39-1.6-.81-2.95-.81z"}]},sharp:{a:{viewBox:"0 0 24 24"},path:[{d:"M17 16.99c-1.35 0-2.2.42-2.95.8-.65.33-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.95c1.35 0 2.2-.42 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.42 2.95-.8c.65-.33 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm0-4.45c-1.35 0-2.2.43-2.95.8-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.32-1.17.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm2.95-8.08c-.75-.38-1.58-.8-2.95-.8s-2.2.42-2.95.8c-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.37-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.93c1.35 0 2.2-.43 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V5.04c-.9 0-1.4-.25-2.05-.58zM17 8.09c-1.35 0-2.2.43-2.95.8-.65.35-1.15.6-2.05.6s-1.4-.25-2.05-.6c-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.35-1.15.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.32 1.18-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V9.49c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8z"}]},twotone:{a:{viewBox:"0 0 24 24"},path:[{d:"M17 16.99c-1.35 0-2.2.42-2.95.8-.65.33-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.95c1.35 0 2.2-.42 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.42 2.95-.8c.65-.33 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm0-4.45c-1.35 0-2.2.43-2.95.8-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.32-1.17.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.35 1.15-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.58.8 2.95.8v-1.95c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8zm2.95-8.08c-.75-.38-1.58-.8-2.95-.8s-2.2.42-2.95.8c-.65.32-1.18.6-2.05.6-.9 0-1.4-.25-2.05-.6-.75-.37-1.57-.8-2.95-.8s-2.2.42-2.95.8c-.65.33-1.17.6-2.05.6v1.93c1.35 0 2.2-.43 2.95-.8.65-.33 1.17-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V5.04c-.9 0-1.4-.25-2.05-.58zM17 8.09c-1.35 0-2.2.43-2.95.8-.65.35-1.15.6-2.05.6s-1.4-.25-2.05-.6c-.75-.38-1.57-.8-2.95-.8s-2.2.43-2.95.8c-.65.35-1.15.6-2.05.6v1.95c1.35 0 2.2-.43 2.95-.8.65-.32 1.18-.6 2.05-.6s1.4.25 2.05.6c.75.38 1.57.8 2.95.8s2.2-.43 2.95-.8c.65-.32 1.18-.6 2.05-.6.9 0 1.4.25 2.05.6.75.38 1.58.8 2.95.8V9.49c-.9 0-1.4-.25-2.05-.6-.75-.38-1.6-.8-2.95-.8z"}]}},SensorDisplay_svelte_svelte_type_style_lang="";function get_each_context(n,e,r){const t=n.slice();return t[0]=e[r].name,t[1]=e[r].unit,t[2]=e[r].icon,t[4]=r,t}function get_each_context_1(n,e,r){const t=n.slice();return t[0]=e[r].name,t[1]=e[r].unit,t[2]=e[r].icon,t[4]=r,t}function create_if_block_1(n){let e,r,t,a,s=sensorValues[n[0]].toFixed(2)+"",u,d,c,g=n[1]+"",m,_,b,S,C;return r=new Icon({props:{theme:"solid",src:n[2],class:"sensor-icon pointer-events-none w-6 h-6 mr-2"}}),{c(){e=element("div"),create_component(r.$$.fragment),t=space(),a=element("span"),u=text(s),d=space(),c=element("span"),m=text(g),_=space(),attr(a,"class","sensor-value svelte-1f3sva5"),attr(c,"class","sensor-unit svelte-1f3sva5"),attr(e,"class","sensor pointer-events-auto cursor-help svelte-1f3sva5"),attr(e,"tabindex","0")},m(R,w){insert(R,e,w),mount_component(r,e,null),append(e,t),append(e,a),append(a,u),append(e,d),append(e,c),append(c,m),append(e,_),b=!0,S||(C=action_destroyer(addTooltip.call(null,e,{label:n[0],placement:"bottom",timeout:0})),S=!0)},p(R,w){n=R},i(R){b||(transition_in(r.$$.fragment,R),b=!0)},o(R){transition_out(r.$$.fragment,R),b=!1},d(R){R&&detach(e),destroy_component(r),S=!1,C()}}}function create_each_block_1(n){let e,r,t=n[4]<=sensorTypes.length/2&&sensorValues[n[0]]!=null&&create_if_block_1(n);return{c(){t&&t.c(),e=empty()},m(a,s){t&&t.m(a,s),insert(a,e,s),r=!0},p(a,s){a[4]<=sensorTypes.length/2&&sensorValues[a[0]]!=null&&t.p(a,s)},i(a){r||(transition_in(t),r=!0)},o(a){transition_out(t),r=!1},d(a){t&&t.d(a),a&&detach(e)}}}function create_if_block(n){let e,r,t,a,s=sensorValues[n[0]].toFixed(2).padEnd(4)+"",u,d,c,g=n[1]+"",m,_,b,S,C;return r=new Icon({props:{theme:"solid",src:n[2],class:"sensor-icon pointer-events-none w-6 h-6 mr-2"}}),{c(){e=element("div"),create_component(r.$$.fragment),t=space(),a=element("span"),u=text(s),d=space(),c=element("span"),m=text(g),_=space(),attr(a,"class","sensor-value svelte-1f3sva5"),attr(c,"class","sensor-unit svelte-1f3sva5"),attr(e,"class","sensor pointer-events-auto cursor-help svelte-1f3sva5"),attr(e,"tabindex","0")},m(R,w){insert(R,e,w),mount_component(r,e,null),append(e,t),append(e,a),append(a,u),append(e,d),append(e,c),append(c,m),append(e,_),b=!0,S||(C=action_destroyer(addTooltip.call(null,e,{label:n[0],placement:"bottom",timeout:0})),S=!0)},p(R,w){n=R},i(R){b||(transition_in(r.$$.fragment,R),b=!0)},o(R){transition_out(r.$$.fragment,R),b=!1},d(R){R&&detach(e),destroy_component(r),S=!1,C()}}}function create_each_block(n){let e,r,t=n[4]>sensorTypes.length/2&&sensorValues[n[0]]!=null&&create_if_block(n);return{c(){t&&t.c(),e=empty()},m(a,s){t&&t.m(a,s),insert(a,e,s),r=!0},p(a,s){a[4]>sensorTypes.length/2&&sensorValues[a[0]]!=null&&t.p(a,s)},i(a){r||(transition_in(t),r=!0)},o(a){transition_out(t),r=!1},d(a){t&&t.d(a),a&&detach(e)}}}function create_fragment$2(n){let e,r,t,a,s,u,d,c,g,m,_,b,S,C=sensorTypes,R=[];for(let I=0;I<C.length;I+=1)R[I]=create_each_block_1(get_each_context_1(n,C,I));const w=I=>transition_out(R[I],1,1,()=>{R[I]=null});let k=sensorTypes,$=[];for(let I=0;I<k.length;I+=1)$[I]=create_each_block(get_each_context(n,k,I));const O=I=>transition_out($[I],1,1,()=>{$[I]=null});return{c(){e=element("input"),r=space(),t=element("div"),a=element("div"),s=element("div"),u=space();for(let I=0;I<R.length;I+=1)R[I].c();d=space(),c=element("div"),g=space(),m=element("div"),_=element("div"),b=space();for(let I=0;I<$.length;I+=1)$[I].c();attr(e,"id","depth2"),attr(e,"type","range"),attr(e,"min","0"),attr(e,"max","100"),e.value=sensorValues.Depth,attr(e,"class","range range-info range-md vertical-indicator left-down svelte-1f3sva5"),attr(s,"class","w-4 h-12"),attr(a,"class","sensor-overlay sensor-overlay-left svelte-1f3sva5"),attr(c,"class","sensor-center-spacer svelte-1f3sva5"),attr(_,"class","w-12 h-12"),attr(m,"class","sensor-overlay sensor-overlay-right svelte-1f3sva5"),attr(t,"class","sensor-overlay-container pointer-events-none svelte-1f3sva5")},m(I,x){insert(I,e,x),insert(I,r,x),insert(I,t,x),append(t,a),append(a,s),append(a,u);for(let P=0;P<R.length;P+=1)R[P].m(a,null);append(t,d),append(t,c),append(t,g),append(t,m),append(m,_),append(m,b);for(let P=0;P<$.length;P+=1)$[P].m(m,null);S=!0},p(I,[x]){if(x&0){C=sensorTypes;let P;for(P=0;P<C.length;P+=1){const B=get_each_context_1(I,C,P);R[P]?(R[P].p(B,x),transition_in(R[P],1)):(R[P]=create_each_block_1(B),R[P].c(),transition_in(R[P],1),R[P].m(a,null))}for(group_outros(),P=C.length;P<R.length;P+=1)w(P);check_outros()}if(x&0){k=sensorTypes;let P;for(P=0;P<k.length;P+=1){const B=get_each_context(I,k,P);$[P]?($[P].p(B,x),transition_in($[P],1)):($[P]=create_each_block(B),$[P].c(),transition_in($[P],1),$[P].m(m,null))}for(group_outros(),P=k.length;P<$.length;P+=1)O(P);check_outros()}},i(I){if(!S){for(let x=0;x<C.length;x+=1)transition_in(R[x]);for(let x=0;x<k.length;x+=1)transition_in($[x]);S=!0}},o(I){R=R.filter(Boolean);for(let x=0;x<R.length;x+=1)transition_out(R[x]);$=$.filter(Boolean);for(let x=0;x<$.length;x+=1)transition_out($[x]);S=!1},d(I){I&&detach(e),I&&detach(r),I&&detach(t),destroy_each(R,I),destroy_each($,I)}}}let sensorValues={NetPing:0,Depth:50,Temperature:0};const sensorTypes=[{name:"Depth",unit:"m",icon:Waves},{name:"Temperature",unit:"℃",icon:Thermostat},{name:"NetPing",unit:"ms",icon:NetworkCheck}];class SensorDisplay extends SvelteComponent{constructor(e){super(),init$1(this,e,null,create_fragment$2,safe_not_equal,{})}}const fragmentShader=`precision mediump float;

uniform vec2 resolution;
uniform float yaw;
uniform float roll;
uniform float pitch;

const float pi = 3.1415927;
const float deg = pi / 180.0;

// Uncomment to see the lat-long grid for context
#define SHOW_LARGE_GRID
#define SHOW_SPHERE
#define SHOW_SPHERE_GRID

mat3 rotationAll(float yaw, float pitch, float roll) {
        /// yaw
    return mat3(

    cos(yaw), 0, -sin(yaw),
       0,     1,    0,
    sin(yaw), 0, cos(yaw))
/// pitch
     * mat3(
    1,     0,          0,
    0, cos(pitch), sin(pitch),
    0, -sin(pitch), cos(pitch))

 /// roll
     * mat3(
    cos(roll), sin(roll),  0,
    -sin(roll), cos(roll), 0,
    0,            0,       1);
}

void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    float scale = 1.0 / resolution.x; // min(resolution.x, resolution.y);
    vec4 color = vec4(0.0, 0.0, 0.0, 0.0);

	const float verticalFieldOfView = 50.0 * deg;
	const float insetSphereRadius = 0.5;


    // Inset sphere
    vec2 spherePoint = (uv - insetSphereRadius) / insetSphereRadius; //(uv - insetSphereRadius) / insetSphereRadius;
    if (length(spherePoint) <= 1.0) {
        vec3 c = vec3(0);
        vec2 s = clamp(spherePoint, vec2(-1.0), vec2(1.0));

        // Show convex sphere grid lines
        // vec3 dir = rotationAll(yaw, pitch,roll) * vec3(s.xy, sqrt(max(0.0, 1.0 - dot(s.xy, s.xy))));
        //             float latLongLine = (1.0 - pow(smoothstep(0.0, 0.09, min(abs(fract(atan(dir.y, length(dir.xz)) / (15.0 * deg)) - 0.5), abs(fract(atan(dir.x, dir.z) / (15.0 * deg)) - 0.5)) * 2.0), 10.0));
        //             c += latLongLine * vec3(-dir.y, dir.y, 1);

        // show concave sphere grid lines:
        vec3 dir = rotationAll(yaw, pitch,roll) * normalize(vec3(s.xy, 1.0));
        // vec3 dir = rotationAll(yaw, pitch,roll) * vec3(s.xy, sqrt(max(0.0, 1.0 - dot(s.xy, s.xy))));
        // float latLongLine = (1.0 - pow(smoothstep(0.0, 0.09, min(abs(fract(atan(dir.y, length(dir.xz)) / (15.0 * deg)) - 0.5), abs(fract(atan(dir.x, dir.z) / (15.0 * deg)) - 0.5)) * 2.0), 10.0));
        // float latLongLine = (1.0 - pow(smoothstep(0.0, 0.04, min(abs(fract(atan(dir.y, length(dir.xz)) / (15.0 * deg)) - 0.5), abs(fract(atan(dir.x, dir.z) / (15.0 * deg)) - 0.5)) * 2.0), 10.0));


        float latLine = (1.0 - pow(smoothstep(0.0, 0.4,abs(fract(atan(dir.y, length(dir.xz)) / (15.0 * deg)) - 0.5) * 2.0), 1.0));

        float longLine = (1.0 - pow(smoothstep(0.0, 0.4, abs(fract(atan(dir.x, dir.z) / (15.0 * deg)) - 0.5) * 2.0), 10.0));


        c += (max(latLine,longLine) * 0.8) * vec3(dir.y / 2.0,  dir.y / 2.0 + 0.5, dir.y / 2.0 + 1.0) *(dir.y / 2.0 + 0.7);
                // c += latLine * vec3(1.0 - abs(dir.y),  dir.y - 0.5, -dir.y + 0.5) *(dir.y / 2.0 + 0.5);
                // c += longLine *  vec3(dir.y / 2.0 + 0.5,  dir.y / 2.0 + 0.5, dir.y / 2.0 + 0.5) / 2.0;

        // Fade the inset sphere to antialias its border transition
        float fade = clamp((1.0 - length(spherePoint)) * 2.0, 0.0, 1.0);
        color.rgb = mix(vec3(0), c, fade);
        float fade2 = clamp((1.0 - length(spherePoint)) * 5.0, 0.0, 0.4);
        color.a = fade2;
    }

  gl_FragColor = color;
}
`;const BYTE$2=5120,UNSIGNED_BYTE$3=5121,SHORT$2=5122,UNSIGNED_SHORT$3=5123,INT$3=5124,UNSIGNED_INT$3=5125,FLOAT$3=5126,UNSIGNED_SHORT_4_4_4_4$1=32819,UNSIGNED_SHORT_5_5_5_1$1=32820,UNSIGNED_SHORT_5_6_5$1=33635,HALF_FLOAT$1=5131,UNSIGNED_INT_2_10_10_10_REV$1=33640,UNSIGNED_INT_10F_11F_11F_REV$1=35899,UNSIGNED_INT_5_9_9_9_REV$1=35902,FLOAT_32_UNSIGNED_INT_24_8_REV$1=36269,UNSIGNED_INT_24_8$1=34042,glTypeToTypedArray={};{const n=glTypeToTypedArray;n[BYTE$2]=Int8Array,n[UNSIGNED_BYTE$3]=Uint8Array,n[SHORT$2]=Int16Array,n[UNSIGNED_SHORT$3]=Uint16Array,n[INT$3]=Int32Array,n[UNSIGNED_INT$3]=Uint32Array,n[FLOAT$3]=Float32Array,n[UNSIGNED_SHORT_4_4_4_4$1]=Uint16Array,n[UNSIGNED_SHORT_5_5_5_1$1]=Uint16Array,n[UNSIGNED_SHORT_5_6_5$1]=Uint16Array,n[HALF_FLOAT$1]=Uint16Array,n[UNSIGNED_INT_2_10_10_10_REV$1]=Uint32Array,n[UNSIGNED_INT_10F_11F_11F_REV$1]=Uint32Array,n[UNSIGNED_INT_5_9_9_9_REV$1]=Uint32Array,n[FLOAT_32_UNSIGNED_INT_24_8_REV$1]=Uint32Array,n[UNSIGNED_INT_24_8$1]=Uint32Array}function getGLTypeForTypedArray(n){if(n instanceof Int8Array)return BYTE$2;if(n instanceof Uint8Array||n instanceof Uint8ClampedArray)return UNSIGNED_BYTE$3;if(n instanceof Int16Array)return SHORT$2;if(n instanceof Uint16Array)return UNSIGNED_SHORT$3;if(n instanceof Int32Array)return INT$3;if(n instanceof Uint32Array)return UNSIGNED_INT$3;if(n instanceof Float32Array)return FLOAT$3;throw new Error("unsupported typed array type")}function getGLTypeForTypedArrayType(n){if(n===Int8Array)return BYTE$2;if(n===Uint8Array||n===Uint8ClampedArray)return UNSIGNED_BYTE$3;if(n===Int16Array)return SHORT$2;if(n===Uint16Array)return UNSIGNED_SHORT$3;if(n===Int32Array)return INT$3;if(n===Uint32Array)return UNSIGNED_INT$3;if(n===Float32Array)return FLOAT$3;throw new Error("unsupported typed array type")}function getTypedArrayTypeForGLType(n){const e=glTypeToTypedArray[n];if(!e)throw new Error("unknown gl type");return e}const isArrayBuffer$1=typeof SharedArrayBuffer<"u"?function n(e){return e&&e.buffer&&(e.buffer instanceof ArrayBuffer||e.buffer instanceof SharedArrayBuffer)}:function n(e){return e&&e.buffer&&e.buffer instanceof ArrayBuffer};function error$1(...n){console.error(...n)}const isTypeWeakMaps=new Map;function isType(n,e){if(!n||typeof n!="object")return!1;let r=isTypeWeakMaps.get(e);r||(r=new WeakMap,isTypeWeakMaps.set(e,r));let t=r.get(n);if(t===void 0){const a=Object.prototype.toString.call(n);t=a.substring(8,a.length-1)===e,r.set(n,t)}return t}function isBuffer(n,e){return typeof WebGLBuffer<"u"&&isType(e,"WebGLBuffer")}function isTexture(n,e){return typeof WebGLTexture<"u"&&isType(e,"WebGLTexture")}const STATIC_DRAW=35044,ARRAY_BUFFER$1=34962,ELEMENT_ARRAY_BUFFER$2=34963,BUFFER_SIZE=34660,BYTE$1=5120,UNSIGNED_BYTE$2=5121,SHORT$1=5122,UNSIGNED_SHORT$2=5123,INT$2=5124,UNSIGNED_INT$2=5125,FLOAT$2=5126,defaults$2={attribPrefix:""};function setBufferFromTypedArray(n,e,r,t,a){n.bindBuffer(e,r),n.bufferData(e,t,a||STATIC_DRAW)}function createBufferFromTypedArray(n,e,r,t){if(isBuffer(n,e))return e;r=r||ARRAY_BUFFER$1;const a=n.createBuffer();return setBufferFromTypedArray(n,r,a,e,t),a}function isIndices(n){return n==="indices"}function getNormalizationForTypedArrayType(n){return n===Int8Array||n===Uint8Array}function getArray$1(n){return n.length?n:n.data}const texcoordRE=/coord|texture/i,colorRE=/color|colour/i;function guessNumComponentsFromName(n,e){let r;if(texcoordRE.test(n)?r=2:colorRE.test(n)?r=4:r=3,e%r>0)throw new Error(`Can not guess numComponents for attribute '${n}'. Tried ${r} but ${e} values is not evenly divisible by ${r}. You should specify it.`);return r}function getNumComponents$1(n,e,r){return n.numComponents||n.size||guessNumComponentsFromName(e,r||getArray$1(n).length)}function makeTypedArray(n,e){if(isArrayBuffer$1(n))return n;if(isArrayBuffer$1(n.data))return n.data;Array.isArray(n)&&(n={data:n});let r=n.type?typedArrayTypeFromGLTypeOrTypedArrayCtor(n.type):void 0;return r||(isIndices(e)?r=Uint16Array:r=Float32Array),new r(n.data)}function glTypeFromGLTypeOrTypedArrayType(n){return typeof n=="number"?n:n?getGLTypeForTypedArrayType(n):FLOAT$2}function typedArrayTypeFromGLTypeOrTypedArrayCtor(n){return typeof n=="number"?getTypedArrayTypeForGLType(n):n||Float32Array}function attribBufferFromBuffer(n,e){return{buffer:e.buffer,numValues:2*3*4,type:glTypeFromGLTypeOrTypedArrayType(e.type),arrayType:typedArrayTypeFromGLTypeOrTypedArrayCtor(e.type)}}function attribBufferFromSize(n,e){const r=e.data||e,t=typedArrayTypeFromGLTypeOrTypedArrayCtor(e.type),a=r*t.BYTES_PER_ELEMENT,s=n.createBuffer();return n.bindBuffer(ARRAY_BUFFER$1,s),n.bufferData(ARRAY_BUFFER$1,a,e.drawType||STATIC_DRAW),{buffer:s,numValues:r,type:getGLTypeForTypedArrayType(t),arrayType:t}}function attribBufferFromArrayLike(n,e,r){const t=makeTypedArray(e,r);return{arrayType:t.constructor,buffer:createBufferFromTypedArray(n,t,void 0,e.drawType),type:getGLTypeForTypedArray(t),numValues:0}}function createAttribsFromArrays(n,e){const r={};return Object.keys(e).forEach(function(t){if(!isIndices(t)){const a=e[t],s=a.attrib||a.name||a.attribName||defaults$2.attribPrefix+t;if(a.value){if(!Array.isArray(a.value)&&!isArrayBuffer$1(a.value))throw new Error("array.value is not array or typedarray");r[s]={value:a.value}}else{let u;a.buffer&&a.buffer instanceof WebGLBuffer?u=attribBufferFromBuffer:typeof a=="number"||typeof a.data=="number"?u=attribBufferFromSize:u=attribBufferFromArrayLike;const{buffer:d,type:c,numValues:g,arrayType:m}=u(n,a,t),_=a.normalize!==void 0?a.normalize:getNormalizationForTypedArrayType(m),b=getNumComponents$1(a,t,g);r[s]={buffer:d,numComponents:b,type:c,normalize:_,stride:a.stride||0,offset:a.offset||0,divisor:a.divisor===void 0?void 0:a.divisor,drawType:a.drawType}}}}),n.bindBuffer(ARRAY_BUFFER$1,null),r}function getBytesPerValueForGLType(n,e){return e===BYTE$1||e===UNSIGNED_BYTE$2?1:e===SHORT$1||e===UNSIGNED_SHORT$2?2:e===INT$2||e===UNSIGNED_INT$2||e===FLOAT$2?4:0}const positionKeys=["position","positions","a_position"];function getNumElementsFromAttributes(n,e){let r,t;for(t=0;t<positionKeys.length&&(r=positionKeys[t],!(r in e||(r=defaults$2.attribPrefix+r,r in e)));++t);t===positionKeys.length&&(r=Object.keys(e)[0]);const a=e[r];if(!a.buffer)return 1;n.bindBuffer(ARRAY_BUFFER$1,a.buffer);const s=n.getBufferParameter(ARRAY_BUFFER$1,BUFFER_SIZE);n.bindBuffer(ARRAY_BUFFER$1,null);const u=getBytesPerValueForGLType(n,a.type),d=s/u,c=a.numComponents||a.size,g=d/c;if(g%1!==0)throw new Error(`numComponents ${c} not correct for length ${length}`);return g}function createBufferInfoFromArrays(n,e,r){const t=createAttribsFromArrays(n,e),a=Object.assign({},r||{});a.attribs=Object.assign({},r?r.attribs:{},t);const s=e.indices;if(s){const u=makeTypedArray(s,"indices");a.indices=createBufferFromTypedArray(n,u,ELEMENT_ARRAY_BUFFER$2),a.numElements=u.length,a.elementType=getGLTypeForTypedArray(u)}else a.numElements||(a.numElements=getNumElementsFromAttributes(n,a.attribs));return a}function isWebGL2(n){return!!n.texStorage2D}const glEnumToString=function(){const n={},e={};function r(t){const a=t.constructor.name;if(!n[a]){for(const s in t)if(typeof t[s]=="number"){const u=e[t[s]];e[t[s]]=u?`${u} | ${s}`:s}n[a]=!0}}return function(a,s){return r(a),e[s]||(typeof s=="number"?`0x${s.toString(16)}`:s)}}(),error=error$1;function getElementById(n){return typeof document<"u"&&document.getElementById?document.getElementById(n):null}const TEXTURE0=33984,ARRAY_BUFFER=34962,ELEMENT_ARRAY_BUFFER$1=34963,COMPILE_STATUS=35713,LINK_STATUS=35714,FRAGMENT_SHADER=35632,VERTEX_SHADER=35633,SEPARATE_ATTRIBS=35981,ACTIVE_UNIFORMS=35718,ACTIVE_ATTRIBUTES=35721,TRANSFORM_FEEDBACK_VARYINGS=35971,ACTIVE_UNIFORM_BLOCKS=35382,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398,UNIFORM_BLOCK_DATA_SIZE=35392,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395,FLOAT=5126,FLOAT_VEC2=35664,FLOAT_VEC3=35665,FLOAT_VEC4=35666,INT=5124,INT_VEC2=35667,INT_VEC3=35668,INT_VEC4=35669,BOOL=35670,BOOL_VEC2=35671,BOOL_VEC3=35672,BOOL_VEC4=35673,FLOAT_MAT2=35674,FLOAT_MAT3=35675,FLOAT_MAT4=35676,SAMPLER_2D=35678,SAMPLER_CUBE=35680,SAMPLER_3D=35679,SAMPLER_2D_SHADOW=35682,FLOAT_MAT2x3=35685,FLOAT_MAT2x4=35686,FLOAT_MAT3x2=35687,FLOAT_MAT3x4=35688,FLOAT_MAT4x2=35689,FLOAT_MAT4x3=35690,SAMPLER_2D_ARRAY=36289,SAMPLER_2D_ARRAY_SHADOW=36292,SAMPLER_CUBE_SHADOW=36293,UNSIGNED_INT=5125,UNSIGNED_INT_VEC2=36294,UNSIGNED_INT_VEC3=36295,UNSIGNED_INT_VEC4=36296,INT_SAMPLER_2D=36298,INT_SAMPLER_3D=36299,INT_SAMPLER_CUBE=36300,INT_SAMPLER_2D_ARRAY=36303,UNSIGNED_INT_SAMPLER_2D=36306,UNSIGNED_INT_SAMPLER_3D=36307,UNSIGNED_INT_SAMPLER_CUBE=36308,UNSIGNED_INT_SAMPLER_2D_ARRAY=36311,TEXTURE_2D$1=3553,TEXTURE_CUBE_MAP=34067,TEXTURE_3D=32879,TEXTURE_2D_ARRAY=35866,typeMap={};function getBindPointForSamplerType(n,e){return typeMap[e].bindPoint}function floatSetter(n,e){return function(r){n.uniform1f(e,r)}}function floatArraySetter(n,e){return function(r){n.uniform1fv(e,r)}}function floatVec2Setter(n,e){return function(r){n.uniform2fv(e,r)}}function floatVec3Setter(n,e){return function(r){n.uniform3fv(e,r)}}function floatVec4Setter(n,e){return function(r){n.uniform4fv(e,r)}}function intSetter(n,e){return function(r){n.uniform1i(e,r)}}function intArraySetter(n,e){return function(r){n.uniform1iv(e,r)}}function intVec2Setter(n,e){return function(r){n.uniform2iv(e,r)}}function intVec3Setter(n,e){return function(r){n.uniform3iv(e,r)}}function intVec4Setter(n,e){return function(r){n.uniform4iv(e,r)}}function uintSetter(n,e){return function(r){n.uniform1ui(e,r)}}function uintArraySetter(n,e){return function(r){n.uniform1uiv(e,r)}}function uintVec2Setter(n,e){return function(r){n.uniform2uiv(e,r)}}function uintVec3Setter(n,e){return function(r){n.uniform3uiv(e,r)}}function uintVec4Setter(n,e){return function(r){n.uniform4uiv(e,r)}}function floatMat2Setter(n,e){return function(r){n.uniformMatrix2fv(e,!1,r)}}function floatMat3Setter(n,e){return function(r){n.uniformMatrix3fv(e,!1,r)}}function floatMat4Setter(n,e){return function(r){n.uniformMatrix4fv(e,!1,r)}}function floatMat23Setter(n,e){return function(r){n.uniformMatrix2x3fv(e,!1,r)}}function floatMat32Setter(n,e){return function(r){n.uniformMatrix3x2fv(e,!1,r)}}function floatMat24Setter(n,e){return function(r){n.uniformMatrix2x4fv(e,!1,r)}}function floatMat42Setter(n,e){return function(r){n.uniformMatrix4x2fv(e,!1,r)}}function floatMat34Setter(n,e){return function(r){n.uniformMatrix3x4fv(e,!1,r)}}function floatMat43Setter(n,e){return function(r){n.uniformMatrix4x3fv(e,!1,r)}}function samplerSetter(n,e,r,t){const a=getBindPointForSamplerType(n,e);return isWebGL2(n)?function(s){let u,d;!s||isTexture(n,s)?(u=s,d=null):(u=s.texture,d=s.sampler),n.uniform1i(t,r),n.activeTexture(TEXTURE0+r),n.bindTexture(a,u),n.bindSampler(r,d)}:function(s){n.uniform1i(t,r),n.activeTexture(TEXTURE0+r),n.bindTexture(a,s)}}function samplerArraySetter(n,e,r,t,a){const s=getBindPointForSamplerType(n,e),u=new Int32Array(a);for(let d=0;d<a;++d)u[d]=r+d;return isWebGL2(n)?function(d){n.uniform1iv(t,u),d.forEach(function(c,g){n.activeTexture(TEXTURE0+u[g]);let m,_;isTexture(n,c)?(m=c,_=null):(m=c.texture,_=c.sampler),n.bindSampler(r,_),n.bindTexture(s,m)})}:function(d){n.uniform1iv(t,u),d.forEach(function(c,g){n.activeTexture(TEXTURE0+u[g]),n.bindTexture(s,c)})}}typeMap[FLOAT]={Type:Float32Array,size:4,setter:floatSetter,arraySetter:floatArraySetter};typeMap[FLOAT_VEC2]={Type:Float32Array,size:8,setter:floatVec2Setter,cols:2};typeMap[FLOAT_VEC3]={Type:Float32Array,size:12,setter:floatVec3Setter,cols:3};typeMap[FLOAT_VEC4]={Type:Float32Array,size:16,setter:floatVec4Setter,cols:4};typeMap[INT]={Type:Int32Array,size:4,setter:intSetter,arraySetter:intArraySetter};typeMap[INT_VEC2]={Type:Int32Array,size:8,setter:intVec2Setter,cols:2};typeMap[INT_VEC3]={Type:Int32Array,size:12,setter:intVec3Setter,cols:3};typeMap[INT_VEC4]={Type:Int32Array,size:16,setter:intVec4Setter,cols:4};typeMap[UNSIGNED_INT]={Type:Uint32Array,size:4,setter:uintSetter,arraySetter:uintArraySetter};typeMap[UNSIGNED_INT_VEC2]={Type:Uint32Array,size:8,setter:uintVec2Setter,cols:2};typeMap[UNSIGNED_INT_VEC3]={Type:Uint32Array,size:12,setter:uintVec3Setter,cols:3};typeMap[UNSIGNED_INT_VEC4]={Type:Uint32Array,size:16,setter:uintVec4Setter,cols:4};typeMap[BOOL]={Type:Uint32Array,size:4,setter:intSetter,arraySetter:intArraySetter};typeMap[BOOL_VEC2]={Type:Uint32Array,size:8,setter:intVec2Setter,cols:2};typeMap[BOOL_VEC3]={Type:Uint32Array,size:12,setter:intVec3Setter,cols:3};typeMap[BOOL_VEC4]={Type:Uint32Array,size:16,setter:intVec4Setter,cols:4};typeMap[FLOAT_MAT2]={Type:Float32Array,size:32,setter:floatMat2Setter,rows:2,cols:2};typeMap[FLOAT_MAT3]={Type:Float32Array,size:48,setter:floatMat3Setter,rows:3,cols:3};typeMap[FLOAT_MAT4]={Type:Float32Array,size:64,setter:floatMat4Setter,rows:4,cols:4};typeMap[FLOAT_MAT2x3]={Type:Float32Array,size:32,setter:floatMat23Setter,rows:2,cols:3};typeMap[FLOAT_MAT2x4]={Type:Float32Array,size:32,setter:floatMat24Setter,rows:2,cols:4};typeMap[FLOAT_MAT3x2]={Type:Float32Array,size:48,setter:floatMat32Setter,rows:3,cols:2};typeMap[FLOAT_MAT3x4]={Type:Float32Array,size:48,setter:floatMat34Setter,rows:3,cols:4};typeMap[FLOAT_MAT4x2]={Type:Float32Array,size:64,setter:floatMat42Setter,rows:4,cols:2};typeMap[FLOAT_MAT4x3]={Type:Float32Array,size:64,setter:floatMat43Setter,rows:4,cols:3};typeMap[SAMPLER_2D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D$1};typeMap[SAMPLER_CUBE]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_CUBE_MAP};typeMap[SAMPLER_3D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_3D};typeMap[SAMPLER_2D_SHADOW]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D$1};typeMap[SAMPLER_2D_ARRAY]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D_ARRAY};typeMap[SAMPLER_2D_ARRAY_SHADOW]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D_ARRAY};typeMap[SAMPLER_CUBE_SHADOW]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_CUBE_MAP};typeMap[INT_SAMPLER_2D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D$1};typeMap[INT_SAMPLER_3D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_3D};typeMap[INT_SAMPLER_CUBE]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_CUBE_MAP};typeMap[INT_SAMPLER_2D_ARRAY]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D_ARRAY};typeMap[UNSIGNED_INT_SAMPLER_2D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D$1};typeMap[UNSIGNED_INT_SAMPLER_3D]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_3D};typeMap[UNSIGNED_INT_SAMPLER_CUBE]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_CUBE_MAP};typeMap[UNSIGNED_INT_SAMPLER_2D_ARRAY]={Type:null,size:0,setter:samplerSetter,arraySetter:samplerArraySetter,bindPoint:TEXTURE_2D_ARRAY};function floatAttribSetter(n,e){return function(r){if(r.value)switch(n.disableVertexAttribArray(e),r.value.length){case 4:n.vertexAttrib4fv(e,r.value);break;case 3:n.vertexAttrib3fv(e,r.value);break;case 2:n.vertexAttrib2fv(e,r.value);break;case 1:n.vertexAttrib1fv(e,r.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else n.bindBuffer(ARRAY_BUFFER,r.buffer),n.enableVertexAttribArray(e),n.vertexAttribPointer(e,r.numComponents||r.size,r.type||FLOAT,r.normalize||!1,r.stride||0,r.offset||0),n.vertexAttribDivisor&&n.vertexAttribDivisor(e,r.divisor||0)}}function intAttribSetter(n,e){return function(r){if(r.value)if(n.disableVertexAttribArray(e),r.value.length===4)n.vertexAttrib4iv(e,r.value);else throw new Error("The length of an integer constant value must be 4!");else n.bindBuffer(ARRAY_BUFFER,r.buffer),n.enableVertexAttribArray(e),n.vertexAttribIPointer(e,r.numComponents||r.size,r.type||INT,r.stride||0,r.offset||0),n.vertexAttribDivisor&&n.vertexAttribDivisor(e,r.divisor||0)}}function uintAttribSetter(n,e){return function(r){if(r.value)if(n.disableVertexAttribArray(e),r.value.length===4)n.vertexAttrib4uiv(e,r.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else n.bindBuffer(ARRAY_BUFFER,r.buffer),n.enableVertexAttribArray(e),n.vertexAttribIPointer(e,r.numComponents||r.size,r.type||UNSIGNED_INT,r.stride||0,r.offset||0),n.vertexAttribDivisor&&n.vertexAttribDivisor(e,r.divisor||0)}}function matAttribSetter(n,e,r){const t=r.size,a=r.count;return function(s){n.bindBuffer(ARRAY_BUFFER,s.buffer);const u=s.size||s.numComponents||t,d=u/a,c=s.type||FLOAT,m=typeMap[c].size*u,_=s.normalize||!1,b=s.offset||0,S=m/a;for(let C=0;C<a;++C)n.enableVertexAttribArray(e+C),n.vertexAttribPointer(e+C,d,c,_,m,b+S*C),n.vertexAttribDivisor&&n.vertexAttribDivisor(e+C,s.divisor||0)}}const attrTypeMap={};attrTypeMap[FLOAT]={size:4,setter:floatAttribSetter};attrTypeMap[FLOAT_VEC2]={size:8,setter:floatAttribSetter};attrTypeMap[FLOAT_VEC3]={size:12,setter:floatAttribSetter};attrTypeMap[FLOAT_VEC4]={size:16,setter:floatAttribSetter};attrTypeMap[INT]={size:4,setter:intAttribSetter};attrTypeMap[INT_VEC2]={size:8,setter:intAttribSetter};attrTypeMap[INT_VEC3]={size:12,setter:intAttribSetter};attrTypeMap[INT_VEC4]={size:16,setter:intAttribSetter};attrTypeMap[UNSIGNED_INT]={size:4,setter:uintAttribSetter};attrTypeMap[UNSIGNED_INT_VEC2]={size:8,setter:uintAttribSetter};attrTypeMap[UNSIGNED_INT_VEC3]={size:12,setter:uintAttribSetter};attrTypeMap[UNSIGNED_INT_VEC4]={size:16,setter:uintAttribSetter};attrTypeMap[BOOL]={size:4,setter:intAttribSetter};attrTypeMap[BOOL_VEC2]={size:8,setter:intAttribSetter};attrTypeMap[BOOL_VEC3]={size:12,setter:intAttribSetter};attrTypeMap[BOOL_VEC4]={size:16,setter:intAttribSetter};attrTypeMap[FLOAT_MAT2]={size:4,setter:matAttribSetter,count:2};attrTypeMap[FLOAT_MAT3]={size:9,setter:matAttribSetter,count:3};attrTypeMap[FLOAT_MAT4]={size:16,setter:matAttribSetter,count:4};const errorRE=/ERROR:\s*\d+:(\d+)/gi;function addLineNumbersWithError(n,e="",r=0){const t=[...e.matchAll(errorRE)],a=new Map(t.map((s,u)=>{const d=parseInt(s[1]),c=t[u+1],g=c?c.index:e.length,m=e.substring(s.index,g);return[d-1,m]}));return n.split(`
`).map((s,u)=>{const d=a.get(u);return`${u+1+r}: ${s}${d?`

^^^ ${d}`:""}`}).join(`
`)}const spaceRE=/^[ \t]*\n/;function prepShaderSource(n){let e=0;return spaceRE.test(n)&&(e=1,n=n.replace(spaceRE,"")),{lineOffset:e,shaderSource:n}}function reportError(n,e){return n.errorCallback(e),n.callback&&setTimeout(()=>{n.callback(`${e}
${n.errors.join(`
`)}`)}),null}function checkShaderStatus(n,e,r,t){if(t=t||error,!n.getShaderParameter(r,COMPILE_STATUS)){const s=n.getShaderInfoLog(r),{lineOffset:u,shaderSource:d}=prepShaderSource(n.getShaderSource(r)),c=`${addLineNumbersWithError(d,s,u)}
Error compiling ${glEnumToString(n,e)}: ${s}`;return t(c),c}return""}function getProgramOptions(n,e,r){let t,a,s;if(typeof e=="function"&&(r=e,e=void 0),typeof n=="function")r=n,n=void 0;else if(n&&!Array.isArray(n)){const g=n;r=g.errorCallback,n=g.attribLocations,t=g.transformFeedbackVaryings,a=g.transformFeedbackMode,s=g.callback}const u=r||error,d=[],c={errorCallback(g,...m){d.push(g),u(g,...m)},transformFeedbackVaryings:t,transformFeedbackMode:a,callback:s,errors:d};{let g={};Array.isArray(n)?n.forEach(function(m,_){g[m]=e?e[_]:_}):g=n||{},c.attribLocations=g}return c}const defaultShaderType=["VERTEX_SHADER","FRAGMENT_SHADER"];function getShaderTypeFromScriptType(n,e){if(e.indexOf("frag")>=0)return FRAGMENT_SHADER;if(e.indexOf("vert")>=0)return VERTEX_SHADER}function deleteProgramAndShaders(n,e,r){const t=n.getAttachedShaders(e);for(const a of t)r.has(a)&&n.deleteShader(a);n.deleteProgram(e)}const wait=(n=0)=>new Promise(e=>setTimeout(e,n));function createProgramNoCheck(n,e,r){const t=n.createProgram(),{attribLocations:a,transformFeedbackVaryings:s,transformFeedbackMode:u}=getProgramOptions(r);for(let d=0;d<e.length;++d){let c=e[d];if(typeof c=="string"){const g=getElementById(c),m=g?g.text:c;let _=n[defaultShaderType[d]];g&&g.type&&(_=getShaderTypeFromScriptType(n,g.type)||_),c=n.createShader(_),n.shaderSource(c,prepShaderSource(m).shaderSource),n.compileShader(c),n.attachShader(t,c)}}Object.entries(a).forEach(([d,c])=>n.bindAttribLocation(t,c,d));{let d=s;d&&(d.attribs&&(d=d.attribs),Array.isArray(d)||(d=Object.keys(d)),n.transformFeedbackVaryings(t,d,u||SEPARATE_ATTRIBS))}return n.linkProgram(t),t}function createProgram(n,e,r,t,a){const s=getProgramOptions(r,t,a),u=new Set(e),d=createProgramNoCheck(n,e,s);function c(g,m){const _=getProgramErrors(g,m,s.errorCallback);return _&&deleteProgramAndShaders(g,m,u),_}if(s.callback){waitForProgramLinkCompletionAsync(n,d).then(()=>{const g=c(n,d);s.callback(g,g?void 0:d)});return}return c(n,d)?void 0:d}async function waitForProgramLinkCompletionAsync(n,e){const r=n.getExtension("KHR_parallel_shader_compile"),t=r?(s,u)=>s.getProgramParameter(u,r.COMPLETION_STATUS_KHR):()=>!0;let a=0;do await wait(a),a=1e3/60;while(!t(n,e))}function getProgramErrors(n,e,r){if(r=r||error,!n.getProgramParameter(e,LINK_STATUS)){const a=n.getProgramInfoLog(e);r(`Error in program linking: ${a}`);const u=n.getAttachedShaders(e).map(d=>checkShaderStatus(n,n.getShaderParameter(d,n.SHADER_TYPE),d,r));return`${a}
${u.filter(d=>d).join(`
`)}`}}function createProgramFromSources(n,e,r,t,a){return createProgram(n,e,r,t,a)}function isBuiltIn(n){const e=n.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const tokenRE=/(\.|\[|]|\w+)/g,isDigit=n=>n>="0"&&n<="9";function addSetterToUniformTree(n,e,r,t){const a=n.split(tokenRE).filter(d=>d!=="");let s=0,u="";for(;;){const d=a[s++];u+=d;const c=isDigit(d[0]),g=c?parseInt(d):d;if(c&&(u+=a[s++]),s===a.length){r[g]=e;break}else{const _=a[s++],b=_==="[",S=r[g]||(b?[]:{});r[g]=S,r=S,t[u]=t[u]||function(C){return function(R){setUniformTree(C,R)}}(S),u+=_}}}function createUniformSetters(n,e){let r=0;function t(d,c,g){const m=c.name.endsWith("[0]"),_=c.type,b=typeMap[_];if(!b)throw new Error(`unknown type: 0x${_.toString(16)}`);let S;if(b.bindPoint){const C=r;r+=c.size,m?S=b.arraySetter(n,_,C,g,c.size):S=b.setter(n,_,C,g,c.size)}else b.arraySetter&&m?S=b.arraySetter(n,g):S=b.setter(n,g);return S.location=g,S}const a={},s={},u=n.getProgramParameter(e,ACTIVE_UNIFORMS);for(let d=0;d<u;++d){const c=n.getActiveUniform(e,d);if(isBuiltIn(c))continue;let g=c.name;g.endsWith("[0]")&&(g=g.substr(0,g.length-3));const m=n.getUniformLocation(e,c.name);if(m){const _=t(e,c,m);a[g]=_,addSetterToUniformTree(g,_,s,a)}}return a}function createTransformFeedbackInfo(n,e){const r={},t=n.getProgramParameter(e,TRANSFORM_FEEDBACK_VARYINGS);for(let a=0;a<t;++a){const s=n.getTransformFeedbackVarying(e,a);r[s.name]={index:a,type:s.type,size:s.size}}return r}function createUniformBlockSpecFromProgram(n,e){const r=n.getProgramParameter(e,ACTIVE_UNIFORMS),t=[],a=[];for(let d=0;d<r;++d){a.push(d),t.push({});const c=n.getActiveUniform(e,d);t[d].name=c.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(d){const c=d[0],g=d[1];n.getActiveUniforms(e,a,n[c]).forEach(function(m,_){t[_][g]=m})});const s={},u=n.getProgramParameter(e,ACTIVE_UNIFORM_BLOCKS);for(let d=0;d<u;++d){const c=n.getActiveUniformBlockName(e,d),g={index:n.getUniformBlockIndex(e,c),usedByVertexShader:n.getActiveUniformBlockParameter(e,d,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER),usedByFragmentShader:n.getActiveUniformBlockParameter(e,d,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER),size:n.getActiveUniformBlockParameter(e,d,UNIFORM_BLOCK_DATA_SIZE),uniformIndices:n.getActiveUniformBlockParameter(e,d,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES)};g.used=g.usedByVertexShader||g.usedByFragmentShader,s[c]=g}return{blockSpecs:s,uniformData:t}}function setUniformTree(n,e){for(const r in e){const t=n[r];typeof t=="function"?t(e[r]):setUniformTree(n[r],e[r])}}function setUniforms(n,...e){const r=n.uniformSetters||n,t=e.length;for(let a=0;a<t;++a){const s=e[a];if(Array.isArray(s)){const u=s.length;for(let d=0;d<u;++d)setUniforms(r,s[d])}else for(const u in s){const d=r[u];d&&d(s[u])}}}function createAttributeSetters(n,e){const r={},t=n.getProgramParameter(e,ACTIVE_ATTRIBUTES);for(let a=0;a<t;++a){const s=n.getActiveAttrib(e,a);if(isBuiltIn(s))continue;const u=n.getAttribLocation(e,s.name),d=attrTypeMap[s.type],c=d.setter(n,u,d);c.location=u,r[s.name]=c}return r}function setAttributes(n,e){for(const r in e){const t=n[r];t&&t(e[r])}}function setBuffersAndAttributes(n,e,r){r.vertexArrayObject?n.bindVertexArray(r.vertexArrayObject):(setAttributes(e.attribSetters||e,r.attribs),r.indices&&n.bindBuffer(ELEMENT_ARRAY_BUFFER$1,r.indices))}function createProgramInfoFromProgram(n,e){const r=createUniformSetters(n,e),t=createAttributeSetters(n,e),a={program:e,uniformSetters:r,attribSetters:t};return isWebGL2(n)&&(a.uniformBlockSpec=createUniformBlockSpecFromProgram(n,e),a.transformFeedbackInfo=createTransformFeedbackInfo(n,e)),a}const notIdRE=/\s|{|}|;/;function createProgramInfo(n,e,r,t,a){const s=getProgramOptions(r,t,a),u=[];if(e=e.map(function(g){if(!notIdRE.test(g)){const m=getElementById(g);if(m)g=m.text;else{const _=`no element with id: ${g}`;s.errorCallback(_),u.push(_)}}return g}),u.length)return reportError(s,"");const d=s.callback;d&&(s.callback=(g,m)=>{d(g,g?void 0:createProgramInfoFromProgram(n,m))});const c=createProgramFromSources(n,e,s);return c?createProgramInfoFromProgram(n,c):null}const TRIANGLES=4,UNSIGNED_SHORT=5123;function drawBufferInfo(n,e,r,t,a,s){r=r===void 0?TRIANGLES:r;const u=e.indices,d=e.elementType,c=t===void 0?e.numElements:t;a=a===void 0?0:a,d||u?s!==void 0?n.drawElementsInstanced(r,c,d===void 0?UNSIGNED_SHORT:e.elementType,a,s):n.drawElements(r,c,d===void 0?UNSIGNED_SHORT:e.elementType,a):s!==void 0?n.drawArraysInstanced(r,a,c,s):n.drawArrays(r,a,c)}const AHRSViz_svelte_svelte_type_style_lang="";function create_fragment$1(n){let e;return{c(){e=element("canvas"),attr(e,"id","AHRS-display"),attr(e,"class","svelte-1q05xdg")},m(r,t){insert(r,e,t),n[7](e)},p:noop$1,i:noop$1,o:noop$1,d(r){r&&detach(e),n[7](null)}}}function instance$1(n,e,r){let t;const a=`
attribute vec4 position;
void main() {
  gl_Position = position;
}`;let s=0,u=0,d=0,c,g,m;function _(S){r(1,s=S*.001),r(2,u=S*7e-4),r(3,d=S*3e-4),requestAnimationFrame(_)}requestAnimationFrame(_),onMount(()=>{if(r(4,c=t.getContext("webgl")),!c){console.warn("Unable to initialize WebGL. Your browser or machine may not support it.");return}r(5,g=createProgramInfo(c,[a,fragmentShader])),r(6,m=createBufferInfoFromArrays(c,{position:[-1,-1,0,1,-1,0,-1,1,0,-1,1,0,1,-1,0,1,1,0]}))});function b(S){binding_callbacks[S?"unshift":"push"](()=>{t=S,r(0,t)})}return n.$$.update=()=>{if(n.$$.dirty&126&&g&&c){c.viewport(0,0,c.canvas.width,c.canvas.height);const S={yaw:s,pitch:u,roll:d,resolution:[c.canvas.width,c.canvas.height]};c.useProgram(g.program),setBuffersAndAttributes(c,g,m),setUniforms(g,S),drawBufferInfo(c,m)}},[t,s,u,d,c,g,m,b]}class AHRSViz extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$1,create_fragment$1,safe_not_equal,{})}}const App_svelte_svelte_type_style_lang="";function create_fragment(n){let e,r,t,a,s,u,d,c,g,m,_,b,S,C,R,w,k,$,O,I,x,P,B;return r=new SvelteToast({props:{options:{reversed:!0,intro:{y:192},pausable:!0,classes:["toast-msg"]}}}),a=new HelpTooltips({}),u=new DialogSpawner({}),c=new LoadingIndicator({}),m=new VideoPlayer({}),b=new VideoPlayer({}),C=new OnscreenGamepads({}),w=new SensorDisplay({}),$=new AHRSViz({}),I=new TopBar({}),P=new RovSelector({}),{c(){e=element("main"),create_component(r.$$.fragment),t=space(),create_component(a.$$.fragment),s=space(),create_component(u.$$.fragment),d=space(),create_component(c.$$.fragment),g=space(),create_component(m.$$.fragment),_=space(),create_component(b.$$.fragment),S=space(),create_component(C.$$.fragment),R=space(),create_component(w.$$.fragment),k=space(),create_component($.$$.fragment),O=space(),create_component(I.$$.fragment),x=space(),create_component(P.$$.fragment),attr(e,"class","svelte-18jji2s")},m(j,W){insert(j,e,W),mount_component(r,e,null),append(e,t),mount_component(a,e,null),append(e,s),mount_component(u,e,null),append(e,d),mount_component(c,e,null),append(e,g),mount_component(m,e,null),append(e,_),mount_component(b,e,null),append(e,S),mount_component(C,e,null),append(e,R),mount_component(w,e,null),append(e,k),mount_component($,e,null),append(e,O),mount_component(I,e,null),append(e,x),mount_component(P,e,null),B=!0},p:noop$1,i(j){B||(transition_in(r.$$.fragment,j),transition_in(a.$$.fragment,j),transition_in(u.$$.fragment,j),transition_in(c.$$.fragment,j),transition_in(m.$$.fragment,j),transition_in(b.$$.fragment,j),transition_in(C.$$.fragment,j),transition_in(w.$$.fragment,j),transition_in($.$$.fragment,j),transition_in(I.$$.fragment,j),transition_in(P.$$.fragment,j),B=!0)},o(j){transition_out(r.$$.fragment,j),transition_out(a.$$.fragment,j),transition_out(u.$$.fragment,j),transition_out(c.$$.fragment,j),transition_out(m.$$.fragment,j),transition_out(b.$$.fragment,j),transition_out(C.$$.fragment,j),transition_out(w.$$.fragment,j),transition_out($.$$.fragment,j),transition_out(I.$$.fragment,j),transition_out(P.$$.fragment,j),B=!1},d(j){j&&detach(e),destroy_component(r),destroy_component(a),destroy_component(u),destroy_component(c),destroy_component(m),destroy_component(b),destroy_component(C),destroy_component(w),destroy_component($),destroy_component(I),destroy_component(P)}}}function instance(n,e,r){let t,a,s,u;component_subscribe(n,peerServerConnState,g=>r(0,t=g)),component_subscribe(n,rovDataChannelConnState,g=>r(1,a=g)),component_subscribe(n,rovPeerIdEndNumber,g=>r(2,s=g)),component_subscribe(n,appReady,g=>r(3,u=g));let d=new GamepadController(100);gamepadController.set(d);const c=getURLQueryStringVariable("debug")!=null;return c&&inspect({iframe:!1}),debugXstateMode.set(c),rovPeerIdEndNumber.set(parseInt(localStorage.getItem("rovPeerIdEndNumber")||"0")),ourPeerId.set(localStorage.getItem("ourPeerId")||null),ourPeerId.subscribe(g=>{localStorage.setItem("ourPeerId",g)}),onMount(()=>{console.log("App mounted0"),appReady.set(!0),showLoadingUi(LOADING_MESSAGE.internetCheck,null),runSiteInitMachine(()=>{hideLoadingUi(LOADING_MESSAGE.internetCheck);let g=MessageHandler;messageHandler.set(g);let m=new ConnectionManager(MessageHandler.handleRecivedMessage);connectionManager.set(m),g.setSendMessageCallback(m.sendMessageToCurrentRov.bind(m)),m.start()})}),onDestroy(()=>{console.log("cleaning up"),RovActions.stopPingLoop(),RovActions.disconnectFromRov(),connectionManager.get()&&connectionManager.get().cleanup(),d.gpadEmulator.cleanup()}),n.$$.update=()=>{n.$$.dirty&15&&u===!0&&(a==ConnectionState.connecting?(showLoadingUi(LOADING_MESSAGE.webrtcConnecting,"Searching for "+getROVName(s)),d.clearExternalEventListenerCallbacks(),RovActions.stopPingLoop()):a==ConnectionState.reconnecting?(showLoadingUi(LOADING_MESSAGE.webrtcReconnecting,null),d.clearExternalEventListenerCallbacks(),RovActions.stopPingLoop()):a==ConnectionState.disconnected?(d.clearExternalEventListenerCallbacks(),hideLoadingUi(LOADING_MESSAGE.webrtcReconnecting),hideLoadingUi(LOADING_MESSAGE.webrtcConnecting),RovActions.stopPingLoop()):a==ConnectionState.connected&&(showToastMessage("Connected to ROV!",1e3),d.setupGamepadEvents(250),hideLoadingUi(LOADING_MESSAGE.webrtcReconnecting),hideLoadingUi(LOADING_MESSAGE.webrtcConnecting),RovActions.startPingLoop()),t==ConnectionState.connecting?showLoadingUi(LOADING_MESSAGE.serverConnecting,null):t==ConnectionState.reconnecting?hideLoadingUi(LOADING_MESSAGE.serverReconnecting):(t==ConnectionState.disconnected||t==ConnectionState.connected)&&(hideLoadingUi(LOADING_MESSAGE.serverConnecting),hideLoadingUi(LOADING_MESSAGE.serverReconnecting)))},[t,a,s,u]}class App extends SvelteComponent{constructor(e){super(),init$1(this,e,instance,create_fragment,safe_not_equal,{})}}new App({target:document.getElementById("app")});window.addEventListener("pagehide",()=>{});window.addEventListener("pageshow",()=>{});
