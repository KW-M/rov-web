var we=Object.defineProperty;var $e=(r,e,a)=>e in r?we(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a;var H=(r,e,a)=>($e(r,typeof e!="symbol"?e+"":e,a),a);import"./modulepreload-polyfill-3cfb730f.js";const app="";function noop$1(){}const identity=r=>r;function assign$1(r,e){for(const a in e)r[a]=e[a];return r}function run(r){return r()}function blank_object(){return Object.create(null)}function run_all(r){r.forEach(run)}function is_function(r){return typeof r=="function"}function safe_not_equal(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function is_empty(r){return Object.keys(r).length===0}function subscribe(r,...e){if(r==null)return noop$1;const a=r.subscribe(...e);return a.unsubscribe?()=>a.unsubscribe():a}function component_subscribe(r,e,a){r.$$.on_destroy.push(subscribe(e,a))}function create_slot(r,e,a,t){if(r){const n=get_slot_context(r,e,a,t);return r[0](n)}}function get_slot_context(r,e,a,t){return r[1]&&t?assign$1(a.ctx.slice(),r[1](t(e))):a.ctx}function get_slot_changes(r,e,a,t){if(r[2]&&t){const n=r[2](t(a));if(e.dirty===void 0)return n;if(typeof n=="object"){const s=[],c=Math.max(e.dirty.length,n.length);for(let d=0;d<c;d+=1)s[d]=e.dirty[d]|n[d];return s}return e.dirty|n}return e.dirty}function update_slot_base(r,e,a,t,n,s){if(n){const c=get_slot_context(e,a,t,s);r.p(c,n)}}function get_all_dirty_from_scope(r){if(r.ctx.length>32){const e=[],a=r.ctx.length/32;for(let t=0;t<a;t++)e[t]=-1;return e}return-1}function exclude_internal_props(r){const e={};for(const a in r)a[0]!=="$"&&(e[a]=r[a]);return e}function compute_rest_props(r,e){const a={};e=new Set(e);for(const t in r)!e.has(t)&&t[0]!=="$"&&(a[t]=r[t]);return a}function null_to_empty(r){return r??""}function action_destroyer(r){return r&&is_function(r.destroy)?r.destroy:noop$1}function split_css_unit(r){const e=typeof r=="string"&&r.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[r,"px"]}const is_client=typeof window<"u";let now=is_client?()=>window.performance.now():()=>Date.now(),raf=is_client?r=>requestAnimationFrame(r):noop$1;const tasks=new Set;function run_tasks(r){tasks.forEach(e=>{e.c(r)||(tasks.delete(e),e.f())}),tasks.size!==0&&raf(run_tasks)}function loop(r){let e;return tasks.size===0&&raf(run_tasks),{promise:new Promise(a=>{tasks.add(e={c:r,f:a})}),abort(){tasks.delete(e)}}}const globals=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;"WeakMap"in globals;function append(r,e){r.appendChild(e)}function get_root_for_style(r){if(!r)return document;const e=r.getRootNode?r.getRootNode():r.ownerDocument;return e&&e.host?e:r.ownerDocument}function append_empty_stylesheet(r){const e=element("style");return append_stylesheet(get_root_for_style(r),e),e.sheet}function append_stylesheet(r,e){return append(r.head||r,e),e.sheet}function insert(r,e,a){r.insertBefore(e,a||null)}function detach(r){r.parentNode&&r.parentNode.removeChild(r)}function destroy_each(r,e){for(let a=0;a<r.length;a+=1)r[a]&&r[a].d(e)}function element(r){return document.createElement(r)}function svg_element(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function text(r){return document.createTextNode(r)}function space(){return text(" ")}function empty(){return text("")}function listen(r,e,a,t){return r.addEventListener(e,a,t),()=>r.removeEventListener(e,a,t)}function prevent_default(r){return function(e){return e.preventDefault(),r.call(this,e)}}function stop_propagation(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function attr(r,e,a){a==null?r.removeAttribute(e):r.getAttribute(e)!==a&&r.setAttribute(e,a)}const always_set_through_set_attribute=["width","height"];function set_attributes(r,e){const a=Object.getOwnPropertyDescriptors(r.__proto__);for(const t in e)e[t]==null?r.removeAttribute(t):t==="style"?r.style.cssText=e[t]:t==="__value"?r.value=r[t]=e[t]:a[t]&&a[t].set&&always_set_through_set_attribute.indexOf(t)===-1?r[t]=e[t]:attr(r,t,e[t])}function set_svg_attributes(r,e){for(const a in e)attr(r,a,e[a])}function children$1(r){return Array.from(r.childNodes)}function set_data(r,e){e=""+e,r.data!==e&&(r.data=e)}function set_input_value(r,e){r.value=e??""}function set_style(r,e,a,t){a==null?r.style.removeProperty(e):r.style.setProperty(e,a,t?"important":"")}function toggle_class(r,e,a){r.classList[a?"add":"remove"](e)}function custom_event(r,e,{bubbles:a=!1,cancelable:t=!1}={}){const n=document.createEvent("CustomEvent");return n.initCustomEvent(r,a,t,e),n}class HtmlTag{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,a,t=null){this.e||(this.is_svg?this.e=svg_element(a.nodeName):this.e=element(a.nodeType===11?"TEMPLATE":a.nodeName),this.t=a.tagName!=="TEMPLATE"?a:a.content,this.c(e)),this.i(t)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let a=0;a<this.n.length;a+=1)insert(this.t,this.n[a],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(detach)}}function construct_svelte_component(r,e){return new r(e)}const managed_styles=new Map;let active=0;function hash$2(r){let e=5381,a=r.length;for(;a--;)e=(e<<5)-e^r.charCodeAt(a);return e>>>0}function create_style_information(r,e){const a={stylesheet:append_empty_stylesheet(e),rules:{}};return managed_styles.set(r,a),a}function create_rule(r,e,a,t,n,s,c,d=0){const u=16.666/t;let _=`{
`;for(let R=0;R<=1;R+=u){const w=e+(a-e)*s(R);_+=R*100+`%{${c(w,1-w)}}
`}const m=_+`100% {${c(a,1-a)}}
}`,g=`__svelte_${hash$2(m)}_${d}`,b=get_root_for_style(r),{stylesheet:S,rules:C}=managed_styles.get(b)||create_style_information(b,r);C[g]||(C[g]=!0,S.insertRule(`@keyframes ${g} ${m}`,S.cssRules.length));const k=r.style.animation||"";return r.style.animation=`${k?`${k}, `:""}${g} ${t}ms linear ${n}ms 1 both`,active+=1,g}function delete_rule(r,e){const a=(r.style.animation||"").split(", "),t=a.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),n=a.length-t.length;n&&(r.style.animation=t.join(", "),active-=n,active||clear_rules())}function clear_rules(){raf(()=>{active||(managed_styles.forEach(r=>{const{ownerNode:e}=r.stylesheet;e&&detach(e)}),managed_styles.clear())})}function create_animation(r,e,a,t){if(!e)return noop$1;const n=r.getBoundingClientRect();if(e.left===n.left&&e.right===n.right&&e.top===n.top&&e.bottom===n.bottom)return noop$1;const{delay:s=0,duration:c=300,easing:d=identity,start:u=now()+s,end:_=u+c,tick:m=noop$1,css:g}=a(r,{from:e,to:n},t);let b=!0,S=!1,C;function k(){g&&(C=create_rule(r,0,1,c,s,d,g)),s||(S=!0)}function R(){g&&delete_rule(r,C),b=!1}return loop(w=>{if(!S&&w>=u&&(S=!0),S&&w>=_&&(m(1,0),R()),!b)return!1;if(S){const $=w-u,P=0+1*d($/c);m(P,1-P)}return!0}),k(),m(0,1),R}function fix_position(r){const e=getComputedStyle(r);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:a,height:t}=e,n=r.getBoundingClientRect();r.style.position="absolute",r.style.width=a,r.style.height=t,add_transform(r,n)}}function add_transform(r,e){const a=r.getBoundingClientRect();if(e.left!==a.left||e.top!==a.top){const t=getComputedStyle(r),n=t.transform==="none"?"":t.transform;r.style.transform=`${n} translate(${e.left-a.left}px, ${e.top-a.top}px)`}}let current_component;function set_current_component(r){current_component=r}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(r){get_current_component().$$.on_mount.push(r)}function onDestroy(r){get_current_component().$$.on_destroy.push(r)}function createEventDispatcher(){const r=get_current_component();return(e,a,{cancelable:t=!1}={})=>{const n=r.$$.callbacks[e];if(n){const s=custom_event(e,a,{cancelable:t});return n.slice().forEach(c=>{c.call(r,s)}),!s.defaultPrevented}return!0}}function setContext(r,e){return get_current_component().$$.context.set(r,e),e}function getContext(r){return get_current_component().$$.context.get(r)}function bubble(r,e){const a=r.$$.callbacks[e.type];a&&a.slice().forEach(t=>t.call(this,e))}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(r){render_callbacks.push(r)}function add_flush_callback(r){flush_callbacks.push(r)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(flushidx!==0)return;const r=current_component;do{try{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update$1(e.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const a=render_callbacks[e];seen_callbacks.has(a)||(seen_callbacks.add(a),a())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(r)}function update$1(r){if(r.fragment!==null){r.update(),run_all(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(add_render_callback)}}function flush_render_callbacks(r){const e=[],a=[];render_callbacks.forEach(t=>r.indexOf(t)===-1?e.push(t):a.push(t)),a.forEach(t=>t()),render_callbacks=e}let promise;function wait(){return promise||(promise=Promise.resolve(),promise.then(()=>{promise=null})),promise}function dispatch(r,e,a){r.dispatchEvent(custom_event(`${e?"intro":"outro"}${a}`))}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(r,e){r&&r.i&&(outroing.delete(r),r.i(e))}function transition_out(r,e,a,t){if(r&&r.o){if(outroing.has(r))return;outroing.add(r),outros.c.push(()=>{outroing.delete(r),t&&(a&&r.d(1),t())}),r.o(e)}else t&&t()}const null_transition={duration:0};function create_in_transition(r,e,a){const t={direction:"in"};let n=e(r,a,t),s=!1,c,d,u=0;function _(){c&&delete_rule(r,c)}function m(){const{delay:b=0,duration:S=300,easing:C=identity,tick:k=noop$1,css:R}=n||null_transition;R&&(c=create_rule(r,0,1,S,b,C,R,u++)),k(0,1);const w=now()+b,$=w+S;d&&d.abort(),s=!0,add_render_callback(()=>dispatch(r,!0,"start")),d=loop(P=>{if(s){if(P>=$)return k(1,0),dispatch(r,!0,"end"),_(),s=!1;if(P>=w){const O=C((P-w)/S);k(O,1-O)}}return s})}let g=!1;return{start(){g||(g=!0,delete_rule(r),is_function(n)?(n=n(t),wait().then(m)):m())},invalidate(){g=!1},end(){s&&(_(),s=!1)}}}function create_out_transition(r,e,a){const t={direction:"out"};let n=e(r,a,t),s=!0,c;const d=outros;d.r+=1;function u(){const{delay:_=0,duration:m=300,easing:g=identity,tick:b=noop$1,css:S}=n||null_transition;S&&(c=create_rule(r,1,0,m,_,g,S));const C=now()+_,k=C+m;add_render_callback(()=>dispatch(r,!1,"start")),loop(R=>{if(s){if(R>=k)return b(0,1),dispatch(r,!1,"end"),--d.r||run_all(d.c),!1;if(R>=C){const w=g((R-C)/m);b(1-w,w)}}return s})}return is_function(n)?wait().then(()=>{n=n(t),u()}):u(),{end(_){_&&n.tick&&n.tick(1,0),s&&(c&&delete_rule(r,c),s=!1)}}}function create_bidirectional_transition(r,e,a,t){const n={direction:"both"};let s=e(r,a,n),c=t?0:1,d=null,u=null,_=null;function m(){_&&delete_rule(r,_)}function g(S,C){const k=S.b-c;return C*=Math.abs(k),{a:c,b:S.b,d:k,duration:C,start:S.start,end:S.start+C,group:S.group}}function b(S){const{delay:C=0,duration:k=300,easing:R=identity,tick:w=noop$1,css:$}=s||null_transition,P={start:now()+C,b:S};S||(P.group=outros,outros.r+=1),d||u?u=P:($&&(m(),_=create_rule(r,c,S,k,C,R,$)),S&&w(0,1),d=g(P,k),add_render_callback(()=>dispatch(r,S,"start")),loop(O=>{if(u&&O>u.start&&(d=g(u,k),u=null,dispatch(r,d.b,"start"),$&&(m(),_=create_rule(r,c,d.b,d.duration,0,R,s.css))),d){if(O>=d.end)w(c=d.b,1-c),dispatch(r,d.b,"end"),u||(d.b?m():--d.group.r||run_all(d.group.c)),d=null;else if(O>=d.start){const B=O-d.start;c=d.a+d.d*R(B/d.duration),w(c,1-c)}}return!!(d||u)}))}return{run(S){is_function(s)?wait().then(()=>{s=s(n),b(S)}):b(S)},end(){m(),d=u=null}}}function outro_and_destroy_block(r,e){transition_out(r,1,1,()=>{e.delete(r.key)})}function fix_and_outro_and_destroy_block(r,e){r.f(),outro_and_destroy_block(r,e)}function update_keyed_each(r,e,a,t,n,s,c,d,u,_,m,g){let b=r.length,S=s.length,C=b;const k={};for(;C--;)k[r[C].key]=C;const R=[],w=new Map,$=new Map,P=[];for(C=S;C--;){const j=g(n,s,C),U=a(j);let q=c.get(U);q?t&&P.push(()=>q.p(j,e)):(q=_(U,j),q.c()),w.set(U,R[C]=q),U in k&&$.set(U,Math.abs(C-k[U]))}const O=new Set,B=new Set;function N(j){transition_in(j,1),j.m(d,m),c.set(j.key,j),m=j.first,S--}for(;b&&S;){const j=R[S-1],U=r[b-1],q=j.key,V=U.key;j===U?(m=j.first,b--,S--):w.has(V)?!c.has(q)||O.has(q)?N(j):B.has(V)?b--:$.get(q)>$.get(V)?(B.add(q),N(j)):(O.add(V),b--):(u(U,c),b--)}for(;b--;){const j=r[b];w.has(j.key)||u(j,c)}for(;S;)N(R[S-1]);return run_all(P),R}function get_spread_update(r,e){const a={},t={},n={$$scope:1};let s=r.length;for(;s--;){const c=r[s],d=e[s];if(d){for(const u in c)u in d||(t[u]=1);for(const u in d)n[u]||(a[u]=d[u],n[u]=1);r[s]=d}else for(const u in c)n[u]=1}for(const c in t)c in a||(a[c]=void 0);return a}function get_spread_object(r){return typeof r=="object"&&r!==null?r:{}}const _boolean_attributes=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[..._boolean_attributes];function bind(r,e,a){const t=r.$$.props[e];t!==void 0&&(r.$$.bound[t]=a,a(r.$$.ctx[t]))}function create_component(r){r&&r.c()}function mount_component(r,e,a,t){const{fragment:n,after_update:s}=r.$$;n&&n.m(e,a),t||add_render_callback(()=>{const c=r.$$.on_mount.map(run).filter(is_function);r.$$.on_destroy?r.$$.on_destroy.push(...c):run_all(c),r.$$.on_mount=[]}),s.forEach(add_render_callback)}function destroy_component(r,e){const a=r.$$;a.fragment!==null&&(flush_render_callbacks(a.after_update),run_all(a.on_destroy),a.fragment&&a.fragment.d(e),a.on_destroy=a.fragment=null,a.ctx=[])}function make_dirty(r,e){r.$$.dirty[0]===-1&&(dirty_components.push(r),schedule_update(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function init$1(r,e,a,t,n,s,c,d=[-1]){const u=current_component;set_current_component(r);const _=r.$$={fragment:null,ctx:[],props:s,update:noop$1,not_equal:n,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:blank_object(),dirty:d,skip_bound:!1,root:e.target||u.$$.root};c&&c(_.root);let m=!1;if(_.ctx=a?a(r,e.props||{},(g,b,...S)=>{const C=S.length?S[0]:b;return _.ctx&&n(_.ctx[g],_.ctx[g]=C)&&(!_.skip_bound&&_.bound[g]&&_.bound[g](C),m&&make_dirty(r,g)),b}):[],_.update(),m=!0,run_all(_.before_update),_.fragment=t?t(_.ctx):!1,e.target){if(e.hydrate){const g=children$1(e.target);_.fragment&&_.fragment.l(g),g.forEach(detach)}else _.fragment&&_.fragment.c();e.intro&&transition_in(r.$$.fragment),mount_component(r,e.target,e.anchor,e.customElement),flush()}set_current_component(u)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop$1}$on(e,a){if(!is_function(a))return noop$1;const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(a),()=>{const n=t.indexOf(a);n!==-1&&t.splice(n,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign=function(){return __assign=Object.assign||function(e){for(var a,t=1,n=arguments.length;t<n;t++){a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},__assign.apply(this,arguments)};function __rest(r,e){var a={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.indexOf(t)<0&&(a[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(r);n<t.length;n++)e.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(r,t[n])&&(a[t[n]]=r[t[n]]);return a}function __values(r){var e=typeof Symbol=="function"&&Symbol.iterator,a=e&&r[e],t=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(r,e){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var t=a.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=t.next()).done;)s.push(n.value)}catch(d){c={error:d}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(c)throw c.error}}return s}function __spreadArray(r,e,a){if(a||arguments.length===2)for(var t=0,n=e.length,s;t<n;t++)(s||!(t in e))&&(s||(s=Array.prototype.slice.call(e,0,t)),s[t]=e[t]);return r.concat(s||Array.prototype.slice.call(e))}var ActionTypes;(function(r){r.Start="xstate.start",r.Stop="xstate.stop",r.Raise="xstate.raise",r.Send="xstate.send",r.Cancel="xstate.cancel",r.NullEvent="",r.Assign="xstate.assign",r.After="xstate.after",r.DoneState="done.state",r.DoneInvoke="done.invoke",r.Log="xstate.log",r.Init="xstate.init",r.Invoke="xstate.invoke",r.ErrorExecution="error.execution",r.ErrorCommunication="error.communication",r.ErrorPlatform="error.platform",r.ErrorCustom="xstate.error",r.Update="xstate.update",r.Pure="xstate.pure",r.Choose="xstate.choose"})(ActionTypes||(ActionTypes={}));var SpecialTargets;(function(r){r.Parent="#_parent",r.Internal="#_internal"})(SpecialTargets||(SpecialTargets={}));var start$2=ActionTypes.Start,stop$1=ActionTypes.Stop,raise$1=ActionTypes.Raise,send$1=ActionTypes.Send,cancel$1=ActionTypes.Cancel,nullEvent=ActionTypes.NullEvent,assign=ActionTypes.Assign;ActionTypes.After;ActionTypes.DoneState;var log$1=ActionTypes.Log,init=ActionTypes.Init,invoke=ActionTypes.Invoke;ActionTypes.ErrorExecution;var errorPlatform=ActionTypes.ErrorPlatform,error$1=ActionTypes.ErrorCustom,update=ActionTypes.Update,choose=ActionTypes.Choose,pure=ActionTypes.Pure,STATE_DELIMITER=".",EMPTY_ACTIVITY_MAP={},DEFAULT_GUARD_TYPE="xstate.guard",TARGETLESS_KEY="",_a;function matchesState(r,e,a){a===void 0&&(a=STATE_DELIMITER);var t=toStateValue(r,a),n=toStateValue(e,a);return isString(n)?isString(t)?n===t:!1:isString(t)?t in n:Object.keys(t).every(function(s){return s in n?matchesState(t[s],n[s]):!1})}function getEventType(r){try{return isString(r)||typeof r=="number"?"".concat(r):r.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function toStatePath(r,e){try{return isArray(r)?r:r.toString().split(e)}catch{throw new Error("'".concat(r,"' is not a valid state path."))}}function isStateLike(r){return typeof r=="object"&&"value"in r&&"context"in r&&"event"in r&&"_event"in r}function toStateValue(r,e){if(isStateLike(r))return r.value;if(isArray(r))return pathToStateValue(r);if(typeof r!="string")return r;var a=toStatePath(r,e);return pathToStateValue(a)}function pathToStateValue(r){if(r.length===1)return r[0];for(var e={},a=e,t=0;t<r.length-1;t++)t===r.length-2?a[r[t]]=r[t+1]:(a[r[t]]={},a=a[r[t]]);return e}function mapValues(r,e){for(var a={},t=Object.keys(r),n=0;n<t.length;n++){var s=t[n];a[s]=e(r[s],s,r,n)}return a}function mapFilterValues(r,e,a){var t,n,s={};try{for(var c=__values(Object.keys(r)),d=c.next();!d.done;d=c.next()){var u=d.value,_=r[u];a(_)&&(s[u]=e(_,u,r))}}catch(m){t={error:m}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return s}var path=function(r){return function(e){var a,t,n=e;try{for(var s=__values(r),c=s.next();!c.done;c=s.next()){var d=c.value;n=n[d]}}catch(u){a={error:u}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(a)throw a.error}}return n}};function nestedPath(r,e){return function(a){var t,n,s=a;try{for(var c=__values(r),d=c.next();!d.done;d=c.next()){var u=d.value;s=s[e][u]}}catch(_){t={error:_}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return s}}function toStatePaths(r){if(!r)return[[]];if(isString(r))return[[r]];var e=flatten(Object.keys(r).map(function(a){var t=r[a];return typeof t!="string"&&(!t||!Object.keys(t).length)?[[a]]:toStatePaths(r[a]).map(function(n){return[a].concat(n)})}));return e}function flatten(r){var e;return(e=[]).concat.apply(e,__spreadArray([],__read(r),!1))}function toArrayStrict(r){return isArray(r)?r:[r]}function toArray(r){return r===void 0?[]:toArrayStrict(r)}function mapContext(r,e,a){var t,n;if(isFunction(r))return r(e,a.data);var s={};try{for(var c=__values(Object.keys(r)),d=c.next();!d.done;d=c.next()){var u=d.value,_=r[u];isFunction(_)?s[u]=_(e,a.data):s[u]=_}}catch(m){t={error:m}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return s}function isBuiltInEvent(r){return/^(done|error)\./.test(r)}function isPromiseLike(r){return!!(r instanceof Promise||r!==null&&(isFunction(r)||typeof r=="object")&&isFunction(r.then))}function isBehavior(r){return r!==null&&typeof r=="object"&&"transition"in r&&typeof r.transition=="function"}function partition(r,e){var a,t,n=__read([[],[]],2),s=n[0],c=n[1];try{for(var d=__values(r),u=d.next();!u.done;u=d.next()){var _=u.value;e(_)?s.push(_):c.push(_)}}catch(m){a={error:m}}finally{try{u&&!u.done&&(t=d.return)&&t.call(d)}finally{if(a)throw a.error}}return[s,c]}function updateHistoryStates(r,e){return mapValues(r.states,function(a,t){if(a){var n=(isString(e)?void 0:e[t])||(a?a.current:void 0);if(n)return{current:n,states:updateHistoryStates(a,n)}}})}function updateHistoryValue(r,e){return{current:e,states:updateHistoryStates(r,e)}}function updateContext(r,e,a,t){var n=r&&a.reduce(function(s,c){var d,u,_=c.assignment,m={state:t,action:c,_event:e},g={};if(isFunction(_))g=_(s,e.data,m);else try{for(var b=__values(Object.keys(_)),S=b.next();!S.done;S=b.next()){var C=S.value,k=_[C];g[C]=isFunction(k)?k(s,e.data,m):k}}catch(R){d={error:R}}finally{try{S&&!S.done&&(u=b.return)&&u.call(b)}finally{if(d)throw d.error}}return Object.assign({},s,g)},r);return n}var warn=function(){};function isArray(r){return Array.isArray(r)}function isFunction(r){return typeof r=="function"}function isString(r){return typeof r=="string"}function toGuard(r,e){if(r)return isString(r)?{type:DEFAULT_GUARD_TYPE,name:r,predicate:e?e[r]:void 0}:isFunction(r)?{type:DEFAULT_GUARD_TYPE,name:r.name,predicate:r}:r}function isObservable(r){try{return"subscribe"in r&&isFunction(r.subscribe)}catch{return!1}}var symbolObservable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();_a={},_a[symbolObservable]=function(){return this},_a[Symbol.observable]=function(){return this};function isMachine(r){return!!r&&"__xstatenode"in r}function isActor$1(r){return!!r&&typeof r.send=="function"}function toEventObject(r,e){return isString(r)||typeof r=="number"?__assign({type:r},e):r}function toSCXMLEvent(r,e){if(!isString(r)&&"$$type"in r&&r.$$type==="scxml")return r;var a=toEventObject(r);return __assign({name:a.type,data:a,$$type:"scxml",type:"external"},e)}function toTransitionConfigArray(r,e){var a=toArrayStrict(e).map(function(t){return typeof t>"u"||typeof t=="string"||isMachine(t)?{target:t,event:r}:__assign(__assign({},t),{event:r})});return a}function normalizeTarget(r){if(!(r===void 0||r===TARGETLESS_KEY))return toArray(r)}function evaluateGuard(r,e,a,t,n){var s=r.options.guards,c={state:n,cond:e,_event:t};if(e.type===DEFAULT_GUARD_TYPE)return((s==null?void 0:s[e.name])||e.predicate)(a,t.data,c);var d=s==null?void 0:s[e.type];if(!d)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(r.id,"'."));return d(a,t.data,c)}function toInvokeSource$1(r){return typeof r=="string"?{type:r}:r}function toObserver(r,e,a){var t=function(){},n=typeof r=="object",s=n?r:null;return{next:((n?r.next:r)||t).bind(s),error:((n?r.error:e)||t).bind(s),complete:((n?r.complete:a)||t).bind(s)}}function createInvokeId(r,e){return"".concat(r,":invocation[").concat(e,"]")}function isRaisableAction(r){return(r.type===raise$1||r.type===send$1&&r.to===SpecialTargets.Internal)&&typeof r.delay!="number"}var initEvent=toSCXMLEvent({type:init});function getActionFunction(r,e){return e&&e[r]||void 0}function toActionObject(r,e){var a;if(isString(r)||typeof r=="number"){var t=getActionFunction(r,e);isFunction(t)?a={type:r,exec:t}:t?a=t:a={type:r,exec:void 0}}else if(isFunction(r))a={type:r.name||r.toString(),exec:r};else{var t=getActionFunction(r.type,e);if(isFunction(t))a=__assign(__assign({},r),{exec:t});else if(t){var n=t.type||r.type;a=__assign(__assign(__assign({},t),r),{type:n})}else a=r}return a}var toActionObjects=function(r,e){if(!r)return[];var a=isArray(r)?r:[r];return a.map(function(t){return toActionObject(t,e)})};function toActivityDefinition(r){var e=toActionObject(r);return __assign(__assign({id:isString(r)?r:e.id},e),{type:e.type})}function raise(r,e){return{type:raise$1,event:typeof r=="function"?r:toEventObject(r),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function resolveRaise(r,e,a,t){var n={_event:a},s=toSCXMLEvent(isFunction(r.event)?r.event(e,a.data,n):r.event),c;if(isString(r.delay)){var d=t&&t[r.delay];c=isFunction(d)?d(e,a.data,n):d}else c=isFunction(r.delay)?r.delay(e,a.data,n):r.delay;return __assign(__assign({},r),{type:raise$1,_event:s,delay:c})}function send(r,e){return{to:e?e.to:void 0,type:send$1,event:isFunction(r)?r:toEventObject(r),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:isFunction(r)?r.name:getEventType(r)}}function resolveSend(r,e,a,t){var n={_event:a},s=toSCXMLEvent(isFunction(r.event)?r.event(e,a.data,n):r.event),c;if(isString(r.delay)){var d=t&&t[r.delay];c=isFunction(d)?d(e,a.data,n):d}else c=isFunction(r.delay)?r.delay(e,a.data,n):r.delay;var u=isFunction(r.to)?r.to(e,a.data,n):r.to;return __assign(__assign({},r),{to:u,_event:s,event:s.data,delay:c})}var resolveLog=function(r,e,a){return __assign(__assign({},r),{value:isString(r.expr)?r.expr:r.expr(e,a.data,{_event:a})})},cancel=function(r){return{type:cancel$1,sendId:r}};function start$1(r){var e=toActivityDefinition(r);return{type:ActionTypes.Start,activity:e,exec:void 0}}function stop(r){var e=isFunction(r)?r:toActivityDefinition(r);return{type:ActionTypes.Stop,activity:e,exec:void 0}}function resolveStop(r,e,a){var t=isFunction(r.activity)?r.activity(e,a.data):r.activity,n=typeof t=="string"?{id:t}:t,s={type:ActionTypes.Stop,activity:n};return s}function after(r,e){var a=e?"#".concat(e):"";return"".concat(ActionTypes.After,"(").concat(r,")").concat(a)}function done(r,e){var a="".concat(ActionTypes.DoneState,".").concat(r),t={type:a,data:e};return t.toString=function(){return a},t}function doneInvoke(r,e){var a="".concat(ActionTypes.DoneInvoke,".").concat(r),t={type:a,data:e};return t.toString=function(){return a},t}function error(r,e){var a="".concat(ActionTypes.ErrorPlatform,".").concat(r),t={type:a,data:e};return t.toString=function(){return a},t}var pluckAssigns=function(r){var e,a,t=[];try{for(var n=__values(r),s=n.next();!s.done;s=n.next())for(var c=s.value,d=0;d<c.actions.length;){if(c.actions[d].type===assign){t.push(c.actions[d]),c.actions.splice(d,1);continue}d++}}catch(u){e={error:u}}finally{try{s&&!s.done&&(a=n.return)&&a.call(n)}finally{if(e)throw e.error}}return t};function resolveActions(r,e,a,t,n,s,c){c===void 0&&(c=!1);var d=c?[]:pluckAssigns(n),u=d.length?updateContext(a,t,d,e):a,_=c?[a]:void 0,m=[];function g(C,k){var R;switch(k.type){case raise$1:{var w=resolveRaise(k,u,t,r.options.delays);return s&&typeof w.delay=="number"&&s(w,u,t),w}case send$1:var $=resolveSend(k,u,t,r.options.delays);return s&&$.to!==SpecialTargets.Internal&&(C==="entry"?m.push($):s($,u,t)),$;case log$1:{var P=resolveLog(k,u,t);return s==null||s(P,u,t),P}case choose:{var O=k,B=(R=O.conds.find(function(ee){var Q=toGuard(ee.cond,r.options.guards);return!Q||evaluateGuard(r,Q,u,t,s?void 0:e)}))===null||R===void 0?void 0:R.actions;if(!B)return[];var N=__read(resolveActions(r,e,u,t,[{type:C,actions:toActionObjects(toArray(B),r.options.actions)}],s,c),2),j=N[0],U=N[1];return u=U,_==null||_.push(u),j}case pure:{var B=k.get(u,t.data);if(!B)return[];var q=__read(resolveActions(r,e,u,t,[{type:C,actions:toActionObjects(toArray(B),r.options.actions)}],s,c),2),V=q[0],W=q[1];return u=W,_==null||_.push(u),V}case stop$1:{var P=resolveStop(k,u,t);return s==null||s(P,a,t),P}case assign:{u=updateContext(u,t,[k],s?void 0:e),_==null||_.push(u);break}default:var x=toActionObject(k,r.options.actions),J=x.exec;if(s)s(x,u,t);else if(J&&_){var X=_.length-1,Z=__assign(__assign({},x),{exec:function(ee){for(var Q=[],z=1;z<arguments.length;z++)Q[z-1]=arguments[z];J.apply(void 0,__spreadArray([_[X]],__read(Q),!1))}});x=Z}return x}}function b(C){var k,R,w=[];try{for(var $=__values(C.actions),P=$.next();!P.done;P=$.next()){var O=P.value,B=g(C.type,O);B&&(w=w.concat(B))}}catch(N){k={error:N}}finally{try{P&&!P.done&&(R=$.return)&&R.call($)}finally{if(k)throw k.error}}return m.forEach(function(N){s(N,u,t)}),m.length=0,w}var S=flatten(n.map(b));return[S,u]}var serviceStack=[],provide=function(r,e){serviceStack.push(r);var a=e(r);return serviceStack.pop(),a};function createNullActor(r){var e;return e={id:r,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:r}}},e[symbolObservable]=function(){return this},e}function createInvocableActor(r,e,a,t){var n,s=toInvokeSource$1(r.src),c=(n=e==null?void 0:e.options.services)===null||n===void 0?void 0:n[s.type],d=r.data?mapContext(r.data,a,t):void 0,u=c?createDeferredActor(c,r.id,d):createNullActor(r.id);return u.meta=r,u}function createDeferredActor(r,e,a){var t=createNullActor(e);if(t.deferred=!0,isMachine(r)){var n=t.state=provide(void 0,function(){return(a?r.withContext(a):r).initialState});t.getSnapshot=function(){return n}}return t}function isActor(r){try{return typeof r.send=="function"}catch{return!1}}function isSpawnedActor(r){return isActor(r)&&"id"in r}function toActorRef(r){var e;return __assign((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[symbolObservable]=function(){return this},e),r)}var isLeafNode=function(r){return r.type==="atomic"||r.type==="final"};function getAllChildren(r){return Object.keys(r.states).map(function(e){return r.states[e]})}function getChildren(r){return getAllChildren(r).filter(function(e){return e.type!=="history"})}function getAllStateNodes(r){var e=[r];return isLeafNode(r)?e:e.concat(flatten(getChildren(r).map(getAllStateNodes)))}function getConfiguration(r,e){var a,t,n,s,c,d,u,_,m=new Set(r),g=getAdjList(m),b=new Set(e);try{for(var S=__values(b),C=S.next();!C.done;C=S.next())for(var k=C.value,R=k.parent;R&&!b.has(R);)b.add(R),R=R.parent}catch(q){a={error:q}}finally{try{C&&!C.done&&(t=S.return)&&t.call(S)}finally{if(a)throw a.error}}var w=getAdjList(b);try{for(var $=__values(b),P=$.next();!P.done;P=$.next()){var k=P.value;if(k.type==="compound"&&(!w.get(k)||!w.get(k).length))g.get(k)?g.get(k).forEach(function(V){return b.add(V)}):k.initialStateNodes.forEach(function(V){return b.add(V)});else if(k.type==="parallel")try{for(var O=(c=void 0,__values(getChildren(k))),B=O.next();!B.done;B=O.next()){var N=B.value;b.has(N)||(b.add(N),g.get(N)?g.get(N).forEach(function(V){return b.add(V)}):N.initialStateNodes.forEach(function(V){return b.add(V)}))}}catch(V){c={error:V}}finally{try{B&&!B.done&&(d=O.return)&&d.call(O)}finally{if(c)throw c.error}}}}catch(q){n={error:q}}finally{try{P&&!P.done&&(s=$.return)&&s.call($)}finally{if(n)throw n.error}}try{for(var j=__values(b),U=j.next();!U.done;U=j.next())for(var k=U.value,R=k.parent;R&&!b.has(R);)b.add(R),R=R.parent}catch(q){u={error:q}}finally{try{U&&!U.done&&(_=j.return)&&_.call(j)}finally{if(u)throw u.error}}return b}function getValueFromAdj(r,e){var a=e.get(r);if(!a)return{};if(r.type==="compound"){var t=a[0];if(t){if(isLeafNode(t))return t.key}else return{}}var n={};return a.forEach(function(s){n[s.key]=getValueFromAdj(s,e)}),n}function getAdjList(r){var e,a,t=new Map;try{for(var n=__values(r),s=n.next();!s.done;s=n.next()){var c=s.value;t.has(c)||t.set(c,[]),c.parent&&(t.has(c.parent)||t.set(c.parent,[]),t.get(c.parent).push(c))}}catch(d){e={error:d}}finally{try{s&&!s.done&&(a=n.return)&&a.call(n)}finally{if(e)throw e.error}}return t}function getValue(r,e){var a=getConfiguration([r],e);return getValueFromAdj(r,getAdjList(a))}function has(r,e){return Array.isArray(r)?r.some(function(a){return a===e}):r instanceof Set?r.has(e):!1}function nextEvents(r){return __spreadArray([],__read(new Set(flatten(__spreadArray([],__read(r.map(function(e){return e.ownEvents})),!1)))),!1)}function isInFinalState(r,e){return e.type==="compound"?getChildren(e).some(function(a){return a.type==="final"&&has(r,a)}):e.type==="parallel"?getChildren(e).every(function(a){return isInFinalState(r,a)}):!1}function getMeta(r){return r===void 0&&(r=[]),r.reduce(function(e,a){return a.meta!==void 0&&(e[a.id]=a.meta),e},{})}function getTagsFromConfiguration(r){return new Set(flatten(r.map(function(e){return e.tags})))}function stateValuesEqual(r,e){if(r===e)return!0;if(r===void 0||e===void 0)return!1;if(isString(r)||isString(e))return r===e;var a=Object.keys(r),t=Object.keys(e);return a.length===t.length&&a.every(function(n){return stateValuesEqual(r[n],e[n])})}function isStateConfig(r){return typeof r!="object"||r===null?!1:"value"in r&&"_event"in r}function bindActionToState(r,e){var a=r.exec,t=__assign(__assign({},r),{exec:a!==void 0?function(){return a(e.context,e.event,{action:r,state:e,_event:e._event})}:void 0});return t}var State$2=function(){function r(e){var a=this,t;this.actions=[],this.activities=EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||EMPTY_ACTIVITY_MAP,this.meta=getMeta(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(t=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&t!==void 0?t:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return nextEvents(a.configuration)}})}return r.from=function(e,a){if(e instanceof r)return e.context!==a?new r({value:e.value,context:a,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var t=initEvent;return new r({value:e,context:a,_event:t,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},r.create=function(e){return new r(e)},r.inert=function(e,a){if(e instanceof r){if(!e.actions.length)return e;var t=initEvent;return new r({value:e.value,context:a,_event:t,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return r.from(e,a)},r.prototype.toStrings=function(e,a){var t=this;if(e===void 0&&(e=this.value),a===void 0&&(a="."),isString(e))return[e];var n=Object.keys(e);return n.concat.apply(n,__spreadArray([],__read(n.map(function(s){return t.toStrings(e[s],a).map(function(c){return s+a+c})})),!1))},r.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var a=e.tags;e.machine;var t=__rest(e,["configuration","transitions","tags","machine"]);return __assign(__assign({},t),{tags:Array.from(a)})},r.prototype.matches=function(e){return matchesState(e,this.value)},r.prototype.hasTag=function(e){return this.tags.has(e)},r.prototype.can=function(e){var a;warn(!!this.machine);var t=(a=this.machine)===null||a===void 0?void 0:a.getTransitionData(this,e);return!!(t!=null&&t.transitions.length)&&t.transitions.some(function(n){return n.target!==void 0||n.actions.length})},r}(),defaultOptions={deferEvents:!1},Scheduler=function(){function r(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=__assign(__assign({},defaultOptions),e)}return r.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},r.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},r.prototype.clear=function(){this.queue=[]},r.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},r.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(a){throw this.clear(),a}finally{this.processingEvent=!1}},r}(),children=new Map,sessionIdIndex=0,registry={bookId:function(){return"x:".concat(sessionIdIndex++)},register:function(r,e){return children.set(r,e),r},get:function(r){return children.get(r)},free:function(r){children.delete(r)}};function getGlobal(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function getDevTools(){var r=getGlobal();if(r&&"__xstate__"in r)return r.__xstate__}function registerService(r){if(getGlobal()){var e=getDevTools();e&&e.register(r)}}function spawnBehavior(r,e){e===void 0&&(e={});var a=r.initialState,t=new Set,n=[],s=!1,c=function(){if(!s){for(s=!0;n.length>0;){var _=n.shift();a=r.transition(a,_,u),t.forEach(function(m){return m.next(a)})}s=!1}},d=toActorRef({id:e.id,send:function(_){n.push(_),c()},getSnapshot:function(){return a},subscribe:function(_,m,g){var b=toObserver(_,m,g);return t.add(b),b.next(a),{unsubscribe:function(){t.delete(b)}}}}),u={parent:e.parent,self:d,id:e.id||"anonymous",observers:t};return a=r.start?r.start(u):a,d}var DEFAULT_SPAWN_OPTIONS={sync:!1,autoForward:!1},InterpreterStatus;(function(r){r[r.NotStarted=0]="NotStarted",r[r.Running=1]="Running",r[r.Stopped=2]="Stopped"})(InterpreterStatus||(InterpreterStatus={}));var Interpreter=function(){function r(e,a){a===void 0&&(a=r.defaultOptions);var t=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(m,g){if(isArray(m))return t.batch(m),t.state;var b=toSCXMLEvent(toEventObject(m,g));if(t.status===InterpreterStatus.Stopped)return t.state;if(t.status!==InterpreterStatus.Running&&!t.options.deferEvents)throw new Error('Event "'.concat(b.name,'" was sent to uninitialized service "').concat(t.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(b.data)));return t.scheduler.schedule(function(){t.forward(b);var S=t._nextState(b);t.update(S,b)}),t._state},this.sendTo=function(m,g,b){var S=t.parent&&(g===SpecialTargets.Parent||t.parent.id===g),C=S?t.parent:isString(g)?g===SpecialTargets.Internal?t:t.children.get(g)||registry.get(g):isActor$1(g)?g:void 0;if(!C){if(!S)throw new Error("Unable to send event to child '".concat(g,"' from service '").concat(t.id,"'."));return}if("machine"in C){if(t.status!==InterpreterStatus.Stopped||t.parent!==C||t.state.done){var k=__assign(__assign({},m),{name:m.name===error$1?"".concat(error(t.id)):m.name,origin:t.sessionId});!b&&t.machine.config.predictableActionArguments?t._outgoingQueue.push([C,k]):C.send(k)}}else!b&&t.machine.config.predictableActionArguments?t._outgoingQueue.push([C,m.data]):C.send(m.data)},this._exec=function(m,g,b,S){S===void 0&&(S=t.machine.options.actions);var C=m.exec||getActionFunction(m.type,S),k=isFunction(C)?C:C?C.exec:m.exec;if(k)try{return k(g,b.data,t.machine.config.predictableActionArguments?{action:m,_event:b}:{action:m,state:t.state,_event:b})}catch(X){throw t.parent&&t.parent.send({type:"xstate.error",data:X}),X}switch(m.type){case raise$1:{var R=m;t.defer(R);break}case send$1:var w=m;if(typeof w.delay=="number"){t.defer(w);return}else w.to?t.sendTo(w._event,w.to,b===initEvent):t.send(w._event);break;case cancel$1:t.cancel(m.sendId);break;case start$2:{if(t.status!==InterpreterStatus.Running)return;var $=m.activity;if(!t.machine.config.predictableActionArguments&&!t.state.activities[$.id||$.type])break;if($.type===ActionTypes.Invoke){var P=toInvokeSource$1($.src),O=t.machine.options.services?t.machine.options.services[P.type]:void 0,B=$.id,N=$.data,j="autoForward"in $?$.autoForward:!!$.forward;if(!O)return;var U=N?mapContext(N,g,b):void 0;if(typeof O=="string")return;var q=isFunction(O)?O(g,b.data,{data:U,src:P,meta:$.meta}):O;if(!q)return;var V=void 0;isMachine(q)&&(q=U?q.withContext(U):q,V={autoForward:j}),t.spawn(q,B,V)}else t.spawnActivity($);break}case stop$1:{t.stopChild(m.activity.id);break}case log$1:var W=m,x=W.label,J=W.value;x?t.logger(x,J):t.logger(J);break}};var n=__assign(__assign({},r.defaultOptions),a),s=n.clock,c=n.logger,d=n.parent,u=n.id,_=u!==void 0?u:e.id;this.id=_,this.logger=c,this.clock=s,this.parent=d,this.options=n,this.scheduler=new Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=registry.bookId()}return Object.defineProperty(r.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:provide(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),r.prototype.execute=function(e,a){var t,n;try{for(var s=__values(e.actions),c=s.next();!c.done;c=s.next()){var d=c.value;this.exec(d,e,a)}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},r.prototype.update=function(e,a){var t,n,s,c,d,u,_,m,g=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||a===initEvent)&&this.options.execute)this.execute(this.state);else for(var b=void 0;b=this._outgoingQueue.shift();)b[0].send(b[1]);if(this.children.forEach(function(q){g.state.children[q.id]=q}),this.devTools&&this.devTools.send(a.data,e),e.event)try{for(var S=__values(this.eventListeners),C=S.next();!C.done;C=S.next()){var k=C.value;k(e.event)}}catch(q){t={error:q}}finally{try{C&&!C.done&&(n=S.return)&&n.call(S)}finally{if(t)throw t.error}}try{for(var R=__values(this.listeners),w=R.next();!w.done;w=R.next()){var k=w.value;k(e,e.event)}}catch(q){s={error:q}}finally{try{w&&!w.done&&(c=R.return)&&c.call(R)}finally{if(s)throw s.error}}try{for(var $=__values(this.contextListeners),P=$.next();!P.done;P=$.next()){var O=P.value;O(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(q){d={error:q}}finally{try{P&&!P.done&&(u=$.return)&&u.call($)}finally{if(d)throw d.error}}if(this.state.done){var B=e.configuration.find(function(q){return q.type==="final"&&q.parent===g.machine}),N=B&&B.doneData?mapContext(B.doneData,e.context,a):void 0;this._doneEvent=doneInvoke(this.id,N);try{for(var j=__values(this.doneListeners),U=j.next();!U.done;U=j.next()){var k=U.value;k(this._doneEvent)}}catch(q){_={error:q}}finally{try{U&&!U.done&&(m=j.return)&&m.call(j)}finally{if(_)throw _.error}}this._stop(),this._stopChildren(),registry.free(this.sessionId)}},r.prototype.onTransition=function(e){return this.listeners.add(e),this.status===InterpreterStatus.Running&&e(this.state,this.state.event),this},r.prototype.subscribe=function(e,a,t){var n=this,s=toObserver(e,a,t);this.listeners.add(s.next),this.status!==InterpreterStatus.NotStarted&&s.next(this.state);var c=function(){n.doneListeners.delete(c),n.stopListeners.delete(c),s.complete()};return this.status===InterpreterStatus.Stopped?s.complete():(this.onDone(c),this.onStop(c)),{unsubscribe:function(){n.listeners.delete(s.next),n.doneListeners.delete(c),n.stopListeners.delete(c)}}},r.prototype.onEvent=function(e){return this.eventListeners.add(e),this},r.prototype.onSend=function(e){return this.sendListeners.add(e),this},r.prototype.onChange=function(e){return this.contextListeners.add(e),this},r.prototype.onStop=function(e){return this.stopListeners.add(e),this},r.prototype.onDone=function(e){return this.status===InterpreterStatus.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},r.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},r.prototype.start=function(e){var a=this;if(this.status===InterpreterStatus.Running)return this;this.machine._init(),registry.register(this.sessionId,this),this.initialized=!0,this.status=InterpreterStatus.Running;var t=e===void 0?this.initialState:provide(this,function(){return isStateConfig(e)?a.machine.resolveState(e):a.machine.resolveState(State$2.from(e,a.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){a.update(t,initEvent)}),this},r.prototype._stopChildren=function(){this.children.forEach(function(e){isFunction(e.stop)&&e.stop()}),this.children.clear()},r.prototype._stop=function(){var e,a,t,n,s,c,d,u,_,m;try{for(var g=__values(this.listeners),b=g.next();!b.done;b=g.next()){var S=b.value;this.listeners.delete(S)}}catch(j){e={error:j}}finally{try{b&&!b.done&&(a=g.return)&&a.call(g)}finally{if(e)throw e.error}}try{for(var C=__values(this.stopListeners),k=C.next();!k.done;k=C.next()){var S=k.value;S(),this.stopListeners.delete(S)}}catch(j){t={error:j}}finally{try{k&&!k.done&&(n=C.return)&&n.call(C)}finally{if(t)throw t.error}}try{for(var R=__values(this.contextListeners),w=R.next();!w.done;w=R.next()){var S=w.value;this.contextListeners.delete(S)}}catch(j){s={error:j}}finally{try{w&&!w.done&&(c=R.return)&&c.call(R)}finally{if(s)throw s.error}}try{for(var $=__values(this.doneListeners),P=$.next();!P.done;P=$.next()){var S=P.value;this.doneListeners.delete(S)}}catch(j){d={error:j}}finally{try{P&&!P.done&&(u=$.return)&&u.call($)}finally{if(d)throw d.error}}if(!this.initialized)return this;this.initialized=!1,this.status=InterpreterStatus.Stopped,this._initialState=void 0;try{for(var O=__values(Object.keys(this.delayedEventsMap)),B=O.next();!B.done;B=O.next()){var N=B.value;this.clock.clearTimeout(this.delayedEventsMap[N])}}catch(j){_={error:j}}finally{try{B&&!B.done&&(m=O.return)&&m.call(O)}finally{if(_)throw _.error}}this.scheduler.clear(),this.scheduler=new Scheduler({deferEvents:this.options.deferEvents})},r.prototype.stop=function(){var e=this,a=this.scheduler;return this._stop(),a.schedule(function(){var t=toSCXMLEvent({type:"xstate.stop"}),n=provide(e,function(){var s=flatten(__spreadArray([],__read(e.state.configuration),!1).sort(function(m,g){return g.order-m.order}).map(function(m){return toActionObjects(m.onExit,e.machine.options.actions)})),c=__read(resolveActions(e.machine,e.state,e.state.context,t,[{type:"exit",actions:s}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),d=c[0],u=c[1],_=new State$2({value:e.state.value,context:u,_event:t,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:d.filter(function(m){return!isRaisableAction(m)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return _.changed=!0,_});e.update(n,t),e._stopChildren(),registry.free(e.sessionId)}),this},r.prototype.batch=function(e){var a=this;if(!(this.status===InterpreterStatus.NotStarted&&this.options.deferEvents)){if(this.status!==InterpreterStatus.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var t=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var n,s,c=a.state,d=!1,u=[],_=function(S){var C=toSCXMLEvent(S);a.forward(C),c=provide(a,function(){return a.machine.transition(c,C,void 0,t||void 0)}),u.push.apply(u,__spreadArray([],__read(a.machine.config.predictableActionArguments?c.actions:c.actions.map(function(k){return bindActionToState(k,c)})),!1)),d=d||!!c.changed};try{for(var m=__values(e),g=m.next();!g.done;g=m.next()){var b=g.value;_(b)}}catch(S){n={error:S}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(n)throw n.error}}c.changed=d,c.actions=u,a.update(c,toSCXMLEvent(e[e.length-1]))})}},r.prototype.sender=function(e){return this.send.bind(this,e)},r.prototype._nextState=function(e,a){var t=this;a===void 0&&(a=!!this.machine.config.predictableActionArguments&&this._exec);var n=toSCXMLEvent(e);if(n.name.indexOf(errorPlatform)===0&&!this.state.nextEvents.some(function(c){return c.indexOf(errorPlatform)===0}))throw n.data.data;var s=provide(this,function(){return t.machine.transition(t.state,n,void 0,a||void 0)});return s},r.prototype.nextState=function(e){return this._nextState(e,!1)},r.prototype.forward=function(e){var a,t;try{for(var n=__values(this.forwardTo),s=n.next();!s.done;s=n.next()){var c=s.value,d=this.children.get(c);if(!d)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(c,"'."));d.send(e)}}catch(u){a={error:u}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}},r.prototype.defer=function(e){var a=this,t=this.clock.setTimeout(function(){"to"in e&&e.to?a.sendTo(e._event,e.to,!0):a.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=t)},r.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},r.prototype.exec=function(e,a,t){t===void 0&&(t=this.machine.options.actions),this._exec(e,a.context,a._event,t)},r.prototype.removeChild=function(e){var a;this.children.delete(e),this.forwardTo.delete(e),(a=this.state)===null||a===void 0||delete a.children[e]},r.prototype.stopChild=function(e){var a=this.children.get(e);a&&(this.removeChild(e),isFunction(a.stop)&&a.stop())},r.prototype.spawn=function(e,a,t){if(this.status!==InterpreterStatus.Running)return createDeferredActor(e,a);if(isPromiseLike(e))return this.spawnPromise(Promise.resolve(e),a);if(isFunction(e))return this.spawnCallback(e,a);if(isSpawnedActor(e))return this.spawnActor(e,a);if(isObservable(e))return this.spawnObservable(e,a);if(isMachine(e))return this.spawnMachine(e,__assign(__assign({},t),{id:a}));if(isBehavior(e))return this.spawnBehavior(e,a);throw new Error('Unable to spawn entity "'.concat(a,'" of type "').concat(typeof e,'".'))},r.prototype.spawnMachine=function(e,a){var t=this;a===void 0&&(a={});var n=new r(e,__assign(__assign({},this.options),{parent:this,id:a.id||e.id})),s=__assign(__assign({},DEFAULT_SPAWN_OPTIONS),a);s.sync&&n.onTransition(function(d){t.send(update,{state:d,id:n.id})});var c=n;return this.children.set(n.id,c),s.autoForward&&this.forwardTo.add(n.id),n.onDone(function(d){t.removeChild(n.id),t.send(toSCXMLEvent(d,{origin:n.id}))}).start(),c},r.prototype.spawnBehavior=function(e,a){var t=spawnBehavior(e,{id:a,parent:this});return this.children.set(a,t),t},r.prototype.spawnPromise=function(e,a){var t,n=this,s=!1,c;e.then(function(u){s||(c=u,n.removeChild(a),n.send(toSCXMLEvent(doneInvoke(a,u),{origin:a})))},function(u){if(!s){n.removeChild(a);var _=error(a,u);try{n.send(toSCXMLEvent(_,{origin:a}))}catch{n.devTools&&n.devTools.send(_,n.state),n.machine.strict&&n.stop()}}});var d=(t={id:a,send:function(){},subscribe:function(u,_,m){var g=toObserver(u,_,m),b=!1;return e.then(function(S){b||(g.next(S),!b&&g.complete())},function(S){b||g.error(S)}),{unsubscribe:function(){return b=!0}}},stop:function(){s=!0},toJSON:function(){return{id:a}},getSnapshot:function(){return c}},t[symbolObservable]=function(){return this},t);return this.children.set(a,d),d},r.prototype.spawnCallback=function(e,a){var t,n=this,s=!1,c=new Set,d=new Set,u,_=function(b){u=b,d.forEach(function(S){return S(b)}),!s&&n.send(toSCXMLEvent(b,{origin:a}))},m;try{m=e(_,function(b){c.add(b)})}catch(b){this.send(error(a,b))}if(isPromiseLike(m))return this.spawnPromise(m,a);var g=(t={id:a,send:function(b){return c.forEach(function(S){return S(b)})},subscribe:function(b){var S=toObserver(b);return d.add(S.next),{unsubscribe:function(){d.delete(S.next)}}},stop:function(){s=!0,isFunction(m)&&m()},toJSON:function(){return{id:a}},getSnapshot:function(){return u}},t[symbolObservable]=function(){return this},t);return this.children.set(a,g),g},r.prototype.spawnObservable=function(e,a){var t,n=this,s,c=e.subscribe(function(u){s=u,n.send(toSCXMLEvent(u,{origin:a}))},function(u){n.removeChild(a),n.send(toSCXMLEvent(error(a,u),{origin:a}))},function(){n.removeChild(a),n.send(toSCXMLEvent(doneInvoke(a),{origin:a}))}),d=(t={id:a,send:function(){},subscribe:function(u,_,m){return e.subscribe(u,_,m)},stop:function(){return c.unsubscribe()},getSnapshot:function(){return s},toJSON:function(){return{id:a}}},t[symbolObservable]=function(){return this},t);return this.children.set(a,d),d},r.prototype.spawnActor=function(e,a){return this.children.set(a,e),e},r.prototype.spawnActivity=function(e){var a=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(a){var t=a(this.state.context,e);this.spawnEffect(e.id,t)}},r.prototype.spawnEffect=function(e,a){var t;this.children.set(e,(t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:a||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},t[symbolObservable]=function(){return this},t))},r.prototype.attachDev=function(){var e=getGlobal();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var a=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign(__assign({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},a),{features:__assign({jump:!1,skip:!1},a?a.features:void 0)}),this.machine),this.devTools.init(this.state)}registerService(this)}},r.prototype.toJSON=function(){return{id:this.id}},r.prototype[symbolObservable]=function(){return this},r.prototype.getSnapshot=function(){return this.status===InterpreterStatus.NotStarted?this.initialState:this._state},r.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,a){return setTimeout(e,a)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},r.interpret=interpret,r}();function interpret(r,e){var a=new Interpreter(r,e);return a}function toInvokeSource(r){if(typeof r=="string"){var e={type:r};return e.toString=function(){return r},e}return r}function toInvokeDefinition(r){return __assign(__assign({type:invoke},r),{toJSON:function(){r.onDone,r.onError;var e=__rest(r,["onDone","onError"]);return __assign(__assign({},e),{type:invoke,src:toInvokeSource(r.src)})}})}var NULL_EVENT="",STATE_IDENTIFIER="#",WILDCARD="*",EMPTY_OBJECT={},isStateId=function(r){return r[0]===STATE_IDENTIFIER},createDefaultOptions=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},StateNode=function(){function r(e,a,t,n){t===void 0&&(t="context"in e?e.context:void 0);var s=this,c;this.config=e,this._context=t,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(createDefaultOptions(),a),this.parent=n==null?void 0:n.parent,this.key=this.config.key||(n==null?void 0:n.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:STATE_DELIMITER),this.id=this.config.id||__spreadArray([this.machine.key],__read(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(c=this.config.schema)!==null&&c!==void 0?c:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?mapValues(this.config.states,function(_,m){var g,b=new r(_,{},void 0,{parent:s,key:m});return Object.assign(s.idMap,__assign((g={},g[b.id]=b,g),b.idMap)),b}):EMPTY_OBJECT;var d=0;function u(_){var m,g;_.order=d++;try{for(var b=__values(getAllChildren(_)),S=b.next();!S.done;S=b.next()){var C=S.value;u(C)}}catch(k){m={error:k}}finally{try{S&&!S.done&&(g=b.return)&&g.call(b)}finally{if(m)throw m.error}}}u(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(_){var m=_.event;return m===NULL_EVENT}):NULL_EVENT in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=toArray(this.config.entry||this.config.onEntry).map(function(_){return toActionObject(_)}),this.onExit=toArray(this.config.exit||this.config.onExit).map(function(_){return toActionObject(_)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=toArray(this.config.invoke).map(function(_,m){var g,b;if(isMachine(_)){var S=createInvokeId(s.id,m);return s.machine.options.services=__assign((g={},g[S]=_,g),s.machine.options.services),toInvokeDefinition({src:S,id:S})}else if(isString(_.src)){var S=_.id||createInvokeId(s.id,m);return toInvokeDefinition(__assign(__assign({},_),{id:S,src:_.src}))}else if(isMachine(_.src)||isFunction(_.src)){var S=_.id||createInvokeId(s.id,m);return s.machine.options.services=__assign((b={},b[S]=_.src,b),s.machine.options.services),toInvokeDefinition(__assign(__assign({id:S},_),{src:S}))}else{var C=_.src;return toInvokeDefinition(__assign(__assign({id:createInvokeId(s.id,m)},_),{src:C}))}}),this.activities=toArray(this.config.activities).concat(this.invoke).map(function(_){return toActivityDefinition(_)}),this.transition=this.transition.bind(this),this.tags=toArray(this.config.tags)}return r.prototype._init=function(){this.__cache.transitions||getAllStateNodes(this).forEach(function(e){return e.on})},r.prototype.withConfig=function(e,a){var t=this.options,n=t.actions,s=t.activities,c=t.guards,d=t.services,u=t.delays;return new r(this.config,{actions:__assign(__assign({},n),e.actions),activities:__assign(__assign({},s),e.activities),guards:__assign(__assign({},c),e.guards),services:__assign(__assign({},d),e.services),delays:__assign(__assign({},u),e.delays)},a??this.context)},r.prototype.withContext=function(e){return new r(this.config,this.options,e)},Object.defineProperty(r.prototype,"context",{get:function(){return isFunction(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:mapValues(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),r.prototype.toJSON=function(){return this.definition},Object.defineProperty(r.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(a,t){return a[t.eventType]=a[t.eventType]||[],a[t.eventType].push(t),a},{})},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),r.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var a=e===NULL_EVENT,t=this.transitions.filter(function(n){var s=n.eventType===e;return a?s:s||n.eventType===WILDCARD});return this.__cache.candidates[e]=t,t},r.prototype.getDelayedTransitions=function(){var e=this,a=this.config.after;if(!a)return[];var t=function(s,c){var d=isFunction(s)?"".concat(e.id,":delay[").concat(c,"]"):s,u=after(d,e.id);return e.onEntry.push(send(u,{delay:s})),e.onExit.push(cancel(u)),u},n=isArray(a)?a.map(function(s,c){var d=t(s.delay,c);return __assign(__assign({},s),{event:d})}):flatten(Object.keys(a).map(function(s,c){var d=a[s],u=isString(d)?{target:d}:d,_=isNaN(+s)?s:+s,m=t(_,c);return toArray(u).map(function(g){return __assign(__assign({},g),{event:m,delay:_})})}));return n.map(function(s){var c=s.delay;return __assign(__assign({},e.formatTransition(s)),{delay:c})})},r.prototype.getStateNodes=function(e){var a,t=this;if(!e)return[];var n=e instanceof State$2?e.value:toStateValue(e,this.delimiter);if(isString(n)){var s=this.getStateNode(n).initial;return s!==void 0?this.getStateNodes((a={},a[n]=s,a)):[this,this.states[n]]}var c=Object.keys(n),d=[this];return d.push.apply(d,__spreadArray([],__read(flatten(c.map(function(u){return t.getStateNode(u).getStateNodes(n[u])}))),!1)),d},r.prototype.handles=function(e){var a=getEventType(e);return this.events.includes(a)},r.prototype.resolveState=function(e){var a=e instanceof State$2?e:State$2.create(e),t=Array.from(getConfiguration([],this.getStateNodes(a.value)));return new State$2(__assign(__assign({},a),{value:this.resolve(a.value),configuration:t,done:isInFinalState(t,this),tags:getTagsFromConfiguration(t),machine:this.machine}))},r.prototype.transitionLeafNode=function(e,a,t){var n=this.getStateNode(e),s=n.next(a,t);return!s||!s.transitions.length?this.next(a,t):s},r.prototype.transitionCompoundNode=function(e,a,t){var n=Object.keys(e),s=this.getStateNode(n[0]),c=s._transition(e[n[0]],a,t);return!c||!c.transitions.length?this.next(a,t):c},r.prototype.transitionParallelNode=function(e,a,t){var n,s,c={};try{for(var d=__values(Object.keys(e)),u=d.next();!u.done;u=d.next()){var _=u.value,m=e[_];if(m){var g=this.getStateNode(_),b=g._transition(m,a,t);b&&(c[_]=b)}}}catch(w){n={error:w}}finally{try{u&&!u.done&&(s=d.return)&&s.call(d)}finally{if(n)throw n.error}}var S=Object.keys(c).map(function(w){return c[w]}),C=flatten(S.map(function(w){return w.transitions})),k=S.some(function(w){return w.transitions.length>0});if(!k)return this.next(a,t);var R=flatten(Object.keys(c).map(function(w){return c[w].configuration}));return{transitions:C,exitSet:flatten(S.map(function(w){return w.exitSet})),configuration:R,source:a,actions:flatten(Object.keys(c).map(function(w){return c[w].actions}))}},r.prototype._transition=function(e,a,t){return isString(e)?this.transitionLeafNode(e,a,t):Object.keys(e).length===1?this.transitionCompoundNode(e,a,t):this.transitionParallelNode(e,a,t)},r.prototype.getTransitionData=function(e,a){return this._transition(e.value,e,toSCXMLEvent(a))},r.prototype.next=function(e,a){var t,n,s=this,c=a.name,d=[],u=[],_;try{for(var m=__values(this.getCandidates(c)),g=m.next();!g.done;g=m.next()){var b=g.value,S=b.cond,C=b.in,k=e.context,R=C?isString(C)&&isStateId(C)?e.matches(toStateValue(this.getStateNodeById(C).path,this.delimiter)):matchesState(toStateValue(C,this.delimiter),path(this.path.slice(0,-2))(e.value)):!0,w=!1;try{w=!S||evaluateGuard(this.machine,S,k,a,e)}catch(O){throw new Error("Unable to evaluate guard '".concat(S.name||S.type,"' in transition for event '").concat(c,"' in state node '").concat(this.id,`':
`).concat(O.message))}if(w&&R){b.target!==void 0&&(u=b.target),d.push.apply(d,__spreadArray([],__read(b.actions),!1)),_=b;break}}}catch(O){t={error:O}}finally{try{g&&!g.done&&(n=m.return)&&n.call(m)}finally{if(t)throw t.error}}if(_){if(!u.length)return{transitions:[_],exitSet:[],configuration:e.value?[this]:[],source:e,actions:d};var $=flatten(u.map(function(O){return s.getRelativeStateNodes(O,e.historyValue)})),P=!!_.internal;return{transitions:[_],exitSet:P?[]:flatten(u.map(function(O){return s.getPotentiallyReenteringNodes(O)})),configuration:$,source:e,actions:d}}},r.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var a=[],t=this,n=e;t&&t!==n;)a.push(t),t=t.parent;return t!==n?[]:(a.push(n),a)},r.prototype.getActions=function(e,a,t,n,s,c,d){var u,_,m,g,b=this,S=c?getConfiguration([],this.getStateNodes(c.value)):[],C=new Set;try{for(var k=__values(Array.from(e).sort(function(W,x){return W.order-x.order})),R=k.next();!R.done;R=k.next()){var w=R.value;(!has(S,w)||has(t.exitSet,w)||w.parent&&C.has(w.parent))&&C.add(w)}}catch(W){u={error:W}}finally{try{R&&!R.done&&(_=k.return)&&_.call(k)}finally{if(u)throw u.error}}try{for(var $=__values(S),P=$.next();!P.done;P=$.next()){var w=P.value;(!has(e,w)||has(t.exitSet,w.parent))&&t.exitSet.push(w)}}catch(W){m={error:W}}finally{try{P&&!P.done&&(g=$.return)&&g.call($)}finally{if(m)throw m.error}}t.exitSet.sort(function(W,x){return x.order-W.order});var O=Array.from(C).sort(function(W,x){return W.order-x.order}),B=new Set(t.exitSet),N=flatten(O.map(function(W){var x=[];if(W.type!=="final")return x;var J=W.parent;if(!J.parent)return x;x.push(done(W.id,W.doneData),done(J.id,W.doneData?mapContext(W.doneData,n,s):void 0));var X=J.parent;return X.type==="parallel"&&getChildren(X).every(function(Z){return isInFinalState(t.configuration,Z)})&&x.push(done(X.id)),x})),j=O.map(function(W){var x=W.onEntry,J=W.activities.map(function(X){return start$1(X)});return{type:"entry",actions:toActionObjects(d?__spreadArray(__spreadArray([],__read(x),!1),__read(J),!1):__spreadArray(__spreadArray([],__read(J),!1),__read(x),!1),b.machine.options.actions)}}).concat({type:"state_done",actions:N.map(function(W){return raise(W)})}),U=Array.from(B).map(function(W){return{type:"exit",actions:toActionObjects(__spreadArray(__spreadArray([],__read(W.onExit),!1),__read(W.activities.map(function(x){return stop(x)})),!1),b.machine.options.actions)}}),q=U.concat({type:"transition",actions:toActionObjects(t.actions,this.machine.options.actions)}).concat(j);if(a){var V=toActionObjects(flatten(__spreadArray([],__read(e),!1).sort(function(W,x){return x.order-W.order}).map(function(W){return W.onExit})),this.machine.options.actions).filter(function(W){return!isRaisableAction(W)});return q.concat({type:"stop",actions:V})}return q},r.prototype.transition=function(e,a,t,n){e===void 0&&(e=this.initialState);var s=toSCXMLEvent(a),c;if(e instanceof State$2)c=t===void 0?e:this.resolveState(State$2.from(e,t));else{var d=isString(e)?this.resolve(pathToStateValue(this.getResolvedPath(e))):this.resolve(e),u=t??this.machine.context;c=this.resolveState(State$2.from(d,u))}if(this.strict&&!this.events.includes(s.name)&&!isBuiltInEvent(s.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(s.name,"'"));var _=this._transition(c.value,c,s)||{transitions:[],configuration:[],exitSet:[],source:c,actions:[]},m=getConfiguration([],this.getStateNodes(c.value)),g=_.configuration.length?getConfiguration(m,_.configuration):m;return _.configuration=__spreadArray([],__read(g),!1),this.resolveTransition(_,c,c.context,n,s)},r.prototype.resolveRaisedTransition=function(e,a,t,n){var s,c=e.actions;return e=this.transition(e,a,void 0,n),e._event=t,e.event=t.data,(s=e.actions).unshift.apply(s,__spreadArray([],__read(c),!1)),e},r.prototype.resolveTransition=function(e,a,t,n,s){var c,d,u,_,m=this;s===void 0&&(s=initEvent);var g=e.configuration,b=!a||e.transitions.length>0,S=b?e.configuration:a?a.configuration:[],C=isInFinalState(S,this),k=b?getValue(this.machine,g):void 0,R=a?a.historyValue?a.historyValue:e.source?this.machine.historyValue(a.value):void 0:void 0,w=this.getActions(new Set(S),C,e,t,s,a,n),$=a?__assign({},a.activities):{};try{for(var P=__values(w),O=P.next();!O.done;O=P.next()){var B=O.value;try{for(var N=(u=void 0,__values(B.actions)),j=N.next();!j.done;j=N.next()){var U=j.value;U.type===start$2?$[U.activity.id||U.activity.type]=U:U.type===stop$1&&($[U.activity.id||U.activity.type]=!1)}}catch(te){u={error:te}}finally{try{j&&!j.done&&(_=N.return)&&_.call(N)}finally{if(u)throw u.error}}}}catch(te){c={error:te}}finally{try{O&&!O.done&&(d=P.return)&&d.call(P)}finally{if(c)throw c.error}}var q=__read(resolveActions(this,a,t,s,w,n,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),V=q[0],W=q[1],x=__read(partition(V,isRaisableAction),2),J=x[0],X=x[1],Z=V.filter(function(te){var re;return te.type===start$2&&((re=te.activity)===null||re===void 0?void 0:re.type)===invoke}),ee=Z.reduce(function(te,re){return te[re.activity.id]=createInvocableActor(re.activity,m.machine,W,s),te},a?__assign({},a.children):{}),Q=new State$2({value:k||a.value,context:W,_event:s,_sessionid:a?a._sessionid:null,historyValue:k?R?updateHistoryValue(R,k):void 0:a?a.historyValue:void 0,history:!k||e.source?a:void 0,actions:k?X:[],activities:k?$:a?a.activities:{},events:[],configuration:S,transitions:e.transitions,children:ee,done:C,tags:getTagsFromConfiguration(S),machine:this}),z=t!==W;Q.changed=s.name===update||z;var K=Q.history;K&&delete K.history;var ne=!C&&(this._transient||g.some(function(te){return te._transient}));if(!b&&(!ne||s.name===NULL_EVENT))return Q;var F=Q;if(!C)for(ne&&(F=this.resolveRaisedTransition(F,{type:nullEvent},s,n));J.length;){var Y=J.shift();F=this.resolveRaisedTransition(F,Y._event,s,n)}var ae=F.changed||(K?!!F.actions.length||z||typeof K.value!=typeof F.value||!stateValuesEqual(F.value,K.value):void 0);return F.changed=ae,F.history=K,F},r.prototype.getStateNode=function(e){if(isStateId(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var a=this.states[e];if(!a)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return a},r.prototype.getStateNodeById=function(e){var a=isStateId(e)?e.slice(STATE_IDENTIFIER.length):e;if(a===this.id)return this;var t=this.machine.idMap[a];if(!t)throw new Error("Child state node '#".concat(a,"' does not exist on machine '").concat(this.id,"'"));return t},r.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&isStateId(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var a=toStatePath(e,this.delimiter).slice(),t=this;a.length;){var n=a.shift();if(!n.length)break;t=t.getStateNode(n)}return t},r.prototype.resolve=function(e){var a,t=this;if(!e)return this.initialStateValue||EMPTY_OBJECT;switch(this.type){case"parallel":return mapValues(this.initialStateValue,function(s,c){return s?t.getStateNode(c).resolve(e[c]||s):EMPTY_OBJECT});case"compound":if(isString(e)){var n=this.getStateNode(e);return n.type==="parallel"||n.type==="compound"?(a={},a[e]=n.initialStateValue,a):e}return Object.keys(e).length?mapValues(e,function(s,c){return s?t.getStateNode(c).resolve(s):EMPTY_OBJECT}):this.initialStateValue||{};default:return e||EMPTY_OBJECT}},r.prototype.getResolvedPath=function(e){if(isStateId(e)){var a=this.machine.idMap[e.slice(STATE_IDENTIFIER.length)];if(!a)throw new Error("Unable to find state node '".concat(e,"'"));return a.path}return toStatePath(e,this.delimiter)},Object.defineProperty(r.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var a;if(this.type==="parallel")a=mapFilterValues(this.states,function(t){return t.initialStateValue||EMPTY_OBJECT},function(t){return t.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));a=isLeafNode(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else a={};return this.__cache.initialStateValue=a,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),r.prototype.getInitialState=function(e,a){this._init();var t=this.getStateNodes(e);return this.resolveTransition({configuration:t,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,a??this.machine.context,void 0)},Object.defineProperty(r.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"target",{get:function(){var e;if(this.type==="history"){var a=this.config;isString(a.target)?e=isStateId(a.target)?pathToStateValue(this.machine.getStateNodeById(a.target).path.slice(this.path.length-1)):a.target:e=a.target}return e},enumerable:!1,configurable:!0}),r.prototype.getRelativeStateNodes=function(e,a,t){return t===void 0&&(t=!0),t?e.type==="history"?e.resolveHistory(a):e.initialStateNodes:[e]},Object.defineProperty(r.prototype,"initialStateNodes",{get:function(){var e=this;if(isLeafNode(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var a=toStatePaths(this.initialStateValue);return flatten(a.map(function(t){return e.getFromRelativePath(t)}))},enumerable:!1,configurable:!0}),r.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var a=__read(e),t=a[0],n=a.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(t,"' from node with no states"));var s=this.getStateNode(t);if(s.type==="history")return s.resolveHistory();if(!this.states[t])throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return this.states[t].getFromRelativePath(n)},r.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:mapFilterValues(this.states,function(a,t){if(!e)return a.historyValue();var n=isString(e)?void 0:e[t];return a.historyValue(n||a.initialStateValue)},function(a){return!a.history})}},r.prototype.resolveHistory=function(e){var a=this;if(this.type!=="history")return[this];var t=this.parent;if(!e){var n=this.target;return n?flatten(toStatePaths(n).map(function(c){return t.getFromRelativePath(c)})):t.initialStateNodes}var s=nestedPath(t.path,"states")(e).current;return isString(s)?[t.getStateNode(s)]:flatten(toStatePaths(s).map(function(c){return a.history==="deep"?t.getFromRelativePath(c):[t.states[c[0]]]}))},Object.defineProperty(r.prototype,"stateIds",{get:function(){var e=this,a=flatten(Object.keys(this.states).map(function(t){return e.states[t].stateIds}));return[this.id].concat(a)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"events",{get:function(){var e,a,t,n;if(this.__cache.events)return this.__cache.events;var s=this.states,c=new Set(this.ownEvents);if(s)try{for(var d=__values(Object.keys(s)),u=d.next();!u.done;u=d.next()){var _=u.value,m=s[_];if(m.states)try{for(var g=(t=void 0,__values(m.events)),b=g.next();!b.done;b=g.next()){var S=b.value;c.add("".concat(S))}}catch(C){t={error:C}}finally{try{b&&!b.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}}}catch(C){e={error:C}}finally{try{u&&!u.done&&(a=d.return)&&a.call(d)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(c)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(a){return!(!a.target&&!a.actions.length&&a.internal)}).map(function(a){return a.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),r.prototype.resolveTarget=function(e){var a=this;if(e!==void 0)return e.map(function(t){if(!isString(t))return t;var n=t[0]===a.delimiter;if(n&&!a.parent)return a.getStateNodeByPath(t.slice(1));var s=n?a.key+t:t;if(a.parent)try{var c=a.parent.getStateNodeByPath(s);return c}catch(d){throw new Error("Invalid transition definition for state node '".concat(a.id,`':
`).concat(d.message))}else return a.getStateNodeByPath(s)})},r.prototype.formatTransition=function(e){var a=this,t=normalizeTarget(e.target),n="internal"in e?e.internal:t?t.some(function(u){return isString(u)&&u[0]===a.delimiter}):!0,s=this.machine.options.guards,c=this.resolveTarget(t),d=__assign(__assign({},e),{actions:toActionObjects(toArray(e.actions)),cond:toGuard(e.cond,s),target:c,source:this,internal:n,eventType:e.event,toJSON:function(){return __assign(__assign({},d),{target:d.target?d.target.map(function(u){return"#".concat(u.id)}):void 0,source:"#".concat(a.id)})}});return d},r.prototype.formatTransitions=function(){var e,a,t=this,n;if(!this.config.on)n=[];else if(Array.isArray(this.config.on))n=this.config.on;else{var s=this.config.on,c=WILDCARD,d=s[c],u=d===void 0?[]:d,_=__rest(s,[typeof c=="symbol"?c:c+""]);n=flatten(Object.keys(_).map(function($){var P=toTransitionConfigArray($,_[$]);return P}).concat(toTransitionConfigArray(WILDCARD,u)))}var m=this.config.always?toTransitionConfigArray("",this.config.always):[],g=this.config.onDone?toTransitionConfigArray(String(done(this.id)),this.config.onDone):[],b=flatten(this.invoke.map(function($){var P=[];return $.onDone&&P.push.apply(P,__spreadArray([],__read(toTransitionConfigArray(String(doneInvoke($.id)),$.onDone)),!1)),$.onError&&P.push.apply(P,__spreadArray([],__read(toTransitionConfigArray(String(error($.id)),$.onError)),!1)),P})),S=this.after,C=flatten(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],__read(g),!1),__read(b),!1),__read(n),!1),__read(m),!1).map(function($){return toArray($).map(function(P){return t.formatTransition(P)})}));try{for(var k=__values(S),R=k.next();!R.done;R=k.next()){var w=R.value;C.push(w)}}catch($){e={error:$}}finally{try{R&&!R.done&&(a=k.return)&&a.call(k)}finally{if(e)throw e.error}}return C},r}();function createMachine(r,e){return new StateNode(r,e)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}const ROV_PEERID_BASE="ROV-",MEMORABLE_PEER_ID_OFFSET=74646,peerServerCloudOptions={host:"0.peerjs.com",secure:!0,path:"/",port:443},peerServerLocalOptions={host:"raspberrypi.local",path:"/",secure:!1,port:9e3};var ConnectionState=(r=>(r.connecting="Connecting",r.connected="Connected",r.reconnecting="Reconnecting",r.disconnected="Disconnected",r))(ConnectionState||{}),LOADING_MESSAGE=(r=>(r.clearAll="all",r.default="Loading...",r.ipScan="Scanning for ROV IP address...",r.internetCheck="Checking internet access...",r.serverConnecting="Connecting to peer server...",r.serverReconnecting="Reconnecting to peer server...",r.webrtcConnecting="Searching for ROV...",r.webrtcReconnecting="Reconnecting to ROV...",r.reloadingSite="Reloading site...",r.awaitingVideoCall="Waiting for livestream...",r.awaitingRovReconnect="Waiting for ROV to reconnect...",r))(LOADING_MESSAGE||{});const GAME_CONTROLLER_BUTTON_CONFIG=[{btnName:"button_1",helpLabel:"TBD",tooltipPlacement:"left"},{btnName:"button_2",remoteAction:"record",helpLabel:"Start/Stop Recording",tooltipPlacement:"left"},{btnName:"button_3",remoteAction:"photo",helpLabel:"Take Photo",tooltipPlacement:"left"},{btnName:"button_4",remoteAction:"lights",helpLabel:"Toggle Lights",tooltipPlacement:"left"},{btnName:"shoulder_button_front_left",helpLabel:"TBD",tooltipPlacement:"right"},{btnName:"shoulder_button_front_right",remoteAction:"claw_open",helpLabel:"TBD",tooltipPlacement:"left"},{btnName:"shoulder_trigger_back_left",remoteAction:"claw_close",helpLabel:"Open Claw",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"shoulder_trigger_back_right",remoteAction:"claw_close",helpLabel:"Close Claw",holdAllowed:!0,tooltipPlacement:"left"},{btnName:"select_button",helpLabel:"Show/Hide Gamepad Help",tooltipPlacement:"right"},{btnName:"start_button",helpLabel:"Show/Hide Gamepad Help",tooltipPlacement:"left"},{btnName:"stick_button_left",helpLabel:"Move Forward/Back & Turn",tooltipPlacement:"right"},{btnName:"stick_button_right",helpLabel:"Move Up/Down & Left/Right",tooltipPlacement:"left"},{btnName:"d_pad_up",remoteAction:"exposure_plus",helpLabel:"Increase Camera Brightness",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"d_pad_down",remoteAction:"exposure_minus",helpLabel:"Decreases Camera Brightness",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"d_pad_left",remoteAction:"v_quality_plus",helpLabel:"Decrease Video Quality (reduces latency)",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"d_pad_right",remoteAction:"v_quality_minus",helpLabel:"Increase Video Quality (increases latency)",holdAllowed:!0,tooltipPlacement:"right"}],ONSCREEN_GPAD_BUTTON_LABELS=["button_1","button_2","button_3","button_4","shoulder_button_front_left","shoulder_button_front_right","shoulder_trigger_back_left","shoulder_trigger_back_right","select_button","start_button","stick_button_left","stick_button_right","d_pad_up","d_pad_down","d_pad_left","d_pad_right"],ONSCREEN_GPAD_BUTTON_TOUCHED_CLASS="touched",ONSCREEN_GPAD_BUTTON_PRESSED_CLASS="pressed";let computedTracker=[];function nStore(r){let e=[],a=(c,d=!0)=>(e.includes(c)||e.push(c),d&&c(r),()=>{e=e.filter(u=>u!=c)});function t(c){if(c===r&&(r===null||typeof r!="object"))return;let d=r;r=c;for(let u of e)u(r,d)}function n(){let c=computedTracker[computedTracker.length-1];return c&&a(c[0],!1),r}if(typeof r=="function")return computed(r);function s(){for(let c of e)c(r,r)}return{subscribe:a,set:t,get:n,refresh:s,update:c=>{typeof c=="function"&&t(c(r))}}}function computed(r){let e=nStore(null),a=[t];return t(),e;function t(){if(computedTracker.includes(a))throw Error("Circular computation");computedTracker.push(a);let n;try{n=r()}catch(s){throw computedTracker.pop(),s}computedTracker.pop(),e.set(n)}}var DIALOG_TYPE=(r=>(r[r.Alert=0]="Alert",r[r.Password=1]="Password",r[r.ScrollingText=2]="ScrollingText",r))(DIALOG_TYPE||{});const appReady=nStore(!1),debugPageModeActive=nStore(!1);nStore(!1);const fullscreenOpen=nStore(!1),peerServerConfig=nStore(null),rovIpAddr=nStore("raspberrypi.local"),rovPeerIdEndNumber=nStore(0);nStore(!1);const isRovDriver=nStore(!1),ourPeerId=nStore("No Peer Id");nStore(null);nStore(null);nStore(null);const peerServerConnState=nStore(ConnectionState.disconnected),rovDataChannelConnState=nStore(ConnectionState.disconnected),rovVideoStreamConnState=nStore(ConnectionState.disconnected),rovVideoStream=nStore(null);function bindStringSvelteStoreToLocalStorage(r,e,a){e.set(localStorage.getItem(r)||e.get()||a),e.subscribe(t=>{localStorage.setItem(r,t)})}function bindNumberSvelteStoreToLocalStorage(r,e,a){e.set(parseFloat(localStorage.getItem(r))||e.get()||a),e.subscribe(t=>{localStorage.setItem(r,String(t))})}function selectKeypressFactory(r){return e=>{(e.key==="Enter"||e.key===" ")&&r(e)}}const adjectives=["Ancient","Dawn","Small","Broken","Red","Cold","Wild","Divine","Empty","Patient","Holy","Long","Wispy","White","Delicate","Bold","Billowing","Blue","Crimson","Aged","Misty","Snowy","Withered","Little","Frosty","Weathered","Nameless","Fragrant","Lively","Quiet","Purple","Proud","Dry","Bitter","Dark","Icy","Twilight","Wandering","Solitary","Morning","Lingering","Still","Late","Sparkling","Restless","Winter","Silent","Floral","Young","Green","Cool","Autumn","Falling","Spring","Summer","Polished","Hidden","Damp","Muddy","Black","Old","Rough"],nouns=["Pond","Snow","Glade","Hill","Voice","River","Sun","Dawn","Forest","Frog","Grass","Shadow","Dust","Water","Meadow","Moon","Thunder","Sun","Wildflower","Snowflake","Silence","Haze","Shape","Pine","Waterfall","Sound","Wood","Tree","Night","Flower","Dream","Cherry","Resonance","Firefly","Bush","Star","Darkness","Lake","Frost","Paper","Surf","Fog","Brook","Mountain","Field","Bird","Leaf","Sea","Water","Sky","Smoke","Sunset","Glitter","Dew","Butterfly","Wind","Fire","Rain","Morning","Feather","Cloud","Breeze","Violet","Wave"];function getUniqueName(r,e){let a=adjectives.length>>>0,t=nouns.length>>>0,n=Math.max(a,t)>>>0,s=Math.max(1,(r+1)%n)>>>0,c=Math.max(1,(e+1)%n)>>>0,d=adjectives[(s+c)%a],u=nouns[s*c%t];return d+"-"+u}function getRandomName(){var r=adjectives[Math.floor(Math.random()*adjectives.length)],e=nouns[Math.floor(Math.random()*nouns.length)];return r+"-"+e}function getURLQueryStringVariable(r){for(var e=window.location.search.substring(1),a=e.split("&"),t=0;t<a.length;t++){var n=a[t].split("=");if(decodeURIComponent(n[0])==r)return decodeURIComponent(n[1])}}function throttle(r,e,a){var t,n,s,c=null,d=0;a||(a={});var u=function(){d=a.leading===!1?0:Date.now(),c=null,s=r.apply(t,n),c||(t=n=null)};return function(){var _=Date.now();!d&&a.leading===!1&&(d=_);var m=e-(_-d);return t=this,n=arguments,m<=0||m>e?(c&&(clearTimeout(c),c=null),d=_,s=r.apply(t,n),c||(t=n=null)):!c&&a.trailing!==!1&&(c=setTimeout(u,m)),s}}class Queue{constructor(){H(this,"items",[]);this.items=[]}push(e){this.items.push(e)}pop(){if(!this.isEmpty())return this.items.splice(0,1)}peak(){if(!this.isEmpty())return this.items[0]}isEmpty(){return this.items.length==0}printQueue(){for(var e="",a=0;a<this.items.length;a++)e+=this.items[a]+" ";return e}}function isInternetAvailable(r){return new Promise(e=>{console.info("checkingUrl",r);try{fetch(r).then(()=>{e(!0)}).catch(a=>{console.warn("Internet Offline, starting switch to local mode",a),e(!1)})}catch(a){console.warn("Error Checking internet, starting switch to local mode",a),e(!1)}})}window.closeFullscreen=()=>{const r=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(r){const e=()=>{r.classList.remove("fullscreen-open")};document.exitFullscreen?document.exitFullscreen().then(e):document.msExitFullscreen?document.msExitFullscreen().then(e):document.mozCancelFullScreen?document.mozCancelFullScreen().then(e):document.webkitExitFullscreen&&document.webkitExitFullscreen().then(e)}};function toggleFullscreen(r,e){e=e||document.documentElement;var a=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;!a||e!==a?(e.requestFullscreen||e.webkitEnterFullscreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen).apply(e):(document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen).apply(document)}var bufferbuilder={exports:{}};(function(r){var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),r.exports.binaryFeatures=e;var a=r.exports.BlobBuilder;typeof window<"u"&&(a=r.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function t(){this._pieces=[],this._parts=[]}t.prototype.append=function(n){typeof n=="number"?this._pieces.push(n):(this.flush(),this._parts.push(n))},t.prototype.flush=function(){if(this._pieces.length>0){var n=new Uint8Array(this._pieces);e.useArrayBufferView||(n=n.buffer),this._parts.push(n),this._pieces=[]}},t.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var n=new a,s=0,c=this._parts.length;s<c;s++)n.append(this._parts[s]);return n.getBlob()}else return new Blob(this._parts)},r.exports.BufferBuilder=t})(bufferbuilder);var bufferbuilderExports=bufferbuilder.exports,BufferBuilder=bufferbuilderExports.BufferBuilder,binaryFeatures=bufferbuilderExports.binaryFeatures,BinaryPack={unpack:function(r){var e=new Unpacker(r);return e.unpack()},pack:function(r){var e=new Packer;e.pack(r);var a=e.getBuffer();return a}},binarypack=BinaryPack;function Unpacker(r){this.index=0,this.dataBuffer=r,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}Unpacker.prototype.unpack=function(){var r=this.unpack_uint8();if(r<128)return r;if((r^224)<32)return(r^224)-32;var e;if((e=r^160)<=15)return this.unpack_raw(e);if((e=r^176)<=15)return this.unpack_string(e);if((e=r^144)<=15)return this.unpack_array(e);if((e=r^128)<=15)return this.unpack_map(e);switch(r){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}};Unpacker.prototype.unpack_uint8=function(){var r=this.dataView[this.index]&255;return this.index++,r};Unpacker.prototype.unpack_uint16=function(){var r=this.read(2),e=(r[0]&255)*256+(r[1]&255);return this.index+=2,e};Unpacker.prototype.unpack_uint32=function(){var r=this.read(4),e=((r[0]*256+r[1])*256+r[2])*256+r[3];return this.index+=4,e};Unpacker.prototype.unpack_uint64=function(){var r=this.read(8),e=((((((r[0]*256+r[1])*256+r[2])*256+r[3])*256+r[4])*256+r[5])*256+r[6])*256+r[7];return this.index+=8,e};Unpacker.prototype.unpack_int8=function(){var r=this.unpack_uint8();return r<128?r:r-256};Unpacker.prototype.unpack_int16=function(){var r=this.unpack_uint16();return r<32768?r:r-65536};Unpacker.prototype.unpack_int32=function(){var r=this.unpack_uint32();return r<Math.pow(2,31)?r:r-Math.pow(2,32)};Unpacker.prototype.unpack_int64=function(){var r=this.unpack_uint64();return r<Math.pow(2,63)?r:r-Math.pow(2,64)};Unpacker.prototype.unpack_raw=function(r){if(this.length<this.index+r)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+r+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+r);return this.index+=r,e};Unpacker.prototype.unpack_string=function(r){for(var e=this.read(r),a=0,t="",n,s;a<r;)n=e[a],n<128?(t+=String.fromCharCode(n),a++):(n^192)<32?(s=(n^192)<<6|e[a+1]&63,t+=String.fromCharCode(s),a+=2):(s=(n&15)<<12|(e[a+1]&63)<<6|e[a+2]&63,t+=String.fromCharCode(s),a+=3);return this.index+=r,t};Unpacker.prototype.unpack_array=function(r){for(var e=new Array(r),a=0;a<r;a++)e[a]=this.unpack();return e};Unpacker.prototype.unpack_map=function(r){for(var e={},a=0;a<r;a++){var t=this.unpack(),n=this.unpack();e[t]=n}return e};Unpacker.prototype.unpack_float=function(){var r=this.unpack_uint32(),e=r>>31,a=(r>>23&255)-127,t=r&8388607|8388608;return(e===0?1:-1)*t*Math.pow(2,a-23)};Unpacker.prototype.unpack_double=function(){var r=this.unpack_uint32(),e=this.unpack_uint32(),a=r>>31,t=(r>>20&2047)-1023,n=r&1048575|1048576,s=n*Math.pow(2,t-20)+e*Math.pow(2,t-52);return(a===0?1:-1)*s};Unpacker.prototype.read=function(r){var e=this.index;if(e+r<=this.length)return this.dataView.subarray(e,e+r);throw new Error("BinaryPackFailure: read index out of range")};function Packer(){this.bufferBuilder=new BufferBuilder}Packer.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};Packer.prototype.pack=function(r){var e=typeof r;if(e==="string")this.pack_string(r);else if(e==="number")Math.floor(r)===r?this.pack_integer(r):this.pack_double(r);else if(e==="boolean")r===!0?this.bufferBuilder.append(195):r===!1&&this.bufferBuilder.append(194);else if(e==="undefined")this.bufferBuilder.append(192);else if(e==="object")if(r===null)this.bufferBuilder.append(192);else{var a=r.constructor;if(a==Array)this.pack_array(r);else if(a==Blob||a==File||r instanceof Blob||r instanceof File)this.pack_bin(r);else if(a==ArrayBuffer)binaryFeatures.useArrayBufferView?this.pack_bin(new Uint8Array(r)):this.pack_bin(r);else if("BYTES_PER_ELEMENT"in r)binaryFeatures.useArrayBufferView?this.pack_bin(new Uint8Array(r.buffer)):this.pack_bin(r.buffer);else if(a==Object||a.toString().startsWith("class"))this.pack_object(r);else if(a==Date)this.pack_string(r.toString());else if(typeof r.toBinaryPack=="function")this.bufferBuilder.append(r.toBinaryPack());else throw new Error('Type "'+a.toString()+'" not yet supported')}else throw new Error('Type "'+e+'" not yet supported');this.bufferBuilder.flush()};Packer.prototype.pack_bin=function(r){var e=r.length||r.byteLength||r.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(r)};Packer.prototype.pack_string=function(r){var e=utf8Length(r);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(r)};Packer.prototype.pack_array=function(r){var e=r.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(e);else throw new Error("Invalid length");for(var a=0;a<e;a++)this.pack(r[a])};Packer.prototype.pack_integer=function(r){if(r>=-32&&r<=127)this.bufferBuilder.append(r&255);else if(r>=0&&r<=255)this.bufferBuilder.append(204),this.pack_uint8(r);else if(r>=-128&&r<=127)this.bufferBuilder.append(208),this.pack_int8(r);else if(r>=0&&r<=65535)this.bufferBuilder.append(205),this.pack_uint16(r);else if(r>=-32768&&r<=32767)this.bufferBuilder.append(209),this.pack_int16(r);else if(r>=0&&r<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(r);else if(r>=-2147483648&&r<=2147483647)this.bufferBuilder.append(210),this.pack_int32(r);else if(r>=-9223372036854776e3&&r<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(r);else if(r>=0&&r<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(r);else throw new Error("Invalid integer")};Packer.prototype.pack_double=function(r){var e=0;r<0&&(e=1,r=-r);var a=Math.floor(Math.log(r)/Math.LN2),t=r/Math.pow(2,a)-1,n=Math.floor(t*Math.pow(2,52)),s=Math.pow(2,32),c=e<<31|a+1023<<20|n/s&1048575,d=n%s;this.bufferBuilder.append(203),this.pack_int32(c),this.pack_int32(d)};Packer.prototype.pack_object=function(r){var e=Object.keys(r),a=e.length;if(a<=15)this.pack_uint8(128+a);else if(a<=65535)this.bufferBuilder.append(222),this.pack_uint16(a);else if(a<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(a);else throw new Error("Invalid length");for(var t in r)r.hasOwnProperty(t)&&(this.pack(t),this.pack(r[t]))};Packer.prototype.pack_uint8=function(r){this.bufferBuilder.append(r)};Packer.prototype.pack_uint16=function(r){this.bufferBuilder.append(r>>8),this.bufferBuilder.append(r&255)};Packer.prototype.pack_uint32=function(r){var e=r&4294967295;this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};Packer.prototype.pack_uint64=function(r){var e=r/Math.pow(2,32),a=r%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((a&4278190080)>>>24),this.bufferBuilder.append((a&16711680)>>>16),this.bufferBuilder.append((a&65280)>>>8),this.bufferBuilder.append(a&255)};Packer.prototype.pack_int8=function(r){this.bufferBuilder.append(r&255)};Packer.prototype.pack_int16=function(r){this.bufferBuilder.append((r&65280)>>8),this.bufferBuilder.append(r&255)};Packer.prototype.pack_int32=function(r){this.bufferBuilder.append(r>>>24&255),this.bufferBuilder.append((r&16711680)>>>16),this.bufferBuilder.append((r&65280)>>>8),this.bufferBuilder.append(r&255)};Packer.prototype.pack_int64=function(r){var e=Math.floor(r/Math.pow(2,32)),a=r%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((a&4278190080)>>>24),this.bufferBuilder.append((a&16711680)>>>16),this.bufferBuilder.append((a&65280)>>>8),this.bufferBuilder.append(a&255)};function _utf8Replace(r){var e=r.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function utf8Length(r){return r.length>600?new Blob([r]).size:r.replace(/[^\u0000-\u007F]/g,_utf8Replace).length}const $kKvpS$peerjsjsbinarypack=getDefaultExportFromCjs(binarypack);let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(r,e,a){const t=r.match(e);return t&&t.length>=a&&parseInt(t[a],10)}function wrapPeerConnectionEvent(r,e,a){if(!r.RTCPeerConnection)return;const t=r.RTCPeerConnection.prototype,n=t.addEventListener;t.addEventListener=function(c,d){if(c!==e)return n.apply(this,arguments);const u=_=>{const m=a(_);m&&(d.handleEvent?d.handleEvent(m):d(m))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(d,u),n.apply(this,[c,u])};const s=t.removeEventListener;t.removeEventListener=function(c,d){if(c!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(d))return s.apply(this,arguments);const u=this._eventMap[e].get(d);return this._eventMap[e].delete(d),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[c,u])},Object.defineProperty(t,"on"+e,{get(){return this["_on"+e]},set(c){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),c&&this.addEventListener(e,this["_on"+e]=c)},enumerable:!0,configurable:!0})}function disableLog(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(logDisabled_=r,r?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(r){return typeof r!="boolean"?new Error("Argument type: "+typeof r+". Please use a boolean."):(deprecationWarnings_=!r,"adapter.js deprecation warnings "+(r?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(r,e){deprecationWarnings_&&console.warn(r+" is deprecated, please use "+e+" instead.")}function detectBrowser(r){const e={browser:null,version:null};if(typeof r>"u"||!r.navigator)return e.browser="Not a browser.",e;const{navigator:a}=r;if(a.mozGetUserMedia)e.browser="firefox",e.version=extractVersion(a.userAgent,/Firefox\/(\d+)\./,1);else if(a.webkitGetUserMedia||r.isSecureContext===!1&&r.webkitRTCPeerConnection&&!r.RTCIceGatherer)e.browser="chrome",e.version=extractVersion(a.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(a.mediaDevices&&a.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=extractVersion(a.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(r.RTCPeerConnection&&a.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=extractVersion(a.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=r.RTCRtpTransceiver&&"currentDirection"in r.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function isObject(r){return Object.prototype.toString.call(r)==="[object Object]"}function compactObject(r){return isObject(r)?Object.keys(r).reduce(function(e,a){const t=isObject(r[a]),n=t?compactObject(r[a]):r[a],s=t&&!Object.keys(n).length;return n===void 0||s?e:Object.assign(e,{[a]:n})},{}):r}function walkStats(r,e,a){!e||a.has(e.id)||(a.set(e.id,e),Object.keys(e).forEach(t=>{t.endsWith("Id")?walkStats(r,r.get(e[t]),a):t.endsWith("Ids")&&e[t].forEach(n=>{walkStats(r,r.get(n),a)})}))}function filterStats(r,e,a){const t=a?"outbound-rtp":"inbound-rtp",n=new Map;if(e===null)return n;const s=[];return r.forEach(c=>{c.type==="track"&&c.trackIdentifier===e.id&&s.push(c)}),s.forEach(c=>{r.forEach(d=>{d.type===t&&d.trackId===c.id&&walkStats(r,d,n)})}),n}const logging=log;function shimGetUserMedia$3(r,e){const a=r&&r.navigator;if(!a.mediaDevices)return;const t=function(d){if(typeof d!="object"||d.mandatory||d.optional)return d;const u={};return Object.keys(d).forEach(_=>{if(_==="require"||_==="advanced"||_==="mediaSource")return;const m=typeof d[_]=="object"?d[_]:{ideal:d[_]};m.exact!==void 0&&typeof m.exact=="number"&&(m.min=m.max=m.exact);const g=function(b,S){return b?b+S.charAt(0).toUpperCase()+S.slice(1):S==="deviceId"?"sourceId":S};if(m.ideal!==void 0){u.optional=u.optional||[];let b={};typeof m.ideal=="number"?(b[g("min",_)]=m.ideal,u.optional.push(b),b={},b[g("max",_)]=m.ideal,u.optional.push(b)):(b[g("",_)]=m.ideal,u.optional.push(b))}m.exact!==void 0&&typeof m.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[g("",_)]=m.exact):["min","max"].forEach(b=>{m[b]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[g(b,_)]=m[b])})}),d.advanced&&(u.optional=(u.optional||[]).concat(d.advanced)),u},n=function(d,u){if(e.version>=61)return u(d);if(d=JSON.parse(JSON.stringify(d)),d&&typeof d.audio=="object"){const _=function(m,g,b){g in m&&!(b in m)&&(m[b]=m[g],delete m[g])};d=JSON.parse(JSON.stringify(d)),_(d.audio,"autoGainControl","googAutoGainControl"),_(d.audio,"noiseSuppression","googNoiseSuppression"),d.audio=t(d.audio)}if(d&&typeof d.video=="object"){let _=d.video.facingMode;_=_&&(typeof _=="object"?_:{ideal:_});const m=e.version<66;if(_&&(_.exact==="user"||_.exact==="environment"||_.ideal==="user"||_.ideal==="environment")&&!(a.mediaDevices.getSupportedConstraints&&a.mediaDevices.getSupportedConstraints().facingMode&&!m)){delete d.video.facingMode;let g;if(_.exact==="environment"||_.ideal==="environment"?g=["back","rear"]:(_.exact==="user"||_.ideal==="user")&&(g=["front"]),g)return a.mediaDevices.enumerateDevices().then(b=>{b=b.filter(C=>C.kind==="videoinput");let S=b.find(C=>g.some(k=>C.label.toLowerCase().includes(k)));return!S&&b.length&&g.includes("back")&&(S=b[b.length-1]),S&&(d.video.deviceId=_.exact?{exact:S.deviceId}:{ideal:S.deviceId}),d.video=t(d.video),logging("chrome: "+JSON.stringify(d)),u(d)})}d.video=t(d.video)}return logging("chrome: "+JSON.stringify(d)),u(d)},s=function(d){return e.version>=64?d:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[d.name]||d.name,message:d.message,constraint:d.constraint||d.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},c=function(d,u,_){n(d,m=>{a.webkitGetUserMedia(m,u,g=>{_&&_(s(g))})})};if(a.getUserMedia=c.bind(a),a.mediaDevices.getUserMedia){const d=a.mediaDevices.getUserMedia.bind(a.mediaDevices);a.mediaDevices.getUserMedia=function(u){return n(u,_=>d(_).then(m=>{if(_.audio&&!m.getAudioTracks().length||_.video&&!m.getVideoTracks().length)throw m.getTracks().forEach(g=>{g.stop()}),new DOMException("","NotFoundError");return m},m=>Promise.reject(s(m))))}}}function shimGetDisplayMedia$2(r,e){if(!(r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices)&&r.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}r.navigator.mediaDevices.getDisplayMedia=function(t){return e(t).then(n=>{const s=t.video&&t.video.width,c=t.video&&t.video.height,d=t.video&&t.video.frameRate;return t.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:n,maxFrameRate:d||3}},s&&(t.video.mandatory.maxWidth=s),c&&(t.video.mandatory.maxHeight=c),r.navigator.mediaDevices.getUserMedia(t)})}}}function shimMediaStream(r){r.MediaStream=r.MediaStream||r.webkitMediaStream}function shimOnTrack$1(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("ontrack"in r.RTCPeerConnection.prototype)){Object.defineProperty(r.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(a){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=a)},enumerable:!0,configurable:!0});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let s;r.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(d=>d.track&&d.track.id===n.track.id):s={track:n.track};const c=new Event("track");c.track=n.track,c.receiver=s,c.transceiver={receiver:s},c.streams=[t.stream],this.dispatchEvent(c)}),t.stream.getTracks().forEach(n=>{let s;r.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(d=>d.track&&d.track.id===n.id):s={track:n};const c=new Event("track");c.track=n,c.receiver=s,c.transceiver={receiver:s},c.streams=[t.stream],this.dispatchEvent(c)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else wrapPeerConnectionEvent(r,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function shimGetSendersWithDtmf(r){if(typeof r=="object"&&r.RTCPeerConnection&&!("getSenders"in r.RTCPeerConnection.prototype)&&"createDTMFSender"in r.RTCPeerConnection.prototype){const e=function(n,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=n.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:n}};if(!r.RTCPeerConnection.prototype.getSenders){r.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(d,u){let _=n.apply(this,arguments);return _||(_=e(this,d),this._senders.push(_)),_};const s=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(d){s.apply(this,arguments);const u=this._senders.indexOf(d);u!==-1&&this._senders.splice(u,1)}}const a=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],a.apply(this,[s]),s.getTracks().forEach(c=>{this._senders.push(e(this,c))})};const t=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],t.apply(this,[s]),s.getTracks().forEach(c=>{const d=this._senders.find(u=>u.track===c);d&&this._senders.splice(this._senders.indexOf(d),1)})}}else if(typeof r=="object"&&r.RTCPeerConnection&&"getSenders"in r.RTCPeerConnection.prototype&&"createDTMFSender"in r.RTCPeerConnection.prototype&&r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)){const e=r.RTCPeerConnection.prototype.getSenders;r.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach(n=>n._pc=this),t},Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[t,n,s]=arguments;if(arguments.length>0&&typeof t=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof t!="function"))return e.apply(this,[]);const c=function(u){const _={};return u.result().forEach(g=>{const b={id:g.id,timestamp:g.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[g.type]||g.type};g.names().forEach(S=>{b[S]=g.stat(S)}),_[b.id]=b}),_},d=function(u){return new Map(Object.keys(u).map(_=>[_,u[_]]))};if(arguments.length>=2){const u=function(_){n(d(c(_)))};return e.apply(this,[u,t])}return new Promise((u,_)=>{e.apply(this,[function(m){u(d(c(m)))},_])}).then(n,s)}}function shimSenderReceiverGetStats(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender&&r.RTCRtpReceiver))return;if(!("getStats"in r.RTCRtpSender.prototype)){const a=r.RTCPeerConnection.prototype.getSenders;a&&(r.RTCPeerConnection.prototype.getSenders=function(){const s=a.apply(this,[]);return s.forEach(c=>c._pc=this),s});const t=r.RTCPeerConnection.prototype.addTrack;t&&(r.RTCPeerConnection.prototype.addTrack=function(){const s=t.apply(this,arguments);return s._pc=this,s}),r.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(c=>filterStats(c,s.track,!0))}}if(!("getStats"in r.RTCRtpReceiver.prototype)){const a=r.RTCPeerConnection.prototype.getReceivers;a&&(r.RTCPeerConnection.prototype.getReceivers=function(){const n=a.apply(this,[]);return n.forEach(s=>s._pc=this),n}),wrapPeerConnectionEvent(r,"track",t=>(t.receiver._pc=t.srcElement,t)),r.RTCRtpReceiver.prototype.getStats=function(){const n=this;return this._pc.getStats().then(s=>filterStats(s,n.track,!1))}}if(!("getStats"in r.RTCRtpSender.prototype&&"getStats"in r.RTCRtpReceiver.prototype))return;const e=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof r.MediaStreamTrack){const t=arguments[0];let n,s,c;return this.getSenders().forEach(d=>{d.track===t&&(n?c=!0:n=d)}),this.getReceivers().forEach(d=>(d.track===t&&(s?c=!0:s=d),d.track===t)),c||n&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(r){r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(c=>this._shimmedLocalStreams[c][0])};const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addTrack=function(c,d){if(!d)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=e.apply(this,arguments);return this._shimmedLocalStreams[d.id]?this._shimmedLocalStreams[d.id].indexOf(u)===-1&&this._shimmedLocalStreams[d.id].push(u):this._shimmedLocalStreams[d.id]=[d,u],u};const a=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(c){this._shimmedLocalStreams=this._shimmedLocalStreams||{},c.getTracks().forEach(_=>{if(this.getSenders().find(g=>g.track===_))throw new DOMException("Track already exists.","InvalidAccessError")});const d=this.getSenders();a.apply(this,arguments);const u=this.getSenders().filter(_=>d.indexOf(_)===-1);this._shimmedLocalStreams[c.id]=[c].concat(u)};const t=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[c.id],t.apply(this,arguments)};const n=r.RTCPeerConnection.prototype.removeTrack;r.RTCPeerConnection.prototype.removeTrack=function(c){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},c&&Object.keys(this._shimmedLocalStreams).forEach(d=>{const u=this._shimmedLocalStreams[d].indexOf(c);u!==-1&&this._shimmedLocalStreams[d].splice(u,1),this._shimmedLocalStreams[d].length===1&&delete this._shimmedLocalStreams[d]}),n.apply(this,arguments)}}function shimAddTrackRemoveTrack(r,e){if(!r.RTCPeerConnection)return;if(r.RTCPeerConnection.prototype.addTrack&&e.version>=65)return shimAddTrackRemoveTrackWithNative(r);const a=r.RTCPeerConnection.prototype.getLocalStreams;r.RTCPeerConnection.prototype.getLocalStreams=function(){const m=a.apply(this);return this._reverseStreams=this._reverseStreams||{},m.map(g=>this._reverseStreams[g.id])};const t=r.RTCPeerConnection.prototype.addStream;r.RTCPeerConnection.prototype.addStream=function(m){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},m.getTracks().forEach(g=>{if(this.getSenders().find(S=>S.track===g))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[m.id]){const g=new r.MediaStream(m.getTracks());this._streams[m.id]=g,this._reverseStreams[g.id]=m,m=g}t.apply(this,[m])};const n=r.RTCPeerConnection.prototype.removeStream;r.RTCPeerConnection.prototype.removeStream=function(m){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[m.id]||m]),delete this._reverseStreams[this._streams[m.id]?this._streams[m.id].id:m.id],delete this._streams[m.id]},r.RTCPeerConnection.prototype.addTrack=function(m,g){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const b=[].slice.call(arguments,1);if(b.length!==1||!b[0].getTracks().find(k=>k===m))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(k=>k.track===m))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const C=this._streams[g.id];if(C)C.addTrack(m),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const k=new r.MediaStream([m]);this._streams[g.id]=k,this._reverseStreams[k.id]=g,this.addStream(k)}return this.getSenders().find(k=>k.track===m)};function s(_,m){let g=m.sdp;return Object.keys(_._reverseStreams||[]).forEach(b=>{const S=_._reverseStreams[b],C=_._streams[S.id];g=g.replace(new RegExp(C.id,"g"),S.id)}),new RTCSessionDescription({type:m.type,sdp:g})}function c(_,m){let g=m.sdp;return Object.keys(_._reverseStreams||[]).forEach(b=>{const S=_._reverseStreams[b],C=_._streams[S.id];g=g.replace(new RegExp(S.id,"g"),C.id)}),new RTCSessionDescription({type:m.type,sdp:g})}["createOffer","createAnswer"].forEach(function(_){const m=r.RTCPeerConnection.prototype[_],g={[_](){const b=arguments;return arguments.length&&typeof arguments[0]=="function"?m.apply(this,[C=>{const k=s(this,C);b[0].apply(null,[k])},C=>{b[1]&&b[1].apply(null,C)},arguments[2]]):m.apply(this,arguments).then(C=>s(this,C))}};r.RTCPeerConnection.prototype[_]=g[_]});const d=r.RTCPeerConnection.prototype.setLocalDescription;r.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?d.apply(this,arguments):(arguments[0]=c(this,arguments[0]),d.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(r.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(r.RTCPeerConnection.prototype,"localDescription",{get(){const _=u.get.apply(this);return _.type===""?_:s(this,_)}}),r.RTCPeerConnection.prototype.removeTrack=function(m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!m._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(m._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let b;Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(k=>m.track===k)&&(b=this._streams[S])}),b&&(b.getTracks().length===1?this.removeStream(this._reverseStreams[b.id]):b.removeTrack(m.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$2(r,e){!r.RTCPeerConnection&&r.webkitRTCPeerConnection&&(r.RTCPeerConnection=r.webkitRTCPeerConnection),r.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const t=r.RTCPeerConnection.prototype[a],n={[a](){return arguments[0]=new(a==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}};r.RTCPeerConnection.prototype[a]=n[a]})}function fixNegotiationNeeded(r,e){wrapPeerConnectionEvent(r,"negotiationneeded",a=>{const t=a.target;if(!((e.version<72||t.getConfiguration&&t.getConfiguration().sdpSemantics==="plan-b")&&t.signalingState!=="stable"))return a})}const chromeShim=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded,shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative,shimGetDisplayMedia:shimGetDisplayMedia$2,shimGetSendersWithDtmf,shimGetStats,shimGetUserMedia:shimGetUserMedia$3,shimMediaStream,shimOnTrack:shimOnTrack$1,shimPeerConnection:shimPeerConnection$2,shimSenderReceiverGetStats},Symbol.toStringTag,{value:"Module"}));function filterIceServers$1(r,e){let a=!1;return r=JSON.parse(JSON.stringify(r)),r.filter(t=>{if(t&&(t.urls||t.url)){let n=t.urls||t.url;t.url&&!t.urls&&deprecated("RTCIceServer.url","RTCIceServer.urls");const s=typeof n=="string";return s&&(n=[n]),n=n.filter(c=>{if(c.indexOf("stun:")===0)return!1;const d=c.startsWith("turn")&&!c.startsWith("turn:[")&&c.includes("transport=udp");return d&&!a?(a=!0,!0):d&&!a}),delete t.url,t.urls=s?n[0]:n,!!n.length}})}var sdp={exports:{}};(function(r){var e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(a){return a.trim().split(`
`).map(function(t){return t.trim()})},e.splitSections=function(a){var t=a.split(`
m=`);return t.map(function(n,s){return(s>0?"m="+n:n).trim()+`\r
`})},e.getDescription=function(a){var t=e.splitSections(a);return t&&t[0]},e.getMediaSections=function(a){var t=e.splitSections(a);return t.shift(),t},e.matchPrefix=function(a,t){return e.splitLines(a).filter(function(n){return n.indexOf(t)===0})},e.parseCandidate=function(a){var t;a.indexOf("a=candidate:")===0?t=a.substring(12).split(" "):t=a.substring(10).split(" ");for(var n={foundation:t[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},s=8;s<t.length;s+=2)switch(t[s]){case"raddr":n.relatedAddress=t[s+1];break;case"rport":n.relatedPort=parseInt(t[s+1],10);break;case"tcptype":n.tcpType=t[s+1];break;case"ufrag":n.ufrag=t[s+1],n.usernameFragment=t[s+1];break;default:n[t[s]]=t[s+1];break}return n},e.writeCandidate=function(a){var t=[];t.push(a.foundation),t.push(a.component),t.push(a.protocol.toUpperCase()),t.push(a.priority),t.push(a.address||a.ip),t.push(a.port);var n=a.type;return t.push("typ"),t.push(n),n!=="host"&&a.relatedAddress&&a.relatedPort&&(t.push("raddr"),t.push(a.relatedAddress),t.push("rport"),t.push(a.relatedPort)),a.tcpType&&a.protocol.toLowerCase()==="tcp"&&(t.push("tcptype"),t.push(a.tcpType)),(a.usernameFragment||a.ufrag)&&(t.push("ufrag"),t.push(a.usernameFragment||a.ufrag)),"candidate:"+t.join(" ")},e.parseIceOptions=function(a){return a.substr(14).split(" ")},e.parseRtpMap=function(a){var t=a.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=t.length===3?parseInt(t[2],10):1,n.numChannels=n.channels,n},e.writeRtpMap=function(a){var t=a.payloadType;a.preferredPayloadType!==void 0&&(t=a.preferredPayloadType);var n=a.channels||a.numChannels||1;return"a=rtpmap:"+t+" "+a.name+"/"+a.clockRate+(n!==1?"/"+n:"")+`\r
`},e.parseExtmap=function(a){var t=a.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},e.writeExtmap=function(a){return"a=extmap:"+(a.id||a.preferredId)+(a.direction&&a.direction!=="sendrecv"?"/"+a.direction:"")+" "+a.uri+`\r
`},e.parseFmtp=function(a){for(var t={},n,s=a.substr(a.indexOf(" ")+1).split(";"),c=0;c<s.length;c++)n=s[c].trim().split("="),t[n[0].trim()]=n[1];return t},e.writeFmtp=function(a){var t="",n=a.payloadType;if(a.preferredPayloadType!==void 0&&(n=a.preferredPayloadType),a.parameters&&Object.keys(a.parameters).length){var s=[];Object.keys(a.parameters).forEach(function(c){a.parameters[c]?s.push(c+"="+a.parameters[c]):s.push(c)}),t+="a=fmtp:"+n+" "+s.join(";")+`\r
`}return t},e.parseRtcpFb=function(a){var t=a.substr(a.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},e.writeRtcpFb=function(a){var t="",n=a.payloadType;return a.preferredPayloadType!==void 0&&(n=a.preferredPayloadType),a.rtcpFeedback&&a.rtcpFeedback.length&&a.rtcpFeedback.forEach(function(s){t+="a=rtcp-fb:"+n+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),t},e.parseSsrcMedia=function(a){var t=a.indexOf(" "),n={ssrc:parseInt(a.substr(7,t-7),10)},s=a.indexOf(":",t);return s>-1?(n.attribute=a.substr(t+1,s-t-1),n.value=a.substr(s+1)):n.attribute=a.substr(t+1),n},e.parseSsrcGroup=function(a){var t=a.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(function(n){return parseInt(n,10)})}},e.getMid=function(a){var t=e.matchPrefix(a,"a=mid:")[0];if(t)return t.substr(6)},e.parseFingerprint=function(a){var t=a.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},e.getDtlsParameters=function(a,t){var n=e.matchPrefix(a+t,"a=fingerprint:");return{role:"auto",fingerprints:n.map(e.parseFingerprint)}},e.writeDtlsParameters=function(a,t){var n="a=setup:"+t+`\r
`;return a.fingerprints.forEach(function(s){n+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),n},e.parseCryptoLine=function(a){var t=a.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},e.writeCryptoLine=function(a){return"a=crypto:"+a.tag+" "+a.cryptoSuite+" "+(typeof a.keyParams=="object"?e.writeCryptoKeyParams(a.keyParams):a.keyParams)+(a.sessionParams?" "+a.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(a){if(a.indexOf("inline:")!==0)return null;var t=a.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(a){return a.keyMethod+":"+a.keySalt+(a.lifeTime?"|"+a.lifeTime:"")+(a.mkiValue&&a.mkiLength?"|"+a.mkiValue+":"+a.mkiLength:"")},e.getCryptoParameters=function(a,t){var n=e.matchPrefix(a+t,"a=crypto:");return n.map(e.parseCryptoLine)},e.getIceParameters=function(a,t){var n=e.matchPrefix(a+t,"a=ice-ufrag:")[0],s=e.matchPrefix(a+t,"a=ice-pwd:")[0];return n&&s?{usernameFragment:n.substr(12),password:s.substr(10)}:null},e.writeIceParameters=function(a){return"a=ice-ufrag:"+a.usernameFragment+`\r
a=ice-pwd:`+a.password+`\r
`},e.parseRtpParameters=function(a){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=e.splitLines(a),s=n[0].split(" "),c=3;c<s.length;c++){var d=s[c],u=e.matchPrefix(a,"a=rtpmap:"+d+" ")[0];if(u){var _=e.parseRtpMap(u),m=e.matchPrefix(a,"a=fmtp:"+d+" ");switch(_.parameters=m.length?e.parseFmtp(m[0]):{},_.rtcpFeedback=e.matchPrefix(a,"a=rtcp-fb:"+d+" ").map(e.parseRtcpFb),t.codecs.push(_),_.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(_.name.toUpperCase());break}}}return e.matchPrefix(a,"a=extmap:").forEach(function(g){t.headerExtensions.push(e.parseExtmap(g))}),t},e.writeRtpDescription=function(a,t){var n="";n+="m="+a+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map(function(c){return c.preferredPayloadType!==void 0?c.preferredPayloadType:c.payloadType}).join(" ")+`\r
`,n+=`c=IN IP4 0.0.0.0\r
`,n+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,t.codecs.forEach(function(c){n+=e.writeRtpMap(c),n+=e.writeFmtp(c),n+=e.writeRtcpFb(c)});var s=0;return t.codecs.forEach(function(c){c.maxptime>s&&(s=c.maxptime)}),s>0&&(n+="a=maxptime:"+s+`\r
`),n+=`a=rtcp-mux\r
`,t.headerExtensions&&t.headerExtensions.forEach(function(c){n+=e.writeExtmap(c)}),n},e.parseRtpEncodingParameters=function(a){var t=[],n=e.parseRtpParameters(a),s=n.fecMechanisms.indexOf("RED")!==-1,c=n.fecMechanisms.indexOf("ULPFEC")!==-1,d=e.matchPrefix(a,"a=ssrc:").map(function(b){return e.parseSsrcMedia(b)}).filter(function(b){return b.attribute==="cname"}),u=d.length>0&&d[0].ssrc,_,m=e.matchPrefix(a,"a=ssrc-group:FID").map(function(b){var S=b.substr(17).split(" ");return S.map(function(C){return parseInt(C,10)})});m.length>0&&m[0].length>1&&m[0][0]===u&&(_=m[0][1]),n.codecs.forEach(function(b){if(b.name.toUpperCase()==="RTX"&&b.parameters.apt){var S={ssrc:u,codecPayloadType:parseInt(b.parameters.apt,10)};u&&_&&(S.rtx={ssrc:_}),t.push(S),s&&(S=JSON.parse(JSON.stringify(S)),S.fec={ssrc:u,mechanism:c?"red+ulpfec":"red"},t.push(S))}}),t.length===0&&u&&t.push({ssrc:u});var g=e.matchPrefix(a,"b=");return g.length&&(g[0].indexOf("b=TIAS:")===0?g=parseInt(g[0].substr(7),10):g[0].indexOf("b=AS:")===0?g=parseInt(g[0].substr(5),10)*1e3*.95-50*40*8:g=void 0,t.forEach(function(b){b.maxBitrate=g})),t},e.parseRtcpParameters=function(a){var t={},n=e.matchPrefix(a,"a=ssrc:").map(function(d){return e.parseSsrcMedia(d)}).filter(function(d){return d.attribute==="cname"})[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var s=e.matchPrefix(a,"a=rtcp-rsize");t.reducedSize=s.length>0,t.compound=s.length===0;var c=e.matchPrefix(a,"a=rtcp-mux");return t.mux=c.length>0,t},e.parseMsid=function(a){var t,n=e.matchPrefix(a,"a=msid:");if(n.length===1)return t=n[0].substr(7).split(" "),{stream:t[0],track:t[1]};var s=e.matchPrefix(a,"a=ssrc:").map(function(c){return e.parseSsrcMedia(c)}).filter(function(c){return c.attribute==="msid"});if(s.length>0)return t=s[0].value.split(" "),{stream:t[0],track:t[1]}},e.parseSctpDescription=function(a){var t=e.parseMLine(a),n=e.matchPrefix(a,"a=max-message-size:"),s;n.length>0&&(s=parseInt(n[0].substr(19),10)),isNaN(s)&&(s=65536);var c=e.matchPrefix(a,"a=sctp-port:");if(c.length>0)return{port:parseInt(c[0].substr(12),10),protocol:t.fmt,maxMessageSize:s};var d=e.matchPrefix(a,"a=sctpmap:");if(d.length>0){var u=e.matchPrefix(a,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:s}}},e.writeSctpDescription=function(a,t){var n=[];return a.protocol!=="DTLS/SCTP"?n=["m="+a.kind+" 9 "+a.protocol+" "+t.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+t.port+`\r
`]:n=["m="+a.kind+" 9 "+a.protocol+" "+t.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+t.port+" "+t.protocol+` 65535\r
`],t.maxMessageSize!==void 0&&n.push("a=max-message-size:"+t.maxMessageSize+`\r
`),n.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(a,t,n){var s,c=t!==void 0?t:2;a?s=a:s=e.generateSessionId();var d=n||"thisisadapterortc";return`v=0\r
o=`+d+" "+s+" "+c+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(a,t,n,s){var c=e.writeRtpDescription(a.kind,t);if(c+=e.writeIceParameters(a.iceGatherer.getLocalParameters()),c+=e.writeDtlsParameters(a.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":"active"),c+="a=mid:"+a.mid+`\r
`,a.direction?c+="a="+a.direction+`\r
`:a.rtpSender&&a.rtpReceiver?c+=`a=sendrecv\r
`:a.rtpSender?c+=`a=sendonly\r
`:a.rtpReceiver?c+=`a=recvonly\r
`:c+=`a=inactive\r
`,a.rtpSender){var d="msid:"+s.id+" "+a.rtpSender.track.id+`\r
`;c+="a="+d,c+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" "+d,a.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" "+d,c+="a=ssrc-group:FID "+a.sendEncodingParameters[0].ssrc+" "+a.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return c+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,a.rtpSender&&a.sendEncodingParameters[0].rtx&&(c+="a=ssrc:"+a.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),c},e.getDirection=function(a,t){for(var n=e.splitLines(a),s=0;s<n.length;s++)switch(n[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[s].substr(2)}return t?e.getDirection(t):"sendrecv"},e.getKind=function(a){var t=e.splitLines(a),n=t[0].split(" ");return n[0].substr(2)},e.isRejected=function(a){return a.split(" ",2)[1]==="0"},e.parseMLine=function(a){var t=e.splitLines(a),n=t[0].substr(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},e.parseOLine=function(a){var t=e.matchPrefix(a,"o=")[0],n=t.substr(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},e.isValidSDP=function(a){if(typeof a!="string"||a.length===0)return!1;for(var t=e.splitLines(a),n=0;n<t.length;n++)if(t[n].length<2||t[n].charAt(1)!=="=")return!1;return!0},r.exports=e})(sdp);var sdpExports=sdp.exports;const SDPUtils$1=getDefaultExportFromCjs(sdpExports);var SDPUtils=sdpExports;function fixStatsType(r){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[r.type]||r.type}function writeMediaSection(r,e,a,t,n){var s=SDPUtils.writeRtpDescription(r.kind,e);if(s+=SDPUtils.writeIceParameters(r.iceGatherer.getLocalParameters()),s+=SDPUtils.writeDtlsParameters(r.dtlsTransport.getLocalParameters(),a==="offer"?"actpass":n||"active"),s+="a=mid:"+r.mid+`\r
`,r.rtpSender&&r.rtpReceiver?s+=`a=sendrecv\r
`:r.rtpSender?s+=`a=sendonly\r
`:r.rtpReceiver?s+=`a=recvonly\r
`:s+=`a=inactive\r
`,r.rtpSender){var c=r.rtpSender._initialTrackId||r.rtpSender.track.id;r.rtpSender._initialTrackId=c;var d="msid:"+(t?t.id:"-")+" "+c+`\r
`;s+="a="+d,s+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" "+d,r.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" "+d,s+="a=ssrc-group:FID "+r.sendEncodingParameters[0].ssrc+" "+r.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return s+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" cname:"+SDPUtils.localCName+`\r
`,r.rtpSender&&r.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" cname:"+SDPUtils.localCName+`\r
`),s}function filterIceServers(r,e){var a=!1;return r=JSON.parse(JSON.stringify(r)),r.filter(function(t){if(t&&(t.urls||t.url)){var n=t.urls||t.url;t.url&&!t.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var s=typeof n=="string";return s&&(n=[n]),n=n.filter(function(c){var d=c.indexOf("turn:")===0&&c.indexOf("transport=udp")!==-1&&c.indexOf("turn:[")===-1&&!a;return d?(a=!0,!0):c.indexOf("stun:")===0&&e>=14393&&c.indexOf("?transport=udp")===-1}),delete t.url,t.urls=s?n[0]:n,!!n.length}})}function getCommonCapabilities(r,e){var a={codecs:[],headerExtensions:[],fecMechanisms:[]},t=function(s,c){s=parseInt(s,10);for(var d=0;d<c.length;d++)if(c[d].payloadType===s||c[d].preferredPayloadType===s)return c[d]},n=function(s,c,d,u){var _=t(s.parameters.apt,d),m=t(c.parameters.apt,u);return _&&m&&_.name.toLowerCase()===m.name.toLowerCase()};return r.codecs.forEach(function(s){for(var c=0;c<e.codecs.length;c++){var d=e.codecs[c];if(s.name.toLowerCase()===d.name.toLowerCase()&&s.clockRate===d.clockRate){if(s.name.toLowerCase()==="rtx"&&s.parameters&&d.parameters.apt&&!n(s,d,r.codecs,e.codecs))continue;d=JSON.parse(JSON.stringify(d)),d.numChannels=Math.min(s.numChannels,d.numChannels),a.codecs.push(d),d.rtcpFeedback=d.rtcpFeedback.filter(function(u){for(var _=0;_<s.rtcpFeedback.length;_++)if(s.rtcpFeedback[_].type===u.type&&s.rtcpFeedback[_].parameter===u.parameter)return!0;return!1});break}}}),r.headerExtensions.forEach(function(s){for(var c=0;c<e.headerExtensions.length;c++){var d=e.headerExtensions[c];if(s.uri===d.uri){a.headerExtensions.push(d);break}}}),a}function isActionAllowedInSignalingState(r,e,a){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][r].indexOf(a)!==-1}function maybeAddCandidate(r,e){var a=r.getRemoteCandidates().find(function(t){return e.foundation===t.foundation&&e.ip===t.ip&&e.port===t.port&&e.priority===t.priority&&e.protocol===t.protocol&&e.type===t.type});return a||r.addRemoteCandidate(e),!a}function makeError(r,e){var a=new Error(e);return a.name=r,a.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[r],a}var rtcpeerconnection=function(r,e){function a(u,_){_.addTrack(u),_.dispatchEvent(new r.MediaStreamTrackEvent("addtrack",{track:u}))}function t(u,_){_.removeTrack(u),_.dispatchEvent(new r.MediaStreamTrackEvent("removetrack",{track:u}))}function n(u,_,m,g){var b=new Event("track");b.track=_,b.receiver=m,b.transceiver={receiver:m},b.streams=g,r.setTimeout(function(){u._dispatchEvent("track",b)})}var s=function(u){var _=this,m=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(b){_[b]=m[b].bind(m)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",u=JSON.parse(JSON.stringify(u||{})),this.usingBundle=u.bundlePolicy==="max-bundle",u.rtcpMuxPolicy==="negotiate")throw makeError("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(u.rtcpMuxPolicy||(u.rtcpMuxPolicy="require"),u.iceTransportPolicy){case"all":case"relay":break;default:u.iceTransportPolicy="all";break}switch(u.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:u.bundlePolicy="balanced";break}if(u.iceServers=filterIceServers(u.iceServers||[],e),this._iceGatherers=[],u.iceCandidatePoolSize)for(var g=u.iceCandidatePoolSize;g>0;g--)this._iceGatherers.push(new r.RTCIceGatherer({iceServers:u.iceServers,gatherPolicy:u.iceTransportPolicy}));else u.iceCandidatePoolSize=0;this._config=u,this.transceivers=[],this._sdpSessionId=SDPUtils.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(s.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(s.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),s.prototype.onicecandidate=null,s.prototype.onaddstream=null,s.prototype.ontrack=null,s.prototype.onremovestream=null,s.prototype.onsignalingstatechange=null,s.prototype.oniceconnectionstatechange=null,s.prototype.onconnectionstatechange=null,s.prototype.onicegatheringstatechange=null,s.prototype.onnegotiationneeded=null,s.prototype.ondatachannel=null,s.prototype._dispatchEvent=function(u,_){this._isClosed||(this.dispatchEvent(_),typeof this["on"+u]=="function"&&this["on"+u](_))},s.prototype._emitGatheringStateChange=function(){var u=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",u)},s.prototype.getConfiguration=function(){return this._config},s.prototype.getLocalStreams=function(){return this.localStreams},s.prototype.getRemoteStreams=function(){return this.remoteStreams},s.prototype._createTransceiver=function(u,_){var m=this.transceivers.length>0,g={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:u,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&m)g.iceTransport=this.transceivers[0].iceTransport,g.dtlsTransport=this.transceivers[0].dtlsTransport;else{var b=this._createIceAndDtlsTransports();g.iceTransport=b.iceTransport,g.dtlsTransport=b.dtlsTransport}return _||this.transceivers.push(g),g},s.prototype.addTrack=function(u,_){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var m=this.transceivers.find(function(S){return S.track===u});if(m)throw makeError("InvalidAccessError","Track already exists.");for(var g,b=0;b<this.transceivers.length;b++)!this.transceivers[b].track&&this.transceivers[b].kind===u.kind&&(g=this.transceivers[b]);return g||(g=this._createTransceiver(u.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(_)===-1&&this.localStreams.push(_),g.track=u,g.stream=_,g.rtpSender=new r.RTCRtpSender(u,g.dtlsTransport),g.rtpSender},s.prototype.addStream=function(u){var _=this;if(e>=15025)u.getTracks().forEach(function(g){_.addTrack(g,u)});else{var m=u.clone();u.getTracks().forEach(function(g,b){var S=m.getTracks()[b];g.addEventListener("enabled",function(C){S.enabled=C.enabled})}),m.getTracks().forEach(function(g){_.addTrack(g,m)})}},s.prototype.removeTrack=function(u){if(this._isClosed)throw makeError("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(u instanceof r.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var _=this.transceivers.find(function(b){return b.rtpSender===u});if(!_)throw makeError("InvalidAccessError","Sender was not created by this connection.");var m=_.stream;_.rtpSender.stop(),_.rtpSender=null,_.track=null,_.stream=null;var g=this.transceivers.map(function(b){return b.stream});g.indexOf(m)===-1&&this.localStreams.indexOf(m)>-1&&this.localStreams.splice(this.localStreams.indexOf(m),1),this._maybeFireNegotiationNeeded()},s.prototype.removeStream=function(u){var _=this;u.getTracks().forEach(function(m){var g=_.getSenders().find(function(b){return b.track===m});g&&_.removeTrack(g)})},s.prototype.getSenders=function(){return this.transceivers.filter(function(u){return!!u.rtpSender}).map(function(u){return u.rtpSender})},s.prototype.getReceivers=function(){return this.transceivers.filter(function(u){return!!u.rtpReceiver}).map(function(u){return u.rtpReceiver})},s.prototype._createIceGatherer=function(u,_){var m=this;if(_&&u>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var g=new r.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(g,"state",{value:"new",writable:!0}),this.transceivers[u].bufferedCandidateEvents=[],this.transceivers[u].bufferCandidates=function(b){var S=!b.candidate||Object.keys(b.candidate).length===0;g.state=S?"completed":"gathering",m.transceivers[u].bufferedCandidateEvents!==null&&m.transceivers[u].bufferedCandidateEvents.push(b)},g.addEventListener("localcandidate",this.transceivers[u].bufferCandidates),g},s.prototype._gather=function(u,_){var m=this,g=this.transceivers[_].iceGatherer;if(!g.onlocalcandidate){var b=this.transceivers[_].bufferedCandidateEvents;this.transceivers[_].bufferedCandidateEvents=null,g.removeEventListener("localcandidate",this.transceivers[_].bufferCandidates),g.onlocalcandidate=function(S){if(!(m.usingBundle&&_>0)){var C=new Event("icecandidate");C.candidate={sdpMid:u,sdpMLineIndex:_};var k=S.candidate,R=!k||Object.keys(k).length===0;if(R)(g.state==="new"||g.state==="gathering")&&(g.state="completed");else{g.state==="new"&&(g.state="gathering"),k.component=1,k.ufrag=g.getLocalParameters().usernameFragment;var w=SDPUtils.writeCandidate(k);C.candidate=Object.assign(C.candidate,SDPUtils.parseCandidate(w)),C.candidate.candidate=w,C.candidate.toJSON=function(){return{candidate:C.candidate.candidate,sdpMid:C.candidate.sdpMid,sdpMLineIndex:C.candidate.sdpMLineIndex,usernameFragment:C.candidate.usernameFragment}}}var $=SDPUtils.getMediaSections(m._localDescription.sdp);R?$[C.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:$[C.candidate.sdpMLineIndex]+="a="+C.candidate.candidate+`\r
`,m._localDescription.sdp=SDPUtils.getDescription(m._localDescription.sdp)+$.join("");var P=m.transceivers.every(function(O){return O.iceGatherer&&O.iceGatherer.state==="completed"});m.iceGatheringState!=="gathering"&&(m.iceGatheringState="gathering",m._emitGatheringStateChange()),R||m._dispatchEvent("icecandidate",C),P&&(m._dispatchEvent("icecandidate",new Event("icecandidate")),m.iceGatheringState="complete",m._emitGatheringStateChange())}},r.setTimeout(function(){b.forEach(function(S){g.onlocalcandidate(S)})},0)}},s.prototype._createIceAndDtlsTransports=function(){var u=this,_=new r.RTCIceTransport(null);_.onicestatechange=function(){u._updateIceConnectionState(),u._updateConnectionState()};var m=new r.RTCDtlsTransport(_);return m.ondtlsstatechange=function(){u._updateConnectionState()},m.onerror=function(){Object.defineProperty(m,"state",{value:"failed",writable:!0}),u._updateConnectionState()},{iceTransport:_,dtlsTransport:m}},s.prototype._disposeIceAndDtlsTransports=function(u){var _=this.transceivers[u].iceGatherer;_&&(delete _.onlocalcandidate,delete this.transceivers[u].iceGatherer);var m=this.transceivers[u].iceTransport;m&&(delete m.onicestatechange,delete this.transceivers[u].iceTransport);var g=this.transceivers[u].dtlsTransport;g&&(delete g.ondtlsstatechange,delete g.onerror,delete this.transceivers[u].dtlsTransport)},s.prototype._transceive=function(u,_,m){var g=getCommonCapabilities(u.localCapabilities,u.remoteCapabilities);_&&u.rtpSender&&(g.encodings=u.sendEncodingParameters,g.rtcp={cname:SDPUtils.localCName,compound:u.rtcpParameters.compound},u.recvEncodingParameters.length&&(g.rtcp.ssrc=u.recvEncodingParameters[0].ssrc),u.rtpSender.send(g)),m&&u.rtpReceiver&&g.codecs.length>0&&(u.kind==="video"&&u.recvEncodingParameters&&e<15019&&u.recvEncodingParameters.forEach(function(b){delete b.rtx}),u.recvEncodingParameters.length?g.encodings=u.recvEncodingParameters:g.encodings=[{}],g.rtcp={compound:u.rtcpParameters.compound},u.rtcpParameters.cname&&(g.rtcp.cname=u.rtcpParameters.cname),u.sendEncodingParameters.length&&(g.rtcp.ssrc=u.sendEncodingParameters[0].ssrc),u.rtpReceiver.receive(g))},s.prototype.setLocalDescription=function(u){var _=this;if(["offer","answer"].indexOf(u.type)===-1)return Promise.reject(makeError("TypeError",'Unsupported type "'+u.type+'"'));if(!isActionAllowedInSignalingState("setLocalDescription",u.type,_.signalingState)||_._isClosed)return Promise.reject(makeError("InvalidStateError","Can not set local "+u.type+" in state "+_.signalingState));var m,g;if(u.type==="offer")m=SDPUtils.splitSections(u.sdp),g=m.shift(),m.forEach(function(S,C){var k=SDPUtils.parseRtpParameters(S);_.transceivers[C].localCapabilities=k}),_.transceivers.forEach(function(S,C){_._gather(S.mid,C)});else if(u.type==="answer"){m=SDPUtils.splitSections(_._remoteDescription.sdp),g=m.shift();var b=SDPUtils.matchPrefix(g,"a=ice-lite").length>0;m.forEach(function(S,C){var k=_.transceivers[C],R=k.iceGatherer,w=k.iceTransport,$=k.dtlsTransport,P=k.localCapabilities,O=k.remoteCapabilities,B=SDPUtils.isRejected(S)&&SDPUtils.matchPrefix(S,"a=bundle-only").length===0;if(!B&&!k.rejected){var N=SDPUtils.getIceParameters(S,g),j=SDPUtils.getDtlsParameters(S,g);b&&(j.role="server"),(!_.usingBundle||C===0)&&(_._gather(k.mid,C),w.state==="new"&&w.start(R,N,b?"controlling":"controlled"),$.state==="new"&&$.start(j));var U=getCommonCapabilities(P,O);_._transceive(k,U.codecs.length>0,!1)}})}return _._localDescription={type:u.type,sdp:u.sdp},u.type==="offer"?_._updateSignalingState("have-local-offer"):_._updateSignalingState("stable"),Promise.resolve()},s.prototype.setRemoteDescription=function(u){var _=this;if(["offer","answer"].indexOf(u.type)===-1)return Promise.reject(makeError("TypeError",'Unsupported type "'+u.type+'"'));if(!isActionAllowedInSignalingState("setRemoteDescription",u.type,_.signalingState)||_._isClosed)return Promise.reject(makeError("InvalidStateError","Can not set remote "+u.type+" in state "+_.signalingState));var m={};_.remoteStreams.forEach(function(w){m[w.id]=w});var g=[],b=SDPUtils.splitSections(u.sdp),S=b.shift(),C=SDPUtils.matchPrefix(S,"a=ice-lite").length>0,k=SDPUtils.matchPrefix(S,"a=group:BUNDLE ").length>0;_.usingBundle=k;var R=SDPUtils.matchPrefix(S,"a=ice-options:")[0];return R?_.canTrickleIceCandidates=R.substr(14).split(" ").indexOf("trickle")>=0:_.canTrickleIceCandidates=!1,b.forEach(function(w,$){var P=SDPUtils.splitLines(w),O=SDPUtils.getKind(w),B=SDPUtils.isRejected(w)&&SDPUtils.matchPrefix(w,"a=bundle-only").length===0,N=P[0].substr(2).split(" ")[2],j=SDPUtils.getDirection(w,S),U=SDPUtils.parseMsid(w),q=SDPUtils.getMid(w)||SDPUtils.generateIdentifier();if(B||O==="application"&&(N==="DTLS/SCTP"||N==="UDP/DTLS/SCTP")){_.transceivers[$]={mid:q,kind:O,protocol:N,rejected:!0};return}!B&&_.transceivers[$]&&_.transceivers[$].rejected&&(_.transceivers[$]=_._createTransceiver(O,!0));var V,W,x,J,X,Z,ee,Q,z,K=SDPUtils.parseRtpParameters(w),ne,F;B||(ne=SDPUtils.getIceParameters(w,S),F=SDPUtils.getDtlsParameters(w,S),F.role="client"),ee=SDPUtils.parseRtpEncodingParameters(w);var Y=SDPUtils.parseRtcpParameters(w),ae=SDPUtils.matchPrefix(w,"a=end-of-candidates",S).length>0,te=SDPUtils.matchPrefix(w,"a=candidate:").map(function(ie){return SDPUtils.parseCandidate(ie)}).filter(function(ie){return ie.component===1});if((u.type==="offer"||u.type==="answer")&&!B&&k&&$>0&&_.transceivers[$]&&(_._disposeIceAndDtlsTransports($),_.transceivers[$].iceGatherer=_.transceivers[0].iceGatherer,_.transceivers[$].iceTransport=_.transceivers[0].iceTransport,_.transceivers[$].dtlsTransport=_.transceivers[0].dtlsTransport,_.transceivers[$].rtpSender&&_.transceivers[$].rtpSender.setTransport(_.transceivers[0].dtlsTransport),_.transceivers[$].rtpReceiver&&_.transceivers[$].rtpReceiver.setTransport(_.transceivers[0].dtlsTransport)),u.type==="offer"&&!B){V=_.transceivers[$]||_._createTransceiver(O),V.mid=q,V.iceGatherer||(V.iceGatherer=_._createIceGatherer($,k)),te.length&&V.iceTransport.state==="new"&&(ae&&(!k||$===0)?V.iceTransport.setRemoteCandidates(te):te.forEach(function(ie){maybeAddCandidate(V.iceTransport,ie)})),Q=r.RTCRtpReceiver.getCapabilities(O),e<15019&&(Q.codecs=Q.codecs.filter(function(ie){return ie.name!=="rtx"})),Z=V.sendEncodingParameters||[{ssrc:(2*$+2)*1001}];var re=!1;if(j==="sendrecv"||j==="sendonly"){if(re=!V.rtpReceiver,X=V.rtpReceiver||new r.RTCRtpReceiver(V.dtlsTransport,O),re){var oe;z=X.track,U&&U.stream==="-"||(U?(m[U.stream]||(m[U.stream]=new r.MediaStream,Object.defineProperty(m[U.stream],"id",{get:function(){return U.stream}})),Object.defineProperty(z,"id",{get:function(){return U.track}}),oe=m[U.stream]):(m.default||(m.default=new r.MediaStream),oe=m.default)),oe&&(a(z,oe),V.associatedRemoteMediaStreams.push(oe)),g.push([z,X,oe])}}else V.rtpReceiver&&V.rtpReceiver.track&&(V.associatedRemoteMediaStreams.forEach(function(ie){var de=ie.getTracks().find(function(ue){return ue.id===V.rtpReceiver.track.id});de&&t(de,ie)}),V.associatedRemoteMediaStreams=[]);V.localCapabilities=Q,V.remoteCapabilities=K,V.rtpReceiver=X,V.rtcpParameters=Y,V.sendEncodingParameters=Z,V.recvEncodingParameters=ee,_._transceive(_.transceivers[$],!1,re)}else if(u.type==="answer"&&!B){V=_.transceivers[$],W=V.iceGatherer,x=V.iceTransport,J=V.dtlsTransport,X=V.rtpReceiver,Z=V.sendEncodingParameters,Q=V.localCapabilities,_.transceivers[$].recvEncodingParameters=ee,_.transceivers[$].remoteCapabilities=K,_.transceivers[$].rtcpParameters=Y,te.length&&x.state==="new"&&((C||ae)&&(!k||$===0)?x.setRemoteCandidates(te):te.forEach(function(ie){maybeAddCandidate(V.iceTransport,ie)})),(!k||$===0)&&(x.state==="new"&&x.start(W,ne,"controlling"),J.state==="new"&&J.start(F));var ce=getCommonCapabilities(V.localCapabilities,V.remoteCapabilities),se=ce.codecs.filter(function(ie){return ie.name.toLowerCase()==="rtx"}).length;!se&&V.sendEncodingParameters[0].rtx&&delete V.sendEncodingParameters[0].rtx,_._transceive(V,j==="sendrecv"||j==="recvonly",j==="sendrecv"||j==="sendonly"),X&&(j==="sendrecv"||j==="sendonly")?(z=X.track,U?(m[U.stream]||(m[U.stream]=new r.MediaStream),a(z,m[U.stream]),g.push([z,X,m[U.stream]])):(m.default||(m.default=new r.MediaStream),a(z,m.default),g.push([z,X,m.default]))):delete V.rtpReceiver}}),_._dtlsRole===void 0&&(_._dtlsRole=u.type==="offer"?"active":"passive"),_._remoteDescription={type:u.type,sdp:u.sdp},u.type==="offer"?_._updateSignalingState("have-remote-offer"):_._updateSignalingState("stable"),Object.keys(m).forEach(function(w){var $=m[w];if($.getTracks().length){if(_.remoteStreams.indexOf($)===-1){_.remoteStreams.push($);var P=new Event("addstream");P.stream=$,r.setTimeout(function(){_._dispatchEvent("addstream",P)})}g.forEach(function(O){var B=O[0],N=O[1];$.id===O[2].id&&n(_,B,N,[$])})}}),g.forEach(function(w){w[2]||n(_,w[0],w[1],[])}),r.setTimeout(function(){_&&_.transceivers&&_.transceivers.forEach(function(w){w.iceTransport&&w.iceTransport.state==="new"&&w.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),w.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},s.prototype.close=function(){this.transceivers.forEach(function(u){u.iceTransport&&u.iceTransport.stop(),u.dtlsTransport&&u.dtlsTransport.stop(),u.rtpSender&&u.rtpSender.stop(),u.rtpReceiver&&u.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},s.prototype._updateSignalingState=function(u){this.signalingState=u;var _=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",_)},s.prototype._maybeFireNegotiationNeeded=function(){var u=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,r.setTimeout(function(){if(u.needNegotiation){u.needNegotiation=!1;var _=new Event("negotiationneeded");u._dispatchEvent("negotiationneeded",_)}},0))},s.prototype._updateIceConnectionState=function(){var u,_={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(g){g.iceTransport&&!g.rejected&&_[g.iceTransport.state]++}),u="new",_.failed>0?u="failed":_.checking>0?u="checking":_.disconnected>0?u="disconnected":_.new>0?u="new":_.connected>0?u="connected":_.completed>0&&(u="completed"),u!==this.iceConnectionState){this.iceConnectionState=u;var m=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",m)}},s.prototype._updateConnectionState=function(){var u,_={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(g){g.iceTransport&&g.dtlsTransport&&!g.rejected&&(_[g.iceTransport.state]++,_[g.dtlsTransport.state]++)}),_.connected+=_.completed,u="new",_.failed>0?u="failed":_.connecting>0?u="connecting":_.disconnected>0?u="disconnected":_.new>0?u="new":_.connected>0&&(u="connected"),u!==this.connectionState){this.connectionState=u;var m=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",m)}},s.prototype.createOffer=function(){var u=this;if(u._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createOffer after close"));var _=u.transceivers.filter(function(C){return C.kind==="audio"}).length,m=u.transceivers.filter(function(C){return C.kind==="video"}).length,g=arguments[0];if(g){if(g.mandatory||g.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");g.offerToReceiveAudio!==void 0&&(g.offerToReceiveAudio===!0?_=1:g.offerToReceiveAudio===!1?_=0:_=g.offerToReceiveAudio),g.offerToReceiveVideo!==void 0&&(g.offerToReceiveVideo===!0?m=1:g.offerToReceiveVideo===!1?m=0:m=g.offerToReceiveVideo)}for(u.transceivers.forEach(function(C){C.kind==="audio"?(_--,_<0&&(C.wantReceive=!1)):C.kind==="video"&&(m--,m<0&&(C.wantReceive=!1))});_>0||m>0;)_>0&&(u._createTransceiver("audio"),_--),m>0&&(u._createTransceiver("video"),m--);var b=SDPUtils.writeSessionBoilerplate(u._sdpSessionId,u._sdpSessionVersion++);u.transceivers.forEach(function(C,k){var R=C.track,w=C.kind,$=C.mid||SDPUtils.generateIdentifier();C.mid=$,C.iceGatherer||(C.iceGatherer=u._createIceGatherer(k,u.usingBundle));var P=r.RTCRtpSender.getCapabilities(w);e<15019&&(P.codecs=P.codecs.filter(function(B){return B.name!=="rtx"})),P.codecs.forEach(function(B){B.name==="H264"&&B.parameters["level-asymmetry-allowed"]===void 0&&(B.parameters["level-asymmetry-allowed"]="1"),C.remoteCapabilities&&C.remoteCapabilities.codecs&&C.remoteCapabilities.codecs.forEach(function(N){B.name.toLowerCase()===N.name.toLowerCase()&&B.clockRate===N.clockRate&&(B.preferredPayloadType=N.payloadType)})}),P.headerExtensions.forEach(function(B){var N=C.remoteCapabilities&&C.remoteCapabilities.headerExtensions||[];N.forEach(function(j){B.uri===j.uri&&(B.id=j.id)})});var O=C.sendEncodingParameters||[{ssrc:(2*k+1)*1001}];R&&e>=15019&&w==="video"&&!O[0].rtx&&(O[0].rtx={ssrc:O[0].ssrc+1}),C.wantReceive&&(C.rtpReceiver=new r.RTCRtpReceiver(C.dtlsTransport,w)),C.localCapabilities=P,C.sendEncodingParameters=O}),u._config.bundlePolicy!=="max-compat"&&(b+="a=group:BUNDLE "+u.transceivers.map(function(C){return C.mid}).join(" ")+`\r
`),b+=`a=ice-options:trickle\r
`,u.transceivers.forEach(function(C,k){b+=writeMediaSection(C,C.localCapabilities,"offer",C.stream,u._dtlsRole),b+=`a=rtcp-rsize\r
`,C.iceGatherer&&u.iceGatheringState!=="new"&&(k===0||!u.usingBundle)&&(C.iceGatherer.getLocalCandidates().forEach(function(R){R.component=1,b+="a="+SDPUtils.writeCandidate(R)+`\r
`}),C.iceGatherer.state==="completed"&&(b+=`a=end-of-candidates\r
`))});var S=new r.RTCSessionDescription({type:"offer",sdp:b});return Promise.resolve(S)},s.prototype.createAnswer=function(){var u=this;if(u._isClosed)return Promise.reject(makeError("InvalidStateError","Can not call createAnswer after close"));if(!(u.signalingState==="have-remote-offer"||u.signalingState==="have-local-pranswer"))return Promise.reject(makeError("InvalidStateError","Can not call createAnswer in signalingState "+u.signalingState));var _=SDPUtils.writeSessionBoilerplate(u._sdpSessionId,u._sdpSessionVersion++);u.usingBundle&&(_+="a=group:BUNDLE "+u.transceivers.map(function(b){return b.mid}).join(" ")+`\r
`),_+=`a=ice-options:trickle\r
`;var m=SDPUtils.getMediaSections(u._remoteDescription.sdp).length;u.transceivers.forEach(function(b,S){if(!(S+1>m)){if(b.rejected){b.kind==="application"?b.protocol==="DTLS/SCTP"?_+=`m=application 0 DTLS/SCTP 5000\r
`:_+="m=application 0 "+b.protocol+` webrtc-datachannel\r
`:b.kind==="audio"?_+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:b.kind==="video"&&(_+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),_+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+b.mid+`\r
`;return}if(b.stream){var C;b.kind==="audio"?C=b.stream.getAudioTracks()[0]:b.kind==="video"&&(C=b.stream.getVideoTracks()[0]),C&&e>=15019&&b.kind==="video"&&!b.sendEncodingParameters[0].rtx&&(b.sendEncodingParameters[0].rtx={ssrc:b.sendEncodingParameters[0].ssrc+1})}var k=getCommonCapabilities(b.localCapabilities,b.remoteCapabilities),R=k.codecs.filter(function(w){return w.name.toLowerCase()==="rtx"}).length;!R&&b.sendEncodingParameters[0].rtx&&delete b.sendEncodingParameters[0].rtx,_+=writeMediaSection(b,k,"answer",b.stream,u._dtlsRole),b.rtcpParameters&&b.rtcpParameters.reducedSize&&(_+=`a=rtcp-rsize\r
`)}});var g=new r.RTCSessionDescription({type:"answer",sdp:_});return Promise.resolve(g)},s.prototype.addIceCandidate=function(u){var _=this,m;return u&&!(u.sdpMLineIndex!==void 0||u.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(g,b){if(_._remoteDescription)if(!u||u.candidate==="")for(var S=0;S<_.transceivers.length&&!(!_.transceivers[S].rejected&&(_.transceivers[S].iceTransport.addRemoteCandidate({}),m=SDPUtils.getMediaSections(_._remoteDescription.sdp),m[S]+=`a=end-of-candidates\r
`,_._remoteDescription.sdp=SDPUtils.getDescription(_._remoteDescription.sdp)+m.join(""),_.usingBundle));S++);else{var C=u.sdpMLineIndex;if(u.sdpMid){for(var k=0;k<_.transceivers.length;k++)if(_.transceivers[k].mid===u.sdpMid){C=k;break}}var R=_.transceivers[C];if(R){if(R.rejected)return g();var w=Object.keys(u.candidate).length>0?SDPUtils.parseCandidate(u.candidate):{};if(w.protocol==="tcp"&&(w.port===0||w.port===9)||w.component&&w.component!==1)return g();if((C===0||C>0&&R.iceTransport!==_.transceivers[0].iceTransport)&&!maybeAddCandidate(R.iceTransport,w))return b(makeError("OperationError","Can not add ICE candidate"));var $=u.candidate.trim();$.indexOf("a=")===0&&($=$.substr(2)),m=SDPUtils.getMediaSections(_._remoteDescription.sdp),m[C]+="a="+(w.type?$:"end-of-candidates")+`\r
`,_._remoteDescription.sdp=SDPUtils.getDescription(_._remoteDescription.sdp)+m.join("")}else return b(makeError("OperationError","Can not add ICE candidate"))}else return b(makeError("InvalidStateError","Can not add ICE candidate without a remote description"));g()})},s.prototype.getStats=function(u){if(u&&u instanceof r.MediaStreamTrack){var _=null;if(this.transceivers.forEach(function(g){g.rtpSender&&g.rtpSender.track===u?_=g.rtpSender:g.rtpReceiver&&g.rtpReceiver.track===u&&(_=g.rtpReceiver)}),!_)throw makeError("InvalidAccessError","Invalid selector.");return _.getStats()}var m=[];return this.transceivers.forEach(function(g){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(b){g[b]&&m.push(g[b].getStats())})}),Promise.all(m).then(function(g){var b=new Map;return g.forEach(function(S){S.forEach(function(C){b.set(C.id,C)})}),b})};var c=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];c.forEach(function(u){var _=r[u];if(_&&_.prototype&&_.prototype.getStats){var m=_.prototype.getStats;_.prototype.getStats=function(){return m.apply(this).then(function(g){var b=new Map;return Object.keys(g).forEach(function(S){g[S].type=fixStatsType(g[S]),b.set(S,g[S])}),b})}}});var d=["createOffer","createAnswer"];return d.forEach(function(u){var _=s.prototype[u];s.prototype[u]=function(){var m=arguments;return typeof m[0]=="function"||typeof m[1]=="function"?_.apply(this,[arguments[2]]).then(function(g){typeof m[0]=="function"&&m[0].apply(null,[g])},function(g){typeof m[1]=="function"&&m[1].apply(null,[g])}):_.apply(this,arguments)}}),d=["setLocalDescription","setRemoteDescription","addIceCandidate"],d.forEach(function(u){var _=s.prototype[u];s.prototype[u]=function(){var m=arguments;return typeof m[1]=="function"||typeof m[2]=="function"?_.apply(this,arguments).then(function(){typeof m[1]=="function"&&m[1].apply(null)},function(g){typeof m[2]=="function"&&m[2].apply(null,[g])}):_.apply(this,arguments)}}),["getStats"].forEach(function(u){var _=s.prototype[u];s.prototype[u]=function(){var m=arguments;return typeof m[1]=="function"?_.apply(this,arguments).then(function(){typeof m[1]=="function"&&m[1].apply(null)}):_.apply(this,arguments)}}),s};const shimRTCPeerConnection=getDefaultExportFromCjs(rtcpeerconnection);function shimGetUserMedia$2(r){const e=r&&r.navigator,a=function(n){return{name:{PermissionDeniedError:"NotAllowedError"}[n.name]||n.name,message:n.message,constraint:n.constraint,toString(){return this.name}}},t=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(n){return t(n).catch(s=>Promise.reject(a(s)))}}function shimGetDisplayMedia$1(r){"getDisplayMedia"in r.navigator&&r.navigator.mediaDevices&&(r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||(r.navigator.mediaDevices.getDisplayMedia=r.navigator.getDisplayMedia.bind(r.navigator)))}function shimPeerConnection$1(r,e){if(r.RTCIceGatherer&&(r.RTCIceCandidate||(r.RTCIceCandidate=function(n){return n}),r.RTCSessionDescription||(r.RTCSessionDescription=function(n){return n}),e.version<15025)){const t=Object.getOwnPropertyDescriptor(r.MediaStreamTrack.prototype,"enabled");Object.defineProperty(r.MediaStreamTrack.prototype,"enabled",{set(n){t.set.call(this,n);const s=new Event("enabled");s.enabled=n,this.dispatchEvent(s)}})}r.RTCRtpSender&&!("dtmf"in r.RTCRtpSender.prototype)&&Object.defineProperty(r.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new r.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),r.RTCDtmfSender&&!r.RTCDTMFSender&&(r.RTCDTMFSender=r.RTCDtmfSender);const a=shimRTCPeerConnection(r,e.version);r.RTCPeerConnection=function(n){return n&&n.iceServers&&(n.iceServers=filterIceServers$1(n.iceServers,e.version),log("ICE servers after filtering:",n.iceServers)),new a(n)},r.RTCPeerConnection.prototype=a.prototype}function shimReplaceTrack(r){r.RTCRtpSender&&!("replaceTrack"in r.RTCRtpSender.prototype)&&(r.RTCRtpSender.prototype.replaceTrack=r.RTCRtpSender.prototype.setTrack)}const edgeShim=Object.freeze(Object.defineProperty({__proto__:null,shimGetDisplayMedia:shimGetDisplayMedia$1,shimGetUserMedia:shimGetUserMedia$2,shimPeerConnection:shimPeerConnection$1,shimReplaceTrack},Symbol.toStringTag,{value:"Module"}));function shimGetUserMedia$1(r,e){const a=r&&r.navigator,t=r&&r.MediaStreamTrack;if(a.getUserMedia=function(n,s,c){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),a.mediaDevices.getUserMedia(n).then(s,c)},!(e.version>55&&"autoGainControl"in a.mediaDevices.getSupportedConstraints())){const n=function(c,d,u){d in c&&!(u in c)&&(c[u]=c[d],delete c[d])},s=a.mediaDevices.getUserMedia.bind(a.mediaDevices);if(a.mediaDevices.getUserMedia=function(c){return typeof c=="object"&&typeof c.audio=="object"&&(c=JSON.parse(JSON.stringify(c)),n(c.audio,"autoGainControl","mozAutoGainControl"),n(c.audio,"noiseSuppression","mozNoiseSuppression")),s(c)},t&&t.prototype.getSettings){const c=t.prototype.getSettings;t.prototype.getSettings=function(){const d=c.apply(this,arguments);return n(d,"mozAutoGainControl","autoGainControl"),n(d,"mozNoiseSuppression","noiseSuppression"),d}}if(t&&t.prototype.applyConstraints){const c=t.prototype.applyConstraints;t.prototype.applyConstraints=function(d){return this.kind==="audio"&&typeof d=="object"&&(d=JSON.parse(JSON.stringify(d)),n(d,"autoGainControl","mozAutoGainControl"),n(d,"noiseSuppression","mozNoiseSuppression")),c.apply(this,[d])}}}}function shimGetDisplayMedia(r,e){r.navigator.mediaDevices&&"getDisplayMedia"in r.navigator.mediaDevices||r.navigator.mediaDevices&&(r.navigator.mediaDevices.getDisplayMedia=function(t){if(!(t&&t.video)){const n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return t.video===!0?t.video={mediaSource:e}:t.video.mediaSource=e,r.navigator.mediaDevices.getUserMedia(t)})}function shimOnTrack(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(r,e){if(typeof r!="object"||!(r.RTCPeerConnection||r.mozRTCPeerConnection))return;!r.RTCPeerConnection&&r.mozRTCPeerConnection&&(r.RTCPeerConnection=r.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const s=r.RTCPeerConnection.prototype[n],c={[n](){return arguments[0]=new(n==="addIceCandidate"?r.RTCIceCandidate:r.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};r.RTCPeerConnection.prototype[n]=c[n]});const a={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},t=r.RTCPeerConnection.prototype.getStats;r.RTCPeerConnection.prototype.getStats=function(){const[s,c,d]=arguments;return t.apply(this,[s||null]).then(u=>{if(e.version<53&&!c)try{u.forEach(_=>{_.type=a[_.type]||_.type})}catch(_){if(_.name!=="TypeError")throw _;u.forEach((m,g)=>{u.set(g,Object.assign({},m,{type:a[m.type]||m.type}))})}return u}).then(c,d)}}function shimSenderGetStats(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpSender.prototype)return;const e=r.RTCPeerConnection.prototype.getSenders;e&&(r.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(s=>s._pc=this),n});const a=r.RTCPeerConnection.prototype.addTrack;a&&(r.RTCPeerConnection.prototype.addTrack=function(){const n=a.apply(this,arguments);return n._pc=this,n}),r.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(r){if(!(typeof r=="object"&&r.RTCPeerConnection&&r.RTCRtpSender)||r.RTCRtpSender&&"getStats"in r.RTCRtpReceiver.prototype)return;const e=r.RTCPeerConnection.prototype.getReceivers;e&&(r.RTCPeerConnection.prototype.getReceivers=function(){const t=e.apply(this,[]);return t.forEach(n=>n._pc=this),t}),wrapPeerConnectionEvent(r,"track",a=>(a.receiver._pc=a.srcElement,a)),r.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(r){!r.RTCPeerConnection||"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(a){deprecated("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&a.getTracks().includes(t.track)&&this.removeTrack(t)})})}function shimRTCDataChannel(r){r.DataChannel&&!r.RTCDataChannel&&(r.RTCDataChannel=r.DataChannel)}function shimAddTransceiver(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.addTransceiver;e&&(r.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const t=arguments[1],n=t&&"sendEncodings"in t;n&&t.sendEncodings.forEach(c=>{if("rid"in c&&!/^[a-z0-9]{0,16}$/i.test(c.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in c&&!(parseFloat(c.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in c&&!(parseFloat(c.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(n){const{sender:c}=s,d=c.getParameters();(!("encodings"in d)||d.encodings.length===1&&Object.keys(d.encodings[0]).length===0)&&(d.encodings=t.sendEncodings,c.sendEncodings=t.sendEncodings,this.setParametersPromises.push(c.setParameters(d).then(()=>{delete c.sendEncodings}).catch(()=>{delete c.sendEncodings})))}return s})}function shimGetParameters(r){if(!(typeof r=="object"&&r.RTCRtpSender))return;const e=r.RTCRtpSender.prototype.getParameters;e&&(r.RTCRtpSender.prototype.getParameters=function(){const t=e.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function shimCreateOffer(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function shimCreateAnswer(r){if(!(typeof r=="object"&&r.RTCPeerConnection))return;const e=r.RTCPeerConnection.prototype.createAnswer;r.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const firefoxShim=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver,shimCreateAnswer,shimCreateOffer,shimGetDisplayMedia,shimGetParameters,shimGetUserMedia:shimGetUserMedia$1,shimOnTrack,shimPeerConnection,shimRTCDataChannel,shimReceiverGetStats,shimRemoveStream,shimSenderGetStats},Symbol.toStringTag,{value:"Module"}));function shimLocalStreamsAPI(r){if(!(typeof r!="object"||!r.RTCPeerConnection)){if("getLocalStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in r.RTCPeerConnection.prototype)){const e=r.RTCPeerConnection.prototype.addTrack;r.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(n=>e.call(this,n,t)),t.getVideoTracks().forEach(n=>e.call(this,n,t))},r.RTCPeerConnection.prototype.addTrack=function(t,...n){return n&&n.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.removeStream=function(a){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(a);if(t===-1)return;this._localStreams.splice(t,1);const n=a.getTracks();this.getSenders().forEach(s=>{n.includes(s.track)&&this.removeTrack(s)})})}}function shimRemoteStreamsAPI(r){if(!(typeof r!="object"||!r.RTCPeerConnection)&&("getRemoteStreams"in r.RTCPeerConnection.prototype||(r.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in r.RTCPeerConnection.prototype))){Object.defineProperty(r.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(a){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=a),this.addEventListener("track",this._onaddstreampoly=t=>{t.streams.forEach(n=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(n))return;this._remoteStreams.push(n);const s=new Event("addstream");s.stream=n,this.dispatchEvent(s)})})}});const e=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){const t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(s=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(s)>=0)return;t._remoteStreams.push(s);const c=new Event("addstream");c.stream=s,t.dispatchEvent(c)})}),e.apply(t,arguments)}}}function shimCallbacksAPI(r){if(typeof r!="object"||!r.RTCPeerConnection)return;const e=r.RTCPeerConnection.prototype,a=e.createOffer,t=e.createAnswer,n=e.setLocalDescription,s=e.setRemoteDescription,c=e.addIceCandidate;e.createOffer=function(_,m){const g=arguments.length>=2?arguments[2]:arguments[0],b=a.apply(this,[g]);return m?(b.then(_,m),Promise.resolve()):b},e.createAnswer=function(_,m){const g=arguments.length>=2?arguments[2]:arguments[0],b=t.apply(this,[g]);return m?(b.then(_,m),Promise.resolve()):b};let d=function(u,_,m){const g=n.apply(this,[u]);return m?(g.then(_,m),Promise.resolve()):g};e.setLocalDescription=d,d=function(u,_,m){const g=s.apply(this,[u]);return m?(g.then(_,m),Promise.resolve()):g},e.setRemoteDescription=d,d=function(u,_,m){const g=c.apply(this,[u]);return m?(g.then(_,m),Promise.resolve()):g},e.addIceCandidate=d}function shimGetUserMedia(r){const e=r&&r.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const a=e.mediaDevices,t=a.getUserMedia.bind(a);e.mediaDevices.getUserMedia=n=>t(shimConstraints(n))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(t,n,s){e.mediaDevices.getUserMedia(t).then(n,s)}.bind(e))}function shimConstraints(r){return r&&r.video!==void 0?Object.assign({},r,{video:compactObject(r.video)}):r}function shimRTCIceServerUrls(r){if(!r.RTCPeerConnection)return;const e=r.RTCPeerConnection;r.RTCPeerConnection=function(t,n){if(t&&t.iceServers){const s=[];for(let c=0;c<t.iceServers.length;c++){let d=t.iceServers[c];!d.hasOwnProperty("urls")&&d.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),d=JSON.parse(JSON.stringify(d)),d.urls=d.url,delete d.url,s.push(d)):s.push(t.iceServers[c])}t.iceServers=s}return new e(t,n)},r.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(r.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function shimTrackEventTransceiver(r){typeof r=="object"&&r.RTCTrackEvent&&"receiver"in r.RTCTrackEvent.prototype&&!("transceiver"in r.RTCTrackEvent.prototype)&&Object.defineProperty(r.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(r){const e=r.RTCPeerConnection.prototype.createOffer;r.RTCPeerConnection.prototype.createOffer=function(t){if(t){typeof t.offerToReceiveAudio<"u"&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);const n=this.getTransceivers().find(c=>c.receiver.track.kind==="audio");t.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):t.offerToReceiveAudio===!0&&!n&&this.addTransceiver("audio"),typeof t.offerToReceiveVideo<"u"&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);const s=this.getTransceivers().find(c=>c.receiver.track.kind==="video");t.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):t.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video")}return e.apply(this,arguments)}}function shimAudioContext(r){typeof r!="object"||r.AudioContext||(r.AudioContext=r.webkitAudioContext)}const safariShim=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext,shimCallbacksAPI,shimConstraints,shimCreateOfferLegacy,shimGetUserMedia,shimLocalStreamsAPI,shimRTCIceServerUrls,shimRemoteStreamsAPI,shimTrackEventTransceiver},Symbol.toStringTag,{value:"Module"}));function shimRTCIceCandidate(r){if(!r.RTCIceCandidate||r.RTCIceCandidate&&"foundation"in r.RTCIceCandidate.prototype)return;const e=r.RTCIceCandidate;r.RTCIceCandidate=function(t){if(typeof t=="object"&&t.candidate&&t.candidate.indexOf("a=")===0&&(t=JSON.parse(JSON.stringify(t)),t.candidate=t.candidate.substr(2)),t.candidate&&t.candidate.length){const n=new e(t),s=SDPUtils$1.parseCandidate(t.candidate),c=Object.assign(n,s);return c.toJSON=function(){return{candidate:c.candidate,sdpMid:c.sdpMid,sdpMLineIndex:c.sdpMLineIndex,usernameFragment:c.usernameFragment}},c}return new e(t)},r.RTCIceCandidate.prototype=e.prototype,wrapPeerConnectionEvent(r,"icecandidate",a=>(a.candidate&&Object.defineProperty(a,"candidate",{value:new r.RTCIceCandidate(a.candidate),writable:"false"}),a))}function shimMaxMessageSize(r,e){if(!r.RTCPeerConnection)return;"sctp"in r.RTCPeerConnection.prototype||Object.defineProperty(r.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const a=function(d){if(!d||!d.sdp)return!1;const u=SDPUtils$1.splitSections(d.sdp);return u.shift(),u.some(_=>{const m=SDPUtils$1.parseMLine(_);return m&&m.kind==="application"&&m.protocol.indexOf("SCTP")!==-1})},t=function(d){const u=d.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const _=parseInt(u[1],10);return _!==_?-1:_},n=function(d){let u=65536;return e.browser==="firefox"&&(e.version<57?d===-1?u=16384:u=2147483637:e.version<60?u=e.version===57?65535:65536:u=2147483637),u},s=function(d,u){let _=65536;e.browser==="firefox"&&e.version===57&&(_=65535);const m=SDPUtils$1.matchPrefix(d.sdp,"a=max-message-size:");return m.length>0?_=parseInt(m[0].substr(19),10):e.browser==="firefox"&&u!==-1&&(_=2147483637),_},c=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(a(arguments[0])){const u=t(arguments[0]),_=n(u),m=s(arguments[0],u);let g;_===0&&m===0?g=Number.POSITIVE_INFINITY:_===0||m===0?g=Math.max(_,m):g=Math.min(_,m);const b={};Object.defineProperty(b,"maxMessageSize",{get(){return g}}),this._sctp=b}return c.apply(this,arguments)}}function shimSendThrowTypeError(r){if(!(r.RTCPeerConnection&&"createDataChannel"in r.RTCPeerConnection.prototype))return;function e(t,n){const s=t.send;t.send=function(){const d=arguments[0],u=d.length||d.size||d.byteLength;if(t.readyState==="open"&&n.sctp&&u>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return s.apply(t,arguments)}}const a=r.RTCPeerConnection.prototype.createDataChannel;r.RTCPeerConnection.prototype.createDataChannel=function(){const n=a.apply(this,arguments);return e(n,this),n},wrapPeerConnectionEvent(r,"datachannel",t=>(e(t.channel,t.target),t))}function shimConnectionState(r){if(!r.RTCPeerConnection||"connectionState"in r.RTCPeerConnection.prototype)return;const e=r.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(a){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),a&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=a)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(a=>{const t=e[a];e[a]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=n=>{const s=n.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const c=new Event("connectionstatechange",n);s.dispatchEvent(c)}return n},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}})}function removeExtmapAllowMixed(r,e){if(!r.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const a=r.RTCPeerConnection.prototype.setRemoteDescription;r.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=n.sdp.split(`
`).filter(c=>c.trim()!=="a=extmap-allow-mixed").join(`
`);r.RTCSessionDescription&&n instanceof r.RTCSessionDescription?arguments[0]=new r.RTCSessionDescription({type:n.type,sdp:s}):n.sdp=s}return a.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(r,e){if(!(r.RTCPeerConnection&&r.RTCPeerConnection.prototype))return;const a=r.RTCPeerConnection.prototype.addIceCandidate;!a||a.length===0||(r.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():a.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const commonShim=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimConnectionState,shimMaxMessageSize,shimRTCIceCandidate,shimSendThrowTypeError},Symbol.toStringTag,{value:"Module"}));function adapterFactory({window:r}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const a=log,t=detectBrowser(r),n={browserDetails:t,commonShim,extractVersion,disableLog,disableWarnings};switch(t.browser){case"chrome":if(!chromeShim||!shimPeerConnection$2||!e.shimChrome)return a("Chrome shim is not included in this adapter release."),n;if(t.version===null)return a("Chrome shim can not determine version, not shimming."),n;a("adapter.js shimming chrome."),n.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(r,t),shimGetUserMedia$3(r,t),shimMediaStream(r),shimPeerConnection$2(r,t),shimOnTrack$1(r),shimAddTrackRemoveTrack(r,t),shimGetSendersWithDtmf(r),shimGetStats(r),shimSenderReceiverGetStats(r),fixNegotiationNeeded(r,t),shimRTCIceCandidate(r),shimConnectionState(r),shimMaxMessageSize(r,t),shimSendThrowTypeError(r),removeExtmapAllowMixed(r,t);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!e.shimFirefox)return a("Firefox shim is not included in this adapter release."),n;a("adapter.js shimming firefox."),n.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(r,t),shimGetUserMedia$1(r,t),shimPeerConnection(r,t),shimOnTrack(r),shimRemoveStream(r),shimSenderGetStats(r),shimReceiverGetStats(r),shimRTCDataChannel(r),shimAddTransceiver(r),shimGetParameters(r),shimCreateOffer(r),shimCreateAnswer(r),shimRTCIceCandidate(r),shimConnectionState(r),shimMaxMessageSize(r,t),shimSendThrowTypeError(r);break;case"edge":if(!edgeShim||!shimPeerConnection$1||!e.shimEdge)return a("MS edge shim is not included in this adapter release."),n;a("adapter.js shimming edge."),n.browserShim=edgeShim,shimGetUserMedia$2(r),shimGetDisplayMedia$1(r),shimPeerConnection$1(r,t),shimReplaceTrack(r),shimMaxMessageSize(r,t),shimSendThrowTypeError(r);break;case"safari":if(!safariShim||!e.shimSafari)return a("Safari shim is not included in this adapter release."),n;a("adapter.js shimming safari."),n.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(r,t),shimRTCIceServerUrls(r),shimCreateOfferLegacy(r),shimCallbacksAPI(r),shimLocalStreamsAPI(r),shimRemoteStreamsAPI(r),shimTrackEventTransceiver(r),shimGetUserMedia(r),shimAudioContext(r),shimRTCIceCandidate(r),shimMaxMessageSize(r,t),shimSendThrowTypeError(r),removeExtmapAllowMixed(r,t);break;default:a("Unsupported browser!");break}return n}const adapter=adapterFactory({window:typeof window>"u"?void 0:window});function $parcel$export(r,e,a,t){Object.defineProperty(r,e,{get:a,set:t,enumerable:!0,configurable:!0})}var $af8cf1f663f490f4$var$webRTCAdapter=adapter.default||adapter,$af8cf1f663f490f4$export$25be9502477c137d=new(function(){function r(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return r.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},r.prototype.isBrowserSupported=function(){var e=this.getBrowser(),a=this.getVersion(),t=this.supportedBrowsers.includes(e);return t?e==="chrome"?a>=this.minChromeVersion:e==="firefox"?a>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&a>=this.minSafariVersion:!1:!1},r.prototype.getBrowser=function(){return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.browser},r.prototype.getVersion=function(){return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version||0},r.prototype.isUnifiedPlanSupported=function(){var e=this.getBrowser(),a=$af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version||0;if(e==="chrome"&&a<this.minChromeVersion)return!1;if(e==="firefox"&&a>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var t,n=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),n=!0}catch{}finally{t&&t.close()}return n},r.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},r}()),$06cb531ed7840f78$var$DEFAULT_CONFIG={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},$06cb531ed7840f78$var$Util=function(){function r(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=$06cb531ed7840f78$var$DEFAULT_CONFIG,this.browser=$af8cf1f663f490f4$export$25be9502477c137d.getBrowser(),this.browserVersion=$af8cf1f663f490f4$export$25be9502477c137d.getVersion(),this.supports=function(){var e={browser:$af8cf1f663f490f4$export$25be9502477c137d.isBrowserSupported(),webRTC:$af8cf1f663f490f4$export$25be9502477c137d.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;var a;try{a=new RTCPeerConnection($06cb531ed7840f78$var$DEFAULT_CONFIG),e.audioVideo=!0;var t=void 0;try{t=a.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!t.ordered;try{t.binaryType="blob",e.binaryBlob=!$af8cf1f663f490f4$export$25be9502477c137d.isIOS}catch{}}catch{}finally{t&&t.close()}}catch{}finally{a&&a.close()}return e}(),this.pack=$kKvpS$peerjsjsbinarypack.pack,this.unpack=$kKvpS$peerjsjsbinarypack.unpack,this._dataCount=1}return r.prototype.noop=function(){},r.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},r.prototype.chunk=function(e){for(var a=[],t=e.size,n=Math.ceil(t/$06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU),s=0,c=0;c<t;){var d=Math.min(t,c+$06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU),u=e.slice(c,d),_={__peerData:this._dataCount,n:s,data:u,total:n};a.push(_),c=d,s++}return this._dataCount++,a},r.prototype.blobToArrayBuffer=function(e,a){var t=new FileReader;return t.onload=function(n){n.target&&a(n.target.result)},t.readAsArrayBuffer(e),t},r.prototype.binaryStringToArrayBuffer=function(e){for(var a=new Uint8Array(e.length),t=0;t<e.length;t++)a[t]=e.charCodeAt(t)&255;return a.buffer},r.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},r.prototype.isSecure=function(){return location.protocol==="https:"},r}(),$06cb531ed7840f78$export$7debb50ef11d5e0b=new $06cb531ed7840f78$var$Util,$26088d7da5b03f69$exports={};$parcel$export($26088d7da5b03f69$exports,"Peer",()=>$26088d7da5b03f69$export$ecd1fc136c422448,r=>$26088d7da5b03f69$export$ecd1fc136c422448=r);var $ac9b757d51178e15$exports={},$ac9b757d51178e15$var$has=Object.prototype.hasOwnProperty,$ac9b757d51178e15$var$prefix="~";function $ac9b757d51178e15$var$Events(){}Object.create&&($ac9b757d51178e15$var$Events.prototype=Object.create(null),new $ac9b757d51178e15$var$Events().__proto__||($ac9b757d51178e15$var$prefix=!1));function $ac9b757d51178e15$var$EE(r,e,a){this.fn=r,this.context=e,this.once=a||!1}function $ac9b757d51178e15$var$addListener(r,e,a,t,n){if(typeof a!="function")throw new TypeError("The listener must be a function");var s=new $ac9b757d51178e15$var$EE(a,t||r,n),c=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e;return r._events[c]?r._events[c].fn?r._events[c]=[r._events[c],s]:r._events[c].push(s):(r._events[c]=s,r._eventsCount++),r}function $ac9b757d51178e15$var$clearEvent(r,e){--r._eventsCount===0?r._events=new $ac9b757d51178e15$var$Events:delete r._events[e]}function $ac9b757d51178e15$var$EventEmitter(){this._events=new $ac9b757d51178e15$var$Events,this._eventsCount=0}$ac9b757d51178e15$var$EventEmitter.prototype.eventNames=function(){var e=[],a,t;if(this._eventsCount===0)return e;for(t in a=this._events)$ac9b757d51178e15$var$has.call(a,t)&&e.push($ac9b757d51178e15$var$prefix?t.slice(1):t);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(a)):e};$ac9b757d51178e15$var$EventEmitter.prototype.listeners=function(e){var a=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e,t=this._events[a];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,s=t.length,c=new Array(s);n<s;n++)c[n]=t[n].fn;return c};$ac9b757d51178e15$var$EventEmitter.prototype.listenerCount=function(e){var a=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e,t=this._events[a];return t?t.fn?1:t.length:0};$ac9b757d51178e15$var$EventEmitter.prototype.emit=function(e,a,t,n,s,c){var d=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e;if(!this._events[d])return!1;var u=this._events[d],_=arguments.length,m,g;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),_){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,a),!0;case 3:return u.fn.call(u.context,a,t),!0;case 4:return u.fn.call(u.context,a,t,n),!0;case 5:return u.fn.call(u.context,a,t,n,s),!0;case 6:return u.fn.call(u.context,a,t,n,s,c),!0}for(g=1,m=new Array(_-1);g<_;g++)m[g-1]=arguments[g];u.fn.apply(u.context,m)}else{var b=u.length,S;for(g=0;g<b;g++)switch(u[g].once&&this.removeListener(e,u[g].fn,void 0,!0),_){case 1:u[g].fn.call(u[g].context);break;case 2:u[g].fn.call(u[g].context,a);break;case 3:u[g].fn.call(u[g].context,a,t);break;case 4:u[g].fn.call(u[g].context,a,t,n);break;default:if(!m)for(S=1,m=new Array(_-1);S<_;S++)m[S-1]=arguments[S];u[g].fn.apply(u[g].context,m)}}return!0};$ac9b757d51178e15$var$EventEmitter.prototype.on=function(e,a,t){return $ac9b757d51178e15$var$addListener(this,e,a,t,!1)};$ac9b757d51178e15$var$EventEmitter.prototype.once=function(e,a,t){return $ac9b757d51178e15$var$addListener(this,e,a,t,!0)};$ac9b757d51178e15$var$EventEmitter.prototype.removeListener=function(e,a,t,n){var s=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e;if(!this._events[s])return this;if(!a)return $ac9b757d51178e15$var$clearEvent(this,s),this;var c=this._events[s];if(c.fn)c.fn===a&&(!n||c.once)&&(!t||c.context===t)&&$ac9b757d51178e15$var$clearEvent(this,s);else{for(var d=0,u=[],_=c.length;d<_;d++)(c[d].fn!==a||n&&!c[d].once||t&&c[d].context!==t)&&u.push(c[d]);u.length?this._events[s]=u.length===1?u[0]:u:$ac9b757d51178e15$var$clearEvent(this,s)}return this};$ac9b757d51178e15$var$EventEmitter.prototype.removeAllListeners=function(e){var a;return e?(a=$ac9b757d51178e15$var$prefix?$ac9b757d51178e15$var$prefix+e:e,this._events[a]&&$ac9b757d51178e15$var$clearEvent(this,a)):(this._events=new $ac9b757d51178e15$var$Events,this._eventsCount=0),this};$ac9b757d51178e15$var$EventEmitter.prototype.off=$ac9b757d51178e15$var$EventEmitter.prototype.removeListener;$ac9b757d51178e15$var$EventEmitter.prototype.addListener=$ac9b757d51178e15$var$EventEmitter.prototype.on;$ac9b757d51178e15$var$EventEmitter.prefixed=$ac9b757d51178e15$var$prefix;$ac9b757d51178e15$var$EventEmitter.EventEmitter=$ac9b757d51178e15$var$EventEmitter;$ac9b757d51178e15$exports=$ac9b757d51178e15$var$EventEmitter;var $1615705ecc6adca3$exports={};$parcel$export($1615705ecc6adca3$exports,"LogLevel",()=>$1615705ecc6adca3$export$243e62d78d3b544d,r=>$1615705ecc6adca3$export$243e62d78d3b544d=r);$parcel$export($1615705ecc6adca3$exports,"default",()=>$1615705ecc6adca3$export$2e2bcd8739ae039,r=>$1615705ecc6adca3$export$2e2bcd8739ae039=r);var $1615705ecc6adca3$var$__read=function(r,e){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var t=a.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=t.next()).done;)s.push(n.value)}catch(d){c={error:d}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(c)throw c.error}}return s},$1615705ecc6adca3$var$__spreadArray=function(r,e,a){if(a||arguments.length===2)for(var t=0,n=e.length,s;t<n;t++)(s||!(t in e))&&(s||(s=Array.prototype.slice.call(e,0,t)),s[t]=e[t]);return r.concat(s||Array.prototype.slice.call(e))},$1615705ecc6adca3$var$LOG_PREFIX="PeerJS: ",$1615705ecc6adca3$export$243e62d78d3b544d;(function(r){r[r.Disabled=0]="Disabled",r[r.Errors=1]="Errors",r[r.Warnings=2]="Warnings",r[r.All=3]="All"})($1615705ecc6adca3$export$243e62d78d3b544d||($1615705ecc6adca3$export$243e62d78d3b544d={}));var $1615705ecc6adca3$var$Logger=function(){function r(){this._logLevel=$1615705ecc6adca3$export$243e62d78d3b544d.Disabled}return Object.defineProperty(r.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),r.prototype.log=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];this._logLevel>=$1615705ecc6adca3$export$243e62d78d3b544d.All&&this._print.apply(this,$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.All],$1615705ecc6adca3$var$__read(e),!1))},r.prototype.warn=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];this._logLevel>=$1615705ecc6adca3$export$243e62d78d3b544d.Warnings&&this._print.apply(this,$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.Warnings],$1615705ecc6adca3$var$__read(e),!1))},r.prototype.error=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];this._logLevel>=$1615705ecc6adca3$export$243e62d78d3b544d.Errors&&this._print.apply(this,$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$export$243e62d78d3b544d.Errors],$1615705ecc6adca3$var$__read(e),!1))},r.prototype.setLogFunction=function(e){this._print=e},r.prototype._print=function(e){for(var a=[],t=1;t<arguments.length;t++)a[t-1]=arguments[t];var n=$1615705ecc6adca3$var$__spreadArray([$1615705ecc6adca3$var$LOG_PREFIX],$1615705ecc6adca3$var$__read(a),!1);for(var s in n)n[s]instanceof Error&&(n[s]="("+n[s].name+") "+n[s].message);e>=$1615705ecc6adca3$export$243e62d78d3b544d.All?console.log.apply(console,$1615705ecc6adca3$var$__spreadArray([],$1615705ecc6adca3$var$__read(n),!1)):e>=$1615705ecc6adca3$export$243e62d78d3b544d.Warnings?console.warn.apply(console,$1615705ecc6adca3$var$__spreadArray(["WARNING"],$1615705ecc6adca3$var$__read(n),!1)):e>=$1615705ecc6adca3$export$243e62d78d3b544d.Errors&&console.error.apply(console,$1615705ecc6adca3$var$__spreadArray(["ERROR"],$1615705ecc6adca3$var$__read(n),!1))},r}(),$1615705ecc6adca3$export$2e2bcd8739ae039=new $1615705ecc6adca3$var$Logger,$31d11a8d122cb4b7$exports={};$parcel$export($31d11a8d122cb4b7$exports,"Socket",()=>$31d11a8d122cb4b7$export$4798917dbf149b79,r=>$31d11a8d122cb4b7$export$4798917dbf149b79=r);var $60fadef21a2daafc$export$3157d57b4135e3bc;(function(r){r.Data="data",r.Media="media"})($60fadef21a2daafc$export$3157d57b4135e3bc||($60fadef21a2daafc$export$3157d57b4135e3bc={}));var $60fadef21a2daafc$export$9547aaa2e39030ff;(function(r){r.BrowserIncompatible="browser-incompatible",r.Disconnected="disconnected",r.InvalidID="invalid-id",r.InvalidKey="invalid-key",r.Network="network",r.PeerUnavailable="peer-unavailable",r.SslUnavailable="ssl-unavailable",r.ServerError="server-error",r.SocketError="socket-error",r.SocketClosed="socket-closed",r.UnavailableID="unavailable-id",r.WebRTC="webrtc"})($60fadef21a2daafc$export$9547aaa2e39030ff||($60fadef21a2daafc$export$9547aaa2e39030ff={}));var $60fadef21a2daafc$export$89f507cf986a947;(function(r){r.Binary="binary",r.BinaryUTF8="binary-utf8",r.JSON="json"})($60fadef21a2daafc$export$89f507cf986a947||($60fadef21a2daafc$export$89f507cf986a947={}));var $60fadef21a2daafc$export$3b5c4a4b6354f023;(function(r){r.Message="message",r.Disconnected="disconnected",r.Error="error",r.Close="close"})($60fadef21a2daafc$export$3b5c4a4b6354f023||($60fadef21a2daafc$export$3b5c4a4b6354f023={}));var $60fadef21a2daafc$export$adb4a1754da6f10d;(function(r){r.Heartbeat="HEARTBEAT",r.Candidate="CANDIDATE",r.Offer="OFFER",r.Answer="ANSWER",r.Open="OPEN",r.Error="ERROR",r.IdTaken="ID-TAKEN",r.InvalidKey="INVALID-KEY",r.Leave="LEAVE",r.Expire="EXPIRE"})($60fadef21a2daafc$export$adb4a1754da6f10d||($60fadef21a2daafc$export$adb4a1754da6f10d={}));var $0d1ed891c5cb27c0$exports={};$0d1ed891c5cb27c0$exports=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Soren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var $31d11a8d122cb4b7$var$__extends=function(){var r=function(e,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},r(e,a)};return function(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(e,a);function t(){this.constructor=e}e.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)}}(),$31d11a8d122cb4b7$var$__read=function(r,e){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var t=a.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=t.next()).done;)s.push(n.value)}catch(d){c={error:d}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(c)throw c.error}}return s},$31d11a8d122cb4b7$var$__spreadArray=function(r,e,a){if(a||arguments.length===2)for(var t=0,n=e.length,s;t<n;t++)(s||!(t in e))&&(s||(s=Array.prototype.slice.call(e,0,t)),s[t]=e[t]);return r.concat(s||Array.prototype.slice.call(e))},$31d11a8d122cb4b7$var$__values=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,a=e&&r[e],t=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$31d11a8d122cb4b7$export$4798917dbf149b79=function(r){$31d11a8d122cb4b7$var$__extends(e,r);function e(a,t,n,s,c,d){d===void 0&&(d=5e3);var u=r.call(this)||this;u.pingInterval=d,u._disconnected=!0,u._messagesQueue=[];var _=a?"wss://":"ws://";return u._baseUrl=_+t+":"+n+s+"peerjs?key="+c,u}return e.prototype.start=function(a,t){var n=this;this._id=a;var s="".concat(this._baseUrl,"&id=").concat(a,"&token=").concat(t);this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+$0d1ed891c5cb27c0$exports.version),this._disconnected=!1,this._socket.onmessage=function(c){var d;try{d=JSON.parse(c.data),$1615705ecc6adca3$exports.default.log("Server message received:",d)}catch{$1615705ecc6adca3$exports.default.log("Invalid server message",c.data);return}n.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Message,d)},this._socket.onclose=function(c){n._disconnected||($1615705ecc6adca3$exports.default.log("Socket closed.",c),n._cleanup(),n._disconnected=!0,n.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected))},this._socket.onopen=function(){n._disconnected||(n._sendQueuedMessages(),$1615705ecc6adca3$exports.default.log("Socket open"),n._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var a=this;this._wsPingTimer=setTimeout(function(){a._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(!this._wsOpen()){$1615705ecc6adca3$exports.default.log("Cannot send heartbeat, because socket closed");return}var a=JSON.stringify({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Heartbeat});this._socket.send(a),this._scheduleHeartbeat()},e.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},e.prototype._sendQueuedMessages=function(){var a,t,n=$31d11a8d122cb4b7$var$__spreadArray([],$31d11a8d122cb4b7$var$__read(this._messagesQueue),!1);this._messagesQueue=[];try{for(var s=$31d11a8d122cb4b7$var$__values(n),c=s.next();!c.done;c=s.next()){var d=c.value;this.send(d)}}catch(u){a={error:u}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(a)throw a.error}}},e.prototype.send=function(a){if(!this._disconnected){if(!this._id){this._messagesQueue.push(a);return}if(!a.type){this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Error,"Invalid message");return}if(this._wsOpen()){var t=JSON.stringify(a);this._socket.send(t)}}},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}($ac9b757d51178e15$exports.EventEmitter),$353dee38f9ab557b$exports={};$parcel$export($353dee38f9ab557b$exports,"MediaConnection",()=>$353dee38f9ab557b$export$4a84e95a2324ac29,r=>$353dee38f9ab557b$export$4a84e95a2324ac29=r);var $77f14d3e81888156$exports={};$parcel$export($77f14d3e81888156$exports,"Negotiator",()=>$77f14d3e81888156$export$89e6bb5ad64bf4a,r=>$77f14d3e81888156$export$89e6bb5ad64bf4a=r);var $77f14d3e81888156$var$__assign=function(){return $77f14d3e81888156$var$__assign=Object.assign||function(r){for(var e,a=1,t=arguments.length;a<t;a++){e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},$77f14d3e81888156$var$__assign.apply(this,arguments)},$77f14d3e81888156$var$__awaiter=function(r,e,a,t){function n(s){return s instanceof a?s:new a(function(c){c(s)})}return new(a||(a=Promise))(function(s,c){function d(m){try{_(t.next(m))}catch(g){c(g)}}function u(m){try{_(t.throw(m))}catch(g){c(g)}}function _(m){m.done?s(m.value):n(m.value).then(d,u)}_((t=t.apply(r,e||[])).next())})},$77f14d3e81888156$var$__generator=function(r,e){var a={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},t,n,s,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(_){return function(m){return u([_,m])}}function u(_){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(s=_[0]&2?n.return:_[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,_[1])).done)return s;switch(n=0,s&&(_=[_[0]&2,s.value]),_[0]){case 0:case 1:s=_;break;case 4:return a.label++,{value:_[1],done:!1};case 5:a.label++,n=_[1],_=[0];continue;case 7:_=a.ops.pop(),a.trys.pop();continue;default:if(s=a.trys,!(s=s.length>0&&s[s.length-1])&&(_[0]===6||_[0]===2)){a=0;continue}if(_[0]===3&&(!s||_[1]>s[0]&&_[1]<s[3])){a.label=_[1];break}if(_[0]===6&&a.label<s[1]){a.label=s[1],s=_;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(_);break}s[2]&&a.ops.pop(),a.trys.pop();continue}_=e.call(r,a)}catch(m){_=[6,m],n=0}finally{t=s=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},$77f14d3e81888156$export$89e6bb5ad64bf4a=function(){function r(e){this.connection=e}return r.prototype.startConnection=function(e){var a=this._startPeerConnection();if(this.connection.peerConnection=a,this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Media&&e._stream&&this._addTracksToConnection(e._stream,a),e.originator){if(this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data){var t=this.connection,n={ordered:!!e.reliable},s=a.createDataChannel(t.label,n);t.initialize(s)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},r.prototype._startPeerConnection=function(){$1615705ecc6adca3$exports.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},r.prototype._setupListeners=function(e){var a=this,t=this.connection.peer,n=this.connection.connectionId,s=this.connection.type,c=this.connection.provider;$1615705ecc6adca3$exports.default.log("Listening for ICE candidates."),e.onicecandidate=function(d){!d.candidate||!d.candidate.candidate||($1615705ecc6adca3$exports.default.log("Received ICE candidates for ".concat(t,":"),d.candidate),c.socket.send({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Candidate,payload:{candidate:d.candidate,type:s,connectionId:n},dst:t}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":$1615705ecc6adca3$exports.default.log("iceConnectionState is failed, closing connections to "+t),a.connection.emit("error",new Error("Negotiation of connection to "+t+" failed.")),a.connection.close();break;case"closed":$1615705ecc6adca3$exports.default.log("iceConnectionState is closed, closing connections to "+t),a.connection.emit("error",new Error("Connection to "+t+" closed.")),a.connection.close();break;case"disconnected":$1615705ecc6adca3$exports.default.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=$06cb531ed7840f78$export$7debb50ef11d5e0b.noop;break}a.connection.emit("iceStateChanged",e.iceConnectionState)},$1615705ecc6adca3$exports.default.log("Listening for data channel"),e.ondatachannel=function(d){$1615705ecc6adca3$exports.default.log("Received data channel");var u=d.channel,_=c.getConnection(t,n);_.initialize(u)},$1615705ecc6adca3$exports.default.log("Listening for remote stream"),e.ontrack=function(d){$1615705ecc6adca3$exports.default.log("Received remote stream");var u=d.streams[0],_=c.getConnection(t,n);if(_.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Media){var m=_;a._addStreamToMediaConnection(u,m)}}},r.prototype.cleanup=function(){$1615705ecc6adca3$exports.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var a=e.signalingState!=="closed",t=!1;if(this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data){var n=this.connection,s=n.dataChannel;s&&(t=!!s.readyState&&s.readyState!=="closed")}(a||t)&&e.close()}},r.prototype._makeOffer=function(){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var e,a,t,n,s,c,d;return $77f14d3e81888156$var$__generator(this,function(u){switch(u.label){case 0:e=this.connection.peerConnection,a=this.connection.provider,u.label=1;case 1:return u.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:t=u.sent(),$1615705ecc6adca3$exports.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(t.sdp=this.connection.options.sdpTransform(t.sdp)||t.sdp),u.label=3;case 3:return u.trys.push([3,5,,6]),[4,e.setLocalDescription(t)];case 4:return u.sent(),$1615705ecc6adca3$exports.default.log("Set localDescription:",t,"for:".concat(this.connection.peer)),n={sdp:t,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:$06cb531ed7840f78$export$7debb50ef11d5e0b.browser},this.connection.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data&&(s=this.connection,n=$77f14d3e81888156$var$__assign($77f14d3e81888156$var$__assign({},n),{label:s.label,reliable:s.reliable,serialization:s.serialization})),a.socket.send({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Offer,payload:n,dst:this.connection.peer}),[3,6];case 5:return c=u.sent(),c!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(a.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,c),$1615705ecc6adca3$exports.default.log("Failed to setLocalDescription, ",c)),[3,6];case 6:return[3,8];case 7:return d=u.sent(),a.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,d),$1615705ecc6adca3$exports.default.log("Failed to createOffer, ",d),[3,8];case 8:return[2]}})})},r.prototype._makeAnswer=function(){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var e,a,t,n,s;return $77f14d3e81888156$var$__generator(this,function(c){switch(c.label){case 0:e=this.connection.peerConnection,a=this.connection.provider,c.label=1;case 1:return c.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:t=c.sent(),$1615705ecc6adca3$exports.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(t.sdp=this.connection.options.sdpTransform(t.sdp)||t.sdp),c.label=3;case 3:return c.trys.push([3,5,,6]),[4,e.setLocalDescription(t)];case 4:return c.sent(),$1615705ecc6adca3$exports.default.log("Set localDescription:",t,"for:".concat(this.connection.peer)),a.socket.send({type:$60fadef21a2daafc$export$adb4a1754da6f10d.Answer,payload:{sdp:t,type:this.connection.type,connectionId:this.connection.connectionId,browser:$06cb531ed7840f78$export$7debb50ef11d5e0b.browser},dst:this.connection.peer}),[3,6];case 5:return n=c.sent(),a.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,n),$1615705ecc6adca3$exports.default.log("Failed to setLocalDescription, ",n),[3,6];case 6:return[3,8];case 7:return s=c.sent(),a.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,s),$1615705ecc6adca3$exports.default.log("Failed to create answer, ",s),[3,8];case 8:return[2]}})})},r.prototype.handleSDP=function(e,a){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var t,n,s,c;return $77f14d3e81888156$var$__generator(this,function(d){switch(d.label){case 0:a=new RTCSessionDescription(a),t=this.connection.peerConnection,n=this.connection.provider,$1615705ecc6adca3$exports.default.log("Setting remote description",a),s=this,d.label=1;case 1:return d.trys.push([1,5,,6]),[4,t.setRemoteDescription(a)];case 2:return d.sent(),$1615705ecc6adca3$exports.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),e!=="OFFER"?[3,4]:[4,s._makeAnswer()];case 3:d.sent(),d.label=4;case 4:return[3,6];case 5:return c=d.sent(),n.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,c),$1615705ecc6adca3$exports.default.log("Failed to setRemoteDescription, ",c),[3,6];case 6:return[2]}})})},r.prototype.handleCandidate=function(e){return $77f14d3e81888156$var$__awaiter(this,void 0,Promise,function(){var a,t,n,s,c,d;return $77f14d3e81888156$var$__generator(this,function(u){switch(u.label){case 0:$1615705ecc6adca3$exports.default.log("handleCandidate:",e),a=e.candidate,t=e.sdpMLineIndex,n=e.sdpMid,s=this.connection.peerConnection,c=this.connection.provider,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,s.addIceCandidate(new RTCIceCandidate({sdpMid:n,sdpMLineIndex:t,candidate:a}))];case 2:return u.sent(),$1615705ecc6adca3$exports.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return d=u.sent(),c.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC,d),$1615705ecc6adca3$exports.default.log("Failed to handleCandidate, ",d),[3,4];case 4:return[2]}})})},r.prototype._addTracksToConnection=function(e,a){if($1615705ecc6adca3$exports.default.log("add tracks from stream ".concat(e.id," to peer connection")),!a.addTrack)return $1615705ecc6adca3$exports.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(t){a.addTrack(t,e)})},r.prototype._addStreamToMediaConnection=function(e,a){$1615705ecc6adca3$exports.default.log("add stream ".concat(e.id," to media connection ").concat(a.connectionId)),a.addStream(e)},r}(),$0b3b332fd86c5202$exports={};$parcel$export($0b3b332fd86c5202$exports,"BaseConnection",()=>$0b3b332fd86c5202$export$23a2a68283c24d80,r=>$0b3b332fd86c5202$export$23a2a68283c24d80=r);var $0b3b332fd86c5202$var$__extends=function(){var r=function(e,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},r(e,a)};return function(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(e,a);function t(){this.constructor=e}e.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)}}(),$0b3b332fd86c5202$export$23a2a68283c24d80=function(r){$0b3b332fd86c5202$var$__extends(e,r);function e(a,t,n){var s=r.call(this)||this;return s.peer=a,s.provider=t,s.options=n,s._open=!1,s.metadata=n.metadata,s}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}($ac9b757d51178e15$exports.EventEmitter),$353dee38f9ab557b$var$__extends=function(){var r=function(e,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},r(e,a)};return function(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(e,a);function t(){this.constructor=e}e.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)}}(),$353dee38f9ab557b$var$__assign=function(){return $353dee38f9ab557b$var$__assign=Object.assign||function(r){for(var e,a=1,t=arguments.length;a<t;a++){e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},$353dee38f9ab557b$var$__assign.apply(this,arguments)},$353dee38f9ab557b$var$__values=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,a=e&&r[e],t=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$353dee38f9ab557b$export$4a84e95a2324ac29=function(r){$353dee38f9ab557b$var$__extends(e,r);function e(a,t,n){var s=r.call(this,a,t,n)||this;return s._localStream=s.options._stream,s.connectionId=s.options.connectionId||e.ID_PREFIX+$06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),s._negotiator=new $77f14d3e81888156$exports.Negotiator(s),s._localStream&&s._negotiator.startConnection({_stream:s._localStream,originator:!0}),s}return Object.defineProperty(e.prototype,"type",{get:function(){return $60fadef21a2daafc$export$3157d57b4135e3bc.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(a){$1615705ecc6adca3$exports.default.log("Receiving stream",a),this._remoteStream=a,r.prototype.emit.call(this,"stream",a)},e.prototype.handleMessage=function(a){var t=a.type,n=a.payload;switch(a.type){case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:this._negotiator.handleSDP(t,n.sdp),this._open=!0;break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:$1615705ecc6adca3$exports.default.warn("Unrecognized message type:".concat(t," from peer:").concat(this.peer));break}},e.prototype.answer=function(a,t){var n,s;if(t===void 0&&(t={}),this._localStream){$1615705ecc6adca3$exports.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=a,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection($353dee38f9ab557b$var$__assign($353dee38f9ab557b$var$__assign({},this.options._payload),{_stream:a}));var c=this.provider._getMessages(this.connectionId);try{for(var d=$353dee38f9ab557b$var$__values(c),u=d.next();!u.done;u=d.next()){var _=u.value;this.handleMessage(_)}}catch(m){n={error:m}}finally{try{u&&!u.done&&(s=d.return)&&s.call(d)}finally{if(n)throw n.error}}this._open=!0},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,r.prototype.emit.call(this,"close"))},e.ID_PREFIX="mc_",e}($0b3b332fd86c5202$exports.BaseConnection),$3356170d7bce7f20$exports={};$parcel$export($3356170d7bce7f20$exports,"DataConnection",()=>$3356170d7bce7f20$export$d365f7ad9d7df9c9,r=>$3356170d7bce7f20$export$d365f7ad9d7df9c9=r);var $3014d862dcc9946b$exports={};$parcel$export($3014d862dcc9946b$exports,"EncodingQueue",()=>$3014d862dcc9946b$export$c6913ae0ed687038,r=>$3014d862dcc9946b$export$c6913ae0ed687038=r);var $3014d862dcc9946b$var$__extends=function(){var r=function(e,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},r(e,a)};return function(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(e,a);function t(){this.constructor=e}e.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)}}(),$3014d862dcc9946b$export$c6913ae0ed687038=function(r){$3014d862dcc9946b$var$__extends(e,r);function e(){var a=r.call(this)||this;return a.fileReader=new FileReader,a._queue=[],a._processing=!1,a.fileReader.onload=function(t){a._processing=!1,t.target&&a.emit("done",t.target.result),a.doNextTask()},a.fileReader.onerror=function(t){$1615705ecc6adca3$exports.default.error("EncodingQueue error:",t),a._processing=!1,a.destroy(),a.emit("error",t)},a}return Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(a){this.queue.push(a),!this.processing&&this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}($ac9b757d51178e15$exports.EventEmitter),$3356170d7bce7f20$var$__extends=function(){var r=function(e,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},r(e,a)};return function(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(e,a);function t(){this.constructor=e}e.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)}}(),$3356170d7bce7f20$var$__values=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,a=e&&r[e],t=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$3356170d7bce7f20$export$d365f7ad9d7df9c9=function(r){$3356170d7bce7f20$var$__extends(e,r);function e(a,t,n){var s=r.call(this,a,t,n)||this;return s.stringify=JSON.stringify,s.parse=JSON.parse,s._buffer=[],s._bufferSize=0,s._buffering=!1,s._chunkedData={},s._encodingQueue=new $3014d862dcc9946b$exports.EncodingQueue,s.connectionId=s.options.connectionId||e.ID_PREFIX+$06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),s.label=s.options.label||s.connectionId,s.serialization=s.options.serialization||$60fadef21a2daafc$export$89f507cf986a947.Binary,s.reliable=!!s.options.reliable,s._encodingQueue.on("done",function(c){s._bufferedSend(c)}),s._encodingQueue.on("error",function(){$1615705ecc6adca3$exports.default.error("DC#".concat(s.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),s.close()}),s._negotiator=new $77f14d3e81888156$exports.Negotiator(s),s._negotiator.startConnection(s.options._payload||{originator:!0}),s}return Object.defineProperty(e.prototype,"type",{get:function(){return $60fadef21a2daafc$export$3157d57b4135e3bc.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(a){this._dc=a,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var a=this;(!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob||$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){$1615705ecc6adca3$exports.default.log("DC#".concat(a.connectionId," dc connection success")),a._open=!0,a.emit("open")},this.dataChannel.onmessage=function(t){$1615705ecc6adca3$exports.default.log("DC#".concat(a.connectionId," dc onmessage:"),t.data),a._handleDataMessage(t)},this.dataChannel.onclose=function(){$1615705ecc6adca3$exports.default.log("DC#".concat(a.connectionId," dc closed for:"),a.peer),a.close()}},e.prototype._handleDataMessage=function(a){var t=this,n=a.data,s=n.constructor,c=this.serialization===$60fadef21a2daafc$export$89f507cf986a947.Binary||this.serialization===$60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8,d=n;if(c){if(s===Blob){$06cb531ed7840f78$export$7debb50ef11d5e0b.blobToArrayBuffer(n,function(_){var m=$06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(_);t.emit("data",m)});return}else if(s===ArrayBuffer)d=$06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(n);else if(s===String){var u=$06cb531ed7840f78$export$7debb50ef11d5e0b.binaryStringToArrayBuffer(n);d=$06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(u)}}else this.serialization===$60fadef21a2daafc$export$89f507cf986a947.JSON&&(d=this.parse(n));if(d.__peerData){this._handleChunk(d);return}r.prototype.emit.call(this,"data",d)},e.prototype._handleChunk=function(a){var t=a.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:a.total};if(n.data[a.n]=a.data,n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];var s=new Blob(n.data);this._handleDataMessage({data:s})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,r.prototype.emit.call(this,"close"))},e.prototype.send=function(a,t){if(!this.open){r.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===$60fadef21a2daafc$export$89f507cf986a947.JSON)this._bufferedSend(this.stringify(a));else if(this.serialization===$60fadef21a2daafc$export$89f507cf986a947.Binary||this.serialization===$60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8){var n=$06cb531ed7840f78$export$7debb50ef11d5e0b.pack(a);if(!t&&n.size>$06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU){this._sendChunks(n);return}$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob?this._bufferedSend(n):this._encodingQueue.enque(n)}else this._bufferedSend(a)},e.prototype._bufferedSend=function(a){(this._buffering||!this._trySend(a))&&(this._buffer.push(a),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(a){var t=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){t._buffering=!1,t._tryBuffer()},50),!1;try{this.dataChannel.send(a)}catch(n){return $1615705ecc6adca3$exports.default.error("DC#:".concat(this.connectionId," Error when sending:"),n),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var a=this._buffer[0];this._trySend(a)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},e.prototype._sendChunks=function(a){var t,n,s=$06cb531ed7840f78$export$7debb50ef11d5e0b.chunk(a);$1615705ecc6adca3$exports.default.log("DC#".concat(this.connectionId," Try to send ").concat(s.length," chunks..."));try{for(var c=$3356170d7bce7f20$var$__values(s),d=c.next();!d.done;d=c.next()){var u=d.value;this.send(u,!0)}}catch(_){t={error:_}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}},e.prototype.handleMessage=function(a){var t=a.payload;switch(a.type){case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:this._negotiator.handleSDP(a.type,t.sdp);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:this._negotiator.handleCandidate(t.candidate);break;default:$1615705ecc6adca3$exports.default.warn("Unrecognized message type:",a.type,"from peer:",this.peer);break}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}($0b3b332fd86c5202$exports.BaseConnection),$9e85b3e1327369e6$exports={};$parcel$export($9e85b3e1327369e6$exports,"API",()=>$9e85b3e1327369e6$export$2c4e825dc9120f87,r=>$9e85b3e1327369e6$export$2c4e825dc9120f87=r);var $9e85b3e1327369e6$var$__awaiter=function(r,e,a,t){function n(s){return s instanceof a?s:new a(function(c){c(s)})}return new(a||(a=Promise))(function(s,c){function d(m){try{_(t.next(m))}catch(g){c(g)}}function u(m){try{_(t.throw(m))}catch(g){c(g)}}function _(m){m.done?s(m.value):n(m.value).then(d,u)}_((t=t.apply(r,e||[])).next())})},$9e85b3e1327369e6$var$__generator=function(r,e){var a={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},t,n,s,c;return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(_){return function(m){return u([_,m])}}function u(_){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,n&&(s=_[0]&2?n.return:_[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,_[1])).done)return s;switch(n=0,s&&(_=[_[0]&2,s.value]),_[0]){case 0:case 1:s=_;break;case 4:return a.label++,{value:_[1],done:!1};case 5:a.label++,n=_[1],_=[0];continue;case 7:_=a.ops.pop(),a.trys.pop();continue;default:if(s=a.trys,!(s=s.length>0&&s[s.length-1])&&(_[0]===6||_[0]===2)){a=0;continue}if(_[0]===3&&(!s||_[1]>s[0]&&_[1]<s[3])){a.label=_[1];break}if(_[0]===6&&a.label<s[1]){a.label=s[1],s=_;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(_);break}s[2]&&a.ops.pop(),a.trys.pop();continue}_=e.call(r,a)}catch(m){_=[6,m],n=0}finally{t=s=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},$9e85b3e1327369e6$export$2c4e825dc9120f87=function(){function r(e){this._options=e}return r.prototype._buildRequest=function(e){var a=this._options.secure?"https":"http",t=this._options,n=t.host,s=t.port,c=t.path,d=t.key,u=new URL("".concat(a,"://").concat(n,":").concat(s).concat(c).concat(d,"/").concat(e));return u.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),u.searchParams.set("version",$0d1ed891c5cb27c0$exports.version),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})},r.prototype.retrieveId=function(){return $9e85b3e1327369e6$var$__awaiter(this,void 0,Promise,function(){var e,a,t;return $9e85b3e1327369e6$var$__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(e=n.sent(),e.status!==200)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw a=n.sent(),$1615705ecc6adca3$exports.default.error("Error retrieving ID",a),t="",this._options.path==="/"&&this._options.host!==$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t);case 3:return[2]}})})},r.prototype.listAllPeers=function(){return $9e85b3e1327369e6$var$__awaiter(this,void 0,Promise,function(){var e,a,t;return $9e85b3e1327369e6$var$__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(e=n.sent(),e.status!==200)throw e.status===401?(a="",this._options.host===$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST?a="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":a="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+a)):new Error("Error. Status:".concat(e.status));return[2,e.json()];case 2:throw t=n.sent(),$1615705ecc6adca3$exports.default.error("Error retrieving list peers",t),new Error("Could not get list peers from the server."+t);case 3:return[2]}})})},r}(),$26088d7da5b03f69$var$__extends=function(){var r=function(e,a){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},r(e,a)};return function(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");r(e,a);function t(){this.constructor=e}e.prototype=a===null?Object.create(a):(t.prototype=a.prototype,new t)}}(),$26088d7da5b03f69$var$__assign=function(){return $26088d7da5b03f69$var$__assign=Object.assign||function(r){for(var e,a=1,t=arguments.length;a<t;a++){e=arguments[a];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},$26088d7da5b03f69$var$__assign.apply(this,arguments)},$26088d7da5b03f69$var$__values=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,a=e&&r[e],t=0;if(a)return a.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&t>=r.length&&(r=void 0),{value:r&&r[t++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$26088d7da5b03f69$var$__read=function(r,e){var a=typeof Symbol=="function"&&r[Symbol.iterator];if(!a)return r;var t=a.call(r),n,s=[],c;try{for(;(e===void 0||e-- >0)&&!(n=t.next()).done;)s.push(n.value)}catch(d){c={error:d}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(c)throw c.error}}return s},$26088d7da5b03f69$export$ecd1fc136c422448=function(r){$26088d7da5b03f69$var$__extends(e,r);function e(a,t){var n=r.call(this)||this;n._id=null,n._lastServerId=null,n._destroyed=!1,n._disconnected=!1,n._open=!1,n._connections=new Map,n._lostMessages=new Map;var s;return a&&a.constructor==Object?t=a:a&&(s=a.toString()),t=$26088d7da5b03f69$var$__assign({debug:0,host:$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST,port:$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:$06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),config:$06cb531ed7840f78$export$7debb50ef11d5e0b.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},t),n._options=t,n._options.host==="/"&&(n._options.host=window.location.hostname),n._options.path&&(n._options.path[0]!=="/"&&(n._options.path="/"+n._options.path),n._options.path[n._options.path.length-1]!=="/"&&(n._options.path+="/")),n._options.secure===void 0&&n._options.host!==$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST?n._options.secure=$06cb531ed7840f78$export$7debb50ef11d5e0b.isSecure():n._options.host==$06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST&&(n._options.secure=!0),n._options.logFunction&&$1615705ecc6adca3$exports.default.setLogFunction(n._options.logFunction),$1615705ecc6adca3$exports.default.logLevel=n._options.debug||0,n._api=new $9e85b3e1327369e6$exports.API(t),n._socket=n._createServerConnection(),!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.audioVideo&&!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.data?(n._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.BrowserIncompatible,"The current browser does not support WebRTC"),n):s&&!$06cb531ed7840f78$export$7debb50ef11d5e0b.validateId(s)?(n._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidID,'ID "'.concat(s,'" is invalid')),n):(s?n._initialize(s):n._api.retrieveId().then(function(c){return n._initialize(c)}).catch(function(c){return n._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError,c)}),n)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var a,t,n=Object.create(null);try{for(var s=$26088d7da5b03f69$var$__values(this._connections),c=s.next();!c.done;c=s.next()){var d=$26088d7da5b03f69$var$__read(c.value,2),u=d[0],_=d[1];n[u]=_}}catch(m){a={error:m}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(a)throw a.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var a=this,t=new $31d11a8d122cb4b7$exports.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return t.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Message,function(n){a._handleMessage(n)}),t.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Error,function(n){a._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketError,n)}),t.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected,function(){a.disconnected||(a.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Network,"Lost connection to server."),a.disconnect())}),t.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Close,function(){a.disconnected||a._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketClosed,"Underlying socket is already closed.")}),t},e.prototype._initialize=function(a){this._id=a,this.socket.start(a,this._options.token)},e.prototype._handleMessage=function(a){var t,n,s=a.type,c=a.payload,d=a.src;switch(s){case $60fadef21a2daafc$export$adb4a1754da6f10d.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Error:this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError,c.msg);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.IdTaken:this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case $60fadef21a2daafc$export$adb4a1754da6f10d.InvalidKey:this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Leave:$1615705ecc6adca3$exports.default.log("Received leave message from ".concat(d)),this._cleanupPeer(d),this._connections.delete(d);break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Expire:this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.PeerUnavailable,"Could not connect to peer ".concat(d));break;case $60fadef21a2daafc$export$adb4a1754da6f10d.Offer:var C=c.connectionId,k=this.getConnection(d,C);if(k&&(k.close(),$1615705ecc6adca3$exports.default.warn("Offer received for existing Connection ID:".concat(C))),c.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Media){var u=new $353dee38f9ab557b$exports.MediaConnection(d,this,{connectionId:C,_payload:c,metadata:c.metadata});k=u,this._addConnection(d,k),this.emit("call",u)}else if(c.type===$60fadef21a2daafc$export$3157d57b4135e3bc.Data){var _=new $3356170d7bce7f20$exports.DataConnection(d,this,{connectionId:C,_payload:c,metadata:c.metadata,label:c.label,serialization:c.serialization,reliable:c.reliable});k=_,this._addConnection(d,k),this.emit("connection",_)}else{$1615705ecc6adca3$exports.default.warn("Received malformed connection type:".concat(c.type));return}var m=this._getMessages(C);try{for(var g=$26088d7da5b03f69$var$__values(m),b=g.next();!b.done;b=g.next()){var S=b.value;k.handleMessage(S)}}catch(R){t={error:R}}finally{try{b&&!b.done&&(n=g.return)&&n.call(g)}finally{if(t)throw t.error}}break;default:if(!c){$1615705ecc6adca3$exports.default.warn("You received a malformed message from ".concat(d," of type ").concat(s));return}var C=c.connectionId,k=this.getConnection(d,C);k&&k.peerConnection?k.handleMessage(a):C?this._storeMessage(C,a):$1615705ecc6adca3$exports.default.warn("You received an unrecognized message:",a);break}},e.prototype._storeMessage=function(a,t){this._lostMessages.has(a)||this._lostMessages.set(a,[]),this._lostMessages.get(a).push(t)},e.prototype._getMessages=function(a){var t=this._lostMessages.get(a);return t?(this._lostMessages.delete(a),t):[]},e.prototype.connect=function(a,t){if(t===void 0&&(t={}),this.disconnected){$1615705ecc6adca3$exports.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var n=new $3356170d7bce7f20$exports.DataConnection(a,this,t);return this._addConnection(a,n),n},e.prototype.call=function(a,t,n){if(n===void 0&&(n={}),this.disconnected){$1615705ecc6adca3$exports.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){$1615705ecc6adca3$exports.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var s=new $353dee38f9ab557b$exports.MediaConnection(a,this,$26088d7da5b03f69$var$__assign($26088d7da5b03f69$var$__assign({},n),{_stream:t}));return this._addConnection(a,s),s},e.prototype._addConnection=function(a,t){$1615705ecc6adca3$exports.default.log("add connection ".concat(t.type,":").concat(t.connectionId," to peerId:").concat(a)),this._connections.has(a)||this._connections.set(a,[]),this._connections.get(a).push(t)},e.prototype._removeConnection=function(a){var t=this._connections.get(a.peer);if(t){var n=t.indexOf(a);n!==-1&&t.splice(n,1)}this._lostMessages.delete(a.connectionId)},e.prototype.getConnection=function(a,t){var n,s,c=this._connections.get(a);if(!c)return null;try{for(var d=$26088d7da5b03f69$var$__values(c),u=d.next();!u.done;u=d.next()){var _=u.value;if(_.connectionId===t)return _}}catch(m){n={error:m}}finally{try{u&&!u.done&&(s=d.return)&&s.call(d)}finally{if(n)throw n.error}}return null},e.prototype._delayedAbort=function(a,t){var n=this;setTimeout(function(){n._abort(a,t)},0)},e.prototype._abort=function(a,t){$1615705ecc6adca3$exports.default.error("Aborting!"),this.emitError(a,t),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(a,t){$1615705ecc6adca3$exports.default.error("Error:",t);var n;typeof t=="string"?n=new Error(t):n=t,n.type=a,this.emit("error",n)},e.prototype.destroy=function(){this.destroyed||($1615705ecc6adca3$exports.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},e.prototype._cleanup=function(){var a,t;try{for(var n=$26088d7da5b03f69$var$__values(this._connections.keys()),s=n.next();!s.done;s=n.next()){var c=s.value;this._cleanupPeer(c),this._connections.delete(c)}}catch(d){a={error:d}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(a){var t,n,s=this._connections.get(a);if(s)try{for(var c=$26088d7da5b03f69$var$__values(s),d=c.next();!d.done;d=c.next()){var u=d.value;u.close()}}catch(_){t={error:_}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var a=this.id;$1615705ecc6adca3$exports.default.log("Disconnect peer with ID:".concat(a)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=a,this._id=null,this.emit("disconnected",a)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)$1615705ecc6adca3$exports.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)$1615705ecc6adca3$exports.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},e.prototype.listAllPeers=function(a){var t=this;a===void 0&&(a=function(n){}),this._api.listAllPeers().then(function(n){return a(n)}).catch(function(n){return t._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError,n)})},e.DEFAULT_KEY="peerjs",e}($ac9b757d51178e15$exports.EventEmitter),$70d766613f57b014$export$2e2bcd8739ae039=$26088d7da5b03f69$exports.Peer;function cubicOut(r){const e=r-1;return e*e*e+1}function fade(r,{delay:e=0,duration:a=400,easing:t=identity}={}){const n=+getComputedStyle(r).opacity;return{delay:e,duration:a,easing:t,css:s=>`opacity: ${s*n}`}}function fly(r,{delay:e=0,duration:a=400,easing:t=cubicOut,x:n=0,y:s=0,opacity:c=0}={}){const d=getComputedStyle(r),u=+d.opacity,_=d.transform==="none"?"":d.transform,m=u*(1-c),[g,b]=split_css_unit(n),[S,C]=split_css_unit(s);return{delay:e,duration:a,easing:t,css:(k,R)=>`
			transform: ${_} translate(${(1-k)*g}${b}, ${(1-k)*S}${C});
			opacity: ${u-m*R}`}}function slide(r,{delay:e=0,duration:a=400,easing:t=cubicOut,axis:n="y"}={}){const s=getComputedStyle(r),c=+s.opacity,d=n==="y"?"height":"width",u=parseFloat(s[d]),_=n==="y"?["top","bottom"]:["left","right"],m=_.map(w=>`${w[0].toUpperCase()}${w.slice(1)}`),g=parseFloat(s[`padding${m[0]}`]),b=parseFloat(s[`padding${m[1]}`]),S=parseFloat(s[`margin${m[0]}`]),C=parseFloat(s[`margin${m[1]}`]),k=parseFloat(s[`border${m[0]}Width`]),R=parseFloat(s[`border${m[1]}Width`]);return{delay:e,duration:a,easing:t,css:w=>`overflow: hidden;opacity: ${Math.min(w*20,1)*c};${d}: ${w*u}px;padding-${_[0]}: ${w*g}px;padding-${_[1]}: ${w*b}px;margin-${_[0]}: ${w*S}px;margin-${_[1]}: ${w*C}px;border-${_[0]}-width: ${w*k}px;border-${_[1]}-width: ${w*R}px;`}}function flip$2(r,{from:e,to:a},t={}){const n=getComputedStyle(r),s=n.transform==="none"?"":n.transform,[c,d]=n.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*c/a.width-(a.left+c),_=e.top+e.height*d/a.height-(a.top+d),{delay:m=0,duration:g=S=>Math.sqrt(S)*120,easing:b=cubicOut}=t;return{delay:m,duration:is_function(g)?g(Math.sqrt(u*u+_*_)):g,easing:b,css:(S,C)=>{const k=C*u,R=C*_,w=S+C*e.width/a.width,$=S+C*e.height/a.height;return`transform: ${s} translate(${k}px, ${R}px) scale(${w}, ${$});`}}}const subscriber_queue=[];function writable(r,e=noop$1){let a;const t=new Set;function n(d){if(safe_not_equal(r,d)&&(r=d,a)){const u=!subscriber_queue.length;for(const _ of t)_[1](),subscriber_queue.push(_,r);if(u){for(let _=0;_<subscriber_queue.length;_+=2)subscriber_queue[_][0](subscriber_queue[_+1]);subscriber_queue.length=0}}}function s(d){n(d(r))}function c(d,u=noop$1){const _=[d,u];return t.add(_),t.size===1&&(a=e(n)||noop$1),d(r),()=>{t.delete(_),t.size===0&&a&&(a(),a=null)}}return{set:n,update:s,subscribe:c}}const defaults={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function createToast(){const{subscribe:r,update:e}=writable(new Array),a={};let t=0;function n(_){return _ instanceof Object}function s(_="default",m={}){return a[_]=m,a}function c(_,m){const g={target:"default",...n(_)?_:{...m,msg:_}},b=a[g.target]||{},S={...defaults,...b,...g,theme:{...b.theme,...g.theme},classes:[...b.classes||[],...g.classes||[]],id:++t};return e(C=>S.reversed?[...C,S]:[S,...C]),t}function d(_){e(m=>{if(!m.length||_===0)return[];if(typeof _=="function")return m.filter(b=>_(b));if(n(_))return m.filter(b=>b.target!==_.target);const g=_||Math.max(...m.map(b=>b.id));return m.filter(b=>b.id!==g)})}function u(_,m){const g=n(_)?_:{...m,id:_};e(b=>{const S=b.findIndex(C=>C.id===g.id);return S>-1&&(b[S]={...b[S],...g}),b})}return{subscribe:r,push:c,pop:d,set:u,_init:s}}const toast=createToast();function is_date(r){return Object.prototype.toString.call(r)==="[object Date]"}function get_interpolator(r,e){if(r===e||r!==r)return()=>r;const a=typeof r;if(a!==typeof e||Array.isArray(r)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(r)){const t=e.map((n,s)=>get_interpolator(r[s],n));return n=>t.map(s=>s(n))}if(a==="object"){if(!r||!e)throw new Error("Object cannot be null");if(is_date(r)&&is_date(e)){r=r.getTime(),e=e.getTime();const s=e-r;return c=>new Date(r+c*s)}const t=Object.keys(e),n={};return t.forEach(s=>{n[s]=get_interpolator(r[s],e[s])}),s=>{const c={};return t.forEach(d=>{c[d]=n[d](s)}),c}}if(a==="number"){const t=e-r;return n=>r+n*t}throw new Error(`Cannot interpolate ${a} values`)}function tweened(r,e={}){const a=writable(r);let t,n=r;function s(c,d){if(r==null)return a.set(r=c),Promise.resolve();n=c;let u=t,_=!1,{delay:m=0,duration:g=400,easing:b=identity,interpolate:S=get_interpolator}=assign$1(assign$1({},e),d);if(g===0)return u&&(u.abort(),u=null),a.set(r=n),Promise.resolve();const C=now()+m;let k;return t=loop(R=>{if(R<C)return!0;_||(k=S(r,c),typeof g=="function"&&(g=g(r,c)),_=!0),u&&(u.abort(),u=null);const w=R-C;return w>g?(a.set(r=c),!1):(a.set(r=k(b(w/g))),!0)}),t.promise}return{set:s,update:(c,d)=>s(c(n,r),d),subscribe:a.subscribe}}const ToastItem_svelte_svelte_type_style_lang="";function create_else_block$2(r){let e,a=r[0].msg+"",t;return{c(){e=new HtmlTag(!1),t=empty(),e.a=t},m(n,s){e.m(a,n,s),insert(n,t,s)},p(n,s){s&1&&a!==(a=n[0].msg+"")&&e.p(a)},i:noop$1,o:noop$1,d(n){n&&detach(t),n&&e.d()}}}function create_if_block_1$3(r){let e,a,t;const n=[r[2]];var s=r[0].component.src;function c(d){let u={};for(let _=0;_<n.length;_+=1)u=assign$1(u,n[_]);return{props:u}}return s&&(e=construct_svelte_component(s,c())),{c(){e&&create_component(e.$$.fragment),a=empty()},m(d,u){e&&mount_component(e,d,u),insert(d,a,u),t=!0},p(d,u){const _=u&4?get_spread_update(n,[get_spread_object(d[2])]):{};if(u&1&&s!==(s=d[0].component.src)){if(e){group_outros();const m=e;transition_out(m.$$.fragment,1,0,()=>{destroy_component(m,1)}),check_outros()}s?(e=construct_svelte_component(s,c()),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,a.parentNode,a)):e=null}else s&&e.$set(_)},i(d){t||(e&&transition_in(e.$$.fragment,d),t=!0)},o(d){e&&transition_out(e.$$.fragment,d),t=!1},d(d){d&&detach(a),e&&destroy_component(e,d)}}}function create_if_block$6(r){let e,a,t;return{c(){e=element("div"),attr(e,"class","_toastBtn pe svelte-95rq8t"),attr(e,"role","button"),attr(e,"tabindex","0")},m(n,s){insert(n,e,s),a||(t=[listen(e,"click",r[4]),listen(e,"keydown",r[8])],a=!0)},p:noop$1,d(n){n&&detach(e),a=!1,run_all(t)}}}function create_fragment$q(r){let e,a,t,n,s,c,d,u,_,m;const g=[create_if_block_1$3,create_else_block$2],b=[];function S(k,R){return k[0].component?0:1}t=S(r),n=b[t]=g[t](r);let C=r[0].dismissable&&create_if_block$6(r);return{c(){e=element("div"),a=element("div"),n.c(),s=space(),C&&C.c(),c=space(),d=element("progress"),attr(a,"role","status"),attr(a,"class","_toastMsg svelte-95rq8t"),toggle_class(a,"pe",r[0].component),attr(d,"class","_toastBar svelte-95rq8t"),d.value=r[1],attr(e,"class","_toastItem svelte-95rq8t"),toggle_class(e,"pe",r[0].pausable)},m(k,R){insert(k,e,R),append(e,a),b[t].m(a,null),append(e,s),C&&C.m(e,null),append(e,c),append(e,d),u=!0,_||(m=[listen(e,"mouseenter",r[9]),listen(e,"mouseleave",r[6])],_=!0)},p(k,[R]){let w=t;t=S(k),t===w?b[t].p(k,R):(group_outros(),transition_out(b[w],1,1,()=>{b[w]=null}),check_outros(),n=b[t],n?n.p(k,R):(n=b[t]=g[t](k),n.c()),transition_in(n,1),n.m(a,null)),(!u||R&1)&&toggle_class(a,"pe",k[0].component),k[0].dismissable?C?C.p(k,R):(C=create_if_block$6(k),C.c(),C.m(e,c)):C&&(C.d(1),C=null),(!u||R&2)&&(d.value=k[1]),(!u||R&1)&&toggle_class(e,"pe",k[0].pausable)},i(k){u||(transition_in(n),u=!0)},o(k){transition_out(n),u=!1},d(k){k&&detach(e),b[t].d(),C&&C.d(),_=!1,run_all(m)}}}function check(r,e="undefined"){return typeof r===e}function instance$q(r,e,a){let t,{item:n}=e,s=n.initial,c=s,d=!1,u={},_;const m=tweened(n.initial,{duration:n.duration,easing:identity});component_subscribe(r,m,$=>a(1,t=$));function g(){toast.pop(n.id)}function b(){(t===1||t===0)&&g()}function S(){!d&&t!==s&&(m.set(t,{duration:0}),d=!0)}function C(){if(d){const $=n.duration,P=$-$*((t-c)/(s-c));m.set(s,{duration:P}).then(b),d=!1}}function k($=document){if(check($.hidden))return;const P=()=>$.hidden?S():C(),O="visibilitychange";$.addEventListener(O,P),_=()=>$.removeEventListener(O,P),P()}onMount(k),onDestroy(()=>{check(n.onpop,"function")&&n.onpop(n.id),_&&_()});const R=$=>{$ instanceof KeyboardEvent&&["Enter"," "].includes($.key)&&g()},w=()=>{n.pausable&&S()};return r.$$set=$=>{"item"in $&&a(0,n=$.item)},r.$$.update=()=>{if(r.$$.dirty&1&&(check(n.progress)||a(0,n.next=n.progress,n)),r.$$.dirty&131&&s!==n.next&&(a(7,s=n.next),c=t,d=!1,m.set(s).then(b)),r.$$.dirty&1&&n.component){const{props:$={},sendIdTo:P}=n.component;a(2,u={...$,...P&&{[P]:n.id}})}},[n,t,u,m,g,S,C,s,R,w]}class ToastItem extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$q,create_fragment$q,safe_not_equal,{item:0})}}const SvelteToast_svelte_svelte_type_style_lang="";function get_each_context$4(r,e,a){const t=r.slice();return t[4]=e[a],t}function create_each_block$4(r,e){let a,t,n,s,c,d,u,_,m=noop$1,g;return t=new ToastItem({props:{item:e[4]}}),{key:r,first:null,c(){var b;a=element("li"),create_component(t.$$.fragment),n=space(),attr(a,"class",s=null_to_empty((b=e[4].classes)==null?void 0:b.join(" "))+" svelte-1u812xz"),attr(a,"style",c=getCss(e[4].theme)),this.first=a},m(b,S){insert(b,a,S),mount_component(t,a,null),append(a,n),g=!0},p(b,S){var k;e=b;const C={};S&1&&(C.item=e[4]),t.$set(C),(!g||S&1&&s!==(s=null_to_empty((k=e[4].classes)==null?void 0:k.join(" "))+" svelte-1u812xz"))&&attr(a,"class",s),(!g||S&1&&c!==(c=getCss(e[4].theme)))&&attr(a,"style",c)},r(){_=a.getBoundingClientRect()},f(){fix_position(a),m(),add_transform(a,_)},a(){m(),m=create_animation(a,_,flip$2,{duration:200})},i(b){g||(transition_in(t.$$.fragment,b),add_render_callback(()=>{g&&(u&&u.end(1),d=create_in_transition(a,fly,e[4].intro),d.start())}),g=!0)},o(b){transition_out(t.$$.fragment,b),d&&d.invalidate(),u=create_out_transition(a,fade,{}),g=!1},d(b){b&&detach(a),destroy_component(t),b&&u&&u.end()}}}function create_fragment$p(r){let e,a=[],t=new Map,n,s=r[0];const c=d=>d[4].id;for(let d=0;d<s.length;d+=1){let u=get_each_context$4(r,s,d),_=c(u);t.set(_,a[d]=create_each_block$4(_,u))}return{c(){e=element("ul");for(let d=0;d<a.length;d+=1)a[d].c();attr(e,"class","_toastContainer svelte-1u812xz")},m(d,u){insert(d,e,u);for(let _=0;_<a.length;_+=1)a[_]&&a[_].m(e,null);n=!0},p(d,[u]){if(u&1){s=d[0],group_outros();for(let _=0;_<a.length;_+=1)a[_].r();a=update_keyed_each(a,u,c,1,d,s,t,e,fix_and_outro_and_destroy_block,create_each_block$4,null,get_each_context$4);for(let _=0;_<a.length;_+=1)a[_].a();check_outros()}},i(d){if(!n){for(let u=0;u<s.length;u+=1)transition_in(a[u]);n=!0}},o(d){for(let u=0;u<a.length;u+=1)transition_out(a[u]);n=!1},d(d){d&&detach(e);for(let u=0;u<a.length;u+=1)a[u].d()}}}function getCss(r){return r?Object.keys(r).reduce((e,a)=>`${e}${a}:${r[a]};`,""):void 0}function instance$p(r,e,a){let t;component_subscribe(r,toast,d=>a(3,t=d));let{options:n={}}=e,{target:s="default"}=e,c=[];return r.$$set=d=>{"options"in d&&a(1,n=d.options),"target"in d&&a(2,s=d.target)},r.$$.update=()=>{r.$$.dirty&6&&toast._init(s,n),r.$$.dirty&12&&a(0,c=t.filter(d=>d.target===s))},[c,n,s,t]}class SvelteToast extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$p,create_fragment$p,safe_not_equal,{options:1,target:2})}}const LoadingIndicator_svelte_svelte_type_style_lang="";function create_if_block$5(r){let e,a,t,n,s;return{c(){e=element("div"),a=element("div"),t=space(),n=element("span"),s=text(r[0]),attr(a,"class","svelte-19tuhcz"),attr(n,"id","site_loading_text"),attr(n,"class","svelte-19tuhcz"),attr(e,"id","site_loading_indicator"),attr(e,"class","lds-circle svelte-19tuhcz")},m(c,d){insert(c,e,d),append(e,a),append(e,t),append(e,n),append(n,s)},p(c,d){d&1&&set_data(s,c[0])},d(c){c&&detach(e)}}}function create_fragment$o(r){let e,a=r[0]!=null&&create_if_block$5(r);return{c(){a&&a.c(),e=empty()},m(t,n){a&&a.m(t,n),insert(t,e,n)},p(t,[n]){t[0]!=null?a?a.p(t,n):(a=create_if_block$5(t),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},i:noop$1,o:noop$1,d(t){a&&a.d(t),t&&detach(e)}}}let currentMsg=nStore(null),loadingStack={};const showLoadingUi=(r,e)=>{const a=e||r||LOADING_MESSAGE.default;currentMsg.set(a),console.debug("showLoadingUi",a),loadingStack[r]=a},hideLoadingUi=r=>{r===LOADING_MESSAGE.clearAll?loadingStack={}:delete loadingStack[r];const e=Object.keys(loadingStack);e.length===0?currentMsg.set(null):(currentMsg.set(loadingStack[e[e.length-1]]),console.debug("hideLoadingUi Nonempty stack",r))};function instance$o(r,e,a){let t;return component_subscribe(r,currentMsg,n=>a(0,t=n)),[t]}class LoadingIndicator extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$o,create_fragment$o,safe_not_equal,{})}}function getROVName(r){return ROV_PEERID_BASE+getUniqueName(r,MEMORABLE_PEER_ID_OFFSET)}function calculateDesiredMotion(r){var e=Number(r[0].toFixed(3)),a=-1*Number(r[1].toFixed(3)),t=Number(r[2].toFixed(3)),n=-1*Number(r[3].toFixed(3));return{VelocityX:t,VelocityY:a,VelocityZ:n,AngularVelocityYaw:e}}var State$1;(function(r){r[r.Open=0]="Open",r[r.Closed=1]="Closed"})(State$1||(State$1={}));const OPEN_CLOSED_CONTEXT_NAME="headlessui-open-closed-context";function useOpenClosed(){return getContext(OPEN_CLOSED_CONTEXT_NAME)}function match(r,e,...a){if(r in e){let n=e[r];return typeof n=="function"?n(...a):n}let t=new Error(`Tried to handle "${r}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(n=>`"${n}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,match),t}let id=0;function generateId(){return++id}function useId(){return generateId()}let interactables=new Set,originals=new Map;function inert(r){r.setAttribute("aria-hidden","true"),r.inert=!0}function restore(r){let e=originals.get(r);e&&(e["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",e["aria-hidden"]),r.inert=e.inert)}function useInertOthers(r,e=!0){if(!e||!r)return;let a=r;interactables.add(a);for(let t of originals.keys())t.contains(a)&&(restore(t),originals.delete(t));return document.querySelectorAll("body > *").forEach(t=>{if(t instanceof HTMLElement){for(let n of interactables)if(t.contains(n))return;interactables.size===1&&(originals.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),inert(t))}}),()=>{if(interactables.delete(a),interactables.size>0)document.querySelectorAll("body > *").forEach(t=>{if(t instanceof HTMLElement&&!originals.has(t)){for(let n of interactables)if(t.contains(n))return;originals.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),inert(t)}});else for(let t of originals.keys())restore(t),originals.delete(t)}}function contains$1(r,e){for(let a of r)if(a.contains(e))return!0;return!1}var Keys;(function(r){r.Space=" ",r.Enter="Enter",r.Escape="Escape",r.Backspace="Backspace",r.ArrowLeft="ArrowLeft",r.ArrowUp="ArrowUp",r.ArrowRight="ArrowRight",r.ArrowDown="ArrowDown",r.Home="Home",r.End="End",r.PageUp="PageUp",r.PageDown="PageDown",r.Tab="Tab"})(Keys||(Keys={}));let focusableSelector=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(r=>`${r}:not([tabindex='-1'])`).join(",");var Focus$1;(function(r){r[r.First=1]="First",r[r.Previous=2]="Previous",r[r.Next=4]="Next",r[r.Last=8]="Last",r[r.WrapAround=16]="WrapAround",r[r.NoScroll=32]="NoScroll"})(Focus$1||(Focus$1={}));var FocusResult;(function(r){r[r.Error=0]="Error",r[r.Overflow=1]="Overflow",r[r.Success=2]="Success",r[r.Underflow=3]="Underflow"})(FocusResult||(FocusResult={}));var Direction;(function(r){r[r.Previous=-1]="Previous",r[r.Next=1]="Next"})(Direction||(Direction={}));function getFocusableElements(r=document.body){return r==null?[]:Array.from(r.querySelectorAll(focusableSelector))}var FocusableMode;(function(r){r[r.Strict=0]="Strict",r[r.Loose=1]="Loose"})(FocusableMode||(FocusableMode={}));function focusElement(r){r==null||r.focus({preventScroll:!0})}function focusIn(r,e){let a=Array.isArray(r)?r:getFocusableElements(r),t=document.activeElement,n=(()=>{if(e&(Focus$1.First|Focus$1.Next))return Direction.Next;if(e&(Focus$1.Previous|Focus$1.Last))return Direction.Previous;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),s=(()=>{if(e&Focus$1.First)return 0;if(e&Focus$1.Previous)return Math.max(0,a.indexOf(t))-1;if(e&Focus$1.Next)return Math.max(0,a.indexOf(t))+1;if(e&Focus$1.Last)return a.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&Focus$1.NoScroll?{preventScroll:!0}:{},d=0,u=a.length,_;do{if(d>=u||d+u<=0)return FocusResult.Error;let m=s+d;if(e&Focus$1.WrapAround)m=(m+u)%u;else{if(m<0)return FocusResult.Underflow;if(m>=u)return FocusResult.Overflow}_=a[m],_==null||_.focus(c),d+=n}while(_!==document.activeElement);return _.hasAttribute("tabindex")||_.setAttribute("tabindex","0"),FocusResult.Success}const{window:window_1$1}=globals;function create_fragment$n(r){let e,a;return{c:noop$1,m(t,n){e||(a=[listen(window_1$1,"keydown",r[0]),listen(window_1$1,"focus",r[1],!0)],e=!0)},p:noop$1,i:noop$1,o:noop$1,d(t){e=!1,run_all(a)}}}function instance$n(r,e,a){let{containers:t}=e,{enabled:n=!0}=e,{options:s={}}=e,c=typeof window<"u"?document.activeElement:null,d=null;async function u(){if(!n||t.size!==1)return;let{initialFocus:S}=s;await tick();let C=document.activeElement;if(S){if(S===C)return}else if(contains$1(t,C))return;if(c=C,S)focusElement(S);else{let k=!1;for(let R of t)if(focusIn(R,Focus$1.First)===FocusResult.Success){k=!0;break}k||console.warn("There are no focusable elements inside the <FocusTrap />")}d=document.activeElement}function _(){focusElement(c),c=null,d=null}onMount(u);let m=!1;onDestroy(()=>{m=!0,_()});function g(S){if(n&&S.key===Keys.Tab&&document.activeElement&&t.size===1){S.preventDefault();for(let C of t)if(focusIn(C,(S.shiftKey?Focus$1.Previous:Focus$1.Next)|Focus$1.WrapAround)===FocusResult.Success){d=document.activeElement;break}}}function b(S){if(S.target===window.document.body||!n||t.size!==1||m)return;let C=d;if(!C)return;let k=S.target;k&&k instanceof HTMLElement?contains$1(t,k)?(d=k,focusElement(k)):(S.preventDefault(),S.stopPropagation(),focusElement(C)):focusElement(d)}return r.$$set=S=>{"containers"in S&&a(2,t=S.containers),"enabled"in S&&a(3,n=S.enabled),"options"in S&&a(4,s=S.options)},r.$$.update=()=>{r.$$.dirty&12&&(n&&t?u():_())},[g,b,t,n,s]}class FocusTrap extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$n,create_fragment$n,safe_not_equal,{containers:2,enabled:3,options:4})}}function create_fragment$m(r){let e;const a=r[4].default,t=create_slot(a,r,r[3],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,[s]){t&&t.p&&(!e||s&8)&&update_slot_base(t,a,n,n[3],e?get_slot_changes(a,n[3],s,null):get_all_dirty_from_scope(n[3]),null)},i(n){e||(transition_in(t,n),e=!0)},o(n){transition_out(t,n),e=!1},d(n){t&&t.d(n)}}}var StackMessage;(function(r){r[r.Add=0]="Add",r[r.Remove=1]="Remove"})(StackMessage||(StackMessage={}));const STACK_CONTEXT_NAME="headlessui-stack-context";function instance$m(r,e,a){let t,{$$slots:n={},$$scope:s}=e,{onUpdate:c}=e,{element:d}=e;function u(...m){c==null||c(...m),_==null||_(...m)}let _=getContext(STACK_CONTEXT_NAME);return setContext(STACK_CONTEXT_NAME,u),onDestroy(()=>{t&&t()}),r.$$set=m=>{"onUpdate"in m&&a(0,c=m.onUpdate),"element"in m&&a(1,d=m.element),"$$scope"in m&&a(3,s=m.$$scope)},r.$$.update=()=>{r.$$.dirty&6&&a(2,t=(()=>{if(t&&t(),!d)return null;let m=d;return u(StackMessage.Add,m),()=>u(StackMessage.Remove,m)})())},[c,d,t,s,n]}class StackContextProvider extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$m,create_fragment$m,safe_not_equal,{onUpdate:0,element:1})}}const get_default_slot_changes$4=r=>({describedby:r&1}),get_default_slot_context$4=r=>({describedby:r[0].descriptionIds});function create_fragment$l(r){let e;const a=r[6].default,t=create_slot(a,r,r[5],get_default_slot_context$4);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,[s]){t&&t.p&&(!e||s&33)&&update_slot_base(t,a,n,n[5],e?get_slot_changes(a,n[5],s,get_default_slot_changes$4):get_all_dirty_from_scope(n[5]),get_default_slot_context$4)},i(n){e||(transition_in(t,n),e=!0)},o(n){transition_out(t,n),e=!1},d(n){t&&t.d(n)}}}const DESCRIPTION_CONTEXT_NAME="headlessui-description-context";function useDescriptionContext(){return getContext(DESCRIPTION_CONTEXT_NAME)}function instance$l(r,e,a){const t=["name","slotProps"];let n=compute_rest_props(e,t),s,{$$slots:c={},$$scope:d}=e,{name:u}=e,{slotProps:_={}}=e,m=[],g=writable({name:u,slotProps:_,props:n,register:b});component_subscribe(r,g,S=>a(0,s=S)),setContext(DESCRIPTION_CONTEXT_NAME,g);function b(S){return a(4,m=[...m,S]),()=>{a(4,m=m.filter(C=>C!==S))}}return r.$$set=S=>{e=assign$1(assign$1({},e),exclude_internal_props(S)),a(8,n=compute_rest_props(e,t)),"name"in S&&a(2,u=S.name),"slotProps"in S&&a(3,_=S.slotProps),"$$scope"in S&&a(5,d=S.$$scope)},r.$$.update=()=>{g.set({name:u,slotProps:_,props:n,register:b,descriptionIds:m.length>0?m.join(" "):void 0})},[s,g,u,_,m,d,c]}class DescriptionProvider extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$l,create_fragment$l,safe_not_equal,{name:2,slotProps:3})}}function create_fragment$k(r){let e;const a=r[2].default,t=create_slot(a,r,r[1],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,[s]){t&&t.p&&(!e||s&2)&&update_slot_base(t,a,n,n[1],e?get_slot_changes(a,n[1],s,null):get_all_dirty_from_scope(n[1]),null)},i(n){e||(transition_in(t,n),e=!0)},o(n){transition_out(t,n),e=!1},d(n){t&&t.d(n)}}}const FORCE_PORTAL_ROOT_CONTEXT_NAME="headlessui-force-portal-root-context";function usePortalRoot(){return getContext(FORCE_PORTAL_ROOT_CONTEXT_NAME)}function instance$k(r,e,a){let{$$slots:t={},$$scope:n}=e,{force:s}=e;return setContext(FORCE_PORTAL_ROOT_CONTEXT_NAME,writable(s)),r.$$set=c=>{"force"in c&&a(0,s=c.force),"$$scope"in c&&a(1,n=c.$$scope)},[s,n,t]}class ForcePortalRootContext extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$k,create_fragment$k,safe_not_equal,{force:0})}}function create_fragment$j(r){let e;const a=r[2].default,t=create_slot(a,r,r[1],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,[s]){t&&t.p&&(!e||s&2)&&update_slot_base(t,a,n,n[1],e?get_slot_changes(a,n[1],s,null):get_all_dirty_from_scope(n[1]),null)},i(n){e||(transition_in(t,n),e=!0)},o(n){transition_out(t,n),e=!1},d(n){t&&t.d(n)}}}const PORTAL_GROUP_CONTEXT_NAME="headlessui-portal-group-context";function usePortalGroupContext(){return getContext(PORTAL_GROUP_CONTEXT_NAME)}function instance$j(r,e,a){let{$$slots:t={},$$scope:n}=e,{target:s}=e,c=writable(s);return setContext(PORTAL_GROUP_CONTEXT_NAME,c),r.$$set=d=>{"target"in d&&a(0,s=d.target),"$$scope"in d&&a(1,n=d.$$scope)},r.$$.update=()=>{r.$$.dirty&1&&c.set(s)},[s,n,t]}class PortalGroup extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$j,create_fragment$j,safe_not_equal,{target:0})}}function portal(r,e){return e&&e.append(r),{update(a){e=a,a.append(r)},destroy(){var a;e!=null&&e.contains(r)&&e.removeChild(r),e&&e.childNodes.length<=0&&((a=e.parentElement)==null||a.removeChild(e))}}}function create_fragment$i(r){let e,a,t,n,s;const c=r[6].default,d=create_slot(c,r,r[5],null);return{c(){e=element("div"),d&&d.c()},m(u,_){insert(u,e,_),d&&d.m(e,null),t=!0,n||(s=action_destroyer(a=portal.call(null,e,r[0])),n=!0)},p(u,[_]){d&&d.p&&(!t||_&32)&&update_slot_base(d,c,u,u[5],t?get_slot_changes(c,u[5],_,null):get_all_dirty_from_scope(u[5]),null),a&&is_function(a.update)&&_&1&&a.update.call(null,u[0])},i(u){t||(transition_in(d,u),t=!0)},o(u){transition_out(d,u),t=!1},d(u){u&&detach(e),d&&d.d(u),n=!1,s()}}}function instance$i(r,e,a){let t,n,s,{$$slots:c={},$$scope:d}=e,u=usePortalRoot();component_subscribe(r,u,m=>a(4,s=m));let _=usePortalGroupContext();return component_subscribe(r,_,m=>a(3,n=m)),r.$$set=m=>{"$$scope"in m&&a(5,d=m.$$scope)},r.$$.update=()=>{r.$$.dirty&24&&a(0,t=(()=>{if(!(u&&s)&&_!==void 0&&n!==null)return n;if(typeof window>"u")return null;let m=document.getElementById("headlessui-portal-root");if(m)return m;let g=document.createElement("div");return g.setAttribute("id","headlessui-portal-root"),tick().then(()=>{g!==document.body.lastChild&&document.body.appendChild(g)}),document.body.appendChild(g)})())},[t,u,_,n,s,d,c]}class Portal extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$i,create_fragment$i,safe_not_equal,{})}}const MODIFIER_DIVIDER="!",modifierRegex=new RegExp(`^[^${MODIFIER_DIVIDER}]+(?:${MODIFIER_DIVIDER}(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$`);function forwardEventsBuilder(r,e=[]){let a,t=[];r.$on=(s,c)=>{let d=s,u=()=>{};for(let _ of e){if(typeof _=="string"&&_===d){const m=r.$$.callbacks[d]||(r.$$.callbacks[d]=[]);return m.push(c),()=>{const g=m.indexOf(c);g!==-1&&m.splice(g,1)}}if(typeof _=="object"&&_.name===d){let m=c;c=(...g)=>{typeof _=="object"&&_.shouldExclude()||m(...g)}}}return a?u=a(d,c):t.push([d,c]),()=>{u()}};function n(s){bubble(r,s)}return s=>{const c=[],d={};a=(u,_)=>{let m=u,g=_,b=!1;if(m.match(modifierRegex)){const R=m.split(MODIFIER_DIVIDER);m=R[0];const w=Object.fromEntries(R.slice(1).map($=>[$,!0]));w.passive&&(b=b||{},b.passive=!0),w.nonpassive&&(b=b||{},b.passive=!1),w.capture&&(b=b||{},b.capture=!0),w.once&&(b=b||{},b.once=!0),w.preventDefault&&(g=prevent_default(g)),w.stopPropagation&&(g=stop_propagation(g))}const C=listen(s,m,g,b),k=()=>{C();const R=c.indexOf(k);R>-1&&c.splice(R,1)};return c.push(k),m in d||(d[m]=listen(s,m,n)),k};for(let u=0;u<t.length;u++)a(t[u][0],t[u][1]);return{destroy:()=>{for(let u=0;u<c.length;u++)c[u]();for(let u of Object.entries(d))u[1]()}}}}const components=["a","address","article","aside","b","bdi","bdo","blockquote","button","cite","code","data","datalist","dd","dl","dt","div","em","footer","form","h1","h2","h3","h4","h5","h6","header","i","input","label","li","main","nav","ol","p","section","span","strong","ul"];function isValidElement(r){return!(typeof r=="string"&&!components.includes(r))}function useActions(r,e){let a=[];if(e)for(let t=0;t<e.length;t++){const n=e[t],s=Array.isArray(n)?n[0]:n;Array.isArray(n)&&n.length>1?a.push(s(r,n[1])):a.push(s(r))}return{update(t){if((t&&t.length||0)!=a.length)throw new Error("You must not change the length of an actions array.");if(t)for(let n=0;n<t.length;n++){const s=a[n];if(s&&s.update){const c=t[n];Array.isArray(c)&&c.length>1?s.update(c[1]):s.update()}}},destroy(){for(let t=0;t<a.length;t++){const n=a[t];n&&n.destroy&&n.destroy()}}}}var Features;(function(r){r[r.None=0]="None",r[r.RenderStrategy=1]="RenderStrategy",r[r.Static=2]="Static"})(Features||(Features={}));function create_if_block$4(r){let e,a,t,n;const s=[create_if_block_1$2,create_if_block_2$2,create_if_block_3,create_if_block_4,create_if_block_5,create_if_block_6,create_if_block_7,create_if_block_8,create_if_block_9,create_if_block_10,create_if_block_11,create_if_block_12,create_if_block_13,create_if_block_14,create_if_block_15,create_if_block_16,create_if_block_17,create_if_block_18,create_if_block_19,create_if_block_20,create_if_block_21,create_if_block_22,create_if_block_23,create_if_block_24,create_if_block_25,create_if_block_26,create_if_block_27,create_if_block_28,create_if_block_29,create_if_block_30,create_if_block_31,create_if_block_32,create_if_block_33,create_if_block_34,create_if_block_35,create_if_block_36,create_if_block_37,create_if_block_38,create_if_block_39,create_else_block$1],c=[];function d(u,_){return u[1]==="a"?0:u[1]==="address"?1:u[1]==="article"?2:u[1]==="aside"?3:u[1]==="b"?4:u[1]==="bdi"?5:u[1]==="bdo"?6:u[1]==="blockquote"?7:u[1]==="button"?8:u[1]==="cite"?9:u[1]==="code"?10:u[1]==="data"?11:u[1]==="datalist"?12:u[1]==="dd"?13:u[1]==="dl"?14:u[1]==="dt"?15:u[1]==="div"?16:u[1]==="em"?17:u[1]==="footer"?18:u[1]==="form"?19:u[1]==="h1"?20:u[1]==="h2"?21:u[1]==="h3"?22:u[1]==="h4"?23:u[1]==="h5"?24:u[1]==="h6"?25:u[1]==="header"?26:u[1]==="i"?27:u[1]==="input"?28:u[1]==="label"?29:u[1]==="li"?30:u[1]==="main"?31:u[1]==="nav"?32:u[1]==="ol"?33:u[1]==="p"?34:u[1]==="section"?35:u[1]==="span"?36:u[1]==="strong"?37:u[1]==="ul"?38:39}return e=d(r),a=c[e]=s[e](r),{c(){a.c(),t=empty()},m(u,_){c[e].m(u,_),insert(u,t,_),n=!0},p(u,_){let m=e;e=d(u),e===m?c[e].p(u,_):(group_outros(),transition_out(c[m],1,1,()=>{c[m]=null}),check_outros(),a=c[e],a?a.p(u,_):(a=c[e]=s[e](u),a.c()),transition_in(a,1),a.m(t.parentNode,t))},i(u){n||(transition_in(a),n=!0)},o(u){transition_out(a),n=!1},d(u){c[e].d(u),u&&detach(t)}}}function create_else_block$1(r){let e,a,t,n;const s=[{use:[...r[2],r[6]]},r[7],r[3],{hidden:r[4]||void 0}];function c(_){r[58](_)}var d=r[1];function u(_){let m={$$slots:{default:[create_default_slot$8]},$$scope:{ctx:_}};for(let g=0;g<s.length;g+=1)m=assign$1(m,s[g]);return _[0]!==void 0&&(m.el=_[0]),{props:m}}return d&&(e=construct_svelte_component(d,u(r)),binding_callbacks.push(()=>bind(e,"el",c))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(_,m){e&&mount_component(e,_,m),insert(_,t,m),n=!0},p(_,m){const g=m[0]&220?get_spread_update(s,[m[0]&68&&{use:[..._[2],_[6]]},m[0]&128&&get_spread_object(_[7]),m[0]&8&&get_spread_object(_[3]),m[0]&16&&{hidden:_[4]||void 0}]):{};if(m[1]&268435456&&(g.$$scope={dirty:m,ctx:_}),!a&&m[0]&1&&(a=!0,g.el=_[0],add_flush_callback(()=>a=!1)),m[0]&2&&d!==(d=_[1])){if(e){group_outros();const b=e;transition_out(b.$$.fragment,1,0,()=>{destroy_component(b,1)}),check_outros()}d?(e=construct_svelte_component(d,u(_)),binding_callbacks.push(()=>bind(e,"el",c)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else d&&e.$set(g)},i(_){n||(e&&transition_in(e.$$.fragment,_),n=!0)},o(_){e&&transition_out(e.$$.fragment,_),n=!1},d(_){_&&detach(t),e&&destroy_component(e,_)}}}function create_if_block_39(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("ul"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[57](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[57](null),s=!1,run_all(c)}}}function create_if_block_38(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("strong"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[56](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[56](null),s=!1,run_all(c)}}}function create_if_block_37(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("span"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[55](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[55](null),s=!1,run_all(c)}}}function create_if_block_36(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("section"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[54](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[54](null),s=!1,run_all(c)}}}function create_if_block_35(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("p"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[53](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[53](null),s=!1,run_all(c)}}}function create_if_block_34(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("ol"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[52](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[52](null),s=!1,run_all(c)}}}function create_if_block_33(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("nav"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[51](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[51](null),s=!1,run_all(c)}}}function create_if_block_32(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("main"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[50](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[50](null),s=!1,run_all(c)}}}function create_if_block_31(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("li"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[49](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[49](null),s=!1,run_all(c)}}}function create_if_block_30(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("label"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[48](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[48](null),s=!1,run_all(c)}}}function create_if_block_29(r){let e,a,t,n,s,c=[r[7],r[3],{hidden:a=r[4]||void 0}],d={};for(let u=0;u<c.length;u+=1)d=assign$1(d,c[u]);return{c(){e=element("input"),set_attributes(e,d)},m(u,_){insert(u,e,_),e.autofocus&&e.focus(),r[47](e),n||(s=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],n=!0)},p(u,_){set_attributes(e,d=get_spread_update(c,[_[0]&128&&u[7],_[0]&8&&u[3],_[0]&16&&a!==(a=u[4]||void 0)&&{hidden:a}])),t&&is_function(t.update)&&_[0]&4&&t.update.call(null,u[2])},i:noop$1,o:noop$1,d(u){u&&detach(e),r[47](null),n=!1,run_all(s)}}}function create_if_block_28(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("i"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[46](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[46](null),s=!1,run_all(c)}}}function create_if_block_27(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("header"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[45](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[45](null),s=!1,run_all(c)}}}function create_if_block_26(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("h6"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[44](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[44](null),s=!1,run_all(c)}}}function create_if_block_25(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("h5"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[43](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[43](null),s=!1,run_all(c)}}}function create_if_block_24(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("h4"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[42](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[42](null),s=!1,run_all(c)}}}function create_if_block_23(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("h3"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[41](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[41](null),s=!1,run_all(c)}}}function create_if_block_22(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("h2"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[40](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[40](null),s=!1,run_all(c)}}}function create_if_block_21(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("h1"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[39](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[39](null),s=!1,run_all(c)}}}function create_if_block_20(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("form"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[38](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[38](null),s=!1,run_all(c)}}}function create_if_block_19(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("footer"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[37](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[37](null),s=!1,run_all(c)}}}function create_if_block_18(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("em"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[36](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[36](null),s=!1,run_all(c)}}}function create_if_block_17(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("div"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[35](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[35](null),s=!1,run_all(c)}}}function create_if_block_16(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("dt"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[34](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[34](null),s=!1,run_all(c)}}}function create_if_block_15(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("dl"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[33](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[33](null),s=!1,run_all(c)}}}function create_if_block_14(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("dd"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[32](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[32](null),s=!1,run_all(c)}}}function create_if_block_13(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("datalist"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[31](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[31](null),s=!1,run_all(c)}}}function create_if_block_12(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("data"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[30](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[30](null),s=!1,run_all(c)}}}function create_if_block_11(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("code"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[29](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[29](null),s=!1,run_all(c)}}}function create_if_block_10(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("cite"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[28](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[28](null),s=!1,run_all(c)}}}function create_if_block_9(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("button"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),e.autofocus&&e.focus(),r[27](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[27](null),s=!1,run_all(c)}}}function create_if_block_8(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("blockquote"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[26](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[26](null),s=!1,run_all(c)}}}function create_if_block_7(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("bdo"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[25](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[25](null),s=!1,run_all(c)}}}function create_if_block_6(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("bdi"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[24](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[24](null),s=!1,run_all(c)}}}function create_if_block_5(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("b"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[23](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[23](null),s=!1,run_all(c)}}}function create_if_block_4(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("aside"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[22](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[22](null),s=!1,run_all(c)}}}function create_if_block_3(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("article"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[21](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[21](null),s=!1,run_all(c)}}}function create_if_block_2$2(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("address"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[20](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[20](null),s=!1,run_all(c)}}}function create_if_block_1$2(r){let e,a,t,n,s,c;const d=r[18].default,u=create_slot(d,r,r[59],null);let _=[r[7],r[3],{hidden:a=r[4]||void 0}],m={};for(let g=0;g<_.length;g+=1)m=assign$1(m,_[g]);return{c(){e=element("a"),u&&u.c(),set_attributes(e,m)},m(g,b){insert(g,e,b),u&&u.m(e,null),r[19](e),n=!0,s||(c=[action_destroyer(t=useActions.call(null,e,r[2])),action_destroyer(r[6].call(null,e))],s=!0)},p(g,b){u&&u.p&&(!n||b[1]&268435456)&&update_slot_base(u,d,g,g[59],n?get_slot_changes(d,g[59],b,null):get_all_dirty_from_scope(g[59]),null),set_attributes(e,m=get_spread_update(_,[b[0]&128&&g[7],b[0]&8&&g[3],(!n||b[0]&16&&a!==(a=g[4]||void 0))&&{hidden:a}])),t&&is_function(t.update)&&b[0]&4&&t.update.call(null,g[2])},i(g){n||(transition_in(u,g),n=!0)},o(g){transition_out(u,g),n=!1},d(g){g&&detach(e),u&&u.d(g),r[19](null),s=!1,run_all(c)}}}function create_default_slot$8(r){let e;const a=r[18].default,t=create_slot(a,r,r[59],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s[1]&268435456)&&update_slot_base(t,a,n,n[59],e?get_slot_changes(a,n[59],s,null):get_all_dirty_from_scope(n[59]),null)},i(n){e||(transition_in(t,n),e=!0)},o(n){transition_out(t,n),e=!1},d(n){t&&t.d(n)}}}function create_fragment$h(r){let e,a,t=r[5]&&create_if_block$4(r);return{c(){t&&t.c(),e=empty()},m(n,s){t&&t.m(n,s),insert(n,e,s),a=!0},p(n,s){n[5]?t?(t.p(n,s),s[0]&32&&transition_in(t,1)):(t=create_if_block$4(n),t.c(),transition_in(t,1),t.m(e.parentNode,e)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(n){a||(transition_in(t),a=!0)},o(n){transition_out(t),a=!1},d(n){t&&t.d(n),n&&detach(e)}}}var RenderStrategy;(function(r){r[r.Unmount=0]="Unmount",r[r.Hidden=1]="Hidden"})(RenderStrategy||(RenderStrategy={}));function instance$h(r,e,a){let t,n,s,c,d;const u=["name","as","slotProps","el","use","visible","features","unmount","static","class","style"];let _=compute_rest_props(e,u),{$$slots:m={},$$scope:g}=e;const b=forwardEventsBuilder(get_current_component());let{name:S}=e,{as:C}=e,{slotProps:k}=e,{el:R=null}=e,{use:w=[]}=e,{visible:$=!0}=e,{features:P=Features.None}=e,{unmount:O=!0}=e,{static:B=!1}=e,{class:N=void 0}=e,{style:j=void 0}=e;if(!C)throw new Error(`<${S}> did not provide an \`as\` value to <Render>`);if(!isValidElement(C))throw new Error(`<${S}> has an invalid or unsupported \`as\` prop: ${C}`);function U(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function q(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function V(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function W(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function x(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function J(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function X(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function Z(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function ee(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function Q(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function z(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function K(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function ne(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function F(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function Y(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function ae(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function te(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function re(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function oe(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function ce(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function se(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function ie(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function de(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function ue(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function Ae(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function he(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function Ce(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function ke(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function ge(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function _e(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function Re(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function Te(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function le(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function fe(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function me(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function ve(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function pe(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function ye(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function be(I){binding_callbacks[I?"unshift":"push"](()=>{R=I,a(0,R)})}function Se(I){R=I,a(0,R)}return r.$$set=I=>{e=assign$1(assign$1({},e),exclude_internal_props(I)),a(7,_=compute_rest_props(e,u)),"name"in I&&a(8,S=I.name),"as"in I&&a(1,C=I.as),"slotProps"in I&&a(9,k=I.slotProps),"el"in I&&a(0,R=I.el),"use"in I&&a(2,w=I.use),"visible"in I&&a(10,$=I.visible),"features"in I&&a(11,P=I.features),"unmount"in I&&a(12,O=I.unmount),"static"in I&&a(13,B=I.static),"class"in I&&a(14,N=I.class),"style"in I&&a(15,j=I.style),"$$scope"in I&&a(59,g=I.$$scope)},r.$$.update=()=>{r.$$.dirty[0]&16896&&a(17,t=typeof N=="function"?N(k):N),r.$$.dirty[0]&33280&&a(16,n=typeof j=="function"?j(k):j),r.$$.dirty[0]&15360&&a(5,s=$||P&Features.Static&&B||!(P&Features.RenderStrategy&&O)),r.$$.dirty[0]&15360&&a(4,c=!$&&!(P&Features.Static&&B)&&P&Features.RenderStrategy&&!O),r.$$.dirty[0]&196624&&a(3,d={class:t,style:`${n??""}${c?" display: none":""}`||void 0}),r.$$.dirty[0]&8&&d.style===void 0&&delete d.style},[R,C,w,d,c,s,b,_,S,k,$,P,O,B,N,j,n,t,m,U,q,V,W,x,J,X,Z,ee,Q,z,K,ne,F,Y,ae,te,re,oe,ce,se,ie,de,ue,Ae,he,Ce,ke,ge,_e,Re,Te,le,fe,me,ve,pe,ye,be,Se,g]}class Render extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$h,create_fragment$h,safe_not_equal,{name:8,as:1,slotProps:9,el:0,use:2,visible:10,features:11,unmount:12,static:13,class:14,style:15},null,[-1,-1])}}const{window:window_1}=globals,get_default_slot_spread_changes$3=r=>r&64,get_default_slot_changes$3=r=>({}),get_default_slot_context$3=r=>({...r[6]});function create_default_slot_6(r){let e;const a=r[24].default,t=create_slot(a,r,r[27],get_default_slot_context$3);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&134217792)&&update_slot_base(t,a,n,n[27],get_default_slot_spread_changes$3(s)||!e?get_all_dirty_from_scope(n[27]):get_slot_changes(a,n[27],s,get_default_slot_changes$3),get_default_slot_context$3)},i(n){e||(transition_in(t,n),e=!0)},o(n){transition_out(t,n),e=!1},d(n){t&&t.d(n)}}}function create_default_slot_5(r){let e,a,t;const n=[{...r[14],...r[7]},{as:r[0]},{slotProps:r[6]},{use:[...r[1],r[9]]},{name:"Dialog"},{"aria-describedby":r[30]},{visible:r[8]},{features:Features.RenderStrategy|Features.Static}];function s(d){r[25](d)}let c={$$slots:{default:[create_default_slot_6]},$$scope:{ctx:r}};for(let d=0;d<n.length;d+=1)c=assign$1(c,n[d]);return r[3]!==void 0&&(c.el=r[3]),e=new Render({props:c}),binding_callbacks.push(()=>bind(e,"el",s)),e.$on("click",handleClick),{c(){create_component(e.$$.fragment)},m(d,u){mount_component(e,d,u),t=!0},p(d,u){const _=u&1073759171?get_spread_update(n,[u&16512&&{...d[14],...d[7]},u&1&&{as:d[0]},u&64&&{slotProps:d[6]},u&514&&{use:[...d[1],d[9]]},n[4],u&1073741824&&{"aria-describedby":d[30]},u&256&&{visible:d[8]},u&0&&{features:Features.RenderStrategy|Features.Static}]):{};u&134217792&&(_.$$scope={dirty:u,ctx:d}),!a&&u&8&&(a=!0,_.el=d[3],add_flush_callback(()=>a=!1)),e.$set(_)},i(d){t||(transition_in(e.$$.fragment,d),t=!0)},o(d){transition_out(e.$$.fragment,d),t=!1},d(d){destroy_component(e,d)}}}function create_default_slot_4(r){let e,a;return e=new DescriptionProvider({props:{name:"DialogDescription",slotProps:r[6],$$slots:{default:[create_default_slot_5,({describedby:t})=>({30:t}),({describedby:t})=>t?1073741824:0]},$$scope:{ctx:r}}}),{c(){create_component(e.$$.fragment)},m(t,n){mount_component(e,t,n),a=!0},p(t,n){const s={};n&64&&(s.slotProps=t[6]),n&1207976395&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){a||(transition_in(e.$$.fragment,t),a=!0)},o(t){transition_out(e.$$.fragment,t),a=!1},d(t){destroy_component(e,t)}}}function create_default_slot_3(r){let e,a;return e=new ForcePortalRootContext({props:{force:!1,$$slots:{default:[create_default_slot_4]},$$scope:{ctx:r}}}),{c(){create_component(e.$$.fragment)},m(t,n){mount_component(e,t,n),a=!0},p(t,n){const s={};n&134234571&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){a||(transition_in(e.$$.fragment,t),a=!0)},o(t){transition_out(e.$$.fragment,t),a=!1},d(t){destroy_component(e,t)}}}function create_default_slot_2$1(r){let e,a;return e=new PortalGroup({props:{target:r[3],$$slots:{default:[create_default_slot_3]},$$scope:{ctx:r}}}),{c(){create_component(e.$$.fragment)},m(t,n){mount_component(e,t,n),a=!0},p(t,n){const s={};n&8&&(s.target=t[3]),n&134234571&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){a||(transition_in(e.$$.fragment,t),a=!0)},o(t){transition_out(e.$$.fragment,t),a=!1},d(t){destroy_component(e,t)}}}function create_default_slot_1$4(r){let e,a;return e=new Portal({props:{$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:r}}}),{c(){create_component(e.$$.fragment)},m(t,n){mount_component(e,t,n),a=!0},p(t,n){const s={};n&134234571&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){a||(transition_in(e.$$.fragment,t),a=!0)},o(t){transition_out(e.$$.fragment,t),a=!1},d(t){destroy_component(e,t)}}}function create_default_slot$7(r){let e,a;return e=new ForcePortalRootContext({props:{force:!0,$$slots:{default:[create_default_slot_1$4]},$$scope:{ctx:r}}}),{c(){create_component(e.$$.fragment)},m(t,n){mount_component(e,t,n),a=!0},p(t,n){const s={};n&134234571&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){a||(transition_in(e.$$.fragment,t),a=!0)},o(t){transition_out(e.$$.fragment,t),a=!1},d(t){destroy_component(e,t)}}}function create_fragment$g(r){let e,a,t,n,s,c;return e=new FocusTrap({props:{containers:r[5],enabled:r[4],options:{initialFocus:r[2]}}}),t=new StackContextProvider({props:{element:r[3],onUpdate:r[26],$$slots:{default:[create_default_slot$7]},$$scope:{ctx:r}}}),{c(){create_component(e.$$.fragment),a=space(),create_component(t.$$.fragment)},m(d,u){mount_component(e,d,u),insert(d,a,u),mount_component(t,d,u),n=!0,s||(c=[listen(window_1,"mousedown",r[12]),listen(window_1,"keydown",r[13])],s=!0)},p(d,[u]){const _={};u&32&&(_.containers=d[5]),u&16&&(_.enabled=d[4]),u&4&&(_.options={initialFocus:d[2]}),e.$set(_);const m={};u&8&&(m.element=d[3]),u&32&&(m.onUpdate=d[26]),u&134234571&&(m.$$scope={dirty:u,ctx:d}),t.$set(m)},i(d){n||(transition_in(e.$$.fragment,d),transition_in(t.$$.fragment,d),n=!0)},o(d){transition_out(e.$$.fragment,d),transition_out(t.$$.fragment,d),n=!1},d(d){destroy_component(e,d),d&&detach(a),destroy_component(t,d),s=!1,run_all(c)}}}var DialogStates;(function(r){r[r.Open=0]="Open",r[r.Closed=1]="Closed"})(DialogStates||(DialogStates={}));const DIALOG_CONTEXT_NAME="headlessui-dialog-context";function useDialogContext(r){let e=getContext(DIALOG_CONTEXT_NAME);if(e===void 0)throw new Error(`<${r} /> is missing a parent <Dialog /> component.`);return e}function handleClick(r){r.stopPropagation()}function instance$g(r,e,a){let t,n,s,c,d,u,_,m;const g=["as","use","open","initialFocus"];let b=compute_rest_props(e,g),S,C,{$$slots:k={},$$scope:R}=e,{as:w="div"}=e,{use:$=[]}=e,{open:P=void 0}=e,{initialFocus:O=null}=e;const B=forwardEventsBuilder(get_current_component(),["close"]),N=createEventDispatcher();let j=new Set,U=useOpenClosed();component_subscribe(r,U,z=>a(23,C=z));let q=null;const V=`headlessui-dialog-${useId()}`;onDestroy(()=>{c&&c()});let W,x=writable({titleId:W,dialogState:t,setTitleId(z){W!==z&&a(16,W=z)},close(){N("close",!1)}});component_subscribe(r,x,z=>a(22,S=z)),setContext(DIALOG_CONTEXT_NAME,x);async function J(z){let K=z.target;t===DialogStates.Open&&j.size===1&&(contains$1(j,K)||(S.close(),await tick(),K==null||K.focus()))}function X(z){z.key===Keys.Escape&&t===DialogStates.Open&&(j.size>1||(z.preventDefault(),z.stopPropagation(),S.close()))}let Z=!1;onMount(()=>a(17,Z=!0)),onDestroy(()=>{d&&d()}),onDestroy(()=>{u&&u()});function ee(z){q=z,a(3,q)}const Q=(z,K)=>match(z,{[StackMessage.Add](){a(5,j=new Set([...j,K]))},[StackMessage.Remove](){j.delete(K),a(5,j=new Set([...j]))}});return r.$$set=z=>{e=assign$1(assign$1({},e),exclude_internal_props(z)),a(14,b=compute_rest_props(e,g)),"as"in z&&a(0,w=z.as),"use"in z&&a(1,$=z.use),"open"in z&&a(15,P=z.open),"initialFocus"in z&&a(2,O=z.initialFocus),"$$scope"in z&&a(27,R=z.$$scope)},r.$$.update=()=>{if(r.$$.dirty&8421376){if(a(15,P=P===void 0&&U!==void 0?match(C,{[State$1.Open]:!0,[State$1.Closed]:!1}):P),!(P!==void 0||U!==void 0))throw new Error("You forgot to provide an `open` prop to the `Dialog` component.");if(typeof P!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${P}`)}r.$$.dirty&32768&&a(18,t=P?DialogStates.Open:DialogStates.Closed),r.$$.dirty&8650752&&a(8,n=U!==void 0?C===State$1.Open:t===DialogStates.Open),r.$$.dirty&262144&&a(4,s=t===DialogStates.Open),r.$$.dirty&2097176&&a(21,c=(()=>(c&&c(),useInertOthers(q,s)))()),r.$$.dirty&327680&&x.update(z=>({...z,titleId:W,dialogState:t})),r.$$.dirty&1441792&&a(20,d=(()=>{if(d&&d(),t!==DialogStates.Open||!Z)return;let z=document.documentElement.style.overflow,K=document.documentElement.style.paddingRight,ne=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${ne}px`,()=>{document.documentElement.style.overflow=z,document.documentElement.style.paddingRight=K}})()),r.$$.dirty&4980744&&a(19,u=(()=>{if(u&&u(),t!==DialogStates.Open)return;let z=q;if(!z)return;let K=new IntersectionObserver(ne=>{for(let F of ne)F.boundingClientRect.x===0&&F.boundingClientRect.y===0&&F.boundingClientRect.width===0&&F.boundingClientRect.height===0&&S.close()});return K.observe(z),()=>K.disconnect()})()),r.$$.dirty&327680&&a(7,_={id:V,role:"dialog","aria-modal":t===DialogStates.Open?!0:void 0,"aria-labelledby":W}),r.$$.dirty&32768&&a(6,m={open:P})},[w,$,O,q,s,j,m,_,n,B,U,x,J,X,b,P,W,Z,t,u,d,c,S,C,k,ee,Q,R]}class Dialog extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$g,create_fragment$g,safe_not_equal,{as:0,use:1,open:15,initialFocus:2})}}const get_default_slot_spread_changes$2=r=>r&4,get_default_slot_changes$2=r=>({}),get_default_slot_context$2=r=>({...r[2]});function create_default_slot$6(r){let e;const a=r[8].default,t=create_slot(a,r,r[9],get_default_slot_context$2);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&516)&&update_slot_base(t,a,n,n[9],get_default_slot_spread_changes$2(s)||!e?get_all_dirty_from_scope(n[9]):get_slot_changes(a,n[9],s,get_default_slot_changes$2),get_default_slot_context$2)},i(n){e||(transition_in(t,n),e=!0)},o(n){transition_out(t,n),e=!1},d(n){t&&t.d(n)}}}function create_fragment$f(r){let e,a;const t=[{...r[6],...r[3]},{as:r[0]},{slotProps:r[2]},{use:[...r[1],r[4]]},{name:"DialogTitle"}];let n={$$slots:{default:[create_default_slot$6]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=assign$1(n,t[s]);return e=new Render({props:n}),{c(){create_component(e.$$.fragment)},m(s,c){mount_component(e,s,c),a=!0},p(s,[c]){const d=c&95?get_spread_update(t,[c&72&&{...s[6],...s[3]},c&1&&{as:s[0]},c&4&&{slotProps:s[2]},c&18&&{use:[...s[1],s[4]]},t[4]]):{};c&516&&(d.$$scope={dirty:c,ctx:s}),e.$set(d)},i(s){a||(transition_in(e.$$.fragment,s),a=!0)},o(s){transition_out(e.$$.fragment,s),a=!1},d(s){destroy_component(e,s)}}}function instance$f(r,e,a){let t,n;const s=["as","use"];let c=compute_rest_props(e,s),d,{$$slots:u={},$$scope:_}=e,{as:m="h2"}=e,{use:g=[]}=e;const b=forwardEventsBuilder(get_current_component());let S=useDialogContext("DialogTitle");component_subscribe(r,S,k=>a(7,d=k));let C=`headlessui-dialog-title-${useId()}`;return onMount(()=>(d.setTitleId(C),()=>d.setTitleId(void 0))),r.$$set=k=>{e=assign$1(assign$1({},e),exclude_internal_props(k)),a(6,c=compute_rest_props(e,s)),"as"in k&&a(0,m=k.as),"use"in k&&a(1,g=k.use),"$$scope"in k&&a(9,_=k.$$scope)},r.$$.update=()=>{r.$$.dirty&128&&a(2,n={open:d.dialogState===DialogStates.Open})},a(3,t={id:C}),[m,g,n,t,b,S,c,d,u,_]}class DialogTitle extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$f,create_fragment$f,safe_not_equal,{as:0,use:1})}}const get_default_slot_spread_changes$1=r=>r&4,get_default_slot_changes$1=r=>({}),get_default_slot_context$1=r=>({...r[2]});function create_default_slot$5(r){let e;const a=r[9].default,t=create_slot(a,r,r[10],get_default_slot_context$1);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&1028)&&update_slot_base(t,a,n,n[10],get_default_slot_spread_changes$1(s)||!e?get_all_dirty_from_scope(n[10]):get_slot_changes(a,n[10],s,get_default_slot_changes$1),get_default_slot_context$1)},i(n){e||(transition_in(t,n),e=!0)},o(n){transition_out(t,n),e=!1},d(n){t&&t.d(n)}}}function create_fragment$e(r){let e,a;const t=[{...r[7],...r[3]},{as:r[0]},{slotProps:r[2]},{use:[...r[1],r[4]]},{name:"DialogOverlay"}];let n={$$slots:{default:[create_default_slot$5]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=assign$1(n,t[s]);return e=new Render({props:n}),e.$on("click",r[6]),{c(){create_component(e.$$.fragment)},m(s,c){mount_component(e,s,c),a=!0},p(s,[c]){const d=c&159?get_spread_update(t,[c&136&&{...s[7],...s[3]},c&1&&{as:s[0]},c&4&&{slotProps:s[2]},c&18&&{use:[...s[1],s[4]]},t[4]]):{};c&1028&&(d.$$scope={dirty:c,ctx:s}),e.$set(d)},i(s){a||(transition_in(e.$$.fragment,s),a=!0)},o(s){transition_out(e.$$.fragment,s),a=!1},d(s){destroy_component(e,s)}}}function instance$e(r,e,a){let t,n;const s=["as","use"];let c=compute_rest_props(e,s),d,{$$slots:u={},$$scope:_}=e,{as:m="div"}=e,{use:g=[]}=e;const b=forwardEventsBuilder(get_current_component());let S=useDialogContext("DialogOverlay");component_subscribe(r,S,R=>a(8,d=R));let C=`headlessui-dialog-overlay-${useId()}`;function k(R){let w=R;w.target===w.currentTarget&&(w.preventDefault(),w.stopPropagation(),d.close())}return r.$$set=R=>{e=assign$1(assign$1({},e),exclude_internal_props(R)),a(7,c=compute_rest_props(e,s)),"as"in R&&a(0,m=R.as),"use"in R&&a(1,g=R.use),"$$scope"in R&&a(10,_=R.$$scope)},r.$$.update=()=>{r.$$.dirty&256&&a(2,n={open:d.dialogState===DialogStates.Open})},a(3,t={id:C,"aria-hidden":!0}),[m,g,n,t,b,S,k,c,d,u,_]}class DialogOverlay extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$e,create_fragment$e,safe_not_equal,{as:0,use:1})}}const get_default_slot_spread_changes=r=>r&8,get_default_slot_changes=r=>({}),get_default_slot_context=r=>({...r[3]});function create_default_slot$4(r){let e;const a=r[8].default,t=create_slot(a,r,r[9],get_default_slot_context);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&520)&&update_slot_base(t,a,n,n[9],get_default_slot_spread_changes(s)||!e?get_all_dirty_from_scope(n[9]):get_slot_changes(a,n[9],s,get_default_slot_changes),get_default_slot_context)},i(n){e||(transition_in(t,n),e=!0)},o(n){transition_out(t,n),e=!1},d(n){t&&t.d(n)}}}function create_fragment$d(r){var s;let e,a;const t=[{name:"Description"},r[7],{as:r[0]},{slotProps:r[3]},(s=r[2])==null?void 0:s.props,{id:r[5]},{use:[...r[1],r[4]]}];let n={$$slots:{default:[create_default_slot$4]},$$scope:{ctx:r}};for(let c=0;c<t.length;c+=1)n=assign$1(n,t[c]);return e=new Render({props:n}),{c(){create_component(e.$$.fragment)},m(c,d){mount_component(e,c,d),a=!0},p(c,[d]){var _;const u=d&191?get_spread_update(t,[t[0],d&128&&get_spread_object(c[7]),d&1&&{as:c[0]},d&8&&{slotProps:c[3]},d&4&&get_spread_object((_=c[2])==null?void 0:_.props),d&32&&{id:c[5]},d&18&&{use:[...c[1],c[4]]}]):{};d&520&&(u.$$scope={dirty:d,ctx:c}),e.$set(u)},i(c){a||(transition_in(e.$$.fragment,c),a=!0)},o(c){transition_out(e.$$.fragment,c),a=!1},d(c){destroy_component(e,c)}}}function instance$d(r,e,a){let t;const n=["as","use"];let s=compute_rest_props(e,n),c,{$$slots:d={},$$scope:u}=e;const _=forwardEventsBuilder(get_current_component());let{as:m="p"}=e,{use:g=[]}=e;const b=`headlessui-description-${useId()}`;let S=useDescriptionContext();if(component_subscribe(r,S,C=>a(2,c=C)),!S)throw new Error("You used a <Description /> component, but it is not inside a relevant parent.");return onMount(()=>c==null?void 0:c.register(b)),r.$$set=C=>{e=assign$1(assign$1({},e),exclude_internal_props(C)),a(7,s=compute_rest_props(e,n)),"as"in C&&a(0,m=C.as),"use"in C&&a(1,g=C.use),"$$scope"in C&&a(9,u=C.$$scope)},r.$$.update=()=>{r.$$.dirty&4&&a(3,t=c.slotProps||{})},[m,g,c,t,_,b,S,s,d,u]}class Description extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$d,create_fragment$d,safe_not_equal,{as:0,use:1})}}var DisclosureStates;(function(r){r[r.Open=0]="Open",r[r.Closed=1]="Closed"})(DisclosureStates||(DisclosureStates={}));var Focus;(function(r){r[r.First=0]="First",r[r.Previous=1]="Previous",r[r.Next=2]="Next",r[r.Last=3]="Last",r[r.Specific=4]="Specific",r[r.Nothing=5]="Nothing"})(Focus||(Focus={}));var ListboxStates;(function(r){r[r.Open=0]="Open",r[r.Closed=1]="Closed"})(ListboxStates||(ListboxStates={}));var MenuStates;(function(r){r[r.Open=0]="Open",r[r.Closed=1]="Closed"})(MenuStates||(MenuStates={}));var PopoverStates;(function(r){r[r.Open=0]="Open",r[r.Closed=1]="Closed"})(PopoverStates||(PopoverStates={}));var Reason;(function(r){r.Finished="finished",r.Cancelled="cancelled"})(Reason||(Reason={}));var TreeStates;(function(r){r.Visible="visible",r.Hidden="hidden"})(TreeStates||(TreeStates={}));function create_default_slot_2(r){let e;return{c(){e=text("Dialog w/o content")},m(a,t){insert(a,e,t)},d(a){a&&detach(e)}}}function create_default_slot_1$3(r){let e;return{c(){e=text("Please add some content")},m(a,t){insert(a,e,t)},d(a){a&&detach(e)}}}function fallback_block(r){let e,a,t,n,s,c,d,u,_,m,g;return e=new DialogTitle({props:{as:"h3",class:"font-bold text-lg",$$slots:{default:[create_default_slot_2]},$$scope:{ctx:r}}}),t=new Description({props:{class:"py-",$$slots:{default:[create_default_slot_1$3]},$$scope:{ctx:r}}}),{c(){create_component(e.$$.fragment),a=space(),create_component(t.$$.fragment),n=space(),s=element("button"),s.textContent="",c=space(),d=element("div"),u=element("button"),u.textContent="Got it, thanks!",attr(s,"class","btn btn-sm btn-circle absolute right-2 top-2"),attr(u,"type","button"),attr(u,"class","btn"),attr(d,"class","modal-action")},m(b,S){mount_component(e,b,S),insert(b,a,S),mount_component(t,b,S),insert(b,n,S),insert(b,s,S),insert(b,c,S),insert(b,d,S),append(d,u),_=!0,m||(g=[listen(s,"click",r[4]),listen(u,"click",r[4])],m=!0)},p(b,S){const C={};S&256&&(C.$$scope={dirty:S,ctx:b}),e.$set(C);const k={};S&256&&(k.$$scope={dirty:S,ctx:b}),t.$set(k)},i(b){_||(transition_in(e.$$.fragment,b),transition_in(t.$$.fragment,b),_=!0)},o(b){transition_out(e.$$.fragment,b),transition_out(t.$$.fragment,b),_=!1},d(b){destroy_component(e,b),b&&detach(a),destroy_component(t,b),b&&detach(n),b&&detach(s),b&&detach(c),b&&detach(d),m=!1,run_all(g)}}}function create_default_slot$3(r){let e,a,t,n,s,c,d,u,_,m;a=new DialogOverlay({props:{class:"absolute inset-0 bg-black opacity-70"}});const g=r[5].default,b=create_slot(g,r,r[8],null),S=b||fallback_block(r);return{c(){e=element("div"),create_component(a.$$.fragment),n=space(),s=element("div"),S&&S.c(),attr(e,"class","inset-0 absolute"),attr(s,"class",c="modal-box mx-3 "+r[0]),attr(s,"style",r[1])},m(C,k){insert(C,e,k),mount_component(a,e,null),insert(C,n,k),insert(C,s,k),S&&S.m(s,null),u=!0,_||(m=[listen(s,"introstart",r[6]),listen(s,"outroend",r[7])],_=!0)},p(C,k){b&&b.p&&(!u||k&256)&&update_slot_base(b,g,C,C[8],u?get_slot_changes(g,C[8],k,null):get_all_dirty_from_scope(C[8]),null),(!u||k&1&&c!==(c="modal-box mx-3 "+C[0]))&&attr(s,"class",c),(!u||k&2)&&attr(s,"style",C[1])},i(C){u||(transition_in(a.$$.fragment,C),add_render_callback(()=>{u&&(t||(t=create_bidirectional_transition(e,fade,{duration:300},!0)),t.run(1))}),transition_in(S,C),add_render_callback(()=>{u&&(d||(d=create_bidirectional_transition(s,slide,{duration:300},!0)),d.run(1))}),u=!0)},o(C){transition_out(a.$$.fragment,C),t||(t=create_bidirectional_transition(e,fade,{duration:300},!1)),t.run(0),transition_out(S,C),d||(d=create_bidirectional_transition(s,slide,{duration:300},!1)),d.run(0),u=!1},d(C){C&&detach(e),destroy_component(a),C&&t&&t.end(),C&&detach(n),C&&detach(s),S&&S.d(C),C&&d&&d.end(),_=!1,run_all(m)}}}function create_fragment$c(r){let e,a;return e=new Dialog({props:{class:"inset-0 absolute modal modal-bottom modal-open",open:r[3],static:!0,initialFocus:r[2],$$slots:{default:[create_default_slot$3]},$$scope:{ctx:r}}}),e.$on("close",r[4]),{c(){create_component(e.$$.fragment)},m(t,n){mount_component(e,t,n),a=!0},p(t,[n]){const s={};n&8&&(s.open=t[3]),n&4&&(s.initialFocus=t[2]),n&267&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){a||(transition_in(e.$$.fragment,t),a=!0)},o(t){transition_out(e.$$.fragment,t),a=!1},d(t){destroy_component(e,t)}}}function instance$c(r,e,a){let{$$slots:t={},$$scope:n}=e,{modalClass:s="mx-10"}=e,{modalStyle:c=""}=e,{initialFocus:d=null}=e,u=!0;const _=createEventDispatcher();function m(){_("close")}onDestroy(()=>{});const g=()=>a(3,u=!0),b=()=>a(3,u=!1);return r.$$set=S=>{"modalClass"in S&&a(0,s=S.modalClass),"modalStyle"in S&&a(1,c=S.modalStyle),"initialFocus"in S&&a(2,d=S.initialFocus),"$$scope"in S&&a(8,n=S.$$scope)},[s,c,d,u,m,t,g,b,n]}class Dialog_1 extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$c,create_fragment$c,safe_not_equal,{modalClass:0,modalStyle:1,initialFocus:2})}}function get_each_context$3(r,e,a){const t=r.slice();return t[8]=e[a],t}function create_default_slot_1$2(r){let e;return{c(){e=text(r[2])},m(a,t){insert(a,e,t)},p(a,t){t&4&&set_data(e,a[2])},d(a){a&&detach(e)}}}function create_each_block$3(r){let e=r[8]+"",a;return{c(){a=text(e)},m(t,n){insert(t,a,n)},p(t,n){n&2&&e!==(e=t[8]+"")&&set_data(a,e)},d(t){t&&detach(a)}}}function create_default_slot$2(r){let e,a,t,n,s,c,d,u,_,m;t=new DialogTitle({props:{as:"h3",class:"font-bold text-lg mb-5",$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:r}}});let g=r[1],b=[];for(let S=0;S<g.length;S+=1)b[S]=create_each_block$3(get_each_context$3(r,g,S));return{c(){e=element("button"),e.textContent="",a=space(),create_component(t.$$.fragment),n=space(),s=element("pre"),c=text("    ");for(let S=0;S<b.length;S+=1)b[S].c();d=text(`
  `),attr(e,"class","btn btn-sm btn-circle absolute right-2 top-2"),attr(s,"class","overflow-auto flex-1 -mx-5 px-6 -mb-2 pb-2")},m(S,C){insert(S,e,C),insert(S,a,C),mount_component(t,S,C),insert(S,n,C),insert(S,s,C),append(s,c);for(let k=0;k<b.length;k+=1)b[k]&&b[k].m(s,null);append(s,d),r[5](s),u=!0,_||(m=listen(e,"click",r[3]),_=!0)},p(S,C){const k={};if(C&2052&&(k.$$scope={dirty:C,ctx:S}),t.$set(k),C&2){g=S[1];let R;for(R=0;R<g.length;R+=1){const w=get_each_context$3(S,g,R);b[R]?b[R].p(w,C):(b[R]=create_each_block$3(w),b[R].c(),b[R].m(s,d))}for(;R<b.length;R+=1)b[R].d(1);b.length=g.length}},i(S){u||(transition_in(t.$$.fragment,S),u=!0)},o(S){transition_out(t.$$.fragment,S),u=!1},d(S){S&&detach(e),S&&detach(a),destroy_component(t,S),S&&detach(n),S&&detach(s),destroy_each(b,S),r[5](null),_=!1,m()}}}function create_fragment$b(r){let e,a;return e=new Dialog_1({props:{modalClass:"flex-col flex",$$slots:{default:[create_default_slot$2]},$$scope:{ctx:r}}}),e.$on("close",r[6]),{c(){create_component(e.$$.fragment)},m(t,n){mount_component(e,t,n),a=!0},p(t,[n]){const s={};n&2055&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){a||(transition_in(e.$$.fragment,t),a=!0)},o(t){transition_out(e.$$.fragment,t),a=!1},d(t){destroy_component(e,t)}}}function instance$b(r,e,a){let t,n;const s=createEventDispatcher();let{extraData:c={title:"Title",messageLines:[]}}=e,d=null;function u(){s("close",null)}function _(g){binding_callbacks[g?"unshift":"push"](()=>{d=g,a(0,d),a(1,n),a(4,c)})}const m=()=>u();return r.$$set=g=>{"extraData"in g&&a(4,c=g.extraData)},r.$$.update=()=>{r.$$.dirty&16&&a(2,t=c.title||""),r.$$.dirty&16&&a(1,n=c.messageLines||[]),r.$$.dirty&3&&n.length>0&&d!=null&&d.scrollTop!=null&&d.scrollTop+d.clientHeight+100>d.scrollHeight&&a(0,d.scrollTop=d.scrollHeight,d)},[d,n,t,u,c,_,m]}class ScrollingTextDialog extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$b,create_fragment$b,safe_not_equal,{extraData:4})}}function create_default_slot_1$1(r){let e;return{c(){e=text("Please enter the driver password")},m(a,t){insert(a,e,t)},d(a){a&&detach(e)}}}function create_default_slot$1(r){let e,a,t,n,s,c,d,u,_,m,g;return e=new DialogTitle({props:{as:"h3",class:"font-bold text-lg",$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:r}}}),{c(){create_component(e.$$.fragment),a=space(),t=element("form"),n=element("input"),s=space(),c=element("button"),c.textContent="Ok",d=space(),u=element("button"),u.textContent="Cancel",attr(n,"type","password"),attr(n,"autocomplete","current-password"),attr(n,"placeholder","Password"),attr(n,"class","input input-bordered block w-full my-5"),attr(c,"type","submit"),attr(c,"class","btn btn-primary btn-block btn-shadow flex-1 mb-2"),attr(u,"type","button"),attr(u,"class","btn btn-outline btn-block flex-1")},m(b,S){mount_component(e,b,S),insert(b,a,S),insert(b,t,S),append(t,n),r[4](n),set_input_value(n,r[0]),append(t,s),append(t,c),append(t,d),append(t,u),_=!0,m||(g=[listen(n,"input",r[5]),listen(u,"click",r[6]),listen(t,"submit",prevent_default(r[3]))],m=!0)},p(b,S){const C={};S&512&&(C.$$scope={dirty:S,ctx:b}),e.$set(C),S&1&&n.value!==b[0]&&set_input_value(n,b[0])},i(b){_||(transition_in(e.$$.fragment,b),_=!0)},o(b){transition_out(e.$$.fragment,b),_=!1},d(b){destroy_component(e,b),b&&detach(a),b&&detach(t),r[4](null),m=!1,run_all(g)}}}function create_fragment$a(r){let e,a,t,n;return t=new Dialog_1({props:{modalStyle:"max-width:16rem; text-align:center",modalClass:"modal-bottom",initialFocus:r[1],$$slots:{default:[create_default_slot$1]},$$scope:{ctx:r}}}),t.$on("close",r[7]),{c(){e=element("br"),a=space(),create_component(t.$$.fragment)},m(s,c){insert(s,e,c),insert(s,a,c),mount_component(t,s,c),n=!0},p(s,[c]){const d={};c&2&&(d.initialFocus=s[1]),c&515&&(d.$$scope={dirty:c,ctx:s}),t.$set(d)},i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),s&&detach(a),destroy_component(t,s)}}}function instance$a(r,e,a){let t="",n=null;const s=createEventDispatcher();function c(b){b&&t.length==0||(b?s("close",t):s("close",null))}function d(b){c(!0)}function u(b){binding_callbacks[b?"unshift":"push"](()=>{n=b,a(1,n)})}function _(){t=this.value,a(0,t)}return[t,n,c,d,u,_,()=>c(!1),()=>c(!1)]}class PasswordDialog extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$a,create_fragment$a,safe_not_equal,{})}}function create_default_slot_1(r){let e;return{c(){e=text(r[0])},m(a,t){insert(a,e,t)},p(a,t){t&1&&set_data(e,a[0])},d(a){a&&detach(e)}}}function create_default_slot(r){let e,a,t,n,s,c,d,u;return e=new DialogTitle({props:{as:"h3",class:"font-bold text-lg mb-5",$$slots:{default:[create_default_slot_1]},$$scope:{ctx:r}}}),{c(){create_component(e.$$.fragment),a=space(),t=element("button"),t.textContent="Ok",n=space(),s=element("button"),s.textContent="Cancel",attr(t,"type","button"),attr(t,"class","btn btn-primary btn-block flex-1 mb-2"),attr(s,"type","button"),attr(s,"class","btn btn-outline btn-block flex-1")},m(_,m){mount_component(e,_,m),insert(_,a,m),insert(_,t,m),insert(_,n,m),insert(_,s,m),c=!0,d||(u=[listen(t,"click",r[3]),listen(s,"click",r[4])],d=!0)},p(_,m){const g={};m&129&&(g.$$scope={dirty:m,ctx:_}),e.$set(g)},i(_){c||(transition_in(e.$$.fragment,_),c=!0)},o(_){transition_out(e.$$.fragment,_),c=!1},d(_){destroy_component(e,_),_&&detach(a),_&&detach(t),_&&detach(n),_&&detach(s),d=!1,run_all(u)}}}function create_fragment$9(r){let e,a;return e=new Dialog_1({props:{modalStyle:"max-width:16rem; text-align:center",modalClass:"modal-bottom",$$slots:{default:[create_default_slot]},$$scope:{ctx:r}}}),e.$on("close",r[5]),{c(){create_component(e.$$.fragment)},m(t,n){mount_component(e,t,n),a=!0},p(t,[n]){const s={};n&129&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){a||(transition_in(e.$$.fragment,t),a=!0)},o(t){transition_out(e.$$.fragment,t),a=!1},d(t){destroy_component(e,t)}}}function instance$9(r,e,a){let t;const n=createEventDispatcher();let{extraData:s={}}=e;function c(m){n("close",m)}const d=()=>c(!0),u=()=>c(!1),_=()=>c(!1);return r.$$set=m=>{"extraData"in m&&a(2,s=m.extraData)},r.$$.update=()=>{r.$$.dirty&4&&a(0,t=s.title||"Are you sure?")},[t,c,s,d,u,_]}class AlertDialog extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$9,create_fragment$9,safe_not_equal,{extraData:2})}}function create_if_block_2$1(r){let e,a;return e=new ScrollingTextDialog({props:{extraData:r[0].extraData}}),e.$on("close",closeTopDialog),{c(){create_component(e.$$.fragment)},m(t,n){mount_component(e,t,n),a=!0},p(t,n){const s={};n&1&&(s.extraData=t[0].extraData),e.$set(s)},i(t){a||(transition_in(e.$$.fragment,t),a=!0)},o(t){transition_out(e.$$.fragment,t),a=!1},d(t){destroy_component(e,t)}}}function create_if_block_1$1(r){let e,a;return e=new AlertDialog({props:{extraData:r[0].extraData}}),e.$on("close",closeTopDialog),{c(){create_component(e.$$.fragment)},m(t,n){mount_component(e,t,n),a=!0},p(t,n){const s={};n&1&&(s.extraData=t[0].extraData),e.$set(s)},i(t){a||(transition_in(e.$$.fragment,t),a=!0)},o(t){transition_out(e.$$.fragment,t),a=!1},d(t){destroy_component(e,t)}}}function create_if_block$3(r){let e,a;return e=new PasswordDialog({}),e.$on("close",closeTopDialog),{c(){create_component(e.$$.fragment)},m(t,n){mount_component(e,t,n),a=!0},p:noop$1,i(t){a||(transition_in(e.$$.fragment,t),a=!0)},o(t){transition_out(e.$$.fragment,t),a=!1},d(t){destroy_component(e,t)}}}function create_fragment$8(r){let e,a,t,n;const s=[create_if_block$3,create_if_block_1$1,create_if_block_2$1],c=[];function d(u,_){return u[0]&&u[0].dialogType==DIALOG_TYPE.Password?0:u[0]&&u[0].dialogType==DIALOG_TYPE.Alert?1:u[0]&&u[0].dialogType==DIALOG_TYPE.ScrollingText?2:-1}return~(e=d(r))&&(a=c[e]=s[e](r)),{c(){a&&a.c(),t=empty()},m(u,_){~e&&c[e].m(u,_),insert(u,t,_),n=!0},p(u,[_]){let m=e;e=d(u),e===m?~e&&c[e].p(u,_):(a&&(group_outros(),transition_out(c[m],1,1,()=>{c[m]=null}),check_outros()),~e?(a=c[e],a?a.p(u,_):(a=c[e]=s[e](u),a.c()),transition_in(a,1),a.m(t.parentNode,t)):a=null)},i(u){n||(transition_in(a),n=!0)},o(u){transition_out(a),n=!1},d(u){~e&&c[e].d(u),u&&detach(t)}}}let dialogStack=[],topDialog=nStore(null);const openDialog=(r,e,a)=>{const t=topDialog.get(),n={dialogType:r,callback:a,extraData:e};return t&&(dialogStack=[...dialogStack,t]),topDialog.set(n),s=>{n.extraData=s(n.extraData),console.log("newDialog.extraData",n.extraData,n===dialogStack[dialogStack.length-1],dialogStack[dialogStack.length-1],topDialog.get()===n,topDialog.get()),topDialog.get()===n&&topDialog.set(n)}},closeTopDialog=r=>{const e=topDialog.get();e.callback&&e.callback(r.detail),dialogStack.length>0?topDialog.set(dialogStack.pop()):topDialog.set(null)};function instance$8(r,e,a){let t;return component_subscribe(r,topDialog,n=>a(0,t=n)),[t]}class DialogSpawner extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$8,create_fragment$8,safe_not_equal,{})}}let toastDeduplicationCache={};function showToastMessage(r,e=2e3,a=null){if(toastDeduplicationCache[r])return;let n=toast.push({msg:r,duration:e});return toastDeduplicationCache[r]=n,toast.subscribe(s=>{s.find(d=>d.msg===r)||(delete toastDeduplicationCache[r],a&&a())}),n}function showConfirmationMsg(r,e){openDialog(DIALOG_TYPE.Alert,{title:r},a=>{e&&a&&e(a)})}let passwordPromptOpen=!1;function showPasswordPrompt(r,e){passwordPromptOpen||(passwordPromptOpen=!0,openDialog(DIALOG_TYPE.Password,{},a=>{passwordPromptOpen=!1,a!=null&&e&&e(a)}))}function showScrollableTextPopup(r,e){let a=openDialog(DIALOG_TYPE.ScrollingText,{title:r,messageLines:[]},n=>{e&&e(null)});return n=>{console.log("addTextToPopup",n),a(s=>({...s,messageLines:[...s.messageLines,n]}))}}const connectBtn=document.getElementById("connect_btn");document.getElementById("connect_btn_options");document.getElementById("disconnect_btn");const connectedRovLabel=document.getElementById("connected_rov_label");document.getElementById("rov_connection_bar");function setCurrentRovName(){let r=rovPeerIdEndNumber.get(),e=getROVName(r),a="ROV "+r+" ("+e.replace(ROV_PEERID_BASE,"")+")";connectBtn.innerText="Connect to "+a,connectedRovLabel.innerText=a}class OurPeerMachine{constructor(e){H(this,"eventHandlers",{});H(this,"connectionTimeout");H(this,"runningMachine",null);H(this,"peer",null);H(this,"ourPeerId",null);H(this,"onStateChangeCallback",e=>{});H(this,"currentState",null);H(this,"xstateMachineLayout",createMachine({predictableActionArguments:!0,preserveActionOrder:!0,id:"DataConnection",initial:"Connecting",states:{Connecting:{entry:"onConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Reconnecting:{entry:"onReConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Connected:{entry:"onConnectedFunction",on:{ON_DISCONNECTED:{target:"Reconnecting"},ON_DESTROY:{target:"Destroyed"}}},Destroyed:{entry:"onDestoyedFunction",type:"final"}}},{actions:{onConnectingFunction:()=>{this.onConnecting()},onReConnectingFunction:()=>{this.onReConnecting()},onConnectedFunction:()=>{this.onConnected()},onDestoyedFunction:()=>{this.cleanup()}}}));this.currentState=this.xstateMachineLayout.config.initial,this.onStateChangeCallback=e}start(){this.runningMachine=interpret(this.xstateMachineLayout,{devTools:debugPageModeActive.get()}),this.runningMachine.onTransition(t=>{this.currentState=t.value,this.onStateChangeCallback(this.currentState)}),this.runningMachine.start(),this.ourPeerId=ourPeerId.get(),this.ourPeerId||(this.ourPeerId=getRandomName(),localStorage.setItem("ourPeerId",this.ourPeerId),ourPeerId.set(this.ourPeerId));let e=localStorage.getItem("peerToken"),a=e?{...peerServerCloudOptions,token:e}:peerServerCloudOptions;this.peer=new $70d766613f57b014$export$2e2bcd8739ae039(this.ourPeerId,a),console.log("Our PeerToken:",this.peer.options.token),!e&&this.peer.options.token&&localStorage.setItem("peerToken",this.peer.options.token),this.eventHandlers.onOpen=()=>{this.sendEventToMachine("ON_CONNECTED"),showToastMessage("OurPeer Open!")},this.peer.on("open",this.eventHandlers.onOpen),this.eventHandlers.onError=t=>{t.type!="peer-unavailable"&&(t.type=="unavailable-id"?(showToastMessage("peer id "+this.ourPeerId+" already taken"),this.ourPeerId=getRandomName(),ourPeerId.set(this.ourPeerId)):t.type=="webrtc"&&t.message.indexOf("No remoteDescription")==-1?showToastMessage("Webrtc Error: "+t.message):console.log("!!!UNHANDLED!! OURPEER_ERROR:"+t.message+" | "+t.type),this.sendEventToMachine("ON_DESTROY"))},this.peer.on("error",this.eventHandlers.onError),this.eventHandlers.onClose=t=>{console.warn("!!UNHANDLED!! OURPEER_CLOSE:",t),this.sendEventToMachine("ON_DESTROY")},this.peer.on("close",this.eventHandlers.onClose),this.eventHandlers.onDisconnected=t=>{console.warn("!!UNHANDLED!! OURPEER_CLOSE:",t),this.sendEventToMachine("ON_DISCONNECTED")},this.peer.on("disconnected",this.eventHandlers.onDisconnected)}sendEventToMachine(e){this.runningMachine&&this.runningMachine.send(e)}onConnecting(){console.log("OnConnecting...."),this.connectionTimeout=setTimeout(()=>{this.sendEventToMachine("ON_DESTROY")},12e3)}onReConnecting(){console.log("OnReConnecting...."),this.peer.reconnect(),this.onConnecting()}onConnected(){clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0}cleanup(){clearTimeout(this.connectionTimeout),this.runningMachine.stop(),this.currentState="Destroyed",this.onStateChangeCallback(this.currentState),this.peer&&(this.peer.off("open",this.eventHandlers.onOpen),this.peer.off("error",this.eventHandlers.onError),this.peer.off("close",this.eventHandlers.onClose),this.peer.off("disconnected",this.eventHandlers.onDisconnected),this.peer.destroy(),this.peer=null)}}const INITIAL_CONNECTION_TIMEOUT=12e3,CONNECTION_TIMEOUT=5e3,RETRY_CONNECTION_TIMEOUT=3e3;new TextEncoder;new TextDecoder;class DataConnectionMachine{constructor(e,a,t,n){H(this,"closed",!1);H(this,"rovPeerId",null);H(this,"currentPeer",null);H(this,"dataConnection",null);H(this,"lastRecivedMessageTime",0);H(this,"connectionTimeoutId",-1);H(this,"currentState",ConnectionState.disconnected);H(this,"onMessageRecived");H(this,"onStateChange");H(this,"eventHandlers",null);this.onMessageRecived=t,this.onStateChange=n,this.currentPeer=e,this.rovPeerId=a}setCurrentPeer(e){this.currentPeer=e}restart(){this.closed||(this._changeState(ConnectionState.reconnecting),this.cleanup(),this.start())}start(){if(this.closed||this.eventHandlers!=null){console.warn("start called on running DataConnectionMachine");return}if(this.eventHandlers={},this._changeState(ConnectionState.connecting),console.info("Connecting to rov peer: "+this.rovPeerId),this.dataConnection=this.currentPeer.connect(this.rovPeerId,{reliable:!0,serialization:"none"}),!this.dataConnection){console.warn("Failed to connect to peer: "+this.rovPeerId),this.connectionTimeoutId=window.setTimeout(()=>{this.restart()},INITIAL_CONNECTION_TIMEOUT);return}this.connectionTimeoutId=window.setTimeout(()=>{this.restart()},INITIAL_CONNECTION_TIMEOUT),console.log("Setting connection timeout",this.connectionTimeoutId),this.dataConnection.on("open",this.eventHandlers.onOpen=()=>{console.info("DataConnection Open!"),this._changeState(ConnectionState.connected),this.resetConnectionTimeout()}),this.dataConnection.on("iceStateChanged",this.eventHandlers.onIceChange=e=>{console.info("DATACHANNEL_ICE_CHANGE:",e)}),this.dataConnection.on("error",this.eventHandlers.onError=e=>{console.warn("!!!UNHANDLED!! DATACHANNEL_ERROR:",e),this.restart()}),this.dataConnection.on("close",this.eventHandlers.onClose=()=>{console.warn("!!UNHANDLED!! DATACHANNEL_CLOSE:"),this.restart()}),this.currentPeer.on("error",this.eventHandlers.onPeerError=e=>{e.type=="peer-unavailable"&&(this.connectionTimeoutId=window.setTimeout(()=>{this.restart()},CONNECTION_TIMEOUT))}),this.dataConnection.on("data",this.eventHandlers.onData=e=>{this._changeState(ConnectionState.connected),this.resetConnectionTimeout(),this.onMessageRecived(e)})}resetConnectionTimeout(){window.clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=setTimeout(()=>{this._changeState(ConnectionState.reconnecting),this.connectionTimeoutId=setTimeout(()=>{this.restart()},RETRY_CONNECTION_TIMEOUT)},CONNECTION_TIMEOUT)}sendMessage(e){return this.dataConnection&&this.dataConnection.open&&this.currentState==ConnectionState.connected?(this.dataConnection.send(e),!0):!1}cleanup(){console.debug("Cleaning up data connection",this.rovPeerId,this.connectionTimeoutId),window.clearTimeout(this.connectionTimeoutId),this.eventHandlers&&(this.currentPeer&&this.currentPeer.off("error",this.eventHandlers.onPeerError),this.dataConnection&&(this.dataConnection.off("open",this.eventHandlers.onOpen),this.dataConnection.off("error",this.eventHandlers.onError),this.dataConnection.off("close",this.eventHandlers.onClose),this.dataConnection.off("data",this.eventHandlers.onData),this.dataConnection.close()),this.eventHandlers=null)}close(){this.closed=!0,this.cleanup()}_changeState(e){this.currentState!=e&&(this.currentState=e,this.onStateChange(e))}}const FROZEN_VIDEO_TIMEOUT=6e3;class MediaConnectionMachine{constructor(e,a,t){H(this,"closed",!1);H(this,"rovPeerId",null);H(this,"currentPeer",null);H(this,"lastRecivedFrameTime",0);H(this,"frozenVideoTimeoutId",null);H(this,"mediaChannel",null);H(this,"mainTrack",null);H(this,"currentState",ConnectionState.disconnected);H(this,"onStateChange");H(this,"eventHandlers",null);this.onStateChange=t,this.currentPeer=e,this.rovPeerId=a,this.mediaChannel=null}setCurrentPeer(e){this.currentPeer=e}restart(){this.closed||(this._changeState(ConnectionState.reconnecting),this.cleanup(),this.start())}start(){if(this.closed||this.eventHandlers!=null){console.warn("Start() called on running MediaConnectionMachine");return}this.eventHandlers={},console.info("Waiting for "+this.rovPeerId+" to media call us..."),this.eventHandlers.onCall=e=>{window.clearTimeout(this.frozenVideoTimeoutId),console.info(e.peer+" media called us!"),!(this.mediaChannel&&this.mediaChannel.peer!=this.rovPeerId)&&(this.mediaChannel&&this.cleanup(),this.eventHandlers={},this.mediaChannel=e,e.answer(),console.log("streamb4",this.eventHandlers),e.on("stream",this.eventHandlers.onStream=a=>{rovVideoStream.set(a),this.mainTrack=a.getVideoTracks()[0],this._changeState(ConnectionState.connected),this.mainTrack.addEventListener("mute",this.eventHandlers.onStreamMute=()=>{console.info("Frozen video stream timeout started!"),this.frozenVideoTimeoutId=setTimeout(()=>{console.info("Frozen video stream timeout reached!"),this.cleanup()},FROZEN_VIDEO_TIMEOUT)}),this.mainTrack.addEventListener("unmute",this.eventHandlers.onStreamUnMute=()=>{console.info("Frozen video stream timeout cleared!"),clearTimeout(this.frozenVideoTimeoutId)})}),e.on("error",this.eventHandlers.onError=a=>{console.log("MediaChannel Error: ",a),this.restart()}),e.on("close",this.eventHandlers.onClose=a=>{this.restart()}))},this.currentPeer.on("call",this.eventHandlers.onCall)}cleanup(){console.debug("Cleaning up media connection",this.rovPeerId,this.frozenVideoTimeoutId),this.eventHandlers&&(this.currentPeer&&this.currentPeer.off("call",this.eventHandlers.onCall),this.mediaChannel&&(this.mediaChannel.off("stream",this.eventHandlers.onStream),this.mediaChannel.off("error",this.eventHandlers.onError),this.mediaChannel.off("close",this.eventHandlers.onClose),this.mediaChannel.close(),this.mediaChannel=null),this.mainTrack&&(this.mainTrack.removeEventListener("mute",this.eventHandlers.onStreamMute),this.mainTrack.removeEventListener("unmute",this.eventHandlers.onStreamMute),this.mainTrack=null),this.eventHandlers=null)}close(){this.closed=!0,this.cleanup()}_changeState(e){this.currentState!=e&&(this.currentState=e,this.onStateChange(e))}}class RovConnection{constructor(e,a,t,n){H(this,"closed",!1);H(this,"rovPeerId");H(this,"ourPeerMachine");H(this,"dataConnection",null);H(this,"mediaConnection",null);H(this,"msgQueue",new Queue);H(this,"connectionFailureCount",0);H(this,"onMesssageRecived");H(this,"onOverallStateChange");this.rovPeerId=e,this.ourPeerMachine=a,this.onMesssageRecived=s=>t(s,e),this.onOverallStateChange=n}start(){this.mediaConnection&&this.mediaConnection.cleanup(),(this.mediaConnection=new MediaConnectionMachine(this.ourPeerMachine.peer,this.rovPeerId,this.mcStateChange.bind(this))).start(),this.dataConnection&&this.dataConnection.cleanup(),(this.dataConnection=new DataConnectionMachine(this.ourPeerMachine.peer,this.rovPeerId,this.onMesssageRecived,this.dcStateChange.bind(this))).start()}_sendMsgToRov(e){return this.dataConnection.sendMessage(e.msgBytes)?(e.onSendCallback&&e.onSendCallback(e.msgBytes),!0):(console.info('Failed to send "{}" to rov: {}',e.msgBytes,this.rovPeerId),!1)}emptyMsgQueue(){if(this.dataConnection.currentState==ConnectionState.connected)for(;!this.msgQueue.isEmpty();){let e=this.msgQueue.peak();if(!this._sendMsgToRov(e))break;this.msgQueue.pop()}}sendMessage(e,a,t=!1){let n={msgBytes:e,onSendCallback:a};t?this._sendMsgToRov(n):(this.msgQueue.push(n),setTimeout(this.emptyMsgQueue.bind(this),0))}dcStateChange(e){this.closed||(rovDataChannelConnState.set(e),console.debug("dcStateChange",e),this.onOverallStateChange(this.dataConnection.currentState,this.mediaConnection.currentState,this.rovPeerId),e==ConnectionState.connected?(this.emptyMsgQueue(),this.connectionFailureCount=0):e==ConnectionState.reconnecting?this.connectionFailureCount++:e==ConnectionState.disconnected&&this.close())}mcStateChange(e){this.closed||(rovVideoStreamConnState.set(e),console.debug("mcStateChange",e),e==ConnectionState.connected||(e==ConnectionState.reconnecting?this.connectionFailureCount++:e==ConnectionState.disconnected&&this.close()))}_checkForTooManyFailures(){this.connectionFailureCount>5&&(console.info("Too many connection failures, closing connection"),this.close())}switchOutThisPeer(e){this.ourPeerMachine=e,this.dataConnection.setCurrentPeer(e.peer)}close(){console.info("Closing Rov Connection: ",this.rovPeerId),this.closed=!0,this.mediaConnection.close(),this.dataConnection.close()}}var indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=r;function r(e,a){for(var t=new Array(arguments.length-1),n=0,s=2,c=!0;s<arguments.length;)t[n++]=arguments[s++];return new Promise(function(u,_){t[n]=function(g){if(c)if(c=!1,g)_(g);else{for(var b=new Array(arguments.length-1),S=0;S<b.length;)b[S++]=arguments[S];u.apply(null,b)}};try{e.apply(a||null,t)}catch(m){c&&(c=!1,_(m))}})}return aspromise}var base64$1={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(r){var e=r;e.length=function(d){var u=d.length;if(!u)return 0;for(var _=0;--u%4>1&&d.charAt(u)==="=";)++_;return Math.ceil(d.length*3)/4-_};for(var a=new Array(64),t=new Array(123),n=0;n<64;)t[a[n]=n<26?n+65:n<52?n+71:n<62?n-4:n-59|43]=n++;e.encode=function(d,u,_){for(var m=null,g=[],b=0,S=0,C;u<_;){var k=d[u++];switch(S){case 0:g[b++]=a[k>>2],C=(k&3)<<4,S=1;break;case 1:g[b++]=a[C|k>>4],C=(k&15)<<2,S=2;break;case 2:g[b++]=a[C|k>>6],g[b++]=a[k&63],S=0;break}b>8191&&((m||(m=[])).push(String.fromCharCode.apply(String,g)),b=0)}return S&&(g[b++]=a[C],g[b++]=61,S===1&&(g[b++]=61)),m?(b&&m.push(String.fromCharCode.apply(String,g.slice(0,b))),m.join("")):String.fromCharCode.apply(String,g.slice(0,b))};var s="invalid encoding";e.decode=function(d,u,_){for(var m=_,g=0,b,S=0;S<d.length;){var C=d.charCodeAt(S++);if(C===61&&g>1)break;if((C=t[C])===void 0)throw Error(s);switch(g){case 0:b=C,g=1;break;case 1:u[_++]=b<<2|(C&48)>>4,b=C,g=2;break;case 2:u[_++]=(b&15)<<4|(C&60)>>2,b=C,g=3;break;case 3:u[_++]=(b&3)<<6|C,g=0;break}}if(g===1)throw Error(s);return _-m},e.test=function(d){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(d)}}(base64$1)),base64$1}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=r;function r(){this._listeners={}}return r.prototype.on=function(a,t,n){return(this._listeners[a]||(this._listeners[a]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(a,t){if(a===void 0)this._listeners={};else if(t===void 0)this._listeners[a]=[];else for(var n=this._listeners[a],s=0;s<n.length;)n[s].fn===t?n.splice(s,1):++s;return this},r.prototype.emit=function(a){var t=this._listeners[a];if(t){for(var n=[],s=1;s<arguments.length;)n.push(arguments[s++]);for(s=0;s<t.length;)t[s].fn.apply(t[s++].ctx,n)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=r(r);function r(s){return typeof Float32Array<"u"?function(){var c=new Float32Array([-0]),d=new Uint8Array(c.buffer),u=d[3]===128;function _(S,C,k){c[0]=S,C[k]=d[0],C[k+1]=d[1],C[k+2]=d[2],C[k+3]=d[3]}function m(S,C,k){c[0]=S,C[k]=d[3],C[k+1]=d[2],C[k+2]=d[1],C[k+3]=d[0]}s.writeFloatLE=u?_:m,s.writeFloatBE=u?m:_;function g(S,C){return d[0]=S[C],d[1]=S[C+1],d[2]=S[C+2],d[3]=S[C+3],c[0]}function b(S,C){return d[3]=S[C],d[2]=S[C+1],d[1]=S[C+2],d[0]=S[C+3],c[0]}s.readFloatLE=u?g:b,s.readFloatBE=u?b:g}():function(){function c(u,_,m,g){var b=_<0?1:0;if(b&&(_=-_),_===0)u(1/_>0?0:2147483648,m,g);else if(isNaN(_))u(2143289344,m,g);else if(_>34028234663852886e22)u((b<<31|2139095040)>>>0,m,g);else if(_<11754943508222875e-54)u((b<<31|Math.round(_/1401298464324817e-60))>>>0,m,g);else{var S=Math.floor(Math.log(_)/Math.LN2),C=Math.round(_*Math.pow(2,-S)*8388608)&8388607;u((b<<31|S+127<<23|C)>>>0,m,g)}}s.writeFloatLE=c.bind(null,e),s.writeFloatBE=c.bind(null,a);function d(u,_,m){var g=u(_,m),b=(g>>31)*2+1,S=g>>>23&255,C=g&8388607;return S===255?C?NaN:b*(1/0):S===0?b*1401298464324817e-60*C:b*Math.pow(2,S-150)*(C+8388608)}s.readFloatLE=d.bind(null,t),s.readFloatBE=d.bind(null,n)}(),typeof Float64Array<"u"?function(){var c=new Float64Array([-0]),d=new Uint8Array(c.buffer),u=d[7]===128;function _(S,C,k){c[0]=S,C[k]=d[0],C[k+1]=d[1],C[k+2]=d[2],C[k+3]=d[3],C[k+4]=d[4],C[k+5]=d[5],C[k+6]=d[6],C[k+7]=d[7]}function m(S,C,k){c[0]=S,C[k]=d[7],C[k+1]=d[6],C[k+2]=d[5],C[k+3]=d[4],C[k+4]=d[3],C[k+5]=d[2],C[k+6]=d[1],C[k+7]=d[0]}s.writeDoubleLE=u?_:m,s.writeDoubleBE=u?m:_;function g(S,C){return d[0]=S[C],d[1]=S[C+1],d[2]=S[C+2],d[3]=S[C+3],d[4]=S[C+4],d[5]=S[C+5],d[6]=S[C+6],d[7]=S[C+7],c[0]}function b(S,C){return d[7]=S[C],d[6]=S[C+1],d[5]=S[C+2],d[4]=S[C+3],d[3]=S[C+4],d[2]=S[C+5],d[1]=S[C+6],d[0]=S[C+7],c[0]}s.readDoubleLE=u?g:b,s.readDoubleBE=u?b:g}():function(){function c(u,_,m,g,b,S){var C=g<0?1:0;if(C&&(g=-g),g===0)u(0,b,S+_),u(1/g>0?0:2147483648,b,S+m);else if(isNaN(g))u(0,b,S+_),u(2146959360,b,S+m);else if(g>17976931348623157e292)u(0,b,S+_),u((C<<31|2146435072)>>>0,b,S+m);else{var k;if(g<22250738585072014e-324)k=g/5e-324,u(k>>>0,b,S+_),u((C<<31|k/4294967296)>>>0,b,S+m);else{var R=Math.floor(Math.log(g)/Math.LN2);R===1024&&(R=1023),k=g*Math.pow(2,-R),u(k*4503599627370496>>>0,b,S+_),u((C<<31|R+1023<<20|k*1048576&1048575)>>>0,b,S+m)}}}s.writeDoubleLE=c.bind(null,e,0,4),s.writeDoubleBE=c.bind(null,a,4,0);function d(u,_,m,g,b){var S=u(g,b+_),C=u(g,b+m),k=(C>>31)*2+1,R=C>>>20&2047,w=4294967296*(C&1048575)+S;return R===2047?w?NaN:k*(1/0):R===0?k*5e-324*w:k*Math.pow(2,R-1075)*(w+4503599627370496)}s.readDoubleLE=d.bind(null,t,0,4),s.readDoubleBE=d.bind(null,n,4,0)}(),s}function e(s,c,d){c[d]=s&255,c[d+1]=s>>>8&255,c[d+2]=s>>>16&255,c[d+3]=s>>>24}function a(s,c,d){c[d]=s>>>24,c[d+1]=s>>>16&255,c[d+2]=s>>>8&255,c[d+3]=s&255}function t(s,c){return(s[c]|s[c+1]<<8|s[c+2]<<16|s[c+3]<<24)>>>0}function n(s,c){return(s[c]<<24|s[c+1]<<16|s[c+2]<<8|s[c+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(r){}return null}return inquire_1}var utf8$2={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(r){var e=r;e.length=function(t){for(var n=0,s=0,c=0;c<t.length;++c)s=t.charCodeAt(c),s<128?n+=1:s<2048?n+=2:(s&64512)===55296&&(t.charCodeAt(c+1)&64512)===56320?(++c,n+=4):n+=3;return n},e.read=function(t,n,s){var c=s-n;if(c<1)return"";for(var d=null,u=[],_=0,m;n<s;)m=t[n++],m<128?u[_++]=m:m>191&&m<224?u[_++]=(m&31)<<6|t[n++]&63:m>239&&m<365?(m=((m&7)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,u[_++]=55296+(m>>10),u[_++]=56320+(m&1023)):u[_++]=(m&15)<<12|(t[n++]&63)<<6|t[n++]&63,_>8191&&((d||(d=[])).push(String.fromCharCode.apply(String,u)),_=0);return d?(_&&d.push(String.fromCharCode.apply(String,u.slice(0,_))),d.join("")):String.fromCharCode.apply(String,u.slice(0,_))},e.write=function(t,n,s){for(var c=s,d,u,_=0;_<t.length;++_)d=t.charCodeAt(_),d<128?n[s++]=d:d<2048?(n[s++]=d>>6|192,n[s++]=d&63|128):(d&64512)===55296&&((u=t.charCodeAt(_+1))&64512)===56320?(d=65536+((d&1023)<<10)+(u&1023),++_,n[s++]=d>>18|240,n[s++]=d>>12&63|128,n[s++]=d>>6&63|128,n[s++]=d&63|128):(n[s++]=d>>12|224,n[s++]=d>>6&63|128,n[s++]=d&63|128);return s-c}}(utf8$2)),utf8$2}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=r;function r(e,a,t){var n=t||8192,s=n>>>1,c=null,d=n;return function(_){if(_<1||_>s)return e(_);d+_>n&&(c=e(n),d=0);var m=a.call(c,d,d+=_);return d&7&&(d=(d|7)+1),m}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var r=requireMinimal();function e(s,c){this.lo=s>>>0,this.hi=c>>>0}var a=e.zero=new e(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var t=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(c){if(c===0)return a;var d=c<0;d&&(c=-c);var u=c>>>0,_=(c-u)/4294967296>>>0;return d&&(_=~_>>>0,u=~u>>>0,++u>4294967295&&(u=0,++_>4294967295&&(_=0))),new e(u,_)},e.from=function(c){if(typeof c=="number")return e.fromNumber(c);if(r.isString(c))if(r.Long)c=r.Long.fromString(c);else return e.fromNumber(parseInt(c,10));return c.low||c.high?new e(c.low>>>0,c.high>>>0):a},e.prototype.toNumber=function(c){if(!c&&this.hi>>>31){var d=~this.lo+1>>>0,u=~this.hi>>>0;return d||(u=u+1>>>0),-(d+u*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(c){return r.Long?new r.Long(this.lo|0,this.hi|0,!!c):{low:this.lo|0,high:this.hi|0,unsigned:!!c}};var n=String.prototype.charCodeAt;return e.fromHash=function(c){return c===t?a:new e((n.call(c,0)|n.call(c,1)<<8|n.call(c,2)<<16|n.call(c,3)<<24)>>>0,(n.call(c,4)|n.call(c,5)<<8|n.call(c,6)<<16|n.call(c,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var c=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^c)>>>0,this.lo=(this.lo<<1^c)>>>0,this},e.prototype.zzDecode=function(){var c=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^c)>>>0,this.hi=(this.hi>>>1^c)>>>0,this},e.prototype.length=function(){var c=this.lo,d=(this.lo>>>28|this.hi<<4)>>>0,u=this.hi>>>24;return u===0?d===0?c<16384?c<128?1:2:c<2097152?3:4:d<16384?d<128?5:6:d<2097152?7:8:u<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(r){var e=r;e.asPromise=requireAspromise(),e.base64=requireBase64(),e.EventEmitter=requireEventemitter(),e.float=requireFloat(),e.inquire=requireInquire(),e.utf8=requireUtf8(),e.pool=requirePool(),e.LongBits=requireLongbits(),e.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},e.isString=function(s){return typeof s=="string"||s instanceof String},e.isObject=function(s){return s&&typeof s=="object"},e.isset=e.isSet=function(s,c){var d=s[c];return d!=null&&s.hasOwnProperty(c)?typeof d!="object"||(Array.isArray(d)?d.length:Object.keys(d).length)>0:!1},e.Buffer=function(){try{var n=e.inquire("buffer").Buffer;return n.prototype.utf8Write?n:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(s){return typeof s=="number"?e.Buffer?e._Buffer_allocUnsafe(s):new e.Array(s):e.Buffer?e._Buffer_from(s):typeof Uint8Array>"u"?s:new Uint8Array(s)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(s){return s?e.LongBits.from(s).toHash():e.LongBits.zeroHash},e.longFromHash=function(s,c){var d=e.LongBits.fromHash(s);return e.Long?e.Long.fromBits(d.lo,d.hi,c):d.toNumber(!!c)};function a(n,s,c){for(var d=Object.keys(s),u=0;u<d.length;++u)(n[d[u]]===void 0||!c)&&(n[d[u]]=s[d[u]]);return n}e.merge=a,e.lcFirst=function(s){return s.charAt(0).toLowerCase()+s.substring(1)};function t(n){function s(c,d){if(!(this instanceof s))return new s(c,d);Object.defineProperty(this,"message",{get:function(){return c}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),d&&a(this,d)}return s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return n},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),s}e.newError=t,e.ProtocolError=t("ProtocolError"),e.oneOfGetter=function(s){for(var c={},d=0;d<s.length;++d)c[s[d]]=1;return function(){for(var u=Object.keys(this),_=u.length-1;_>-1;--_)if(c[u[_]]===1&&this[u[_]]!==void 0&&this[u[_]]!==null)return u[_]}},e.oneOfSetter=function(s){return function(c){for(var d=0;d<s.length;++d)s[d]!==c&&delete this[s[d]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var n=e.Buffer;if(!n){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=n.from!==Uint8Array.from&&n.from||function(c,d){return new n(c,d)},e._Buffer_allocUnsafe=n.allocUnsafe||function(c){return new n(c)}}}(minimal$1)),minimal$1}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(r,e,a){this.fn=r,this.len=e,this.next=void 0,this.val=a}function noop(){}function State(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function r(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function r(e){return new util$4.Array(e)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function r(e,a,t){return this.tail=this.tail.next=new Op(e,a,t),this.len+=a,this};function writeByte(r,e,a){e[a]=r&255}function writeVarint32(r,e,a){for(;r>127;)e[a++]=r&127|128,r>>>=7;e[a]=r}function VarintOp(r,e){this.len=r,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function r(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function r(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function r(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(r,e,a){for(;r.hi;)e[a++]=r.lo&127|128,r.lo=(r.lo>>>7|r.hi<<25)>>>0,r.hi>>>=7;for(;r.lo>127;)e[a++]=r.lo&127|128,r.lo=r.lo>>>7;e[a++]=r.lo}Writer$1.prototype.uint64=function r(e){var a=LongBits$1.from(e);return this._push(writeVarint64,a.length(),a)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function r(e){var a=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,a.length(),a)};Writer$1.prototype.bool=function r(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(r,e,a){e[a]=r&255,e[a+1]=r>>>8&255,e[a+2]=r>>>16&255,e[a+3]=r>>>24}Writer$1.prototype.fixed32=function r(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function r(e){var a=LongBits$1.from(e);return this._push(writeFixed32,4,a.lo)._push(writeFixed32,4,a.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function r(e){return this._push(util$4.float.writeFloatLE,4,e)};Writer$1.prototype.double=function r(e){return this._push(util$4.float.writeDoubleLE,8,e)};var writeBytes=util$4.Array.prototype.set?function r(e,a,t){a.set(e,t)}:function r(e,a,t){for(var n=0;n<e.length;++n)a[t+n]=e[n]};Writer$1.prototype.bytes=function r(e){var a=e.length>>>0;if(!a)return this._push(writeByte,1,0);if(util$4.isString(e)){var t=Writer$1.alloc(a=base64.length(e));base64.decode(e,t,0),e=t}return this.uint32(a)._push(writeBytes,a,e)};Writer$1.prototype.string=function r(e){var a=utf8$1.length(e);return a?this.uint32(a)._push(utf8$1.write,a,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function r(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function r(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function r(){var e=this.head,a=this.tail,t=this.len;return this.reset().uint32(t),t&&(this.tail.next=e.next,this.tail=a,this.len+=t),this};Writer$1.prototype.finish=function r(){for(var e=this.head.next,a=this.constructor.alloc(this.len),t=0;e;)e.fn(e.val,a,t),t+=e.len,e=e.next;return a};Writer$1._configure=function(r){BufferWriter$1=r,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(e,a,t){a.set(e,t)}:function(e,a,t){if(e.copy)e.copy(a,t,0,e.length);else for(var n=0;n<e.length;)a[t++]=e[n++]}};BufferWriter.prototype.bytes=function r(e){util$3.isString(e)&&(e=util$3._Buffer_from(e,"base64"));var a=e.length>>>0;return this.uint32(a),a&&this._push(BufferWriter.writeBytesBuffer,a,e),this};function writeStringBuffer(r,e,a){r.length<40?util$3.utf8.write(r,e,a):e.utf8Write?e.utf8Write(r,a):e.write(r,a)}BufferWriter.prototype.string=function r(e){var a=util$3.Buffer.byteLength(e);return this.uint32(a),a&&this._push(writeStringBuffer,a,e),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(r,e){return RangeError("index out of range: "+r.pos+" + "+(e||1)+" > "+r.len)}function Reader$1(r){this.buf=r,this.pos=0,this.len=r.length}var create_array=typeof Uint8Array<"u"?function r(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function r(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create=function r(){return util$2.Buffer?function(a){return(Reader$1.create=function(n){return util$2.Buffer.isBuffer(n)?new BufferReader$1(n):create_array(n)})(a)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function r(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function r(){return this.uint32()|0};Reader$1.prototype.sint32=function r(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var r=new LongBits(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,r}if(this.len-this.pos>4){for(;e<5;++e)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function r(){return this.uint32()!==0};function readFixed32_end(r,e){return(r[e-4]|r[e-3]<<8|r[e-2]<<16|r[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function r(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function r(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function r(){var e=this.uint32(),a=this.pos,t=this.pos+e;if(t>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(a,t):a===t?new this.buf.constructor(0):this._slice.call(this.buf,a,t)};Reader$1.prototype.string=function r(){var e=this.bytes();return utf8.read(e,0,e.length)};Reader$1.prototype.skip=function r(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+r+" at offset "+this.pos)}return this};Reader$1._configure=function(r){BufferReader$1=r,Reader$1.create=create(),BufferReader$1._configure();var e=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(r){Reader.call(this,r)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function r(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(r,e,a){if(typeof r!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=r,this.requestDelimited=!!e,this.responseDelimited=!!a}Service.prototype.rpcCall=function r(e,a,t,n,s){if(!n)throw TypeError("request must be specified");var c=this;if(!s)return util.asPromise(r,c,e,a,t,n);if(!c.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return c.rpcImpl(e,a[c.requestDelimited?"encodeDelimited":"encode"](n).finish(),function(u,_){if(u)return c.emit("error",u,e),s(u);if(_===null){c.end(!0);return}if(!(_ instanceof t))try{_=t[c.responseDelimited?"decodeDelimited":"decode"](_)}catch(m){return c.emit("error",m,e),s(m)}return c.emit("data",_,e),s(null,_)})}catch(d){c.emit("error",d,e),setTimeout(function(){s(d)},0);return}};Service.prototype.end=function r(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(r){var e=r;e.Service=service})(rpc);var roots={};(function(r){var e=r;e.build="minimal",e.Writer=writer,e.BufferWriter=writer_buffer,e.Reader=reader,e.BufferReader=reader_buffer,e.util=requireMinimal(),e.rpc=rpc,e.roots=roots,e.configure=a;function a(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}a()})(indexMinimal);var minimal=indexMinimal;const $Reader=minimal.Reader,$Writer=minimal.Writer,$util=minimal.util,$root=minimal.roots.default||(minimal.roots.default={}),rov_action_api=$root.rov_action_api=(()=>{const r={};return r.DataTransportMethod=function(){const e={},a=Object.create(e);return a[e[1]="LivekitReliable"]=1,a[e[2]="LivekitUnreliable"]=2,a[e[3]="DirectReliable"]=3,a[e[4]="DirectUnreliable"]=4,a}(),r.SensorMeasurmentTypes=function(){const e={},a=Object.create(e);return a[e[0]="depth_meters"]=0,a[e[1]="water_temp_celsius"]=1,a[e[2]="pressure_mbar"]=2,a[e[3]="yaw_degrees"]=3,a[e[4]="pitch_degrees"]=4,a[e[5]="roll_degrees"]=5,a[e[6]="x_acceleration_m_s2"]=6,a[e[7]="y_acceleration_m_s2"]=7,a[e[8]="z_acceleration_m_s2"]=8,a[e[9]="battery_voltage"]=9,a[e[10]="battery_current_amps"]=10,a[e[11]="internal_temp_celsius"]=11,a}(),r.RovActionTypes=function(){const e={},a=Object.create(e);return a[e[0]="ping"]=0,a[e[1]="password_attempt"]=1,a[e[2]="authtoken_attempt"]=2,a[e[3]="take_control"]=3,a[e[4]="move"]=4,a[e[5]="begin_video_stream"]=5,a[e[6]="take_photo"]=6,a[e[7]="start_video_rec"]=7,a[e[8]="stop_video_rec"]=8,a[e[9]="toogle_lights"]=9,a[e[10]="shutdown_rov"]=10,a[e[11]="reboot_rov"]=11,a[e[12]="enable_wifi"]=12,a[e[13]="disable_wifi"]=13,a[e[14]="rov_status_report"]=14,a[e[15]="restart_rov_services"]=15,a[e[16]="rov_logs"]=16,a[e[17]="refresh_all_sensors"]=17,a[e[18]="mavlink"]=18,a[e[19]="simplepeer_signal"]=19,a}(),r.PingAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.Time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.Time!=null&&Object.hasOwnProperty.call(t,"Time")&&n.uint32(8).int64(t.Time),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.PingAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.Time=t.int64();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Time!=null&&t.hasOwnProperty("Time")&&!$util.isInteger(t.Time)&&!(t.Time&&$util.isInteger(t.Time.low)&&$util.isInteger(t.Time.high))?"Time: integer|Long expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.PingAction)return t;let n=new $root.rov_action_api.PingAction;return t.Time!=null&&($util.Long?(n.Time=$util.Long.fromValue(t.Time)).unsigned=!1:typeof t.Time=="string"?n.Time=parseInt(t.Time,10):typeof t.Time=="number"?n.Time=t.Time:typeof t.Time=="object"&&(n.Time=new $util.LongBits(t.Time.low>>>0,t.Time.high>>>0).toNumber())),n},e.toObject=function(t,n){n||(n={});let s={};if(n.defaults)if($util.Long){let c=new $util.Long(0,0,!1);s.Time=n.longs===String?c.toString():n.longs===Number?c.toNumber():c}else s.Time=n.longs===String?"0":0;return t.Time!=null&&t.hasOwnProperty("Time")&&(typeof t.Time=="number"?s.Time=n.longs===String?String(t.Time):t.Time:s.Time=n.longs===String?$util.Long.prototype.toString.call(t.Time):n.longs===Number?new $util.LongBits(t.Time.low>>>0,t.Time.high>>>0).toNumber():t.Time),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PingAction"},e}(),r.PasswordAttemptAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.Password="",e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.Password!=null&&Object.hasOwnProperty.call(t,"Password")&&n.uint32(10).string(t.Password),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.PasswordAttemptAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.Password=t.string();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Password!=null&&t.hasOwnProperty("Password")&&!$util.isString(t.Password)?"Password: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.PasswordAttemptAction)return t;let n=new $root.rov_action_api.PasswordAttemptAction;return t.Password!=null&&(n.Password=String(t.Password)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(s.Password=""),t.Password!=null&&t.hasOwnProperty("Password")&&(s.Password=t.Password),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PasswordAttemptAction"},e}(),r.AuthTokenAttemptAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.Token="",e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.Token!=null&&Object.hasOwnProperty.call(t,"Token")&&n.uint32(10).string(t.Token),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.AuthTokenAttemptAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.Token=t.string();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Token!=null&&t.hasOwnProperty("Token")&&!$util.isString(t.Token)?"Token: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.AuthTokenAttemptAction)return t;let n=new $root.rov_action_api.AuthTokenAttemptAction;return t.Token!=null&&(n.Token=String(t.Token)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(s.Token=""),t.Token!=null&&t.hasOwnProperty("Token")&&(s.Token=t.Token),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.AuthTokenAttemptAction"},e}(),r.TakeControlAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.TakeControlAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.TakeControlAction?t:new $root.rov_action_api.TakeControlAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.TakeControlAction"},e}(),r.MoveAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.VelocityX=0,e.prototype.VelocityY=0,e.prototype.VelocityZ=0,e.prototype.AngularVelocityYaw=0,e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.VelocityX!=null&&Object.hasOwnProperty.call(t,"VelocityX")&&n.uint32(13).float(t.VelocityX),t.VelocityY!=null&&Object.hasOwnProperty.call(t,"VelocityY")&&n.uint32(21).float(t.VelocityY),t.VelocityZ!=null&&Object.hasOwnProperty.call(t,"VelocityZ")&&n.uint32(29).float(t.VelocityZ),t.AngularVelocityYaw!=null&&Object.hasOwnProperty.call(t,"AngularVelocityYaw")&&n.uint32(37).float(t.AngularVelocityYaw),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.MoveAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.VelocityX=t.float();break}case 2:{c.VelocityY=t.float();break}case 3:{c.VelocityZ=t.float();break}case 4:{c.AngularVelocityYaw=t.float();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.VelocityX!=null&&t.hasOwnProperty("VelocityX")&&typeof t.VelocityX!="number"?"VelocityX: number expected":t.VelocityY!=null&&t.hasOwnProperty("VelocityY")&&typeof t.VelocityY!="number"?"VelocityY: number expected":t.VelocityZ!=null&&t.hasOwnProperty("VelocityZ")&&typeof t.VelocityZ!="number"?"VelocityZ: number expected":t.AngularVelocityYaw!=null&&t.hasOwnProperty("AngularVelocityYaw")&&typeof t.AngularVelocityYaw!="number"?"AngularVelocityYaw: number expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.MoveAction)return t;let n=new $root.rov_action_api.MoveAction;return t.VelocityX!=null&&(n.VelocityX=Number(t.VelocityX)),t.VelocityY!=null&&(n.VelocityY=Number(t.VelocityY)),t.VelocityZ!=null&&(n.VelocityZ=Number(t.VelocityZ)),t.AngularVelocityYaw!=null&&(n.AngularVelocityYaw=Number(t.AngularVelocityYaw)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(s.VelocityX=0,s.VelocityY=0,s.VelocityZ=0,s.AngularVelocityYaw=0),t.VelocityX!=null&&t.hasOwnProperty("VelocityX")&&(s.VelocityX=n.json&&!isFinite(t.VelocityX)?String(t.VelocityX):t.VelocityX),t.VelocityY!=null&&t.hasOwnProperty("VelocityY")&&(s.VelocityY=n.json&&!isFinite(t.VelocityY)?String(t.VelocityY):t.VelocityY),t.VelocityZ!=null&&t.hasOwnProperty("VelocityZ")&&(s.VelocityZ=n.json&&!isFinite(t.VelocityZ)?String(t.VelocityZ):t.VelocityZ),t.AngularVelocityYaw!=null&&t.hasOwnProperty("AngularVelocityYaw")&&(s.AngularVelocityYaw=n.json&&!isFinite(t.AngularVelocityYaw)?String(t.AngularVelocityYaw):t.AngularVelocityYaw),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.MoveAction"},e}(),r.BeginVideoStreamAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.BeginVideoStreamAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.BeginVideoStreamAction?t:new $root.rov_action_api.BeginVideoStreamAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.BeginVideoStreamAction"},e}(),r.TakePhotoAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.TakePhotoAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.TakePhotoAction?t:new $root.rov_action_api.TakePhotoAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.TakePhotoAction"},e}(),r.StartVideoRecAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.StartVideoRecAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.StartVideoRecAction?t:new $root.rov_action_api.StartVideoRecAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.StartVideoRecAction"},e}(),r.StopVideoRecAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.StopVideoRecAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.StopVideoRecAction?t:new $root.rov_action_api.StopVideoRecAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.StopVideoRecAction"},e}(),r.ToogleLightsAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.ToogleLightsAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.ToogleLightsAction?t:new $root.rov_action_api.ToogleLightsAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ToogleLightsAction"},e}(),r.ShutdownRovAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.ShutdownRovAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.ShutdownRovAction?t:new $root.rov_action_api.ShutdownRovAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ShutdownRovAction"},e}(),r.RebootRovAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.RebootRovAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.RebootRovAction?t:new $root.rov_action_api.RebootRovAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.RebootRovAction"},e}(),r.EnableWifiAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.EnableWifiAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.EnableWifiAction?t:new $root.rov_action_api.EnableWifiAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.EnableWifiAction"},e}(),r.DisableWifiAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.DisableWifiAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.DisableWifiAction?t:new $root.rov_action_api.DisableWifiAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.DisableWifiAction"},e}(),r.RovStatusReportAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.RovStatusReportAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.RovStatusReportAction?t:new $root.rov_action_api.RovStatusReportAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.RovStatusReportAction"},e}(),r.RestartRovServicesAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.RestartRovServicesAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.RestartRovServicesAction?t:new $root.rov_action_api.RestartRovServicesAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.RestartRovServicesAction"},e}(),r.RovLogsAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.RovLogsAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.RovLogsAction?t:new $root.rov_action_api.RovLogsAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.RovLogsAction"},e}(),r.RefreshAllSensorsAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.RefreshAllSensorsAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.RefreshAllSensorsAction?t:new $root.rov_action_api.RefreshAllSensorsAction},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.RefreshAllSensorsAction"},e}(),r.MavlinkAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.Message=$util.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.Message!=null&&Object.hasOwnProperty.call(t,"Message")&&n.uint32(10).bytes(t.Message),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.MavlinkAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.Message=t.bytes();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Message!=null&&t.hasOwnProperty("Message")&&!(t.Message&&typeof t.Message.length=="number"||$util.isString(t.Message))?"Message: buffer expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.MavlinkAction)return t;let n=new $root.rov_action_api.MavlinkAction;return t.Message!=null&&(typeof t.Message=="string"?$util.base64.decode(t.Message,n.Message=$util.newBuffer($util.base64.length(t.Message)),0):t.Message.length>=0&&(n.Message=t.Message)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(n.bytes===String?s.Message="":(s.Message=[],n.bytes!==Array&&(s.Message=$util.newBuffer(s.Message)))),t.Message!=null&&t.hasOwnProperty("Message")&&(s.Message=n.bytes===String?$util.base64.encode(t.Message,0,t.Message.length):n.bytes===Array?Array.prototype.slice.call(t.Message):t.Message),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.MavlinkAction"},e}(),r.SimplepeerSignalAction=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.Message=$util.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.Message!=null&&Object.hasOwnProperty.call(t,"Message")&&n.uint32(10).bytes(t.Message),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.SimplepeerSignalAction;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.Message=t.bytes();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Message!=null&&t.hasOwnProperty("Message")&&!(t.Message&&typeof t.Message.length=="number"||$util.isString(t.Message))?"Message: buffer expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.SimplepeerSignalAction)return t;let n=new $root.rov_action_api.SimplepeerSignalAction;return t.Message!=null&&(typeof t.Message=="string"?$util.base64.decode(t.Message,n.Message=$util.newBuffer($util.base64.length(t.Message)),0):t.Message.length>=0&&(n.Message=t.Message)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(n.bytes===String?s.Message="":(s.Message=[],n.bytes!==Array&&(s.Message=$util.newBuffer(s.Message)))),t.Message!=null&&t.hasOwnProperty("Message")&&(s.Message=n.bytes===String?$util.base64.encode(t.Message,0,t.Message.length):n.bytes===Array?Array.prototype.slice.call(t.Message):t.Message),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.SimplepeerSignalAction"},e}(),r.ActionBackendMetadata=function(){function e(t){if(t)for(let n=Object.keys(t),s=0;s<n.length;++s)t[n[s]]!=null&&(this[n[s]]=t[n[s]])}e.prototype.FromUserID=null;let a;return Object.defineProperty(e.prototype,"_FromUserID",{get:$util.oneOfGetter(a=["FromUserID"]),set:$util.oneOfSetter(a)}),e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=$Writer.create()),n.FromUserID!=null&&Object.hasOwnProperty.call(n,"FromUserID")&&s.uint32(10).string(n.FromUserID),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof $Reader||(n=$Reader.create(n));let c=s===void 0?n.len:n.pos+s,d=new $root.rov_action_api.ActionBackendMetadata;for(;n.pos<c;){let u=n.uint32();switch(u>>>3){case 1:{d.FromUserID=n.string();break}default:n.skipType(u&7);break}}return d},e.decodeDelimited=function(n){return n instanceof $Reader||(n=new $Reader(n)),this.decode(n,n.uint32())},e.verify=function(n){return typeof n!="object"||n===null?"object expected":n.FromUserID!=null&&n.hasOwnProperty("FromUserID")&&!$util.isString(n.FromUserID)?"FromUserID: string expected":null},e.fromObject=function(n){if(n instanceof $root.rov_action_api.ActionBackendMetadata)return n;let s=new $root.rov_action_api.ActionBackendMetadata;return n.FromUserID!=null&&(s.FromUserID=String(n.FromUserID)),s},e.toObject=function(n,s){s||(s={});let c={};return n.FromUserID!=null&&n.hasOwnProperty("FromUserID")&&(c.FromUserID=n.FromUserID,s.oneofs&&(c._FromUserID="FromUserID")),c},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/rov_action_api.ActionBackendMetadata"},e}(),r.RovAction=function(){function e(t){if(t)for(let n=Object.keys(t),s=0;s<n.length;++s)t[n[s]]!=null&&(this[n[s]]=t[n[s]])}e.prototype.BackendMetadata=null,e.prototype.RovExchangeId=0,e.prototype.Ping=null,e.prototype.PasswordAttempt=null,e.prototype.AuthTokenAttempt=null,e.prototype.TakeControl=null,e.prototype.Move=null,e.prototype.BeginVideoStream=null,e.prototype.TakePhoto=null,e.prototype.StartVideoRec=null,e.prototype.StopVideoRec=null,e.prototype.ToogleLights=null,e.prototype.ShutdownRov=null,e.prototype.RebootRov=null,e.prototype.EnableWifi=null,e.prototype.DisableWifi=null,e.prototype.RovStatusReport=null,e.prototype.RestartRovServices=null,e.prototype.RovLogs=null,e.prototype.RefreshAllSensors=null,e.prototype.Mavlink=null,e.prototype.SimplepeerSignal=null;let a;return Object.defineProperty(e.prototype,"_BackendMetadata",{get:$util.oneOfGetter(a=["BackendMetadata"]),set:$util.oneOfSetter(a)}),Object.defineProperty(e.prototype,"Body",{get:$util.oneOfGetter(a=["Ping","PasswordAttempt","AuthTokenAttempt","TakeControl","Move","BeginVideoStream","TakePhoto","StartVideoRec","StopVideoRec","ToogleLights","ShutdownRov","RebootRov","EnableWifi","DisableWifi","RovStatusReport","RestartRovServices","RovLogs","RefreshAllSensors","Mavlink","SimplepeerSignal"]),set:$util.oneOfSetter(a)}),e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=$Writer.create()),n.BackendMetadata!=null&&Object.hasOwnProperty.call(n,"BackendMetadata")&&$root.rov_action_api.ActionBackendMetadata.encode(n.BackendMetadata,s.uint32(10).fork()).ldelim(),n.RovExchangeId!=null&&Object.hasOwnProperty.call(n,"RovExchangeId")&&s.uint32(16).int32(n.RovExchangeId),n.Ping!=null&&Object.hasOwnProperty.call(n,"Ping")&&$root.rov_action_api.PingAction.encode(n.Ping,s.uint32(26).fork()).ldelim(),n.PasswordAttempt!=null&&Object.hasOwnProperty.call(n,"PasswordAttempt")&&$root.rov_action_api.PasswordAttemptAction.encode(n.PasswordAttempt,s.uint32(34).fork()).ldelim(),n.AuthTokenAttempt!=null&&Object.hasOwnProperty.call(n,"AuthTokenAttempt")&&$root.rov_action_api.AuthTokenAttemptAction.encode(n.AuthTokenAttempt,s.uint32(42).fork()).ldelim(),n.TakeControl!=null&&Object.hasOwnProperty.call(n,"TakeControl")&&$root.rov_action_api.TakeControlAction.encode(n.TakeControl,s.uint32(50).fork()).ldelim(),n.Move!=null&&Object.hasOwnProperty.call(n,"Move")&&$root.rov_action_api.MoveAction.encode(n.Move,s.uint32(58).fork()).ldelim(),n.BeginVideoStream!=null&&Object.hasOwnProperty.call(n,"BeginVideoStream")&&$root.rov_action_api.BeginVideoStreamAction.encode(n.BeginVideoStream,s.uint32(66).fork()).ldelim(),n.TakePhoto!=null&&Object.hasOwnProperty.call(n,"TakePhoto")&&$root.rov_action_api.TakePhotoAction.encode(n.TakePhoto,s.uint32(74).fork()).ldelim(),n.StartVideoRec!=null&&Object.hasOwnProperty.call(n,"StartVideoRec")&&$root.rov_action_api.StartVideoRecAction.encode(n.StartVideoRec,s.uint32(82).fork()).ldelim(),n.StopVideoRec!=null&&Object.hasOwnProperty.call(n,"StopVideoRec")&&$root.rov_action_api.StopVideoRecAction.encode(n.StopVideoRec,s.uint32(90).fork()).ldelim(),n.ToogleLights!=null&&Object.hasOwnProperty.call(n,"ToogleLights")&&$root.rov_action_api.ToogleLightsAction.encode(n.ToogleLights,s.uint32(98).fork()).ldelim(),n.ShutdownRov!=null&&Object.hasOwnProperty.call(n,"ShutdownRov")&&$root.rov_action_api.ShutdownRovAction.encode(n.ShutdownRov,s.uint32(106).fork()).ldelim(),n.RebootRov!=null&&Object.hasOwnProperty.call(n,"RebootRov")&&$root.rov_action_api.RebootRovAction.encode(n.RebootRov,s.uint32(114).fork()).ldelim(),n.EnableWifi!=null&&Object.hasOwnProperty.call(n,"EnableWifi")&&$root.rov_action_api.EnableWifiAction.encode(n.EnableWifi,s.uint32(122).fork()).ldelim(),n.DisableWifi!=null&&Object.hasOwnProperty.call(n,"DisableWifi")&&$root.rov_action_api.DisableWifiAction.encode(n.DisableWifi,s.uint32(130).fork()).ldelim(),n.RovStatusReport!=null&&Object.hasOwnProperty.call(n,"RovStatusReport")&&$root.rov_action_api.RovStatusReportAction.encode(n.RovStatusReport,s.uint32(138).fork()).ldelim(),n.RestartRovServices!=null&&Object.hasOwnProperty.call(n,"RestartRovServices")&&$root.rov_action_api.RestartRovServicesAction.encode(n.RestartRovServices,s.uint32(146).fork()).ldelim(),n.RovLogs!=null&&Object.hasOwnProperty.call(n,"RovLogs")&&$root.rov_action_api.RovLogsAction.encode(n.RovLogs,s.uint32(154).fork()).ldelim(),n.RefreshAllSensors!=null&&Object.hasOwnProperty.call(n,"RefreshAllSensors")&&$root.rov_action_api.RefreshAllSensorsAction.encode(n.RefreshAllSensors,s.uint32(162).fork()).ldelim(),n.Mavlink!=null&&Object.hasOwnProperty.call(n,"Mavlink")&&$root.rov_action_api.MavlinkAction.encode(n.Mavlink,s.uint32(170).fork()).ldelim(),n.SimplepeerSignal!=null&&Object.hasOwnProperty.call(n,"SimplepeerSignal")&&$root.rov_action_api.SimplepeerSignalAction.encode(n.SimplepeerSignal,s.uint32(178).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof $Reader||(n=$Reader.create(n));let c=s===void 0?n.len:n.pos+s,d=new $root.rov_action_api.RovAction;for(;n.pos<c;){let u=n.uint32();switch(u>>>3){case 1:{d.BackendMetadata=$root.rov_action_api.ActionBackendMetadata.decode(n,n.uint32());break}case 2:{d.RovExchangeId=n.int32();break}case 3:{d.Ping=$root.rov_action_api.PingAction.decode(n,n.uint32());break}case 4:{d.PasswordAttempt=$root.rov_action_api.PasswordAttemptAction.decode(n,n.uint32());break}case 5:{d.AuthTokenAttempt=$root.rov_action_api.AuthTokenAttemptAction.decode(n,n.uint32());break}case 6:{d.TakeControl=$root.rov_action_api.TakeControlAction.decode(n,n.uint32());break}case 7:{d.Move=$root.rov_action_api.MoveAction.decode(n,n.uint32());break}case 8:{d.BeginVideoStream=$root.rov_action_api.BeginVideoStreamAction.decode(n,n.uint32());break}case 9:{d.TakePhoto=$root.rov_action_api.TakePhotoAction.decode(n,n.uint32());break}case 10:{d.StartVideoRec=$root.rov_action_api.StartVideoRecAction.decode(n,n.uint32());break}case 11:{d.StopVideoRec=$root.rov_action_api.StopVideoRecAction.decode(n,n.uint32());break}case 12:{d.ToogleLights=$root.rov_action_api.ToogleLightsAction.decode(n,n.uint32());break}case 13:{d.ShutdownRov=$root.rov_action_api.ShutdownRovAction.decode(n,n.uint32());break}case 14:{d.RebootRov=$root.rov_action_api.RebootRovAction.decode(n,n.uint32());break}case 15:{d.EnableWifi=$root.rov_action_api.EnableWifiAction.decode(n,n.uint32());break}case 16:{d.DisableWifi=$root.rov_action_api.DisableWifiAction.decode(n,n.uint32());break}case 17:{d.RovStatusReport=$root.rov_action_api.RovStatusReportAction.decode(n,n.uint32());break}case 18:{d.RestartRovServices=$root.rov_action_api.RestartRovServicesAction.decode(n,n.uint32());break}case 19:{d.RovLogs=$root.rov_action_api.RovLogsAction.decode(n,n.uint32());break}case 20:{d.RefreshAllSensors=$root.rov_action_api.RefreshAllSensorsAction.decode(n,n.uint32());break}case 21:{d.Mavlink=$root.rov_action_api.MavlinkAction.decode(n,n.uint32());break}case 22:{d.SimplepeerSignal=$root.rov_action_api.SimplepeerSignalAction.decode(n,n.uint32());break}default:n.skipType(u&7);break}}return d},e.decodeDelimited=function(n){return n instanceof $Reader||(n=new $Reader(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";let s={};if(n.BackendMetadata!=null&&n.hasOwnProperty("BackendMetadata")){s._BackendMetadata=1;{let c=$root.rov_action_api.ActionBackendMetadata.verify(n.BackendMetadata);if(c)return"BackendMetadata."+c}}if(n.RovExchangeId!=null&&n.hasOwnProperty("RovExchangeId")&&!$util.isInteger(n.RovExchangeId))return"RovExchangeId: integer expected";if(n.Ping!=null&&n.hasOwnProperty("Ping")){s.Body=1;{let c=$root.rov_action_api.PingAction.verify(n.Ping);if(c)return"Ping."+c}}if(n.PasswordAttempt!=null&&n.hasOwnProperty("PasswordAttempt")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.PasswordAttemptAction.verify(n.PasswordAttempt);if(c)return"PasswordAttempt."+c}}if(n.AuthTokenAttempt!=null&&n.hasOwnProperty("AuthTokenAttempt")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.AuthTokenAttemptAction.verify(n.AuthTokenAttempt);if(c)return"AuthTokenAttempt."+c}}if(n.TakeControl!=null&&n.hasOwnProperty("TakeControl")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.TakeControlAction.verify(n.TakeControl);if(c)return"TakeControl."+c}}if(n.Move!=null&&n.hasOwnProperty("Move")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.MoveAction.verify(n.Move);if(c)return"Move."+c}}if(n.BeginVideoStream!=null&&n.hasOwnProperty("BeginVideoStream")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.BeginVideoStreamAction.verify(n.BeginVideoStream);if(c)return"BeginVideoStream."+c}}if(n.TakePhoto!=null&&n.hasOwnProperty("TakePhoto")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.TakePhotoAction.verify(n.TakePhoto);if(c)return"TakePhoto."+c}}if(n.StartVideoRec!=null&&n.hasOwnProperty("StartVideoRec")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.StartVideoRecAction.verify(n.StartVideoRec);if(c)return"StartVideoRec."+c}}if(n.StopVideoRec!=null&&n.hasOwnProperty("StopVideoRec")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.StopVideoRecAction.verify(n.StopVideoRec);if(c)return"StopVideoRec."+c}}if(n.ToogleLights!=null&&n.hasOwnProperty("ToogleLights")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.ToogleLightsAction.verify(n.ToogleLights);if(c)return"ToogleLights."+c}}if(n.ShutdownRov!=null&&n.hasOwnProperty("ShutdownRov")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.ShutdownRovAction.verify(n.ShutdownRov);if(c)return"ShutdownRov."+c}}if(n.RebootRov!=null&&n.hasOwnProperty("RebootRov")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.RebootRovAction.verify(n.RebootRov);if(c)return"RebootRov."+c}}if(n.EnableWifi!=null&&n.hasOwnProperty("EnableWifi")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.EnableWifiAction.verify(n.EnableWifi);if(c)return"EnableWifi."+c}}if(n.DisableWifi!=null&&n.hasOwnProperty("DisableWifi")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.DisableWifiAction.verify(n.DisableWifi);if(c)return"DisableWifi."+c}}if(n.RovStatusReport!=null&&n.hasOwnProperty("RovStatusReport")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.RovStatusReportAction.verify(n.RovStatusReport);if(c)return"RovStatusReport."+c}}if(n.RestartRovServices!=null&&n.hasOwnProperty("RestartRovServices")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.RestartRovServicesAction.verify(n.RestartRovServices);if(c)return"RestartRovServices."+c}}if(n.RovLogs!=null&&n.hasOwnProperty("RovLogs")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.RovLogsAction.verify(n.RovLogs);if(c)return"RovLogs."+c}}if(n.RefreshAllSensors!=null&&n.hasOwnProperty("RefreshAllSensors")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.RefreshAllSensorsAction.verify(n.RefreshAllSensors);if(c)return"RefreshAllSensors."+c}}if(n.Mavlink!=null&&n.hasOwnProperty("Mavlink")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.MavlinkAction.verify(n.Mavlink);if(c)return"Mavlink."+c}}if(n.SimplepeerSignal!=null&&n.hasOwnProperty("SimplepeerSignal")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.SimplepeerSignalAction.verify(n.SimplepeerSignal);if(c)return"SimplepeerSignal."+c}}return null},e.fromObject=function(n){if(n instanceof $root.rov_action_api.RovAction)return n;let s=new $root.rov_action_api.RovAction;if(n.BackendMetadata!=null){if(typeof n.BackendMetadata!="object")throw TypeError(".rov_action_api.RovAction.BackendMetadata: object expected");s.BackendMetadata=$root.rov_action_api.ActionBackendMetadata.fromObject(n.BackendMetadata)}if(n.RovExchangeId!=null&&(s.RovExchangeId=n.RovExchangeId|0),n.Ping!=null){if(typeof n.Ping!="object")throw TypeError(".rov_action_api.RovAction.Ping: object expected");s.Ping=$root.rov_action_api.PingAction.fromObject(n.Ping)}if(n.PasswordAttempt!=null){if(typeof n.PasswordAttempt!="object")throw TypeError(".rov_action_api.RovAction.PasswordAttempt: object expected");s.PasswordAttempt=$root.rov_action_api.PasswordAttemptAction.fromObject(n.PasswordAttempt)}if(n.AuthTokenAttempt!=null){if(typeof n.AuthTokenAttempt!="object")throw TypeError(".rov_action_api.RovAction.AuthTokenAttempt: object expected");s.AuthTokenAttempt=$root.rov_action_api.AuthTokenAttemptAction.fromObject(n.AuthTokenAttempt)}if(n.TakeControl!=null){if(typeof n.TakeControl!="object")throw TypeError(".rov_action_api.RovAction.TakeControl: object expected");s.TakeControl=$root.rov_action_api.TakeControlAction.fromObject(n.TakeControl)}if(n.Move!=null){if(typeof n.Move!="object")throw TypeError(".rov_action_api.RovAction.Move: object expected");s.Move=$root.rov_action_api.MoveAction.fromObject(n.Move)}if(n.BeginVideoStream!=null){if(typeof n.BeginVideoStream!="object")throw TypeError(".rov_action_api.RovAction.BeginVideoStream: object expected");s.BeginVideoStream=$root.rov_action_api.BeginVideoStreamAction.fromObject(n.BeginVideoStream)}if(n.TakePhoto!=null){if(typeof n.TakePhoto!="object")throw TypeError(".rov_action_api.RovAction.TakePhoto: object expected");s.TakePhoto=$root.rov_action_api.TakePhotoAction.fromObject(n.TakePhoto)}if(n.StartVideoRec!=null){if(typeof n.StartVideoRec!="object")throw TypeError(".rov_action_api.RovAction.StartVideoRec: object expected");s.StartVideoRec=$root.rov_action_api.StartVideoRecAction.fromObject(n.StartVideoRec)}if(n.StopVideoRec!=null){if(typeof n.StopVideoRec!="object")throw TypeError(".rov_action_api.RovAction.StopVideoRec: object expected");s.StopVideoRec=$root.rov_action_api.StopVideoRecAction.fromObject(n.StopVideoRec)}if(n.ToogleLights!=null){if(typeof n.ToogleLights!="object")throw TypeError(".rov_action_api.RovAction.ToogleLights: object expected");s.ToogleLights=$root.rov_action_api.ToogleLightsAction.fromObject(n.ToogleLights)}if(n.ShutdownRov!=null){if(typeof n.ShutdownRov!="object")throw TypeError(".rov_action_api.RovAction.ShutdownRov: object expected");s.ShutdownRov=$root.rov_action_api.ShutdownRovAction.fromObject(n.ShutdownRov)}if(n.RebootRov!=null){if(typeof n.RebootRov!="object")throw TypeError(".rov_action_api.RovAction.RebootRov: object expected");s.RebootRov=$root.rov_action_api.RebootRovAction.fromObject(n.RebootRov)}if(n.EnableWifi!=null){if(typeof n.EnableWifi!="object")throw TypeError(".rov_action_api.RovAction.EnableWifi: object expected");s.EnableWifi=$root.rov_action_api.EnableWifiAction.fromObject(n.EnableWifi)}if(n.DisableWifi!=null){if(typeof n.DisableWifi!="object")throw TypeError(".rov_action_api.RovAction.DisableWifi: object expected");s.DisableWifi=$root.rov_action_api.DisableWifiAction.fromObject(n.DisableWifi)}if(n.RovStatusReport!=null){if(typeof n.RovStatusReport!="object")throw TypeError(".rov_action_api.RovAction.RovStatusReport: object expected");s.RovStatusReport=$root.rov_action_api.RovStatusReportAction.fromObject(n.RovStatusReport)}if(n.RestartRovServices!=null){if(typeof n.RestartRovServices!="object")throw TypeError(".rov_action_api.RovAction.RestartRovServices: object expected");s.RestartRovServices=$root.rov_action_api.RestartRovServicesAction.fromObject(n.RestartRovServices)}if(n.RovLogs!=null){if(typeof n.RovLogs!="object")throw TypeError(".rov_action_api.RovAction.RovLogs: object expected");s.RovLogs=$root.rov_action_api.RovLogsAction.fromObject(n.RovLogs)}if(n.RefreshAllSensors!=null){if(typeof n.RefreshAllSensors!="object")throw TypeError(".rov_action_api.RovAction.RefreshAllSensors: object expected");s.RefreshAllSensors=$root.rov_action_api.RefreshAllSensorsAction.fromObject(n.RefreshAllSensors)}if(n.Mavlink!=null){if(typeof n.Mavlink!="object")throw TypeError(".rov_action_api.RovAction.Mavlink: object expected");s.Mavlink=$root.rov_action_api.MavlinkAction.fromObject(n.Mavlink)}if(n.SimplepeerSignal!=null){if(typeof n.SimplepeerSignal!="object")throw TypeError(".rov_action_api.RovAction.SimplepeerSignal: object expected");s.SimplepeerSignal=$root.rov_action_api.SimplepeerSignalAction.fromObject(n.SimplepeerSignal)}return s},e.toObject=function(n,s){s||(s={});let c={};return s.defaults&&(c.RovExchangeId=0),n.BackendMetadata!=null&&n.hasOwnProperty("BackendMetadata")&&(c.BackendMetadata=$root.rov_action_api.ActionBackendMetadata.toObject(n.BackendMetadata,s),s.oneofs&&(c._BackendMetadata="BackendMetadata")),n.RovExchangeId!=null&&n.hasOwnProperty("RovExchangeId")&&(c.RovExchangeId=n.RovExchangeId),n.Ping!=null&&n.hasOwnProperty("Ping")&&(c.Ping=$root.rov_action_api.PingAction.toObject(n.Ping,s),s.oneofs&&(c.Body="Ping")),n.PasswordAttempt!=null&&n.hasOwnProperty("PasswordAttempt")&&(c.PasswordAttempt=$root.rov_action_api.PasswordAttemptAction.toObject(n.PasswordAttempt,s),s.oneofs&&(c.Body="PasswordAttempt")),n.AuthTokenAttempt!=null&&n.hasOwnProperty("AuthTokenAttempt")&&(c.AuthTokenAttempt=$root.rov_action_api.AuthTokenAttemptAction.toObject(n.AuthTokenAttempt,s),s.oneofs&&(c.Body="AuthTokenAttempt")),n.TakeControl!=null&&n.hasOwnProperty("TakeControl")&&(c.TakeControl=$root.rov_action_api.TakeControlAction.toObject(n.TakeControl,s),s.oneofs&&(c.Body="TakeControl")),n.Move!=null&&n.hasOwnProperty("Move")&&(c.Move=$root.rov_action_api.MoveAction.toObject(n.Move,s),s.oneofs&&(c.Body="Move")),n.BeginVideoStream!=null&&n.hasOwnProperty("BeginVideoStream")&&(c.BeginVideoStream=$root.rov_action_api.BeginVideoStreamAction.toObject(n.BeginVideoStream,s),s.oneofs&&(c.Body="BeginVideoStream")),n.TakePhoto!=null&&n.hasOwnProperty("TakePhoto")&&(c.TakePhoto=$root.rov_action_api.TakePhotoAction.toObject(n.TakePhoto,s),s.oneofs&&(c.Body="TakePhoto")),n.StartVideoRec!=null&&n.hasOwnProperty("StartVideoRec")&&(c.StartVideoRec=$root.rov_action_api.StartVideoRecAction.toObject(n.StartVideoRec,s),s.oneofs&&(c.Body="StartVideoRec")),n.StopVideoRec!=null&&n.hasOwnProperty("StopVideoRec")&&(c.StopVideoRec=$root.rov_action_api.StopVideoRecAction.toObject(n.StopVideoRec,s),s.oneofs&&(c.Body="StopVideoRec")),n.ToogleLights!=null&&n.hasOwnProperty("ToogleLights")&&(c.ToogleLights=$root.rov_action_api.ToogleLightsAction.toObject(n.ToogleLights,s),s.oneofs&&(c.Body="ToogleLights")),n.ShutdownRov!=null&&n.hasOwnProperty("ShutdownRov")&&(c.ShutdownRov=$root.rov_action_api.ShutdownRovAction.toObject(n.ShutdownRov,s),s.oneofs&&(c.Body="ShutdownRov")),n.RebootRov!=null&&n.hasOwnProperty("RebootRov")&&(c.RebootRov=$root.rov_action_api.RebootRovAction.toObject(n.RebootRov,s),s.oneofs&&(c.Body="RebootRov")),n.EnableWifi!=null&&n.hasOwnProperty("EnableWifi")&&(c.EnableWifi=$root.rov_action_api.EnableWifiAction.toObject(n.EnableWifi,s),s.oneofs&&(c.Body="EnableWifi")),n.DisableWifi!=null&&n.hasOwnProperty("DisableWifi")&&(c.DisableWifi=$root.rov_action_api.DisableWifiAction.toObject(n.DisableWifi,s),s.oneofs&&(c.Body="DisableWifi")),n.RovStatusReport!=null&&n.hasOwnProperty("RovStatusReport")&&(c.RovStatusReport=$root.rov_action_api.RovStatusReportAction.toObject(n.RovStatusReport,s),s.oneofs&&(c.Body="RovStatusReport")),n.RestartRovServices!=null&&n.hasOwnProperty("RestartRovServices")&&(c.RestartRovServices=$root.rov_action_api.RestartRovServicesAction.toObject(n.RestartRovServices,s),s.oneofs&&(c.Body="RestartRovServices")),n.RovLogs!=null&&n.hasOwnProperty("RovLogs")&&(c.RovLogs=$root.rov_action_api.RovLogsAction.toObject(n.RovLogs,s),s.oneofs&&(c.Body="RovLogs")),n.RefreshAllSensors!=null&&n.hasOwnProperty("RefreshAllSensors")&&(c.RefreshAllSensors=$root.rov_action_api.RefreshAllSensorsAction.toObject(n.RefreshAllSensors,s),s.oneofs&&(c.Body="RefreshAllSensors")),n.Mavlink!=null&&n.hasOwnProperty("Mavlink")&&(c.Mavlink=$root.rov_action_api.MavlinkAction.toObject(n.Mavlink,s),s.oneofs&&(c.Body="Mavlink")),n.SimplepeerSignal!=null&&n.hasOwnProperty("SimplepeerSignal")&&(c.SimplepeerSignal=$root.rov_action_api.SimplepeerSignalAction.toObject(n.SimplepeerSignal,s),s.oneofs&&(c.Body="SimplepeerSignal")),c},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/rov_action_api.RovAction"},e}(),r.RovResponseTypes=function(){const e={},a=Object.create(e);return a[e[0]="done"]=0,a[e[1]="error"]=1,a[e[2]="pong"]=2,a[e[3]="measurement"]=3,a[e[4]="sensor_updates"]=4,a[e[5]="password_required"]=5,a[e[6]="password_accepted"]=6,a[e[7]="password_invalid"]=7,a[e[8]="token_accepted"]=8,a[e[9]="token_invalid"]=9,a[e[10]="driver_changed"]=10,a[e[11]="client_connected"]=11,a[e[12]="client_disconnected"]=12,a[e[13]="heartbeat_response"]=13,a[e[14]="continued_output"]=14,a[e[15]="mavlink"]=15,a[e[16]="simplepeer_signalling"]=16,a}(),r.DoneResponse=function(){function e(t){if(t)for(let n=Object.keys(t),s=0;s<n.length;++s)t[n[s]]!=null&&(this[n[s]]=t[n[s]])}e.prototype.Message=null;let a;return Object.defineProperty(e.prototype,"_Message",{get:$util.oneOfGetter(a=["Message"]),set:$util.oneOfSetter(a)}),e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=$Writer.create()),n.Message!=null&&Object.hasOwnProperty.call(n,"Message")&&s.uint32(10).string(n.Message),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof $Reader||(n=$Reader.create(n));let c=s===void 0?n.len:n.pos+s,d=new $root.rov_action_api.DoneResponse;for(;n.pos<c;){let u=n.uint32();switch(u>>>3){case 1:{d.Message=n.string();break}default:n.skipType(u&7);break}}return d},e.decodeDelimited=function(n){return n instanceof $Reader||(n=new $Reader(n)),this.decode(n,n.uint32())},e.verify=function(n){return typeof n!="object"||n===null?"object expected":n.Message!=null&&n.hasOwnProperty("Message")&&!$util.isString(n.Message)?"Message: string expected":null},e.fromObject=function(n){if(n instanceof $root.rov_action_api.DoneResponse)return n;let s=new $root.rov_action_api.DoneResponse;return n.Message!=null&&(s.Message=String(n.Message)),s},e.toObject=function(n,s){s||(s={});let c={};return n.Message!=null&&n.hasOwnProperty("Message")&&(c.Message=n.Message,s.oneofs&&(c._Message="Message")),c},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/rov_action_api.DoneResponse"},e}(),r.ErrorResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.Message="",e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.Message!=null&&Object.hasOwnProperty.call(t,"Message")&&n.uint32(10).string(t.Message),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.ErrorResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.Message=t.string();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Message!=null&&t.hasOwnProperty("Message")&&!$util.isString(t.Message)?"Message: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.ErrorResponse)return t;let n=new $root.rov_action_api.ErrorResponse;return t.Message!=null&&(n.Message=String(t.Message)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(s.Message=""),t.Message!=null&&t.hasOwnProperty("Message")&&(s.Message=t.Message),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ErrorResponse"},e}(),r.PongResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.Time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.Time!=null&&Object.hasOwnProperty.call(t,"Time")&&n.uint32(8).int64(t.Time),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.PongResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.Time=t.int64();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Time!=null&&t.hasOwnProperty("Time")&&!$util.isInteger(t.Time)&&!(t.Time&&$util.isInteger(t.Time.low)&&$util.isInteger(t.Time.high))?"Time: integer|Long expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.PongResponse)return t;let n=new $root.rov_action_api.PongResponse;return t.Time!=null&&($util.Long?(n.Time=$util.Long.fromValue(t.Time)).unsigned=!1:typeof t.Time=="string"?n.Time=parseInt(t.Time,10):typeof t.Time=="number"?n.Time=t.Time:typeof t.Time=="object"&&(n.Time=new $util.LongBits(t.Time.low>>>0,t.Time.high>>>0).toNumber())),n},e.toObject=function(t,n){n||(n={});let s={};if(n.defaults)if($util.Long){let c=new $util.Long(0,0,!1);s.Time=n.longs===String?c.toString():n.longs===Number?c.toNumber():c}else s.Time=n.longs===String?"0":0;return t.Time!=null&&t.hasOwnProperty("Time")&&(typeof t.Time=="number"?s.Time=n.longs===String?String(t.Time):t.Time:s.Time=n.longs===String?$util.Long.prototype.toString.call(t.Time):n.longs===Number?new $util.LongBits(t.Time.low>>>0,t.Time.high>>>0).toNumber():t.Time),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PongResponse"},e}(),r.SensorUpdatesResponse=function(){function e(a){if(this.MeasurementUpdates=[],a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.MeasurementUpdates=$util.emptyArray,e.create=function(t){return new e(t)},e.encode=function(t,n){if(n||(n=$Writer.create()),t.MeasurementUpdates!=null&&t.MeasurementUpdates.length)for(let s=0;s<t.MeasurementUpdates.length;++s)$root.rov_action_api.SensorUpdatesResponse.Measurement.encode(t.MeasurementUpdates[s],n.uint32(10).fork()).ldelim();return n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.SensorUpdatesResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.MeasurementUpdates&&c.MeasurementUpdates.length||(c.MeasurementUpdates=[]),c.MeasurementUpdates.push($root.rov_action_api.SensorUpdatesResponse.Measurement.decode(t,t.uint32()));break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){if(typeof t!="object"||t===null)return"object expected";if(t.MeasurementUpdates!=null&&t.hasOwnProperty("MeasurementUpdates")){if(!Array.isArray(t.MeasurementUpdates))return"MeasurementUpdates: array expected";for(let n=0;n<t.MeasurementUpdates.length;++n){let s=$root.rov_action_api.SensorUpdatesResponse.Measurement.verify(t.MeasurementUpdates[n]);if(s)return"MeasurementUpdates."+s}}return null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.SensorUpdatesResponse)return t;let n=new $root.rov_action_api.SensorUpdatesResponse;if(t.MeasurementUpdates){if(!Array.isArray(t.MeasurementUpdates))throw TypeError(".rov_action_api.SensorUpdatesResponse.MeasurementUpdates: array expected");n.MeasurementUpdates=[];for(let s=0;s<t.MeasurementUpdates.length;++s){if(typeof t.MeasurementUpdates[s]!="object")throw TypeError(".rov_action_api.SensorUpdatesResponse.MeasurementUpdates: object expected");n.MeasurementUpdates[s]=$root.rov_action_api.SensorUpdatesResponse.Measurement.fromObject(t.MeasurementUpdates[s])}}return n},e.toObject=function(t,n){n||(n={});let s={};if((n.arrays||n.defaults)&&(s.MeasurementUpdates=[]),t.MeasurementUpdates&&t.MeasurementUpdates.length){s.MeasurementUpdates=[];for(let c=0;c<t.MeasurementUpdates.length;++c)s.MeasurementUpdates[c]=$root.rov_action_api.SensorUpdatesResponse.Measurement.toObject(t.MeasurementUpdates[c],n)}return s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.SensorUpdatesResponse"},e.Measurement=function(){function a(t){if(t)for(let n=Object.keys(t),s=0;s<n.length;++s)t[n[s]]!=null&&(this[n[s]]=t[n[s]])}return a.prototype.MeasurementType=0,a.prototype.Value=0,a.create=function(n){return new a(n)},a.encode=function(n,s){return s||(s=$Writer.create()),n.MeasurementType!=null&&Object.hasOwnProperty.call(n,"MeasurementType")&&s.uint32(8).int32(n.MeasurementType),n.Value!=null&&Object.hasOwnProperty.call(n,"Value")&&s.uint32(21).float(n.Value),s},a.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},a.decode=function(n,s){n instanceof $Reader||(n=$Reader.create(n));let c=s===void 0?n.len:n.pos+s,d=new $root.rov_action_api.SensorUpdatesResponse.Measurement;for(;n.pos<c;){let u=n.uint32();switch(u>>>3){case 1:{d.MeasurementType=n.int32();break}case 2:{d.Value=n.float();break}default:n.skipType(u&7);break}}return d},a.decodeDelimited=function(n){return n instanceof $Reader||(n=new $Reader(n)),this.decode(n,n.uint32())},a.verify=function(n){if(typeof n!="object"||n===null)return"object expected";if(n.MeasurementType!=null&&n.hasOwnProperty("MeasurementType"))switch(n.MeasurementType){default:return"MeasurementType: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:break}return n.Value!=null&&n.hasOwnProperty("Value")&&typeof n.Value!="number"?"Value: number expected":null},a.fromObject=function(n){if(n instanceof $root.rov_action_api.SensorUpdatesResponse.Measurement)return n;let s=new $root.rov_action_api.SensorUpdatesResponse.Measurement;switch(n.MeasurementType){default:if(typeof n.MeasurementType=="number"){s.MeasurementType=n.MeasurementType;break}break;case"depth_meters":case 0:s.MeasurementType=0;break;case"water_temp_celsius":case 1:s.MeasurementType=1;break;case"pressure_mbar":case 2:s.MeasurementType=2;break;case"yaw_degrees":case 3:s.MeasurementType=3;break;case"pitch_degrees":case 4:s.MeasurementType=4;break;case"roll_degrees":case 5:s.MeasurementType=5;break;case"x_acceleration_m_s2":case 6:s.MeasurementType=6;break;case"y_acceleration_m_s2":case 7:s.MeasurementType=7;break;case"z_acceleration_m_s2":case 8:s.MeasurementType=8;break;case"battery_voltage":case 9:s.MeasurementType=9;break;case"battery_current_amps":case 10:s.MeasurementType=10;break;case"internal_temp_celsius":case 11:s.MeasurementType=11;break}return n.Value!=null&&(s.Value=Number(n.Value)),s},a.toObject=function(n,s){s||(s={});let c={};return s.defaults&&(c.MeasurementType=s.enums===String?"depth_meters":0,c.Value=0),n.MeasurementType!=null&&n.hasOwnProperty("MeasurementType")&&(c.MeasurementType=s.enums===String?$root.rov_action_api.SensorMeasurmentTypes[n.MeasurementType]===void 0?n.MeasurementType:$root.rov_action_api.SensorMeasurmentTypes[n.MeasurementType]:n.MeasurementType),n.Value!=null&&n.hasOwnProperty("Value")&&(c.Value=s.json&&!isFinite(n.Value)?String(n.Value):n.Value),c},a.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},a.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/rov_action_api.SensorUpdatesResponse.Measurement"},a}(),e}(),r.PasswordRequiredResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.RovId="",e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.RovId!=null&&Object.hasOwnProperty.call(t,"RovId")&&n.uint32(10).string(t.RovId),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.PasswordRequiredResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.RovId=t.string();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.RovId!=null&&t.hasOwnProperty("RovId")&&!$util.isString(t.RovId)?"RovId: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.PasswordRequiredResponse)return t;let n=new $root.rov_action_api.PasswordRequiredResponse;return t.RovId!=null&&(n.RovId=String(t.RovId)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(s.RovId=""),t.RovId!=null&&t.hasOwnProperty("RovId")&&(s.RovId=t.RovId),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PasswordRequiredResponse"},e}(),r.PasswordAcceptedResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.AuthToken="",e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.AuthToken!=null&&Object.hasOwnProperty.call(t,"AuthToken")&&n.uint32(10).string(t.AuthToken),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.PasswordAcceptedResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.AuthToken=t.string();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.AuthToken!=null&&t.hasOwnProperty("AuthToken")&&!$util.isString(t.AuthToken)?"AuthToken: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.PasswordAcceptedResponse)return t;let n=new $root.rov_action_api.PasswordAcceptedResponse;return t.AuthToken!=null&&(n.AuthToken=String(t.AuthToken)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(s.AuthToken=""),t.AuthToken!=null&&t.hasOwnProperty("AuthToken")&&(s.AuthToken=t.AuthToken),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PasswordAcceptedResponse"},e}(),r.PasswordInvalidResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.PasswordInvalidResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":null},e.fromObject=function(t){return t instanceof $root.rov_action_api.PasswordInvalidResponse?t:new $root.rov_action_api.PasswordInvalidResponse},e.toObject=function(){return{}},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.PasswordInvalidResponse"},e}(),r.DriverChangedResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.DriverPeerId="",e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.DriverPeerId!=null&&Object.hasOwnProperty.call(t,"DriverPeerId")&&n.uint32(10).string(t.DriverPeerId),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.DriverChangedResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.DriverPeerId=t.string();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.DriverPeerId!=null&&t.hasOwnProperty("DriverPeerId")&&!$util.isString(t.DriverPeerId)?"DriverPeerId: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.DriverChangedResponse)return t;let n=new $root.rov_action_api.DriverChangedResponse;return t.DriverPeerId!=null&&(n.DriverPeerId=String(t.DriverPeerId)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(s.DriverPeerId=""),t.DriverPeerId!=null&&t.hasOwnProperty("DriverPeerId")&&(s.DriverPeerId=t.DriverPeerId),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.DriverChangedResponse"},e}(),r.ClientConnectedResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.ClientPeerId="",e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.ClientPeerId!=null&&Object.hasOwnProperty.call(t,"ClientPeerId")&&n.uint32(10).string(t.ClientPeerId),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.ClientConnectedResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.ClientPeerId=t.string();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.ClientPeerId!=null&&t.hasOwnProperty("ClientPeerId")&&!$util.isString(t.ClientPeerId)?"ClientPeerId: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.ClientConnectedResponse)return t;let n=new $root.rov_action_api.ClientConnectedResponse;return t.ClientPeerId!=null&&(n.ClientPeerId=String(t.ClientPeerId)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(s.ClientPeerId=""),t.ClientPeerId!=null&&t.hasOwnProperty("ClientPeerId")&&(s.ClientPeerId=t.ClientPeerId),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ClientConnectedResponse"},e}(),r.ClientDisconnectedResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.ClientPeerId="",e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.ClientPeerId!=null&&Object.hasOwnProperty.call(t,"ClientPeerId")&&n.uint32(10).string(t.ClientPeerId),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.ClientDisconnectedResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.ClientPeerId=t.string();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.ClientPeerId!=null&&t.hasOwnProperty("ClientPeerId")&&!$util.isString(t.ClientPeerId)?"ClientPeerId: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.ClientDisconnectedResponse)return t;let n=new $root.rov_action_api.ClientDisconnectedResponse;return t.ClientPeerId!=null&&(n.ClientPeerId=String(t.ClientPeerId)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(s.ClientPeerId=""),t.ClientPeerId!=null&&t.hasOwnProperty("ClientPeerId")&&(s.ClientPeerId=t.ClientPeerId),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ClientDisconnectedResponse"},e}(),r.HeartbeatResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.Time=$util.Long?$util.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.Time!=null&&Object.hasOwnProperty.call(t,"Time")&&n.uint32(8).int64(t.Time),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.HeartbeatResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.Time=t.int64();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Time!=null&&t.hasOwnProperty("Time")&&!$util.isInteger(t.Time)&&!(t.Time&&$util.isInteger(t.Time.low)&&$util.isInteger(t.Time.high))?"Time: integer|Long expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.HeartbeatResponse)return t;let n=new $root.rov_action_api.HeartbeatResponse;return t.Time!=null&&($util.Long?(n.Time=$util.Long.fromValue(t.Time)).unsigned=!1:typeof t.Time=="string"?n.Time=parseInt(t.Time,10):typeof t.Time=="number"?n.Time=t.Time:typeof t.Time=="object"&&(n.Time=new $util.LongBits(t.Time.low>>>0,t.Time.high>>>0).toNumber())),n},e.toObject=function(t,n){n||(n={});let s={};if(n.defaults)if($util.Long){let c=new $util.Long(0,0,!1);s.Time=n.longs===String?c.toString():n.longs===Number?c.toNumber():c}else s.Time=n.longs===String?"0":0;return t.Time!=null&&t.hasOwnProperty("Time")&&(typeof t.Time=="number"?s.Time=n.longs===String?String(t.Time):t.Time:s.Time=n.longs===String?$util.Long.prototype.toString.call(t.Time):n.longs===Number?new $util.LongBits(t.Time.low>>>0,t.Time.high>>>0).toNumber():t.Time),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.HeartbeatResponse"},e}(),r.ContinuedOutputResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.Message="",e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.Message!=null&&Object.hasOwnProperty.call(t,"Message")&&n.uint32(10).string(t.Message),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.ContinuedOutputResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.Message=t.string();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Message!=null&&t.hasOwnProperty("Message")&&!$util.isString(t.Message)?"Message: string expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.ContinuedOutputResponse)return t;let n=new $root.rov_action_api.ContinuedOutputResponse;return t.Message!=null&&(n.Message=String(t.Message)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(s.Message=""),t.Message!=null&&t.hasOwnProperty("Message")&&(s.Message=t.Message),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ContinuedOutputResponse"},e}(),r.MavlinkResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.Message=$util.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.Message!=null&&Object.hasOwnProperty.call(t,"Message")&&n.uint32(10).bytes(t.Message),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.MavlinkResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.Message=t.bytes();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Message!=null&&t.hasOwnProperty("Message")&&!(t.Message&&typeof t.Message.length=="number"||$util.isString(t.Message))?"Message: buffer expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.MavlinkResponse)return t;let n=new $root.rov_action_api.MavlinkResponse;return t.Message!=null&&(typeof t.Message=="string"?$util.base64.decode(t.Message,n.Message=$util.newBuffer($util.base64.length(t.Message)),0):t.Message.length>=0&&(n.Message=t.Message)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(n.bytes===String?s.Message="":(s.Message=[],n.bytes!==Array&&(s.Message=$util.newBuffer(s.Message)))),t.Message!=null&&t.hasOwnProperty("Message")&&(s.Message=n.bytes===String?$util.base64.encode(t.Message,0,t.Message.length):n.bytes===Array?Array.prototype.slice.call(t.Message):t.Message),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.MavlinkResponse"},e}(),r.SimplepeerSignalResponse=function(){function e(a){if(a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.Message=$util.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(t,n){return n||(n=$Writer.create()),t.Message!=null&&Object.hasOwnProperty.call(t,"Message")&&n.uint32(10).bytes(t.Message),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.SimplepeerSignalResponse;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.Message=t.bytes();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){return typeof t!="object"||t===null?"object expected":t.Message!=null&&t.hasOwnProperty("Message")&&!(t.Message&&typeof t.Message.length=="number"||$util.isString(t.Message))?"Message: buffer expected":null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.SimplepeerSignalResponse)return t;let n=new $root.rov_action_api.SimplepeerSignalResponse;return t.Message!=null&&(typeof t.Message=="string"?$util.base64.decode(t.Message,n.Message=$util.newBuffer($util.base64.length(t.Message)),0):t.Message.length>=0&&(n.Message=t.Message)),n},e.toObject=function(t,n){n||(n={});let s={};return n.defaults&&(n.bytes===String?s.Message="":(s.Message=[],n.bytes!==Array&&(s.Message=$util.newBuffer(s.Message)))),t.Message!=null&&t.hasOwnProperty("Message")&&(s.Message=n.bytes===String?$util.base64.encode(t.Message,0,t.Message.length):n.bytes===Array?Array.prototype.slice.call(t.Message):t.Message),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.SimplepeerSignalResponse"},e}(),r.ResponseBackendMetadata=function(){function e(a){if(this.TargetUserIDs=[],a)for(let t=Object.keys(a),n=0;n<t.length;++n)a[t[n]]!=null&&(this[t[n]]=a[t[n]])}return e.prototype.TargetUserIDs=$util.emptyArray,e.prototype.TransportMethod=1,e.create=function(t){return new e(t)},e.encode=function(t,n){if(n||(n=$Writer.create()),t.TargetUserIDs!=null&&t.TargetUserIDs.length)for(let s=0;s<t.TargetUserIDs.length;++s)n.uint32(10).string(t.TargetUserIDs[s]);return t.TransportMethod!=null&&Object.hasOwnProperty.call(t,"TransportMethod")&&n.uint32(16).int32(t.TransportMethod),n},e.encodeDelimited=function(t,n){return this.encode(t,n).ldelim()},e.decode=function(t,n){t instanceof $Reader||(t=$Reader.create(t));let s=n===void 0?t.len:t.pos+n,c=new $root.rov_action_api.ResponseBackendMetadata;for(;t.pos<s;){let d=t.uint32();switch(d>>>3){case 1:{c.TargetUserIDs&&c.TargetUserIDs.length||(c.TargetUserIDs=[]),c.TargetUserIDs.push(t.string());break}case 2:{c.TransportMethod=t.int32();break}default:t.skipType(d&7);break}}return c},e.decodeDelimited=function(t){return t instanceof $Reader||(t=new $Reader(t)),this.decode(t,t.uint32())},e.verify=function(t){if(typeof t!="object"||t===null)return"object expected";if(t.TargetUserIDs!=null&&t.hasOwnProperty("TargetUserIDs")){if(!Array.isArray(t.TargetUserIDs))return"TargetUserIDs: array expected";for(let n=0;n<t.TargetUserIDs.length;++n)if(!$util.isString(t.TargetUserIDs[n]))return"TargetUserIDs: string[] expected"}if(t.TransportMethod!=null&&t.hasOwnProperty("TransportMethod"))switch(t.TransportMethod){default:return"TransportMethod: enum value expected";case 1:case 2:case 3:case 4:break}return null},e.fromObject=function(t){if(t instanceof $root.rov_action_api.ResponseBackendMetadata)return t;let n=new $root.rov_action_api.ResponseBackendMetadata;if(t.TargetUserIDs){if(!Array.isArray(t.TargetUserIDs))throw TypeError(".rov_action_api.ResponseBackendMetadata.TargetUserIDs: array expected");n.TargetUserIDs=[];for(let s=0;s<t.TargetUserIDs.length;++s)n.TargetUserIDs[s]=String(t.TargetUserIDs[s])}switch(t.TransportMethod){default:if(typeof t.TransportMethod=="number"){n.TransportMethod=t.TransportMethod;break}break;case"LivekitReliable":case 1:n.TransportMethod=1;break;case"LivekitUnreliable":case 2:n.TransportMethod=2;break;case"DirectReliable":case 3:n.TransportMethod=3;break;case"DirectUnreliable":case 4:n.TransportMethod=4;break}return n},e.toObject=function(t,n){n||(n={});let s={};if((n.arrays||n.defaults)&&(s.TargetUserIDs=[]),n.defaults&&(s.TransportMethod=n.enums===String?"LivekitReliable":1),t.TargetUserIDs&&t.TargetUserIDs.length){s.TargetUserIDs=[];for(let c=0;c<t.TargetUserIDs.length;++c)s.TargetUserIDs[c]=t.TargetUserIDs[c]}return t.TransportMethod!=null&&t.hasOwnProperty("TransportMethod")&&(s.TransportMethod=n.enums===String?$root.rov_action_api.DataTransportMethod[t.TransportMethod]===void 0?t.TransportMethod:$root.rov_action_api.DataTransportMethod[t.TransportMethod]:t.TransportMethod),s},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(t){return t===void 0&&(t="type.googleapis.com"),t+"/rov_action_api.ResponseBackendMetadata"},e}(),r.RovResponse=function(){function e(t){if(t)for(let n=Object.keys(t),s=0;s<n.length;++s)t[n[s]]!=null&&(this[n[s]]=t[n[s]])}e.prototype.BackendMetadata=null,e.prototype.RovExchangeId=0,e.prototype.Done=null,e.prototype.Error=null,e.prototype.Pong=null,e.prototype.ContinuedOutput=null,e.prototype.SensorUpdates=null,e.prototype.PasswordRequired=null,e.prototype.PasswordAccepted=null,e.prototype.PasswordInvalid=null,e.prototype.DriverChanged=null,e.prototype.ClientConnected=null,e.prototype.ClientDisconnected=null,e.prototype.Heartbeat=null,e.prototype.Mavlink=null,e.prototype.SimplepeerSignal=null;let a;return Object.defineProperty(e.prototype,"_BackendMetadata",{get:$util.oneOfGetter(a=["BackendMetadata"]),set:$util.oneOfSetter(a)}),Object.defineProperty(e.prototype,"Body",{get:$util.oneOfGetter(a=["Done","Error","Pong","ContinuedOutput","SensorUpdates","PasswordRequired","PasswordAccepted","PasswordInvalid","DriverChanged","ClientConnected","ClientDisconnected","Heartbeat","Mavlink","SimplepeerSignal"]),set:$util.oneOfSetter(a)}),e.create=function(n){return new e(n)},e.encode=function(n,s){return s||(s=$Writer.create()),n.BackendMetadata!=null&&Object.hasOwnProperty.call(n,"BackendMetadata")&&$root.rov_action_api.ResponseBackendMetadata.encode(n.BackendMetadata,s.uint32(10).fork()).ldelim(),n.RovExchangeId!=null&&Object.hasOwnProperty.call(n,"RovExchangeId")&&s.uint32(16).int32(n.RovExchangeId),n.Done!=null&&Object.hasOwnProperty.call(n,"Done")&&$root.rov_action_api.DoneResponse.encode(n.Done,s.uint32(26).fork()).ldelim(),n.Error!=null&&Object.hasOwnProperty.call(n,"Error")&&$root.rov_action_api.ErrorResponse.encode(n.Error,s.uint32(34).fork()).ldelim(),n.Pong!=null&&Object.hasOwnProperty.call(n,"Pong")&&$root.rov_action_api.PongResponse.encode(n.Pong,s.uint32(42).fork()).ldelim(),n.ContinuedOutput!=null&&Object.hasOwnProperty.call(n,"ContinuedOutput")&&$root.rov_action_api.ContinuedOutputResponse.encode(n.ContinuedOutput,s.uint32(50).fork()).ldelim(),n.SensorUpdates!=null&&Object.hasOwnProperty.call(n,"SensorUpdates")&&$root.rov_action_api.SensorUpdatesResponse.encode(n.SensorUpdates,s.uint32(58).fork()).ldelim(),n.PasswordRequired!=null&&Object.hasOwnProperty.call(n,"PasswordRequired")&&$root.rov_action_api.PasswordRequiredResponse.encode(n.PasswordRequired,s.uint32(66).fork()).ldelim(),n.PasswordAccepted!=null&&Object.hasOwnProperty.call(n,"PasswordAccepted")&&$root.rov_action_api.PasswordAcceptedResponse.encode(n.PasswordAccepted,s.uint32(74).fork()).ldelim(),n.PasswordInvalid!=null&&Object.hasOwnProperty.call(n,"PasswordInvalid")&&$root.rov_action_api.PasswordInvalidResponse.encode(n.PasswordInvalid,s.uint32(82).fork()).ldelim(),n.DriverChanged!=null&&Object.hasOwnProperty.call(n,"DriverChanged")&&$root.rov_action_api.DriverChangedResponse.encode(n.DriverChanged,s.uint32(106).fork()).ldelim(),n.ClientConnected!=null&&Object.hasOwnProperty.call(n,"ClientConnected")&&$root.rov_action_api.ClientConnectedResponse.encode(n.ClientConnected,s.uint32(114).fork()).ldelim(),n.ClientDisconnected!=null&&Object.hasOwnProperty.call(n,"ClientDisconnected")&&$root.rov_action_api.ClientDisconnectedResponse.encode(n.ClientDisconnected,s.uint32(122).fork()).ldelim(),n.Heartbeat!=null&&Object.hasOwnProperty.call(n,"Heartbeat")&&$root.rov_action_api.HeartbeatResponse.encode(n.Heartbeat,s.uint32(130).fork()).ldelim(),n.Mavlink!=null&&Object.hasOwnProperty.call(n,"Mavlink")&&$root.rov_action_api.MavlinkResponse.encode(n.Mavlink,s.uint32(138).fork()).ldelim(),n.SimplepeerSignal!=null&&Object.hasOwnProperty.call(n,"SimplepeerSignal")&&$root.rov_action_api.SimplepeerSignalResponse.encode(n.SimplepeerSignal,s.uint32(146).fork()).ldelim(),s},e.encodeDelimited=function(n,s){return this.encode(n,s).ldelim()},e.decode=function(n,s){n instanceof $Reader||(n=$Reader.create(n));let c=s===void 0?n.len:n.pos+s,d=new $root.rov_action_api.RovResponse;for(;n.pos<c;){let u=n.uint32();switch(u>>>3){case 1:{d.BackendMetadata=$root.rov_action_api.ResponseBackendMetadata.decode(n,n.uint32());break}case 2:{d.RovExchangeId=n.int32();break}case 3:{d.Done=$root.rov_action_api.DoneResponse.decode(n,n.uint32());break}case 4:{d.Error=$root.rov_action_api.ErrorResponse.decode(n,n.uint32());break}case 5:{d.Pong=$root.rov_action_api.PongResponse.decode(n,n.uint32());break}case 6:{d.ContinuedOutput=$root.rov_action_api.ContinuedOutputResponse.decode(n,n.uint32());break}case 7:{d.SensorUpdates=$root.rov_action_api.SensorUpdatesResponse.decode(n,n.uint32());break}case 8:{d.PasswordRequired=$root.rov_action_api.PasswordRequiredResponse.decode(n,n.uint32());break}case 9:{d.PasswordAccepted=$root.rov_action_api.PasswordAcceptedResponse.decode(n,n.uint32());break}case 10:{d.PasswordInvalid=$root.rov_action_api.PasswordInvalidResponse.decode(n,n.uint32());break}case 13:{d.DriverChanged=$root.rov_action_api.DriverChangedResponse.decode(n,n.uint32());break}case 14:{d.ClientConnected=$root.rov_action_api.ClientConnectedResponse.decode(n,n.uint32());break}case 15:{d.ClientDisconnected=$root.rov_action_api.ClientDisconnectedResponse.decode(n,n.uint32());break}case 16:{d.Heartbeat=$root.rov_action_api.HeartbeatResponse.decode(n,n.uint32());break}case 17:{d.Mavlink=$root.rov_action_api.MavlinkResponse.decode(n,n.uint32());break}case 18:{d.SimplepeerSignal=$root.rov_action_api.SimplepeerSignalResponse.decode(n,n.uint32());break}default:n.skipType(u&7);break}}return d},e.decodeDelimited=function(n){return n instanceof $Reader||(n=new $Reader(n)),this.decode(n,n.uint32())},e.verify=function(n){if(typeof n!="object"||n===null)return"object expected";let s={};if(n.BackendMetadata!=null&&n.hasOwnProperty("BackendMetadata")){s._BackendMetadata=1;{let c=$root.rov_action_api.ResponseBackendMetadata.verify(n.BackendMetadata);if(c)return"BackendMetadata."+c}}if(n.RovExchangeId!=null&&n.hasOwnProperty("RovExchangeId")&&!$util.isInteger(n.RovExchangeId))return"RovExchangeId: integer expected";if(n.Done!=null&&n.hasOwnProperty("Done")){s.Body=1;{let c=$root.rov_action_api.DoneResponse.verify(n.Done);if(c)return"Done."+c}}if(n.Error!=null&&n.hasOwnProperty("Error")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.ErrorResponse.verify(n.Error);if(c)return"Error."+c}}if(n.Pong!=null&&n.hasOwnProperty("Pong")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.PongResponse.verify(n.Pong);if(c)return"Pong."+c}}if(n.ContinuedOutput!=null&&n.hasOwnProperty("ContinuedOutput")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.ContinuedOutputResponse.verify(n.ContinuedOutput);if(c)return"ContinuedOutput."+c}}if(n.SensorUpdates!=null&&n.hasOwnProperty("SensorUpdates")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.SensorUpdatesResponse.verify(n.SensorUpdates);if(c)return"SensorUpdates."+c}}if(n.PasswordRequired!=null&&n.hasOwnProperty("PasswordRequired")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.PasswordRequiredResponse.verify(n.PasswordRequired);if(c)return"PasswordRequired."+c}}if(n.PasswordAccepted!=null&&n.hasOwnProperty("PasswordAccepted")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.PasswordAcceptedResponse.verify(n.PasswordAccepted);if(c)return"PasswordAccepted."+c}}if(n.PasswordInvalid!=null&&n.hasOwnProperty("PasswordInvalid")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.PasswordInvalidResponse.verify(n.PasswordInvalid);if(c)return"PasswordInvalid."+c}}if(n.DriverChanged!=null&&n.hasOwnProperty("DriverChanged")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.DriverChangedResponse.verify(n.DriverChanged);if(c)return"DriverChanged."+c}}if(n.ClientConnected!=null&&n.hasOwnProperty("ClientConnected")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.ClientConnectedResponse.verify(n.ClientConnected);if(c)return"ClientConnected."+c}}if(n.ClientDisconnected!=null&&n.hasOwnProperty("ClientDisconnected")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.ClientDisconnectedResponse.verify(n.ClientDisconnected);if(c)return"ClientDisconnected."+c}}if(n.Heartbeat!=null&&n.hasOwnProperty("Heartbeat")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.HeartbeatResponse.verify(n.Heartbeat);if(c)return"Heartbeat."+c}}if(n.Mavlink!=null&&n.hasOwnProperty("Mavlink")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.MavlinkResponse.verify(n.Mavlink);if(c)return"Mavlink."+c}}if(n.SimplepeerSignal!=null&&n.hasOwnProperty("SimplepeerSignal")){if(s.Body===1)return"Body: multiple values";s.Body=1;{let c=$root.rov_action_api.SimplepeerSignalResponse.verify(n.SimplepeerSignal);if(c)return"SimplepeerSignal."+c}}return null},e.fromObject=function(n){if(n instanceof $root.rov_action_api.RovResponse)return n;let s=new $root.rov_action_api.RovResponse;if(n.BackendMetadata!=null){if(typeof n.BackendMetadata!="object")throw TypeError(".rov_action_api.RovResponse.BackendMetadata: object expected");s.BackendMetadata=$root.rov_action_api.ResponseBackendMetadata.fromObject(n.BackendMetadata)}if(n.RovExchangeId!=null&&(s.RovExchangeId=n.RovExchangeId|0),n.Done!=null){if(typeof n.Done!="object")throw TypeError(".rov_action_api.RovResponse.Done: object expected");s.Done=$root.rov_action_api.DoneResponse.fromObject(n.Done)}if(n.Error!=null){if(typeof n.Error!="object")throw TypeError(".rov_action_api.RovResponse.Error: object expected");s.Error=$root.rov_action_api.ErrorResponse.fromObject(n.Error)}if(n.Pong!=null){if(typeof n.Pong!="object")throw TypeError(".rov_action_api.RovResponse.Pong: object expected");s.Pong=$root.rov_action_api.PongResponse.fromObject(n.Pong)}if(n.ContinuedOutput!=null){if(typeof n.ContinuedOutput!="object")throw TypeError(".rov_action_api.RovResponse.ContinuedOutput: object expected");s.ContinuedOutput=$root.rov_action_api.ContinuedOutputResponse.fromObject(n.ContinuedOutput)}if(n.SensorUpdates!=null){if(typeof n.SensorUpdates!="object")throw TypeError(".rov_action_api.RovResponse.SensorUpdates: object expected");s.SensorUpdates=$root.rov_action_api.SensorUpdatesResponse.fromObject(n.SensorUpdates)}if(n.PasswordRequired!=null){if(typeof n.PasswordRequired!="object")throw TypeError(".rov_action_api.RovResponse.PasswordRequired: object expected");s.PasswordRequired=$root.rov_action_api.PasswordRequiredResponse.fromObject(n.PasswordRequired)}if(n.PasswordAccepted!=null){if(typeof n.PasswordAccepted!="object")throw TypeError(".rov_action_api.RovResponse.PasswordAccepted: object expected");s.PasswordAccepted=$root.rov_action_api.PasswordAcceptedResponse.fromObject(n.PasswordAccepted)}if(n.PasswordInvalid!=null){if(typeof n.PasswordInvalid!="object")throw TypeError(".rov_action_api.RovResponse.PasswordInvalid: object expected");s.PasswordInvalid=$root.rov_action_api.PasswordInvalidResponse.fromObject(n.PasswordInvalid)}if(n.DriverChanged!=null){if(typeof n.DriverChanged!="object")throw TypeError(".rov_action_api.RovResponse.DriverChanged: object expected");s.DriverChanged=$root.rov_action_api.DriverChangedResponse.fromObject(n.DriverChanged)}if(n.ClientConnected!=null){if(typeof n.ClientConnected!="object")throw TypeError(".rov_action_api.RovResponse.ClientConnected: object expected");s.ClientConnected=$root.rov_action_api.ClientConnectedResponse.fromObject(n.ClientConnected)}if(n.ClientDisconnected!=null){if(typeof n.ClientDisconnected!="object")throw TypeError(".rov_action_api.RovResponse.ClientDisconnected: object expected");s.ClientDisconnected=$root.rov_action_api.ClientDisconnectedResponse.fromObject(n.ClientDisconnected)}if(n.Heartbeat!=null){if(typeof n.Heartbeat!="object")throw TypeError(".rov_action_api.RovResponse.Heartbeat: object expected");s.Heartbeat=$root.rov_action_api.HeartbeatResponse.fromObject(n.Heartbeat)}if(n.Mavlink!=null){if(typeof n.Mavlink!="object")throw TypeError(".rov_action_api.RovResponse.Mavlink: object expected");s.Mavlink=$root.rov_action_api.MavlinkResponse.fromObject(n.Mavlink)}if(n.SimplepeerSignal!=null){if(typeof n.SimplepeerSignal!="object")throw TypeError(".rov_action_api.RovResponse.SimplepeerSignal: object expected");s.SimplepeerSignal=$root.rov_action_api.SimplepeerSignalResponse.fromObject(n.SimplepeerSignal)}return s},e.toObject=function(n,s){s||(s={});let c={};return s.defaults&&(c.RovExchangeId=0),n.BackendMetadata!=null&&n.hasOwnProperty("BackendMetadata")&&(c.BackendMetadata=$root.rov_action_api.ResponseBackendMetadata.toObject(n.BackendMetadata,s),s.oneofs&&(c._BackendMetadata="BackendMetadata")),n.RovExchangeId!=null&&n.hasOwnProperty("RovExchangeId")&&(c.RovExchangeId=n.RovExchangeId),n.Done!=null&&n.hasOwnProperty("Done")&&(c.Done=$root.rov_action_api.DoneResponse.toObject(n.Done,s),s.oneofs&&(c.Body="Done")),n.Error!=null&&n.hasOwnProperty("Error")&&(c.Error=$root.rov_action_api.ErrorResponse.toObject(n.Error,s),s.oneofs&&(c.Body="Error")),n.Pong!=null&&n.hasOwnProperty("Pong")&&(c.Pong=$root.rov_action_api.PongResponse.toObject(n.Pong,s),s.oneofs&&(c.Body="Pong")),n.ContinuedOutput!=null&&n.hasOwnProperty("ContinuedOutput")&&(c.ContinuedOutput=$root.rov_action_api.ContinuedOutputResponse.toObject(n.ContinuedOutput,s),s.oneofs&&(c.Body="ContinuedOutput")),n.SensorUpdates!=null&&n.hasOwnProperty("SensorUpdates")&&(c.SensorUpdates=$root.rov_action_api.SensorUpdatesResponse.toObject(n.SensorUpdates,s),s.oneofs&&(c.Body="SensorUpdates")),n.PasswordRequired!=null&&n.hasOwnProperty("PasswordRequired")&&(c.PasswordRequired=$root.rov_action_api.PasswordRequiredResponse.toObject(n.PasswordRequired,s),s.oneofs&&(c.Body="PasswordRequired")),n.PasswordAccepted!=null&&n.hasOwnProperty("PasswordAccepted")&&(c.PasswordAccepted=$root.rov_action_api.PasswordAcceptedResponse.toObject(n.PasswordAccepted,s),s.oneofs&&(c.Body="PasswordAccepted")),n.PasswordInvalid!=null&&n.hasOwnProperty("PasswordInvalid")&&(c.PasswordInvalid=$root.rov_action_api.PasswordInvalidResponse.toObject(n.PasswordInvalid,s),s.oneofs&&(c.Body="PasswordInvalid")),n.DriverChanged!=null&&n.hasOwnProperty("DriverChanged")&&(c.DriverChanged=$root.rov_action_api.DriverChangedResponse.toObject(n.DriverChanged,s),s.oneofs&&(c.Body="DriverChanged")),n.ClientConnected!=null&&n.hasOwnProperty("ClientConnected")&&(c.ClientConnected=$root.rov_action_api.ClientConnectedResponse.toObject(n.ClientConnected,s),s.oneofs&&(c.Body="ClientConnected")),n.ClientDisconnected!=null&&n.hasOwnProperty("ClientDisconnected")&&(c.ClientDisconnected=$root.rov_action_api.ClientDisconnectedResponse.toObject(n.ClientDisconnected,s),s.oneofs&&(c.Body="ClientDisconnected")),n.Heartbeat!=null&&n.hasOwnProperty("Heartbeat")&&(c.Heartbeat=$root.rov_action_api.HeartbeatResponse.toObject(n.Heartbeat,s),s.oneofs&&(c.Body="Heartbeat")),n.Mavlink!=null&&n.hasOwnProperty("Mavlink")&&(c.Mavlink=$root.rov_action_api.MavlinkResponse.toObject(n.Mavlink,s),s.oneofs&&(c.Body="Mavlink")),n.SimplepeerSignal!=null&&n.hasOwnProperty("SimplepeerSignal")&&(c.SimplepeerSignal=$root.rov_action_api.SimplepeerSignalResponse.toObject(n.SimplepeerSignal,s),s.oneofs&&(c.Body="SimplepeerSignal")),c},e.prototype.toJSON=function(){return this.constructor.toObject(this,minimal.util.toJSONOptions)},e.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/rov_action_api.RovResponse"},e}(),r})(),networkLatencyMs=nStore(0),depthM=nStore(0),waterTempC=nStore(0),internalTempC=nStore(0),pressureMbar=nStore(0),rovHeading=nStore(0),rovPitch=nStore(0),rovRoll=nStore(0),SEA_LEVEL_PRESSURE=1013.25;function updateSensorValues(r){for(let e of r)e.MeasurementType==rov_action_api.SensorMeasurmentTypes.pressure_mbar?(pressureMbar.set(e.Value),depthM.set((e.Value-SEA_LEVEL_PRESSURE)*.009962143853)):e.MeasurementType==rov_action_api.SensorMeasurmentTypes.water_temp_celsius?waterTempC.set(e.Value):e.MeasurementType==rov_action_api.SensorMeasurmentTypes.internal_temp_celsius?internalTempC.set(e.Value):e.MeasurementType==rov_action_api.SensorMeasurmentTypes.yaw_degrees?rovHeading.set(e.Value):e.MeasurementType==rov_action_api.SensorMeasurmentTypes.pitch_degrees?rovPitch.set(e.Value):e.MeasurementType==rov_action_api.SensorMeasurmentTypes.roll_degrees&&rovRoll.set(e.Value)}let lastTimeRecvdPong=NaN;class RovMsgHandlerClass{constructor(){H(this,"replyContinuityCallbacks",[]);H(this,"sendMessageCallback");H(this,"setSendMessageCallback",e=>{this.sendMessageCallback=e})}handleRecivedMessage(e){let a=new Uint8Array(e);if(!a||a.length===0)return;console.log("GOT DC DATA:",a);const t=rov_action_api.RovResponse.decode(new Uint8Array(e));if(debugPageModeActive.get()&&showToastMessage(JSON.stringify(t.toJSON()),800),this.runExchangeCallback(t.RovExchangeId,t),t.Done)return this.handleDoneMsgRecived(t.RovExchangeId,t.Done);if(t.Error)return this.handleErrorMsgRecived(t.RovExchangeId,t.Error);if(t.Pong)return this.handlePongMsgRecived(t.RovExchangeId,t.Pong);if(t.ContinuedOutput)return this.handleContinuedOutputMsgRecived(t.RovExchangeId,t.ContinuedOutput);if(t.SensorUpdates)return this.handleSensorUpdatesMsgRecived(t.RovExchangeId,t.SensorUpdates);if(t.PasswordRequired)return this.handlePasswordRequiredMsgRecived(t.RovExchangeId,t.PasswordRequired);if(t.PasswordAccepted)return this.handlePasswordAcceptedMsgRecived(t.RovExchangeId,t.PasswordAccepted);if(t.PasswordInvalid)return this.handlePasswordInvalidMsgRecived(t.RovExchangeId,t.PasswordInvalid);if(t.DriverChanged)return this.handleDriverChangedMsgRecived(t.RovExchangeId,t.DriverChanged);if(t.ClientConnected)return this.handleClientConnectedMsgRecived(t.RovExchangeId,t.ClientConnected);if(t.ClientDisconnected)return this.handleClientDisconnectedMsgRecived(t.RovExchangeId,t.ClientDisconnected);t.SimplepeerSignal}handleDoneMsgRecived(e,a){console.log("Done: ",a)}handleErrorMsgRecived(e,a){console.warn("ROV Error: ",a),showToastMessage("ROV Error: "+a.Message,2e3,null)}handlePongMsgRecived(e,a){lastTimeRecvdPong=Date.now();const t=lastTimeRecvdPong-Number.parseFloat(a.Time);networkLatencyMs.set(t)}handleContinuedOutputMsgRecived(e,a){console.log("ContinuedOutput: ",e,a)}handleSensorUpdatesMsgRecived(e,a){updateSensorValues(a.MeasurementUpdates)}handlePasswordRequiredMsgRecived(e,a){console.log("PasswordRequired for rovId:",a.RovId),showPasswordPrompt("Enter Driver Password",t=>{t?this.sendRovMessage({PasswordAttempt:{Password:t},RovExchangeId:e},null):delete this.replyContinuityCallbacks[e]})}handlePasswordAcceptedMsgRecived(e,a){showToastMessage("Password Accepted",1e3,null),console.log("TODO: Got AuthToken:",a.AuthToken)}handlePasswordInvalidMsgRecived(e,a){showToastMessage("Wrong Password",1e3,null),this.handlePasswordRequiredMsgRecived(e,a)}handleDriverChangedMsgRecived(e,a){console.info("Driver Changed: ",a);let t=connectionManager.getThisPeerId();a.DriverPeerId==t?(showToastMessage("You are now the driver"),isRovDriver.set(!0)):(showToastMessage("ROV Driver is now "+a.DriverPeerId),isRovDriver.set(!1))}handleClientConnectedMsgRecived(e,a){showToastMessage(a.ClientPeerId+" Connected to ROV",1500,null)}handleClientDisconnectedMsgRecived(e,a){showToastMessage(a.ClientPeerId+" Disconnected from ROV",1500,null)}sendRovMessage(e,a=null){!e.RovExchangeId&&a&&(e.RovExchangeId=this.replyContinuityCallbacks.length+1),this.replyContinuityCallbacks[e.RovExchangeId]||(this.replyContinuityCallbacks[e.RovExchangeId]={callback:a,originalMsgData:e}),console.info("Sending RovMessage: ",e);const t=rov_action_api.RovAction.encode(e).finish();this.sendMessageCallback(t)}resendMessage(e){const a=this.replyContinuityCallbacks[e];a&&a.originalMsgData?(console.info("Resending message: ",a.originalMsgData),this.sendRovMessage(a.originalMsgData,a.callback)):console.info("No message to resend for rovExchangeId: ",e)}runExchangeCallback(e,a){const t=this.replyContinuityCallbacks[e];t&&(t.callback&&t.callback(a),(a.Done||a.Error)&&delete this.replyContinuityCallbacks[e])}}const rovMessageHandler=new RovMsgHandlerClass;class RovActionsClass{constructor(e){H(this,"pingLoopIntervalId",null);H(this,"lastMove",{VelocityX:0,VelocityY:0,VelocityZ:0,AngularVelocityYaw:0});H(this,"rovMsgHandler",null);H(this,"shutdownRov",()=>{showConfirmationMsg("Are you sure you want to shutdown the ROV?",e=>{showToastMessage("Sending Shutdown Request..."),this.sendActionAndWaitForDone({ShutdownRov:{}},a=>{a.Error?showToastMessage("ROV Shutdown Error: "+a.Error.Message):a.Done&&(showToastMessage("Please wait 20 seconds before unplugging"),showToastMessage("ROV: "+a.Done.Message),this.disconnectFromRov())})})});H(this,"rebootRov",()=>{showConfirmationMsg("Are you sure you want to reboot the ROV?",e=>{showToastMessage("Sending Reboot Request..."),this.sendActionAndWaitForDone({RebootRov:{}},a=>{a.Error?showToastMessage("ROV Reboot Error: "+a.Error.Message):a.Done&&(showToastMessage("Press Connect again in about 30 seconds"),showToastMessage("ROV: "+a.Done.Message),this.disconnectFromRov())})})});H(this,"restartRovServices",()=>{showConfirmationMsg("Are you sure you want to restart services? - The ROV will stop responding for about a minute and then you can re-connect.",()=>{let e=this.showCommandOutputPopup("Restarting ROV Services",`Sending Service Restart Request (Please Wait)...
`,`

Done.`);this.rovMsgHandler.sendRovMessage({RestartRovServices:{}},e)})});H(this,"getRovStatusReport",()=>{let e=this.showCommandOutputPopup("ROV Status Report",`Sending Status Request (Please Wait)...
`,`

Done.`);this.rovMsgHandler.sendRovMessage({RovStatusReport:{}},e)});H(this,"getRovLogs",()=>{let e=this.showCommandOutputPopup("ROV Logs",`Sending Request (Please Wait)...
`,`

Done.`);this.rovMsgHandler.sendRovMessage({RovLogs:{}},e)});H(this,"enableRovWifi",()=>{showToastMessage("Sending Enable Wifi Command..."),this.sendActionAndWaitForDone({EnableWifi:{}},e=>{e.Error?showToastMessage("Enable Wifi Error: "+e.Error.Message):e.Done&&showToastMessage("Wifi Enable: "+e.Done.Message)})});H(this,"disableRovWifi",()=>{showConfirmationMsg("Are you sure you want to disable rov wifi? If the ROV is connected via wifi, don't do this!",()=>{showToastMessage("Sending Disable Wifi Command..."),this.sendActionAndWaitForDone({DisableWifi:{}},e=>{e.Error?showToastMessage("Disable Wifi Error: "+e.Error.Message):e.Done&&showToastMessage("Wifi Disable: "+e.Done.Message)})})});this.rovMsgHandler=e}sendActionAndWaitForDone(e,a){this.rovMsgHandler.sendRovMessage(e,t=>{a&&(t.Done||t.Error||t.ContinuedOutput)&&a(t)})}startPingLoop(){this.pingLoopIntervalId||(this.pingLoopIntervalId=setInterval(()=>{this.rovMsgHandler.sendRovMessage({Ping:{Time:Date.now()}},null)},3e3))}stopPingLoop(){clearInterval(this.pingLoopIntervalId),this.pingLoopIntervalId=null}showCommandOutputPopup(e,a,t){let n=showScrollableTextPopup(e,null);return n(a),s=>{s.ContinuedOutput?n(s.ContinuedOutput.Message+`
`):s.Done?n(s.Done.Message+`
`+t):s.Error&&n(s.Error.Message+`
`)}}connectToRov(){connectionManager.connectToCurrentTargetRov()}disconnectFromRov(){connectionManager.disconnectFromCurrentRov()}switchToNextRovPeerId(){rovPeerIdEndNumber.update(e=>(e++,localStorage.setItem("rovPeerIdEndNumber",e.toString()),e)),setCurrentRovName(),this.disconnectFromRov()}switchToPrevRovPeerId(){rovPeerIdEndNumber.update(e=>(e=Math.max(e-1,0),localStorage.setItem("rovPeerIdEndNumber",e.toString()),e)),setCurrentRovName(),this.disconnectFromRov()}takeControl(){this.rovMsgHandler.sendRovMessage({TakeControl:{}},null)}moveRov(e,a,t,n){if(e==this.lastMove.VelocityX&&a==this.lastMove.VelocityY&&t==this.lastMove.VelocityZ&&n==this.lastMove.AngularVelocityYaw)return;const s={VelocityX:e,VelocityY:a,VelocityZ:t,AngularVelocityYaw:n};this.rovMsgHandler.sendRovMessage({Move:s},null),this.lastMove=s}refreshAllSensorData(){this.rovMsgHandler.sendRovMessage({RefreshAllSensors:{}},null)}toggleLights(){this.rovMsgHandler.sendRovMessage({ToogleLights:{}},null)}}const RovActions=new RovActionsClass(rovMessageHandler);class ConnectionManagerClass{constructor(e){H(this,"ROVs",{});H(this,"currentTargetRovId",getROVName(rovPeerIdEndNumber.get()));H(this,"ourPeerMachines",[]);H(this,"overallPeerServerState",ConnectionState.disconnected);H(this,"reconnectFailureCount",0);H(this,"onMessageRecivedCallback",e=>{console.debug("msg recived:"+e)});this.onMessageRecivedCallback=e}start(){if(this.ourPeerMachines.length!==0)return;const e=new OurPeerMachine(this.peerConnStateChange.bind(this));this.ourPeerMachines=[e],e.start()}getThisPeerId(){return ourPeerId.get()}peerConnStateChange(){let e=this.ourPeerMachines.map(t=>t.currentState);console.debug("PeerStatesChange: ",e);let a=0;for(let t=0;t<e.length;t++)e[t]==ConnectionState.connected&&(a++,a>1?(this.ourPeerMachines[t].cleanup(),this.ourPeerMachines.splice(t,1)):this.connectToCurrentTargetRov(),this.reconnectFailureCount=0);if(a!=-1)if(console.debug("peer states:",e,a),a>0){if(this.overallPeerServerState==ConnectionState.connected)return;peerServerConnState.set(ConnectionState.connected)}else if(e.indexOf(ConnectionState.reconnecting)!=-1){if(this.overallPeerServerState==ConnectionState.reconnecting)return;peerServerConnState.set(ConnectionState.reconnecting)}else if(e.indexOf(ConnectionState.connecting)!=-1){if(this.overallPeerServerState==ConnectionState.connecting)return;peerServerConnState.set(ConnectionState.connecting)}else this.overallPeerServerState!=ConnectionState.disconnected&&peerServerConnState.set(ConnectionState.disconnected)}rovConnStateChange(e,a,t){t==this.currentTargetRovId&&(rovDataChannelConnState.set(e),rovVideoStreamConnState.set(a),e==ConnectionState.connected&&RovActions.refreshAllSensorData())}messageRecived(e,a){a===this.currentTargetRovId?this.onMessageRecivedCallback(e):console.warn("Message Recived from wrong ROV Peer "+a,e)}connectToRov(e){this.ROVs[e]||(this.ROVs[e]=new RovConnection(e,this.ourPeerMachines[0],this.messageRecived.bind(this),this.rovConnStateChange.bind(this))),this.ROVs[e].start()}connectToCurrentTargetRov(){this.currentTargetRovId=getROVName(rovPeerIdEndNumber.get()),this.connectToRov(this.currentTargetRovId)}disconnectFromRov(e){if(e==this.currentTargetRovId&&(rovDataChannelConnState.set(ConnectionState.disconnected),rovVideoStreamConnState.set(ConnectionState.disconnected)),this.ROVs[e]===void 0){console.warn("Tried to disconnect from a rov that is not connected: ",e);return}this.ROVs[e].close(),delete this.ROVs[e]}disconnectFromCurrentRov(){this.disconnectFromRov(this.currentTargetRovId)}sendMessageToRov(e,a,t=!1){this.ROVs[a].sendMessage(e,null,t)}sendMessageToCurrentRov(e,a=!1){this.sendMessageToRov(e,this.currentTargetRovId,a)}cleanup(){for(const e in this.ROVs)this.disconnectFromRov(e);for(const e of this.ourPeerMachines)e.cleanup();this.ourPeerMachines=[]}}const connectionManager=new ConnectionManagerClass(rovMessageHandler.handleRecivedMessage.bind(rovMessageHandler)),runSiteInitMachine=r=>{function e(n){t&&t.send(n)}const a=createMachine({context:{peerServerConfig:{},rovIpAddr:null},predictableActionArguments:!0,preserveActionOrder:!0,id:"siteInit",initial:"Checking_Internet_Access",states:{Checking_Internet_Access:{entry:"checkInternetAvailable",on:{URL_IS_ROV_IP:{actions:["setLocalPeerServerConfig","showHttpGamepadSupportDisabledAlert"],target:"#siteInit.Site_Ready"},INTERNET_AVAILABLE:{actions:"setCloudPeerServerConfig",target:"#siteInit.Site_Ready"},INTERNET_OFFLINE:{actions:["showIpScanButton","hideLoadingUi"],target:"#siteInit.Waiting_For_User_Scan_Button_Press"}}},Waiting_For_User_Scan_Button_Press:{entry:"setupWaitForUserScanButtonPress",on:{SCAN_BUTTON_CLICKED:{actions:["showIpScanningUi","hideIpScanButton"],target:"#siteInit.Scanning_For_ROV_IP"}}},Scanning_For_ROV_IP:{entry:"scanForRovIP",on:{ROV_IP_FOUND:{actions:"setRovIpAddr",target:"#siteInit.Redirect_Browser_To_ROV_IP"},IP_SCANNING_ERROR:{actions:["showIpScanButton","hideLoadingUi"],target:"#siteInit.Waiting_For_User_Scan_Button_Press"}}},Redirect_Browser_To_ROV_IP:{entry:"redirectBrowserToRovIp"},Site_Ready:{entry:"siteReady",type:"final"}}},{actions:{setCloudPeerServerConfig:()=>{peerServerConfig.set(peerServerCloudOptions)},setLocalPeerServerConfig:()=>{peerServerConfig.set(peerServerLocalOptions)},setRovIpAddr:(n,s)=>{rovIpAddr.set(s.data)},showIpScanButton:()=>{showToastMessage("Click scan to find the ROV locally."),showToastMessage("No internet connection.")},hideIpScanButton:()=>{},hideLoadingUi:()=>{hideLoadingUi(LOADING_MESSAGE.ipScan),hideLoadingUi(LOADING_MESSAGE.internetCheck)},showIpScanningUi:()=>{showLoadingUi(LOADING_MESSAGE.ipScan)},redirectBrowserToRovIp:(n,s)=>{window.location.href=`http://${s.data}`},siteReady:()=>{r("SITE_READY")},checkInternetAvailable:()=>{showLoadingUi(LOADING_MESSAGE.internetCheck);const n=peerServerCloudOptions;isInternetAvailable((n.secure?"https://":"http://")+n.host+":"+n.port).then(s=>{if(s)e("INTERNET_AVAILABLE");else{const c=window.location.host.split(".");c.length==4&&!isNaN(Number(c[3]))||c.length==2&&c[1]=="local"?e("URL_IS_ROV_IP"):e("INTERNET_OFFLINE")}})},setupWaitForUserScanButtonPress:()=>{const n=()=>{e("SCAN_BUTTON_CLICKED")},s=document.getElementById("scan_for_ip_btn");return s.addEventListener("click",n),()=>{s.removeEventListener("click",n)}},scanForRovIP:()=>{showLoadingUi(LOADING_MESSAGE.ipScan)}},guards:{}}),t=interpret(a,{devTools:debugPageModeActive.get()}).start();return t};function get_each_context$2(r,e,a){const t=r.slice();return t[5]=e[a],t}function get_each_context_1(r,e,a){const t=r.slice();return t[5]=e[a],t}function get_each_context_2(r,e,a){const t=r.slice();return t[5]=e[a],t}function get_each_context_3(r,e,a){const t=r.slice();return t[5]=e[a],t}function get_each_context_4(r,e,a){const t=r.slice();return t[5]=e[a],t}function get_each_context_5(r,e,a){const t=r.slice();return t[5]=e[a],t}function create_each_block_5(r){let e,a=[r[5]],t={};for(let n=0;n<a.length;n+=1)t=assign$1(t,a[n]);return{c(){e=svg_element("path"),set_svg_attributes(e,t)},m(n,s){insert(n,e,s)},p(n,s){set_svg_attributes(e,t=get_spread_update(a,[s&2&&n[5]]))},d(n){n&&detach(e)}}}function create_each_block_4(r){let e,a=[r[5]],t={};for(let n=0;n<a.length;n+=1)t=assign$1(t,a[n]);return{c(){e=svg_element("rect"),set_svg_attributes(e,t)},m(n,s){insert(n,e,s)},p(n,s){set_svg_attributes(e,t=get_spread_update(a,[s&2&&n[5]]))},d(n){n&&detach(e)}}}function create_each_block_3(r){let e,a=[r[5]],t={};for(let n=0;n<a.length;n+=1)t=assign$1(t,a[n]);return{c(){e=svg_element("circle"),set_svg_attributes(e,t)},m(n,s){insert(n,e,s)},p(n,s){set_svg_attributes(e,t=get_spread_update(a,[s&2&&n[5]]))},d(n){n&&detach(e)}}}function create_each_block_2(r){let e,a=[r[5]],t={};for(let n=0;n<a.length;n+=1)t=assign$1(t,a[n]);return{c(){e=svg_element("polygon"),set_svg_attributes(e,t)},m(n,s){insert(n,e,s)},p(n,s){set_svg_attributes(e,t=get_spread_update(a,[s&2&&n[5]]))},d(n){n&&detach(e)}}}function create_each_block_1(r){let e,a=[r[5]],t={};for(let n=0;n<a.length;n+=1)t=assign$1(t,a[n]);return{c(){e=svg_element("polyline"),set_svg_attributes(e,t)},m(n,s){insert(n,e,s)},p(n,s){set_svg_attributes(e,t=get_spread_update(a,[s&2&&n[5]]))},d(n){n&&detach(e)}}}function create_each_block$2(r){let e,a=[r[5]],t={};for(let n=0;n<a.length;n+=1)t=assign$1(t,a[n]);return{c(){e=svg_element("line"),set_svg_attributes(e,t)},m(n,s){insert(n,e,s)},p(n,s){set_svg_attributes(e,t=get_spread_update(a,[s&2&&n[5]]))},d(n){n&&detach(e)}}}function create_fragment$7(r){var B,N,j,U,q,V,W;let e,a,t,n,s,c,d=((B=r[1])==null?void 0:B.path)??[],u=[];for(let x=0;x<d.length;x+=1)u[x]=create_each_block_5(get_each_context_5(r,d,x));let _=((N=r[1])==null?void 0:N.rect)??[],m=[];for(let x=0;x<_.length;x+=1)m[x]=create_each_block_4(get_each_context_4(r,_,x));let g=((j=r[1])==null?void 0:j.circle)??[],b=[];for(let x=0;x<g.length;x+=1)b[x]=create_each_block_3(get_each_context_3(r,g,x));let S=((U=r[1])==null?void 0:U.polygon)??[],C=[];for(let x=0;x<S.length;x+=1)C[x]=create_each_block_2(get_each_context_2(r,S,x));let k=((q=r[1])==null?void 0:q.polyline)??[],R=[];for(let x=0;x<k.length;x+=1)R[x]=create_each_block_1(get_each_context_1(r,k,x));let w=((V=r[1])==null?void 0:V.line)??[],$=[];for(let x=0;x<w.length;x+=1)$[x]=create_each_block$2(get_each_context$2(r,w,x));let P=[(W=r[1])==null?void 0:W.a,{xmlns:"http://www.w3.org/2000/svg"},{width:r[0]},{height:r[0]},r[2]],O={};for(let x=0;x<P.length;x+=1)O=assign$1(O,P[x]);return{c(){e=svg_element("svg");for(let x=0;x<u.length;x+=1)u[x].c();a=empty();for(let x=0;x<m.length;x+=1)m[x].c();t=empty();for(let x=0;x<b.length;x+=1)b[x].c();n=empty();for(let x=0;x<C.length;x+=1)C[x].c();s=empty();for(let x=0;x<R.length;x+=1)R[x].c();c=empty();for(let x=0;x<$.length;x+=1)$[x].c();set_svg_attributes(e,O)},m(x,J){insert(x,e,J);for(let X=0;X<u.length;X+=1)u[X]&&u[X].m(e,null);append(e,a);for(let X=0;X<m.length;X+=1)m[X]&&m[X].m(e,null);append(e,t);for(let X=0;X<b.length;X+=1)b[X]&&b[X].m(e,null);append(e,n);for(let X=0;X<C.length;X+=1)C[X]&&C[X].m(e,null);append(e,s);for(let X=0;X<R.length;X+=1)R[X]&&R[X].m(e,null);append(e,c);for(let X=0;X<$.length;X+=1)$[X]&&$[X].m(e,null)},p(x,[J]){var X,Z,ee,Q,z,K,ne;if(J&2){d=((X=x[1])==null?void 0:X.path)??[];let F;for(F=0;F<d.length;F+=1){const Y=get_each_context_5(x,d,F);u[F]?u[F].p(Y,J):(u[F]=create_each_block_5(Y),u[F].c(),u[F].m(e,a))}for(;F<u.length;F+=1)u[F].d(1);u.length=d.length}if(J&2){_=((Z=x[1])==null?void 0:Z.rect)??[];let F;for(F=0;F<_.length;F+=1){const Y=get_each_context_4(x,_,F);m[F]?m[F].p(Y,J):(m[F]=create_each_block_4(Y),m[F].c(),m[F].m(e,t))}for(;F<m.length;F+=1)m[F].d(1);m.length=_.length}if(J&2){g=((ee=x[1])==null?void 0:ee.circle)??[];let F;for(F=0;F<g.length;F+=1){const Y=get_each_context_3(x,g,F);b[F]?b[F].p(Y,J):(b[F]=create_each_block_3(Y),b[F].c(),b[F].m(e,n))}for(;F<b.length;F+=1)b[F].d(1);b.length=g.length}if(J&2){S=((Q=x[1])==null?void 0:Q.polygon)??[];let F;for(F=0;F<S.length;F+=1){const Y=get_each_context_2(x,S,F);C[F]?C[F].p(Y,J):(C[F]=create_each_block_2(Y),C[F].c(),C[F].m(e,s))}for(;F<C.length;F+=1)C[F].d(1);C.length=S.length}if(J&2){k=((z=x[1])==null?void 0:z.polyline)??[];let F;for(F=0;F<k.length;F+=1){const Y=get_each_context_1(x,k,F);R[F]?R[F].p(Y,J):(R[F]=create_each_block_1(Y),R[F].c(),R[F].m(e,c))}for(;F<R.length;F+=1)R[F].d(1);R.length=k.length}if(J&2){w=((K=x[1])==null?void 0:K.line)??[];let F;for(F=0;F<w.length;F+=1){const Y=get_each_context$2(x,w,F);$[F]?$[F].p(Y,J):($[F]=create_each_block$2(Y),$[F].c(),$[F].m(e,null))}for(;F<$.length;F+=1)$[F].d(1);$.length=w.length}set_svg_attributes(e,O=get_spread_update(P,[J&2&&((ne=x[1])==null?void 0:ne.a),{xmlns:"http://www.w3.org/2000/svg"},J&1&&{width:x[0]},J&1&&{height:x[0]},J&4&&x[2]]))},i:noop$1,o:noop$1,d(x){x&&detach(e),destroy_each(u,x),destroy_each(m,x),destroy_each(b,x),destroy_each(C,x),destroy_each(R,x),destroy_each($,x)}}}function instance$7(r,e,a){let t;const n=["src","size","theme"];let s=compute_rest_props(e,n),{src:c}=e,{size:d="100%"}=e,{theme:u="default"}=e;if(d!=="100%"&&d.slice(-1)!="x"&&d.slice(-1)!="m"&&d.slice(-1)!="%")try{d=parseInt(d)+"px"}catch{d="100%"}return r.$$set=_=>{e=assign$1(assign$1({},e),exclude_internal_props(_)),a(2,s=compute_rest_props(e,n)),"src"in _&&a(3,c=_.src),"size"in _&&a(0,d=_.size),"theme"in _&&a(4,u=_.theme)},r.$$.update=()=>{r.$$.dirty&24&&a(1,t=(c==null?void 0:c[u])??(c==null?void 0:c.default))},[d,t,s,c,u]}class Icon extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$7,create_fragment$7,safe_not_equal,{src:3,size:0,theme:4})}}const AdjustmentsHorizontal={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M10 3.75a2 2 0 10-4 0 2 2 0 004 0zM17.25 4.5a.75.75 0 000-1.5h-5.5a.75.75 0 000 1.5h5.5zM5 3.75a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5a.75.75 0 01.75.75zM4.25 17a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5zM17.25 17a.75.75 0 000-1.5h-5.5a.75.75 0 000 1.5h5.5zM9 10a.75.75 0 01-.75.75h-5.5a.75.75 0 010-1.5h5.5A.75.75 0 019 10zM17.25 10.75a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5zM14 10a2 2 0 10-4 0 2 2 0 004 0zM10 16.25a2 2 0 10-4 0 2 2 0 004 0z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{d:"M18.75 12.75h1.5a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5zM12 6a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 0112 6zM12 18a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 0112 18zM3.75 6.75h1.5a.75.75 0 100-1.5h-1.5a.75.75 0 000 1.5zM5.25 18.75h-1.5a.75.75 0 010-1.5h1.5a.75.75 0 010 1.5zM3 12a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 013 12zM9 3.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5zM12.75 12a2.25 2.25 0 114.5 0 2.25 2.25 0 01-4.5 0zM9 15.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z"}]}},ArrowsPointingIn={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M3.28 2.22a.75.75 0 00-1.06 1.06L5.44 6.5H2.75a.75.75 0 000 1.5h4.5A.75.75 0 008 7.25v-4.5a.75.75 0 00-1.5 0v2.69L3.28 2.22zM13.5 2.75a.75.75 0 00-1.5 0v4.5c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-2.69l3.22-3.22a.75.75 0 00-1.06-1.06L13.5 5.44V2.75zM3.28 17.78l3.22-3.22v2.69a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.69l-3.22 3.22a.75.75 0 101.06 1.06zM13.5 14.56l3.22 3.22a.75.75 0 101.06-1.06l-3.22-3.22h2.69a.75.75 0 000-1.5h-4.5a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0v-2.69z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M3.22 3.22a.75.75 0 011.06 0l3.97 3.97V4.5a.75.75 0 011.5 0V9a.75.75 0 01-.75.75H4.5a.75.75 0 010-1.5h2.69L3.22 4.28a.75.75 0 010-1.06zm17.56 0a.75.75 0 010 1.06l-3.97 3.97h2.69a.75.75 0 010 1.5H15a.75.75 0 01-.75-.75V4.5a.75.75 0 011.5 0v2.69l3.97-3.97a.75.75 0 011.06 0zM3.75 15a.75.75 0 01.75-.75H9a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-2.69l-3.97 3.97a.75.75 0 01-1.06-1.06l3.97-3.97H4.5a.75.75 0 01-.75-.75zm10.5 0a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-2.69l3.97 3.97a.75.75 0 11-1.06 1.06l-3.97-3.97v2.69a.75.75 0 01-1.5 0V15z","clip-rule":"evenodd"}]}},ArrowsPointingOut={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M13.28 7.78l3.22-3.22v2.69a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.69l-3.22 3.22a.75.75 0 001.06 1.06zM2 17.25v-4.5a.75.75 0 011.5 0v2.69l3.22-3.22a.75.75 0 011.06 1.06L4.56 16.5h2.69a.75.75 0 010 1.5h-4.5a.747.747 0 01-.75-.75zM12.22 13.28l3.22 3.22h-2.69a.75.75 0 000 1.5h4.5a.747.747 0 00.75-.75v-4.5a.75.75 0 00-1.5 0v2.69l-3.22-3.22a.75.75 0 10-1.06 1.06zM3.5 4.56l3.22 3.22a.75.75 0 001.06-1.06L4.56 3.5h2.69a.75.75 0 000-1.5h-4.5a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0V4.56z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M15 3.75a.75.75 0 01.75-.75h4.5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0V5.56l-3.97 3.97a.75.75 0 11-1.06-1.06l3.97-3.97h-2.69a.75.75 0 01-.75-.75zm-12 0A.75.75 0 013.75 3h4.5a.75.75 0 010 1.5H5.56l3.97 3.97a.75.75 0 01-1.06 1.06L4.5 5.56v2.69a.75.75 0 01-1.5 0v-4.5zm11.47 11.78a.75.75 0 111.06-1.06l3.97 3.97v-2.69a.75.75 0 011.5 0v4.5a.75.75 0 01-.75.75h-4.5a.75.75 0 010-1.5h2.69l-3.97-3.97zm-4.94-1.06a.75.75 0 010 1.06L5.56 19.5h2.69a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75v-4.5a.75.75 0 011.5 0v2.69l3.97-3.97a.75.75 0 011.06 0z","clip-rule":"evenodd"}]}},ChevronRight={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"}]}},Cog6Tooth={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"},{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 00-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 00-2.282.819l-.922 1.597a1.875 1.875 0 00.432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 000 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 00-.432 2.385l.922 1.597a1.875 1.875 0 002.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 002.28-.819l.923-1.597a1.875 1.875 0 00-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 000-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 00-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 00-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 00-1.85-1.567h-1.843zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z","clip-rule":"evenodd"}]}},Power={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.636 5.636a9 9 0 1012.728 0M12 3v9"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M10 2a.75.75 0 01.75.75v7.5a.75.75 0 01-1.5 0v-7.5A.75.75 0 0110 2zM5.404 4.343a.75.75 0 010 1.06 6.5 6.5 0 109.192 0 .75.75 0 111.06-1.06 8 8 0 11-11.313 0 .75.75 0 011.06 0z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 01.75.75v9a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM6.166 5.106a.75.75 0 010 1.06 8.25 8.25 0 1011.668 0 .75.75 0 111.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 011.06 0z","clip-rule":"evenodd"}]}},QuestionMarkCircle={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.061-1.061 3 3 0 112.871 5.026v.345a.75.75 0 01-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 108.94 6.94zM10 15a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 01-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 01-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 01-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584zM12 18a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"}]}},Wrench={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75a4.5 4.5 0 01-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 11-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 016.336-4.486l-3.276 3.276a3.004 3.004 0 002.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852z"},{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.867 19.125h.008v.008h-.008v-.008z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M19 5.5a4.5 4.5 0 01-4.791 4.49c-.873-.055-1.808.128-2.368.8l-6.024 7.23a2.724 2.724 0 11-3.837-3.837L9.21 8.16c.672-.56.855-1.495.8-2.368a4.5 4.5 0 015.873-4.575c.324.105.39.51.15.752L13.34 4.66a.455.455 0 00-.11.494 3.01 3.01 0 001.617 1.617c.17.07.363.02.493-.111l2.692-2.692c.241-.241.647-.174.752.15.14.435.216.9.216 1.382zM4 17a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M12 6.75a5.25 5.25 0 016.775-5.025.75.75 0 01.313 1.248l-3.32 3.319c.063.475.276.934.641 1.299.365.365.824.578 1.3.64l3.318-3.319a.75.75 0 011.248.313 5.25 5.25 0 01-5.472 6.756c-1.018-.086-1.87.1-2.309.634L7.344 21.3A3.298 3.298 0 112.7 16.657l8.684-7.151c.533-.44.72-1.291.634-2.309A5.342 5.342 0 0112 6.75zM4.117 19.125a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75h-.008a.75.75 0 01-.75-.75v-.008z","clip-rule":"evenodd"}]}};var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(r,e){return r.concat([e+"-"+start,e+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(r,e){return r.concat([e,e+"-"+start,e+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main,afterMain,beforeWrite,write,afterWrite];function getNodeName(r){return r?(r.nodeName||"").toLowerCase():null}function getWindow(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function isElement(r){var e=getWindow(r).Element;return r instanceof e||r instanceof Element}function isHTMLElement(r){var e=getWindow(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function isShadowRoot(r){if(typeof ShadowRoot>"u")return!1;var e=getWindow(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function applyStyles(r){var e=r.state;Object.keys(e.elements).forEach(function(a){var t=e.styles[a]||{},n=e.attributes[a]||{},s=e.elements[a];!isHTMLElement(s)||!getNodeName(s)||(Object.assign(s.style,t),Object.keys(n).forEach(function(c){var d=n[c];d===!1?s.removeAttribute(c):s.setAttribute(c,d===!0?"":d)}))})}function effect$2(r){var e=r.state,a={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,a.popper),e.styles=a,e.elements.arrow&&Object.assign(e.elements.arrow.style,a.arrow),function(){Object.keys(e.elements).forEach(function(t){var n=e.elements[t],s=e.attributes[t]||{},c=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:a[t]),d=c.reduce(function(u,_){return u[_]="",u},{});!isHTMLElement(n)||!getNodeName(n)||(Object.assign(n.style,d),Object.keys(s).forEach(function(u){n.removeAttribute(u)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement(r){return r.split("-")[0]}var max=Math.max,min=Math.min,round=Math.round;function getUAString(){var r=navigator.userAgentData;return r!=null&&r.brands&&Array.isArray(r.brands)?r.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(r,e,a){e===void 0&&(e=!1),a===void 0&&(a=!1);var t=r.getBoundingClientRect(),n=1,s=1;e&&isHTMLElement(r)&&(n=r.offsetWidth>0&&round(t.width)/r.offsetWidth||1,s=r.offsetHeight>0&&round(t.height)/r.offsetHeight||1);var c=isElement(r)?getWindow(r):window,d=c.visualViewport,u=!isLayoutViewport()&&a,_=(t.left+(u&&d?d.offsetLeft:0))/n,m=(t.top+(u&&d?d.offsetTop:0))/s,g=t.width/n,b=t.height/s;return{width:g,height:b,top:m,right:_+g,bottom:m+b,left:_,x:_,y:m}}function getLayoutRect(r){var e=getBoundingClientRect(r),a=r.offsetWidth,t=r.offsetHeight;return Math.abs(e.width-a)<=1&&(a=e.width),Math.abs(e.height-t)<=1&&(t=e.height),{x:r.offsetLeft,y:r.offsetTop,width:a,height:t}}function contains(r,e){var a=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(a&&isShadowRoot(a)){var t=e;do{if(t&&r.isSameNode(t))return!0;t=t.parentNode||t.host}while(t)}return!1}function getComputedStyle$1(r){return getWindow(r).getComputedStyle(r)}function isTableElement(r){return["table","td","th"].indexOf(getNodeName(r))>=0}function getDocumentElement(r){return((isElement(r)?r.ownerDocument:r.document)||window.document).documentElement}function getParentNode(r){return getNodeName(r)==="html"?r:r.assignedSlot||r.parentNode||(isShadowRoot(r)?r.host:null)||getDocumentElement(r)}function getTrueOffsetParent(r){return!isHTMLElement(r)||getComputedStyle$1(r).position==="fixed"?null:r.offsetParent}function getContainingBlock(r){var e=/firefox/i.test(getUAString()),a=/Trident/i.test(getUAString());if(a&&isHTMLElement(r)){var t=getComputedStyle$1(r);if(t.position==="fixed")return null}var n=getParentNode(r);for(isShadowRoot(n)&&(n=n.host);isHTMLElement(n)&&["html","body"].indexOf(getNodeName(n))<0;){var s=getComputedStyle$1(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function getOffsetParent(r){for(var e=getWindow(r),a=getTrueOffsetParent(r);a&&isTableElement(a)&&getComputedStyle$1(a).position==="static";)a=getTrueOffsetParent(a);return a&&(getNodeName(a)==="html"||getNodeName(a)==="body"&&getComputedStyle$1(a).position==="static")?e:a||getContainingBlock(r)||e}function getMainAxisFromPlacement(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function within(r,e,a){return max(r,min(e,a))}function withinMaxClamp(r,e,a){var t=within(r,e,a);return t>a?a:t}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(r){return Object.assign({},getFreshSideObject(),r)}function expandToHashMap(r,e){return e.reduce(function(a,t){return a[t]=r,a},{})}var toPaddingObject=function r(e,a){return e=typeof e=="function"?e(Object.assign({},a.rects,{placement:a.placement})):e,mergePaddingObject(typeof e!="number"?e:expandToHashMap(e,basePlacements))};function arrow(r){var e,a=r.state,t=r.name,n=r.options,s=a.elements.arrow,c=a.modifiersData.popperOffsets,d=getBasePlacement(a.placement),u=getMainAxisFromPlacement(d),_=[left,right].indexOf(d)>=0,m=_?"height":"width";if(!(!s||!c)){var g=toPaddingObject(n.padding,a),b=getLayoutRect(s),S=u==="y"?top:left,C=u==="y"?bottom:right,k=a.rects.reference[m]+a.rects.reference[u]-c[u]-a.rects.popper[m],R=c[u]-a.rects.reference[u],w=getOffsetParent(s),$=w?u==="y"?w.clientHeight||0:w.clientWidth||0:0,P=k/2-R/2,O=g[S],B=$-b[m]-g[C],N=$/2-b[m]/2+P,j=within(O,N,B),U=u;a.modifiersData[t]=(e={},e[U]=j,e.centerOffset=j-N,e)}}function effect$1(r){var e=r.state,a=r.options,t=a.element,n=t===void 0?"[data-popper-arrow]":t;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||contains(e.elements.popper,n)&&(e.elements.arrow=n))}const arrow$1={name:"arrow",enabled:!0,phase:"main",fn:arrow,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(r){return r.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(r,e){var a=r.x,t=r.y,n=e.devicePixelRatio||1;return{x:round(a*n)/n||0,y:round(t*n)/n||0}}function mapToStyles(r){var e,a=r.popper,t=r.popperRect,n=r.placement,s=r.variation,c=r.offsets,d=r.position,u=r.gpuAcceleration,_=r.adaptive,m=r.roundOffsets,g=r.isFixed,b=c.x,S=b===void 0?0:b,C=c.y,k=C===void 0?0:C,R=typeof m=="function"?m({x:S,y:k}):{x:S,y:k};S=R.x,k=R.y;var w=c.hasOwnProperty("x"),$=c.hasOwnProperty("y"),P=left,O=top,B=window;if(_){var N=getOffsetParent(a),j="clientHeight",U="clientWidth";if(N===getWindow(a)&&(N=getDocumentElement(a),getComputedStyle$1(N).position!=="static"&&d==="absolute"&&(j="scrollHeight",U="scrollWidth")),N=N,n===top||(n===left||n===right)&&s===end){O=bottom;var q=g&&N===B&&B.visualViewport?B.visualViewport.height:N[j];k-=q-t.height,k*=u?1:-1}if(n===left||(n===top||n===bottom)&&s===end){P=right;var V=g&&N===B&&B.visualViewport?B.visualViewport.width:N[U];S-=V-t.width,S*=u?1:-1}}var W=Object.assign({position:d},_&&unsetSides),x=m===!0?roundOffsetsByDPR({x:S,y:k},getWindow(a)):{x:S,y:k};if(S=x.x,k=x.y,u){var J;return Object.assign({},W,(J={},J[O]=$?"0":"",J[P]=w?"0":"",J.transform=(B.devicePixelRatio||1)<=1?"translate("+S+"px, "+k+"px)":"translate3d("+S+"px, "+k+"px, 0)",J))}return Object.assign({},W,(e={},e[O]=$?k+"px":"",e[P]=w?S+"px":"",e.transform="",e))}function computeStyles(r){var e=r.state,a=r.options,t=a.gpuAcceleration,n=t===void 0?!0:t,s=a.adaptive,c=s===void 0?!0:s,d=a.roundOffsets,u=d===void 0?!0:d,_={placement:getBasePlacement(e.placement),variation:getVariation(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,mapToStyles(Object.assign({},_,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,mapToStyles(Object.assign({},_,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(r){var e=r.state,a=r.instance,t=r.options,n=t.scroll,s=n===void 0?!0:n,c=t.resize,d=c===void 0?!0:c,u=getWindow(e.elements.popper),_=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&_.forEach(function(m){m.addEventListener("scroll",a.update,passive)}),d&&u.addEventListener("resize",a.update,passive),function(){s&&_.forEach(function(m){m.removeEventListener("scroll",a.update,passive)}),d&&u.removeEventListener("resize",a.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function r(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(r){return r.replace(/left|right|bottom|top/g,function(e){return hash$1[e]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(r){return r.replace(/start|end/g,function(e){return hash[e]})}function getWindowScroll(r){var e=getWindow(r),a=e.pageXOffset,t=e.pageYOffset;return{scrollLeft:a,scrollTop:t}}function getWindowScrollBarX(r){return getBoundingClientRect(getDocumentElement(r)).left+getWindowScroll(r).scrollLeft}function getViewportRect(r,e){var a=getWindow(r),t=getDocumentElement(r),n=a.visualViewport,s=t.clientWidth,c=t.clientHeight,d=0,u=0;if(n){s=n.width,c=n.height;var _=isLayoutViewport();(_||!_&&e==="fixed")&&(d=n.offsetLeft,u=n.offsetTop)}return{width:s,height:c,x:d+getWindowScrollBarX(r),y:u}}function getDocumentRect(r){var e,a=getDocumentElement(r),t=getWindowScroll(r),n=(e=r.ownerDocument)==null?void 0:e.body,s=max(a.scrollWidth,a.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),c=max(a.scrollHeight,a.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),d=-t.scrollLeft+getWindowScrollBarX(r),u=-t.scrollTop;return getComputedStyle$1(n||a).direction==="rtl"&&(d+=max(a.clientWidth,n?n.clientWidth:0)-s),{width:s,height:c,x:d,y:u}}function isScrollParent(r){var e=getComputedStyle$1(r),a=e.overflow,t=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(a+n+t)}function getScrollParent(r){return["html","body","#document"].indexOf(getNodeName(r))>=0?r.ownerDocument.body:isHTMLElement(r)&&isScrollParent(r)?r:getScrollParent(getParentNode(r))}function listScrollParents(r,e){var a;e===void 0&&(e=[]);var t=getScrollParent(r),n=t===((a=r.ownerDocument)==null?void 0:a.body),s=getWindow(t),c=n?[s].concat(s.visualViewport||[],isScrollParent(t)?t:[]):t,d=e.concat(c);return n?d:d.concat(listScrollParents(getParentNode(c)))}function rectToClientRect(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function getInnerBoundingClientRect(r,e){var a=getBoundingClientRect(r,!1,e==="fixed");return a.top=a.top+r.clientTop,a.left=a.left+r.clientLeft,a.bottom=a.top+r.clientHeight,a.right=a.left+r.clientWidth,a.width=r.clientWidth,a.height=r.clientHeight,a.x=a.left,a.y=a.top,a}function getClientRectFromMixedType(r,e,a){return e===viewport?rectToClientRect(getViewportRect(r,a)):isElement(e)?getInnerBoundingClientRect(e,a):rectToClientRect(getDocumentRect(getDocumentElement(r)))}function getClippingParents(r){var e=listScrollParents(getParentNode(r)),a=["absolute","fixed"].indexOf(getComputedStyle$1(r).position)>=0,t=a&&isHTMLElement(r)?getOffsetParent(r):r;return isElement(t)?e.filter(function(n){return isElement(n)&&contains(n,t)&&getNodeName(n)!=="body"}):[]}function getClippingRect(r,e,a,t){var n=e==="clippingParents"?getClippingParents(r):[].concat(e),s=[].concat(n,[a]),c=s[0],d=s.reduce(function(u,_){var m=getClientRectFromMixedType(r,_,t);return u.top=max(m.top,u.top),u.right=min(m.right,u.right),u.bottom=min(m.bottom,u.bottom),u.left=max(m.left,u.left),u},getClientRectFromMixedType(r,c,t));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}function computeOffsets(r){var e=r.reference,a=r.element,t=r.placement,n=t?getBasePlacement(t):null,s=t?getVariation(t):null,c=e.x+e.width/2-a.width/2,d=e.y+e.height/2-a.height/2,u;switch(n){case top:u={x:c,y:e.y-a.height};break;case bottom:u={x:c,y:e.y+e.height};break;case right:u={x:e.x+e.width,y:d};break;case left:u={x:e.x-a.width,y:d};break;default:u={x:e.x,y:e.y}}var _=n?getMainAxisFromPlacement(n):null;if(_!=null){var m=_==="y"?"height":"width";switch(s){case start:u[_]=u[_]-(e[m]/2-a[m]/2);break;case end:u[_]=u[_]+(e[m]/2-a[m]/2);break}}return u}function detectOverflow(r,e){e===void 0&&(e={});var a=e,t=a.placement,n=t===void 0?r.placement:t,s=a.strategy,c=s===void 0?r.strategy:s,d=a.boundary,u=d===void 0?clippingParents:d,_=a.rootBoundary,m=_===void 0?viewport:_,g=a.elementContext,b=g===void 0?popper:g,S=a.altBoundary,C=S===void 0?!1:S,k=a.padding,R=k===void 0?0:k,w=mergePaddingObject(typeof R!="number"?R:expandToHashMap(R,basePlacements)),$=b===popper?reference:popper,P=r.rects.popper,O=r.elements[C?$:b],B=getClippingRect(isElement(O)?O:O.contextElement||getDocumentElement(r.elements.popper),u,m,c),N=getBoundingClientRect(r.elements.reference),j=computeOffsets({reference:N,element:P,strategy:"absolute",placement:n}),U=rectToClientRect(Object.assign({},P,j)),q=b===popper?U:N,V={top:B.top-q.top+w.top,bottom:q.bottom-B.bottom+w.bottom,left:B.left-q.left+w.left,right:q.right-B.right+w.right},W=r.modifiersData.offset;if(b===popper&&W){var x=W[n];Object.keys(V).forEach(function(J){var X=[right,bottom].indexOf(J)>=0?1:-1,Z=[top,bottom].indexOf(J)>=0?"y":"x";V[J]+=x[Z]*X})}return V}function computeAutoPlacement(r,e){e===void 0&&(e={});var a=e,t=a.placement,n=a.boundary,s=a.rootBoundary,c=a.padding,d=a.flipVariations,u=a.allowedAutoPlacements,_=u===void 0?placements:u,m=getVariation(t),g=m?d?variationPlacements:variationPlacements.filter(function(C){return getVariation(C)===m}):basePlacements,b=g.filter(function(C){return _.indexOf(C)>=0});b.length===0&&(b=g);var S=b.reduce(function(C,k){return C[k]=detectOverflow(r,{placement:k,boundary:n,rootBoundary:s,padding:c})[getBasePlacement(k)],C},{});return Object.keys(S).sort(function(C,k){return S[C]-S[k]})}function getExpandedFallbackPlacements(r){if(getBasePlacement(r)===auto)return[];var e=getOppositePlacement(r);return[getOppositeVariationPlacement(r),e,getOppositeVariationPlacement(e)]}function flip(r){var e=r.state,a=r.options,t=r.name;if(!e.modifiersData[t]._skip){for(var n=a.mainAxis,s=n===void 0?!0:n,c=a.altAxis,d=c===void 0?!0:c,u=a.fallbackPlacements,_=a.padding,m=a.boundary,g=a.rootBoundary,b=a.altBoundary,S=a.flipVariations,C=S===void 0?!0:S,k=a.allowedAutoPlacements,R=e.options.placement,w=getBasePlacement(R),$=w===R,P=u||($||!C?[getOppositePlacement(R)]:getExpandedFallbackPlacements(R)),O=[R].concat(P).reduce(function(te,re){return te.concat(getBasePlacement(re)===auto?computeAutoPlacement(e,{placement:re,boundary:m,rootBoundary:g,padding:_,flipVariations:C,allowedAutoPlacements:k}):re)},[]),B=e.rects.reference,N=e.rects.popper,j=new Map,U=!0,q=O[0],V=0;V<O.length;V++){var W=O[V],x=getBasePlacement(W),J=getVariation(W)===start,X=[top,bottom].indexOf(x)>=0,Z=X?"width":"height",ee=detectOverflow(e,{placement:W,boundary:m,rootBoundary:g,altBoundary:b,padding:_}),Q=X?J?right:left:J?bottom:top;B[Z]>N[Z]&&(Q=getOppositePlacement(Q));var z=getOppositePlacement(Q),K=[];if(s&&K.push(ee[x]<=0),d&&K.push(ee[Q]<=0,ee[z]<=0),K.every(function(te){return te})){q=W,U=!1;break}j.set(W,K)}if(U)for(var ne=C?3:1,F=function(re){var oe=O.find(function(ce){var se=j.get(ce);if(se)return se.slice(0,re).every(function(ie){return ie})});if(oe)return q=oe,"break"},Y=ne;Y>0;Y--){var ae=F(Y);if(ae==="break")break}e.placement!==q&&(e.modifiersData[t]._skip=!0,e.placement=q,e.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(r,e,a){return a===void 0&&(a={x:0,y:0}),{top:r.top-e.height-a.y,right:r.right-e.width+a.x,bottom:r.bottom-e.height+a.y,left:r.left-e.width-a.x}}function isAnySideFullyClipped(r){return[top,right,bottom,left].some(function(e){return r[e]>=0})}function hide(r){var e=r.state,a=r.name,t=e.rects.reference,n=e.rects.popper,s=e.modifiersData.preventOverflow,c=detectOverflow(e,{elementContext:"reference"}),d=detectOverflow(e,{altBoundary:!0}),u=getSideOffsets(c,t),_=getSideOffsets(d,n,s),m=isAnySideFullyClipped(u),g=isAnySideFullyClipped(_);e.modifiersData[a]={referenceClippingOffsets:u,popperEscapeOffsets:_,isReferenceHidden:m,hasPopperEscaped:g},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":m,"data-popper-escaped":g})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(r,e,a){var t=getBasePlacement(r),n=[left,top].indexOf(t)>=0?-1:1,s=typeof a=="function"?a(Object.assign({},e,{placement:r})):a,c=s[0],d=s[1];return c=c||0,d=(d||0)*n,[left,right].indexOf(t)>=0?{x:d,y:c}:{x:c,y:d}}function offset(r){var e=r.state,a=r.options,t=r.name,n=a.offset,s=n===void 0?[0,0]:n,c=placements.reduce(function(m,g){return m[g]=distanceAndSkiddingToXY(g,e.rects,s),m},{}),d=c[e.placement],u=d.x,_=d.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=_),e.modifiersData[t]=c}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(r){var e=r.state,a=r.name;e.modifiersData[a]=computeOffsets({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(r){return r==="x"?"y":"x"}function preventOverflow(r){var e=r.state,a=r.options,t=r.name,n=a.mainAxis,s=n===void 0?!0:n,c=a.altAxis,d=c===void 0?!1:c,u=a.boundary,_=a.rootBoundary,m=a.altBoundary,g=a.padding,b=a.tether,S=b===void 0?!0:b,C=a.tetherOffset,k=C===void 0?0:C,R=detectOverflow(e,{boundary:u,rootBoundary:_,padding:g,altBoundary:m}),w=getBasePlacement(e.placement),$=getVariation(e.placement),P=!$,O=getMainAxisFromPlacement(w),B=getAltAxis(O),N=e.modifiersData.popperOffsets,j=e.rects.reference,U=e.rects.popper,q=typeof k=="function"?k(Object.assign({},e.rects,{placement:e.placement})):k,V=typeof q=="number"?{mainAxis:q,altAxis:q}:Object.assign({mainAxis:0,altAxis:0},q),W=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,x={x:0,y:0};if(N){if(s){var J,X=O==="y"?top:left,Z=O==="y"?bottom:right,ee=O==="y"?"height":"width",Q=N[O],z=Q+R[X],K=Q-R[Z],ne=S?-U[ee]/2:0,F=$===start?j[ee]:U[ee],Y=$===start?-U[ee]:-j[ee],ae=e.elements.arrow,te=S&&ae?getLayoutRect(ae):{width:0,height:0},re=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:getFreshSideObject(),oe=re[X],ce=re[Z],se=within(0,j[ee],te[ee]),ie=P?j[ee]/2-ne-se-oe-V.mainAxis:F-se-oe-V.mainAxis,de=P?-j[ee]/2+ne+se+ce+V.mainAxis:Y+se+ce+V.mainAxis,ue=e.elements.arrow&&getOffsetParent(e.elements.arrow),Ae=ue?O==="y"?ue.clientTop||0:ue.clientLeft||0:0,he=(J=W==null?void 0:W[O])!=null?J:0,Ce=Q+ie-he-Ae,ke=Q+de-he,ge=within(S?min(z,Ce):z,Q,S?max(K,ke):K);N[O]=ge,x[O]=ge-Q}if(d){var _e,Re=O==="x"?top:left,Te=O==="x"?bottom:right,le=N[B],fe=B==="y"?"height":"width",me=le+R[Re],ve=le-R[Te],pe=[top,left].indexOf(w)!==-1,ye=(_e=W==null?void 0:W[B])!=null?_e:0,be=pe?me:le-j[fe]-U[fe]-ye+V.altAxis,Se=pe?le+j[fe]+U[fe]-ye-V.altAxis:ve,I=S&&pe?withinMaxClamp(be,le,Se):within(S?be:me,le,S?Se:ve);N[B]=I,x[B]=I-le}e.modifiersData[t]=x}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function getNodeScroll(r){return r===getWindow(r)||!isHTMLElement(r)?getWindowScroll(r):getHTMLElementScroll(r)}function isElementScaled(r){var e=r.getBoundingClientRect(),a=round(e.width)/r.offsetWidth||1,t=round(e.height)/r.offsetHeight||1;return a!==1||t!==1}function getCompositeRect(r,e,a){a===void 0&&(a=!1);var t=isHTMLElement(e),n=isHTMLElement(e)&&isElementScaled(e),s=getDocumentElement(e),c=getBoundingClientRect(r,n,a),d={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(t||!t&&!a)&&((getNodeName(e)!=="body"||isScrollParent(s))&&(d=getNodeScroll(e)),isHTMLElement(e)?(u=getBoundingClientRect(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):s&&(u.x=getWindowScrollBarX(s))),{x:c.left+d.scrollLeft-u.x,y:c.top+d.scrollTop-u.y,width:c.width,height:c.height}}function order(r){var e=new Map,a=new Set,t=[];r.forEach(function(s){e.set(s.name,s)});function n(s){a.add(s.name);var c=[].concat(s.requires||[],s.requiresIfExists||[]);c.forEach(function(d){if(!a.has(d)){var u=e.get(d);u&&n(u)}}),t.push(s)}return r.forEach(function(s){a.has(s.name)||n(s)}),t}function orderModifiers(r){var e=order(r);return modifierPhases.reduce(function(a,t){return a.concat(e.filter(function(n){return n.phase===t}))},[])}function debounce(r){var e;return function(){return e||(e=new Promise(function(a){Promise.resolve().then(function(){e=void 0,a(r())})})),e}}function mergeByName(r){var e=r.reduce(function(a,t){var n=a[t.name];return a[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,a},{});return Object.keys(e).map(function(a){return e[a]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var r=arguments.length,e=new Array(r),a=0;a<r;a++)e[a]=arguments[a];return!e.some(function(t){return!(t&&typeof t.getBoundingClientRect=="function")})}function popperGenerator(r){r===void 0&&(r={});var e=r,a=e.defaultModifiers,t=a===void 0?[]:a,n=e.defaultOptions,s=n===void 0?DEFAULT_OPTIONS:n;return function(d,u,_){_===void 0&&(_=s);var m={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,s),modifiersData:{},elements:{reference:d,popper:u},attributes:{},styles:{}},g=[],b=!1,S={state:m,setOptions:function(w){var $=typeof w=="function"?w(m.options):w;k(),m.options=Object.assign({},s,m.options,$),m.scrollParents={reference:isElement(d)?listScrollParents(d):d.contextElement?listScrollParents(d.contextElement):[],popper:listScrollParents(u)};var P=orderModifiers(mergeByName([].concat(t,m.options.modifiers)));return m.orderedModifiers=P.filter(function(O){return O.enabled}),C(),S.update()},forceUpdate:function(){if(!b){var w=m.elements,$=w.reference,P=w.popper;if(areValidElements($,P)){m.rects={reference:getCompositeRect($,getOffsetParent(P),m.options.strategy==="fixed"),popper:getLayoutRect(P)},m.reset=!1,m.placement=m.options.placement,m.orderedModifiers.forEach(function(V){return m.modifiersData[V.name]=Object.assign({},V.data)});for(var O=0;O<m.orderedModifiers.length;O++){if(m.reset===!0){m.reset=!1,O=-1;continue}var B=m.orderedModifiers[O],N=B.fn,j=B.options,U=j===void 0?{}:j,q=B.name;typeof N=="function"&&(m=N({state:m,options:U,name:q,instance:S})||m)}}}},update:debounce(function(){return new Promise(function(R){S.forceUpdate(),R(m)})}),destroy:function(){k(),b=!0}};if(!areValidElements(d,u))return S;S.setOptions(_).then(function(R){!b&&_.onFirstUpdate&&_.onFirstUpdate(R)});function C(){m.orderedModifiers.forEach(function(R){var w=R.name,$=R.options,P=$===void 0?{}:$,O=R.effect;if(typeof O=="function"){var B=O({state:m,name:w,instance:S,options:P}),N=function(){};g.push(B||N)}})}function k(){g.forEach(function(R){return R()}),g=[]}return S}}var defaultModifiers$1=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1],createPopper$1=popperGenerator({defaultModifiers:defaultModifiers$1}),defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$1,hide$1],createPopper=popperGenerator({defaultModifiers});function createPopperActions(r){let e=null,a,t,n=r;const s=()=>{a!==void 0&&t!==void 0&&(e=createPopper(a,t,n))},c=()=>{e!==null&&(e.destroy(),e=null)},d=m=>"subscribe"in m?(u(m),{}):(a=m,s(),{destroy(){c()}}),u=m=>{const g=m.subscribe(b=>{a===void 0?(a=b,s()):(Object.assign(a,b),e==null||e.update())});onDestroy(g)};return[d,(m,g)=>(t=m,n={...r,...g},s(),{update(b){n={...r,...b},e==null||e.setOptions(n)},destroy(){c()}}),()=>e]}const HelpTooltips_svelte_svelte_type_style_lang="";function get_each_context$1(r,e,a){const t=r.slice();return t[1]=e[a],t}function create_if_block$2(r){let e,a=r[1].label+"",t,n,s,c,d,u;return{c(){e=element("div"),t=text(a),n=space(),attr(e,"class","popper-tooltip help-tooltip svelte-xhlzif")},m(_,m){insert(_,e,m),append(e,t),append(e,n),c=!0,d||(u=action_destroyer(r[1].popperContent(e)),d=!0)},p(_,m){(!c||m&1)&&a!==(a=_[1].label+"")&&set_data(t,a)},i(_){c||(add_render_callback(()=>{c&&(s||(s=create_bidirectional_transition(e,fade,{duration:300},!0)),s.run(1))}),c=!0)},o(_){s||(s=create_bidirectional_transition(e,fade,{duration:300},!1)),s.run(0),c=!1},d(_){_&&detach(e),_&&s&&s.end(),d=!1,u()}}}function create_each_block$1(r){let e,a,t=r[1].visible&&create_if_block$2(r);return{c(){t&&t.c(),e=empty()},m(n,s){t&&t.m(n,s),insert(n,e,s),a=!0},p(n,s){n[1].visible?t?(t.p(n,s),s&1&&transition_in(t,1)):(t=create_if_block$2(n),t.c(),transition_in(t,1),t.m(e.parentNode,e)):t&&(group_outros(),transition_out(t,1,1,()=>{t=null}),check_outros())},i(n){a||(transition_in(t),a=!0)},o(n){transition_out(t),a=!1},d(n){t&&t.d(n),n&&detach(e)}}}function create_fragment$6(r){let e,a,t=r[0],n=[];for(let c=0;c<t.length;c+=1)n[c]=create_each_block$1(get_each_context$1(r,t,c));const s=c=>transition_out(n[c],1,1,()=>{n[c]=null});return{c(){for(let c=0;c<n.length;c+=1)n[c].c();e=empty()},m(c,d){for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(c,d);insert(c,e,d),a=!0},p(c,[d]){if(d&1){t=c[0];let u;for(u=0;u<t.length;u+=1){const _=get_each_context$1(c,t,u);n[u]?(n[u].p(_,d),transition_in(n[u],1)):(n[u]=create_each_block$1(_),n[u].c(),transition_in(n[u],1),n[u].m(e.parentNode,e))}for(group_outros(),u=t.length;u<n.length;u+=1)s(u);check_outros()}},i(c){if(!a){for(let d=0;d<t.length;d+=1)transition_in(n[d]);a=!0}},o(c){n=n.filter(Boolean);for(let d=0;d<n.length;d+=1)transition_out(n[d]);a=!1},d(c){destroy_each(n,c),c&&detach(e)}}}let tooltips=nStore([]);const addTooltip=(r,e,a=!0)=>{const{tooltip:t,showTooltip:n,showTooltipTimeout:s,hideTooltip:c,destroyTooltip:d}=newTooltip(r,e);return a&&(r.addEventListener("pointerenter",s),r.addEventListener("pointerout",c),r.addEventListener("focusin",s),r.addEventListener("focusout",c),r.addEventListener("mousedown",c)),{tooltip:t,showTooltip:n,showTooltipTimeout:s,hideTooltip:c,destroyTooltip:d,destroy(){a&&(r.removeEventListener("pointerenter",n),r.removeEventListener("pointerout",c),r.removeEventListener("focusin",n),r.removeEventListener("focusout",c),r.removeEventListener("mousedown",c)),d()}}},newTooltip=(r,e)=>{const[a,t]=createPopperActions({placement:e.placement||"top",strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,10]}}]});a(r);const n={label:e.label,visible:!1,popperContent:t};tooltips.update(d=>(d.push(n),d));let s=null;const c=()=>{n.visible=!0,tooltips.update(d=>d)};return{tooltip:n,showTooltip:c,showTooltipTimeout:()=>{s=setTimeout(c,e.timeout!=null?e.timeout:750)},hideTooltip:()=>{clearTimeout(s),n.visible=!1,r.blur(),tooltips.update(d=>d)},destroyTooltip:()=>{clearTimeout(s),tooltips.update(d=>d.filter(u=>u!=n))}}};function instance$6(r,e,a){let t;return component_subscribe(r,tooltips,n=>a(0,t=n)),[t]}class HelpTooltips extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$6,create_fragment$6,safe_not_equal,{})}}const RovSelector_svelte_svelte_type_style_lang="";function get_each_context(r,e,a){const t=r.slice();return t[8]=e[a],t}function create_if_block_2(r){let e,a,t,n;return{c(){e=element("p"),a=text("You Are: "),t=element("span"),n=text(r[3]),attr(t,"class","font-bold"),attr(e,"class","text-center p-2 text-white")},m(s,c){insert(s,e,c),append(e,a),append(e,t),append(t,n)},p(s,c){c&8&&set_data(n,s[3])},d(s){s&&detach(e)}}}function create_else_block(r){let e,a,t,n,s,c=r[2]?"Disconnect":"Connect",d,u,_,m;return{c(){e=element("span"),a=text(r[0]),t=space(),n=element("button"),s=element("span"),d=text(c),attr(e,"class","font-bold p-3 align-middle"),attr(s,"class","whitespace-nowrap inline"),attr(n,"class","btn btn-sm btn-error align-top")},m(g,b){insert(g,e,b),append(e,a),insert(g,t,b),insert(g,n,b),append(n,s),append(s,d),_||(m=listen(n,"click",r[7]),_=!0)},p(g,b){b&1&&set_data(a,g[0]),b&4&&c!==(c=g[2]?"Disconnect":"Connect")&&set_data(d,c)},i(g){u||add_render_callback(()=>{u=create_in_transition(n,fade,{}),u.start()})},o:noop$1,d(g){g&&detach(e),g&&detach(t),g&&detach(n),_=!1,m()}}}function create_if_block_1(r){let e,a,t,n,s=r[1],c=[];for(let u=0;u<s.length;u+=1)c[u]=create_each_block(get_each_context(r,s,u));const d=u=>transition_out(c[u],1,1,()=>{c[u]=null});return{c(){e=element("h2"),e.textContent="Connect to a ROV:",a=space(),t=element("div");for(let u=0;u<c.length;u+=1)c[u].c();attr(e,"class","text-center p-2 font-bold"),attr(t,"class","flex flex-col align-stretch overflow-y-auto p-3")},m(u,_){insert(u,e,_),insert(u,a,_),insert(u,t,_);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(t,null);n=!0},p(u,_){if(_&18){s=u[1];let m;for(m=0;m<s.length;m+=1){const g=get_each_context(u,s,m);c[m]?(c[m].p(g,_),transition_in(c[m],1)):(c[m]=create_each_block(g),c[m].c(),transition_in(c[m],1),c[m].m(t,null))}for(group_outros(),m=s.length;m<c.length;m+=1)d(m);check_outros()}},i(u){if(!n){for(let _=0;_<s.length;_+=1)transition_in(c[_]);n=!0}},o(u){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)transition_out(c[_]);n=!1},d(u){u&&detach(e),u&&detach(a),u&&detach(t),destroy_each(c,u)}}}function create_if_block$1(r){let e;return{c(){e=element("h2"),e.textContent="Searching for online ROVs...",attr(e,"class","text-center py-4 px-6 font-bold")},m(a,t){insert(a,e,t)},p:noop$1,i:noop$1,o:noop$1,d(a){a&&detach(e)}}}function create_each_block(r){let e,a=r[8]+"",t,n,s,c,d,u,_,m;s=new Icon({props:{theme:"solid",src:ChevronRight,class:"w-6 h-6 inline-block pointer-events-none"}});function g(){return r[6](r[8])}return{c(){e=element("button"),t=text(a),n=space(),create_component(s.$$.fragment),c=space(),attr(e,"class","btn ring-white btn-primary align-top block m-1")},m(b,S){insert(b,e,S),append(e,t),append(e,n),mount_component(s,e,null),append(e,c),u=!0,_||(m=listen(e,"click",g),_=!0)},p(b,S){r=b,(!u||S&2)&&a!==(a=r[8]+"")&&set_data(t,a)},i(b){u||(transition_in(s.$$.fragment,b),d||add_render_callback(()=>{d=create_in_transition(e,fade,{}),d.start()}),u=!0)},o(b){transition_out(s.$$.fragment,b),u=!1},d(b){b&&detach(e),destroy_component(s),_=!1,m()}}}function create_fragment$5(r){let e,a,t,n,s,c,d,u,_=r[2]&&create_if_block_2(r);const m=[create_if_block$1,create_if_block_1,create_else_block],g=[];function b(S,C){return S[1].length==0?0:S[2]?2:1}return n=b(r),s=g[n]=m[n](r),{c(){e=element("div"),_&&_.c(),a=space(),t=element("div"),s.c(),attr(t,"class",c=`bg-base-100 m-0 items-center flex whitespace-nowrap text-center rounded-xl max-h-full  ${r[2]?"rounded-b-none":"flex-col"}`),toggle_class(t,"p-2",r[2]),attr(e,"id","rov_chooser"),attr(e,"class",d=null_to_empty(`absolute left-1/2 bottom-0  -translate-x-1/2 transition-all overflow-hidden z-50  ${r[2]?" ":"disconnected  top-0"} `)+" svelte-1simma4")},m(S,C){insert(S,e,C),_&&_.m(e,null),append(e,a),append(e,t),g[n].m(t,null),u=!0},p(S,[C]){S[2]?_?_.p(S,C):(_=create_if_block_2(S),_.c(),_.m(e,a)):_&&(_.d(1),_=null);let k=n;n=b(S),n===k?g[n].p(S,C):(group_outros(),transition_out(g[k],1,1,()=>{g[k]=null}),check_outros(),s=g[n],s?s.p(S,C):(s=g[n]=m[n](S),s.c()),transition_in(s,1),s.m(t,null)),(!u||C&4&&c!==(c=`bg-base-100 m-0 items-center flex whitespace-nowrap text-center rounded-xl max-h-full  ${S[2]?"rounded-b-none":"flex-col"}`))&&attr(t,"class",c),(!u||C&4)&&toggle_class(t,"p-2",S[2]),(!u||C&4&&d!==(d=null_to_empty(`absolute left-1/2 bottom-0  -translate-x-1/2 transition-all overflow-hidden z-50  ${S[2]?" ":"disconnected  top-0"} `)+" svelte-1simma4"))&&attr(e,"class",d)},i(S){u||(transition_in(s),u=!0)},o(S){transition_out(s),u=!1},d(S){S&&detach(e),_&&_.d(),g[n].d()}}}function instance$5(r,e,a){let t,n;component_subscribe(r,ourPeerId,g=>a(3,n=g));let{selectedRov:s=""}=e,c=[];setInterval(()=>{c.push("rov-"+(Date.now()+1)),a(1,c)},2e3);function d(g){a(2,t=!0),a(0,s=g),RovActions.connectToRov()}function u(){a(2,t=!1),RovActions.disconnectFromRov()}const _=g=>d(g),m=()=>u();return r.$$set=g=>{"selectedRov"in g&&a(0,s=g.selectedRov)},a(2,t=!1),[s,c,t,n,d,u,_,m]}class RovSelector extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$5,create_fragment$5,safe_not_equal,{selectedRov:0})}}const CompassDial_svelte_svelte_type_style_lang="";function create_fragment$4(r){let e,a,t,n;return{c(){e=element("div"),a=element("div"),t=space(),n=element("div"),attr(a,"class","line svelte-wxznj7"),attr(n,"class","bg svelte-wxznj7"),attr(n,"id","compassDiscImg"),set_style(n,"transform",`translateX(${r[0]}px)`),attr(e,"class","compass bg-base-100 svelte-wxznj7")},m(s,c){insert(s,e,c),append(e,a),append(e,t),append(e,n)},p(s,[c]){c&1&&set_style(n,"transform",`translateX(${s[0]}px)`)},i:noop$1,o:noop$1,d(s){s&&detach(e)}}}function instance$4(r,e,a){let t;return component_subscribe(r,rovHeading,n=>a(0,t=n)),[t]}class CompassDial extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$4,create_fragment$4,safe_not_equal,{})}}const TopBar_svelte_svelte_type_style_lang="";function create_if_block(r){let e,a,t,n,s,c,d,u,_,m,g,b,S,C,k,R,w,$,P,O,B,N,j,U,q,V,W,x,J,X,Z,ee,Q,z,K,ne,F;return s=new Icon({props:{theme:"mini",src:Power,class:"h-12 pointer-events-none"}}),w=new Icon({props:{theme:"solid",src:Wrench,class:"h-12 pointer-events-none"}}),J=new Icon({props:{theme:"solid",src:AdjustmentsHorizontal,class:"h-12 pointer-events-none"}}),{c(){e=element("div"),a=element("div"),t=element("ul"),n=element("li"),create_component(s.$$.fragment),c=space(),d=element("li"),d.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Shutdown ROV</span>',u=space(),_=element("li"),_.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Reboot ROV</span>',m=space(),g=element("li"),g.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Restart ROV Services</span>',b=space(),S=element("div"),C=space(),k=element("ul"),R=element("li"),create_component(w.$$.fragment),$=space(),P=element("li"),P.innerHTML='<span class="btn btn-ghost svelte-16r1evb">System Status</span>',O=space(),B=element("li"),B.innerHTML='<span class="btn btn-ghost svelte-16r1evb">ROV Logs</span>',N=space(),j=element("li"),j.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Local Debug Links</span>',U=space(),q=element("div"),V=space(),W=element("ul"),x=element("li"),create_component(J.$$.fragment),X=space(),Z=element("li"),Z.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Enable ROV Wifi</span>',ee=space(),Q=element("li"),Q.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Disable ROV Wifi</span>',attr(n,"aria-hidden","true"),attr(d,"role","menuitem"),attr(_,"role","menuitem"),attr(g,"role","menuitem"),attr(t,"class","menu inline-block menu-normal flex-1 svelte-16r1evb"),attr(S,"class","divider md:divider-horizontal md:m-0"),attr(R,"aria-hidden","true"),attr(P,"role","menuitem"),attr(B,"role","menuitem"),attr(j,"role","menuitem"),attr(k,"class","menu inline-block menu-normal flex-1 svelte-16r1evb"),attr(q,"class","divider md:divider-horizontal md:m-0"),attr(x,"aria-hidden","true"),attr(Z,"role","menuitem"),attr(Q,"role","menuitem"),attr(W,"class","menu inline-block menu-normal flex-1 svelte-16r1evb"),attr(a,"class","multi-menu card-body md:flex-row rounded-box  svelte-16r1evb"),attr(e,"class","mt-1 mb-24 m-auto w-full max-w-max card card-compact dropdown-content bg-base-100 shadow p-1 overflow-auto pointer-events-auto")},m(Y,ae){insert(Y,e,ae),append(e,a),append(a,t),append(t,n),mount_component(s,n,null),append(t,c),append(t,d),append(t,u),append(t,_),append(t,m),append(t,g),append(a,b),append(a,S),append(a,C),append(a,k),append(k,R),mount_component(w,R,null),append(k,$),append(k,P),append(k,O),append(k,B),append(k,N),append(k,j),append(a,U),append(a,q),append(a,V),append(a,W),append(W,x),mount_component(J,x,null),append(W,X),append(W,Z),append(W,ee),append(W,Q),K=!0,ne||(F=[listen(d,"click",RovActions.shutdownRov),listen(d,"keypress",selectKeypressFactory(RovActions.shutdownRov)),listen(_,"click",RovActions.rebootRov),listen(_,"keypress",selectKeypressFactory(RovActions.rebootRov)),listen(g,"click",RovActions.restartRovServices),listen(g,"keypress",selectKeypressFactory(RovActions.rebootRov)),listen(P,"click",RovActions.getRovStatusReport),listen(P,"keypress",selectKeypressFactory(RovActions.rebootRov)),listen(B,"click",RovActions.getRovLogs),listen(B,"keypress",selectKeypressFactory(RovActions.rebootRov)),listen(j,"click",r[4]),listen(j,"keypress",selectKeypressFactory(r[5])),listen(Z,"click",RovActions.enableRovWifi),listen(Z,"keypress",selectKeypressFactory(RovActions.rebootRov)),listen(Q,"click",RovActions.disableRovWifi),listen(Q,"keypress",selectKeypressFactory(RovActions.rebootRov))],ne=!0)},p:noop$1,i(Y){K||(transition_in(s.$$.fragment,Y),transition_in(w.$$.fragment,Y),transition_in(J.$$.fragment,Y),add_render_callback(()=>{K&&(z||(z=create_bidirectional_transition(e,slide,{},!0)),z.run(1))}),K=!0)},o(Y){transition_out(s.$$.fragment,Y),transition_out(w.$$.fragment,Y),transition_out(J.$$.fragment,Y),z||(z=create_bidirectional_transition(e,slide,{},!1)),z.run(0),K=!1},d(Y){Y&&detach(e),destroy_component(s),destroy_component(w),destroy_component(J),Y&&z&&z.end(),ne=!1,run_all(F)}}}function create_fragment$3(r){let e,a,t,n,s,c,d,u,_,m,g,b,S,C,k,R,w,$,P,O;s=new Icon({props:{theme:"solid",src:Cog6Tooth,class:"w-6 h-6 pointer-events-none"}}),_=new CompassDial({}),S=new Icon({props:{theme:"solid",src:QuestionMarkCircle,class:"w-6 h-6 pointer-events-none"}});let B=r[1]&&create_if_block(r);return w=new Icon({props:{theme:"solid",src:r[2]?ArrowsPointingIn:ArrowsPointingOut,class:"w-6 h-6 pointer-events-none"}}),{c(){e=element("div"),a=element("div"),t=element("div"),n=element("button"),create_component(s.$$.fragment),d=space(),u=element("div"),create_component(_.$$.fragment),m=space(),g=element("div"),b=element("button"),create_component(S.$$.fragment),C=space(),B&&B.c(),k=space(),R=element("button"),create_component(w.$$.fragment),attr(n,"class","btn btn-ghost btn-square rounded-tl-none"),n.disabled=c=r[0]!=ConnectionState.connected,attr(t,"class","pr-3 justify-start flex-shrink"),attr(u,"class","navbar-center flex-1 self-stretch"),attr(b,"class","btn btn-square btn-ghost !rounded-tr-none"),attr(g,"class","pl-3 justify-end flex-shrink"),attr(a,"class","navbar rounded-t-none shadow-xl rounded-box h-9 p-0 min-h-0 lg:rounded-t-none bg-base-100 m-auto max-w-sm top-bar flex-none pointer-events-auto overflow-hidden svelte-16r1evb"),attr(e,"class","px-1 absolute flex w-full flex-col max-h-screen pointer-events-none"),attr(R,"class","btn btn-square bg-base-100 pointer-events-auto absolute -right-1 -top-1 rounded-none rounded-bl-2xl")},m(N,j){insert(N,e,j),append(e,a),append(a,t),append(t,n),mount_component(s,n,null),append(a,d),append(a,u),mount_component(_,u,null),append(a,m),append(a,g),append(g,b),mount_component(S,b,null),append(e,C),B&&B.m(e,null),insert(N,k,j),insert(N,R,j),mount_component(w,R,null),$=!0,P||(O=[listen(n,"click",r[3]),action_destroyer(addTooltip.call(null,n,{label:"Menu",placement:"left"})),action_destroyer(addTooltip.call(null,b,{label:"Hover or long-press buttons to show help",placement:"bottom",timeout:0})),listen(R,"click",r[6]),action_destroyer(addTooltip.call(null,R,{label:"Toggle Fullscreen",placement:"right"}))],P=!0)},p(N,[j]){(!$||j&1&&c!==(c=N[0]!=ConnectionState.connected))&&(n.disabled=c),N[1]?B?(B.p(N,j),j&2&&transition_in(B,1)):(B=create_if_block(N),B.c(),transition_in(B,1),B.m(e,null)):B&&(group_outros(),transition_out(B,1,1,()=>{B=null}),check_outros());const U={};j&4&&(U.src=N[2]?ArrowsPointingIn:ArrowsPointingOut),w.$set(U)},i(N){$||(transition_in(s.$$.fragment,N),transition_in(_.$$.fragment,N),transition_in(S.$$.fragment,N),transition_in(B),transition_in(w.$$.fragment,N),$=!0)},o(N){transition_out(s.$$.fragment,N),transition_out(_.$$.fragment,N),transition_out(S.$$.fragment,N),transition_out(B),transition_out(w.$$.fragment,N),$=!1},d(N){N&&detach(e),destroy_component(s),destroy_component(_),destroy_component(S),B&&B.d(),N&&detach(k),N&&detach(R),destroy_component(w),P=!1,run_all(O)}}}function instance$3(r,e,a){let t,n;component_subscribe(r,rovDataChannelConnState,m=>a(0,t=m)),component_subscribe(r,fullscreenOpen,m=>a(2,n=m));let s=!1;const c=()=>a(1,s=!s),d=()=>window.open("./404.html"),u=()=>window.open("./404.html"),_=m=>toggleFullscreen(m,null);return r.$$.update=()=>{r.$$.dirty&1&&t!=ConnectionState.connected&&a(1,s=!1)},[t,s,n,c,d,u,_]}class TopBar extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$3,create_fragment$3,safe_not_equal,{})}}const GamepadLeftSvg=`<svg width="100%" height="100%" viewBox="0 0 123 232" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd">
  <g id="left_side_of_controller">
    <path d="M112.977 140.769c-6 29.375-13.537 33.424-35.28 43.583-35.355 16.519-33.138 57.105-56.59 45.51-14.36-7.1-21.13-19.23-21.13-38.4 0-24.92 11.42-65.99 32.4-119.1 10.625-22.199 25.844-16.641 42.794-16.641 7.93 0 15.744-1.226 22.454 2.224 14.564 7.511 21.031 55.022 15.352 82.824Z"/>
    <g id="stick_button_left">
      <g id="stick_bg_left">
        <circle id="shadow10" cx="81.987" cy="176.33" r="26.46" style="fill-opacity:.5"/>
        <circle id="Oval5" cx="80.737" cy="175.09" r="25.21" style="fill:#6180b0;stroke:#000;stroke-width:2.49px"/>
      </g>
      <path d="M80.737 179.329v-8.477h25.442v-7.872l12.11 12.11-12.11 12.11v-7.871H80.737Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_right_direction_highlight"/>
      <path d="M76.499 175.09h8.477v25.442h7.872l-12.11 12.11-12.11-12.11h7.871V175.09Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_down_direction_highlight"/>
      <path d="M80.737 170.852v8.477H55.295v7.871l-12.11-12.11 12.11-12.11v7.872h25.442Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_left_direction_highlight"/>
      <path d="M84.976 175.09h-8.477v-25.442h-7.872l12.11-12.11 12.11 12.11h-7.871v25.442Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_up_direction_highlight"/>
      <g id="stick_left">
        <circle id="shadow11" cx="82.597" cy="176.96" r="17.12" style="fill-opacity:.5"/>
        <use xlink:href="#2a" x="48" y="143" width="65" height="65" class="gpad-highlight" id="stick_button_left_highlight"/>
        <g id="Group-6">
          <circle id="Oval-Copy" cx="80.737" cy="175.09" r="15.88" style="fill:#fff;stroke:#000;stroke-width:2.49px"/>
          <circle id="Oval-Copy-2" cx="80.737" cy="175.09" r="12.14" style="fill:#fff;stroke:#000;stroke-width:1.25px"/>
          <path d="M79.737 170.127a.402.402 0 0 0-.4-.4h-.725a.4.4 0 0 1-.32-.64l2.125-2.833a.4.4 0 0 1 .64 0l2.125 2.833a.4.4 0 0 1-.32.64h-.725a.402.402 0 0 0-.4.4v2.088a.402.402 0 0 0 .354.397c1.712.21 3.36.845 4.718 1.903a.4.4 0 0 0 .481.011l.619-.445a.399.399 0 0 1 .634.332l-.058 3.054a.4.4 0 0 1-.519.374l-2.916-.91a.402.402 0 0 1-.114-.707l.125-.091a.398.398 0 0 0-.018-.662 7.939 7.939 0 0 0-2.845-1.046.4.4 0 0 0-.459.394c-.002 1.15-.002 4.148-.002 5.234a.4.4 0 0 0 .4.4h.725a.4.4 0 0 1 .32.64l-2.125 2.833a.398.398 0 0 1-.64 0l-2.125-2.833a.4.4 0 0 1 .32-.64h.725a.4.4 0 0 0 .4-.4v-5.21a.4.4 0 0 0-.467-.395 8.156 8.156 0 0 0-2.818 1.075.398.398 0 0 0-.024.654c.045.036.093.072.141.108a.4.4 0 0 1-.127.704l-2.93.861a.399.399 0 0 1-.513-.383l-.006-3.054a.4.4 0 0 1 .639-.322l.604.451a.4.4 0 0 0 .486-.005c1.357-1.045 2.985-1.681 4.666-1.909a.4.4 0 0 0 .348-.396l.001-2.105Z"/>
        </g>
      </g>
    </g>
    <g id="select_button">
      <use xlink:href="#2b" x="78" y="118" width="43" height="39" class="gpad-highlight" id="select_button_highlight"/>
      <path id="select" d="M105.267 133.325a7.506 7.506 0 0 1 2.496 5.595 7.507 7.507 0 0 1-2.496 5.596H95.213a7.507 7.507 0 0 1-2.496-5.596c0-2.22.964-4.217 2.496-5.595h10.054Z" style="fill:#9a9a9a;fill-opacity:.5"/>
      <path id="select1" d="M104.162 132.138a7.506 7.506 0 0 1 2.496 5.595 7.507 7.507 0 0 1-2.496 5.596H94.108a7.507 7.507 0 0 1-2.496-5.596c0-2.22.964-4.217 2.496-5.595h10.054Z" style="fill:#fff;stroke:#000;stroke-width:1.35px"/>
      <text x="96.295" y="141.267" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:9.858px">?</text>
    </g>
    <g id="d_pad">
      <path d="M86.434 71.626c.913 0 1.659.746 1.659 1.659v18.212h18.212c.913 0 1.66.747 1.66 1.659v14.893c0 .913-.747 1.66-1.66 1.66H88.093v18.211c0 .913-.746 1.66-1.659 1.66H71.541c-.911 0-1.66-.749-1.66-1.66v-18.211H51.67c-.911 0-1.66-.749-1.66-1.66V93.156c0-.902.747-1.659 1.66-1.659h18.211V73.285c0-.902.747-1.659 1.66-1.659h14.893Z" style="fill:#9a9a9a;fill-opacity:.5" id="shadow14"/>
      <use xlink:href="#2c" x="53" y="54" width="48" height="53" class="gpad-highlight" id="d_pad_up_highlight"/>
      <use xlink:href="#2d" x="53" y="91" width="48" height="52" class="gpad-highlight" id="d_pad_down_highlight"/>
      <use xlink:href="#2e" x="70" y="75" width="52" height="48" class="gpad-highlight" id="d_pad_right_highlight"/>
      <use xlink:href="#2f" x="33" y="75" width="52" height="48" class="gpad-highlight" id="d_pad_left_highlight"/>
      <path d="M84.774 69.966c.913 0 1.66.747 1.66 1.66v18.211h18.222c.902 0 1.659.747 1.659 1.66V106.4c0 .903-.757 1.66-1.659 1.66H86.434v18.211c0 .903-.747 1.66-1.66 1.66H69.892c-.911 0-1.66-.749-1.66-1.66v-18.222H50.01c-.91 0-1.659-.749-1.659-1.659V91.497c0-.913.747-1.66 1.659-1.66h18.212V71.626c0-.913.747-1.66 1.659-1.66h14.893Z" style="fill:#fff;stroke:#000;stroke-width:1.66px;stroke-linejoin:round"/>
      <path d="m91.827 94.401 9.095 4.542-9.105 4.564V94.39l.01.011Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_right"/>
      <path d="m62.839 103.496-9.106-4.553 9.106-4.553v9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_left"/>
      <path d="m81.881 113.432-4.553 9.106-4.553-9.106h9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_down"/>
      <path d="m72.775 84.455 4.563-9.106 4.543 9.106h-9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_up"/>
      <path id="center_icon" d="M71.374 99.114c0-.817.672-1.49 1.49-1.49h8.939c.817 0 1.49.673 1.49 1.49v3.642c0 .817-.673 1.49-1.49 1.49h-8.939c-.818 0-1.49-.673-1.49-1.49v-3.642Zm1.071 1.382v2.389c0 .268.219.485.49.485h8.83a.49.49 0 0 0 .491-.485v-1.742l-1.452-1.437a.497.497 0 0 0-.694 0l-1.249 1.236.308.305c.099.091.156.22.156.355a.491.491 0 0 1-.85.331l-3.394-3.36a.497.497 0 0 0-.694 0l-1.942 1.923Zm5.55-2.209a.662.662 0 1 1 .001 1.323.662.662 0 0 1-.001-1.323Zm-5.131-1.656-.082.001c.21-.594.775-.995 1.406-.994h6.29c.649 0 1.202.415 1.406.994l-.081-.001h-8.939Zm1.242-1.985.082-.002h6.29c.028 0 .055 0 .082.002a1.493 1.493 0 0 0-1.406-.995h-3.642c-.63 0-1.196.4-1.406.995Z"/>
    </g>
    <g id="shoulder_trigger_back_left">
      <g class="direction_highlight" id="shoulder_trigger_back_left_direction_highlight">
        <path d="M110.415 51.254 98.146 34.763h24.538l-12.269 16.491Z" style="fill:#ff00bf"/>
        <path d="M97.161 17.167c2.534 0 13.254.512 13.218 21" style="fill:none;stroke:#ff00bf;stroke-width:8.5px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"/>
      </g>
      <path id="shadow4" d="M54.417 40.591h37.84c1.52 0 2.77-.618 2.77-1.36a.695.695 0 0 0-.07-.309l-10.9-23.604c-.7-1.545-3.53-2.648-6.75-2.648h-11.8c-7.66 0-13.86 3.05-13.86 6.811v19.761c0 .741 1.25 1.36 2.77 1.36v-.011Z" style="fill-opacity:.5"/>
      <use xlink:href="#2g" x="32" y="3" width="76" height="56" transform="translate(0 -4.346)" class="gpad-highlight" id="shoulder_trigger_back_left_highlight"/>
      <path id="bg" d="M51.957 38.16c-.38 0-.73-.072-.98-.196-.25-.124-.4-.288-.4-.484V17.719c0-1.69 1.4-3.225 3.65-4.327a20.546 20.546 0 0 1 8.83-1.803h11.79c1.26 0 2.48.206 3.46.597.98.392 1.67.928 1.95 1.525l10.9 23.625c.03.34-.13.515-.38.628-.26.134-.6.206-.98.206h-37.84v-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.2px"/>
      <path d="m74.228 32.999-.217-.942a.766.766 0 0 0-1.493.343l.9 3.914 3.914-.9a.766.766 0 0 0-.343-1.493l-1.606.369c.66-1.61.965-3.317.85-5.04a.766.766 0 0 0-1.529.101 9.59 9.59 0 0 1-.476 3.648Zm-9.227-13.535a2.177 2.177 0 1 1 4.168-.327.93.93 0 0 1 .191.118l2.594 2.023a.986.986 0 0 1-1.213 1.555l-2.594-2.023a1.04 1.04 0 0 1-.16-.158 2.16 2.16 0 0 1-1.678.093l-3.292 3.361.048.141.046.179c.021.101.036.205.043.312v.269c-.006.101-.019.2-.038.297l-.055.216a1.959 1.959 0 0 1-.044.129l3.292 3.361a2.16 2.16 0 0 1 1.678.093.957.957 0 0 1 .16-.158l2.594-2.023a.986.986 0 0 1 1.213 1.555L69.36 30.5a.97.97 0 0 1-.191.117 2.179 2.179 0 1 1-4.308.516 2.184 2.184 0 0 1 .14-.842l-3.291-3.362-.006.002a2.14 2.14 0 0 1-.356.093l-.131.018-.236.013-.171-.007-.188-.023a2.142 2.142 0 0 1-.447-.125l-.232-.108-.19-.117-.204-.158-.153-.147-.147-.173-.081-.113-.129-.221-.084-.186a2.661 2.661 0 0 1-.035-.095h-2.107v1.616a.704.704 0 1 1-1.408 0v-4.641a.704.704 0 1 1 1.408 0v1.616h2.107l.084-.209.08-.155.124-.195.144-.181.089-.095.125-.115.144-.113.065-.045.274-.156a2.182 2.182 0 0 1 .737-.2l.313-.006.24.027c.128.021.251.053.371.095l3.291-3.361Zm1.228 10.811.04-.038a1.127 1.127 0 1 1-.04.038Zm-4.929-6.48a1.13 1.13 0 0 0-1.401.76l-.032.141-.014.181.016.195.03.128a1.13 1.13 0 0 0 1.396.761l.113-.04c.411-.168.7-.572.7-1.044l-.002-.072a1.13 1.13 0 0 0-.698-.972l-.108-.038Zm12.928-7.039a9.59 9.59 0 0 1 .476 3.648.766.766 0 0 0 1.529.101c.115-1.723-.19-3.43-.85-5.04l1.606.369a.766.766 0 0 0 .343-1.493l-3.914-.901-.9 3.915a.765.765 0 1 0 1.493.343l.217-.942Zm-7.959 2.762a1.128 1.128 0 1 0-.04-.039l.04.039Z"/>
    </g>
    <g id="shoulder_button_front_left">
      <path id="shadow5" d="M94.279 44.584H54.287c-2.643 0-4.818 2.591-4.818 5.74v6.9c.004 1.258.875 2.29 1.931 2.29h45.767c1.059 0 1.93-1.038 1.93-2.3v-6.88c0-3.149-2.175-5.74-4.818-5.74v-.01Z" style="fill-opacity:.5"/>
      <use xlink:href="#2h" x="30" y="31" width="86" height="41" class="gpad-highlight" id="shoulder_button_front_left_highlight"/>
      <path id="bg1" d="M92.769 44.934h.017c2.109 0 3.844 2.067 3.844 4.58v6.92c0 .625-.433 1.14-.957 1.14H49.897c-.529 0-.965-.519-.965-1.15v-6.9c0-2.513 1.735-4.58 3.844-4.58h39.993v-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.12px"/>
      <text x="70.61" y="54.634" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:15px">-</text>
    </g>
    <g id="l_touch_targets" opacity="0">
      <path id="stick_button_left_touch_target" d="M103.497 149.101c7.227 6.337 11.792 15.634 11.792 25.989 0 19.069-15.482 34.551-34.552 34.551-19.069 0-34.551-15.482-34.551-34.551 0-19.07 15.482-34.552 34.551-34.552 2.258 0 4.466.217 6.601.631 1.548 5.051 6.247 8.728 11.797 8.728 1.535 0 3.005-.281 4.362-.796Z" style="fill:#419bf3"/>
      <path id="select_button_touch_target" d="M93.558 126.53a12.266 12.266 0 0 1 5.577-1.333c6.809 0 12.336 5.534 12.336 12.35s-5.527 12.35-12.336 12.35-12.337-5.534-12.337-12.35c0-1.681.336-3.284.945-4.744a18.743 18.743 0 0 0 5.815-6.273Z" style="fill:#419bf3"/>
      <path id="d_pad_left_touch_target" d="M57.9 116.925c-10.093-.218-18.219-8.48-18.219-18.625 0-10.281 8.346-18.628 18.628-18.628.14 0 .279.002.419.005l18.205 18.204v.01L57.9 116.925Z" style="fill:#419bf3"/>
      <path id="d_pad_down_touch_target" d="m57.9 116.925 19.042-19.043 19.033 19.042c.004.14.006.279.006.419 0 10.282-8.348 18.629-18.629 18.629-10.282 0-19.452-8.765-19.452-19.047Z" style="fill:#419bf3"/>
      <path id="d_pad_up_touch_target" d="M67.141 63.678h20.421c4.962 3.261 8.277 8.827 8.413 15.17L76.942 97.882l-.009-.001-18.205-18.204c-.004-.14-.005-.279-.005-.419 0-6.512 3.349-12.249 8.418-15.58Z" style="fill:#419bf3"/>
      <path id="d_pad_right_touch_target" d="m76.942 97.882 19.033-19.034c10.281 0 19.048 9.171 19.048 19.452 0 10.282-8.348 18.629-18.629 18.629-.14 0-.279-.002-.419-.005L76.942 97.882Z" style="fill:#419bf3"/>
      <path id="shoulder_button_front_left_touch_target" d="M99.096 41.101H47.503c-2.766 0-5.009 2.197-5.009 4.908v15.706c0 1.077.905 1.963 2.004 1.963h57.603c1.099 0 2.004-.886 2.004-1.963V46.009c0-2.711-2.243-4.908-5.009-4.908Z" style="fill:#419bf3"/>
      <path id="shoulder_trigger_back_left_touch_target" d="M47.697 41.101h52.635c1.521 0 2.816-1.579 2.065-2.955-2.77-5.082-14.508-29.61-14.508-29.61-.743-1.517-3.545-2.595-6.742-2.595H58.788c-7.657 0-13.864 3.027-13.864 6.761v27.047c0 .741 1.252 1.352 2.773 1.352Z" style="fill:#419bf3"/>
    </g>
  </g>
  <defs>
    <image id="2a" width="65" height="65" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAYAAACO98lFAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHVUlEQVR4nO1b2XLjOAyEnawzmUxm9mF+Ll84P5eXzX1rX9R2q9UAacXeo2pQhaJsyyLRBEAQoCJ+U6yO3cHVcF31wb8N1XN+rX6Wv3+GDg6CEXqVXLvPQ8f1wQE5GAgi/Iralfmu6nugdjDfcXsQQD4NAgmfCb6m79w9TApAxXz/p8BYDIKZeeU1teuoAcmE/2i0/J/FQCwCQWY/E/wkdgDoZwUCpIJ+RMR7cs33TjRjXzD2AiFRfSf4CfEpXfM9CgTPPgRWfpPfGJCJqewDRDcIjdlXoStWDQE5AN4a/B5TDVkERBcICQCs5izkHyNvpMVvuJ+1gUFgAF6JX+RawXCa0QVEE4QEAFZtFXwTEWcjb6hlMAACgGBTUABeRn4e+YVaAMNAvIc4zxYQJQgFAGAV/ovhM2LcD7NQTWAteCF+MsygODC6gTitQCgAwGzyrH+JiPOI+Dq2zApECwTWAAj9SLwZ28zJxvic7bOvhutVBkQKgokD1AfwzEP4rxFxMTI+n9N9bBIsAIMAO4faMwD3MQdyLc9R+qDnW7J/FDNQ4aH+EP58FPrbyBfUAoweEODUMhDuie9G5u8eY2cmMA82jSEiBqcNlTm4ZRAgQP0x85ej4N/HFp9bILR8AoPAPkafEfQMx1vf4MxiBkLDDDIAvgs7ELBKYJlsgfAaO+f3GFOfwv93ALggivuZUKYJLhaAZz+LnQ/ArH+PiB8jA4hvsfML0IJNzE0hixPgHJ9juszy/0P+68LrWRCl2tBjDuuYrwbsBy5H4f8kEKAJcIwQgqNGFzazENAGaE/lUF2kmQZQIdowAWE0hSwiZFNgENgMGISL2K0MmUME8+BUG3oAYNBcJAkwuC8PApFziKwF8AfQBJgErlULsiUt20WC3X6DVxNeUl2IrXuMLRBsEg6EbEUACOwUsSxexnSJhC9QZ1htpVUbPuh+5z8yJ1pFkuvYOcm5TyBTyIBgTWBtUGYNYC1o5RIYiHUCAoPk4gkXVmeOeEtLNUEjRF4FeL9Q+QFHmCHdrkN4sGoAYomHmC/HzpdMNIGXGR4IO0V1jNAGjhg1NNaVwM2oCuoY/9Gdqu5XdBwZCJP+EROpJlQD0G2y2yXqdtl2boDXMTBhojAZ78k4dOfauyKVq4NLmigQbneone4DgI6BgRhkLFn+QnMXThMn4ziNmMUHVe7glDrQIIYB4I6dUPuQbubURJndmHg81h9lPsFtnnQWeBDaoVtplpBqg45HweCxuQnRcW0fnHXOJqEdaxY5iwGWCu/G4sbVGlO2Kk3GpSC4DhWMjDPhDwGEjqd3TOqXus1BB5517B5+aC1okY7N9d8cRwbC/5UWgZ+BoGXxfQqkQ5id2pFor6JtRgqCCuCyNRW7zg8FiEuZVXXLtESnVGmCE94lLcoszgFIn9Ma01vUEzQbmwMhE5737e46A8MJsi9l2tiqV2ZF28mY1hHb6oyzbdeRqw06MPa2zUL4bFJeC66AmFCPJrjSWFUT1PzeUiBckoXzCK5OWY1HD3ZsyW2gVAu0LMZJDG6fY7qF5nUbYHO+oEf4TCN1LDoOl1VKtUFBcB5YkXe1Qc0ouw0Lg9EiTaCw+nONksfwFL4K5Uw0InbVqGwrrabANQDuHJkczihzzM5CnYwt5/laAGAM7IdU+AdigPBkQHBARPBAxTmqCjotuDeMgWAwmLXsMIXz9u6QhuYRIXTWP7Sh0oQttXwCA4GBcElMK0PsC0Ke00q5u5WAfYCCfyfMILBfqFasFAQFwiU1HyKvDPEzGEg1lSyR6lYBgP8wCnwbETfEt+Gr06lTTMtwv1Y/h6vhWoVgTeAMkzuMxQKxWmsZTvOOFfCqBbcCAj7fxdQc1Cfg2TOqapGo1mBASGI8xTTL5CpDqsqupL5PQRbaB9W/iYi/Rr6h7wFCtjyiny4QcKMCAdWsKkPOo6OyzOajOcjM/GAKUHc1BTaHh5g7xdIULAijSTihNHHhhMhmkeOIpYc02CECCDUFtypMTqqovBYEEUqBeI25QwOp/2BbZhCqMwZVXIIl0a0KrAXOF2yF7z6uQ9rAzgpm8TrexiDoHkM9egWC9pNFhi420CAJS2PXxglUpqI6zitofZKLtb2lscqhsk+Ac3yMeVDmAjPd1qdnGXvOMbKTzH6vljWtUbp4gUFwTtUd5tQNE+8auwGIaGhChD3VmhVruQSmJTp3rLfn4BYD8WyuOafhEjsR4Y/t7QVCAwitVbqS2Ea+1/AZ5OIE1iz2E5o44VcAOChqAtANQgJEVglypTqefY4RqjDbpfSyM0k2rXfQo/6gxjsPzkyyFz9aYbPbUb4bThO8R3npA1S8+8RVKYDBbVa2Y9JUGgPCbZZB3hsACLGIirfgtETXKtsxue20u7bCRyx7GexT9cLGu5A97MgJyMLrPRHxL70SyFSAgTa7VhpMm11HxH/k5VClBJDq2tFMWLk+6KvCRy2fFy+L94IwoWO9NP5PnCGYUfUm/THfjv9NBf0N6UGHaHzqzbQAAAAASUVORK5CYII="/>
    <image id="2b" width="43" height="39" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAnCAYAAACWn7G7AAAACXBIWXMAAA7EAAAOxAGVKw4bAAADoklEQVRYhdWZ3XbaMBCExxQSCm2v8nJ5wrxc7hrCT0joBRo8HkayKTetztkjY2T0abzeXQvgP2rdPRc/n15vuv6lezrdM9/kySpgty72CvaWBYxOZpCd9a3jBHeq9ADGwauwDUg1hOMxODXYcRM4wgpogpxVjn1xNcCvyufLomrAV7AG6pDJHFqbQyVLC4jA87SCBuQ3s5n0Duygn8X0mIZy/rLI59Nr58AD2KCqQs5LvyjHcznnwAqrcMdgXQ04KZhAOSlBCLgA8GD9QhbjsAr6IXawzx8YKn/xY1XX3cBvPyEI9wDg0YzQhJ0JrIPui81LX/NxXfClJZ8lrKq6KGBLAN+LLYspMN1BYY84K7kHsCtG9/G7cBXa1HdryrqvPhSwVbF16QlOYMJ26F2Aiu4AvNuiUqTQ8wN156SXVSosXUBV/SFG6GWBpWIoEx8L7A7AVsbMZIxHB57TWN3DBmXpBuqvVHYN4KfYWtRdmLJ8mLblewflYmjHApxi9k1u8FigVjir+kuAV+hdwWH3shCqRfc4iGk00bsco0GKsUldAqvCa/SuoG5AWILwlh/QP2yMJBqvo7IzP9FQV4Edeo3eh92naXwgGUGoNkFTFgSAjjkguYEDc8WatTTuauylssxKFOOIs8KaSGrZr1bBVWsDH5ySRaoVaLz2qzI2FUC1krSawbTV6koP3MmmjPM5Rt8YWrA6ocdCFiEaduboowBKzyedY3ldqgPSIppxNtWfDsfUyaxEPz2VMeqzmhD49O9lERpbFXoAnNKtDkqgmt81G2lMZSrt5Fqm2TcAm3K8FWgHdujJynohQkiFIugSOYPxug2A3w1gugbnVgGbsKosb70GcIYkfs906rBc6LYAbnBW+A29a4y5Q4RlHcmB6gJ7DMMOTDktZLRE1EKG7rARo7qEHXeDl+7pVLJETVl9DyMoVeND5qqrG/GB3Iq9o3/gkrLAiBtwACdK+wRepzKLadrk7xBWo8gO15HBX2viW27y2Rqwnqeq/h6Wqn8HTqZuEF0AsPwrRbgXMlobaG6vVUyE1fcwTySeKLiwC3DzVVwmAa5fi9WXGfy9YvIqTtXldQrvbwieyQZtyo6MFh1exPjOTGuTQ+0znBvE17QjM2WvK+1z1Xr9TS9ofKuounUE5O2jCBuAE3iKFGkfQIHHKrQqaBPWgB261aeWqqmrWPrX+7Pawq732OfUqrXr1N3vSbDabv0fodbu/X/hn29/AAo2VaYa5XYBAAAAAElFTkSuQmCC"/>
    <image id="2c" width="48" height="53" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA1CAYAAAAHz2g0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEw0lEQVRoge1ay3LbMAxc2c6zSU/5uX5hfq7HJo7t2OqhXGu1Akgp8UybmXIGI1mWCCxeBCEBX3x0l5zsR/9z9nzP3VN/CZ6zGTaE+4wiUiBzQFYZB0J3M86XDBewz/7LwISMTfAuOEbXqnPOELSvnAOIQawajCjsqtBaaFPoSug6+H2dXL+S5znXWnithH8HxG48uSA36cMrjIH4uVNtuJZ7ACc5nux3bzSyxIhZRXhqPzq6xhAcM8Ep5LFxTEFsAg258O426j68Hpm9BYCaPhZ6lyPPO/lf5ziPCAAZq+YjfydFQDIAmfCHIvSh0L781mdPMt/UhYr7uNtQcAbdTaFrOXoQasyQBxmqb1PbFJi0kyMB0SLqUnjunvqaC6n2KfwtgLtyvDVAbgkH4D5PzVPYt0Jre0YDW90zjQFg6j4EcAfgXohgbjB2J89OketQuxScSlglwiuIswttgGb2oQsRwLdCD+VIEHQnWiED4K6zBfBa+FAOve8d09g6j6UuRAs8APhuIOhKfCYCoBlnXzRP63FR7TEOaMbAezDnBIBaIosBAngUusdgBQY05+Bw36ffq/CnIuiuEC0apWg4ABde44DLf2SFR4ytQADKUC1A7e/wx31UeALTmPK5VN5qFuowXsAiEIyFBwyxQMYRALoCAWwEGAPa03O2SALIs5ACURAszDSlalYiALpFBmBX5gTGWteU7MWdr/DNGMhKCq0oyVTXBwVAxsxAmlW6co3C+6JY1TxH5kIKwuNBXcpLZi2dIwDUKMrvPaZliS6IUYU7y4VaVakXeFrb1yygeV6fy4pCz/2z1gG9ObJGVGJHwByAW2Jtz9VcZpELZUBq8VEjXfqz/1s80jEHQAZmCS19dvZo7Yn/+fEfwN8eXx7A0iDm8C5BjT5y/0UBLGGuOyeOLvhvCdgPA/AJsibUEeMNN6/xfgVwrDwTAYzkmAXABc+E9l7OAUMez4o53WFpD8gBZZZpAshMqUyU+R7D/la3hVp6qAVYPvO5rHUSWQN23rRApHFtPnHr9ybC877WfoDdCAejVoksMRoOQG/yJpRvB7UdssZgJVajmQV0Q78t5GAia7g7hQCAMeJoI07ht0V4ap7WWbInfgXwUohA2KE7CO80MymAKHDVb1Xzrxh3E44YNunaScgAaE/oVyGC2GJoK6ornVuKKm/kQpp1nCGFp4ZVeG8xZgBcIS8BCI0LtYIruupC3kVjn0aF57Zwi6EVottB7wtFc7IzF7kSreAL5DgGnrunvrQXI/+nz2r3mf97K6TVG82sQBAkBrRaIEqp1TQaaUv3tEcM2ve+aK297n1PTwzMSG6BZhC78J0wUoGYz9WtXPiwEYtxbEXvB3ZCTKe+JgDuQia8g2BTlde1Nc7umm7mo62kr+6e4XyB1BU6WwvOk59H8pbGXzMp8frSd2RuCa+rDnZtEsS1l3zqr35d/Td7SxkJXwORValRTaRzxEwaLzuixpNnnEz4CERU6Wal9dl99D1xaz/AoUy0xsnaIXMBKBAFk9Hkc4OQUeVbicg6Ps+cvo6XBBEY+DH6VqLKLAGi5/783KaUCxLV+6N7Fn2t4qPyrdCiLlpjhAK2vhn6lABLvtBqjUt9wfXlxm/KDCtMj03mWAAAAABJRU5ErkJggg=="/>
    <image id="2d" width="48" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA0CAYAAADMk7uRAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEkklEQVRoge1ay3LbMAxcp3bzcnvqz+UL+3O5tY3t2I57CDdergBISjLT8Uw5g6EsiyQWDxKABFx4W7x34MPp8d1js/Zz8eM0d8wkJhJmPx0AgAGAMVAlE8b4wvrqemo7BdfRvRRIuGjBuBKC62yNaHFn+CSE4DoEMVg0YF7pqvjt80WAXLoRvRT/DUAsg0V0cWXyqqBIM1lzCb8kpP+9jX04PS4URLeQSF8lTPpipPci7VQAnPmj9E4KaKCJSAPOPJlcJqSAFIjOF9m5Mn8IiHwc29hOEzo5gIH0lXkyugLw1fqVAXGT8qY2TgkfAOyFnu33Hr02Oi24BtxBKd0VgGujr9JnIDhnJXkyvWvEOYDEkaVPTcg1QKnfALi1niBWGJqTamGM+Y3MsQjGqPbezHKKDyxxlvYtgDsA962/MxDqExkAmgOZ3zZS5v3ZI3rr6DVg9s+eGqCtE8A9gHUjAiGISAsKwO2ekn9CL/nIuY9tztFzINqBqIGbxvAawLdG6wbMtaBmRPuNpH/dxizkmUP7n+QCSU0ocmL6gAK4b8x/b71qgQ6dAXDpr0SyCi4TRre7KYAohJgK4h5nLXBr1TNBbZoAto1JMk+pq0/4zubCHmyjzny0ExGEOvS6XRMApaoaUADPOPvLS7tHjegcszQADLUwBQSB0IwyAJTyHmcTO+FsTrodZwfjqA8o81VIQSYJhoBucLZdXZwaOMh/aL/1QIxO9jJQzEwoA6LB3Ao9EPYVADJFh3WmXfJVWJICUMZ57SG1AllKr3FTBEC3yiwgrCQ/AJIByIAoiAyQMqMAXBORpCczPhWAA4kmnkJznw93nI8AGAP0WQBmNz8cLq79B/Cv28UDmOvEWb2moo+M+xQAY8xkdR22xchzUSErWnc2gGgyLzhl9Rw/8DQWiuo+Xv/pqg8VkAzAWB1H0709+iiTDGcAtIyi6aKCc804XyWAqvRX1XI0RGb+mgHYoU8Znw3MmGmlACo7V+lx0R1esyeV/AF1PnCQcVsD41rRYlbYKhPyLMrrOFvEOe2UlJKp41OjjYEhkMycysKWS96LUGScqd9Ve46ZlQNg87l2jfnfAP60a2qFIMZ8ogOQ2b5LbYM+adG0UMuMEQCaIoWxacw7iB36umjq0JUPZNL3ChptmmkhkxuNMr0uFJnRrwaC5kTHTkvsEQAgNh/aPbMnzawoSa+PRgAioWzQa8K1QBDhwbYEXsvUrbyYmQ/rOOqUR7mv9aCpxd29jKdpqkNHzjz5HIg04DUelaAXdmn7DkDn1SocS+tb9Nur+sCoE3MRj130bQmfoenorqPmVQGITMnPFj8X3JHfQHRpXDMjjWO8qLWy65X87wl6BSA6Y/x090Ot00L1joyLvST3OCnDh6yCFuW4WRSrsVAWG+VOHCzC5i/WdCusXrVWCXoWjntkmtp++poVCF+1qllFdaG51YUs0o3Cdb33NrYEEICIwIyVRTIQUWjsGokoZL5aaOx7Cb9XzlU0D86igC00HWcsbMFnNnN/Zy0KjyPtAKg/uZkstZkfOI058Wh7z8dPF9n+Akw5M9cvVTL/AAAAAElFTkSuQmCC"/>
    <image id="2e" width="52" height="48" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAwCAYAAABe6Vn9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEqUlEQVRogd2a3VLjMAyFT0qh/C1XvBxPyMtxudAW0nYv8GmOFclWYHd2Bs9o8m/7i2RbUgL8sDIsufnp9LLo/r9VnofHU/bebgcdiN7xd4vtfHXcgws7Y0CG5DbTRqtDp+Q2BJt1pAESCcx+rw2vI9phu2/lfL8HtQ464UGsgq0HGMF4QB7AMdhWUE+nl8FCVQ2KdiyIyoVzboWctrIgh7JP0eOZxhTK05CFIcC67FPWmMNFmuoB2c5bGWSrYLNyBnLGDmHY+TWAS7OlEExNMQOkmlGAEcBHkRHTSzrIs4Psz4EExJoaAS4BXAHYlC2PLZRqqgekJqYg70a0vuZYikxOYdYCsgFwXYTHERTrimDU1AhDgH2RHWqNe+NtELiuhi5Qa+YGwG3ZUiyUN0lYGKAeNwqzK7KVeuw4O5ZrqqmpsTJ+KBwzBLkuELcA7ozcYtIWoXQ8tTSk2qGZEeQNwKsjO3xq7r08o7MfnofH01c0dAfgF4D7IoTiuOJE0gLSscNxsy8wfDGD3KMTxEfrhbWmbR1Dl6XTBLoH8FDA7sr5a0yznzU7D8iOnR0+XxqfP2E+tqwFzIqnIUiHaH5XmMxPtfSASUs3mGZD1ZA3hjxz25ZnCUOQPWLtq8xmObvSe1A6MaimCKQNR2bhAe1Qa8ZqTde9pvZ7JqdAOpaoKU4W95hmvCVAHBM6Zgi4kfq0zqZHEpmcB8UJwgMjHE1zCRAXTh7vUS/e6nJ5MFX9GW/bQlnPgbKRfZpGC+ggnaSZ7aVugnhLQRiHRSbXg7L+nQXMaEg9ilHqinxE6yemx5CCWCjrgVvPW497QDzv1WE9eDsJhH5iy+QUJhMnRTFS5Pqcks96bYelBxTBWclcz9aVrcMtq/4t3ZJOMSXq+XZdWQ1FCYue/Ou6FgNFWRjrynsC9NchK/Za1P5ioAyIjftHTDMUkFuHxiJah02Q2KwP0IDygDIg7MiHEcJwnekBqXPK8MBCehmfEKqlIW1cQTQu0ZD5Qu4fE0Dq+uxFCMd2ohSWC2WB9IaWVjTmp2cAuSfjKaiGGKky/FYw1pmCUqDI1Gw2hiCMLglzwDx8QACkmR6+IIbdb6Vu1ZiaoQflAtkG7VvUN6lhAmHekQ/wbOqK4fcrgN8CRm2p+SnUrEQm540b1Yx2+lCuaQieySl4ITi1RCjVFKHClLAHBMw1pKa2xeR4ApNmliRJ7MxpkyRvqLW0RZ3lsWZXFU9D3szGN6hjQ+1f46BeGssbozaNRfOLzC5cYM8NltxcKzmiYTejVM3JeWFy1UYAZLVE06Z2KJwB3UkiSgV7Da0whcm8R7VmTe07qWA7k+qWIHZdqkp2DOm1I2oT0YlgyScVbzZV70OT9TznwYTrEMxN6mDqubFAaOIv+vLQ0lALSsVziapJwf3g9Tw8nuQbkQKNpmH1BqIPXi0YDyjyF72PX19aWFmO5rw25n3kysC0oDwwL8QIve1Zw8F3Vi9R0gJZAuRBachwdM6dn29+NA6gIjh7rVlno9jB7XkArlfgfdYPG1/440WzrmTxZi0PFsCCHy9sSfwak6onWWwnZ53+8q8xXvkfPy8t+XHpR5Y/ZaguuvoNjWEAAAAASUVORK5CYII="/>
    <image id="2f" width="52" height="48" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAwCAYAAABe6Vn9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEqElEQVRogd2ay3LbMAxFIT/qxE26ys/lC/Nz2bV1/IisLsprXV0BJNRkughnMPRDgngEkAQgmX2x1i05+Hl4XXT8Z7WX7mnIHtscoAPR+v7RpoOffG/BhYMRkC7ZZ/VHgxqSfQjmXpBguI/E5HPrGt5AvIFHcjvOg5oNQmBYVkHvAYb6HSgP4hr0MziFmlwwgFmJrJ3fGK4G4oGpXIv0wecq1Ma5iMKsqd+UHp8VMLJUBIMeA8XAezN7L31fdPc2BVM9UyBnEcBgMXjItgj/5kGxrgjEs8p7kYv0nehwFwW1kOdqDPHNkQyU1xgGdx8AFzM7F1mXXm+ClXOH5+G1g9tFLsfzBUA7M7srsqOeLcZQ0FWDgZsxzNnMTmZ2JH16DgQ3LpxD3vzZ2F9L3JnZfZF96QG1s9FSGSupdRjmWAQ3qLO5a+o8mgBg/kB4zsASgPhuZg+l3xPYzkb3w13NAME6bJk3MzuY2W8z+1X6Q5G3Anu2ca7d4F66p6FmIV4QYCGGeiSw+3LMls5rAfHcYTfDjenkOMyt6g2rLdvqcrDWvsA8mtmPAuVZKQvE1jnY6Lb6v87TFBAOiBYFdr1Hkn2BZStFexLPB7gNXG1brjvYOK9ONl8kvAhltspFUQIv2zynGApWAtDG8kCXMljcCMAAYmdT6zDUrLVcji3lQQHswUa3w8Ait2AgzAu42UCAvC3oXhdGJJHL6Txi18MGy/sS4DCPMkB90XW20WVgGejJwEz0exZiOLWWBwYBIAaRAbrYaJm+wOhGnbJMDUjjMAXS+G4rkrUQz4N30uXFiOkcLLKQdyLnQRyBaxTOkXgNCG7m6dC0JJ2e1FyOYTJ5UitHUqAhea537bC1gCK4mgtE/y/Rl9Uxa6v2Ic2WLjEl9HxYV9ZCtaJFq6DxWbpSsC0grbREYbwnZu2NtSUK0gSLgDIgvQjiMrhxZh/COapLiyIKl07BcbBe3APhdBnhy7qcd10AhGgatQMPsGaxJhBftFbA4Lz/ZKNlEHRmgXA+BDoBGJWw3KZASu/B8AA4IeNBZmM5jraRjR4JTK3mWWoCx0DqnzUYDABhTkeD42jbKkCcPiAfQrrtgcH9qitfNIc0RdZqzIFgrBx7so8leEeb1hFgsZNN3Q+WSi0K3iKgd5HTbLOxJsApOIcv3g3DTVDLHwrQT4Fi9wtLwh4QX5Tdja2DAWNQKD1p0TEKJBmI5xFbCZaC+8H1eC6lXE4txCsacnoMEP/DBZE+aIpcA/IKJVzGgpXU7XhvmrTbxUptrlUxvRfRQqOX87eA+MZxofGN4PBdV7+btaJSsLfCIatE49+RYWKByGaW0UrKloIL4vMMwlOcWeW4TKQbIldrPqtYD92wRGajDYF4L9LasQfkZZmZzFKvA70aVnEfwrgPvF66p4GeEUVA7O/6wItT5RoM62sFvhrX4b/FGyuaPimDwpWNc0v3nGyG6UXzHlgrpZi02YUrD421UKK/qb6MhfizB6apw1WOrz80DqAiOP09C6JNg0wvAvC+5x7roy188aKqK9m8PCfql714wS3xakxKT7LpIGeD/udXY6L2v19gWvLi0pdsfwDrTzKXc+jmowAAAABJRU5ErkJggg=="/>
    <image id="2g" width="76" height="56" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAA4CAYAAABXJB78AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGn0lEQVR4nO2c21LjSBBE0zYwHhhmX/bn+ML9OV6XGTCL5wGllU5ltSSDL0RsRXRIsmypdZRVXX2BBQ6wh+3jwj5ajGx9Px23bFsc63YbzuOfxd/+2w/ZnEo7KIXi++kzv98hwBxQOvbPPxXapEoHUA5jiX1QfpygHQpMy1uxTfA+BdxopQVWAkA4Xha2z2O9zqT7YwhL4Wj5z44dIICPQ7uqThSqqgCtuuL7DjEpDsjgPCZVkFheZZ/ngH1wH7b4hk1VwFA1KytXXVnJVov+vnLRylxZDollY8cKT1X3IZWVChPjQ/LBFcy1bK/lWIsqz6EhbIFaXQSgkDYAXqRsunts7Bq8/vZh+7g4FNoAmKnL3Y4QrgHcyPabHSu8ltKAoWsmWAqMyiKoZym/u62rltd8s+PZtnfhEODV/RQUIa1ty0JoqjKNa61YVgFTV1RYvwH8ksJjQqQK1UUPds3kkim4ExaBrAF8t7KWQqhJZZXCKlUkddH9COeb3Gtp10jphl5/llUxTKFRJVTVdwC3XbmTrYKjym7QBtZqKStgqq5fAJ7sPgv7nacZy+46OCSW7YCNuCNdkcq6A/DDikKjEt0tk0vS5gKjutbdfRSW52baWu41AFMgqbnCUsBXd1zjXVE/ANwD+NkVQrtFrzIN/p6XTUktHBhbRwWm6lrK9z030zRjKd+ZrbJWDGMqkYDd4R3UX9iHRpW5wsYC/lRgrjDeY2nf9bSDOZoq7SCVJYW5S2rryPhFl7xHD+0e+8CosKkpRWXeSjLoV8ry/EyBEdoS0lrOUdlYK+nAGPTvunIv5Sd6lySwsdg1BxgV9ophkFdlpfzM0wsG/9kt5hUQx7c8YVVgDPzaUtId79C3ktrMt3IvhGN/CI9jvK7D0txMy3N37hq9yhby+8k2xSWTyqi0VBjw2ToqMGAfzhyFEYymJ8AwtikwTWYJ7Qq9e+/ysoft46REVoGltz4GbW0l5V9V33GOKTRVlsYtz/yf0L9EBcZ4tkIf/CerbBk+S+Nd2o/0znYq3vn2/mQaGkolfcf7s/riCOhWiifTnubsXmYITQNr5WGpi6TDNz4qkTraKaP3e7VM377ur9C7qCbVz6i7bApMYxmD/ySlJYVpZVvgWspJY1+toN8yd2etCxukqlFyaBouYsgYU1nLJb2CDi1l7mMjqx+xKV235J4JWiuhbtqYwvx4rACfC6mql6usFdNSHKsapVGVtYBp5Vpx6BhqatVH7+sNkrvlVJWt7NqljQFLFT4VnCn1GFOZw9JeiELT8AKgVtlcYJdgVQMwBiy1mD4aPCqGrwhMjQ9XJdeem6UWM+VlALLKviqwlO60eiNJaaqyyS3mVwWmlhoATWbHgLW6cQP76sAODf4p+48qc7f86sDUpuZlSWUpxfg0l0yrY85R1LTldGg+slL1L8s4piqbslQgVXTsYXTM/BT5mgKs4lk18awd8pfudzrAuNcpbwHzN+mTotUqGr0ZcDxg1Qy5jm5U4HTrs/Qb+e0bzCpgaXjYZ2/SCppX9G+E4+anUpgOKOrypgpcGsOr5h+aCqvcLkHSaSzKWYeSTwHM66v1TODSgKivbxukF5xZcmB+c1eUT2FxRobZMrrvpbH8Y1uaXdKZIp73vM231UjMFpgWw1rLjDh+zhu9dee9f3Zsq1TGenIsfzD5gZmDnJVLJlgbDCcZqCxW8kU+a+YzR7KkMs6ScyLEZ8G9cVsU+wD2gSV3rFTFNQ3qhi/o5yMndTOOZD6HyRfNl8xpN50NT8uhorViWLWe4Ql9oFRl6XzkuYHpC2cco2f8i/25ypbiBvAql1RY+pZ80RorpAtD0mz3KSylQmnFD5X21B3rXKUuiYpKuwLely526X+KXwqMyoFU5hm9i5ZjSye2VlhRaFzaOdk9W4kr3Y2BU4dwWRG6Ykr+zjmMnV68p0O6lKByTcCgtVpJfTv68FqBm+6GVaYMnAcaH9LX9qvSfIXPC4ZryAbQdsA6t9QbsgP9ahXRuDBnSeYprZWAew9F15Gl4D+qMN5o0PHEEJguHUiB/pwzS1N6Lakkhe1W9rT6ktz3v9nhzVLf69yu6OZpUjWAUC0ebivMWktguBaUAKulApeiLprHoGp4qvoruIHFh5r4J39V38uvec6g758lcNvieHcdXWhXPkz4izaHkiBdgqoq81CThrH83GBVYvMBiz9Z1v1LUNMcc2i+vwcnLeGc9ICN1SyXDmjMBkDG1rke/MBTljdeun32fxz434L9AZ7ptX/DaxeNAAAAAElFTkSuQmCC"/>
    <image id="2h" width="86" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAApCAYAAACvIt7jAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEmklEQVRoge2bzVLbQBCEW8YGgiG58HI8IS/HMeBfrBy0Y/W2ZlaKqyivEqZqSrKx1t6Pdmt2JAPf8SXRXHLQS/t20XFzjNfmub3kuMmAHJhjj+caCjJ7PBX0KAwB2jhb7++Tx79yRBDHtqOAw4k7QBliE6SOOSewLXKAUWbHRYDdiRNU3i7QA1wEW++4mqME8hRsFbILd6lPCFTORcob2rfHCnfMIq4dnlIV4mfanuSx/V3HySKbcACVAXIuaZ+Bl6yhplC1KsBj2rc8Ygj8rFxV7UCxKRgqw1ylY2xr+/waDy6Pe83wTlYK1SAeARxou0j7HGflvrRvDcM9g3XUyko1gCsAt04aZA8uR01g1QIM6oFyn/Imbb3P79qCKlY9kqHeArgDcJ/yjvIWvYrHVFtLqFpZpTvKLfrzSCPHtum58ZMXhjawRAfOgD4A+EFpkFm5pvbawbIFGNQ9OqCblCaWRo4bwGU7iBTL3mpg79BBXVM+pDTlqmoXzvjXDLUCBstQt+jnY1C9E5xlA1HuEjj7q+exbAP36BS6BvAE4DHlOj3PluCBvTZUC64G2AbMArbolOpB5ZOb7S8wwQo8xTJYU+wTgJ/oAT+gtwS1Ax67hlCwbANmAe/o5wDndau0b3YHeIqV4IogUuwjOqi/0naNHizbQa21LPsjn7TYAkyJahO36CuFwYrzpX3Da/PcMlhvpcUe66nWlPuI3g4MLCu2JrCRYvfwobLvWkbVT6jYUg3L5ZZVBKZeO5HNWbF7dJ+7Qe+7O3Tz/IBfUnL1k0Vp5aVLWV4gcD1roLXs8qqCmkIVy35qfmvzUaiuDfDgpTrWg7uUXAVpYGutY1mx9jkNsjcXXVmO9kM8K9B9D3Qpoz5trTF1bl4HDwjmtyz90Qlt9p6C/PzLca8RuqTlDBvbEuH8Io8d+wBWIHOpwsU0e1CtYfOyQt8aLtyEsXkqdB1jEEt6AZcLpXaavak1KTbIyxNeec0BLK+8uKTaIYfNq62sF+uFp1gPKjcobMmnNd8BeSOmdn/VliEvad/RlVgb9JBLcCd1t7x2mgfV4BlUr4atHSyQfxttjh8AfqMHzAo+0DGhDzNYbfx6PcoNelWCXrNF3oCZE1hdfe3RwXxHDneDoXJDS1DFMlzuqO+Q13S8OuGloNZ6tYc3V1atwWXVRmBHr3mVbICLaf7q6OWZ2k9cFp7PavtQFbuH77UA0EaN7ugaEC9PuePD3SBdQ88NLFufNl7sasIWuc9OUqxXah0x7N5wg4IvJmpjAqgbrjdfrs3Nb3eSXn3re+xr89zSVVp7kyYdzHD4K8NrafZVbf7WGgrWvol60uZFg9a0JxnnHJ4V2PYkz9sbHzFsTER9gtpjbEHECuYcrWOzydO1L68xoXfC6O1Gk5oTFUYEVwGfZL94N0xUFVjof8UGv6jjU2noV9nmWWoy8WsGUAEHQHCnoQKMvvZzAqrhea6KynsewASwQHhvLO/r43CsmYWnXg84v8a9jTOEUbg13muGF8eaWWhbMHqueFf3JBjBjzn+FZBjMYA35XcIF8P5X345c+mvZr7ji+IPPk7IumiDX5AAAAAASUVORK5CYII="/>
  </defs>
</svg>
`,GamepadRightSvg=`<svg width="100%" height="100%" viewBox="0 0 123 232" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd">
  <g id="right_side_of_controller">
    <path d="M10.5 140.855c6 29.375 13.537 33.424 35.28 43.583 35.355 16.519 33.138 57.105 56.59 45.51 14.36-7.1 21.13-19.23 21.13-38.4 0-24.92-11.42-65.99-32.4-119.1-10.625-22.2-25.844-16.642-42.794-16.642-7.93 0-15.744-1.225-22.454 2.225-14.564 7.511-21.031 55.022-15.352 82.824Z"/>
    <g id="stick_button_right">
      <g id="stick_bg_right">
        <circle id="shadow12" cx="42.54" cy="176.272" r="26.46" style="fill-opacity:.5"/>
        <circle id="Oval6" cx="41.3" cy="175.022" r="25.21" style="fill:#6180b0;stroke:#000;stroke-width:2.49px"/>
      </g>
      <path d="M41.215 179.291v-8.477h25.442v-7.872l12.11 12.11-12.11 12.11v-7.871H41.215Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_right_direction_highlight"/>
      <path d="M36.977 175.052h8.477v25.442h7.871l-12.11 12.11-12.11-12.11h7.872v-25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_down_direction_highlight"/>
      <path d="M41.216 170.814v8.477H15.774v7.871l-12.11-12.11 12.11-12.11v7.872h25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_left_direction_highlight"/>
      <path d="M45.454 175.052h-8.477V149.61h-7.872l12.11-12.11 12.11 12.11h-7.871v25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_up_direction_highlight"/>
      <g id="stick_right">
        <circle id="shadow13" cx="43.16" cy="176.892" r="17.12" style="fill-opacity:.5"/>
        <use xlink:href="#4a" x="161" y="142" width="65" height="66" transform="translate(-152)" class="gpad-highlight" id="stick_button_right_highlight"/>
        <g id="Group-61">
          <circle id="Oval-Copy1" cx="41.3" cy="175.022" r="15.88" style="fill:#fff;stroke:#000;stroke-width:2.49px"/>
          <circle id="Oval-Copy-21" cx="41.3" cy="175.022" r="12.14" style="fill:#fff;stroke:#000;stroke-width:1.25px"/>
          <path d="M39.689 175a.318.318 0 0 0 .317-.353l-.282-2.586a.318.318 0 0 0-.317-.284h-2.102a.32.32 0 0 1-.239-.53l3.995-4.543a.317.317 0 0 1 .478 0l3.995 4.543a.32.32 0 0 1-.239.53h-2.102c-.163 0-.3.122-.317.284l-.282 2.586a.318.318 0 0 0 .317.353h3.433a.32.32 0 0 0 .319-.319v-.968a.318.318 0 0 1 .51-.255l3.05 2.287a.32.32 0 0 1 0 .51l-3.05 2.287a.318.318 0 0 1-.51-.255v-.968a.32.32 0 0 0-.319-.319h-3.721a.32.32 0 0 0-.317.284l-.386 3.542a.318.318 0 0 0 .317.353h.029a.318.318 0 0 1 .233.537l-.966 1.034a.318.318 0 0 1-.466 0 972.66 972.66 0 0 1-.966-1.034.318.318 0 0 1 .233-.537h.029a.318.318 0 0 0 .317-.353l-.386-3.542a.32.32 0 0 0-.317-.284h-3.721a.32.32 0 0 0-.319.319v.968a.318.318 0 0 1-.51.255l-3.05-2.287a.32.32 0 0 1 0-.51l3.05-2.287a.318.318 0 0 1 .51.255v.968a.32.32 0 0 0 .319.319h3.433Z"/>
        </g>
      </g>
    </g>
    <g id="start_button">
      <path id="start" d="M30.051 132.744a8.497 8.497 0 0 1 2.825 6.334 8.495 8.495 0 0 1-2.825 6.333H18.67a8.495 8.495 0 0 1-2.825-6.333 8.497 8.497 0 0 1 2.825-6.334h11.381Z" style="fill:#9a9a9a;fill-opacity:.5"/>
      <use xlink:href="#4b" x="152" y="117" width="46" height="41" transform="translate(-152)" class="gpad-highlight" id="start_button_highlight"/>
      <path id="start1" d="M28.85 131.196a8.494 8.494 0 0 1 2.826 6.333 8.496 8.496 0 0 1-2.826 6.333H17.47a8.495 8.495 0 0 1-2.825-6.333 8.493 8.493 0 0 1 2.825-6.333h11.38Z" style="fill:#fff;stroke:#000;stroke-width:1.35px"/>
      <path id="Playstation_Btn_Icon" d="m20.832 134.571 5.982 2.961-5.975 2.955v-5.916h-.007Z" style="stroke:#000;stroke-width:1.1px;stroke-linejoin:round"/>
    </g>
    <g id="button_1">
      <g id="Group">
        <circle id="shadow" cx="45.85" cy="121.855" r="11.806" style="fill:#00ff04;fill-opacity:.5"/>
        <use xlink:href="#4c" x="171" y="95" width="52" height="52" transform="translate(-152)" class="gpad-highlight" id="button_1_highlight"/>
        <circle id="Oval" cx="44.99" cy="121.007" r="10.945" style="fill:#00ff04;stroke:#000;stroke-width:1.72px"/>
      </g>
      <g id="Playstation_Btn_Icon1">
        <path id="Line" d="m41.345 117.35 7.72 7.731" style="fill:none;stroke:#000;stroke-width:1.72px;stroke-linecap:round;stroke-linejoin:round"/>
        <path id="Line-Copy" d="m41.345 125.081 7.72-7.731" style="fill:none;stroke:#000;stroke-width:1.72px;stroke-linecap:round;stroke-linejoin:round"/>
      </g>
    </g>
    <g id="button_2">
      <g id="Group1">
        <circle id="shadow1" cx="66.7" cy="101.005" r="11.806" style="fill:#ff0009;fill-opacity:.5"/>
        <use xlink:href="#4d" x="192" y="74" width="52" height="52" transform="translate(-152)" class="gpad-highlight" id="button_2_highlight"/>
        <circle id="Oval1" cx="65.851" cy="100.145" r="10.945" style="fill:#ff0009;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path d="M60.941 95.78c-.898 0-1.637.739-1.637 1.637v5.456c0 .898.739 1.637 1.637 1.637h5.456c.898 0 1.637-.739 1.637-1.637v-5.456c0-.898-.739-1.637-1.637-1.637h-5.456Zm11.457.546a.548.548 0 0 0-.931-.386l-2.182 2.183a.542.542 0 0 0-.16.385v3.274c0 .145.057.284.16.386l2.182 2.182c.103.102.241.16.386.16a.548.548 0 0 0 .545-.546v-7.638Zm-8.746.911a2.905 2.905 0 0 1 2.898 2.908 2.906 2.906 0 0 1-2.898 2.909 2.905 2.905 0 0 1-2.897-2.909 2.904 2.904 0 0 1 2.897-2.908Zm0 1.212c.933 0 1.69.76 1.69 1.696 0 .936-.757 1.696-1.69 1.696-.932 0-1.689-.76-1.689-1.696 0-.936.757-1.696 1.689-1.696Z"/>
    </g>
    <g id="button_3">
      <g id="Group2">
        <circle id="shadow2" cx="25" cy="101.005" r="11.806" style="fill:#48c0fb;fill-opacity:.5"/>
        <use xlink:href="#4e" x="151" y="74" width="51" height="52" transform="translate(-152)" class="gpad-highlight" id="button_3_highlight"/>
        <circle id="Oval3" cx="24.14" cy="100.145" r="10.945" style="fill:#48c0fb;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path d="M17.592 98.69c0-.798.657-1.455 1.455-1.455h.677c.486 0 .941-.243 1.21-.647l.591-.888c.27-.404.725-.647 1.211-.647h2.808c.486 0 .941.243 1.21.647l.591.888c.27.404.725.647 1.211.647h.676c.798 0 1.455.657 1.455 1.455v5.093c0 .798-.657 1.455-1.455 1.455H19.047a1.462 1.462 0 0 1-1.455-1.455V98.69Zm9.821 2.183a3.288 3.288 0 0 1-3.273 3.273 3.289 3.289 0 0 1-3.274-3.273 3.29 3.29 0 0 1 3.274-3.274 3.289 3.289 0 0 1 3.273 3.274Zm-3.273 2.182a2.192 2.192 0 0 0 2.182-2.182 2.193 2.193 0 0 0-2.182-2.183 2.193 2.193 0 0 0-2.183 2.183c0 1.197.985 2.182 2.183 2.182Z"/>
    </g>
    <g id="button_4">
      <g id="Group3">
        <circle id="shadow3" cx="45.85" cy="80.155" r="11.806" style="fill:#fff000;fill-opacity:.5"/>
        <use xlink:href="#4f" x="173" y="56" width="48" height="47" transform="translate(-152)" class="gpad-highlight" id="button_4_highlight"/>
        <circle id="Oval4" cx="44.99" cy="79.295" r="10.945" style="fill:#fff000;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path id="Light_Icon" d="M44.99 72.753c.336 0 .613.277.613.613v1.227a.616.616 0 0 1-.613.613.616.616 0 0 1-.614-.613v-1.227c0-.336.277-.613.614-.613Zm0 10.631c.336 0 .613.277.613.613v1.227a.616.616 0 0 1-.613.613.617.617 0 0 1-.614-.613v-1.227c0-.336.277-.613.614-.613Zm0-6.542a2.465 2.465 0 0 0-2.454 2.453 2.465 2.465 0 0 0 2.454 2.453 2.464 2.464 0 0 0 2.453-2.453 2.464 2.464 0 0 0-2.453-2.453Zm4.626-1.305a.616.616 0 0 0 .195-.449.616.616 0 0 0-.613-.613.616.616 0 0 0-.449.195l-.868.867a.615.615 0 0 0-.164.418c0 .336.277.613.613.613a.615.615 0 0 0 .418-.164l.867-.867h.001Zm-7.518 7.517a.612.612 0 0 0-.418-1.062c-.17 0-.333.07-.449.195l-.866.867a.612.612 0 0 0 .866.866l.867-.866Zm9.434-3.759a.617.617 0 0 1-.614.614h-1.226a.616.616 0 0 1-.613-.614c0-.336.276-.613.613-.613h1.226c.337 0 .614.277.614.613Zm-10.631 0a.617.617 0 0 1-.613.614h-1.227a.617.617 0 0 1-.613-.614c0-.336.277-.613.613-.613h1.227c.336 0 .613.277.613.613Zm7.847 4.626a.614.614 0 0 0 .867-.867l-.867-.867a.616.616 0 1 0-.867.867l.867.866v.001Zm-7.517-7.517a.617.617 0 0 0 1.032-.449.612.612 0 0 0-.165-.418l-.867-.867a.611.611 0 0 0-.441-.187.613.613 0 0 0-.426 1.054l.867.867Z" style="fill-rule:nonzero"/>
    </g>
    <g id="shoulder_trigger_back_right">
      <g class="direction_highlight" id="shoulder_trigger_back_right_direction_highlight">
        <path d="m12.269 51.254 12.27-16.491H0l12.269 16.491Z" style="fill:#ff00bf"/>
        <path d="M25.523 17.167c-2.534 0-13.254.512-13.218 21" style="fill:none;stroke:#ff00bf;stroke-width:8.5px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"/>
      </g>
      <path id="shadow6" d="M70.5 39.658H32.67c-1.52 0-2.78-.6-2.78-1.32 0-.1.03-.2.07-.3l10.9-22.92c.71-1.5 3.53-2.57 6.76-2.57h11.8c7.65 0 13.86 2.96 13.86 6.61v19.18c0 .72-1.25 1.32-2.78 1.32Z" style="fill-opacity:.5"/>
      <use xlink:href="#4g" x="165" y="3" width="76" height="55" transform="translate(-152 -4.306)" class="gpad-highlight" id="shoulder_trigger_back_right_highlight"/>
      <path id="bg" d="M31.21 37.298c-.37 0-.72-.06-.98-.19-.25-.12-.4-.28-.4-.47l10.92-23.07c.28-.58.97-1.1 1.95-1.48.99-.37 2.2-.58 3.46-.58h11.8c3.44 0 6.56.67 8.82 1.75 2.34 1.11 3.66 2.63 3.65 4.2v19.18c0 .19-.15.35-.4.47-.26.13-.62.2-.98.2H31.2l.01-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.17px"/>
      <path d="M60.102 31.312a10.054 10.054 0 0 1-1.374 2.86.681.681 0 0 0 1.122.769c.892-1.302 1.505-2.722 1.785-4.195l1.075 1.05a.68.68 0 1 0 .95-.974l-2.551-2.49-2.489 2.551a.68.68 0 1 0 .973.95l.509-.521Zm-8.281-11.708a1.932 1.932 0 1 1 3.698-.289.862.862 0 0 1 .17.104l2.302 1.795a.876.876 0 0 1-1.077 1.38l-2.301-1.796a.82.82 0 0 1-.143-.139 1.924 1.924 0 0 1-1.489.082l-2.921 2.983a1.183 1.183 0 0 1 .043.125c.011.038.022.076.031.115l.01.043c.019.09.031.183.037.277l.002.022.001.037a.508.508 0 0 1 .001.039v.026l-.001.071v.006l-.002.038a1.91 1.91 0 0 1-.034.263l-.014.066-.025.096-.004.012a1.515 1.515 0 0 1-.045.132l2.921 2.983a1.939 1.939 0 0 1 1.489.082.898.898 0 0 1 .143-.139l2.301-1.796a.875.875 0 0 1 1.077 1.38l-2.302 1.795a.862.862 0 0 1-.17.104 1.933 1.933 0 0 1-1.828 2.326 1.932 1.932 0 0 1-1.87-2.615L48.9 26.229l-.005.002a1.954 1.954 0 0 1-.339.085c-.026.005-.053.008-.079.011l-.014.002c-.035.004-.07.006-.105.008l-.018.001-.012.001-.048.001h-.027l-.074-.001-.013-.001-.015-.001a13.143 13.143 0 0 1-.119-.01l-.013-.001-.063-.009-.021-.003a1.881 1.881 0 0 1-.54-.175l-.011-.005-.02-.011-.011-.005-.01-.006-.01-.005-.046-.026-.018-.01-.007-.005c-.03-.018-.06-.036-.089-.056l-.009-.007a1.622 1.622 0 0 1-.141-.106l-.013-.01-.027-.024a1.461 1.461 0 0 1-.128-.122l-.008-.009-.039-.042-.005-.006-.028-.033-.027-.032-.007-.009-.012-.015-.012-.016-.029-.038-.005-.008-.032-.045-.006-.01a1.934 1.934 0 0 1-.076-.123l-.024-.044a.773.773 0 0 1-.015-.029l-.038-.079-.005-.011-.004-.011-.004-.008-.015-.035-.004-.011-.004-.009c-.011-.028-.022-.056-.031-.085h-1.87v1.434a.625.625 0 0 1-1.25 0v-4.118a.625.625 0 0 1 1.25 0v1.434h1.87a1.351 1.351 0 0 1 .05-.132l.005-.011.019-.043.034-.069.005-.01.006-.01.003-.007.023-.041a1.82 1.82 0 0 1 .095-.151l.006-.01.009-.012.023-.032.009-.012.007-.009a.106.106 0 0 0 .009-.011l.006-.008.009-.012.028-.034.036-.042.001-.001.063-.067.008-.009.008-.008.076-.072.026-.023.009-.007c.041-.035.083-.068.126-.099l.002-.002.047-.033.01-.006a2.03 2.03 0 0 1 .201-.118l.011-.005.021-.01.011-.005a1.924 1.924 0 0 1 .654-.178l.012-.001.058-.004.015-.001.015-.001h.022l.038-.001h.05l.012.001h.025l.012.001.018.001.032.002.012.001.024.002c.045.004.09.009.133.016l.012.002c.113.019.223.048.329.085l2.921-2.983Zm1.089 9.594.036-.034a1.002 1.002 0 1 1-.036.034Zm-4.373-5.75a1.002 1.002 0 0 0-1.269.783l-.003.016c-.006.04-.01.081-.012.122v.013l-.001.026c0 .054.005.107.013.158l.001.007.001.008c.007.037.015.073.026.109l.001.004a1.002 1.002 0 0 0 1.238.675l.007-.001.012-.004.011-.004a.142.142 0 0 0 .022-.007l.013-.005.009-.003a1.001 1.001 0 0 0 .648-.937l-.002-.064a1.002 1.002 0 0 0-.619-.862l-.027-.011-.009-.003-.013-.005-.01-.003-.012-.004-.009-.003-.016-.005Zm11.565-5.943-.509-.522a.681.681 0 0 0-.962-.012.681.681 0 0 0-.011.962l2.489 2.551 2.551-2.49a.68.68 0 0 0-.95-.974l-1.075 1.05c-.28-1.472-.893-2.893-1.785-4.195a.68.68 0 0 0-1.122.769 10.047 10.047 0 0 1 1.374 2.861Zm-7.156 2.147a1.002 1.002 0 1 0-.036-.034l.036.034Z"/>
    </g>
    <g id="shoulder_button_front_right">
      <path id="shadow7" d="M32.192 43.878h39.986c2.643 0 4.817 2.645 4.817 5.859v7.033c0 1.288-.871 2.347-1.93 2.347h-45.76c-1.059 0-1.93-1.059-1.93-2.347v-7.033c0-3.214 2.175-5.859 4.817-5.859Z" style="fill-opacity:.5"/>
      <use xlink:href="#4h" x="159" y="30" width="87" height="41" transform="translate(-152)" class="gpad-highlight" id="shoulder_button_front_right_highlight"/>
      <path id="bg1" d="M30.673 44.236h40.011c2.109 0 3.844 2.109 3.844 4.674v7.053c0 .638-.432 1.164-.957 1.164H27.795c-.53 0-.965-.53-.965-1.174V48.91c0-2.565 1.735-4.674 3.843-4.674Z" style="fill:#fff;stroke:#000;stroke-width:2.15px"/>
      <text x="48.396" y="55.277" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:13px">+</text>
    </g>
    <g id="r_touch_targets" opacity="0">
      <path id="stick_button_right_touch_target" d="M34.841 141.791a34.686 34.686 0 0 1 6.374-.588c19.07 0 34.552 15.482 34.552 34.552s-15.482 34.552-34.552 34.552c-19.069 0-34.551-15.482-34.551-34.552 0-10.648 4.827-20.178 12.411-26.518 1.298.465 2.697.718 4.155.718 5.345 0 9.9-3.406 11.611-8.164Z" style="fill:#419bf3"/>
      <path id="start_button_touch_target" d="M35.167 134.497c.26.997.399 2.043.399 3.122 0 6.809-5.528 12.336-12.336 12.336-6.808 0-12.336-5.527-12.336-12.336s5.528-12.337 12.336-12.337c2.48 0 4.789.734 6.723 1.995a16.16 16.16 0 0 0 5.214 7.22Z" style="fill:#419bf3"/>
      <path id="button_1_touch_target" d="M39.627 106.677a16.066 16.066 0 0 1 5.496-.963c1.93 0 3.781.34 5.496.963l9.655 9.656c.623 1.715.963 3.566.963 5.496 0 8.894-7.22 16.114-16.114 16.114-8.894 0-16.115-7.22-16.115-16.114 0-1.93.34-3.781.963-5.496l9.656-9.656Z" style="fill:#419bf3"/>
      <path id="button_2_touch_target" d="M60.481 85.823a16.066 16.066 0 0 1 5.496-.963c8.894 0 16.114 7.221 16.114 16.115 0 8.894-7.22 16.114-16.114 16.114-2.186 0-4.271-.436-6.173-1.226l-8.715-8.715a16.056 16.056 0 0 1-1.227-6.173c0-1.93.34-3.781.963-5.496l9.656-9.656Z" style="fill:#419bf3"/>
      <path id="button_3_touch_target" d="M30.442 115.863a16.056 16.056 0 0 1-6.173 1.226c-8.894 0-16.115-7.22-16.115-16.114 0-8.894 7.221-16.115 16.115-16.115 1.93 0 3.781.34 5.495.963l9.656 9.656c.623 1.715.963 3.566.963 5.496 0 2.186-.436 4.271-1.226 6.173l-8.715 8.715Z" style="fill:#419bf3"/>
      <path id="button_4_touch_target" d="M30.235 86.294a16.056 16.056 0 0 1-1.227-6.173c0-8.894 7.221-16.115 16.115-16.115 8.894 0 16.114 7.221 16.114 16.115 0 2.186-.436 4.271-1.226 6.173l-8.715 8.715a16.056 16.056 0 0 1-6.173 1.226c-2.186 0-4.271-.436-6.173-1.226l-8.715-8.715Z" style="fill:#419bf3"/>
      <path id="shoulder_trigger_back_right_touch_target" d="M76.155 41.187H23.519c-1.52 0-2.586-2.458-1.769-4.167.046-.096 14.212-28.399 14.212-28.399.743-1.517 3.546-2.595 6.744-2.595h22.358c7.656 0 13.863 3.027 13.863 6.762v27.046c0 .742-1.252 1.353-2.772 1.353Z" style="fill:#419bf3"/>
      <path id="shoulder_button_front_right_touch_target" d="M25.477 41.187h48.72c2.613 0 4.73 2.007 4.73 4.483v14.346c0 .983-.854 1.793-1.892 1.793H22.639c-1.038 0-1.892-.81-1.892-1.793V45.67c0-2.476 2.117-4.483 4.73-4.483Z" style="fill:#419bf3"/>
    </g>
  </g>
  <defs>
    <image id="4a" width="65" height="66" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABCCAYAAAAIY7vrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHcElEQVR4nO1c23YbNwyEZEduLm7ykJ/LF+bn8lK7kZVa1vahHO3s7IDk6hK3J+U5OEtJ3iUwBEAQ4Dri/xar1xr4y/BtMvbX1efhtXi5KggqaMe4KRDXBOmiIBihVx19bkNH/+KAXAQEEX5lru67rA10zfrHdglAzgKhInwP6fgqcIv4nrPAOAkEIzw+r+nzmq5r+Y7vQYMQhxgFPdBnvc7AOBWIxSAQADrz64RuzHcOCBZ8iIiXGEHgPpPTjsVgLAJBANAZh7A3QrfUx+98X4ggLPRLROzLVckBgmctAqIbBAOACg9hb4neyGcGg0EA8xCchX8u/T31+fdMM7qB6AJBAGD75tmG0KCNXAEIA8Hjs+qz0M8R8ZdcQaolJwHRBCEBgNVdBb8j2tBVgYA2BDENYVh40A8ifMdg7MNrRROIKggNADDzGxL2t4TwO5sHO0g1BQbgR0TsEsLvAEP9RRcQt50AgHT2N0XIu4h4W+gd9UHQDNaGDASYgQLwFBHbGLXqtnzH/uWZREgjzm4QBAC2fwiCmWfh3xdCH78BKAiAZ9VAgOrvivBb8wznYFnwA/pfhm+rTBusORQtUA2AGrPqvyOBPxC9J2qBgJaBAA3YRsT3iPhTCL89FcBgHrp6pGYx0wQTDXLQwyaA2f8QEfeGMhB4haiBAHN4kme0nKsjjkdmLTMHDYZ4CYQWYPZ/NwSNgKawT+hdHQCCA5F9igKQRZNDxD+TrNowASHRAvYF0AKYwH0R+iORgsArBAdNDLRGi/sYV4ddTE1J74+YCp9Fk3YXOgOBhFczUC14G1NN+BgRn8qVzQGziGXUaYGCcCgg3BUQWHi+n4XngCkLoDi0boKgQDhfAAAgsDMHaIFTY14e0RgEAMFLKmuA/r1GmfuYB1DrGE1i4iCPICR7Aw2KEA+oOYDuYzQF1gKdxWwrzRrR2ms4R+oiSWgEm96kqSb0moJbFnl5ZC3g4Eh9gYIA4QbhgUFgJ6oriQut+f6DA2IdvmWaoCAoIVrUuEB3kS7HoFtx3pNgddHYRMfG+M6RTvIYvAhkmuBAACMcITJBeHWENT/gwNckSbaCaEAFcoEZg40o8tgYBN0sZT6BgdCw2M2+A6C1e4XQDMCbmJoBtHKX8OFWFF2WRxAqGaNsv6DEAOjAtbxiCwB8vinfuQnJ+ADPuk+Z8aA+weULNWGyScghvxQA5gNXTeIwP7yN56vzB6k5OsfoNMFljXiwLGu0VHjlA1d1oK1MVpbO4wDt6BwZBBcnuBSaI/b6TvhzgUC/pqGtnGbqj5w54FozjWzJY/U9VxOUL8ePTpJbgpu81MyhNrAjB8AlmptBHq+XtxSMLFhiBmpUVbMrNF1me6jJWwuEX6K1QDipOHrFpsnTi/DmQHAPcnVATWBkDJzbVBDODdR4q/FV3UDxQG4Q3rfzNrWrUHpmY35cMqVWq6zywiAoACy4Cu8If+cGPBWIGk86vuYQdJJS06iZgwNAa4NaBktrgie0TCuVH02kKBiqpcdnI7ukW2lnBln2xtUFwZwGT2i9y6jaf2tCwA/zxxNTTbiuGZFOAFxNEAyoVpziMJ0GMACuROd4USDS8VkTsH11qqcpLNQGOZFRK4+57HILBD6xUivSMh9cqOUibdVBZuaQaQIXRjmRwQlVBWCIMR/Qyi6pxrhSPQu+jWkZjktxrJkMxKxlKXenCaoB25gmMlxNgQUDENneQjUAaXcUYjiNhrokE9cjoQ0100xBaGkCGPke8wSG7ibVrLKUO5tHNjZXp7ko+0h9BoI1oXle4QjC19XnoSQZFAg1B06quNMnTpieVFfLF0HtHws9UJ9BYHNwWjBrNXOATa6JGZfI0KSFizFq6S4ez/kBqDe04MEQl+mz8vxxjGpBlhiKGAsVXCDVBIbu2bOZdGcTHAjZGQVoAUzgISL+KARtYJ/Q7RRnIJBJgDEwBW2oJSxqqpwVZdkc2PzYGaovAAggNgf2B7VAKQeBmjoq1PIcACyEW1K1JKexBMYZzP18UgWrwGNM/QIDAFNwq0JEdJ5UMdoA5laFOXVqzpZ1SatVp/UZz+YZteM6uipokNSMVGsHt9g3RHlohPfoDAKH1xpPuIMaaO6AhsYGrBEcKGmkuOgYX7qhaZTqtT7Jp9j0GJ/WJ3tPr7FP4NBYo8NWhGhXBG6pJkjcEDHOdsTcZ2THbJ5iWhrrPbjFjpH3K3jmjr7v3TWmrbm17TjVqiUxPdp7F9MKkYscNTjTnSsLzH13GKPbDLpBqADhqlPZ4W72BVmAxfsFPt2uh7tZ7fko7ws9oxuAbhAMELpc6vsNXBJzhzSyiDFLn+k5JKf6s5Xgokf9K0DUymKuNFarEDMImkR1L36o8DZ11tMWV42S13+ystiN6bvKleYRXEq/O6t91dd/0JIXwbL6pfZdiUxTagdz1e8Gue/nvQjGrfJWXFaz1N+5KRAt4nt+/iuB2ha+HOr+NmIumBP2osI7Js5uF3hNOGIa3MyEjviXviactRNeGI9IIrz/zAvjS5oD6DX/fcAv3/4G1s+EbdFAgYoAAAAASUVORK5CYII="/>
    <image id="4b" width="46" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAApCAYAAABKvBuPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAD00lEQVRYhdWZzXKjQAyEm8R2kv075eX8hHk533Ydm9gJe8g0NI0EYzuXTJVqKBjgk9BImgH4pq255eZtt7vp/pfmubv23otenIDWnMsAJ+drlakCN+BmoV9q3UIPYFmB2ZcFwI0dN8H56LkRpAqC41n4FFygHfYuONZz2XMd9sP6SFL4ENygVe4WhGP02W7RjwpZhJ+AJ9AEuy/9qhzfyzn27j6Edrj3Imc5zhSYwK8cPIFWyFWRtRyrIu42EAiFdTnJdb2Pik8A+2bWVisTeF1kU2QtfQTPlzr0qcib9ZR3EX6tkdUji0cuQuiHRAi/FnD6Ol+s0G9FjgBauUebzokGZvU5V3HoTYF8EnksPeE3GFtdwRW6LdCqbDQnCN8A6LbdrqHVe/BkUqqLPBTQHwB+lp6i8Gp1YJhoZ4M+YHAxdSudvGrxkdXd4lEUuRfwpwL6S4RKPJYxDk7/JvgRwGsZuwrGqXyU65ykfatxFX5OB/8N4I/BE5xAjVjvhE9rH2RcpBxd6oxpeF20uIdB+q+6CsEJT6tvAksSpsWntTkXgKn/U05ivN6Nt90OL81zNxdVCM44zQgyZ3W6C0Mjwd4xuMlarumX4NfQ0Fplca811M89HDKq0PoE5yTNwNU9VJkDhq+q0FEyG8CTKtBDIhXgCxhlGBIpDk5XYcija7SY5oG5DDyCr035DI1RFvVsqlYDhsjACcjxXjZEwGm1mYHPKXJJxcjWJdfnnhsVaxeDZ/Wy19cqnlR8TM0z04VEBp4V/FpzeLFEF2lkPDDOmicTrQ416WQro77dAWGh7laMqjqGsCOGyKDyGpw7yHiKKhTV5uGaVC2efXqv6hSUEYRWPmOcyjWKnDCk+70ppgoQfrISysAjBTRdK/Qe46qO0C3qMucewF8A/0QBlrhV8A4eQetLaTGGL1qU1xmTGdqAuFZ5LdAO3xYDRT4PAN2krA0UUPA3jOMu3aCT61o80X2a4DnqLrT83sC5Cqq2uEJHFteCX6GPyOtxL2u1HqevE5y+rq4yKWlH4C/Nc7ftdg7PF3pSIQx932uNaOkWrYA84lzt4w7eCKAnFPXba9acLcYhVd0kAl9cLGvc5Av1WrSiUehLV/nRSt/jePWGULagWJloRRfV0AoeZV5d7UQZtAev3RDSQbopE312tXJUQ2dJLZNwJ8vbLXuHDpttv2XwX7t3mMCzX9qpjWpoL5ayAi6sDC/arQ3gOTb7ErNF/4ICfq4fe9X+eAKv92R99NwuOI6qvv74pj8S3maUqHlmBDI596X/gLJ261834LY/b9+y/QdJLrfuY2EtwQAAAABJRU5ErkJggg=="/>
    <image id="4c" width="52" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE3ElEQVRogd2a3XbaMBCEF0ISaJr2Ji+XJ8zL5aZJgAQK7kU0ZjyelQ1JTlt0zh7xI2R9Hmm1WhNxZmXymZ3dN48n9fcwuWs+awwfAkoA9DN9r4PvwXwE8CQgAZkM1FlpBuqTwI4CqoA40zY8WK6dcZujwEYDEYyCTM1r/ox/oyB7qfV1+5uxUINARhU3eNgFveY2XBRkHxE7eu0gR0NVgRJVptGHcMZtuPDAd4ntow+Im1EFS4EMDO42BnsREbOKqVoYEMP8rtiO2uF3g1CzDEiKKoJBXxa7ktpBRQKziYgt1dvSHt/jd1ynxSok6jAMg1yRXZPhs8s4TD9WSGE2EfFGhveAQ9veFHQq9YAEBkCsCkPMiy3o9ZyAAKVAGCwgXiNiXWoY4DbRn4apo8imnMIASEG+kS1KPY+DUgDiKQcgKLEuhhs1i9w7ouzNZ+3A22KmGmAwxa7LwBcRcUP2vdQAA1QGhDsPZZZiLxGxKsZqbaPrCXsqOYVYHZ5urA4gbqVmKNzxDAhTbRUHRVUd3mx5/diIIgNSKHYCmGYA+kEGqGOBoCa8Yg2GbaIwHaAy3TJ1LuOgDoBuC8jPYj8EqDbl4BCwdrQdQNze1HMM981jO+2GphxPt6s4LHxMMwd0E/01xHcdg3uL7r7FMHDtW6rZhQOqp5ICqUpOITgEhoJBIXbdbmPdJjBQBV6Q9yk4BSjJYx10CjV3DTcNKDV4OQzW7UPuO4XBGmPT6KMXOUwjeusnUwhOASrxHsTejTfZ68Tm1Fb70b54TwMQbkRr2HJqCjkgVmoRfYDapopyEe8qsTK82a6ju5c5IA162+LW0FgoNQ53eG0oEB/82AFoXwrCMO7waIH4gm4tcYTtjKcEfpslTbRfvWncpyqjUBbI5Qj0VJod5rLDnb1oHBa0zoIxh0XXZ+vpdDq44pyFmiZHsj7cZ3pkz8wlYHrXGwP0X5UxJ1ZNMbm4SgNG10fWryZGMnPXyGO56EavLs1US2qo8T7hQI7tdzSYU0iB0CkHidvE4JV4n6klSXamT4Q7WfymYJ2iQKySJjQ4JHHGmym7Zr0ob6QM4PIKAEuP4Np/ppDeRb0wTprrqEfW7sDGfXJOgfMKqBkQYKxUT6FpRHuEdYtf1eELr8iWpQakJjvUXD/LpK8MqDPe2nlIFdLodxXdOCs7xA0dHzbU30ux5+jmFlgpBurkFLi4NQTjRYvpwUkNl6bim5BNQz2xAuipAD2X9wqEdJZTKAViKJ5ymzK4dfgwXgd7zBEcWZ7niPhFYDz1VKFhL/cwuWvum0e8xfFWFdKYS4/NrOQxQMsC8WSAXqPuFJqhNBYGyIkKflTCIbwOks8zY4HgCKASphxyc7qGUnUyIDRUlTZxCCC5rbrhMYlGtyaxljjR6BxCdWPNctvuPMTZU5cK1qwp59rGpIJ1K8DaqWVNm7G5bY0YFJ5dO68xbLScp86ePnB0oBurS9bbnJyWv/U4xUUfX/M4RaBq2dQxD7xqoQ8Hpe6hVy0oPfkJngaAteB1Fu93lnMAeoxwm/axjySrJVUo4sweGhsotM8SKPpYP0toZAc8BeiFNx9+rJ+AaZJial7XEifZiVg/G63KSUACxb91aWQH3w5Oamfc5mv+GsPlbP68pOVs/l6WlX/hD4BnV/4AcperLpSp2XYAAAAASUVORK5CYII="/>
    <image id="4d" width="52" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFUElEQVRogd2a0XbaSBBEC+LY2E68L/k5f2F+zi+7iQO2A+yDp6BUqh4JzO5D5pw+EiCGuaqenp5GwB/WFpfu8HH/dFKf3xff9pf8/Q8DBYBT+hzBfBTwLKAORHXUtg/nfgRwHtxJQAaig15MvNamg1dDOD8ZajaQwKSBL4tzBTsMUga+K84ddDbYJFBQxUEqUzgFUoBkFdwsqC5QAeMD/2S2lKOqxcE4wDaYA86GKoGCiyWQKzm68Rp1O1VmC+B3YT2wLtRVjxbZvRTgc8dUMQfSwb81e5Vz/Zxtxz4e90+LCioqZOq4aynINYCbZtdyVCh+n3dYlXlt9tKM5wRMinWVGgEVMEscVbmWwa+CKRRdkn2qqxFm0yDW7ZyvCaiKTbpf5XLualTGQW4B3DW7bcbPVCUHepNBbwD8Km5CFfL9vQwUopqqQxdTkHsAX9rx3qBuZHBLAeK8IcwaR1VdUQ7ajSqNWlLIg4C6GmEI8gXAVzm/b6AESgop0Brv6lRADqDutgCAx/3TwO0OQBOBwNW5byAPzb42I9CtATEoJKCVwPB3HWZrxx2Ga9uhuUIOlebOHY7KPAD4qxmVIhDnhANtcYxmq3DdAsMFV6OcAlGlQRifcjmq87kB6dxxoAcBSgNVICpEFakOMF503zBcnxTMs5CoUFpEk0KqEk3nEIF0YdXBOrB//mqmUBwfF9tDuwIO88ez6ASkYToFBgJxknMO8i7qwprWKCqii+2m9feCYdTUpWWWQp4VMCNQt6PdYbgeeUDQQXPgHs3oilxsGTBW7VzXKAUatKW9rnI3T3N0YVXTTEFTIE2V1FYn9KVJr2fyC0bpKihUiahD3WCYyymEh2HgXQlPVqnMTWEK4wnvSCEFqnaivQzbVah+WIE0hdlZn1V/qk7aCUegHpRv4vyHFGDkDtY/oaoN4ty+dZyH5nPI4c7dcleFE++711/v5pQK9YD0x/+vNue3utf0gKpyU8p6q3JUKk8hXHNKFSj1NQlUVWY0v6pyrAqy6jcVSXr5WxfOg0J11zy38hyLlhbTuUWS1J/uVuM23JsCpSJgShKZlngtgJ9rblZVfbahT+9Pc7gKaHL74C6hLuDbZq0BpM0c+/GFNeVsGzGvLejNqqD2ve1DUkjv3lpMawEpCdXFEBjmcszZfhVGMC+W+JwaNHe5pBDvjiqj22bfz/D7ugtV1ejCWiB5BvCz2XMzh3KgVDR5B/q++LZvyZ1CqbtRoTWO+dxUVceV88/ZH2H+AfCj2c+ZQJNziM0jkQJpnqUBQBNN3Y1OFUkU6G8BokobHAOE1uYiVC9s6938hOMGyxNFYHznvepT1RQU6EeDolJUaVKhWPUJbscfXwqUJonAsKDBqLVGLpIQ3BXXOaQu94yjy1GdbkAYAElzlX4jJ568lnON6nBz1gNSl6NKhPKg4OpsbYyDVtW2aZrW6zbcy8BeDtYImOaQRrkUugmawvZg/sytbfMiraq4MmmR5OC0PNUr1qdFdS3vazBIOd2oxVTcVPKiif4DoVvytBWvgofOuZdgnvak6Bb/Tun94aUX7+z9lJNRIa8BpBpClcvpH1+alM6CATqbJat1u1Is4mupS498PxVJNP2hUp7JE9i3L0CYN9pKhSyMsx06xVClbYN4Ra4BoPO9yvxfcX6/2ya3vMXzCVpD0GLHVC2gyhf1XD8bheez/wUvoPidFDTSMRUzfIud/vtxT7jcgxcFWJpfwDCDKCszGN75tJ0+SRVtZ1V0Jp758fe8edpfHf/7h5e8TTxa1uvbBzp4/ZFHzC5Wczv1wT9tl34I8I9q/wJ8hc/eTcdQhAAAAABJRU5ErkJggg=="/>
    <image id="4e" width="51" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAA0CAYAAAAnpACSAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFSElEQVRogd2a3VIbOxCE28TYQIDc5OV4wrwcNyfhP8CeC9S41duzP4FTpyqqmtLaXmv1aUajmbGBv6htPnOwq+F61Xg/Nt+Hz3z+h2CKya8Zs4P5KNxqmACwKfpq/GGmB/BnYKtgBER7v/b3tOnEh5nXANZBLYKZgKAcFdf+jMHktbjuoJYCzcIYSAI4KsS1xMm9Sl+JQ2MJ1CRMAaIT/hKE7/Nefl818ArgRXqVCmwWqIQJIAliW8gX9BqCTEon/hxEoV5kAThGCbRdCeIAx012cn0s9zmMauJ3kCcDg4NIP2ojzRQgrglOft9kJ/0OvYY4jpqXTv6xyZP0/JxQbnZROx3MhEZUE5z4HsAJgNPWnwQgmhtwMLFnA3kQuTc41dQsUDIz3+zUiGriVOSsiUJRcwnGQe6b8H7VJuS77Df23iQMgVwr1AgBvgI4b/1XA9q3yXHfAAcTew4gt+g1SRh30Z27vhquN6qdd5hmYnNaOZXJXzQY9gqUYAYcTIYwdw2E9yoMFyAdqNEZVGbm3su1cgHgssmFARFmZ5PTzf+IN42oFtW81PNpP4oYVDtb0QrQa8a1ws1+3uQSwLcmBFJT42qrN1MY3kdn4Rrxw9QPVM53bGaYNrEd+r3CyRPmMmhGHYDDPOHNzBQEsuL0eCp6oKoG31sys8rETtBvfALR3AiTTIcTpQN4Qu3t+LnLb/SRxasDLdWMmpkDnYucoTcd3wdcWXUO+pkfpDx/+Nq9HQBsroZr/Nh8H1wzafPrQelA7Hl9hrEncxN6KTSiIHQOqmU9h9x9v2kmuGQ/YxyGQCr64D0OZ1OKzdz0uEe4jzSqoFesQLqWNFPFYx7KEE7js2O5N53k6okUZB9Eg1eP9SLQ2nBmSqoUII09tPtebAzGdT6ujpcy2cM5EyCmkrCUu6gJaAaa8qWp3Cj1R6jNqxvfV64CS4C+UmnVgPEqrkm9Uwoe98sUzP/VNtavalXUDExHrFVFpcvXZZylY84VNapnABhrZu4BPKFTzOSxkz90auwUh6V4LI353rbhg1QG0gzR4ya+3rX7qlKTAmgxI9UCPG1WsDINcDPzVfM0lxGv5+16sKn7raozzzbuUxhXYzICVRoCABy1XCCpX0E00tWY6R7j+EknkTToabPXAXQ8h5kESppx02KooanuHfpwI4XxanL6PqF0LGact+2a6bQukGonOoKpPaPhuINoyOEg/F5KATwOuwNwI3IrokDUqGtG513uGX6Bq6gwt+jjsKqUNFedUZifAH41IdQdenNTU+s006XNBYhv/gfkeClNtCpoaNr8gIMWfgL4R6DU3HzvaLDatS3JWirgDkAfrvGY7wVf8SUFDYX51UAIc4NeM+7RZvcMm5uZBoR+hvg+eETtGBIMN/4NDmammnnAQSvRk8W6mYCwZ+FAgVKy5ftqrgioGuQepKgToNt391yGNKnWnBK0lDpr+sxrVmY829QF8vRY3TOFIHTN0cyW1Jp5g24yr/u6+3atLCmcc6KcuB7A1Mii8yVNEsCoIKjm5emzp9ApfU6OQrXjYYxqQn8BGMGknzRGmik8G9qgujI+sUeMXXc6ND1MUrCq6DerFWAiCSoK6SmF1vzffzXz1Fm9ZIrE9f3kvUYeTNtUcgb03o19ynGqH2qr6kzKYRxgFQgwk57avzGW1ALSWeQpQJUvOcAo/vrQT+cBSienE/aKTFWoc6DUu2AJyGIYA3KoqpJTjZ0m7GbM68//u4m2ALWk11btQ33vv/8jkLaJfzctGXsorj/0N60/hvG29o9z2j77T3R/RfsXSO/jtpPsGBMAAAAASUVORK5CYII="/>
    <image id="4f" width="48" height="47" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAvCAYAAAClgknJAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE80lEQVRogd1a21bbMBCchJAGSri0/BxfyM/RQkm4E9wHdvBovLKdwEurc/bY2Eaa2V2tdqUA/3ibfEUnF83VTv1cTs6bz469MwEDPalcvTWV685ktiYgwCcjRFuTyJu925rIaAIV4FO57tnfSkIB87qxv5XYaCKjCBj4qcieyEzu+V4JvAnwDYBXud/Ie5IZRWKQQIBXjRP4LGQ/ZC7PZhUCryEvJnyuRBoAzRCJXgIJeAIn4G8mcyFCSwCt5l8BPIc8AXiMK5+RjLpXL4kqAQOvbkKwCwAHIYdxXcS7fbRWIAFqnsAfANzH9UHIPKG1yCCJlID4PF2GWifwQwDfARzZlSRoBSfwHEDvQ9YhdyH3QoTWoEulc2KWEegBfxBAlwCORZZBgpaYx/8ogZcgQM2vAdwmhFWpul6Ms4C4joM/DJBLAKchZwBOQpZBjm6UWYDucwdgBeAPgBuTW7TW4Pz4mBNuhZoFdNLuo3Ubgv8B4GdcSUIJDLnQHVqXc7LUdiciIbFCQSCZuLMAs4gBjwPweQhJnKB1IUajLAox+ih4utpEgNfWiclFc1XMhcwCrn26zzKAngVoEqAFCErDqK4DGkZppf34Tr/J1ogirCrYDwKVmK/uc2QEKKdBLtO+L2S0AsMsSfIdw6wK14cpEivULODuQwscBwlO4pN4ptrnmpHlQhuUKzXfcY3QEEuZBwlaomhOQNMFEqALefj00Kn+7OGQQGlZdy2d3Gu8RyiuKfdCmFaozoEshHLFJQmKrr7qzxl47TvLjzixuSDqJHeXLPpWAppx0g005zkwUeCa+2S1gLZpgNecStMS9q3h2INC0Zk2zeU1ccuSNmah2vkQeA8SrqRaYlirMzoE9HktbXbg2umY+qKWJPoYWX2RAh0qE7MCRifqNuBrRLw48nE6SiLmmgV0AL/3wT/bvI9ss6DanIBnf16A630RzlDJFgfa0DgunXGmQCfPdpCal2h+0qlhR5JwJWV1so/TSeaIOXMh7Vhr2GeUpV+WpwyR0G9UOcyRXpD3v3ECbErAzVirYSlZDav7PDXwrnHNf7R/zYOqlvCVWF1HNc8qisI6doF2BZ5If9nkc+Wwb62PWchojUwCbumUAAdS7XMAzVO0cNG8H8gXNdWcal2Br1HWyKzItDYerInd/zVDVPBMnVX7/L8soVPLUvPa5y3ey8vbkDVaKzAT7a8HLifnzUVzpYNpBcXB/qDcOvF8ni7Vt7FFpdwF2BsA1yhrYlrhEeU862yx1Fwos8BcRCsp/VbT6ixtVtehQq4B/Aq5jmcrlC5UjUJ9BHxA5irMURz8I9q5we+UgGufuxIZAbqQEhieA4kbcdAHdHeg1c0e0e5KaF2c7UowICiBawC/47pC6z4d/x+7reJW0KSO7zOX2JYAJ+8N2km8Qqv9bKEsWt/Wohf3Wh+zvFRheTm0L6Shc2Xi24sFgW23FmmF2vNso8orqdrGli9cCtwjT1X7wPDuNL/JttYXJlrD9u1OkwRFV93aFnv1sGPM+YCTcCIuXmYC5equiaGC1oOO0Sc1Y09olERWCnqI7dvYUiKvIln6PHjMtMsZWXbctJfcZ7mQkvD7nQ76tioJR5xU+s5Blsz5yeTOJ5RbE6gQcUL+jq1Wrn682+Ww+1NFeeW0vq/ftIb+zE8OvmJX4aON/c3EV/xG4r9pfwEs4yD3oK/mAAAAAABJRU5ErkJggg=="/>
    <image id="4g" width="76" height="55" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAA3CAYAAACmcqwpAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiUlEQVR4nO2b3XbaSBCES9ixN7G9e5OXyxPm5XK3scHGMnuByiqVumckgQHnbJ8zRwKEfj6qe3p6hgZHth+7X4289P3G3tfPo9cl2xVe7ypbAMDP5rufo2pzbrBqAku3UfPPltxPBsj3S68BzAN3FGCBqrStgv1VcNzc+4nUE7W3wmcKcBK4g4ElqlIwKwBXsu9tCbQM1luw9VaCCKAM7nrCzU0xPqSCuqo0HuOK83OquRtGatLWyra19xzg+3l/7H41GbSDFGbqUtUQynXXvtg+P6tBy6wES8G8BlvuO8CR2iJoixUWwFJlEcwXADeyvZH3CVDdtaSyTF2qklYa4Wxlu5XXbA2Gqouu926HuqTGH6pKQd0mjeAITdXJ8+o26xE9VikoQnqR7XO35XurbqvGcyJyzUUuKeqiKhQWlfRX175K43sO7QrlDiACFgV2AlM1PUvb2Fbhqbuqiw5c8xCFKbQVhjGKoL517U72Ce4Wscqy3jJySXdHPjAV9YIezlqa/kh+Tv1B/LrzgSWBXhV2iz2QbwDurREclXYjN68qA5YDU1ekmjYAntCr2q+l52RrEMSxpQrzxFTd8Ra9uu4BPAD4u9sSGlWmD7AEmMcvdUl1wycMw4BeJ0pHVhBoGstmATN1Rb0i1fW1A3MP4B/sgSk0qowKm+KSfDhuHZoDozuuMQwBTGN4njZo2mMOlLZEYZG6CIzBXtX1gD00glO3dBc5BJgHfbrkGmNYmRtvu2NaecZlMaygLnVHDfZ36N1RGxXmLnIl565ZNCRiIwAC086FAFo5hsfxGKYbKozFCvOAn7kjgTHYP0ijwgjM49cSYO6aVIt2Ko19TpfddPeysWNXkESWcWwSMKtGRD0jgz3d8U6a95IM+uom7o5A2SX1tbe2O+8r+thIWKo8j21RTjiyOQqrxa5IYWyag2kPWUpaS1bK/N+683LYw89aDDuCaNQRDdMG91MFFtS6VGERLE1YtXmWr+44B5ZbFM90mEVYW8TDsxIsfe5ZaYUqa4q6tPmQKJP/lMprqcCnGTrP9ybXiwoAURGgWJtb4pI+DNJkVVukKt6kFxSnwPLPHB5VoMMdLzN50w4nKmqO7qcIrHPHSF2RO7rC+FpdIBoGzam0qtXAaqytVX2ze1mssFIJx2OXqoywSvWv2sPPMc8VFZz+6BGoST/gKnoTKKqLD671rgiaDrCzLvtYoCKL4mKpZd8bWAosOIHGg6xn9LqXBtnJgfXIVgOVgQstBJYMgzyViIqEWaBfmm9dnJUU5rC8Tu+B3iurHuirPdBnsBGwyiDb3dFL0A7rj1IXkCtsbqIauWMtQf2U0AbAJhQIS+qKhj61Icens0hhcwbZJXf842ABkrhWBtlTgHmSGtXpgcIEw5GstvAkXE8x1TzTj9QVAdOEVV/rWNFr56wkfCQsXsvXTpRgzQIYDY1qAd+hZfUkvRmdUPBrHduiyV2f3MhW8QAVcCVgUQzztRJRT+g33WKoro82vbavo4gWo7gS9TwjuwbC3tFdMiqTRDHKZ2PQ7Z9q/Kj3QGC6HMABOrhIbQNThWUDVS/r+MIRYDzFxQmEVzv21ApjDZ+THZzcdYAltRWn2bIBaZSl88Z0WovnY109KhCewhTYFv3s9xN6eL4QZbQIJbKsHpaN4N3ldLqK0+uv2P+KOmNzSmDa0eiygTWAx65xUYqqLYI2a21FNufnN8EJUk40cH7vXAmrA+MPuMEe1r8AfqNX2zMqy51kmwLzqatIUTr13qIH6DV74HzAdIab02u/u/aIMTTvAIBKDMsu7LCoIKD/BT0fO2dlgg/MXpDxao09pEeMVfaCcQcwySWjX0hnjHVBB2+GytJ041xVidLSAV0rRnCMZcU4li13ihZ38IIEweN0JnnKZOiprBZOdJGdB38CS3tKBcZBcXQxTQ34/gvyucYI1qng6cNmy6AITtuk9CJTmALz3EsDqWf9mrPRzuGS3PoQTZeh6+pqTWJHWf9oUfDP5vtOhkc6WG7lRtxFFdSlwKK5W/KHZgem8LI/PFRdEnaQgvPhhs8mR4nuOYuFWelGqxdRJaMNvjOwwUMlJWodT/qM8SXCopWgedshcEVg/PeZWh6mBT8uIypNgF4CKLcMXFQPK8ICggdM/lEbgfGe8BJh0TxrLxUNU1hA8pAGTY/LAF0yLGAci6Jhz/t+6f+S1QcN4E363oVbCOTD/pGbQPw0tuTP8f/bQvsPPoCzn/bfs3UAAAAASUVORK5CYII="/>
    <image id="4h" width="87" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAAApCAYAAABA4LXdAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEk0lEQVRoge2bzVLbQBCE24kxhJ+ceDmekJfjCBhwsHKw2ttqzeyakFStUkzV1Aphy9qP9uzMrAC+7J/Z6rMXuBsePn2Nnu1+dTv86Xs/BCYBeeq53i2CODv3EdgnQTCoKxuzcydfvwNzYENjPAlydfIVqOp+rnbdXmDXVKqjO+y4CjmdrICNAH5Ljk+F3JNlUPfJ8Qx4BjicvIF1qDVfImBVIiHq+D6O++D3VcDryodmUL8nnkEG+gTsilVwhJo5X3+81t3wsHLAM7hBnHWo69HP5HiNOWQHDPQDebDjCOqvxFdIAPuHZMp11RLq2egbG+mq5ChE9GSq3AjsbvQ3GVU0NCoert4JXIu1qliC3QA4F7+Qcw44U29Ppqp1sG8AXsU5J3/vgDK/elhArlpC/CF+MY6EraHCw0NvpnAIV8G+iHM+sPfMMgdVbw2uxlmqljCvAFzK6IAj9fZmCkVVq2C3AJ5Qwpy+j6Hkm5yDjAVusJApYIVLqDcArjEHvEFZ4HqGCxT1uWq3o29Q5hGFD03TVmiEhdpCxhh7iQPUGwA/x+NrlDDBRS6C2wtkX8wUripWw4G/bocCOBRQLVtgzGQM9bBwjQNcAqZ6CZc3thTlaqy9QBEIMA0Z6pp6EnKcLYym6vWYywWN6iXgGxyAMzRo3O0VbrSYveIAd4OiWAf/giKe8Nt5NzzgfnU7tMJCFhoI+ApFxQwNmjUsRbksEHjvjLHvKFC3mK4phOv5/FS5QZ+2BpgKvsAUNMelwNVsgXDXKIAYBhRqlGqmc/xIhaalr4Kmn9vPS8oWtEBgGPDqU8FmRdJkngq31WJsNW68iaM30Kvp13iP+Ty8Z6Jzagqn1hXTG+AY/YWyi0+ayp1a1Ah3q805YnO0U+BGN6L9Te8iaV6oyu1NwV6haedL24tpDxcN8bTgttpx2uDQxeAdywgLXv5qs4bdMLrCznYmJhbB9TcoWE2ktf5mSrJHWXV7znFpOkev0OgvKHOmqBxwaArXW2cOVVXKG2BWgPF1ryh5oKYpvZrDZSHB8vcJwPP4s6pZ+wqpejPlcnTFEuwzpnU3b0qrs6XB9SrtGQe4jyiAqWIHvPcLA3O4mpaocrX80wIBKLGKSs6aNj2ahz4V0RYHqI8ogB1uFH+PtgYOO5dSpbUayNqCI/gXzCuzpcAFpnA1/D2jKPgJ0/AQhYaJtRY0hcutDsLay/lom6fHVqObw/X5qoI1NFC5rl4AGLKdCC5qvqDtUJSoC4B2kWo7EEuAG+1I6DpDz5Sr1wNQVy7BKiRVNP+63iWKFrLe4UYblZrjEihhZzF3Yke4jbjrKZp+dTKwvQKNzEOhhwjdfdCQEKVjR6ulYp5e+Kq6w7xZ0/uzCjVrlfY6eml8hJo+tyDq9VxXj9kzYB9B1cr0rPdY6xaFB193oufGUtUC7d4CdzX9gxWutt8QjEuwwY6j8t+hzyozf1YsBJBss9ccwbhUcxXX/Pj66CnHFETjafKsj7l0sMBcxRw93QrjrFoTRrK/1nr/EiFn3a0INoD2o/sfgvC//+fOKfaZ/+75sr9ovwE6VuMXJQtz3QAAAABJRU5ErkJggg=="/>
  </defs>
</svg>
`;class GamepadUi{constructor(){H(this,"gpadButtonHighlightElements");H(this,"gamepadContainer");H(this,"gamepadHelpTooltip");H(this,"gamepadHelpTooltipText");H(this,"defaultTooltipTarget");H(this,"gamepadConnectNotice");H(this,"tooManyGamepadsNotice");H(this,"currentPopperTarget");H(this,"touchingButtonsCount",0);H(this,"someAxiesNotCentered",!1);H(this,"someButtonsPressed",!1);H(this,"gamepadHelpVisible",!1);H(this,"helpTooltip");this.gamepadContainer=document.getElementById("gamepad-container"),this.gpadButtonHighlightElements=ONSCREEN_GPAD_BUTTON_LABELS.map(e=>document.getElementById(e+"_highlight")),this.gamepadHelpTooltip=document.querySelector("#gamepad-help-tooltip"),this.gamepadHelpTooltipText=document.querySelector("#gamepad-help-text"),this.defaultTooltipTarget=document.querySelector("#select_button"),this.gamepadConnectNotice=document.getElementById("gamepad-connect-notice"),this.tooManyGamepadsNotice=document.getElementById("too-many-gamepads-notice"),this.currentPopperTarget=this.defaultTooltipTarget,this.helpTooltip=createPopper$1({getBoundingClientRect:()=>this.currentPopperTarget.getBoundingClientRect(),contextElement:document.body},this.gamepadHelpTooltip,{modifiers:[flip$1],placement:"right",strategy:"absolute"})}showExtraniousGamepadsConnected(e){this.tooManyGamepadsNotice.style.display=e?"block":"none"}showGamepadConnected(e){e?this.gamepadContainer.classList.add("gamepad-connected"):this.gamepadContainer.classList.remove("gamepad-connected")}showNoGamepads(e){this.gamepadConnectNotice.style.display=e?"block":"none"}toggleGamepadHelpScreen(){this.gamepadHelpVisible=!this.gamepadHelpVisible,this.gamepadHelpVisible?(document.body.classList.add("gamepad-help-open"),document.body.classList.remove("driving-now")):document.body.classList.remove("gamepad-help-open");let e=0;var a=()=>{this.helpTooltip.update(),e++,e<60&&requestAnimationFrame(a)};a()}showNotSupported(){alert("Gamepad interface not supported, please use a more modern browser.")}showHelpTooltip(e,a){this.gamepadHelpVisible?e?(this.currentPopperTarget=e,this.gamepadHelpTooltipText.innerText=a,this.gamepadHelpTooltip.style.opacity="0.9"):this.gamepadHelpTooltip.style.opacity="0":a||(this.currentPopperTarget=this.defaultTooltipTarget,this.gamepadHelpTooltipText.innerText="Gamepad Help",this.gamepadHelpTooltip.style.opacity="0.8"),this.helpTooltip.update()}handleGamepadVisualFeedbackAxisEvents(e,a){e.forEach(n=>{var s=n.thumbStickElement,c=n.axisRange,d=n.xValue||0,u=n.yValue||0;s.style.transform=`rotateY(${-d*30}deg) rotateX(${u*30}deg) translate(${d*c}px,${u*c}px)`,this.gamepadHelpVisible&&(n.upIndicatorElement&&n.downIndicatorElement&&(Math.abs(d)<a?u<-a?(n.upIndicatorElement.style.opacity=Math.max(-u,0),n.downIndicatorElement.style.opacity=0,this.showHelpTooltip(n.upIndicatorElement,n.upHelpText||"None")):u>a?(n.upIndicatorElement.style.opacity=0,n.downIndicatorElement.style.opacity=Math.max(u,0),this.showHelpTooltip(n.downIndicatorElement,n.downHelpText||"None")):(n.upIndicatorElement.style.opacity=0,n.downIndicatorElement.style.opacity=0):(n.upIndicatorElement.style.opacity=0,n.downIndicatorElement.style.opacity=0)),n.leftIndicatorElement&&n.rightIndicatorElement&&(Math.abs(u)<a?d<-a?(n.leftIndicatorElement.style.opacity=Math.max(-d,0),n.rightIndicatorElement.style.opacity=0,this.showHelpTooltip(n.leftIndicatorElement,n.leftHelpText||"None")):d>a?(n.leftIndicatorElement.style.opacity=0,n.rightIndicatorElement.style.opacity=Math.max(d,0),this.showHelpTooltip(n.rightIndicatorElement,n.rightHelpText||"None")):(n.leftIndicatorElement.style.opacity=0,n.rightIndicatorElement.style.opacity=0):(n.leftIndicatorElement.style.opacity=0,n.rightIndicatorElement.style.opacity=0)))});let t=e.reduce((n,s)=>n+Math.abs(s.xValue)+Math.abs(s.yValue)>.05?1:0,0);!this.gamepadHelpVisible&&t>0&&this.someAxiesNotCentered==!1?(this.someAxiesNotCentered=!0,this.setGamepadVisability()):this.someAxiesNotCentered==!0&&t==0&&(this.someAxiesNotCentered=!1,this.setGamepadVisability())}setGamepadVisability(){!this.gamepadHelpVisible&&(this.someAxiesNotCentered||this.someButtonsPressed)?document.body.classList.add("driving-now"):document.body.classList.remove("driving-now")}setGamepadButtonClass(e,a){var t=a[e],n=this.gpadButtonHighlightElements[e];!t||!n||(t.touched?n.classList.add(ONSCREEN_GPAD_BUTTON_TOUCHED_CLASS):n.classList.remove(ONSCREEN_GPAD_BUTTON_TOUCHED_CLASS),t.pressed?n.classList.add(ONSCREEN_GPAD_BUTTON_PRESSED_CLASS):n.classList.remove(ONSCREEN_GPAD_BUTTON_PRESSED_CLASS))}handleGamepadVisualFeedbackButtonEvents(e){let a=0;for(var t=0;t<e.length;t++)this.setGamepadButtonClass(t,e),a+=e[t].pressed?1:0;!this.gamepadHelpVisible&&a>0&&this.someButtonsPressed==!1?(this.someButtonsPressed=!0,this.setGamepadVisability()):this.someButtonsPressed==!0&&(this.someButtonsPressed=!1,this.setGamepadVisability())}handleGamepadVisualFeedbackVariableTriggerButtonEvents(e,a){for(var t=0;t<a.length;t++){const s=a[t],c=s.buttonIndex;this.setGamepadButtonClass(c,e);var n=e[c]?e[c].value:0;s.buttonElement.style.transform=`rotateX(${n*30}deg) translateY(${n*s.axisRange}px)`}}getButtonHighlightElements(){return console.log("getButtonHighlightElements",this.gpadButtonHighlightElements),this.gpadButtonHighlightElements}}var l$2=(r=>(r.up="up",r.down="down",r.left="left",r.right="right",r))(l$2||{}),v=(r=>(r.onOff="onOff",r.variable="variable",r))(v||{}),f$2=(r=>(r.real="real",r.emulated="emulated",r.overlay="overlay",r))(f$2||{});function i(r,e,a){const t=Math.sqrt(r*r+e*e);return t>a?{x:r/t,y:e/t}:{x:r/a,y:e/a}}function o$1(r){if(r instanceof SVGGraphicsElement){r.getAttribute("transform")&&console.warn("Setting Transform origin on an element that already has a transform attribute. This may break the transform!",r);const e=r.getBBox();r.style.transformOrigin=`${e.x+e.width/2}px ${e.y+e.height/2}px`}else if(r instanceof HTMLElement){console.warn("Setting Transform origin on an element that is not an SVG element. This may break the transform!",r);const e=r.getBoundingClientRect();r.style.transformOrigin=`${e.width/2}px ${e.height/2}px`}}var L=Object.defineProperty,M=(r,e,a)=>e in r?L(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,h=(r,e,a)=>(M(r,typeof e!="symbol"?e+"":e,a),a);const T=18,A=4,E=class{constructor(r){if(h(this,"getNativeGamepads",()=>[]),h(this,"buttonPressThreshold",.1),h(this,"realGpadToPatchedIndexMap",[]),h(this,"patchedGpadToRealIndexMap",[]),h(this,"emulatedGamepads",[]),h(this,"emulatedGamepadsMetadata",[]),h(this,"undoEventPatch",()=>{}),this.buttonPressThreshold=r||this.buttonPressThreshold,E.instanceRunning)throw new Error("Only one GamepadEmulator instance may exist at a time!");E.instanceRunning=!0,this.undoEventPatch=this.monkeyPatchGamepadEvents(),this.monkeyPatchGetGamepads()}AddEmulatedGamepad(r,e,a=T,t=A){if((r===-1||!r&&r!==0)&&(r=this.nextEmptyEGpadIndex(e)),this.emulatedGamepads[r])return!1;const n={emulation:f$2.emulated,connected:!0,timestamp:Math.floor(Date.now()/1e3),displayId:"Emulated Gamepad "+r,id:"Emulated Gamepad "+r+" (Xinput STANDARD GAMEPAD)",mapping:"standard",index:r,buttons:new Array(a).fill({pressed:!1,value:0,touched:!1},0,a),axes:new Array(t).fill(0,0,t),hapticActuators:[]};this.emulatedGamepads[r]=n,this.emulatedGamepadsMetadata[r]={overlayMode:e};const s=new Event("gamepadconnected");return s.gamepad=n,window.dispatchEvent(s),n}RemoveEmulatedGamepad(r){this.ClearDisplayButtonEventListeners(r),this.ClearDisplayJoystickEventListeners(r);var e=this.emulatedGamepads[r];if(e){delete this.emulatedGamepads[r],delete this.emulatedGamepadsMetadata[r];const a={...e,connected:!1,timestamp:Math.floor(Date.now()/1e3)},t=new Event("gamepaddisconnected");t.gamepad=a,window.dispatchEvent(t)}else console.warn("Error: removing emulated gamepad. No emulated gamepad exists at index "+r)}PressButton(r,e,a,t){if(this.emulatedGamepads[r]===void 0)throw new Error("Error: PressButton() - no emulated gamepad at index "+r+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");var n=a>this.buttonPressThreshold;this.emulatedGamepads[r].buttons[e]={pressed:n,value:a||0,touched:n||t||!1}}MoveAxis(r,e,a){if(!this.emulatedGamepads[r])throw new Error("Error: MoveAxis() - no emulated gamepad at index "+r+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");this.emulatedGamepads[r].axes[e]=a}AddDisplayButtonEventListeners(r,e){if(!this.emulatedGamepads[r])throw new Error("Error: AddDisplayJoystickEventListeners() - no emulated gamepad at index "+r+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");let a=[];for(var t=0;t<e.length;t++){const n=e[t],s=n.buttonIndex,c=n.tapTarget;if(!c){console.warn("AddDisplayButtonEventListeners() - no tap target in button config "+s+", skipping...");continue}const d=g=>{g.changedTouches[0].target==c&&g.preventDefault()};window.addEventListener("touchstart",d,{passive:!1});const u=g=>{const b=g.buttons==1?1:0;(!n.lockTargetWhilePressed||b==0)&&this.PressButton(r,s,b,!0)};c.addEventListener("pointerenter",u);const _=g=>{const b=g.buttons==1?1:0;(!n.lockTargetWhilePressed||b==0)&&this.PressButton(r,s,0,!1)};c.addEventListener("pointerleave",_);const m=g=>{};if(c.addEventListener("pointercancel",m),n.type==v.onOff){const g=S=>{S.preventDefault(),this.PressButton(r,s,1,!0),n.lockTargetWhilePressed?c.setPointerCapture(S.pointerId):c.releasePointerCapture(S.pointerId),console.log("on/off pointer down",c.hasPointerCapture(S.pointerId))};c.addEventListener("pointerdown",g);const b=()=>{this.PressButton(r,s,0,!0)};c.addEventListener("pointerup",b),a.push(function(){window.removeEventListener("touchstart",d),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",_),c.removeEventListener("pointerdown",g),c.removeEventListener("pointerup",b),c.removeEventListener("pointercancel",m)})}else if(n.type==v.variable){const g={...n},b=this.AddDragControlListener(g,(S,C,k)=>{let R=S?this.buttonPressThreshold+1e-5:0;R+=n.directions[l$2.left]||n.directions[l$2.right]?Math.abs(C):0,R+=n.directions[l$2.up]||n.directions[l$2.down]?Math.abs(k):0,this.PressButton(r,n.buttonIndex,Math.min(R,1),S)});a.push(function(){window.removeEventListener("touchstart",d),c.removeEventListener("pointerenter",u),c.removeEventListener("pointerleave",_),c.removeEventListener("pointercancel",m),b()})}}this.emulatedGamepadsMetadata[r].removeButtonListenersFunc=()=>{a.forEach(n=>n())}}AddDisplayJoystickEventListeners(r,e){if(!this.emulatedGamepads[r])throw new Error("Error: AddDisplayJoystickEventListeners() - no emulated gamepad at index "+r+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");let a=[];for(let t=0;t<e.length;t++){const n=e[t];if(n.tapTarget==null){console.warn(`AddDisplayJoystickEventListeners() - no tap target in joystick config ${t}, skipping...`);continue}const s=this.AddDragControlListener(n,(c,d,u)=>{n.xAxisIndex!==void 0&&this.MoveAxis(r,n.xAxisIndex,d),n.yAxisIndex!==void 0&&this.MoveAxis(r,n.yAxisIndex,u)});a.push(s)}this.emulatedGamepadsMetadata[r].removeJoystickListenersFunc=()=>{a.forEach(t=>t())}}ClearDisplayButtonEventListeners(r){var e;this.emulatedGamepadsMetadata[r]&&((e=this.emulatedGamepadsMetadata[r])!=null&&e.removeButtonListenersFunc)&&this.emulatedGamepadsMetadata[r].removeButtonListenersFunc()}ClearDisplayJoystickEventListeners(r){var e;this.emulatedGamepadsMetadata[r]&&((e=this.emulatedGamepadsMetadata[r])!=null&&e.removeJoystickListenersFunc)&&this.emulatedGamepadsMetadata[r].removeJoystickListenersFunc()}AddDragControlListener(r,e){let a={startX:0,startY:0},t=-1;const n=d=>{var u=d.pointerId;if(t===u){const _=r.directions[l$2.left]?-1:0,m=r.directions[l$2.right]?1:0,g=r.directions[l$2.up]?-1:0,b=r.directions[l$2.down]?1:0,S=d.clientX-a.startX,C=d.clientY-a.startY;let{x:k,y:R}=i(S,C,r.dragDistance);k=Math.max(Math.min(k,m),_),R=Math.max(Math.min(R,b),g),e(!0,k,R)}},s=d=>{t==d.pointerId&&(document.removeEventListener("pointermove",n,!1),document.removeEventListener("pointerup",s,!1),t=-1,e(!1,0,0))};r.tapTarget.addEventListener("pointerdown",d=>{d.preventDefault(),a.startX=d.clientX,a.startY=d.clientY,t=d.pointerId,r.lockTargetWhilePressed?r.tapTarget.setPointerCapture(d.pointerId):r.tapTarget.releasePointerCapture(d.pointerId),console.log("stick pointer down",r.tapTarget.hasPointerCapture(d.pointerId)),e(!0,0,0),document.addEventListener("pointermove",n,!1),document.addEventListener("pointerup",s,!1)});const c=d=>{d.changedTouches[0].target==r.tapTarget&&d.preventDefault()};return window.addEventListener("touchstart",c,{passive:!1}),function(){window.removeEventListener("touchstart",c),r.tapTarget.removeEventListener("pointerdown",n)}}cloneGamepad(r){if(!r)return r;const e=r.axes?r.axes.length:0,a=r.buttons?r.buttons.length:0,t={};for(let n in r)if(n==="axes"){const s=new Array(e);for(let c=0;c<e;c++)s[c]=Number(r.axes[c]);Object.defineProperty(t,"axes",{value:s,enumerable:!0})}else if(n==="buttons"){const s=new Array(a);for(let c=0;c<a;c++){const d=r.buttons[c];if(d==null)s[c]=d;else{const u=d.pressed,_=d.value,m=d.touched||!1;s[c]={pressed:u,value:_,touched:m}}}Object.defineProperty(t,"buttons",{value:s,enumerable:!0})}else Object.defineProperty(t,n,{get:()=>r[n],configurable:!0,enumerable:!0});return t.emulation||(t.emulation=f$2.real),t}nextEmptyEGpadIndex(r){let e=0;if(r)do{if(!this.emulatedGamepads[e])break;e++}while(e<this.emulatedGamepads.length);else{const a=Math.max(this.emulatedGamepads.length,this.patchedGpadToRealIndexMap.length);do{if(!this.emulatedGamepads[e]&&this.patchedGpadToRealIndexMap[e]==null)break;console.log("nextEmptyEGpadIndex",e,!this.emulatedGamepads[e],this.patchedGpadToRealIndexMap[e]==null),e++}while(e<a)}return e}nextEmptyRealGpadIndex(r){let e=r;const a=Math.max(this.emulatedGamepads.length,this.patchedGpadToRealIndexMap.length);do{const t=this.emulatedGamepadsMetadata[e],n=this.realGpadToPatchedIndexMap[e]==null&&this.patchedGpadToRealIndexMap[e]==null;if(t&&t.overlayMode||!t&&n)break;e++}while(e<a);return e}monkeyPatchGamepadEvents(){let r,e,a,t;window.hasOwnProperty("ongamepadconnected")&&(r=Object.getOwnPropertyDescriptor(window,"ongamepadconnected"),a=window.ongamepadconnected,window.ongamepadconnected=null,Object.defineProperty(window,"ongamepadconnected",{get:()=>function(c){},set:c=>{a=c},configurable:!0})),window.hasOwnProperty("ongamepaddisconnected")&&(e=Object.getOwnPropertyDescriptor(window,"ongamepaddisconnected"),t=window.ongamepaddisconnected,window.ongamepaddisconnected=null,Object.defineProperty(window,"ongamepaddisconnected",{get:()=>function(c){},set:c=>{a=c},configurable:!0}));const n=c=>{const d=c.gamepad;if(d&&d.emulation===void 0){c.stopImmediatePropagation();const u=this.cloneGamepad(c.gamepad),_=u.index,m=this.nextEmptyRealGpadIndex(_);this.realGpadToPatchedIndexMap[_]=m,this.patchedGpadToRealIndexMap[m]=_,Object.defineProperty(u,"index",{get:()=>m}),Object.defineProperty(u,"emulation",{get:()=>f$2.real}),console.log(`real gamepad connected ${u.id} (${_}>${m})`,this.realGpadToPatchedIndexMap,this.emulatedGamepads,this.emulatedGamepadsMetadata),c=new Event("gamepadconnected"),c.gamepad=u,window.dispatchEvent(c)}console.log("windowOngamepadconnected",a),a&&a.call(window,c)};window.addEventListener("gamepadconnected",n);const s=c=>{const d=c.gamepad;if(d&&d.emulation===void 0){c.stopImmediatePropagation();const u=this.cloneGamepad(c.gamepad),_=this.realGpadToPatchedIndexMap[u.index]||u.index;Object.defineProperty(u,"index",{get:()=>_}),delete this.realGpadToPatchedIndexMap[u.index],delete this.patchedGpadToRealIndexMap[_],c=new Event("gamepaddisconnected"),c.gamepad=u,window.dispatchEvent(c)}t&&t.call(window,c)};return window.addEventListener("gamepaddisconnected",s),function(){window.removeEventListener("gamepadconnected",n),window.hasOwnProperty("ongamepadconnected")&&(Object.defineProperty(window,"ongamepadconnected",r),window.ongamepadconnected=a),window.removeEventListener("gamepaddisconnected",s),window.hasOwnProperty("ongamepaddisconnected")&&(Object.defineProperty(window,"ongamepaddisconnected",e),window.ongamepaddisconnected=t)}}monkeyPatchGetGamepads(){const r=this;let e=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads||navigator.msGetGamepads;e&&(this.getNativeGamepads=e),navigator.getGamepads=function(){let a=[],t=e!=null?r.getNativeGamepads.apply(navigator):[];for(let s=0;s<t.length;s++){const c=t[s];if(!c)continue;let d=r.cloneGamepad(c),u=r.realGpadToPatchedIndexMap[d.index]||d.index;Object.defineProperty(d,"index",{get:()=>u}),a[u]=d}let n=r.emulatedGamepads;for(let s=0;s<n.length;s++){let c=a[s],d=n[s];if(d&&c){c.emulation=f$2.overlay;let u=Math.max(c.buttons.length,d.buttons.length);for(let m=0;m<u;m++){const g=d.buttons[m]||{touched:!1,pressed:!1,value:0},b=c.buttons[m]||{touched:!1,pressed:!1,value:0};a[s].buttons[m]={touched:g.touched||b.touched||!1,pressed:g.pressed||b.pressed||!1,value:Math.max(g.value,b.value)||0}}let _=Math.max(d.axes.length,c.axes.length);for(let m=0;m<_;m++){const g=d.axes[m]||0,b=c.axes[m]||0;a[s].axes[m]=Math.abs(g||0)>Math.abs(b||0)?g||0:b||0}}else d&&(d.emulation=f$2.emulated,d.timestamp=Math.floor(Date.now()/1e3),a[s]=r.cloneGamepad(d))}return a}}cleanup(){for(let r=0;r<this.emulatedGamepads.length;r++)this.ClearDisplayButtonEventListeners(r),this.ClearDisplayJoystickEventListeners(r);this.emulatedGamepads=[],this.undoEventPatch(),navigator.getGamepads=this.getNativeGamepads,E.instanceRunning=!1}};let y=E;h(y,"instanceRunning",!1);var f$1=Object.defineProperty,l$1=(r,e,a)=>e in r?f$1(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,o=(r,e,a)=>(l$1(r,typeof e!="symbol"?e+"":e,a),a);class G{constructor(e){o(this,"updateDelay"),o(this,"axisDeadZone"),o(this,"buttonConfigs"),o(this,"currentStateOfGamepads"),o(this,"gamepadConnectListeners"),o(this,"gamepadDisconnectListeners"),o(this,"gamepadButtonChangeListeners"),o(this,"gamepadAxisChangeListeners"),this.updateDelay=e.updateDelay||0,this.axisDeadZone=e.axisDeadZone||0,this.buttonConfigs=e.buttonConfigs||[],this.currentStateOfGamepads=[],this.gamepadConnectListeners=[],this.gamepadDisconnectListeners=[],this.gamepadButtonChangeListeners=[],this.gamepadAxisChangeListeners=[],navigator.gamepadInputEmulation="gamepad",window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,navigator.getGamepads=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads||navigator.msGetGamepads,this.gamepadApiSupported()&&this.tickLoop()}setButtonsConfig(e){this.buttonConfigs=e}onGamepadConnect(e){return this.gamepadConnectListeners.push(e),window.addEventListener("gamepadconnected",e,!0),e}offGamepadConnect(e){this.gamepadConnectListeners=this.gamepadConnectListeners.filter(a=>a!==e),window.removeEventListener("gamepadconnected",e,!0)}onGamepadDisconnect(e){return this.gamepadDisconnectListeners.push(e),window.addEventListener("gamepaddisconnected",e,!0),e}offGamepadDisconnect(e){this.gamepadDisconnectListeners=this.gamepadDisconnectListeners.filter(a=>a!==e),window.removeEventListener("gamepaddisconnected",e,!0)}onGamepadAxisChange(e){return this.gamepadAxisChangeListeners.push(e),e}offGamepadAxisChange(e){this.gamepadAxisChangeListeners=this.gamepadAxisChangeListeners.filter(a=>a!==e)}onGamepadButtonChange(e){return this.gamepadButtonChangeListeners.push(e),e}offGamepadButtonChange(e){this.gamepadButtonChangeListeners=this.gamepadButtonChangeListeners.filter(a=>a!==e)}gamepadApiSupported(){return!!navigator.getGamepads&&!!navigator.getGamepads()}getCurrentGamepadStates(e=!1){return e&&this.checkForGamepadChanges(),this.currentStateOfGamepads}tickLoop(){this.checkForGamepadChanges(),this.updateDelay==0?requestAnimationFrame(this.tickLoop.bind(this)):setTimeout(()=>{requestAnimationFrame(this.tickLoop.bind(this))},this.updateDelay)}checkForGamepadChanges(){let e=navigator.getGamepads();for(var a=0;a<e.length;a++){let t=e[a];!t||(this.currentStateOfGamepads[a]||(this.currentStateOfGamepads[a]=t),this.checkForAxisChanges(a,t),this.checkForButtonChanges(a,t),this.currentStateOfGamepads[a]=t)}}checkForAxisChanges(e,a){let t=a.axes;if(t.length==0)return;let n=this.currentStateOfGamepads[e].axes||[],s=[],c,d=!1;for(c=0;c<t.length;c++){let u=t[c]||0,_=n[c]||0;if(u!=_){if(Math.abs(u)<this.axisDeadZone&&Math.abs(_)<this.axisDeadZone)continue;s[c]=!0,d=!0}else s[c]=!1}d&&this.gamepadAxisChangeListeners.forEach(u=>u(e,a,s))}checkForButtonChanges(e,a){let t=a.buttons;if(t.length==0)return;const n=this.currentStateOfGamepads[e].buttons||t;let s=[],c,d=!1;for(c=0;c<t.length;c++){let u=!1;const _=t[c]||{pressed:!1,value:0,touched:!1},m=n[c]||{pressed:!1,value:0,touched:!1},g=this.buttonConfigs[c]||{},b={};_.touched&&!m.touched?(b.touchDown=!0,u=!0):!_.touched&&m.touched&&(b.touchUp=!0,u=!0),_.pressed&&!m.pressed?(b.pressed=!0,u=!0):!_.pressed&&m.pressed&&(b.released=!0,u=!0),g.fireWhileHolding&&_.pressed&&m.pressed&&(b.heldDown=!0,u=!0),_.value!=m.value&&(b.valueChanged=!0,u=!0),u?(d=!0,s[c]=b):s[c]=!1}d&&this.gamepadButtonChangeListeners.forEach(u=>u(e,a,s))}}var p=Object.defineProperty,f=(r,e,a)=>e in r?p(r,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[e]=a,l=(r,e,a)=>(f(r,typeof e!="symbol"?e+"":e,a),a);class D{constructor(e,a){l(this,"config"),l(this,"apiWrapper"),l(this,"btnChangeListener"),l(this,"axisChangeListener"),l(this,"DefaultJoystickDisplayFunction",(t,n,s)=>{const c=t.movementRange;if(t.joystickElement.style.transform=`translate(${n*c}px,${s*c}px)`,t.highlights&&this.config.moveDirectionHighlightClass){const d=t.highlights[l$2.up],u=t.highlights[l$2.down],_=t.highlights[l$2.left],m=t.highlights[l$2.right];d&&s<-.1?d.classList.add(this.config.moveDirectionHighlightClass||""):d&&d.classList.remove(this.config.moveDirectionHighlightClass||""),u&&s>.1?u.classList.add(this.config.moveDirectionHighlightClass||""):u&&u.classList.remove(this.config.moveDirectionHighlightClass||""),_&&n<-.1?_.classList.add(this.config.moveDirectionHighlightClass||""):_&&_.classList.remove(this.config.moveDirectionHighlightClass||""),m&&n>.1?m.classList.add(this.config.moveDirectionHighlightClass||""):m&&m.classList.remove(this.config.moveDirectionHighlightClass||"")}}),l(this,"DefaultButtonDisplayFunction",(t,n,s,c,d,u)=>{const _=t.highlight;if(this.config.touchedHighlightClass&&_&&(d.touchDown?_.classList.add(this.config.touchedHighlightClass):d.touchUp&&_.classList.remove(this.config.touchedHighlightClass)),this.config.pressedHighlightClass&&_&&(d.pressed?_.classList.add(this.config.pressedHighlightClass):d.released&&_.classList.remove(this.config.pressedHighlightClass)),t.type==v.variable){const m=t.directionHighlight;if(this.config.moveDirectionHighlightClass&&m&&(d.pressed?m.classList.add(this.config.moveDirectionHighlightClass):d.released&&m.classList.remove(this.config.moveDirectionHighlightClass)),t.buttonElement){const g=t.direction==l$2.left||t.direction==l$2.right,b=t.direction==l$2.right||t.direction==l$2.down;t.buttonElement.style.transform=`translate${g?"X":"Y"}(${b?"":"-"}${n*t.movementRange}px)`}}}),l(this,"displayButtonChanges",(t,n,s)=>{if(t!=this.config.gamepadIndex)return;const c=this.config.buttons;for(let d=0;d<c.length;d++){const u=s[d];if(!u||Object.keys(u).length==0)continue;const _=c[d],m=n.buttons[d].value,g=n.buttons[d].touched,b=n.buttons[d].pressed;this.config.buttonDisplayFunction?this.config.buttonDisplayFunction(_,m,g,b,u,d):this.DefaultButtonDisplayFunction(_,m,g,b,u,d)}}),this.config=e,this.apiWrapper=a||new G({buttonConfigs:[],updateDelay:0}),this.btnChangeListener=this.apiWrapper.onGamepadButtonChange(this.displayButtonChanges.bind(this)),this.axisChangeListener=this.apiWrapper.onGamepadAxisChange(this.displayJoystickChanges.bind(this))}displayJoystickChanges(e,a,t){if(e!=this.config.gamepadIndex)return;const n=this.config.sticks;for(let s=0;s<n.length;s++){const c=n[s];if(c.xAxisIndex!==void 0&&t[c.xAxisIndex]||c.yAxisIndex!==void 0&&t[c.yAxisIndex]){const d=a.axes,u=c.xAxisIndex!==void 0&&d[c.xAxisIndex]||0,_=c.yAxisIndex!==void 0&&d[c.yAxisIndex]||0;this.config.joystickDisplayFunction?this.config.joystickDisplayFunction(c,u,_):this.DefaultJoystickDisplayFunction(c,u,_)}}}Cleanup(){this.apiWrapper.offGamepadButtonChange(this.btnChangeListener),this.apiWrapper.offGamepadAxisChange(this.axisChangeListener)}}const LEFT_X_AXIS_INDEX=0,LEFT_Y_AXIS_INDEX=1,RIGHT_Y_AXIS_INDEX=3,gpadHelpTooltips=[];class GamepadController{constructor(e=10){H(this,"gpadUi");H(this,"gpadEmulator");H(this,"gpadApiWrapper");H(this,"touchedGpadButtonCount");H(this,"throttleDelay");H(this,"onAxisChange");H(this,"onButtonChange");this.gpadUi=new GamepadUi,this.touchedGpadButtonCount=0,this.throttleDelay=e,this.gpadEmulator=new y(.1),this.gpadApiWrapper=new G({axisDeadZone:.05,updateDelay:0,buttonConfigs:[]}),this.gpadApiWrapper.gamepadApiSupported()||this.gpadUi.showNotSupported(),this.gpadApiWrapper.onGamepadConnect(this.gamepadConnectDisconnectHandler.bind(this)),this.gpadApiWrapper.onGamepadDisconnect(this.gamepadConnectDisconnectHandler.bind(this)),this.gpadApiWrapper.onGamepadAxisChange(this.handleAxisChange.bind(this)),this.gpadApiWrapper.onGamepadButtonChange(this.handleButtonChange.bind(this)),this.setupGamepadEvents(this.throttleDelay)}setupOnscreenGamepad(e){this.gpadEmulator.AddEmulatedGamepad(0,!0,T,A),this.setupGamepadDisplay(0,e),this.setupEmulatedGamepadInput(0,e),this.addEmulatedGamepadKeyboardBindings(0),this.addHelpTooltips()}setupGamepadEvents(e){showToastMessage("gamepad throttle delay: "+e),this.throttleDelay=e,this.clearExternalEventListenerCallbacks(),this.setupExternalEventListenerCallbacks((a,t)=>{if(a.buttons[12].pressed){let n=this.throttleDelay+1;this.setupGamepadEvents(n)}else if(a.buttons[13].pressed){let n=Math.max(this.throttleDelay-1,1);this.setupGamepadEvents(n)}else a.buttons[14].pressed?this.setupGamepadEvents(10):a.buttons[15].pressed&&this.setupGamepadEvents(100)},a=>{var{VelocityX:t,VelocityY:n,VelocityZ:s,AngularVelocityYaw:c}=calculateDesiredMotion(a.axes);t==0&&n==0&&s==0&&c==0&&console.info("GAMEPAD MOTION: STOPed"),RovActions.moveRov(t,n,s,c)})}gamepadConnectDisconnectHandler(){const e=navigator.getGamepads();var a=e.reduce((t,n)=>n?t+1:t,0);a!=0&&e[0].emulated&&(a-=1),this.gpadUi.showGamepadStatus(a),a>1&&console.log("WARNING: More than one gamepad connected!",e)}setupExternalEventListenerCallbacks(e,a){this.onButtonChange=throttle(e,this.throttleDelay,{trailing:!0,leading:!0}),this.onAxisChange=throttle(a,this.throttleDelay,{trailing:!0,leading:!0})}clearExternalEventListenerCallbacks(){this.onButtonChange=null,this.onAxisChange=null}handleButtonChange(e,a,t){if(!(e!=0||!a||!a.buttons)){this.onButtonChange&&this.onButtonChange(a,t),(t[8]&&t[8].released||t[9]&&t[9].released)&&this.gpadUi.toggleGamepadHelpScreen();for(let n=0;n<t.length;n++)t[n]&&t[n].touchDown?gpadHelpTooltips[n]&&gpadHelpTooltips[n].showTooltipTimeout():t[n]&&t[n].touchUp&&gpadHelpTooltips[n]&&gpadHelpTooltips[n].hideTooltip()}}handleAxisChange(e,a){if(e!=0||!a||!a.axes)return;this.onAxisChange&&this.onAxisChange(a);const t=[{axisRange:14,xValue:a.axes[0]||0,yValue:a.axes[1]||0,thumbStickElement:document.getElementById("stick_left"),upIndicatorElement:document.getElementById("l_stick_up_direction_highlight"),downIndicatorElement:document.getElementById("l_stick_down_direction_highlight"),leftIndicatorElement:document.getElementById("l_stick_left_direction_highlight"),rightIndicatorElement:document.getElementById("l_stick_right_direction_highlight"),upHelpText:"Forward",downHelpText:"Back",leftHelpText:"Turn Left",rightHelpText:"Turn Right"},{axisRange:14,xValue:a.axes[2]||0,yValue:a.axes[3]||0,thumbStickElement:document.getElementById("stick_right"),upIndicatorElement:document.getElementById("r_stick_up_direction_highlight"),downIndicatorElement:document.getElementById("r_stick_down_direction_highlight"),leftIndicatorElement:document.getElementById("r_stick_left_direction_highlight"),rightIndicatorElement:document.getElementById("r_stick_right_direction_highlight"),upHelpText:"Up",downHelpText:"Down",leftHelpText:"Strafe Left",rightHelpText:"Strafe Right"}];this.gpadUi.handleGamepadVisualFeedbackAxisEvents(t,.4)}setupGamepadDisplay(e,a){a.querySelectorAll("#stick_right, #stick_left").forEach(s=>{o$1(s)});const t=ONSCREEN_GPAD_BUTTON_LABELS.map((s,c)=>s.includes("trigger")?{type:v.variable,highlight:a.querySelector("#"+s+"_highlight"),buttonElement:a.querySelector("#"+s),direction:l$2.down,directionHighlight:a.querySelector("#"+s+"_direction_highlight"),movementRange:10}:{type:v.onOff,highlight:a.querySelector("#"+s+"_highlight")}),n=[{joystickElement:a.querySelector("#stick_left"),xAxisIndex:0,yAxisIndex:1,movementRange:10,highlights:{[l$2.up]:a.querySelector("#l_stick_up_direction_highlight"),[l$2.down]:a.querySelector("#l_stick_down_direction_highlight"),[l$2.left]:a.querySelector("#l_stick_left_direction_highlight"),[l$2.right]:a.querySelector("#l_stick_right_direction_highlight")}},{joystickElement:a.querySelector("#stick_right"),xAxisIndex:2,yAxisIndex:3,movementRange:10,highlights:{[l$2.up]:a.querySelector("#r_stick_up_direction_highlight"),[l$2.down]:a.querySelector("#r_stick_down_direction_highlight"),[l$2.left]:a.querySelector("#r_stick_left_direction_highlight"),[l$2.right]:a.querySelector("#r_stick_right_direction_highlight")}}];new D({gamepadIndex:e,pressedHighlightClass:"pressed",touchedHighlightClass:"touched",moveDirectionHighlightClass:"moved",buttons:t,sticks:n},this.gpadApiWrapper)}setupEmulatedGamepadInput(e,a){const t=ONSCREEN_GPAD_BUTTON_LABELS.map((s,c)=>s.includes("trigger")?{type:v.variable,buttonIndex:c,tapTarget:a.querySelector("#"+s+"_touch_target"),dragDistance:50,lockTargetWhilePressed:!0,directions:{[l$2.up]:!1,[l$2.down]:!0,[l$2.left]:!1,[l$2.right]:!1}}:{type:v.onOff,buttonIndex:c,lockTargetWhilePressed:s.includes("stick"),tapTarget:a.querySelector("#"+s+"_touch_target")});this.gpadEmulator.AddDisplayButtonEventListeners(e,t);const n=[{tapTarget:a.querySelector("#gamepad-joystick-touch-area-left"),dragDistance:30,xAxisIndex:0,yAxisIndex:1,lockTargetWhilePressed:!0,directions:{[l$2.up]:!0,[l$2.down]:!0,[l$2.left]:!0,[l$2.right]:!0}},{tapTarget:a.querySelector("#gamepad-joystick-touch-area-right"),dragDistance:30,xAxisIndex:2,yAxisIndex:3,lockTargetWhilePressed:!0,directions:{[l$2.up]:!0,[l$2.down]:!0,[l$2.left]:!0,[l$2.right]:!0}},{tapTarget:a.querySelector("#stick_button_left_touch_target"),dragDistance:30,xAxisIndex:0,yAxisIndex:1,lockTargetWhilePressed:!0,directions:{[l$2.up]:!0,[l$2.down]:!0,[l$2.left]:!0,[l$2.right]:!0}},{tapTarget:a.querySelector("#stick_button_right_touch_target"),dragDistance:30,xAxisIndex:2,yAxisIndex:3,lockTargetWhilePressed:!0,directions:{[l$2.up]:!0,[l$2.down]:!0,[l$2.left]:!0,[l$2.right]:!0}}];this.gpadEmulator.AddDisplayJoystickEventListeners(e,n)}addEmulatedGamepadKeyboardBindings(e){const a=(t,n)=>{const s=parseInt(n.key);n.key==="a"?this.gpadEmulator.MoveAxis(e,LEFT_X_AXIS_INDEX,t?-1:0):n.key==="d"?this.gpadEmulator.MoveAxis(e,LEFT_X_AXIS_INDEX,t?1:0):n.key==="w"?this.gpadEmulator.MoveAxis(e,LEFT_Y_AXIS_INDEX,t?-1:0):n.key==="s"?this.gpadEmulator.MoveAxis(e,LEFT_Y_AXIS_INDEX,t?1:0):n.key==="ArrowLeft"||n.key==="ArrowRight"?n.preventDefault():n.key==="ArrowUp"?(this.gpadEmulator.MoveAxis(e,RIGHT_Y_AXIS_INDEX,t?-1:0),n.preventDefault()):n.key==="ArrowDown"?(this.gpadEmulator.MoveAxis(e,RIGHT_Y_AXIS_INDEX,t?1:0),n.preventDefault()):isNaN(s)?n.keyCode&&this.gpadEmulator.PressButton(e,n.keyCode-66+10,t?1:0,t):this.gpadEmulator.PressButton(e,s,t?1:0,t)};window.onkeydown=t=>a(!0,t),window.onkeyup=t=>a(!1,t)}testGamepadJoysticks(){setInterval(()=>{this.gpadEmulator.MoveAxis(0,0,Math.random()*2-1),this.gpadEmulator.MoveAxis(0,1,Math.random()*2-1),this.gpadEmulator.MoveAxis(0,2,Math.random()*2-1),this.gpadEmulator.MoveAxis(0,3,Math.random()*2-1)},10)}addHelpTooltips(){ONSCREEN_GPAD_BUTTON_LABELS.forEach((e,a)=>{const t=document.getElementById(e+"_touch_target");t&&(gpadHelpTooltips[a]=addTooltip(t,{label:GAME_CONTROLLER_BUTTON_CONFIG[a].helpLabel,placement:GAME_CONTROLLER_BUTTON_CONFIG[a].tooltipPlacement},!1))})}}const gpadCtrl$1=new GamepadController(10),OnscreenGamepads_svelte_svelte_type_style_lang="";function create_fragment$2(r){let e,a,t,n,s,c,d,u,_;return{c(){e=element("div"),a=element("div"),t=space(),n=element("div"),s=space(),c=element("div"),d=space(),u=element("div"),attr(a,"id","gamepad-joystick-touch-area-left"),attr(a,"class","gamepad-joystick-touch-area svelte-10uba26"),attr(n,"id","gamepad-joystick-touch-area-right"),attr(n,"class","gamepad-joystick-touch-area svelte-10uba26"),attr(c,"class","gpad-display gpad-display-left"),toggle_class(c,"hidden",!r[0]),attr(u,"class","gpad-display gpad-display-right"),toggle_class(u,"hidden",!r[0]),attr(e,"id","gamepad-container"),attr(e,"class",_=(r[2],""))},m(m,g){insert(m,e,g),append(e,a),append(e,t),append(e,n),append(e,s),append(e,c),c.innerHTML=GamepadLeftSvg,append(e,d),append(e,u),u.innerHTML=GamepadRightSvg,r[6](e)},p(m,[g]){g&1&&toggle_class(c,"hidden",!m[0]),g&1&&toggle_class(u,"hidden",!m[0]),g&4&&_!==(_=(m[2],""))&&attr(e,"class",_)},i:noop$1,o:noop$1,d(m){m&&detach(e),r[6](null)}}}function instance$2(r,e,a){let t,n,s;component_subscribe(r,peerServerConnState,g=>a(4,n=g)),component_subscribe(r,rovDataChannelConnState,g=>a(5,s=g));let c,{visible:d=!0}=e,{disabled:u=!1}=e;const _=appReady.subscribe(g=>{g&&(_(),gpadCtrl$1.setupOnscreenGamepad(c))});function m(g){binding_callbacks[g?"unshift":"push"](()=>{c=g,a(1,c)})}return r.$$set=g=>{"visible"in g&&a(0,d=g.visible),"disabled"in g&&a(3,u=g.disabled)},r.$$.update=()=>{r.$$.dirty&48&&a(2,t=s===ConnectionState.connected||s===ConnectionState.connecting||s===ConnectionState.reconnecting||n===ConnectionState.connecting||n===ConnectionState.reconnecting||n===ConnectionState.disconnected),r.$$.dirty&9&&(d&&!u?gpadCtrl$1.clearExternalEventListenerCallbacks():gpadCtrl$1.setupGamepadEvents(10))},[d,c,t,u,n,s,m]}class OnscreenGamepads extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$2,create_fragment$2,safe_not_equal,{visible:0,disabled:3})}}const VideoPlayer_svelte_svelte_type_style_lang="";function create_fragment$1(r){let e,a;return{c(){e=element("div"),attr(e,"id","livestream_container"),attr(e,"class",a=null_to_empty(r[1]?"full":"")+" svelte-4narkd")},m(t,n){insert(t,e,n),r[4](e)},p(t,[n]){n&2&&a!==(a=null_to_empty(t[1]?"full":"")+" svelte-4narkd")&&attr(e,"class",a)},i:noop$1,o:noop$1,d(t){t&&detach(e),r[4](null)}}}function instance$1(r,e,a){let t,n,s;component_subscribe(r,rovVideoStreamConnState,g=>a(2,t=g)),component_subscribe(r,appReady,g=>a(3,n=g)),component_subscribe(r,fullscreenOpen,g=>a(1,s=g));let c=null,d=null;const u=g=>{if(!g||g==d)return;d=g;const b=document.createElement("video");b.id="video_livestream",b.muted=!0,b.autoplay=!0,b.controls=!1,b.srcObject=g,b.setAttribute("tabindex","-1"),a(0,c.innerHTML="",c),c.appendChild(b),b.onclick=()=>{b.play()},setTimeout(()=>{b.play().catch(S=>{showToastMessage("Click video to play.",5e3,()=>{b.play()})})},150)},_=rovVideoStream.subscribe(g=>{!g||g==d||(g.onaddtrack=function(b){console.log("Got remote track from relay",b.track),u(new MediaStream([b.track]))},u(g))});onDestroy(()=>{videoElement&&(videoElement.pause(),videoElement.srcObject=null),_()});function m(g){binding_callbacks[g?"unshift":"push"](()=>{c=g,a(0,c)})}return r.$$.update=()=>{r.$$.dirty&12&&n===!0&&(t==ConnectionState.connecting||t==ConnectionState.reconnecting?showLoadingUi(LOADING_MESSAGE.awaitingVideoCall,null):(t==ConnectionState.disconnected||t==ConnectionState.connected)&&hideLoadingUi(LOADING_MESSAGE.awaitingVideoCall))},[c,s,t,n,m]}class VideoPlayer extends SvelteComponent{constructor(e){super(),init$1(this,e,instance$1,create_fragment$1,safe_not_equal,{})}}const SensorDisplay_svelte_svelte_type_style_lang="";/* @license twgl.js 5.3.1 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const AHRSViz_svelte_svelte_type_style_lang="",App_svelte_svelte_type_style_lang="";function create_fragment(r){let e,a,t,n,s,c,d,u,_,m,g,b,S,C,k,R,w,$,P;return a=new SvelteToast({props:{options:{reversed:!0,intro:{y:192},pausable:!0,classes:["toast-msg"]}}}),n=new HelpTooltips({}),c=new DialogSpawner({}),u=new LoadingIndicator({}),m=new VideoPlayer({}),b=new VideoPlayer({}),C=new OnscreenGamepads({props:{disabled:r[0]!==ConnectionState.connected}}),R=new TopBar({}),$=new RovSelector({}),{c(){e=element("main"),create_component(a.$$.fragment),t=space(),create_component(n.$$.fragment),s=space(),create_component(c.$$.fragment),d=space(),create_component(u.$$.fragment),_=space(),create_component(m.$$.fragment),g=space(),create_component(b.$$.fragment),S=space(),create_component(C.$$.fragment),k=space(),create_component(R.$$.fragment),w=space(),create_component($.$$.fragment),attr(e,"class","svelte-18jji2s")},m(O,B){insert(O,e,B),mount_component(a,e,null),append(e,t),mount_component(n,e,null),append(e,s),mount_component(c,e,null),append(e,d),mount_component(u,e,null),append(e,_),mount_component(m,e,null),append(e,g),mount_component(b,e,null),append(e,S),mount_component(C,e,null),append(e,k),mount_component(R,e,null),append(e,w),mount_component($,e,null),P=!0},p(O,[B]){const N={};B&1&&(N.disabled=O[0]!==ConnectionState.connected),C.$set(N)},i(O){P||(transition_in(a.$$.fragment,O),transition_in(n.$$.fragment,O),transition_in(c.$$.fragment,O),transition_in(u.$$.fragment,O),transition_in(m.$$.fragment,O),transition_in(b.$$.fragment,O),transition_in(C.$$.fragment,O),transition_in(R.$$.fragment,O),transition_in($.$$.fragment,O),P=!0)},o(O){transition_out(a.$$.fragment,O),transition_out(n.$$.fragment,O),transition_out(c.$$.fragment,O),transition_out(u.$$.fragment,O),transition_out(m.$$.fragment,O),transition_out(b.$$.fragment,O),transition_out(C.$$.fragment,O),transition_out(R.$$.fragment,O),transition_out($.$$.fragment,O),P=!1},d(O){O&&detach(e),destroy_component(a),destroy_component(n),destroy_component(c),destroy_component(u),destroy_component(m),destroy_component(b),destroy_component(C),destroy_component(R),destroy_component($)}}}function instance(r,e,a){let t,n,s,c;return component_subscribe(r,peerServerConnState,d=>a(1,t=d)),component_subscribe(r,rovDataChannelConnState,d=>a(0,n=d)),component_subscribe(r,rovPeerIdEndNumber,d=>a(2,s=d)),component_subscribe(r,appReady,d=>a(3,c=d)),bindNumberSvelteStoreToLocalStorage("rovPeerIdEndNumber",rovPeerIdEndNumber,0),bindStringSvelteStoreToLocalStorage("ourPeerId",ourPeerId),onMount(()=>{appReady.set(!0),showLoadingUi(LOADING_MESSAGE.internetCheck,null),runSiteInitMachine(()=>{hideLoadingUi(LOADING_MESSAGE.internetCheck),rovMessageHandler.setSendMessageCallback(connectionManager.sendMessageToCurrentRov.bind(connectionManager)),connectionManager.start()})}),onDestroy(()=>{RovActions.stopPingLoop(),gpadCtrl.gpadEmulator.cleanup()}),r.$$.update=()=>{r.$$.dirty&15&&c===!0&&(n==ConnectionState.connecting?(showLoadingUi(LOADING_MESSAGE.webrtcConnecting,"Searching for "+getROVName(s)),RovActions.stopPingLoop()):n==ConnectionState.reconnecting?(showLoadingUi(LOADING_MESSAGE.webrtcReconnecting,null),RovActions.stopPingLoop()):n==ConnectionState.disconnected?(hideLoadingUi(LOADING_MESSAGE.webrtcReconnecting),hideLoadingUi(LOADING_MESSAGE.webrtcConnecting),RovActions.stopPingLoop()):n==ConnectionState.connected&&(showToastMessage("Connected to ROV!",1e3),hideLoadingUi(LOADING_MESSAGE.webrtcReconnecting),hideLoadingUi(LOADING_MESSAGE.webrtcConnecting),RovActions.startPingLoop()),t==ConnectionState.connecting?showLoadingUi(LOADING_MESSAGE.serverConnecting,null):t==ConnectionState.reconnecting?hideLoadingUi(LOADING_MESSAGE.serverReconnecting):(t==ConnectionState.disconnected||t==ConnectionState.connected)&&(hideLoadingUi(LOADING_MESSAGE.serverConnecting),hideLoadingUi(LOADING_MESSAGE.serverReconnecting)))},[n,t,s,c]}class App extends SvelteComponent{constructor(e){super(),init$1(this,e,instance,create_fragment,safe_not_equal,{})}}debugPageModeActive.set(getURLQueryStringVariable("debug")!=null);document.addEventListener("fullscreenchange",r=>{fullscreenOpen.set(document.fullscreenElement!==null)});window.onbeforeunload=()=>{connectionManager.cleanup()};new App({target:document.getElementById("app")});
//# sourceMappingURL=index-2aaa337d.js.map
