var vt=Object.defineProperty;var gt=(e,i,t)=>i in e?vt(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var yt=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports);var ut=(e,i,t)=>(gt(e,typeof i!="symbol"?i+"":i,t),t);import"./modulepreload-polyfill-3cfb730f.js";import{E as ENCODE_TXT,D as DECODE_TXT,L as LIVEKIT_CLOUD_ENDPOINT,a as LIVEKIT_LOCAL_ENDPOINT,b as LIVEKIT_BACKEND_ROOM_CONNECTION_CONFIG}from"./consts-70335dc6.js";var bt=yt((exports,module)=>{function appendLog(...e){console.log(...e);const i=document.createElement("p");i.innerText=e.map(t=>JSON.stringify(t)).join(" | "),document.body.appendChild(i)}function getWebsocketURL(e,i=!1){return e.replace("http","ws")}function _mergeNamespaces(e,i){return i.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!=="default"&&!(n in e)){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(e)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var loglevel={exports:{}};(function(e){(function(i,t){e.exports?e.exports=t():i.log=t()})(commonjsGlobal,function(){var i=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"];function o(v,E){var k=v[E];if(typeof k.bind=="function")return k.bind(v);try{return Function.prototype.bind.call(k,v)}catch{return function(){return Function.prototype.apply.apply(k,[v,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(v){return v==="debug"&&(v="log"),typeof console===t?!1:v==="trace"&&n?d:console[v]!==void 0?o(console,v):console.log!==void 0?o(console,"log"):i}function u(v,E){for(var k=0;k<a.length;k++){var C=a[k];this[C]=k<v?i:this.methodFactory(C,v,E)}this.log=this.debug}function c(v,E,k){return function(){typeof console!==t&&(u.call(this,E,k),this[v].apply(this,arguments))}}function h(v,E,k){return s(v)||c.apply(this,arguments)}function p(v,E,k){var C=this,N;E=E??"WARN";var P="loglevel";typeof v=="string"?P+=":"+v:typeof v=="symbol"&&(P=void 0);function M(Z){var re=(a[Z]||"silent").toUpperCase();if(!(typeof window===t||!P)){try{window.localStorage[P]=re;return}catch{}try{window.document.cookie=encodeURIComponent(P)+"="+re+";"}catch{}}}function L(){var Z;if(!(typeof window===t||!P)){try{Z=window.localStorage[P]}catch{}if(typeof Z===t)try{var re=window.document.cookie,Y=re.indexOf(encodeURIComponent(P)+"=");Y!==-1&&(Z=/^([^;]+)/.exec(re.slice(Y))[1])}catch{}return C.levels[Z]===void 0&&(Z=void 0),Z}}function $(){if(!(typeof window===t||!P)){try{window.localStorage.removeItem(P);return}catch{}try{window.document.cookie=encodeURIComponent(P)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}C.name=v,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=k||h,C.getLevel=function(){return N},C.setLevel=function(Z,re){if(typeof Z=="string"&&C.levels[Z.toUpperCase()]!==void 0&&(Z=C.levels[Z.toUpperCase()]),typeof Z=="number"&&Z>=0&&Z<=C.levels.SILENT){if(N=Z,re!==!1&&M(Z),u.call(C,Z,v),typeof console===t&&Z<C.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+Z},C.setDefaultLevel=function(Z){E=Z,L()||C.setLevel(Z,!1)},C.resetLevel=function(){C.setLevel(E,!1),$()},C.enableAll=function(Z){C.setLevel(C.levels.TRACE,Z)},C.disableAll=function(Z){C.setLevel(C.levels.SILENT,Z)};var H=L();H==null&&(H=E),C.setLevel(H,!1)}var l=new p,f={};l.getLogger=function(E){if(typeof E!="symbol"&&typeof E!="string"||E==="")throw new TypeError("You must supply a name when creating a logger.");var k=f[E];return k||(k=f[E]=new p(E,l.getLevel(),l.methodFactory)),k};var m=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=m),l},l.getLoggers=function(){return f},l.default=l,l})})(loglevel);var loglevelExports=loglevel.exports,LogLevel;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(LogLevel||(LogLevel={}));const livekitLogger=loglevelExports.getLogger("livekit");livekitLogger.setLevel(LogLevel.info);var long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long(e,i,t){this.low=e|0,this.high=i|0,this.unsigned=!!t}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(e){return(e&&e.__isLong__)===!0}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,i){var t,n,a;return i?(e>>>=0,(a=0<=e&&e<256)&&(n=UINT_CACHE[e],n)?n:(t=fromBits(e,(e|0)<0?-1:0,!0),a&&(UINT_CACHE[e]=t),t)):(e|=0,(a=-128<=e&&e<128)&&(n=INT_CACHE[e],n)?n:(t=fromBits(e,e<0?-1:0,!1),a&&(INT_CACHE[e]=t),t))}Long.fromInt=fromInt;function fromNumber(e,i){if(isNaN(e))return i?UZERO:ZERO;if(i){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE}return e<0?fromNumber(-e,i).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,i)}Long.fromNumber=fromNumber;function fromBits(e,i,t){return new Long(e,i,t)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(e,i,t){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return ZERO;if(typeof i=="number"?(t=i,i=!1):i=!!i,t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return fromString(e.substring(1),i,t).neg();for(var a=fromNumber(pow_dbl(t,8)),o=ZERO,d=0;d<e.length;d+=8){var s=Math.min(8,e.length-d),u=parseInt(e.substring(d,d+s),t);if(s<8){var c=fromNumber(pow_dbl(t,s));o=o.mul(c).add(fromNumber(u))}else o=o.mul(a),o=o.add(fromNumber(u))}return o.unsigned=i,o}Long.fromString=fromString;function fromValue(e,i){return typeof e=="number"?fromNumber(e,i):typeof e=="string"?fromString(e,i):fromBits(e.low,e.high,typeof i=="boolean"?i:e.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function(i){if(i=i||10,i<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var t=fromNumber(i),n=this.div(t),a=n.mul(t).sub(this);return n.toString(i)+a.toInt().toString(i)}else return"-"+this.neg().toString(i);for(var o=fromNumber(pow_dbl(i,6),this.unsigned),d=this,s="";;){var u=d.div(o),c=d.sub(u.mul(o)).toInt()>>>0,h=c.toString(i);if(d=u,d.isZero())return h+s;for(;h.length<6;)h="0"+h;s=""+h+s}};LongPrototype.getHighBits=function(){return this.high};LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0};LongPrototype.getLowBits=function(){return this.low};LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0};LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var i=this.high!=0?this.high:this.low,t=31;t>0&&!(i&1<<t);t--);return this.high!=0?t+33:t+1};LongPrototype.isZero=function(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function(){return(this.low&1)===1};LongPrototype.isEven=function(){return(this.low&1)===0};LongPrototype.equals=function(i){return isLong(i)||(i=fromValue(i)),this.unsigned!==i.unsigned&&this.high>>>31===1&&i.high>>>31===1?!1:this.high===i.high&&this.low===i.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function(i){return!this.eq(i)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function(i){return this.comp(i)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function(i){return this.comp(i)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function(i){return this.comp(i)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function(i){return this.comp(i)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function(i){if(isLong(i)||(i=fromValue(i)),this.eq(i))return 0;var t=this.isNegative(),n=i.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function(i){isLong(i)||(i=fromValue(i));var t=this.high>>>16,n=this.high&65535,a=this.low>>>16,o=this.low&65535,d=i.high>>>16,s=i.high&65535,u=i.low>>>16,c=i.low&65535,h=0,p=0,l=0,f=0;return f+=o+c,l+=f>>>16,f&=65535,l+=a+u,p+=l>>>16,l&=65535,p+=n+s,h+=p>>>16,p&=65535,h+=t+d,h&=65535,fromBits(l<<16|f,h<<16|p,this.unsigned)};LongPrototype.subtract=function(i){return isLong(i)||(i=fromValue(i)),this.add(i.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function(i){if(this.isZero())return ZERO;if(isLong(i)||(i=fromValue(i)),wasm){var t=wasm.mul(this.low,this.high,i.low,i.high);return fromBits(t,wasm.get_high(),this.unsigned)}if(i.isZero())return ZERO;if(this.eq(MIN_VALUE))return i.isOdd()?MIN_VALUE:ZERO;if(i.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(TWO_PWR_24)&&i.lt(TWO_PWR_24))return fromNumber(this.toNumber()*i.toNumber(),this.unsigned);var n=this.high>>>16,a=this.high&65535,o=this.low>>>16,d=this.low&65535,s=i.high>>>16,u=i.high&65535,c=i.low>>>16,h=i.low&65535,p=0,l=0,f=0,m=0;return m+=d*h,f+=m>>>16,m&=65535,f+=o*h,l+=f>>>16,f&=65535,f+=d*c,l+=f>>>16,f&=65535,l+=a*h,p+=l>>>16,l&=65535,l+=o*c,p+=l>>>16,l&=65535,l+=d*u,p+=l>>>16,l&=65535,p+=n*h+a*c+o*u+d*s,p&=65535,fromBits(f<<16|m,p<<16|l,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function(i){if(isLong(i)||(i=fromValue(i)),i.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&i.low===-1&&i.high===-1)return this;var t=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,i.low,i.high);return fromBits(t,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var n,a,o;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return UZERO;if(i.gt(this.shru(1)))return UONE;o=UZERO}else{if(this.eq(MIN_VALUE)){if(i.eq(ONE)||i.eq(NEG_ONE))return MIN_VALUE;if(i.eq(MIN_VALUE))return ONE;var d=this.shr(1);return n=d.div(i).shl(1),n.eq(ZERO)?i.isNegative()?ONE:NEG_ONE:(a=this.sub(i.mul(n)),o=n.add(a.div(i)),o)}else if(i.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();o=ZERO}for(a=this;a.gte(i);){n=Math.max(1,Math.floor(a.toNumber()/i.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),u=s<=48?1:pow_dbl(2,s-48),c=fromNumber(n),h=c.mul(i);h.isNegative()||h.gt(a);)n-=u,c=fromNumber(n,this.unsigned),h=c.mul(i);c.isZero()&&(c=ONE),o=o.add(c),a=a.sub(h)}return o};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function(i){if(isLong(i)||(i=fromValue(i)),wasm){var t=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,i.low,i.high);return fromBits(t,wasm.get_high(),this.unsigned)}return this.sub(this.div(i).mul(i))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.and=function(i){return isLong(i)||(i=fromValue(i)),fromBits(this.low&i.low,this.high&i.high,this.unsigned)};LongPrototype.or=function(i){return isLong(i)||(i=fromValue(i)),fromBits(this.low|i.low,this.high|i.high,this.unsigned)};LongPrototype.xor=function(i){return isLong(i)||(i=fromValue(i)),fromBits(this.low^i.low,this.high^i.high,this.unsigned)};LongPrototype.shiftLeft=function(i){return isLong(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?fromBits(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):fromBits(0,this.low<<i-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function(i){return isLong(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?fromBits(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):fromBits(this.high>>i-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function(i){if(isLong(i)&&(i=i.toInt()),i&=63,i===0)return this;var t=this.high;if(i<32){var n=this.low;return fromBits(n>>>i|t<<32-i,t>>>i,this.unsigned)}else return i===32?fromBits(t,0,this.unsigned):fromBits(t>>>i-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function(){var i=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,i&255,i>>>8&255,i>>>16&255,i>>>24]};LongPrototype.toBytesBE=function(){var i=this.high,t=this.low;return[i>>>24,i>>>16&255,i>>>8&255,i&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Long.fromBytes=function(i,t,n){return n?Long.fromBytesLE(i,t):Long.fromBytesBE(i,t)};Long.fromBytesLE=function(i,t){return new Long(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,t)};Long.fromBytesBE=function(i,t){return new Long(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],t)};var Long$1=getDefaultExportFromCjs(long),indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=e;function e(i,t){for(var n=new Array(arguments.length-1),a=0,o=2,d=!0;o<arguments.length;)n[a++]=arguments[o++];return new Promise(function(u,c){n[a]=function(p){if(d)if(d=!1,p)c(p);else{for(var l=new Array(arguments.length-1),f=0;f<l.length;)l[f++]=arguments[f];u.apply(null,l)}};try{i.apply(t||null,n)}catch(h){d&&(d=!1,c(h))}})}return aspromise}var base64$1={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(e){var i=e;i.length=function(s){var u=s.length;if(!u)return 0;for(var c=0;--u%4>1&&s.charAt(u)==="=";)++c;return Math.ceil(s.length*3)/4-c};for(var t=new Array(64),n=new Array(123),a=0;a<64;)n[t[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;i.encode=function(s,u,c){for(var h=null,p=[],l=0,f=0,m;u<c;){var v=s[u++];switch(f){case 0:p[l++]=t[v>>2],m=(v&3)<<4,f=1;break;case 1:p[l++]=t[m|v>>4],m=(v&15)<<2,f=2;break;case 2:p[l++]=t[m|v>>6],p[l++]=t[v&63],f=0;break}l>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,p)),l=0)}return f&&(p[l++]=t[m],p[l++]=61,f===1&&(p[l++]=61)),h?(l&&h.push(String.fromCharCode.apply(String,p.slice(0,l))),h.join("")):String.fromCharCode.apply(String,p.slice(0,l))};var o="invalid encoding";i.decode=function(s,u,c){for(var h=c,p=0,l,f=0;f<s.length;){var m=s.charCodeAt(f++);if(m===61&&p>1)break;if((m=n[m])===void 0)throw Error(o);switch(p){case 0:l=m,p=1;break;case 1:u[c++]=l<<2|(m&48)>>4,l=m,p=2;break;case 2:u[c++]=(l&15)<<4|(m&60)>>2,l=m,p=3;break;case 3:u[c++]=(l&3)<<6|m,p=0;break}}if(p===1)throw Error(o);return c-h},i.test=function(s){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(s)}}(base64$1)),base64$1}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=e;function e(){this._listeners={}}return e.prototype.on=function(t,n,a){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:n,ctx:a||this}),this},e.prototype.off=function(t,n){if(t===void 0)this._listeners={};else if(n===void 0)this._listeners[t]=[];else for(var a=this._listeners[t],o=0;o<a.length;)a[o].fn===n?a.splice(o,1):++o;return this},e.prototype.emit=function(t){var n=this._listeners[t];if(n){for(var a=[],o=1;o<arguments.length;)a.push(arguments[o++]);for(o=0;o<n.length;)n[o].fn.apply(n[o++].ctx,a)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=e(e);function e(o){return typeof Float32Array<"u"?function(){var d=new Float32Array([-0]),s=new Uint8Array(d.buffer),u=s[3]===128;function c(f,m,v){d[0]=f,m[v]=s[0],m[v+1]=s[1],m[v+2]=s[2],m[v+3]=s[3]}function h(f,m,v){d[0]=f,m[v]=s[3],m[v+1]=s[2],m[v+2]=s[1],m[v+3]=s[0]}o.writeFloatLE=u?c:h,o.writeFloatBE=u?h:c;function p(f,m){return s[0]=f[m],s[1]=f[m+1],s[2]=f[m+2],s[3]=f[m+3],d[0]}function l(f,m){return s[3]=f[m],s[2]=f[m+1],s[1]=f[m+2],s[0]=f[m+3],d[0]}o.readFloatLE=u?p:l,o.readFloatBE=u?l:p}():function(){function d(u,c,h,p){var l=c<0?1:0;if(l&&(c=-c),c===0)u(1/c>0?0:2147483648,h,p);else if(isNaN(c))u(2143289344,h,p);else if(c>34028234663852886e22)u((l<<31|2139095040)>>>0,h,p);else if(c<11754943508222875e-54)u((l<<31|Math.round(c/1401298464324817e-60))>>>0,h,p);else{var f=Math.floor(Math.log(c)/Math.LN2),m=Math.round(c*Math.pow(2,-f)*8388608)&8388607;u((l<<31|f+127<<23|m)>>>0,h,p)}}o.writeFloatLE=d.bind(null,i),o.writeFloatBE=d.bind(null,t);function s(u,c,h){var p=u(c,h),l=(p>>31)*2+1,f=p>>>23&255,m=p&8388607;return f===255?m?NaN:l*(1/0):f===0?l*1401298464324817e-60*m:l*Math.pow(2,f-150)*(m+8388608)}o.readFloatLE=s.bind(null,n),o.readFloatBE=s.bind(null,a)}(),typeof Float64Array<"u"?function(){var d=new Float64Array([-0]),s=new Uint8Array(d.buffer),u=s[7]===128;function c(f,m,v){d[0]=f,m[v]=s[0],m[v+1]=s[1],m[v+2]=s[2],m[v+3]=s[3],m[v+4]=s[4],m[v+5]=s[5],m[v+6]=s[6],m[v+7]=s[7]}function h(f,m,v){d[0]=f,m[v]=s[7],m[v+1]=s[6],m[v+2]=s[5],m[v+3]=s[4],m[v+4]=s[3],m[v+5]=s[2],m[v+6]=s[1],m[v+7]=s[0]}o.writeDoubleLE=u?c:h,o.writeDoubleBE=u?h:c;function p(f,m){return s[0]=f[m],s[1]=f[m+1],s[2]=f[m+2],s[3]=f[m+3],s[4]=f[m+4],s[5]=f[m+5],s[6]=f[m+6],s[7]=f[m+7],d[0]}function l(f,m){return s[7]=f[m],s[6]=f[m+1],s[5]=f[m+2],s[4]=f[m+3],s[3]=f[m+4],s[2]=f[m+5],s[1]=f[m+6],s[0]=f[m+7],d[0]}o.readDoubleLE=u?p:l,o.readDoubleBE=u?l:p}():function(){function d(u,c,h,p,l,f){var m=p<0?1:0;if(m&&(p=-p),p===0)u(0,l,f+c),u(1/p>0?0:2147483648,l,f+h);else if(isNaN(p))u(0,l,f+c),u(2146959360,l,f+h);else if(p>17976931348623157e292)u(0,l,f+c),u((m<<31|2146435072)>>>0,l,f+h);else{var v;if(p<22250738585072014e-324)v=p/5e-324,u(v>>>0,l,f+c),u((m<<31|v/4294967296)>>>0,l,f+h);else{var E=Math.floor(Math.log(p)/Math.LN2);E===1024&&(E=1023),v=p*Math.pow(2,-E),u(v*4503599627370496>>>0,l,f+c),u((m<<31|E+1023<<20|v*1048576&1048575)>>>0,l,f+h)}}}o.writeDoubleLE=d.bind(null,i,0,4),o.writeDoubleBE=d.bind(null,t,4,0);function s(u,c,h,p,l){var f=u(p,l+c),m=u(p,l+h),v=(m>>31)*2+1,E=m>>>20&2047,k=4294967296*(m&1048575)+f;return E===2047?k?NaN:v*(1/0):E===0?v*5e-324*k:v*Math.pow(2,E-1075)*(k+4503599627370496)}o.readDoubleLE=s.bind(null,n,0,4),o.readDoubleBE=s.bind(null,a,4,0)}(),o}function i(o,d,s){d[s]=o&255,d[s+1]=o>>>8&255,d[s+2]=o>>>16&255,d[s+3]=o>>>24}function t(o,d,s){d[s]=o>>>24,d[s+1]=o>>>16&255,d[s+2]=o>>>8&255,d[s+3]=o&255}function n(o,d){return(o[d]|o[d+1]<<8|o[d+2]<<16|o[d+3]<<24)>>>0}function a(o,d){return(o[d]<<24|o[d+1]<<16|o[d+2]<<8|o[d+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=e;function e(i){try{var t=void 0;if(t&&(t.length||Object.keys(t).length))return t}catch{}return null}return inquire_1}var utf8$2={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(e){var i=e;i.length=function(n){for(var a=0,o=0,d=0;d<n.length;++d)o=n.charCodeAt(d),o<128?a+=1:o<2048?a+=2:(o&64512)===55296&&(n.charCodeAt(d+1)&64512)===56320?(++d,a+=4):a+=3;return a},i.read=function(n,a,o){var d=o-a;if(d<1)return"";for(var s=null,u=[],c=0,h;a<o;)h=n[a++],h<128?u[c++]=h:h>191&&h<224?u[c++]=(h&31)<<6|n[a++]&63:h>239&&h<365?(h=((h&7)<<18|(n[a++]&63)<<12|(n[a++]&63)<<6|n[a++]&63)-65536,u[c++]=55296+(h>>10),u[c++]=56320+(h&1023)):u[c++]=(h&15)<<12|(n[a++]&63)<<6|n[a++]&63,c>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,u)),c=0);return s?(c&&s.push(String.fromCharCode.apply(String,u.slice(0,c))),s.join("")):String.fromCharCode.apply(String,u.slice(0,c))},i.write=function(n,a,o){for(var d=o,s,u,c=0;c<n.length;++c)s=n.charCodeAt(c),s<128?a[o++]=s:s<2048?(a[o++]=s>>6|192,a[o++]=s&63|128):(s&64512)===55296&&((u=n.charCodeAt(c+1))&64512)===56320?(s=65536+((s&1023)<<10)+(u&1023),++c,a[o++]=s>>18|240,a[o++]=s>>12&63|128,a[o++]=s>>6&63|128,a[o++]=s&63|128):(a[o++]=s>>12|224,a[o++]=s>>6&63|128,a[o++]=s&63|128);return o-d}}(utf8$2)),utf8$2}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=e;function e(i,t,n){var a=n||8192,o=a>>>1,d=null,s=a;return function(c){if(c<1||c>o)return i(c);s+c>a&&(d=i(a),s=0);var h=t.call(d,s,s+=c);return s&7&&(s=(s|7)+1),h}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=i;var e=requireMinimal();function i(o,d){this.lo=o>>>0,this.hi=d>>>0}var t=i.zero=new i(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var n=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(d){if(d===0)return t;var s=d<0;s&&(d=-d);var u=d>>>0,c=(d-u)/4294967296>>>0;return s&&(c=~c>>>0,u=~u>>>0,++u>4294967295&&(u=0,++c>4294967295&&(c=0))),new i(u,c)},i.from=function(d){if(typeof d=="number")return i.fromNumber(d);if(e.isString(d))if(e.Long)d=e.Long.fromString(d);else return i.fromNumber(parseInt(d,10));return d.low||d.high?new i(d.low>>>0,d.high>>>0):t},i.prototype.toNumber=function(d){if(!d&&this.hi>>>31){var s=~this.lo+1>>>0,u=~this.hi>>>0;return s||(u=u+1>>>0),-(s+u*4294967296)}return this.lo+this.hi*4294967296},i.prototype.toLong=function(d){return e.Long?new e.Long(this.lo|0,this.hi|0,!!d):{low:this.lo|0,high:this.hi|0,unsigned:!!d}};var a=String.prototype.charCodeAt;return i.fromHash=function(d){return d===n?t:new i((a.call(d,0)|a.call(d,1)<<8|a.call(d,2)<<16|a.call(d,3)<<24)>>>0,(a.call(d,4)|a.call(d,5)<<8|a.call(d,6)<<16|a.call(d,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var d=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^d)>>>0,this.lo=(this.lo<<1^d)>>>0,this},i.prototype.zzDecode=function(){var d=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^d)>>>0,this.hi=(this.hi>>>1^d)>>>0,this},i.prototype.length=function(){var d=this.lo,s=(this.lo>>>28|this.hi<<4)>>>0,u=this.hi>>>24;return u===0?s===0?d<16384?d<128?1:2:d<2097152?3:4:s<16384?s<128?5:6:s<2097152?7:8:u<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(e){var i=e;i.asPromise=requireAspromise(),i.base64=requireBase64(),i.EventEmitter=requireEventemitter(),i.float=requireFloat(),i.inquire=requireInquire(),i.utf8=requireUtf8(),i.pool=requirePool(),i.LongBits=requireLongbits(),i.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),i.global=i.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},i.isString=function(o){return typeof o=="string"||o instanceof String},i.isObject=function(o){return o&&typeof o=="object"},i.isset=i.isSet=function(o,d){var s=o[d];return s!=null&&o.hasOwnProperty(d)?typeof s!="object"||(Array.isArray(s)?s.length:Object.keys(s).length)>0:!1},i.Buffer=function(){try{var a=i.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(o){return typeof o=="number"?i.Buffer?i._Buffer_allocUnsafe(o):new i.Array(o):i.Buffer?i._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},i.Array=typeof Uint8Array<"u"?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(o){return o?i.LongBits.from(o).toHash():i.LongBits.zeroHash},i.longFromHash=function(o,d){var s=i.LongBits.fromHash(o);return i.Long?i.Long.fromBits(s.lo,s.hi,d):s.toNumber(!!d)};function t(a,o,d){for(var s=Object.keys(o),u=0;u<s.length;++u)(a[s[u]]===void 0||!d)&&(a[s[u]]=o[s[u]]);return a}i.merge=t,i.lcFirst=function(o){return o.charAt(0).toLowerCase()+o.substring(1)};function n(a){function o(d,s){if(!(this instanceof o))return new o(d,s);Object.defineProperty(this,"message",{get:function(){return d}}),Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:new Error().stack||""}),s&&t(this,s)}return o.prototype=Object.create(Error.prototype,{constructor:{value:o,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return a},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),o}i.newError=n,i.ProtocolError=n("ProtocolError"),i.oneOfGetter=function(o){for(var d={},s=0;s<o.length;++s)d[o[s]]=1;return function(){for(var u=Object.keys(this),c=u.length-1;c>-1;--c)if(d[u[c]]===1&&this[u[c]]!==void 0&&this[u[c]]!==null)return u[c]}},i.oneOfSetter=function(o){return function(d){for(var s=0;s<o.length;++s)o[s]!==d&&delete this[o[s]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var a=i.Buffer;if(!a){i._Buffer_from=i._Buffer_allocUnsafe=null;return}i._Buffer_from=a.from!==Uint8Array.from&&a.from||function(d,s){return new a(d,s)},i._Buffer_allocUnsafe=a.allocUnsafe||function(d){return new a(d)}}}(minimal$1)),minimal$1}var writer$2=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,i,t){this.fn=e,this.len=i,this.next=void 0,this.val=t}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function(i){return new util$4.Array(i)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function(i,t,n){return this.tail=this.tail.next=new Op(i,t,n),this.len+=t,this};function writeByte(e,i,t){i[t]=e&255}function writeVarint32(e,i,t){for(;e>127;)i[t++]=e&127|128,e>>>=7;i[t]=e}function VarintOp(e,i){this.len=e,this.next=void 0,this.val=i}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function(i){return this.len+=(this.tail=this.tail.next=new VarintOp((i=i>>>0)<128?1:i<16384?2:i<2097152?3:i<268435456?4:5,i)).len,this};Writer$1.prototype.int32=function(i){return i<0?this._push(writeVarint64,10,LongBits$1.fromNumber(i)):this.uint32(i)};Writer$1.prototype.sint32=function(i){return this.uint32((i<<1^i>>31)>>>0)};function writeVarint64(e,i,t){for(;e.hi;)i[t++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)i[t++]=e.lo&127|128,e.lo=e.lo>>>7;i[t++]=e.lo}Writer$1.prototype.uint64=function(i){var t=LongBits$1.from(i);return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function(i){var t=LongBits$1.from(i).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.bool=function(i){return this._push(writeByte,1,i?1:0)};function writeFixed32(e,i,t){i[t]=e&255,i[t+1]=e>>>8&255,i[t+2]=e>>>16&255,i[t+3]=e>>>24}Writer$1.prototype.fixed32=function(i){return this._push(writeFixed32,4,i>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function(i){var t=LongBits$1.from(i);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function(i){return this._push(util$4.float.writeFloatLE,4,i)};Writer$1.prototype.double=function(i){return this._push(util$4.float.writeDoubleLE,8,i)};var writeBytes=util$4.Array.prototype.set?function(i,t,n){t.set(i,n)}:function(i,t,n){for(var a=0;a<i.length;++a)t[n+a]=i[a]};Writer$1.prototype.bytes=function(i){var t=i.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(i)){var n=Writer$1.alloc(t=base64.length(i));base64.decode(i,n,0),i=n}return this.uint32(t)._push(writeBytes,t,i)};Writer$1.prototype.string=function(i){var t=utf8$1.length(i);return t?this.uint32(t)._push(utf8$1.write,t,i):this._push(writeByte,1,0)};Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function(){var i=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=i.next,this.tail=t,this.len+=n),this};Writer$1.prototype.finish=function(){for(var i=this.head.next,t=this.constructor.alloc(this.len),n=0;i;)i.fn(i.val,t,n),n+=i.len,i=i.next;return t};Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer$2;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(i,t,n){t.set(i,n)}:function(i,t,n){if(i.copy)i.copy(t,n,0,i.length);else for(var a=0;a<i.length;)t[n++]=i[a++]}};BufferWriter.prototype.bytes=function(i){util$3.isString(i)&&(i=util$3._Buffer_from(i,"base64"));var t=i.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,i),this};function writeStringBuffer(e,i,t){e.length<40?util$3.utf8.write(e,i,t):i.utf8Write?i.utf8Write(e,t):i.write(e,t)}BufferWriter.prototype.string=function(i){var t=util$3.Buffer.byteLength(i);return this.uint32(t),t&&this._push(writeStringBuffer,t,i),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,i){return RangeError("index out of range: "+e.pos+" + "+(i||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array=typeof Uint8Array<"u"?function(i){if(i instanceof Uint8Array||Array.isArray(i))return new Reader$1(i);throw Error("illegal buffer")}:function(i){if(Array.isArray(i))return new Reader$1(i);throw Error("illegal buffer")},create=function(){return util$2.Buffer?function(t){return(Reader$1.create=function(a){return util$2.Buffer.isBuffer(a)?new BufferReader$1(a):create_array(a)})(t)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function(){var i=4294967295;return function(){if(i=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(i=(i|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(i=(i|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(i=(i|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(i=(i|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return i;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return i}}();Reader$1.prototype.int32=function(){return this.uint32()|0};Reader$1.prototype.sint32=function(){var i=this.uint32();return i>>>1^-(i&1)|0};function readLongVarint(){var e=new LongBits(0,0),i=0;if(this.len-this.pos>4){for(;i<4;++i)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<i*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;i=0}else{for(;i<3;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<i*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<i*7)>>>0,e}if(this.len-this.pos>4){for(;i<5;++i)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<i*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;i<5;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<i*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function(){return this.uint32()!==0};function readFixed32_end(e,i){return(e[i-4]|e[i-3]<<8|e[i-2]<<16|e[i-1]<<24)>>>0}Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var i=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,i};Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var i=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,i};Reader$1.prototype.bytes=function(){var i=this.uint32(),t=this.pos,n=this.pos+i;if(n>this.len)throw indexOutOfRange(this,i);return this.pos+=i,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};Reader$1.prototype.string=function(){var i=this.bytes();return utf8.read(i,0,i.length)};Reader$1.prototype.skip=function(i){if(typeof i=="number"){if(this.pos+i>this.len)throw indexOutOfRange(this,i);this.pos+=i}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var i=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[i](!1)},uint64:function(){return readLongVarint.call(this)[i](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[i](!1)},fixed64:function(){return readFixed64.call(this)[i](!0)},sfixed64:function(){return readFixed64.call(this)[i](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function(){var i=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+i,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+i,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(e,i,t){if(typeof e!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!i,this.responseDelimited=!!t}Service.prototype.rpcCall=function e(i,t,n,a,o){if(!a)throw TypeError("request must be specified");var d=this;if(!o)return util.asPromise(e,d,i,t,n,a);if(!d.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return d.rpcImpl(i,t[d.requestDelimited?"encodeDelimited":"encode"](a).finish(),function(u,c){if(u)return d.emit("error",u,i),o(u);if(c===null){d.end(!0);return}if(!(c instanceof n))try{c=n[d.responseDelimited?"decodeDelimited":"decode"](c)}catch(h){return d.emit("error",h,i),o(h)}return d.emit("data",c,i),o(null,c)})}catch(s){d.emit("error",s,i),setTimeout(function(){o(s)},0);return}};Service.prototype.end=function(i){return this.rpcImpl&&(i||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(e){var i=e;i.Service=service})(rpc);var roots={};(function(e){var i=e;i.build="minimal",i.Writer=writer$2,i.BufferWriter=writer_buffer,i.Reader=reader,i.BufferReader=reader_buffer,i.util=requireMinimal(),i.rpc=rpc,i.roots=roots,i.configure=t;function t(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}t()})(indexMinimal);var minimal=indexMinimal,_m0=getDefaultExportFromCjs(minimal);(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw"Unable to locate global object"})();_m0.util.Long!==Long$1&&(_m0.util.Long=Long$1,_m0.configure());var AudioCodec;(function(e){e[e.DEFAULT_AC=0]="DEFAULT_AC",e[e.OPUS=1]="OPUS",e[e.AAC=2]="AAC",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(AudioCodec||(AudioCodec={}));var VideoCodec;(function(e){e[e.DEFAULT_VC=0]="DEFAULT_VC",e[e.H264_BASELINE=1]="H264_BASELINE",e[e.H264_MAIN=2]="H264_MAIN",e[e.H264_HIGH=3]="H264_HIGH",e[e.VP8=4]="VP8",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(VideoCodec||(VideoCodec={}));var TrackType;(function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.DATA=2]="DATA",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(TrackType||(TrackType={}));function trackTypeFromJSON(e){switch(e){case 0:case"AUDIO":return TrackType.AUDIO;case 1:case"VIDEO":return TrackType.VIDEO;case 2:case"DATA":return TrackType.DATA;case-1:case"UNRECOGNIZED":default:return TrackType.UNRECOGNIZED}}function trackTypeToJSON(e){switch(e){case TrackType.AUDIO:return"AUDIO";case TrackType.VIDEO:return"VIDEO";case TrackType.DATA:return"DATA";case TrackType.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var TrackSource;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CAMERA=1]="CAMERA",e[e.MICROPHONE=2]="MICROPHONE",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(TrackSource||(TrackSource={}));function trackSourceFromJSON(e){switch(e){case 0:case"UNKNOWN":return TrackSource.UNKNOWN;case 1:case"CAMERA":return TrackSource.CAMERA;case 2:case"MICROPHONE":return TrackSource.MICROPHONE;case 3:case"SCREEN_SHARE":return TrackSource.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return TrackSource.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return TrackSource.UNRECOGNIZED}}function trackSourceToJSON(e){switch(e){case TrackSource.UNKNOWN:return"UNKNOWN";case TrackSource.CAMERA:return"CAMERA";case TrackSource.MICROPHONE:return"MICROPHONE";case TrackSource.SCREEN_SHARE:return"SCREEN_SHARE";case TrackSource.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";case TrackSource.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var VideoQuality;(function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(VideoQuality||(VideoQuality={}));function videoQualityFromJSON(e){switch(e){case 0:case"LOW":return VideoQuality.LOW;case 1:case"MEDIUM":return VideoQuality.MEDIUM;case 2:case"HIGH":return VideoQuality.HIGH;case 3:case"OFF":return VideoQuality.OFF;case-1:case"UNRECOGNIZED":default:return VideoQuality.UNRECOGNIZED}}function videoQualityToJSON(e){switch(e){case VideoQuality.LOW:return"LOW";case VideoQuality.MEDIUM:return"MEDIUM";case VideoQuality.HIGH:return"HIGH";case VideoQuality.OFF:return"OFF";case VideoQuality.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ConnectionQuality$1;(function(e){e[e.POOR=0]="POOR",e[e.GOOD=1]="GOOD",e[e.EXCELLENT=2]="EXCELLENT",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ConnectionQuality$1||(ConnectionQuality$1={}));function connectionQualityFromJSON(e){switch(e){case 0:case"POOR":return ConnectionQuality$1.POOR;case 1:case"GOOD":return ConnectionQuality$1.GOOD;case 2:case"EXCELLENT":return ConnectionQuality$1.EXCELLENT;case-1:case"UNRECOGNIZED":default:return ConnectionQuality$1.UNRECOGNIZED}}function connectionQualityToJSON(e){switch(e){case ConnectionQuality$1.POOR:return"POOR";case ConnectionQuality$1.GOOD:return"GOOD";case ConnectionQuality$1.EXCELLENT:return"EXCELLENT";case ConnectionQuality$1.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ClientConfigSetting;(function(e){e[e.UNSET=0]="UNSET",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientConfigSetting||(ClientConfigSetting={}));function clientConfigSettingFromJSON(e){switch(e){case 0:case"UNSET":return ClientConfigSetting.UNSET;case 1:case"DISABLED":return ClientConfigSetting.DISABLED;case 2:case"ENABLED":return ClientConfigSetting.ENABLED;case-1:case"UNRECOGNIZED":default:return ClientConfigSetting.UNRECOGNIZED}}function clientConfigSettingToJSON(e){switch(e){case ClientConfigSetting.UNSET:return"UNSET";case ClientConfigSetting.DISABLED:return"DISABLED";case ClientConfigSetting.ENABLED:return"ENABLED";case ClientConfigSetting.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var DisconnectReason;(function(e){e[e.UNKNOWN_REASON=0]="UNKNOWN_REASON",e[e.CLIENT_INITIATED=1]="CLIENT_INITIATED",e[e.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",e[e.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",e[e.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",e[e.ROOM_DELETED=5]="ROOM_DELETED",e[e.STATE_MISMATCH=6]="STATE_MISMATCH",e[e.JOIN_FAILURE=7]="JOIN_FAILURE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(DisconnectReason||(DisconnectReason={}));function disconnectReasonFromJSON(e){switch(e){case 0:case"UNKNOWN_REASON":return DisconnectReason.UNKNOWN_REASON;case 1:case"CLIENT_INITIATED":return DisconnectReason.CLIENT_INITIATED;case 2:case"DUPLICATE_IDENTITY":return DisconnectReason.DUPLICATE_IDENTITY;case 3:case"SERVER_SHUTDOWN":return DisconnectReason.SERVER_SHUTDOWN;case 4:case"PARTICIPANT_REMOVED":return DisconnectReason.PARTICIPANT_REMOVED;case 5:case"ROOM_DELETED":return DisconnectReason.ROOM_DELETED;case 6:case"STATE_MISMATCH":return DisconnectReason.STATE_MISMATCH;case 7:case"JOIN_FAILURE":return DisconnectReason.JOIN_FAILURE;case-1:case"UNRECOGNIZED":default:return DisconnectReason.UNRECOGNIZED}}function disconnectReasonToJSON(e){switch(e){case DisconnectReason.UNKNOWN_REASON:return"UNKNOWN_REASON";case DisconnectReason.CLIENT_INITIATED:return"CLIENT_INITIATED";case DisconnectReason.DUPLICATE_IDENTITY:return"DUPLICATE_IDENTITY";case DisconnectReason.SERVER_SHUTDOWN:return"SERVER_SHUTDOWN";case DisconnectReason.PARTICIPANT_REMOVED:return"PARTICIPANT_REMOVED";case DisconnectReason.ROOM_DELETED:return"ROOM_DELETED";case DisconnectReason.STATE_MISMATCH:return"STATE_MISMATCH";case DisconnectReason.JOIN_FAILURE:return"JOIN_FAILURE";case DisconnectReason.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ReconnectReason;(function(e){e[e.RR_UNKOWN=0]="RR_UNKOWN",e[e.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",e[e.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",e[e.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",e[e.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ReconnectReason||(ReconnectReason={}));var ParticipantInfo_State;(function(e){e[e.JOINING=0]="JOINING",e[e.JOINED=1]="JOINED",e[e.ACTIVE=2]="ACTIVE",e[e.DISCONNECTED=3]="DISCONNECTED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ParticipantInfo_State||(ParticipantInfo_State={}));function participantInfo_StateFromJSON(e){switch(e){case 0:case"JOINING":return ParticipantInfo_State.JOINING;case 1:case"JOINED":return ParticipantInfo_State.JOINED;case 2:case"ACTIVE":return ParticipantInfo_State.ACTIVE;case 3:case"DISCONNECTED":return ParticipantInfo_State.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return ParticipantInfo_State.UNRECOGNIZED}}function participantInfo_StateToJSON(e){switch(e){case ParticipantInfo_State.JOINING:return"JOINING";case ParticipantInfo_State.JOINED:return"JOINED";case ParticipantInfo_State.ACTIVE:return"ACTIVE";case ParticipantInfo_State.DISCONNECTED:return"DISCONNECTED";case ParticipantInfo_State.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Encryption_Type;(function(e){e[e.NONE=0]="NONE",e[e.GCM=1]="GCM",e[e.CUSTOM=2]="CUSTOM",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Encryption_Type||(Encryption_Type={}));function encryption_TypeFromJSON(e){switch(e){case 0:case"NONE":return Encryption_Type.NONE;case 1:case"GCM":return Encryption_Type.GCM;case 2:case"CUSTOM":return Encryption_Type.CUSTOM;case-1:case"UNRECOGNIZED":default:return Encryption_Type.UNRECOGNIZED}}function encryption_TypeToJSON(e){switch(e){case Encryption_Type.NONE:return"NONE";case Encryption_Type.GCM:return"GCM";case Encryption_Type.CUSTOM:return"CUSTOM";case Encryption_Type.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var DataPacket_Kind;(function(e){e[e.RELIABLE=0]="RELIABLE",e[e.LOSSY=1]="LOSSY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(DataPacket_Kind||(DataPacket_Kind={}));function dataPacket_KindFromJSON(e){switch(e){case 0:case"RELIABLE":return DataPacket_Kind.RELIABLE;case 1:case"LOSSY":return DataPacket_Kind.LOSSY;case-1:case"UNRECOGNIZED":default:return DataPacket_Kind.UNRECOGNIZED}}function dataPacket_KindToJSON(e){switch(e){case DataPacket_Kind.RELIABLE:return"RELIABLE";case DataPacket_Kind.LOSSY:return"LOSSY";case DataPacket_Kind.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ServerInfo_Edition;(function(e){e[e.Standard=0]="Standard",e[e.Cloud=1]="Cloud",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ServerInfo_Edition||(ServerInfo_Edition={}));function serverInfo_EditionFromJSON(e){switch(e){case 0:case"Standard":return ServerInfo_Edition.Standard;case 1:case"Cloud":return ServerInfo_Edition.Cloud;case-1:case"UNRECOGNIZED":default:return ServerInfo_Edition.UNRECOGNIZED}}function serverInfo_EditionToJSON(e){switch(e){case ServerInfo_Edition.Standard:return"Standard";case ServerInfo_Edition.Cloud:return"Cloud";case ServerInfo_Edition.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ClientInfo_SDK;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JS=1]="JS",e[e.SWIFT=2]="SWIFT",e[e.ANDROID=3]="ANDROID",e[e.FLUTTER=4]="FLUTTER",e[e.GO=5]="GO",e[e.UNITY=6]="UNITY",e[e.REACT_NATIVE=7]="REACT_NATIVE",e[e.RUST=8]="RUST",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientInfo_SDK||(ClientInfo_SDK={}));function clientInfo_SDKFromJSON(e){switch(e){case 0:case"UNKNOWN":return ClientInfo_SDK.UNKNOWN;case 1:case"JS":return ClientInfo_SDK.JS;case 2:case"SWIFT":return ClientInfo_SDK.SWIFT;case 3:case"ANDROID":return ClientInfo_SDK.ANDROID;case 4:case"FLUTTER":return ClientInfo_SDK.FLUTTER;case 5:case"GO":return ClientInfo_SDK.GO;case 6:case"UNITY":return ClientInfo_SDK.UNITY;case 7:case"REACT_NATIVE":return ClientInfo_SDK.REACT_NATIVE;case 8:case"RUST":return ClientInfo_SDK.RUST;case-1:case"UNRECOGNIZED":default:return ClientInfo_SDK.UNRECOGNIZED}}function clientInfo_SDKToJSON(e){switch(e){case ClientInfo_SDK.UNKNOWN:return"UNKNOWN";case ClientInfo_SDK.JS:return"JS";case ClientInfo_SDK.SWIFT:return"SWIFT";case ClientInfo_SDK.ANDROID:return"ANDROID";case ClientInfo_SDK.FLUTTER:return"FLUTTER";case ClientInfo_SDK.GO:return"GO";case ClientInfo_SDK.UNITY:return"UNITY";case ClientInfo_SDK.REACT_NATIVE:return"REACT_NATIVE";case ClientInfo_SDK.RUST:return"RUST";case ClientInfo_SDK.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseRoom(){return{sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,numPublishers:0,activeRecording:!1}}const Room$1={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.sid!==""&&i.uint32(10).string(e.sid),e.name!==""&&i.uint32(18).string(e.name),e.emptyTimeout!==0&&i.uint32(24).uint32(e.emptyTimeout),e.maxParticipants!==0&&i.uint32(32).uint32(e.maxParticipants),e.creationTime!==0&&i.uint32(40).int64(e.creationTime),e.turnPassword!==""&&i.uint32(50).string(e.turnPassword);for(const t of e.enabledCodecs)Codec.encode(t,i.uint32(58).fork()).ldelim();return e.metadata!==""&&i.uint32(66).string(e.metadata),e.numParticipants!==0&&i.uint32(72).uint32(e.numParticipants),e.numPublishers!==0&&i.uint32(88).uint32(e.numPublishers),e.activeRecording===!0&&i.uint32(80).bool(e.activeRecording),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseRoom();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.sid=t.string();continue;case 2:if(o!=18)break;a.name=t.string();continue;case 3:if(o!=24)break;a.emptyTimeout=t.uint32();continue;case 4:if(o!=32)break;a.maxParticipants=t.uint32();continue;case 5:if(o!=40)break;a.creationTime=longToNumber$1(t.int64());continue;case 6:if(o!=50)break;a.turnPassword=t.string();continue;case 7:if(o!=58)break;a.enabledCodecs.push(Codec.decode(t,t.uint32()));continue;case 8:if(o!=66)break;a.metadata=t.string();continue;case 9:if(o!=72)break;a.numParticipants=t.uint32();continue;case 11:if(o!=88)break;a.numPublishers=t.uint32();continue;case 10:if(o!=80)break;a.activeRecording=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",name:isSet$1(e.name)?String(e.name):"",emptyTimeout:isSet$1(e.emptyTimeout)?Number(e.emptyTimeout):0,maxParticipants:isSet$1(e.maxParticipants)?Number(e.maxParticipants):0,creationTime:isSet$1(e.creationTime)?Number(e.creationTime):0,turnPassword:isSet$1(e.turnPassword)?String(e.turnPassword):"",enabledCodecs:Array.isArray(e==null?void 0:e.enabledCodecs)?e.enabledCodecs.map(i=>Codec.fromJSON(i)):[],metadata:isSet$1(e.metadata)?String(e.metadata):"",numParticipants:isSet$1(e.numParticipants)?Number(e.numParticipants):0,numPublishers:isSet$1(e.numPublishers)?Number(e.numPublishers):0,activeRecording:isSet$1(e.activeRecording)?!!e.activeRecording:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.name!==void 0&&(i.name=e.name),e.emptyTimeout!==void 0&&(i.emptyTimeout=Math.round(e.emptyTimeout)),e.maxParticipants!==void 0&&(i.maxParticipants=Math.round(e.maxParticipants)),e.creationTime!==void 0&&(i.creationTime=Math.round(e.creationTime)),e.turnPassword!==void 0&&(i.turnPassword=e.turnPassword),e.enabledCodecs?i.enabledCodecs=e.enabledCodecs.map(t=>t?Codec.toJSON(t):void 0):i.enabledCodecs=[],e.metadata!==void 0&&(i.metadata=e.metadata),e.numParticipants!==void 0&&(i.numParticipants=Math.round(e.numParticipants)),e.numPublishers!==void 0&&(i.numPublishers=Math.round(e.numPublishers)),e.activeRecording!==void 0&&(i.activeRecording=e.activeRecording),i},create(e){return Room$1.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,u,c,h,p;const l=createBaseRoom();return l.sid=(i=e.sid)!==null&&i!==void 0?i:"",l.name=(t=e.name)!==null&&t!==void 0?t:"",l.emptyTimeout=(n=e.emptyTimeout)!==null&&n!==void 0?n:0,l.maxParticipants=(a=e.maxParticipants)!==null&&a!==void 0?a:0,l.creationTime=(o=e.creationTime)!==null&&o!==void 0?o:0,l.turnPassword=(d=e.turnPassword)!==null&&d!==void 0?d:"",l.enabledCodecs=((s=e.enabledCodecs)===null||s===void 0?void 0:s.map(f=>Codec.fromPartial(f)))||[],l.metadata=(u=e.metadata)!==null&&u!==void 0?u:"",l.numParticipants=(c=e.numParticipants)!==null&&c!==void 0?c:0,l.numPublishers=(h=e.numPublishers)!==null&&h!==void 0?h:0,l.activeRecording=(p=e.activeRecording)!==null&&p!==void 0?p:!1,l}};function createBaseCodec(){return{mime:"",fmtpLine:""}}const Codec={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.mime!==""&&i.uint32(10).string(e.mime),e.fmtpLine!==""&&i.uint32(18).string(e.fmtpLine),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseCodec();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.mime=t.string();continue;case 2:if(o!=18)break;a.fmtpLine=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{mime:isSet$1(e.mime)?String(e.mime):"",fmtpLine:isSet$1(e.fmtpLine)?String(e.fmtpLine):""}},toJSON(e){const i={};return e.mime!==void 0&&(i.mime=e.mime),e.fmtpLine!==void 0&&(i.fmtpLine=e.fmtpLine),i},create(e){return Codec.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseCodec();return n.mime=(i=e.mime)!==null&&i!==void 0?i:"",n.fmtpLine=(t=e.fmtpLine)!==null&&t!==void 0?t:"",n}};function createBaseParticipantPermission(){return{canSubscribe:!1,canPublish:!1,canPublishData:!1,canPublishSources:[],hidden:!1,recorder:!1,canUpdateMetadata:!1}}const ParticipantPermission={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.canSubscribe===!0&&i.uint32(8).bool(e.canSubscribe),e.canPublish===!0&&i.uint32(16).bool(e.canPublish),e.canPublishData===!0&&i.uint32(24).bool(e.canPublishData),i.uint32(74).fork();for(const t of e.canPublishSources)i.int32(t);return i.ldelim(),e.hidden===!0&&i.uint32(56).bool(e.hidden),e.recorder===!0&&i.uint32(64).bool(e.recorder),e.canUpdateMetadata===!0&&i.uint32(80).bool(e.canUpdateMetadata),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantPermission();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.canSubscribe=t.bool();continue;case 2:if(o!=16)break;a.canPublish=t.bool();continue;case 3:if(o!=24)break;a.canPublishData=t.bool();continue;case 9:if(o==72){a.canPublishSources.push(t.int32());continue}if(o==74){const d=t.uint32()+t.pos;for(;t.pos<d;)a.canPublishSources.push(t.int32());continue}break;case 7:if(o!=56)break;a.hidden=t.bool();continue;case 8:if(o!=64)break;a.recorder=t.bool();continue;case 10:if(o!=80)break;a.canUpdateMetadata=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{canSubscribe:isSet$1(e.canSubscribe)?!!e.canSubscribe:!1,canPublish:isSet$1(e.canPublish)?!!e.canPublish:!1,canPublishData:isSet$1(e.canPublishData)?!!e.canPublishData:!1,canPublishSources:Array.isArray(e==null?void 0:e.canPublishSources)?e.canPublishSources.map(i=>trackSourceFromJSON(i)):[],hidden:isSet$1(e.hidden)?!!e.hidden:!1,recorder:isSet$1(e.recorder)?!!e.recorder:!1,canUpdateMetadata:isSet$1(e.canUpdateMetadata)?!!e.canUpdateMetadata:!1}},toJSON(e){const i={};return e.canSubscribe!==void 0&&(i.canSubscribe=e.canSubscribe),e.canPublish!==void 0&&(i.canPublish=e.canPublish),e.canPublishData!==void 0&&(i.canPublishData=e.canPublishData),e.canPublishSources?i.canPublishSources=e.canPublishSources.map(t=>trackSourceToJSON(t)):i.canPublishSources=[],e.hidden!==void 0&&(i.hidden=e.hidden),e.recorder!==void 0&&(i.recorder=e.recorder),e.canUpdateMetadata!==void 0&&(i.canUpdateMetadata=e.canUpdateMetadata),i},create(e){return ParticipantPermission.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s;const u=createBaseParticipantPermission();return u.canSubscribe=(i=e.canSubscribe)!==null&&i!==void 0?i:!1,u.canPublish=(t=e.canPublish)!==null&&t!==void 0?t:!1,u.canPublishData=(n=e.canPublishData)!==null&&n!==void 0?n:!1,u.canPublishSources=((a=e.canPublishSources)===null||a===void 0?void 0:a.map(c=>c))||[],u.hidden=(o=e.hidden)!==null&&o!==void 0?o:!1,u.recorder=(d=e.recorder)!==null&&d!==void 0?d:!1,u.canUpdateMetadata=(s=e.canUpdateMetadata)!==null&&s!==void 0?s:!1,u}};function createBaseParticipantInfo(){return{sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1}}const ParticipantInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.sid!==""&&i.uint32(10).string(e.sid),e.identity!==""&&i.uint32(18).string(e.identity),e.state!==0&&i.uint32(24).int32(e.state);for(const t of e.tracks)TrackInfo.encode(t,i.uint32(34).fork()).ldelim();return e.metadata!==""&&i.uint32(42).string(e.metadata),e.joinedAt!==0&&i.uint32(48).int64(e.joinedAt),e.name!==""&&i.uint32(74).string(e.name),e.version!==0&&i.uint32(80).uint32(e.version),e.permission!==void 0&&ParticipantPermission.encode(e.permission,i.uint32(90).fork()).ldelim(),e.region!==""&&i.uint32(98).string(e.region),e.isPublisher===!0&&i.uint32(104).bool(e.isPublisher),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.sid=t.string();continue;case 2:if(o!=18)break;a.identity=t.string();continue;case 3:if(o!=24)break;a.state=t.int32();continue;case 4:if(o!=34)break;a.tracks.push(TrackInfo.decode(t,t.uint32()));continue;case 5:if(o!=42)break;a.metadata=t.string();continue;case 6:if(o!=48)break;a.joinedAt=longToNumber$1(t.int64());continue;case 9:if(o!=74)break;a.name=t.string();continue;case 10:if(o!=80)break;a.version=t.uint32();continue;case 11:if(o!=90)break;a.permission=ParticipantPermission.decode(t,t.uint32());continue;case 12:if(o!=98)break;a.region=t.string();continue;case 13:if(o!=104)break;a.isPublisher=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",identity:isSet$1(e.identity)?String(e.identity):"",state:isSet$1(e.state)?participantInfo_StateFromJSON(e.state):0,tracks:Array.isArray(e==null?void 0:e.tracks)?e.tracks.map(i=>TrackInfo.fromJSON(i)):[],metadata:isSet$1(e.metadata)?String(e.metadata):"",joinedAt:isSet$1(e.joinedAt)?Number(e.joinedAt):0,name:isSet$1(e.name)?String(e.name):"",version:isSet$1(e.version)?Number(e.version):0,permission:isSet$1(e.permission)?ParticipantPermission.fromJSON(e.permission):void 0,region:isSet$1(e.region)?String(e.region):"",isPublisher:isSet$1(e.isPublisher)?!!e.isPublisher:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.identity!==void 0&&(i.identity=e.identity),e.state!==void 0&&(i.state=participantInfo_StateToJSON(e.state)),e.tracks?i.tracks=e.tracks.map(t=>t?TrackInfo.toJSON(t):void 0):i.tracks=[],e.metadata!==void 0&&(i.metadata=e.metadata),e.joinedAt!==void 0&&(i.joinedAt=Math.round(e.joinedAt)),e.name!==void 0&&(i.name=e.name),e.version!==void 0&&(i.version=Math.round(e.version)),e.permission!==void 0&&(i.permission=e.permission?ParticipantPermission.toJSON(e.permission):void 0),e.region!==void 0&&(i.region=e.region),e.isPublisher!==void 0&&(i.isPublisher=e.isPublisher),i},create(e){return ParticipantInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,u,c,h;const p=createBaseParticipantInfo();return p.sid=(i=e.sid)!==null&&i!==void 0?i:"",p.identity=(t=e.identity)!==null&&t!==void 0?t:"",p.state=(n=e.state)!==null&&n!==void 0?n:0,p.tracks=((a=e.tracks)===null||a===void 0?void 0:a.map(l=>TrackInfo.fromPartial(l)))||[],p.metadata=(o=e.metadata)!==null&&o!==void 0?o:"",p.joinedAt=(d=e.joinedAt)!==null&&d!==void 0?d:0,p.name=(s=e.name)!==null&&s!==void 0?s:"",p.version=(u=e.version)!==null&&u!==void 0?u:0,p.permission=e.permission!==void 0&&e.permission!==null?ParticipantPermission.fromPartial(e.permission):void 0,p.region=(c=e.region)!==null&&c!==void 0?c:"",p.isPublisher=(h=e.isPublisher)!==null&&h!==void 0?h:!1,p}};function createBaseSimulcastCodecInfo(){return{mimeType:"",mid:"",cid:"",layers:[]}}const SimulcastCodecInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.mimeType!==""&&i.uint32(10).string(e.mimeType),e.mid!==""&&i.uint32(18).string(e.mid),e.cid!==""&&i.uint32(26).string(e.cid);for(const t of e.layers)VideoLayer.encode(t,i.uint32(34).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSimulcastCodecInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.mimeType=t.string();continue;case 2:if(o!=18)break;a.mid=t.string();continue;case 3:if(o!=26)break;a.cid=t.string();continue;case 4:if(o!=34)break;a.layers.push(VideoLayer.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{mimeType:isSet$1(e.mimeType)?String(e.mimeType):"",mid:isSet$1(e.mid)?String(e.mid):"",cid:isSet$1(e.cid)?String(e.cid):"",layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[]}},toJSON(e){const i={};return e.mimeType!==void 0&&(i.mimeType=e.mimeType),e.mid!==void 0&&(i.mid=e.mid),e.cid!==void 0&&(i.cid=e.cid),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],i},create(e){return SimulcastCodecInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a;const o=createBaseSimulcastCodecInfo();return o.mimeType=(i=e.mimeType)!==null&&i!==void 0?i:"",o.mid=(t=e.mid)!==null&&t!==void 0?t:"",o.cid=(n=e.cid)!==null&&n!==void 0?n:"",o.layers=((a=e.layers)===null||a===void 0?void 0:a.map(d=>VideoLayer.fromPartial(d)))||[],o}};function createBaseTrackInfo(){return{sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[],stereo:!1,disableRed:!1,encryption:0}}const TrackInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.sid!==""&&i.uint32(10).string(e.sid),e.type!==0&&i.uint32(16).int32(e.type),e.name!==""&&i.uint32(26).string(e.name),e.muted===!0&&i.uint32(32).bool(e.muted),e.width!==0&&i.uint32(40).uint32(e.width),e.height!==0&&i.uint32(48).uint32(e.height),e.simulcast===!0&&i.uint32(56).bool(e.simulcast),e.disableDtx===!0&&i.uint32(64).bool(e.disableDtx),e.source!==0&&i.uint32(72).int32(e.source);for(const t of e.layers)VideoLayer.encode(t,i.uint32(82).fork()).ldelim();e.mimeType!==""&&i.uint32(90).string(e.mimeType),e.mid!==""&&i.uint32(98).string(e.mid);for(const t of e.codecs)SimulcastCodecInfo.encode(t,i.uint32(106).fork()).ldelim();return e.stereo===!0&&i.uint32(112).bool(e.stereo),e.disableRed===!0&&i.uint32(120).bool(e.disableRed),e.encryption!==0&&i.uint32(128).int32(e.encryption),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.sid=t.string();continue;case 2:if(o!=16)break;a.type=t.int32();continue;case 3:if(o!=26)break;a.name=t.string();continue;case 4:if(o!=32)break;a.muted=t.bool();continue;case 5:if(o!=40)break;a.width=t.uint32();continue;case 6:if(o!=48)break;a.height=t.uint32();continue;case 7:if(o!=56)break;a.simulcast=t.bool();continue;case 8:if(o!=64)break;a.disableDtx=t.bool();continue;case 9:if(o!=72)break;a.source=t.int32();continue;case 10:if(o!=82)break;a.layers.push(VideoLayer.decode(t,t.uint32()));continue;case 11:if(o!=90)break;a.mimeType=t.string();continue;case 12:if(o!=98)break;a.mid=t.string();continue;case 13:if(o!=106)break;a.codecs.push(SimulcastCodecInfo.decode(t,t.uint32()));continue;case 14:if(o!=112)break;a.stereo=t.bool();continue;case 15:if(o!=120)break;a.disableRed=t.bool();continue;case 16:if(o!=128)break;a.encryption=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",type:isSet$1(e.type)?trackTypeFromJSON(e.type):0,name:isSet$1(e.name)?String(e.name):"",muted:isSet$1(e.muted)?!!e.muted:!1,width:isSet$1(e.width)?Number(e.width):0,height:isSet$1(e.height)?Number(e.height):0,simulcast:isSet$1(e.simulcast)?!!e.simulcast:!1,disableDtx:isSet$1(e.disableDtx)?!!e.disableDtx:!1,source:isSet$1(e.source)?trackSourceFromJSON(e.source):0,layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[],mimeType:isSet$1(e.mimeType)?String(e.mimeType):"",mid:isSet$1(e.mid)?String(e.mid):"",codecs:Array.isArray(e==null?void 0:e.codecs)?e.codecs.map(i=>SimulcastCodecInfo.fromJSON(i)):[],stereo:isSet$1(e.stereo)?!!e.stereo:!1,disableRed:isSet$1(e.disableRed)?!!e.disableRed:!1,encryption:isSet$1(e.encryption)?encryption_TypeFromJSON(e.encryption):0}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.type!==void 0&&(i.type=trackTypeToJSON(e.type)),e.name!==void 0&&(i.name=e.name),e.muted!==void 0&&(i.muted=e.muted),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.simulcast!==void 0&&(i.simulcast=e.simulcast),e.disableDtx!==void 0&&(i.disableDtx=e.disableDtx),e.source!==void 0&&(i.source=trackSourceToJSON(e.source)),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],e.mimeType!==void 0&&(i.mimeType=e.mimeType),e.mid!==void 0&&(i.mid=e.mid),e.codecs?i.codecs=e.codecs.map(t=>t?SimulcastCodecInfo.toJSON(t):void 0):i.codecs=[],e.stereo!==void 0&&(i.stereo=e.stereo),e.disableRed!==void 0&&(i.disableRed=e.disableRed),e.encryption!==void 0&&(i.encryption=encryption_TypeToJSON(e.encryption)),i},create(e){return TrackInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,u,c,h,p,l,f,m,v,E;const k=createBaseTrackInfo();return k.sid=(i=e.sid)!==null&&i!==void 0?i:"",k.type=(t=e.type)!==null&&t!==void 0?t:0,k.name=(n=e.name)!==null&&n!==void 0?n:"",k.muted=(a=e.muted)!==null&&a!==void 0?a:!1,k.width=(o=e.width)!==null&&o!==void 0?o:0,k.height=(d=e.height)!==null&&d!==void 0?d:0,k.simulcast=(s=e.simulcast)!==null&&s!==void 0?s:!1,k.disableDtx=(u=e.disableDtx)!==null&&u!==void 0?u:!1,k.source=(c=e.source)!==null&&c!==void 0?c:0,k.layers=((h=e.layers)===null||h===void 0?void 0:h.map(C=>VideoLayer.fromPartial(C)))||[],k.mimeType=(p=e.mimeType)!==null&&p!==void 0?p:"",k.mid=(l=e.mid)!==null&&l!==void 0?l:"",k.codecs=((f=e.codecs)===null||f===void 0?void 0:f.map(C=>SimulcastCodecInfo.fromPartial(C)))||[],k.stereo=(m=e.stereo)!==null&&m!==void 0?m:!1,k.disableRed=(v=e.disableRed)!==null&&v!==void 0?v:!1,k.encryption=(E=e.encryption)!==null&&E!==void 0?E:0,k}};function createBaseVideoLayer(){return{quality:0,width:0,height:0,bitrate:0,ssrc:0}}const VideoLayer={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.quality!==0&&i.uint32(8).int32(e.quality),e.width!==0&&i.uint32(16).uint32(e.width),e.height!==0&&i.uint32(24).uint32(e.height),e.bitrate!==0&&i.uint32(32).uint32(e.bitrate),e.ssrc!==0&&i.uint32(40).uint32(e.ssrc),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseVideoLayer();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.quality=t.int32();continue;case 2:if(o!=16)break;a.width=t.uint32();continue;case 3:if(o!=24)break;a.height=t.uint32();continue;case 4:if(o!=32)break;a.bitrate=t.uint32();continue;case 5:if(o!=40)break;a.ssrc=t.uint32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{quality:isSet$1(e.quality)?videoQualityFromJSON(e.quality):0,width:isSet$1(e.width)?Number(e.width):0,height:isSet$1(e.height)?Number(e.height):0,bitrate:isSet$1(e.bitrate)?Number(e.bitrate):0,ssrc:isSet$1(e.ssrc)?Number(e.ssrc):0}},toJSON(e){const i={};return e.quality!==void 0&&(i.quality=videoQualityToJSON(e.quality)),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.bitrate!==void 0&&(i.bitrate=Math.round(e.bitrate)),e.ssrc!==void 0&&(i.ssrc=Math.round(e.ssrc)),i},create(e){return VideoLayer.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o;const d=createBaseVideoLayer();return d.quality=(i=e.quality)!==null&&i!==void 0?i:0,d.width=(t=e.width)!==null&&t!==void 0?t:0,d.height=(n=e.height)!==null&&n!==void 0?n:0,d.bitrate=(a=e.bitrate)!==null&&a!==void 0?a:0,d.ssrc=(o=e.ssrc)!==null&&o!==void 0?o:0,d}};function createBaseDataPacket(){return{kind:0,value:void 0}}const DataPacket={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch(e.kind!==0&&i.uint32(8).int32(e.kind),(t=e.value)===null||t===void 0?void 0:t.$case){case"user":UserPacket.encode(e.value.user,i.uint32(18).fork()).ldelim();break;case"speaker":ActiveSpeakerUpdate.encode(e.value.speaker,i.uint32(26).fork()).ldelim();break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseDataPacket();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.kind=t.int32();continue;case 2:if(o!=18)break;a.value={$case:"user",user:UserPacket.decode(t,t.uint32())};continue;case 3:if(o!=26)break;a.value={$case:"speaker",speaker:ActiveSpeakerUpdate.decode(t,t.uint32())};continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{kind:isSet$1(e.kind)?dataPacket_KindFromJSON(e.kind):0,value:isSet$1(e.user)?{$case:"user",user:UserPacket.fromJSON(e.user)}:isSet$1(e.speaker)?{$case:"speaker",speaker:ActiveSpeakerUpdate.fromJSON(e.speaker)}:void 0}},toJSON(e){var i,t,n,a,o,d;const s={};return e.kind!==void 0&&(s.kind=dataPacket_KindToJSON(e.kind)),((i=e.value)===null||i===void 0?void 0:i.$case)==="user"&&(s.user=!((t=e.value)===null||t===void 0)&&t.user?UserPacket.toJSON((n=e.value)===null||n===void 0?void 0:n.user):void 0),((a=e.value)===null||a===void 0?void 0:a.$case)==="speaker"&&(s.speaker=!((o=e.value)===null||o===void 0)&&o.speaker?ActiveSpeakerUpdate.toJSON((d=e.value)===null||d===void 0?void 0:d.speaker):void 0),s},create(e){return DataPacket.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s;const u=createBaseDataPacket();return u.kind=(i=e.kind)!==null&&i!==void 0?i:0,((t=e.value)===null||t===void 0?void 0:t.$case)==="user"&&((n=e.value)===null||n===void 0?void 0:n.user)!==void 0&&((a=e.value)===null||a===void 0?void 0:a.user)!==null&&(u.value={$case:"user",user:UserPacket.fromPartial(e.value.user)}),((o=e.value)===null||o===void 0?void 0:o.$case)==="speaker"&&((d=e.value)===null||d===void 0?void 0:d.speaker)!==void 0&&((s=e.value)===null||s===void 0?void 0:s.speaker)!==null&&(u.value={$case:"speaker",speaker:ActiveSpeakerUpdate.fromPartial(e.value.speaker)}),u}};function createBaseActiveSpeakerUpdate(){return{speakers:[]}}const ActiveSpeakerUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.speakers)SpeakerInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseActiveSpeakerUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.speakers.push(SpeakerInfo.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{speakers:Array.isArray(e==null?void 0:e.speakers)?e.speakers.map(i=>SpeakerInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.speakers?i.speakers=e.speakers.map(t=>t?SpeakerInfo.toJSON(t):void 0):i.speakers=[],i},create(e){return ActiveSpeakerUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseActiveSpeakerUpdate();return t.speakers=((i=e.speakers)===null||i===void 0?void 0:i.map(n=>SpeakerInfo.fromPartial(n)))||[],t}};function createBaseSpeakerInfo(){return{sid:"",level:0,active:!1}}const SpeakerInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.sid!==""&&i.uint32(10).string(e.sid),e.level!==0&&i.uint32(21).float(e.level),e.active===!0&&i.uint32(24).bool(e.active),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSpeakerInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.sid=t.string();continue;case 2:if(o!=21)break;a.level=t.float();continue;case 3:if(o!=24)break;a.active=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",level:isSet$1(e.level)?Number(e.level):0,active:isSet$1(e.active)?!!e.active:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.level!==void 0&&(i.level=e.level),e.active!==void 0&&(i.active=e.active),i},create(e){return SpeakerInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSpeakerInfo();return a.sid=(i=e.sid)!==null&&i!==void 0?i:"",a.level=(t=e.level)!==null&&t!==void 0?t:0,a.active=(n=e.active)!==null&&n!==void 0?n:!1,a}};function createBaseUserPacket(){return{participantSid:"",payload:new Uint8Array,destinationSids:[],topic:void 0}}const UserPacket={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.payload.length!==0&&i.uint32(18).bytes(e.payload);for(const t of e.destinationSids)i.uint32(26).string(t);return e.topic!==void 0&&i.uint32(34).string(e.topic),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUserPacket();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=18)break;a.payload=t.bytes();continue;case 3:if(o!=26)break;a.destinationSids.push(t.string());continue;case 4:if(o!=34)break;a.topic=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet$1(e.participantSid)?String(e.participantSid):"",payload:isSet$1(e.payload)?bytesFromBase64(e.payload):new Uint8Array,destinationSids:Array.isArray(e==null?void 0:e.destinationSids)?e.destinationSids.map(i=>String(i)):[],topic:isSet$1(e.topic)?String(e.topic):void 0}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.payload!==void 0&&(i.payload=base64FromBytes(e.payload!==void 0?e.payload:new Uint8Array)),e.destinationSids?i.destinationSids=e.destinationSids.map(t=>t):i.destinationSids=[],e.topic!==void 0&&(i.topic=e.topic),i},create(e){return UserPacket.fromPartial(e??{})},fromPartial(e){var i,t,n,a;const o=createBaseUserPacket();return o.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",o.payload=(t=e.payload)!==null&&t!==void 0?t:new Uint8Array,o.destinationSids=((n=e.destinationSids)===null||n===void 0?void 0:n.map(d=>d))||[],o.topic=(a=e.topic)!==null&&a!==void 0?a:void 0,o}};function createBaseParticipantTracks(){return{participantSid:"",trackSids:[]}}const ParticipantTracks={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.participantSid!==""&&i.uint32(10).string(e.participantSid);for(const t of e.trackSids)i.uint32(18).string(t);return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantTracks();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=18)break;a.trackSids.push(t.string());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet$1(e.participantSid)?String(e.participantSid):"",trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[]}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],i},create(e){return ParticipantTracks.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseParticipantTracks();return n.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",n.trackSids=((t=e.trackSids)===null||t===void 0?void 0:t.map(a=>a))||[],n}};function createBaseServerInfo(){return{edition:0,version:"",protocol:0,region:"",nodeId:"",debugInfo:""}}const ServerInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.edition!==0&&i.uint32(8).int32(e.edition),e.version!==""&&i.uint32(18).string(e.version),e.protocol!==0&&i.uint32(24).int32(e.protocol),e.region!==""&&i.uint32(34).string(e.region),e.nodeId!==""&&i.uint32(42).string(e.nodeId),e.debugInfo!==""&&i.uint32(50).string(e.debugInfo),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseServerInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.edition=t.int32();continue;case 2:if(o!=18)break;a.version=t.string();continue;case 3:if(o!=24)break;a.protocol=t.int32();continue;case 4:if(o!=34)break;a.region=t.string();continue;case 5:if(o!=42)break;a.nodeId=t.string();continue;case 6:if(o!=50)break;a.debugInfo=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{edition:isSet$1(e.edition)?serverInfo_EditionFromJSON(e.edition):0,version:isSet$1(e.version)?String(e.version):"",protocol:isSet$1(e.protocol)?Number(e.protocol):0,region:isSet$1(e.region)?String(e.region):"",nodeId:isSet$1(e.nodeId)?String(e.nodeId):"",debugInfo:isSet$1(e.debugInfo)?String(e.debugInfo):""}},toJSON(e){const i={};return e.edition!==void 0&&(i.edition=serverInfo_EditionToJSON(e.edition)),e.version!==void 0&&(i.version=e.version),e.protocol!==void 0&&(i.protocol=Math.round(e.protocol)),e.region!==void 0&&(i.region=e.region),e.nodeId!==void 0&&(i.nodeId=e.nodeId),e.debugInfo!==void 0&&(i.debugInfo=e.debugInfo),i},create(e){return ServerInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d;const s=createBaseServerInfo();return s.edition=(i=e.edition)!==null&&i!==void 0?i:0,s.version=(t=e.version)!==null&&t!==void 0?t:"",s.protocol=(n=e.protocol)!==null&&n!==void 0?n:0,s.region=(a=e.region)!==null&&a!==void 0?a:"",s.nodeId=(o=e.nodeId)!==null&&o!==void 0?o:"",s.debugInfo=(d=e.debugInfo)!==null&&d!==void 0?d:"",s}};function createBaseClientInfo(){return{sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:"",network:""}}const ClientInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.sdk!==0&&i.uint32(8).int32(e.sdk),e.version!==""&&i.uint32(18).string(e.version),e.protocol!==0&&i.uint32(24).int32(e.protocol),e.os!==""&&i.uint32(34).string(e.os),e.osVersion!==""&&i.uint32(42).string(e.osVersion),e.deviceModel!==""&&i.uint32(50).string(e.deviceModel),e.browser!==""&&i.uint32(58).string(e.browser),e.browserVersion!==""&&i.uint32(66).string(e.browserVersion),e.address!==""&&i.uint32(74).string(e.address),e.network!==""&&i.uint32(82).string(e.network),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseClientInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.sdk=t.int32();continue;case 2:if(o!=18)break;a.version=t.string();continue;case 3:if(o!=24)break;a.protocol=t.int32();continue;case 4:if(o!=34)break;a.os=t.string();continue;case 5:if(o!=42)break;a.osVersion=t.string();continue;case 6:if(o!=50)break;a.deviceModel=t.string();continue;case 7:if(o!=58)break;a.browser=t.string();continue;case 8:if(o!=66)break;a.browserVersion=t.string();continue;case 9:if(o!=74)break;a.address=t.string();continue;case 10:if(o!=82)break;a.network=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sdk:isSet$1(e.sdk)?clientInfo_SDKFromJSON(e.sdk):0,version:isSet$1(e.version)?String(e.version):"",protocol:isSet$1(e.protocol)?Number(e.protocol):0,os:isSet$1(e.os)?String(e.os):"",osVersion:isSet$1(e.osVersion)?String(e.osVersion):"",deviceModel:isSet$1(e.deviceModel)?String(e.deviceModel):"",browser:isSet$1(e.browser)?String(e.browser):"",browserVersion:isSet$1(e.browserVersion)?String(e.browserVersion):"",address:isSet$1(e.address)?String(e.address):"",network:isSet$1(e.network)?String(e.network):""}},toJSON(e){const i={};return e.sdk!==void 0&&(i.sdk=clientInfo_SDKToJSON(e.sdk)),e.version!==void 0&&(i.version=e.version),e.protocol!==void 0&&(i.protocol=Math.round(e.protocol)),e.os!==void 0&&(i.os=e.os),e.osVersion!==void 0&&(i.osVersion=e.osVersion),e.deviceModel!==void 0&&(i.deviceModel=e.deviceModel),e.browser!==void 0&&(i.browser=e.browser),e.browserVersion!==void 0&&(i.browserVersion=e.browserVersion),e.address!==void 0&&(i.address=e.address),e.network!==void 0&&(i.network=e.network),i},create(e){return ClientInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,u,c,h;const p=createBaseClientInfo();return p.sdk=(i=e.sdk)!==null&&i!==void 0?i:0,p.version=(t=e.version)!==null&&t!==void 0?t:"",p.protocol=(n=e.protocol)!==null&&n!==void 0?n:0,p.os=(a=e.os)!==null&&a!==void 0?a:"",p.osVersion=(o=e.osVersion)!==null&&o!==void 0?o:"",p.deviceModel=(d=e.deviceModel)!==null&&d!==void 0?d:"",p.browser=(s=e.browser)!==null&&s!==void 0?s:"",p.browserVersion=(u=e.browserVersion)!==null&&u!==void 0?u:"",p.address=(c=e.address)!==null&&c!==void 0?c:"",p.network=(h=e.network)!==null&&h!==void 0?h:"",p}};function createBaseClientConfiguration(){return{video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0,forceRelay:0}}const ClientConfiguration={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.video!==void 0&&VideoConfiguration.encode(e.video,i.uint32(10).fork()).ldelim(),e.screen!==void 0&&VideoConfiguration.encode(e.screen,i.uint32(18).fork()).ldelim(),e.resumeConnection!==0&&i.uint32(24).int32(e.resumeConnection),e.disabledCodecs!==void 0&&DisabledCodecs.encode(e.disabledCodecs,i.uint32(34).fork()).ldelim(),e.forceRelay!==0&&i.uint32(40).int32(e.forceRelay),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseClientConfiguration();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.video=VideoConfiguration.decode(t,t.uint32());continue;case 2:if(o!=18)break;a.screen=VideoConfiguration.decode(t,t.uint32());continue;case 3:if(o!=24)break;a.resumeConnection=t.int32();continue;case 4:if(o!=34)break;a.disabledCodecs=DisabledCodecs.decode(t,t.uint32());continue;case 5:if(o!=40)break;a.forceRelay=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{video:isSet$1(e.video)?VideoConfiguration.fromJSON(e.video):void 0,screen:isSet$1(e.screen)?VideoConfiguration.fromJSON(e.screen):void 0,resumeConnection:isSet$1(e.resumeConnection)?clientConfigSettingFromJSON(e.resumeConnection):0,disabledCodecs:isSet$1(e.disabledCodecs)?DisabledCodecs.fromJSON(e.disabledCodecs):void 0,forceRelay:isSet$1(e.forceRelay)?clientConfigSettingFromJSON(e.forceRelay):0}},toJSON(e){const i={};return e.video!==void 0&&(i.video=e.video?VideoConfiguration.toJSON(e.video):void 0),e.screen!==void 0&&(i.screen=e.screen?VideoConfiguration.toJSON(e.screen):void 0),e.resumeConnection!==void 0&&(i.resumeConnection=clientConfigSettingToJSON(e.resumeConnection)),e.disabledCodecs!==void 0&&(i.disabledCodecs=e.disabledCodecs?DisabledCodecs.toJSON(e.disabledCodecs):void 0),e.forceRelay!==void 0&&(i.forceRelay=clientConfigSettingToJSON(e.forceRelay)),i},create(e){return ClientConfiguration.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseClientConfiguration();return n.video=e.video!==void 0&&e.video!==null?VideoConfiguration.fromPartial(e.video):void 0,n.screen=e.screen!==void 0&&e.screen!==null?VideoConfiguration.fromPartial(e.screen):void 0,n.resumeConnection=(i=e.resumeConnection)!==null&&i!==void 0?i:0,n.disabledCodecs=e.disabledCodecs!==void 0&&e.disabledCodecs!==null?DisabledCodecs.fromPartial(e.disabledCodecs):void 0,n.forceRelay=(t=e.forceRelay)!==null&&t!==void 0?t:0,n}};function createBaseVideoConfiguration(){return{hardwareEncoder:0}}const VideoConfiguration={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.hardwareEncoder!==0&&i.uint32(8).int32(e.hardwareEncoder),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseVideoConfiguration();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.hardwareEncoder=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{hardwareEncoder:isSet$1(e.hardwareEncoder)?clientConfigSettingFromJSON(e.hardwareEncoder):0}},toJSON(e){const i={};return e.hardwareEncoder!==void 0&&(i.hardwareEncoder=clientConfigSettingToJSON(e.hardwareEncoder)),i},create(e){return VideoConfiguration.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseVideoConfiguration();return t.hardwareEncoder=(i=e.hardwareEncoder)!==null&&i!==void 0?i:0,t}};function createBaseDisabledCodecs(){return{codecs:[]}}const DisabledCodecs={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.codecs)Codec.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseDisabledCodecs();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.codecs.push(Codec.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{codecs:Array.isArray(e==null?void 0:e.codecs)?e.codecs.map(i=>Codec.fromJSON(i)):[]}},toJSON(e){const i={};return e.codecs?i.codecs=e.codecs.map(t=>t?Codec.toJSON(t):void 0):i.codecs=[],i},create(e){return DisabledCodecs.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseDisabledCodecs();return t.codecs=((i=e.codecs)===null||i===void 0?void 0:i.map(n=>Codec.fromPartial(n)))||[],t}};var tsProtoGlobalThis$1=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw"Unable to locate global object"})();function bytesFromBase64(e){if(tsProtoGlobalThis$1.Buffer)return Uint8Array.from(tsProtoGlobalThis$1.Buffer.from(e,"base64"));{const i=tsProtoGlobalThis$1.atob(e),t=new Uint8Array(i.length);for(let n=0;n<i.length;++n)t[n]=i.charCodeAt(n);return t}}function base64FromBytes(e){if(tsProtoGlobalThis$1.Buffer)return tsProtoGlobalThis$1.Buffer.from(e).toString("base64");{const i=[];return e.forEach(t=>{i.push(String.fromCharCode(t))}),tsProtoGlobalThis$1.btoa(i.join(""))}}function longToNumber$1(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new tsProtoGlobalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}_m0.util.Long!==Long$1&&(_m0.util.Long=Long$1,_m0.configure());function isSet$1(e){return e!=null}const maxRetryDelay=7e3,DEFAULT_RETRY_DELAYS_IN_MS=[0,300,2*2*300,3*3*300,4*4*300,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay];class DefaultReconnectPolicy{constructor(i){this._retryDelays=i!==void 0?[...i]:DEFAULT_RETRY_DELAYS_IN_MS}nextRetryDelayInMs(i){if(i.retryCount>=this._retryDelays.length)return null;const t=this._retryDelays[i.retryCount];return i.retryCount<=1?t:t+Math.random()*1e3}}function __awaiter(e,i,t,n){function a(o){return o instanceof t?o:new t(function(d){d(o)})}return new(t||(t=Promise))(function(o,d){function s(h){try{c(n.next(h))}catch(p){d(p)}}function u(h){try{c(n.throw(h))}catch(p){d(p)}}function c(h){h.done?o(h.value):a(h.value).then(s,u)}c((n=n.apply(e,i||[])).next())})}function __values(e){var i=typeof Symbol=="function"&&Symbol.iterator,t=i&&e[i],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e[Symbol.asyncIterator],t;return i?i.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=e[o]&&function(d){return new Promise(function(s,u){d=e[o](d),a(s,u,d.done,d.value)})}}function a(o,d,s,u){Promise.resolve(u).then(function(c){o({value:c,done:s})},d)}}var events={exports:{}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(i,t,n){return Function.prototype.apply.call(i,t,n)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:ReflectOwnKeys=function(i){return Object.getOwnPropertyNames(i)};function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}var NumberIsNaN=Number.isNaN||function(i){return i!==i};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;events.exports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");defaultMaxListeners=e}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(i){if(typeof i!="number"||i<0||NumberIsNaN(i))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+i+".");return this._maxListeners=i,this};function _getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function(i){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a=i==="error",o=this._events;if(o!==void 0)a=a&&o.error===void 0;else if(!a)return!1;if(a){var d;if(t.length>0&&(d=t[0]),d instanceof Error)throw d;var s=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw s.context=d,s}var u=o[i];if(u===void 0)return!1;if(typeof u=="function")ReflectApply(u,this,t);else for(var c=u.length,h=arrayClone(u,c),n=0;n<c;++n)ReflectApply(h[n],this,t);return!0};function _addListener(e,i,t,n){var a,o,d;if(checkListener(t),o=e._events,o===void 0?(o=e._events=Object.create(null),e._eventsCount=0):(o.newListener!==void 0&&(e.emit("newListener",i,t.listener?t.listener:t),o=e._events),d=o[i]),d===void 0)d=o[i]=t,++e._eventsCount;else if(typeof d=="function"?d=o[i]=n?[t,d]:[d,t]:n?d.unshift(t):d.push(t),a=_getMaxListeners(e),a>0&&d.length>a&&!d.warned){d.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=i,s.count=d.length,ProcessEmitWarning(s)}return e}EventEmitter.prototype.addListener=function(i,t){return _addListener(this,i,t,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(i,t){return _addListener(this,i,t,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,i,t){var n={fired:!1,wrapFn:void 0,target:e,type:i,listener:t},a=onceWrapper.bind(n);return a.listener=t,n.wrapFn=a,a}EventEmitter.prototype.once=function(i,t){return checkListener(t),this.on(i,_onceWrap(this,i,t)),this};EventEmitter.prototype.prependOnceListener=function(i,t){return checkListener(t),this.prependListener(i,_onceWrap(this,i,t)),this};EventEmitter.prototype.removeListener=function(i,t){var n,a,o,d,s;if(checkListener(t),a=this._events,a===void 0)return this;if(n=a[i],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete a[i],a.removeListener&&this.emit("removeListener",i,n.listener||t));else if(typeof n!="function"){for(o=-1,d=n.length-1;d>=0;d--)if(n[d]===t||n[d].listener===t){s=n[d].listener,o=d;break}if(o<0)return this;o===0?n.shift():spliceOne(n,o),n.length===1&&(a[i]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",i,s||t)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(i){var t,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[i]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[i]),this;if(arguments.length===0){var o=Object.keys(n),d;for(a=0;a<o.length;++a)d=o[a],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[i],typeof t=="function")this.removeListener(i,t);else if(t!==void 0)for(a=t.length-1;a>=0;a--)this.removeListener(i,t[a]);return this};function _listeners(e,i,t){var n=e._events;if(n===void 0)return[];var a=n[i];return a===void 0?[]:typeof a=="function"?t?[a.listener||a]:[a]:t?unwrapListeners(a):arrayClone(a,a.length)}EventEmitter.prototype.listeners=function(i){return _listeners(this,i,!0)};EventEmitter.prototype.rawListeners=function(i){return _listeners(this,i,!1)};EventEmitter.listenerCount=function(e,i){return typeof e.listenerCount=="function"?e.listenerCount(i):listenerCount.call(e,i)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(e){var i=this._events;if(i!==void 0){var t=i[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(e,i){for(var t=new Array(i),n=0;n<i;++n)t[n]=e[n];return t}function spliceOne(e,i){for(;i+1<e.length;i++)e[i]=e[i+1];e.pop()}function unwrapListeners(e){for(var i=new Array(e.length),t=0;t<i.length;++t)i[t]=e[t].listener||e[t];return i}function once(e,i){return new Promise(function(t,n){function a(d){e.removeListener(i,o),n(d)}function o(){typeof e.removeListener=="function"&&e.removeListener("error",a),t([].slice.call(arguments))}eventTargetAgnosticAddListener(e,i,o,{once:!0}),i!=="error"&&addErrorHandlerIfEventEmitter(e,a,{once:!0})})}function addErrorHandlerIfEventEmitter(e,i,t){typeof e.on=="function"&&eventTargetAgnosticAddListener(e,"error",i,t)}function eventTargetAgnosticAddListener(e,i,t,n){if(typeof e.on=="function")n.once?e.once(i,t):e.on(i,t);else if(typeof e.addEventListener=="function")e.addEventListener(i,function a(o){n.once&&e.removeEventListener(i,a),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var eventsExports=events.exports;let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(e,i,t){const n=e.match(i);return n&&n.length>=t&&parseInt(n[t],10)}function wrapPeerConnectionEvent(e,i,t){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,a=n.addEventListener;n.addEventListener=function(d,s){if(d!==i)return a.apply(this,arguments);const u=c=>{const h=t(c);h&&(s.handleEvent?s.handleEvent(h):s(h))};return this._eventMap=this._eventMap||{},this._eventMap[i]||(this._eventMap[i]=new Map),this._eventMap[i].set(s,u),a.apply(this,[d,u])};const o=n.removeEventListener;n.removeEventListener=function(d,s){if(d!==i||!this._eventMap||!this._eventMap[i])return o.apply(this,arguments);if(!this._eventMap[i].has(s))return o.apply(this,arguments);const u=this._eventMap[i].get(s);return this._eventMap[i].delete(s),this._eventMap[i].size===0&&delete this._eventMap[i],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[d,u])},Object.defineProperty(n,"on"+i,{get(){return this["_on"+i]},set(d){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),d&&this.addEventListener(i,this["_on"+i]=d)},enumerable:!0,configurable:!0})}function disableLog(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(logDisabled_=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(deprecationWarnings_=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(e,i){deprecationWarnings_&&console.warn(e+" is deprecated, please use "+i+" instead.")}function detectBrowser(e){const i={browser:null,version:null};if(typeof e>"u"||!e.navigator)return i.browser="Not a browser.",i;const{navigator:t}=e;if(t.mozGetUserMedia)i.browser="firefox",i.version=extractVersion(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)i.browser="chrome",i.version=extractVersion(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))i.browser="safari",i.version=extractVersion(t.userAgent,/AppleWebKit\/(\d+)\./,1),i.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return i.browser="Not a supported browser.",i;return i}function isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}function compactObject(e){return isObject(e)?Object.keys(e).reduce(function(i,t){const n=isObject(e[t]),a=n?compactObject(e[t]):e[t],o=n&&!Object.keys(a).length;return a===void 0||o?i:Object.assign(i,{[t]:a})},{}):e}function walkStats(e,i,t){!i||t.has(i.id)||(t.set(i.id,i),Object.keys(i).forEach(n=>{n.endsWith("Id")?walkStats(e,e.get(i[n]),t):n.endsWith("Ids")&&i[n].forEach(a=>{walkStats(e,e.get(a),t)})}))}function filterStats(e,i,t){const n=t?"outbound-rtp":"inbound-rtp",a=new Map;if(i===null)return a;const o=[];return e.forEach(d=>{d.type==="track"&&d.trackIdentifier===i.id&&o.push(d)}),o.forEach(d=>{e.forEach(s=>{s.type===n&&s.trackId===d.id&&walkStats(e,s,a)})}),a}const logging=log;function shimGetUserMedia$2(e,i){const t=e&&e.navigator;if(!t.mediaDevices)return;const n=function(s){if(typeof s!="object"||s.mandatory||s.optional)return s;const u={};return Object.keys(s).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const h=typeof s[c]=="object"?s[c]:{ideal:s[c]};h.exact!==void 0&&typeof h.exact=="number"&&(h.min=h.max=h.exact);const p=function(l,f){return l?l+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(h.ideal!==void 0){u.optional=u.optional||[];let l={};typeof h.ideal=="number"?(l[p("min",c)]=h.ideal,u.optional.push(l),l={},l[p("max",c)]=h.ideal,u.optional.push(l)):(l[p("",c)]=h.ideal,u.optional.push(l))}h.exact!==void 0&&typeof h.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[p("",c)]=h.exact):["min","max"].forEach(l=>{h[l]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[p(l,c)]=h[l])})}),s.advanced&&(u.optional=(u.optional||[]).concat(s.advanced)),u},a=function(s,u){if(i.version>=61)return u(s);if(s=JSON.parse(JSON.stringify(s)),s&&typeof s.audio=="object"){const c=function(h,p,l){p in h&&!(l in h)&&(h[l]=h[p],delete h[p])};s=JSON.parse(JSON.stringify(s)),c(s.audio,"autoGainControl","googAutoGainControl"),c(s.audio,"noiseSuppression","googNoiseSuppression"),s.audio=n(s.audio)}if(s&&typeof s.video=="object"){let c=s.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const h=i.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!h)){delete s.video.facingMode;let p;if(c.exact==="environment"||c.ideal==="environment"?p=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(p=["front"]),p)return t.mediaDevices.enumerateDevices().then(l=>{l=l.filter(m=>m.kind==="videoinput");let f=l.find(m=>p.some(v=>m.label.toLowerCase().includes(v)));return!f&&l.length&&p.includes("back")&&(f=l[l.length-1]),f&&(s.video.deviceId=c.exact?{exact:f.deviceId}:{ideal:f.deviceId}),s.video=n(s.video),logging("chrome: "+JSON.stringify(s)),u(s)})}s.video=n(s.video)}return logging("chrome: "+JSON.stringify(s)),u(s)},o=function(s){return i.version>=64?s:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[s.name]||s.name,message:s.message,constraint:s.constraint||s.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},d=function(s,u,c){a(s,h=>{t.webkitGetUserMedia(h,u,p=>{c&&c(o(p))})})};if(t.getUserMedia=d.bind(t),t.mediaDevices.getUserMedia){const s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(u){return a(u,c=>s(c).then(h=>{if(c.audio&&!h.getAudioTracks().length||c.video&&!h.getVideoTracks().length)throw h.getTracks().forEach(p=>{p.stop()}),new DOMException("","NotFoundError");return h},h=>Promise.reject(o(h))))}}}function shimGetDisplayMedia$1(e,i){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof i!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(n){return i(n).then(a=>{const o=n.video&&n.video.width,d=n.video&&n.video.height,s=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,maxFrameRate:s||3}},o&&(n.video.mandatory.maxWidth=o),d&&(n.video.mandatory.maxHeight=d),e.navigator.mediaDevices.getUserMedia(n)})}}}function shimMediaStream(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function shimOnTrack$1(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",a=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(s=>s.track&&s.track.id===a.track.id):o={track:a.track};const d=new Event("track");d.track=a.track,d.receiver=o,d.transceiver={receiver:o},d.streams=[n.stream],this.dispatchEvent(d)}),n.stream.getTracks().forEach(a=>{let o;e.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(s=>s.track&&s.track.id===a.id):o={track:a};const d=new Event("track");d.track=a,d.receiver=o,d.transceiver={receiver:o},d.streams=[n.stream],this.dispatchEvent(d)})},this.addEventListener("addstream",this._ontrackpoly)),i.apply(this,arguments)}}else wrapPeerConnectionEvent(e,"track",i=>(i.transceiver||Object.defineProperty(i,"transceiver",{value:{receiver:i.receiver}}),i))}function shimGetSendersWithDtmf(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const i=function(a,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=a.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:a}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(s,u){let c=a.apply(this,arguments);return c||(c=i(this,s),this._senders.push(c)),c};const o=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(s){o.apply(this,arguments);const u=this._senders.indexOf(s);u!==-1&&this._senders.splice(u,1)}}const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],t.apply(this,[o]),o.getTracks().forEach(d=>{this._senders.push(i(this,d))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(d=>{const s=this._senders.find(u=>u.track===d);s&&this._senders.splice(this._senders.indexOf(s),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const i=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const n=i.apply(this,[]);return n.forEach(a=>a._pc=this),n},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(e){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[n,a,o]=arguments;if(arguments.length>0&&typeof n=="function")return i.apply(this,arguments);if(i.length===0&&(arguments.length===0||typeof n!="function"))return i.apply(this,[]);const d=function(u){const c={};return u.result().forEach(p=>{const l={id:p.id,timestamp:p.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[p.type]||p.type};p.names().forEach(f=>{l[f]=p.stat(f)}),c[l.id]=l}),c},s=function(u){return new Map(Object.keys(u).map(c=>[c,u[c]]))};if(arguments.length>=2){const u=function(c){a(s(d(c)))};return i.apply(this,[u,n])}return new Promise((u,c)=>{i.apply(this,[function(h){u(s(d(h)))},c])}).then(a,o)}}function shimSenderReceiverGetStats(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const o=t.apply(this,[]);return o.forEach(d=>d._pc=this),o});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const o=n.apply(this,arguments);return o._pc=this,o}),e.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(d=>filterStats(d,o.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const a=t.apply(this,[]);return a.forEach(o=>o._pc=this),a}),wrapPeerConnectionEvent(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(o=>filterStats(o,a.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let a,o,d;return this.getSenders().forEach(s=>{s.track===n&&(a?d=!0:a=s)}),this.getReceivers().forEach(s=>(s.track===n&&(o?d=!0:o=s),s.track===n)),d||a&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(d=>this._shimmedLocalStreams[d][0])};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(d,s){if(!s)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=i.apply(this,arguments);return this._shimmedLocalStreams[s.id]?this._shimmedLocalStreams[s.id].indexOf(u)===-1&&this._shimmedLocalStreams[s.id].push(u):this._shimmedLocalStreams[s.id]=[s,u],u};const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(d){this._shimmedLocalStreams=this._shimmedLocalStreams||{},d.getTracks().forEach(c=>{if(this.getSenders().find(p=>p.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const s=this.getSenders();t.apply(this,arguments);const u=this.getSenders().filter(c=>s.indexOf(c)===-1);this._shimmedLocalStreams[d.id]=[d].concat(u)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[d.id],n.apply(this,arguments)};const a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},d&&Object.keys(this._shimmedLocalStreams).forEach(s=>{const u=this._shimmedLocalStreams[s].indexOf(d);u!==-1&&this._shimmedLocalStreams[s].splice(u,1),this._shimmedLocalStreams[s].length===1&&delete this._shimmedLocalStreams[s]}),a.apply(this,arguments)}}function shimAddTrackRemoveTrack(e,i){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&i.version>=65)return shimAddTrackRemoveTrackWithNative(e);const t=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const h=t.apply(this);return this._reverseStreams=this._reverseStreams||{},h.map(p=>this._reverseStreams[p.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(h){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},h.getTracks().forEach(p=>{if(this.getSenders().find(f=>f.track===p))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[h.id]){const p=new e.MediaStream(h.getTracks());this._streams[h.id]=p,this._reverseStreams[p.id]=h,h=p}n.apply(this,[h])};const a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(h){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[h.id]||h]),delete this._reverseStreams[this._streams[h.id]?this._streams[h.id].id:h.id],delete this._streams[h.id]},e.RTCPeerConnection.prototype.addTrack=function(h,p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const l=[].slice.call(arguments,1);if(l.length!==1||!l[0].getTracks().find(v=>v===h))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(v=>v.track===h))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const m=this._streams[p.id];if(m)m.addTrack(h),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const v=new e.MediaStream([h]);this._streams[p.id]=v,this._reverseStreams[v.id]=p,this.addStream(v)}return this.getSenders().find(v=>v.track===h)};function o(c,h){let p=h.sdp;return Object.keys(c._reverseStreams||[]).forEach(l=>{const f=c._reverseStreams[l],m=c._streams[f.id];p=p.replace(new RegExp(m.id,"g"),f.id)}),new RTCSessionDescription({type:h.type,sdp:p})}function d(c,h){let p=h.sdp;return Object.keys(c._reverseStreams||[]).forEach(l=>{const f=c._reverseStreams[l],m=c._streams[f.id];p=p.replace(new RegExp(f.id,"g"),m.id)}),new RTCSessionDescription({type:h.type,sdp:p})}["createOffer","createAnswer"].forEach(function(c){const h=e.RTCPeerConnection.prototype[c],p={[c](){const l=arguments;return arguments.length&&typeof arguments[0]=="function"?h.apply(this,[m=>{const v=o(this,m);l[0].apply(null,[v])},m=>{l[1]&&l[1].apply(null,m)},arguments[2]]):h.apply(this,arguments).then(m=>o(this,m))}};e.RTCPeerConnection.prototype[c]=p[c]});const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?s.apply(this,arguments):(arguments[0]=d(this,arguments[0]),s.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=u.get.apply(this);return c.type===""?c:o(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(h){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!h._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(h._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let l;Object.keys(this._streams).forEach(f=>{this._streams[f].getTracks().find(v=>h.track===v)&&(l=this._streams[f])}),l&&(l.getTracks().length===1?this.removeStream(this._reverseStreams[l.id]):l.removeTrack(h.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(e,i){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],a={[t](){return arguments[0]=new(t==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=a[t]})}function fixNegotiationNeeded(e,i){wrapPeerConnectionEvent(e,"negotiationneeded",t=>{const n=t.target;if(!((i.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return t})}var chromeShim=Object.freeze({__proto__:null,fixNegotiationNeeded,shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative,shimGetDisplayMedia:shimGetDisplayMedia$1,shimGetSendersWithDtmf,shimGetStats,shimGetUserMedia:shimGetUserMedia$2,shimMediaStream,shimOnTrack:shimOnTrack$1,shimPeerConnection:shimPeerConnection$1,shimSenderReceiverGetStats});function shimGetUserMedia$1(e,i){const t=e&&e.navigator,n=e&&e.MediaStreamTrack;if(t.getUserMedia=function(a,o,d){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(a).then(o,d)},!(i.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const a=function(d,s,u){s in d&&!(u in d)&&(d[u]=d[s],delete d[s])},o=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(d){return typeof d=="object"&&typeof d.audio=="object"&&(d=JSON.parse(JSON.stringify(d)),a(d.audio,"autoGainControl","mozAutoGainControl"),a(d.audio,"noiseSuppression","mozNoiseSuppression")),o(d)},n&&n.prototype.getSettings){const d=n.prototype.getSettings;n.prototype.getSettings=function(){const s=d.apply(this,arguments);return a(s,"mozAutoGainControl","autoGainControl"),a(s,"mozNoiseSuppression","noiseSuppression"),s}}if(n&&n.prototype.applyConstraints){const d=n.prototype.applyConstraints;n.prototype.applyConstraints=function(s){return this.kind==="audio"&&typeof s=="object"&&(s=JSON.parse(JSON.stringify(s)),a(s,"autoGainControl","mozAutoGainControl"),a(s,"noiseSuppression","mozNoiseSuppression")),d.apply(this,[s])}}}}function shimGetDisplayMedia(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return n.video===!0?n.video={mediaSource:i}:n.video.mediaSource=i,e.navigator.mediaDevices.getUserMedia(n)})}function shimOnTrack(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(e,i){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const o=e.RTCPeerConnection.prototype[a],d={[a](){return arguments[0]=new(a==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};e.RTCPeerConnection.prototype[a]=d[a]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[o,d,s]=arguments;return n.apply(this,[o||null]).then(u=>{if(i.version<53&&!d)try{u.forEach(c=>{c.type=t[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;u.forEach((h,p)=>{u.set(p,Object.assign({},h,{type:t[h.type]||h.type}))})}return u}).then(d,s)}}function shimSenderGetStats(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const i=e.RTCPeerConnection.prototype.getSenders;i&&(e.RTCPeerConnection.prototype.getSenders=function(){const a=i.apply(this,[]);return a.forEach(o=>o._pc=this),a});const t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){const a=t.apply(this,arguments);return a._pc=this,a}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=i.apply(this,[]);return n.forEach(a=>a._pc=this),n}),wrapPeerConnectionEvent(e,"track",t=>(t.receiver._pc=t.srcElement,t)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){deprecated("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&t.getTracks().includes(n.track)&&this.removeTrack(n)})})}function shimRTCDataChannel(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function shimAddTransceiver(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.addTransceiver;i&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let n=arguments[1]&&arguments[1].sendEncodings;n===void 0&&(n=[]),n=[...n];const a=n.length>0;a&&n.forEach(d=>{if("rid"in d&&!/^[a-z0-9]{0,16}$/i.test(d.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in d&&!(parseFloat(d.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in d&&!(parseFloat(d.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=i.apply(this,arguments);if(a){const{sender:d}=o,s=d.getParameters();(!("encodings"in s)||s.encodings.length===1&&Object.keys(s.encodings[0]).length===0)&&(s.encodings=n,d.sendEncodings=n,this.setParametersPromises.push(d.setParameters(s).then(()=>{delete d.sendEncodings}).catch(()=>{delete d.sendEncodings})))}return o})}function shimGetParameters(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const i=e.RTCRtpSender.prototype.getParameters;i&&(e.RTCRtpSender.prototype.getParameters=function(){const n=i.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function shimCreateOffer(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}function shimCreateAnswer(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}var firefoxShim=Object.freeze({__proto__:null,shimAddTransceiver,shimCreateAnswer,shimCreateOffer,shimGetDisplayMedia,shimGetParameters,shimGetUserMedia:shimGetUserMedia$1,shimOnTrack,shimPeerConnection,shimRTCDataChannel,shimReceiverGetStats,shimRemoveStream,shimSenderGetStats});function shimLocalStreamsAPI(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(a=>i.call(this,a,n)),n.getVideoTracks().forEach(a=>i.call(this,a,n))},e.RTCPeerConnection.prototype.addTrack=function(n){for(var a=arguments.length,o=new Array(a>1?a-1:0),d=1;d<a;d++)o[d-1]=arguments[d];return o&&o.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),i.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(t);if(n===-1)return;this._localStreams.splice(n,1);const a=t.getTracks();this.getSenders().forEach(o=>{a.includes(o.track)&&this.removeTrack(o)})})}}function shimRemoteStreamsAPI(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const o=new Event("addstream");o.stream=a,this.dispatchEvent(o)})})}});const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(o=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(o)>=0)return;n._remoteStreams.push(o);const d=new Event("addstream");d.stream=o,n.dispatchEvent(d)})}),i.apply(n,arguments)}}}function shimCallbacksAPI(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,t=i.createOffer,n=i.createAnswer,a=i.setLocalDescription,o=i.setRemoteDescription,d=i.addIceCandidate;i.createOffer=function(c,h){const p=arguments.length>=2?arguments[2]:arguments[0],l=t.apply(this,[p]);return h?(l.then(c,h),Promise.resolve()):l},i.createAnswer=function(c,h){const p=arguments.length>=2?arguments[2]:arguments[0],l=n.apply(this,[p]);return h?(l.then(c,h),Promise.resolve()):l};let s=function(u,c,h){const p=a.apply(this,[u]);return h?(p.then(c,h),Promise.resolve()):p};i.setLocalDescription=s,s=function(u,c,h){const p=o.apply(this,[u]);return h?(p.then(c,h),Promise.resolve()):p},i.setRemoteDescription=s,s=function(u,c,h){const p=d.apply(this,[u]);return h?(p.then(c,h),Promise.resolve()):p},i.addIceCandidate=s}function shimGetUserMedia(e){const i=e&&e.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){const t=i.mediaDevices,n=t.getUserMedia.bind(t);i.mediaDevices.getUserMedia=a=>n(shimConstraints(a))}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=function(n,a,o){i.mediaDevices.getUserMedia(n).then(a,o)}.bind(i))}function shimConstraints(e){return e&&e.video!==void 0?Object.assign({},e,{video:compactObject(e.video)}):e}function shimRTCIceServerUrls(e){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection;e.RTCPeerConnection=function(n,a){if(n&&n.iceServers){const o=[];for(let d=0;d<n.iceServers.length;d++){let s=n.iceServers[d];s.urls===void 0&&s.url?(deprecated("RTCIceServer.url","RTCIceServer.urls"),s=JSON.parse(JSON.stringify(s)),s.urls=s.url,delete s.url,o.push(s)):o.push(n.iceServers[d])}n.iceServers=o}return new i(n,a)},e.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return i.generateCertificate}})}function shimTrackEventTransceiver(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(e){const i=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const a=this.getTransceivers().find(d=>d.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):n.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const o=this.getTransceivers().find(d=>d.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):n.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return i.apply(this,arguments)}}function shimAudioContext(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var safariShim=Object.freeze({__proto__:null,shimAudioContext,shimCallbacksAPI,shimConstraints,shimCreateOfferLegacy,shimGetUserMedia,shimLocalStreamsAPI,shimRTCIceServerUrls,shimRemoteStreamsAPI,shimTrackEventTransceiver}),sdp$1={exports:{}};(function(e){const i={};i.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},i.localCName=i.generateIdentifier(),i.splitLines=function(t){return t.trim().split(`
`).map(n=>n.trim())},i.splitSections=function(t){return t.split(`
m=`).map((a,o)=>(o>0?"m="+a:a).trim()+`\r
`)},i.getDescription=function(t){const n=i.splitSections(t);return n&&n[0]},i.getMediaSections=function(t){const n=i.splitSections(t);return n.shift(),n},i.matchPrefix=function(t,n){return i.splitLines(t).filter(a=>a.indexOf(n)===0)},i.parseCandidate=function(t){let n;t.indexOf("a=candidate:")===0?n=t.substring(12).split(" "):n=t.substring(10).split(" ");const a={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let o=8;o<n.length;o+=2)switch(n[o]){case"raddr":a.relatedAddress=n[o+1];break;case"rport":a.relatedPort=parseInt(n[o+1],10);break;case"tcptype":a.tcpType=n[o+1];break;case"ufrag":a.ufrag=n[o+1],a.usernameFragment=n[o+1];break;default:a[n[o]]===void 0&&(a[n[o]]=n[o+1]);break}return a},i.writeCandidate=function(t){const n=[];n.push(t.foundation);const a=t.component;a==="rtp"?n.push(1):a==="rtcp"?n.push(2):n.push(a),n.push(t.protocol.toUpperCase()),n.push(t.priority),n.push(t.address||t.ip),n.push(t.port);const o=t.type;return n.push("typ"),n.push(o),o!=="host"&&t.relatedAddress&&t.relatedPort&&(n.push("raddr"),n.push(t.relatedAddress),n.push("rport"),n.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(n.push("ufrag"),n.push(t.usernameFragment||t.ufrag)),"candidate:"+n.join(" ")},i.parseIceOptions=function(t){return t.substring(14).split(" ")},i.parseRtpMap=function(t){let n=t.substring(9).split(" ");const a={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),a.name=n[0],a.clockRate=parseInt(n[1],10),a.channels=n.length===3?parseInt(n[2],10):1,a.numChannels=a.channels,a},i.writeRtpMap=function(t){let n=t.payloadType;t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType);const a=t.channels||t.numChannels||1;return"a=rtpmap:"+n+" "+t.name+"/"+t.clockRate+(a!==1?"/"+a:"")+`\r
`},i.parseExtmap=function(t){const n=t.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},i.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},i.parseFmtp=function(t){const n={};let a;const o=t.substring(t.indexOf(" ")+1).split(";");for(let d=0;d<o.length;d++)a=o[d].trim().split("="),n[a[0].trim()]=a[1];return n},i.writeFmtp=function(t){let n="",a=t.payloadType;if(t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const o=[];Object.keys(t.parameters).forEach(d=>{t.parameters[d]!==void 0?o.push(d+"="+t.parameters[d]):o.push(d)}),n+="a=fmtp:"+a+" "+o.join(";")+`\r
`}return n},i.parseRtcpFb=function(t){const n=t.substring(t.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},i.writeRtcpFb=function(t){let n="",a=t.payloadType;return t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(o=>{n+="a=rtcp-fb:"+a+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),n},i.parseSsrcMedia=function(t){const n=t.indexOf(" "),a={ssrc:parseInt(t.substring(7,n),10)},o=t.indexOf(":",n);return o>-1?(a.attribute=t.substring(n+1,o),a.value=t.substring(o+1)):a.attribute=t.substring(n+1),a},i.parseSsrcGroup=function(t){const n=t.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(a=>parseInt(a,10))}},i.getMid=function(t){const n=i.matchPrefix(t,"a=mid:")[0];if(n)return n.substring(6)},i.parseFingerprint=function(t){const n=t.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},i.getDtlsParameters=function(t,n){return{role:"auto",fingerprints:i.matchPrefix(t+n,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(t,n){let a="a=setup:"+n+`\r
`;return t.fingerprints.forEach(o=>{a+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),a},i.parseCryptoLine=function(t){const n=t.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},i.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?i.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},i.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const n=t.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},i.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},i.getCryptoParameters=function(t,n){return i.matchPrefix(t+n,"a=crypto:").map(i.parseCryptoLine)},i.getIceParameters=function(t,n){const a=i.matchPrefix(t+n,"a=ice-ufrag:")[0],o=i.matchPrefix(t+n,"a=ice-pwd:")[0];return a&&o?{usernameFragment:a.substring(12),password:o.substring(10)}:null},i.writeIceParameters=function(t){let n="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(n+=`a=ice-lite\r
`),n},i.parseRtpParameters=function(t){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=i.splitLines(t)[0].split(" ");n.profile=o[2];for(let s=3;s<o.length;s++){const u=o[s],c=i.matchPrefix(t,"a=rtpmap:"+u+" ")[0];if(c){const h=i.parseRtpMap(c),p=i.matchPrefix(t,"a=fmtp:"+u+" ");switch(h.parameters=p.length?i.parseFmtp(p[0]):{},h.rtcpFeedback=i.matchPrefix(t,"a=rtcp-fb:"+u+" ").map(i.parseRtcpFb),n.codecs.push(h),h.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(h.name.toUpperCase());break}}}i.matchPrefix(t,"a=extmap:").forEach(s=>{n.headerExtensions.push(i.parseExtmap(s))});const d=i.matchPrefix(t,"a=rtcp-fb:* ").map(i.parseRtcpFb);return n.codecs.forEach(s=>{d.forEach(u=>{s.rtcpFeedback.find(h=>h.type===u.type&&h.parameter===u.parameter)||s.rtcpFeedback.push(u)})}),n},i.writeRtpDescription=function(t,n){let a="";a+="m="+t+" ",a+=n.codecs.length>0?"9":"0",a+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",a+=n.codecs.map(d=>d.preferredPayloadType!==void 0?d.preferredPayloadType:d.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(d=>{a+=i.writeRtpMap(d),a+=i.writeFmtp(d),a+=i.writeRtcpFb(d)});let o=0;return n.codecs.forEach(d=>{d.maxptime>o&&(o=d.maxptime)}),o>0&&(a+="a=maxptime:"+o+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(d=>{a+=i.writeExtmap(d)}),a},i.parseRtpEncodingParameters=function(t){const n=[],a=i.parseRtpParameters(t),o=a.fecMechanisms.indexOf("RED")!==-1,d=a.fecMechanisms.indexOf("ULPFEC")!==-1,s=i.matchPrefix(t,"a=ssrc:").map(l=>i.parseSsrcMedia(l)).filter(l=>l.attribute==="cname"),u=s.length>0&&s[0].ssrc;let c;const h=i.matchPrefix(t,"a=ssrc-group:FID").map(l=>l.substring(17).split(" ").map(m=>parseInt(m,10)));h.length>0&&h[0].length>1&&h[0][0]===u&&(c=h[0][1]),a.codecs.forEach(l=>{if(l.name.toUpperCase()==="RTX"&&l.parameters.apt){let f={ssrc:u,codecPayloadType:parseInt(l.parameters.apt,10)};u&&c&&(f.rtx={ssrc:c}),n.push(f),o&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:u,mechanism:d?"red+ulpfec":"red"},n.push(f))}}),n.length===0&&u&&n.push({ssrc:u});let p=i.matchPrefix(t,"b=");return p.length&&(p[0].indexOf("b=TIAS:")===0?p=parseInt(p[0].substring(7),10):p[0].indexOf("b=AS:")===0?p=parseInt(p[0].substring(5),10)*1e3*.95-50*40*8:p=void 0,n.forEach(l=>{l.maxBitrate=p})),n},i.parseRtcpParameters=function(t){const n={},a=i.matchPrefix(t,"a=ssrc:").map(s=>i.parseSsrcMedia(s)).filter(s=>s.attribute==="cname")[0];a&&(n.cname=a.value,n.ssrc=a.ssrc);const o=i.matchPrefix(t,"a=rtcp-rsize");n.reducedSize=o.length>0,n.compound=o.length===0;const d=i.matchPrefix(t,"a=rtcp-mux");return n.mux=d.length>0,n},i.writeRtcpParameters=function(t){let n="";return t.reducedSize&&(n+=`a=rtcp-rsize\r
`),t.mux&&(n+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(n+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),n},i.parseMsid=function(t){let n;const a=i.matchPrefix(t,"a=msid:");if(a.length===1)return n=a[0].substring(7).split(" "),{stream:n[0],track:n[1]};const o=i.matchPrefix(t,"a=ssrc:").map(d=>i.parseSsrcMedia(d)).filter(d=>d.attribute==="msid");if(o.length>0)return n=o[0].value.split(" "),{stream:n[0],track:n[1]}},i.parseSctpDescription=function(t){const n=i.parseMLine(t),a=i.matchPrefix(t,"a=max-message-size:");let o;a.length>0&&(o=parseInt(a[0].substring(19),10)),isNaN(o)&&(o=65536);const d=i.matchPrefix(t,"a=sctp-port:");if(d.length>0)return{port:parseInt(d[0].substring(12),10),protocol:n.fmt,maxMessageSize:o};const s=i.matchPrefix(t,"a=sctpmap:");if(s.length>0){const u=s[0].substring(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:o}}},i.writeSctpDescription=function(t,n){let a=[];return t.protocol!=="DTLS/SCTP"?a=["m="+t.kind+" 9 "+t.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:a=["m="+t.kind+" 9 "+t.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&a.push("a=max-message-size:"+n.maxMessageSize+`\r
`),a.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,22)},i.writeSessionBoilerplate=function(t,n,a){let o;const d=n!==void 0?n:2;return t?o=t:o=i.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+o+" "+d+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},i.getDirection=function(t,n){const a=i.splitLines(t);for(let o=0;o<a.length;o++)switch(a[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[o].substring(2)}return n?i.getDirection(n):"sendrecv"},i.getKind=function(t){return i.splitLines(t)[0].split(" ")[0].substring(2)},i.isRejected=function(t){return t.split(" ",2)[1]==="0"},i.parseMLine=function(t){const a=i.splitLines(t)[0].substring(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},i.parseOLine=function(t){const a=i.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},i.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const n=i.splitLines(t);for(let a=0;a<n.length;a++)if(n[a].length<2||n[a].charAt(1)!=="=")return!1;return!0},e.exports=i})(sdp$1);var sdpExports=sdp$1.exports,SDPUtils=getDefaultExportFromCjs(sdpExports),sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdpExports]);function shimRTCIceCandidate(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const i=e.RTCIceCandidate;e.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substring(2)),n.candidate&&n.candidate.length){const a=new i(n),o=SDPUtils.parseCandidate(n.candidate);for(const d in o)d in a||Object.defineProperty(a,d,{value:o[d]});return a.toJSON=function(){return{candidate:a.candidate,sdpMid:a.sdpMid,sdpMLineIndex:a.sdpMLineIndex,usernameFragment:a.usernameFragment}},a}return new i(n)},e.RTCIceCandidate.prototype=i.prototype,wrapPeerConnectionEvent(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function shimRTCIceCandidateRelayProtocol(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||wrapPeerConnectionEvent(e,"icecandidate",i=>{if(i.candidate){const t=SDPUtils.parseCandidate(i.candidate.candidate);t.type==="relay"&&(i.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return i})}function shimMaxMessageSize(e,i){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(s){if(!s||!s.sdp)return!1;const u=SDPUtils.splitSections(s.sdp);return u.shift(),u.some(c=>{const h=SDPUtils.parseMLine(c);return h&&h.kind==="application"&&h.protocol.indexOf("SCTP")!==-1})},n=function(s){const u=s.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const c=parseInt(u[1],10);return c!==c?-1:c},a=function(s){let u=65536;return i.browser==="firefox"&&(i.version<57?s===-1?u=16384:u=2147483637:i.version<60?u=i.version===57?65535:65536:u=2147483637),u},o=function(s,u){let c=65536;i.browser==="firefox"&&i.version===57&&(c=65535);const h=SDPUtils.matchPrefix(s.sdp,"a=max-message-size:");return h.length>0?c=parseInt(h[0].substring(19),10):i.browser==="firefox"&&u!==-1&&(c=2147483637),c},d=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,i.browser==="chrome"&&i.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const u=n(arguments[0]),c=a(u),h=o(arguments[0],u);let p;c===0&&h===0?p=Number.POSITIVE_INFINITY:c===0||h===0?p=Math.max(c,h):p=Math.min(c,h);const l={};Object.defineProperty(l,"maxMessageSize",{get(){return p}}),this._sctp=l}return d.apply(this,arguments)}}function shimSendThrowTypeError(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function i(n,a){const o=n.send;n.send=function(){const s=arguments[0],u=s.length||s.size||s.byteLength;if(n.readyState==="open"&&a.sctp&&u>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return o.apply(n,arguments)}}const t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const a=t.apply(this,arguments);return i(a,this),a},wrapPeerConnectionEvent(e,"datachannel",n=>(i(n.channel,n.target),n))}function shimConnectionState(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype;Object.defineProperty(i,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(i,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const n=i[t];i[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const o=a.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const d=new Event("connectionstatechange",a);o.dispatchEvent(d)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function removeExtmapAllowMixed(e,i){if(!e.RTCPeerConnection||i.browser==="chrome"&&i.version>=71||i.browser==="safari"&&i.version>=605)return;const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=a.sdp.split(`
`).filter(d=>d.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&a instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:a.type,sdp:o}):a.sdp=o}return t.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(e,i){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const t=e.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(i.browser==="chrome"&&i.version<78||i.browser==="firefox"&&i.version<68||i.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(e,i){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const t=e.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return t.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?t.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(d=>t.apply(this,[d]))})}var commonShim=Object.freeze({__proto__:null,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimConnectionState,shimMaxMessageSize,shimParameterlessSetLocalDescription,shimRTCIceCandidate,shimRTCIceCandidateRelayProtocol,shimSendThrowTypeError});function adapterFactory(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const t=log,n=detectBrowser(e),a={browserDetails:n,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(n.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!i.shimChrome)return t("Chrome shim is not included in this adapter release."),a;if(n.version===null)return t("Chrome shim can not determine version, not shimming."),a;t("adapter.js shimming chrome."),a.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(e,n),shimParameterlessSetLocalDescription(e),shimGetUserMedia$2(e,n),shimMediaStream(e),shimPeerConnection$1(e,n),shimOnTrack$1(e),shimAddTrackRemoveTrack(e,n),shimGetSendersWithDtmf(e),shimGetStats(e),shimSenderReceiverGetStats(e),fixNegotiationNeeded(e,n),shimRTCIceCandidate(e),shimRTCIceCandidateRelayProtocol(e),shimConnectionState(e),shimMaxMessageSize(e,n),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,n);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!i.shimFirefox)return t("Firefox shim is not included in this adapter release."),a;t("adapter.js shimming firefox."),a.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(e,n),shimParameterlessSetLocalDescription(e),shimGetUserMedia$1(e,n),shimPeerConnection(e,n),shimOnTrack(e),shimRemoveStream(e),shimSenderGetStats(e),shimReceiverGetStats(e),shimRTCDataChannel(e),shimAddTransceiver(e),shimGetParameters(e),shimCreateOffer(e),shimCreateAnswer(e),shimRTCIceCandidate(e),shimConnectionState(e),shimMaxMessageSize(e,n),shimSendThrowTypeError(e);break;case"safari":if(!safariShim||!i.shimSafari)return t("Safari shim is not included in this adapter release."),a;t("adapter.js shimming safari."),a.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(e,n),shimParameterlessSetLocalDescription(e),shimRTCIceServerUrls(e),shimCreateOfferLegacy(e),shimCallbacksAPI(e),shimLocalStreamsAPI(e),shimRemoteStreamsAPI(e),shimTrackEventTransceiver(e),shimGetUserMedia(e),shimAudioContext(e),shimRTCIceCandidate(e),shimRTCIceCandidateRelayProtocol(e),shimMaxMessageSize(e,n),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,n);break;default:t("Unsupported browser!");break}return a}adapterFactory({window:typeof window>"u"?void 0:window});var SignalTarget;(function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(SignalTarget||(SignalTarget={}));function signalTargetFromJSON(e){switch(e){case 0:case"PUBLISHER":return SignalTarget.PUBLISHER;case 1:case"SUBSCRIBER":return SignalTarget.SUBSCRIBER;case-1:case"UNRECOGNIZED":default:return SignalTarget.UNRECOGNIZED}}function signalTargetToJSON(e){switch(e){case SignalTarget.PUBLISHER:return"PUBLISHER";case SignalTarget.SUBSCRIBER:return"SUBSCRIBER";case SignalTarget.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var StreamState;(function(e){e[e.ACTIVE=0]="ACTIVE",e[e.PAUSED=1]="PAUSED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(StreamState||(StreamState={}));function streamStateFromJSON(e){switch(e){case 0:case"ACTIVE":return StreamState.ACTIVE;case 1:case"PAUSED":return StreamState.PAUSED;case-1:case"UNRECOGNIZED":default:return StreamState.UNRECOGNIZED}}function streamStateToJSON(e){switch(e){case StreamState.ACTIVE:return"ACTIVE";case StreamState.PAUSED:return"PAUSED";case StreamState.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var CandidateProtocol;(function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.TLS=2]="TLS",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(CandidateProtocol||(CandidateProtocol={}));function candidateProtocolFromJSON(e){switch(e){case 0:case"UDP":return CandidateProtocol.UDP;case 1:case"TCP":return CandidateProtocol.TCP;case 2:case"TLS":return CandidateProtocol.TLS;case-1:case"UNRECOGNIZED":default:return CandidateProtocol.UNRECOGNIZED}}function candidateProtocolToJSON(e){switch(e){case CandidateProtocol.UDP:return"UDP";case CandidateProtocol.TCP:return"TCP";case CandidateProtocol.TLS:return"TLS";case CandidateProtocol.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseSignalRequest(){return{message:void 0}}const SignalRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch((t=e.message)===null||t===void 0?void 0:t.$case){case"offer":SessionDescription.encode(e.message.offer,i.uint32(10).fork()).ldelim();break;case"answer":SessionDescription.encode(e.message.answer,i.uint32(18).fork()).ldelim();break;case"trickle":TrickleRequest.encode(e.message.trickle,i.uint32(26).fork()).ldelim();break;case"addTrack":AddTrackRequest.encode(e.message.addTrack,i.uint32(34).fork()).ldelim();break;case"mute":MuteTrackRequest.encode(e.message.mute,i.uint32(42).fork()).ldelim();break;case"subscription":UpdateSubscription.encode(e.message.subscription,i.uint32(50).fork()).ldelim();break;case"trackSetting":UpdateTrackSettings.encode(e.message.trackSetting,i.uint32(58).fork()).ldelim();break;case"leave":LeaveRequest.encode(e.message.leave,i.uint32(66).fork()).ldelim();break;case"updateLayers":UpdateVideoLayers.encode(e.message.updateLayers,i.uint32(82).fork()).ldelim();break;case"subscriptionPermission":SubscriptionPermission.encode(e.message.subscriptionPermission,i.uint32(90).fork()).ldelim();break;case"syncState":SyncState.encode(e.message.syncState,i.uint32(98).fork()).ldelim();break;case"simulate":SimulateScenario.encode(e.message.simulate,i.uint32(106).fork()).ldelim();break;case"ping":i.uint32(112).int64(e.message.ping);break;case"updateMetadata":UpdateParticipantMetadata.encode(e.message.updateMetadata,i.uint32(122).fork()).ldelim();break;case"pingReq":Ping.encode(e.message.pingReq,i.uint32(130).fork()).ldelim();break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSignalRequest();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.message={$case:"offer",offer:SessionDescription.decode(t,t.uint32())};continue;case 2:if(o!=18)break;a.message={$case:"answer",answer:SessionDescription.decode(t,t.uint32())};continue;case 3:if(o!=26)break;a.message={$case:"trickle",trickle:TrickleRequest.decode(t,t.uint32())};continue;case 4:if(o!=34)break;a.message={$case:"addTrack",addTrack:AddTrackRequest.decode(t,t.uint32())};continue;case 5:if(o!=42)break;a.message={$case:"mute",mute:MuteTrackRequest.decode(t,t.uint32())};continue;case 6:if(o!=50)break;a.message={$case:"subscription",subscription:UpdateSubscription.decode(t,t.uint32())};continue;case 7:if(o!=58)break;a.message={$case:"trackSetting",trackSetting:UpdateTrackSettings.decode(t,t.uint32())};continue;case 8:if(o!=66)break;a.message={$case:"leave",leave:LeaveRequest.decode(t,t.uint32())};continue;case 10:if(o!=82)break;a.message={$case:"updateLayers",updateLayers:UpdateVideoLayers.decode(t,t.uint32())};continue;case 11:if(o!=90)break;a.message={$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.decode(t,t.uint32())};continue;case 12:if(o!=98)break;a.message={$case:"syncState",syncState:SyncState.decode(t,t.uint32())};continue;case 13:if(o!=106)break;a.message={$case:"simulate",simulate:SimulateScenario.decode(t,t.uint32())};continue;case 14:if(o!=112)break;a.message={$case:"ping",ping:longToNumber(t.int64())};continue;case 15:if(o!=122)break;a.message={$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.decode(t,t.uint32())};continue;case 16:if(o!=130)break;a.message={$case:"pingReq",pingReq:Ping.decode(t,t.uint32())};continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{message:isSet(e.offer)?{$case:"offer",offer:SessionDescription.fromJSON(e.offer)}:isSet(e.answer)?{$case:"answer",answer:SessionDescription.fromJSON(e.answer)}:isSet(e.trickle)?{$case:"trickle",trickle:TrickleRequest.fromJSON(e.trickle)}:isSet(e.addTrack)?{$case:"addTrack",addTrack:AddTrackRequest.fromJSON(e.addTrack)}:isSet(e.mute)?{$case:"mute",mute:MuteTrackRequest.fromJSON(e.mute)}:isSet(e.subscription)?{$case:"subscription",subscription:UpdateSubscription.fromJSON(e.subscription)}:isSet(e.trackSetting)?{$case:"trackSetting",trackSetting:UpdateTrackSettings.fromJSON(e.trackSetting)}:isSet(e.leave)?{$case:"leave",leave:LeaveRequest.fromJSON(e.leave)}:isSet(e.updateLayers)?{$case:"updateLayers",updateLayers:UpdateVideoLayers.fromJSON(e.updateLayers)}:isSet(e.subscriptionPermission)?{$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.fromJSON(e.subscriptionPermission)}:isSet(e.syncState)?{$case:"syncState",syncState:SyncState.fromJSON(e.syncState)}:isSet(e.simulate)?{$case:"simulate",simulate:SimulateScenario.fromJSON(e.simulate)}:isSet(e.ping)?{$case:"ping",ping:Number(e.ping)}:isSet(e.updateMetadata)?{$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.fromJSON(e.updateMetadata)}:isSet(e.pingReq)?{$case:"pingReq",pingReq:Ping.fromJSON(e.pingReq)}:void 0}},toJSON(e){var i,t,n,a,o,d,s,u,c,h,p,l,f,m,v,E,k,C,N,P,M,L,$,H,Z,re,Y,O,D,b,_,g,w,T,A,J,G,I,V,x,z,ie,se,pe;const be={};return((i=e.message)===null||i===void 0?void 0:i.$case)==="offer"&&(be.offer=!((t=e.message)===null||t===void 0)&&t.offer?SessionDescription.toJSON((n=e.message)===null||n===void 0?void 0:n.offer):void 0),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&(be.answer=!((o=e.message)===null||o===void 0)&&o.answer?SessionDescription.toJSON((d=e.message)===null||d===void 0?void 0:d.answer):void 0),((s=e.message)===null||s===void 0?void 0:s.$case)==="trickle"&&(be.trickle=!((u=e.message)===null||u===void 0)&&u.trickle?TrickleRequest.toJSON((c=e.message)===null||c===void 0?void 0:c.trickle):void 0),((h=e.message)===null||h===void 0?void 0:h.$case)==="addTrack"&&(be.addTrack=!((p=e.message)===null||p===void 0)&&p.addTrack?AddTrackRequest.toJSON((l=e.message)===null||l===void 0?void 0:l.addTrack):void 0),((f=e.message)===null||f===void 0?void 0:f.$case)==="mute"&&(be.mute=!((m=e.message)===null||m===void 0)&&m.mute?MuteTrackRequest.toJSON((v=e.message)===null||v===void 0?void 0:v.mute):void 0),((E=e.message)===null||E===void 0?void 0:E.$case)==="subscription"&&(be.subscription=!((k=e.message)===null||k===void 0)&&k.subscription?UpdateSubscription.toJSON((C=e.message)===null||C===void 0?void 0:C.subscription):void 0),((N=e.message)===null||N===void 0?void 0:N.$case)==="trackSetting"&&(be.trackSetting=!((P=e.message)===null||P===void 0)&&P.trackSetting?UpdateTrackSettings.toJSON((M=e.message)===null||M===void 0?void 0:M.trackSetting):void 0),((L=e.message)===null||L===void 0?void 0:L.$case)==="leave"&&(be.leave=!(($=e.message)===null||$===void 0)&&$.leave?LeaveRequest.toJSON((H=e.message)===null||H===void 0?void 0:H.leave):void 0),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="updateLayers"&&(be.updateLayers=!((re=e.message)===null||re===void 0)&&re.updateLayers?UpdateVideoLayers.toJSON((Y=e.message)===null||Y===void 0?void 0:Y.updateLayers):void 0),((O=e.message)===null||O===void 0?void 0:O.$case)==="subscriptionPermission"&&(be.subscriptionPermission=!((D=e.message)===null||D===void 0)&&D.subscriptionPermission?SubscriptionPermission.toJSON((b=e.message)===null||b===void 0?void 0:b.subscriptionPermission):void 0),((_=e.message)===null||_===void 0?void 0:_.$case)==="syncState"&&(be.syncState=!((g=e.message)===null||g===void 0)&&g.syncState?SyncState.toJSON((w=e.message)===null||w===void 0?void 0:w.syncState):void 0),((T=e.message)===null||T===void 0?void 0:T.$case)==="simulate"&&(be.simulate=!((A=e.message)===null||A===void 0)&&A.simulate?SimulateScenario.toJSON((J=e.message)===null||J===void 0?void 0:J.simulate):void 0),((G=e.message)===null||G===void 0?void 0:G.$case)==="ping"&&(be.ping=Math.round((I=e.message)===null||I===void 0?void 0:I.ping)),((V=e.message)===null||V===void 0?void 0:V.$case)==="updateMetadata"&&(be.updateMetadata=!((x=e.message)===null||x===void 0)&&x.updateMetadata?UpdateParticipantMetadata.toJSON((z=e.message)===null||z===void 0?void 0:z.updateMetadata):void 0),((ie=e.message)===null||ie===void 0?void 0:ie.$case)==="pingReq"&&(be.pingReq=!((se=e.message)===null||se===void 0)&&se.pingReq?Ping.toJSON((pe=e.message)===null||pe===void 0?void 0:pe.pingReq):void 0),be},create(e){return SignalRequest.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,u,c,h,p,l,f,m,v,E,k,C,N,P,M,L,$,H,Z,re,Y,O,D,b,_,g,w,T,A,J,G,I,V,x,z,ie,se,pe,be;const Ee=createBaseSignalRequest();return((i=e.message)===null||i===void 0?void 0:i.$case)==="offer"&&((t=e.message)===null||t===void 0?void 0:t.offer)!==void 0&&((n=e.message)===null||n===void 0?void 0:n.offer)!==null&&(Ee.message={$case:"offer",offer:SessionDescription.fromPartial(e.message.offer)}),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&((o=e.message)===null||o===void 0?void 0:o.answer)!==void 0&&((d=e.message)===null||d===void 0?void 0:d.answer)!==null&&(Ee.message={$case:"answer",answer:SessionDescription.fromPartial(e.message.answer)}),((s=e.message)===null||s===void 0?void 0:s.$case)==="trickle"&&((u=e.message)===null||u===void 0?void 0:u.trickle)!==void 0&&((c=e.message)===null||c===void 0?void 0:c.trickle)!==null&&(Ee.message={$case:"trickle",trickle:TrickleRequest.fromPartial(e.message.trickle)}),((h=e.message)===null||h===void 0?void 0:h.$case)==="addTrack"&&((p=e.message)===null||p===void 0?void 0:p.addTrack)!==void 0&&((l=e.message)===null||l===void 0?void 0:l.addTrack)!==null&&(Ee.message={$case:"addTrack",addTrack:AddTrackRequest.fromPartial(e.message.addTrack)}),((f=e.message)===null||f===void 0?void 0:f.$case)==="mute"&&((m=e.message)===null||m===void 0?void 0:m.mute)!==void 0&&((v=e.message)===null||v===void 0?void 0:v.mute)!==null&&(Ee.message={$case:"mute",mute:MuteTrackRequest.fromPartial(e.message.mute)}),((E=e.message)===null||E===void 0?void 0:E.$case)==="subscription"&&((k=e.message)===null||k===void 0?void 0:k.subscription)!==void 0&&((C=e.message)===null||C===void 0?void 0:C.subscription)!==null&&(Ee.message={$case:"subscription",subscription:UpdateSubscription.fromPartial(e.message.subscription)}),((N=e.message)===null||N===void 0?void 0:N.$case)==="trackSetting"&&((P=e.message)===null||P===void 0?void 0:P.trackSetting)!==void 0&&((M=e.message)===null||M===void 0?void 0:M.trackSetting)!==null&&(Ee.message={$case:"trackSetting",trackSetting:UpdateTrackSettings.fromPartial(e.message.trackSetting)}),((L=e.message)===null||L===void 0?void 0:L.$case)==="leave"&&(($=e.message)===null||$===void 0?void 0:$.leave)!==void 0&&((H=e.message)===null||H===void 0?void 0:H.leave)!==null&&(Ee.message={$case:"leave",leave:LeaveRequest.fromPartial(e.message.leave)}),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="updateLayers"&&((re=e.message)===null||re===void 0?void 0:re.updateLayers)!==void 0&&((Y=e.message)===null||Y===void 0?void 0:Y.updateLayers)!==null&&(Ee.message={$case:"updateLayers",updateLayers:UpdateVideoLayers.fromPartial(e.message.updateLayers)}),((O=e.message)===null||O===void 0?void 0:O.$case)==="subscriptionPermission"&&((D=e.message)===null||D===void 0?void 0:D.subscriptionPermission)!==void 0&&((b=e.message)===null||b===void 0?void 0:b.subscriptionPermission)!==null&&(Ee.message={$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.fromPartial(e.message.subscriptionPermission)}),((_=e.message)===null||_===void 0?void 0:_.$case)==="syncState"&&((g=e.message)===null||g===void 0?void 0:g.syncState)!==void 0&&((w=e.message)===null||w===void 0?void 0:w.syncState)!==null&&(Ee.message={$case:"syncState",syncState:SyncState.fromPartial(e.message.syncState)}),((T=e.message)===null||T===void 0?void 0:T.$case)==="simulate"&&((A=e.message)===null||A===void 0?void 0:A.simulate)!==void 0&&((J=e.message)===null||J===void 0?void 0:J.simulate)!==null&&(Ee.message={$case:"simulate",simulate:SimulateScenario.fromPartial(e.message.simulate)}),((G=e.message)===null||G===void 0?void 0:G.$case)==="ping"&&((I=e.message)===null||I===void 0?void 0:I.ping)!==void 0&&((V=e.message)===null||V===void 0?void 0:V.ping)!==null&&(Ee.message={$case:"ping",ping:e.message.ping}),((x=e.message)===null||x===void 0?void 0:x.$case)==="updateMetadata"&&((z=e.message)===null||z===void 0?void 0:z.updateMetadata)!==void 0&&((ie=e.message)===null||ie===void 0?void 0:ie.updateMetadata)!==null&&(Ee.message={$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.fromPartial(e.message.updateMetadata)}),((se=e.message)===null||se===void 0?void 0:se.$case)==="pingReq"&&((pe=e.message)===null||pe===void 0?void 0:pe.pingReq)!==void 0&&((be=e.message)===null||be===void 0?void 0:be.pingReq)!==null&&(Ee.message={$case:"pingReq",pingReq:Ping.fromPartial(e.message.pingReq)}),Ee}};function createBaseSignalResponse(){return{message:void 0}}const SignalResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch((t=e.message)===null||t===void 0?void 0:t.$case){case"join":JoinResponse.encode(e.message.join,i.uint32(10).fork()).ldelim();break;case"answer":SessionDescription.encode(e.message.answer,i.uint32(18).fork()).ldelim();break;case"offer":SessionDescription.encode(e.message.offer,i.uint32(26).fork()).ldelim();break;case"trickle":TrickleRequest.encode(e.message.trickle,i.uint32(34).fork()).ldelim();break;case"update":ParticipantUpdate.encode(e.message.update,i.uint32(42).fork()).ldelim();break;case"trackPublished":TrackPublishedResponse.encode(e.message.trackPublished,i.uint32(50).fork()).ldelim();break;case"leave":LeaveRequest.encode(e.message.leave,i.uint32(66).fork()).ldelim();break;case"mute":MuteTrackRequest.encode(e.message.mute,i.uint32(74).fork()).ldelim();break;case"speakersChanged":SpeakersChanged.encode(e.message.speakersChanged,i.uint32(82).fork()).ldelim();break;case"roomUpdate":RoomUpdate.encode(e.message.roomUpdate,i.uint32(90).fork()).ldelim();break;case"connectionQuality":ConnectionQualityUpdate.encode(e.message.connectionQuality,i.uint32(98).fork()).ldelim();break;case"streamStateUpdate":StreamStateUpdate.encode(e.message.streamStateUpdate,i.uint32(106).fork()).ldelim();break;case"subscribedQualityUpdate":SubscribedQualityUpdate.encode(e.message.subscribedQualityUpdate,i.uint32(114).fork()).ldelim();break;case"subscriptionPermissionUpdate":SubscriptionPermissionUpdate.encode(e.message.subscriptionPermissionUpdate,i.uint32(122).fork()).ldelim();break;case"refreshToken":i.uint32(130).string(e.message.refreshToken);break;case"trackUnpublished":TrackUnpublishedResponse.encode(e.message.trackUnpublished,i.uint32(138).fork()).ldelim();break;case"pong":i.uint32(144).int64(e.message.pong);break;case"reconnect":ReconnectResponse.encode(e.message.reconnect,i.uint32(154).fork()).ldelim();break;case"pongResp":Pong.encode(e.message.pongResp,i.uint32(162).fork()).ldelim();break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSignalResponse();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.message={$case:"join",join:JoinResponse.decode(t,t.uint32())};continue;case 2:if(o!=18)break;a.message={$case:"answer",answer:SessionDescription.decode(t,t.uint32())};continue;case 3:if(o!=26)break;a.message={$case:"offer",offer:SessionDescription.decode(t,t.uint32())};continue;case 4:if(o!=34)break;a.message={$case:"trickle",trickle:TrickleRequest.decode(t,t.uint32())};continue;case 5:if(o!=42)break;a.message={$case:"update",update:ParticipantUpdate.decode(t,t.uint32())};continue;case 6:if(o!=50)break;a.message={$case:"trackPublished",trackPublished:TrackPublishedResponse.decode(t,t.uint32())};continue;case 8:if(o!=66)break;a.message={$case:"leave",leave:LeaveRequest.decode(t,t.uint32())};continue;case 9:if(o!=74)break;a.message={$case:"mute",mute:MuteTrackRequest.decode(t,t.uint32())};continue;case 10:if(o!=82)break;a.message={$case:"speakersChanged",speakersChanged:SpeakersChanged.decode(t,t.uint32())};continue;case 11:if(o!=90)break;a.message={$case:"roomUpdate",roomUpdate:RoomUpdate.decode(t,t.uint32())};continue;case 12:if(o!=98)break;a.message={$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.decode(t,t.uint32())};continue;case 13:if(o!=106)break;a.message={$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.decode(t,t.uint32())};continue;case 14:if(o!=114)break;a.message={$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.decode(t,t.uint32())};continue;case 15:if(o!=122)break;a.message={$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.decode(t,t.uint32())};continue;case 16:if(o!=130)break;a.message={$case:"refreshToken",refreshToken:t.string()};continue;case 17:if(o!=138)break;a.message={$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.decode(t,t.uint32())};continue;case 18:if(o!=144)break;a.message={$case:"pong",pong:longToNumber(t.int64())};continue;case 19:if(o!=154)break;a.message={$case:"reconnect",reconnect:ReconnectResponse.decode(t,t.uint32())};continue;case 20:if(o!=162)break;a.message={$case:"pongResp",pongResp:Pong.decode(t,t.uint32())};continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{message:isSet(e.join)?{$case:"join",join:JoinResponse.fromJSON(e.join)}:isSet(e.answer)?{$case:"answer",answer:SessionDescription.fromJSON(e.answer)}:isSet(e.offer)?{$case:"offer",offer:SessionDescription.fromJSON(e.offer)}:isSet(e.trickle)?{$case:"trickle",trickle:TrickleRequest.fromJSON(e.trickle)}:isSet(e.update)?{$case:"update",update:ParticipantUpdate.fromJSON(e.update)}:isSet(e.trackPublished)?{$case:"trackPublished",trackPublished:TrackPublishedResponse.fromJSON(e.trackPublished)}:isSet(e.leave)?{$case:"leave",leave:LeaveRequest.fromJSON(e.leave)}:isSet(e.mute)?{$case:"mute",mute:MuteTrackRequest.fromJSON(e.mute)}:isSet(e.speakersChanged)?{$case:"speakersChanged",speakersChanged:SpeakersChanged.fromJSON(e.speakersChanged)}:isSet(e.roomUpdate)?{$case:"roomUpdate",roomUpdate:RoomUpdate.fromJSON(e.roomUpdate)}:isSet(e.connectionQuality)?{$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.fromJSON(e.connectionQuality)}:isSet(e.streamStateUpdate)?{$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.fromJSON(e.streamStateUpdate)}:isSet(e.subscribedQualityUpdate)?{$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.fromJSON(e.subscribedQualityUpdate)}:isSet(e.subscriptionPermissionUpdate)?{$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.fromJSON(e.subscriptionPermissionUpdate)}:isSet(e.refreshToken)?{$case:"refreshToken",refreshToken:String(e.refreshToken)}:isSet(e.trackUnpublished)?{$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.fromJSON(e.trackUnpublished)}:isSet(e.pong)?{$case:"pong",pong:Number(e.pong)}:isSet(e.reconnect)?{$case:"reconnect",reconnect:ReconnectResponse.fromJSON(e.reconnect)}:isSet(e.pongResp)?{$case:"pongResp",pongResp:Pong.fromJSON(e.pongResp)}:void 0}},toJSON(e){var i,t,n,a,o,d,s,u,c,h,p,l,f,m,v,E,k,C,N,P,M,L,$,H,Z,re,Y,O,D,b,_,g,w,T,A,J,G,I,V,x,z,ie,se,pe,be,Ee,oe,ce,ge,ke,fe,ee,te,Q,U;const W={};return((i=e.message)===null||i===void 0?void 0:i.$case)==="join"&&(W.join=!((t=e.message)===null||t===void 0)&&t.join?JoinResponse.toJSON((n=e.message)===null||n===void 0?void 0:n.join):void 0),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&(W.answer=!((o=e.message)===null||o===void 0)&&o.answer?SessionDescription.toJSON((d=e.message)===null||d===void 0?void 0:d.answer):void 0),((s=e.message)===null||s===void 0?void 0:s.$case)==="offer"&&(W.offer=!((u=e.message)===null||u===void 0)&&u.offer?SessionDescription.toJSON((c=e.message)===null||c===void 0?void 0:c.offer):void 0),((h=e.message)===null||h===void 0?void 0:h.$case)==="trickle"&&(W.trickle=!((p=e.message)===null||p===void 0)&&p.trickle?TrickleRequest.toJSON((l=e.message)===null||l===void 0?void 0:l.trickle):void 0),((f=e.message)===null||f===void 0?void 0:f.$case)==="update"&&(W.update=!((m=e.message)===null||m===void 0)&&m.update?ParticipantUpdate.toJSON((v=e.message)===null||v===void 0?void 0:v.update):void 0),((E=e.message)===null||E===void 0?void 0:E.$case)==="trackPublished"&&(W.trackPublished=!((k=e.message)===null||k===void 0)&&k.trackPublished?TrackPublishedResponse.toJSON((C=e.message)===null||C===void 0?void 0:C.trackPublished):void 0),((N=e.message)===null||N===void 0?void 0:N.$case)==="leave"&&(W.leave=!((P=e.message)===null||P===void 0)&&P.leave?LeaveRequest.toJSON((M=e.message)===null||M===void 0?void 0:M.leave):void 0),((L=e.message)===null||L===void 0?void 0:L.$case)==="mute"&&(W.mute=!(($=e.message)===null||$===void 0)&&$.mute?MuteTrackRequest.toJSON((H=e.message)===null||H===void 0?void 0:H.mute):void 0),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="speakersChanged"&&(W.speakersChanged=!((re=e.message)===null||re===void 0)&&re.speakersChanged?SpeakersChanged.toJSON((Y=e.message)===null||Y===void 0?void 0:Y.speakersChanged):void 0),((O=e.message)===null||O===void 0?void 0:O.$case)==="roomUpdate"&&(W.roomUpdate=!((D=e.message)===null||D===void 0)&&D.roomUpdate?RoomUpdate.toJSON((b=e.message)===null||b===void 0?void 0:b.roomUpdate):void 0),((_=e.message)===null||_===void 0?void 0:_.$case)==="connectionQuality"&&(W.connectionQuality=!((g=e.message)===null||g===void 0)&&g.connectionQuality?ConnectionQualityUpdate.toJSON((w=e.message)===null||w===void 0?void 0:w.connectionQuality):void 0),((T=e.message)===null||T===void 0?void 0:T.$case)==="streamStateUpdate"&&(W.streamStateUpdate=!((A=e.message)===null||A===void 0)&&A.streamStateUpdate?StreamStateUpdate.toJSON((J=e.message)===null||J===void 0?void 0:J.streamStateUpdate):void 0),((G=e.message)===null||G===void 0?void 0:G.$case)==="subscribedQualityUpdate"&&(W.subscribedQualityUpdate=!((I=e.message)===null||I===void 0)&&I.subscribedQualityUpdate?SubscribedQualityUpdate.toJSON((V=e.message)===null||V===void 0?void 0:V.subscribedQualityUpdate):void 0),((x=e.message)===null||x===void 0?void 0:x.$case)==="subscriptionPermissionUpdate"&&(W.subscriptionPermissionUpdate=!((z=e.message)===null||z===void 0)&&z.subscriptionPermissionUpdate?SubscriptionPermissionUpdate.toJSON((ie=e.message)===null||ie===void 0?void 0:ie.subscriptionPermissionUpdate):void 0),((se=e.message)===null||se===void 0?void 0:se.$case)==="refreshToken"&&(W.refreshToken=(pe=e.message)===null||pe===void 0?void 0:pe.refreshToken),((be=e.message)===null||be===void 0?void 0:be.$case)==="trackUnpublished"&&(W.trackUnpublished=!((Ee=e.message)===null||Ee===void 0)&&Ee.trackUnpublished?TrackUnpublishedResponse.toJSON((oe=e.message)===null||oe===void 0?void 0:oe.trackUnpublished):void 0),((ce=e.message)===null||ce===void 0?void 0:ce.$case)==="pong"&&(W.pong=Math.round((ge=e.message)===null||ge===void 0?void 0:ge.pong)),((ke=e.message)===null||ke===void 0?void 0:ke.$case)==="reconnect"&&(W.reconnect=!((fe=e.message)===null||fe===void 0)&&fe.reconnect?ReconnectResponse.toJSON((ee=e.message)===null||ee===void 0?void 0:ee.reconnect):void 0),((te=e.message)===null||te===void 0?void 0:te.$case)==="pongResp"&&(W.pongResp=!((Q=e.message)===null||Q===void 0)&&Q.pongResp?Pong.toJSON((U=e.message)===null||U===void 0?void 0:U.pongResp):void 0),W},create(e){return SignalResponse.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,u,c,h,p,l,f,m,v,E,k,C,N,P,M,L,$,H,Z,re,Y,O,D,b,_,g,w,T,A,J,G,I,V,x,z,ie,se,pe,be,Ee,oe,ce,ge,ke,fe,ee,te,Q,U,W,X;const de=createBaseSignalResponse();return((i=e.message)===null||i===void 0?void 0:i.$case)==="join"&&((t=e.message)===null||t===void 0?void 0:t.join)!==void 0&&((n=e.message)===null||n===void 0?void 0:n.join)!==null&&(de.message={$case:"join",join:JoinResponse.fromPartial(e.message.join)}),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&((o=e.message)===null||o===void 0?void 0:o.answer)!==void 0&&((d=e.message)===null||d===void 0?void 0:d.answer)!==null&&(de.message={$case:"answer",answer:SessionDescription.fromPartial(e.message.answer)}),((s=e.message)===null||s===void 0?void 0:s.$case)==="offer"&&((u=e.message)===null||u===void 0?void 0:u.offer)!==void 0&&((c=e.message)===null||c===void 0?void 0:c.offer)!==null&&(de.message={$case:"offer",offer:SessionDescription.fromPartial(e.message.offer)}),((h=e.message)===null||h===void 0?void 0:h.$case)==="trickle"&&((p=e.message)===null||p===void 0?void 0:p.trickle)!==void 0&&((l=e.message)===null||l===void 0?void 0:l.trickle)!==null&&(de.message={$case:"trickle",trickle:TrickleRequest.fromPartial(e.message.trickle)}),((f=e.message)===null||f===void 0?void 0:f.$case)==="update"&&((m=e.message)===null||m===void 0?void 0:m.update)!==void 0&&((v=e.message)===null||v===void 0?void 0:v.update)!==null&&(de.message={$case:"update",update:ParticipantUpdate.fromPartial(e.message.update)}),((E=e.message)===null||E===void 0?void 0:E.$case)==="trackPublished"&&((k=e.message)===null||k===void 0?void 0:k.trackPublished)!==void 0&&((C=e.message)===null||C===void 0?void 0:C.trackPublished)!==null&&(de.message={$case:"trackPublished",trackPublished:TrackPublishedResponse.fromPartial(e.message.trackPublished)}),((N=e.message)===null||N===void 0?void 0:N.$case)==="leave"&&((P=e.message)===null||P===void 0?void 0:P.leave)!==void 0&&((M=e.message)===null||M===void 0?void 0:M.leave)!==null&&(de.message={$case:"leave",leave:LeaveRequest.fromPartial(e.message.leave)}),((L=e.message)===null||L===void 0?void 0:L.$case)==="mute"&&(($=e.message)===null||$===void 0?void 0:$.mute)!==void 0&&((H=e.message)===null||H===void 0?void 0:H.mute)!==null&&(de.message={$case:"mute",mute:MuteTrackRequest.fromPartial(e.message.mute)}),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="speakersChanged"&&((re=e.message)===null||re===void 0?void 0:re.speakersChanged)!==void 0&&((Y=e.message)===null||Y===void 0?void 0:Y.speakersChanged)!==null&&(de.message={$case:"speakersChanged",speakersChanged:SpeakersChanged.fromPartial(e.message.speakersChanged)}),((O=e.message)===null||O===void 0?void 0:O.$case)==="roomUpdate"&&((D=e.message)===null||D===void 0?void 0:D.roomUpdate)!==void 0&&((b=e.message)===null||b===void 0?void 0:b.roomUpdate)!==null&&(de.message={$case:"roomUpdate",roomUpdate:RoomUpdate.fromPartial(e.message.roomUpdate)}),((_=e.message)===null||_===void 0?void 0:_.$case)==="connectionQuality"&&((g=e.message)===null||g===void 0?void 0:g.connectionQuality)!==void 0&&((w=e.message)===null||w===void 0?void 0:w.connectionQuality)!==null&&(de.message={$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.fromPartial(e.message.connectionQuality)}),((T=e.message)===null||T===void 0?void 0:T.$case)==="streamStateUpdate"&&((A=e.message)===null||A===void 0?void 0:A.streamStateUpdate)!==void 0&&((J=e.message)===null||J===void 0?void 0:J.streamStateUpdate)!==null&&(de.message={$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.fromPartial(e.message.streamStateUpdate)}),((G=e.message)===null||G===void 0?void 0:G.$case)==="subscribedQualityUpdate"&&((I=e.message)===null||I===void 0?void 0:I.subscribedQualityUpdate)!==void 0&&((V=e.message)===null||V===void 0?void 0:V.subscribedQualityUpdate)!==null&&(de.message={$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.fromPartial(e.message.subscribedQualityUpdate)}),((x=e.message)===null||x===void 0?void 0:x.$case)==="subscriptionPermissionUpdate"&&((z=e.message)===null||z===void 0?void 0:z.subscriptionPermissionUpdate)!==void 0&&((ie=e.message)===null||ie===void 0?void 0:ie.subscriptionPermissionUpdate)!==null&&(de.message={$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.fromPartial(e.message.subscriptionPermissionUpdate)}),((se=e.message)===null||se===void 0?void 0:se.$case)==="refreshToken"&&((pe=e.message)===null||pe===void 0?void 0:pe.refreshToken)!==void 0&&((be=e.message)===null||be===void 0?void 0:be.refreshToken)!==null&&(de.message={$case:"refreshToken",refreshToken:e.message.refreshToken}),((Ee=e.message)===null||Ee===void 0?void 0:Ee.$case)==="trackUnpublished"&&((oe=e.message)===null||oe===void 0?void 0:oe.trackUnpublished)!==void 0&&((ce=e.message)===null||ce===void 0?void 0:ce.trackUnpublished)!==null&&(de.message={$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.fromPartial(e.message.trackUnpublished)}),((ge=e.message)===null||ge===void 0?void 0:ge.$case)==="pong"&&((ke=e.message)===null||ke===void 0?void 0:ke.pong)!==void 0&&((fe=e.message)===null||fe===void 0?void 0:fe.pong)!==null&&(de.message={$case:"pong",pong:e.message.pong}),((ee=e.message)===null||ee===void 0?void 0:ee.$case)==="reconnect"&&((te=e.message)===null||te===void 0?void 0:te.reconnect)!==void 0&&((Q=e.message)===null||Q===void 0?void 0:Q.reconnect)!==null&&(de.message={$case:"reconnect",reconnect:ReconnectResponse.fromPartial(e.message.reconnect)}),((U=e.message)===null||U===void 0?void 0:U.$case)==="pongResp"&&((W=e.message)===null||W===void 0?void 0:W.pongResp)!==void 0&&((X=e.message)===null||X===void 0?void 0:X.pongResp)!==null&&(de.message={$case:"pongResp",pongResp:Pong.fromPartial(e.message.pongResp)}),de}};function createBaseSimulcastCodec(){return{codec:"",cid:"",enableSimulcastLayers:!1}}const SimulcastCodec={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.codec!==""&&i.uint32(10).string(e.codec),e.cid!==""&&i.uint32(18).string(e.cid),e.enableSimulcastLayers===!0&&i.uint32(24).bool(e.enableSimulcastLayers),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSimulcastCodec();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.codec=t.string();continue;case 2:if(o!=18)break;a.cid=t.string();continue;case 3:if(o!=24)break;a.enableSimulcastLayers=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{codec:isSet(e.codec)?String(e.codec):"",cid:isSet(e.cid)?String(e.cid):"",enableSimulcastLayers:isSet(e.enableSimulcastLayers)?!!e.enableSimulcastLayers:!1}},toJSON(e){const i={};return e.codec!==void 0&&(i.codec=e.codec),e.cid!==void 0&&(i.cid=e.cid),e.enableSimulcastLayers!==void 0&&(i.enableSimulcastLayers=e.enableSimulcastLayers),i},create(e){return SimulcastCodec.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSimulcastCodec();return a.codec=(i=e.codec)!==null&&i!==void 0?i:"",a.cid=(t=e.cid)!==null&&t!==void 0?t:"",a.enableSimulcastLayers=(n=e.enableSimulcastLayers)!==null&&n!==void 0?n:!1,a}};function createBaseAddTrackRequest(){return{cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[],simulcastCodecs:[],sid:"",stereo:!1,disableRed:!1,encryption:0}}const AddTrackRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.cid!==""&&i.uint32(10).string(e.cid),e.name!==""&&i.uint32(18).string(e.name),e.type!==0&&i.uint32(24).int32(e.type),e.width!==0&&i.uint32(32).uint32(e.width),e.height!==0&&i.uint32(40).uint32(e.height),e.muted===!0&&i.uint32(48).bool(e.muted),e.disableDtx===!0&&i.uint32(56).bool(e.disableDtx),e.source!==0&&i.uint32(64).int32(e.source);for(const t of e.layers)VideoLayer.encode(t,i.uint32(74).fork()).ldelim();for(const t of e.simulcastCodecs)SimulcastCodec.encode(t,i.uint32(82).fork()).ldelim();return e.sid!==""&&i.uint32(90).string(e.sid),e.stereo===!0&&i.uint32(96).bool(e.stereo),e.disableRed===!0&&i.uint32(104).bool(e.disableRed),e.encryption!==0&&i.uint32(112).int32(e.encryption),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseAddTrackRequest();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.cid=t.string();continue;case 2:if(o!=18)break;a.name=t.string();continue;case 3:if(o!=24)break;a.type=t.int32();continue;case 4:if(o!=32)break;a.width=t.uint32();continue;case 5:if(o!=40)break;a.height=t.uint32();continue;case 6:if(o!=48)break;a.muted=t.bool();continue;case 7:if(o!=56)break;a.disableDtx=t.bool();continue;case 8:if(o!=64)break;a.source=t.int32();continue;case 9:if(o!=74)break;a.layers.push(VideoLayer.decode(t,t.uint32()));continue;case 10:if(o!=82)break;a.simulcastCodecs.push(SimulcastCodec.decode(t,t.uint32()));continue;case 11:if(o!=90)break;a.sid=t.string();continue;case 12:if(o!=96)break;a.stereo=t.bool();continue;case 13:if(o!=104)break;a.disableRed=t.bool();continue;case 14:if(o!=112)break;a.encryption=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{cid:isSet(e.cid)?String(e.cid):"",name:isSet(e.name)?String(e.name):"",type:isSet(e.type)?trackTypeFromJSON(e.type):0,width:isSet(e.width)?Number(e.width):0,height:isSet(e.height)?Number(e.height):0,muted:isSet(e.muted)?!!e.muted:!1,disableDtx:isSet(e.disableDtx)?!!e.disableDtx:!1,source:isSet(e.source)?trackSourceFromJSON(e.source):0,layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[],simulcastCodecs:Array.isArray(e==null?void 0:e.simulcastCodecs)?e.simulcastCodecs.map(i=>SimulcastCodec.fromJSON(i)):[],sid:isSet(e.sid)?String(e.sid):"",stereo:isSet(e.stereo)?!!e.stereo:!1,disableRed:isSet(e.disableRed)?!!e.disableRed:!1,encryption:isSet(e.encryption)?encryption_TypeFromJSON(e.encryption):0}},toJSON(e){const i={};return e.cid!==void 0&&(i.cid=e.cid),e.name!==void 0&&(i.name=e.name),e.type!==void 0&&(i.type=trackTypeToJSON(e.type)),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.muted!==void 0&&(i.muted=e.muted),e.disableDtx!==void 0&&(i.disableDtx=e.disableDtx),e.source!==void 0&&(i.source=trackSourceToJSON(e.source)),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],e.simulcastCodecs?i.simulcastCodecs=e.simulcastCodecs.map(t=>t?SimulcastCodec.toJSON(t):void 0):i.simulcastCodecs=[],e.sid!==void 0&&(i.sid=e.sid),e.stereo!==void 0&&(i.stereo=e.stereo),e.disableRed!==void 0&&(i.disableRed=e.disableRed),e.encryption!==void 0&&(i.encryption=encryption_TypeToJSON(e.encryption)),i},create(e){return AddTrackRequest.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,u,c,h,p,l,f,m;const v=createBaseAddTrackRequest();return v.cid=(i=e.cid)!==null&&i!==void 0?i:"",v.name=(t=e.name)!==null&&t!==void 0?t:"",v.type=(n=e.type)!==null&&n!==void 0?n:0,v.width=(a=e.width)!==null&&a!==void 0?a:0,v.height=(o=e.height)!==null&&o!==void 0?o:0,v.muted=(d=e.muted)!==null&&d!==void 0?d:!1,v.disableDtx=(s=e.disableDtx)!==null&&s!==void 0?s:!1,v.source=(u=e.source)!==null&&u!==void 0?u:0,v.layers=((c=e.layers)===null||c===void 0?void 0:c.map(E=>VideoLayer.fromPartial(E)))||[],v.simulcastCodecs=((h=e.simulcastCodecs)===null||h===void 0?void 0:h.map(E=>SimulcastCodec.fromPartial(E)))||[],v.sid=(p=e.sid)!==null&&p!==void 0?p:"",v.stereo=(l=e.stereo)!==null&&l!==void 0?l:!1,v.disableRed=(f=e.disableRed)!==null&&f!==void 0?f:!1,v.encryption=(m=e.encryption)!==null&&m!==void 0?m:0,v}};function createBaseTrickleRequest(){return{candidateInit:"",target:0}}const TrickleRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.candidateInit!==""&&i.uint32(10).string(e.candidateInit),e.target!==0&&i.uint32(16).int32(e.target),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrickleRequest();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.candidateInit=t.string();continue;case 2:if(o!=16)break;a.target=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{candidateInit:isSet(e.candidateInit)?String(e.candidateInit):"",target:isSet(e.target)?signalTargetFromJSON(e.target):0}},toJSON(e){const i={};return e.candidateInit!==void 0&&(i.candidateInit=e.candidateInit),e.target!==void 0&&(i.target=signalTargetToJSON(e.target)),i},create(e){return TrickleRequest.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseTrickleRequest();return n.candidateInit=(i=e.candidateInit)!==null&&i!==void 0?i:"",n.target=(t=e.target)!==null&&t!==void 0?t:0,n}};function createBaseMuteTrackRequest(){return{sid:"",muted:!1}}const MuteTrackRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.sid!==""&&i.uint32(10).string(e.sid),e.muted===!0&&i.uint32(16).bool(e.muted),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseMuteTrackRequest();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.sid=t.string();continue;case 2:if(o!=16)break;a.muted=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{sid:isSet(e.sid)?String(e.sid):"",muted:isSet(e.muted)?!!e.muted:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.muted!==void 0&&(i.muted=e.muted),i},create(e){return MuteTrackRequest.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseMuteTrackRequest();return n.sid=(i=e.sid)!==null&&i!==void 0?i:"",n.muted=(t=e.muted)!==null&&t!==void 0?t:!1,n}};function createBaseJoinResponse(){return{room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:"",pingTimeout:0,pingInterval:0,serverInfo:void 0}}const JoinResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.room!==void 0&&Room$1.encode(e.room,i.uint32(10).fork()).ldelim(),e.participant!==void 0&&ParticipantInfo.encode(e.participant,i.uint32(18).fork()).ldelim();for(const t of e.otherParticipants)ParticipantInfo.encode(t,i.uint32(26).fork()).ldelim();e.serverVersion!==""&&i.uint32(34).string(e.serverVersion);for(const t of e.iceServers)ICEServer.encode(t,i.uint32(42).fork()).ldelim();return e.subscriberPrimary===!0&&i.uint32(48).bool(e.subscriberPrimary),e.alternativeUrl!==""&&i.uint32(58).string(e.alternativeUrl),e.clientConfiguration!==void 0&&ClientConfiguration.encode(e.clientConfiguration,i.uint32(66).fork()).ldelim(),e.serverRegion!==""&&i.uint32(74).string(e.serverRegion),e.pingTimeout!==0&&i.uint32(80).int32(e.pingTimeout),e.pingInterval!==0&&i.uint32(88).int32(e.pingInterval),e.serverInfo!==void 0&&ServerInfo.encode(e.serverInfo,i.uint32(98).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseJoinResponse();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.room=Room$1.decode(t,t.uint32());continue;case 2:if(o!=18)break;a.participant=ParticipantInfo.decode(t,t.uint32());continue;case 3:if(o!=26)break;a.otherParticipants.push(ParticipantInfo.decode(t,t.uint32()));continue;case 4:if(o!=34)break;a.serverVersion=t.string();continue;case 5:if(o!=42)break;a.iceServers.push(ICEServer.decode(t,t.uint32()));continue;case 6:if(o!=48)break;a.subscriberPrimary=t.bool();continue;case 7:if(o!=58)break;a.alternativeUrl=t.string();continue;case 8:if(o!=66)break;a.clientConfiguration=ClientConfiguration.decode(t,t.uint32());continue;case 9:if(o!=74)break;a.serverRegion=t.string();continue;case 10:if(o!=80)break;a.pingTimeout=t.int32();continue;case 11:if(o!=88)break;a.pingInterval=t.int32();continue;case 12:if(o!=98)break;a.serverInfo=ServerInfo.decode(t,t.uint32());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{room:isSet(e.room)?Room$1.fromJSON(e.room):void 0,participant:isSet(e.participant)?ParticipantInfo.fromJSON(e.participant):void 0,otherParticipants:Array.isArray(e==null?void 0:e.otherParticipants)?e.otherParticipants.map(i=>ParticipantInfo.fromJSON(i)):[],serverVersion:isSet(e.serverVersion)?String(e.serverVersion):"",iceServers:Array.isArray(e==null?void 0:e.iceServers)?e.iceServers.map(i=>ICEServer.fromJSON(i)):[],subscriberPrimary:isSet(e.subscriberPrimary)?!!e.subscriberPrimary:!1,alternativeUrl:isSet(e.alternativeUrl)?String(e.alternativeUrl):"",clientConfiguration:isSet(e.clientConfiguration)?ClientConfiguration.fromJSON(e.clientConfiguration):void 0,serverRegion:isSet(e.serverRegion)?String(e.serverRegion):"",pingTimeout:isSet(e.pingTimeout)?Number(e.pingTimeout):0,pingInterval:isSet(e.pingInterval)?Number(e.pingInterval):0,serverInfo:isSet(e.serverInfo)?ServerInfo.fromJSON(e.serverInfo):void 0}},toJSON(e){const i={};return e.room!==void 0&&(i.room=e.room?Room$1.toJSON(e.room):void 0),e.participant!==void 0&&(i.participant=e.participant?ParticipantInfo.toJSON(e.participant):void 0),e.otherParticipants?i.otherParticipants=e.otherParticipants.map(t=>t?ParticipantInfo.toJSON(t):void 0):i.otherParticipants=[],e.serverVersion!==void 0&&(i.serverVersion=e.serverVersion),e.iceServers?i.iceServers=e.iceServers.map(t=>t?ICEServer.toJSON(t):void 0):i.iceServers=[],e.subscriberPrimary!==void 0&&(i.subscriberPrimary=e.subscriberPrimary),e.alternativeUrl!==void 0&&(i.alternativeUrl=e.alternativeUrl),e.clientConfiguration!==void 0&&(i.clientConfiguration=e.clientConfiguration?ClientConfiguration.toJSON(e.clientConfiguration):void 0),e.serverRegion!==void 0&&(i.serverRegion=e.serverRegion),e.pingTimeout!==void 0&&(i.pingTimeout=Math.round(e.pingTimeout)),e.pingInterval!==void 0&&(i.pingInterval=Math.round(e.pingInterval)),e.serverInfo!==void 0&&(i.serverInfo=e.serverInfo?ServerInfo.toJSON(e.serverInfo):void 0),i},create(e){return JoinResponse.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,u;const c=createBaseJoinResponse();return c.room=e.room!==void 0&&e.room!==null?Room$1.fromPartial(e.room):void 0,c.participant=e.participant!==void 0&&e.participant!==null?ParticipantInfo.fromPartial(e.participant):void 0,c.otherParticipants=((i=e.otherParticipants)===null||i===void 0?void 0:i.map(h=>ParticipantInfo.fromPartial(h)))||[],c.serverVersion=(t=e.serverVersion)!==null&&t!==void 0?t:"",c.iceServers=((n=e.iceServers)===null||n===void 0?void 0:n.map(h=>ICEServer.fromPartial(h)))||[],c.subscriberPrimary=(a=e.subscriberPrimary)!==null&&a!==void 0?a:!1,c.alternativeUrl=(o=e.alternativeUrl)!==null&&o!==void 0?o:"",c.clientConfiguration=e.clientConfiguration!==void 0&&e.clientConfiguration!==null?ClientConfiguration.fromPartial(e.clientConfiguration):void 0,c.serverRegion=(d=e.serverRegion)!==null&&d!==void 0?d:"",c.pingTimeout=(s=e.pingTimeout)!==null&&s!==void 0?s:0,c.pingInterval=(u=e.pingInterval)!==null&&u!==void 0?u:0,c.serverInfo=e.serverInfo!==void 0&&e.serverInfo!==null?ServerInfo.fromPartial(e.serverInfo):void 0,c}};function createBaseReconnectResponse(){return{iceServers:[],clientConfiguration:void 0}}const ReconnectResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.iceServers)ICEServer.encode(t,i.uint32(10).fork()).ldelim();return e.clientConfiguration!==void 0&&ClientConfiguration.encode(e.clientConfiguration,i.uint32(18).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseReconnectResponse();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.iceServers.push(ICEServer.decode(t,t.uint32()));continue;case 2:if(o!=18)break;a.clientConfiguration=ClientConfiguration.decode(t,t.uint32());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{iceServers:Array.isArray(e==null?void 0:e.iceServers)?e.iceServers.map(i=>ICEServer.fromJSON(i)):[],clientConfiguration:isSet(e.clientConfiguration)?ClientConfiguration.fromJSON(e.clientConfiguration):void 0}},toJSON(e){const i={};return e.iceServers?i.iceServers=e.iceServers.map(t=>t?ICEServer.toJSON(t):void 0):i.iceServers=[],e.clientConfiguration!==void 0&&(i.clientConfiguration=e.clientConfiguration?ClientConfiguration.toJSON(e.clientConfiguration):void 0),i},create(e){return ReconnectResponse.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseReconnectResponse();return t.iceServers=((i=e.iceServers)===null||i===void 0?void 0:i.map(n=>ICEServer.fromPartial(n)))||[],t.clientConfiguration=e.clientConfiguration!==void 0&&e.clientConfiguration!==null?ClientConfiguration.fromPartial(e.clientConfiguration):void 0,t}};function createBaseTrackPublishedResponse(){return{cid:"",track:void 0}}const TrackPublishedResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.cid!==""&&i.uint32(10).string(e.cid),e.track!==void 0&&TrackInfo.encode(e.track,i.uint32(18).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackPublishedResponse();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.cid=t.string();continue;case 2:if(o!=18)break;a.track=TrackInfo.decode(t,t.uint32());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{cid:isSet(e.cid)?String(e.cid):"",track:isSet(e.track)?TrackInfo.fromJSON(e.track):void 0}},toJSON(e){const i={};return e.cid!==void 0&&(i.cid=e.cid),e.track!==void 0&&(i.track=e.track?TrackInfo.toJSON(e.track):void 0),i},create(e){return TrackPublishedResponse.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseTrackPublishedResponse();return t.cid=(i=e.cid)!==null&&i!==void 0?i:"",t.track=e.track!==void 0&&e.track!==null?TrackInfo.fromPartial(e.track):void 0,t}};function createBaseTrackUnpublishedResponse(){return{trackSid:""}}const TrackUnpublishedResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.trackSid!==""&&i.uint32(10).string(e.trackSid),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackUnpublishedResponse();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.trackSid=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):""}},toJSON(e){const i={};return e.trackSid!==void 0&&(i.trackSid=e.trackSid),i},create(e){return TrackUnpublishedResponse.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseTrackUnpublishedResponse();return t.trackSid=(i=e.trackSid)!==null&&i!==void 0?i:"",t}};function createBaseSessionDescription(){return{type:"",sdp:""}}const SessionDescription={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.type!==""&&i.uint32(10).string(e.type),e.sdp!==""&&i.uint32(18).string(e.sdp),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSessionDescription();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.type=t.string();continue;case 2:if(o!=18)break;a.sdp=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{type:isSet(e.type)?String(e.type):"",sdp:isSet(e.sdp)?String(e.sdp):""}},toJSON(e){const i={};return e.type!==void 0&&(i.type=e.type),e.sdp!==void 0&&(i.sdp=e.sdp),i},create(e){return SessionDescription.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSessionDescription();return n.type=(i=e.type)!==null&&i!==void 0?i:"",n.sdp=(t=e.sdp)!==null&&t!==void 0?t:"",n}};function createBaseParticipantUpdate(){return{participants:[]}}const ParticipantUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.participants)ParticipantInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participants.push(ParticipantInfo.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participants:Array.isArray(e==null?void 0:e.participants)?e.participants.map(i=>ParticipantInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.participants?i.participants=e.participants.map(t=>t?ParticipantInfo.toJSON(t):void 0):i.participants=[],i},create(e){return ParticipantUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseParticipantUpdate();return t.participants=((i=e.participants)===null||i===void 0?void 0:i.map(n=>ParticipantInfo.fromPartial(n)))||[],t}};function createBaseUpdateSubscription(){return{trackSids:[],subscribe:!1,participantTracks:[]}}const UpdateSubscription={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.trackSids)i.uint32(10).string(t);e.subscribe===!0&&i.uint32(16).bool(e.subscribe);for(const t of e.participantTracks)ParticipantTracks.encode(t,i.uint32(26).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateSubscription();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.trackSids.push(t.string());continue;case 2:if(o!=16)break;a.subscribe=t.bool();continue;case 3:if(o!=26)break;a.participantTracks.push(ParticipantTracks.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[],subscribe:isSet(e.subscribe)?!!e.subscribe:!1,participantTracks:Array.isArray(e==null?void 0:e.participantTracks)?e.participantTracks.map(i=>ParticipantTracks.fromJSON(i)):[]}},toJSON(e){const i={};return e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],e.subscribe!==void 0&&(i.subscribe=e.subscribe),e.participantTracks?i.participantTracks=e.participantTracks.map(t=>t?ParticipantTracks.toJSON(t):void 0):i.participantTracks=[],i},create(e){return UpdateSubscription.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseUpdateSubscription();return a.trackSids=((i=e.trackSids)===null||i===void 0?void 0:i.map(o=>o))||[],a.subscribe=(t=e.subscribe)!==null&&t!==void 0?t:!1,a.participantTracks=((n=e.participantTracks)===null||n===void 0?void 0:n.map(o=>ParticipantTracks.fromPartial(o)))||[],a}};function createBaseUpdateTrackSettings(){return{trackSids:[],disabled:!1,quality:0,width:0,height:0,fps:0,priority:0}}const UpdateTrackSettings={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.trackSids)i.uint32(10).string(t);return e.disabled===!0&&i.uint32(24).bool(e.disabled),e.quality!==0&&i.uint32(32).int32(e.quality),e.width!==0&&i.uint32(40).uint32(e.width),e.height!==0&&i.uint32(48).uint32(e.height),e.fps!==0&&i.uint32(56).uint32(e.fps),e.priority!==0&&i.uint32(64).uint32(e.priority),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateTrackSettings();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.trackSids.push(t.string());continue;case 3:if(o!=24)break;a.disabled=t.bool();continue;case 4:if(o!=32)break;a.quality=t.int32();continue;case 5:if(o!=40)break;a.width=t.uint32();continue;case 6:if(o!=48)break;a.height=t.uint32();continue;case 7:if(o!=56)break;a.fps=t.uint32();continue;case 8:if(o!=64)break;a.priority=t.uint32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[],disabled:isSet(e.disabled)?!!e.disabled:!1,quality:isSet(e.quality)?videoQualityFromJSON(e.quality):0,width:isSet(e.width)?Number(e.width):0,height:isSet(e.height)?Number(e.height):0,fps:isSet(e.fps)?Number(e.fps):0,priority:isSet(e.priority)?Number(e.priority):0}},toJSON(e){const i={};return e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],e.disabled!==void 0&&(i.disabled=e.disabled),e.quality!==void 0&&(i.quality=videoQualityToJSON(e.quality)),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.fps!==void 0&&(i.fps=Math.round(e.fps)),e.priority!==void 0&&(i.priority=Math.round(e.priority)),i},create(e){return UpdateTrackSettings.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s;const u=createBaseUpdateTrackSettings();return u.trackSids=((i=e.trackSids)===null||i===void 0?void 0:i.map(c=>c))||[],u.disabled=(t=e.disabled)!==null&&t!==void 0?t:!1,u.quality=(n=e.quality)!==null&&n!==void 0?n:0,u.width=(a=e.width)!==null&&a!==void 0?a:0,u.height=(o=e.height)!==null&&o!==void 0?o:0,u.fps=(d=e.fps)!==null&&d!==void 0?d:0,u.priority=(s=e.priority)!==null&&s!==void 0?s:0,u}};function createBaseLeaveRequest(){return{canReconnect:!1,reason:0}}const LeaveRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.canReconnect===!0&&i.uint32(8).bool(e.canReconnect),e.reason!==0&&i.uint32(16).int32(e.reason),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseLeaveRequest();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.canReconnect=t.bool();continue;case 2:if(o!=16)break;a.reason=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{canReconnect:isSet(e.canReconnect)?!!e.canReconnect:!1,reason:isSet(e.reason)?disconnectReasonFromJSON(e.reason):0}},toJSON(e){const i={};return e.canReconnect!==void 0&&(i.canReconnect=e.canReconnect),e.reason!==void 0&&(i.reason=disconnectReasonToJSON(e.reason)),i},create(e){return LeaveRequest.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseLeaveRequest();return n.canReconnect=(i=e.canReconnect)!==null&&i!==void 0?i:!1,n.reason=(t=e.reason)!==null&&t!==void 0?t:0,n}};function createBaseUpdateVideoLayers(){return{trackSid:"",layers:[]}}const UpdateVideoLayers={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.trackSid!==""&&i.uint32(10).string(e.trackSid);for(const t of e.layers)VideoLayer.encode(t,i.uint32(18).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateVideoLayers();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.trackSid=t.string();continue;case 2:if(o!=18)break;a.layers.push(VideoLayer.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):"",layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[]}},toJSON(e){const i={};return e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],i},create(e){return UpdateVideoLayers.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseUpdateVideoLayers();return n.trackSid=(i=e.trackSid)!==null&&i!==void 0?i:"",n.layers=((t=e.layers)===null||t===void 0?void 0:t.map(a=>VideoLayer.fromPartial(a)))||[],n}};function createBaseUpdateParticipantMetadata(){return{metadata:"",name:""}}const UpdateParticipantMetadata={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.metadata!==""&&i.uint32(10).string(e.metadata),e.name!==""&&i.uint32(18).string(e.name),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateParticipantMetadata();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.metadata=t.string();continue;case 2:if(o!=18)break;a.name=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{metadata:isSet(e.metadata)?String(e.metadata):"",name:isSet(e.name)?String(e.name):""}},toJSON(e){const i={};return e.metadata!==void 0&&(i.metadata=e.metadata),e.name!==void 0&&(i.name=e.name),i},create(e){return UpdateParticipantMetadata.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseUpdateParticipantMetadata();return n.metadata=(i=e.metadata)!==null&&i!==void 0?i:"",n.name=(t=e.name)!==null&&t!==void 0?t:"",n}};function createBaseICEServer(){return{urls:[],username:"",credential:""}}const ICEServer={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.urls)i.uint32(10).string(t);return e.username!==""&&i.uint32(18).string(e.username),e.credential!==""&&i.uint32(26).string(e.credential),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseICEServer();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.urls.push(t.string());continue;case 2:if(o!=18)break;a.username=t.string();continue;case 3:if(o!=26)break;a.credential=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{urls:Array.isArray(e==null?void 0:e.urls)?e.urls.map(i=>String(i)):[],username:isSet(e.username)?String(e.username):"",credential:isSet(e.credential)?String(e.credential):""}},toJSON(e){const i={};return e.urls?i.urls=e.urls.map(t=>t):i.urls=[],e.username!==void 0&&(i.username=e.username),e.credential!==void 0&&(i.credential=e.credential),i},create(e){return ICEServer.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseICEServer();return a.urls=((i=e.urls)===null||i===void 0?void 0:i.map(o=>o))||[],a.username=(t=e.username)!==null&&t!==void 0?t:"",a.credential=(n=e.credential)!==null&&n!==void 0?n:"",a}};function createBaseSpeakersChanged(){return{speakers:[]}}const SpeakersChanged={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.speakers)SpeakerInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSpeakersChanged();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.speakers.push(SpeakerInfo.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{speakers:Array.isArray(e==null?void 0:e.speakers)?e.speakers.map(i=>SpeakerInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.speakers?i.speakers=e.speakers.map(t=>t?SpeakerInfo.toJSON(t):void 0):i.speakers=[],i},create(e){return SpeakersChanged.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseSpeakersChanged();return t.speakers=((i=e.speakers)===null||i===void 0?void 0:i.map(n=>SpeakerInfo.fromPartial(n)))||[],t}};function createBaseRoomUpdate(){return{room:void 0}}const RoomUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.room!==void 0&&Room$1.encode(e.room,i.uint32(10).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseRoomUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.room=Room$1.decode(t,t.uint32());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{room:isSet(e.room)?Room$1.fromJSON(e.room):void 0}},toJSON(e){const i={};return e.room!==void 0&&(i.room=e.room?Room$1.toJSON(e.room):void 0),i},create(e){return RoomUpdate.fromPartial(e??{})},fromPartial(e){const i=createBaseRoomUpdate();return i.room=e.room!==void 0&&e.room!==null?Room$1.fromPartial(e.room):void 0,i}};function createBaseConnectionQualityInfo(){return{participantSid:"",quality:0,score:0}}const ConnectionQualityInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.quality!==0&&i.uint32(16).int32(e.quality),e.score!==0&&i.uint32(29).float(e.score),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseConnectionQualityInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=16)break;a.quality=t.int32();continue;case 3:if(o!=29)break;a.score=t.float();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",quality:isSet(e.quality)?connectionQualityFromJSON(e.quality):0,score:isSet(e.score)?Number(e.score):0}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.quality!==void 0&&(i.quality=connectionQualityToJSON(e.quality)),e.score!==void 0&&(i.score=e.score),i},create(e){return ConnectionQualityInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseConnectionQualityInfo();return a.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",a.quality=(t=e.quality)!==null&&t!==void 0?t:0,a.score=(n=e.score)!==null&&n!==void 0?n:0,a}};function createBaseConnectionQualityUpdate(){return{updates:[]}}const ConnectionQualityUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.updates)ConnectionQualityInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseConnectionQualityUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.updates.push(ConnectionQualityInfo.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{updates:Array.isArray(e==null?void 0:e.updates)?e.updates.map(i=>ConnectionQualityInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.updates?i.updates=e.updates.map(t=>t?ConnectionQualityInfo.toJSON(t):void 0):i.updates=[],i},create(e){return ConnectionQualityUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseConnectionQualityUpdate();return t.updates=((i=e.updates)===null||i===void 0?void 0:i.map(n=>ConnectionQualityInfo.fromPartial(n)))||[],t}};function createBaseStreamStateInfo(){return{participantSid:"",trackSid:"",state:0}}const StreamStateInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.trackSid!==""&&i.uint32(18).string(e.trackSid),e.state!==0&&i.uint32(24).int32(e.state),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseStreamStateInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=18)break;a.trackSid=t.string();continue;case 3:if(o!=24)break;a.state=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",trackSid:isSet(e.trackSid)?String(e.trackSid):"",state:isSet(e.state)?streamStateFromJSON(e.state):0}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.state!==void 0&&(i.state=streamStateToJSON(e.state)),i},create(e){return StreamStateInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseStreamStateInfo();return a.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",a.trackSid=(t=e.trackSid)!==null&&t!==void 0?t:"",a.state=(n=e.state)!==null&&n!==void 0?n:0,a}};function createBaseStreamStateUpdate(){return{streamStates:[]}}const StreamStateUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.streamStates)StreamStateInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseStreamStateUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.streamStates.push(StreamStateInfo.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{streamStates:Array.isArray(e==null?void 0:e.streamStates)?e.streamStates.map(i=>StreamStateInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.streamStates?i.streamStates=e.streamStates.map(t=>t?StreamStateInfo.toJSON(t):void 0):i.streamStates=[],i},create(e){return StreamStateUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseStreamStateUpdate();return t.streamStates=((i=e.streamStates)===null||i===void 0?void 0:i.map(n=>StreamStateInfo.fromPartial(n)))||[],t}};function createBaseSubscribedQuality(){return{quality:0,enabled:!1}}const SubscribedQuality={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.quality!==0&&i.uint32(8).int32(e.quality),e.enabled===!0&&i.uint32(16).bool(e.enabled),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscribedQuality();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.quality=t.int32();continue;case 2:if(o!=16)break;a.enabled=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{quality:isSet(e.quality)?videoQualityFromJSON(e.quality):0,enabled:isSet(e.enabled)?!!e.enabled:!1}},toJSON(e){const i={};return e.quality!==void 0&&(i.quality=videoQualityToJSON(e.quality)),e.enabled!==void 0&&(i.enabled=e.enabled),i},create(e){return SubscribedQuality.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSubscribedQuality();return n.quality=(i=e.quality)!==null&&i!==void 0?i:0,n.enabled=(t=e.enabled)!==null&&t!==void 0?t:!1,n}};function createBaseSubscribedCodec(){return{codec:"",qualities:[]}}const SubscribedCodec={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.codec!==""&&i.uint32(10).string(e.codec);for(const t of e.qualities)SubscribedQuality.encode(t,i.uint32(18).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscribedCodec();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.codec=t.string();continue;case 2:if(o!=18)break;a.qualities.push(SubscribedQuality.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{codec:isSet(e.codec)?String(e.codec):"",qualities:Array.isArray(e==null?void 0:e.qualities)?e.qualities.map(i=>SubscribedQuality.fromJSON(i)):[]}},toJSON(e){const i={};return e.codec!==void 0&&(i.codec=e.codec),e.qualities?i.qualities=e.qualities.map(t=>t?SubscribedQuality.toJSON(t):void 0):i.qualities=[],i},create(e){return SubscribedCodec.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSubscribedCodec();return n.codec=(i=e.codec)!==null&&i!==void 0?i:"",n.qualities=((t=e.qualities)===null||t===void 0?void 0:t.map(a=>SubscribedQuality.fromPartial(a)))||[],n}};function createBaseSubscribedQualityUpdate(){return{trackSid:"",subscribedQualities:[],subscribedCodecs:[]}}const SubscribedQualityUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.trackSid!==""&&i.uint32(10).string(e.trackSid);for(const t of e.subscribedQualities)SubscribedQuality.encode(t,i.uint32(18).fork()).ldelim();for(const t of e.subscribedCodecs)SubscribedCodec.encode(t,i.uint32(26).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscribedQualityUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.trackSid=t.string();continue;case 2:if(o!=18)break;a.subscribedQualities.push(SubscribedQuality.decode(t,t.uint32()));continue;case 3:if(o!=26)break;a.subscribedCodecs.push(SubscribedCodec.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):"",subscribedQualities:Array.isArray(e==null?void 0:e.subscribedQualities)?e.subscribedQualities.map(i=>SubscribedQuality.fromJSON(i)):[],subscribedCodecs:Array.isArray(e==null?void 0:e.subscribedCodecs)?e.subscribedCodecs.map(i=>SubscribedCodec.fromJSON(i)):[]}},toJSON(e){const i={};return e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.subscribedQualities?i.subscribedQualities=e.subscribedQualities.map(t=>t?SubscribedQuality.toJSON(t):void 0):i.subscribedQualities=[],e.subscribedCodecs?i.subscribedCodecs=e.subscribedCodecs.map(t=>t?SubscribedCodec.toJSON(t):void 0):i.subscribedCodecs=[],i},create(e){return SubscribedQualityUpdate.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSubscribedQualityUpdate();return a.trackSid=(i=e.trackSid)!==null&&i!==void 0?i:"",a.subscribedQualities=((t=e.subscribedQualities)===null||t===void 0?void 0:t.map(o=>SubscribedQuality.fromPartial(o)))||[],a.subscribedCodecs=((n=e.subscribedCodecs)===null||n===void 0?void 0:n.map(o=>SubscribedCodec.fromPartial(o)))||[],a}};function createBaseTrackPermission(){return{participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""}}const TrackPermission={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.allTracks===!0&&i.uint32(16).bool(e.allTracks);for(const t of e.trackSids)i.uint32(26).string(t);return e.participantIdentity!==""&&i.uint32(34).string(e.participantIdentity),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackPermission();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=16)break;a.allTracks=t.bool();continue;case 3:if(o!=26)break;a.trackSids.push(t.string());continue;case 4:if(o!=34)break;a.participantIdentity=t.string();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",allTracks:isSet(e.allTracks)?!!e.allTracks:!1,trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[],participantIdentity:isSet(e.participantIdentity)?String(e.participantIdentity):""}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.allTracks!==void 0&&(i.allTracks=e.allTracks),e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],e.participantIdentity!==void 0&&(i.participantIdentity=e.participantIdentity),i},create(e){return TrackPermission.fromPartial(e??{})},fromPartial(e){var i,t,n,a;const o=createBaseTrackPermission();return o.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",o.allTracks=(t=e.allTracks)!==null&&t!==void 0?t:!1,o.trackSids=((n=e.trackSids)===null||n===void 0?void 0:n.map(d=>d))||[],o.participantIdentity=(a=e.participantIdentity)!==null&&a!==void 0?a:"",o}};function createBaseSubscriptionPermission(){return{allParticipants:!1,trackPermissions:[]}}const SubscriptionPermission={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.allParticipants===!0&&i.uint32(8).bool(e.allParticipants);for(const t of e.trackPermissions)TrackPermission.encode(t,i.uint32(18).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscriptionPermission();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.allParticipants=t.bool();continue;case 2:if(o!=18)break;a.trackPermissions.push(TrackPermission.decode(t,t.uint32()));continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{allParticipants:isSet(e.allParticipants)?!!e.allParticipants:!1,trackPermissions:Array.isArray(e==null?void 0:e.trackPermissions)?e.trackPermissions.map(i=>TrackPermission.fromJSON(i)):[]}},toJSON(e){const i={};return e.allParticipants!==void 0&&(i.allParticipants=e.allParticipants),e.trackPermissions?i.trackPermissions=e.trackPermissions.map(t=>t?TrackPermission.toJSON(t):void 0):i.trackPermissions=[],i},create(e){return SubscriptionPermission.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSubscriptionPermission();return n.allParticipants=(i=e.allParticipants)!==null&&i!==void 0?i:!1,n.trackPermissions=((t=e.trackPermissions)===null||t===void 0?void 0:t.map(a=>TrackPermission.fromPartial(a)))||[],n}};function createBaseSubscriptionPermissionUpdate(){return{participantSid:"",trackSid:"",allowed:!1}}const SubscriptionPermissionUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.trackSid!==""&&i.uint32(18).string(e.trackSid),e.allowed===!0&&i.uint32(24).bool(e.allowed),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscriptionPermissionUpdate();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.participantSid=t.string();continue;case 2:if(o!=18)break;a.trackSid=t.string();continue;case 3:if(o!=24)break;a.allowed=t.bool();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",trackSid:isSet(e.trackSid)?String(e.trackSid):"",allowed:isSet(e.allowed)?!!e.allowed:!1}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.allowed!==void 0&&(i.allowed=e.allowed),i},create(e){return SubscriptionPermissionUpdate.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSubscriptionPermissionUpdate();return a.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",a.trackSid=(t=e.trackSid)!==null&&t!==void 0?t:"",a.allowed=(n=e.allowed)!==null&&n!==void 0?n:!1,a}};function createBaseSyncState(){return{answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[],offer:void 0}}const SyncState={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.answer!==void 0&&SessionDescription.encode(e.answer,i.uint32(10).fork()).ldelim(),e.subscription!==void 0&&UpdateSubscription.encode(e.subscription,i.uint32(18).fork()).ldelim();for(const t of e.publishTracks)TrackPublishedResponse.encode(t,i.uint32(26).fork()).ldelim();for(const t of e.dataChannels)DataChannelInfo.encode(t,i.uint32(34).fork()).ldelim();return e.offer!==void 0&&SessionDescription.encode(e.offer,i.uint32(42).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSyncState();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.answer=SessionDescription.decode(t,t.uint32());continue;case 2:if(o!=18)break;a.subscription=UpdateSubscription.decode(t,t.uint32());continue;case 3:if(o!=26)break;a.publishTracks.push(TrackPublishedResponse.decode(t,t.uint32()));continue;case 4:if(o!=34)break;a.dataChannels.push(DataChannelInfo.decode(t,t.uint32()));continue;case 5:if(o!=42)break;a.offer=SessionDescription.decode(t,t.uint32());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{answer:isSet(e.answer)?SessionDescription.fromJSON(e.answer):void 0,subscription:isSet(e.subscription)?UpdateSubscription.fromJSON(e.subscription):void 0,publishTracks:Array.isArray(e==null?void 0:e.publishTracks)?e.publishTracks.map(i=>TrackPublishedResponse.fromJSON(i)):[],dataChannels:Array.isArray(e==null?void 0:e.dataChannels)?e.dataChannels.map(i=>DataChannelInfo.fromJSON(i)):[],offer:isSet(e.offer)?SessionDescription.fromJSON(e.offer):void 0}},toJSON(e){const i={};return e.answer!==void 0&&(i.answer=e.answer?SessionDescription.toJSON(e.answer):void 0),e.subscription!==void 0&&(i.subscription=e.subscription?UpdateSubscription.toJSON(e.subscription):void 0),e.publishTracks?i.publishTracks=e.publishTracks.map(t=>t?TrackPublishedResponse.toJSON(t):void 0):i.publishTracks=[],e.dataChannels?i.dataChannels=e.dataChannels.map(t=>t?DataChannelInfo.toJSON(t):void 0):i.dataChannels=[],e.offer!==void 0&&(i.offer=e.offer?SessionDescription.toJSON(e.offer):void 0),i},create(e){return SyncState.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSyncState();return n.answer=e.answer!==void 0&&e.answer!==null?SessionDescription.fromPartial(e.answer):void 0,n.subscription=e.subscription!==void 0&&e.subscription!==null?UpdateSubscription.fromPartial(e.subscription):void 0,n.publishTracks=((i=e.publishTracks)===null||i===void 0?void 0:i.map(a=>TrackPublishedResponse.fromPartial(a)))||[],n.dataChannels=((t=e.dataChannels)===null||t===void 0?void 0:t.map(a=>DataChannelInfo.fromPartial(a)))||[],n.offer=e.offer!==void 0&&e.offer!==null?SessionDescription.fromPartial(e.offer):void 0,n}};function createBaseDataChannelInfo(){return{label:"",id:0,target:0}}const DataChannelInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.label!==""&&i.uint32(10).string(e.label),e.id!==0&&i.uint32(16).uint32(e.id),e.target!==0&&i.uint32(24).int32(e.target),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseDataChannelInfo();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=10)break;a.label=t.string();continue;case 2:if(o!=16)break;a.id=t.uint32();continue;case 3:if(o!=24)break;a.target=t.int32();continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{label:isSet(e.label)?String(e.label):"",id:isSet(e.id)?Number(e.id):0,target:isSet(e.target)?signalTargetFromJSON(e.target):0}},toJSON(e){const i={};return e.label!==void 0&&(i.label=e.label),e.id!==void 0&&(i.id=Math.round(e.id)),e.target!==void 0&&(i.target=signalTargetToJSON(e.target)),i},create(e){return DataChannelInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseDataChannelInfo();return a.label=(i=e.label)!==null&&i!==void 0?i:"",a.id=(t=e.id)!==null&&t!==void 0?t:0,a.target=(n=e.target)!==null&&n!==void 0?n:0,a}};function createBaseSimulateScenario(){return{scenario:void 0}}const SimulateScenario={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch((t=e.scenario)===null||t===void 0?void 0:t.$case){case"speakerUpdate":i.uint32(8).int32(e.scenario.speakerUpdate);break;case"nodeFailure":i.uint32(16).bool(e.scenario.nodeFailure);break;case"migration":i.uint32(24).bool(e.scenario.migration);break;case"serverLeave":i.uint32(32).bool(e.scenario.serverLeave);break;case"switchCandidateProtocol":i.uint32(40).int32(e.scenario.switchCandidateProtocol);break;case"subscriberBandwidth":i.uint32(48).int64(e.scenario.subscriberBandwidth);break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSimulateScenario();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.scenario={$case:"speakerUpdate",speakerUpdate:t.int32()};continue;case 2:if(o!=16)break;a.scenario={$case:"nodeFailure",nodeFailure:t.bool()};continue;case 3:if(o!=24)break;a.scenario={$case:"migration",migration:t.bool()};continue;case 4:if(o!=32)break;a.scenario={$case:"serverLeave",serverLeave:t.bool()};continue;case 5:if(o!=40)break;a.scenario={$case:"switchCandidateProtocol",switchCandidateProtocol:t.int32()};continue;case 6:if(o!=48)break;a.scenario={$case:"subscriberBandwidth",subscriberBandwidth:longToNumber(t.int64())};continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{scenario:isSet(e.speakerUpdate)?{$case:"speakerUpdate",speakerUpdate:Number(e.speakerUpdate)}:isSet(e.nodeFailure)?{$case:"nodeFailure",nodeFailure:!!e.nodeFailure}:isSet(e.migration)?{$case:"migration",migration:!!e.migration}:isSet(e.serverLeave)?{$case:"serverLeave",serverLeave:!!e.serverLeave}:isSet(e.switchCandidateProtocol)?{$case:"switchCandidateProtocol",switchCandidateProtocol:candidateProtocolFromJSON(e.switchCandidateProtocol)}:isSet(e.subscriberBandwidth)?{$case:"subscriberBandwidth",subscriberBandwidth:Number(e.subscriberBandwidth)}:void 0}},toJSON(e){var i,t,n,a,o,d,s,u,c,h,p,l,f;const m={};return((i=e.scenario)===null||i===void 0?void 0:i.$case)==="speakerUpdate"&&(m.speakerUpdate=Math.round((t=e.scenario)===null||t===void 0?void 0:t.speakerUpdate)),((n=e.scenario)===null||n===void 0?void 0:n.$case)==="nodeFailure"&&(m.nodeFailure=(a=e.scenario)===null||a===void 0?void 0:a.nodeFailure),((o=e.scenario)===null||o===void 0?void 0:o.$case)==="migration"&&(m.migration=(d=e.scenario)===null||d===void 0?void 0:d.migration),((s=e.scenario)===null||s===void 0?void 0:s.$case)==="serverLeave"&&(m.serverLeave=(u=e.scenario)===null||u===void 0?void 0:u.serverLeave),((c=e.scenario)===null||c===void 0?void 0:c.$case)==="switchCandidateProtocol"&&(m.switchCandidateProtocol=((h=e.scenario)===null||h===void 0?void 0:h.switchCandidateProtocol)!==void 0?candidateProtocolToJSON((p=e.scenario)===null||p===void 0?void 0:p.switchCandidateProtocol):void 0),((l=e.scenario)===null||l===void 0?void 0:l.$case)==="subscriberBandwidth"&&(m.subscriberBandwidth=Math.round((f=e.scenario)===null||f===void 0?void 0:f.subscriberBandwidth)),m},create(e){return SimulateScenario.fromPartial(e??{})},fromPartial(e){var i,t,n,a,o,d,s,u,c,h,p,l,f,m,v,E,k,C;const N=createBaseSimulateScenario();return((i=e.scenario)===null||i===void 0?void 0:i.$case)==="speakerUpdate"&&((t=e.scenario)===null||t===void 0?void 0:t.speakerUpdate)!==void 0&&((n=e.scenario)===null||n===void 0?void 0:n.speakerUpdate)!==null&&(N.scenario={$case:"speakerUpdate",speakerUpdate:e.scenario.speakerUpdate}),((a=e.scenario)===null||a===void 0?void 0:a.$case)==="nodeFailure"&&((o=e.scenario)===null||o===void 0?void 0:o.nodeFailure)!==void 0&&((d=e.scenario)===null||d===void 0?void 0:d.nodeFailure)!==null&&(N.scenario={$case:"nodeFailure",nodeFailure:e.scenario.nodeFailure}),((s=e.scenario)===null||s===void 0?void 0:s.$case)==="migration"&&((u=e.scenario)===null||u===void 0?void 0:u.migration)!==void 0&&((c=e.scenario)===null||c===void 0?void 0:c.migration)!==null&&(N.scenario={$case:"migration",migration:e.scenario.migration}),((h=e.scenario)===null||h===void 0?void 0:h.$case)==="serverLeave"&&((p=e.scenario)===null||p===void 0?void 0:p.serverLeave)!==void 0&&((l=e.scenario)===null||l===void 0?void 0:l.serverLeave)!==null&&(N.scenario={$case:"serverLeave",serverLeave:e.scenario.serverLeave}),((f=e.scenario)===null||f===void 0?void 0:f.$case)==="switchCandidateProtocol"&&((m=e.scenario)===null||m===void 0?void 0:m.switchCandidateProtocol)!==void 0&&((v=e.scenario)===null||v===void 0?void 0:v.switchCandidateProtocol)!==null&&(N.scenario={$case:"switchCandidateProtocol",switchCandidateProtocol:e.scenario.switchCandidateProtocol}),((E=e.scenario)===null||E===void 0?void 0:E.$case)==="subscriberBandwidth"&&((k=e.scenario)===null||k===void 0?void 0:k.subscriberBandwidth)!==void 0&&((C=e.scenario)===null||C===void 0?void 0:C.subscriberBandwidth)!==null&&(N.scenario={$case:"subscriberBandwidth",subscriberBandwidth:e.scenario.subscriberBandwidth}),N}};function createBasePing(){return{timestamp:0,rtt:0}}const Ping={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.timestamp!==0&&i.uint32(8).int64(e.timestamp),e.rtt!==0&&i.uint32(16).int64(e.rtt),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBasePing();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.timestamp=longToNumber(t.int64());continue;case 2:if(o!=16)break;a.rtt=longToNumber(t.int64());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{timestamp:isSet(e.timestamp)?Number(e.timestamp):0,rtt:isSet(e.rtt)?Number(e.rtt):0}},toJSON(e){const i={};return e.timestamp!==void 0&&(i.timestamp=Math.round(e.timestamp)),e.rtt!==void 0&&(i.rtt=Math.round(e.rtt)),i},create(e){return Ping.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBasePing();return n.timestamp=(i=e.timestamp)!==null&&i!==void 0?i:0,n.rtt=(t=e.rtt)!==null&&t!==void 0?t:0,n}};function createBasePong(){return{lastPingTimestamp:0,timestamp:0}}const Pong={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.lastPingTimestamp!==0&&i.uint32(8).int64(e.lastPingTimestamp),e.timestamp!==0&&i.uint32(16).int64(e.timestamp),i},decode(e,i){const t=e instanceof _m0.Reader?e:_m0.Reader.create(e);let n=i===void 0?t.len:t.pos+i;const a=createBasePong();for(;t.pos<n;){const o=t.uint32();switch(o>>>3){case 1:if(o!=8)break;a.lastPingTimestamp=longToNumber(t.int64());continue;case 2:if(o!=16)break;a.timestamp=longToNumber(t.int64());continue}if((o&7)==4||o==0)break;t.skipType(o&7)}return a},fromJSON(e){return{lastPingTimestamp:isSet(e.lastPingTimestamp)?Number(e.lastPingTimestamp):0,timestamp:isSet(e.timestamp)?Number(e.timestamp):0}},toJSON(e){const i={};return e.lastPingTimestamp!==void 0&&(i.lastPingTimestamp=Math.round(e.lastPingTimestamp)),e.timestamp!==void 0&&(i.timestamp=Math.round(e.timestamp)),i},create(e){return Pong.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBasePong();return n.lastPingTimestamp=(i=e.lastPingTimestamp)!==null&&i!==void 0?i:0,n.timestamp=(t=e.timestamp)!==null&&t!==void 0?t:0,n}};var tsProtoGlobalThis=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw"Unable to locate global object"})();function longToNumber(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new tsProtoGlobalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}_m0.util.Long!==Long$1&&(_m0.util.Long=Long$1,_m0.configure());function isSet(e){return e!=null}class LivekitError extends Error{constructor(i,t){super(t||"an error has occured"),this.code=i}}class ConnectionError extends LivekitError{constructor(i,t,n){super(1,i),this.status=n,this.reason=t}}class DeviceUnsupportedError extends LivekitError{constructor(i){super(21,i??"device is unsupported")}}class TrackInvalidError extends LivekitError{constructor(i){super(20,i??"track is invalid")}}class UnsupportedServer extends LivekitError{constructor(i){super(10,i??"unsupported server")}}class UnexpectedConnectionState extends LivekitError{constructor(i){super(12,i??"unexpected connection state")}}class NegotiationError extends LivekitError{constructor(i){super(13,i??"unable to negotiate")}}var MediaDeviceFailure;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(MediaDeviceFailure||(MediaDeviceFailure={}));(function(e){function i(t){if(t&&"name"in t)return t.name==="NotFoundError"||t.name==="DevicesNotFoundError"?e.NotFound:t.name==="NotAllowedError"||t.name==="PermissionDeniedError"?e.PermissionDenied:t.name==="NotReadableError"||t.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=i})(MediaDeviceFailure||(MediaDeviceFailure={}));class CriticalTimers{}CriticalTimers.setTimeout=function(){return setTimeout(...arguments)};CriticalTimers.setInterval=function(){return setInterval(...arguments)};CriticalTimers.clearTimeout=function(){return clearTimeout(...arguments)};CriticalTimers.clearInterval=function(){return clearInterval(...arguments)};const commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i;let browserDetails;function getBrowser(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e===void 0&&(typeof document<"u"||typeof navigator>"u"))return;const t=(e??navigator.userAgent).toLowerCase();if(browserDetails===void 0||i){const n=browsersList.find(a=>{let{test:o}=a;return o.test(t)});browserDetails=n==null?void 0:n.describe(t)}return browserDetails}const browsersList=[{test:/firefox|iceweasel|fxios/i,describe(e){return{name:"Firefox",version:getMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e)}}},{test:/chrom|crios|crmo/i,describe(e){return{name:"Chrome",version:getMatch(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e)}}},{test:/safari|applewebkit/i,describe(e){return{name:"Safari",version:getMatch(commonVersionIdentifier,e)}}}];function getMatch(e,i){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const n=i.match(e);return n&&n.length>=t&&n[t]||""}var version$1="1.9.6";const version=version$1,protocolVersion=9;function mergeDefaultOptions(e,i,t){const n=Object.assign({},e);return n.audio===!0&&(n.audio={}),n.video===!0&&(n.video={}),n.audio&&mergeObjectWithoutOverwriting(n.audio,i),n.video&&mergeObjectWithoutOverwriting(n.video,t),n}function mergeObjectWithoutOverwriting(e,i){return Object.keys(i).forEach(t=>{e[t]===void 0&&(e[t]=i[t])}),e}function constraintsForOptions(e){const i={};if(e.video)if(typeof e.video=="object"){const t={},n=t,a=e.video;Object.keys(a).forEach(o=>{switch(o){case"resolution":mergeObjectWithoutOverwriting(n,a.resolution);break;default:n[o]=a[o]}}),i.video=t}else i.video=e.video;else i.video=!1;return e.audio?typeof e.audio=="object"?i.audio=e.audio:i.audio=!0:i.audio=!1,i}function detectSilence(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return __awaiter(this,void 0,void 0,function*(){const t=getNewAudioContext();if(t){const n=t.createAnalyser();n.fftSize=2048;const a=n.frequencyBinCount,o=new Uint8Array(a);t.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(n),yield sleep(i),n.getByteTimeDomainData(o);const s=o.some(u=>u!==128&&u!==0);return t.close(),!s}return!1})}function getNewAudioContext(){const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e)return new e({latencyHint:"interactive"})}const separator="|",ddExtensionURI="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function unpackStreamId(e){const i=e.split(separator);return i.length>1?[i[0],e.substr(i[0].length+1)]:[e,""]}function sleep(e){return __awaiter(this,void 0,void 0,function*(){return new Promise(i=>setTimeout(i,e))})}function supportsTransceiver(){return"addTransceiver"in RTCPeerConnection.prototype}function supportsAddTrack(){return"addTrack"in RTCPeerConnection.prototype}function supportsAV1(){if(!("getCapabilities"in RTCRtpSender))return!1;const e=RTCRtpSender.getCapabilities("video");let i=!1;if(e){for(const t of e.codecs)if(t.mimeType==="video/AV1"){i=!0;break}}return i}function supportsVP9(){if(!("getCapabilities"in RTCRtpSender))return!1;const e=RTCRtpSender.getCapabilities("video");let i=!1;if(e){for(const t of e.codecs)if(t.mimeType==="video/VP9"){i=!0;break}}return i}function isSVCCodec(e){return e==="av1"||e==="vp9"}function supportsSetSinkId(e){return document?(e||(e=document.createElement("audio")),"setSinkId"in e):!1}const setCodecPreferencesVersions={Chrome:"100",Safari:"15",Firefox:"100"};function supportsSetCodecPreferences(e){if(!isWeb()||!("setCodecPreferences"in e))return!1;const i=getBrowser();if(!(i!=null&&i.name)||!i.version)return!1;const t=setCodecPreferencesVersions[i.name];return t?compareVersions(i.version,t)>=0:!1}function isFireFox(){var e;return((e=getBrowser())===null||e===void 0?void 0:e.name)==="Firefox"}function isChromiumBased(){var e;return((e=getBrowser())===null||e===void 0?void 0:e.name)==="Chrome"}function isSafari(){var e;return((e=getBrowser())===null||e===void 0?void 0:e.name)==="Safari"}function isMobile(){return isWeb()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function isWeb(){return typeof document<"u"}function isReactNative(){return navigator.product=="ReactNative"}function isCloud(e){return e.hostname.endsWith(".livekit.cloud")}function getLKReactNativeInfo(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function getReactNativeOs(){if(!isReactNative())return;let e=getLKReactNativeInfo();if(e)return e.platform}function getDevicePixelRatio(){if(isWeb())return window.devicePixelRatio;if(isReactNative()){let e=getLKReactNativeInfo();if(e)return e.devicePixelRatio}return 1}function compareVersions(e,i){const t=e.split("."),n=i.split("."),a=Math.min(t.length,n.length);for(let o=0;o<a;++o){const d=parseInt(t[o],10),s=parseInt(n[o],10);if(d>s)return 1;if(d<s)return-1;if(o===a-1&&d===s)return 0}return e===""&&i!==""?-1:i===""?1:t.length==n.length?0:t.length<n.length?-1:1}function roDispatchCallback(e){for(const i of e)i.target.handleResize(i)}function ioDispatchCallback(e){for(const i of e)i.target.handleVisibilityChanged(i)}let resizeObserver=null;const getResizeObserver=()=>(resizeObserver||(resizeObserver=new ResizeObserver(roDispatchCallback)),resizeObserver);let intersectionObserver=null;const getIntersectionObserver=()=>(intersectionObserver||(intersectionObserver=new IntersectionObserver(ioDispatchCallback,{root:null,rootMargin:"0px"})),intersectionObserver);function getClientInfo(){var e;const i=ClientInfo.fromPartial({sdk:ClientInfo_SDK.JS,protocol:protocolVersion,version});return isReactNative()&&(i.os=(e=getReactNativeOs())!==null&&e!==void 0?e:""),i}let emptyVideoStreamTrack;function getEmptyVideoStreamTrack(){return emptyVideoStreamTrack||(emptyVideoStreamTrack=createDummyVideoStreamTrack()),emptyVideoStreamTrack}function createDummyVideoStreamTrack(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const a=document.createElement("canvas");a.width=e,a.height=i;const o=a.getContext("2d");o==null||o.fillRect(0,0,a.width,a.height),n&&o&&(o.beginPath(),o.arc(e/2,i/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const d=a.captureStream(),[s]=d.getTracks();if(!s)throw Error("Could not get empty media stream video track");return s.enabled=t,s}let emptyAudioStreamTrack;function getEmptyAudioStreamTrack(){if(!emptyAudioStreamTrack){const e=new AudioContext,i=e.createOscillator(),t=e.createMediaStreamDestination();if(i.connect(t),i.start(),[emptyAudioStreamTrack]=t.stream.getAudioTracks(),!emptyAudioStreamTrack)throw Error("Could not get empty media stream audio track");emptyAudioStreamTrack.enabled=!1}return emptyAudioStreamTrack}class Future{constructor(i,t){this.onFinally=t,this.promise=new Promise((n,a)=>__awaiter(this,void 0,void 0,function*(){this.resolve=n,this.reject=a,i&&(yield i(n,a))})).finally(()=>{var n;return(n=this.onFinally)===null||n===void 0?void 0:n.call(this)})}}class Mutex{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let i;const t=new Promise(a=>i=()=>{this._locks-=1,a()}),n=this._locking.then(()=>i);return this._locking=this._locking.then(()=>t),n}}var QueueTaskStatus;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"})(QueueTaskStatus||(QueueTaskStatus={}));class AsyncQueue{constructor(){this.pendingTasks=new Map,this.taskMutex=new Mutex,this.nextTaskIndex=0}run(i){return __awaiter(this,void 0,void 0,function*(){const t={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:QueueTaskStatus.WAITING};this.pendingTasks.set(t.id,t);const n=yield this.taskMutex.lock();try{return t.executedAt=Date.now(),t.status=QueueTaskStatus.RUNNING,yield i()}finally{t.status=QueueTaskStatus.COMPLETED,this.pendingTasks.delete(t.id),n()}})}flush(){return __awaiter(this,void 0,void 0,function*(){return this.run(()=>__awaiter(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const passThroughQueueSignals=["syncState","trickle","offer","answer","simulate","leave"];function canPassThroughQueue(e){const i=passThroughQueueSignals.indexOf(e.$case)>=0;return livekitLogger.trace("request allowed to bypass queue:",{canPass:i,req:e}),i}class SignalClient{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.rtt=0,this.isConnected=!1,this.isReconnecting=!1,this.useJSON=i,this.requestQueue=new AsyncQueue,this.queuedRequests=[],this.closingLock=new Mutex}join(i,t,n,a){return __awaiter(this,void 0,void 0,function*(){return this.isConnected=!1,this.options=n,yield this.connect(i,t,n,a)})}reconnect(i,t,n,a){return __awaiter(this,void 0,void 0,function*(){if(!this.options){livekitLogger.warn("attempted to reconnect without signal options being set, ignoring");return}return this.isReconnecting=!0,this.clearPingInterval(),yield this.connect(i,t,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:n,reconnectReason:a}))})}connect(i,t,n,a){this.connectOptions=n,i.startsWith("http")&&(i=i.replace("http","ws")),i=i.replace(/\/$/,""),i+="/rtc";const o=getClientInfo(),d=createConnectionParams(t,o,n);return new Promise((s,u)=>__awaiter(this,void 0,void 0,function*(){const c=()=>__awaiter(this,void 0,void 0,function*(){yield this.close(),u(new ConnectionError("room connection has been cancelled (signal)"))});a!=null&&a.aborted&&c(),a==null||a.addEventListener("abort",c),livekitLogger.debug("connecting to ".concat(i+d)),this.ws&&(yield this.close()),this.ws=new WebSocket(i+d),this.ws.binaryType="arraybuffer",this.ws.onerror=h=>__awaiter(this,void 0,void 0,function*(){if(!this.isConnected){try{const p=yield fetch("http".concat(i.substring(2),"/validate").concat(d));if(p.status.toFixed(0).startsWith("4")){const l=yield p.text();u(new ConnectionError(l,0,p.status))}else u(new ConnectionError("Internal error",2,p.status))}catch{u(new ConnectionError("server was not reachable",1))}return}this.handleWSError(h)}),this.ws.onmessage=h=>__awaiter(this,void 0,void 0,function*(){var p,l,f,m;let v;if(typeof h.data=="string"){const E=JSON.parse(h.data);v=SignalResponse.fromJSON(E)}else if(h.data instanceof ArrayBuffer)v=SignalResponse.decode(new Uint8Array(h.data));else{livekitLogger.error("could not decode websocket message: ".concat(typeof h.data));return}if(!this.isConnected){let E=!1;if(((p=v.message)===null||p===void 0?void 0:p.$case)==="join"?(this.isConnected=!0,a==null||a.removeEventListener("abort",c),this.pingTimeoutDuration=v.message.join.pingTimeout,this.pingIntervalDuration=v.message.join.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(livekitLogger.debug("ping config",{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration}),this.startPingInterval()),s(v.message.join)):n.reconnect?(this.isConnected=!0,a==null||a.removeEventListener("abort",c),this.startPingInterval(),((l=v.message)===null||l===void 0?void 0:l.$case)==="reconnect"?s((f=v.message)===null||f===void 0?void 0:f.reconnect):(s(),E=!0)):n.reconnect||u(new ConnectionError("did not receive join response, got ".concat((m=v.message)===null||m===void 0?void 0:m.$case," instead"))),!E)return}this.signalLatency&&(yield sleep(this.signalLatency)),this.handleSignalResponse(v)}),this.ws.onclose=h=>{livekitLogger.warn("websocket closed",{ev:h}),this.handleOnClose(h.reason)}}))}close(){return __awaiter(this,void 0,void 0,function*(){const i=yield this.closingLock.lock();try{if(this.isConnected=!1,this.ws){this.ws.onclose=null,this.ws.onmessage=null,this.ws.onopen=null;const t=new Promise(n=>{this.ws?this.ws.onclose=n:n(!0)});this.ws.readyState<this.ws.CLOSING&&(this.ws.close(),yield Promise.race([t,sleep(250)])),this.ws=void 0,this.clearPingInterval()}}finally{i()}})}sendOffer(i){livekitLogger.debug("sending offer",i),this.sendRequest({$case:"offer",offer:toProtoSessionDescription(i)})}sendAnswer(i){return livekitLogger.debug("sending answer"),this.sendRequest({$case:"answer",answer:toProtoSessionDescription(i)})}sendIceCandidate(i,t){return livekitLogger.trace("sending ice candidate",i),this.sendRequest({$case:"trickle",trickle:{candidateInit:JSON.stringify(i),target:t}})}sendMuteTrack(i,t){return this.sendRequest({$case:"mute",mute:{sid:i,muted:t}})}sendAddTrack(i){return this.sendRequest({$case:"addTrack",addTrack:AddTrackRequest.fromPartial(i)})}sendUpdateLocalMetadata(i,t){return this.sendRequest({$case:"updateMetadata",updateMetadata:{metadata:i,name:t}})}sendUpdateTrackSettings(i){this.sendRequest({$case:"trackSetting",trackSetting:i})}sendUpdateSubscription(i){return this.sendRequest({$case:"subscription",subscription:i})}sendSyncState(i){return this.sendRequest({$case:"syncState",syncState:i})}sendUpdateVideoLayers(i,t){return this.sendRequest({$case:"updateLayers",updateLayers:{trackSid:i,layers:t}})}sendUpdateSubscriptionPermissions(i,t){return this.sendRequest({$case:"subscriptionPermission",subscriptionPermission:{allParticipants:i,trackPermissions:t}})}sendSimulateScenario(i){return this.sendRequest({$case:"simulate",simulate:i})}sendPing(){return Promise.all([this.sendRequest({$case:"ping",ping:Date.now()}),this.sendRequest({$case:"pingReq",pingReq:{timestamp:Date.now(),rtt:this.rtt}})])}sendLeave(){return this.sendRequest({$case:"leave",leave:{canReconnect:!1,reason:DisconnectReason.CLIENT_INITIATED}})}sendRequest(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return __awaiter(this,void 0,void 0,function*(){if(!t&&!canPassThroughQueue(i)&&this.isReconnecting){this.queuedRequests.push(()=>__awaiter(this,void 0,void 0,function*(){yield this.sendRequest(i,!0)}));return}if(t||(yield this.requestQueue.flush()),this.signalLatency&&(yield sleep(this.signalLatency)),!this.ws||this.ws.readyState!==this.ws.OPEN){livekitLogger.error("cannot send signal request before connected, type: ".concat(i==null?void 0:i.$case));return}const a={message:i};try{this.useJSON?this.ws.send(JSON.stringify(SignalRequest.toJSON(a))):this.ws.send(SignalRequest.encode(a).finish())}catch(o){livekitLogger.error("error sending signal message",{error:o})}})}handleSignalResponse(i){var t,n;const a=i.message;if(a==null){livekitLogger.debug("received unsupported message");return}if(a.$case==="answer"){const o=fromProtoSessionDescription(a.answer);this.onAnswer&&this.onAnswer(o)}else if(a.$case==="offer"){const o=fromProtoSessionDescription(a.offer);this.onOffer&&this.onOffer(o)}else if(a.$case==="trickle"){const o=JSON.parse(a.trickle.candidateInit);this.onTrickle&&this.onTrickle(o,a.trickle.target)}else a.$case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((t=a.update.participants)!==null&&t!==void 0?t:[]):a.$case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(a.trackPublished):a.$case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((n=a.speakersChanged.speakers)!==null&&n!==void 0?n:[]):a.$case==="leave"?this.onLeave&&this.onLeave(a.leave):a.$case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(a.mute.sid,a.mute.muted):a.$case==="roomUpdate"?this.onRoomUpdate&&a.roomUpdate.room&&this.onRoomUpdate(a.roomUpdate.room):a.$case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(a.connectionQuality):a.$case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(a.streamStateUpdate):a.$case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(a.subscribedQualityUpdate):a.$case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(a.subscriptionPermissionUpdate):a.$case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(a.refreshToken):a.$case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(a.trackUnpublished):a.$case==="pong"?this.resetPingTimeout():a.$case==="pongResp"?(this.rtt=Date.now()-a.pongResp.lastPingTimestamp,this.resetPingTimeout()):livekitLogger.debug("unsupported message",a)}setReconnected(){for(;this.queuedRequests.length>0;){const i=this.queuedRequests.shift();i&&this.requestQueue.run(i)}this.isReconnecting=!1}handleOnClose(i){return __awaiter(this,void 0,void 0,function*(){this.isConnected&&(yield this.close(),livekitLogger.debug("websocket connection closed: ".concat(i)),this.onClose&&this.onClose(i))})}handleWSError(i){livekitLogger.error("websocket error",i)}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){livekitLogger.warn("ping timeout duration not set");return}this.pingTimeout=CriticalTimers.setTimeout(()=>{livekitLogger.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString())),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&CriticalTimers.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){livekitLogger.warn("ping interval duration not set");return}livekitLogger.debug("start ping interval"),this.pingInterval=CriticalTimers.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){livekitLogger.debug("clearing ping interval"),this.clearPingTimeout(),this.pingInterval&&CriticalTimers.clearInterval(this.pingInterval)}}function fromProtoSessionDescription(e){const i={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":i.type=e.type;break}return i}function toProtoSessionDescription(e){return{sdp:e.sdp,type:e.type}}function createConnectionParams(e,i,t){var n;const a=new URLSearchParams;return a.set("access_token",e),t.reconnect&&(a.set("reconnect","1"),t.sid&&a.set("sid",t.sid)),a.set("auto_subscribe",t.autoSubscribe?"1":"0"),a.set("sdk",isReactNative()?"reactnative":"js"),a.set("version",i.version),a.set("protocol",i.protocol.toString()),i.deviceModel&&a.set("device_model",i.deviceModel),i.os&&a.set("os",i.os),i.osVersion&&a.set("os_version",i.osVersion),i.browser&&a.set("browser",i.browser),i.browserVersion&&a.set("browser_version",i.browserVersion),t.publishOnly!==void 0&&a.set("publish",t.publishOnly),t.adaptiveStream&&a.set("adaptive_stream","1"),t.reconnectReason&&a.set("reconnect_reason",t.reconnectReason.toString()),!((n=navigator.connection)===null||n===void 0)&&n.type&&a.set("network",navigator.connection.type),"?".concat(a.toString())}const defaultId="default";class DeviceManager{static getInstance(){return this.instance===void 0&&(this.instance=new DeviceManager),this.instance}getDevices(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var n;return __awaiter(this,void 0,void 0,function*(){if(((n=DeviceManager.userMediaPromiseMap)===null||n===void 0?void 0:n.size)>0){livekitLogger.debug("awaiting getUserMedia promise");try{i?yield DeviceManager.userMediaPromiseMap.get(i):yield Promise.all(DeviceManager.userMediaPromiseMap.values())}catch{livekitLogger.warn("error waiting for media permissons")}}let a=yield navigator.mediaDevices.enumerateDevices();if(t&&i&&(!DeviceManager.userMediaPromiseMap.get(i)||!isSafari())&&(a.length===0||a.some(d=>{const s=d.label==="",u=i?d.kind===i:!0;return s&&u}))){const d={video:i!=="audioinput"&&i!=="audiooutput",audio:i!=="videoinput"},s=yield navigator.mediaDevices.getUserMedia(d);a=yield navigator.mediaDevices.enumerateDevices(),s.getTracks().forEach(u=>{u.stop()})}return i&&(a=a.filter(o=>o.kind===i)),a})}normalizeDeviceId(i,t,n){return __awaiter(this,void 0,void 0,function*(){if(t!==defaultId)return t;const o=(yield this.getDevices(i)).find(d=>d.groupId===n&&d.deviceId!==defaultId);return o==null?void 0:o.deviceId})}}DeviceManager.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];DeviceManager.userMediaPromiseMap=new Map;var parser$1={},grammar$2={exports:{}},grammar$1=grammar$2.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var i="candidate:%s %d %s %d %s %d typ %s";return i+=e.raddr!=null?" raddr %s rport %d":"%v%v",i+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(i+=" generation %d"),i+=e["network-id"]!=null?" network-id %d":"%v",i+=e["network-cost"]!=null?" network-cost %d":"%v",i}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var i="ssrc:%d";return e.attribute!=null&&(i+=" %s",e.value!=null&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var i="mediaclk:";return i+=e.id!=null?"id=%s %s":"%v%s",i+=e.mediaClockValue!=null?"=%s":"",i+=e.rateNumerator!=null?" rate=%s":"",i+=e.rateDenominator!=null?"/%s":"",i}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(grammar$1).forEach(function(e){var i=grammar$1[e];i.forEach(function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")})});var grammarExports=grammar$2.exports;(function(e){var i=function(s){return String(Number(s))===s?Number(s):s},t=function(s,u,c,h){if(h&&!c)u[h]=i(s[1]);else for(var p=0;p<c.length;p+=1)s[p+1]!=null&&(u[c[p]]=i(s[p+1]))},n=function(s,u,c){var h=s.name&&s.names;s.push&&!u[s.push]?u[s.push]=[]:h&&!u[s.name]&&(u[s.name]={});var p=s.push?{}:h?u[s.name]:u;t(c.match(s.reg),p,s.names,s.name),s.push&&u[s.push].push(p)},a=grammarExports,o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(s){var u={},c=[],h=u;return s.split(/(\r\n|\r|\n)/).filter(o).forEach(function(p){var l=p[0],f=p.slice(2);l==="m"&&(c.push({rtp:[],fmtp:[]}),h=c[c.length-1]);for(var m=0;m<(a[l]||[]).length;m+=1){var v=a[l][m];if(v.reg.test(f))return n(v,h,f)}}),u.media=c,u};var d=function(s,u){var c=u.split(/=(.+)/,2);return c.length===2?s[c[0]]=i(c[1]):c.length===1&&u.length>1&&(s[c[0]]=void 0),s};e.parseParams=function(s){return s.split(/;\s?/).reduce(d,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(s){return s.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(s){for(var u=[],c=s.split(" ").map(i),h=0;h<c.length;h+=3)u.push({component:c[h],ip:c[h+1],port:c[h+2]});return u},e.parseImageAttributes=function(s){return s.split(" ").map(function(u){return u.substring(1,u.length-1).split(",").reduce(d,{})})},e.parseSimulcastStreamList=function(s){return s.split(";").map(function(u){return u.split(",").map(function(c){var h,p=!1;return c[0]!=="~"?h=i(c):(h=i(c.substring(1,c.length)),p=!0),{scid:h,paused:p}})})}})(parser$1);var grammar=grammarExports,formatRegExp=/%[sdv%]/g,format=function(e){var i=1,t=arguments,n=t.length;return e.replace(formatRegExp,function(a){if(i>=n)return a;var o=t[i];switch(i+=1,a){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}})},makeLine=function(e,i,t){var n=i.format instanceof Function?i.format(i.push?t:t[i.name]):i.format,a=[e+"="+n];if(i.names)for(var o=0;o<i.names.length;o+=1){var d=i.names[o];i.name?a.push(t[i.name][d]):a.push(t[i.names[o]])}else a.push(t[i.name]);return format.apply(null,a)},defaultOuterOrder=["v","o","s","i","u","e","p","c","b","t","r","z","a"],defaultInnerOrder=["i","c","b","a"],writer$1=function(e,i){i=i||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(o){o.payloads==null&&(o.payloads="")});var t=i.outerOrder||defaultOuterOrder,n=i.innerOrder||defaultInnerOrder,a=[];return t.forEach(function(o){grammar[o].forEach(function(d){d.name in e&&e[d.name]!=null?a.push(makeLine(o,d,e)):d.push in e&&e[d.push]!=null&&e[d.push].forEach(function(s){a.push(makeLine(o,d,s))})})}),e.media.forEach(function(o){a.push(makeLine("m",grammar.m[0],o)),n.forEach(function(d){grammar[d].forEach(function(s){s.name in o&&o[s.name]!=null?a.push(makeLine(d,s,o)):s.push in o&&o[s.push]!=null&&o[s.push].forEach(function(u){a.push(makeLine(d,s,u))})})})}),a.join(`\r
`)+`\r
`},parser=parser$1,writer=writer$1,write=writer,parse=parser.parse;function r(e,i,t){var n,a,o;i===void 0&&(i=50),t===void 0&&(t={});var d=(n=t.isImmediate)!=null&&n,s=(a=t.callback)!=null&&a,u=t.maxWait,c=Date.now(),h=[];function p(){if(u!==void 0){var f=Date.now()-c;if(f+i>=u)return u-f}return i}var l=function(){var f=[].slice.call(arguments),m=this;return new Promise(function(v,E){var k=d&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,c=Date.now(),!d){var N=e.apply(m,f);s&&s(N),h.forEach(function(P){return(0,P.resolve)(N)}),h=[]}},p()),k){var C=e.apply(m,f);return s&&s(C),v(C)}h.push({resolve:v,reject:E})})};return l.cancel=function(f){o!==void 0&&clearTimeout(o),h.forEach(function(m){return(0,m.reject)(f)}),h=[]},l}const PCEvents={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete"};class PCTransport extends eventsExports.EventEmitter{constructor(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=r(n=>{this.emit(PCEvents.NegotiationStarted);try{this.createAndSendOffer()}catch(a){if(n)n(a);else throw a}},100),this.pc=isChromiumBased()?new RTCPeerConnection(i,t):new RTCPeerConnection(i)}get isICEConnected(){return this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed"}addIceCandidate(i){return __awaiter(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(i);this.pendingCandidates.push(i)})}setRemoteDescription(i){return __awaiter(this,void 0,void 0,function*(){if(i.type==="offer"){let{stereoMids:t,nackMids:n}=extractStereoAndNackAudioFromOffer(i);this.remoteStereoMids=t,this.remoteNackMids=n}yield this.pc.setRemoteDescription(i),this.pendingCandidates.forEach(t=>{this.pc.addIceCandidate(t)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,this.createAndSendOffer()):i.type==="answer"&&this.emit(PCEvents.NegotiationComplete)})}createAndSendOffer(i){var t;return __awaiter(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(i!=null&&i.iceRestart&&(livekitLogger.debug("restarting ICE"),this.restartingIce=!0),this.pc.signalingState==="have-local-offer"){const o=this.pc.remoteDescription;if(i!=null&&i.iceRestart&&o)yield this.pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(this.pc.signalingState==="closed"){livekitLogger.warn("could not createOffer with closed peer connection");return}livekitLogger.debug("starting to negotiate");const n=yield this.pc.createOffer(i),a=parse((t=n.sdp)!==null&&t!==void 0?t:"");a.media.forEach(o=>{o.type==="audio"?ensureAudioNackAndStereo(o,[],[]):o.type==="video"&&(ensureVideoDDExtensionForSVC(o),this.trackBitrates.some(d=>{if(!o.msid||!o.msid.includes(d.sid))return!1;let s=0;return o.rtp.some(u=>u.codec.toUpperCase()===d.codec.toUpperCase()?(s=u.payload,!0):!1),s>0&&(o.fmtp.some(u=>u.payload===s?(u.config.includes("x-google-start-bitrate")||(u.config+=";x-google-start-bitrate=".concat(d.maxbr*.7)),u.config.includes("x-google-max-bitrate")||(u.config+=";x-google-max-bitrate=".concat(d.maxbr)),!0):!1)||o.fmtp.push({payload:s,config:"x-google-start-bitrate=".concat(d.maxbr*.7,";x-google-max-bitrate=").concat(d.maxbr)})),!0}))}),this.trackBitrates=[],yield this.setMungedLocalDescription(n,write(a)),this.onOffer(n)})}createAndSetAnswer(){var i;return __awaiter(this,void 0,void 0,function*(){const t=yield this.pc.createAnswer(),n=parse((i=t.sdp)!==null&&i!==void 0?i:"");return n.media.forEach(a=>{a.type==="audio"&&ensureAudioNackAndStereo(a,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedLocalDescription(t,write(n)),t})}setTrackCodecBitrate(i,t,n){this.trackBitrates.push({sid:i,codec:t,maxbr:n})}close(){this.pc.onconnectionstatechange=null,this.pc.oniceconnectionstatechange=null,this.pc.close()}setMungedLocalDescription(i,t){return __awaiter(this,void 0,void 0,function*(){const n=i.sdp;i.sdp=t;try{livekitLogger.debug("setting munged local description"),yield this.pc.setLocalDescription(i);return}catch(a){livekitLogger.warn("not able to set ".concat(i.type,", falling back to unmodified sdp"),{error:a}),i.sdp=n}try{yield this.pc.setLocalDescription(i)}catch(a){let o="unknown error";throw a instanceof Error?o=a.message:typeof a=="string"&&(o=a),new NegotiationError(o)}})}}function ensureAudioNackAndStereo(e,i,t){let n=0;e.rtp.some(a=>a.codec==="opus"?(n=a.payload,!0):!1),n>0&&(e.rtcpFb||(e.rtcpFb=[]),t.includes(e.mid)&&!e.rtcpFb.some(a=>a.payload===n&&a.type==="nack")&&e.rtcpFb.push({payload:n,type:"nack"}),i.includes(e.mid)&&e.fmtp.some(a=>a.payload===n?(a.config.includes("stereo=1")||(a.config+=";stereo=1"),!0):!1))}function ensureVideoDDExtensionForSVC(e){var i,t,n,a;const o=(t=(i=e.rtp[0])===null||i===void 0?void 0:i.codec)===null||t===void 0?void 0:t.toLowerCase();if(!isSVCCodec(o))return;let d=0;((n=e.ext)===null||n===void 0?void 0:n.some(u=>u.uri===ddExtensionURI?!0:(u.value>d&&(d=u.value),!1)))||(a=e.ext)===null||a===void 0||a.push({value:d+1,uri:ddExtensionURI})}function extractStereoAndNackAudioFromOffer(e){var i;const t=[],n=[],a=parse((i=e.sdp)!==null&&i!==void 0?i:"");let o=0;return a.media.forEach(d=>{var s;d.type==="audio"&&(d.rtp.some(u=>u.codec==="opus"?(o=u.payload,!0):!1),!((s=d.rtcpFb)===null||s===void 0)&&s.some(u=>u.payload===o&&u.type==="nack")&&n.push(d.mid),d.fmtp.some(u=>u.payload===o?(u.config.includes("sprop-stereo=1")&&t.push(d.mid),!0):!1))}),{stereoMids:t,nackMids:n}}class RegionUrlProvider{constructor(i,t){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(i),this.token=t}isCloud(){return isCloud(this.serverUrl)}getNextBestRegionUrl(i){return __awaiter(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(i));const t=this.regionSettings.regions.filter(n=>!this.attemptedRegions.find(a=>a.url===n.url));if(t.length>0){const n=t[0];return this.attemptedRegions.push(n),livekitLogger.debug("next region: ".concat(n.region)),n.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(i){return __awaiter(this,void 0,void 0,function*(){const t=yield fetch("".concat(getCloudConfigUrl(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:i});if(t.ok){const n=yield t.json();return this.lastUpdateAt=Date.now(),n}else throw new ConnectionError("Could not fetch region settings: ".concat(t.statusText),t.status===401?0:void 0,t.status)})}}function getCloudConfigUrl(e){return"".concat(e.protocol.replace("ws","http"),"//").concat(e.host,"/settings")}class VideoPreset{constructor(i,t,n,a,o){this.width=i,this.height=t,this.encoding={maxBitrate:n,maxFramerate:a,priority:o}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const backupCodecs=["vp8","h264"];function isBackupCodec(e){return!!backupCodecs.find(i=>i===e)}function isCodecEqual(e,i){return(e==null?void 0:e.toLowerCase().replace(/audio\/|video\//y,""))===(i==null?void 0:i.toLowerCase().replace(/audio\/|video\//y,""))}var AudioPresets;(function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:2e4},e.music={maxBitrate:32e3},e.musicStereo={maxBitrate:48e3},e.musicHighQuality={maxBitrate:64e3},e.musicHighQualityStereo={maxBitrate:96e3}})(AudioPresets||(AudioPresets={}));const VideoPresets={h90:new VideoPreset(160,90,6e4,15),h180:new VideoPreset(320,180,12e4,15),h216:new VideoPreset(384,216,18e4,15),h360:new VideoPreset(640,360,3e5,20),h540:new VideoPreset(960,540,6e5,25),h720:new VideoPreset(1280,720,17e5,30),h1080:new VideoPreset(1920,1080,3e6,30),h1440:new VideoPreset(2560,1440,5e6,30),h2160:new VideoPreset(3840,2160,8e6,30)},VideoPresets43={h120:new VideoPreset(160,120,8e4,15),h180:new VideoPreset(240,180,1e5,15),h240:new VideoPreset(320,240,15e4,15),h360:new VideoPreset(480,360,225e3,20),h480:new VideoPreset(640,480,3e5,20),h540:new VideoPreset(720,540,45e4,25),h720:new VideoPreset(960,720,15e5,30),h1080:new VideoPreset(1440,1080,25e5,30),h1440:new VideoPreset(1920,1440,35e5,30)},ScreenSharePresets={h360fps3:new VideoPreset(640,360,2e5,3,"medium"),h720fps5:new VideoPreset(1280,720,4e5,5,"medium"),h720fps15:new VideoPreset(1280,720,1e6,15,"medium"),h1080fps15:new VideoPreset(1920,1080,15e5,15,"medium"),h1080fps30:new VideoPreset(1920,1080,3e6,30,"medium")},publishDefaults={audioBitrate:AudioPresets.music.maxBitrate,audioPreset:AudioPresets.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:ScreenSharePresets.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:"vp8",backupCodec:{codec:"vp8",encoding:VideoPresets.h540.encoding}},audioDefaults={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},videoDefaults={resolution:VideoPresets.h720.resolution},roomOptionDefaults={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new DefaultReconnectPolicy,disconnectOnPageLeave:!0,expWebAudioMix:!1},roomConnectOptionDefaults={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3};var RoomEvent;(function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.StateChanged="connectionStateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.DCBufferStatusChanged="dcBufferStatusChanged"})(RoomEvent||(RoomEvent={}));var ParticipantEvent;(function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged"})(ParticipantEvent||(ParticipantEvent={}));var EngineEvent;(function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.DCBufferStatusChanged="dcBufferStatusChanged"})(EngineEvent||(EngineEvent={}));var TrackEvent;(function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged"})(TrackEvent||(TrackEvent={}));const BACKGROUND_REACTION_DELAY=5e3,recycledElements=[];class Track extends eventsExports.EventEmitter{constructor(i,t){super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Track.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),BACKGROUND_REACTION_DELAY):this.handleAppVisibilityChanged()},this.setMaxListeners(100),this.kind=t,this._mediaStreamTrack=i,this._mediaStreamID=i.id,this.source=Track.Source.Unknown}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(i){let t="audio";this.kind===Track.Kind.Video&&(t="video"),this.attachedElements.length===0&&Track.Kind.Video&&this.addAppVisibilityListener(),i||(t==="audio"&&(recycledElements.forEach(a=>{a.parentElement===null&&!i&&(i=a)}),i&&recycledElements.splice(recycledElements.indexOf(i),1)),i||(i=document.createElement(t))),this.attachedElements.includes(i)||this.attachedElements.push(i),attachToElement(this._mediaStreamTrack,i);const n=i.srcObject.getTracks();return n.some(a=>a.kind==="audio")&&i.play().then(()=>{this.emit(TrackEvent.AudioPlaybackStarted)}).catch(a=>{a.name==="NotAllowedError"?this.emit(TrackEvent.AudioPlaybackFailed,a):livekitLogger.warn("could not playback audio",a),i&&n.some(o=>o.kind==="video")&&a.name==="NotAllowedError"&&(i.muted=!0,i.play().catch(()=>{}))}),this.emit(TrackEvent.ElementAttached,i),i}detach(i){try{if(i){detachTrack(this._mediaStreamTrack,i);const n=this.attachedElements.indexOf(i);return n>=0&&(this.attachedElements.splice(n,1),this.recycleElement(i),this.emit(TrackEvent.ElementDetached,i)),i}const t=[];return this.attachedElements.forEach(n=>{detachTrack(this._mediaStreamTrack,n),t.push(n),this.recycleElement(n),this.emit(TrackEvent.ElementDetached,n)}),this.attachedElements=[],t}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}recycleElement(i){if(i instanceof HTMLAudioElement){let t=!0;i.pause(),recycledElements.forEach(n=>{n.parentElement||(t=!1)}),t&&recycledElements.push(i)}}handleAppVisibilityChanged(){return __awaiter(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden"})}addAppVisibilityListener(){isWeb()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){isWeb()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function attachToElement(e,i){let t;i.srcObject instanceof MediaStream?t=i.srcObject:t=new MediaStream;let n;e.kind==="audio"?n=t.getAudioTracks():n=t.getVideoTracks(),n.includes(e)||(n.forEach(a=>{t.removeTrack(a)}),t.addTrack(e)),i.autoplay=!0,i.muted=t.getAudioTracks().length===0,i instanceof HTMLVideoElement&&(i.playsInline=!0),i.srcObject!==t&&(i.srcObject=t,(isSafari()||isFireFox())&&i instanceof HTMLVideoElement&&setTimeout(()=>{i.srcObject=t,i.play().catch(()=>{})},0))}function detachTrack(e,i){if(i.srcObject instanceof MediaStream){const t=i.srcObject;t.removeTrack(e),t.getTracks().length>0?i.srcObject=t:i.srcObject=null}}(function(e){let i;(function(c){c.Audio="audio",c.Video="video",c.Unknown="unknown"})(i=e.Kind||(e.Kind={}));let t;(function(c){c.Camera="camera",c.Microphone="microphone",c.ScreenShare="screen_share",c.ScreenShareAudio="screen_share_audio",c.Unknown="unknown"})(t=e.Source||(e.Source={}));let n;(function(c){c.Active="active",c.Paused="paused",c.Unknown="unknown"})(n=e.StreamState||(e.StreamState={}));function a(c){switch(c){case i.Audio:return TrackType.AUDIO;case i.Video:return TrackType.VIDEO;default:return TrackType.UNRECOGNIZED}}e.kindToProto=a;function o(c){switch(c){case TrackType.AUDIO:return i.Audio;case TrackType.VIDEO:return i.Video;default:return i.Unknown}}e.kindFromProto=o;function d(c){switch(c){case t.Camera:return TrackSource.CAMERA;case t.Microphone:return TrackSource.MICROPHONE;case t.ScreenShare:return TrackSource.SCREEN_SHARE;case t.ScreenShareAudio:return TrackSource.SCREEN_SHARE_AUDIO;default:return TrackSource.UNRECOGNIZED}}e.sourceToProto=d;function s(c){switch(c){case TrackSource.CAMERA:return t.Camera;case TrackSource.MICROPHONE:return t.Microphone;case TrackSource.SCREEN_SHARE:return t.ScreenShare;case TrackSource.SCREEN_SHARE_AUDIO:return t.ScreenShareAudio;default:return t.Unknown}}e.sourceFromProto=s;function u(c){switch(c){case StreamState.ACTIVE:return n.Active;case StreamState.PAUSED:return n.Paused;default:return n.Unknown}}e.streamStateFromProto=u})(Track||(Track={}));const lossyDataChannel="_lossy",reliableDataChannel="_reliable",minReconnectWait=2*1e3,leaveReconnect="leave-reconnect";var PCState;(function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"})(PCState||(PCState={}));class RTCEngine extends eventsExports.EventEmitter{get isClosed(){return this._isClosed}constructor(i){super(),this.options=i,this.rtcConfig={},this.peerConnectionTimeout=roomConnectOptionDefaults.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=PCState.New,this._isClosed=!0,this.pendingTrackResolvers={},this.hasPublished=!1,this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.handleDataChannel=t=>{let{channel:n}=t;return __awaiter(this,void 0,void 0,function*(){if(n){if(n.label===reliableDataChannel)this.reliableDCSub=n;else if(n.label===lossyDataChannel)this.lossyDCSub=n;else return;livekitLogger.debug("on data channel ".concat(n.id,", ").concat(n.label)),n.onmessage=this.handleDataMessage}})},this.handleDataMessage=t=>__awaiter(this,void 0,void 0,function*(){var n,a;const o=yield this.dataProcessLock.lock();try{let d;if(t.data instanceof ArrayBuffer)d=t.data;else if(t.data instanceof Blob)d=yield t.data.arrayBuffer();else{livekitLogger.error("unsupported data type",t.data);return}const s=DataPacket.decode(new Uint8Array(d));((n=s.value)===null||n===void 0?void 0:n.$case)==="speaker"?this.emit(EngineEvent.ActiveSpeakersUpdate,s.value.speaker.speakers):((a=s.value)===null||a===void 0?void 0:a.$case)==="user"&&this.emit(EngineEvent.DataPacketReceived,s.value.user,s.kind)}finally{o()}}),this.handleDataError=t=>{const a=t.currentTarget.maxRetransmits===0?"lossy":"reliable";if(t instanceof ErrorEvent){const{error:o}=t.error;livekitLogger.error("DataChannel error on ".concat(a,": ").concat(t.message),o)}else livekitLogger.error("Unknown DataChannel Error on ".concat(a),t)},this.handleBufferedAmountLow=t=>{const a=t.currentTarget.maxRetransmits===0?DataPacket_Kind.LOSSY:DataPacket_Kind.RELIABLE;this.updateAndEmitDCBufferStatus(a)},this.handleDisconnect=(t,n)=>{if(this._isClosed)return;livekitLogger.warn("".concat(t," disconnected")),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const a=s=>{livekitLogger.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(s,"ms. giving up")),this.emit(EngineEvent.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let d=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(d===null){a(o);return}t===leaveReconnect&&(d=0),livekitLogger.debug("reconnecting in ".concat(d,"ms")),this.clearReconnectTimeout(),this.url&&this.token&&isCloud(new URL(this.url))&&(this.regionUrlProvider=new RegionUrlProvider(this.url,this.token)),this.reconnectTimeout=CriticalTimers.setTimeout(()=>this.attemptReconnect(n),d)},this.waitForRestarted=()=>new Promise((t,n)=>{this.pcState===PCState.Connected&&t();const a=()=>{this.off(EngineEvent.Disconnected,o),t()},o=()=>{this.off(EngineEvent.Restarted,a),n()};this.once(EngineEvent.Restarted,a),this.once(EngineEvent.Disconnected,o)}),this.updateAndEmitDCBufferStatus=t=>{const n=this.isBufferStatusLow(t);typeof n<"u"&&n!==this.dcBufferStatus.get(t)&&(this.dcBufferStatus.set(t,n),this.emit(EngineEvent.DCBufferStatusChanged,n,t))},this.isBufferStatusLow=t=>{const n=this.dataChannelForKind(t);if(n)return n.bufferedAmount<=n.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.isReconnecting&&(this.clearReconnectTimeout(),this.attemptReconnect(ReconnectReason.RR_SIGNAL_DISCONNECTED))},this.client=new SignalClient,this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Mutex,this.dataProcessLock=new Mutex,this.dcBufferStatus=new Map([[DataPacket_Kind.LOSSY,!0],[DataPacket_Kind.RELIABLE,!0]])}join(i,t,n,a){return __awaiter(this,void 0,void 0,function*(){this.url=i,this.token=t,this.signalOpts=n;try{this.joinAttempts+=1;const o=yield this.client.join(i,t,n,a);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.publisher||this.configure(o),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=o.clientConfiguration,o}catch(o){if(o instanceof ConnectionError&&o.reason===1&&(livekitLogger.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts)),this.joinAttempts<this.maxJoinAttempts))return this.join(i,t,n,a);throw o}})}close(){return __awaiter(this,void 0,void 0,function*(){const i=yield this.closingLock.lock();if(this.isClosed){i();return}try{this._isClosed=!0,this.emit(EngineEvent.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),this.publisher&&this.publisher.pc.signalingState!=="closed"&&(this.publisher.pc.getSenders().forEach(t=>{var n,a;try{!((n=this.publisher)===null||n===void 0)&&n.pc.removeTrack&&((a=this.publisher)===null||a===void 0||a.pc.removeTrack(t))}catch(o){livekitLogger.warn("could not removeTrack",{error:o})}}),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),yield this.client.close()}finally{i()}})}addTrack(i){if(this.pendingTrackResolvers[i.cid])throw new TrackInvalidError("a track with the same ID has already been published");return new Promise((t,n)=>{const a=setTimeout(()=>{delete this.pendingTrackResolvers[i.cid],n(new ConnectionError("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[i.cid]={resolve:o=>{clearTimeout(a),t(o)},reject:()=>{clearTimeout(a),n(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(i)})}removeTrack(i){var t;if(i.track&&this.pendingTrackResolvers[i.track.id]){const{reject:n}=this.pendingTrackResolvers[i.track.id];n&&n(),delete this.pendingTrackResolvers[i.track.id]}try{return(t=this.publisher)===null||t===void 0||t.pc.removeTrack(i),!0}catch(n){livekitLogger.warn("failed to remove track",{error:n,method:"removeTrack"})}return!1}updateMuteStatus(i,t){this.client.sendMuteTrack(i,t)}get dataSubscriberReadyState(){var i;return(i=this.reliableDCSub)===null||i===void 0?void 0:i.readyState}getConnectedServerAddress(){return __awaiter(this,void 0,void 0,function*(){if(this.primaryPC!==void 0)return getConnectedAddress(this.primaryPC)})}configure(i){var t;if(this.publisher||this.subscriber)return;this.participantSid=(t=i.participant)===null||t===void 0?void 0:t.sid;const n=this.makeRTCConfiguration(i),a={optional:[{googDscp:!0}]};this.publisher=new PCTransport(n,a),this.subscriber=new PCTransport(n),this.emit(EngineEvent.TransportsCreated,this.publisher,this.subscriber),this.publisher.pc.onicecandidate=u=>{u.candidate&&(livekitLogger.trace("adding ICE candidate for peer",u.candidate),this.client.sendIceCandidate(u.candidate,SignalTarget.PUBLISHER))},this.subscriber.pc.onicecandidate=u=>{u.candidate&&this.client.sendIceCandidate(u.candidate,SignalTarget.SUBSCRIBER)},this.publisher.onOffer=u=>{this.client.sendOffer(u)};let o=this.publisher.pc,d=this.subscriber.pc,s=i.subscriberPrimary;s&&(o=this.subscriber.pc,d=this.publisher.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),this.primaryPC=o,o.onconnectionstatechange=()=>__awaiter(this,void 0,void 0,function*(){if(livekitLogger.debug("primary PC state changed ".concat(o.connectionState)),o.connectionState==="connected"){const u=this.pcState===PCState.New;this.pcState=PCState.Connected,u&&this.emit(EngineEvent.Connected,i)}else o.connectionState==="failed"&&this.pcState===PCState.Connected&&(this.pcState=PCState.Disconnected,this.handleDisconnect("primary peerconnection",s?ReconnectReason.RR_SUBSCRIBER_FAILED:ReconnectReason.RR_PUBLISHER_FAILED))}),d.onconnectionstatechange=()=>__awaiter(this,void 0,void 0,function*(){livekitLogger.debug("secondary PC state changed ".concat(d.connectionState)),d.connectionState==="failed"&&this.handleDisconnect("secondary peerconnection",s?ReconnectReason.RR_PUBLISHER_FAILED:ReconnectReason.RR_SUBSCRIBER_FAILED)}),this.subscriber.pc.ontrack=u=>{this.emit(EngineEvent.MediaTrackAdded,u.track,u.streams[0],u.receiver)},this.createDataChannels(),this.client.onAnswer=u=>__awaiter(this,void 0,void 0,function*(){this.publisher&&(livekitLogger.debug("received server answer",{RTCSdpType:u.type,signalingState:this.publisher.pc.signalingState}),yield this.publisher.setRemoteDescription(u))}),this.client.onTrickle=(u,c)=>{!this.publisher||!this.subscriber||(livekitLogger.trace("got ICE candidate from peer",{candidate:u,target:c}),c===SignalTarget.PUBLISHER?this.publisher.addIceCandidate(u):this.subscriber.addIceCandidate(u))},this.client.onOffer=u=>__awaiter(this,void 0,void 0,function*(){if(!this.subscriber)return;livekitLogger.debug("received server offer",{RTCSdpType:u.type,signalingState:this.subscriber.pc.signalingState}),yield this.subscriber.setRemoteDescription(u);const c=yield this.subscriber.createAndSetAnswer();this.client.sendAnswer(c)}),this.client.onLocalTrackPublished=u=>{livekitLogger.debug("received trackPublishedResponse",u);const{resolve:c}=this.pendingTrackResolvers[u.cid];if(!c){livekitLogger.error("missing track resolver for ".concat(u.cid));return}delete this.pendingTrackResolvers[u.cid],c(u.track)},this.client.onTokenRefresh=u=>{this.token=u},this.client.onClose=()=>{this.handleDisconnect("signal",ReconnectReason.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=u=>{u!=null&&u.canReconnect?(this.fullReconnectOnNext=!0,this.primaryPC=void 0,this.handleDisconnect(leaveReconnect)):(this.emit(EngineEvent.Disconnected,u==null?void 0:u.reason),this.close()),livekitLogger.trace("leave request",{leave:u})}}makeRTCConfiguration(i){const t=Object.assign({},this.rtcConfig);if(i.iceServers&&!t.iceServers){const n=[];i.iceServers.forEach(a=>{const o={urls:a.urls};a.username&&(o.username=a.username),a.credential&&(o.credential=a.credential),n.push(o)}),t.iceServers=n}return i.clientConfiguration&&i.clientConfiguration.forceRelay===ClientConfigSetting.ENABLED&&(t.iceTransportPolicy="relay"),t.sdpSemantics="unified-plan",t.continualGatheringPolicy="gather_continually",t}createDataChannels(){this.publisher&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.publisher.pc.createDataChannel(lossyDataChannel,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(reliableDataChannel,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}setPreferredCodec(i,t,n){if(!("getCapabilities"in RTCRtpSender))return;const a=RTCRtpSender.getCapabilities(t);if(!a)return;livekitLogger.debug("get capabilities",a);const o=[],d=[],s=[];a.codecs.forEach(u=>{const c=u.mimeType.toLowerCase();if(c==="audio/opus"){o.push(u);return}if(!(c==="video/".concat(n))){s.push(u);return}if(n==="h264"){u.sdpFmtpLine&&u.sdpFmtpLine.includes("profile-level-id=42e01f")?o.push(u):d.push(u);return}o.push(u)}),supportsSetCodecPreferences(i)&&i.setCodecPreferences(o.concat(d,s))}createSender(i,t,n){return __awaiter(this,void 0,void 0,function*(){if(supportsTransceiver())return this.createTransceiverRTCRtpSender(i,t,n);if(supportsAddTrack())return livekitLogger.debug("using add-track fallback"),this.createRTCRtpSender(i.mediaStreamTrack);throw new UnexpectedConnectionState("Required webRTC APIs not supported on this device")})}createSimulcastSender(i,t,n,a){return __awaiter(this,void 0,void 0,function*(){if(supportsTransceiver())return this.createSimulcastTransceiverSender(i,t,n,a);if(supportsAddTrack())return livekitLogger.debug("using add-track fallback"),this.createRTCRtpSender(i.mediaStreamTrack);throw new UnexpectedConnectionState("Cannot stream on this device")})}createTransceiverRTCRtpSender(i,t,n){return __awaiter(this,void 0,void 0,function*(){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");const a={direction:"sendonly"};n&&(a.sendEncodings=n);const o=yield this.publisher.pc.addTransceiver(i.mediaStreamTrack,a);return i.kind===Track.Kind.Video&&t.videoCodec&&(this.setPreferredCodec(o,i.kind,t.videoCodec),i.codec=t.videoCodec),o.sender})}createSimulcastTransceiverSender(i,t,n,a){return __awaiter(this,void 0,void 0,function*(){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");const o={direction:"sendonly"};a&&(o.sendEncodings=a);const d=yield this.publisher.pc.addTransceiver(t.mediaStreamTrack,o);if(n.videoCodec)return this.setPreferredCodec(d,i.kind,n.videoCodec),i.setSimulcastTrackSender(n.videoCodec,d.sender),d.sender})}createRTCRtpSender(i){return __awaiter(this,void 0,void 0,function*(){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");return this.publisher.pc.addTrack(i)})}attemptReconnect(i){var t,n,a;return __awaiter(this,void 0,void 0,function*(){if(!this._isClosed&&!this.attemptingReconnect){(((t=this.clientConfiguration)===null||t===void 0?void 0:t.resumeConnection)===ClientConfigSetting.DISABLED||((a=(n=this.primaryPC)===null||n===void 0?void 0:n.signalingState)!==null&&a!==void 0?a:"closed")==="closed")&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(i),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let d=!0;o instanceof UnexpectedConnectionState?(livekitLogger.debug("received unrecoverable error",{error:o}),d=!1):o instanceof SignalReconnectError||(this.fullReconnectOnNext=!0),d?this.handleDisconnect("reconnect",ReconnectReason.RR_UNKOWN):(livekitLogger.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up")),this.emit(EngineEvent.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(i){try{return this.reconnectPolicy.nextRetryDelayInMs(i)}catch(t){livekitLogger.warn("encountered error in reconnect policy",{error:t})}return null}restartConnection(i){var t,n,a,o,d;return __awaiter(this,void 0,void 0,function*(){try{if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");livekitLogger.info("reconnecting, attempt: ".concat(this.reconnectAttempts)),this.emit(EngineEvent.Restarting),this.client.isConnected&&(yield this.client.sendLeave()),yield this.client.close(),this.primaryPC=void 0,(t=this.publisher)===null||t===void 0||t.close(),this.publisher=void 0,(n=this.subscriber)===null||n===void 0||n.close(),this.subscriber=void 0;let s;try{if(!this.signalOpts)throw livekitLogger.warn("attempted connection restart, without signal options present"),new SignalReconnectError;s=yield this.join(i??this.url,this.token,this.signalOpts)}catch(u){throw u instanceof ConnectionError&&u.reason===0?new UnexpectedConnectionState("could not reconnect, token might be expired"):new SignalReconnectError}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");this.client.setReconnected(),this.emit(EngineEvent.SignalRestarted,s),yield this.waitForPCReconnected(),(a=this.regionUrlProvider)===null||a===void 0||a.resetAttempts(),this.emit(EngineEvent.Restarted)}catch(s){const u=yield(o=this.regionUrlProvider)===null||o===void 0?void 0:o.getNextBestRegionUrl();if(u){yield this.restartConnection(u);return}else throw(d=this.regionUrlProvider)===null||d===void 0||d.resetAttempts(),s}})}resumeConnection(i){var t;return __awaiter(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");if(!this.publisher||!this.subscriber)throw new UnexpectedConnectionState("publisher and subscriber connections unset");livekitLogger.info("resuming signal connection, attempt ".concat(this.reconnectAttempts)),this.emit(EngineEvent.Resuming);try{const n=yield this.client.reconnect(this.url,this.token,this.participantSid,i);if(n){const a=this.makeRTCConfiguration(n);this.publisher.pc.setConfiguration(a),this.subscriber.pc.setConfiguration(a)}}catch(n){let a="";throw n instanceof Error&&(a=n.message),n instanceof ConnectionError&&n.reason===0?new UnexpectedConnectionState("could not reconnect, token might be expired"):new SignalReconnectError(a)}if(this.emit(EngineEvent.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");this.subscriber.restartingIce=!0,this.hasPublished&&(yield this.publisher.createAndSendOffer({iceRestart:!0})),yield this.waitForPCReconnected(),this.client.setReconnected(),((t=this.reliableDC)===null||t===void 0?void 0:t.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(EngineEvent.Resumed)})}waitForPCInitialConnection(i,t){return __awaiter(this,void 0,void 0,function*(){if(this.pcState!==PCState.Connected){if(this.pcState!==PCState.New)throw new UnexpectedConnectionState("Expected peer connection to be new on initial connection");return new Promise((n,a)=>{const o=()=>{livekitLogger.warn("closing engine"),CriticalTimers.clearTimeout(s),a(new ConnectionError("room connection has been cancelled",3))};t!=null&&t.signal.aborted&&o(),t==null||t.signal.addEventListener("abort",o);const d=()=>{CriticalTimers.clearTimeout(s),t==null||t.signal.removeEventListener("abort",o),n()},s=CriticalTimers.setTimeout(()=>{this.off(EngineEvent.Connected,d),a(new ConnectionError("could not establish pc connection"))},i??this.peerConnectionTimeout);this.once(EngineEvent.Connected,d)})}})}waitForPCReconnected(){var i;return __awaiter(this,void 0,void 0,function*(){const t=Date.now();let n=t;for(this.pcState=PCState.Reconnecting,livekitLogger.debug("waiting for peer connection to reconnect");n-t<this.peerConnectionTimeout&&this.primaryPC!==void 0;){if(n-t>minReconnectWait&&((i=this.primaryPC)===null||i===void 0?void 0:i.connectionState)==="connected"&&(this.pcState=PCState.Connected),this.pcState===PCState.Connected)return;yield sleep(100),n=Date.now()}throw new ConnectionError("could not establish PC connection")})}sendDataPacket(i,t){return __awaiter(this,void 0,void 0,function*(){const n=DataPacket.encode(i).finish();yield this.ensurePublisherConnected(t);const a=this.dataChannelForKind(t);a&&a.send(n),this.updateAndEmitDCBufferStatus(t)})}ensureDataTransportConnected(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var n,a,o;return __awaiter(this,void 0,void 0,function*(){const d=t?this.subscriber:this.publisher,s=t?"Subscriber":"Publisher";if(!d)throw new ConnectionError("".concat(s," connection not set"));!t&&!(!((n=this.publisher)===null||n===void 0)&&n.isICEConnected)&&((a=this.publisher)===null||a===void 0?void 0:a.pc.iceConnectionState)!=="checking"&&this.negotiate();const u=this.dataChannelForKind(i,t);if((u==null?void 0:u.readyState)==="open")return;const c=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<c;){if(d.isICEConnected&&((o=this.dataChannelForKind(i,t))===null||o===void 0?void 0:o.readyState)==="open")return;yield sleep(50)}throw new ConnectionError("could not establish ".concat(s," connection, state: ").concat(d.pc.iceConnectionState))})}ensurePublisherConnected(i){return __awaiter(this,void 0,void 0,function*(){yield this.ensureDataTransportConnected(i,!1)})}verifyTransport(){return!(!this.primaryPC||this.primaryPC.connectionState==="closed"||this.primaryPC.connectionState==="failed"||this.hasPublished&&this.subscriberPrimary&&(!this.publisher||this.publisher.pc.connectionState==="closed"||this.publisher.pc.connectionState==="failed")||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return new Promise((i,t)=>{if(!this.publisher){t(new NegotiationError("publisher is not defined"));return}this.hasPublished=!0;const n=()=>{livekitLogger.debug("engine disconnected while negotiation was ongoing"),o(),i()};this.on(EngineEvent.Closing,n);const a=setTimeout(()=>{t("negotiation timed out"),this.handleDisconnect("negotiation",ReconnectReason.RR_SIGNAL_DISCONNECTED)},this.peerConnectionTimeout),o=()=>{clearTimeout(a),this.off(EngineEvent.Closing,n)};this.publisher.once(PCEvents.NegotiationStarted,()=>{var d;(d=this.publisher)===null||d===void 0||d.once(PCEvents.NegotiationComplete,()=>{o(),i()})}),this.publisher.negotiate(d=>{o(),t(d),d instanceof NegotiationError&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ReconnectReason.RR_UNKOWN)})})}dataChannelForKind(i,t){if(t){if(i===DataPacket_Kind.LOSSY)return this.lossyDCSub;if(i===DataPacket_Kind.RELIABLE)return this.reliableDCSub}else{if(i===DataPacket_Kind.LOSSY)return this.lossyDC;if(i===DataPacket_Kind.RELIABLE)return this.reliableDC}}failNext(){this.shouldFailNext=!0}clearReconnectTimeout(){this.reconnectTimeout&&CriticalTimers.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){isWeb()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){isWeb()&&window.removeEventListener("online",this.handleBrowserOnLine)}}function getConnectedAddress(e){var i;return __awaiter(this,void 0,void 0,function*(){let t="";const n=new Map,a=new Map;if((yield e.getStats()).forEach(s=>{switch(s.type){case"transport":t=s.selectedCandidatePairId;break;case"candidate-pair":t===""&&s.selected&&(t=s.id),n.set(s.id,s);break;case"remote-candidate":a.set(s.id,"".concat(s.address,":").concat(s.port));break}}),t==="")return;const d=(i=n.get(t))===null||i===void 0?void 0:i.remoteCandidateId;if(d!==void 0)return a.get(d)})}class SignalReconnectError extends Error{}const monitorFrequency=2e3;function computeBitrate(e,i){if(!i)return 0;let t,n;return"bytesReceived"in e?(t=e.bytesReceived,n=i.bytesReceived):"bytesSent"in e&&(t=e.bytesSent,n=i.bytesSent),t===void 0||n===void 0||e.timestamp===void 0||i.timestamp===void 0?0:(t-n)*8*1e3/(e.timestamp-i.timestamp)}const defaultDimensionsTimeout=1e3;class LocalTrack extends Track{constructor(i,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;super(i,t),this._isUpstreamPaused=!1,this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this.emit(TrackEvent.Ended,this)},this._mediaStreamTrack.addEventListener("ended",this.handleEnded),this.constraints=n??i.getConstraints(),this.reacquireTrack=!1,this.providedByUser=a,this.muteLock=new Mutex,this.pauseUpstreamLock=new Mutex}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Track.Kind.Video)return;const{width:i,height:t}=this._mediaStreamTrack.getSettings();if(i&&t)return{width:i,height:t}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}waitForDimensions(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDimensionsTimeout;return __awaiter(this,void 0,void 0,function*(){if(this.kind===Track.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");const t=Date.now();for(;Date.now()-t<i;){const n=this.dimensions;if(n)return n;yield sleep(50)}throw new TrackInvalidError("unable to get track dimensions after timeout")})}getDeviceId(){return __awaiter(this,void 0,void 0,function*(){if(this.source===Track.Source.ScreenShare)return;const{deviceId:i,groupId:t}=this._mediaStreamTrack.getSettings(),n=this.kind===Track.Kind.Audio?"audioinput":"videoinput";return DeviceManager.getInstance().normalizeDeviceId(n,i,t)})}mute(){return __awaiter(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return __awaiter(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return __awaiter(this,void 0,void 0,function*(){if(!this.sender)throw new TrackInvalidError("unable to replace an unpublished track");return this.attachedElements.forEach(n=>{detachTrack(this._mediaStreamTrack,n)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this.providedByUser||this._mediaStreamTrack.stop(),i.addEventListener("ended",this.handleEnded),livekitLogger.debug("replace MediaStreamTrack"),this.sender&&(yield this.sender.replaceTrack(i)),this._mediaStreamTrack=i,this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(n=>{attachToElement(i,n)}),this.mediaStream=new MediaStream([i]),this.providedByUser=t,this})}restart(i){return __awaiter(this,void 0,void 0,function*(){i||(i=this.constraints),livekitLogger.debug("restarting track with constraints",i);const t={audio:!1,video:!1};this.kind===Track.Kind.Video?t.video=i:t.audio=i,this.attachedElements.forEach(o=>{detachTrack(this._mediaStreamTrack,o)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const n=yield navigator.mediaDevices.getUserMedia(t),a=n.getTracks()[0];return a.addEventListener("ended",this.handleEnded),livekitLogger.debug("re-acquired MediaStreamTrack"),this.sender&&(yield this.sender.replaceTrack(a)),this._mediaStreamTrack=a,yield this.resumeUpstream(),this.attachedElements.forEach(o=>{attachToElement(a,o)}),this.mediaStream=n,this.constraints=i,this.emit(TrackEvent.Restarted,this),this})}setTrackMuted(i){livekitLogger.debug("setting ".concat(this.kind," track ").concat(i?"muted":"unmuted")),!(this.isMuted===i&&this._mediaStreamTrack.enabled!==i)&&(this.isMuted=i,this._mediaStreamTrack.enabled=!i,this.emit(i?TrackEvent.Muted:TrackEvent.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const i=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter(this,void 0,void 0,function*(){yield i.handleAppVisibilityChanged.call(this),isMobile()&&(livekitLogger.debug("visibility changed, is in Background: ".concat(this.isInBackground)),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(livekitLogger.debug("track needs to be reaquired, restarting ".concat(this.source)),yield this.restart(),this.reacquireTrack=!1))})}pauseUpstream(){return __awaiter(this,void 0,void 0,function*(){const i=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){livekitLogger.warn("unable to pause upstream for an unpublished track");return}this._isUpstreamPaused=!0,this.emit(TrackEvent.UpstreamPaused,this);const t=this.kind===Track.Kind.Audio?getEmptyAudioStreamTrack():getEmptyVideoStreamTrack();yield this.sender.replaceTrack(t)}finally{i()}})}resumeUpstream(){return __awaiter(this,void 0,void 0,function*(){const i=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){livekitLogger.warn("unable to resume upstream for an unpublished track");return}this._isUpstreamPaused=!1,this.emit(TrackEvent.UpstreamResumed,this),yield this.sender.replaceTrack(this._mediaStreamTrack)}finally{i()}})}}class LocalAudioTrack extends LocalTrack{constructor(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;super(i,Track.Kind.Audio,t,n),this.stopOnMute=!1,this.monitorSender=()=>__awaiter(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(o){livekitLogger.error("could not get audio sender stats",{error:o});return}a&&this.prevStats&&(this._currentBitrate=computeBitrate(a,this.prevStats)),this.prevStats=a}),this.checkForSilence()}setDeviceId(i){return __awaiter(this,void 0,void 0,function*(){this.constraints.deviceId!==i&&(this.constraints.deviceId=i,this.isMuted||(yield this.restartTrack()))})}mute(){const i=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{return this.source===Track.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(livekitLogger.debug("stopping mic track"),this._mediaStreamTrack.stop()),yield i.mute.call(this),this}finally{t()}})}unmute(){const i=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{return this.source===Track.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended")&&!this.isUserProvided&&(livekitLogger.debug("reacquiring mic track"),yield this.restartTrack()),yield i.unmute.call(this),this}finally{t()}})}restartTrack(i){return __awaiter(this,void 0,void 0,function*(){let t;if(i){const n=constraintsForOptions({audio:i});typeof n.audio!="boolean"&&(t=n.audio)}yield this.restart(t)})}restart(i){const t=Object.create(null,{restart:{get:()=>super.restart}});return __awaiter(this,void 0,void 0,function*(){const n=yield t.restart.call(this,i);return this.checkForSilence(),n})}startMonitor(){isWeb()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency)))}getSenderStats(){var i;return __awaiter(this,void 0,void 0,function*(){if(!(!((i=this.sender)===null||i===void 0)&&i.getStats))return;const t=yield this.sender.getStats();let n;return t.forEach(a=>{a.type==="outbound-rtp"&&(n={type:"audio",streamId:a.id,packetsSent:a.packetsSent,packetsLost:a.packetsLost,bytesSent:a.bytesSent,timestamp:a.timestamp,roundTripTime:a.roundTripTime,jitter:a.jitter})}),n})}checkForSilence(){return __awaiter(this,void 0,void 0,function*(){const i=yield detectSilence(this);return i&&(this.isMuted||livekitLogger.warn("silence detected on local audio track"),this.emit(TrackEvent.AudioSilenceDetected)),i})}}const refreshSubscribedCodecAfterNewCodec=5e3;class LocalVideoTrack extends LocalTrack{constructor(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;super(i,Track.Kind.Video,t,n),this.simulcastCodecs=new Map,this.monitorSender=()=>__awaiter(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let a;try{a=yield this.getSenderStats()}catch(d){livekitLogger.error("could not get audio sender stats",{error:d});return}const o=new Map(a.map(d=>[d.rid,d]));if(this.prevStats){let d=0;o.forEach((s,u)=>{var c;const h=(c=this.prevStats)===null||c===void 0?void 0:c.get(u);d+=computeBitrate(s,h)}),this._currentBitrate=d}this.prevStats=o}),this.senderLock=new Mutex}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(i){var t;if(this.signalClient=i,!isWeb())return;const n=(t=this.sender)===null||t===void 0?void 0:t.getParameters();n&&(this.encodings=n.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(i=>{i.mediaStreamTrack.stop()}),super.stop()}mute(){const i=Object.create(null,{mute:{get:()=>super.mute}});return __awaiter(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{return this.source===Track.Source.Camera&&!this.isUserProvided&&(livekitLogger.debug("stopping camera track"),this._mediaStreamTrack.stop()),yield i.mute.call(this),this}finally{t()}})}unmute(){const i=Object.create(null,{unmute:{get:()=>super.unmute}});return __awaiter(this,void 0,void 0,function*(){const t=yield this.muteLock.lock();try{return this.source===Track.Source.Camera&&!this.isUserProvided&&(livekitLogger.debug("reacquiring camera track"),yield this.restartTrack()),yield i.unmute.call(this),this}finally{t()}})}getSenderStats(){var i;return __awaiter(this,void 0,void 0,function*(){if(!(!((i=this.sender)===null||i===void 0)&&i.getStats))return[];const t=[],n=yield this.sender.getStats();return n.forEach(a=>{var o;if(a.type==="outbound-rtp"){const d={type:"video",streamId:a.id,frameHeight:a.frameHeight,frameWidth:a.frameWidth,firCount:a.firCount,pliCount:a.pliCount,nackCount:a.nackCount,packetsSent:a.packetsSent,bytesSent:a.bytesSent,framesSent:a.framesSent,timestamp:a.timestamp,rid:(o=a.rid)!==null&&o!==void 0?o:a.id,retransmittedPacketsSent:a.retransmittedPacketsSent,qualityLimitationReason:a.qualityLimitationReason,qualityLimitationResolutionChanges:a.qualityLimitationResolutionChanges},s=n.get(a.remoteId);s&&(d.jitter=s.jitter,d.packetsLost=s.packetsLost,d.roundTripTime=s.roundTripTime),t.push(d)}}),t})}setPublishingQuality(i){const t=[];for(let n=VideoQuality.LOW;n<=VideoQuality.HIGH;n+=1)t.push({quality:n,enabled:n<=i});livekitLogger.debug("setting publishing quality. max quality ".concat(i)),this.setPublishingLayers(t)}setDeviceId(i){return __awaiter(this,void 0,void 0,function*(){this.constraints.deviceId!==i&&(this.constraints.deviceId=i,this.isMuted||(yield this.restartTrack()))})}restartTrack(i){return __awaiter(this,void 0,void 0,function*(){let t;if(i){const n=constraintsForOptions({video:i});typeof n.video!="boolean"&&(t=n.video)}yield this.restart(t)})}addSimulcastTrack(i,t){if(this.simulcastCodecs.has(i))throw new Error("".concat(i," already added"));const n={codec:i,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:t};return this.simulcastCodecs.set(i,n),n}setSimulcastTrackSender(i,t){const n=this.simulcastCodecs.get(i);n&&(n.sender=t,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},refreshSubscribedCodecAfterNewCodec))}setPublishingCodecs(i){var t,n,a,o,d,s,u;return __awaiter(this,void 0,void 0,function*(){if(livekitLogger.debug("setting publishing codecs",{codecs:i,currentCodec:this.codec}),!this.codec&&i.length>0)return yield this.setPublishingLayers(i[0].qualities),[];this.subscribedCodecs=i;const c=[];try{for(t=!0,n=__asyncValues(i);a=yield n.next(),o=a.done,!o;){u=a.value,t=!1;try{const h=u;if(!this.codec||this.codec===h.codec)yield this.setPublishingLayers(h.qualities);else{const p=this.simulcastCodecs.get(h.codec);if(livekitLogger.debug("try setPublishingCodec for ".concat(h.codec),p),!p||!p.sender){for(const l of h.qualities)if(l.enabled){c.push(h.codec);break}}else p.encodings&&(livekitLogger.debug("try setPublishingLayersForSender ".concat(h.codec)),yield setPublishingLayersForSender(p.sender,p.encodings,h.qualities,this.senderLock))}}finally{t=!0}}}catch(h){d={error:h}}finally{try{!t&&!o&&(s=n.return)&&(yield s.call(n))}finally{if(d)throw d.error}}return c})}setPublishingLayers(i){return __awaiter(this,void 0,void 0,function*(){livekitLogger.debug("setting publishing layers",i),!(!this.sender||!this.encodings)&&(yield setPublishingLayersForSender(this.sender,this.encodings,i,this.senderLock))})}handleAppVisibilityChanged(){const i=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter(this,void 0,void 0,function*(){yield i.handleAppVisibilityChanged.call(this),isMobile()&&this.isInBackground&&this.source===Track.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function setPublishingLayersForSender(e,i,t,n){return __awaiter(this,void 0,void 0,function*(){const a=yield n.lock();livekitLogger.debug("setPublishingLayersForSender",{sender:e,qualities:t,senderEncodings:i});try{const o=e.getParameters(),{encodings:d}=o;if(!d)return;if(d.length!==i.length){livekitLogger.warn("cannot set publishing layers, encodings mismatch");return}let s=!1;d.forEach((u,c)=>{var h;let p=(h=u.rid)!==null&&h!==void 0?h:"";p===""&&(p="q");const l=videoQualityForRid(p),f=t.find(m=>m.quality===l);f&&u.active!==f.enabled&&(s=!0,u.active=f.enabled,livekitLogger.debug("setting layer ".concat(f.quality," to ").concat(u.active?"enabled":"disabled")),isFireFox()&&(f.enabled?(u.scaleResolutionDownBy=i[c].scaleResolutionDownBy,u.maxBitrate=i[c].maxBitrate,u.maxFrameRate=i[c].maxFrameRate):(u.scaleResolutionDownBy=4,u.maxBitrate=10,u.maxFrameRate=2)))}),s&&(o.encodings=d,yield e.setParameters(o))}finally{a()}})}function videoQualityForRid(e){switch(e){case"f":return VideoQuality.HIGH;case"h":return VideoQuality.MEDIUM;case"q":return VideoQuality.LOW;default:return VideoQuality.UNRECOGNIZED}}function videoLayersFromEncodings(e,i,t){return t?t.map(n=>{var a,o,d;const s=(a=n.scaleResolutionDownBy)!==null&&a!==void 0?a:1;let u=videoQualityForRid((o=n.rid)!==null&&o!==void 0?o:"");return u===VideoQuality.UNRECOGNIZED&&t.length===1&&(u=VideoQuality.HIGH),{quality:u,width:e/s,height:i/s,bitrate:(d=n.maxBitrate)!==null&&d!==void 0?d:0,ssrc:0}}):[{quality:VideoQuality.HIGH,width:e,height:i,bitrate:0,ssrc:0}]}class RemoteTrack extends Track{constructor(i,t,n,a){super(i,n),this.sid=t,this.receiver=a}setMuted(i){this.isMuted!==i&&(this.isMuted=i,this._mediaStreamTrack.enabled=!i,this.emit(i?TrackEvent.Muted:TrackEvent.Unmuted,this))}setMediaStream(i){this.mediaStream=i,i.onremovetrack=()=>{this.receiver=void 0,this._currentBitrate=0,this.emit(TrackEvent.Ended,this)}}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),monitorFrequency))}}class RemoteAudioTrack extends RemoteTrack{constructor(i,t,n,a,o){super(i,t,Track.Kind.Audio,n),this.monitorReceiver=()=>__awaiter(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const d=yield this.getReceiverStats();d&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(d,this.prevStats)),this.prevStats=d}),this.audioContext=a,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(i){var t;for(const n of this.attachedElements)this.audioContext?(t=this.gainNode)===null||t===void 0||t.gain.setTargetAtTime(i,0,.1):n.volume=i;this.elementVolume=i}getVolume(){if(this.elementVolume)return this.elementVolume;let i=0;return this.attachedElements.forEach(t=>{t.volume>i&&(i=t.volume)}),i}setSinkId(i){return __awaiter(this,void 0,void 0,function*(){this.sinkId=i,yield Promise.all(this.attachedElements.map(t=>{if(supportsSetSinkId(t))return t.setSinkId(i)}))})}attach(i){const t=this.attachedElements.length===0;return i?super.attach(i):i=super.attach(),this.elementVolume&&(i.volume=this.elementVolume),this.sinkId&&supportsSetSinkId(i)&&i.setSinkId(this.sinkId),this.audioContext&&t&&(livekitLogger.debug("using audio context mapping"),this.connectWebAudio(this.audioContext,i),i.volume=0,i.muted=!0),i}detach(i){let t;return i?(t=super.detach(i),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(t=super.detach(),this.disconnectWebAudio()),t}setAudioContext(i){this.audioContext=i,i&&this.attachedElements.length>0?this.connectWebAudio(i,this.attachedElements[0]):i||this.disconnectWebAudio()}setWebAudioPlugins(i){this.webAudioPluginNodes=i,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(i,t){this.disconnectWebAudio(),this.sourceNode=i.createMediaStreamSource(t.srcObject);let n=this.sourceNode;this.webAudioPluginNodes.forEach(a=>{n.connect(a),n=a}),this.gainNode=i.createGain(),n.connect(this.gainNode),this.gainNode.connect(i.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),i.state!=="running"&&i.resume().then(()=>{i.state!=="running"&&this.emit(TrackEvent.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(a=>{this.emit(TrackEvent.AudioPlaybackFailed,a)})}disconnectWebAudio(){var i,t;(i=this.gainNode)===null||i===void 0||i.disconnect(),(t=this.sourceNode)===null||t===void 0||t.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return __awaiter(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const i=yield this.receiver.getStats();let t;return i.forEach(n=>{n.type==="inbound-rtp"&&(t={type:"audio",timestamp:n.timestamp,jitter:n.jitter,bytesReceived:n.bytesReceived,concealedSamples:n.concealedSamples,concealmentEvents:n.concealmentEvents,silentConcealedSamples:n.silentConcealedSamples,silentConcealmentEvents:n.silentConcealmentEvents,totalAudioEnergy:n.totalAudioEnergy,totalSamplesDuration:n.totalSamplesDuration})}),t})}}const REACTION_DELAY=100;class RemoteVideoTrack extends RemoteTrack{constructor(i,t,n,a){super(i,t,Track.Kind.Video,n),this.elementInfos=[],this.isObserved=!1,this.monitorReceiver=()=>__awaiter(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(o,this.prevStats)),this.prevStats=o}),this.debouncedHandleResize=r(()=>{this.updateDimensions()},REACTION_DELAY),this.adaptiveStreamSettings=a}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this.isAdaptiveStream&&!this.isObserved&&livekitLogger.warn("When using adaptiveStream, you need to use remoteVideoTrack.attach() to add the track to a HTMLVideoElement, otherwise your video tracks might never start"),this._mediaStreamTrack}setMuted(i){super.setMuted(i),this.attachedElements.forEach(t=>{i?detachTrack(this._mediaStreamTrack,t):attachToElement(this._mediaStreamTrack,t)})}attach(i){if(i?super.attach(i):i=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(t=>t.element===i)===void 0){const t=new HTMLElementInfo(i);this.observeElementInfo(t)}return i}observeElementInfo(i){this.adaptiveStreamSettings&&this.elementInfos.find(t=>t===i)===void 0?(i.handleResize=()=>{this.debouncedHandleResize()},i.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(i),i.observe(),this.debouncedHandleResize(),this.updateVisibility(),this.isObserved=!0):livekitLogger.warn("visibility resize observer not triggered")}stopObservingElementInfo(i){if(!this.isAdaptiveStream){livekitLogger.warn("stopObservingElementInfo ignored");return}const t=this.elementInfos.filter(n=>n===i);for(const n of t)n.stopObserving();this.elementInfos=this.elementInfos.filter(n=>n!==i),this.updateVisibility()}detach(i){let t=[];if(i)return this.stopObservingElement(i),super.detach(i);t=super.detach();for(const n of t)this.stopObservingElement(n);return t}getDecoderImplementation(){var i;return(i=this.prevStats)===null||i===void 0?void 0:i.decoderImplementation}getReceiverStats(){return __awaiter(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const i=yield this.receiver.getStats();let t;return i.forEach(n=>{n.type==="inbound-rtp"&&(t={type:"video",framesDecoded:n.framesDecoded,framesDropped:n.framesDropped,framesReceived:n.framesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost,frameWidth:n.frameWidth,frameHeight:n.frameHeight,pliCount:n.pliCount,firCount:n.firCount,nackCount:n.nackCount,jitter:n.jitter,timestamp:n.timestamp,bytesReceived:n.bytesReceived,decoderImplementation:n.decoderImplementation})}),t})}stopObservingElement(i){const t=this.elementInfos.filter(n=>n.element===i);for(const n of t)n.stopObserving();this.elementInfos=this.elementInfos.filter(n=>n.element!==i)}handleAppVisibilityChanged(){const i=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return __awaiter(this,void 0,void 0,function*(){yield i.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var i,t;const n=this.elementInfos.reduce((s,u)=>Math.max(s,u.visibilityChangedAt||0),0),a=!((t=(i=this.adaptiveStreamSettings)===null||i===void 0?void 0:i.pauseVideoInBackground)!==null&&t!==void 0)||t?this.isInBackground:!1,o=this.elementInfos.some(s=>s.pictureInPicture),d=this.elementInfos.some(s=>s.visible)&&!a||o;if(this.lastVisible!==d){if(!d&&Date.now()-n<REACTION_DELAY){CriticalTimers.setTimeout(()=>{this.updateVisibility()},REACTION_DELAY);return}this.lastVisible=d,this.emit(TrackEvent.VisibilityChanged,d,this)}}updateDimensions(){var i,t,n,a;let o=0,d=0;for(const s of this.elementInfos){const u=(t=(i=this.adaptiveStreamSettings)===null||i===void 0?void 0:i.pixelDensity)!==null&&t!==void 0?t:1,c=u==="screen"?getDevicePixelRatio():u,h=s.width()*c,p=s.height()*c;h+p>o+d&&(o=h,d=p)}((n=this.lastDimensions)===null||n===void 0?void 0:n.width)===o&&((a=this.lastDimensions)===null||a===void 0?void 0:a.height)===d||(this.lastDimensions={width:o,height:d},this.emit(TrackEvent.VideoDimensionsChanged,this.lastDimensions,this))}}class HTMLElementInfo{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(i,t){this.onVisibilityChanged=n=>{var a;const{target:o,isIntersecting:d}=n;o===this.element&&(this.isIntersecting=d,this.visibilityChangedAt=Date.now(),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this))},this.onEnterPiP=()=>{var n;this.isPiP=!0,(n=this.handleVisibilityChanged)===null||n===void 0||n.call(this)},this.onLeavePiP=()=>{var n;this.isPiP=!1,(n=this.handleVisibilityChanged)===null||n===void 0||n.call(this)},this.element=i,this.isIntersecting=t??isElementInViewport(i),this.isPiP=isWeb()&&document.pictureInPictureElement===i,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=isElementInViewport(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,getIntersectionObserver().observe(this.element),getResizeObserver().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var i,t;(i=getIntersectionObserver())===null||i===void 0||i.unobserve(this.element),(t=getResizeObserver())===null||t===void 0||t.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function isElementInViewport(e){let i=e.offsetTop,t=e.offsetLeft;const n=e.offsetWidth,a=e.offsetHeight,{hidden:o}=e,{opacity:d,display:s}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,i+=e.offsetTop,t+=e.offsetLeft;return i<window.pageYOffset+window.innerHeight&&t<window.pageXOffset+window.innerWidth&&i+a>window.pageYOffset&&t+n>window.pageXOffset&&!o&&(d!==""?parseFloat(d)>0:!0)&&s!=="none"}class TrackPublication extends eventsExports.EventEmitter{constructor(i,t,n){super(),this.metadataMuted=!1,this.handleMuted=()=>{this.emit(TrackEvent.Muted)},this.handleUnmuted=()=>{this.emit(TrackEvent.Unmuted)},this.setMaxListeners(100),this.kind=i,this.trackSid=t,this.trackName=n,this.source=Track.Source.Unknown}setTrack(i){this.track&&(this.track.off(TrackEvent.Muted,this.handleMuted),this.track.off(TrackEvent.Unmuted,this.handleUnmuted)),this.track=i,i&&(i.on(TrackEvent.Muted,this.handleMuted),i.on(TrackEvent.Unmuted,this.handleUnmuted))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get audioTrack(){if(this.track instanceof LocalAudioTrack||this.track instanceof RemoteAudioTrack)return this.track}get videoTrack(){if(this.track instanceof LocalVideoTrack||this.track instanceof RemoteVideoTrack)return this.track}updateInfo(i){this.trackSid=i.sid,this.trackName=i.name,this.source=Track.sourceFromProto(i.source),this.mimeType=i.mimeType,this.kind===Track.Kind.Video&&i.width>0&&(this.dimensions={width:i.width,height:i.height},this.simulcasted=i.simulcast),this.trackInfo=i,livekitLogger.trace("update publication info",{info:i})}}(function(e){(function(i){i.Desired="desired",i.Subscribed="subscribed",i.Unsubscribed="unsubscribed"})(e.SubscriptionStatus||(e.SubscriptionStatus={})),function(i){i.Allowed="allowed",i.NotAllowed="not_allowed"}(e.PermissionStatus||(e.PermissionStatus={}))})(TrackPublication||(TrackPublication={}));class LocalTrackPublication extends TrackPublication{get isUpstreamPaused(){var i;return(i=this.track)===null||i===void 0?void 0:i.isUpstreamPaused}constructor(i,t,n){super(i,t.sid,t.name),this.track=void 0,this.handleTrackEnded=()=>{this.emit(TrackEvent.Ended)},this.updateInfo(t),this.setTrack(n)}setTrack(i){this.track&&this.track.off(TrackEvent.Ended,this.handleTrackEnded),super.setTrack(i),i&&i.on(TrackEvent.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var i;return __awaiter(this,void 0,void 0,function*(){return(i=this.track)===null||i===void 0?void 0:i.mute()})}unmute(){var i;return __awaiter(this,void 0,void 0,function*(){return(i=this.track)===null||i===void 0?void 0:i.unmute()})}pauseUpstream(){var i;return __awaiter(this,void 0,void 0,function*(){yield(i=this.track)===null||i===void 0?void 0:i.pauseUpstream()})}resumeUpstream(){var i;return __awaiter(this,void 0,void 0,function*(){yield(i=this.track)===null||i===void 0?void 0:i.resumeUpstream()})}}var ConnectionQuality;(function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Unknown="unknown"})(ConnectionQuality||(ConnectionQuality={}));function qualityFromProto(e){switch(e){case ConnectionQuality$1.EXCELLENT:return ConnectionQuality.Excellent;case ConnectionQuality$1.GOOD:return ConnectionQuality.Good;case ConnectionQuality$1.POOR:return ConnectionQuality.Poor;default:return ConnectionQuality.Unknown}}class Participant extends eventsExports.EventEmitter{constructor(i,t,n,a){super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ConnectionQuality.Unknown,this.setMaxListeners(100),this.sid=i,this.identity=t,this.name=n,this.metadata=a,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(i){for(const[,t]of this.tracks)if(t.source===i)return t}getTrackByName(i){for(const[,t]of this.tracks)if(t.trackName===i)return t}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var i;const t=this.getTrack(Track.Source.Camera);return!(!((i=t==null?void 0:t.isMuted)!==null&&i!==void 0)||i)}get isMicrophoneEnabled(){var i;const t=this.getTrack(Track.Source.Microphone);return!(!((i=t==null?void 0:t.isMuted)!==null&&i!==void 0)||i)}get isScreenShareEnabled(){return!!this.getTrack(Track.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(this.participantInfo.joinedAt*1e3):new Date}updateInfo(i){return this.participantInfo&&this.participantInfo.sid===i.sid&&this.participantInfo.version>i.version?!1:(this.identity=i.identity,this.sid=i.sid,this.setName(i.name),this.setMetadata(i.metadata),i.permission&&this.setPermissions(i.permission),this.participantInfo=i,livekitLogger.trace("update participant info",{info:i}),!0)}setMetadata(i){const t=this.metadata!==i,n=this.metadata;this.metadata=i,t&&this.emit(ParticipantEvent.ParticipantMetadataChanged,n)}setName(i){const t=this.name!==i;this.name=i,t&&this.emit(ParticipantEvent.ParticipantNameChanged,i)}setPermissions(i){var t,n,a,o,d;const s=this.permissions,u=i.canPublish!==((t=this.permissions)===null||t===void 0?void 0:t.canPublish)||i.canSubscribe!==((n=this.permissions)===null||n===void 0?void 0:n.canSubscribe)||i.canPublishData!==((a=this.permissions)===null||a===void 0?void 0:a.canPublishData)||i.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||i.recorder!==((d=this.permissions)===null||d===void 0?void 0:d.recorder)||i.canPublishSources.length!==this.permissions.canPublishSources.length||i.canPublishSources.some((c,h)=>{var p;return c!==((p=this.permissions)===null||p===void 0?void 0:p.canPublishSources[h])});return this.permissions=i,u&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,s),u}setIsSpeaking(i){i!==this.isSpeaking&&(this.isSpeaking=i,i&&(this.lastSpokeAt=new Date),this.emit(ParticipantEvent.IsSpeakingChanged,i))}setConnectionQuality(i){const t=this._connectionQuality;this._connectionQuality=qualityFromProto(i),t!==this._connectionQuality&&this.emit(ParticipantEvent.ConnectionQualityChanged,this._connectionQuality)}addTrackPublication(i){i.on(TrackEvent.Muted,()=>{this.emit(ParticipantEvent.TrackMuted,i)}),i.on(TrackEvent.Unmuted,()=>{this.emit(ParticipantEvent.TrackUnmuted,i)});const t=i;switch(t.track&&(t.track.sid=i.trackSid),this.tracks.set(i.trackSid,i),i.kind){case Track.Kind.Audio:this.audioTracks.set(i.trackSid,i);break;case Track.Kind.Video:this.videoTracks.set(i.trackSid,i);break}}}function trackPermissionToProto(e){var i,t,n;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return{participantIdentity:(i=e.participantIdentity)!==null&&i!==void 0?i:"",participantSid:(t=e.participantSid)!==null&&t!==void 0?t:"",allTracks:(n=e.allowAll)!==null&&n!==void 0?n:!1,trackSids:e.allowedTrackSids||[]}}class RemoteTrackPublication extends TrackPublication{constructor(i,t,n){super(i,t.sid,t.name),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=VideoQuality.HIGH,this.handleEnded=a=>{this.setTrack(void 0),this.emit(TrackEvent.Ended,a)},this.handleVisibilityChange=a=>{livekitLogger.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(a),{trackSid:this.trackSid}),this.disabled=!a,this.emitTrackUpdate()},this.handleVideoDimensionsChange=a=>{livekitLogger.debug("adaptivestream video dimensions ".concat(a.width,"x").concat(a.height),{trackSid:this.trackSid}),this.videoDimensions=a,this.emitTrackUpdate()},this.subscribed=n,this.updateInfo(t)}setSubscribed(i){const t=this.subscriptionStatus,n=this.permissionStatus;this.subscribed=i,i&&(this.allowed=!0);const a={trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[{participantSid:"",trackSids:[this.trackSid]}]};this.emit(TrackEvent.UpdateSubscription,a),this.emitSubscriptionUpdateIfChanged(t),this.emitPermissionUpdateIfChanged(n)}get subscriptionStatus(){return this.subscribed===!1?TrackPublication.SubscriptionStatus.Unsubscribed:super.isSubscribed?TrackPublication.SubscriptionStatus.Subscribed:TrackPublication.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?TrackPublication.PermissionStatus.Allowed:TrackPublication.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(i){!this.isManualOperationAllowed()||this.disabled===!i||(this.disabled=!i,this.emitTrackUpdate())}setVideoQuality(i){!this.isManualOperationAllowed()||this.currentVideoQuality===i||(this.currentVideoQuality=i,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(i){var t,n;this.isManualOperationAllowed()&&(((t=this.videoDimensions)===null||t===void 0?void 0:t.width)===i.width&&((n=this.videoDimensions)===null||n===void 0?void 0:n.height)===i.height||(this.track instanceof RemoteVideoTrack&&(this.videoDimensions=i),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(i){this.isManualOperationAllowed()&&this.track instanceof RemoteVideoTrack&&this.fps!==i&&(this.fps=i,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(i){const t=this.subscriptionStatus,n=this.permissionStatus,a=this.track;a!==i&&(a&&(a.off(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),a.off(TrackEvent.VisibilityChanged,this.handleVisibilityChange),a.off(TrackEvent.Ended,this.handleEnded),a.detach(),a.stopMonitor(),this.emit(TrackEvent.Unsubscribed,a)),super.setTrack(i),i&&(i.sid=this.trackSid,i.on(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.on(TrackEvent.VisibilityChanged,this.handleVisibilityChange),i.on(TrackEvent.Ended,this.handleEnded),this.emit(TrackEvent.Subscribed,i)),this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t))}setAllowed(i){const t=this.subscriptionStatus,n=this.permissionStatus;this.allowed=i,this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t)}updateInfo(i){super.updateInfo(i);const t=this.metadataMuted;this.metadataMuted=i.muted,this.track?this.track.setMuted(i.muted):t!==i.muted&&this.emit(i.muted?TrackEvent.Muted:TrackEvent.Unmuted)}emitSubscriptionUpdateIfChanged(i){const t=this.subscriptionStatus;i!==t&&this.emit(TrackEvent.SubscriptionStatusChanged,t,i)}emitPermissionUpdateIfChanged(i){this.permissionStatus!==i&&this.emit(TrackEvent.SubscriptionPermissionChanged,this.permissionStatus,i)}isManualOperationAllowed(){return this.kind===Track.Kind.Video&&this.isAdaptiveStream?(livekitLogger.warn("adaptive stream is enabled, cannot change video track settings",{trackSid:this.trackSid}),!1):this.isDesired?!0:(livekitLogger.warn("cannot update track settings when not subscribed",{trackSid:this.trackSid}),!1)}get isAdaptiveStream(){return this.track instanceof RemoteVideoTrack&&this.track.isAdaptiveStream}emitTrackUpdate(){const i=UpdateTrackSettings.fromPartial({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(i.width=this.videoDimensions.width,i.height=this.videoDimensions.height):this.currentVideoQuality!==void 0?i.quality=this.currentVideoQuality:i.quality=VideoQuality.HIGH,this.emit(TrackEvent.UpdateSettings,i)}}class RemoteParticipant extends Participant{static fromParticipantInfo(i,t){return new RemoteParticipant(i,t.sid,t.identity,t.name,t.metadata)}constructor(i,t,n,a,o){super(t,n||"",a,o),this.signalClient=i,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map}addTrackPublication(i){super.addTrackPublication(i),i.on(TrackEvent.UpdateSettings,t=>{livekitLogger.debug("send update settings",t),this.signalClient.sendUpdateTrackSettings(t)}),i.on(TrackEvent.UpdateSubscription,t=>{t.participantTracks.forEach(n=>{n.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(t)}),i.on(TrackEvent.SubscriptionPermissionChanged,t=>{this.emit(ParticipantEvent.TrackSubscriptionPermissionChanged,i,t)}),i.on(TrackEvent.SubscriptionStatusChanged,t=>{this.emit(ParticipantEvent.TrackSubscriptionStatusChanged,i,t)}),i.on(TrackEvent.Subscribed,t=>{this.emit(ParticipantEvent.TrackSubscribed,t,i)}),i.on(TrackEvent.Unsubscribed,t=>{this.emit(ParticipantEvent.TrackUnsubscribed,t,i)})}getTrack(i){const t=super.getTrack(i);if(t)return t}getTrackByName(i){const t=super.getTrackByName(i);if(t)return t}setVolume(i){this.volume=i;const t=this.getTrack(Track.Source.Microphone);t&&t.track&&t.track.setVolume(i)}getVolume(){const i=this.getTrack(Track.Source.Microphone);return i&&i.track?i.track.getVolume():this.volume}addSubscribedMediaTrack(i,t,n,a,o,d){let s=this.getTrackPublication(t);if(s||t.startsWith("TR")||this.tracks.forEach(h=>{!s&&i.kind===h.kind.toString()&&(s=h)}),!s){if(d===0){livekitLogger.error("could not find published track",{participant:this.sid,trackSid:t}),this.emit(ParticipantEvent.TrackSubscriptionFailed,t);return}d===void 0&&(d=20),setTimeout(()=>{this.addSubscribedMediaTrack(i,t,n,a,o,d-1)},150);return}if(i.readyState==="ended"){livekitLogger.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",{participant:this.sid,trackSid:t}),this.emit(ParticipantEvent.TrackSubscriptionFailed,t);return}const u=i.kind==="video";let c;return u?c=new RemoteVideoTrack(i,t,a,o):c=new RemoteAudioTrack(i,t,a,this.audioContext,this.audioOutput),c.source=s.source,c.isMuted=s.isMuted,c.setMediaStream(n),c.start(),s.setTrack(c),this.volume!==void 0&&c instanceof RemoteAudioTrack&&c.source===Track.Source.Microphone&&c.setVolume(this.volume),s}get hasMetadata(){return!!this.participantInfo}getTrackPublication(i){return this.tracks.get(i)}updateInfo(i){if(!super.updateInfo(i))return!1;const t=new Map,n=new Map;return i.tracks.forEach(a=>{var o;let d=this.getTrackPublication(a.sid);if(d)d.updateInfo(a);else{const s=Track.kindFromProto(a.type);if(!s)return;d=new RemoteTrackPublication(s,a,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe),d.updateInfo(a),n.set(a.sid,d);const u=Array.from(this.tracks.values()).find(c=>c.source===(d==null?void 0:d.source));u&&d.source!==Track.Source.Unknown&&livekitLogger.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(d.source),{oldTrack:u,newTrack:d,participant:this,participantInfo:i}),this.addTrackPublication(d)}t.set(a.sid,d)}),this.tracks.forEach(a=>{t.has(a.trackSid)||(livekitLogger.trace("detected removed track on remote participant, unpublishing",{publication:a,participantSid:this.sid}),this.unpublishTrack(a.trackSid,!0))}),n.forEach(a=>{this.emit(ParticipantEvent.TrackPublished,a)}),!0}unpublishTrack(i,t){const n=this.tracks.get(i);if(!n)return;const{track:a}=n;switch(a&&(a.stop(),n.setTrack(void 0)),this.tracks.delete(i),n.kind){case Track.Kind.Audio:this.audioTracks.delete(i);break;case Track.Kind.Video:this.videoTracks.delete(i);break}t&&this.emit(ParticipantEvent.TrackUnpublished,n)}setAudioContext(i){this.audioContext=i,this.audioTracks.forEach(t=>t.track instanceof RemoteAudioTrack&&t.track.setAudioContext(i))}setAudioOutput(i){return __awaiter(this,void 0,void 0,function*(){this.audioOutput=i;const t=[];this.audioTracks.forEach(n=>{var a;n.track instanceof RemoteAudioTrack&&t.push(n.track.setSinkId((a=i.deviceId)!==null&&a!==void 0?a:"default"))}),yield Promise.all(t)})}emit(i){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return livekitLogger.trace("participant event",{participant:this.sid,event:i,args:n}),super.emit(i,...n)}}function mediaTrackToLocalTrack(e,i){switch(e.kind){case"audio":return new LocalAudioTrack(e,i,!1);case"video":return new LocalVideoTrack(e,i,!1);default:throw new TrackInvalidError("unsupported track type: ".concat(e.kind))}}const presets169=Object.values(VideoPresets),presets43=Object.values(VideoPresets43),presetsScreenShare=Object.values(ScreenSharePresets),defaultSimulcastPresets169=[VideoPresets.h180,VideoPresets.h360],defaultSimulcastPresets43=[VideoPresets43.h180,VideoPresets43.h360],computeDefaultScreenShareSimulcastPresets=e=>[{scaleResolutionDownBy:2,fps:3}].map(t=>{var n;return new VideoPreset(Math.floor(e.width/t.scaleResolutionDownBy),Math.floor(e.height/t.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(t.scaleResolutionDownBy,2)*(((n=e.encoding.maxFramerate)!==null&&n!==void 0?n:30)/t.fps)))),t.fps,e.encoding.priority)}),videoRids=["q","h","f"];function computeVideoEncodings(e,i,t,n){var a,o;let d=n==null?void 0:n.videoEncoding;e&&(d=n==null?void 0:n.screenShareEncoding);const s=n==null?void 0:n.simulcast,u=n==null?void 0:n.scalabilityMode,c=n==null?void 0:n.videoCodec;if(!d&&!s&&!u||!i||!t)return[{}];d||(d=determineAppropriateEncoding(e,i,t,c),livekitLogger.debug("using video encoding",d));const h=new VideoPreset(i,t,d.maxBitrate,d.maxFramerate);if(u&&isSVCCodec(c)){livekitLogger.debug("using svc with scalabilityMode ".concat(u));const f=[];switch(u){case"L3T3":for(let m=0;m<3;m+=1)f.push({rid:videoRids[2-m],scaleResolutionDownBy:Math.pow(2,m),maxBitrate:d.maxBitrate/Math.pow(3,m),maxFramerate:h.encoding.maxFramerate,scalabilityMode:"L3T3"});return livekitLogger.debug("encodings",f),f;default:throw new Error("unsupported scalabilityMode: ".concat(u))}}if(!s)return[d];let p=[];e?p=(a=sortPresets(n==null?void 0:n.screenShareSimulcastLayers))!==null&&a!==void 0?a:defaultSimulcastLayers(e,h):p=(o=sortPresets(n==null?void 0:n.videoSimulcastLayers))!==null&&o!==void 0?o:defaultSimulcastLayers(e,h);let l;if(p.length>0){const f=p[0];p.length>1&&([,l]=p);const m=Math.max(i,t);if(m>=960&&l)return encodingsFromPresets(i,t,[f,l,h]);if(m>=480)return encodingsFromPresets(i,t,[f,h])}return encodingsFromPresets(i,t,[h])}function computeTrackBackupEncodings(e,i,t){var n,a,o,d;if(!t.backupCodec||t.backupCodec.codec===t.videoCodec)return;i!==t.backupCodec.codec&&livekitLogger.warn("requested a different codec than specified as backup",{serverRequested:i,backup:t.backupCodec.codec}),t.videoCodec=i,t.videoEncoding=t.backupCodec.encoding;const s=e.mediaStreamTrack.getSettings(),u=(n=s.width)!==null&&n!==void 0?n:(a=e.dimensions)===null||a===void 0?void 0:a.width,c=(o=s.height)!==null&&o!==void 0?o:(d=e.dimensions)===null||d===void 0?void 0:d.height;return computeVideoEncodings(e.source===Track.Source.ScreenShare,u,c,t)}function determineAppropriateEncoding(e,i,t,n){const a=presetsForResolution(e,i,t);let{encoding:o}=a[0];const d=Math.max(i,t);for(let s=0;s<a.length;s+=1){const u=a[s];if(o=u.encoding,u.width>=d)break}if(n)switch(n){case"av1":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function presetsForResolution(e,i,t){if(e)return presetsScreenShare;const n=i>t?i/t:t/i;return Math.abs(n-16/9)<Math.abs(n-4/3)?presets169:presets43}function defaultSimulcastLayers(e,i){if(e)return computeDefaultScreenShareSimulcastPresets(i);const{width:t,height:n}=i,a=t>n?t/n:n/t;return Math.abs(a-16/9)<Math.abs(a-4/3)?defaultSimulcastPresets169:defaultSimulcastPresets43}function encodingsFromPresets(e,i,t){const n=[];return t.forEach((a,o)=>{if(o>=videoRids.length)return;const d=Math.min(e,i),u={rid:videoRids[o],scaleResolutionDownBy:Math.max(1,d/Math.min(a.width,a.height)),maxBitrate:a.encoding.maxBitrate};a.encoding.maxFramerate&&(u.maxFramerate=a.encoding.maxFramerate),a.encoding.priority&&(u.priority=a.encoding.priority,u.networkPriority=a.encoding.priority),n.push(u)}),n}function sortPresets(e){if(e)return e.sort((i,t)=>{const{encoding:n}=i,{encoding:a}=t;return n.maxBitrate>a.maxBitrate?1:n.maxBitrate<a.maxBitrate?-1:n.maxBitrate===a.maxBitrate&&n.maxFramerate&&a.maxFramerate?n.maxFramerate>a.maxFramerate?1:-1:0})}class LocalParticipant extends Participant{constructor(i,t,n,a){super(i,t),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Future)},this.handleReconnected=()=>{var o,d;(d=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||d===void 0||d.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var o,d;(d=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||d===void 0||d.call(o,"Got disconnected during publishing attempt"),this.reconnectFuture=void 0},this.updateTrackSubscriptionPermissions=()=>{livekitLogger.debug("updating track subscription permissions",{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions}),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>trackPermissionToProto(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,d)=>{if(d===void 0&&(d=!0),!o.sid){livekitLogger.error("could not update mute status for unpublished track",o);return}this.engine.updateMuteStatus(o.sid,d)},this.onTrackUpstreamPaused=o=>{livekitLogger.debug("upstream paused"),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{livekitLogger.debug("upstream resumed"),this.onTrackMuted(o,o.isMuted)},this.handleSubscribedQualityUpdate=o=>__awaiter(this,void 0,void 0,function*(){var d,s,u,c,h,p;if(!(!((h=this.roomOptions)===null||h===void 0)&&h.dynacast))return;const l=this.videoTracks.get(o.trackSid);if(!l){livekitLogger.warn("received subscribed quality update for unknown track",{method:"handleSubscribedQualityUpdate",sid:o.trackSid});return}if(o.subscribedCodecs.length>0){if(!l.videoTrack)return;const E=yield l.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var f=!0,m=__asyncValues(E),v;v=yield m.next(),d=v.done,!d;){c=v.value,f=!1;try{const k=c;isBackupCodec(k)&&(livekitLogger.debug("publish ".concat(k," for ").concat(l.videoTrack.sid)),yield this.publishAdditionalCodecForTrack(l.videoTrack,k,l.options))}finally{f=!0}}}catch(k){s={error:k}}finally{try{!f&&!d&&(u=m.return)&&(yield u.call(m))}finally{if(s)throw s.error}}}else o.subscribedQualities.length>0&&(yield(p=l.videoTrack)===null||p===void 0?void 0:p.setPublishingLayers(o.subscribedQualities))}),this.handleLocalTrackUnpublished=o=>{const d=this.tracks.get(o.trackSid);if(!d){livekitLogger.warn("received unpublished event for unknown track",{method:"handleLocalTrackUnpublished",trackSid:o.trackSid});return}this.unpublishTrack(d.track)},this.handleTrackEnded=o=>__awaiter(this,void 0,void 0,function*(){if(o.source===Track.Source.ScreenShare||o.source===Track.Source.ScreenShareAudio)livekitLogger.debug("unpublishing local track due to TrackEnded",{track:o.sid}),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(o instanceof LocalAudioTrack||o instanceof LocalVideoTrack)try{if(isWeb())try{const d=yield navigator==null?void 0:navigator.permissions.query({name:o.source===Track.Source.Camera?"camera":"microphone"});if(d&&d.state==="denied")throw livekitLogger.warn("user has revoked access to ".concat(o.source)),d.onchange=()=>{d.state!=="denied"&&(o.isMuted||o.restartTrack(),d.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(livekitLogger.debug("track ended, attempting to use a different device"),yield o.restartTrack())}catch{livekitLogger.warn("could not restart track, muting instead"),yield o.mute()}}),this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=n,this.roomOptions=a,this.setupEngine(n)}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}getTrack(i){const t=super.getTrack(i);if(t)return t}getTrackByName(i){const t=super.getTrackByName(i);if(t)return t}setupEngine(i){this.engine=i,this.engine.client.onRemoteMuteChanged=(t,n)=>{const a=this.tracks.get(t);!a||!a.track||(n?a.mute():a.unmute())},this.engine.client.onSubscribedQualityUpdate=this.handleSubscribedQualityUpdate,this.engine.client.onLocalTrackUnpublished=this.handleLocalTrackUnpublished,this.engine.on(EngineEvent.Connected,this.handleReconnected).on(EngineEvent.Restarted,this.handleReconnected).on(EngineEvent.Resumed,this.handleReconnected).on(EngineEvent.Restarting,this.handleReconnecting).on(EngineEvent.Resuming,this.handleReconnecting).on(EngineEvent.Disconnected,this.handleDisconnected)}setMetadata(i){var t;super.setMetadata(i),this.engine.client.sendUpdateLocalMetadata(i,(t=this.name)!==null&&t!==void 0?t:"")}setName(i){var t;super.setName(i),this.engine.client.sendUpdateLocalMetadata((t=this.metadata)!==null&&t!==void 0?t:"",i)}setCameraEnabled(i,t,n){return this.setTrackEnabled(Track.Source.Camera,i,t,n)}setMicrophoneEnabled(i,t,n){return this.setTrackEnabled(Track.Source.Microphone,i,t,n)}setScreenShareEnabled(i,t,n){return this.setTrackEnabled(Track.Source.ScreenShare,i,t,n)}setTrackEnabled(i,t,n,a){var o,d;return __awaiter(this,void 0,void 0,function*(){livekitLogger.debug("setTrackEnabled",{source:i,enabled:t});let s=this.getTrack(i);if(t)if(s)yield s.unmute();else{let u;if(this.pendingPublishing.has(i)){livekitLogger.info("skipping duplicate published source",{source:i});return}this.pendingPublishing.add(i);try{switch(i){case Track.Source.Camera:u=yield this.createTracks({video:(o=n)!==null&&o!==void 0?o:!0});break;case Track.Source.Microphone:u=yield this.createTracks({audio:(d=n)!==null&&d!==void 0?d:!0});break;case Track.Source.ScreenShare:u=yield this.createScreenTracks(Object.assign({},n));break;default:throw new TrackInvalidError(i)}const c=[];for(const p of u)livekitLogger.info("publishing track",{localTrack:p}),c.push(this.publishTrack(p,a));[s]=yield Promise.all(c)}catch(c){throw c instanceof Error&&!(c instanceof TrackInvalidError)&&this.emit(ParticipantEvent.MediaDevicesError,c),c}finally{this.pendingPublishing.delete(i)}}else if(s&&s.track)if(i===Track.Source.ScreenShare){s=yield this.unpublishTrack(s.track);const u=this.getTrack(Track.Source.ScreenShareAudio);u&&u.track&&this.unpublishTrack(u.track)}else yield s.mute();return s})}enableCameraAndMicrophone(){return __awaiter(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Track.Source.Camera)||this.pendingPublishing.has(Track.Source.Microphone))){this.pendingPublishing.add(Track.Source.Camera),this.pendingPublishing.add(Track.Source.Microphone);try{const i=yield this.createTracks({audio:!0,video:!0});yield Promise.all(i.map(t=>this.publishTrack(t)))}finally{this.pendingPublishing.delete(Track.Source.Camera),this.pendingPublishing.delete(Track.Source.Microphone)}}})}createTracks(i){var t,n;return __awaiter(this,void 0,void 0,function*(){const a=mergeDefaultOptions(i,(t=this.roomOptions)===null||t===void 0?void 0:t.audioCaptureDefaults,(n=this.roomOptions)===null||n===void 0?void 0:n.videoCaptureDefaults),o=constraintsForOptions(a);let d;try{d=yield navigator.mediaDevices.getUserMedia(o)}catch(s){throw s instanceof Error&&(o.audio&&(this.microphoneError=s),o.video&&(this.cameraError=s)),s}return o.audio&&(this.microphoneError=void 0),o.video&&(this.cameraError=void 0),d.getTracks().map(s=>{const u=s.kind==="audio";u?i.audio:i.video;let c;const h=u?o.audio:o.video;typeof h!="boolean"&&(c=h);const p=mediaTrackToLocalTrack(s,c);return p.kind===Track.Kind.Video?p.source=Track.Source.Camera:p.kind===Track.Kind.Audio&&(p.source=Track.Source.Microphone),p.mediaStream=d,p})})}createScreenTracks(i){var t;return __awaiter(this,void 0,void 0,function*(){i===void 0&&(i={}),i.resolution===void 0&&(i.resolution=ScreenSharePresets.h1080fps15.resolution);let n=!0;if(i.resolution&&(isSafari()?n={width:{max:i.resolution.width},height:{max:i.resolution.height},frameRate:i.resolution.frameRate}:n={width:{ideal:i.resolution.width},height:{ideal:i.resolution.height},frameRate:i.resolution.frameRate}),navigator.mediaDevices.getDisplayMedia===void 0)throw new DeviceUnsupportedError("getDisplayMedia not supported");const a=yield navigator.mediaDevices.getDisplayMedia({audio:(t=i.audio)!==null&&t!==void 0?t:!1,video:n,controller:i.controller,selfBrowserSurface:i.selfBrowserSurface,surfaceSwitching:i.surfaceSwitching,systemAudio:i.systemAudio}),o=a.getVideoTracks();if(o.length===0)throw new TrackInvalidError("no video track found");const d=new LocalVideoTrack(o[0],void 0,!1);d.source=Track.Source.ScreenShare;const s=[d];if(a.getAudioTracks().length>0){const u=new LocalAudioTrack(a.getAudioTracks()[0],void 0,!1);u.source=Track.Source.ScreenShareAudio,s.push(u)}return s})}publishTrack(i,t){var n,a,o;return __awaiter(this,void 0,void 0,function*(){if(yield(n=this.reconnectFuture)===null||n===void 0?void 0:n.promise,i instanceof LocalTrack&&this.pendingPublishPromises.has(i)&&(yield this.pendingPublishPromises.get(i)),i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new LocalAudioTrack(i,void 0,!0);break;case"video":i=new LocalVideoTrack(i,void 0,!0);break;default:throw new TrackInvalidError("unsupported MediaStreamTrack kind ".concat(i.kind))}let d;if(this.tracks.forEach(h=>{h.track&&h.track===i&&(d=h)}),d)return livekitLogger.warn("track has already been published, skipping"),d;const s=(t==null?void 0:t.forceStereo)||"channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2;s&&(t||(t={}),t.dtx===void 0&&livekitLogger.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work."),t.red===void 0&&livekitLogger.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(a=t.dtx)!==null&&a!==void 0||(t.dtx=!1),(o=t.red)!==null&&o!==void 0||(t.red=!1));const u=Object.assign(Object.assign({},this.roomOptions.publishDefaults),t);u.source&&(i.source=u.source);const c=this.publish(i,u,t,s);this.pendingPublishPromises.set(i,c);try{return yield c}catch(h){throw h}finally{this.pendingPublishPromises.delete(i)}})}publish(i,t,n,a){var o,d,s,u,c,h,p,l,f,m,v,E;return __awaiter(this,void 0,void 0,function*(){const k=Array.from(this.tracks.values()).find(Z=>i instanceof LocalTrack&&Z.source===i.source);if(k&&i.source!==Track.Source.Unknown)try{throw Error("publishing a second track with the same source: ".concat(i.source))}catch(Z){Z instanceof Error&&livekitLogger.warn(Z.message,{oldTrack:k,newTrack:i,trace:Z.stack})}t.stopMicTrackOnMute&&i instanceof LocalAudioTrack&&(i.stopOnMute=!0),i.source===Track.Source.ScreenShare&&isFireFox()&&(t.simulcast=!1),t.videoCodec==="av1"&&!supportsAV1()&&(t.videoCodec=void 0),t.videoCodec==="vp9"&&!supportsVP9()&&(t.videoCodec=void 0),i.on(TrackEvent.Muted,this.onTrackMuted),i.on(TrackEvent.Unmuted,this.onTrackUnmuted),i.on(TrackEvent.Ended,this.handleTrackEnded),i.on(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),i.on(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed);const C=AddTrackRequest.fromPartial({cid:i.mediaStreamTrack.id,name:n==null?void 0:n.name,type:Track.kindToProto(i.kind),muted:i.isMuted,source:Track.sourceToProto(i.source),disableDtx:!(!((o=t.dtx)!==null&&o!==void 0)||o),stereo:a,disableRed:!(!((d=t.red)!==null&&d!==void 0)||d)});let N,P;if(i.kind===Track.Kind.Video){let Z={width:0,height:0};try{Z=yield i.waitForDimensions()}catch{const Y=(u=(s=this.roomOptions.videoCaptureDefaults)===null||s===void 0?void 0:s.resolution)!==null&&u!==void 0?u:VideoPresets.h720.resolution;Z={width:Y.width,height:Y.height},livekitLogger.error("could not determine track dimensions, using defaults",Z)}if(C.width=Z.width,C.height=Z.height,i instanceof LocalVideoTrack&&(isSVCCodec(t.videoCodec)&&(t.scalabilityMode=(c=t.scalabilityMode)!==null&&c!==void 0?c:"L3T3"),t.videoCodec&&t.backupCodec&&t.videoCodec!==t.backupCodec.codec)){const re=Object.assign({},t);re.simulcast=!0,P=computeTrackBackupEncodings(i,t.backupCodec.codec,re),C.simulcastCodecs=[{codec:t.videoCodec,cid:i.mediaStreamTrack.id,enableSimulcastLayers:!0},{codec:t.backupCodec.codec,cid:"",enableSimulcastLayers:!0}]}N=computeVideoEncodings(i.source===Track.Source.ScreenShare,Z.width,Z.height,t),C.layers=videoLayersFromEncodings(C.width,C.height,P??N)}else i.kind===Track.Kind.Audio&&(N=[{maxBitrate:(p=(h=t.audioPreset)===null||h===void 0?void 0:h.maxBitrate)!==null&&p!==void 0?p:t.audioBitrate,priority:(f=(l=t.audioPreset)===null||l===void 0?void 0:l.priority)!==null&&f!==void 0?f:"high",networkPriority:(v=(m=t.audioPreset)===null||m===void 0?void 0:m.priority)!==null&&v!==void 0?v:"high"}]);if(!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const M=yield this.engine.addTrack(C);let L=!1,$=!1;if(M.codecs.forEach(Z=>{isCodecEqual(Z.mimeType,t.videoCodec)?L=!0:t.backupCodec&&isCodecEqual(Z.mimeType,t.backupCodec.codec)&&($=!0)}),C.simulcastCodecs.length>0){if(!L&&!$)throw Error("cannot publish track, codec not supported by server");if(!L&&t.backupCodec){const Z=t.backupCodec;t=Object.assign({},t),livekitLogger.debug("primary codec ".concat(t.videoCodec," not supported, fallback to ").concat(Z.codec)),t.videoCodec=Z.codec,t.videoEncoding=Z.encoding,N=P}}const H=new LocalTrackPublication(i.kind,M,i);if(H.options=t,i.sid=M.sid,!this.engine.publisher)throw new UnexpectedConnectionState("publisher is closed");return livekitLogger.debug("publishing ".concat(i.kind," with encodings"),{encodings:N,trackInfo:M}),i.sender=yield this.engine.createSender(i,t,N),i.codec&&isSVCCodec(i.codec)&&N&&(!((E=N[0])===null||E===void 0)&&E.maxBitrate)&&this.engine.publisher.setTrackCodecBitrate(C.cid,i.codec,N[0].maxBitrate/1e3),this.engine.negotiate(),i instanceof LocalVideoTrack?i.startMonitor(this.engine.client):i instanceof LocalAudioTrack&&i.startMonitor(),this.addTrackPublication(H),this.emit(ParticipantEvent.LocalTrackPublished,H),H})}get isLocal(){return!0}publishAdditionalCodecForTrack(i,t,n){var a;return __awaiter(this,void 0,void 0,function*(){let o;if(this.tracks.forEach(p=>{p.track&&p.track===i&&(o=p)}),!o)throw new TrackInvalidError("track is not published");if(!(i instanceof LocalVideoTrack))throw new TrackInvalidError("track is not a video track");const d=Object.assign(Object.assign({},(a=this.roomOptions)===null||a===void 0?void 0:a.publishDefaults),n),s=computeTrackBackupEncodings(i,t,d);if(!s){livekitLogger.info("backup codec has been disabled, ignoring request to add additional codec for track");return}const u=i.addSimulcastTrack(t,s),c=AddTrackRequest.fromPartial({cid:u.mediaStreamTrack.id,type:Track.kindToProto(i.kind),muted:i.isMuted,source:Track.sourceToProto(i.source),sid:i.sid,simulcastCodecs:[{codec:d.videoCodec,cid:u.mediaStreamTrack.id,enableSimulcastLayers:d.simulcast}]});if(c.layers=videoLayersFromEncodings(c.width,c.height,s),!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const h=yield this.engine.addTrack(c);yield this.engine.createSimulcastSender(i,u,d,s),this.engine.negotiate(),livekitLogger.debug("published ".concat(t," for track ").concat(i.sid),{encodings:s,trackInfo:h})})}unpublishTrack(i,t){var n,a;return __awaiter(this,void 0,void 0,function*(){const o=this.getPublicationForTrack(i);if(livekitLogger.debug("unpublishing track",{track:i,method:"unpublishTrack"}),!o||!o.track){livekitLogger.warn("track was not unpublished because no publication was found",{track:i,method:"unpublishTrack"});return}i=o.track,i.off(TrackEvent.Muted,this.onTrackMuted),i.off(TrackEvent.Unmuted,this.onTrackUnmuted),i.off(TrackEvent.Ended,this.handleTrackEnded),i.off(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),i.off(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed),t===void 0&&(t=(a=(n=this.roomOptions)===null||n===void 0?void 0:n.stopLocalTrackOnUnpublish)!==null&&a!==void 0?a:!0),t&&i.stop();let d=!1;const s=i.sender;if(i.sender=void 0,this.engine.publisher&&this.engine.publisher.pc.connectionState!=="closed"&&s)try{if(this.engine.removeTrack(s)&&(d=!0),i instanceof LocalVideoTrack){for(const[,u]of i.simulcastCodecs)u.sender&&(this.engine.removeTrack(u.sender)&&(d=!0),u.sender=void 0);i.simulcastCodecs.clear()}}catch(u){livekitLogger.warn("failed to unpublish track",{error:u,method:"unpublishTrack"})}switch(this.tracks.delete(o.trackSid),o.kind){case Track.Kind.Audio:this.audioTracks.delete(o.trackSid);break;case Track.Kind.Video:this.videoTracks.delete(o.trackSid);break}return this.emit(ParticipantEvent.LocalTrackUnpublished,o),o.setTrack(void 0),d&&(yield this.engine.negotiate()),o})}unpublishTracks(i){return __awaiter(this,void 0,void 0,function*(){return(yield Promise.all(i.map(n=>this.unpublishTrack(n)))).filter(n=>n instanceof LocalTrackPublication)})}republishAllTracks(i){return __awaiter(this,void 0,void 0,function*(){const t=[];this.tracks.forEach(n=>{n.track&&(i&&(n.options=Object.assign(Object.assign({},n.options),i)),t.push(n))}),yield Promise.all(t.map(n=>__awaiter(this,void 0,void 0,function*(){const a=n.track;yield this.unpublishTrack(a,!1),yield this.publishTrack(a,n.options)})))})}publishData(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return __awaiter(this,void 0,void 0,function*(){const a=Array.isArray(n)?n:n==null?void 0:n.destination,o=[],d=Array.isArray(n)?void 0:n.topic;a!==void 0&&a.forEach(u=>{u instanceof RemoteParticipant?o.push(u.sid):o.push(u)});const s={kind:t,value:{$case:"user",user:{participantSid:this.sid,payload:i,destinationSids:o,topic:d}}};yield this.engine.sendDataPacket(s,t)})}setTrackSubscriptionPermissions(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=t,this.allParticipantsAllowedToSubscribe=i,this.engine.client.isConnected&&this.updateTrackSubscriptionPermissions()}updateInfo(i){return i.sid!==this.sid||!super.updateInfo(i)?!1:(i.tracks.forEach(t=>{var n,a;const o=this.tracks.get(t.sid);if(o){const d=o.isMuted||((a=(n=o.track)===null||n===void 0?void 0:n.isUpstreamPaused)!==null&&a!==void 0?a:!1);d!==t.muted&&(livekitLogger.debug("updating server mute state after reconcile",{sid:t.sid,muted:d}),this.engine.client.sendMuteTrack(t.sid,d))}}),!0)}getPublicationForTrack(i){let t;return this.tracks.forEach(n=>{const a=n.track;a&&(i instanceof MediaStreamTrack?(a instanceof LocalAudioTrack||a instanceof LocalVideoTrack)&&a.mediaStreamTrack===i&&(t=n):i===a&&(t=n))}),t}publishedTracksInfo(){const i=[];return this.tracks.forEach(t=>{t.track!==void 0&&i.push({cid:t.track.mediaStreamID,track:t.trackInfo})}),i}dataChannelsInfo(){const i=[],t=(n,a)=>{(n==null?void 0:n.id)!==void 0&&n.id!==null&&i.push({label:n.label,id:n.id,target:a})};return t(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY),SignalTarget.PUBLISHER),t(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE),SignalTarget.PUBLISHER),t(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY,!0),SignalTarget.SUBSCRIBER),t(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE,!0),SignalTarget.SUBSCRIBER),i}}var ConnectionState;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting"})(ConnectionState||(ConnectionState={}));const connectionReconcileFrequency=2*1e3;class Room extends eventsExports.EventEmitter{constructor(i){var t;super(),t=this,this.state=ConnectionState.Disconnected,this.activeSpeakers=[],this.audioEnabled=!0,this.connect=(n,a,o)=>__awaiter(this,void 0,void 0,function*(){const d=yield this.disconnectLock.lock();if(this.state===ConnectionState.Connected)return livekitLogger.info("already connected to room ".concat(this.name)),d(),Promise.resolve();if(this.connectFuture)return d(),this.connectFuture.promise;this.setAndEmitConnectionState(ConnectionState.Connecting);const s=new RegionUrlProvider(n,a),u=(c,h,p)=>__awaiter(this,void 0,void 0,function*(){var l;this.abortController&&this.abortController.abort(),this.abortController=new AbortController,d==null||d();try{yield this.attemptConnection(p??n,a,o,this.abortController),this.abortController=void 0,c()}catch(f){if(isCloud(new URL(n))&&f instanceof ConnectionError&&f.reason!==3){let m=null;try{m=yield s.getNextBestRegionUrl((l=this.abortController)===null||l===void 0?void 0:l.signal)}catch(v){if(v instanceof ConnectionError&&(v.status===401||v.reason===3)){h(v);return}}m?(livekitLogger.debug("initial connection failed, retrying with another region"),yield u(c,h,m)):h(f)}else h(f)}});return this.connectFuture=new Future(u,()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(n,a,o,d,s,u)=>__awaiter(this,void 0,void 0,function*(){const c=yield o.join(n,a,{autoSubscribe:d.autoSubscribe,publishOnly:d.publishOnly,adaptiveStream:typeof s.adaptiveStream=="object"?!0:s.adaptiveStream,maxRetries:d.maxRetries},u.signal);let h=c.serverInfo;if(h||(h={version:c.serverVersion,region:c.serverRegion}),livekitLogger.debug("connected to Livekit Server ".concat(Object.entries(h).map(p=>{let[l,f]=p;return"".concat(l,": ").concat(f)}).join(", "))),!c.serverVersion)throw new UnsupportedServer("unknown server version");return c.serverVersion==="0.15.1"&&this.options.dynacast&&(livekitLogger.debug("disabling dynacast due to server version"),s.dynacast=!1),c}),this.applyJoinResponse=n=>{const a=n.participant;this.localParticipant.sid=a.sid,this.localParticipant.identity=a.identity,this.handleParticipantUpdates([a,...n.otherParticipants]),n.room&&this.handleRoomUpdate(n.room)},this.attemptConnection=(n,a,o,d)=>__awaiter(this,void 0,void 0,function*(){var s;this.state===ConnectionState.Reconnecting?(livekitLogger.info("Reconnection attempt replaced by new connection attempt"),this.recreateEngine()):this.maybeCreateEngine(),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},roomConnectOptionDefaults),o),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const u=yield this.connectSignal(n,a,this.engine,this.connOptions,this.options,d);this.applyJoinResponse(u),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected)}catch(u){this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish);const c=new ConnectionError("could not establish signal connection");throw u instanceof Error&&(c.message="".concat(c.message,": ").concat(u.message)),u instanceof ConnectionError&&(c.reason=u.reason,c.status=u.status),livekitLogger.debug("error trying to establish signal connection",{error:u}),c}if(d.signal.aborted)throw this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),new ConnectionError("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,d)}catch(u){throw this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),u}isWeb()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave),(s=navigator.mediaDevices)===null||s===void 0||s.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return __awaiter(t,void 0,void 0,function*(){var a,o,d,s;const u=yield this.disconnectLock.lock();try{if(this.state===ConnectionState.Disconnected){livekitLogger.debug("already disconnected");return}livekitLogger.info("disconnect from room",{identity:this.localParticipant.identity}),(this.state===ConnectionState.Connecting||this.state===ConnectionState.Reconnecting)&&(livekitLogger.warn("abort connection attempt"),(a=this.abortController)===null||a===void 0||a.abort(),(d=(o=this.connectFuture)===null||o===void 0?void 0:o.reject)===null||d===void 0||d.call(o,new ConnectionError("Client initiated disconnect")),this.connectFuture=void 0),!((s=this.engine)===null||s===void 0)&&s.client.isConnected&&(yield this.engine.client.sendLeave()),this.engine&&(yield this.engine.close()),this.handleDisconnect(n,DisconnectReason.CLIENT_INITIATED),this.engine=void 0}finally{u()}})},this.onPageLeave=()=>__awaiter(this,void 0,void 0,function*(){yield this.disconnect()}),this.handleRestarting=()=>{this.clearConnectionReconcile();for(const n of this.participants.values())this.handleParticipantDisconnected(n.sid,n);this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)},this.handleSignalRestarted=n=>__awaiter(this,void 0,void 0,function*(){livekitLogger.debug("signal reconnected to server",{region:n.serverRegion}),this.cachedParticipantSids=[],this.applyJoinResponse(n);try{const a=[];this.localParticipant.tracks.forEach(o=>{o.track&&a.push(o)}),yield Promise.all(a.map(o=>__awaiter(this,void 0,void 0,function*(){const d=o.track;this.localParticipant.unpublishTrack(d,!1),d.isMuted||((d instanceof LocalAudioTrack||d instanceof LocalVideoTrack)&&!d.isUserProvided&&(livekitLogger.debug("restarting existing track",{track:o.trackSid}),yield d.restartTrack()),livekitLogger.debug("publishing new track",{track:o.trackSid}),yield this.localParticipant.publishTrack(d,o.options))})))}catch(a){livekitLogger.error("error trying to re-publish tracks after reconnection",{error:a})}try{yield this.engine.waitForRestarted(),livekitLogger.debug("fully reconnected to server",{region:n.serverRegion})}catch{return}this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected),this.registerConnectionReconcile(),this.participants.forEach(a=>{this.emit(RoomEvent.ParticipantConnected,a)})}),this.handleParticipantUpdates=n=>{n.forEach(a=>{if(a.identity===this.localParticipant.identity){this.localParticipant.updateInfo(a);return}const o=this.identityToSid.get(a.identity);o&&o!==a.sid&&this.handleParticipantDisconnected(o,this.participants.get(o));let d=this.participants.get(a.sid);const s=!d;a.state===ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(a.sid,d):(d=this.getOrCreateParticipant(a.sid,a),s||d.updateInfo(a))})},this.handleActiveSpeakersUpdate=n=>{const a=[],o={};n.forEach(d=>{if(o[d.sid]=!0,d.sid===this.localParticipant.sid)this.localParticipant.audioLevel=d.level,this.localParticipant.setIsSpeaking(!0),a.push(this.localParticipant);else{const s=this.participants.get(d.sid);s&&(s.audioLevel=d.level,s.setIsSpeaking(!0),a.push(s))}}),o[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(d=>{o[d.sid]||(d.audioLevel=0,d.setIsSpeaking(!1))}),this.activeSpeakers=a,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,a)},this.handleSpeakersChanged=n=>{const a=new Map;this.activeSpeakers.forEach(d=>{a.set(d.sid,d)}),n.forEach(d=>{let s=this.participants.get(d.sid);d.sid===this.localParticipant.sid&&(s=this.localParticipant),s&&(s.audioLevel=d.level,s.setIsSpeaking(d.active),d.active?a.set(d.sid,s):a.delete(d.sid))});const o=Array.from(a.values());o.sort((d,s)=>s.audioLevel-d.audioLevel),this.activeSpeakers=o,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,o)},this.handleStreamStateUpdate=n=>{n.streamStates.forEach(a=>{const o=this.participants.get(a.participantSid);if(!o)return;const d=o.getTrackPublication(a.trackSid);!d||!d.track||(d.track.streamState=Track.streamStateFromProto(a.state),o.emit(ParticipantEvent.TrackStreamStateChanged,d,d.track.streamState),this.emitWhenConnected(RoomEvent.TrackStreamStateChanged,d,d.track.streamState,o))})},this.handleSubscriptionPermissionUpdate=n=>{const a=this.participants.get(n.participantSid);if(!a)return;const o=a.getTrackPublication(n.trackSid);o&&o.setAllowed(n.allowed)},this.handleDataPacket=(n,a)=>{const o=this.participants.get(n.participantSid);this.emit(RoomEvent.DataReceived,n.payload,o,a,n.topic),o==null||o.emit(ParticipantEvent.DataReceived,n.payload,a)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=n=>{livekitLogger.warn("could not playback audio",n),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(RoomEvent.AudioPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>__awaiter(this,void 0,void 0,function*(){this.emit(RoomEvent.MediaDevicesChanged)}),this.handleRoomUpdate=n=>{const a=this.roomInfo;this.roomInfo=n,a&&a.metadata!==n.metadata&&this.emitWhenConnected(RoomEvent.RoomMetadataChanged,n.metadata),(a==null?void 0:a.activeRecording)!==n.activeRecording&&this.emitWhenConnected(RoomEvent.RecordingStatusChanged,n.activeRecording)},this.handleConnectionQualityUpdate=n=>{n.updates.forEach(a=>{if(a.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(a.quality);return}const o=this.participants.get(a.participantSid);o&&o.setConnectionQuality(a.quality)})},this.onLocalParticipantMetadataChanged=n=>{this.emit(RoomEvent.ParticipantMetadataChanged,n,this.localParticipant)},this.onLocalParticipantNameChanged=n=>{this.emit(RoomEvent.ParticipantNameChanged,n,this.localParticipant)},this.onLocalTrackMuted=n=>{this.emit(RoomEvent.TrackMuted,n,this.localParticipant)},this.onLocalTrackUnmuted=n=>{this.emit(RoomEvent.TrackUnmuted,n,this.localParticipant)},this.onLocalTrackPublished=n=>__awaiter(this,void 0,void 0,function*(){this.emit(RoomEvent.LocalTrackPublished,n,this.localParticipant),n.track instanceof LocalAudioTrack&&(yield n.track.checkForSilence())&&this.emit(RoomEvent.LocalAudioSilenceDetected,n)}),this.onLocalTrackUnpublished=n=>{this.emit(RoomEvent.LocalTrackUnpublished,n,this.localParticipant)},this.onLocalConnectionQualityChanged=n=>{this.emit(RoomEvent.ConnectionQualityChanged,n,this.localParticipant)},this.onMediaDevicesError=n=>{this.emit(RoomEvent.MediaDevicesError,n)},this.onLocalParticipantPermissionsChanged=n=>{this.emit(RoomEvent.ParticipantPermissionsChanged,n,this.localParticipant)},this.setMaxListeners(100),this.participants=new Map,this.cachedParticipantSids=[],this.identityToSid=new Map,this.options=Object.assign(Object.assign({},roomOptionDefaults),i),this.options.audioCaptureDefaults=Object.assign(Object.assign({},audioDefaults),i==null?void 0:i.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},videoDefaults),i==null?void 0:i.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},publishDefaults),i==null?void 0:i.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Mutex,this.localParticipant=new LocalParticipant("","",this.engine,this.options)}get isRecording(){var i,t;return(t=(i=this.roomInfo)===null||i===void 0?void 0:i.activeRecording)!==null&&t!==void 0?t:!1}get sid(){var i,t;return(t=(i=this.roomInfo)===null||i===void 0?void 0:i.sid)!==null&&t!==void 0?t:""}get name(){var i,t;return(t=(i=this.roomInfo)===null||i===void 0?void 0:i.name)!==null&&t!==void 0?t:""}get metadata(){var i;return(i=this.roomInfo)===null||i===void 0?void 0:i.metadata}get numParticipants(){var i,t;return(t=(i=this.roomInfo)===null||i===void 0?void 0:i.numParticipants)!==null&&t!==void 0?t:0}get numPublishers(){var i,t;return(t=(i=this.roomInfo)===null||i===void 0?void 0:i.numPublishers)!==null&&t!==void 0?t:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new RTCEngine(this.options),this.engine.client.onParticipantUpdate=this.handleParticipantUpdates,this.engine.client.onRoomUpdate=this.handleRoomUpdate,this.engine.client.onSpeakersChanged=this.handleSpeakersChanged,this.engine.client.onStreamStateUpdate=this.handleStreamStateUpdate,this.engine.client.onSubscriptionPermissionUpdate=this.handleSubscriptionPermissionUpdate,this.engine.client.onConnectionQuality=this.handleConnectionQualityUpdate,this.engine.on(EngineEvent.MediaTrackAdded,(i,t,n)=>{this.onTrackAdded(i,t,n)}).on(EngineEvent.Disconnected,i=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,i)}).on(EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(EngineEvent.DataPacketReceived,this.handleDataPacket).on(EngineEvent.Resuming,()=>{this.clearConnectionReconcile(),this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting),this.cachedParticipantSids=Array.from(this.participants.keys())}).on(EngineEvent.Resumed,()=>{this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected),this.registerConnectionReconcile(),this.updateSubscriptions(),Array.from(this.participants.values()).filter(t=>!this.cachedParticipantSids.includes(t.sid)).forEach(t=>this.emit(RoomEvent.ParticipantConnected,t)),this.cachedParticipantSids=[]}).on(EngineEvent.SignalResumed,()=>{this.state===ConnectionState.Reconnecting&&this.sendSyncState()}).on(EngineEvent.Restarting,this.handleRestarting).on(EngineEvent.SignalRestarted,this.handleSignalRestarted).on(EngineEvent.DCBufferStatusChanged,(i,t)=>{this.emit(RoomEvent.DCBufferStatusChanged,i,t)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine))}static getLocalDevices(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return DeviceManager.getInstance().getDevices(i,t)}prepareConnection(i){return __awaiter(this,void 0,void 0,function*(){yield fetch("http".concat(i.substring(2)),{method:"HEAD"})})}getParticipantByIdentity(i){if(this.localParticipant.identity===i)return this.localParticipant;const t=this.identityToSid.get(i);if(t)return this.participants.get(t)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(i){return __awaiter(this,void 0,void 0,function*(){let t=()=>{},n;switch(i){case"signal-reconnect":yield this.engine.client.close(),this.engine.client.onClose&&this.engine.client.onClose("simulate disconnect");break;case"speaker":n=SimulateScenario.fromPartial({scenario:{$case:"speakerUpdate",speakerUpdate:3}});break;case"node-failure":n=SimulateScenario.fromPartial({scenario:{$case:"nodeFailure",nodeFailure:!0}});break;case"server-leave":n=SimulateScenario.fromPartial({scenario:{$case:"serverLeave",serverLeave:!0}});break;case"migration":n=SimulateScenario.fromPartial({scenario:{$case:"migration",migration:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.close(),this.engine.client.onClose&&this.engine.client.onClose("simulate resume-reconnect");break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.close(),this.engine.client.onClose&&this.engine.client.onClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":n=SimulateScenario.fromPartial({scenario:{$case:"switchCandidateProtocol",switchCandidateProtocol:i==="force-tls"?2:1}}),t=()=>__awaiter(this,void 0,void 0,function*(){const a=this.engine.client.onLeave;a&&a({reason:DisconnectReason.CLIENT_INITIATED,canReconnect:!0})});break}n&&(this.engine.client.sendSimulateScenario(n),t())})}startAudio(){return __awaiter(this,void 0,void 0,function*(){yield this.acquireAudioContext();const i=[];this.participants.forEach(t=>{t.audioTracks.forEach(n=>{n.track&&n.track.attachedElements.forEach(a=>{i.push(a)})})});try{yield Promise.all(i.map(t=>(t.muted=!1,t.play()))),this.handleAudioPlaybackStarted()}catch(t){throw this.handleAudioPlaybackFailed(t),t}})}get canPlaybackAudio(){return this.audioEnabled}getActiveAudioOutputDevice(){var i,t;return(t=(i=this.options.audioOutput)===null||i===void 0?void 0:i.deviceId)!==null&&t!==void 0?t:""}switchActiveDevice(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var a,o;return __awaiter(this,void 0,void 0,function*(){const d=n?{exact:t}:t;if(i==="audioinput"){const s=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=d;const u=Array.from(this.localParticipant.audioTracks.values()).filter(c=>c.source===Track.Source.Microphone);try{yield Promise.all(u.map(c=>{var h;return(h=c.audioTrack)===null||h===void 0?void 0:h.setDeviceId(d)}))}catch(c){throw this.options.audioCaptureDefaults.deviceId=s,c}}else if(i==="videoinput"){const s=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=d;const u=Array.from(this.localParticipant.videoTracks.values()).filter(c=>c.source===Track.Source.Camera);try{yield Promise.all(u.map(c=>{var h;return(h=c.videoTrack)===null||h===void 0?void 0:h.setDeviceId(d)}))}catch(c){throw this.options.videoCaptureDefaults.deviceId=s,c}}else if(i==="audiooutput"){if(!supportsSetSinkId())throw new Error("cannot switch audio output, setSinkId not supported");(a=(o=this.options).audioOutput)!==null&&a!==void 0||(o.audioOutput={});const s=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=t;try{yield Promise.all(Array.from(this.participants.values()).map(u=>u.setAudioOutput({deviceId:t})))}catch(u){throw this.options.audioOutput.deviceId=s,u}}})}setupLocalParticipantEvents(){this.localParticipant.on(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ParticipantEvent.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).on(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).on(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).on(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).on(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var i;(i=this.engine)===null||i===void 0||i.close(),this.engine=void 0,this.participants.clear(),this.maybeCreateEngine()}onTrackAdded(i,t,n){if(this.state===ConnectionState.Connecting||this.state===ConnectionState.Reconnecting){const c=()=>{this.onTrackAdded(i,t,n),h()},h=()=>{this.off(RoomEvent.Reconnected,c),this.off(RoomEvent.Connected,c),this.off(RoomEvent.Disconnected,h)};this.once(RoomEvent.Reconnected,c),this.once(RoomEvent.Connected,c),this.once(RoomEvent.Disconnected,h);return}if(this.state===ConnectionState.Disconnected){livekitLogger.warn("skipping incoming track after Room disconnected");return}const a=unpackStreamId(t.id),o=a[0];let d=a[1];if((!d||d==="")&&(d=i.id),o===this.localParticipant.sid){livekitLogger.warn("tried to create RemoteParticipant for local participant");return}const s=this.getOrCreateParticipant(o);let u;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?u=this.options.adaptiveStream:u={}),s.addSubscribedMediaTrack(i,d,t,n,u)}handleDisconnect(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1?arguments[1]:void 0;var n;if(this.clearConnectionReconcile(),this.state!==ConnectionState.Disconnected)try{this.participants.forEach(a=>{a.tracks.forEach(o=>{a.unpublishTrack(o.trackSid)})}),this.localParticipant.tracks.forEach(a=>{var o,d;a.track&&this.localParticipant.unpublishTrack(a.track,i),i&&((o=a.track)===null||o===void 0||o.detach(),(d=a.track)===null||d===void 0||d.stop())}),this.localParticipant.off(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ParticipantEvent.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).off(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).off(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).off(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).off(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.expWebAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),isWeb()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),(n=navigator.mediaDevices)===null||n===void 0||n.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(ConnectionState.Disconnected),this.emit(RoomEvent.Disconnected,t)}}handleParticipantDisconnected(i,t){this.participants.delete(i),t&&(this.identityToSid.delete(t.identity),t.tracks.forEach(n=>{t.unpublishTrack(n.trackSid,!0)}),this.emit(RoomEvent.ParticipantDisconnected,t))}acquireAudioContext(){var i,t;return __awaiter(this,void 0,void 0,function*(){typeof this.options.expWebAudioMix!="boolean"&&this.options.expWebAudioMix.audioContext?(this.audioContext=this.options.expWebAudioMix.audioContext,yield this.audioContext.resume()):this.audioContext=(i=getNewAudioContext())!==null&&i!==void 0?i:void 0,this.options.expWebAudioMix&&this.participants.forEach(a=>a.setAudioContext(this.audioContext));const n=((t=this.audioContext)===null||t===void 0?void 0:t.state)==="running";n!==this.canPlaybackAudio&&(this.audioEnabled=n,this.emit(RoomEvent.AudioPlaybackStatusChanged,n))})}createParticipant(i,t){let n;return t?n=RemoteParticipant.fromParticipantInfo(this.engine.client,t):n=new RemoteParticipant(this.engine.client,i,"",void 0,void 0),this.options.expWebAudioMix&&n.setAudioContext(this.audioContext),n}getOrCreateParticipant(i,t){if(this.participants.has(i))return this.participants.get(i);const n=this.createParticipant(i,t);return this.participants.set(i,n),t&&(this.identityToSid.set(t.identity,t.sid),this.emitWhenConnected(RoomEvent.ParticipantConnected,n)),n.on(ParticipantEvent.TrackPublished,a=>{this.emitWhenConnected(RoomEvent.TrackPublished,a,n)}).on(ParticipantEvent.TrackSubscribed,(a,o)=>{a.kind===Track.Kind.Audio&&(a.on(TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),a.on(TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)),this.emit(RoomEvent.TrackSubscribed,a,o,n)}).on(ParticipantEvent.TrackUnpublished,a=>{this.emit(RoomEvent.TrackUnpublished,a,n)}).on(ParticipantEvent.TrackUnsubscribed,(a,o)=>{this.emit(RoomEvent.TrackUnsubscribed,a,o,n)}).on(ParticipantEvent.TrackSubscriptionFailed,a=>{this.emit(RoomEvent.TrackSubscriptionFailed,a,n)}).on(ParticipantEvent.TrackMuted,a=>{this.emitWhenConnected(RoomEvent.TrackMuted,a,n)}).on(ParticipantEvent.TrackUnmuted,a=>{this.emitWhenConnected(RoomEvent.TrackUnmuted,a,n)}).on(ParticipantEvent.ParticipantMetadataChanged,a=>{this.emitWhenConnected(RoomEvent.ParticipantMetadataChanged,a,n)}).on(ParticipantEvent.ParticipantNameChanged,a=>{this.emitWhenConnected(RoomEvent.ParticipantNameChanged,a,n)}).on(ParticipantEvent.ConnectionQualityChanged,a=>{this.emitWhenConnected(RoomEvent.ConnectionQualityChanged,a,n)}).on(ParticipantEvent.ParticipantPermissionsChanged,a=>{this.emitWhenConnected(RoomEvent.ParticipantPermissionsChanged,a,n)}).on(ParticipantEvent.TrackSubscriptionStatusChanged,(a,o)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionStatusChanged,a,o,n)}).on(ParticipantEvent.TrackSubscriptionPermissionChanged,(a,o)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionPermissionChanged,a,o,n)}),t&&n.updateInfo(t),n}sendSyncState(){var i,t;if(this.engine.subscriber===void 0||this.engine.subscriber.pc.localDescription===null)return;const n=this.engine.subscriber.pc.localDescription,a=this.engine.subscriber.pc.remoteDescription,o=(t=(i=this.connOptions)===null||i===void 0?void 0:i.autoSubscribe)!==null&&t!==void 0?t:!0,d=new Array;this.participants.forEach(s=>{s.tracks.forEach(u=>{u.isDesired!==o&&d.push(u.trackSid)})}),this.engine.client.sendSyncState({answer:toProtoSessionDescription({sdp:n.sdp,type:n.type}),offer:a?toProtoSessionDescription({sdp:a.sdp,type:a.type}):void 0,subscription:{trackSids:d,subscribe:!o,participantTracks:[]},publishTracks:this.localParticipant.publishedTracksInfo(),dataChannels:this.localParticipant.dataChannelsInfo()})}updateSubscriptions(){for(const i of this.participants.values())for(const t of i.videoTracks.values())t.isSubscribed&&t instanceof RemoteTrackPublication&&t.emitTrackUpdate()}registerConnectionReconcile(){this.clearConnectionReconcile();let i=0;this.connectionReconcileInterval=CriticalTimers.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(i++,livekitLogger.warn("detected connection state mismatch",{numFailures:i}),i>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,DisconnectReason.STATE_MISMATCH))):i=0},connectionReconcileFrequency)}clearConnectionReconcile(){this.connectionReconcileInterval&&CriticalTimers.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(i){return i===this.state?!1:(this.state=i,this.emit(RoomEvent.ConnectionStateChanged,this.state),!0)}emitWhenConnected(i){if(this.state===ConnectionState.Connected){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return this.emit(i,...n)}return!1}simulateParticipants(i){var t,n;return __awaiter(this,void 0,void 0,function*(){const a=Object.assign({audio:!0,video:!0,useRealTracks:!1},i.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},i.participants);if(this.handleDisconnect(),this.roomInfo={sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:new Date().getTime(),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1},this.localParticipant.updateInfo(ParticipantInfo.fromPartial({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected),this.emit(RoomEvent.Connected),this.setAndEmitConnectionState(ConnectionState.Connected),a.video){const d=new LocalTrackPublication(Track.Kind.Video,TrackInfo.fromPartial({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO,name:"video-dummy"}),new LocalVideoTrack(a.useRealTracks?(yield navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:createDummyVideoStreamTrack((t=160*o.aspectRatios[0])!==null&&t!==void 0?t:1,160,!0,!0)));this.localParticipant.addTrackPublication(d),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,d)}if(a.audio){const d=new LocalTrackPublication(Track.Kind.Audio,TrackInfo.fromPartial({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO}),new LocalAudioTrack(a.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:getEmptyAudioStreamTrack()));this.localParticipant.addTrackPublication(d),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,d)}for(let d=0;d<o.count-1;d+=1){let s=ParticipantInfo.fromPartial({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(d),state:ParticipantInfo_State.ACTIVE,tracks:[],joinedAt:Date.now()});const u=this.getOrCreateParticipant(s.identity,s);if(o.video){const c=createDummyVideoStreamTrack((n=160*o.aspectRatios[d%o.aspectRatios.length])!==null&&n!==void 0?n:1,160,!1,!0),h=TrackInfo.fromPartial({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});u.addSubscribedMediaTrack(c,h.sid,new MediaStream([c])),s.tracks=[...s.tracks,h]}if(o.audio){const c=getEmptyAudioStreamTrack(),h=TrackInfo.fromPartial({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});u.addSubscribedMediaTrack(c,h.sid,new MediaStream([c])),s.tracks=[...s.tracks,h]}u.updateInfo(s)}})}emit(i){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return i!==RoomEvent.ActiveSpeakersChanged&&livekitLogger.debug("room event ".concat(i),{event:i,args:n}),super.emit(i,...n)}}var CheckStatus;(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"})(CheckStatus||(CheckStatus={}));class Checker extends eventsExports.EventEmitter{constructor(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=CheckStatus.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=i,this.token=t,this.name=this.constructor.name,this.room=new Room(n.roomOptions),this.connectOptions=n.connectOptions,n.errorsAsWarnings&&(this.errorsAsWarnings=n.errorsAsWarnings)}run(i){return __awaiter(this,void 0,void 0,function*(){if(this.status!==CheckStatus.IDLE)throw Error("check is running already");this.setStatus(CheckStatus.RUNNING),this.appendMessage("".concat(this.name," started."));try{yield this.perform()}catch(t){t instanceof Error&&(this.errorsAsWarnings?this.appendWarning(t.message):this.appendError(t.message))}return yield this.disconnect(),yield new Promise(t=>setTimeout(t,500)),this.status!==CheckStatus.SKIPPED&&this.setStatus(this.isSuccess()?CheckStatus.SUCCESS:CheckStatus.FAILED),i&&i(),this.getInfo()})}isSuccess(){return!this.logs.some(i=>i.level==="error")}connect(){return __awaiter(this,void 0,void 0,function*(){return this.room.state===ConnectionState.Connected?this.room:(yield this.room.connect(this.url,this.token),this.room)})}disconnect(){return __awaiter(this,void 0,void 0,function*(){this.room&&this.room.state!==ConnectionState.Disconnected&&(yield this.room.disconnect(),yield new Promise(i=>setTimeout(i,500)))})}skip(){this.setStatus(CheckStatus.SKIPPED)}appendMessage(i){this.logs.push({level:"info",message:i}),this.emit("update",this.getInfo())}appendWarning(i){this.logs.push({level:"warning",message:i}),this.emit("update",this.getInfo())}appendError(i){this.logs.push({level:"error",message:i}),this.emit("update",this.getInfo())}setStatus(i){this.status=i,this.emit("update",this.getInfo())}get engine(){var i;return(i=this.room)===null||i===void 0?void 0:i.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}function createLocalTracks(e){var i,t;return __awaiter(this,void 0,void 0,function*(){e??(e={}),(i=e.audio)!==null&&i!==void 0||(e.audio=!0),(t=e.video)!==null&&t!==void 0||(e.video=!0);const n=mergeDefaultOptions(e,audioDefaults,videoDefaults),a=constraintsForOptions(n),o=navigator.mediaDevices.getUserMedia(a);e.audio&&(DeviceManager.userMediaPromiseMap.set("audioinput",o),o.catch(()=>DeviceManager.userMediaPromiseMap.delete("audioinput"))),e.video&&(DeviceManager.userMediaPromiseMap.set("videoinput",o),o.catch(()=>DeviceManager.userMediaPromiseMap.delete("videoinput")));const d=yield o;return d.getTracks().map(s=>{const u=s.kind==="audio";u?e.audio:e.video;let c;const h=u?a.audio:a.video;typeof h!="boolean"&&(c=h);const p=mediaTrackToLocalTrack(s,c);return p.kind===Track.Kind.Video?p.source=Track.Source.Camera:p.kind===Track.Kind.Audio&&(p.source=Track.Source.Microphone),p.mediaStream=d,p})})}function createLocalVideoTrack(e){return __awaiter(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:!1,video:e}))[0]})}function createLocalAudioTrack(e){return __awaiter(this,void 0,void 0,function*(){return(yield createLocalTracks({audio:e,video:!1}))[0]})}class PublishAudioCheck extends Checker{get description(){return"Can publish audio"}perform(){var i;return __awaiter(this,void 0,void 0,function*(){const t=yield this.connect(),n=yield createLocalAudioTrack();t.localParticipant.publishTrack(n),yield new Promise(d=>setTimeout(d,3e3));const a=yield(i=n.sender)===null||i===void 0?void 0:i.getStats();if(!a)throw new Error("Could not get RTCStats");let o=0;if(a.forEach(d=>{d.type==="outbound-rtp"&&d.mediaType==="audio"&&(o=d.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class PublishVideoCheck extends Checker{get description(){return"Can publish video"}perform(){var i;return __awaiter(this,void 0,void 0,function*(){const t=yield this.connect(),n=yield createLocalVideoTrack();t.localParticipant.publishTrack(n),yield new Promise(d=>setTimeout(d,3e3));const a=yield(i=n.sender)===null||i===void 0?void 0:i.getStats();if(!a)throw new Error("Could not get RTCStats");let o=0;if(a.forEach(d=>{d.type==="outbound-rtp"&&d.mediaType==="video"&&(o=d.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}}class ReconnectCheck extends Checker{get description(){return"Resuming connection after interruption"}perform(){var i;return __awaiter(this,void 0,void 0,function*(){const t=yield this.connect();let n=!1,a=!1,o;const d=new Promise(u=>{setTimeout(u,5e3),o=u});t.on(RoomEvent.Reconnecting,()=>{n=!0}).on(RoomEvent.Reconnected,()=>{a=!0,o(!0)}),(i=t.engine.client.ws)===null||i===void 0||i.close();const s=t.engine.client.onClose;if(s&&s(""),yield d,n){if(!a||t.state!==ConnectionState.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class TURNCheck extends Checker{get description(){return"Can connect via TURN"}perform(){var i,t;return __awaiter(this,void 0,void 0,function*(){const n=new SignalClient,a=yield n.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0});let o=!1,d=!1,s=!1;for(let u of a.iceServers)for(let c of u.urls)c.startsWith("turn:")?(d=!0,s=!0):c.startsWith("turns:")&&(d=!0,s=!0,o=!0),c.startsWith("stun:")&&(s=!0);s?d&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield n.close(),!((t=(i=this.connectOptions)===null||i===void 0?void 0:i.rtcConfig)===null||t===void 0)&&t.iceServers||d?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(u=>setTimeout(u,0)))})}}class WebRTCCheck extends Checker{get description(){return"Establishing WebRTC connection"}perform(){return __awaiter(this,void 0,void 0,function*(){try{console.log("initiating room connection"),this.room=yield this.connect(),console.log("now the room is connected")}catch(i){throw this.appendWarning("ports need to be open on firewall in order to connect."),i}})}}class WebSocketCheck extends Checker{get description(){return"Connecting to signal connection via WebSocket"}perform(){return __awaiter(this,void 0,void 0,function*(){(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new SignalClient;const t=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0});this.appendMessage("Connected to server, version ".concat(t.serverVersion,".")),yield i.close()})}}class ConnectionCheck extends eventsExports.EventEmitter{constructor(i,t){super(),this.checkResults=new Map,this.url=i,this.token=t}getNextCheckId(){const i=this.checkResults.size;return this.checkResults.set(i,{logs:[],status:CheckStatus.IDLE,name:"",description:""}),i}updateCheck(i,t){this.checkResults.set(i,t),this.emit("checkUpdate",i,t)}isSuccess(){return Array.from(this.checkResults.values()).every(i=>i.status!==CheckStatus.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(i){return __awaiter(this,void 0,void 0,function*(){const t=this.getNextCheckId(),n=new i(this.url,this.token),a=d=>{this.updateCheck(t,d)};n.on("update",a);const o=yield n.run();return n.off("update",a),o})}checkWebsocket(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(WebSocketCheck)})}checkWebRTC(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(WebRTCCheck)})}checkTURN(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(TURNCheck)})}checkReconnect(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(ReconnectCheck)})}checkPublishAudio(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(PublishAudioCheck)})}checkPublishVideo(){return __awaiter(this,void 0,void 0,function*(){return this.createAndRunCheck(PublishVideoCheck)})}}(function(e){if(typeof exports=="object"&&typeof module<"u")module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var i;typeof window<"u"?i=window:typeof global<"u"?i=global:typeof self<"u"?i=self:i=this,i.nodeJsShim=e()}})(function(){return function(){function e(i,t,n){function a(s,u){if(!t[s]){if(!i[s]){var c=typeof require=="function"&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var p=t[s]={exports:{}};i[s][0].call(p.exports,function(l){var f=i[s][1][l];return a(f||l)},p,p.exports,e,i,t,n)}return t[s].exports}for(var o=typeof require=="function"&&require,d=0;d<n.length;d++)a(n[d]);return a}return e}()({1:[function(e,i,t){const n=e("livekit-server-sdk");window.livekitServerSDK=n;const a=e("simple-peer");window.SimplePeer=a},{"livekit-server-sdk":71,"simple-peer":120}],2:[function(e,i,t){i.exports=n;function n(a,o){for(var d=new Array(arguments.length-1),s=0,u=2,c=!0;u<arguments.length;)d[s++]=arguments[u++];return new Promise(function(p,l){d[s]=function(m){if(c)if(c=!1,m)l(m);else{for(var v=new Array(arguments.length-1),E=0;E<v.length;)v[E++]=arguments[E];p.apply(null,v)}};try{a.apply(o||null,d)}catch(f){c&&(c=!1,l(f))}})}},{}],3:[function(e,i,t){var n=t;n.length=function(c){var h=c.length;if(!h)return 0;for(var p=0;--h%4>1&&c.charAt(h)==="=";)++p;return Math.ceil(c.length*3)/4-p};for(var a=new Array(64),o=new Array(123),d=0;d<64;)o[a[d]=d<26?d+65:d<52?d+71:d<62?d-4:d-59|43]=d++;n.encode=function(c,h,p){for(var l=null,f=[],m=0,v=0,E;h<p;){var k=c[h++];switch(v){case 0:f[m++]=a[k>>2],E=(k&3)<<4,v=1;break;case 1:f[m++]=a[E|k>>4],E=(k&15)<<2,v=2;break;case 2:f[m++]=a[E|k>>6],f[m++]=a[k&63],v=0;break}m>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,f)),m=0)}return v&&(f[m++]=a[E],f[m++]=61,v===1&&(f[m++]=61)),l?(m&&l.push(String.fromCharCode.apply(String,f.slice(0,m))),l.join("")):String.fromCharCode.apply(String,f.slice(0,m))};var s="invalid encoding";n.decode=function(c,h,p){for(var l=p,f=0,m,v=0;v<c.length;){var E=c.charCodeAt(v++);if(E===61&&f>1)break;if((E=o[E])===void 0)throw Error(s);switch(f){case 0:m=E,f=1;break;case 1:h[p++]=m<<2|(E&48)>>4,m=E,f=2;break;case 2:h[p++]=(m&15)<<4|(E&60)>>2,m=E,f=3;break;case 3:h[p++]=(m&3)<<6|E,f=0;break}}if(f===1)throw Error(s);return p-l},n.test=function(c){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(c)}},{}],4:[function(e,i,t){i.exports=n;function n(){this._listeners={}}n.prototype.on=function(o,d,s){return(this._listeners[o]||(this._listeners[o]=[])).push({fn:d,ctx:s||this}),this},n.prototype.off=function(o,d){if(o===void 0)this._listeners={};else if(d===void 0)this._listeners[o]=[];else for(var s=this._listeners[o],u=0;u<s.length;)s[u].fn===d?s.splice(u,1):++u;return this},n.prototype.emit=function(o){var d=this._listeners[o];if(d){for(var s=[],u=1;u<arguments.length;)s.push(arguments[u++]);for(u=0;u<d.length;)d[u].fn.apply(d[u++].ctx,s)}return this}},{}],5:[function(e,i,t){i.exports=n(n);function n(u){return typeof Float32Array<"u"?function(){var c=new Float32Array([-0]),h=new Uint8Array(c.buffer),p=h[3]===128;function l(E,k,C){c[0]=E,k[C]=h[0],k[C+1]=h[1],k[C+2]=h[2],k[C+3]=h[3]}function f(E,k,C){c[0]=E,k[C]=h[3],k[C+1]=h[2],k[C+2]=h[1],k[C+3]=h[0]}u.writeFloatLE=p?l:f,u.writeFloatBE=p?f:l;function m(E,k){return h[0]=E[k],h[1]=E[k+1],h[2]=E[k+2],h[3]=E[k+3],c[0]}function v(E,k){return h[3]=E[k],h[2]=E[k+1],h[1]=E[k+2],h[0]=E[k+3],c[0]}u.readFloatLE=p?m:v,u.readFloatBE=p?v:m}():function(){function c(p,l,f,m){var v=l<0?1:0;if(v&&(l=-l),l===0)p(1/l>0?0:2147483648,f,m);else if(isNaN(l))p(2143289344,f,m);else if(l>34028234663852886e22)p((v<<31|2139095040)>>>0,f,m);else if(l<11754943508222875e-54)p((v<<31|Math.round(l/1401298464324817e-60))>>>0,f,m);else{var E=Math.floor(Math.log(l)/Math.LN2),k=Math.round(l*Math.pow(2,-E)*8388608)&8388607;p((v<<31|E+127<<23|k)>>>0,f,m)}}u.writeFloatLE=c.bind(null,a),u.writeFloatBE=c.bind(null,o);function h(p,l,f){var m=p(l,f),v=(m>>31)*2+1,E=m>>>23&255,k=m&8388607;return E===255?k?NaN:v*(1/0):E===0?v*1401298464324817e-60*k:v*Math.pow(2,E-150)*(k+8388608)}u.readFloatLE=h.bind(null,d),u.readFloatBE=h.bind(null,s)}(),typeof Float64Array<"u"?function(){var c=new Float64Array([-0]),h=new Uint8Array(c.buffer),p=h[7]===128;function l(E,k,C){c[0]=E,k[C]=h[0],k[C+1]=h[1],k[C+2]=h[2],k[C+3]=h[3],k[C+4]=h[4],k[C+5]=h[5],k[C+6]=h[6],k[C+7]=h[7]}function f(E,k,C){c[0]=E,k[C]=h[7],k[C+1]=h[6],k[C+2]=h[5],k[C+3]=h[4],k[C+4]=h[3],k[C+5]=h[2],k[C+6]=h[1],k[C+7]=h[0]}u.writeDoubleLE=p?l:f,u.writeDoubleBE=p?f:l;function m(E,k){return h[0]=E[k],h[1]=E[k+1],h[2]=E[k+2],h[3]=E[k+3],h[4]=E[k+4],h[5]=E[k+5],h[6]=E[k+6],h[7]=E[k+7],c[0]}function v(E,k){return h[7]=E[k],h[6]=E[k+1],h[5]=E[k+2],h[4]=E[k+3],h[3]=E[k+4],h[2]=E[k+5],h[1]=E[k+6],h[0]=E[k+7],c[0]}u.readDoubleLE=p?m:v,u.readDoubleBE=p?v:m}():function(){function c(p,l,f,m,v,E){var k=m<0?1:0;if(k&&(m=-m),m===0)p(0,v,E+l),p(1/m>0?0:2147483648,v,E+f);else if(isNaN(m))p(0,v,E+l),p(2146959360,v,E+f);else if(m>17976931348623157e292)p(0,v,E+l),p((k<<31|2146435072)>>>0,v,E+f);else{var C;if(m<22250738585072014e-324)C=m/5e-324,p(C>>>0,v,E+l),p((k<<31|C/4294967296)>>>0,v,E+f);else{var N=Math.floor(Math.log(m)/Math.LN2);N===1024&&(N=1023),C=m*Math.pow(2,-N),p(C*4503599627370496>>>0,v,E+l),p((k<<31|N+1023<<20|C*1048576&1048575)>>>0,v,E+f)}}}u.writeDoubleLE=c.bind(null,a,0,4),u.writeDoubleBE=c.bind(null,o,4,0);function h(p,l,f,m,v){var E=p(m,v+l),k=p(m,v+f),C=(k>>31)*2+1,N=k>>>20&2047,P=4294967296*(k&1048575)+E;return N===2047?P?NaN:C*(1/0):N===0?C*5e-324*P:C*Math.pow(2,N-1075)*(P+4503599627370496)}u.readDoubleLE=h.bind(null,d,0,4),u.readDoubleBE=h.bind(null,s,4,0)}(),u}function a(u,c,h){c[h]=u&255,c[h+1]=u>>>8&255,c[h+2]=u>>>16&255,c[h+3]=u>>>24}function o(u,c,h){c[h]=u>>>24,c[h+1]=u>>>16&255,c[h+2]=u>>>8&255,c[h+3]=u&255}function d(u,c){return(u[c]|u[c+1]<<8|u[c+2]<<16|u[c+3]<<24)>>>0}function s(u,c){return(u[c]<<24|u[c+1]<<16|u[c+2]<<8|u[c+3])>>>0}},{}],6:[function(require,module,exports){module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}},{}],7:[function(e,i,t){i.exports=n;function n(a,o,d){var s=d||8192,u=s>>>1,c=null,h=s;return function(l){if(l<1||l>u)return a(l);h+l>s&&(c=a(s),h=0);var f=o.call(c,h,h+=l);return h&7&&(h=(h|7)+1),f}}},{}],8:[function(e,i,t){var n=t;n.length=function(o){for(var d=0,s=0,u=0;u<o.length;++u)s=o.charCodeAt(u),s<128?d+=1:s<2048?d+=2:(s&64512)===55296&&(o.charCodeAt(u+1)&64512)===56320?(++u,d+=4):d+=3;return d},n.read=function(o,d,s){var u=s-d;if(u<1)return"";for(var c=null,h=[],p=0,l;d<s;)l=o[d++],l<128?h[p++]=l:l>191&&l<224?h[p++]=(l&31)<<6|o[d++]&63:l>239&&l<365?(l=((l&7)<<18|(o[d++]&63)<<12|(o[d++]&63)<<6|o[d++]&63)-65536,h[p++]=55296+(l>>10),h[p++]=56320+(l&1023)):h[p++]=(l&15)<<12|(o[d++]&63)<<6|o[d++]&63,p>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,h)),p=0);return c?(p&&c.push(String.fromCharCode.apply(String,h.slice(0,p))),c.join("")):String.fromCharCode.apply(String,h.slice(0,p))},n.write=function(o,d,s){for(var u=s,c,h,p=0;p<o.length;++p)c=o.charCodeAt(p),c<128?d[s++]=c:c<2048?(d[s++]=c>>6|192,d[s++]=c&63|128):(c&64512)===55296&&((h=o.charCodeAt(p+1))&64512)===56320?(c=65536+((c&1023)<<10)+(h&1023),++p,d[s++]=c>>18|240,d[s++]=c>>12&63|128,d[s++]=c>>6&63|128,d[s++]=c&63|128):(d[s++]=c>>12|224,d[s++]=c>>6&63|128,d[s++]=c&63|128);return s-u}},{}],9:[function(e,i,t){i.exports=e("./lib/axios")},{"./lib/axios":11}],10:[function(e,i,t){var n=e("./../utils"),a=e("./../core/settle"),o=e("./../helpers/cookies"),d=e("./../helpers/buildURL"),s=e("../core/buildFullPath"),u=e("./../helpers/parseHeaders"),c=e("./../helpers/isURLSameOrigin"),h=e("../core/createError");i.exports=function(l){return new Promise(function(m,v){var E=l.data,k=l.headers,C=l.responseType;n.isFormData(E)&&delete k["Content-Type"];var N=new XMLHttpRequest;if(l.auth){var P=l.auth.username||"",M=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";k.Authorization="Basic "+btoa(P+":"+M)}var L=s(l.baseURL,l.url);N.open(l.method.toUpperCase(),d(L,l.params,l.paramsSerializer),!0),N.timeout=l.timeout;function $(){if(N){var Z="getAllResponseHeaders"in N?u(N.getAllResponseHeaders()):null,re=!C||C==="text"||C==="json"?N.responseText:N.response,Y={data:re,status:N.status,statusText:N.statusText,headers:Z,config:l,request:N};a(m,v,Y),N=null}}if("onloadend"in N?N.onloadend=$:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout($)},N.onabort=function(){N&&(v(h("Request aborted",l,"ECONNABORTED",N)),N=null)},N.onerror=function(){v(h("Network Error",l,null,N)),N=null},N.ontimeout=function(){var re="timeout of "+l.timeout+"ms exceeded";l.timeoutErrorMessage&&(re=l.timeoutErrorMessage),v(h(re,l,l.transitional&&l.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",N)),N=null},n.isStandardBrowserEnv()){var H=(l.withCredentials||c(L))&&l.xsrfCookieName?o.read(l.xsrfCookieName):void 0;H&&(k[l.xsrfHeaderName]=H)}"setRequestHeader"in N&&n.forEach(k,function(re,Y){typeof E>"u"&&Y.toLowerCase()==="content-type"?delete k[Y]:N.setRequestHeader(Y,re)}),n.isUndefined(l.withCredentials)||(N.withCredentials=!!l.withCredentials),C&&C!=="json"&&(N.responseType=l.responseType),typeof l.onDownloadProgress=="function"&&N.addEventListener("progress",l.onDownloadProgress),typeof l.onUploadProgress=="function"&&N.upload&&N.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then(function(re){N&&(N.abort(),v(re),N=null)}),E||(E=null),N.send(E)})}},{"../core/buildFullPath":17,"../core/createError":18,"./../core/settle":22,"./../helpers/buildURL":26,"./../helpers/cookies":28,"./../helpers/isURLSameOrigin":31,"./../helpers/parseHeaders":33,"./../utils":36}],11:[function(e,i,t){var n=e("./utils"),a=e("./helpers/bind"),o=e("./core/Axios"),d=e("./core/mergeConfig"),s=e("./defaults");function u(h){var p=new o(h),l=a(o.prototype.request,p);return n.extend(l,o.prototype,p),n.extend(l,p),l}var c=u(s);c.Axios=o,c.create=function(p){return u(d(c.defaults,p))},c.Cancel=e("./cancel/Cancel"),c.CancelToken=e("./cancel/CancelToken"),c.isCancel=e("./cancel/isCancel"),c.all=function(p){return Promise.all(p)},c.spread=e("./helpers/spread"),c.isAxiosError=e("./helpers/isAxiosError"),i.exports=c,i.exports.default=c},{"./cancel/Cancel":12,"./cancel/CancelToken":13,"./cancel/isCancel":14,"./core/Axios":15,"./core/mergeConfig":21,"./defaults":24,"./helpers/bind":25,"./helpers/isAxiosError":30,"./helpers/spread":34,"./utils":36}],12:[function(e,i,t){function n(a){this.message=a}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,i.exports=n},{}],13:[function(e,i,t){var n=e("./Cancel");function a(o){if(typeof o!="function")throw new TypeError("executor must be a function.");var d;this.promise=new Promise(function(c){d=c});var s=this;o(function(c){s.reason||(s.reason=new n(c),d(s.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var d,s=new a(function(c){d=c});return{token:s,cancel:d}},i.exports=a},{"./Cancel":12}],14:[function(e,i,t){i.exports=function(a){return!!(a&&a.__CANCEL__)}},{}],15:[function(e,i,t){var n=e("./../utils"),a=e("../helpers/buildURL"),o=e("./InterceptorManager"),d=e("./dispatchRequest"),s=e("./mergeConfig"),u=e("../helpers/validator"),c=u.validators;function h(p){this.defaults=p,this.interceptors={request:new o,response:new o}}h.prototype.request=function(l){typeof l=="string"?(l=arguments[1]||{},l.url=arguments[0]):l=l||{},l=s(this.defaults,l),l.method?l.method=l.method.toLowerCase():this.defaults.method?l.method=this.defaults.method.toLowerCase():l.method="get";var f=l.transitional;f!==void 0&&u.assertOptions(f,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var m=[],v=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(l)===!1||(v=v&&$.synchronous,m.unshift($.fulfilled,$.rejected))});var E=[];this.interceptors.response.forEach(function($){E.push($.fulfilled,$.rejected)});var k;if(!v){var C=[d,void 0];for(Array.prototype.unshift.apply(C,m),C=C.concat(E),k=Promise.resolve(l);C.length;)k=k.then(C.shift(),C.shift());return k}for(var N=l;m.length;){var P=m.shift(),M=m.shift();try{N=P(N)}catch(L){M(L);break}}try{k=d(N)}catch(L){return Promise.reject(L)}for(;E.length;)k=k.then(E.shift(),E.shift());return k},h.prototype.getUri=function(l){return l=s(this.defaults,l),a(l.url,l.params,l.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(l){h.prototype[l]=function(f,m){return this.request(s(m||{},{method:l,url:f,data:(m||{}).data}))}}),n.forEach(["post","put","patch"],function(l){h.prototype[l]=function(f,m,v){return this.request(s(v||{},{method:l,url:f,data:m}))}}),i.exports=h},{"../helpers/buildURL":26,"../helpers/validator":35,"./../utils":36,"./InterceptorManager":16,"./dispatchRequest":19,"./mergeConfig":21}],16:[function(e,i,t){var n=e("./../utils");function a(){this.handlers=[]}a.prototype.use=function(d,s,u){return this.handlers.push({fulfilled:d,rejected:s,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(d){this.handlers[d]&&(this.handlers[d]=null)},a.prototype.forEach=function(d){n.forEach(this.handlers,function(u){u!==null&&d(u)})},i.exports=a},{"./../utils":36}],17:[function(e,i,t){var n=e("../helpers/isAbsoluteURL"),a=e("../helpers/combineURLs");i.exports=function(d,s){return d&&!n(s)?a(d,s):s}},{"../helpers/combineURLs":27,"../helpers/isAbsoluteURL":29}],18:[function(e,i,t){var n=e("./enhanceError");i.exports=function(o,d,s,u,c){var h=new Error(o);return n(h,d,s,u,c)}},{"./enhanceError":20}],19:[function(e,i,t){var n=e("./../utils"),a=e("./transformData"),o=e("../cancel/isCancel"),d=e("../defaults");function s(u){u.cancelToken&&u.cancelToken.throwIfRequested()}i.exports=function(c){s(c),c.headers=c.headers||{},c.data=a.call(c,c.data,c.headers,c.transformRequest),c.headers=n.merge(c.headers.common||{},c.headers[c.method]||{},c.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(l){delete c.headers[l]});var h=c.adapter||d.adapter;return h(c).then(function(l){return s(c),l.data=a.call(c,l.data,l.headers,c.transformResponse),l},function(l){return o(l)||(s(c),l&&l.response&&(l.response.data=a.call(c,l.response.data,l.response.headers,c.transformResponse))),Promise.reject(l)})}},{"../cancel/isCancel":14,"../defaults":24,"./../utils":36,"./transformData":23}],20:[function(e,i,t){i.exports=function(a,o,d,s,u){return a.config=o,d&&(a.code=d),a.request=s,a.response=u,a.isAxiosError=!0,a.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},a}},{}],21:[function(e,i,t){var n=e("../utils");i.exports=function(o,d){d=d||{};var s={},u=["url","method","data"],c=["headers","auth","proxy","params"],h=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],p=["validateStatus"];function l(E,k){return n.isPlainObject(E)&&n.isPlainObject(k)?n.merge(E,k):n.isPlainObject(k)?n.merge({},k):n.isArray(k)?k.slice():k}function f(E){n.isUndefined(d[E])?n.isUndefined(o[E])||(s[E]=l(void 0,o[E])):s[E]=l(o[E],d[E])}n.forEach(u,function(k){n.isUndefined(d[k])||(s[k]=l(void 0,d[k]))}),n.forEach(c,f),n.forEach(h,function(k){n.isUndefined(d[k])?n.isUndefined(o[k])||(s[k]=l(void 0,o[k])):s[k]=l(void 0,d[k])}),n.forEach(p,function(k){k in d?s[k]=l(o[k],d[k]):k in o&&(s[k]=l(void 0,o[k]))});var m=u.concat(c).concat(h).concat(p),v=Object.keys(o).concat(Object.keys(d)).filter(function(k){return m.indexOf(k)===-1});return n.forEach(v,f),s}},{"../utils":36}],22:[function(e,i,t){var n=e("./createError");i.exports=function(o,d,s){var u=s.config.validateStatus;!s.status||!u||u(s.status)?o(s):d(n("Request failed with status code "+s.status,s.config,null,s.request,s))}},{"./createError":18}],23:[function(e,i,t){var n=e("./../utils"),a=e("./../defaults");i.exports=function(d,s,u){var c=this||a;return n.forEach(u,function(p){d=p.call(c,d,s)}),d}},{"./../defaults":24,"./../utils":36}],24:[function(e,i,t){(function(n){(function(){var a=e("./utils"),o=e("./helpers/normalizeHeaderName"),d=e("./core/enhanceError"),s={"Content-Type":"application/x-www-form-urlencoded"};function u(l,f){!a.isUndefined(l)&&a.isUndefined(l["Content-Type"])&&(l["Content-Type"]=f)}function c(){var l;return typeof XMLHttpRequest<"u"?l=e("./adapters/xhr"):typeof n<"u"&&Object.prototype.toString.call(n)==="[object process]"&&(l=e("./adapters/http")),l}function h(l,f,m){if(a.isString(l))try{return(f||JSON.parse)(l),a.trim(l)}catch(v){if(v.name!=="SyntaxError")throw v}return(m||JSON.stringify)(l)}var p={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:c(),transformRequest:[function(f,m){return o(m,"Accept"),o(m,"Content-Type"),a.isFormData(f)||a.isArrayBuffer(f)||a.isBuffer(f)||a.isStream(f)||a.isFile(f)||a.isBlob(f)?f:a.isArrayBufferView(f)?f.buffer:a.isURLSearchParams(f)?(u(m,"application/x-www-form-urlencoded;charset=utf-8"),f.toString()):a.isObject(f)||m&&m["Content-Type"]==="application/json"?(u(m,"application/json"),h(f)):f}],transformResponse:[function(f){var m=this.transitional,v=m&&m.silentJSONParsing,E=m&&m.forcedJSONParsing,k=!v&&this.responseType==="json";if(k||E&&a.isString(f)&&f.length)try{return JSON.parse(f)}catch(C){if(k)throw C.name==="SyntaxError"?d(C,this,"E_JSON_PARSE"):C}return f}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(f){return f>=200&&f<300}};p.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],function(f){p.headers[f]={}}),a.forEach(["post","put","patch"],function(f){p.headers[f]=a.merge(s)}),i.exports=p}).call(this)}).call(this,e("_process"))},{"./adapters/http":10,"./adapters/xhr":10,"./core/enhanceError":20,"./helpers/normalizeHeaderName":32,"./utils":36,_process:254}],25:[function(e,i,t){i.exports=function(a,o){return function(){for(var s=new Array(arguments.length),u=0;u<s.length;u++)s[u]=arguments[u];return a.apply(o,s)}}},{}],26:[function(e,i,t){var n=e("./../utils");function a(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}i.exports=function(d,s,u){if(!s)return d;var c;if(u)c=u(s);else if(n.isURLSearchParams(s))c=s.toString();else{var h=[];n.forEach(s,function(f,m){f===null||typeof f>"u"||(n.isArray(f)?m=m+"[]":f=[f],n.forEach(f,function(E){n.isDate(E)?E=E.toISOString():n.isObject(E)&&(E=JSON.stringify(E)),h.push(a(m)+"="+a(E))}))}),c=h.join("&")}if(c){var p=d.indexOf("#");p!==-1&&(d=d.slice(0,p)),d+=(d.indexOf("?")===-1?"?":"&")+c}return d}},{"./../utils":36}],27:[function(e,i,t){i.exports=function(a,o){return o?a.replace(/\/+$/,"")+"/"+o.replace(/^\/+/,""):a}},{}],28:[function(e,i,t){var n=e("./../utils");i.exports=n.isStandardBrowserEnv()?function(){return{write:function(d,s,u,c,h,p){var l=[];l.push(d+"="+encodeURIComponent(s)),n.isNumber(u)&&l.push("expires="+new Date(u).toGMTString()),n.isString(c)&&l.push("path="+c),n.isString(h)&&l.push("domain="+h),p===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(d){var s=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(d){this.write(d,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},{"./../utils":36}],29:[function(e,i,t){i.exports=function(a){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(a)}},{}],30:[function(e,i,t){i.exports=function(a){return typeof a=="object"&&a.isAxiosError===!0}},{}],31:[function(e,i,t){var n=e("./../utils");i.exports=n.isStandardBrowserEnv()?function(){var o=/(msie|trident)/i.test(navigator.userAgent),d=document.createElement("a"),s;function u(c){var h=c;return o&&(d.setAttribute("href",h),h=d.href),d.setAttribute("href",h),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:d.pathname.charAt(0)==="/"?d.pathname:"/"+d.pathname}}return s=u(window.location.href),function(h){var p=n.isString(h)?u(h):h;return p.protocol===s.protocol&&p.host===s.host}}():function(){return function(){return!0}}()},{"./../utils":36}],32:[function(e,i,t){var n=e("../utils");i.exports=function(o,d){n.forEach(o,function(u,c){c!==d&&c.toUpperCase()===d.toUpperCase()&&(o[d]=u,delete o[c])})}},{"../utils":36}],33:[function(e,i,t){var n=e("./../utils"),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];i.exports=function(d){var s={},u,c,h;return d&&n.forEach(d.split(`
`),function(l){if(h=l.indexOf(":"),u=n.trim(l.substr(0,h)).toLowerCase(),c=n.trim(l.substr(h+1)),u){if(s[u]&&a.indexOf(u)>=0)return;u==="set-cookie"?s[u]=(s[u]?s[u]:[]).concat([c]):s[u]=s[u]?s[u]+", "+c:c}}),s}},{"./../utils":36}],34:[function(e,i,t){i.exports=function(a){return function(d){return a.apply(null,d)}}},{}],35:[function(e,i,t){var n=e("./../../package.json"),a={};["object","boolean","number","function","string","symbol"].forEach(function(c,h){a[c]=function(l){return typeof l===c||"a"+(h<1?"n ":" ")+c}});var o={},d=n.version.split(".");function s(c,h){for(var p=h?h.split("."):d,l=c.split("."),f=0;f<3;f++){if(p[f]>l[f])return!0;if(p[f]<l[f])return!1}return!1}a.transitional=function(h,p,l){var f=p&&s(p);function m(v,E){return"[Axios v"+n.version+"] Transitional option '"+v+"'"+E+(l?". "+l:"")}return function(v,E,k){if(h===!1)throw new Error(m(E," has been removed in "+p));return f&&!o[E]&&(o[E]=!0,console.warn(m(E," has been deprecated since v"+p+" and will be removed in the near future"))),h?h(v,E,k):!0}};function u(c,h,p){if(typeof c!="object")throw new TypeError("options must be an object");for(var l=Object.keys(c),f=l.length;f-- >0;){var m=l[f],v=h[m];if(v){var E=c[m],k=E===void 0||v(E,m,c);if(k!==!0)throw new TypeError("option "+m+" must be "+k);continue}if(p!==!0)throw Error("Unknown option "+m)}}i.exports={isOlderVersion:s,assertOptions:u,validators:a}},{"./../../package.json":37}],36:[function(e,i,t){var n=e("./helpers/bind"),a=Object.prototype.toString;function o(Y){return a.call(Y)==="[object Array]"}function d(Y){return typeof Y>"u"}function s(Y){return Y!==null&&!d(Y)&&Y.constructor!==null&&!d(Y.constructor)&&typeof Y.constructor.isBuffer=="function"&&Y.constructor.isBuffer(Y)}function u(Y){return a.call(Y)==="[object ArrayBuffer]"}function c(Y){return typeof FormData<"u"&&Y instanceof FormData}function h(Y){var O;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?O=ArrayBuffer.isView(Y):O=Y&&Y.buffer&&Y.buffer instanceof ArrayBuffer,O}function p(Y){return typeof Y=="string"}function l(Y){return typeof Y=="number"}function f(Y){return Y!==null&&typeof Y=="object"}function m(Y){if(a.call(Y)!=="[object Object]")return!1;var O=Object.getPrototypeOf(Y);return O===null||O===Object.prototype}function v(Y){return a.call(Y)==="[object Date]"}function E(Y){return a.call(Y)==="[object File]"}function k(Y){return a.call(Y)==="[object Blob]"}function C(Y){return a.call(Y)==="[object Function]"}function N(Y){return f(Y)&&C(Y.pipe)}function P(Y){return typeof URLSearchParams<"u"&&Y instanceof URLSearchParams}function M(Y){return Y.trim?Y.trim():Y.replace(/^\s+|\s+$/g,"")}function L(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function $(Y,O){if(!(Y===null||typeof Y>"u"))if(typeof Y!="object"&&(Y=[Y]),o(Y))for(var D=0,b=Y.length;D<b;D++)O.call(null,Y[D],D,Y);else for(var _ in Y)Object.prototype.hasOwnProperty.call(Y,_)&&O.call(null,Y[_],_,Y)}function H(){var Y={};function O(_,g){m(Y[g])&&m(_)?Y[g]=H(Y[g],_):m(_)?Y[g]=H({},_):o(_)?Y[g]=_.slice():Y[g]=_}for(var D=0,b=arguments.length;D<b;D++)$(arguments[D],O);return Y}function Z(Y,O,D){return $(O,function(_,g){D&&typeof _=="function"?Y[g]=n(_,D):Y[g]=_}),Y}function re(Y){return Y.charCodeAt(0)===65279&&(Y=Y.slice(1)),Y}i.exports={isArray:o,isArrayBuffer:u,isBuffer:s,isFormData:c,isArrayBufferView:h,isString:p,isNumber:l,isObject:f,isPlainObject:m,isUndefined:d,isDate:v,isFile:E,isBlob:k,isFunction:C,isStream:N,isURLSearchParams:P,isStandardBrowserEnv:L,forEach:$,merge:H,extend:Z,trim:M,stripBOM:re}},{"./helpers/bind":25}],37:[function(e,i,t){i.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}},{}],38:[function(e,i,t){var n=e("buffer").Buffer,a=e("buffer").SlowBuffer;i.exports=o;function o(u,c){if(!n.isBuffer(u)||!n.isBuffer(c)||u.length!==c.length)return!1;for(var h=0,p=0;p<u.length;p++)h|=u[p]^c[p];return h===0}o.install=function(){n.prototype.equal=a.prototype.equal=function(c){return o(this,c)}};var d=n.prototype.equal,s=a.prototype.equal;o.restore=function(){n.prototype.equal=d,a.prototype.equal=s}},{buffer:171}],39:[function(e,i,t){const n=e("map-obj"),a=e("camelcase"),o=e("quick-lru"),d=(h,p)=>h.some(l=>typeof l=="string"?l===p:(l.lastIndex=0,l.test(p))),s=new o({maxSize:1e5}),u=h=>typeof h=="object"&&h!==null&&!(h instanceof RegExp)&&!(h instanceof Error)&&!(h instanceof Date),c=(h,p)=>{if(!u(h))return h;p={deep:!1,pascalCase:!1,...p};const{exclude:l,pascalCase:f,stopPaths:m,deep:v}=p,E=new Set(m),k=C=>(N,P)=>{if(v&&u(P)){const M=C===void 0?N:`${C}.${N}`;E.has(M)||(P=n(P,k(M)))}if(!(l&&d(l,N))){const M=f?`${N}_`:N;if(s.has(M))N=s.get(M);else{const L=a(N,{pascalCase:f,locale:!1});N.length<100&&s.set(M,L),N=L}}return[N,P]};return n(h,k(void 0))};i.exports=(h,p)=>Array.isArray(h)?Object.keys(h).map(l=>c(h[l],p)):c(h,p)},{camelcase:40,"map-obj":86,"quick-lru":101}],40:[function(e,i,t){const n=/[\p{Lu}]/u,a=/[\p{Ll}]/u,o=/^[\p{Lu}](?![\p{Lu}])/gu,d=/([\p{Alpha}\p{N}_]|$)/u,s=/[_.\- ]+/,u=new RegExp("^"+s.source),c=new RegExp(s.source+d.source,"gu"),h=new RegExp("\\d+"+d.source,"gu"),p=(v,E,k)=>{let C=!1,N=!1,P=!1;for(let M=0;M<v.length;M++){const L=v[M];C&&n.test(L)?(v=v.slice(0,M)+"-"+v.slice(M),C=!1,P=N,N=!0,M++):N&&P&&a.test(L)?(v=v.slice(0,M-1)+"-"+v.slice(M-1),P=N,N=!1,C=!0):(C=E(L)===L&&k(L)!==L,P=N,N=k(L)===L&&E(L)!==L)}return v},l=(v,E)=>(o.lastIndex=0,v.replace(o,k=>E(k))),f=(v,E)=>(c.lastIndex=0,h.lastIndex=0,v.replace(c,(k,C)=>E(C)).replace(h,k=>E(k))),m=(v,E)=>{if(!(typeof v=="string"||Array.isArray(v)))throw new TypeError("Expected the input to be `string | string[]`");if(E={pascalCase:!1,preserveConsecutiveUppercase:!1,...E},Array.isArray(v)?v=v.map(P=>P.trim()).filter(P=>P.length).join("-"):v=v.trim(),v.length===0)return"";const k=E.locale===!1?P=>P.toLowerCase():P=>P.toLocaleLowerCase(E.locale),C=E.locale===!1?P=>P.toUpperCase():P=>P.toLocaleUpperCase(E.locale);return v.length===1?E.pascalCase?C(v):k(v):(v!==k(v)&&(v=p(v,k,C)),v=v.replace(u,""),E.preserveConsecutiveUppercase?v=l(v,k):v=k(v),E.pascalCase&&(v=C(v.charAt(0))+v.slice(1)),f(v,C))};i.exports=m,i.exports.default=m},{}],41:[function(e,i,t){(function(n){(function(){t.formatArgs=o,t.save=d,t.load=s,t.useColors=a,t.storage=u(),t.destroy=(()=>{let h=!1;return()=>{h||(h=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function a(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(h){if(h[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+h[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!this.useColors)return;const p="color: "+this.color;h.splice(1,0,p,"color: inherit");let l=0,f=0;h[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(l++,m==="%c"&&(f=l))}),h.splice(f,0,p)}t.log=console.debug||console.log||(()=>{});function d(h){try{h?t.storage.setItem("debug",h):t.storage.removeItem("debug")}catch{}}function s(){let h;try{h=t.storage.getItem("debug")}catch{}return!h&&typeof n<"u"&&"env"in n&&(h={}.DEBUG),h}function u(){try{return localStorage}catch{}}i.exports=e("./common")(t);const{formatters:c}=i.exports;c.j=function(h){try{return JSON.stringify(h)}catch(p){return"[UnexpectedJSONParseError]: "+p.message}}}).call(this)}).call(this,e("_process"))},{"./common":42,_process:254}],42:[function(e,i,t){function n(a){d.debug=d,d.default=d,d.coerce=l,d.disable=c,d.enable=u,d.enabled=h,d.humanize=e("ms"),d.destroy=f,Object.keys(a).forEach(m=>{d[m]=a[m]}),d.names=[],d.skips=[],d.formatters={};function o(m){let v=0;for(let E=0;E<m.length;E++)v=(v<<5)-v+m.charCodeAt(E),v|=0;return d.colors[Math.abs(v)%d.colors.length]}d.selectColor=o;function d(m){let v,E=null,k,C;function N(...P){if(!N.enabled)return;const M=N,L=Number(new Date),$=L-(v||L);M.diff=$,M.prev=v,M.curr=L,v=L,P[0]=d.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let H=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(re,Y)=>{if(re==="%%")return"%";H++;const O=d.formatters[Y];if(typeof O=="function"){const D=P[H];re=O.call(M,D),P.splice(H,1),H--}return re}),d.formatArgs.call(M,P),(M.log||d.log).apply(M,P)}return N.namespace=m,N.useColors=d.useColors(),N.color=d.selectColor(m),N.extend=s,N.destroy=d.destroy,Object.defineProperty(N,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(k!==d.namespaces&&(k=d.namespaces,C=d.enabled(m)),C),set:P=>{E=P}}),typeof d.init=="function"&&d.init(N),N}function s(m,v){const E=d(this.namespace+(typeof v>"u"?":":v)+m);return E.log=this.log,E}function u(m){d.save(m),d.namespaces=m,d.names=[],d.skips=[];let v;const E=(typeof m=="string"?m:"").split(/[\s,]+/),k=E.length;for(v=0;v<k;v++)E[v]&&(m=E[v].replace(/\*/g,".*?"),m[0]==="-"?d.skips.push(new RegExp("^"+m.slice(1)+"$")):d.names.push(new RegExp("^"+m+"$")))}function c(){const m=[...d.names.map(p),...d.skips.map(p).map(v=>"-"+v)].join(",");return d.enable(""),m}function h(m){if(m[m.length-1]==="*")return!0;let v,E;for(v=0,E=d.skips.length;v<E;v++)if(d.skips[v].test(m))return!1;for(v=0,E=d.names.length;v<E;v++)if(d.names[v].test(m))return!0;return!1}function p(m){return m.toString().substring(2,m.toString().length-2).replace(/\.\*\?$/,"*")}function l(m){return m instanceof Error?m.stack||m.message:m}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return d.enable(d.load()),d}i.exports=n},{ms:87}],43:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("./param-bytes-for-alg"),o=128,d=0,s=32,u=16,c=2,h=u|s|d<<6,p=c|d<<6;function l(k){return k.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function f(k){if(n.isBuffer(k))return k;if(typeof k=="string")return n.from(k,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function m(k,C){k=f(k);var N=a(C),P=N+1,M=k.length,L=0;if(k[L++]!==h)throw new Error('Could not find expected "seq"');var $=k[L++];if($===(o|1)&&($=k[L++]),M-L<$)throw new Error('"seq" specified length of "'+$+'", only "'+(M-L)+'" remaining');if(k[L++]!==p)throw new Error('Could not find expected "int" for "r"');var H=k[L++];if(M-L-2<H)throw new Error('"r" specified length of "'+H+'", only "'+(M-L-2)+'" available');if(P<H)throw new Error('"r" specified length of "'+H+'", max of "'+P+'" is acceptable');var Z=L;if(L+=H,k[L++]!==p)throw new Error('Could not find expected "int" for "s"');var re=k[L++];if(M-L!==re)throw new Error('"s" specified length of "'+re+'", expected "'+(M-L)+'"');if(P<re)throw new Error('"s" specified length of "'+re+'", max of "'+P+'" is acceptable');var Y=L;if(L+=re,L!==M)throw new Error('Expected to consume entire buffer, but "'+(M-L)+'" bytes remain');var O=N-H,D=N-re,b=n.allocUnsafe(O+H+D+re);for(L=0;L<O;++L)b[L]=0;k.copy(b,L,Z+Math.max(-O,0),Z+H),L=N;for(var _=L;L<_+D;++L)b[L]=0;return k.copy(b,L,Y+Math.max(-D,0),Y+re),b=b.toString("base64"),b=l(b),b}function v(k,C,N){for(var P=0;C+P<N&&k[C+P]===0;)++P;var M=k[C+P]>=o;return M&&--P,P}function E(k,C){k=f(k);var N=a(C),P=k.length;if(P!==N*2)throw new TypeError('"'+C+'" signatures must be "'+N*2+'" bytes, saw "'+P+'"');var M=v(k,0,N),L=v(k,N,k.length),$=N-M,H=N-L,Z=1+1+$+1+1+H,re=Z<o,Y=n.allocUnsafe((re?2:3)+Z),O=0;return Y[O++]=h,re?Y[O++]=Z:(Y[O++]=o|1,Y[O++]=Z&255),Y[O++]=p,Y[O++]=$,M<0?(Y[O++]=0,O+=k.copy(Y,O,0,N)):O+=k.copy(Y,O,M,N),Y[O++]=p,Y[O++]=H,L<0?(Y[O++]=0,k.copy(Y,O,N)):k.copy(Y,O,N+L),Y}i.exports={derToJose:m,joseToDer:E}},{"./param-bytes-for-alg":44,"safe-buffer":118}],44:[function(e,i,t){function n(d){var s=(d/8|0)+(d%8===0?0:1);return s}var a={ES256:n(256),ES384:n(384),ES512:n(521)};function o(d){var s=a[d];if(s)return s;throw new Error('Unknown algorithm "'+d+'"')}i.exports=o},{}],45:[function(e,i,t){function n(o,d){for(const s in d)Object.defineProperty(o,s,{value:d[s],enumerable:!0,configurable:!0});return o}function a(o,d,s){if(!o||typeof o=="string")throw new TypeError("Please pass an Error to err-code");s||(s={}),typeof d=="object"&&(s=d,d=""),d&&(s.code=d);try{return n(o,s)}catch{s.message=o.message,s.stack=o.stack;const c=function(){};return c.prototype=Object.create(Object.getPrototypeOf(o)),n(new c,s)}}i.exports=a},{}],46:[function(e,i,t){i.exports=function(){if(typeof globalThis>"u")return null;var a={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return a.RTCPeerConnection?a:null}},{}],47:[function(e,i,t){typeof Object.create=="function"?i.exports=function(a,o){o&&(a.super_=o,a.prototype=Object.create(o.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(a,o){if(o){a.super_=o;var d=function(){};d.prototype=o.prototype,a.prototype=new d,a.prototype.constructor=a}}},{}],48:[function(e,i,t){var n=e("jws");i.exports=function(a,o){o=o||{};var d=n.decode(a,o);if(!d)return null;var s=d.payload;if(typeof s=="string")try{var u=JSON.parse(s);u!==null&&typeof u=="object"&&(s=u)}catch{}return o.complete===!0?{header:d.header,payload:s,signature:d.signature}:s}},{jws:58}],49:[function(e,i,t){i.exports={decode:e("./decode"),verify:e("./verify"),sign:e("./sign"),JsonWebTokenError:e("./lib/JsonWebTokenError"),NotBeforeError:e("./lib/NotBeforeError"),TokenExpiredError:e("./lib/TokenExpiredError")}},{"./decode":48,"./lib/JsonWebTokenError":50,"./lib/NotBeforeError":51,"./lib/TokenExpiredError":52,"./sign":55,"./verify":56}],50:[function(e,i,t){var n=function(a,o){Error.call(this,a),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=a,o&&(this.inner=o)};n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,i.exports=n},{}],51:[function(e,i,t){var n=e("./JsonWebTokenError"),a=function(o,d){n.call(this,o),this.name="NotBeforeError",this.date=d};a.prototype=Object.create(n.prototype),a.prototype.constructor=a,i.exports=a},{"./JsonWebTokenError":50}],52:[function(e,i,t){var n=e("./JsonWebTokenError"),a=function(o,d){n.call(this,o),this.name="TokenExpiredError",this.expiredAt=d};a.prototype=Object.create(n.prototype),a.prototype.constructor=a,i.exports=a},{"./JsonWebTokenError":50}],53:[function(e,i,t){(function(n){(function(){var a=e("semver");i.exports=a.satisfies(n.version,"^6.12.0 || >=8.0.0")}).call(this)}).call(this,e("_process"))},{_process:254,semver:119}],54:[function(e,i,t){var n=e("ms");i.exports=function(a,o){var d=o||Math.floor(Date.now()/1e3);if(typeof a=="string"){var s=n(a);return typeof s>"u"?void 0:Math.floor(d+s/1e3)}else return typeof a=="number"?d+a:void 0}},{ms:88}],55:[function(e,i,t){(function(n){(function(){var a=e("./lib/timespan"),o=e("./lib/psSupported"),d=e("jws"),s=e("lodash.includes"),u=e("lodash.isboolean"),c=e("lodash.isinteger"),h=e("lodash.isnumber"),p=e("lodash.isplainobject"),l=e("lodash.isstring"),f=e("lodash.once"),m=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];o&&m.splice(3,0,"PS256","PS384","PS512");var v={expiresIn:{isValid:function(L){return c(L)||l(L)&&L},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(L){return c(L)||l(L)&&L},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(L){return l(L)||Array.isArray(L)},message:'"audience" must be a string or array'},algorithm:{isValid:s.bind(null,m),message:'"algorithm" must be a valid string enum value'},header:{isValid:p,message:'"header" must be an object'},encoding:{isValid:l,message:'"encoding" must be a string'},issuer:{isValid:l,message:'"issuer" must be a string'},subject:{isValid:l,message:'"subject" must be a string'},jwtid:{isValid:l,message:'"jwtid" must be a string'},noTimestamp:{isValid:u,message:'"noTimestamp" must be a boolean'},keyid:{isValid:l,message:'"keyid" must be a string'},mutatePayload:{isValid:u,message:'"mutatePayload" must be a boolean'}},E={iat:{isValid:h,message:'"iat" should be a number of seconds'},exp:{isValid:h,message:'"exp" should be a number of seconds'},nbf:{isValid:h,message:'"nbf" should be a number of seconds'}};function k(L,$,H,Z){if(!p(H))throw new Error('Expected "'+Z+'" to be a plain object.');Object.keys(H).forEach(function(re){var Y=L[re];if(!Y){if(!$)throw new Error('"'+re+'" is not allowed in "'+Z+'"');return}if(!Y.isValid(H[re]))throw new Error(Y.message)})}function C(L){return k(v,!1,L,"options")}function N(L){return k(E,!0,L,"payload")}var P={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},M=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];i.exports=function(L,$,H,Z){typeof H=="function"?(Z=H,H={}):H=H||{};var re=typeof L=="object"&&!n.isBuffer(L),Y=Object.assign({alg:H.algorithm||"HS256",typ:re?"JWT":void 0,kid:H.keyid},H.header);function O(g){if(Z)return Z(g);throw g}if(!$&&H.algorithm!=="none")return O(new Error("secretOrPrivateKey must have a value"));if(typeof L>"u")return O(new Error("payload is required"));if(re){try{N(L)}catch(g){return O(g)}H.mutatePayload||(L=Object.assign({},L))}else{var D=M.filter(function(g){return typeof H[g]<"u"});if(D.length>0)return O(new Error("invalid "+D.join(",")+" option for "+typeof L+" payload"))}if(typeof L.exp<"u"&&typeof H.expiresIn<"u")return O(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof L.nbf<"u"&&typeof H.notBefore<"u")return O(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{C(H)}catch(g){return O(g)}var b=L.iat||Math.floor(Date.now()/1e3);if(H.noTimestamp?delete L.iat:re&&(L.iat=b),typeof H.notBefore<"u"){try{L.nbf=a(H.notBefore,b)}catch(g){return O(g)}if(typeof L.nbf>"u")return O(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof H.expiresIn<"u"&&typeof L=="object"){try{L.exp=a(H.expiresIn,b)}catch(g){return O(g)}if(typeof L.exp>"u")return O(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(P).forEach(function(g){var w=P[g];if(typeof H[g]<"u"){if(typeof L[w]<"u")return O(new Error('Bad "options.'+g+'" option. The payload already has an "'+w+'" property.'));L[w]=H[g]}});var _=H.encoding||"utf8";if(typeof Z=="function")Z=Z&&f(Z),d.createSign({header:Y,privateKey:$,payload:L,encoding:_}).once("error",Z).once("done",function(g){Z(null,g)});else return d.sign({header:Y,payload:L,secret:$,encoding:_})}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../Library/pnpm/global/5/.pnpm/is-buffer@1.1.6/node_modules/is-buffer/index.js")})},{"../../../../../../../../Library/pnpm/global/5/.pnpm/is-buffer@1.1.6/node_modules/is-buffer/index.js":235,"./lib/psSupported":53,"./lib/timespan":54,jws:58,"lodash.includes":78,"lodash.isboolean":79,"lodash.isinteger":80,"lodash.isnumber":81,"lodash.isplainobject":82,"lodash.isstring":83,"lodash.once":84}],56:[function(e,i,t){var n=e("./lib/JsonWebTokenError"),a=e("./lib/NotBeforeError"),o=e("./lib/TokenExpiredError"),d=e("./decode"),s=e("./lib/timespan"),u=e("./lib/psSupported"),c=e("jws"),h=["RS256","RS384","RS512","ES256","ES384","ES512"],p=["RS256","RS384","RS512"],l=["HS256","HS384","HS512"];u&&(h.splice(3,0,"PS256","PS384","PS512"),p.splice(3,0,"PS256","PS384","PS512")),i.exports=function(f,m,v,E){typeof v=="function"&&!E&&(E=v,v={}),v||(v={}),v=Object.assign({},v);var k;if(E?k=E:k=function($,H){if($)throw $;return H},v.clockTimestamp&&typeof v.clockTimestamp!="number")return k(new n("clockTimestamp must be a number"));if(v.nonce!==void 0&&(typeof v.nonce!="string"||v.nonce.trim()===""))return k(new n("nonce must be a non-empty string"));var C=v.clockTimestamp||Math.floor(Date.now()/1e3);if(!f)return k(new n("jwt must be provided"));if(typeof f!="string")return k(new n("jwt must be a string"));var N=f.split(".");if(N.length!==3)return k(new n("jwt malformed"));var P;try{P=d(f,{complete:!0})}catch($){return k($)}if(!P)return k(new n("invalid token"));var M=P.header,L;if(typeof m=="function"){if(!E)return k(new n("verify must be called asynchronous if secret or public key is provided as a callback"));L=m}else L=function($,H){return H(null,m)};return L(M,function($,H){if($)return k(new n("error in secret or public key callback: "+$.message));var Z=N[2].trim()!=="";if(!Z&&H)return k(new n("jwt signature is required"));if(Z&&!H)return k(new n("secret or public key must be provided"));if(!Z&&!v.algorithms&&(v.algorithms=["none"]),v.algorithms||(v.algorithms=~H.toString().indexOf("BEGIN CERTIFICATE")||~H.toString().indexOf("BEGIN PUBLIC KEY")?h:~H.toString().indexOf("BEGIN RSA PUBLIC KEY")?p:l),!~v.algorithms.indexOf(P.header.alg))return k(new n("invalid algorithm"));var re;try{re=c.verify(f,P.header.alg,H)}catch(T){return k(T)}if(!re)return k(new n("invalid signature"));var Y=P.payload;if(typeof Y.nbf<"u"&&!v.ignoreNotBefore){if(typeof Y.nbf!="number")return k(new n("invalid nbf value"));if(Y.nbf>C+(v.clockTolerance||0))return k(new a("jwt not active",new Date(Y.nbf*1e3)))}if(typeof Y.exp<"u"&&!v.ignoreExpiration){if(typeof Y.exp!="number")return k(new n("invalid exp value"));if(C>=Y.exp+(v.clockTolerance||0))return k(new o("jwt expired",new Date(Y.exp*1e3)))}if(v.audience){var O=Array.isArray(v.audience)?v.audience:[v.audience],D=Array.isArray(Y.aud)?Y.aud:[Y.aud],b=D.some(function(T){return O.some(function(A){return A instanceof RegExp?A.test(T):A===T})});if(!b)return k(new n("jwt audience invalid. expected: "+O.join(" or ")))}if(v.issuer){var _=typeof v.issuer=="string"&&Y.iss!==v.issuer||Array.isArray(v.issuer)&&v.issuer.indexOf(Y.iss)===-1;if(_)return k(new n("jwt issuer invalid. expected: "+v.issuer))}if(v.subject&&Y.sub!==v.subject)return k(new n("jwt subject invalid. expected: "+v.subject));if(v.jwtid&&Y.jti!==v.jwtid)return k(new n("jwt jwtid invalid. expected: "+v.jwtid));if(v.nonce&&Y.nonce!==v.nonce)return k(new n("jwt nonce invalid. expected: "+v.nonce));if(v.maxAge){if(typeof Y.iat!="number")return k(new n("iat required when maxAge is specified"));var g=s(v.maxAge,Y.iat);if(typeof g>"u")return k(new n('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(C>=g+(v.clockTolerance||0))return k(new o("maxAge exceeded",new Date(g*1e3)))}if(v.complete===!0){var w=P.signature;return k(null,{header:M,payload:Y,signature:w})}return k(null,Y)})}},{"./decode":48,"./lib/JsonWebTokenError":50,"./lib/NotBeforeError":51,"./lib/TokenExpiredError":52,"./lib/psSupported":53,"./lib/timespan":54,jws:58}],57:[function(e,i,t){var n=e("buffer-equal-constant-time"),a=e("safe-buffer").Buffer,o=e("crypto"),d=e("ecdsa-sig-formatter"),s=e("util"),u=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,c="secret must be a string or buffer",h="key must be a string or a buffer",p="key must be a string, a buffer or an object",l=typeof o.createPublicKey=="function";l&&(h+=" or a KeyObject",c+="or a KeyObject");function f(_){if(!a.isBuffer(_)&&typeof _!="string"&&(!l||typeof _!="object"||typeof _.type!="string"||typeof _.asymmetricKeyType!="string"||typeof _.export!="function"))throw C(h)}function m(_){if(!a.isBuffer(_)&&typeof _!="string"&&typeof _!="object")throw C(p)}function v(_){if(!a.isBuffer(_)){if(typeof _=="string")return _;if(!l||typeof _!="object"||_.type!=="secret"||typeof _.export!="function")throw C(c)}}function E(_){return _.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function k(_){_=_.toString();var g=4-_.length%4;if(g!==4)for(var w=0;w<g;++w)_+="=";return _.replace(/\-/g,"+").replace(/_/g,"/")}function C(_){var g=[].slice.call(arguments,1),w=s.format.bind(s,_).apply(null,g);return new TypeError(w)}function N(_){return a.isBuffer(_)||typeof _=="string"}function P(_){return N(_)||(_=JSON.stringify(_)),_}function M(_){return function(w,T){v(T),w=P(w);var A=o.createHmac("sha"+_,T),J=(A.update(w),A.digest("base64"));return E(J)}}function L(_){return function(w,T,A){var J=M(_)(w,A);return n(a.from(T),a.from(J))}}function $(_){return function(w,T){m(T),w=P(w);var A=o.createSign("RSA-SHA"+_),J=(A.update(w),A.sign(T,"base64"));return E(J)}}function H(_){return function(w,T,A){f(A),w=P(w),T=k(T);var J=o.createVerify("RSA-SHA"+_);return J.update(w),J.verify(A,T,"base64")}}function Z(_){return function(w,T){m(T),w=P(w);var A=o.createSign("RSA-SHA"+_),J=(A.update(w),A.sign({key:T,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return E(J)}}function re(_){return function(w,T,A){f(A),w=P(w),T=k(T);var J=o.createVerify("RSA-SHA"+_);return J.update(w),J.verify({key:A,padding:o.constants.RSA_PKCS1_PSS_PADDING,saltLength:o.constants.RSA_PSS_SALTLEN_DIGEST},T,"base64")}}function Y(_){var g=$(_);return function(){var T=g.apply(null,arguments);return T=d.derToJose(T,"ES"+_),T}}function O(_){var g=H(_);return function(T,A,J){A=d.joseToDer(A,"ES"+_).toString("base64");var G=g(T,A,J);return G}}function D(){return function(){return""}}function b(){return function(g,w){return w===""}}i.exports=function(g){var w={hs:M,rs:$,ps:Z,es:Y,none:D},T={hs:L,rs:H,ps:re,es:O,none:b},A=g.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!A)throw C(u,g);var J=(A[1]||A[3]).toLowerCase(),G=A[2];return{sign:w[J](G),verify:T[J](G)}}},{"buffer-equal-constant-time":38,crypto:180,"ecdsa-sig-formatter":43,"safe-buffer":118,util:294}],58:[function(e,i,t){var n=e("./lib/sign-stream"),a=e("./lib/verify-stream"),o=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];t.ALGORITHMS=o,t.sign=n.sign,t.verify=a.verify,t.decode=a.decode,t.isValid=a.isValid,t.createSign=function(s){return new n(s)},t.createVerify=function(s){return new a(s)}},{"./lib/sign-stream":60,"./lib/verify-stream":62}],59:[function(e,i,t){(function(n){(function(){var a=e("safe-buffer").Buffer,o=e("stream"),d=e("util");function s(u){if(this.buffer=null,this.writable=!0,this.readable=!0,!u)return this.buffer=a.alloc(0),this;if(typeof u.pipe=="function")return this.buffer=a.alloc(0),u.pipe(this),this;if(u.length||typeof u=="object")return this.buffer=u,this.writable=!1,n.nextTick(function(){this.emit("end",u),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof u+")")}d.inherits(s,o),s.prototype.write=function(c){this.buffer=a.concat([this.buffer,a.from(c)]),this.emit("data",c)},s.prototype.end=function(c){c&&this.write(c),this.emit("end",c),this.emit("close"),this.writable=!1,this.readable=!1},i.exports=s}).call(this)}).call(this,e("_process"))},{_process:254,"safe-buffer":118,stream:289,util:294}],60:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("./data-stream"),o=e("jwa"),d=e("stream"),s=e("./tostring"),u=e("util");function c(f,m){return n.from(f,m).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function h(f,m,v){v=v||"utf8";var E=c(s(f),"binary"),k=c(s(m),v);return u.format("%s.%s",E,k)}function p(f){var m=f.header,v=f.payload,E=f.secret||f.privateKey,k=f.encoding,C=o(m.alg),N=h(m,v,k),P=C.sign(N,E);return u.format("%s.%s",N,P)}function l(f){var m=f.secret||f.privateKey||f.key,v=new a(m);this.readable=!0,this.header=f.header,this.encoding=f.encoding,this.secret=this.privateKey=this.key=v,this.payload=new a(f.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}u.inherits(l,d),l.prototype.sign=function(){try{var m=p({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",m),this.emit("data",m),this.emit("end"),this.readable=!1,m}catch(v){this.readable=!1,this.emit("error",v),this.emit("close")}},l.sign=p,i.exports=l},{"./data-stream":59,"./tostring":61,jwa:57,"safe-buffer":118,stream:289,util:294}],61:[function(e,i,t){var n=e("buffer").Buffer;i.exports=function(o){return typeof o=="string"?o:typeof o=="number"||n.isBuffer(o)?o.toString():JSON.stringify(o)}},{buffer:171}],62:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("./data-stream"),o=e("jwa"),d=e("stream"),s=e("./tostring"),u=e("util"),c=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function h(P){return Object.prototype.toString.call(P)==="[object Object]"}function p(P){if(h(P))return P;try{return JSON.parse(P)}catch{return}}function l(P){var M=P.split(".",1)[0];return p(n.from(M,"base64").toString("binary"))}function f(P){return P.split(".",2).join(".")}function m(P){return P.split(".")[2]}function v(P,M){M=M||"utf8";var L=P.split(".")[1];return n.from(L,"base64").toString(M)}function E(P){return c.test(P)&&!!l(P)}function k(P,M,L){if(!M){var $=new Error("Missing algorithm parameter for jws.verify");throw $.code="MISSING_ALGORITHM",$}P=s(P);var H=m(P),Z=f(P),re=o(M);return re.verify(Z,H,L)}function C(P,M){if(M=M||{},P=s(P),!E(P))return null;var L=l(P);if(!L)return null;var $=v(P);return(L.typ==="JWT"||M.json)&&($=JSON.parse($,M.encoding)),{header:L,payload:$,signature:m(P)}}function N(P){P=P||{};var M=P.secret||P.publicKey||P.key,L=new a(M);this.readable=!0,this.algorithm=P.algorithm,this.encoding=P.encoding,this.secret=this.publicKey=this.key=L,this.signature=new a(P.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}u.inherits(N,d),N.prototype.verify=function(){try{var M=k(this.signature.buffer,this.algorithm,this.key.buffer),L=C(this.signature.buffer,this.encoding);return this.emit("done",M,L),this.emit("data",M),this.emit("end"),this.readable=!1,M}catch($){this.readable=!1,this.emit("error",$),this.emit("close")}},N.decode=C,N.isValid=E,N.verify=k,i.exports=N},{"./data-stream":59,"./tostring":61,jwa:57,"safe-buffer":118,stream:289,util:294}],63:[function(e,i,t){(function(n){(function(){var a=this&&this.__createBinding||(Object.create?function(p,l,f,m){m===void 0&&(m=f),Object.defineProperty(p,m,{enumerable:!0,get:function(){return l[f]}})}:function(p,l,f,m){m===void 0&&(m=f),p[m]=l[f]}),o=this&&this.__setModuleDefault||(Object.create?function(p,l){Object.defineProperty(p,"default",{enumerable:!0,value:l})}:function(p,l){p.default=l}),d=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var l={};if(p!=null)for(var f in p)f!=="default"&&Object.prototype.hasOwnProperty.call(p,f)&&a(l,p,f);return o(l,p),l};Object.defineProperty(t,"__esModule",{value:!0}),t.TokenVerifier=t.AccessToken=void 0;const s=d(e("jsonwebtoken")),u=6*60*60;class c{constructor(l,f,m){if(l||(l={}.LIVEKIT_API_KEY),f||(f={}.LIVEKIT_API_SECRET),!l||!f)throw Error("api-key and api-secret must be set");this.apiKey=l,this.apiSecret=f,this.grants={},this.identity=m==null?void 0:m.identity,this.ttl=(m==null?void 0:m.ttl)||u,m!=null&&m.metadata&&(this.metadata=m.metadata),m!=null&&m.name&&(this.name=m.name)}addGrant(l){this.grants.video=l}set metadata(l){this.grants.metadata=l}set name(l){this.grants.name=l}get sha256(){return this.grants.sha256}set sha256(l){this.grants.sha256=l}toJwt(){var l;const f={issuer:this.apiKey,expiresIn:this.ttl,notBefore:0};if(this.identity)f.subject=this.identity,f.jwtid=this.identity;else if(!((l=this.grants.video)===null||l===void 0)&&l.roomJoin)throw Error("identity is required for join but not set");return s.sign(this.grants,this.apiSecret,f)}}t.AccessToken=c;class h{constructor(l,f){this.apiKey=l,this.apiSecret=f}verify(l){const f=s.verify(l,this.apiSecret,{issuer:this.apiKey});if(!f)throw Error("invalid token");return f}}t.TokenVerifier=h}).call(this)}).call(this,e("_process"))},{_process:254,jsonwebtoken:49}],64:[function(e,i,t){var n=this&&this.__awaiter||function(h,p,l,f){function m(v){return v instanceof l?v:new l(function(E){E(v)})}return new(l||(l=Promise))(function(v,E){function k(P){try{N(f.next(P))}catch(M){E(M)}}function C(P){try{N(f.throw(P))}catch(M){E(M)}}function N(P){P.done?v(P.value):m(P.value).then(k,C)}N((f=f.apply(h,p||[])).next())})},a=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.EgressClient=void 0;const o=e("./proto/livekit_egress"),d=a(e("./ServiceBase")),s=e("./TwirpRPC"),u="Egress";class c extends d.default{constructor(p,l,f){super(l,f),this.rpc=new s.TwirpRpc(p,s.livekitPackage)}startRoomCompositeEgress(p,l,f,m,v,E,k){return n(this,void 0,void 0,function*(){let C;if(f!==void 0)if(typeof f=="string")C=f;else{const re=f;C=re.layout,m=re.encodingOptions,v=re.audioOnly,E=re.videoOnly,k=re.customBaseUrl}C??(C=""),v??(v=!1),E??(E=!1),k??(k="");const{file:N,segments:P,stream:M,preset:L,advanced:$}=this.getOutputParams(l,m),H=o.RoomCompositeEgressRequest.toJSON({roomName:p,layout:C,audioOnly:v,videoOnly:E,customBaseUrl:k,file:N,stream:M,segments:P,preset:L,advanced:$}),Z=yield this.rpc.request(u,"StartRoomCompositeEgress",H,this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(Z)})}startWebEgress(p,l,f){return n(this,void 0,void 0,function*(){const m=(f==null?void 0:f.audioOnly)||!1,v=(f==null?void 0:f.videoOnly)||!1,{file:E,segments:k,stream:C,preset:N,advanced:P}=this.getOutputParams(l,f==null?void 0:f.encodingOptions),M=o.WebEgressRequest.toJSON({url:p,audioOnly:m,videoOnly:v,file:E,stream:C,segments:k,preset:N,advanced:P}),L=yield this.rpc.request(u,"StartWebEgress",M,this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(L)})}startTrackCompositeEgress(p,l,f,m,v){return n(this,void 0,void 0,function*(){let E;if(f!==void 0)if(typeof f=="string")E=f;else{const H=f;E=H.audioTrackId,m=H.videoTrackId,v=H.encodingOptions}E??(E=""),m??(m="");const{file:k,segments:C,stream:N,preset:P,advanced:M}=this.getOutputParams(l,v),L=o.TrackCompositeEgressRequest.toJSON({roomName:p,audioTrackId:E,videoTrackId:m,file:k,stream:N,segments:C,preset:P,advanced:M}),$=yield this.rpc.request(u,"StartTrackCompositeEgress",L,this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON($)})}getOutputParams(p,l){let f,m,v,E,k;return p.filepath!==void 0?f=p:p.filenamePrefix!==void 0?v=p:m=p,l&&(typeof l=="number"?E=l:k=l),{file:f,segments:v,stream:m,preset:E,advanced:k}}startTrackEgress(p,l,f){return n(this,void 0,void 0,function*(){let m,v;l.filepath!==void 0?m=l:v=l;const E=o.TrackEgressRequest.toJSON({roomName:p,trackId:f,file:m,websocketUrl:v}),k=yield this.rpc.request(u,"StartTrackEgress",E,this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(k)})}updateLayout(p,l){return n(this,void 0,void 0,function*(){const f=yield this.rpc.request(u,"UpdateLayout",o.UpdateLayoutRequest.toJSON({egressId:p,layout:l}),this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(f)})}updateStream(p,l,f){return n(this,void 0,void 0,function*(){l??(l=[]),f??(f=[]);const m=yield this.rpc.request(u,"UpdateStream",o.UpdateStreamRequest.toJSON({egressId:p,addOutputUrls:l,removeOutputUrls:f}),this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(m)})}listEgress(p){var l;return n(this,void 0,void 0,function*(){p??(p="");const f=yield this.rpc.request(u,"ListEgress",o.ListEgressRequest.toJSON({roomName:p}),this.authHeader({roomRecord:!0}));return(l=o.ListEgressResponse.fromJSON(f).items)!==null&&l!==void 0?l:[]})}stopEgress(p){return n(this,void 0,void 0,function*(){const l=yield this.rpc.request(u,"StopEgress",o.StopEgressRequest.toJSON({egressId:p}),this.authHeader({roomRecord:!0}));return o.EgressInfo.fromJSON(l)})}}t.EgressClient=c},{"./ServiceBase":67,"./TwirpRPC":68,"./proto/livekit_egress":73}],65:[function(e,i,t){var n=this&&this.__awaiter||function(h,p,l,f){function m(v){return v instanceof l?v:new l(function(E){E(v)})}return new(l||(l=Promise))(function(v,E){function k(P){try{N(f.next(P))}catch(M){E(M)}}function C(P){try{N(f.throw(P))}catch(M){E(M)}}function N(P){P.done?v(P.value):m(P.value).then(k,C)}N((f=f.apply(h,p||[])).next())})},a=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.IngressClient=void 0;const o=e("./proto/livekit_ingress"),d=a(e("./ServiceBase")),s=e("./TwirpRPC"),u="Ingress";class c extends d.default{constructor(p,l,f){super(l,f),this.rpc=new s.TwirpRpc(p,s.livekitPackage)}createIngress(p,l){return n(this,void 0,void 0,function*(){let f="",m="",v="",E="",k,C;l!==void 0&&(f=l.name||"",m=l.roomName||"",v=l.participantName||"",E=l.participantIdentity||"",k=l.audioParams,C=l.videoParams);const N=o.CreateIngressRequest.toJSON({inputType:p,name:f,roomName:m,participantIdentity:E,participantName:v,audio:k,video:C}),P=yield this.rpc.request(u,"CreateIngress",N,this.authHeader({ingressAdmin:!0}));return o.IngressInfo.fromJSON(P)})}updateIngress(p,l){return n(this,void 0,void 0,function*(){const f=l.name||"",m=l.roomName||"",v=l.participantName||"",E=l.participantIdentity||"",k=l.audioParams,C=l.videoParams,N=o.UpdateIngressRequest.toJSON({ingressId:p,name:f,roomName:m,participantIdentity:E,participantName:v,audio:k,video:C}),P=yield this.rpc.request(u,"UpdateIngress",N,this.authHeader({ingressAdmin:!0}));return o.IngressInfo.fromJSON(P)})}listIngress(p){var l;return n(this,void 0,void 0,function*(){p??(p="");const f=yield this.rpc.request(u,"ListIngress",o.ListIngressRequest.toJSON({roomName:p}),this.authHeader({ingressAdmin:!0}));return(l=o.ListIngressResponse.fromJSON(f).items)!==null&&l!==void 0?l:[]})}deleteIngress(p){return n(this,void 0,void 0,function*(){const l=yield this.rpc.request(u,"DeleteIngress",o.DeleteIngressRequest.toJSON({ingressId:p}),this.authHeader({ingressAdmin:!0}));return o.IngressInfo.fromJSON(l)})}}t.IngressClient=c},{"./ServiceBase":67,"./TwirpRPC":68,"./proto/livekit_ingress":74}],66:[function(e,i,t){var n=this&&this.__awaiter||function(p,l,f,m){function v(E){return E instanceof f?E:new f(function(k){k(E)})}return new(f||(f=Promise))(function(E,k){function C(M){try{P(m.next(M))}catch(L){k(L)}}function N(M){try{P(m.throw(M))}catch(L){k(L)}}function P(M){M.done?E(M.value):v(M.value).then(C,N)}P((m=m.apply(p,l||[])).next())})},a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(t,"__esModule",{value:!0}),t.RoomServiceClient=void 0;const o=e("./proto/livekit_models"),d=e("./proto/livekit_room"),s=a(e("./ServiceBase")),u=e("./TwirpRPC"),c="RoomService";class h extends s.default{constructor(l,f,m){super(f,m),this.rpc=new u.TwirpRpc(l,u.livekitPackage)}createRoom(l){return n(this,void 0,void 0,function*(){const f=yield this.rpc.request(c,"CreateRoom",d.CreateRoomRequest.toJSON(d.CreateRoomRequest.fromPartial(l)),this.authHeader({roomCreate:!0}));return o.Room.fromJSON(f)})}listRooms(l){var f;return n(this,void 0,void 0,function*(){const m=yield this.rpc.request(c,"ListRooms",d.ListRoomsRequest.toJSON({names:l??[]}),this.authHeader({roomList:!0}));return(f=d.ListRoomsResponse.fromJSON(m).rooms)!==null&&f!==void 0?f:[]})}deleteRoom(l){return n(this,void 0,void 0,function*(){yield this.rpc.request(c,"DeleteRoom",d.DeleteRoomRequest.toJSON({room:l}),this.authHeader({roomCreate:!0}))})}updateRoomMetadata(l,f){return n(this,void 0,void 0,function*(){const m=yield this.rpc.request(c,"UpdateRoomMetadata",d.UpdateRoomMetadataRequest.toJSON({room:l,metadata:f}),this.authHeader({roomAdmin:!0,room:l}));return o.Room.fromJSON(m)})}listParticipants(l){var f;return n(this,void 0,void 0,function*(){const m=yield this.rpc.request(c,"ListParticipants",d.ListParticipantsRequest.toJSON({room:l}),this.authHeader({roomAdmin:!0,room:l}));return(f=d.ListParticipantsResponse.fromJSON(m).participants)!==null&&f!==void 0?f:[]})}getParticipant(l,f){return n(this,void 0,void 0,function*(){const m=yield this.rpc.request(c,"GetParticipant",d.RoomParticipantIdentity.toJSON({room:l,identity:f}),this.authHeader({roomAdmin:!0,room:l}));return o.ParticipantInfo.fromJSON(m)})}removeParticipant(l,f){return n(this,void 0,void 0,function*(){yield this.rpc.request(c,"RemoveParticipant",d.RoomParticipantIdentity.toJSON({room:l,identity:f}),this.authHeader({roomAdmin:!0,room:l}))})}mutePublishedTrack(l,f,m,v){return n(this,void 0,void 0,function*(){const E=d.MuteRoomTrackRequest.toJSON({room:l,identity:f,trackSid:m,muted:v}),k=yield this.rpc.request(c,"MutePublishedTrack",E,this.authHeader({roomAdmin:!0,room:l}));return d.MuteRoomTrackResponse.fromJSON(k).track})}updateParticipant(l,f,m,v,E){return n(this,void 0,void 0,function*(){const k={room:l,identity:f,metadata:m||"",permission:v,name:E||""},C=yield this.rpc.request(c,"UpdateParticipant",d.UpdateParticipantRequest.toJSON(k),this.authHeader({roomAdmin:!0,room:l}));return o.ParticipantInfo.fromJSON(C)})}updateSubscriptions(l,f,m,v){return n(this,void 0,void 0,function*(){const E=d.UpdateSubscriptionsRequest.toJSON({room:l,identity:f,trackSids:m,subscribe:v,participantTracks:[]});yield this.rpc.request(c,"UpdateSubscriptions",E,this.authHeader({roomAdmin:!0,room:l}))})}sendData(l,f,m,v=[]){return n(this,void 0,void 0,function*(){const E=d.SendDataRequest.toJSON({room:l,data:f,kind:m,destinationSids:v});yield this.rpc.request(c,"SendData",E,this.authHeader({roomAdmin:!0,room:l}))})}}t.RoomServiceClient=h},{"./ServiceBase":67,"./TwirpRPC":68,"./proto/livekit_models":75,"./proto/livekit_room":76}],67:[function(e,i,t){Object.defineProperty(t,"__esModule",{value:!0});const n=e("./AccessToken");class a{constructor(d,s,u){this.apiKey=d,this.secret=s,this.ttl=u||"10m"}authHeader(d){const s=new n.AccessToken(this.apiKey,this.secret,{ttl:this.ttl});return s.addGrant(d),{Authorization:`Bearer ${s.toJwt()}`}}}t.default=a},{"./AccessToken":63}],68:[function(e,i,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.TwirpRpc=t.livekitPackage=void 0;const a=n(e("axios")),o=n(e("camelcase-keys")),d="/twirp";t.livekitPackage="livekit";class s{constructor(c,h,p){this.host=c,this.pkg=h,this.prefix=p||d,this.instance=a.default.create({baseURL:c})}request(c,h,p,l){return new Promise((f,m)=>{const v=`${this.prefix}/${this.pkg}.${c}/${h}`;this.instance.post(v,p,{headers:l}).then(E=>{f(o.default(E.data,{deep:!0}))}).catch(m)})}}t.TwirpRpc=s},{axios:9,"camelcase-keys":39}],69:[function(e,i,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebhookReceiver=t.authorizeHeader=void 0;const a=n(e("crypto")),o=e("./AccessToken"),d=e("./proto/livekit_webhook");t.authorizeHeader="Authorize";class s{constructor(c,h){this.verifier=new o.TokenVerifier(c,h)}receive(c,h,p=!1){if(!p){if(!h)throw new Error("authorization header is empty");const l=this.verifier.verify(h),f=a.default.createHash("sha256");if(f.update(c),l.sha256!==f.digest("base64"))throw new Error("sha256 checksum of body does not match")}return d.WebhookEvent.fromJSON(JSON.parse(c))}}t.WebhookReceiver=s},{"./AccessToken":63,"./proto/livekit_webhook":77,crypto:180}],70:[function(e,i,t){Object.defineProperty(t,"__esModule",{value:!0})},{}],71:[function(e,i,t){var n=this&&this.__createBinding||(Object.create?function(u,c,h,p){p===void 0&&(p=h),Object.defineProperty(u,p,{enumerable:!0,get:function(){return c[h]}})}:function(u,c,h,p){p===void 0&&(p=h),u[p]=c[h]}),a=this&&this.__exportStar||function(u,c){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(c,h)&&n(c,u,h)};Object.defineProperty(t,"__esModule",{value:!0}),t.TrackType=t.TrackInfo=t.Room=t.ParticipantPermission=t.ParticipantInfo_State=t.ParticipantInfo=t.DataPacket_Kind=t.IngressVideoOptions=t.IngressState=t.IngressInput=t.IngressInfo=t.IngressAudioOptions=t.StreamProtocol=t.StreamOutput=t.SegmentedFileProtocol=t.SegmentedFileOutput=t.EncodingOptionsPreset=t.EncodingOptions=t.EncodedFileType=t.EncodedFileOutput=t.EgressInfo=t.DirectFileOutput=void 0,a(e("./AccessToken"),t),a(e("./EgressClient"),t),a(e("./grants"),t),a(e("./IngressClient"),t);var o=e("./proto/livekit_egress");Object.defineProperty(t,"DirectFileOutput",{enumerable:!0,get:function(){return o.DirectFileOutput}}),Object.defineProperty(t,"EgressInfo",{enumerable:!0,get:function(){return o.EgressInfo}}),Object.defineProperty(t,"EncodedFileOutput",{enumerable:!0,get:function(){return o.EncodedFileOutput}}),Object.defineProperty(t,"EncodedFileType",{enumerable:!0,get:function(){return o.EncodedFileType}}),Object.defineProperty(t,"EncodingOptions",{enumerable:!0,get:function(){return o.EncodingOptions}}),Object.defineProperty(t,"EncodingOptionsPreset",{enumerable:!0,get:function(){return o.EncodingOptionsPreset}}),Object.defineProperty(t,"SegmentedFileOutput",{enumerable:!0,get:function(){return o.SegmentedFileOutput}}),Object.defineProperty(t,"SegmentedFileProtocol",{enumerable:!0,get:function(){return o.SegmentedFileProtocol}}),Object.defineProperty(t,"StreamOutput",{enumerable:!0,get:function(){return o.StreamOutput}}),Object.defineProperty(t,"StreamProtocol",{enumerable:!0,get:function(){return o.StreamProtocol}});var d=e("./proto/livekit_ingress");Object.defineProperty(t,"IngressAudioOptions",{enumerable:!0,get:function(){return d.IngressAudioOptions}}),Object.defineProperty(t,"IngressInfo",{enumerable:!0,get:function(){return d.IngressInfo}}),Object.defineProperty(t,"IngressInput",{enumerable:!0,get:function(){return d.IngressInput}}),Object.defineProperty(t,"IngressState",{enumerable:!0,get:function(){return d.IngressState}}),Object.defineProperty(t,"IngressVideoOptions",{enumerable:!0,get:function(){return d.IngressVideoOptions}});var s=e("./proto/livekit_models");Object.defineProperty(t,"DataPacket_Kind",{enumerable:!0,get:function(){return s.DataPacket_Kind}}),Object.defineProperty(t,"ParticipantInfo",{enumerable:!0,get:function(){return s.ParticipantInfo}}),Object.defineProperty(t,"ParticipantInfo_State",{enumerable:!0,get:function(){return s.ParticipantInfo_State}}),Object.defineProperty(t,"ParticipantPermission",{enumerable:!0,get:function(){return s.ParticipantPermission}}),Object.defineProperty(t,"Room",{enumerable:!0,get:function(){return s.Room}}),Object.defineProperty(t,"TrackInfo",{enumerable:!0,get:function(){return s.TrackInfo}}),Object.defineProperty(t,"TrackType",{enumerable:!0,get:function(){return s.TrackType}}),a(e("./RoomServiceClient"),t),a(e("./WebhookReceiver"),t)},{"./AccessToken":63,"./EgressClient":64,"./IngressClient":65,"./RoomServiceClient":66,"./WebhookReceiver":69,"./grants":70,"./proto/livekit_egress":73,"./proto/livekit_ingress":74,"./proto/livekit_models":75}],72:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(t,"__esModule",{value:!0}),t.Timestamp=t.protobufPackage=void 0;const o=a(e("long")),d=a(e("protobufjs/minimal"));t.protobufPackage="google.protobuf";function s(){return{seconds:0,nanos:0}}t.Timestamp={encode(p,l=d.default.Writer.create()){return p.seconds!==0&&l.uint32(8).int64(p.seconds),p.nanos!==0&&l.uint32(16).int32(p.nanos),l},decode(p,l){const f=p instanceof d.default.Reader?p:new d.default.Reader(p);let m=l===void 0?f.len:f.pos+l;const v=s();for(;f.pos<m;){const E=f.uint32();switch(E>>>3){case 1:v.seconds=c(f.int64());break;case 2:v.nanos=f.int32();break;default:f.skipType(E&7);break}}return v},fromJSON(p){return{seconds:h(p.seconds)?Number(p.seconds):0,nanos:h(p.nanos)?Number(p.nanos):0}},toJSON(p){const l={};return p.seconds!==void 0&&(l.seconds=Math.round(p.seconds)),p.nanos!==void 0&&(l.nanos=Math.round(p.nanos)),l},fromPartial(p){var l,f;const m=s();return m.seconds=(l=p.seconds)!==null&&l!==void 0?l:0,m.nanos=(f=p.nanos)!==null&&f!==void 0?f:0,m}};var u=(()=>{if(typeof u<"u")return u;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function c(p){if(p.gt(Number.MAX_SAFE_INTEGER))throw new u.Error("Value is larger than Number.MAX_SAFE_INTEGER");return p.toNumber()}d.default.util.Long!==o.default&&(d.default.util.Long=o.default,d.default.configure());function h(p){return p!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{long:85,"protobufjs/minimal":89}],73:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTrackEgress=t.SegmentsInfo=t.FileInfo=t.StreamInfo=t.StreamInfoList=t.EgressInfo=t.StopEgressRequest=t.ListEgressResponse=t.ListEgressRequest=t.UpdateStreamRequest=t.UpdateLayoutRequest=t.EncodingOptions=t.StreamOutput=t.AliOSSUpload=t.AzureBlobUpload=t.GCPUpload=t.S3Upload_MetadataEntry=t.S3Upload=t.DirectFileOutput=t.SegmentedFileOutput=t.EncodedFileOutput=t.WebEgressRequest=t.TrackEgressRequest=t.TrackCompositeEgressRequest=t.RoomCompositeEgressRequest=t.streamInfo_StatusToJSON=t.streamInfo_StatusFromJSON=t.StreamInfo_Status=t.egressStatusToJSON=t.egressStatusFromJSON=t.EgressStatus=t.encodingOptionsPresetToJSON=t.encodingOptionsPresetFromJSON=t.EncodingOptionsPreset=t.videoCodecToJSON=t.videoCodecFromJSON=t.VideoCodec=t.audioCodecToJSON=t.audioCodecFromJSON=t.AudioCodec=t.segmentedFileProtocolToJSON=t.segmentedFileProtocolFromJSON=t.SegmentedFileProtocol=t.streamProtocolToJSON=t.streamProtocolFromJSON=t.StreamProtocol=t.encodedFileTypeToJSON=t.encodedFileTypeFromJSON=t.EncodedFileType=t.protobufPackage=void 0;const o=a(e("long")),d=a(e("protobufjs/minimal"));t.protobufPackage="livekit";var s;(function(y){y[y.DEFAULT_FILETYPE=0]="DEFAULT_FILETYPE",y[y.MP4=1]="MP4",y[y.OGG=2]="OGG",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(s=t.EncodedFileType||(t.EncodedFileType={}));function u(y){switch(y){case 0:case"DEFAULT_FILETYPE":return s.DEFAULT_FILETYPE;case 1:case"MP4":return s.MP4;case 2:case"OGG":return s.OGG;case-1:case"UNRECOGNIZED":default:return s.UNRECOGNIZED}}t.encodedFileTypeFromJSON=u;function c(y){switch(y){case s.DEFAULT_FILETYPE:return"DEFAULT_FILETYPE";case s.MP4:return"MP4";case s.OGG:return"OGG";case s.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.encodedFileTypeToJSON=c;var h;(function(y){y[y.DEFAULT_PROTOCOL=0]="DEFAULT_PROTOCOL",y[y.RTMP=1]="RTMP",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(h=t.StreamProtocol||(t.StreamProtocol={}));function p(y){switch(y){case 0:case"DEFAULT_PROTOCOL":return h.DEFAULT_PROTOCOL;case 1:case"RTMP":return h.RTMP;case-1:case"UNRECOGNIZED":default:return h.UNRECOGNIZED}}t.streamProtocolFromJSON=p;function l(y){switch(y){case h.DEFAULT_PROTOCOL:return"DEFAULT_PROTOCOL";case h.RTMP:return"RTMP";case h.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.streamProtocolToJSON=l;var f;(function(y){y[y.DEFAULT_SEGMENTED_FILE_PROTOCOL=0]="DEFAULT_SEGMENTED_FILE_PROTOCOL",y[y.HLS_PROTOCOL=1]="HLS_PROTOCOL",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(f=t.SegmentedFileProtocol||(t.SegmentedFileProtocol={}));function m(y){switch(y){case 0:case"DEFAULT_SEGMENTED_FILE_PROTOCOL":return f.DEFAULT_SEGMENTED_FILE_PROTOCOL;case 1:case"HLS_PROTOCOL":return f.HLS_PROTOCOL;case-1:case"UNRECOGNIZED":default:return f.UNRECOGNIZED}}t.segmentedFileProtocolFromJSON=m;function v(y){switch(y){case f.DEFAULT_SEGMENTED_FILE_PROTOCOL:return"DEFAULT_SEGMENTED_FILE_PROTOCOL";case f.HLS_PROTOCOL:return"HLS_PROTOCOL";case f.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.segmentedFileProtocolToJSON=v;var E;(function(y){y[y.DEFAULT_AC=0]="DEFAULT_AC",y[y.OPUS=1]="OPUS",y[y.AAC=2]="AAC",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(E=t.AudioCodec||(t.AudioCodec={}));function k(y){switch(y){case 0:case"DEFAULT_AC":return E.DEFAULT_AC;case 1:case"OPUS":return E.OPUS;case 2:case"AAC":return E.AAC;case-1:case"UNRECOGNIZED":default:return E.UNRECOGNIZED}}t.audioCodecFromJSON=k;function C(y){switch(y){case E.DEFAULT_AC:return"DEFAULT_AC";case E.OPUS:return"OPUS";case E.AAC:return"AAC";case E.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.audioCodecToJSON=C;var N;(function(y){y[y.DEFAULT_VC=0]="DEFAULT_VC",y[y.H264_BASELINE=1]="H264_BASELINE",y[y.H264_MAIN=2]="H264_MAIN",y[y.H264_HIGH=3]="H264_HIGH",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(N=t.VideoCodec||(t.VideoCodec={}));function P(y){switch(y){case 0:case"DEFAULT_VC":return N.DEFAULT_VC;case 1:case"H264_BASELINE":return N.H264_BASELINE;case 2:case"H264_MAIN":return N.H264_MAIN;case 3:case"H264_HIGH":return N.H264_HIGH;case-1:case"UNRECOGNIZED":default:return N.UNRECOGNIZED}}t.videoCodecFromJSON=P;function M(y){switch(y){case N.DEFAULT_VC:return"DEFAULT_VC";case N.H264_BASELINE:return"H264_BASELINE";case N.H264_MAIN:return"H264_MAIN";case N.H264_HIGH:return"H264_HIGH";case N.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.videoCodecToJSON=M;var L;(function(y){y[y.H264_720P_30=0]="H264_720P_30",y[y.H264_720P_60=1]="H264_720P_60",y[y.H264_1080P_30=2]="H264_1080P_30",y[y.H264_1080P_60=3]="H264_1080P_60",y[y.PORTRAIT_H264_720P_30=4]="PORTRAIT_H264_720P_30",y[y.PORTRAIT_H264_720P_60=5]="PORTRAIT_H264_720P_60",y[y.PORTRAIT_H264_1080P_30=6]="PORTRAIT_H264_1080P_30",y[y.PORTRAIT_H264_1080P_60=7]="PORTRAIT_H264_1080P_60",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(L=t.EncodingOptionsPreset||(t.EncodingOptionsPreset={}));function $(y){switch(y){case 0:case"H264_720P_30":return L.H264_720P_30;case 1:case"H264_720P_60":return L.H264_720P_60;case 2:case"H264_1080P_30":return L.H264_1080P_30;case 3:case"H264_1080P_60":return L.H264_1080P_60;case 4:case"PORTRAIT_H264_720P_30":return L.PORTRAIT_H264_720P_30;case 5:case"PORTRAIT_H264_720P_60":return L.PORTRAIT_H264_720P_60;case 6:case"PORTRAIT_H264_1080P_30":return L.PORTRAIT_H264_1080P_30;case 7:case"PORTRAIT_H264_1080P_60":return L.PORTRAIT_H264_1080P_60;case-1:case"UNRECOGNIZED":default:return L.UNRECOGNIZED}}t.encodingOptionsPresetFromJSON=$;function H(y){switch(y){case L.H264_720P_30:return"H264_720P_30";case L.H264_720P_60:return"H264_720P_60";case L.H264_1080P_30:return"H264_1080P_30";case L.H264_1080P_60:return"H264_1080P_60";case L.PORTRAIT_H264_720P_30:return"PORTRAIT_H264_720P_30";case L.PORTRAIT_H264_720P_60:return"PORTRAIT_H264_720P_60";case L.PORTRAIT_H264_1080P_30:return"PORTRAIT_H264_1080P_30";case L.PORTRAIT_H264_1080P_60:return"PORTRAIT_H264_1080P_60";case L.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.encodingOptionsPresetToJSON=H;var Z;(function(y){y[y.EGRESS_STARTING=0]="EGRESS_STARTING",y[y.EGRESS_ACTIVE=1]="EGRESS_ACTIVE",y[y.EGRESS_ENDING=2]="EGRESS_ENDING",y[y.EGRESS_COMPLETE=3]="EGRESS_COMPLETE",y[y.EGRESS_FAILED=4]="EGRESS_FAILED",y[y.EGRESS_ABORTED=5]="EGRESS_ABORTED",y[y.EGRESS_LIMIT_REACHED=6]="EGRESS_LIMIT_REACHED",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Z=t.EgressStatus||(t.EgressStatus={}));function re(y){switch(y){case 0:case"EGRESS_STARTING":return Z.EGRESS_STARTING;case 1:case"EGRESS_ACTIVE":return Z.EGRESS_ACTIVE;case 2:case"EGRESS_ENDING":return Z.EGRESS_ENDING;case 3:case"EGRESS_COMPLETE":return Z.EGRESS_COMPLETE;case 4:case"EGRESS_FAILED":return Z.EGRESS_FAILED;case 5:case"EGRESS_ABORTED":return Z.EGRESS_ABORTED;case 6:case"EGRESS_LIMIT_REACHED":return Z.EGRESS_LIMIT_REACHED;case-1:case"UNRECOGNIZED":default:return Z.UNRECOGNIZED}}t.egressStatusFromJSON=re;function Y(y){switch(y){case Z.EGRESS_STARTING:return"EGRESS_STARTING";case Z.EGRESS_ACTIVE:return"EGRESS_ACTIVE";case Z.EGRESS_ENDING:return"EGRESS_ENDING";case Z.EGRESS_COMPLETE:return"EGRESS_COMPLETE";case Z.EGRESS_FAILED:return"EGRESS_FAILED";case Z.EGRESS_ABORTED:return"EGRESS_ABORTED";case Z.EGRESS_LIMIT_REACHED:return"EGRESS_LIMIT_REACHED";case Z.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.egressStatusToJSON=Y;var O;(function(y){y[y.ACTIVE=0]="ACTIVE",y[y.FINISHED=1]="FINISHED",y[y.FAILED=2]="FAILED",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(O=t.StreamInfo_Status||(t.StreamInfo_Status={}));function D(y){switch(y){case 0:case"ACTIVE":return O.ACTIVE;case 1:case"FINISHED":return O.FINISHED;case 2:case"FAILED":return O.FAILED;case-1:case"UNRECOGNIZED":default:return O.UNRECOGNIZED}}t.streamInfo_StatusFromJSON=D;function b(y){switch(y){case O.ACTIVE:return"ACTIVE";case O.FINISHED:return"FINISHED";case O.FAILED:return"FAILED";case O.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.streamInfo_StatusToJSON=b;function _(){return{roomName:"",layout:"",audioOnly:!1,videoOnly:!1,customBaseUrl:"",file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}t.RoomCompositeEgressRequest={encode(y,F=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&F.uint32(10).string(y.roomName),y.layout!==void 0&&y.layout!==""&&F.uint32(18).string(y.layout),y.audioOnly===!0&&F.uint32(24).bool(y.audioOnly),y.videoOnly===!0&&F.uint32(32).bool(y.videoOnly),y.customBaseUrl!==void 0&&y.customBaseUrl!==""&&F.uint32(42).string(y.customBaseUrl),y.file!==void 0&&t.EncodedFileOutput.encode(y.file,F.uint32(50).fork()).ldelim(),y.stream!==void 0&&t.StreamOutput.encode(y.stream,F.uint32(58).fork()).ldelim(),y.segments!==void 0&&t.SegmentedFileOutput.encode(y.segments,F.uint32(82).fork()).ldelim(),y.preset!==void 0&&F.uint32(64).int32(y.preset),y.advanced!==void 0&&t.EncodingOptions.encode(y.advanced,F.uint32(74).fork()).ldelim(),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=_();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.roomName=q.string();break;case 2:j.layout=q.string();break;case 3:j.audioOnly=q.bool();break;case 4:j.videoOnly=q.bool();break;case 5:j.customBaseUrl=q.string();break;case 6:j.file=t.EncodedFileOutput.decode(q,q.uint32());break;case 7:j.stream=t.StreamOutput.decode(q,q.uint32());break;case 10:j.segments=t.SegmentedFileOutput.decode(q,q.uint32());break;case 8:j.preset=q.int32();break;case 9:j.advanced=t.EncodingOptions.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{roomName:he(y.roomName)?String(y.roomName):"",layout:he(y.layout)?String(y.layout):"",audioOnly:he(y.audioOnly)?!!y.audioOnly:!1,videoOnly:he(y.videoOnly)?!!y.videoOnly:!1,customBaseUrl:he(y.customBaseUrl)?String(y.customBaseUrl):"",file:he(y.file)?t.EncodedFileOutput.fromJSON(y.file):void 0,stream:he(y.stream)?t.StreamOutput.fromJSON(y.stream):void 0,segments:he(y.segments)?t.SegmentedFileOutput.fromJSON(y.segments):void 0,preset:he(y.preset)?$(y.preset):void 0,advanced:he(y.advanced)?t.EncodingOptions.fromJSON(y.advanced):void 0}},toJSON(y){const F={};return y.roomName!==void 0&&(F.roomName=y.roomName),y.layout!==void 0&&(F.layout=y.layout),y.audioOnly!==void 0&&(F.audioOnly=y.audioOnly),y.videoOnly!==void 0&&(F.videoOnly=y.videoOnly),y.customBaseUrl!==void 0&&(F.customBaseUrl=y.customBaseUrl),y.file!==void 0&&(F.file=y.file?t.EncodedFileOutput.toJSON(y.file):void 0),y.stream!==void 0&&(F.stream=y.stream?t.StreamOutput.toJSON(y.stream):void 0),y.segments!==void 0&&(F.segments=y.segments?t.SegmentedFileOutput.toJSON(y.segments):void 0),y.preset!==void 0&&(F.preset=y.preset!==void 0?H(y.preset):void 0),y.advanced!==void 0&&(F.advanced=y.advanced?t.EncodingOptions.toJSON(y.advanced):void 0),F},fromPartial(y){var F,q,ue,j,S,B;const K=_();return K.roomName=(F=y.roomName)!==null&&F!==void 0?F:"",K.layout=(q=y.layout)!==null&&q!==void 0?q:"",K.audioOnly=(ue=y.audioOnly)!==null&&ue!==void 0?ue:!1,K.videoOnly=(j=y.videoOnly)!==null&&j!==void 0?j:!1,K.customBaseUrl=(S=y.customBaseUrl)!==null&&S!==void 0?S:"",K.file=y.file!==void 0&&y.file!==null?t.EncodedFileOutput.fromPartial(y.file):void 0,K.stream=y.stream!==void 0&&y.stream!==null?t.StreamOutput.fromPartial(y.stream):void 0,K.segments=y.segments!==void 0&&y.segments!==null?t.SegmentedFileOutput.fromPartial(y.segments):void 0,K.preset=(B=y.preset)!==null&&B!==void 0?B:void 0,K.advanced=y.advanced!==void 0&&y.advanced!==null?t.EncodingOptions.fromPartial(y.advanced):void 0,K}};function g(){return{roomName:"",audioTrackId:"",videoTrackId:"",file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}t.TrackCompositeEgressRequest={encode(y,F=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&F.uint32(10).string(y.roomName),y.audioTrackId!==void 0&&y.audioTrackId!==""&&F.uint32(18).string(y.audioTrackId),y.videoTrackId!==void 0&&y.videoTrackId!==""&&F.uint32(26).string(y.videoTrackId),y.file!==void 0&&t.EncodedFileOutput.encode(y.file,F.uint32(34).fork()).ldelim(),y.stream!==void 0&&t.StreamOutput.encode(y.stream,F.uint32(42).fork()).ldelim(),y.segments!==void 0&&t.SegmentedFileOutput.encode(y.segments,F.uint32(66).fork()).ldelim(),y.preset!==void 0&&F.uint32(48).int32(y.preset),y.advanced!==void 0&&t.EncodingOptions.encode(y.advanced,F.uint32(58).fork()).ldelim(),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=g();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.roomName=q.string();break;case 2:j.audioTrackId=q.string();break;case 3:j.videoTrackId=q.string();break;case 4:j.file=t.EncodedFileOutput.decode(q,q.uint32());break;case 5:j.stream=t.StreamOutput.decode(q,q.uint32());break;case 8:j.segments=t.SegmentedFileOutput.decode(q,q.uint32());break;case 6:j.preset=q.int32();break;case 7:j.advanced=t.EncodingOptions.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{roomName:he(y.roomName)?String(y.roomName):"",audioTrackId:he(y.audioTrackId)?String(y.audioTrackId):"",videoTrackId:he(y.videoTrackId)?String(y.videoTrackId):"",file:he(y.file)?t.EncodedFileOutput.fromJSON(y.file):void 0,stream:he(y.stream)?t.StreamOutput.fromJSON(y.stream):void 0,segments:he(y.segments)?t.SegmentedFileOutput.fromJSON(y.segments):void 0,preset:he(y.preset)?$(y.preset):void 0,advanced:he(y.advanced)?t.EncodingOptions.fromJSON(y.advanced):void 0}},toJSON(y){const F={};return y.roomName!==void 0&&(F.roomName=y.roomName),y.audioTrackId!==void 0&&(F.audioTrackId=y.audioTrackId),y.videoTrackId!==void 0&&(F.videoTrackId=y.videoTrackId),y.file!==void 0&&(F.file=y.file?t.EncodedFileOutput.toJSON(y.file):void 0),y.stream!==void 0&&(F.stream=y.stream?t.StreamOutput.toJSON(y.stream):void 0),y.segments!==void 0&&(F.segments=y.segments?t.SegmentedFileOutput.toJSON(y.segments):void 0),y.preset!==void 0&&(F.preset=y.preset!==void 0?H(y.preset):void 0),y.advanced!==void 0&&(F.advanced=y.advanced?t.EncodingOptions.toJSON(y.advanced):void 0),F},fromPartial(y){var F,q,ue,j;const S=g();return S.roomName=(F=y.roomName)!==null&&F!==void 0?F:"",S.audioTrackId=(q=y.audioTrackId)!==null&&q!==void 0?q:"",S.videoTrackId=(ue=y.videoTrackId)!==null&&ue!==void 0?ue:"",S.file=y.file!==void 0&&y.file!==null?t.EncodedFileOutput.fromPartial(y.file):void 0,S.stream=y.stream!==void 0&&y.stream!==null?t.StreamOutput.fromPartial(y.stream):void 0,S.segments=y.segments!==void 0&&y.segments!==null?t.SegmentedFileOutput.fromPartial(y.segments):void 0,S.preset=(j=y.preset)!==null&&j!==void 0?j:void 0,S.advanced=y.advanced!==void 0&&y.advanced!==null?t.EncodingOptions.fromPartial(y.advanced):void 0,S}};function w(){return{roomName:"",trackId:"",file:void 0,websocketUrl:void 0}}t.TrackEgressRequest={encode(y,F=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&F.uint32(10).string(y.roomName),y.trackId!==void 0&&y.trackId!==""&&F.uint32(18).string(y.trackId),y.file!==void 0&&t.DirectFileOutput.encode(y.file,F.uint32(26).fork()).ldelim(),y.websocketUrl!==void 0&&F.uint32(34).string(y.websocketUrl),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=w();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.roomName=q.string();break;case 2:j.trackId=q.string();break;case 3:j.file=t.DirectFileOutput.decode(q,q.uint32());break;case 4:j.websocketUrl=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{roomName:he(y.roomName)?String(y.roomName):"",trackId:he(y.trackId)?String(y.trackId):"",file:he(y.file)?t.DirectFileOutput.fromJSON(y.file):void 0,websocketUrl:he(y.websocketUrl)?String(y.websocketUrl):void 0}},toJSON(y){const F={};return y.roomName!==void 0&&(F.roomName=y.roomName),y.trackId!==void 0&&(F.trackId=y.trackId),y.file!==void 0&&(F.file=y.file?t.DirectFileOutput.toJSON(y.file):void 0),y.websocketUrl!==void 0&&(F.websocketUrl=y.websocketUrl),F},fromPartial(y){var F,q,ue;const j=w();return j.roomName=(F=y.roomName)!==null&&F!==void 0?F:"",j.trackId=(q=y.trackId)!==null&&q!==void 0?q:"",j.file=y.file!==void 0&&y.file!==null?t.DirectFileOutput.fromPartial(y.file):void 0,j.websocketUrl=(ue=y.websocketUrl)!==null&&ue!==void 0?ue:void 0,j}};function T(){return{url:"",audioOnly:!1,videoOnly:!1,file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}t.WebEgressRequest={encode(y,F=d.default.Writer.create()){return y.url!==void 0&&y.url!==""&&F.uint32(10).string(y.url),y.audioOnly===!0&&F.uint32(16).bool(y.audioOnly),y.videoOnly===!0&&F.uint32(24).bool(y.videoOnly),y.file!==void 0&&t.EncodedFileOutput.encode(y.file,F.uint32(34).fork()).ldelim(),y.stream!==void 0&&t.StreamOutput.encode(y.stream,F.uint32(42).fork()).ldelim(),y.segments!==void 0&&t.SegmentedFileOutput.encode(y.segments,F.uint32(50).fork()).ldelim(),y.preset!==void 0&&F.uint32(56).int32(y.preset),y.advanced!==void 0&&t.EncodingOptions.encode(y.advanced,F.uint32(66).fork()).ldelim(),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=T();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.url=q.string();break;case 2:j.audioOnly=q.bool();break;case 3:j.videoOnly=q.bool();break;case 4:j.file=t.EncodedFileOutput.decode(q,q.uint32());break;case 5:j.stream=t.StreamOutput.decode(q,q.uint32());break;case 6:j.segments=t.SegmentedFileOutput.decode(q,q.uint32());break;case 7:j.preset=q.int32();break;case 8:j.advanced=t.EncodingOptions.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{url:he(y.url)?String(y.url):"",audioOnly:he(y.audioOnly)?!!y.audioOnly:!1,videoOnly:he(y.videoOnly)?!!y.videoOnly:!1,file:he(y.file)?t.EncodedFileOutput.fromJSON(y.file):void 0,stream:he(y.stream)?t.StreamOutput.fromJSON(y.stream):void 0,segments:he(y.segments)?t.SegmentedFileOutput.fromJSON(y.segments):void 0,preset:he(y.preset)?$(y.preset):void 0,advanced:he(y.advanced)?t.EncodingOptions.fromJSON(y.advanced):void 0}},toJSON(y){const F={};return y.url!==void 0&&(F.url=y.url),y.audioOnly!==void 0&&(F.audioOnly=y.audioOnly),y.videoOnly!==void 0&&(F.videoOnly=y.videoOnly),y.file!==void 0&&(F.file=y.file?t.EncodedFileOutput.toJSON(y.file):void 0),y.stream!==void 0&&(F.stream=y.stream?t.StreamOutput.toJSON(y.stream):void 0),y.segments!==void 0&&(F.segments=y.segments?t.SegmentedFileOutput.toJSON(y.segments):void 0),y.preset!==void 0&&(F.preset=y.preset!==void 0?H(y.preset):void 0),y.advanced!==void 0&&(F.advanced=y.advanced?t.EncodingOptions.toJSON(y.advanced):void 0),F},fromPartial(y){var F,q,ue,j;const S=T();return S.url=(F=y.url)!==null&&F!==void 0?F:"",S.audioOnly=(q=y.audioOnly)!==null&&q!==void 0?q:!1,S.videoOnly=(ue=y.videoOnly)!==null&&ue!==void 0?ue:!1,S.file=y.file!==void 0&&y.file!==null?t.EncodedFileOutput.fromPartial(y.file):void 0,S.stream=y.stream!==void 0&&y.stream!==null?t.StreamOutput.fromPartial(y.stream):void 0,S.segments=y.segments!==void 0&&y.segments!==null?t.SegmentedFileOutput.fromPartial(y.segments):void 0,S.preset=(j=y.preset)!==null&&j!==void 0?j:void 0,S.advanced=y.advanced!==void 0&&y.advanced!==null?t.EncodingOptions.fromPartial(y.advanced):void 0,S}};function A(){return{fileType:0,filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}t.EncodedFileOutput={encode(y,F=d.default.Writer.create()){return y.fileType!==void 0&&y.fileType!==0&&F.uint32(8).int32(y.fileType),y.filepath!==void 0&&y.filepath!==""&&F.uint32(18).string(y.filepath),y.disableManifest===!0&&F.uint32(48).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,F.uint32(26).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,F.uint32(34).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,F.uint32(42).fork()).ldelim(),y.aliOSS!==void 0&&t.AliOSSUpload.encode(y.aliOSS,F.uint32(58).fork()).ldelim(),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=A();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.fileType=q.int32();break;case 2:j.filepath=q.string();break;case 6:j.disableManifest=q.bool();break;case 3:j.s3=t.S3Upload.decode(q,q.uint32());break;case 4:j.gcp=t.GCPUpload.decode(q,q.uint32());break;case 5:j.azure=t.AzureBlobUpload.decode(q,q.uint32());break;case 7:j.aliOSS=t.AliOSSUpload.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{fileType:he(y.fileType)?u(y.fileType):0,filepath:he(y.filepath)?String(y.filepath):"",disableManifest:he(y.disableManifest)?!!y.disableManifest:!1,s3:he(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:he(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:he(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0,aliOSS:he(y.aliOSS)?t.AliOSSUpload.fromJSON(y.aliOSS):void 0}},toJSON(y){const F={};return y.fileType!==void 0&&(F.fileType=c(y.fileType)),y.filepath!==void 0&&(F.filepath=y.filepath),y.disableManifest!==void 0&&(F.disableManifest=y.disableManifest),y.s3!==void 0&&(F.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(F.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(F.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),y.aliOSS!==void 0&&(F.aliOSS=y.aliOSS?t.AliOSSUpload.toJSON(y.aliOSS):void 0),F},fromPartial(y){var F,q,ue;const j=A();return j.fileType=(F=y.fileType)!==null&&F!==void 0?F:0,j.filepath=(q=y.filepath)!==null&&q!==void 0?q:"",j.disableManifest=(ue=y.disableManifest)!==null&&ue!==void 0?ue:!1,j.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,j.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,j.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,j.aliOSS=y.aliOSS!==void 0&&y.aliOSS!==null?t.AliOSSUpload.fromPartial(y.aliOSS):void 0,j}};function J(){return{protocol:0,filenamePrefix:"",playlistName:"",segmentDuration:0,disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}t.SegmentedFileOutput={encode(y,F=d.default.Writer.create()){return y.protocol!==void 0&&y.protocol!==0&&F.uint32(8).int32(y.protocol),y.filenamePrefix!==void 0&&y.filenamePrefix!==""&&F.uint32(18).string(y.filenamePrefix),y.playlistName!==void 0&&y.playlistName!==""&&F.uint32(26).string(y.playlistName),y.segmentDuration!==void 0&&y.segmentDuration!==0&&F.uint32(32).uint32(y.segmentDuration),y.disableManifest===!0&&F.uint32(64).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,F.uint32(42).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,F.uint32(50).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,F.uint32(58).fork()).ldelim(),y.aliOSS!==void 0&&t.AliOSSUpload.encode(y.aliOSS,F.uint32(74).fork()).ldelim(),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=J();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.protocol=q.int32();break;case 2:j.filenamePrefix=q.string();break;case 3:j.playlistName=q.string();break;case 4:j.segmentDuration=q.uint32();break;case 8:j.disableManifest=q.bool();break;case 5:j.s3=t.S3Upload.decode(q,q.uint32());break;case 6:j.gcp=t.GCPUpload.decode(q,q.uint32());break;case 7:j.azure=t.AzureBlobUpload.decode(q,q.uint32());break;case 9:j.aliOSS=t.AliOSSUpload.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{protocol:he(y.protocol)?m(y.protocol):0,filenamePrefix:he(y.filenamePrefix)?String(y.filenamePrefix):"",playlistName:he(y.playlistName)?String(y.playlistName):"",segmentDuration:he(y.segmentDuration)?Number(y.segmentDuration):0,disableManifest:he(y.disableManifest)?!!y.disableManifest:!1,s3:he(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:he(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:he(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0,aliOSS:he(y.aliOSS)?t.AliOSSUpload.fromJSON(y.aliOSS):void 0}},toJSON(y){const F={};return y.protocol!==void 0&&(F.protocol=v(y.protocol)),y.filenamePrefix!==void 0&&(F.filenamePrefix=y.filenamePrefix),y.playlistName!==void 0&&(F.playlistName=y.playlistName),y.segmentDuration!==void 0&&(F.segmentDuration=Math.round(y.segmentDuration)),y.disableManifest!==void 0&&(F.disableManifest=y.disableManifest),y.s3!==void 0&&(F.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(F.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(F.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),y.aliOSS!==void 0&&(F.aliOSS=y.aliOSS?t.AliOSSUpload.toJSON(y.aliOSS):void 0),F},fromPartial(y){var F,q,ue,j,S;const B=J();return B.protocol=(F=y.protocol)!==null&&F!==void 0?F:0,B.filenamePrefix=(q=y.filenamePrefix)!==null&&q!==void 0?q:"",B.playlistName=(ue=y.playlistName)!==null&&ue!==void 0?ue:"",B.segmentDuration=(j=y.segmentDuration)!==null&&j!==void 0?j:0,B.disableManifest=(S=y.disableManifest)!==null&&S!==void 0?S:!1,B.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,B.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,B.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,B.aliOSS=y.aliOSS!==void 0&&y.aliOSS!==null?t.AliOSSUpload.fromPartial(y.aliOSS):void 0,B}};function G(){return{filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}t.DirectFileOutput={encode(y,F=d.default.Writer.create()){return y.filepath!==void 0&&y.filepath!==""&&F.uint32(10).string(y.filepath),y.disableManifest===!0&&F.uint32(40).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,F.uint32(18).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,F.uint32(26).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,F.uint32(34).fork()).ldelim(),y.aliOSS!==void 0&&t.AliOSSUpload.encode(y.aliOSS,F.uint32(50).fork()).ldelim(),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=G();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.filepath=q.string();break;case 5:j.disableManifest=q.bool();break;case 2:j.s3=t.S3Upload.decode(q,q.uint32());break;case 3:j.gcp=t.GCPUpload.decode(q,q.uint32());break;case 4:j.azure=t.AzureBlobUpload.decode(q,q.uint32());break;case 6:j.aliOSS=t.AliOSSUpload.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{filepath:he(y.filepath)?String(y.filepath):"",disableManifest:he(y.disableManifest)?!!y.disableManifest:!1,s3:he(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:he(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:he(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0,aliOSS:he(y.aliOSS)?t.AliOSSUpload.fromJSON(y.aliOSS):void 0}},toJSON(y){const F={};return y.filepath!==void 0&&(F.filepath=y.filepath),y.disableManifest!==void 0&&(F.disableManifest=y.disableManifest),y.s3!==void 0&&(F.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(F.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(F.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),y.aliOSS!==void 0&&(F.aliOSS=y.aliOSS?t.AliOSSUpload.toJSON(y.aliOSS):void 0),F},fromPartial(y){var F,q;const ue=G();return ue.filepath=(F=y.filepath)!==null&&F!==void 0?F:"",ue.disableManifest=(q=y.disableManifest)!==null&&q!==void 0?q:!1,ue.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,ue.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,ue.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,ue.aliOSS=y.aliOSS!==void 0&&y.aliOSS!==null?t.AliOSSUpload.fromPartial(y.aliOSS):void 0,ue}};function I(){return{accessKey:"",secret:"",region:"",endpoint:"",bucket:"",forcePathStyle:!1,metadata:{},tagging:""}}t.S3Upload={encode(y,F=d.default.Writer.create()){return y.accessKey!==void 0&&y.accessKey!==""&&F.uint32(10).string(y.accessKey),y.secret!==void 0&&y.secret!==""&&F.uint32(18).string(y.secret),y.region!==void 0&&y.region!==""&&F.uint32(26).string(y.region),y.endpoint!==void 0&&y.endpoint!==""&&F.uint32(34).string(y.endpoint),y.bucket!==void 0&&y.bucket!==""&&F.uint32(42).string(y.bucket),y.forcePathStyle===!0&&F.uint32(48).bool(y.forcePathStyle),Object.entries(y.metadata||{}).forEach(([q,ue])=>{t.S3Upload_MetadataEntry.encode({key:q,value:ue},F.uint32(58).fork()).ldelim()}),y.tagging!==void 0&&y.tagging!==""&&F.uint32(66).string(y.tagging),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=I();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.accessKey=q.string();break;case 2:j.secret=q.string();break;case 3:j.region=q.string();break;case 4:j.endpoint=q.string();break;case 5:j.bucket=q.string();break;case 6:j.forcePathStyle=q.bool();break;case 7:const B=t.S3Upload_MetadataEntry.decode(q,q.uint32());B.value!==void 0&&(j.metadata[B.key]=B.value);break;case 8:j.tagging=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{accessKey:he(y.accessKey)?String(y.accessKey):"",secret:he(y.secret)?String(y.secret):"",region:he(y.region)?String(y.region):"",endpoint:he(y.endpoint)?String(y.endpoint):"",bucket:he(y.bucket)?String(y.bucket):"",forcePathStyle:he(y.forcePathStyle)?!!y.forcePathStyle:!1,metadata:Se(y.metadata)?Object.entries(y.metadata).reduce((F,[q,ue])=>(F[q]=String(ue),F),{}):{},tagging:he(y.tagging)?String(y.tagging):""}},toJSON(y){const F={};return y.accessKey!==void 0&&(F.accessKey=y.accessKey),y.secret!==void 0&&(F.secret=y.secret),y.region!==void 0&&(F.region=y.region),y.endpoint!==void 0&&(F.endpoint=y.endpoint),y.bucket!==void 0&&(F.bucket=y.bucket),y.forcePathStyle!==void 0&&(F.forcePathStyle=y.forcePathStyle),F.metadata={},y.metadata&&Object.entries(y.metadata).forEach(([q,ue])=>{F.metadata[q]=ue}),y.tagging!==void 0&&(F.tagging=y.tagging),F},fromPartial(y){var F,q,ue,j,S,B,K,me;const ae=I();return ae.accessKey=(F=y.accessKey)!==null&&F!==void 0?F:"",ae.secret=(q=y.secret)!==null&&q!==void 0?q:"",ae.region=(ue=y.region)!==null&&ue!==void 0?ue:"",ae.endpoint=(j=y.endpoint)!==null&&j!==void 0?j:"",ae.bucket=(S=y.bucket)!==null&&S!==void 0?S:"",ae.forcePathStyle=(B=y.forcePathStyle)!==null&&B!==void 0?B:!1,ae.metadata=Object.entries((K=y.metadata)!==null&&K!==void 0?K:{}).reduce((_e,[Oe,Pe])=>(Pe!==void 0&&(_e[Oe]=String(Pe)),_e),{}),ae.tagging=(me=y.tagging)!==null&&me!==void 0?me:"",ae}};function V(){return{key:"",value:""}}t.S3Upload_MetadataEntry={encode(y,F=d.default.Writer.create()){return y.key!==""&&F.uint32(10).string(y.key),y.value!==""&&F.uint32(18).string(y.value),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=V();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.key=q.string();break;case 2:j.value=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{key:he(y.key)?String(y.key):"",value:he(y.value)?String(y.value):""}},toJSON(y){const F={};return y.key!==void 0&&(F.key=y.key),y.value!==void 0&&(F.value=y.value),F},fromPartial(y){var F,q;const ue=V();return ue.key=(F=y.key)!==null&&F!==void 0?F:"",ue.value=(q=y.value)!==null&&q!==void 0?q:"",ue}};function x(){return{credentials:new Uint8Array,bucket:""}}t.GCPUpload={encode(y,F=d.default.Writer.create()){return y.credentials!==void 0&&y.credentials.length!==0&&F.uint32(10).bytes(y.credentials),y.bucket!==void 0&&y.bucket!==""&&F.uint32(18).string(y.bucket),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=x();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.credentials=q.bytes();break;case 2:j.bucket=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{credentials:he(y.credentials)?X(y.credentials):new Uint8Array,bucket:he(y.bucket)?String(y.bucket):""}},toJSON(y){const F={};return y.credentials!==void 0&&(F.credentials=de(y.credentials!==void 0?y.credentials:new Uint8Array)),y.bucket!==void 0&&(F.bucket=y.bucket),F},fromPartial(y){var F,q;const ue=x();return ue.credentials=(F=y.credentials)!==null&&F!==void 0?F:new Uint8Array,ue.bucket=(q=y.bucket)!==null&&q!==void 0?q:"",ue}};function z(){return{accountName:"",accountKey:"",containerName:""}}t.AzureBlobUpload={encode(y,F=d.default.Writer.create()){return y.accountName!==void 0&&y.accountName!==""&&F.uint32(10).string(y.accountName),y.accountKey!==void 0&&y.accountKey!==""&&F.uint32(18).string(y.accountKey),y.containerName!==void 0&&y.containerName!==""&&F.uint32(26).string(y.containerName),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=z();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.accountName=q.string();break;case 2:j.accountKey=q.string();break;case 3:j.containerName=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{accountName:he(y.accountName)?String(y.accountName):"",accountKey:he(y.accountKey)?String(y.accountKey):"",containerName:he(y.containerName)?String(y.containerName):""}},toJSON(y){const F={};return y.accountName!==void 0&&(F.accountName=y.accountName),y.accountKey!==void 0&&(F.accountKey=y.accountKey),y.containerName!==void 0&&(F.containerName=y.containerName),F},fromPartial(y){var F,q,ue;const j=z();return j.accountName=(F=y.accountName)!==null&&F!==void 0?F:"",j.accountKey=(q=y.accountKey)!==null&&q!==void 0?q:"",j.containerName=(ue=y.containerName)!==null&&ue!==void 0?ue:"",j}};function ie(){return{accessKey:"",secret:"",region:"",endpoint:"",bucket:""}}t.AliOSSUpload={encode(y,F=d.default.Writer.create()){return y.accessKey!==void 0&&y.accessKey!==""&&F.uint32(10).string(y.accessKey),y.secret!==void 0&&y.secret!==""&&F.uint32(18).string(y.secret),y.region!==void 0&&y.region!==""&&F.uint32(26).string(y.region),y.endpoint!==void 0&&y.endpoint!==""&&F.uint32(34).string(y.endpoint),y.bucket!==void 0&&y.bucket!==""&&F.uint32(42).string(y.bucket),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=ie();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.accessKey=q.string();break;case 2:j.secret=q.string();break;case 3:j.region=q.string();break;case 4:j.endpoint=q.string();break;case 5:j.bucket=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{accessKey:he(y.accessKey)?String(y.accessKey):"",secret:he(y.secret)?String(y.secret):"",region:he(y.region)?String(y.region):"",endpoint:he(y.endpoint)?String(y.endpoint):"",bucket:he(y.bucket)?String(y.bucket):""}},toJSON(y){const F={};return y.accessKey!==void 0&&(F.accessKey=y.accessKey),y.secret!==void 0&&(F.secret=y.secret),y.region!==void 0&&(F.region=y.region),y.endpoint!==void 0&&(F.endpoint=y.endpoint),y.bucket!==void 0&&(F.bucket=y.bucket),F},fromPartial(y){var F,q,ue,j,S;const B=ie();return B.accessKey=(F=y.accessKey)!==null&&F!==void 0?F:"",B.secret=(q=y.secret)!==null&&q!==void 0?q:"",B.region=(ue=y.region)!==null&&ue!==void 0?ue:"",B.endpoint=(j=y.endpoint)!==null&&j!==void 0?j:"",B.bucket=(S=y.bucket)!==null&&S!==void 0?S:"",B}};function se(){return{protocol:0,urls:[]}}t.StreamOutput={encode(y,F=d.default.Writer.create()){if(y.protocol!==void 0&&y.protocol!==0&&F.uint32(8).int32(y.protocol),y.urls!==void 0&&y.urls.length!==0)for(const q of y.urls)F.uint32(18).string(q);return F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=se();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.protocol=q.int32();break;case 2:j.urls.push(q.string());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{protocol:he(y.protocol)?p(y.protocol):0,urls:Array.isArray(y==null?void 0:y.urls)?y.urls.map(F=>String(F)):[]}},toJSON(y){const F={};return y.protocol!==void 0&&(F.protocol=l(y.protocol)),y.urls?F.urls=y.urls.map(q=>q):F.urls=[],F},fromPartial(y){var F,q;const ue=se();return ue.protocol=(F=y.protocol)!==null&&F!==void 0?F:0,ue.urls=((q=y.urls)===null||q===void 0?void 0:q.map(j=>j))||[],ue}};function pe(){return{width:0,height:0,depth:0,framerate:0,audioCodec:0,audioBitrate:0,audioFrequency:0,videoCodec:0,videoBitrate:0}}t.EncodingOptions={encode(y,F=d.default.Writer.create()){return y.width!==void 0&&y.width!==0&&F.uint32(8).int32(y.width),y.height!==void 0&&y.height!==0&&F.uint32(16).int32(y.height),y.depth!==void 0&&y.depth!==0&&F.uint32(24).int32(y.depth),y.framerate!==void 0&&y.framerate!==0&&F.uint32(32).int32(y.framerate),y.audioCodec!==void 0&&y.audioCodec!==0&&F.uint32(40).int32(y.audioCodec),y.audioBitrate!==void 0&&y.audioBitrate!==0&&F.uint32(48).int32(y.audioBitrate),y.audioFrequency!==void 0&&y.audioFrequency!==0&&F.uint32(56).int32(y.audioFrequency),y.videoCodec!==void 0&&y.videoCodec!==0&&F.uint32(64).int32(y.videoCodec),y.videoBitrate!==void 0&&y.videoBitrate!==0&&F.uint32(72).int32(y.videoBitrate),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=pe();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.width=q.int32();break;case 2:j.height=q.int32();break;case 3:j.depth=q.int32();break;case 4:j.framerate=q.int32();break;case 5:j.audioCodec=q.int32();break;case 6:j.audioBitrate=q.int32();break;case 7:j.audioFrequency=q.int32();break;case 8:j.videoCodec=q.int32();break;case 9:j.videoBitrate=q.int32();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{width:he(y.width)?Number(y.width):0,height:he(y.height)?Number(y.height):0,depth:he(y.depth)?Number(y.depth):0,framerate:he(y.framerate)?Number(y.framerate):0,audioCodec:he(y.audioCodec)?k(y.audioCodec):0,audioBitrate:he(y.audioBitrate)?Number(y.audioBitrate):0,audioFrequency:he(y.audioFrequency)?Number(y.audioFrequency):0,videoCodec:he(y.videoCodec)?P(y.videoCodec):0,videoBitrate:he(y.videoBitrate)?Number(y.videoBitrate):0}},toJSON(y){const F={};return y.width!==void 0&&(F.width=Math.round(y.width)),y.height!==void 0&&(F.height=Math.round(y.height)),y.depth!==void 0&&(F.depth=Math.round(y.depth)),y.framerate!==void 0&&(F.framerate=Math.round(y.framerate)),y.audioCodec!==void 0&&(F.audioCodec=C(y.audioCodec)),y.audioBitrate!==void 0&&(F.audioBitrate=Math.round(y.audioBitrate)),y.audioFrequency!==void 0&&(F.audioFrequency=Math.round(y.audioFrequency)),y.videoCodec!==void 0&&(F.videoCodec=M(y.videoCodec)),y.videoBitrate!==void 0&&(F.videoBitrate=Math.round(y.videoBitrate)),F},fromPartial(y){var F,q,ue,j,S,B,K,me,ae;const _e=pe();return _e.width=(F=y.width)!==null&&F!==void 0?F:0,_e.height=(q=y.height)!==null&&q!==void 0?q:0,_e.depth=(ue=y.depth)!==null&&ue!==void 0?ue:0,_e.framerate=(j=y.framerate)!==null&&j!==void 0?j:0,_e.audioCodec=(S=y.audioCodec)!==null&&S!==void 0?S:0,_e.audioBitrate=(B=y.audioBitrate)!==null&&B!==void 0?B:0,_e.audioFrequency=(K=y.audioFrequency)!==null&&K!==void 0?K:0,_e.videoCodec=(me=y.videoCodec)!==null&&me!==void 0?me:0,_e.videoBitrate=(ae=y.videoBitrate)!==null&&ae!==void 0?ae:0,_e}};function be(){return{egressId:"",layout:""}}t.UpdateLayoutRequest={encode(y,F=d.default.Writer.create()){return y.egressId!==void 0&&y.egressId!==""&&F.uint32(10).string(y.egressId),y.layout!==void 0&&y.layout!==""&&F.uint32(18).string(y.layout),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=be();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.egressId=q.string();break;case 2:j.layout=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{egressId:he(y.egressId)?String(y.egressId):"",layout:he(y.layout)?String(y.layout):""}},toJSON(y){const F={};return y.egressId!==void 0&&(F.egressId=y.egressId),y.layout!==void 0&&(F.layout=y.layout),F},fromPartial(y){var F,q;const ue=be();return ue.egressId=(F=y.egressId)!==null&&F!==void 0?F:"",ue.layout=(q=y.layout)!==null&&q!==void 0?q:"",ue}};function Ee(){return{egressId:"",addOutputUrls:[],removeOutputUrls:[]}}t.UpdateStreamRequest={encode(y,F=d.default.Writer.create()){if(y.egressId!==void 0&&y.egressId!==""&&F.uint32(10).string(y.egressId),y.addOutputUrls!==void 0&&y.addOutputUrls.length!==0)for(const q of y.addOutputUrls)F.uint32(18).string(q);if(y.removeOutputUrls!==void 0&&y.removeOutputUrls.length!==0)for(const q of y.removeOutputUrls)F.uint32(26).string(q);return F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=Ee();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.egressId=q.string();break;case 2:j.addOutputUrls.push(q.string());break;case 3:j.removeOutputUrls.push(q.string());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{egressId:he(y.egressId)?String(y.egressId):"",addOutputUrls:Array.isArray(y==null?void 0:y.addOutputUrls)?y.addOutputUrls.map(F=>String(F)):[],removeOutputUrls:Array.isArray(y==null?void 0:y.removeOutputUrls)?y.removeOutputUrls.map(F=>String(F)):[]}},toJSON(y){const F={};return y.egressId!==void 0&&(F.egressId=y.egressId),y.addOutputUrls?F.addOutputUrls=y.addOutputUrls.map(q=>q):F.addOutputUrls=[],y.removeOutputUrls?F.removeOutputUrls=y.removeOutputUrls.map(q=>q):F.removeOutputUrls=[],F},fromPartial(y){var F,q,ue;const j=Ee();return j.egressId=(F=y.egressId)!==null&&F!==void 0?F:"",j.addOutputUrls=((q=y.addOutputUrls)===null||q===void 0?void 0:q.map(S=>S))||[],j.removeOutputUrls=((ue=y.removeOutputUrls)===null||ue===void 0?void 0:ue.map(S=>S))||[],j}};function oe(){return{roomName:""}}t.ListEgressRequest={encode(y,F=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&F.uint32(10).string(y.roomName),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=oe();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.roomName=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{roomName:he(y.roomName)?String(y.roomName):""}},toJSON(y){const F={};return y.roomName!==void 0&&(F.roomName=y.roomName),F},fromPartial(y){var F;const q=oe();return q.roomName=(F=y.roomName)!==null&&F!==void 0?F:"",q}};function ce(){return{items:[]}}t.ListEgressResponse={encode(y,F=d.default.Writer.create()){if(y.items!==void 0&&y.items.length!==0)for(const q of y.items)t.EgressInfo.encode(q,F.uint32(10).fork()).ldelim();return F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=ce();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.items.push(t.EgressInfo.decode(q,q.uint32()));break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{items:Array.isArray(y==null?void 0:y.items)?y.items.map(F=>t.EgressInfo.fromJSON(F)):[]}},toJSON(y){const F={};return y.items?F.items=y.items.map(q=>q?t.EgressInfo.toJSON(q):void 0):F.items=[],F},fromPartial(y){var F;const q=ce();return q.items=((F=y.items)===null||F===void 0?void 0:F.map(ue=>t.EgressInfo.fromPartial(ue)))||[],q}};function ge(){return{egressId:""}}t.StopEgressRequest={encode(y,F=d.default.Writer.create()){return y.egressId!==void 0&&y.egressId!==""&&F.uint32(10).string(y.egressId),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=ge();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.egressId=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{egressId:he(y.egressId)?String(y.egressId):""}},toJSON(y){const F={};return y.egressId!==void 0&&(F.egressId=y.egressId),F},fromPartial(y){var F;const q=ge();return q.egressId=(F=y.egressId)!==null&&F!==void 0?F:"",q}};function ke(){return{egressId:"",roomId:"",roomName:"",status:0,startedAt:0,endedAt:0,error:"",roomComposite:void 0,trackComposite:void 0,track:void 0,web:void 0,stream:void 0,file:void 0,segments:void 0}}t.EgressInfo={encode(y,F=d.default.Writer.create()){return y.egressId!==void 0&&y.egressId!==""&&F.uint32(10).string(y.egressId),y.roomId!==void 0&&y.roomId!==""&&F.uint32(18).string(y.roomId),y.roomName!==void 0&&y.roomName!==""&&F.uint32(106).string(y.roomName),y.status!==void 0&&y.status!==0&&F.uint32(24).int32(y.status),y.startedAt!==void 0&&y.startedAt!==0&&F.uint32(80).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&F.uint32(88).int64(y.endedAt),y.error!==void 0&&y.error!==""&&F.uint32(74).string(y.error),y.roomComposite!==void 0&&t.RoomCompositeEgressRequest.encode(y.roomComposite,F.uint32(34).fork()).ldelim(),y.trackComposite!==void 0&&t.TrackCompositeEgressRequest.encode(y.trackComposite,F.uint32(42).fork()).ldelim(),y.track!==void 0&&t.TrackEgressRequest.encode(y.track,F.uint32(50).fork()).ldelim(),y.web!==void 0&&t.WebEgressRequest.encode(y.web,F.uint32(114).fork()).ldelim(),y.stream!==void 0&&t.StreamInfoList.encode(y.stream,F.uint32(58).fork()).ldelim(),y.file!==void 0&&t.FileInfo.encode(y.file,F.uint32(66).fork()).ldelim(),y.segments!==void 0&&t.SegmentsInfo.encode(y.segments,F.uint32(98).fork()).ldelim(),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=ke();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.egressId=q.string();break;case 2:j.roomId=q.string();break;case 13:j.roomName=q.string();break;case 3:j.status=q.int32();break;case 10:j.startedAt=ve(q.int64());break;case 11:j.endedAt=ve(q.int64());break;case 9:j.error=q.string();break;case 4:j.roomComposite=t.RoomCompositeEgressRequest.decode(q,q.uint32());break;case 5:j.trackComposite=t.TrackCompositeEgressRequest.decode(q,q.uint32());break;case 6:j.track=t.TrackEgressRequest.decode(q,q.uint32());break;case 14:j.web=t.WebEgressRequest.decode(q,q.uint32());break;case 7:j.stream=t.StreamInfoList.decode(q,q.uint32());break;case 8:j.file=t.FileInfo.decode(q,q.uint32());break;case 12:j.segments=t.SegmentsInfo.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{egressId:he(y.egressId)?String(y.egressId):"",roomId:he(y.roomId)?String(y.roomId):"",roomName:he(y.roomName)?String(y.roomName):"",status:he(y.status)?re(y.status):0,startedAt:he(y.startedAt)?Number(y.startedAt):0,endedAt:he(y.endedAt)?Number(y.endedAt):0,error:he(y.error)?String(y.error):"",roomComposite:he(y.roomComposite)?t.RoomCompositeEgressRequest.fromJSON(y.roomComposite):void 0,trackComposite:he(y.trackComposite)?t.TrackCompositeEgressRequest.fromJSON(y.trackComposite):void 0,track:he(y.track)?t.TrackEgressRequest.fromJSON(y.track):void 0,web:he(y.web)?t.WebEgressRequest.fromJSON(y.web):void 0,stream:he(y.stream)?t.StreamInfoList.fromJSON(y.stream):void 0,file:he(y.file)?t.FileInfo.fromJSON(y.file):void 0,segments:he(y.segments)?t.SegmentsInfo.fromJSON(y.segments):void 0}},toJSON(y){const F={};return y.egressId!==void 0&&(F.egressId=y.egressId),y.roomId!==void 0&&(F.roomId=y.roomId),y.roomName!==void 0&&(F.roomName=y.roomName),y.status!==void 0&&(F.status=Y(y.status)),y.startedAt!==void 0&&(F.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(F.endedAt=Math.round(y.endedAt)),y.error!==void 0&&(F.error=y.error),y.roomComposite!==void 0&&(F.roomComposite=y.roomComposite?t.RoomCompositeEgressRequest.toJSON(y.roomComposite):void 0),y.trackComposite!==void 0&&(F.trackComposite=y.trackComposite?t.TrackCompositeEgressRequest.toJSON(y.trackComposite):void 0),y.track!==void 0&&(F.track=y.track?t.TrackEgressRequest.toJSON(y.track):void 0),y.web!==void 0&&(F.web=y.web?t.WebEgressRequest.toJSON(y.web):void 0),y.stream!==void 0&&(F.stream=y.stream?t.StreamInfoList.toJSON(y.stream):void 0),y.file!==void 0&&(F.file=y.file?t.FileInfo.toJSON(y.file):void 0),y.segments!==void 0&&(F.segments=y.segments?t.SegmentsInfo.toJSON(y.segments):void 0),F},fromPartial(y){var F,q,ue,j,S,B,K;const me=ke();return me.egressId=(F=y.egressId)!==null&&F!==void 0?F:"",me.roomId=(q=y.roomId)!==null&&q!==void 0?q:"",me.roomName=(ue=y.roomName)!==null&&ue!==void 0?ue:"",me.status=(j=y.status)!==null&&j!==void 0?j:0,me.startedAt=(S=y.startedAt)!==null&&S!==void 0?S:0,me.endedAt=(B=y.endedAt)!==null&&B!==void 0?B:0,me.error=(K=y.error)!==null&&K!==void 0?K:"",me.roomComposite=y.roomComposite!==void 0&&y.roomComposite!==null?t.RoomCompositeEgressRequest.fromPartial(y.roomComposite):void 0,me.trackComposite=y.trackComposite!==void 0&&y.trackComposite!==null?t.TrackCompositeEgressRequest.fromPartial(y.trackComposite):void 0,me.track=y.track!==void 0&&y.track!==null?t.TrackEgressRequest.fromPartial(y.track):void 0,me.web=y.web!==void 0&&y.web!==null?t.WebEgressRequest.fromPartial(y.web):void 0,me.stream=y.stream!==void 0&&y.stream!==null?t.StreamInfoList.fromPartial(y.stream):void 0,me.file=y.file!==void 0&&y.file!==null?t.FileInfo.fromPartial(y.file):void 0,me.segments=y.segments!==void 0&&y.segments!==null?t.SegmentsInfo.fromPartial(y.segments):void 0,me}};function fe(){return{info:[]}}t.StreamInfoList={encode(y,F=d.default.Writer.create()){if(y.info!==void 0&&y.info.length!==0)for(const q of y.info)t.StreamInfo.encode(q,F.uint32(10).fork()).ldelim();return F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=fe();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.info.push(t.StreamInfo.decode(q,q.uint32()));break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{info:Array.isArray(y==null?void 0:y.info)?y.info.map(F=>t.StreamInfo.fromJSON(F)):[]}},toJSON(y){const F={};return y.info?F.info=y.info.map(q=>q?t.StreamInfo.toJSON(q):void 0):F.info=[],F},fromPartial(y){var F;const q=fe();return q.info=((F=y.info)===null||F===void 0?void 0:F.map(ue=>t.StreamInfo.fromPartial(ue)))||[],q}};function ee(){return{url:"",startedAt:0,endedAt:0,duration:0,status:0}}t.StreamInfo={encode(y,F=d.default.Writer.create()){return y.url!==void 0&&y.url!==""&&F.uint32(10).string(y.url),y.startedAt!==void 0&&y.startedAt!==0&&F.uint32(16).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&F.uint32(24).int64(y.endedAt),y.duration!==void 0&&y.duration!==0&&F.uint32(32).int64(y.duration),y.status!==void 0&&y.status!==0&&F.uint32(40).int32(y.status),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=ee();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.url=q.string();break;case 2:j.startedAt=ve(q.int64());break;case 3:j.endedAt=ve(q.int64());break;case 4:j.duration=ve(q.int64());break;case 5:j.status=q.int32();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{url:he(y.url)?String(y.url):"",startedAt:he(y.startedAt)?Number(y.startedAt):0,endedAt:he(y.endedAt)?Number(y.endedAt):0,duration:he(y.duration)?Number(y.duration):0,status:he(y.status)?D(y.status):0}},toJSON(y){const F={};return y.url!==void 0&&(F.url=y.url),y.startedAt!==void 0&&(F.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(F.endedAt=Math.round(y.endedAt)),y.duration!==void 0&&(F.duration=Math.round(y.duration)),y.status!==void 0&&(F.status=b(y.status)),F},fromPartial(y){var F,q,ue,j,S;const B=ee();return B.url=(F=y.url)!==null&&F!==void 0?F:"",B.startedAt=(q=y.startedAt)!==null&&q!==void 0?q:0,B.endedAt=(ue=y.endedAt)!==null&&ue!==void 0?ue:0,B.duration=(j=y.duration)!==null&&j!==void 0?j:0,B.status=(S=y.status)!==null&&S!==void 0?S:0,B}};function te(){return{filename:"",startedAt:0,endedAt:0,duration:0,size:0,location:""}}t.FileInfo={encode(y,F=d.default.Writer.create()){return y.filename!==void 0&&y.filename!==""&&F.uint32(10).string(y.filename),y.startedAt!==void 0&&y.startedAt!==0&&F.uint32(16).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&F.uint32(24).int64(y.endedAt),y.duration!==void 0&&y.duration!==0&&F.uint32(48).int64(y.duration),y.size!==void 0&&y.size!==0&&F.uint32(32).int64(y.size),y.location!==void 0&&y.location!==""&&F.uint32(42).string(y.location),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=te();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.filename=q.string();break;case 2:j.startedAt=ve(q.int64());break;case 3:j.endedAt=ve(q.int64());break;case 6:j.duration=ve(q.int64());break;case 4:j.size=ve(q.int64());break;case 5:j.location=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{filename:he(y.filename)?String(y.filename):"",startedAt:he(y.startedAt)?Number(y.startedAt):0,endedAt:he(y.endedAt)?Number(y.endedAt):0,duration:he(y.duration)?Number(y.duration):0,size:he(y.size)?Number(y.size):0,location:he(y.location)?String(y.location):""}},toJSON(y){const F={};return y.filename!==void 0&&(F.filename=y.filename),y.startedAt!==void 0&&(F.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(F.endedAt=Math.round(y.endedAt)),y.duration!==void 0&&(F.duration=Math.round(y.duration)),y.size!==void 0&&(F.size=Math.round(y.size)),y.location!==void 0&&(F.location=y.location),F},fromPartial(y){var F,q,ue,j,S,B;const K=te();return K.filename=(F=y.filename)!==null&&F!==void 0?F:"",K.startedAt=(q=y.startedAt)!==null&&q!==void 0?q:0,K.endedAt=(ue=y.endedAt)!==null&&ue!==void 0?ue:0,K.duration=(j=y.duration)!==null&&j!==void 0?j:0,K.size=(S=y.size)!==null&&S!==void 0?S:0,K.location=(B=y.location)!==null&&B!==void 0?B:"",K}};function Q(){return{playlistName:"",duration:0,size:0,playlistLocation:"",segmentCount:0,startedAt:0,endedAt:0}}t.SegmentsInfo={encode(y,F=d.default.Writer.create()){return y.playlistName!==void 0&&y.playlistName!==""&&F.uint32(10).string(y.playlistName),y.duration!==void 0&&y.duration!==0&&F.uint32(16).int64(y.duration),y.size!==void 0&&y.size!==0&&F.uint32(24).int64(y.size),y.playlistLocation!==void 0&&y.playlistLocation!==""&&F.uint32(34).string(y.playlistLocation),y.segmentCount!==void 0&&y.segmentCount!==0&&F.uint32(40).int64(y.segmentCount),y.startedAt!==void 0&&y.startedAt!==0&&F.uint32(48).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&F.uint32(56).int64(y.endedAt),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=Q();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.playlistName=q.string();break;case 2:j.duration=ve(q.int64());break;case 3:j.size=ve(q.int64());break;case 4:j.playlistLocation=q.string();break;case 5:j.segmentCount=ve(q.int64());break;case 6:j.startedAt=ve(q.int64());break;case 7:j.endedAt=ve(q.int64());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{playlistName:he(y.playlistName)?String(y.playlistName):"",duration:he(y.duration)?Number(y.duration):0,size:he(y.size)?Number(y.size):0,playlistLocation:he(y.playlistLocation)?String(y.playlistLocation):"",segmentCount:he(y.segmentCount)?Number(y.segmentCount):0,startedAt:he(y.startedAt)?Number(y.startedAt):0,endedAt:he(y.endedAt)?Number(y.endedAt):0}},toJSON(y){const F={};return y.playlistName!==void 0&&(F.playlistName=y.playlistName),y.duration!==void 0&&(F.duration=Math.round(y.duration)),y.size!==void 0&&(F.size=Math.round(y.size)),y.playlistLocation!==void 0&&(F.playlistLocation=y.playlistLocation),y.segmentCount!==void 0&&(F.segmentCount=Math.round(y.segmentCount)),y.startedAt!==void 0&&(F.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(F.endedAt=Math.round(y.endedAt)),F},fromPartial(y){var F,q,ue,j,S,B,K;const me=Q();return me.playlistName=(F=y.playlistName)!==null&&F!==void 0?F:"",me.duration=(q=y.duration)!==null&&q!==void 0?q:0,me.size=(ue=y.size)!==null&&ue!==void 0?ue:0,me.playlistLocation=(j=y.playlistLocation)!==null&&j!==void 0?j:"",me.segmentCount=(S=y.segmentCount)!==null&&S!==void 0?S:0,me.startedAt=(B=y.startedAt)!==null&&B!==void 0?B:0,me.endedAt=(K=y.endedAt)!==null&&K!==void 0?K:0,me}};function U(){return{filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0}}t.AutoTrackEgress={encode(y,F=d.default.Writer.create()){return y.filepath!==void 0&&y.filepath!==""&&F.uint32(10).string(y.filepath),y.disableManifest===!0&&F.uint32(40).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,F.uint32(18).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,F.uint32(26).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,F.uint32(34).fork()).ldelim(),F},decode(y,F){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let ue=F===void 0?q.len:q.pos+F;const j=U();for(;q.pos<ue;){const S=q.uint32();switch(S>>>3){case 1:j.filepath=q.string();break;case 5:j.disableManifest=q.bool();break;case 2:j.s3=t.S3Upload.decode(q,q.uint32());break;case 3:j.gcp=t.GCPUpload.decode(q,q.uint32());break;case 4:j.azure=t.AzureBlobUpload.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{filepath:he(y.filepath)?String(y.filepath):"",disableManifest:he(y.disableManifest)?!!y.disableManifest:!1,s3:he(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:he(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:he(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0}},toJSON(y){const F={};return y.filepath!==void 0&&(F.filepath=y.filepath),y.disableManifest!==void 0&&(F.disableManifest=y.disableManifest),y.s3!==void 0&&(F.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(F.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(F.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),F},fromPartial(y){var F,q;const ue=U();return ue.filepath=(F=y.filepath)!==null&&F!==void 0?F:"",ue.disableManifest=(q=y.disableManifest)!==null&&q!==void 0?q:!1,ue.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,ue.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,ue.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,ue}};var W=(()=>{if(typeof W<"u")return W;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function X(y){if(W.Buffer)return Uint8Array.from(W.Buffer.from(y,"base64"));{const F=W.atob(y),q=new Uint8Array(F.length);for(let ue=0;ue<F.length;++ue)q[ue]=F.charCodeAt(ue);return q}}function de(y){if(W.Buffer)return W.Buffer.from(y).toString("base64");{const F=[];return y.forEach(q=>{F.push(String.fromCharCode(q))}),W.btoa(F.join(""))}}function ve(y){if(y.gt(Number.MAX_SAFE_INTEGER))throw new W.Error("Value is larger than Number.MAX_SAFE_INTEGER");return y.toNumber()}d.default.util.Long!==o.default&&(d.default.util.Long=o.default,d.default.configure());function Se(y){return typeof y=="object"&&y!==null}function he(y){return y!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{long:85,"protobufjs/minimal":89}],74:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteIngressRequest=t.ListIngressResponse=t.ListIngressRequest=t.UpdateIngressRequest=t.InputAudioState=t.InputVideoState=t.IngressState=t.IngressInfo=t.IngressVideoOptions=t.IngressAudioOptions=t.CreateIngressRequest=t.ingressState_StatusToJSON=t.ingressState_StatusFromJSON=t.IngressState_Status=t.ingressInputToJSON=t.ingressInputFromJSON=t.IngressInput=t.protobufPackage=void 0;const o=a(e("long")),d=a(e("protobufjs/minimal")),s=e("./livekit_models");t.protobufPackage="livekit";var u;(function(O){O[O.RTMP_INPUT=0]="RTMP_INPUT",O[O.UNRECOGNIZED=-1]="UNRECOGNIZED"})(u=t.IngressInput||(t.IngressInput={}));function c(O){switch(O){case 0:case"RTMP_INPUT":return u.RTMP_INPUT;case-1:case"UNRECOGNIZED":default:return u.UNRECOGNIZED}}t.ingressInputFromJSON=c;function h(O){switch(O){case u.RTMP_INPUT:return"RTMP_INPUT";case u.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.ingressInputToJSON=h;var p;(function(O){O[O.ENDPOINT_INACTIVE=0]="ENDPOINT_INACTIVE",O[O.ENDPOINT_BUFFERING=1]="ENDPOINT_BUFFERING",O[O.ENDPOINT_PUBLISHING=2]="ENDPOINT_PUBLISHING",O[O.ENDPOINT_ERROR=3]="ENDPOINT_ERROR",O[O.UNRECOGNIZED=-1]="UNRECOGNIZED"})(p=t.IngressState_Status||(t.IngressState_Status={}));function l(O){switch(O){case 0:case"ENDPOINT_INACTIVE":return p.ENDPOINT_INACTIVE;case 1:case"ENDPOINT_BUFFERING":return p.ENDPOINT_BUFFERING;case 2:case"ENDPOINT_PUBLISHING":return p.ENDPOINT_PUBLISHING;case 3:case"ENDPOINT_ERROR":return p.ENDPOINT_ERROR;case-1:case"UNRECOGNIZED":default:return p.UNRECOGNIZED}}t.ingressState_StatusFromJSON=l;function f(O){switch(O){case p.ENDPOINT_INACTIVE:return"ENDPOINT_INACTIVE";case p.ENDPOINT_BUFFERING:return"ENDPOINT_BUFFERING";case p.ENDPOINT_PUBLISHING:return"ENDPOINT_PUBLISHING";case p.ENDPOINT_ERROR:return"ENDPOINT_ERROR";case p.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.ingressState_StatusToJSON=f;function m(){return{inputType:0,name:"",roomName:"",participantIdentity:"",participantName:"",audio:void 0,video:void 0}}t.CreateIngressRequest={encode(O,D=d.default.Writer.create()){return O.inputType!==void 0&&O.inputType!==0&&D.uint32(8).int32(O.inputType),O.name!==void 0&&O.name!==""&&D.uint32(18).string(O.name),O.roomName!==void 0&&O.roomName!==""&&D.uint32(26).string(O.roomName),O.participantIdentity!==void 0&&O.participantIdentity!==""&&D.uint32(34).string(O.participantIdentity),O.participantName!==void 0&&O.participantName!==""&&D.uint32(42).string(O.participantName),O.audio!==void 0&&t.IngressAudioOptions.encode(O.audio,D.uint32(50).fork()).ldelim(),O.video!==void 0&&t.IngressVideoOptions.encode(O.video,D.uint32(58).fork()).ldelim(),D},decode(O,D){const b=O instanceof d.default.Reader?O:new d.default.Reader(O);let _=D===void 0?b.len:b.pos+D;const g=m();for(;b.pos<_;){const w=b.uint32();switch(w>>>3){case 1:g.inputType=b.int32();break;case 2:g.name=b.string();break;case 3:g.roomName=b.string();break;case 4:g.participantIdentity=b.string();break;case 5:g.participantName=b.string();break;case 6:g.audio=t.IngressAudioOptions.decode(b,b.uint32());break;case 7:g.video=t.IngressVideoOptions.decode(b,b.uint32());break;default:b.skipType(w&7);break}}return g},fromJSON(O){return{inputType:Y(O.inputType)?c(O.inputType):0,name:Y(O.name)?String(O.name):"",roomName:Y(O.roomName)?String(O.roomName):"",participantIdentity:Y(O.participantIdentity)?String(O.participantIdentity):"",participantName:Y(O.participantName)?String(O.participantName):"",audio:Y(O.audio)?t.IngressAudioOptions.fromJSON(O.audio):void 0,video:Y(O.video)?t.IngressVideoOptions.fromJSON(O.video):void 0}},toJSON(O){const D={};return O.inputType!==void 0&&(D.inputType=h(O.inputType)),O.name!==void 0&&(D.name=O.name),O.roomName!==void 0&&(D.roomName=O.roomName),O.participantIdentity!==void 0&&(D.participantIdentity=O.participantIdentity),O.participantName!==void 0&&(D.participantName=O.participantName),O.audio!==void 0&&(D.audio=O.audio?t.IngressAudioOptions.toJSON(O.audio):void 0),O.video!==void 0&&(D.video=O.video?t.IngressVideoOptions.toJSON(O.video):void 0),D},fromPartial(O){var D,b,_,g,w;const T=m();return T.inputType=(D=O.inputType)!==null&&D!==void 0?D:0,T.name=(b=O.name)!==null&&b!==void 0?b:"",T.roomName=(_=O.roomName)!==null&&_!==void 0?_:"",T.participantIdentity=(g=O.participantIdentity)!==null&&g!==void 0?g:"",T.participantName=(w=O.participantName)!==null&&w!==void 0?w:"",T.audio=O.audio!==void 0&&O.audio!==null?t.IngressAudioOptions.fromPartial(O.audio):void 0,T.video=O.video!==void 0&&O.video!==null?t.IngressVideoOptions.fromPartial(O.video):void 0,T}};function v(){return{name:"",source:0,mimeType:"",bitrate:0,disableDtx:!1,channels:0}}t.IngressAudioOptions={encode(O,D=d.default.Writer.create()){return O.name!==void 0&&O.name!==""&&D.uint32(10).string(O.name),O.source!==void 0&&O.source!==0&&D.uint32(16).int32(O.source),O.mimeType!==void 0&&O.mimeType!==""&&D.uint32(26).string(O.mimeType),O.bitrate!==void 0&&O.bitrate!==0&&D.uint32(32).uint32(O.bitrate),O.disableDtx===!0&&D.uint32(40).bool(O.disableDtx),O.channels!==void 0&&O.channels!==0&&D.uint32(48).uint32(O.channels),D},decode(O,D){const b=O instanceof d.default.Reader?O:new d.default.Reader(O);let _=D===void 0?b.len:b.pos+D;const g=v();for(;b.pos<_;){const w=b.uint32();switch(w>>>3){case 1:g.name=b.string();break;case 2:g.source=b.int32();break;case 3:g.mimeType=b.string();break;case 4:g.bitrate=b.uint32();break;case 5:g.disableDtx=b.bool();break;case 6:g.channels=b.uint32();break;default:b.skipType(w&7);break}}return g},fromJSON(O){return{name:Y(O.name)?String(O.name):"",source:Y(O.source)?s.trackSourceFromJSON(O.source):0,mimeType:Y(O.mimeType)?String(O.mimeType):"",bitrate:Y(O.bitrate)?Number(O.bitrate):0,disableDtx:Y(O.disableDtx)?!!O.disableDtx:!1,channels:Y(O.channels)?Number(O.channels):0}},toJSON(O){const D={};return O.name!==void 0&&(D.name=O.name),O.source!==void 0&&(D.source=s.trackSourceToJSON(O.source)),O.mimeType!==void 0&&(D.mimeType=O.mimeType),O.bitrate!==void 0&&(D.bitrate=Math.round(O.bitrate)),O.disableDtx!==void 0&&(D.disableDtx=O.disableDtx),O.channels!==void 0&&(D.channels=Math.round(O.channels)),D},fromPartial(O){var D,b,_,g,w,T;const A=v();return A.name=(D=O.name)!==null&&D!==void 0?D:"",A.source=(b=O.source)!==null&&b!==void 0?b:0,A.mimeType=(_=O.mimeType)!==null&&_!==void 0?_:"",A.bitrate=(g=O.bitrate)!==null&&g!==void 0?g:0,A.disableDtx=(w=O.disableDtx)!==null&&w!==void 0?w:!1,A.channels=(T=O.channels)!==null&&T!==void 0?T:0,A}};function E(){return{name:"",source:0,mimeType:"",layers:[]}}t.IngressVideoOptions={encode(O,D=d.default.Writer.create()){if(O.name!==void 0&&O.name!==""&&D.uint32(10).string(O.name),O.source!==void 0&&O.source!==0&&D.uint32(16).int32(O.source),O.mimeType!==void 0&&O.mimeType!==""&&D.uint32(26).string(O.mimeType),O.layers!==void 0&&O.layers.length!==0)for(const b of O.layers)s.VideoLayer.encode(b,D.uint32(34).fork()).ldelim();return D},decode(O,D){const b=O instanceof d.default.Reader?O:new d.default.Reader(O);let _=D===void 0?b.len:b.pos+D;const g=E();for(;b.pos<_;){const w=b.uint32();switch(w>>>3){case 1:g.name=b.string();break;case 2:g.source=b.int32();break;case 3:g.mimeType=b.string();break;case 4:g.layers.push(s.VideoLayer.decode(b,b.uint32()));break;default:b.skipType(w&7);break}}return g},fromJSON(O){return{name:Y(O.name)?String(O.name):"",source:Y(O.source)?s.trackSourceFromJSON(O.source):0,mimeType:Y(O.mimeType)?String(O.mimeType):"",layers:Array.isArray(O==null?void 0:O.layers)?O.layers.map(D=>s.VideoLayer.fromJSON(D)):[]}},toJSON(O){const D={};return O.name!==void 0&&(D.name=O.name),O.source!==void 0&&(D.source=s.trackSourceToJSON(O.source)),O.mimeType!==void 0&&(D.mimeType=O.mimeType),O.layers?D.layers=O.layers.map(b=>b?s.VideoLayer.toJSON(b):void 0):D.layers=[],D},fromPartial(O){var D,b,_,g;const w=E();return w.name=(D=O.name)!==null&&D!==void 0?D:"",w.source=(b=O.source)!==null&&b!==void 0?b:0,w.mimeType=(_=O.mimeType)!==null&&_!==void 0?_:"",w.layers=((g=O.layers)===null||g===void 0?void 0:g.map(T=>s.VideoLayer.fromPartial(T)))||[],w}};function k(){return{ingressId:"",name:"",streamKey:"",url:"",inputType:0,audio:void 0,video:void 0,roomName:"",participantIdentity:"",participantName:"",reusable:!1,state:void 0}}t.IngressInfo={encode(O,D=d.default.Writer.create()){return O.ingressId!==void 0&&O.ingressId!==""&&D.uint32(10).string(O.ingressId),O.name!==void 0&&O.name!==""&&D.uint32(18).string(O.name),O.streamKey!==void 0&&O.streamKey!==""&&D.uint32(26).string(O.streamKey),O.url!==void 0&&O.url!==""&&D.uint32(34).string(O.url),O.inputType!==void 0&&O.inputType!==0&&D.uint32(40).int32(O.inputType),O.audio!==void 0&&t.IngressAudioOptions.encode(O.audio,D.uint32(50).fork()).ldelim(),O.video!==void 0&&t.IngressVideoOptions.encode(O.video,D.uint32(58).fork()).ldelim(),O.roomName!==void 0&&O.roomName!==""&&D.uint32(66).string(O.roomName),O.participantIdentity!==void 0&&O.participantIdentity!==""&&D.uint32(74).string(O.participantIdentity),O.participantName!==void 0&&O.participantName!==""&&D.uint32(82).string(O.participantName),O.reusable===!0&&D.uint32(88).bool(O.reusable),O.state!==void 0&&t.IngressState.encode(O.state,D.uint32(98).fork()).ldelim(),D},decode(O,D){const b=O instanceof d.default.Reader?O:new d.default.Reader(O);let _=D===void 0?b.len:b.pos+D;const g=k();for(;b.pos<_;){const w=b.uint32();switch(w>>>3){case 1:g.ingressId=b.string();break;case 2:g.name=b.string();break;case 3:g.streamKey=b.string();break;case 4:g.url=b.string();break;case 5:g.inputType=b.int32();break;case 6:g.audio=t.IngressAudioOptions.decode(b,b.uint32());break;case 7:g.video=t.IngressVideoOptions.decode(b,b.uint32());break;case 8:g.roomName=b.string();break;case 9:g.participantIdentity=b.string();break;case 10:g.participantName=b.string();break;case 11:g.reusable=b.bool();break;case 12:g.state=t.IngressState.decode(b,b.uint32());break;default:b.skipType(w&7);break}}return g},fromJSON(O){return{ingressId:Y(O.ingressId)?String(O.ingressId):"",name:Y(O.name)?String(O.name):"",streamKey:Y(O.streamKey)?String(O.streamKey):"",url:Y(O.url)?String(O.url):"",inputType:Y(O.inputType)?c(O.inputType):0,audio:Y(O.audio)?t.IngressAudioOptions.fromJSON(O.audio):void 0,video:Y(O.video)?t.IngressVideoOptions.fromJSON(O.video):void 0,roomName:Y(O.roomName)?String(O.roomName):"",participantIdentity:Y(O.participantIdentity)?String(O.participantIdentity):"",participantName:Y(O.participantName)?String(O.participantName):"",reusable:Y(O.reusable)?!!O.reusable:!1,state:Y(O.state)?t.IngressState.fromJSON(O.state):void 0}},toJSON(O){const D={};return O.ingressId!==void 0&&(D.ingressId=O.ingressId),O.name!==void 0&&(D.name=O.name),O.streamKey!==void 0&&(D.streamKey=O.streamKey),O.url!==void 0&&(D.url=O.url),O.inputType!==void 0&&(D.inputType=h(O.inputType)),O.audio!==void 0&&(D.audio=O.audio?t.IngressAudioOptions.toJSON(O.audio):void 0),O.video!==void 0&&(D.video=O.video?t.IngressVideoOptions.toJSON(O.video):void 0),O.roomName!==void 0&&(D.roomName=O.roomName),O.participantIdentity!==void 0&&(D.participantIdentity=O.participantIdentity),O.participantName!==void 0&&(D.participantName=O.participantName),O.reusable!==void 0&&(D.reusable=O.reusable),O.state!==void 0&&(D.state=O.state?t.IngressState.toJSON(O.state):void 0),D},fromPartial(O){var D,b,_,g,w,T,A,J,G;const I=k();return I.ingressId=(D=O.ingressId)!==null&&D!==void 0?D:"",I.name=(b=O.name)!==null&&b!==void 0?b:"",I.streamKey=(_=O.streamKey)!==null&&_!==void 0?_:"",I.url=(g=O.url)!==null&&g!==void 0?g:"",I.inputType=(w=O.inputType)!==null&&w!==void 0?w:0,I.audio=O.audio!==void 0&&O.audio!==null?t.IngressAudioOptions.fromPartial(O.audio):void 0,I.video=O.video!==void 0&&O.video!==null?t.IngressVideoOptions.fromPartial(O.video):void 0,I.roomName=(T=O.roomName)!==null&&T!==void 0?T:"",I.participantIdentity=(A=O.participantIdentity)!==null&&A!==void 0?A:"",I.participantName=(J=O.participantName)!==null&&J!==void 0?J:"",I.reusable=(G=O.reusable)!==null&&G!==void 0?G:!1,I.state=O.state!==void 0&&O.state!==null?t.IngressState.fromPartial(O.state):void 0,I}};function C(){return{status:0,error:"",video:void 0,audio:void 0,roomId:"",startedAt:0,tracks:[]}}t.IngressState={encode(O,D=d.default.Writer.create()){if(O.status!==void 0&&O.status!==0&&D.uint32(8).int32(O.status),O.error!==void 0&&O.error!==""&&D.uint32(18).string(O.error),O.video!==void 0&&t.InputVideoState.encode(O.video,D.uint32(26).fork()).ldelim(),O.audio!==void 0&&t.InputAudioState.encode(O.audio,D.uint32(34).fork()).ldelim(),O.roomId!==void 0&&O.roomId!==""&&D.uint32(42).string(O.roomId),O.startedAt!==void 0&&O.startedAt!==0&&D.uint32(56).int64(O.startedAt),O.tracks!==void 0&&O.tracks.length!==0)for(const b of O.tracks)s.TrackInfo.encode(b,D.uint32(50).fork()).ldelim();return D},decode(O,D){const b=O instanceof d.default.Reader?O:new d.default.Reader(O);let _=D===void 0?b.len:b.pos+D;const g=C();for(;b.pos<_;){const w=b.uint32();switch(w>>>3){case 1:g.status=b.int32();break;case 2:g.error=b.string();break;case 3:g.video=t.InputVideoState.decode(b,b.uint32());break;case 4:g.audio=t.InputAudioState.decode(b,b.uint32());break;case 5:g.roomId=b.string();break;case 7:g.startedAt=re(b.int64());break;case 6:g.tracks.push(s.TrackInfo.decode(b,b.uint32()));break;default:b.skipType(w&7);break}}return g},fromJSON(O){return{status:Y(O.status)?l(O.status):0,error:Y(O.error)?String(O.error):"",video:Y(O.video)?t.InputVideoState.fromJSON(O.video):void 0,audio:Y(O.audio)?t.InputAudioState.fromJSON(O.audio):void 0,roomId:Y(O.roomId)?String(O.roomId):"",startedAt:Y(O.startedAt)?Number(O.startedAt):0,tracks:Array.isArray(O==null?void 0:O.tracks)?O.tracks.map(D=>s.TrackInfo.fromJSON(D)):[]}},toJSON(O){const D={};return O.status!==void 0&&(D.status=f(O.status)),O.error!==void 0&&(D.error=O.error),O.video!==void 0&&(D.video=O.video?t.InputVideoState.toJSON(O.video):void 0),O.audio!==void 0&&(D.audio=O.audio?t.InputAudioState.toJSON(O.audio):void 0),O.roomId!==void 0&&(D.roomId=O.roomId),O.startedAt!==void 0&&(D.startedAt=Math.round(O.startedAt)),O.tracks?D.tracks=O.tracks.map(b=>b?s.TrackInfo.toJSON(b):void 0):D.tracks=[],D},fromPartial(O){var D,b,_,g,w;const T=C();return T.status=(D=O.status)!==null&&D!==void 0?D:0,T.error=(b=O.error)!==null&&b!==void 0?b:"",T.video=O.video!==void 0&&O.video!==null?t.InputVideoState.fromPartial(O.video):void 0,T.audio=O.audio!==void 0&&O.audio!==null?t.InputAudioState.fromPartial(O.audio):void 0,T.roomId=(_=O.roomId)!==null&&_!==void 0?_:"",T.startedAt=(g=O.startedAt)!==null&&g!==void 0?g:0,T.tracks=((w=O.tracks)===null||w===void 0?void 0:w.map(A=>s.TrackInfo.fromPartial(A)))||[],T}};function N(){return{mimeType:0,width:0,height:0,framerate:0}}t.InputVideoState={encode(O,D=d.default.Writer.create()){return O.mimeType!==void 0&&O.mimeType!==0&&D.uint32(8).uint32(O.mimeType),O.width!==void 0&&O.width!==0&&D.uint32(24).uint32(O.width),O.height!==void 0&&O.height!==0&&D.uint32(32).uint32(O.height),O.framerate!==void 0&&O.framerate!==0&&D.uint32(40).uint32(O.framerate),D},decode(O,D){const b=O instanceof d.default.Reader?O:new d.default.Reader(O);let _=D===void 0?b.len:b.pos+D;const g=N();for(;b.pos<_;){const w=b.uint32();switch(w>>>3){case 1:g.mimeType=b.uint32();break;case 3:g.width=b.uint32();break;case 4:g.height=b.uint32();break;case 5:g.framerate=b.uint32();break;default:b.skipType(w&7);break}}return g},fromJSON(O){return{mimeType:Y(O.mimeType)?Number(O.mimeType):0,width:Y(O.width)?Number(O.width):0,height:Y(O.height)?Number(O.height):0,framerate:Y(O.framerate)?Number(O.framerate):0}},toJSON(O){const D={};return O.mimeType!==void 0&&(D.mimeType=Math.round(O.mimeType)),O.width!==void 0&&(D.width=Math.round(O.width)),O.height!==void 0&&(D.height=Math.round(O.height)),O.framerate!==void 0&&(D.framerate=Math.round(O.framerate)),D},fromPartial(O){var D,b,_,g;const w=N();return w.mimeType=(D=O.mimeType)!==null&&D!==void 0?D:0,w.width=(b=O.width)!==null&&b!==void 0?b:0,w.height=(_=O.height)!==null&&_!==void 0?_:0,w.framerate=(g=O.framerate)!==null&&g!==void 0?g:0,w}};function P(){return{mimeType:0,channels:0,sampleRate:0}}t.InputAudioState={encode(O,D=d.default.Writer.create()){return O.mimeType!==void 0&&O.mimeType!==0&&D.uint32(8).uint32(O.mimeType),O.channels!==void 0&&O.channels!==0&&D.uint32(24).uint32(O.channels),O.sampleRate!==void 0&&O.sampleRate!==0&&D.uint32(32).uint32(O.sampleRate),D},decode(O,D){const b=O instanceof d.default.Reader?O:new d.default.Reader(O);let _=D===void 0?b.len:b.pos+D;const g=P();for(;b.pos<_;){const w=b.uint32();switch(w>>>3){case 1:g.mimeType=b.uint32();break;case 3:g.channels=b.uint32();break;case 4:g.sampleRate=b.uint32();break;default:b.skipType(w&7);break}}return g},fromJSON(O){return{mimeType:Y(O.mimeType)?Number(O.mimeType):0,channels:Y(O.channels)?Number(O.channels):0,sampleRate:Y(O.sampleRate)?Number(O.sampleRate):0}},toJSON(O){const D={};return O.mimeType!==void 0&&(D.mimeType=Math.round(O.mimeType)),O.channels!==void 0&&(D.channels=Math.round(O.channels)),O.sampleRate!==void 0&&(D.sampleRate=Math.round(O.sampleRate)),D},fromPartial(O){var D,b,_;const g=P();return g.mimeType=(D=O.mimeType)!==null&&D!==void 0?D:0,g.channels=(b=O.channels)!==null&&b!==void 0?b:0,g.sampleRate=(_=O.sampleRate)!==null&&_!==void 0?_:0,g}};function M(){return{ingressId:"",name:"",roomName:"",participantIdentity:"",participantName:"",audio:void 0,video:void 0}}t.UpdateIngressRequest={encode(O,D=d.default.Writer.create()){return O.ingressId!==void 0&&O.ingressId!==""&&D.uint32(10).string(O.ingressId),O.name!==void 0&&O.name!==""&&D.uint32(18).string(O.name),O.roomName!==void 0&&O.roomName!==""&&D.uint32(26).string(O.roomName),O.participantIdentity!==void 0&&O.participantIdentity!==""&&D.uint32(34).string(O.participantIdentity),O.participantName!==void 0&&O.participantName!==""&&D.uint32(42).string(O.participantName),O.audio!==void 0&&t.IngressAudioOptions.encode(O.audio,D.uint32(50).fork()).ldelim(),O.video!==void 0&&t.IngressVideoOptions.encode(O.video,D.uint32(58).fork()).ldelim(),D},decode(O,D){const b=O instanceof d.default.Reader?O:new d.default.Reader(O);let _=D===void 0?b.len:b.pos+D;const g=M();for(;b.pos<_;){const w=b.uint32();switch(w>>>3){case 1:g.ingressId=b.string();break;case 2:g.name=b.string();break;case 3:g.roomName=b.string();break;case 4:g.participantIdentity=b.string();break;case 5:g.participantName=b.string();break;case 6:g.audio=t.IngressAudioOptions.decode(b,b.uint32());break;case 7:g.video=t.IngressVideoOptions.decode(b,b.uint32());break;default:b.skipType(w&7);break}}return g},fromJSON(O){return{ingressId:Y(O.ingressId)?String(O.ingressId):"",name:Y(O.name)?String(O.name):"",roomName:Y(O.roomName)?String(O.roomName):"",participantIdentity:Y(O.participantIdentity)?String(O.participantIdentity):"",participantName:Y(O.participantName)?String(O.participantName):"",audio:Y(O.audio)?t.IngressAudioOptions.fromJSON(O.audio):void 0,video:Y(O.video)?t.IngressVideoOptions.fromJSON(O.video):void 0}},toJSON(O){const D={};return O.ingressId!==void 0&&(D.ingressId=O.ingressId),O.name!==void 0&&(D.name=O.name),O.roomName!==void 0&&(D.roomName=O.roomName),O.participantIdentity!==void 0&&(D.participantIdentity=O.participantIdentity),O.participantName!==void 0&&(D.participantName=O.participantName),O.audio!==void 0&&(D.audio=O.audio?t.IngressAudioOptions.toJSON(O.audio):void 0),O.video!==void 0&&(D.video=O.video?t.IngressVideoOptions.toJSON(O.video):void 0),D},fromPartial(O){var D,b,_,g,w;const T=M();return T.ingressId=(D=O.ingressId)!==null&&D!==void 0?D:"",T.name=(b=O.name)!==null&&b!==void 0?b:"",T.roomName=(_=O.roomName)!==null&&_!==void 0?_:"",T.participantIdentity=(g=O.participantIdentity)!==null&&g!==void 0?g:"",T.participantName=(w=O.participantName)!==null&&w!==void 0?w:"",T.audio=O.audio!==void 0&&O.audio!==null?t.IngressAudioOptions.fromPartial(O.audio):void 0,T.video=O.video!==void 0&&O.video!==null?t.IngressVideoOptions.fromPartial(O.video):void 0,T}};function L(){return{roomName:""}}t.ListIngressRequest={encode(O,D=d.default.Writer.create()){return O.roomName!==void 0&&O.roomName!==""&&D.uint32(10).string(O.roomName),D},decode(O,D){const b=O instanceof d.default.Reader?O:new d.default.Reader(O);let _=D===void 0?b.len:b.pos+D;const g=L();for(;b.pos<_;){const w=b.uint32();switch(w>>>3){case 1:g.roomName=b.string();break;default:b.skipType(w&7);break}}return g},fromJSON(O){return{roomName:Y(O.roomName)?String(O.roomName):""}},toJSON(O){const D={};return O.roomName!==void 0&&(D.roomName=O.roomName),D},fromPartial(O){var D;const b=L();return b.roomName=(D=O.roomName)!==null&&D!==void 0?D:"",b}};function $(){return{items:[]}}t.ListIngressResponse={encode(O,D=d.default.Writer.create()){if(O.items!==void 0&&O.items.length!==0)for(const b of O.items)t.IngressInfo.encode(b,D.uint32(10).fork()).ldelim();return D},decode(O,D){const b=O instanceof d.default.Reader?O:new d.default.Reader(O);let _=D===void 0?b.len:b.pos+D;const g=$();for(;b.pos<_;){const w=b.uint32();switch(w>>>3){case 1:g.items.push(t.IngressInfo.decode(b,b.uint32()));break;default:b.skipType(w&7);break}}return g},fromJSON(O){return{items:Array.isArray(O==null?void 0:O.items)?O.items.map(D=>t.IngressInfo.fromJSON(D)):[]}},toJSON(O){const D={};return O.items?D.items=O.items.map(b=>b?t.IngressInfo.toJSON(b):void 0):D.items=[],D},fromPartial(O){var D;const b=$();return b.items=((D=O.items)===null||D===void 0?void 0:D.map(_=>t.IngressInfo.fromPartial(_)))||[],b}};function H(){return{ingressId:""}}t.DeleteIngressRequest={encode(O,D=d.default.Writer.create()){return O.ingressId!==void 0&&O.ingressId!==""&&D.uint32(10).string(O.ingressId),D},decode(O,D){const b=O instanceof d.default.Reader?O:new d.default.Reader(O);let _=D===void 0?b.len:b.pos+D;const g=H();for(;b.pos<_;){const w=b.uint32();switch(w>>>3){case 1:g.ingressId=b.string();break;default:b.skipType(w&7);break}}return g},fromJSON(O){return{ingressId:Y(O.ingressId)?String(O.ingressId):""}},toJSON(O){const D={};return O.ingressId!==void 0&&(D.ingressId=O.ingressId),D},fromPartial(O){var D;const b=H();return b.ingressId=(D=O.ingressId)!==null&&D!==void 0?D:"",b}};var Z=(()=>{if(typeof Z<"u")return Z;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function re(O){if(O.gt(Number.MAX_SAFE_INTEGER))throw new Z.Error("Value is larger than Number.MAX_SAFE_INTEGER");return O.toNumber()}d.default.util.Long!==o.default&&(d.default.util.Long=o.default,d.default.configure());function Y(O){return O!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./livekit_models":75,long:85,"protobufjs/minimal":89}],75:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(t,"__esModule",{value:!0}),t.RTPStats_GapHistogramEntry=t.RTPStats=t.DisabledCodecs=t.VideoConfiguration=t.ClientConfiguration=t.ClientInfo=t.ServerInfo=t.ParticipantTracks=t.UserPacket=t.SpeakerInfo=t.ActiveSpeakerUpdate=t.DataPacket=t.VideoLayer=t.TrackInfo=t.SimulcastCodecInfo=t.ParticipantInfo=t.ParticipantPermission=t.Codec=t.Room=t.clientInfo_SDKToJSON=t.clientInfo_SDKFromJSON=t.ClientInfo_SDK=t.serverInfo_EditionToJSON=t.serverInfo_EditionFromJSON=t.ServerInfo_Edition=t.dataPacket_KindToJSON=t.dataPacket_KindFromJSON=t.DataPacket_Kind=t.participantInfo_StateToJSON=t.participantInfo_StateFromJSON=t.ParticipantInfo_State=t.disconnectReasonToJSON=t.disconnectReasonFromJSON=t.DisconnectReason=t.clientConfigSettingToJSON=t.clientConfigSettingFromJSON=t.ClientConfigSetting=t.connectionQualityToJSON=t.connectionQualityFromJSON=t.ConnectionQuality=t.videoQualityToJSON=t.videoQualityFromJSON=t.VideoQuality=t.trackSourceToJSON=t.trackSourceFromJSON=t.TrackSource=t.trackTypeToJSON=t.trackTypeFromJSON=t.TrackType=t.protobufPackage=void 0,t.TimedVersion=void 0;const o=a(e("long")),d=a(e("protobufjs/minimal")),s=e("./google/protobuf/timestamp");t.protobufPackage="livekit";var u;(function(S){S[S.AUDIO=0]="AUDIO",S[S.VIDEO=1]="VIDEO",S[S.DATA=2]="DATA",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(u=t.TrackType||(t.TrackType={}));function c(S){switch(S){case 0:case"AUDIO":return u.AUDIO;case 1:case"VIDEO":return u.VIDEO;case 2:case"DATA":return u.DATA;case-1:case"UNRECOGNIZED":default:return u.UNRECOGNIZED}}t.trackTypeFromJSON=c;function h(S){switch(S){case u.AUDIO:return"AUDIO";case u.VIDEO:return"VIDEO";case u.DATA:return"DATA";case u.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.trackTypeToJSON=h;var p;(function(S){S[S.UNKNOWN=0]="UNKNOWN",S[S.CAMERA=1]="CAMERA",S[S.MICROPHONE=2]="MICROPHONE",S[S.SCREEN_SHARE=3]="SCREEN_SHARE",S[S.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(p=t.TrackSource||(t.TrackSource={}));function l(S){switch(S){case 0:case"UNKNOWN":return p.UNKNOWN;case 1:case"CAMERA":return p.CAMERA;case 2:case"MICROPHONE":return p.MICROPHONE;case 3:case"SCREEN_SHARE":return p.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return p.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return p.UNRECOGNIZED}}t.trackSourceFromJSON=l;function f(S){switch(S){case p.UNKNOWN:return"UNKNOWN";case p.CAMERA:return"CAMERA";case p.MICROPHONE:return"MICROPHONE";case p.SCREEN_SHARE:return"SCREEN_SHARE";case p.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";case p.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.trackSourceToJSON=f;var m;(function(S){S[S.LOW=0]="LOW",S[S.MEDIUM=1]="MEDIUM",S[S.HIGH=2]="HIGH",S[S.OFF=3]="OFF",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(m=t.VideoQuality||(t.VideoQuality={}));function v(S){switch(S){case 0:case"LOW":return m.LOW;case 1:case"MEDIUM":return m.MEDIUM;case 2:case"HIGH":return m.HIGH;case 3:case"OFF":return m.OFF;case-1:case"UNRECOGNIZED":default:return m.UNRECOGNIZED}}t.videoQualityFromJSON=v;function E(S){switch(S){case m.LOW:return"LOW";case m.MEDIUM:return"MEDIUM";case m.HIGH:return"HIGH";case m.OFF:return"OFF";case m.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.videoQualityToJSON=E;var k;(function(S){S[S.POOR=0]="POOR",S[S.GOOD=1]="GOOD",S[S.EXCELLENT=2]="EXCELLENT",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(k=t.ConnectionQuality||(t.ConnectionQuality={}));function C(S){switch(S){case 0:case"POOR":return k.POOR;case 1:case"GOOD":return k.GOOD;case 2:case"EXCELLENT":return k.EXCELLENT;case-1:case"UNRECOGNIZED":default:return k.UNRECOGNIZED}}t.connectionQualityFromJSON=C;function N(S){switch(S){case k.POOR:return"POOR";case k.GOOD:return"GOOD";case k.EXCELLENT:return"EXCELLENT";case k.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.connectionQualityToJSON=N;var P;(function(S){S[S.UNSET=0]="UNSET",S[S.DISABLED=1]="DISABLED",S[S.ENABLED=2]="ENABLED",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(P=t.ClientConfigSetting||(t.ClientConfigSetting={}));function M(S){switch(S){case 0:case"UNSET":return P.UNSET;case 1:case"DISABLED":return P.DISABLED;case 2:case"ENABLED":return P.ENABLED;case-1:case"UNRECOGNIZED":default:return P.UNRECOGNIZED}}t.clientConfigSettingFromJSON=M;function L(S){switch(S){case P.UNSET:return"UNSET";case P.DISABLED:return"DISABLED";case P.ENABLED:return"ENABLED";case P.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.clientConfigSettingToJSON=L;var $;(function(S){S[S.UNKNOWN_REASON=0]="UNKNOWN_REASON",S[S.CLIENT_INITIATED=1]="CLIENT_INITIATED",S[S.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",S[S.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",S[S.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",S[S.ROOM_DELETED=5]="ROOM_DELETED",S[S.STATE_MISMATCH=6]="STATE_MISMATCH",S[S.JOIN_FAILURE=7]="JOIN_FAILURE",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})($=t.DisconnectReason||(t.DisconnectReason={}));function H(S){switch(S){case 0:case"UNKNOWN_REASON":return $.UNKNOWN_REASON;case 1:case"CLIENT_INITIATED":return $.CLIENT_INITIATED;case 2:case"DUPLICATE_IDENTITY":return $.DUPLICATE_IDENTITY;case 3:case"SERVER_SHUTDOWN":return $.SERVER_SHUTDOWN;case 4:case"PARTICIPANT_REMOVED":return $.PARTICIPANT_REMOVED;case 5:case"ROOM_DELETED":return $.ROOM_DELETED;case 6:case"STATE_MISMATCH":return $.STATE_MISMATCH;case 7:case"JOIN_FAILURE":return $.JOIN_FAILURE;case-1:case"UNRECOGNIZED":default:return $.UNRECOGNIZED}}t.disconnectReasonFromJSON=H;function Z(S){switch(S){case $.UNKNOWN_REASON:return"UNKNOWN_REASON";case $.CLIENT_INITIATED:return"CLIENT_INITIATED";case $.DUPLICATE_IDENTITY:return"DUPLICATE_IDENTITY";case $.SERVER_SHUTDOWN:return"SERVER_SHUTDOWN";case $.PARTICIPANT_REMOVED:return"PARTICIPANT_REMOVED";case $.ROOM_DELETED:return"ROOM_DELETED";case $.STATE_MISMATCH:return"STATE_MISMATCH";case $.JOIN_FAILURE:return"JOIN_FAILURE";case $.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.disconnectReasonToJSON=Z;var re;(function(S){S[S.JOINING=0]="JOINING",S[S.JOINED=1]="JOINED",S[S.ACTIVE=2]="ACTIVE",S[S.DISCONNECTED=3]="DISCONNECTED",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(re=t.ParticipantInfo_State||(t.ParticipantInfo_State={}));function Y(S){switch(S){case 0:case"JOINING":return re.JOINING;case 1:case"JOINED":return re.JOINED;case 2:case"ACTIVE":return re.ACTIVE;case 3:case"DISCONNECTED":return re.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return re.UNRECOGNIZED}}t.participantInfo_StateFromJSON=Y;function O(S){switch(S){case re.JOINING:return"JOINING";case re.JOINED:return"JOINED";case re.ACTIVE:return"ACTIVE";case re.DISCONNECTED:return"DISCONNECTED";case re.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.participantInfo_StateToJSON=O;var D;(function(S){S[S.RELIABLE=0]="RELIABLE",S[S.LOSSY=1]="LOSSY",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(D=t.DataPacket_Kind||(t.DataPacket_Kind={}));function b(S){switch(S){case 0:case"RELIABLE":return D.RELIABLE;case 1:case"LOSSY":return D.LOSSY;case-1:case"UNRECOGNIZED":default:return D.UNRECOGNIZED}}t.dataPacket_KindFromJSON=b;function _(S){switch(S){case D.RELIABLE:return"RELIABLE";case D.LOSSY:return"LOSSY";case D.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.dataPacket_KindToJSON=_;var g;(function(S){S[S.Standard=0]="Standard",S[S.Cloud=1]="Cloud",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(g=t.ServerInfo_Edition||(t.ServerInfo_Edition={}));function w(S){switch(S){case 0:case"Standard":return g.Standard;case 1:case"Cloud":return g.Cloud;case-1:case"UNRECOGNIZED":default:return g.UNRECOGNIZED}}t.serverInfo_EditionFromJSON=w;function T(S){switch(S){case g.Standard:return"Standard";case g.Cloud:return"Cloud";case g.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.serverInfo_EditionToJSON=T;var A;(function(S){S[S.UNKNOWN=0]="UNKNOWN",S[S.JS=1]="JS",S[S.SWIFT=2]="SWIFT",S[S.ANDROID=3]="ANDROID",S[S.FLUTTER=4]="FLUTTER",S[S.GO=5]="GO",S[S.UNITY=6]="UNITY",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(A=t.ClientInfo_SDK||(t.ClientInfo_SDK={}));function J(S){switch(S){case 0:case"UNKNOWN":return A.UNKNOWN;case 1:case"JS":return A.JS;case 2:case"SWIFT":return A.SWIFT;case 3:case"ANDROID":return A.ANDROID;case 4:case"FLUTTER":return A.FLUTTER;case 5:case"GO":return A.GO;case 6:case"UNITY":return A.UNITY;case-1:case"UNRECOGNIZED":default:return A.UNRECOGNIZED}}t.clientInfo_SDKFromJSON=J;function G(S){switch(S){case A.UNKNOWN:return"UNKNOWN";case A.JS:return"JS";case A.SWIFT:return"SWIFT";case A.ANDROID:return"ANDROID";case A.FLUTTER:return"FLUTTER";case A.GO:return"GO";case A.UNITY:return"UNITY";case A.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.clientInfo_SDKToJSON=G;function I(){return{sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,activeRecording:!1}}t.Room={encode(S,B=d.default.Writer.create()){S.sid!==""&&B.uint32(10).string(S.sid),S.name!==""&&B.uint32(18).string(S.name),S.emptyTimeout!==0&&B.uint32(24).uint32(S.emptyTimeout),S.maxParticipants!==0&&B.uint32(32).uint32(S.maxParticipants),S.creationTime!==0&&B.uint32(40).int64(S.creationTime),S.turnPassword!==""&&B.uint32(50).string(S.turnPassword);for(const K of S.enabledCodecs)t.Codec.encode(K,B.uint32(58).fork()).ldelim();return S.metadata!==""&&B.uint32(66).string(S.metadata),S.numParticipants!==0&&B.uint32(72).uint32(S.numParticipants),S.activeRecording===!0&&B.uint32(80).bool(S.activeRecording),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=I();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.name=K.string();break;case 3:ae.emptyTimeout=K.uint32();break;case 4:ae.maxParticipants=K.uint32();break;case 5:ae.creationTime=q(K.int64());break;case 6:ae.turnPassword=K.string();break;case 7:ae.enabledCodecs.push(t.Codec.decode(K,K.uint32()));break;case 8:ae.metadata=K.string();break;case 9:ae.numParticipants=K.uint32();break;case 10:ae.activeRecording=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{sid:j(S.sid)?String(S.sid):"",name:j(S.name)?String(S.name):"",emptyTimeout:j(S.emptyTimeout)?Number(S.emptyTimeout):0,maxParticipants:j(S.maxParticipants)?Number(S.maxParticipants):0,creationTime:j(S.creationTime)?Number(S.creationTime):0,turnPassword:j(S.turnPassword)?String(S.turnPassword):"",enabledCodecs:Array.isArray(S==null?void 0:S.enabledCodecs)?S.enabledCodecs.map(B=>t.Codec.fromJSON(B)):[],metadata:j(S.metadata)?String(S.metadata):"",numParticipants:j(S.numParticipants)?Number(S.numParticipants):0,activeRecording:j(S.activeRecording)?!!S.activeRecording:!1}},toJSON(S){const B={};return S.sid!==void 0&&(B.sid=S.sid),S.name!==void 0&&(B.name=S.name),S.emptyTimeout!==void 0&&(B.emptyTimeout=Math.round(S.emptyTimeout)),S.maxParticipants!==void 0&&(B.maxParticipants=Math.round(S.maxParticipants)),S.creationTime!==void 0&&(B.creationTime=Math.round(S.creationTime)),S.turnPassword!==void 0&&(B.turnPassword=S.turnPassword),S.enabledCodecs?B.enabledCodecs=S.enabledCodecs.map(K=>K?t.Codec.toJSON(K):void 0):B.enabledCodecs=[],S.metadata!==void 0&&(B.metadata=S.metadata),S.numParticipants!==void 0&&(B.numParticipants=Math.round(S.numParticipants)),S.activeRecording!==void 0&&(B.activeRecording=S.activeRecording),B},fromPartial(S){var B,K,me,ae,_e,Oe,Pe,Ue,De,Ae;const Re=I();return Re.sid=(B=S.sid)!==null&&B!==void 0?B:"",Re.name=(K=S.name)!==null&&K!==void 0?K:"",Re.emptyTimeout=(me=S.emptyTimeout)!==null&&me!==void 0?me:0,Re.maxParticipants=(ae=S.maxParticipants)!==null&&ae!==void 0?ae:0,Re.creationTime=(_e=S.creationTime)!==null&&_e!==void 0?_e:0,Re.turnPassword=(Oe=S.turnPassword)!==null&&Oe!==void 0?Oe:"",Re.enabledCodecs=((Pe=S.enabledCodecs)===null||Pe===void 0?void 0:Pe.map(We=>t.Codec.fromPartial(We)))||[],Re.metadata=(Ue=S.metadata)!==null&&Ue!==void 0?Ue:"",Re.numParticipants=(De=S.numParticipants)!==null&&De!==void 0?De:0,Re.activeRecording=(Ae=S.activeRecording)!==null&&Ae!==void 0?Ae:!1,Re}};function V(){return{mime:"",fmtpLine:""}}t.Codec={encode(S,B=d.default.Writer.create()){return S.mime!==""&&B.uint32(10).string(S.mime),S.fmtpLine!==""&&B.uint32(18).string(S.fmtpLine),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=V();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.mime=K.string();break;case 2:ae.fmtpLine=K.string();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{mime:j(S.mime)?String(S.mime):"",fmtpLine:j(S.fmtpLine)?String(S.fmtpLine):""}},toJSON(S){const B={};return S.mime!==void 0&&(B.mime=S.mime),S.fmtpLine!==void 0&&(B.fmtpLine=S.fmtpLine),B},fromPartial(S){var B,K;const me=V();return me.mime=(B=S.mime)!==null&&B!==void 0?B:"",me.fmtpLine=(K=S.fmtpLine)!==null&&K!==void 0?K:"",me}};function x(){return{canSubscribe:!1,canPublish:!1,canPublishData:!1,hidden:!1,recorder:!1}}t.ParticipantPermission={encode(S,B=d.default.Writer.create()){return S.canSubscribe===!0&&B.uint32(8).bool(S.canSubscribe),S.canPublish===!0&&B.uint32(16).bool(S.canPublish),S.canPublishData===!0&&B.uint32(24).bool(S.canPublishData),S.hidden===!0&&B.uint32(56).bool(S.hidden),S.recorder===!0&&B.uint32(64).bool(S.recorder),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=x();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.canSubscribe=K.bool();break;case 2:ae.canPublish=K.bool();break;case 3:ae.canPublishData=K.bool();break;case 7:ae.hidden=K.bool();break;case 8:ae.recorder=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{canSubscribe:j(S.canSubscribe)?!!S.canSubscribe:!1,canPublish:j(S.canPublish)?!!S.canPublish:!1,canPublishData:j(S.canPublishData)?!!S.canPublishData:!1,hidden:j(S.hidden)?!!S.hidden:!1,recorder:j(S.recorder)?!!S.recorder:!1}},toJSON(S){const B={};return S.canSubscribe!==void 0&&(B.canSubscribe=S.canSubscribe),S.canPublish!==void 0&&(B.canPublish=S.canPublish),S.canPublishData!==void 0&&(B.canPublishData=S.canPublishData),S.hidden!==void 0&&(B.hidden=S.hidden),S.recorder!==void 0&&(B.recorder=S.recorder),B},fromPartial(S){var B,K,me,ae,_e;const Oe=x();return Oe.canSubscribe=(B=S.canSubscribe)!==null&&B!==void 0?B:!1,Oe.canPublish=(K=S.canPublish)!==null&&K!==void 0?K:!1,Oe.canPublishData=(me=S.canPublishData)!==null&&me!==void 0?me:!1,Oe.hidden=(ae=S.hidden)!==null&&ae!==void 0?ae:!1,Oe.recorder=(_e=S.recorder)!==null&&_e!==void 0?_e:!1,Oe}};function z(){return{sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1}}t.ParticipantInfo={encode(S,B=d.default.Writer.create()){S.sid!==""&&B.uint32(10).string(S.sid),S.identity!==""&&B.uint32(18).string(S.identity),S.state!==0&&B.uint32(24).int32(S.state);for(const K of S.tracks)t.TrackInfo.encode(K,B.uint32(34).fork()).ldelim();return S.metadata!==""&&B.uint32(42).string(S.metadata),S.joinedAt!==0&&B.uint32(48).int64(S.joinedAt),S.name!==""&&B.uint32(74).string(S.name),S.version!==0&&B.uint32(80).uint32(S.version),S.permission!==void 0&&t.ParticipantPermission.encode(S.permission,B.uint32(90).fork()).ldelim(),S.region!==""&&B.uint32(98).string(S.region),S.isPublisher===!0&&B.uint32(104).bool(S.isPublisher),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=z();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.identity=K.string();break;case 3:ae.state=K.int32();break;case 4:ae.tracks.push(t.TrackInfo.decode(K,K.uint32()));break;case 5:ae.metadata=K.string();break;case 6:ae.joinedAt=q(K.int64());break;case 9:ae.name=K.string();break;case 10:ae.version=K.uint32();break;case 11:ae.permission=t.ParticipantPermission.decode(K,K.uint32());break;case 12:ae.region=K.string();break;case 13:ae.isPublisher=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{sid:j(S.sid)?String(S.sid):"",identity:j(S.identity)?String(S.identity):"",state:j(S.state)?Y(S.state):0,tracks:Array.isArray(S==null?void 0:S.tracks)?S.tracks.map(B=>t.TrackInfo.fromJSON(B)):[],metadata:j(S.metadata)?String(S.metadata):"",joinedAt:j(S.joinedAt)?Number(S.joinedAt):0,name:j(S.name)?String(S.name):"",version:j(S.version)?Number(S.version):0,permission:j(S.permission)?t.ParticipantPermission.fromJSON(S.permission):void 0,region:j(S.region)?String(S.region):"",isPublisher:j(S.isPublisher)?!!S.isPublisher:!1}},toJSON(S){const B={};return S.sid!==void 0&&(B.sid=S.sid),S.identity!==void 0&&(B.identity=S.identity),S.state!==void 0&&(B.state=O(S.state)),S.tracks?B.tracks=S.tracks.map(K=>K?t.TrackInfo.toJSON(K):void 0):B.tracks=[],S.metadata!==void 0&&(B.metadata=S.metadata),S.joinedAt!==void 0&&(B.joinedAt=Math.round(S.joinedAt)),S.name!==void 0&&(B.name=S.name),S.version!==void 0&&(B.version=Math.round(S.version)),S.permission!==void 0&&(B.permission=S.permission?t.ParticipantPermission.toJSON(S.permission):void 0),S.region!==void 0&&(B.region=S.region),S.isPublisher!==void 0&&(B.isPublisher=S.isPublisher),B},fromPartial(S){var B,K,me,ae,_e,Oe,Pe,Ue,De,Ae;const Re=z();return Re.sid=(B=S.sid)!==null&&B!==void 0?B:"",Re.identity=(K=S.identity)!==null&&K!==void 0?K:"",Re.state=(me=S.state)!==null&&me!==void 0?me:0,Re.tracks=((ae=S.tracks)===null||ae===void 0?void 0:ae.map(We=>t.TrackInfo.fromPartial(We)))||[],Re.metadata=(_e=S.metadata)!==null&&_e!==void 0?_e:"",Re.joinedAt=(Oe=S.joinedAt)!==null&&Oe!==void 0?Oe:0,Re.name=(Pe=S.name)!==null&&Pe!==void 0?Pe:"",Re.version=(Ue=S.version)!==null&&Ue!==void 0?Ue:0,Re.permission=S.permission!==void 0&&S.permission!==null?t.ParticipantPermission.fromPartial(S.permission):void 0,Re.region=(De=S.region)!==null&&De!==void 0?De:"",Re.isPublisher=(Ae=S.isPublisher)!==null&&Ae!==void 0?Ae:!1,Re}};function ie(){return{mimeType:"",mid:"",cid:"",layers:[]}}t.SimulcastCodecInfo={encode(S,B=d.default.Writer.create()){S.mimeType!==""&&B.uint32(10).string(S.mimeType),S.mid!==""&&B.uint32(18).string(S.mid),S.cid!==""&&B.uint32(26).string(S.cid);for(const K of S.layers)t.VideoLayer.encode(K,B.uint32(34).fork()).ldelim();return B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=ie();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.mimeType=K.string();break;case 2:ae.mid=K.string();break;case 3:ae.cid=K.string();break;case 4:ae.layers.push(t.VideoLayer.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{mimeType:j(S.mimeType)?String(S.mimeType):"",mid:j(S.mid)?String(S.mid):"",cid:j(S.cid)?String(S.cid):"",layers:Array.isArray(S==null?void 0:S.layers)?S.layers.map(B=>t.VideoLayer.fromJSON(B)):[]}},toJSON(S){const B={};return S.mimeType!==void 0&&(B.mimeType=S.mimeType),S.mid!==void 0&&(B.mid=S.mid),S.cid!==void 0&&(B.cid=S.cid),S.layers?B.layers=S.layers.map(K=>K?t.VideoLayer.toJSON(K):void 0):B.layers=[],B},fromPartial(S){var B,K,me,ae;const _e=ie();return _e.mimeType=(B=S.mimeType)!==null&&B!==void 0?B:"",_e.mid=(K=S.mid)!==null&&K!==void 0?K:"",_e.cid=(me=S.cid)!==null&&me!==void 0?me:"",_e.layers=((ae=S.layers)===null||ae===void 0?void 0:ae.map(Oe=>t.VideoLayer.fromPartial(Oe)))||[],_e}};function se(){return{sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[],stereo:!1,disableRed:!1}}t.TrackInfo={encode(S,B=d.default.Writer.create()){S.sid!==""&&B.uint32(10).string(S.sid),S.type!==0&&B.uint32(16).int32(S.type),S.name!==""&&B.uint32(26).string(S.name),S.muted===!0&&B.uint32(32).bool(S.muted),S.width!==0&&B.uint32(40).uint32(S.width),S.height!==0&&B.uint32(48).uint32(S.height),S.simulcast===!0&&B.uint32(56).bool(S.simulcast),S.disableDtx===!0&&B.uint32(64).bool(S.disableDtx),S.source!==0&&B.uint32(72).int32(S.source);for(const K of S.layers)t.VideoLayer.encode(K,B.uint32(82).fork()).ldelim();S.mimeType!==""&&B.uint32(90).string(S.mimeType),S.mid!==""&&B.uint32(98).string(S.mid);for(const K of S.codecs)t.SimulcastCodecInfo.encode(K,B.uint32(106).fork()).ldelim();return S.stereo===!0&&B.uint32(112).bool(S.stereo),S.disableRed===!0&&B.uint32(120).bool(S.disableRed),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=se();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.type=K.int32();break;case 3:ae.name=K.string();break;case 4:ae.muted=K.bool();break;case 5:ae.width=K.uint32();break;case 6:ae.height=K.uint32();break;case 7:ae.simulcast=K.bool();break;case 8:ae.disableDtx=K.bool();break;case 9:ae.source=K.int32();break;case 10:ae.layers.push(t.VideoLayer.decode(K,K.uint32()));break;case 11:ae.mimeType=K.string();break;case 12:ae.mid=K.string();break;case 13:ae.codecs.push(t.SimulcastCodecInfo.decode(K,K.uint32()));break;case 14:ae.stereo=K.bool();break;case 15:ae.disableRed=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{sid:j(S.sid)?String(S.sid):"",type:j(S.type)?c(S.type):0,name:j(S.name)?String(S.name):"",muted:j(S.muted)?!!S.muted:!1,width:j(S.width)?Number(S.width):0,height:j(S.height)?Number(S.height):0,simulcast:j(S.simulcast)?!!S.simulcast:!1,disableDtx:j(S.disableDtx)?!!S.disableDtx:!1,source:j(S.source)?l(S.source):0,layers:Array.isArray(S==null?void 0:S.layers)?S.layers.map(B=>t.VideoLayer.fromJSON(B)):[],mimeType:j(S.mimeType)?String(S.mimeType):"",mid:j(S.mid)?String(S.mid):"",codecs:Array.isArray(S==null?void 0:S.codecs)?S.codecs.map(B=>t.SimulcastCodecInfo.fromJSON(B)):[],stereo:j(S.stereo)?!!S.stereo:!1,disableRed:j(S.disableRed)?!!S.disableRed:!1}},toJSON(S){const B={};return S.sid!==void 0&&(B.sid=S.sid),S.type!==void 0&&(B.type=h(S.type)),S.name!==void 0&&(B.name=S.name),S.muted!==void 0&&(B.muted=S.muted),S.width!==void 0&&(B.width=Math.round(S.width)),S.height!==void 0&&(B.height=Math.round(S.height)),S.simulcast!==void 0&&(B.simulcast=S.simulcast),S.disableDtx!==void 0&&(B.disableDtx=S.disableDtx),S.source!==void 0&&(B.source=f(S.source)),S.layers?B.layers=S.layers.map(K=>K?t.VideoLayer.toJSON(K):void 0):B.layers=[],S.mimeType!==void 0&&(B.mimeType=S.mimeType),S.mid!==void 0&&(B.mid=S.mid),S.codecs?B.codecs=S.codecs.map(K=>K?t.SimulcastCodecInfo.toJSON(K):void 0):B.codecs=[],S.stereo!==void 0&&(B.stereo=S.stereo),S.disableRed!==void 0&&(B.disableRed=S.disableRed),B},fromPartial(S){var B,K,me,ae,_e,Oe,Pe,Ue,De,Ae,Re,We,Le,Be,He;const Me=se();return Me.sid=(B=S.sid)!==null&&B!==void 0?B:"",Me.type=(K=S.type)!==null&&K!==void 0?K:0,Me.name=(me=S.name)!==null&&me!==void 0?me:"",Me.muted=(ae=S.muted)!==null&&ae!==void 0?ae:!1,Me.width=(_e=S.width)!==null&&_e!==void 0?_e:0,Me.height=(Oe=S.height)!==null&&Oe!==void 0?Oe:0,Me.simulcast=(Pe=S.simulcast)!==null&&Pe!==void 0?Pe:!1,Me.disableDtx=(Ue=S.disableDtx)!==null&&Ue!==void 0?Ue:!1,Me.source=(De=S.source)!==null&&De!==void 0?De:0,Me.layers=((Ae=S.layers)===null||Ae===void 0?void 0:Ae.map(qe=>t.VideoLayer.fromPartial(qe)))||[],Me.mimeType=(Re=S.mimeType)!==null&&Re!==void 0?Re:"",Me.mid=(We=S.mid)!==null&&We!==void 0?We:"",Me.codecs=((Le=S.codecs)===null||Le===void 0?void 0:Le.map(qe=>t.SimulcastCodecInfo.fromPartial(qe)))||[],Me.stereo=(Be=S.stereo)!==null&&Be!==void 0?Be:!1,Me.disableRed=(He=S.disableRed)!==null&&He!==void 0?He:!1,Me}};function pe(){return{quality:0,width:0,height:0,bitrate:0,ssrc:0}}t.VideoLayer={encode(S,B=d.default.Writer.create()){return S.quality!==0&&B.uint32(8).int32(S.quality),S.width!==0&&B.uint32(16).uint32(S.width),S.height!==0&&B.uint32(24).uint32(S.height),S.bitrate!==0&&B.uint32(32).uint32(S.bitrate),S.ssrc!==0&&B.uint32(40).uint32(S.ssrc),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=pe();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.quality=K.int32();break;case 2:ae.width=K.uint32();break;case 3:ae.height=K.uint32();break;case 4:ae.bitrate=K.uint32();break;case 5:ae.ssrc=K.uint32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{quality:j(S.quality)?v(S.quality):0,width:j(S.width)?Number(S.width):0,height:j(S.height)?Number(S.height):0,bitrate:j(S.bitrate)?Number(S.bitrate):0,ssrc:j(S.ssrc)?Number(S.ssrc):0}},toJSON(S){const B={};return S.quality!==void 0&&(B.quality=E(S.quality)),S.width!==void 0&&(B.width=Math.round(S.width)),S.height!==void 0&&(B.height=Math.round(S.height)),S.bitrate!==void 0&&(B.bitrate=Math.round(S.bitrate)),S.ssrc!==void 0&&(B.ssrc=Math.round(S.ssrc)),B},fromPartial(S){var B,K,me,ae,_e;const Oe=pe();return Oe.quality=(B=S.quality)!==null&&B!==void 0?B:0,Oe.width=(K=S.width)!==null&&K!==void 0?K:0,Oe.height=(me=S.height)!==null&&me!==void 0?me:0,Oe.bitrate=(ae=S.bitrate)!==null&&ae!==void 0?ae:0,Oe.ssrc=(_e=S.ssrc)!==null&&_e!==void 0?_e:0,Oe}};function be(){return{kind:0,user:void 0,speaker:void 0}}t.DataPacket={encode(S,B=d.default.Writer.create()){return S.kind!==0&&B.uint32(8).int32(S.kind),S.user!==void 0&&t.UserPacket.encode(S.user,B.uint32(18).fork()).ldelim(),S.speaker!==void 0&&t.ActiveSpeakerUpdate.encode(S.speaker,B.uint32(26).fork()).ldelim(),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=be();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.kind=K.int32();break;case 2:ae.user=t.UserPacket.decode(K,K.uint32());break;case 3:ae.speaker=t.ActiveSpeakerUpdate.decode(K,K.uint32());break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{kind:j(S.kind)?b(S.kind):0,user:j(S.user)?t.UserPacket.fromJSON(S.user):void 0,speaker:j(S.speaker)?t.ActiveSpeakerUpdate.fromJSON(S.speaker):void 0}},toJSON(S){const B={};return S.kind!==void 0&&(B.kind=_(S.kind)),S.user!==void 0&&(B.user=S.user?t.UserPacket.toJSON(S.user):void 0),S.speaker!==void 0&&(B.speaker=S.speaker?t.ActiveSpeakerUpdate.toJSON(S.speaker):void 0),B},fromPartial(S){var B;const K=be();return K.kind=(B=S.kind)!==null&&B!==void 0?B:0,K.user=S.user!==void 0&&S.user!==null?t.UserPacket.fromPartial(S.user):void 0,K.speaker=S.speaker!==void 0&&S.speaker!==null?t.ActiveSpeakerUpdate.fromPartial(S.speaker):void 0,K}};function Ee(){return{speakers:[]}}t.ActiveSpeakerUpdate={encode(S,B=d.default.Writer.create()){for(const K of S.speakers)t.SpeakerInfo.encode(K,B.uint32(10).fork()).ldelim();return B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=Ee();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.speakers.push(t.SpeakerInfo.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{speakers:Array.isArray(S==null?void 0:S.speakers)?S.speakers.map(B=>t.SpeakerInfo.fromJSON(B)):[]}},toJSON(S){const B={};return S.speakers?B.speakers=S.speakers.map(K=>K?t.SpeakerInfo.toJSON(K):void 0):B.speakers=[],B},fromPartial(S){var B;const K=Ee();return K.speakers=((B=S.speakers)===null||B===void 0?void 0:B.map(me=>t.SpeakerInfo.fromPartial(me)))||[],K}};function oe(){return{sid:"",level:0,active:!1}}t.SpeakerInfo={encode(S,B=d.default.Writer.create()){return S.sid!==""&&B.uint32(10).string(S.sid),S.level!==0&&B.uint32(21).float(S.level),S.active===!0&&B.uint32(24).bool(S.active),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=oe();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.level=K.float();break;case 3:ae.active=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{sid:j(S.sid)?String(S.sid):"",level:j(S.level)?Number(S.level):0,active:j(S.active)?!!S.active:!1}},toJSON(S){const B={};return S.sid!==void 0&&(B.sid=S.sid),S.level!==void 0&&(B.level=S.level),S.active!==void 0&&(B.active=S.active),B},fromPartial(S){var B,K,me;const ae=oe();return ae.sid=(B=S.sid)!==null&&B!==void 0?B:"",ae.level=(K=S.level)!==null&&K!==void 0?K:0,ae.active=(me=S.active)!==null&&me!==void 0?me:!1,ae}};function ce(){return{participantSid:"",payload:new Uint8Array,destinationSids:[]}}t.UserPacket={encode(S,B=d.default.Writer.create()){S.participantSid!==""&&B.uint32(10).string(S.participantSid),S.payload.length!==0&&B.uint32(18).bytes(S.payload);for(const K of S.destinationSids)B.uint32(26).string(K);return B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=ce();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.participantSid=K.string();break;case 2:ae.payload=K.bytes();break;case 3:ae.destinationSids.push(K.string());break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{participantSid:j(S.participantSid)?String(S.participantSid):"",payload:j(S.payload)?ve(S.payload):new Uint8Array,destinationSids:Array.isArray(S==null?void 0:S.destinationSids)?S.destinationSids.map(B=>String(B)):[]}},toJSON(S){const B={};return S.participantSid!==void 0&&(B.participantSid=S.participantSid),S.payload!==void 0&&(B.payload=Se(S.payload!==void 0?S.payload:new Uint8Array)),S.destinationSids?B.destinationSids=S.destinationSids.map(K=>K):B.destinationSids=[],B},fromPartial(S){var B,K,me;const ae=ce();return ae.participantSid=(B=S.participantSid)!==null&&B!==void 0?B:"",ae.payload=(K=S.payload)!==null&&K!==void 0?K:new Uint8Array,ae.destinationSids=((me=S.destinationSids)===null||me===void 0?void 0:me.map(_e=>_e))||[],ae}};function ge(){return{participantSid:"",trackSids:[]}}t.ParticipantTracks={encode(S,B=d.default.Writer.create()){S.participantSid!==""&&B.uint32(10).string(S.participantSid);for(const K of S.trackSids)B.uint32(18).string(K);return B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=ge();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.participantSid=K.string();break;case 2:ae.trackSids.push(K.string());break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{participantSid:j(S.participantSid)?String(S.participantSid):"",trackSids:Array.isArray(S==null?void 0:S.trackSids)?S.trackSids.map(B=>String(B)):[]}},toJSON(S){const B={};return S.participantSid!==void 0&&(B.participantSid=S.participantSid),S.trackSids?B.trackSids=S.trackSids.map(K=>K):B.trackSids=[],B},fromPartial(S){var B,K;const me=ge();return me.participantSid=(B=S.participantSid)!==null&&B!==void 0?B:"",me.trackSids=((K=S.trackSids)===null||K===void 0?void 0:K.map(ae=>ae))||[],me}};function ke(){return{edition:0,version:"",protocol:0,region:"",nodeId:"",debugInfo:""}}t.ServerInfo={encode(S,B=d.default.Writer.create()){return S.edition!==0&&B.uint32(8).int32(S.edition),S.version!==""&&B.uint32(18).string(S.version),S.protocol!==0&&B.uint32(24).int32(S.protocol),S.region!==""&&B.uint32(34).string(S.region),S.nodeId!==""&&B.uint32(42).string(S.nodeId),S.debugInfo!==""&&B.uint32(50).string(S.debugInfo),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=ke();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.edition=K.int32();break;case 2:ae.version=K.string();break;case 3:ae.protocol=K.int32();break;case 4:ae.region=K.string();break;case 5:ae.nodeId=K.string();break;case 6:ae.debugInfo=K.string();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{edition:j(S.edition)?w(S.edition):0,version:j(S.version)?String(S.version):"",protocol:j(S.protocol)?Number(S.protocol):0,region:j(S.region)?String(S.region):"",nodeId:j(S.nodeId)?String(S.nodeId):"",debugInfo:j(S.debugInfo)?String(S.debugInfo):""}},toJSON(S){const B={};return S.edition!==void 0&&(B.edition=T(S.edition)),S.version!==void 0&&(B.version=S.version),S.protocol!==void 0&&(B.protocol=Math.round(S.protocol)),S.region!==void 0&&(B.region=S.region),S.nodeId!==void 0&&(B.nodeId=S.nodeId),S.debugInfo!==void 0&&(B.debugInfo=S.debugInfo),B},fromPartial(S){var B,K,me,ae,_e,Oe;const Pe=ke();return Pe.edition=(B=S.edition)!==null&&B!==void 0?B:0,Pe.version=(K=S.version)!==null&&K!==void 0?K:"",Pe.protocol=(me=S.protocol)!==null&&me!==void 0?me:0,Pe.region=(ae=S.region)!==null&&ae!==void 0?ae:"",Pe.nodeId=(_e=S.nodeId)!==null&&_e!==void 0?_e:"",Pe.debugInfo=(Oe=S.debugInfo)!==null&&Oe!==void 0?Oe:"",Pe}};function fe(){return{sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:"",network:""}}t.ClientInfo={encode(S,B=d.default.Writer.create()){return S.sdk!==0&&B.uint32(8).int32(S.sdk),S.version!==""&&B.uint32(18).string(S.version),S.protocol!==0&&B.uint32(24).int32(S.protocol),S.os!==""&&B.uint32(34).string(S.os),S.osVersion!==""&&B.uint32(42).string(S.osVersion),S.deviceModel!==""&&B.uint32(50).string(S.deviceModel),S.browser!==""&&B.uint32(58).string(S.browser),S.browserVersion!==""&&B.uint32(66).string(S.browserVersion),S.address!==""&&B.uint32(74).string(S.address),S.network!==""&&B.uint32(82).string(S.network),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=fe();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sdk=K.int32();break;case 2:ae.version=K.string();break;case 3:ae.protocol=K.int32();break;case 4:ae.os=K.string();break;case 5:ae.osVersion=K.string();break;case 6:ae.deviceModel=K.string();break;case 7:ae.browser=K.string();break;case 8:ae.browserVersion=K.string();break;case 9:ae.address=K.string();break;case 10:ae.network=K.string();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{sdk:j(S.sdk)?J(S.sdk):0,version:j(S.version)?String(S.version):"",protocol:j(S.protocol)?Number(S.protocol):0,os:j(S.os)?String(S.os):"",osVersion:j(S.osVersion)?String(S.osVersion):"",deviceModel:j(S.deviceModel)?String(S.deviceModel):"",browser:j(S.browser)?String(S.browser):"",browserVersion:j(S.browserVersion)?String(S.browserVersion):"",address:j(S.address)?String(S.address):"",network:j(S.network)?String(S.network):""}},toJSON(S){const B={};return S.sdk!==void 0&&(B.sdk=G(S.sdk)),S.version!==void 0&&(B.version=S.version),S.protocol!==void 0&&(B.protocol=Math.round(S.protocol)),S.os!==void 0&&(B.os=S.os),S.osVersion!==void 0&&(B.osVersion=S.osVersion),S.deviceModel!==void 0&&(B.deviceModel=S.deviceModel),S.browser!==void 0&&(B.browser=S.browser),S.browserVersion!==void 0&&(B.browserVersion=S.browserVersion),S.address!==void 0&&(B.address=S.address),S.network!==void 0&&(B.network=S.network),B},fromPartial(S){var B,K,me,ae,_e,Oe,Pe,Ue,De,Ae;const Re=fe();return Re.sdk=(B=S.sdk)!==null&&B!==void 0?B:0,Re.version=(K=S.version)!==null&&K!==void 0?K:"",Re.protocol=(me=S.protocol)!==null&&me!==void 0?me:0,Re.os=(ae=S.os)!==null&&ae!==void 0?ae:"",Re.osVersion=(_e=S.osVersion)!==null&&_e!==void 0?_e:"",Re.deviceModel=(Oe=S.deviceModel)!==null&&Oe!==void 0?Oe:"",Re.browser=(Pe=S.browser)!==null&&Pe!==void 0?Pe:"",Re.browserVersion=(Ue=S.browserVersion)!==null&&Ue!==void 0?Ue:"",Re.address=(De=S.address)!==null&&De!==void 0?De:"",Re.network=(Ae=S.network)!==null&&Ae!==void 0?Ae:"",Re}};function ee(){return{video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0,forceRelay:0}}t.ClientConfiguration={encode(S,B=d.default.Writer.create()){return S.video!==void 0&&t.VideoConfiguration.encode(S.video,B.uint32(10).fork()).ldelim(),S.screen!==void 0&&t.VideoConfiguration.encode(S.screen,B.uint32(18).fork()).ldelim(),S.resumeConnection!==0&&B.uint32(24).int32(S.resumeConnection),S.disabledCodecs!==void 0&&t.DisabledCodecs.encode(S.disabledCodecs,B.uint32(34).fork()).ldelim(),S.forceRelay!==0&&B.uint32(40).int32(S.forceRelay),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=ee();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.video=t.VideoConfiguration.decode(K,K.uint32());break;case 2:ae.screen=t.VideoConfiguration.decode(K,K.uint32());break;case 3:ae.resumeConnection=K.int32();break;case 4:ae.disabledCodecs=t.DisabledCodecs.decode(K,K.uint32());break;case 5:ae.forceRelay=K.int32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{video:j(S.video)?t.VideoConfiguration.fromJSON(S.video):void 0,screen:j(S.screen)?t.VideoConfiguration.fromJSON(S.screen):void 0,resumeConnection:j(S.resumeConnection)?M(S.resumeConnection):0,disabledCodecs:j(S.disabledCodecs)?t.DisabledCodecs.fromJSON(S.disabledCodecs):void 0,forceRelay:j(S.forceRelay)?M(S.forceRelay):0}},toJSON(S){const B={};return S.video!==void 0&&(B.video=S.video?t.VideoConfiguration.toJSON(S.video):void 0),S.screen!==void 0&&(B.screen=S.screen?t.VideoConfiguration.toJSON(S.screen):void 0),S.resumeConnection!==void 0&&(B.resumeConnection=L(S.resumeConnection)),S.disabledCodecs!==void 0&&(B.disabledCodecs=S.disabledCodecs?t.DisabledCodecs.toJSON(S.disabledCodecs):void 0),S.forceRelay!==void 0&&(B.forceRelay=L(S.forceRelay)),B},fromPartial(S){var B,K;const me=ee();return me.video=S.video!==void 0&&S.video!==null?t.VideoConfiguration.fromPartial(S.video):void 0,me.screen=S.screen!==void 0&&S.screen!==null?t.VideoConfiguration.fromPartial(S.screen):void 0,me.resumeConnection=(B=S.resumeConnection)!==null&&B!==void 0?B:0,me.disabledCodecs=S.disabledCodecs!==void 0&&S.disabledCodecs!==null?t.DisabledCodecs.fromPartial(S.disabledCodecs):void 0,me.forceRelay=(K=S.forceRelay)!==null&&K!==void 0?K:0,me}};function te(){return{hardwareEncoder:0}}t.VideoConfiguration={encode(S,B=d.default.Writer.create()){return S.hardwareEncoder!==0&&B.uint32(8).int32(S.hardwareEncoder),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=te();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.hardwareEncoder=K.int32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{hardwareEncoder:j(S.hardwareEncoder)?M(S.hardwareEncoder):0}},toJSON(S){const B={};return S.hardwareEncoder!==void 0&&(B.hardwareEncoder=L(S.hardwareEncoder)),B},fromPartial(S){var B;const K=te();return K.hardwareEncoder=(B=S.hardwareEncoder)!==null&&B!==void 0?B:0,K}};function Q(){return{codecs:[]}}t.DisabledCodecs={encode(S,B=d.default.Writer.create()){for(const K of S.codecs)t.Codec.encode(K,B.uint32(10).fork()).ldelim();return B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=Q();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.codecs.push(t.Codec.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{codecs:Array.isArray(S==null?void 0:S.codecs)?S.codecs.map(B=>t.Codec.fromJSON(B)):[]}},toJSON(S){const B={};return S.codecs?B.codecs=S.codecs.map(K=>K?t.Codec.toJSON(K):void 0):B.codecs=[],B},fromPartial(S){var B;const K=Q();return K.codecs=((B=S.codecs)===null||B===void 0?void 0:B.map(me=>t.Codec.fromPartial(me)))||[],K}};function U(){return{startTime:void 0,endTime:void 0,duration:0,packets:0,packetRate:0,bytes:0,headerBytes:0,bitrate:0,packetsLost:0,packetLossRate:0,packetLossPercentage:0,packetsDuplicate:0,packetDuplicateRate:0,bytesDuplicate:0,headerBytesDuplicate:0,bitrateDuplicate:0,packetsPadding:0,packetPaddingRate:0,bytesPadding:0,headerBytesPadding:0,bitratePadding:0,packetsOutOfOrder:0,frames:0,frameRate:0,jitterCurrent:0,jitterMax:0,gapHistogram:{},nacks:0,nackAcks:0,nackMisses:0,nackRepeated:0,plis:0,lastPli:void 0,firs:0,lastFir:void 0,rttCurrent:0,rttMax:0,keyFrames:0,lastKeyFrame:void 0,layerLockPlis:0,lastLayerLockPli:void 0}}t.RTPStats={encode(S,B=d.default.Writer.create()){return S.startTime!==void 0&&s.Timestamp.encode(he(S.startTime),B.uint32(10).fork()).ldelim(),S.endTime!==void 0&&s.Timestamp.encode(he(S.endTime),B.uint32(18).fork()).ldelim(),S.duration!==0&&B.uint32(25).double(S.duration),S.packets!==0&&B.uint32(32).uint32(S.packets),S.packetRate!==0&&B.uint32(41).double(S.packetRate),S.bytes!==0&&B.uint32(48).uint64(S.bytes),S.headerBytes!==0&&B.uint32(312).uint64(S.headerBytes),S.bitrate!==0&&B.uint32(57).double(S.bitrate),S.packetsLost!==0&&B.uint32(64).uint32(S.packetsLost),S.packetLossRate!==0&&B.uint32(73).double(S.packetLossRate),S.packetLossPercentage!==0&&B.uint32(85).float(S.packetLossPercentage),S.packetsDuplicate!==0&&B.uint32(88).uint32(S.packetsDuplicate),S.packetDuplicateRate!==0&&B.uint32(97).double(S.packetDuplicateRate),S.bytesDuplicate!==0&&B.uint32(104).uint64(S.bytesDuplicate),S.headerBytesDuplicate!==0&&B.uint32(320).uint64(S.headerBytesDuplicate),S.bitrateDuplicate!==0&&B.uint32(113).double(S.bitrateDuplicate),S.packetsPadding!==0&&B.uint32(120).uint32(S.packetsPadding),S.packetPaddingRate!==0&&B.uint32(129).double(S.packetPaddingRate),S.bytesPadding!==0&&B.uint32(136).uint64(S.bytesPadding),S.headerBytesPadding!==0&&B.uint32(328).uint64(S.headerBytesPadding),S.bitratePadding!==0&&B.uint32(145).double(S.bitratePadding),S.packetsOutOfOrder!==0&&B.uint32(152).uint32(S.packetsOutOfOrder),S.frames!==0&&B.uint32(160).uint32(S.frames),S.frameRate!==0&&B.uint32(169).double(S.frameRate),S.jitterCurrent!==0&&B.uint32(177).double(S.jitterCurrent),S.jitterMax!==0&&B.uint32(185).double(S.jitterMax),Object.entries(S.gapHistogram).forEach(([K,me])=>{t.RTPStats_GapHistogramEntry.encode({key:K,value:me},B.uint32(194).fork()).ldelim()}),S.nacks!==0&&B.uint32(200).uint32(S.nacks),S.nackAcks!==0&&B.uint32(296).uint32(S.nackAcks),S.nackMisses!==0&&B.uint32(208).uint32(S.nackMisses),S.nackRepeated!==0&&B.uint32(304).uint32(S.nackRepeated),S.plis!==0&&B.uint32(216).uint32(S.plis),S.lastPli!==void 0&&s.Timestamp.encode(he(S.lastPli),B.uint32(226).fork()).ldelim(),S.firs!==0&&B.uint32(232).uint32(S.firs),S.lastFir!==void 0&&s.Timestamp.encode(he(S.lastFir),B.uint32(242).fork()).ldelim(),S.rttCurrent!==0&&B.uint32(248).uint32(S.rttCurrent),S.rttMax!==0&&B.uint32(256).uint32(S.rttMax),S.keyFrames!==0&&B.uint32(264).uint32(S.keyFrames),S.lastKeyFrame!==void 0&&s.Timestamp.encode(he(S.lastKeyFrame),B.uint32(274).fork()).ldelim(),S.layerLockPlis!==0&&B.uint32(280).uint32(S.layerLockPlis),S.lastLayerLockPli!==void 0&&s.Timestamp.encode(he(S.lastLayerLockPli),B.uint32(290).fork()).ldelim(),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=U();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.startTime=y(s.Timestamp.decode(K,K.uint32()));break;case 2:ae.endTime=y(s.Timestamp.decode(K,K.uint32()));break;case 3:ae.duration=K.double();break;case 4:ae.packets=K.uint32();break;case 5:ae.packetRate=K.double();break;case 6:ae.bytes=q(K.uint64());break;case 39:ae.headerBytes=q(K.uint64());break;case 7:ae.bitrate=K.double();break;case 8:ae.packetsLost=K.uint32();break;case 9:ae.packetLossRate=K.double();break;case 10:ae.packetLossPercentage=K.float();break;case 11:ae.packetsDuplicate=K.uint32();break;case 12:ae.packetDuplicateRate=K.double();break;case 13:ae.bytesDuplicate=q(K.uint64());break;case 40:ae.headerBytesDuplicate=q(K.uint64());break;case 14:ae.bitrateDuplicate=K.double();break;case 15:ae.packetsPadding=K.uint32();break;case 16:ae.packetPaddingRate=K.double();break;case 17:ae.bytesPadding=q(K.uint64());break;case 41:ae.headerBytesPadding=q(K.uint64());break;case 18:ae.bitratePadding=K.double();break;case 19:ae.packetsOutOfOrder=K.uint32();break;case 20:ae.frames=K.uint32();break;case 21:ae.frameRate=K.double();break;case 22:ae.jitterCurrent=K.double();break;case 23:ae.jitterMax=K.double();break;case 24:const Oe=t.RTPStats_GapHistogramEntry.decode(K,K.uint32());Oe.value!==void 0&&(ae.gapHistogram[Oe.key]=Oe.value);break;case 25:ae.nacks=K.uint32();break;case 37:ae.nackAcks=K.uint32();break;case 26:ae.nackMisses=K.uint32();break;case 38:ae.nackRepeated=K.uint32();break;case 27:ae.plis=K.uint32();break;case 28:ae.lastPli=y(s.Timestamp.decode(K,K.uint32()));break;case 29:ae.firs=K.uint32();break;case 30:ae.lastFir=y(s.Timestamp.decode(K,K.uint32()));break;case 31:ae.rttCurrent=K.uint32();break;case 32:ae.rttMax=K.uint32();break;case 33:ae.keyFrames=K.uint32();break;case 34:ae.lastKeyFrame=y(s.Timestamp.decode(K,K.uint32()));break;case 35:ae.layerLockPlis=K.uint32();break;case 36:ae.lastLayerLockPli=y(s.Timestamp.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{startTime:j(S.startTime)?F(S.startTime):void 0,endTime:j(S.endTime)?F(S.endTime):void 0,duration:j(S.duration)?Number(S.duration):0,packets:j(S.packets)?Number(S.packets):0,packetRate:j(S.packetRate)?Number(S.packetRate):0,bytes:j(S.bytes)?Number(S.bytes):0,headerBytes:j(S.headerBytes)?Number(S.headerBytes):0,bitrate:j(S.bitrate)?Number(S.bitrate):0,packetsLost:j(S.packetsLost)?Number(S.packetsLost):0,packetLossRate:j(S.packetLossRate)?Number(S.packetLossRate):0,packetLossPercentage:j(S.packetLossPercentage)?Number(S.packetLossPercentage):0,packetsDuplicate:j(S.packetsDuplicate)?Number(S.packetsDuplicate):0,packetDuplicateRate:j(S.packetDuplicateRate)?Number(S.packetDuplicateRate):0,bytesDuplicate:j(S.bytesDuplicate)?Number(S.bytesDuplicate):0,headerBytesDuplicate:j(S.headerBytesDuplicate)?Number(S.headerBytesDuplicate):0,bitrateDuplicate:j(S.bitrateDuplicate)?Number(S.bitrateDuplicate):0,packetsPadding:j(S.packetsPadding)?Number(S.packetsPadding):0,packetPaddingRate:j(S.packetPaddingRate)?Number(S.packetPaddingRate):0,bytesPadding:j(S.bytesPadding)?Number(S.bytesPadding):0,headerBytesPadding:j(S.headerBytesPadding)?Number(S.headerBytesPadding):0,bitratePadding:j(S.bitratePadding)?Number(S.bitratePadding):0,packetsOutOfOrder:j(S.packetsOutOfOrder)?Number(S.packetsOutOfOrder):0,frames:j(S.frames)?Number(S.frames):0,frameRate:j(S.frameRate)?Number(S.frameRate):0,jitterCurrent:j(S.jitterCurrent)?Number(S.jitterCurrent):0,jitterMax:j(S.jitterMax)?Number(S.jitterMax):0,gapHistogram:ue(S.gapHistogram)?Object.entries(S.gapHistogram).reduce((B,[K,me])=>(B[Number(K)]=Number(me),B),{}):{},nacks:j(S.nacks)?Number(S.nacks):0,nackAcks:j(S.nackAcks)?Number(S.nackAcks):0,nackMisses:j(S.nackMisses)?Number(S.nackMisses):0,nackRepeated:j(S.nackRepeated)?Number(S.nackRepeated):0,plis:j(S.plis)?Number(S.plis):0,lastPli:j(S.lastPli)?F(S.lastPli):void 0,firs:j(S.firs)?Number(S.firs):0,lastFir:j(S.lastFir)?F(S.lastFir):void 0,rttCurrent:j(S.rttCurrent)?Number(S.rttCurrent):0,rttMax:j(S.rttMax)?Number(S.rttMax):0,keyFrames:j(S.keyFrames)?Number(S.keyFrames):0,lastKeyFrame:j(S.lastKeyFrame)?F(S.lastKeyFrame):void 0,layerLockPlis:j(S.layerLockPlis)?Number(S.layerLockPlis):0,lastLayerLockPli:j(S.lastLayerLockPli)?F(S.lastLayerLockPli):void 0}},toJSON(S){const B={};return S.startTime!==void 0&&(B.startTime=S.startTime.toISOString()),S.endTime!==void 0&&(B.endTime=S.endTime.toISOString()),S.duration!==void 0&&(B.duration=S.duration),S.packets!==void 0&&(B.packets=Math.round(S.packets)),S.packetRate!==void 0&&(B.packetRate=S.packetRate),S.bytes!==void 0&&(B.bytes=Math.round(S.bytes)),S.headerBytes!==void 0&&(B.headerBytes=Math.round(S.headerBytes)),S.bitrate!==void 0&&(B.bitrate=S.bitrate),S.packetsLost!==void 0&&(B.packetsLost=Math.round(S.packetsLost)),S.packetLossRate!==void 0&&(B.packetLossRate=S.packetLossRate),S.packetLossPercentage!==void 0&&(B.packetLossPercentage=S.packetLossPercentage),S.packetsDuplicate!==void 0&&(B.packetsDuplicate=Math.round(S.packetsDuplicate)),S.packetDuplicateRate!==void 0&&(B.packetDuplicateRate=S.packetDuplicateRate),S.bytesDuplicate!==void 0&&(B.bytesDuplicate=Math.round(S.bytesDuplicate)),S.headerBytesDuplicate!==void 0&&(B.headerBytesDuplicate=Math.round(S.headerBytesDuplicate)),S.bitrateDuplicate!==void 0&&(B.bitrateDuplicate=S.bitrateDuplicate),S.packetsPadding!==void 0&&(B.packetsPadding=Math.round(S.packetsPadding)),S.packetPaddingRate!==void 0&&(B.packetPaddingRate=S.packetPaddingRate),S.bytesPadding!==void 0&&(B.bytesPadding=Math.round(S.bytesPadding)),S.headerBytesPadding!==void 0&&(B.headerBytesPadding=Math.round(S.headerBytesPadding)),S.bitratePadding!==void 0&&(B.bitratePadding=S.bitratePadding),S.packetsOutOfOrder!==void 0&&(B.packetsOutOfOrder=Math.round(S.packetsOutOfOrder)),S.frames!==void 0&&(B.frames=Math.round(S.frames)),S.frameRate!==void 0&&(B.frameRate=S.frameRate),S.jitterCurrent!==void 0&&(B.jitterCurrent=S.jitterCurrent),S.jitterMax!==void 0&&(B.jitterMax=S.jitterMax),B.gapHistogram={},S.gapHistogram&&Object.entries(S.gapHistogram).forEach(([K,me])=>{B.gapHistogram[K]=Math.round(me)}),S.nacks!==void 0&&(B.nacks=Math.round(S.nacks)),S.nackAcks!==void 0&&(B.nackAcks=Math.round(S.nackAcks)),S.nackMisses!==void 0&&(B.nackMisses=Math.round(S.nackMisses)),S.nackRepeated!==void 0&&(B.nackRepeated=Math.round(S.nackRepeated)),S.plis!==void 0&&(B.plis=Math.round(S.plis)),S.lastPli!==void 0&&(B.lastPli=S.lastPli.toISOString()),S.firs!==void 0&&(B.firs=Math.round(S.firs)),S.lastFir!==void 0&&(B.lastFir=S.lastFir.toISOString()),S.rttCurrent!==void 0&&(B.rttCurrent=Math.round(S.rttCurrent)),S.rttMax!==void 0&&(B.rttMax=Math.round(S.rttMax)),S.keyFrames!==void 0&&(B.keyFrames=Math.round(S.keyFrames)),S.lastKeyFrame!==void 0&&(B.lastKeyFrame=S.lastKeyFrame.toISOString()),S.layerLockPlis!==void 0&&(B.layerLockPlis=Math.round(S.layerLockPlis)),S.lastLayerLockPli!==void 0&&(B.lastLayerLockPli=S.lastLayerLockPli.toISOString()),B},fromPartial(S){var B,K,me,ae,_e,Oe,Pe,Ue,De,Ae,Re,We,Le,Be,He,Me,qe,Qe,Fe,Ye,Xe,Je,je,ze,Ve,et,tt,Ge,rt,it,xe,nt,Ke,Ze,ne,le,ye,we,Te,Ne,Ie;const Ce=U();return Ce.startTime=(B=S.startTime)!==null&&B!==void 0?B:void 0,Ce.endTime=(K=S.endTime)!==null&&K!==void 0?K:void 0,Ce.duration=(me=S.duration)!==null&&me!==void 0?me:0,Ce.packets=(ae=S.packets)!==null&&ae!==void 0?ae:0,Ce.packetRate=(_e=S.packetRate)!==null&&_e!==void 0?_e:0,Ce.bytes=(Oe=S.bytes)!==null&&Oe!==void 0?Oe:0,Ce.headerBytes=(Pe=S.headerBytes)!==null&&Pe!==void 0?Pe:0,Ce.bitrate=(Ue=S.bitrate)!==null&&Ue!==void 0?Ue:0,Ce.packetsLost=(De=S.packetsLost)!==null&&De!==void 0?De:0,Ce.packetLossRate=(Ae=S.packetLossRate)!==null&&Ae!==void 0?Ae:0,Ce.packetLossPercentage=(Re=S.packetLossPercentage)!==null&&Re!==void 0?Re:0,Ce.packetsDuplicate=(We=S.packetsDuplicate)!==null&&We!==void 0?We:0,Ce.packetDuplicateRate=(Le=S.packetDuplicateRate)!==null&&Le!==void 0?Le:0,Ce.bytesDuplicate=(Be=S.bytesDuplicate)!==null&&Be!==void 0?Be:0,Ce.headerBytesDuplicate=(He=S.headerBytesDuplicate)!==null&&He!==void 0?He:0,Ce.bitrateDuplicate=(Me=S.bitrateDuplicate)!==null&&Me!==void 0?Me:0,Ce.packetsPadding=(qe=S.packetsPadding)!==null&&qe!==void 0?qe:0,Ce.packetPaddingRate=(Qe=S.packetPaddingRate)!==null&&Qe!==void 0?Qe:0,Ce.bytesPadding=(Fe=S.bytesPadding)!==null&&Fe!==void 0?Fe:0,Ce.headerBytesPadding=(Ye=S.headerBytesPadding)!==null&&Ye!==void 0?Ye:0,Ce.bitratePadding=(Xe=S.bitratePadding)!==null&&Xe!==void 0?Xe:0,Ce.packetsOutOfOrder=(Je=S.packetsOutOfOrder)!==null&&Je!==void 0?Je:0,Ce.frames=(je=S.frames)!==null&&je!==void 0?je:0,Ce.frameRate=(ze=S.frameRate)!==null&&ze!==void 0?ze:0,Ce.jitterCurrent=(Ve=S.jitterCurrent)!==null&&Ve!==void 0?Ve:0,Ce.jitterMax=(et=S.jitterMax)!==null&&et!==void 0?et:0,Ce.gapHistogram=Object.entries((tt=S.gapHistogram)!==null&&tt!==void 0?tt:{}).reduce(($e,[st,at])=>(at!==void 0&&($e[Number(st)]=Number(at)),$e),{}),Ce.nacks=(Ge=S.nacks)!==null&&Ge!==void 0?Ge:0,Ce.nackAcks=(rt=S.nackAcks)!==null&&rt!==void 0?rt:0,Ce.nackMisses=(it=S.nackMisses)!==null&&it!==void 0?it:0,Ce.nackRepeated=(xe=S.nackRepeated)!==null&&xe!==void 0?xe:0,Ce.plis=(nt=S.plis)!==null&&nt!==void 0?nt:0,Ce.lastPli=(Ke=S.lastPli)!==null&&Ke!==void 0?Ke:void 0,Ce.firs=(Ze=S.firs)!==null&&Ze!==void 0?Ze:0,Ce.lastFir=(ne=S.lastFir)!==null&&ne!==void 0?ne:void 0,Ce.rttCurrent=(le=S.rttCurrent)!==null&&le!==void 0?le:0,Ce.rttMax=(ye=S.rttMax)!==null&&ye!==void 0?ye:0,Ce.keyFrames=(we=S.keyFrames)!==null&&we!==void 0?we:0,Ce.lastKeyFrame=(Te=S.lastKeyFrame)!==null&&Te!==void 0?Te:void 0,Ce.layerLockPlis=(Ne=S.layerLockPlis)!==null&&Ne!==void 0?Ne:0,Ce.lastLayerLockPli=(Ie=S.lastLayerLockPli)!==null&&Ie!==void 0?Ie:void 0,Ce}};function W(){return{key:0,value:0}}t.RTPStats_GapHistogramEntry={encode(S,B=d.default.Writer.create()){return S.key!==0&&B.uint32(8).int32(S.key),S.value!==0&&B.uint32(16).uint32(S.value),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=W();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.key=K.int32();break;case 2:ae.value=K.uint32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{key:j(S.key)?Number(S.key):0,value:j(S.value)?Number(S.value):0}},toJSON(S){const B={};return S.key!==void 0&&(B.key=Math.round(S.key)),S.value!==void 0&&(B.value=Math.round(S.value)),B},fromPartial(S){var B,K;const me=W();return me.key=(B=S.key)!==null&&B!==void 0?B:0,me.value=(K=S.value)!==null&&K!==void 0?K:0,me}};function X(){return{unixMicro:0,ticks:0}}t.TimedVersion={encode(S,B=d.default.Writer.create()){return S.unixMicro!==0&&B.uint32(8).int64(S.unixMicro),S.ticks!==0&&B.uint32(16).int32(S.ticks),B},decode(S,B){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let me=B===void 0?K.len:K.pos+B;const ae=X();for(;K.pos<me;){const _e=K.uint32();switch(_e>>>3){case 1:ae.unixMicro=q(K.int64());break;case 2:ae.ticks=K.int32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{unixMicro:j(S.unixMicro)?Number(S.unixMicro):0,ticks:j(S.ticks)?Number(S.ticks):0}},toJSON(S){const B={};return S.unixMicro!==void 0&&(B.unixMicro=Math.round(S.unixMicro)),S.ticks!==void 0&&(B.ticks=Math.round(S.ticks)),B},fromPartial(S){var B,K;const me=X();return me.unixMicro=(B=S.unixMicro)!==null&&B!==void 0?B:0,me.ticks=(K=S.ticks)!==null&&K!==void 0?K:0,me}};var de=(()=>{if(typeof de<"u")return de;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function ve(S){if(de.Buffer)return Uint8Array.from(de.Buffer.from(S,"base64"));{const B=de.atob(S),K=new Uint8Array(B.length);for(let me=0;me<B.length;++me)K[me]=B.charCodeAt(me);return K}}function Se(S){if(de.Buffer)return de.Buffer.from(S).toString("base64");{const B=[];return S.forEach(K=>{B.push(String.fromCharCode(K))}),de.btoa(B.join(""))}}function he(S){const B=S.getTime()/1e3,K=S.getTime()%1e3*1e6;return{seconds:B,nanos:K}}function y(S){let B=S.seconds*1e3;return B+=S.nanos/1e6,new Date(B)}function F(S){return S instanceof Date?S:typeof S=="string"?new Date(S):y(s.Timestamp.fromJSON(S))}function q(S){if(S.gt(Number.MAX_SAFE_INTEGER))throw new de.Error("Value is larger than Number.MAX_SAFE_INTEGER");return S.toNumber()}d.default.util.Long!==o.default&&(d.default.util.Long=o.default,d.default.configure());function ue(S){return typeof S=="object"&&S!==null}function j(S){return S!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./google/protobuf/timestamp":72,long:85,"protobufjs/minimal":89}],76:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateRoomMetadataRequest=t.SendDataResponse=t.SendDataRequest=t.UpdateSubscriptionsResponse=t.UpdateSubscriptionsRequest=t.UpdateParticipantRequest=t.MuteRoomTrackResponse=t.MuteRoomTrackRequest=t.RemoveParticipantResponse=t.RoomParticipantIdentity=t.ListParticipantsResponse=t.ListParticipantsRequest=t.DeleteRoomResponse=t.DeleteRoomRequest=t.ListRoomsResponse=t.ListRoomsRequest=t.RoomEgress=t.CreateRoomRequest=t.protobufPackage=void 0;const o=a(e("protobufjs/minimal")),d=e("./livekit_egress"),s=e("./livekit_models");t.protobufPackage="livekit";function u(){return{name:"",emptyTimeout:0,maxParticipants:0,nodeId:"",metadata:"",egress:void 0}}t.CreateRoomRequest={encode(b,_=o.default.Writer.create()){return b.name!==void 0&&b.name!==""&&_.uint32(10).string(b.name),b.emptyTimeout!==void 0&&b.emptyTimeout!==0&&_.uint32(16).uint32(b.emptyTimeout),b.maxParticipants!==void 0&&b.maxParticipants!==0&&_.uint32(24).uint32(b.maxParticipants),b.nodeId!==void 0&&b.nodeId!==""&&_.uint32(34).string(b.nodeId),b.metadata!==void 0&&b.metadata!==""&&_.uint32(42).string(b.metadata),b.egress!==void 0&&t.RoomEgress.encode(b.egress,_.uint32(50).fork()).ldelim(),_},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=u();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.name=g.string();break;case 2:T.emptyTimeout=g.uint32();break;case 3:T.maxParticipants=g.uint32();break;case 4:T.nodeId=g.string();break;case 5:T.metadata=g.string();break;case 6:T.egress=t.RoomEgress.decode(g,g.uint32());break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{name:D(b.name)?String(b.name):"",emptyTimeout:D(b.emptyTimeout)?Number(b.emptyTimeout):0,maxParticipants:D(b.maxParticipants)?Number(b.maxParticipants):0,nodeId:D(b.nodeId)?String(b.nodeId):"",metadata:D(b.metadata)?String(b.metadata):"",egress:D(b.egress)?t.RoomEgress.fromJSON(b.egress):void 0}},toJSON(b){const _={};return b.name!==void 0&&(_.name=b.name),b.emptyTimeout!==void 0&&(_.emptyTimeout=Math.round(b.emptyTimeout)),b.maxParticipants!==void 0&&(_.maxParticipants=Math.round(b.maxParticipants)),b.nodeId!==void 0&&(_.nodeId=b.nodeId),b.metadata!==void 0&&(_.metadata=b.metadata),b.egress!==void 0&&(_.egress=b.egress?t.RoomEgress.toJSON(b.egress):void 0),_},fromPartial(b){var _,g,w,T,A;const J=u();return J.name=(_=b.name)!==null&&_!==void 0?_:"",J.emptyTimeout=(g=b.emptyTimeout)!==null&&g!==void 0?g:0,J.maxParticipants=(w=b.maxParticipants)!==null&&w!==void 0?w:0,J.nodeId=(T=b.nodeId)!==null&&T!==void 0?T:"",J.metadata=(A=b.metadata)!==null&&A!==void 0?A:"",J.egress=b.egress!==void 0&&b.egress!==null?t.RoomEgress.fromPartial(b.egress):void 0,J}};function c(){return{room:void 0,tracks:void 0}}t.RoomEgress={encode(b,_=o.default.Writer.create()){return b.room!==void 0&&d.RoomCompositeEgressRequest.encode(b.room,_.uint32(10).fork()).ldelim(),b.tracks!==void 0&&d.AutoTrackEgress.encode(b.tracks,_.uint32(18).fork()).ldelim(),_},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=c();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.room=d.RoomCompositeEgressRequest.decode(g,g.uint32());break;case 2:T.tracks=d.AutoTrackEgress.decode(g,g.uint32());break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:D(b.room)?d.RoomCompositeEgressRequest.fromJSON(b.room):void 0,tracks:D(b.tracks)?d.AutoTrackEgress.fromJSON(b.tracks):void 0}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room?d.RoomCompositeEgressRequest.toJSON(b.room):void 0),b.tracks!==void 0&&(_.tracks=b.tracks?d.AutoTrackEgress.toJSON(b.tracks):void 0),_},fromPartial(b){const _=c();return _.room=b.room!==void 0&&b.room!==null?d.RoomCompositeEgressRequest.fromPartial(b.room):void 0,_.tracks=b.tracks!==void 0&&b.tracks!==null?d.AutoTrackEgress.fromPartial(b.tracks):void 0,_}};function h(){return{names:[]}}t.ListRoomsRequest={encode(b,_=o.default.Writer.create()){if(b.names!==void 0&&b.names.length!==0)for(const g of b.names)_.uint32(10).string(g);return _},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=h();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.names.push(g.string());break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{names:Array.isArray(b==null?void 0:b.names)?b.names.map(_=>String(_)):[]}},toJSON(b){const _={};return b.names?_.names=b.names.map(g=>g):_.names=[],_},fromPartial(b){var _;const g=h();return g.names=((_=b.names)===null||_===void 0?void 0:_.map(w=>w))||[],g}};function p(){return{rooms:[]}}t.ListRoomsResponse={encode(b,_=o.default.Writer.create()){if(b.rooms!==void 0&&b.rooms.length!==0)for(const g of b.rooms)s.Room.encode(g,_.uint32(10).fork()).ldelim();return _},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=p();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.rooms.push(s.Room.decode(g,g.uint32()));break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{rooms:Array.isArray(b==null?void 0:b.rooms)?b.rooms.map(_=>s.Room.fromJSON(_)):[]}},toJSON(b){const _={};return b.rooms?_.rooms=b.rooms.map(g=>g?s.Room.toJSON(g):void 0):_.rooms=[],_},fromPartial(b){var _;const g=p();return g.rooms=((_=b.rooms)===null||_===void 0?void 0:_.map(w=>s.Room.fromPartial(w)))||[],g}};function l(){return{room:""}}t.DeleteRoomRequest={encode(b,_=o.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),_},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=l();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:D(b.room)?String(b.room):""}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),_},fromPartial(b){var _;const g=l();return g.room=(_=b.room)!==null&&_!==void 0?_:"",g}};function f(){return{}}t.DeleteRoomResponse={encode(b,_=o.default.Writer.create()){return _},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=f();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(b){return{}},toJSON(b){return{}},fromPartial(b){return f()}};function m(){return{room:""}}t.ListParticipantsRequest={encode(b,_=o.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),_},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=m();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:D(b.room)?String(b.room):""}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),_},fromPartial(b){var _;const g=m();return g.room=(_=b.room)!==null&&_!==void 0?_:"",g}};function v(){return{participants:[]}}t.ListParticipantsResponse={encode(b,_=o.default.Writer.create()){if(b.participants!==void 0&&b.participants.length!==0)for(const g of b.participants)s.ParticipantInfo.encode(g,_.uint32(10).fork()).ldelim();return _},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=v();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.participants.push(s.ParticipantInfo.decode(g,g.uint32()));break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{participants:Array.isArray(b==null?void 0:b.participants)?b.participants.map(_=>s.ParticipantInfo.fromJSON(_)):[]}},toJSON(b){const _={};return b.participants?_.participants=b.participants.map(g=>g?s.ParticipantInfo.toJSON(g):void 0):_.participants=[],_},fromPartial(b){var _;const g=v();return g.participants=((_=b.participants)===null||_===void 0?void 0:_.map(w=>s.ParticipantInfo.fromPartial(w)))||[],g}};function E(){return{room:"",identity:""}}t.RoomParticipantIdentity={encode(b,_=o.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.identity!==void 0&&b.identity!==""&&_.uint32(18).string(b.identity),_},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=E();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:D(b.room)?String(b.room):"",identity:D(b.identity)?String(b.identity):""}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.identity!==void 0&&(_.identity=b.identity),_},fromPartial(b){var _,g;const w=E();return w.room=(_=b.room)!==null&&_!==void 0?_:"",w.identity=(g=b.identity)!==null&&g!==void 0?g:"",w}};function k(){return{}}t.RemoveParticipantResponse={encode(b,_=o.default.Writer.create()){return _},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=k();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(b){return{}},toJSON(b){return{}},fromPartial(b){return k()}};function C(){return{room:"",identity:"",trackSid:"",muted:!1}}t.MuteRoomTrackRequest={encode(b,_=o.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.identity!==void 0&&b.identity!==""&&_.uint32(18).string(b.identity),b.trackSid!==void 0&&b.trackSid!==""&&_.uint32(26).string(b.trackSid),b.muted===!0&&_.uint32(32).bool(b.muted),_},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=C();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;case 3:T.trackSid=g.string();break;case 4:T.muted=g.bool();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:D(b.room)?String(b.room):"",identity:D(b.identity)?String(b.identity):"",trackSid:D(b.trackSid)?String(b.trackSid):"",muted:D(b.muted)?!!b.muted:!1}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.identity!==void 0&&(_.identity=b.identity),b.trackSid!==void 0&&(_.trackSid=b.trackSid),b.muted!==void 0&&(_.muted=b.muted),_},fromPartial(b){var _,g,w,T;const A=C();return A.room=(_=b.room)!==null&&_!==void 0?_:"",A.identity=(g=b.identity)!==null&&g!==void 0?g:"",A.trackSid=(w=b.trackSid)!==null&&w!==void 0?w:"",A.muted=(T=b.muted)!==null&&T!==void 0?T:!1,A}};function N(){return{track:void 0}}t.MuteRoomTrackResponse={encode(b,_=o.default.Writer.create()){return b.track!==void 0&&s.TrackInfo.encode(b.track,_.uint32(10).fork()).ldelim(),_},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=N();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.track=s.TrackInfo.decode(g,g.uint32());break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{track:D(b.track)?s.TrackInfo.fromJSON(b.track):void 0}},toJSON(b){const _={};return b.track!==void 0&&(_.track=b.track?s.TrackInfo.toJSON(b.track):void 0),_},fromPartial(b){const _=N();return _.track=b.track!==void 0&&b.track!==null?s.TrackInfo.fromPartial(b.track):void 0,_}};function P(){return{room:"",identity:"",metadata:"",permission:void 0,name:""}}t.UpdateParticipantRequest={encode(b,_=o.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.identity!==void 0&&b.identity!==""&&_.uint32(18).string(b.identity),b.metadata!==void 0&&b.metadata!==""&&_.uint32(26).string(b.metadata),b.permission!==void 0&&s.ParticipantPermission.encode(b.permission,_.uint32(34).fork()).ldelim(),b.name!==void 0&&b.name!==""&&_.uint32(42).string(b.name),_},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=P();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;case 3:T.metadata=g.string();break;case 4:T.permission=s.ParticipantPermission.decode(g,g.uint32());break;case 5:T.name=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:D(b.room)?String(b.room):"",identity:D(b.identity)?String(b.identity):"",metadata:D(b.metadata)?String(b.metadata):"",permission:D(b.permission)?s.ParticipantPermission.fromJSON(b.permission):void 0,name:D(b.name)?String(b.name):""}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.identity!==void 0&&(_.identity=b.identity),b.metadata!==void 0&&(_.metadata=b.metadata),b.permission!==void 0&&(_.permission=b.permission?s.ParticipantPermission.toJSON(b.permission):void 0),b.name!==void 0&&(_.name=b.name),_},fromPartial(b){var _,g,w,T;const A=P();return A.room=(_=b.room)!==null&&_!==void 0?_:"",A.identity=(g=b.identity)!==null&&g!==void 0?g:"",A.metadata=(w=b.metadata)!==null&&w!==void 0?w:"",A.permission=b.permission!==void 0&&b.permission!==null?s.ParticipantPermission.fromPartial(b.permission):void 0,A.name=(T=b.name)!==null&&T!==void 0?T:"",A}};function M(){return{room:"",identity:"",trackSids:[],subscribe:!1,participantTracks:[]}}t.UpdateSubscriptionsRequest={encode(b,_=o.default.Writer.create()){if(b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.identity!==void 0&&b.identity!==""&&_.uint32(18).string(b.identity),b.trackSids!==void 0&&b.trackSids.length!==0)for(const g of b.trackSids)_.uint32(26).string(g);if(b.subscribe===!0&&_.uint32(32).bool(b.subscribe),b.participantTracks!==void 0&&b.participantTracks.length!==0)for(const g of b.participantTracks)s.ParticipantTracks.encode(g,_.uint32(42).fork()).ldelim();return _},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=M();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;case 3:T.trackSids.push(g.string());break;case 4:T.subscribe=g.bool();break;case 5:T.participantTracks.push(s.ParticipantTracks.decode(g,g.uint32()));break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:D(b.room)?String(b.room):"",identity:D(b.identity)?String(b.identity):"",trackSids:Array.isArray(b==null?void 0:b.trackSids)?b.trackSids.map(_=>String(_)):[],subscribe:D(b.subscribe)?!!b.subscribe:!1,participantTracks:Array.isArray(b==null?void 0:b.participantTracks)?b.participantTracks.map(_=>s.ParticipantTracks.fromJSON(_)):[]}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.identity!==void 0&&(_.identity=b.identity),b.trackSids?_.trackSids=b.trackSids.map(g=>g):_.trackSids=[],b.subscribe!==void 0&&(_.subscribe=b.subscribe),b.participantTracks?_.participantTracks=b.participantTracks.map(g=>g?s.ParticipantTracks.toJSON(g):void 0):_.participantTracks=[],_},fromPartial(b){var _,g,w,T,A;const J=M();return J.room=(_=b.room)!==null&&_!==void 0?_:"",J.identity=(g=b.identity)!==null&&g!==void 0?g:"",J.trackSids=((w=b.trackSids)===null||w===void 0?void 0:w.map(G=>G))||[],J.subscribe=(T=b.subscribe)!==null&&T!==void 0?T:!1,J.participantTracks=((A=b.participantTracks)===null||A===void 0?void 0:A.map(G=>s.ParticipantTracks.fromPartial(G)))||[],J}};function L(){return{}}t.UpdateSubscriptionsResponse={encode(b,_=o.default.Writer.create()){return _},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=L();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(b){return{}},toJSON(b){return{}},fromPartial(b){return L()}};function $(){return{room:"",data:new Uint8Array,kind:0,destinationSids:[]}}t.SendDataRequest={encode(b,_=o.default.Writer.create()){if(b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.data!==void 0&&b.data.length!==0&&_.uint32(18).bytes(b.data),b.kind!==void 0&&b.kind!==0&&_.uint32(24).int32(b.kind),b.destinationSids!==void 0&&b.destinationSids.length!==0)for(const g of b.destinationSids)_.uint32(34).string(g);return _},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=$();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.data=g.bytes();break;case 3:T.kind=g.int32();break;case 4:T.destinationSids.push(g.string());break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:D(b.room)?String(b.room):"",data:D(b.data)?Y(b.data):new Uint8Array,kind:D(b.kind)?s.dataPacket_KindFromJSON(b.kind):0,destinationSids:Array.isArray(b==null?void 0:b.destinationSids)?b.destinationSids.map(_=>String(_)):[]}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.data!==void 0&&(_.data=O(b.data!==void 0?b.data:new Uint8Array)),b.kind!==void 0&&(_.kind=s.dataPacket_KindToJSON(b.kind)),b.destinationSids?_.destinationSids=b.destinationSids.map(g=>g):_.destinationSids=[],_},fromPartial(b){var _,g,w,T;const A=$();return A.room=(_=b.room)!==null&&_!==void 0?_:"",A.data=(g=b.data)!==null&&g!==void 0?g:new Uint8Array,A.kind=(w=b.kind)!==null&&w!==void 0?w:0,A.destinationSids=((T=b.destinationSids)===null||T===void 0?void 0:T.map(J=>J))||[],A}};function H(){return{}}t.SendDataResponse={encode(b,_=o.default.Writer.create()){return _},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=H();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(b){return{}},toJSON(b){return{}},fromPartial(b){return H()}};function Z(){return{room:"",metadata:""}}t.UpdateRoomMetadataRequest={encode(b,_=o.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.metadata!==void 0&&b.metadata!==""&&_.uint32(18).string(b.metadata),_},decode(b,_){const g=b instanceof o.default.Reader?b:new o.default.Reader(b);let w=_===void 0?g.len:g.pos+_;const T=Z();for(;g.pos<w;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.metadata=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:D(b.room)?String(b.room):"",metadata:D(b.metadata)?String(b.metadata):""}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.metadata!==void 0&&(_.metadata=b.metadata),_},fromPartial(b){var _,g;const w=Z();return w.room=(_=b.room)!==null&&_!==void 0?_:"",w.metadata=(g=b.metadata)!==null&&g!==void 0?g:"",w}};var re=(()=>{if(typeof re<"u")return re;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function Y(b){if(re.Buffer)return Uint8Array.from(re.Buffer.from(b,"base64"));{const _=re.atob(b),g=new Uint8Array(_.length);for(let w=0;w<_.length;++w)g[w]=_.charCodeAt(w);return g}}function O(b){if(re.Buffer)return re.Buffer.from(b).toString("base64");{const _=[];return b.forEach(g=>{_.push(String.fromCharCode(g))}),re.btoa(_.join(""))}}function D(b){return b!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./livekit_egress":73,"./livekit_models":75,"protobufjs/minimal":89}],77:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebhookEvent=t.protobufPackage=void 0;const o=a(e("long")),d=a(e("protobufjs/minimal")),s=e("./livekit_egress"),u=e("./livekit_ingress"),c=e("./livekit_models");t.protobufPackage="livekit";function h(){return{event:"",room:void 0,participant:void 0,egressInfo:void 0,ingressInfo:void 0,track:void 0,id:"",createdAt:0}}t.WebhookEvent={encode(m,v=d.default.Writer.create()){return m.event!==void 0&&m.event!==""&&v.uint32(10).string(m.event),m.room!==void 0&&c.Room.encode(m.room,v.uint32(18).fork()).ldelim(),m.participant!==void 0&&c.ParticipantInfo.encode(m.participant,v.uint32(26).fork()).ldelim(),m.egressInfo!==void 0&&s.EgressInfo.encode(m.egressInfo,v.uint32(74).fork()).ldelim(),m.ingressInfo!==void 0&&u.IngressInfo.encode(m.ingressInfo,v.uint32(82).fork()).ldelim(),m.track!==void 0&&c.TrackInfo.encode(m.track,v.uint32(66).fork()).ldelim(),m.id!==void 0&&m.id!==""&&v.uint32(50).string(m.id),m.createdAt!==void 0&&m.createdAt!==0&&v.uint32(56).int64(m.createdAt),v},decode(m,v){const E=m instanceof d.default.Reader?m:new d.default.Reader(m);let k=v===void 0?E.len:E.pos+v;const C=h();for(;E.pos<k;){const N=E.uint32();switch(N>>>3){case 1:C.event=E.string();break;case 2:C.room=c.Room.decode(E,E.uint32());break;case 3:C.participant=c.ParticipantInfo.decode(E,E.uint32());break;case 9:C.egressInfo=s.EgressInfo.decode(E,E.uint32());break;case 10:C.ingressInfo=u.IngressInfo.decode(E,E.uint32());break;case 8:C.track=c.TrackInfo.decode(E,E.uint32());break;case 6:C.id=E.string();break;case 7:C.createdAt=l(E.int64());break;default:E.skipType(N&7);break}}return C},fromJSON(m){return{event:f(m.event)?String(m.event):"",room:f(m.room)?c.Room.fromJSON(m.room):void 0,participant:f(m.participant)?c.ParticipantInfo.fromJSON(m.participant):void 0,egressInfo:f(m.egressInfo)?s.EgressInfo.fromJSON(m.egressInfo):void 0,ingressInfo:f(m.ingressInfo)?u.IngressInfo.fromJSON(m.ingressInfo):void 0,track:f(m.track)?c.TrackInfo.fromJSON(m.track):void 0,id:f(m.id)?String(m.id):"",createdAt:f(m.createdAt)?Number(m.createdAt):0}},toJSON(m){const v={};return m.event!==void 0&&(v.event=m.event),m.room!==void 0&&(v.room=m.room?c.Room.toJSON(m.room):void 0),m.participant!==void 0&&(v.participant=m.participant?c.ParticipantInfo.toJSON(m.participant):void 0),m.egressInfo!==void 0&&(v.egressInfo=m.egressInfo?s.EgressInfo.toJSON(m.egressInfo):void 0),m.ingressInfo!==void 0&&(v.ingressInfo=m.ingressInfo?u.IngressInfo.toJSON(m.ingressInfo):void 0),m.track!==void 0&&(v.track=m.track?c.TrackInfo.toJSON(m.track):void 0),m.id!==void 0&&(v.id=m.id),m.createdAt!==void 0&&(v.createdAt=Math.round(m.createdAt)),v},fromPartial(m){var v,E,k;const C=h();return C.event=(v=m.event)!==null&&v!==void 0?v:"",C.room=m.room!==void 0&&m.room!==null?c.Room.fromPartial(m.room):void 0,C.participant=m.participant!==void 0&&m.participant!==null?c.ParticipantInfo.fromPartial(m.participant):void 0,C.egressInfo=m.egressInfo!==void 0&&m.egressInfo!==null?s.EgressInfo.fromPartial(m.egressInfo):void 0,C.ingressInfo=m.ingressInfo!==void 0&&m.ingressInfo!==null?u.IngressInfo.fromPartial(m.ingressInfo):void 0,C.track=m.track!==void 0&&m.track!==null?c.TrackInfo.fromPartial(m.track):void 0,C.id=(E=m.id)!==null&&E!==void 0?E:"",C.createdAt=(k=m.createdAt)!==null&&k!==void 0?k:0,C}};var p=(()=>{if(typeof p<"u")return p;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function l(m){if(m.gt(Number.MAX_SAFE_INTEGER))throw new p.Error("Value is larger than Number.MAX_SAFE_INTEGER");return m.toNumber()}d.default.util.Long!==o.default&&(d.default.util.Long=o.default,d.default.configure());function f(m){return m!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./livekit_egress":73,"./livekit_ingress":74,"./livekit_models":75,long:85,"protobufjs/minimal":89}],78:[function(e,i,t){var n=1/0,a=9007199254740991,o=17976931348623157e292,d=0/0,s="[object Arguments]",u="[object Function]",c="[object GeneratorFunction]",h="[object String]",p="[object Symbol]",l=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,v=/^0o[0-7]+$/i,E=/^(?:0|[1-9]\d*)$/,k=parseInt;function C(fe,ee){for(var te=-1,Q=fe?fe.length:0,U=Array(Q);++te<Q;)U[te]=ee(fe[te],te,fe);return U}function N(fe,ee,te,Q){for(var U=fe.length,W=te+(Q?1:-1);Q?W--:++W<U;)if(ee(fe[W],W,fe))return W;return-1}function P(fe,ee,te){if(ee!==ee)return N(fe,M,te);for(var Q=te-1,U=fe.length;++Q<U;)if(fe[Q]===ee)return Q;return-1}function M(fe){return fe!==fe}function L(fe,ee){for(var te=-1,Q=Array(fe);++te<fe;)Q[te]=ee(te);return Q}function $(fe,ee){return C(ee,function(te){return fe[te]})}function H(fe,ee){return function(te){return fe(ee(te))}}var Z=Object.prototype,re=Z.hasOwnProperty,Y=Z.toString,O=Z.propertyIsEnumerable,D=H(Object.keys,Object),b=Math.max;function _(fe,ee){var te=G(fe)||J(fe)?L(fe.length,String):[],Q=te.length,U=!!Q;for(var W in fe)(ee||re.call(fe,W))&&!(U&&(W=="length"||w(W,Q)))&&te.push(W);return te}function g(fe){if(!T(fe))return D(fe);var ee=[];for(var te in Object(fe))re.call(fe,te)&&te!="constructor"&&ee.push(te);return ee}function w(fe,ee){return ee=ee??a,!!ee&&(typeof fe=="number"||E.test(fe))&&fe>-1&&fe%1==0&&fe<ee}function T(fe){var ee=fe&&fe.constructor,te=typeof ee=="function"&&ee.prototype||Z;return fe===te}function A(fe,ee,te,Q){fe=I(fe)?fe:ke(fe),te=te&&!Q?oe(te):0;var U=fe.length;return te<0&&(te=b(U+te,0)),pe(fe)?te<=U&&fe.indexOf(ee,te)>-1:!!U&&P(fe,ee,te)>-1}function J(fe){return V(fe)&&re.call(fe,"callee")&&(!O.call(fe,"callee")||Y.call(fe)==s)}var G=Array.isArray;function I(fe){return fe!=null&&z(fe.length)&&!x(fe)}function V(fe){return se(fe)&&I(fe)}function x(fe){var ee=ie(fe)?Y.call(fe):"";return ee==u||ee==c}function z(fe){return typeof fe=="number"&&fe>-1&&fe%1==0&&fe<=a}function ie(fe){var ee=typeof fe;return!!fe&&(ee=="object"||ee=="function")}function se(fe){return!!fe&&typeof fe=="object"}function pe(fe){return typeof fe=="string"||!G(fe)&&se(fe)&&Y.call(fe)==h}function be(fe){return typeof fe=="symbol"||se(fe)&&Y.call(fe)==p}function Ee(fe){if(!fe)return fe===0?fe:0;if(fe=ce(fe),fe===n||fe===-n){var ee=fe<0?-1:1;return ee*o}return fe===fe?fe:0}function oe(fe){var ee=Ee(fe),te=ee%1;return ee===ee?te?ee-te:ee:0}function ce(fe){if(typeof fe=="number")return fe;if(be(fe))return d;if(ie(fe)){var ee=typeof fe.valueOf=="function"?fe.valueOf():fe;fe=ie(ee)?ee+"":ee}if(typeof fe!="string")return fe===0?fe:+fe;fe=fe.replace(l,"");var te=m.test(fe);return te||v.test(fe)?k(fe.slice(2),te?2:8):f.test(fe)?d:+fe}function ge(fe){return I(fe)?_(fe):g(fe)}function ke(fe){return fe?$(fe,ge(fe)):[]}i.exports=A},{}],79:[function(e,i,t){var n="[object Boolean]",a=Object.prototype,o=a.toString;function d(u){return u===!0||u===!1||s(u)&&o.call(u)==n}function s(u){return!!u&&typeof u=="object"}i.exports=d},{}],80:[function(e,i,t){var n=1/0,a=17976931348623157e292,o=0/0,d="[object Symbol]",s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt,l=Object.prototype,f=l.toString;function m(M){return typeof M=="number"&&M==N(M)}function v(M){var L=typeof M;return!!M&&(L=="object"||L=="function")}function E(M){return!!M&&typeof M=="object"}function k(M){return typeof M=="symbol"||E(M)&&f.call(M)==d}function C(M){if(!M)return M===0?M:0;if(M=P(M),M===n||M===-n){var L=M<0?-1:1;return L*a}return M===M?M:0}function N(M){var L=C(M),$=L%1;return L===L?$?L-$:L:0}function P(M){if(typeof M=="number")return M;if(k(M))return o;if(v(M)){var L=typeof M.valueOf=="function"?M.valueOf():M;M=v(L)?L+"":L}if(typeof M!="string")return M===0?M:+M;M=M.replace(s,"");var $=c.test(M);return $||h.test(M)?p(M.slice(2),$?2:8):u.test(M)?o:+M}i.exports=m},{}],81:[function(e,i,t){var n="[object Number]",a=Object.prototype,o=a.toString;function d(u){return!!u&&typeof u=="object"}function s(u){return typeof u=="number"||d(u)&&o.call(u)==n}i.exports=s},{}],82:[function(e,i,t){var n="[object Object]";function a(v){var E=!1;if(v!=null&&typeof v.toString!="function")try{E=!!(v+"")}catch{}return E}function o(v,E){return function(k){return v(E(k))}}var d=Function.prototype,s=Object.prototype,u=d.toString,c=s.hasOwnProperty,h=u.call(Object),p=s.toString,l=o(Object.getPrototypeOf,Object);function f(v){return!!v&&typeof v=="object"}function m(v){if(!f(v)||p.call(v)!=n||a(v))return!1;var E=l(v);if(E===null)return!0;var k=c.call(E,"constructor")&&E.constructor;return typeof k=="function"&&k instanceof k&&u.call(k)==h}i.exports=m},{}],83:[function(e,i,t){var n="[object String]",a=Object.prototype,o=a.toString,d=Array.isArray;function s(c){return!!c&&typeof c=="object"}function u(c){return typeof c=="string"||!d(c)&&s(c)&&o.call(c)==n}i.exports=u},{}],84:[function(e,i,t){var n="Expected a function",a=1/0,o=17976931348623157e292,d=0/0,s="[object Symbol]",u=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,p=/^0o[0-7]+$/i,l=parseInt,f=Object.prototype,m=f.toString;function v($,H){var Z;if(typeof H!="function")throw new TypeError(n);return $=M($),function(){return--$>0&&(Z=H.apply(this,arguments)),$<=1&&(H=void 0),Z}}function E($){return v(2,$)}function k($){var H=typeof $;return!!$&&(H=="object"||H=="function")}function C($){return!!$&&typeof $=="object"}function N($){return typeof $=="symbol"||C($)&&m.call($)==s}function P($){if(!$)return $===0?$:0;if($=L($),$===a||$===-a){var H=$<0?-1:1;return H*o}return $===$?$:0}function M($){var H=P($),Z=H%1;return H===H?Z?H-Z:H:0}function L($){if(typeof $=="number")return $;if(N($))return d;if(k($)){var H=typeof $.valueOf=="function"?$.valueOf():$;$=k(H)?H+"":H}if(typeof $!="string")return $===0?$:+$;$=$.replace(u,"");var Z=h.test($);return Z||p.test($)?l($.slice(2),Z?2:8):c.test($)?d:+$}i.exports=E},{}],85:[function(e,i,t){var n=function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var o=null;try{o=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function d(w,T,A){this.low=w|0,this.high=T|0,this.unsigned=!!A}d.prototype.__isLong__,Object.defineProperty(d.prototype,"__isLong__",{value:!0});function s(w){return(w&&w.__isLong__)===!0}function u(w){var T=Math.clz32(w&-w);return w?31-T:T}d.isLong=s;var c={},h={};function p(w,T){var A,J,G;return T?(w>>>=0,(G=0<=w&&w<256)&&(J=h[w],J)?J:(A=f(w,0,!0),G&&(h[w]=A),A)):(w|=0,(G=-128<=w&&w<128)&&(J=c[w],J)?J:(A=f(w,w<0?-1:0,!1),G&&(c[w]=A),A))}d.fromInt=p;function l(w,T){if(isNaN(w))return T?H:$;if(T){if(w<0)return H;if(w>=P)return D}else{if(w<=-M)return b;if(w+1>=M)return O}return w<0?l(-w,T).neg():f(w%N|0,w/N|0,T)}d.fromNumber=l;function f(w,T,A){return new d(w,T,A)}d.fromBits=f;var m=Math.pow;function v(w,T,A){if(w.length===0)throw Error("empty string");if(typeof T=="number"?(A=T,T=!1):T=!!T,w==="NaN"||w==="Infinity"||w==="+Infinity"||w==="-Infinity")return T?H:$;if(A=A||10,A<2||36<A)throw RangeError("radix");var J;if((J=w.indexOf("-"))>0)throw Error("interior hyphen");if(J===0)return v(w.substring(1),T,A).neg();for(var G=l(m(A,8)),I=$,V=0;V<w.length;V+=8){var x=Math.min(8,w.length-V),z=parseInt(w.substring(V,V+x),A);if(x<8){var ie=l(m(A,x));I=I.mul(ie).add(l(z))}else I=I.mul(G),I=I.add(l(z))}return I.unsigned=T,I}d.fromString=v;function E(w,T){return typeof w=="number"?l(w,T):typeof w=="string"?v(w,T):f(w.low,w.high,typeof T=="boolean"?T:w.unsigned)}d.fromValue=E;var k=65536,C=1<<24,N=k*k,P=N*N,M=P/2,L=p(C),$=p(0);d.ZERO=$;var H=p(0,!0);d.UZERO=H;var Z=p(1);d.ONE=Z;var re=p(1,!0);d.UONE=re;var Y=p(-1);d.NEG_ONE=Y;var O=f(-1,2147483647,!1);d.MAX_VALUE=O;var D=f(-1,-1,!0);d.MAX_UNSIGNED_VALUE=D;var b=f(0,-2147483648,!1);d.MIN_VALUE=b;var _=d.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*N+(this.low>>>0):this.high*N+(this.low>>>0)},_.toString=function(T){if(T=T||10,T<2||36<T)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(b)){var A=l(T),J=this.div(A),G=J.mul(A).sub(this);return J.toString(T)+G.toInt().toString(T)}else return"-"+this.neg().toString(T);for(var I=l(m(T,6),this.unsigned),V=this,x="";;){var z=V.div(I),ie=V.sub(z.mul(I)).toInt()>>>0,se=ie.toString(T);if(V=z,V.isZero())return se+x;for(;se.length<6;)se="0"+se;x=""+se+x}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var T=this.high!=0?this.high:this.low,A=31;A>0&&!(T&1<<A);A--);return this.high!=0?A+33:A+1},_.isZero=function(){return this.high===0&&this.low===0},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return(this.low&1)===1},_.isEven=function(){return(this.low&1)===0},_.equals=function(T){return s(T)||(T=E(T)),this.unsigned!==T.unsigned&&this.high>>>31===1&&T.high>>>31===1?!1:this.high===T.high&&this.low===T.low},_.eq=_.equals,_.notEquals=function(T){return!this.eq(T)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(T){return this.comp(T)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(T){return this.comp(T)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(T){return this.comp(T)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(T){return this.comp(T)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(T){if(s(T)||(T=E(T)),this.eq(T))return 0;var A=this.isNegative(),J=T.isNegative();return A&&!J?-1:!A&&J?1:this.unsigned?T.high>>>0>this.high>>>0||T.high===this.high&&T.low>>>0>this.low>>>0?-1:1:this.sub(T).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(Z)},_.neg=_.negate,_.add=function(T){s(T)||(T=E(T));var A=this.high>>>16,J=this.high&65535,G=this.low>>>16,I=this.low&65535,V=T.high>>>16,x=T.high&65535,z=T.low>>>16,ie=T.low&65535,se=0,pe=0,be=0,Ee=0;return Ee+=I+ie,be+=Ee>>>16,Ee&=65535,be+=G+z,pe+=be>>>16,be&=65535,pe+=J+x,se+=pe>>>16,pe&=65535,se+=A+V,se&=65535,f(be<<16|Ee,se<<16|pe,this.unsigned)},_.subtract=function(T){return s(T)||(T=E(T)),this.add(T.neg())},_.sub=_.subtract,_.multiply=function(T){if(this.isZero())return this;if(s(T)||(T=E(T)),o){var A=o.mul(this.low,this.high,T.low,T.high);return f(A,o.get_high(),this.unsigned)}if(T.isZero())return this.unsigned?H:$;if(this.eq(b))return T.isOdd()?b:$;if(T.eq(b))return this.isOdd()?b:$;if(this.isNegative())return T.isNegative()?this.neg().mul(T.neg()):this.neg().mul(T).neg();if(T.isNegative())return this.mul(T.neg()).neg();if(this.lt(L)&&T.lt(L))return l(this.toNumber()*T.toNumber(),this.unsigned);var J=this.high>>>16,G=this.high&65535,I=this.low>>>16,V=this.low&65535,x=T.high>>>16,z=T.high&65535,ie=T.low>>>16,se=T.low&65535,pe=0,be=0,Ee=0,oe=0;return oe+=V*se,Ee+=oe>>>16,oe&=65535,Ee+=I*se,be+=Ee>>>16,Ee&=65535,Ee+=V*ie,be+=Ee>>>16,Ee&=65535,be+=G*se,pe+=be>>>16,be&=65535,be+=I*ie,pe+=be>>>16,be&=65535,be+=V*z,pe+=be>>>16,be&=65535,pe+=J*se+G*ie+I*z+V*x,pe&=65535,f(Ee<<16|oe,pe<<16|be,this.unsigned)},_.mul=_.multiply,_.divide=function(T){if(s(T)||(T=E(T)),T.isZero())throw Error("division by zero");if(o){if(!this.unsigned&&this.high===-2147483648&&T.low===-1&&T.high===-1)return this;var A=(this.unsigned?o.div_u:o.div_s)(this.low,this.high,T.low,T.high);return f(A,o.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?H:$;var J,G,I;if(this.unsigned){if(T.unsigned||(T=T.toUnsigned()),T.gt(this))return H;if(T.gt(this.shru(1)))return re;I=H}else{if(this.eq(b)){if(T.eq(Z)||T.eq(Y))return b;if(T.eq(b))return Z;var V=this.shr(1);return J=V.div(T).shl(1),J.eq($)?T.isNegative()?Z:Y:(G=this.sub(T.mul(J)),I=J.add(G.div(T)),I)}else if(T.eq(b))return this.unsigned?H:$;if(this.isNegative())return T.isNegative()?this.neg().div(T.neg()):this.neg().div(T).neg();if(T.isNegative())return this.div(T.neg()).neg();I=$}for(G=this;G.gte(T);){J=Math.max(1,Math.floor(G.toNumber()/T.toNumber()));for(var x=Math.ceil(Math.log(J)/Math.LN2),z=x<=48?1:m(2,x-48),ie=l(J),se=ie.mul(T);se.isNegative()||se.gt(G);)J-=z,ie=l(J,this.unsigned),se=ie.mul(T);ie.isZero()&&(ie=Z),I=I.add(ie),G=G.sub(se)}return I},_.div=_.divide,_.modulo=function(T){if(s(T)||(T=E(T)),o){var A=(this.unsigned?o.rem_u:o.rem_s)(this.low,this.high,T.low,T.high);return f(A,o.get_high(),this.unsigned)}return this.sub(this.div(T).mul(T))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return f(~this.low,~this.high,this.unsigned)},_.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},_.clz=_.countLeadingZeros,_.countTrailingZeros=function(){return this.low?u(this.low):u(this.high)+32},_.ctz=_.countTrailingZeros,_.and=function(T){return s(T)||(T=E(T)),f(this.low&T.low,this.high&T.high,this.unsigned)},_.or=function(T){return s(T)||(T=E(T)),f(this.low|T.low,this.high|T.high,this.unsigned)},_.xor=function(T){return s(T)||(T=E(T)),f(this.low^T.low,this.high^T.high,this.unsigned)},_.shiftLeft=function(T){return s(T)&&(T=T.toInt()),(T&=63)===0?this:T<32?f(this.low<<T,this.high<<T|this.low>>>32-T,this.unsigned):f(0,this.low<<T-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(T){return s(T)&&(T=T.toInt()),(T&=63)===0?this:T<32?f(this.low>>>T|this.high<<32-T,this.high>>T,this.unsigned):f(this.high>>T-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(T){return s(T)&&(T=T.toInt()),(T&=63)===0?this:T<32?f(this.low>>>T|this.high<<32-T,this.high>>>T,this.unsigned):T===32?f(this.high,0,this.unsigned):f(this.high>>>T-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.rotateLeft=function(T){var A;return s(T)&&(T=T.toInt()),(T&=63)===0?this:T===32?f(this.high,this.low,this.unsigned):T<32?(A=32-T,f(this.low<<T|this.high>>>A,this.high<<T|this.low>>>A,this.unsigned)):(T-=32,A=32-T,f(this.high<<T|this.low>>>A,this.low<<T|this.high>>>A,this.unsigned))},_.rotl=_.rotateLeft,_.rotateRight=function(T){var A;return s(T)&&(T=T.toInt()),(T&=63)===0?this:T===32?f(this.high,this.low,this.unsigned):T<32?(A=32-T,f(this.high<<A|this.low>>>T,this.low<<A|this.high>>>T,this.unsigned)):(T-=32,A=32-T,f(this.low<<A|this.high>>>T,this.high<<A|this.low>>>T,this.unsigned))},_.rotr=_.rotateRight,_.toSigned=function(){return this.unsigned?f(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:f(this.low,this.high,!0)},_.toBytes=function(T){return T?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var T=this.high,A=this.low;return[A&255,A>>>8&255,A>>>16&255,A>>>24,T&255,T>>>8&255,T>>>16&255,T>>>24]},_.toBytesBE=function(){var T=this.high,A=this.low;return[T>>>24,T>>>16&255,T>>>8&255,T&255,A>>>24,A>>>16&255,A>>>8&255,A&255]},d.fromBytes=function(T,A,J){return J?d.fromBytesLE(T,A):d.fromBytesBE(T,A)},d.fromBytesLE=function(T,A){return new d(T[0]|T[1]<<8|T[2]<<16|T[3]<<24,T[4]|T[5]<<8|T[6]<<16|T[7]<<24,A)},d.fromBytesBE=function(T,A){return new d(T[4]<<24|T[5]<<16|T[6]<<8|T[7],T[0]<<24|T[1]<<16|T[2]<<8|T[3],A)};var g=d;return a.default=g,"default"in a?a.default:a}({});typeof i=="object"&&typeof t=="object"&&(i.exports=n)},{}],86:[function(e,i,t){const n=s=>typeof s=="object"&&s!==null,a=Symbol("skip"),o=s=>n(s)&&!(s instanceof RegExp)&&!(s instanceof Error)&&!(s instanceof Date),d=(s,u,c,h=new WeakMap)=>{if(c={deep:!1,target:{},...c},h.has(s))return h.get(s);h.set(s,c.target);const{target:p}=c;delete c.target;const l=f=>f.map(m=>o(m)?d(m,u,c,h):m);if(Array.isArray(s))return l(s);for(const[f,m]of Object.entries(s)){const v=u(f,m,s);if(v===a)continue;let[E,k,{shouldRecurse:C=!0}={}]=v;E!=="__proto__"&&(c.deep&&C&&o(k)&&(k=Array.isArray(k)?l(k):d(k,u,c,h)),p[E]=k)}return p};i.exports=(s,u,c)=>{if(!n(s))throw new TypeError(`Expected an object, got \`${s}\` (${typeof s})`);return d(s,u,c)},i.exports.mapObjectSkip=a},{}],87:[function(e,i,t){var n=1e3,a=n*60,o=a*60,d=o*24,s=d*7,u=d*365.25;i.exports=function(f,m){m=m||{};var v=typeof f;if(v==="string"&&f.length>0)return c(f);if(v==="number"&&isFinite(f))return m.long?p(f):h(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function c(f){if(f=String(f),!(f.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(m){var v=parseFloat(m[1]),E=(m[2]||"ms").toLowerCase();switch(E){case"years":case"year":case"yrs":case"yr":case"y":return v*u;case"weeks":case"week":case"w":return v*s;case"days":case"day":case"d":return v*d;case"hours":case"hour":case"hrs":case"hr":case"h":return v*o;case"minutes":case"minute":case"mins":case"min":case"m":return v*a;case"seconds":case"second":case"secs":case"sec":case"s":return v*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}}function h(f){var m=Math.abs(f);return m>=d?Math.round(f/d)+"d":m>=o?Math.round(f/o)+"h":m>=a?Math.round(f/a)+"m":m>=n?Math.round(f/n)+"s":f+"ms"}function p(f){var m=Math.abs(f);return m>=d?l(f,m,d,"day"):m>=o?l(f,m,o,"hour"):m>=a?l(f,m,a,"minute"):m>=n?l(f,m,n,"second"):f+" ms"}function l(f,m,v,E){var k=m>=v*1.5;return Math.round(f/v)+" "+E+(k?"s":"")}},{}],88:[function(e,i,t){var n=1e3,a=n*60,o=a*60,d=o*24,s=d*7,u=d*365.25;i.exports=function(f,m){m=m||{};var v=typeof f;if(v==="string"&&f.length>0)return c(f);if(v==="number"&&isFinite(f))return m.long?p(f):h(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function c(f){if(f=String(f),!(f.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(m){var v=parseFloat(m[1]),E=(m[2]||"ms").toLowerCase();switch(E){case"years":case"year":case"yrs":case"yr":case"y":return v*u;case"weeks":case"week":case"w":return v*s;case"days":case"day":case"d":return v*d;case"hours":case"hour":case"hrs":case"hr":case"h":return v*o;case"minutes":case"minute":case"mins":case"min":case"m":return v*a;case"seconds":case"second":case"secs":case"sec":case"s":return v*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}}function h(f){var m=Math.abs(f);return m>=d?Math.round(f/d)+"d":m>=o?Math.round(f/o)+"h":m>=a?Math.round(f/a)+"m":m>=n?Math.round(f/n)+"s":f+"ms"}function p(f){var m=Math.abs(f);return m>=d?l(f,m,d,"day"):m>=o?l(f,m,o,"hour"):m>=a?l(f,m,a,"minute"):m>=n?l(f,m,n,"second"):f+" ms"}function l(f,m,v,E){var k=m>=v*1.5;return Math.round(f/v)+" "+E+(k?"s":"")}},{}],89:[function(e,i,t){i.exports=e("./src/index-minimal")},{"./src/index-minimal":90}],90:[function(e,i,t){var n=t;n.build="minimal",n.Writer=e("./writer"),n.BufferWriter=e("./writer_buffer"),n.Reader=e("./reader"),n.BufferReader=e("./reader_buffer"),n.util=e("./util/minimal"),n.rpc=e("./rpc"),n.roots=e("./roots"),n.configure=a;function a(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}a()},{"./reader":91,"./reader_buffer":92,"./roots":93,"./rpc":94,"./util/minimal":97,"./writer":98,"./writer_buffer":99}],91:[function(e,i,t){i.exports=u;var n=e("./util/minimal"),a,o=n.LongBits,d=n.utf8;function s(m,v){return RangeError("index out of range: "+m.pos+" + "+(v||1)+" > "+m.len)}function u(m){this.buf=m,this.pos=0,this.len=m.length}var c=typeof Uint8Array<"u"?function(v){if(v instanceof Uint8Array||Array.isArray(v))return new u(v);throw Error("illegal buffer")}:function(v){if(Array.isArray(v))return new u(v);throw Error("illegal buffer")},h=function(){return n.Buffer?function(E){return(u.create=function(C){return n.Buffer.isBuffer(C)?new a(C):c(C)})(E)}:c};u.create=h(),u.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,u.prototype.uint32=function(){var v=4294967295;return function(){if(v=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(v=(v|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(v=(v|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(v=(v|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(v=(v|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return v;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return v}}(),u.prototype.int32=function(){return this.uint32()|0},u.prototype.sint32=function(){var v=this.uint32();return v>>>1^-(v&1)|0};function p(){var m=new o(0,0),v=0;if(this.len-this.pos>4){for(;v<4;++v)if(m.lo=(m.lo|(this.buf[this.pos]&127)<<v*7)>>>0,this.buf[this.pos++]<128)return m;if(m.lo=(m.lo|(this.buf[this.pos]&127)<<28)>>>0,m.hi=(m.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return m;v=0}else{for(;v<3;++v){if(this.pos>=this.len)throw s(this);if(m.lo=(m.lo|(this.buf[this.pos]&127)<<v*7)>>>0,this.buf[this.pos++]<128)return m}return m.lo=(m.lo|(this.buf[this.pos++]&127)<<v*7)>>>0,m}if(this.len-this.pos>4){for(;v<5;++v)if(m.hi=(m.hi|(this.buf[this.pos]&127)<<v*7+3)>>>0,this.buf[this.pos++]<128)return m}else for(;v<5;++v){if(this.pos>=this.len)throw s(this);if(m.hi=(m.hi|(this.buf[this.pos]&127)<<v*7+3)>>>0,this.buf[this.pos++]<128)return m}throw Error("invalid varint encoding")}u.prototype.bool=function(){return this.uint32()!==0};function l(m,v){return(m[v-4]|m[v-3]<<8|m[v-2]<<16|m[v-1]<<24)>>>0}u.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return l(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return l(this.buf,this.pos+=4)|0};function f(){if(this.pos+8>this.len)throw s(this,8);return new o(l(this.buf,this.pos+=4),l(this.buf,this.pos+=4))}u.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var v=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,v},u.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var v=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,v},u.prototype.bytes=function(){var v=this.uint32(),E=this.pos,k=this.pos+v;if(k>this.len)throw s(this,v);return this.pos+=v,Array.isArray(this.buf)?this.buf.slice(E,k):E===k?new this.buf.constructor(0):this._slice.call(this.buf,E,k)},u.prototype.string=function(){var v=this.bytes();return d.read(v,0,v.length)},u.prototype.skip=function(v){if(typeof v=="number"){if(this.pos+v>this.len)throw s(this,v);this.pos+=v}else do if(this.pos>=this.len)throw s(this);while(this.buf[this.pos++]&128);return this},u.prototype.skipType=function(m){switch(m){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(m=this.uint32()&7)!==4;)this.skipType(m);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+m+" at offset "+this.pos)}return this},u._configure=function(m){a=m,u.create=h(),a._configure();var v=n.Long?"toLong":"toNumber";n.merge(u.prototype,{int64:function(){return p.call(this)[v](!1)},uint64:function(){return p.call(this)[v](!0)},sint64:function(){return p.call(this).zzDecode()[v](!1)},fixed64:function(){return f.call(this)[v](!0)},sfixed64:function(){return f.call(this)[v](!1)}})}},{"./util/minimal":97}],92:[function(e,i,t){i.exports=o;var n=e("./reader");(o.prototype=Object.create(n.prototype)).constructor=o;var a=e("./util/minimal");function o(d){n.call(this,d)}o._configure=function(){a.Buffer&&(o.prototype._slice=a.Buffer.prototype.slice)},o.prototype.string=function(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))},o._configure()},{"./reader":91,"./util/minimal":97}],93:[function(e,i,t){i.exports={}},{}],94:[function(e,i,t){var n=t;n.Service=e("./rpc/service")},{"./rpc/service":95}],95:[function(e,i,t){i.exports=a;var n=e("../util/minimal");(a.prototype=Object.create(n.EventEmitter.prototype)).constructor=a;function a(o,d,s){if(typeof o!="function")throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=o,this.requestDelimited=!!d,this.responseDelimited=!!s}a.prototype.rpcCall=function o(d,s,u,c,h){if(!c)throw TypeError("request must be specified");var p=this;if(!h)return n.asPromise(o,p,d,s,u,c);if(!p.rpcImpl){setTimeout(function(){h(Error("already ended"))},0);return}try{return p.rpcImpl(d,s[p.requestDelimited?"encodeDelimited":"encode"](c).finish(),function(f,m){if(f)return p.emit("error",f,d),h(f);if(m===null){p.end(!0);return}if(!(m instanceof u))try{m=u[p.responseDelimited?"decodeDelimited":"decode"](m)}catch(v){return p.emit("error",v,d),h(v)}return p.emit("data",m,d),h(null,m)})}catch(l){p.emit("error",l,d),setTimeout(function(){h(l)},0);return}},a.prototype.end=function(d){return this.rpcImpl&&(d||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{"../util/minimal":97}],96:[function(e,i,t){i.exports=a;var n=e("../util/minimal");function a(u,c){this.lo=u>>>0,this.hi=c>>>0}var o=a.zero=new a(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var d=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(c){if(c===0)return o;var h=c<0;h&&(c=-c);var p=c>>>0,l=(c-p)/4294967296>>>0;return h&&(l=~l>>>0,p=~p>>>0,++p>4294967295&&(p=0,++l>4294967295&&(l=0))),new a(p,l)},a.from=function(c){if(typeof c=="number")return a.fromNumber(c);if(n.isString(c))if(n.Long)c=n.Long.fromString(c);else return a.fromNumber(parseInt(c,10));return c.low||c.high?new a(c.low>>>0,c.high>>>0):o},a.prototype.toNumber=function(c){if(!c&&this.hi>>>31){var h=~this.lo+1>>>0,p=~this.hi>>>0;return h||(p=p+1>>>0),-(h+p*4294967296)}return this.lo+this.hi*4294967296},a.prototype.toLong=function(c){return n.Long?new n.Long(this.lo|0,this.hi|0,!!c):{low:this.lo|0,high:this.hi|0,unsigned:!!c}};var s=String.prototype.charCodeAt;a.fromHash=function(c){return c===d?o:new a((s.call(c,0)|s.call(c,1)<<8|s.call(c,2)<<16|s.call(c,3)<<24)>>>0,(s.call(c,4)|s.call(c,5)<<8|s.call(c,6)<<16|s.call(c,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var c=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^c)>>>0,this.lo=(this.lo<<1^c)>>>0,this},a.prototype.zzDecode=function(){var c=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^c)>>>0,this.hi=(this.hi>>>1^c)>>>0,this},a.prototype.length=function(){var c=this.lo,h=(this.lo>>>28|this.hi<<4)>>>0,p=this.hi>>>24;return p===0?h===0?c<16384?c<128?1:2:c<2097152?3:4:h<16384?h<128?5:6:h<2097152?7:8:p<128?9:10}},{"../util/minimal":97}],97:[function(e,i,t){(function(n){(function(){var a=t;a.asPromise=e("@protobufjs/aspromise"),a.base64=e("@protobufjs/base64"),a.EventEmitter=e("@protobufjs/eventemitter"),a.float=e("@protobufjs/float"),a.inquire=e("@protobufjs/inquire"),a.utf8=e("@protobufjs/utf8"),a.pool=e("@protobufjs/pool"),a.LongBits=e("./longbits"),a.isNode=!!(typeof n<"u"&&n&&n.process&&n.process.versions&&n.process.versions.node),a.global=a.isNode&&n||typeof window<"u"&&window||typeof self<"u"&&self||this,a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isInteger=Number.isInteger||function(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u},a.isString=function(u){return typeof u=="string"||u instanceof String},a.isObject=function(u){return u&&typeof u=="object"},a.isset=a.isSet=function(u,c){var h=u[c];return h!=null&&u.hasOwnProperty(c)?typeof h!="object"||(Array.isArray(h)?h.length:Object.keys(h).length)>0:!1},a.Buffer=function(){try{var s=a.inquire("buffer").Buffer;return s.prototype.utf8Write?s:null}catch{return null}}(),a._Buffer_from=null,a._Buffer_allocUnsafe=null,a.newBuffer=function(u){return typeof u=="number"?a.Buffer?a._Buffer_allocUnsafe(u):new a.Array(u):a.Buffer?a._Buffer_from(u):typeof Uint8Array>"u"?u:new Uint8Array(u)},a.Array=typeof Uint8Array<"u"?Uint8Array:Array,a.Long=a.global.dcodeIO&&a.global.dcodeIO.Long||a.global.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(u){return u?a.LongBits.from(u).toHash():a.LongBits.zeroHash},a.longFromHash=function(u,c){var h=a.LongBits.fromHash(u);return a.Long?a.Long.fromBits(h.lo,h.hi,c):h.toNumber(!!c)};function o(s,u,c){for(var h=Object.keys(u),p=0;p<h.length;++p)(s[h[p]]===void 0||!c)&&(s[h[p]]=u[h[p]]);return s}a.merge=o,a.lcFirst=function(u){return u.charAt(0).toLowerCase()+u.substring(1)};function d(s){function u(c,h){if(!(this instanceof u))return new u(c,h);Object.defineProperty(this,"message",{get:function(){return c}}),Error.captureStackTrace?Error.captureStackTrace(this,u):Object.defineProperty(this,"stack",{value:new Error().stack||""}),h&&o(this,h)}return(u.prototype=Object.create(Error.prototype)).constructor=u,Object.defineProperty(u.prototype,"name",{get:function(){return s}}),u.prototype.toString=function(){return this.name+": "+this.message},u}a.newError=d,a.ProtocolError=d("ProtocolError"),a.oneOfGetter=function(u){for(var c={},h=0;h<u.length;++h)c[u[h]]=1;return function(){for(var p=Object.keys(this),l=p.length-1;l>-1;--l)if(c[p[l]]===1&&this[p[l]]!==void 0&&this[p[l]]!==null)return p[l]}},a.oneOfSetter=function(u){return function(c){for(var h=0;h<u.length;++h)u[h]!==c&&delete this[u[h]]}},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a._configure=function(){var s=a.Buffer;if(!s){a._Buffer_from=a._Buffer_allocUnsafe=null;return}a._Buffer_from=s.from!==Uint8Array.from&&s.from||function(c,h){return new s(c,h)},a._Buffer_allocUnsafe=s.allocUnsafe||function(c){return new s(c)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./longbits":96,"@protobufjs/aspromise":2,"@protobufjs/base64":3,"@protobufjs/eventemitter":4,"@protobufjs/float":5,"@protobufjs/inquire":6,"@protobufjs/pool":7,"@protobufjs/utf8":8}],98:[function(e,i,t){i.exports=p;var n=e("./util/minimal"),a,o=n.LongBits,d=n.base64,s=n.utf8;function u(N,P,M){this.fn=N,this.len=P,this.next=void 0,this.val=M}function c(){}function h(N){this.head=N.head,this.tail=N.tail,this.len=N.len,this.next=N.states}function p(){this.len=0,this.head=new u(c,0,0),this.tail=this.head,this.states=null}var l=function(){return n.Buffer?function(){return(p.create=function(){return new a})()}:function(){return new p}};p.create=l(),p.alloc=function(P){return new n.Array(P)},n.Array!==Array&&(p.alloc=n.pool(p.alloc,n.Array.prototype.subarray)),p.prototype._push=function(P,M,L){return this.tail=this.tail.next=new u(P,M,L),this.len+=M,this};function f(N,P,M){P[M]=N&255}function m(N,P,M){for(;N>127;)P[M++]=N&127|128,N>>>=7;P[M]=N}function v(N,P){this.len=N,this.next=void 0,this.val=P}v.prototype=Object.create(u.prototype),v.prototype.fn=m,p.prototype.uint32=function(P){return this.len+=(this.tail=this.tail.next=new v((P=P>>>0)<128?1:P<16384?2:P<2097152?3:P<268435456?4:5,P)).len,this},p.prototype.int32=function(P){return P<0?this._push(E,10,o.fromNumber(P)):this.uint32(P)},p.prototype.sint32=function(P){return this.uint32((P<<1^P>>31)>>>0)};function E(N,P,M){for(;N.hi;)P[M++]=N.lo&127|128,N.lo=(N.lo>>>7|N.hi<<25)>>>0,N.hi>>>=7;for(;N.lo>127;)P[M++]=N.lo&127|128,N.lo=N.lo>>>7;P[M++]=N.lo}p.prototype.uint64=function(P){var M=o.from(P);return this._push(E,M.length(),M)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(P){var M=o.from(P).zzEncode();return this._push(E,M.length(),M)},p.prototype.bool=function(P){return this._push(f,1,P?1:0)};function k(N,P,M){P[M]=N&255,P[M+1]=N>>>8&255,P[M+2]=N>>>16&255,P[M+3]=N>>>24}p.prototype.fixed32=function(P){return this._push(k,4,P>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(P){var M=o.from(P);return this._push(k,4,M.lo)._push(k,4,M.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(P){return this._push(n.float.writeFloatLE,4,P)},p.prototype.double=function(P){return this._push(n.float.writeDoubleLE,8,P)};var C=n.Array.prototype.set?function(P,M,L){M.set(P,L)}:function(P,M,L){for(var $=0;$<P.length;++$)M[L+$]=P[$]};p.prototype.bytes=function(P){var M=P.length>>>0;if(!M)return this._push(f,1,0);if(n.isString(P)){var L=p.alloc(M=d.length(P));d.decode(P,L,0),P=L}return this.uint32(M)._push(C,M,P)},p.prototype.string=function(P){var M=s.length(P);return M?this.uint32(M)._push(s.write,M,P):this._push(f,1,0)},p.prototype.fork=function(){return this.states=new h(this),this.head=this.tail=new u(c,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(c,0,0),this.len=0),this},p.prototype.ldelim=function(){var P=this.head,M=this.tail,L=this.len;return this.reset().uint32(L),L&&(this.tail.next=P.next,this.tail=M,this.len+=L),this},p.prototype.finish=function(){for(var P=this.head.next,M=this.constructor.alloc(this.len),L=0;P;)P.fn(P.val,M,L),L+=P.len,P=P.next;return M},p._configure=function(N){a=N,p.create=l(),a._configure()}},{"./util/minimal":97}],99:[function(e,i,t){i.exports=o;var n=e("./writer");(o.prototype=Object.create(n.prototype)).constructor=o;var a=e("./util/minimal");function o(){n.call(this)}o._configure=function(){o.alloc=a._Buffer_allocUnsafe,o.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&a.Buffer.prototype.set.name==="set"?function(u,c,h){c.set(u,h)}:function(u,c,h){if(u.copy)u.copy(c,h,0,u.length);else for(var p=0;p<u.length;)c[h++]=u[p++]}},o.prototype.bytes=function(u){a.isString(u)&&(u=a._Buffer_from(u,"base64"));var c=u.length>>>0;return this.uint32(c),c&&this._push(o.writeBytesBuffer,c,u),this};function d(s,u,c){s.length<40?a.utf8.write(s,u,c):u.utf8Write?u.utf8Write(s,c):u.write(s,c)}o.prototype.string=function(u){var c=a.Buffer.byteLength(u);return this.uint32(c),c&&this._push(d,c,u),this},o._configure()},{"./util/minimal":97,"./writer":98}],100:[function(e,i,t){(function(n){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let a;i.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:n):o=>(a||(a=Promise.resolve())).then(o).catch(d=>setTimeout(()=>{throw d},0))}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],101:[function(e,i,t){class n{constructor(o={}){if(!(o.maxSize&&o.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=o.maxSize,this.onEviction=o.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(o,d){if(this.cache.set(o,d),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(const[s,u]of this.oldCache.entries())this.onEviction(s,u);this.oldCache=this.cache,this.cache=new Map}}get(o){if(this.cache.has(o))return this.cache.get(o);if(this.oldCache.has(o)){const d=this.oldCache.get(o);return this.oldCache.delete(o),this._set(o,d),d}}set(o,d){return this.cache.has(o)?this.cache.set(o,d):this._set(o,d),this}has(o){return this.cache.has(o)||this.oldCache.has(o)}peek(o){if(this.cache.has(o))return this.cache.get(o);if(this.oldCache.has(o))return this.oldCache.get(o)}delete(o){const d=this.cache.delete(o);return d&&this._size--,this.oldCache.delete(o)||d}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[o]of this)yield o}*values(){for(const[,o]of this)yield o}*[Symbol.iterator](){for(const o of this.cache)yield o;for(const o of this.oldCache){const[d]=o;this.cache.has(d)||(yield o)}}get size(){let o=0;for(const d of this.oldCache.keys())this.cache.has(d)||o++;return Math.min(this._size+o,this.maxSize)}}i.exports=n},{}],102:[function(e,i,t){(function(n,a){(function(){var o=65536,d=4294967295;function s(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var u=e("safe-buffer").Buffer,c=a.crypto||a.msCrypto;c&&c.getRandomValues?i.exports=h:i.exports=s;function h(p,l){if(p>d)throw new RangeError("requested too many random bytes");var f=u.allocUnsafe(p);if(p>0)if(p>o)for(var m=0;m<p;m+=o)c.getRandomValues(f.slice(m,m+o));else c.getRandomValues(f);return typeof l=="function"?n.nextTick(function(){l(null,f)}):f}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:254,"safe-buffer":118}],103:[function(e,i,t){function n(h,p){h.prototype=Object.create(p.prototype),h.prototype.constructor=h,h.__proto__=p}var a={};function o(h,p,l){l||(l=Error);function f(v,E,k){return typeof p=="string"?p:p(v,E,k)}var m=function(v){n(E,v);function E(k,C,N){return v.call(this,f(k,C,N))||this}return E}(l);m.prototype.name=l.name,m.prototype.code=h,a[h]=m}function d(h,p){if(Array.isArray(h)){var l=h.length;return h=h.map(function(f){return String(f)}),l>2?"one of ".concat(p," ").concat(h.slice(0,l-1).join(", "),", or ")+h[l-1]:l===2?"one of ".concat(p," ").concat(h[0]," or ").concat(h[1]):"of ".concat(p," ").concat(h[0])}else return"of ".concat(p," ").concat(String(h))}function s(h,p,l){return h.substr(!l||l<0?0:+l,p.length)===p}function u(h,p,l){return(l===void 0||l>h.length)&&(l=h.length),h.substring(l-p.length,l)===p}function c(h,p,l){return typeof l!="number"&&(l=0),l+p.length>h.length?!1:h.indexOf(p,l)!==-1}o("ERR_INVALID_OPT_VALUE",function(h,p){return'The value "'+p+'" is invalid for option "'+h+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(h,p,l){var f;typeof p=="string"&&s(p,"not ")?(f="must not be",p=p.replace(/^not /,"")):f="must be";var m;if(u(h," argument"))m="The ".concat(h," ").concat(f," ").concat(d(p,"type"));else{var v=c(h,".")?"property":"argument";m='The "'.concat(h,'" ').concat(v," ").concat(f," ").concat(d(p,"type"))}return m+=". Received type ".concat(typeof l),m},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(h){return"The "+h+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(h){return"Cannot call "+h+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(h){return"Unknown encoding: "+h},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.codes=a},{}],104:[function(e,i,t){(function(n){(function(){var a=Object.keys||function(f){var m=[];for(var v in f)m.push(v);return m};i.exports=h;var o=e("./_stream_readable"),d=e("./_stream_writable");e("inherits")(h,o);for(var s=a(d.prototype),u=0;u<s.length;u++){var c=s[u];h.prototype[c]||(h.prototype[c]=d.prototype[c])}function h(f){if(!(this instanceof h))return new h(f);o.call(this,f),d.call(this,f),this.allowHalfOpen=!0,f&&(f.readable===!1&&(this.readable=!1),f.writable===!1&&(this.writable=!1),f.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",p)))}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(h.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function p(){this._writableState.ended||n.nextTick(l,this)}function l(f){f.end()}Object.defineProperty(h.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":106,"./_stream_writable":108,_process:254,inherits:47}],105:[function(e,i,t){i.exports=a;var n=e("./_stream_transform");e("inherits")(a,n);function a(o){if(!(this instanceof a))return new a(o);n.call(this,o)}a.prototype._transform=function(o,d,s){s(null,o)}},{"./_stream_transform":107,inherits:47}],106:[function(e,i,t){(function(n,a){(function(){i.exports=b;var o;b.ReadableState=D,e("events").EventEmitter;var d=function(te,Q){return te.listeners(Q).length},s=e("./internal/streams/stream"),u=e("buffer").Buffer,c=(typeof a<"u"?a:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function h(ee){return u.from(ee)}function p(ee){return u.isBuffer(ee)||ee instanceof c}var l=e("util"),f;l&&l.debuglog?f=l.debuglog("stream"):f=function(){};var m=e("./internal/streams/buffer_list"),v=e("./internal/streams/destroy"),E=e("./internal/streams/state"),k=E.getHighWaterMark,C=e("../errors").codes,N=C.ERR_INVALID_ARG_TYPE,P=C.ERR_STREAM_PUSH_AFTER_EOF,M=C.ERR_METHOD_NOT_IMPLEMENTED,L=C.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,$,H,Z;e("inherits")(b,s);var re=v.errorOrDestroy,Y=["error","close","destroy","pause","resume"];function O(ee,te,Q){if(typeof ee.prependListener=="function")return ee.prependListener(te,Q);!ee._events||!ee._events[te]?ee.on(te,Q):Array.isArray(ee._events[te])?ee._events[te].unshift(Q):ee._events[te]=[Q,ee._events[te]]}function D(ee,te,Q){o=o||e("./_stream_duplex"),ee=ee||{},typeof Q!="boolean"&&(Q=te instanceof o),this.objectMode=!!ee.objectMode,Q&&(this.objectMode=this.objectMode||!!ee.readableObjectMode),this.highWaterMark=k(this,ee,"readableHighWaterMark",Q),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ee.emitClose!==!1,this.autoDestroy=!!ee.autoDestroy,this.destroyed=!1,this.defaultEncoding=ee.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ee.encoding&&($||($=e("string_decoder/").StringDecoder),this.decoder=new $(ee.encoding),this.encoding=ee.encoding)}function b(ee){if(o=o||e("./_stream_duplex"),!(this instanceof b))return new b(ee);var te=this instanceof o;this._readableState=new D(ee,this,te),this.readable=!0,ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy)),s.call(this)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(te){this._readableState&&(this._readableState.destroyed=te)}}),b.prototype.destroy=v.destroy,b.prototype._undestroy=v.undestroy,b.prototype._destroy=function(ee,te){te(ee)},b.prototype.push=function(ee,te){var Q=this._readableState,U;return Q.objectMode?U=!0:typeof ee=="string"&&(te=te||Q.defaultEncoding,te!==Q.encoding&&(ee=u.from(ee,te),te=""),U=!0),_(this,ee,te,!1,U)},b.prototype.unshift=function(ee){return _(this,ee,null,!0,!1)};function _(ee,te,Q,U,W){f("readableAddChunk",te);var X=ee._readableState;if(te===null)X.reading=!1,G(ee,X);else{var de;if(W||(de=w(X,te)),de)re(ee,de);else if(X.objectMode||te&&te.length>0)if(typeof te!="string"&&!X.objectMode&&Object.getPrototypeOf(te)!==u.prototype&&(te=h(te)),U)X.endEmitted?re(ee,new L):g(ee,X,te,!0);else if(X.ended)re(ee,new P);else{if(X.destroyed)return!1;X.reading=!1,X.decoder&&!Q?(te=X.decoder.write(te),X.objectMode||te.length!==0?g(ee,X,te,!1):x(ee,X)):g(ee,X,te,!1)}else U||(X.reading=!1,x(ee,X))}return!X.ended&&(X.length<X.highWaterMark||X.length===0)}function g(ee,te,Q,U){te.flowing&&te.length===0&&!te.sync?(te.awaitDrain=0,ee.emit("data",Q)):(te.length+=te.objectMode?1:Q.length,U?te.buffer.unshift(Q):te.buffer.push(Q),te.needReadable&&I(ee)),x(ee,te)}function w(ee,te){var Q;return!p(te)&&typeof te!="string"&&te!==void 0&&!ee.objectMode&&(Q=new N("chunk",["string","Buffer","Uint8Array"],te)),Q}b.prototype.isPaused=function(){return this._readableState.flowing===!1},b.prototype.setEncoding=function(ee){$||($=e("string_decoder/").StringDecoder);var te=new $(ee);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;for(var Q=this._readableState.buffer.head,U="";Q!==null;)U+=te.write(Q.data),Q=Q.next;return this._readableState.buffer.clear(),U!==""&&this._readableState.buffer.push(U),this._readableState.length=U.length,this};var T=1073741824;function A(ee){return ee>=T?ee=T:(ee--,ee|=ee>>>1,ee|=ee>>>2,ee|=ee>>>4,ee|=ee>>>8,ee|=ee>>>16,ee++),ee}function J(ee,te){return ee<=0||te.length===0&&te.ended?0:te.objectMode?1:ee!==ee?te.flowing&&te.length?te.buffer.head.data.length:te.length:(ee>te.highWaterMark&&(te.highWaterMark=A(ee)),ee<=te.length?ee:te.ended?te.length:(te.needReadable=!0,0))}b.prototype.read=function(ee){f("read",ee),ee=parseInt(ee,10);var te=this._readableState,Q=ee;if(ee!==0&&(te.emittedReadable=!1),ee===0&&te.needReadable&&((te.highWaterMark!==0?te.length>=te.highWaterMark:te.length>0)||te.ended))return f("read: emitReadable",te.length,te.ended),te.length===0&&te.ended?ge(this):I(this),null;if(ee=J(ee,te),ee===0&&te.ended)return te.length===0&&ge(this),null;var U=te.needReadable;f("need readable",U),(te.length===0||te.length-ee<te.highWaterMark)&&(U=!0,f("length less than watermark",U)),te.ended||te.reading?(U=!1,f("reading or ended",U)):U&&(f("do read"),te.reading=!0,te.sync=!0,te.length===0&&(te.needReadable=!0),this._read(te.highWaterMark),te.sync=!1,te.reading||(ee=J(Q,te)));var W;return ee>0?W=ce(ee,te):W=null,W===null?(te.needReadable=te.length<=te.highWaterMark,ee=0):(te.length-=ee,te.awaitDrain=0),te.length===0&&(te.ended||(te.needReadable=!0),Q!==ee&&te.ended&&ge(this)),W!==null&&this.emit("data",W),W};function G(ee,te){if(f("onEofChunk"),!te.ended){if(te.decoder){var Q=te.decoder.end();Q&&Q.length&&(te.buffer.push(Q),te.length+=te.objectMode?1:Q.length)}te.ended=!0,te.sync?I(ee):(te.needReadable=!1,te.emittedReadable||(te.emittedReadable=!0,V(ee)))}}function I(ee){var te=ee._readableState;f("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(f("emitReadable",te.flowing),te.emittedReadable=!0,n.nextTick(V,ee))}function V(ee){var te=ee._readableState;f("emitReadable_",te.destroyed,te.length,te.ended),!te.destroyed&&(te.length||te.ended)&&(ee.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,oe(ee)}function x(ee,te){te.readingMore||(te.readingMore=!0,n.nextTick(z,ee,te))}function z(ee,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&te.length===0);){var Q=te.length;if(f("maybeReadMore read 0"),ee.read(0),Q===te.length)break}te.readingMore=!1}b.prototype._read=function(ee){re(this,new M("_read()"))},b.prototype.pipe=function(ee,te){var Q=this,U=this._readableState;switch(U.pipesCount){case 0:U.pipes=ee;break;case 1:U.pipes=[U.pipes,ee];break;default:U.pipes.push(ee);break}U.pipesCount+=1,f("pipe count=%d opts=%j",U.pipesCount,te);var W=(!te||te.end!==!1)&&ee!==n.stdout&&ee!==n.stderr,X=W?ve:S;U.endEmitted?n.nextTick(X):Q.once("end",X),ee.on("unpipe",de);function de(B,K){f("onunpipe"),B===Q&&K&&K.hasUnpiped===!1&&(K.hasUnpiped=!0,y())}function ve(){f("onend"),ee.end()}var Se=ie(Q);ee.on("drain",Se);var he=!1;function y(){f("cleanup"),ee.removeListener("close",ue),ee.removeListener("finish",j),ee.removeListener("drain",Se),ee.removeListener("error",q),ee.removeListener("unpipe",de),Q.removeListener("end",ve),Q.removeListener("end",S),Q.removeListener("data",F),he=!0,U.awaitDrain&&(!ee._writableState||ee._writableState.needDrain)&&Se()}Q.on("data",F);function F(B){f("ondata");var K=ee.write(B);f("dest.write",K),K===!1&&((U.pipesCount===1&&U.pipes===ee||U.pipesCount>1&&fe(U.pipes,ee)!==-1)&&!he&&(f("false write response, pause",U.awaitDrain),U.awaitDrain++),Q.pause())}function q(B){f("onerror",B),S(),ee.removeListener("error",q),d(ee,"error")===0&&re(ee,B)}O(ee,"error",q);function ue(){ee.removeListener("finish",j),S()}ee.once("close",ue);function j(){f("onfinish"),ee.removeListener("close",ue),S()}ee.once("finish",j);function S(){f("unpipe"),Q.unpipe(ee)}return ee.emit("pipe",Q),U.flowing||(f("pipe resume"),Q.resume()),ee};function ie(ee){return function(){var Q=ee._readableState;f("pipeOnDrain",Q.awaitDrain),Q.awaitDrain&&Q.awaitDrain--,Q.awaitDrain===0&&d(ee,"data")&&(Q.flowing=!0,oe(ee))}}b.prototype.unpipe=function(ee){var te=this._readableState,Q={hasUnpiped:!1};if(te.pipesCount===0)return this;if(te.pipesCount===1)return ee&&ee!==te.pipes?this:(ee||(ee=te.pipes),te.pipes=null,te.pipesCount=0,te.flowing=!1,ee&&ee.emit("unpipe",this,Q),this);if(!ee){var U=te.pipes,W=te.pipesCount;te.pipes=null,te.pipesCount=0,te.flowing=!1;for(var X=0;X<W;X++)U[X].emit("unpipe",this,{hasUnpiped:!1});return this}var de=fe(te.pipes,ee);return de===-1?this:(te.pipes.splice(de,1),te.pipesCount-=1,te.pipesCount===1&&(te.pipes=te.pipes[0]),ee.emit("unpipe",this,Q),this)},b.prototype.on=function(ee,te){var Q=s.prototype.on.call(this,ee,te),U=this._readableState;return ee==="data"?(U.readableListening=this.listenerCount("readable")>0,U.flowing!==!1&&this.resume()):ee==="readable"&&!U.endEmitted&&!U.readableListening&&(U.readableListening=U.needReadable=!0,U.flowing=!1,U.emittedReadable=!1,f("on readable",U.length,U.reading),U.length?I(this):U.reading||n.nextTick(pe,this)),Q},b.prototype.addListener=b.prototype.on,b.prototype.removeListener=function(ee,te){var Q=s.prototype.removeListener.call(this,ee,te);return ee==="readable"&&n.nextTick(se,this),Q},b.prototype.removeAllListeners=function(ee){var te=s.prototype.removeAllListeners.apply(this,arguments);return(ee==="readable"||ee===void 0)&&n.nextTick(se,this),te};function se(ee){var te=ee._readableState;te.readableListening=ee.listenerCount("readable")>0,te.resumeScheduled&&!te.paused?te.flowing=!0:ee.listenerCount("data")>0&&ee.resume()}function pe(ee){f("readable nexttick read 0"),ee.read(0)}b.prototype.resume=function(){var ee=this._readableState;return ee.flowing||(f("resume"),ee.flowing=!ee.readableListening,be(this,ee)),ee.paused=!1,this};function be(ee,te){te.resumeScheduled||(te.resumeScheduled=!0,n.nextTick(Ee,ee,te))}function Ee(ee,te){f("resume",te.reading),te.reading||ee.read(0),te.resumeScheduled=!1,ee.emit("resume"),oe(ee),te.flowing&&!te.reading&&ee.read(0)}b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function oe(ee){var te=ee._readableState;for(f("flow",te.flowing);te.flowing&&ee.read()!==null;);}b.prototype.wrap=function(ee){var te=this,Q=this._readableState,U=!1;ee.on("end",function(){if(f("wrapped end"),Q.decoder&&!Q.ended){var de=Q.decoder.end();de&&de.length&&te.push(de)}te.push(null)}),ee.on("data",function(de){if(f("wrapped data"),Q.decoder&&(de=Q.decoder.write(de)),!(Q.objectMode&&de==null)&&!(!Q.objectMode&&(!de||!de.length))){var ve=te.push(de);ve||(U=!0,ee.pause())}});for(var W in ee)this[W]===void 0&&typeof ee[W]=="function"&&(this[W]=function(ve){return function(){return ee[ve].apply(ee,arguments)}}(W));for(var X=0;X<Y.length;X++)ee.on(Y[X],this.emit.bind(this,Y[X]));return this._read=function(de){f("wrapped _read",de),U&&(U=!1,ee.resume())},this},typeof Symbol=="function"&&(b.prototype[Symbol.asyncIterator]=function(){return H===void 0&&(H=e("./internal/streams/async_iterator")),H(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}}),b._fromList=ce,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ce(ee,te){if(te.length===0)return null;var Q;return te.objectMode?Q=te.buffer.shift():!ee||ee>=te.length?(te.decoder?Q=te.buffer.join(""):te.buffer.length===1?Q=te.buffer.first():Q=te.buffer.concat(te.length),te.buffer.clear()):Q=te.buffer.consume(ee,te.decoder),Q}function ge(ee){var te=ee._readableState;f("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,n.nextTick(ke,te,ee))}function ke(ee,te){if(f("endReadableNT",ee.endEmitted,ee.length),!ee.endEmitted&&ee.length===0&&(ee.endEmitted=!0,te.readable=!1,te.emit("end"),ee.autoDestroy)){var Q=te._writableState;(!Q||Q.autoDestroy&&Q.finished)&&te.destroy()}}typeof Symbol=="function"&&(b.from=function(ee,te){return Z===void 0&&(Z=e("./internal/streams/from")),Z(b,ee,te)});function fe(ee,te){for(var Q=0,U=ee.length;Q<U;Q++)if(ee[Q]===te)return Q;return-1}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":103,"./_stream_duplex":104,"./internal/streams/async_iterator":109,"./internal/streams/buffer_list":110,"./internal/streams/destroy":111,"./internal/streams/from":113,"./internal/streams/state":115,"./internal/streams/stream":116,_process:254,buffer:171,events:207,inherits:47,"string_decoder/":121,util:142}],107:[function(e,i,t){i.exports=h;var n=e("../errors").codes,a=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,d=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");e("inherits")(h,u);function c(f,m){var v=this._transformState;v.transforming=!1;var E=v.writecb;if(E===null)return this.emit("error",new o);v.writechunk=null,v.writecb=null,m!=null&&this.push(m),E(f);var k=this._readableState;k.reading=!1,(k.needReadable||k.length<k.highWaterMark)&&this._read(k.highWaterMark)}function h(f){if(!(this instanceof h))return new h(f);u.call(this,f),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,f&&(typeof f.transform=="function"&&(this._transform=f.transform),typeof f.flush=="function"&&(this._flush=f.flush)),this.on("prefinish",p)}function p(){var f=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(m,v){l(f,m,v)}):l(this,null,null)}h.prototype.push=function(f,m){return this._transformState.needTransform=!1,u.prototype.push.call(this,f,m)},h.prototype._transform=function(f,m,v){v(new a("_transform()"))},h.prototype._write=function(f,m,v){var E=this._transformState;if(E.writecb=v,E.writechunk=f,E.writeencoding=m,!E.transforming){var k=this._readableState;(E.needTransform||k.needReadable||k.length<k.highWaterMark)&&this._read(k.highWaterMark)}},h.prototype._read=function(f){var m=this._transformState;m.writechunk!==null&&!m.transforming?(m.transforming=!0,this._transform(m.writechunk,m.writeencoding,m.afterTransform)):m.needTransform=!0},h.prototype._destroy=function(f,m){u.prototype._destroy.call(this,f,function(v){m(v)})};function l(f,m,v){if(m)return f.emit("error",m);if(v!=null&&f.push(v),f._writableState.length)throw new s;if(f._transformState.transforming)throw new d;return f.push(null)}},{"../errors":103,"./_stream_duplex":104,inherits:47}],108:[function(e,i,t){(function(n,a){(function(){i.exports=D;function o(oe){var ce=this;this.next=null,this.entry=null,this.finish=function(){Ee(ce,oe)}}var d;D.WritableState=Y;var s={deprecate:e("util-deprecate")},u=e("./internal/streams/stream"),c=e("buffer").Buffer,h=(typeof a<"u"?a:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function p(oe){return c.from(oe)}function l(oe){return c.isBuffer(oe)||oe instanceof h}var f=e("./internal/streams/destroy"),m=e("./internal/streams/state"),v=m.getHighWaterMark,E=e("../errors").codes,k=E.ERR_INVALID_ARG_TYPE,C=E.ERR_METHOD_NOT_IMPLEMENTED,N=E.ERR_MULTIPLE_CALLBACK,P=E.ERR_STREAM_CANNOT_PIPE,M=E.ERR_STREAM_DESTROYED,L=E.ERR_STREAM_NULL_VALUES,$=E.ERR_STREAM_WRITE_AFTER_END,H=E.ERR_UNKNOWN_ENCODING,Z=f.errorOrDestroy;e("inherits")(D,u);function re(){}function Y(oe,ce,ge){d=d||e("./_stream_duplex"),oe=oe||{},typeof ge!="boolean"&&(ge=ce instanceof d),this.objectMode=!!oe.objectMode,ge&&(this.objectMode=this.objectMode||!!oe.writableObjectMode),this.highWaterMark=v(this,oe,"writableHighWaterMark",ge),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ke=oe.decodeStrings===!1;this.decodeStrings=!ke,this.defaultEncoding=oe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(fe){G(ce,fe)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=oe.emitClose!==!1,this.autoDestroy=!!oe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}Y.prototype.getBuffer=function(){for(var ce=this.bufferedRequest,ge=[];ce;)ge.push(ce),ce=ce.next;return ge},function(){try{Object.defineProperty(Y.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var O;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(O=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(ce){return O.call(this,ce)?!0:this!==D?!1:ce&&ce._writableState instanceof Y}})):O=function(ce){return ce instanceof this};function D(oe){d=d||e("./_stream_duplex");var ce=this instanceof d;if(!ce&&!O.call(D,this))return new D(oe);this._writableState=new Y(oe,this,ce),this.writable=!0,oe&&(typeof oe.write=="function"&&(this._write=oe.write),typeof oe.writev=="function"&&(this._writev=oe.writev),typeof oe.destroy=="function"&&(this._destroy=oe.destroy),typeof oe.final=="function"&&(this._final=oe.final)),u.call(this)}D.prototype.pipe=function(){Z(this,new P)};function b(oe,ce){var ge=new $;Z(oe,ge),n.nextTick(ce,ge)}function _(oe,ce,ge,ke){var fe;return ge===null?fe=new L:typeof ge!="string"&&!ce.objectMode&&(fe=new k("chunk",["string","Buffer"],ge)),fe?(Z(oe,fe),n.nextTick(ke,fe),!1):!0}D.prototype.write=function(oe,ce,ge){var ke=this._writableState,fe=!1,ee=!ke.objectMode&&l(oe);return ee&&!c.isBuffer(oe)&&(oe=p(oe)),typeof ce=="function"&&(ge=ce,ce=null),ee?ce="buffer":ce||(ce=ke.defaultEncoding),typeof ge!="function"&&(ge=re),ke.ending?b(this,ge):(ee||_(this,ke,oe,ge))&&(ke.pendingcb++,fe=w(this,ke,ee,oe,ce,ge)),fe},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){var oe=this._writableState;oe.corked&&(oe.corked--,!oe.writing&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&x(this,oe))},D.prototype.setDefaultEncoding=function(ce){if(typeof ce=="string"&&(ce=ce.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ce+"").toLowerCase())>-1))throw new H(ce);return this._writableState.defaultEncoding=ce,this},Object.defineProperty(D.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function g(oe,ce,ge){return!oe.objectMode&&oe.decodeStrings!==!1&&typeof ce=="string"&&(ce=c.from(ce,ge)),ce}Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function w(oe,ce,ge,ke,fe,ee){if(!ge){var te=g(ce,ke,fe);ke!==te&&(ge=!0,fe="buffer",ke=te)}var Q=ce.objectMode?1:ke.length;ce.length+=Q;var U=ce.length<ce.highWaterMark;if(U||(ce.needDrain=!0),ce.writing||ce.corked){var W=ce.lastBufferedRequest;ce.lastBufferedRequest={chunk:ke,encoding:fe,isBuf:ge,callback:ee,next:null},W?W.next=ce.lastBufferedRequest:ce.bufferedRequest=ce.lastBufferedRequest,ce.bufferedRequestCount+=1}else T(oe,ce,!1,Q,ke,fe,ee);return U}function T(oe,ce,ge,ke,fe,ee,te){ce.writelen=ke,ce.writecb=te,ce.writing=!0,ce.sync=!0,ce.destroyed?ce.onwrite(new M("write")):ge?oe._writev(fe,ce.onwrite):oe._write(fe,ee,ce.onwrite),ce.sync=!1}function A(oe,ce,ge,ke,fe){--ce.pendingcb,ge?(n.nextTick(fe,ke),n.nextTick(pe,oe,ce),oe._writableState.errorEmitted=!0,Z(oe,ke)):(fe(ke),oe._writableState.errorEmitted=!0,Z(oe,ke),pe(oe,ce))}function J(oe){oe.writing=!1,oe.writecb=null,oe.length-=oe.writelen,oe.writelen=0}function G(oe,ce){var ge=oe._writableState,ke=ge.sync,fe=ge.writecb;if(typeof fe!="function")throw new N;if(J(ge),ce)A(oe,ge,ke,ce,fe);else{var ee=z(ge)||oe.destroyed;!ee&&!ge.corked&&!ge.bufferProcessing&&ge.bufferedRequest&&x(oe,ge),ke?n.nextTick(I,oe,ge,ee,fe):I(oe,ge,ee,fe)}}function I(oe,ce,ge,ke){ge||V(oe,ce),ce.pendingcb--,ke(),pe(oe,ce)}function V(oe,ce){ce.length===0&&ce.needDrain&&(ce.needDrain=!1,oe.emit("drain"))}function x(oe,ce){ce.bufferProcessing=!0;var ge=ce.bufferedRequest;if(oe._writev&&ge&&ge.next){var ke=ce.bufferedRequestCount,fe=new Array(ke),ee=ce.corkedRequestsFree;ee.entry=ge;for(var te=0,Q=!0;ge;)fe[te]=ge,ge.isBuf||(Q=!1),ge=ge.next,te+=1;fe.allBuffers=Q,T(oe,ce,!0,ce.length,fe,"",ee.finish),ce.pendingcb++,ce.lastBufferedRequest=null,ee.next?(ce.corkedRequestsFree=ee.next,ee.next=null):ce.corkedRequestsFree=new o(ce),ce.bufferedRequestCount=0}else{for(;ge;){var U=ge.chunk,W=ge.encoding,X=ge.callback,de=ce.objectMode?1:U.length;if(T(oe,ce,!1,de,U,W,X),ge=ge.next,ce.bufferedRequestCount--,ce.writing)break}ge===null&&(ce.lastBufferedRequest=null)}ce.bufferedRequest=ge,ce.bufferProcessing=!1}D.prototype._write=function(oe,ce,ge){ge(new C("_write()"))},D.prototype._writev=null,D.prototype.end=function(oe,ce,ge){var ke=this._writableState;return typeof oe=="function"?(ge=oe,oe=null,ce=null):typeof ce=="function"&&(ge=ce,ce=null),oe!=null&&this.write(oe,ce),ke.corked&&(ke.corked=1,this.uncork()),ke.ending||be(this,ke,ge),this},Object.defineProperty(D.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function z(oe){return oe.ending&&oe.length===0&&oe.bufferedRequest===null&&!oe.finished&&!oe.writing}function ie(oe,ce){oe._final(function(ge){ce.pendingcb--,ge&&Z(oe,ge),ce.prefinished=!0,oe.emit("prefinish"),pe(oe,ce)})}function se(oe,ce){!ce.prefinished&&!ce.finalCalled&&(typeof oe._final=="function"&&!ce.destroyed?(ce.pendingcb++,ce.finalCalled=!0,n.nextTick(ie,oe,ce)):(ce.prefinished=!0,oe.emit("prefinish")))}function pe(oe,ce){var ge=z(ce);if(ge&&(se(oe,ce),ce.pendingcb===0&&(ce.finished=!0,oe.emit("finish"),ce.autoDestroy))){var ke=oe._readableState;(!ke||ke.autoDestroy&&ke.endEmitted)&&oe.destroy()}return ge}function be(oe,ce,ge){ce.ending=!0,pe(oe,ce),ge&&(ce.finished?n.nextTick(ge):oe.once("finish",ge)),ce.ended=!0,oe.writable=!1}function Ee(oe,ce,ge){var ke=oe.entry;for(oe.entry=null;ke;){var fe=ke.callback;ce.pendingcb--,fe(ge),ke=ke.next}ce.corkedRequestsFree.next=oe}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ce){this._writableState&&(this._writableState.destroyed=ce)}}),D.prototype.destroy=f.destroy,D.prototype._undestroy=f.undestroy,D.prototype._destroy=function(oe,ce){ce(oe)}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":103,"./_stream_duplex":104,"./internal/streams/destroy":111,"./internal/streams/state":115,"./internal/streams/stream":116,_process:254,buffer:171,inherits:47,"util-deprecate":122}],109:[function(e,i,t){(function(n){(function(){var a;function o($,H,Z){return H=d(H),H in $?Object.defineProperty($,H,{value:Z,enumerable:!0,configurable:!0,writable:!0}):$[H]=Z,$}function d($){var H=s($,"string");return typeof H=="symbol"?H:String(H)}function s($,H){if(typeof $!="object"||$===null)return $;var Z=$[Symbol.toPrimitive];if(Z!==void 0){var re=Z.call($,H||"default");if(typeof re!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)($)}var u=e("./end-of-stream"),c=Symbol("lastResolve"),h=Symbol("lastReject"),p=Symbol("error"),l=Symbol("ended"),f=Symbol("lastPromise"),m=Symbol("handlePromise"),v=Symbol("stream");function E($,H){return{value:$,done:H}}function k($){var H=$[c];if(H!==null){var Z=$[v].read();Z!==null&&($[f]=null,$[c]=null,$[h]=null,H(E(Z,!1)))}}function C($){n.nextTick(k,$)}function N($,H){return function(Z,re){$.then(function(){if(H[l]){Z(E(void 0,!0));return}H[m](Z,re)},re)}}var P=Object.getPrototypeOf(function(){}),M=Object.setPrototypeOf((a={get stream(){return this[v]},next:function(){var H=this,Z=this[p];if(Z!==null)return Promise.reject(Z);if(this[l])return Promise.resolve(E(void 0,!0));if(this[v].destroyed)return new Promise(function(D,b){n.nextTick(function(){H[p]?b(H[p]):D(E(void 0,!0))})});var re=this[f],Y;if(re)Y=new Promise(N(re,this));else{var O=this[v].read();if(O!==null)return Promise.resolve(E(O,!1));Y=new Promise(this[m])}return this[f]=Y,Y}},o(a,Symbol.asyncIterator,function(){return this}),o(a,"return",function(){var H=this;return new Promise(function(Z,re){H[v].destroy(null,function(Y){if(Y){re(Y);return}Z(E(void 0,!0))})})}),a),P),L=function(H){var Z,re=Object.create(M,(Z={},o(Z,v,{value:H,writable:!0}),o(Z,c,{value:null,writable:!0}),o(Z,h,{value:null,writable:!0}),o(Z,p,{value:null,writable:!0}),o(Z,l,{value:H._readableState.endEmitted,writable:!0}),o(Z,m,{value:function(O,D){var b=re[v].read();b?(re[f]=null,re[c]=null,re[h]=null,O(E(b,!1))):(re[c]=O,re[h]=D)},writable:!0}),Z));return re[f]=null,u(H,function(Y){if(Y&&Y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var O=re[h];O!==null&&(re[f]=null,re[c]=null,re[h]=null,O(Y)),re[p]=Y;return}var D=re[c];D!==null&&(re[f]=null,re[c]=null,re[h]=null,D(E(void 0,!0))),re[l]=!0}),H.on("readable",C.bind(null,re)),re};i.exports=L}).call(this)}).call(this,e("_process"))},{"./end-of-stream":112,_process:254}],110:[function(e,i,t){function n(k,C){var N=Object.keys(k);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(k);C&&(P=P.filter(function(M){return Object.getOwnPropertyDescriptor(k,M).enumerable})),N.push.apply(N,P)}return N}function a(k){for(var C=1;C<arguments.length;C++){var N=arguments[C]!=null?arguments[C]:{};C%2?n(Object(N),!0).forEach(function(P){o(k,P,N[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(N)):n(Object(N)).forEach(function(P){Object.defineProperty(k,P,Object.getOwnPropertyDescriptor(N,P))})}return k}function o(k,C,N){return C=c(C),C in k?Object.defineProperty(k,C,{value:N,enumerable:!0,configurable:!0,writable:!0}):k[C]=N,k}function d(k,C){if(!(k instanceof C))throw new TypeError("Cannot call a class as a function")}function s(k,C){for(var N=0;N<C.length;N++){var P=C[N];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(k,c(P.key),P)}}function u(k,C,N){return C&&s(k.prototype,C),N&&s(k,N),Object.defineProperty(k,"prototype",{writable:!1}),k}function c(k){var C=h(k,"string");return typeof C=="symbol"?C:String(C)}function h(k,C){if(typeof k!="object"||k===null)return k;var N=k[Symbol.toPrimitive];if(N!==void 0){var P=N.call(k,C||"default");if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(k)}var p=e("buffer"),l=p.Buffer,f=e("util"),m=f.inspect,v=m&&m.custom||"inspect";function E(k,C,N){l.prototype.copy.call(k,C,N)}i.exports=function(){function k(){d(this,k),this.head=null,this.tail=null,this.length=0}return u(k,[{key:"push",value:function(N){var P={data:N,next:null};this.length>0?this.tail.next=P:this.head=P,this.tail=P,++this.length}},{key:"unshift",value:function(N){var P={data:N,next:this.head};this.length===0&&(this.tail=P),this.head=P,++this.length}},{key:"shift",value:function(){if(this.length!==0){var N=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,N}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(N){if(this.length===0)return"";for(var P=this.head,M=""+P.data;P=P.next;)M+=N+P.data;return M}},{key:"concat",value:function(N){if(this.length===0)return l.alloc(0);for(var P=l.allocUnsafe(N>>>0),M=this.head,L=0;M;)E(M.data,P,L),L+=M.data.length,M=M.next;return P}},{key:"consume",value:function(N,P){var M;return N<this.head.data.length?(M=this.head.data.slice(0,N),this.head.data=this.head.data.slice(N)):N===this.head.data.length?M=this.shift():M=P?this._getString(N):this._getBuffer(N),M}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(N){var P=this.head,M=1,L=P.data;for(N-=L.length;P=P.next;){var $=P.data,H=N>$.length?$.length:N;if(H===$.length?L+=$:L+=$.slice(0,N),N-=H,N===0){H===$.length?(++M,P.next?this.head=P.next:this.head=this.tail=null):(this.head=P,P.data=$.slice(H));break}++M}return this.length-=M,L}},{key:"_getBuffer",value:function(N){var P=l.allocUnsafe(N),M=this.head,L=1;for(M.data.copy(P),N-=M.data.length;M=M.next;){var $=M.data,H=N>$.length?$.length:N;if($.copy(P,P.length-N,0,H),N-=H,N===0){H===$.length?(++L,M.next?this.head=M.next:this.head=this.tail=null):(this.head=M,M.data=$.slice(H));break}++L}return this.length-=L,P}},{key:v,value:function(N,P){return m(this,a(a({},P),{},{depth:0,customInspect:!1}))}}]),k}()},{buffer:171,util:142}],111:[function(e,i,t){(function(n){(function(){function a(h,p){var l=this,f=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return f||m?(p?p(h):h&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(u,this,h)):n.nextTick(u,this,h)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(h||null,function(v){!p&&v?l._writableState?l._writableState.errorEmitted?n.nextTick(d,l):(l._writableState.errorEmitted=!0,n.nextTick(o,l,v)):n.nextTick(o,l,v):p?(n.nextTick(d,l),p(v)):n.nextTick(d,l)}),this)}function o(h,p){u(h,p),d(h)}function d(h){h._writableState&&!h._writableState.emitClose||h._readableState&&!h._readableState.emitClose||h.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function u(h,p){h.emit("error",p)}function c(h,p){var l=h._readableState,f=h._writableState;l&&l.autoDestroy||f&&f.autoDestroy?h.destroy(p):h.emit("error",p)}i.exports={destroy:a,undestroy:s,errorOrDestroy:c}}).call(this)}).call(this,e("_process"))},{_process:254}],112:[function(e,i,t){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function a(u){var c=!1;return function(){if(!c){c=!0;for(var h=arguments.length,p=new Array(h),l=0;l<h;l++)p[l]=arguments[l];u.apply(this,p)}}}function o(){}function d(u){return u.setHeader&&typeof u.abort=="function"}function s(u,c,h){if(typeof c=="function")return s(u,null,c);c||(c={}),h=a(h||o);var p=c.readable||c.readable!==!1&&u.readable,l=c.writable||c.writable!==!1&&u.writable,f=function(){u.writable||v()},m=u._writableState&&u._writableState.finished,v=function(){l=!1,m=!0,p||h.call(u)},E=u._readableState&&u._readableState.endEmitted,k=function(){p=!1,E=!0,l||h.call(u)},C=function(L){h.call(u,L)},N=function(){var L;if(p&&!E)return(!u._readableState||!u._readableState.ended)&&(L=new n),h.call(u,L);if(l&&!m)return(!u._writableState||!u._writableState.ended)&&(L=new n),h.call(u,L)},P=function(){u.req.on("finish",v)};return d(u)?(u.on("complete",v),u.on("abort",N),u.req?P():u.on("request",P)):l&&!u._writableState&&(u.on("end",f),u.on("close",f)),u.on("end",k),u.on("finish",v),c.error!==!1&&u.on("error",C),u.on("close",N),function(){u.removeListener("complete",v),u.removeListener("abort",N),u.removeListener("request",P),u.req&&u.req.removeListener("finish",v),u.removeListener("end",f),u.removeListener("close",f),u.removeListener("finish",v),u.removeListener("end",k),u.removeListener("error",C),u.removeListener("close",N)}}i.exports=s},{"../../../errors":103}],113:[function(e,i,t){i.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],114:[function(e,i,t){var n;function a(v){var E=!1;return function(){E||(E=!0,v.apply(void 0,arguments))}}var o=e("../../../errors").codes,d=o.ERR_MISSING_ARGS,s=o.ERR_STREAM_DESTROYED;function u(v){if(v)throw v}function c(v){return v.setHeader&&typeof v.abort=="function"}function h(v,E,k,C){C=a(C);var N=!1;v.on("close",function(){N=!0}),n===void 0&&(n=e("./end-of-stream")),n(v,{readable:E,writable:k},function(M){if(M)return C(M);N=!0,C()});var P=!1;return function(M){if(!N&&!P){if(P=!0,c(v))return v.abort();if(typeof v.destroy=="function")return v.destroy();C(M||new s("pipe"))}}}function p(v){v()}function l(v,E){return v.pipe(E)}function f(v){return!v.length||typeof v[v.length-1]!="function"?u:v.pop()}function m(){for(var v=arguments.length,E=new Array(v),k=0;k<v;k++)E[k]=arguments[k];var C=f(E);if(Array.isArray(E[0])&&(E=E[0]),E.length<2)throw new d("streams");var N,P=E.map(function(M,L){var $=L<E.length-1,H=L>0;return h(M,$,H,function(Z){N||(N=Z),Z&&P.forEach(p),!$&&(P.forEach(p),C(N))})});return E.reduce(l)}i.exports=m},{"../../../errors":103,"./end-of-stream":112}],115:[function(e,i,t){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function a(d,s,u){return d.highWaterMark!=null?d.highWaterMark:s?d[u]:null}function o(d,s,u,c){var h=a(s,c,u);if(h!=null){if(!(isFinite(h)&&Math.floor(h)===h)||h<0){var p=c?u:"highWaterMark";throw new n(p,h)}return Math.floor(h)}return d.objectMode?16:16*1024}i.exports={getHighWaterMark:o}},{"../../../errors":103}],116:[function(e,i,t){i.exports=e("events").EventEmitter},{events:207}],117:[function(e,i,t){t=i.exports=e("./lib/_stream_readable.js"),t.Stream=t,t.Readable=t,t.Writable=e("./lib/_stream_writable.js"),t.Duplex=e("./lib/_stream_duplex.js"),t.Transform=e("./lib/_stream_transform.js"),t.PassThrough=e("./lib/_stream_passthrough.js"),t.finished=e("./lib/internal/streams/end-of-stream.js"),t.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":104,"./lib/_stream_passthrough.js":105,"./lib/_stream_readable.js":106,"./lib/_stream_transform.js":107,"./lib/_stream_writable.js":108,"./lib/internal/streams/end-of-stream.js":112,"./lib/internal/streams/pipeline.js":114}],118:[function(e,i,t){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var n=e("buffer"),a=n.Buffer;function o(s,u){for(var c in s)u[c]=s[c]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?i.exports=n:(o(n,t),t.Buffer=d);function d(s,u,c){return a(s,u,c)}d.prototype=Object.create(a.prototype),o(a,d),d.from=function(s,u,c){if(typeof s=="number")throw new TypeError("Argument must not be a number");return a(s,u,c)},d.alloc=function(s,u,c){if(typeof s!="number")throw new TypeError("Argument must be a number");var h=a(s);return u!==void 0?typeof c=="string"?h.fill(u,c):h.fill(u):h.fill(0),h},d.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return a(s)},d.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}},{buffer:171}],119:[function(e,i,t){(function(n){(function(){t=i.exports=U;var a;typeof n=="object"&&n.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?a=function(){var ne=Array.prototype.slice.call(arguments,0);ne.unshift("SEMVER"),console.log.apply(console,ne)}:a=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var o=256,d=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,u=t.re=[],c=t.src=[],h=0,p=h++;c[p]="0|[1-9]\\d*";var l=h++;c[l]="[0-9]+";var f=h++;c[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var m=h++;c[m]="("+c[p]+")\\.("+c[p]+")\\.("+c[p]+")";var v=h++;c[v]="("+c[l]+")\\.("+c[l]+")\\.("+c[l]+")";var E=h++;c[E]="(?:"+c[p]+"|"+c[f]+")";var k=h++;c[k]="(?:"+c[l]+"|"+c[f]+")";var C=h++;c[C]="(?:-("+c[E]+"(?:\\."+c[E]+")*))";var N=h++;c[N]="(?:-?("+c[k]+"(?:\\."+c[k]+")*))";var P=h++;c[P]="[0-9A-Za-z-]+";var M=h++;c[M]="(?:\\+("+c[P]+"(?:\\."+c[P]+")*))";var L=h++,$="v?"+c[m]+c[C]+"?"+c[M]+"?";c[L]="^"+$+"$";var H="[v=\\s]*"+c[v]+c[N]+"?"+c[M]+"?",Z=h++;c[Z]="^"+H+"$";var re=h++;c[re]="((?:<|>)?=?)";var Y=h++;c[Y]=c[l]+"|x|X|\\*";var O=h++;c[O]=c[p]+"|x|X|\\*";var D=h++;c[D]="[v=\\s]*("+c[O]+")(?:\\.("+c[O]+")(?:\\.("+c[O]+")(?:"+c[C]+")?"+c[M]+"?)?)?";var b=h++;c[b]="[v=\\s]*("+c[Y]+")(?:\\.("+c[Y]+")(?:\\.("+c[Y]+")(?:"+c[N]+")?"+c[M]+"?)?)?";var _=h++;c[_]="^"+c[re]+"\\s*"+c[D]+"$";var g=h++;c[g]="^"+c[re]+"\\s*"+c[b]+"$";var w=h++;c[w]="(?:^|[^\\d])(\\d{1,"+s+"})(?:\\.(\\d{1,"+s+"}))?(?:\\.(\\d{1,"+s+"}))?(?:$|[^\\d])";var T=h++;c[T]="(?:~>?)";var A=h++;c[A]="(\\s*)"+c[T]+"\\s+",u[A]=new RegExp(c[A],"g");var J="$1~",G=h++;c[G]="^"+c[T]+c[D]+"$";var I=h++;c[I]="^"+c[T]+c[b]+"$";var V=h++;c[V]="(?:\\^)";var x=h++;c[x]="(\\s*)"+c[V]+"\\s+",u[x]=new RegExp(c[x],"g");var z="$1^",ie=h++;c[ie]="^"+c[V]+c[D]+"$";var se=h++;c[se]="^"+c[V]+c[b]+"$";var pe=h++;c[pe]="^"+c[re]+"\\s*("+H+")$|^$";var be=h++;c[be]="^"+c[re]+"\\s*("+$+")$|^$";var Ee=h++;c[Ee]="(\\s*)"+c[re]+"\\s*("+H+"|"+c[D]+")",u[Ee]=new RegExp(c[Ee],"g");var oe="$1$2$3",ce=h++;c[ce]="^\\s*("+c[D]+")\\s+-\\s+("+c[D]+")\\s*$";var ge=h++;c[ge]="^\\s*("+c[b]+")\\s+-\\s+("+c[b]+")\\s*$";var ke=h++;c[ke]="(<|>)?=?\\s*\\*";for(var fe=0;fe<h;fe++)a(fe,c[fe]),u[fe]||(u[fe]=new RegExp(c[fe]));t.parse=ee;function ee(ne,le){if((!le||typeof le!="object")&&(le={loose:!!le,includePrerelease:!1}),ne instanceof U)return ne;if(typeof ne!="string"||ne.length>o)return null;var ye=le.loose?u[Z]:u[L];if(!ye.test(ne))return null;try{return new U(ne,le)}catch{return null}}t.valid=te;function te(ne,le){var ye=ee(ne,le);return ye?ye.version:null}t.clean=Q;function Q(ne,le){var ye=ee(ne.trim().replace(/^[=v]+/,""),le);return ye?ye.version:null}t.SemVer=U;function U(ne,le){if((!le||typeof le!="object")&&(le={loose:!!le,includePrerelease:!1}),ne instanceof U){if(ne.loose===le.loose)return ne;ne=ne.version}else if(typeof ne!="string")throw new TypeError("Invalid Version: "+ne);if(ne.length>o)throw new TypeError("version is longer than "+o+" characters");if(!(this instanceof U))return new U(ne,le);a("SemVer",ne,le),this.options=le,this.loose=!!le.loose;var ye=ne.trim().match(le.loose?u[Z]:u[L]);if(!ye)throw new TypeError("Invalid Version: "+ne);if(this.raw=ne,this.major=+ye[1],this.minor=+ye[2],this.patch=+ye[3],this.major>d||this.major<0)throw new TypeError("Invalid major version");if(this.minor>d||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>d||this.patch<0)throw new TypeError("Invalid patch version");ye[4]?this.prerelease=ye[4].split(".").map(function(we){if(/^[0-9]+$/.test(we)){var Te=+we;if(Te>=0&&Te<d)return Te}return we}):this.prerelease=[],this.build=ye[5]?ye[5].split("."):[],this.format()}U.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},U.prototype.toString=function(){return this.version},U.prototype.compare=function(ne){return a("SemVer.compare",this.version,this.options,ne),ne instanceof U||(ne=new U(ne,this.options)),this.compareMain(ne)||this.comparePre(ne)},U.prototype.compareMain=function(ne){return ne instanceof U||(ne=new U(ne,this.options)),ve(this.major,ne.major)||ve(this.minor,ne.minor)||ve(this.patch,ne.patch)},U.prototype.comparePre=function(ne){if(ne instanceof U||(ne=new U(ne,this.options)),this.prerelease.length&&!ne.prerelease.length)return-1;if(!this.prerelease.length&&ne.prerelease.length)return 1;if(!this.prerelease.length&&!ne.prerelease.length)return 0;var le=0;do{var ye=this.prerelease[le],we=ne.prerelease[le];if(a("prerelease compare",le,ye,we),ye===void 0&&we===void 0)return 0;if(we===void 0)return 1;if(ye===void 0)return-1;if(ye===we)continue;return ve(ye,we)}while(++le)},U.prototype.inc=function(ne,le){switch(ne){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",le);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",le);break;case"prepatch":this.prerelease.length=0,this.inc("patch",le),this.inc("pre",le);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",le),this.inc("pre",le);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var ye=this.prerelease.length;--ye>=0;)typeof this.prerelease[ye]=="number"&&(this.prerelease[ye]++,ye=-2);ye===-1&&this.prerelease.push(0)}le&&(this.prerelease[0]===le?isNaN(this.prerelease[1])&&(this.prerelease=[le,0]):this.prerelease=[le,0]);break;default:throw new Error("invalid increment argument: "+ne)}return this.format(),this.raw=this.version,this},t.inc=W;function W(ne,le,ye,we){typeof ye=="string"&&(we=ye,ye=void 0);try{return new U(ne,ye).inc(le,we).version}catch{return null}}t.diff=X;function X(ne,le){if(ae(ne,le))return null;var ye=ee(ne),we=ee(le),Te="";if(ye.prerelease.length||we.prerelease.length){Te="pre";var Ne="prerelease"}for(var Ie in ye)if((Ie==="major"||Ie==="minor"||Ie==="patch")&&ye[Ie]!==we[Ie])return Te+Ie;return Ne}t.compareIdentifiers=ve;var de=/^[0-9]+$/;function ve(ne,le){var ye=de.test(ne),we=de.test(le);return ye&&we&&(ne=+ne,le=+le),ne===le?0:ye&&!we?-1:we&&!ye?1:ne<le?-1:1}t.rcompareIdentifiers=Se;function Se(ne,le){return ve(le,ne)}t.major=he;function he(ne,le){return new U(ne,le).major}t.minor=y;function y(ne,le){return new U(ne,le).minor}t.patch=F;function F(ne,le){return new U(ne,le).patch}t.compare=q;function q(ne,le,ye){return new U(ne,ye).compare(new U(le,ye))}t.compareLoose=ue;function ue(ne,le){return q(ne,le,!0)}t.rcompare=j;function j(ne,le,ye){return q(le,ne,ye)}t.sort=S;function S(ne,le){return ne.sort(function(ye,we){return t.compare(ye,we,le)})}t.rsort=B;function B(ne,le){return ne.sort(function(ye,we){return t.rcompare(ye,we,le)})}t.gt=K;function K(ne,le,ye){return q(ne,le,ye)>0}t.lt=me;function me(ne,le,ye){return q(ne,le,ye)<0}t.eq=ae;function ae(ne,le,ye){return q(ne,le,ye)===0}t.neq=_e;function _e(ne,le,ye){return q(ne,le,ye)!==0}t.gte=Oe;function Oe(ne,le,ye){return q(ne,le,ye)>=0}t.lte=Pe;function Pe(ne,le,ye){return q(ne,le,ye)<=0}t.cmp=Ue;function Ue(ne,le,ye,we){switch(le){case"===":return typeof ne=="object"&&(ne=ne.version),typeof ye=="object"&&(ye=ye.version),ne===ye;case"!==":return typeof ne=="object"&&(ne=ne.version),typeof ye=="object"&&(ye=ye.version),ne!==ye;case"":case"=":case"==":return ae(ne,ye,we);case"!=":return _e(ne,ye,we);case">":return K(ne,ye,we);case">=":return Oe(ne,ye,we);case"<":return me(ne,ye,we);case"<=":return Pe(ne,ye,we);default:throw new TypeError("Invalid operator: "+le)}}t.Comparator=De;function De(ne,le){if((!le||typeof le!="object")&&(le={loose:!!le,includePrerelease:!1}),ne instanceof De){if(ne.loose===!!le.loose)return ne;ne=ne.value}if(!(this instanceof De))return new De(ne,le);a("comparator",ne,le),this.options=le,this.loose=!!le.loose,this.parse(ne),this.semver===Ae?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}var Ae={};De.prototype.parse=function(ne){var le=this.options.loose?u[pe]:u[be],ye=ne.match(le);if(!ye)throw new TypeError("Invalid comparator: "+ne);this.operator=ye[1],this.operator==="="&&(this.operator=""),ye[2]?this.semver=new U(ye[2],this.options.loose):this.semver=Ae},De.prototype.toString=function(){return this.value},De.prototype.test=function(ne){return a("Comparator.test",ne,this.options.loose),this.semver===Ae?!0:(typeof ne=="string"&&(ne=new U(ne,this.options)),Ue(ne,this.operator,this.semver,this.options))},De.prototype.intersects=function(ne,le){if(!(ne instanceof De))throw new TypeError("a Comparator is required");(!le||typeof le!="object")&&(le={loose:!!le,includePrerelease:!1});var ye;if(this.operator==="")return ye=new Re(ne.value,le),ze(this.value,ye,le);if(ne.operator==="")return ye=new Re(this.value,le),ze(ne.semver,ye,le);var we=(this.operator===">="||this.operator===">")&&(ne.operator===">="||ne.operator===">"),Te=(this.operator==="<="||this.operator==="<")&&(ne.operator==="<="||ne.operator==="<"),Ne=this.semver.version===ne.semver.version,Ie=(this.operator===">="||this.operator==="<=")&&(ne.operator===">="||ne.operator==="<="),Ce=Ue(this.semver,"<",ne.semver,le)&&(this.operator===">="||this.operator===">")&&(ne.operator==="<="||ne.operator==="<"),$e=Ue(this.semver,">",ne.semver,le)&&(this.operator==="<="||this.operator==="<")&&(ne.operator===">="||ne.operator===">");return we||Te||Ne&&Ie||Ce||$e},t.Range=Re;function Re(ne,le){if((!le||typeof le!="object")&&(le={loose:!!le,includePrerelease:!1}),ne instanceof Re)return ne.loose===!!le.loose&&ne.includePrerelease===!!le.includePrerelease?ne:new Re(ne.raw,le);if(ne instanceof De)return new Re(ne.value,le);if(!(this instanceof Re))return new Re(ne,le);if(this.options=le,this.loose=!!le.loose,this.includePrerelease=!!le.includePrerelease,this.raw=ne,this.set=ne.split(/\s*\|\|\s*/).map(function(ye){return this.parseRange(ye.trim())},this).filter(function(ye){return ye.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+ne);this.format()}Re.prototype.format=function(){return this.range=this.set.map(function(ne){return ne.join(" ").trim()}).join("||").trim(),this.range},Re.prototype.toString=function(){return this.range},Re.prototype.parseRange=function(ne){var le=this.options.loose;ne=ne.trim();var ye=le?u[ge]:u[ce];ne=ne.replace(ye,Je),a("hyphen replace",ne),ne=ne.replace(u[Ee],oe),a("comparator trim",ne,u[Ee]),ne=ne.replace(u[A],J),ne=ne.replace(u[x],z),ne=ne.split(/\s+/).join(" ");var we=le?u[pe]:u[be],Te=ne.split(" ").map(function(Ne){return Le(Ne,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(Te=Te.filter(function(Ne){return!!Ne.match(we)})),Te=Te.map(function(Ne){return new De(Ne,this.options)},this),Te},Re.prototype.intersects=function(ne,le){if(!(ne instanceof Re))throw new TypeError("a Range is required");return this.set.some(function(ye){return ye.every(function(we){return ne.set.some(function(Te){return Te.every(function(Ne){return we.intersects(Ne,le)})})})})},t.toComparators=We;function We(ne,le){return new Re(ne,le).set.map(function(ye){return ye.map(function(we){return we.value}).join(" ").trim().split(" ")})}function Le(ne,le){return a("comp",ne,le),ne=qe(ne,le),a("caret",ne),ne=He(ne,le),a("tildes",ne),ne=Fe(ne,le),a("xrange",ne),ne=Xe(ne,le),a("stars",ne),ne}function Be(ne){return!ne||ne.toLowerCase()==="x"||ne==="*"}function He(ne,le){return ne.trim().split(/\s+/).map(function(ye){return Me(ye,le)}).join(" ")}function Me(ne,le){var ye=le.loose?u[I]:u[G];return ne.replace(ye,function(we,Te,Ne,Ie,Ce){a("tilde",ne,we,Te,Ne,Ie,Ce);var $e;return Be(Te)?$e="":Be(Ne)?$e=">="+Te+".0.0 <"+(+Te+1)+".0.0":Be(Ie)?$e=">="+Te+"."+Ne+".0 <"+Te+"."+(+Ne+1)+".0":Ce?(a("replaceTilde pr",Ce),$e=">="+Te+"."+Ne+"."+Ie+"-"+Ce+" <"+Te+"."+(+Ne+1)+".0"):$e=">="+Te+"."+Ne+"."+Ie+" <"+Te+"."+(+Ne+1)+".0",a("tilde return",$e),$e})}function qe(ne,le){return ne.trim().split(/\s+/).map(function(ye){return Qe(ye,le)}).join(" ")}function Qe(ne,le){a("caret",ne,le);var ye=le.loose?u[se]:u[ie];return ne.replace(ye,function(we,Te,Ne,Ie,Ce){a("caret",ne,we,Te,Ne,Ie,Ce);var $e;return Be(Te)?$e="":Be(Ne)?$e=">="+Te+".0.0 <"+(+Te+1)+".0.0":Be(Ie)?Te==="0"?$e=">="+Te+"."+Ne+".0 <"+Te+"."+(+Ne+1)+".0":$e=">="+Te+"."+Ne+".0 <"+(+Te+1)+".0.0":Ce?(a("replaceCaret pr",Ce),Te==="0"?Ne==="0"?$e=">="+Te+"."+Ne+"."+Ie+"-"+Ce+" <"+Te+"."+Ne+"."+(+Ie+1):$e=">="+Te+"."+Ne+"."+Ie+"-"+Ce+" <"+Te+"."+(+Ne+1)+".0":$e=">="+Te+"."+Ne+"."+Ie+"-"+Ce+" <"+(+Te+1)+".0.0"):(a("no pr"),Te==="0"?Ne==="0"?$e=">="+Te+"."+Ne+"."+Ie+" <"+Te+"."+Ne+"."+(+Ie+1):$e=">="+Te+"."+Ne+"."+Ie+" <"+Te+"."+(+Ne+1)+".0":$e=">="+Te+"."+Ne+"."+Ie+" <"+(+Te+1)+".0.0"),a("caret return",$e),$e})}function Fe(ne,le){return a("replaceXRanges",ne,le),ne.split(/\s+/).map(function(ye){return Ye(ye,le)}).join(" ")}function Ye(ne,le){ne=ne.trim();var ye=le.loose?u[g]:u[_];return ne.replace(ye,function(we,Te,Ne,Ie,Ce,$e){a("xRange",ne,we,Te,Ne,Ie,Ce,$e);var st=Be(Ne),at=st||Be(Ie),dt=at||Be(Ce),ot=dt;return Te==="="&&ot&&(Te=""),st?Te===">"||Te==="<"?we="<0.0.0":we="*":Te&&ot?(at&&(Ie=0),Ce=0,Te===">"?(Te=">=",at?(Ne=+Ne+1,Ie=0,Ce=0):(Ie=+Ie+1,Ce=0)):Te==="<="&&(Te="<",at?Ne=+Ne+1:Ie=+Ie+1),we=Te+Ne+"."+Ie+"."+Ce):at?we=">="+Ne+".0.0 <"+(+Ne+1)+".0.0":dt&&(we=">="+Ne+"."+Ie+".0 <"+Ne+"."+(+Ie+1)+".0"),a("xRange return",we),we})}function Xe(ne,le){return a("replaceStars",ne,le),ne.trim().replace(u[ke],"")}function Je(ne,le,ye,we,Te,Ne,Ie,Ce,$e,st,at,dt,ot){return Be(ye)?le="":Be(we)?le=">="+ye+".0.0":Be(Te)?le=">="+ye+"."+we+".0":le=">="+le,Be($e)?Ce="":Be(st)?Ce="<"+(+$e+1)+".0.0":Be(at)?Ce="<"+$e+"."+(+st+1)+".0":dt?Ce="<="+$e+"."+st+"."+at+"-"+dt:Ce="<="+Ce,(le+" "+Ce).trim()}Re.prototype.test=function(ne){if(!ne)return!1;typeof ne=="string"&&(ne=new U(ne,this.options));for(var le=0;le<this.set.length;le++)if(je(this.set[le],ne,this.options))return!0;return!1};function je(ne,le,ye){for(var we=0;we<ne.length;we++)if(!ne[we].test(le))return!1;if(le.prerelease.length&&!ye.includePrerelease){for(we=0;we<ne.length;we++)if(a(ne[we].semver),ne[we].semver!==Ae&&ne[we].semver.prerelease.length>0){var Te=ne[we].semver;if(Te.major===le.major&&Te.minor===le.minor&&Te.patch===le.patch)return!0}return!1}return!0}t.satisfies=ze;function ze(ne,le,ye){try{le=new Re(le,ye)}catch{return!1}return le.test(ne)}t.maxSatisfying=Ve;function Ve(ne,le,ye){var we=null,Te=null;try{var Ne=new Re(le,ye)}catch{return null}return ne.forEach(function(Ie){Ne.test(Ie)&&(!we||Te.compare(Ie)===-1)&&(we=Ie,Te=new U(we,ye))}),we}t.minSatisfying=et;function et(ne,le,ye){var we=null,Te=null;try{var Ne=new Re(le,ye)}catch{return null}return ne.forEach(function(Ie){Ne.test(Ie)&&(!we||Te.compare(Ie)===1)&&(we=Ie,Te=new U(we,ye))}),we}t.minVersion=tt;function tt(ne,le){ne=new Re(ne,le);var ye=new U("0.0.0");if(ne.test(ye)||(ye=new U("0.0.0-0"),ne.test(ye)))return ye;ye=null;for(var we=0;we<ne.set.length;++we){var Te=ne.set[we];Te.forEach(function(Ne){var Ie=new U(Ne.semver.version);switch(Ne.operator){case">":Ie.prerelease.length===0?Ie.patch++:Ie.prerelease.push(0),Ie.raw=Ie.format();case"":case">=":(!ye||K(ye,Ie))&&(ye=Ie);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+Ne.operator)}})}return ye&&ne.test(ye)?ye:null}t.validRange=Ge;function Ge(ne,le){try{return new Re(ne,le).range||"*"}catch{return null}}t.ltr=rt;function rt(ne,le,ye){return xe(ne,le,"<",ye)}t.gtr=it;function it(ne,le,ye){return xe(ne,le,">",ye)}t.outside=xe;function xe(ne,le,ye,we){ne=new U(ne,we),le=new Re(le,we);var Te,Ne,Ie,Ce,$e;switch(ye){case">":Te=K,Ne=Pe,Ie=me,Ce=">",$e=">=";break;case"<":Te=me,Ne=Oe,Ie=K,Ce="<",$e="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ze(ne,le,we))return!1;for(var st=0;st<le.set.length;++st){var at=le.set[st],dt=null,ot=null;if(at.forEach(function(ct){ct.semver===Ae&&(ct=new De(">=0.0.0")),dt=dt||ct,ot=ot||ct,Te(ct.semver,dt.semver,we)?dt=ct:Ie(ct.semver,ot.semver,we)&&(ot=ct)}),dt.operator===Ce||dt.operator===$e||(!ot.operator||ot.operator===Ce)&&Ne(ne,ot.semver))return!1;if(ot.operator===$e&&Ie(ne,ot.semver))return!1}return!0}t.prerelease=nt;function nt(ne,le){var ye=ee(ne,le);return ye&&ye.prerelease.length?ye.prerelease:null}t.intersects=Ke;function Ke(ne,le,ye){return ne=new Re(ne,ye),le=new Re(le,ye),ne.intersects(le)}t.coerce=Ze;function Ze(ne){if(ne instanceof U)return ne;if(typeof ne!="string")return null;var le=ne.match(u[w]);return le==null?null:ee(le[1]+"."+(le[2]||"0")+"."+(le[3]||"0"))}}).call(this)}).call(this,e("_process"))},{_process:254}],120:[function(e,i,t){/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const n=e("debug")("simple-peer"),a=e("get-browser-rtc"),o=e("randombytes"),d=e("readable-stream"),s=e("queue-microtask"),u=e("err-code"),{Buffer:c}=e("buffer"),h=64*1024,p=5*1e3,l=5*1e3;function f(E){return E.replace(/a=ice-options:trickle\s\n/g,"")}function m(E){console.warn(E)}class v extends d.Duplex{constructor(k){if(k=Object.assign({allowHalfOpen:!1},k),super(k),this._id=o(4).toString("hex").slice(0,7),this._debug("new peer %o",k),this.channelName=k.initiator?k.channelName||o(20).toString("hex"):null,this.initiator=k.initiator||!1,this.channelConfig=k.channelConfig||v.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},v.config,k.config),this.offerOptions=k.offerOptions||{},this.answerOptions=k.answerOptions||{},this.sdpTransform=k.sdpTransform||(C=>C),this.streams=k.streams||(k.stream?[k.stream]:[]),this.trickle=k.trickle!==void 0?k.trickle:!0,this.allowHalfTrickle=k.allowHalfTrickle!==void 0?k.allowHalfTrickle:!1,this.iceCompleteTimeout=k.iceCompleteTimeout||p,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=k.wrtc&&typeof k.wrtc=="object"?k.wrtc:a(),!this._wrtc)throw u(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(C){this.destroy(u(C,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=C=>{this._onIceCandidate(C)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(C=>{this.destroy(u(C,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=C=>{this._setupData(C)},this.streams&&this.streams.forEach(C=>{this.addStream(C)}),this._pc.ontrack=C=>{this._onTrack(C)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(k){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof k=="string")try{k=JSON.parse(k)}catch{k={}}this._debug("signal()"),k.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),k.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(k.transceiverRequest.kind,k.transceiverRequest.init)),k.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(k.candidate):this._pendingCandidates.push(k.candidate)),k.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(k)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(C=>{this._addIceCandidate(C)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(C=>{this.destroy(u(C,"ERR_SET_REMOTE_DESCRIPTION"))}),!k.sdp&&!k.candidate&&!k.renegotiate&&!k.transceiverRequest&&this.destroy(u(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(k){const C=new this._wrtc.RTCIceCandidate(k);this._pc.addIceCandidate(C).catch(N=>{!C.address||C.address.endsWith(".local")?m("Ignoring unsupported ICE candidate."):this.destroy(u(N,"ERR_ADD_ICE_CANDIDATE"))})}send(k){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(k)}}addTransceiver(k,C){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(k,C),this._needsNegotiation()}catch(N){this.destroy(u(N,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:k,init:C}})}}addStream(k){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),k.getTracks().forEach(C=>{this.addTrack(C,k)})}}addTrack(k,C){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const N=this._senderMap.get(k)||new Map;let P=N.get(C);if(!P)P=this._pc.addTrack(k,C),N.set(C,P),this._senderMap.set(k,N),this._needsNegotiation();else throw P.removed?u(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):u(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(k,C,N){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const P=this._senderMap.get(k),M=P?P.get(N):null;if(!M)throw u(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");C&&this._senderMap.set(C,P),M.replaceTrack!=null?M.replaceTrack(C):this.destroy(u(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(k,C){if(this.destroying)return;if(this.destroyed)throw u(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const N=this._senderMap.get(k),P=N?N.get(C):null;if(!P)throw u(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{P.removed=!0,this._pc.removeTrack(P)}catch(M){M.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(P):this.destroy(u(M,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(k){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),k.getTracks().forEach(C=>{this.removeTrack(C,k)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,s(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw u(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(k){this._destroy(k,()=>{})}_destroy(k,C){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",k&&(k.message||k)),s(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",k&&(k.message||k)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,k&&this.emit("error",k),this.emit("close"),C()}))}_setupData(k){if(!k.channel)return this.destroy(u(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=k.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=h),this.channelName=this._channel.label,this._channel.onmessage=N=>{this._onChannelMessage(N)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=N=>{const P=N.error instanceof Error?N.error:new Error(`Datachannel error: ${N.message} ${N.filename}:${N.lineno}:${N.colno}`);this.destroy(u(P,"ERR_DATA_CHANNEL"))};let C=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(C&&this._onChannelClose(),C=!0):C=!1},l)}_read(){}_write(k,C,N){if(this.destroyed)return N(u(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(k)}catch(P){return this.destroy(u(P,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>h?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=N):N(null)}else this._debug("write before connect"),this._chunk=k,this._cb=N}_onFinish(){if(this.destroyed)return;const k=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?k():this.once("connect",k)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(k=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(k.sdp=f(k.sdp)),k.sdp=this.sdpTransform(k.sdp);const C=()=>{if(this.destroyed)return;const M=this._pc.localDescription||k;this._debug("signal"),this.emit("signal",{type:M.type,sdp:M.sdp})},N=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?C():this.once("_iceComplete",C))},P=M=>{this.destroy(u(M,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(k).then(N).catch(P)}).catch(k=>{this.destroy(u(k,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(k=>{!k.mid&&k.sender.track&&!k.requested&&(k.requested=!0,this.addTransceiver(k.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(k=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(k.sdp=f(k.sdp)),k.sdp=this.sdpTransform(k.sdp);const C=()=>{if(this.destroyed)return;const M=this._pc.localDescription||k;this._debug("signal"),this.emit("signal",{type:M.type,sdp:M.sdp}),this.initiator||this._requestMissingTransceivers()},N=()=>{this.destroyed||(this.trickle||this._iceComplete?C():this.once("_iceComplete",C))},P=M=>{this.destroy(u(M,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(k).then(N).catch(P)}).catch(k=>{this.destroy(u(k,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(u(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const k=this._pc.iceConnectionState,C=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",k,C),this.emit("iceStateChange",k,C),(k==="connected"||k==="completed")&&(this._pcReady=!0,this._maybeReady()),k==="failed"&&this.destroy(u(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),k==="closed"&&this.destroy(u(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(k){const C=N=>(Object.prototype.toString.call(N.values)==="[object Array]"&&N.values.forEach(P=>{Object.assign(N,P)}),N);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(N=>{const P=[];N.forEach(M=>{P.push(C(M))}),k(null,P)},N=>k(N)):this._pc.getStats.length>0?this._pc.getStats(N=>{if(this.destroyed)return;const P=[];N.result().forEach(M=>{const L={};M.names().forEach($=>{L[$]=M.stat($)}),L.id=M.id,L.type=M.type,L.timestamp=M.timestamp,P.push(C(L))}),k(null,P)},N=>k(N)):k(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const k=()=>{this.destroyed||this.getStats((C,N)=>{if(this.destroyed)return;C&&(N=[]);const P={},M={},L={};let $=!1;N.forEach(Z=>{(Z.type==="remotecandidate"||Z.type==="remote-candidate")&&(P[Z.id]=Z),(Z.type==="localcandidate"||Z.type==="local-candidate")&&(M[Z.id]=Z),(Z.type==="candidatepair"||Z.type==="candidate-pair")&&(L[Z.id]=Z)});const H=Z=>{$=!0;let re=M[Z.localCandidateId];re&&(re.ip||re.address)?(this.localAddress=re.ip||re.address,this.localPort=Number(re.port)):re&&re.ipAddress?(this.localAddress=re.ipAddress,this.localPort=Number(re.portNumber)):typeof Z.googLocalAddress=="string"&&(re=Z.googLocalAddress.split(":"),this.localAddress=re[0],this.localPort=Number(re[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let Y=P[Z.remoteCandidateId];Y&&(Y.ip||Y.address)?(this.remoteAddress=Y.ip||Y.address,this.remotePort=Number(Y.port)):Y&&Y.ipAddress?(this.remoteAddress=Y.ipAddress,this.remotePort=Number(Y.portNumber)):typeof Z.googRemoteAddress=="string"&&(Y=Z.googRemoteAddress.split(":"),this.remoteAddress=Y[0],this.remotePort=Number(Y[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(N.forEach(Z=>{Z.type==="transport"&&Z.selectedCandidatePairId&&H(L[Z.selectedCandidatePairId]),(Z.type==="googCandidatePair"&&Z.googActiveConnection==="true"||(Z.type==="candidatepair"||Z.type==="candidate-pair")&&Z.selected)&&H(Z)}),!$&&(!Object.keys(L).length||Object.keys(M).length)){setTimeout(k,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(re){return this.destroy(u(re,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const Z=this._cb;this._cb=null,Z(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};k()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>h||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(k=>{this._pc.removeTrack(k),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(k){this.destroyed||(k.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:k.candidate.candidate,sdpMLineIndex:k.candidate.sdpMLineIndex,sdpMid:k.candidate.sdpMid}}):!k.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),k.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(k){if(this.destroyed)return;let C=k.data;C instanceof ArrayBuffer&&(C=c.from(C)),this.push(C)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const k=this._cb;this._cb=null,k(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(k){this.destroyed||k.streams.forEach(C=>{this._debug("on track"),this.emit("track",k.track,C),this._remoteTracks.push({track:k.track,stream:C}),!this._remoteStreams.some(N=>N.id===C.id)&&(this._remoteStreams.push(C),s(()=>{this._debug("on stream"),this.emit("stream",C)}))})}_debug(){const k=[].slice.call(arguments);k[0]="["+this._id+"] "+k[0],n.apply(null,k)}}v.WEBRTC_SUPPORT=!!a(),v.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},v.channelConfig={},i.exports=v},{buffer:171,debug:41,"err-code":45,"get-browser-rtc":46,"queue-microtask":100,randombytes:102,"readable-stream":117}],121:[function(e,i,t){var n=e("safe-buffer").Buffer,a=n.isEncoding||function(P){switch(P=""+P,P&&P.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(P){if(!P)return"utf8";for(var M;;)switch(P){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return P;default:if(M)return;P=(""+P).toLowerCase(),M=!0}}function d(P){var M=o(P);if(typeof M!="string"&&(n.isEncoding===a||!a(P)))throw new Error("Unknown encoding: "+P);return M||P}t.StringDecoder=s;function s(P){this.encoding=d(P);var M;switch(this.encoding){case"utf16le":this.text=m,this.end=v,M=4;break;case"utf8":this.fillLast=p,M=4;break;case"base64":this.text=E,this.end=k,M=3;break;default:this.write=C,this.end=N;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(M)}s.prototype.write=function(P){if(P.length===0)return"";var M,L;if(this.lastNeed){if(M=this.fillLast(P),M===void 0)return"";L=this.lastNeed,this.lastNeed=0}else L=0;return L<P.length?M?M+this.text(P,L):this.text(P,L):M||""},s.prototype.end=f,s.prototype.text=l,s.prototype.fillLast=function(P){if(this.lastNeed<=P.length)return P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,P.length),this.lastNeed-=P.length};function u(P){return P<=127?0:P>>5===6?2:P>>4===14?3:P>>3===30?4:P>>6===2?-1:-2}function c(P,M,L){var $=M.length-1;if($<L)return 0;var H=u(M[$]);return H>=0?(H>0&&(P.lastNeed=H-1),H):--$<L||H===-2?0:(H=u(M[$]),H>=0?(H>0&&(P.lastNeed=H-2),H):--$<L||H===-2?0:(H=u(M[$]),H>=0?(H>0&&(H===2?H=0:P.lastNeed=H-3),H):0))}function h(P,M,L){if((M[0]&192)!==128)return P.lastNeed=0,"";if(P.lastNeed>1&&M.length>1){if((M[1]&192)!==128)return P.lastNeed=1,"";if(P.lastNeed>2&&M.length>2&&(M[2]&192)!==128)return P.lastNeed=2,""}}function p(P){var M=this.lastTotal-this.lastNeed,L=h(this,P);if(L!==void 0)return L;if(this.lastNeed<=P.length)return P.copy(this.lastChar,M,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,M,0,P.length),this.lastNeed-=P.length}function l(P,M){var L=c(this,P,M);if(!this.lastNeed)return P.toString("utf8",M);this.lastTotal=L;var $=P.length-(L-this.lastNeed);return P.copy(this.lastChar,0,$),P.toString("utf8",M,$)}function f(P){var M=P&&P.length?this.write(P):"";return this.lastNeed?M+"":M}function m(P,M){if((P.length-M)%2===0){var L=P.toString("utf16le",M);if(L){var $=L.charCodeAt(L.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1],L.slice(0,-1)}return L}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=P[P.length-1],P.toString("utf16le",M,P.length-1)}function v(P){var M=P&&P.length?this.write(P):"";if(this.lastNeed){var L=this.lastTotal-this.lastNeed;return M+this.lastChar.toString("utf16le",0,L)}return M}function E(P,M){var L=(P.length-M)%3;return L===0?P.toString("base64",M):(this.lastNeed=3-L,this.lastTotal=3,L===1?this.lastChar[0]=P[P.length-1]:(this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1]),P.toString("base64",M,P.length-L))}function k(P){var M=P&&P.length?this.write(P):"";return this.lastNeed?M+this.lastChar.toString("base64",0,3-this.lastNeed):M}function C(P){return P.toString(this.encoding)}function N(P){return P&&P.length?this.write(P):""}},{"safe-buffer":118}],122:[function(e,i,t){(function(n){(function(){i.exports=a;function a(d,s){if(o("noDeprecation"))return d;var u=!1;function c(){if(!u){if(o("throwDeprecation"))throw new Error(s);o("traceDeprecation")?console.trace(s):console.warn(s),u=!0}return d.apply(this,arguments)}return c}function o(d){try{if(!n.localStorage)return!1}catch{return!1}var s=n.localStorage[d];return s==null?!1:String(s).toLowerCase()==="true"}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],123:[function(e,i,t){const n=t;n.bignum=e("bn.js"),n.define=e("./asn1/api").define,n.base=e("./asn1/base"),n.constants=e("./asn1/constants"),n.decoders=e("./asn1/decoders"),n.encoders=e("./asn1/encoders")},{"./asn1/api":124,"./asn1/base":126,"./asn1/constants":130,"./asn1/decoders":132,"./asn1/encoders":135,"bn.js":139}],124:[function(e,i,t){const n=e("./encoders"),a=e("./decoders"),o=e("inherits"),d=t;d.define=function(c,h){return new s(c,h)};function s(u,c){this.name=u,this.body=c,this.decoders={},this.encoders={}}s.prototype._createNamed=function(c){const h=this.name;function p(l){this._initNamed(l,h)}return o(p,c),p.prototype._initNamed=function(f,m){c.call(this,f,m)},new p(this)},s.prototype._getDecoder=function(c){return c=c||"der",this.decoders.hasOwnProperty(c)||(this.decoders[c]=this._createNamed(a[c])),this.decoders[c]},s.prototype.decode=function(c,h,p){return this._getDecoder(h).decode(c,p)},s.prototype._getEncoder=function(c){return c=c||"der",this.encoders.hasOwnProperty(c)||(this.encoders[c]=this._createNamed(n[c])),this.encoders[c]},s.prototype.encode=function(c,h,p){return this._getEncoder(h).encode(c,p)}},{"./decoders":132,"./encoders":135,inherits:233}],125:[function(e,i,t){const n=e("inherits"),a=e("../base/reporter").Reporter,o=e("safer-buffer").Buffer;function d(u,c){if(a.call(this,c),!o.isBuffer(u)){this.error("Input not Buffer");return}this.base=u,this.offset=0,this.length=u.length}n(d,a),t.DecoderBuffer=d,d.isDecoderBuffer=function(c){return c instanceof d?!0:typeof c=="object"&&o.isBuffer(c.base)&&c.constructor.name==="DecoderBuffer"&&typeof c.offset=="number"&&typeof c.length=="number"&&typeof c.save=="function"&&typeof c.restore=="function"&&typeof c.isEmpty=="function"&&typeof c.readUInt8=="function"&&typeof c.skip=="function"&&typeof c.raw=="function"},d.prototype.save=function(){return{offset:this.offset,reporter:a.prototype.save.call(this)}},d.prototype.restore=function(c){const h=new d(this.base);return h.offset=c.offset,h.length=this.offset,this.offset=c.offset,a.prototype.restore.call(this,c.reporter),h},d.prototype.isEmpty=function(){return this.offset===this.length},d.prototype.readUInt8=function(c){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(c||"DecoderBuffer overrun")},d.prototype.skip=function(c,h){if(!(this.offset+c<=this.length))return this.error(h||"DecoderBuffer overrun");const p=new d(this.base);return p._reporterState=this._reporterState,p.offset=this.offset,p.length=this.offset+c,this.offset+=c,p},d.prototype.raw=function(c){return this.base.slice(c?c.offset:this.offset,this.length)};function s(u,c){if(Array.isArray(u))this.length=0,this.value=u.map(function(h){return s.isEncoderBuffer(h)||(h=new s(h,c)),this.length+=h.length,h},this);else if(typeof u=="number"){if(!(0<=u&&u<=255))return c.error("non-byte EncoderBuffer value");this.value=u,this.length=1}else if(typeof u=="string")this.value=u,this.length=o.byteLength(u);else if(o.isBuffer(u))this.value=u,this.length=u.length;else return c.error("Unsupported type: "+typeof u)}t.EncoderBuffer=s,s.isEncoderBuffer=function(c){return c instanceof s?!0:typeof c=="object"&&c.constructor.name==="EncoderBuffer"&&typeof c.length=="number"&&typeof c.join=="function"},s.prototype.join=function(c,h){return c||(c=o.alloc(this.length)),h||(h=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(p){p.join(c,h),h+=p.length}):(typeof this.value=="number"?c[h]=this.value:typeof this.value=="string"?c.write(this.value,h):o.isBuffer(this.value)&&this.value.copy(c,h),h+=this.length)),c}},{"../base/reporter":128,inherits:233,"safer-buffer":280}],126:[function(e,i,t){const n=t;n.Reporter=e("./reporter").Reporter,n.DecoderBuffer=e("./buffer").DecoderBuffer,n.EncoderBuffer=e("./buffer").EncoderBuffer,n.Node=e("./node")},{"./buffer":125,"./node":127,"./reporter":128}],127:[function(e,i,t){const n=e("../base/reporter").Reporter,a=e("../base/buffer").EncoderBuffer,o=e("../base/buffer").DecoderBuffer,d=e("minimalistic-assert"),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s),c=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function h(l,f,m){const v={};this._baseState=v,v.name=m,v.enc=l,v.parent=f||null,v.children=null,v.tag=null,v.args=null,v.reverseArgs=null,v.choice=null,v.optional=!1,v.any=!1,v.obj=!1,v.use=null,v.useDecoder=null,v.key=null,v.default=null,v.explicit=null,v.implicit=null,v.contains=null,v.parent||(v.children=[],this._wrap())}i.exports=h;const p=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];h.prototype.clone=function(){const f=this._baseState,m={};p.forEach(function(E){m[E]=f[E]});const v=new this.constructor(m.parent);return v._baseState=m,v},h.prototype._wrap=function(){const f=this._baseState;u.forEach(function(m){this[m]=function(){const E=new this.constructor(this);return f.children.push(E),E[m].apply(E,arguments)}},this)},h.prototype._init=function(f){const m=this._baseState;d(m.parent===null),f.call(this),m.children=m.children.filter(function(v){return v._baseState.parent===this},this),d.equal(m.children.length,1,"Root node can have only one child")},h.prototype._useArgs=function(f){const m=this._baseState,v=f.filter(function(E){return E instanceof this.constructor},this);f=f.filter(function(E){return!(E instanceof this.constructor)},this),v.length!==0&&(d(m.children===null),m.children=v,v.forEach(function(E){E._baseState.parent=this},this)),f.length!==0&&(d(m.args===null),m.args=f,m.reverseArgs=f.map(function(E){if(typeof E!="object"||E.constructor!==Object)return E;const k={};return Object.keys(E).forEach(function(C){C==(C|0)&&(C|=0);const N=E[C];k[N]=C}),k}))},c.forEach(function(l){h.prototype[l]=function(){const m=this._baseState;throw new Error(l+" not implemented for encoding: "+m.enc)}}),s.forEach(function(l){h.prototype[l]=function(){const m=this._baseState,v=Array.prototype.slice.call(arguments);return d(m.tag===null),m.tag=l,this._useArgs(v),this}}),h.prototype.use=function(f){d(f);const m=this._baseState;return d(m.use===null),m.use=f,this},h.prototype.optional=function(){const f=this._baseState;return f.optional=!0,this},h.prototype.def=function(f){const m=this._baseState;return d(m.default===null),m.default=f,m.optional=!0,this},h.prototype.explicit=function(f){const m=this._baseState;return d(m.explicit===null&&m.implicit===null),m.explicit=f,this},h.prototype.implicit=function(f){const m=this._baseState;return d(m.explicit===null&&m.implicit===null),m.implicit=f,this},h.prototype.obj=function(){const f=this._baseState,m=Array.prototype.slice.call(arguments);return f.obj=!0,m.length!==0&&this._useArgs(m),this},h.prototype.key=function(f){const m=this._baseState;return d(m.key===null),m.key=f,this},h.prototype.any=function(){const f=this._baseState;return f.any=!0,this},h.prototype.choice=function(f){const m=this._baseState;return d(m.choice===null),m.choice=f,this._useArgs(Object.keys(f).map(function(v){return f[v]})),this},h.prototype.contains=function(f){const m=this._baseState;return d(m.use===null),m.contains=f,this},h.prototype._decode=function(f,m){const v=this._baseState;if(v.parent===null)return f.wrapResult(v.children[0]._decode(f,m));let E=v.default,k=!0,C=null;if(v.key!==null&&(C=f.enterKey(v.key)),v.optional){let P=null;if(v.explicit!==null?P=v.explicit:v.implicit!==null?P=v.implicit:v.tag!==null&&(P=v.tag),P===null&&!v.any){const M=f.save();try{v.choice===null?this._decodeGeneric(v.tag,f,m):this._decodeChoice(f,m),k=!0}catch{k=!1}f.restore(M)}else if(k=this._peekTag(f,P,v.any),f.isError(k))return k}let N;if(v.obj&&k&&(N=f.enterObject()),k){if(v.explicit!==null){const M=this._decodeTag(f,v.explicit);if(f.isError(M))return M;f=M}const P=f.offset;if(v.use===null&&v.choice===null){let M;v.any&&(M=f.save());const L=this._decodeTag(f,v.implicit!==null?v.implicit:v.tag,v.any);if(f.isError(L))return L;v.any?E=f.raw(M):f=L}if(m&&m.track&&v.tag!==null&&m.track(f.path(),P,f.length,"tagged"),m&&m.track&&v.tag!==null&&m.track(f.path(),f.offset,f.length,"content"),v.any||(v.choice===null?E=this._decodeGeneric(v.tag,f,m):E=this._decodeChoice(f,m)),f.isError(E))return E;if(!v.any&&v.choice===null&&v.children!==null&&v.children.forEach(function(L){L._decode(f,m)}),v.contains&&(v.tag==="octstr"||v.tag==="bitstr")){const M=new o(E);E=this._getUse(v.contains,f._reporterState.obj)._decode(M,m)}}return v.obj&&k&&(E=f.leaveObject(N)),v.key!==null&&(E!==null||k===!0)?f.leaveKey(C,v.key,E):C!==null&&f.exitKey(C),E},h.prototype._decodeGeneric=function(f,m,v){const E=this._baseState;return f==="seq"||f==="set"?null:f==="seqof"||f==="setof"?this._decodeList(m,f,E.args[0],v):/str$/.test(f)?this._decodeStr(m,f,v):f==="objid"&&E.args?this._decodeObjid(m,E.args[0],E.args[1],v):f==="objid"?this._decodeObjid(m,null,null,v):f==="gentime"||f==="utctime"?this._decodeTime(m,f,v):f==="null_"?this._decodeNull(m,v):f==="bool"?this._decodeBool(m,v):f==="objDesc"?this._decodeStr(m,f,v):f==="int"||f==="enum"?this._decodeInt(m,E.args&&E.args[0],v):E.use!==null?this._getUse(E.use,m._reporterState.obj)._decode(m,v):m.error("unknown tag: "+f)},h.prototype._getUse=function(f,m){const v=this._baseState;return v.useDecoder=this._use(f,m),d(v.useDecoder._baseState.parent===null),v.useDecoder=v.useDecoder._baseState.children[0],v.implicit!==v.useDecoder._baseState.implicit&&(v.useDecoder=v.useDecoder.clone(),v.useDecoder._baseState.implicit=v.implicit),v.useDecoder},h.prototype._decodeChoice=function(f,m){const v=this._baseState;let E=null,k=!1;return Object.keys(v.choice).some(function(C){const N=f.save(),P=v.choice[C];try{const M=P._decode(f,m);if(f.isError(M))return!1;E={type:C,value:M},k=!0}catch{return f.restore(N),!1}return!0},this),k?E:f.error("Choice not matched")},h.prototype._createEncoderBuffer=function(f){return new a(f,this.reporter)},h.prototype._encode=function(f,m,v){const E=this._baseState;if(E.default!==null&&E.default===f)return;const k=this._encodeValue(f,m,v);if(k!==void 0&&!this._skipDefault(k,m,v))return k},h.prototype._encodeValue=function(f,m,v){const E=this._baseState;if(E.parent===null)return E.children[0]._encode(f,m||new n);let k=null;if(this.reporter=m,E.optional&&f===void 0)if(E.default!==null)f=E.default;else return;let C=null,N=!1;if(E.any)k=this._createEncoderBuffer(f);else if(E.choice)k=this._encodeChoice(f,m);else if(E.contains)C=this._getUse(E.contains,v)._encode(f,m),N=!0;else if(E.children)C=E.children.map(function(P){if(P._baseState.tag==="null_")return P._encode(null,m,f);if(P._baseState.key===null)return m.error("Child should have a key");const M=m.enterKey(P._baseState.key);if(typeof f!="object")return m.error("Child expected, but input is not object");const L=P._encode(f[P._baseState.key],m,f);return m.leaveKey(M),L},this).filter(function(P){return P}),C=this._createEncoderBuffer(C);else if(E.tag==="seqof"||E.tag==="setof"){if(!(E.args&&E.args.length===1))return m.error("Too many args for : "+E.tag);if(!Array.isArray(f))return m.error("seqof/setof, but data is not Array");const P=this.clone();P._baseState.implicit=null,C=this._createEncoderBuffer(f.map(function(M){const L=this._baseState;return this._getUse(L.args[0],f)._encode(M,m)},P))}else E.use!==null?k=this._getUse(E.use,v)._encode(f,m):(C=this._encodePrimitive(E.tag,f),N=!0);if(!E.any&&E.choice===null){const P=E.implicit!==null?E.implicit:E.tag,M=E.implicit===null?"universal":"context";P===null?E.use===null&&m.error("Tag could be omitted only for .use()"):E.use===null&&(k=this._encodeComposite(P,N,M,C))}return E.explicit!==null&&(k=this._encodeComposite(E.explicit,!1,"context",k)),k},h.prototype._encodeChoice=function(f,m){const v=this._baseState,E=v.choice[f.type];return E||d(!1,f.type+" not found in "+JSON.stringify(Object.keys(v.choice))),E._encode(f.value,m)},h.prototype._encodePrimitive=function(f,m){const v=this._baseState;if(/str$/.test(f))return this._encodeStr(m,f);if(f==="objid"&&v.args)return this._encodeObjid(m,v.reverseArgs[0],v.args[1]);if(f==="objid")return this._encodeObjid(m,null,null);if(f==="gentime"||f==="utctime")return this._encodeTime(m,f);if(f==="null_")return this._encodeNull();if(f==="int"||f==="enum")return this._encodeInt(m,v.args&&v.reverseArgs[0]);if(f==="bool")return this._encodeBool(m);if(f==="objDesc")return this._encodeStr(m,f);throw new Error("Unsupported tag: "+f)},h.prototype._isNumstr=function(f){return/^[0-9 ]*$/.test(f)},h.prototype._isPrintstr=function(f){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(f)}},{"../base/buffer":125,"../base/reporter":128,"minimalistic-assert":241}],128:[function(e,i,t){const n=e("inherits");function a(d){this._reporterState={obj:null,path:[],options:d||{},errors:[]}}t.Reporter=a,a.prototype.isError=function(s){return s instanceof o},a.prototype.save=function(){const s=this._reporterState;return{obj:s.obj,pathLen:s.path.length}},a.prototype.restore=function(s){const u=this._reporterState;u.obj=s.obj,u.path=u.path.slice(0,s.pathLen)},a.prototype.enterKey=function(s){return this._reporterState.path.push(s)},a.prototype.exitKey=function(s){const u=this._reporterState;u.path=u.path.slice(0,s-1)},a.prototype.leaveKey=function(s,u,c){const h=this._reporterState;this.exitKey(s),h.obj!==null&&(h.obj[u]=c)},a.prototype.path=function(){return this._reporterState.path.join("/")},a.prototype.enterObject=function(){const s=this._reporterState,u=s.obj;return s.obj={},u},a.prototype.leaveObject=function(s){const u=this._reporterState,c=u.obj;return u.obj=s,c},a.prototype.error=function(s){let u;const c=this._reporterState,h=s instanceof o;if(h?u=s:u=new o(c.path.map(function(p){return"["+JSON.stringify(p)+"]"}).join(""),s.message||s,s.stack),!c.options.partial)throw u;return h||c.errors.push(u),u},a.prototype.wrapResult=function(s){const u=this._reporterState;return u.options.partial?{result:this.isError(s)?null:s,errors:u.errors}:s};function o(d,s){this.path=d,this.rethrow(s)}n(o,Error),o.prototype.rethrow=function(s){if(this.message=s+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,o),!this.stack)try{throw new Error(this.message)}catch(u){this.stack=u.stack}return this}},{inherits:233}],129:[function(e,i,t){function n(a){const o={};return Object.keys(a).forEach(function(d){(d|0)==d&&(d=d|0);const s=a[d];o[s]=d}),o}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n(t.tag)},{}],130:[function(e,i,t){const n=t;n._reverse=function(o){const d={};return Object.keys(o).forEach(function(s){(s|0)==s&&(s=s|0);const u=o[s];d[u]=s}),d},n.der=e("./der")},{"./der":129}],131:[function(e,i,t){const n=e("inherits"),a=e("bn.js"),o=e("../base/buffer").DecoderBuffer,d=e("../base/node"),s=e("../constants/der");function u(l){this.enc="der",this.name=l.name,this.entity=l,this.tree=new c,this.tree._init(l.body)}i.exports=u,u.prototype.decode=function(f,m){return o.isDecoderBuffer(f)||(f=new o(f,m)),this.tree._decode(f,m)};function c(l){d.call(this,"der",l)}n(c,d),c.prototype._peekTag=function(f,m,v){if(f.isEmpty())return!1;const E=f.save(),k=h(f,'Failed to peek tag: "'+m+'"');return f.isError(k)?k:(f.restore(E),k.tag===m||k.tagStr===m||k.tagStr+"of"===m||v)},c.prototype._decodeTag=function(f,m,v){const E=h(f,'Failed to decode tag of "'+m+'"');if(f.isError(E))return E;let k=p(f,E.primitive,'Failed to get length of "'+m+'"');if(f.isError(k))return k;if(!v&&E.tag!==m&&E.tagStr!==m&&E.tagStr+"of"!==m)return f.error('Failed to match tag: "'+m+'"');if(E.primitive||k!==null)return f.skip(k,'Failed to match body of: "'+m+'"');const C=f.save(),N=this._skipUntilEnd(f,'Failed to skip indefinite length body: "'+this.tag+'"');return f.isError(N)?N:(k=f.offset-C.offset,f.restore(C),f.skip(k,'Failed to match body of: "'+m+'"'))},c.prototype._skipUntilEnd=function(f,m){for(;;){const v=h(f,m);if(f.isError(v))return v;const E=p(f,v.primitive,m);if(f.isError(E))return E;let k;if(v.primitive||E!==null?k=f.skip(E):k=this._skipUntilEnd(f,m),f.isError(k))return k;if(v.tagStr==="end")break}},c.prototype._decodeList=function(f,m,v,E){const k=[];for(;!f.isEmpty();){const C=this._peekTag(f,"end");if(f.isError(C))return C;const N=v.decode(f,"der",E);if(f.isError(N)&&C)break;k.push(N)}return k},c.prototype._decodeStr=function(f,m){if(m==="bitstr"){const v=f.readUInt8();return f.isError(v)?v:{unused:v,data:f.raw()}}else if(m==="bmpstr"){const v=f.raw();if(v.length%2===1)return f.error("Decoding of string type: bmpstr length mismatch");let E="";for(let k=0;k<v.length/2;k++)E+=String.fromCharCode(v.readUInt16BE(k*2));return E}else if(m==="numstr"){const v=f.raw().toString("ascii");return this._isNumstr(v)?v:f.error("Decoding of string type: numstr unsupported characters")}else{if(m==="octstr")return f.raw();if(m==="objDesc")return f.raw();if(m==="printstr"){const v=f.raw().toString("ascii");return this._isPrintstr(v)?v:f.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(m)?f.raw().toString():f.error("Decoding of string type: "+m+" unsupported")}},c.prototype._decodeObjid=function(f,m,v){let E;const k=[];let C=0,N=0;for(;!f.isEmpty();)N=f.readUInt8(),C<<=7,C|=N&127,N&128||(k.push(C),C=0);N&128&&k.push(C);const P=k[0]/40|0,M=k[0]%40;if(v?E=k:E=[P,M].concat(k.slice(1)),m){let L=m[E.join(" ")];L===void 0&&(L=m[E.join(".")]),L!==void 0&&(E=L)}return E},c.prototype._decodeTime=function(f,m){const v=f.raw().toString();let E,k,C,N,P,M;if(m==="gentime")E=v.slice(0,4)|0,k=v.slice(4,6)|0,C=v.slice(6,8)|0,N=v.slice(8,10)|0,P=v.slice(10,12)|0,M=v.slice(12,14)|0;else if(m==="utctime")E=v.slice(0,2)|0,k=v.slice(2,4)|0,C=v.slice(4,6)|0,N=v.slice(6,8)|0,P=v.slice(8,10)|0,M=v.slice(10,12)|0,E<70?E=2e3+E:E=1900+E;else return f.error("Decoding "+m+" time is not supported yet");return Date.UTC(E,k-1,C,N,P,M,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(f){const m=f.readUInt8();return f.isError(m)?m:m!==0},c.prototype._decodeInt=function(f,m){const v=f.raw();let E=new a(v);return m&&(E=m[E.toString(10)]||E),E},c.prototype._use=function(f,m){return typeof f=="function"&&(f=f(m)),f._getDecoder("der").tree};function h(l,f){let m=l.readUInt8(f);if(l.isError(m))return m;const v=s.tagClass[m>>6],E=(m&32)===0;if((m&31)===31){let C=m;for(m=0;(C&128)===128;){if(C=l.readUInt8(f),l.isError(C))return C;m<<=7,m|=C&127}}else m&=31;const k=s.tag[m];return{cls:v,primitive:E,tag:m,tagStr:k}}function p(l,f,m){let v=l.readUInt8(m);if(l.isError(v))return v;if(!f&&v===128)return null;if(!(v&128))return v;const E=v&127;if(E>4)return l.error("length octect is too long");v=0;for(let k=0;k<E;k++){v<<=8;const C=l.readUInt8(m);if(l.isError(C))return C;v|=C}return v}},{"../base/buffer":125,"../base/node":127,"../constants/der":129,"bn.js":139,inherits:233}],132:[function(e,i,t){const n=t;n.der=e("./der"),n.pem=e("./pem")},{"./der":131,"./pem":133}],133:[function(e,i,t){const n=e("inherits"),a=e("safer-buffer").Buffer,o=e("./der");function d(s){o.call(this,s),this.enc="pem"}n(d,o),i.exports=d,d.prototype.decode=function(u,c){const h=u.toString().split(/[\r\n]+/g),p=c.label.toUpperCase(),l=/^-----(BEGIN|END) ([^-]+)-----$/;let f=-1,m=-1;for(let k=0;k<h.length;k++){const C=h[k].match(l);if(C!==null&&C[2]===p)if(f===-1){if(C[1]!=="BEGIN")break;f=k}else{if(C[1]!=="END")break;m=k;break}}if(f===-1||m===-1)throw new Error("PEM section not found for: "+p);const v=h.slice(f+1,m).join("");v.replace(/[^a-z0-9+/=]+/gi,"");const E=a.from(v,"base64");return o.prototype.decode.call(this,E,c)}},{"./der":131,inherits:233,"safer-buffer":280}],134:[function(e,i,t){const n=e("inherits"),a=e("safer-buffer").Buffer,o=e("../base/node"),d=e("../constants/der");function s(p){this.enc="der",this.name=p.name,this.entity=p,this.tree=new u,this.tree._init(p.body)}i.exports=s,s.prototype.encode=function(l,f){return this.tree._encode(l,f).join()};function u(p){o.call(this,"der",p)}n(u,o),u.prototype._encodeComposite=function(l,f,m,v){const E=h(l,f,m,this.reporter);if(v.length<128){const N=a.alloc(2);return N[0]=E,N[1]=v.length,this._createEncoderBuffer([N,v])}let k=1;for(let N=v.length;N>=256;N>>=8)k++;const C=a.alloc(1+1+k);C[0]=E,C[1]=128|k;for(let N=1+k,P=v.length;P>0;N--,P>>=8)C[N]=P&255;return this._createEncoderBuffer([C,v])},u.prototype._encodeStr=function(l,f){if(f==="bitstr")return this._createEncoderBuffer([l.unused|0,l.data]);if(f==="bmpstr"){const m=a.alloc(l.length*2);for(let v=0;v<l.length;v++)m.writeUInt16BE(l.charCodeAt(v),v*2);return this._createEncoderBuffer(m)}else return f==="numstr"?this._isNumstr(l)?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: numstr supports only digits and space"):f==="printstr"?this._isPrintstr(l)?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(f)?this._createEncoderBuffer(l):f==="objDesc"?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: "+f+" unsupported")},u.prototype._encodeObjid=function(l,f,m){if(typeof l=="string"){if(!f)return this.reporter.error("string objid given, but no values map found");if(!f.hasOwnProperty(l))return this.reporter.error("objid not found in values map");l=f[l].split(/[\s.]+/g);for(let C=0;C<l.length;C++)l[C]|=0}else if(Array.isArray(l)){l=l.slice();for(let C=0;C<l.length;C++)l[C]|=0}if(!Array.isArray(l))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(l));if(!m){if(l[1]>=40)return this.reporter.error("Second objid identifier OOB");l.splice(0,2,l[0]*40+l[1])}let v=0;for(let C=0;C<l.length;C++){let N=l[C];for(v++;N>=128;N>>=7)v++}const E=a.alloc(v);let k=E.length-1;for(let C=l.length-1;C>=0;C--){let N=l[C];for(E[k--]=N&127;(N>>=7)>0;)E[k--]=128|N&127}return this._createEncoderBuffer(E)};function c(p){return p<10?"0"+p:p}u.prototype._encodeTime=function(l,f){let m;const v=new Date(l);return f==="gentime"?m=[c(v.getUTCFullYear()),c(v.getUTCMonth()+1),c(v.getUTCDate()),c(v.getUTCHours()),c(v.getUTCMinutes()),c(v.getUTCSeconds()),"Z"].join(""):f==="utctime"?m=[c(v.getUTCFullYear()%100),c(v.getUTCMonth()+1),c(v.getUTCDate()),c(v.getUTCHours()),c(v.getUTCMinutes()),c(v.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+f+" time is not supported yet"),this._encodeStr(m,"octstr")},u.prototype._encodeNull=function(){return this._createEncoderBuffer("")},u.prototype._encodeInt=function(l,f){if(typeof l=="string"){if(!f)return this.reporter.error("String int or enum given, but no values map");if(!f.hasOwnProperty(l))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(l));l=f[l]}if(typeof l!="number"&&!a.isBuffer(l)){const E=l.toArray();!l.sign&&E[0]&128&&E.unshift(0),l=a.from(E)}if(a.isBuffer(l)){let E=l.length;l.length===0&&E++;const k=a.alloc(E);return l.copy(k),l.length===0&&(k[0]=0),this._createEncoderBuffer(k)}if(l<128)return this._createEncoderBuffer(l);if(l<256)return this._createEncoderBuffer([0,l]);let m=1;for(let E=l;E>=256;E>>=8)m++;const v=new Array(m);for(let E=v.length-1;E>=0;E--)v[E]=l&255,l>>=8;return v[0]&128&&v.unshift(0),this._createEncoderBuffer(a.from(v))},u.prototype._encodeBool=function(l){return this._createEncoderBuffer(l?255:0)},u.prototype._use=function(l,f){return typeof l=="function"&&(l=l(f)),l._getEncoder("der").tree},u.prototype._skipDefault=function(l,f,m){const v=this._baseState;let E;if(v.default===null)return!1;const k=l.join();if(v.defaultBuffer===void 0&&(v.defaultBuffer=this._encodeValue(v.default,f,m).join()),k.length!==v.defaultBuffer.length)return!1;for(E=0;E<k.length;E++)if(k[E]!==v.defaultBuffer[E])return!1;return!0};function h(p,l,f,m){let v;if(p==="seqof"?p="seq":p==="setof"&&(p="set"),d.tagByName.hasOwnProperty(p))v=d.tagByName[p];else if(typeof p=="number"&&(p|0)===p)v=p;else return m.error("Unknown tag: "+p);return v>=31?m.error("Multi-octet tag encoding unsupported"):(l||(v|=32),v|=d.tagClassByName[f||"universal"]<<6,v)}},{"../base/node":127,"../constants/der":129,inherits:233,"safer-buffer":280}],135:[function(e,i,t){const n=t;n.der=e("./der"),n.pem=e("./pem")},{"./der":134,"./pem":136}],136:[function(e,i,t){const n=e("inherits"),a=e("./der");function o(d){a.call(this,d),this.enc="pem"}n(o,a),i.exports=o,o.prototype.encode=function(s,u){const h=a.prototype.encode.call(this,s).toString("base64"),p=["-----BEGIN "+u.label+"-----"];for(let l=0;l<h.length;l+=64)p.push(h.slice(l,l+64));return p.push("-----END "+u.label+"-----"),p.join(`
`)}},{"./der":134,inherits:233}],137:[function(e,i,t){(function(n){(function(){var a=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o=typeof globalThis>"u"?n:globalThis;i.exports=function(){for(var s=[],u=0;u<a.length;u++)typeof o[a[u]]=="function"&&(s[s.length]=a[u]);return s}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],138:[function(e,i,t){t.byteLength=h,t.toByteArray=l,t.fromByteArray=v;for(var n=[],a=[],o=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=d.length;s<u;++s)n[s]=d[s],a[d.charCodeAt(s)]=s;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function c(E){var k=E.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=E.indexOf("=");C===-1&&(C=k);var N=C===k?0:4-C%4;return[C,N]}function h(E){var k=c(E),C=k[0],N=k[1];return(C+N)*3/4-N}function p(E,k,C){return(k+C)*3/4-C}function l(E){var k,C=c(E),N=C[0],P=C[1],M=new o(p(E,N,P)),L=0,$=P>0?N-4:N,H;for(H=0;H<$;H+=4)k=a[E.charCodeAt(H)]<<18|a[E.charCodeAt(H+1)]<<12|a[E.charCodeAt(H+2)]<<6|a[E.charCodeAt(H+3)],M[L++]=k>>16&255,M[L++]=k>>8&255,M[L++]=k&255;return P===2&&(k=a[E.charCodeAt(H)]<<2|a[E.charCodeAt(H+1)]>>4,M[L++]=k&255),P===1&&(k=a[E.charCodeAt(H)]<<10|a[E.charCodeAt(H+1)]<<4|a[E.charCodeAt(H+2)]>>2,M[L++]=k>>8&255,M[L++]=k&255),M}function f(E){return n[E>>18&63]+n[E>>12&63]+n[E>>6&63]+n[E&63]}function m(E,k,C){for(var N,P=[],M=k;M<C;M+=3)N=(E[M]<<16&16711680)+(E[M+1]<<8&65280)+(E[M+2]&255),P.push(f(N));return P.join("")}function v(E){for(var k,C=E.length,N=C%3,P=[],M=16383,L=0,$=C-N;L<$;L+=M)P.push(m(E,L,L+M>$?$:L+M));return N===1?(k=E[C-1],P.push(n[k>>2]+n[k<<4&63]+"==")):N===2&&(k=(E[C-2]<<8)+E[C-1],P.push(n[k>>10]+n[k>>4&63]+n[k<<2&63]+"=")),P.join("")}},{}],139:[function(e,i,t){(function(n,a){function o(D,b){if(!D)throw new Error(b||"Assertion failed")}function d(D,b){D.super_=b;var _=function(){};_.prototype=b.prototype,D.prototype=new _,D.prototype.constructor=D}function s(D,b,_){if(s.isBN(D))return D;this.negative=0,this.words=null,this.length=0,this.red=null,D!==null&&((b==="le"||b==="be")&&(_=b,b=10),this._init(D||0,b||10,_||"be"))}typeof n=="object"?n.exports=s:a.BN=s,s.BN=s,s.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=e("buffer").Buffer}catch{}s.isBN=function(b){return b instanceof s?!0:b!==null&&typeof b=="object"&&b.constructor.wordSize===s.wordSize&&Array.isArray(b.words)},s.max=function(b,_){return b.cmp(_)>0?b:_},s.min=function(b,_){return b.cmp(_)<0?b:_},s.prototype._init=function(b,_,g){if(typeof b=="number")return this._initNumber(b,_,g);if(typeof b=="object")return this._initArray(b,_,g);_==="hex"&&(_=16),o(_===(_|0)&&_>=2&&_<=36),b=b.toString().replace(/\s+/g,"");var w=0;b[0]==="-"&&(w++,this.negative=1),w<b.length&&(_===16?this._parseHex(b,w,g):(this._parseBase(b,_,w),g==="le"&&this._initArray(this.toArray(),_,g)))},s.prototype._initNumber=function(b,_,g){b<0&&(this.negative=1,b=-b),b<67108864?(this.words=[b&67108863],this.length=1):b<4503599627370496?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(o(b<9007199254740992),this.words=[b&67108863,b/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),_,g)},s.prototype._initArray=function(b,_,g){if(o(typeof b.length=="number"),b.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var T,A,J=0;if(g==="be")for(w=b.length-1,T=0;w>=0;w-=3)A=b[w]|b[w-1]<<8|b[w-2]<<16,this.words[T]|=A<<J&67108863,this.words[T+1]=A>>>26-J&67108863,J+=24,J>=26&&(J-=26,T++);else if(g==="le")for(w=0,T=0;w<b.length;w+=3)A=b[w]|b[w+1]<<8|b[w+2]<<16,this.words[T]|=A<<J&67108863,this.words[T+1]=A>>>26-J&67108863,J+=24,J>=26&&(J-=26,T++);return this.strip()};function c(D,b){var _=D.charCodeAt(b);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function h(D,b,_){var g=c(D,_);return _-1>=b&&(g|=c(D,_-1)<<4),g}s.prototype._parseHex=function(b,_,g){this.length=Math.ceil((b.length-_)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var T=0,A=0,J;if(g==="be")for(w=b.length-1;w>=_;w-=2)J=h(b,_,w)<<T,this.words[A]|=J&67108863,T>=18?(T-=18,A+=1,this.words[A]|=J>>>26):T+=8;else{var G=b.length-_;for(w=G%2===0?_+1:_;w<b.length;w+=2)J=h(b,_,w)<<T,this.words[A]|=J&67108863,T>=18?(T-=18,A+=1,this.words[A]|=J>>>26):T+=8}this.strip()};function p(D,b,_,g){for(var w=0,T=Math.min(D.length,_),A=b;A<T;A++){var J=D.charCodeAt(A)-48;w*=g,J>=49?w+=J-49+10:J>=17?w+=J-17+10:w+=J}return w}s.prototype._parseBase=function(b,_,g){this.words=[0],this.length=1;for(var w=0,T=1;T<=67108863;T*=_)w++;w--,T=T/_|0;for(var A=b.length-g,J=A%w,G=Math.min(A,A-J)+g,I=0,V=g;V<G;V+=w)I=p(b,V,V+w,_),this.imuln(T),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(J!==0){var x=1;for(I=p(b,V,b.length,_),V=0;V<J;V++)x*=_;this.imuln(x),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this.strip()},s.prototype.copy=function(b){b.words=new Array(this.length);for(var _=0;_<this.length;_++)b.words[_]=this.words[_];b.length=this.length,b.negative=this.negative,b.red=this.red},s.prototype.clone=function(){var b=new s(null);return this.copy(b),b},s.prototype._expand=function(b){for(;this.length<b;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],m=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(b,_){b=b||10,_=_|0||1;var g;if(b===16||b==="hex"){g="";for(var w=0,T=0,A=0;A<this.length;A++){var J=this.words[A],G=((J<<w|T)&16777215).toString(16);T=J>>>24-w&16777215,T!==0||A!==this.length-1?g=l[6-G.length]+G+g:g=G+g,w+=2,w>=26&&(w-=26,A--)}for(T!==0&&(g=T.toString(16)+g);g.length%_!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(b===(b|0)&&b>=2&&b<=36){var I=f[b],V=m[b];g="";var x=this.clone();for(x.negative=0;!x.isZero();){var z=x.modn(V).toString(b);x=x.idivn(V),x.isZero()?g=z+g:g=l[I-z.length]+z+g}for(this.isZero()&&(g="0"+g);g.length%_!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}o(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var b=this.words[0];return this.length===2?b+=this.words[1]*67108864:this.length===3&&this.words[2]===1?b+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-b:b},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(b,_){return o(typeof u<"u"),this.toArrayLike(u,b,_)},s.prototype.toArray=function(b,_){return this.toArrayLike(Array,b,_)},s.prototype.toArrayLike=function(b,_,g){var w=this.byteLength(),T=g||Math.max(1,w);o(w<=T,"byte array longer than desired length"),o(T>0,"Requested array length <= 0"),this.strip();var A=_==="le",J=new b(T),G,I,V=this.clone();if(A){for(I=0;!V.isZero();I++)G=V.andln(255),V.iushrn(8),J[I]=G;for(;I<T;I++)J[I]=0}else{for(I=0;I<T-w;I++)J[I]=0;for(I=0;!V.isZero();I++)G=V.andln(255),V.iushrn(8),J[T-I-1]=G}return J},Math.clz32?s.prototype._countBits=function(b){return 32-Math.clz32(b)}:s.prototype._countBits=function(b){var _=b,g=0;return _>=4096&&(g+=13,_>>>=13),_>=64&&(g+=7,_>>>=7),_>=8&&(g+=4,_>>>=4),_>=2&&(g+=2,_>>>=2),g+_},s.prototype._zeroBits=function(b){if(b===0)return 26;var _=b,g=0;return _&8191||(g+=13,_>>>=13),_&127||(g+=7,_>>>=7),_&15||(g+=4,_>>>=4),_&3||(g+=2,_>>>=2),_&1||g++,g},s.prototype.bitLength=function(){var b=this.words[this.length-1],_=this._countBits(b);return(this.length-1)*26+_};function v(D){for(var b=new Array(D.bitLength()),_=0;_<b.length;_++){var g=_/26|0,w=_%26;b[_]=(D.words[g]&1<<w)>>>w}return b}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,_=0;_<this.length;_++){var g=this._zeroBits(this.words[_]);if(b+=g,g!==26)break}return b},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(b){return this.negative!==0?this.abs().inotn(b).iaddn(1):this.clone()},s.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var _=0;_<b.length;_++)this.words[_]=this.words[_]|b.words[_];return this.strip()},s.prototype.ior=function(b){return o((this.negative|b.negative)===0),this.iuor(b)},s.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)},s.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)},s.prototype.iuand=function(b){var _;this.length>b.length?_=b:_=this;for(var g=0;g<_.length;g++)this.words[g]=this.words[g]&b.words[g];return this.length=_.length,this.strip()},s.prototype.iand=function(b){return o((this.negative|b.negative)===0),this.iuand(b)},s.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)},s.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)},s.prototype.iuxor=function(b){var _,g;this.length>b.length?(_=this,g=b):(_=b,g=this);for(var w=0;w<g.length;w++)this.words[w]=_.words[w]^g.words[w];if(this!==_)for(;w<_.length;w++)this.words[w]=_.words[w];return this.length=_.length,this.strip()},s.prototype.ixor=function(b){return o((this.negative|b.negative)===0),this.iuxor(b)},s.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)},s.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)},s.prototype.inotn=function(b){o(typeof b=="number"&&b>=0);var _=Math.ceil(b/26)|0,g=b%26;this._expand(_),g>0&&_--;for(var w=0;w<_;w++)this.words[w]=~this.words[w]&67108863;return g>0&&(this.words[w]=~this.words[w]&67108863>>26-g),this.strip()},s.prototype.notn=function(b){return this.clone().inotn(b)},s.prototype.setn=function(b,_){o(typeof b=="number"&&b>=0);var g=b/26|0,w=b%26;return this._expand(g+1),_?this.words[g]=this.words[g]|1<<w:this.words[g]=this.words[g]&~(1<<w),this.strip()},s.prototype.iadd=function(b){var _;if(this.negative!==0&&b.negative===0)return this.negative=0,_=this.isub(b),this.negative^=1,this._normSign();if(this.negative===0&&b.negative!==0)return b.negative=0,_=this.isub(b),b.negative=1,_._normSign();var g,w;this.length>b.length?(g=this,w=b):(g=b,w=this);for(var T=0,A=0;A<w.length;A++)_=(g.words[A]|0)+(w.words[A]|0)+T,this.words[A]=_&67108863,T=_>>>26;for(;T!==0&&A<g.length;A++)_=(g.words[A]|0)+T,this.words[A]=_&67108863,T=_>>>26;if(this.length=g.length,T!==0)this.words[this.length]=T,this.length++;else if(g!==this)for(;A<g.length;A++)this.words[A]=g.words[A];return this},s.prototype.add=function(b){var _;return b.negative!==0&&this.negative===0?(b.negative=0,_=this.sub(b),b.negative^=1,_):b.negative===0&&this.negative!==0?(this.negative=0,_=b.sub(this),this.negative=1,_):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)},s.prototype.isub=function(b){if(b.negative!==0){b.negative=0;var _=this.iadd(b);return b.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();var g=this.cmp(b);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,T;g>0?(w=this,T=b):(w=b,T=this);for(var A=0,J=0;J<T.length;J++)_=(w.words[J]|0)-(T.words[J]|0)+A,A=_>>26,this.words[J]=_&67108863;for(;A!==0&&J<w.length;J++)_=(w.words[J]|0)+A,A=_>>26,this.words[J]=_&67108863;if(A===0&&J<w.length&&w!==this)for(;J<w.length;J++)this.words[J]=w.words[J];return this.length=Math.max(this.length,J),w!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(b){return this.clone().isub(b)};function E(D,b,_){_.negative=b.negative^D.negative;var g=D.length+b.length|0;_.length=g,g=g-1|0;var w=D.words[0]|0,T=b.words[0]|0,A=w*T,J=A&67108863,G=A/67108864|0;_.words[0]=J;for(var I=1;I<g;I++){for(var V=G>>>26,x=G&67108863,z=Math.min(I,b.length-1),ie=Math.max(0,I-D.length+1);ie<=z;ie++){var se=I-ie|0;w=D.words[se]|0,T=b.words[ie]|0,A=w*T+x,V+=A/67108864|0,x=A&67108863}_.words[I]=x|0,G=V|0}return G!==0?_.words[I]=G|0:_.length--,_.strip()}var k=function(b,_,g){var w=b.words,T=_.words,A=g.words,J=0,G,I,V,x=w[0]|0,z=x&8191,ie=x>>>13,se=w[1]|0,pe=se&8191,be=se>>>13,Ee=w[2]|0,oe=Ee&8191,ce=Ee>>>13,ge=w[3]|0,ke=ge&8191,fe=ge>>>13,ee=w[4]|0,te=ee&8191,Q=ee>>>13,U=w[5]|0,W=U&8191,X=U>>>13,de=w[6]|0,ve=de&8191,Se=de>>>13,he=w[7]|0,y=he&8191,F=he>>>13,q=w[8]|0,ue=q&8191,j=q>>>13,S=w[9]|0,B=S&8191,K=S>>>13,me=T[0]|0,ae=me&8191,_e=me>>>13,Oe=T[1]|0,Pe=Oe&8191,Ue=Oe>>>13,De=T[2]|0,Ae=De&8191,Re=De>>>13,We=T[3]|0,Le=We&8191,Be=We>>>13,He=T[4]|0,Me=He&8191,qe=He>>>13,Qe=T[5]|0,Fe=Qe&8191,Ye=Qe>>>13,Xe=T[6]|0,Je=Xe&8191,je=Xe>>>13,ze=T[7]|0,Ve=ze&8191,et=ze>>>13,tt=T[8]|0,Ge=tt&8191,rt=tt>>>13,it=T[9]|0,xe=it&8191,nt=it>>>13;g.negative=b.negative^_.negative,g.length=19,G=Math.imul(z,ae),I=Math.imul(z,_e),I=I+Math.imul(ie,ae)|0,V=Math.imul(ie,_e);var Ke=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,G=Math.imul(pe,ae),I=Math.imul(pe,_e),I=I+Math.imul(be,ae)|0,V=Math.imul(be,_e),G=G+Math.imul(z,Pe)|0,I=I+Math.imul(z,Ue)|0,I=I+Math.imul(ie,Pe)|0,V=V+Math.imul(ie,Ue)|0;var Ze=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,G=Math.imul(oe,ae),I=Math.imul(oe,_e),I=I+Math.imul(ce,ae)|0,V=Math.imul(ce,_e),G=G+Math.imul(pe,Pe)|0,I=I+Math.imul(pe,Ue)|0,I=I+Math.imul(be,Pe)|0,V=V+Math.imul(be,Ue)|0,G=G+Math.imul(z,Ae)|0,I=I+Math.imul(z,Re)|0,I=I+Math.imul(ie,Ae)|0,V=V+Math.imul(ie,Re)|0;var ne=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ne>>>26)|0,ne&=67108863,G=Math.imul(ke,ae),I=Math.imul(ke,_e),I=I+Math.imul(fe,ae)|0,V=Math.imul(fe,_e),G=G+Math.imul(oe,Pe)|0,I=I+Math.imul(oe,Ue)|0,I=I+Math.imul(ce,Pe)|0,V=V+Math.imul(ce,Ue)|0,G=G+Math.imul(pe,Ae)|0,I=I+Math.imul(pe,Re)|0,I=I+Math.imul(be,Ae)|0,V=V+Math.imul(be,Re)|0,G=G+Math.imul(z,Le)|0,I=I+Math.imul(z,Be)|0,I=I+Math.imul(ie,Le)|0,V=V+Math.imul(ie,Be)|0;var le=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(le>>>26)|0,le&=67108863,G=Math.imul(te,ae),I=Math.imul(te,_e),I=I+Math.imul(Q,ae)|0,V=Math.imul(Q,_e),G=G+Math.imul(ke,Pe)|0,I=I+Math.imul(ke,Ue)|0,I=I+Math.imul(fe,Pe)|0,V=V+Math.imul(fe,Ue)|0,G=G+Math.imul(oe,Ae)|0,I=I+Math.imul(oe,Re)|0,I=I+Math.imul(ce,Ae)|0,V=V+Math.imul(ce,Re)|0,G=G+Math.imul(pe,Le)|0,I=I+Math.imul(pe,Be)|0,I=I+Math.imul(be,Le)|0,V=V+Math.imul(be,Be)|0,G=G+Math.imul(z,Me)|0,I=I+Math.imul(z,qe)|0,I=I+Math.imul(ie,Me)|0,V=V+Math.imul(ie,qe)|0;var ye=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ye>>>26)|0,ye&=67108863,G=Math.imul(W,ae),I=Math.imul(W,_e),I=I+Math.imul(X,ae)|0,V=Math.imul(X,_e),G=G+Math.imul(te,Pe)|0,I=I+Math.imul(te,Ue)|0,I=I+Math.imul(Q,Pe)|0,V=V+Math.imul(Q,Ue)|0,G=G+Math.imul(ke,Ae)|0,I=I+Math.imul(ke,Re)|0,I=I+Math.imul(fe,Ae)|0,V=V+Math.imul(fe,Re)|0,G=G+Math.imul(oe,Le)|0,I=I+Math.imul(oe,Be)|0,I=I+Math.imul(ce,Le)|0,V=V+Math.imul(ce,Be)|0,G=G+Math.imul(pe,Me)|0,I=I+Math.imul(pe,qe)|0,I=I+Math.imul(be,Me)|0,V=V+Math.imul(be,qe)|0,G=G+Math.imul(z,Fe)|0,I=I+Math.imul(z,Ye)|0,I=I+Math.imul(ie,Fe)|0,V=V+Math.imul(ie,Ye)|0;var we=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(we>>>26)|0,we&=67108863,G=Math.imul(ve,ae),I=Math.imul(ve,_e),I=I+Math.imul(Se,ae)|0,V=Math.imul(Se,_e),G=G+Math.imul(W,Pe)|0,I=I+Math.imul(W,Ue)|0,I=I+Math.imul(X,Pe)|0,V=V+Math.imul(X,Ue)|0,G=G+Math.imul(te,Ae)|0,I=I+Math.imul(te,Re)|0,I=I+Math.imul(Q,Ae)|0,V=V+Math.imul(Q,Re)|0,G=G+Math.imul(ke,Le)|0,I=I+Math.imul(ke,Be)|0,I=I+Math.imul(fe,Le)|0,V=V+Math.imul(fe,Be)|0,G=G+Math.imul(oe,Me)|0,I=I+Math.imul(oe,qe)|0,I=I+Math.imul(ce,Me)|0,V=V+Math.imul(ce,qe)|0,G=G+Math.imul(pe,Fe)|0,I=I+Math.imul(pe,Ye)|0,I=I+Math.imul(be,Fe)|0,V=V+Math.imul(be,Ye)|0,G=G+Math.imul(z,Je)|0,I=I+Math.imul(z,je)|0,I=I+Math.imul(ie,Je)|0,V=V+Math.imul(ie,je)|0;var Te=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Te>>>26)|0,Te&=67108863,G=Math.imul(y,ae),I=Math.imul(y,_e),I=I+Math.imul(F,ae)|0,V=Math.imul(F,_e),G=G+Math.imul(ve,Pe)|0,I=I+Math.imul(ve,Ue)|0,I=I+Math.imul(Se,Pe)|0,V=V+Math.imul(Se,Ue)|0,G=G+Math.imul(W,Ae)|0,I=I+Math.imul(W,Re)|0,I=I+Math.imul(X,Ae)|0,V=V+Math.imul(X,Re)|0,G=G+Math.imul(te,Le)|0,I=I+Math.imul(te,Be)|0,I=I+Math.imul(Q,Le)|0,V=V+Math.imul(Q,Be)|0,G=G+Math.imul(ke,Me)|0,I=I+Math.imul(ke,qe)|0,I=I+Math.imul(fe,Me)|0,V=V+Math.imul(fe,qe)|0,G=G+Math.imul(oe,Fe)|0,I=I+Math.imul(oe,Ye)|0,I=I+Math.imul(ce,Fe)|0,V=V+Math.imul(ce,Ye)|0,G=G+Math.imul(pe,Je)|0,I=I+Math.imul(pe,je)|0,I=I+Math.imul(be,Je)|0,V=V+Math.imul(be,je)|0,G=G+Math.imul(z,Ve)|0,I=I+Math.imul(z,et)|0,I=I+Math.imul(ie,Ve)|0,V=V+Math.imul(ie,et)|0;var Ne=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,G=Math.imul(ue,ae),I=Math.imul(ue,_e),I=I+Math.imul(j,ae)|0,V=Math.imul(j,_e),G=G+Math.imul(y,Pe)|0,I=I+Math.imul(y,Ue)|0,I=I+Math.imul(F,Pe)|0,V=V+Math.imul(F,Ue)|0,G=G+Math.imul(ve,Ae)|0,I=I+Math.imul(ve,Re)|0,I=I+Math.imul(Se,Ae)|0,V=V+Math.imul(Se,Re)|0,G=G+Math.imul(W,Le)|0,I=I+Math.imul(W,Be)|0,I=I+Math.imul(X,Le)|0,V=V+Math.imul(X,Be)|0,G=G+Math.imul(te,Me)|0,I=I+Math.imul(te,qe)|0,I=I+Math.imul(Q,Me)|0,V=V+Math.imul(Q,qe)|0,G=G+Math.imul(ke,Fe)|0,I=I+Math.imul(ke,Ye)|0,I=I+Math.imul(fe,Fe)|0,V=V+Math.imul(fe,Ye)|0,G=G+Math.imul(oe,Je)|0,I=I+Math.imul(oe,je)|0,I=I+Math.imul(ce,Je)|0,V=V+Math.imul(ce,je)|0,G=G+Math.imul(pe,Ve)|0,I=I+Math.imul(pe,et)|0,I=I+Math.imul(be,Ve)|0,V=V+Math.imul(be,et)|0,G=G+Math.imul(z,Ge)|0,I=I+Math.imul(z,rt)|0,I=I+Math.imul(ie,Ge)|0,V=V+Math.imul(ie,rt)|0;var Ie=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,G=Math.imul(B,ae),I=Math.imul(B,_e),I=I+Math.imul(K,ae)|0,V=Math.imul(K,_e),G=G+Math.imul(ue,Pe)|0,I=I+Math.imul(ue,Ue)|0,I=I+Math.imul(j,Pe)|0,V=V+Math.imul(j,Ue)|0,G=G+Math.imul(y,Ae)|0,I=I+Math.imul(y,Re)|0,I=I+Math.imul(F,Ae)|0,V=V+Math.imul(F,Re)|0,G=G+Math.imul(ve,Le)|0,I=I+Math.imul(ve,Be)|0,I=I+Math.imul(Se,Le)|0,V=V+Math.imul(Se,Be)|0,G=G+Math.imul(W,Me)|0,I=I+Math.imul(W,qe)|0,I=I+Math.imul(X,Me)|0,V=V+Math.imul(X,qe)|0,G=G+Math.imul(te,Fe)|0,I=I+Math.imul(te,Ye)|0,I=I+Math.imul(Q,Fe)|0,V=V+Math.imul(Q,Ye)|0,G=G+Math.imul(ke,Je)|0,I=I+Math.imul(ke,je)|0,I=I+Math.imul(fe,Je)|0,V=V+Math.imul(fe,je)|0,G=G+Math.imul(oe,Ve)|0,I=I+Math.imul(oe,et)|0,I=I+Math.imul(ce,Ve)|0,V=V+Math.imul(ce,et)|0,G=G+Math.imul(pe,Ge)|0,I=I+Math.imul(pe,rt)|0,I=I+Math.imul(be,Ge)|0,V=V+Math.imul(be,rt)|0,G=G+Math.imul(z,xe)|0,I=I+Math.imul(z,nt)|0,I=I+Math.imul(ie,xe)|0,V=V+Math.imul(ie,nt)|0;var Ce=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,G=Math.imul(B,Pe),I=Math.imul(B,Ue),I=I+Math.imul(K,Pe)|0,V=Math.imul(K,Ue),G=G+Math.imul(ue,Ae)|0,I=I+Math.imul(ue,Re)|0,I=I+Math.imul(j,Ae)|0,V=V+Math.imul(j,Re)|0,G=G+Math.imul(y,Le)|0,I=I+Math.imul(y,Be)|0,I=I+Math.imul(F,Le)|0,V=V+Math.imul(F,Be)|0,G=G+Math.imul(ve,Me)|0,I=I+Math.imul(ve,qe)|0,I=I+Math.imul(Se,Me)|0,V=V+Math.imul(Se,qe)|0,G=G+Math.imul(W,Fe)|0,I=I+Math.imul(W,Ye)|0,I=I+Math.imul(X,Fe)|0,V=V+Math.imul(X,Ye)|0,G=G+Math.imul(te,Je)|0,I=I+Math.imul(te,je)|0,I=I+Math.imul(Q,Je)|0,V=V+Math.imul(Q,je)|0,G=G+Math.imul(ke,Ve)|0,I=I+Math.imul(ke,et)|0,I=I+Math.imul(fe,Ve)|0,V=V+Math.imul(fe,et)|0,G=G+Math.imul(oe,Ge)|0,I=I+Math.imul(oe,rt)|0,I=I+Math.imul(ce,Ge)|0,V=V+Math.imul(ce,rt)|0,G=G+Math.imul(pe,xe)|0,I=I+Math.imul(pe,nt)|0,I=I+Math.imul(be,xe)|0,V=V+Math.imul(be,nt)|0;var $e=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+($e>>>26)|0,$e&=67108863,G=Math.imul(B,Ae),I=Math.imul(B,Re),I=I+Math.imul(K,Ae)|0,V=Math.imul(K,Re),G=G+Math.imul(ue,Le)|0,I=I+Math.imul(ue,Be)|0,I=I+Math.imul(j,Le)|0,V=V+Math.imul(j,Be)|0,G=G+Math.imul(y,Me)|0,I=I+Math.imul(y,qe)|0,I=I+Math.imul(F,Me)|0,V=V+Math.imul(F,qe)|0,G=G+Math.imul(ve,Fe)|0,I=I+Math.imul(ve,Ye)|0,I=I+Math.imul(Se,Fe)|0,V=V+Math.imul(Se,Ye)|0,G=G+Math.imul(W,Je)|0,I=I+Math.imul(W,je)|0,I=I+Math.imul(X,Je)|0,V=V+Math.imul(X,je)|0,G=G+Math.imul(te,Ve)|0,I=I+Math.imul(te,et)|0,I=I+Math.imul(Q,Ve)|0,V=V+Math.imul(Q,et)|0,G=G+Math.imul(ke,Ge)|0,I=I+Math.imul(ke,rt)|0,I=I+Math.imul(fe,Ge)|0,V=V+Math.imul(fe,rt)|0,G=G+Math.imul(oe,xe)|0,I=I+Math.imul(oe,nt)|0,I=I+Math.imul(ce,xe)|0,V=V+Math.imul(ce,nt)|0;var st=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(st>>>26)|0,st&=67108863,G=Math.imul(B,Le),I=Math.imul(B,Be),I=I+Math.imul(K,Le)|0,V=Math.imul(K,Be),G=G+Math.imul(ue,Me)|0,I=I+Math.imul(ue,qe)|0,I=I+Math.imul(j,Me)|0,V=V+Math.imul(j,qe)|0,G=G+Math.imul(y,Fe)|0,I=I+Math.imul(y,Ye)|0,I=I+Math.imul(F,Fe)|0,V=V+Math.imul(F,Ye)|0,G=G+Math.imul(ve,Je)|0,I=I+Math.imul(ve,je)|0,I=I+Math.imul(Se,Je)|0,V=V+Math.imul(Se,je)|0,G=G+Math.imul(W,Ve)|0,I=I+Math.imul(W,et)|0,I=I+Math.imul(X,Ve)|0,V=V+Math.imul(X,et)|0,G=G+Math.imul(te,Ge)|0,I=I+Math.imul(te,rt)|0,I=I+Math.imul(Q,Ge)|0,V=V+Math.imul(Q,rt)|0,G=G+Math.imul(ke,xe)|0,I=I+Math.imul(ke,nt)|0,I=I+Math.imul(fe,xe)|0,V=V+Math.imul(fe,nt)|0;var at=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(at>>>26)|0,at&=67108863,G=Math.imul(B,Me),I=Math.imul(B,qe),I=I+Math.imul(K,Me)|0,V=Math.imul(K,qe),G=G+Math.imul(ue,Fe)|0,I=I+Math.imul(ue,Ye)|0,I=I+Math.imul(j,Fe)|0,V=V+Math.imul(j,Ye)|0,G=G+Math.imul(y,Je)|0,I=I+Math.imul(y,je)|0,I=I+Math.imul(F,Je)|0,V=V+Math.imul(F,je)|0,G=G+Math.imul(ve,Ve)|0,I=I+Math.imul(ve,et)|0,I=I+Math.imul(Se,Ve)|0,V=V+Math.imul(Se,et)|0,G=G+Math.imul(W,Ge)|0,I=I+Math.imul(W,rt)|0,I=I+Math.imul(X,Ge)|0,V=V+Math.imul(X,rt)|0,G=G+Math.imul(te,xe)|0,I=I+Math.imul(te,nt)|0,I=I+Math.imul(Q,xe)|0,V=V+Math.imul(Q,nt)|0;var dt=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(dt>>>26)|0,dt&=67108863,G=Math.imul(B,Fe),I=Math.imul(B,Ye),I=I+Math.imul(K,Fe)|0,V=Math.imul(K,Ye),G=G+Math.imul(ue,Je)|0,I=I+Math.imul(ue,je)|0,I=I+Math.imul(j,Je)|0,V=V+Math.imul(j,je)|0,G=G+Math.imul(y,Ve)|0,I=I+Math.imul(y,et)|0,I=I+Math.imul(F,Ve)|0,V=V+Math.imul(F,et)|0,G=G+Math.imul(ve,Ge)|0,I=I+Math.imul(ve,rt)|0,I=I+Math.imul(Se,Ge)|0,V=V+Math.imul(Se,rt)|0,G=G+Math.imul(W,xe)|0,I=I+Math.imul(W,nt)|0,I=I+Math.imul(X,xe)|0,V=V+Math.imul(X,nt)|0;var ot=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ot>>>26)|0,ot&=67108863,G=Math.imul(B,Je),I=Math.imul(B,je),I=I+Math.imul(K,Je)|0,V=Math.imul(K,je),G=G+Math.imul(ue,Ve)|0,I=I+Math.imul(ue,et)|0,I=I+Math.imul(j,Ve)|0,V=V+Math.imul(j,et)|0,G=G+Math.imul(y,Ge)|0,I=I+Math.imul(y,rt)|0,I=I+Math.imul(F,Ge)|0,V=V+Math.imul(F,rt)|0,G=G+Math.imul(ve,xe)|0,I=I+Math.imul(ve,nt)|0,I=I+Math.imul(Se,xe)|0,V=V+Math.imul(Se,nt)|0;var ct=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ct>>>26)|0,ct&=67108863,G=Math.imul(B,Ve),I=Math.imul(B,et),I=I+Math.imul(K,Ve)|0,V=Math.imul(K,et),G=G+Math.imul(ue,Ge)|0,I=I+Math.imul(ue,rt)|0,I=I+Math.imul(j,Ge)|0,V=V+Math.imul(j,rt)|0,G=G+Math.imul(y,xe)|0,I=I+Math.imul(y,nt)|0,I=I+Math.imul(F,xe)|0,V=V+Math.imul(F,nt)|0;var ft=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ft>>>26)|0,ft&=67108863,G=Math.imul(B,Ge),I=Math.imul(B,rt),I=I+Math.imul(K,Ge)|0,V=Math.imul(K,rt),G=G+Math.imul(ue,xe)|0,I=I+Math.imul(ue,nt)|0,I=I+Math.imul(j,xe)|0,V=V+Math.imul(j,nt)|0;var lt=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(lt>>>26)|0,lt&=67108863,G=Math.imul(B,xe),I=Math.imul(B,nt),I=I+Math.imul(K,xe)|0,V=Math.imul(K,nt);var ht=(J+G|0)+((I&8191)<<13)|0;return J=(V+(I>>>13)|0)+(ht>>>26)|0,ht&=67108863,A[0]=Ke,A[1]=Ze,A[2]=ne,A[3]=le,A[4]=ye,A[5]=we,A[6]=Te,A[7]=Ne,A[8]=Ie,A[9]=Ce,A[10]=$e,A[11]=st,A[12]=at,A[13]=dt,A[14]=ot,A[15]=ct,A[16]=ft,A[17]=lt,A[18]=ht,J!==0&&(A[19]=J,g.length++),g};Math.imul||(k=E);function C(D,b,_){_.negative=b.negative^D.negative,_.length=D.length+b.length;for(var g=0,w=0,T=0;T<_.length-1;T++){var A=w;w=0;for(var J=g&67108863,G=Math.min(T,b.length-1),I=Math.max(0,T-D.length+1);I<=G;I++){var V=T-I,x=D.words[V]|0,z=b.words[I]|0,ie=x*z,se=ie&67108863;A=A+(ie/67108864|0)|0,se=se+J|0,J=se&67108863,A=A+(se>>>26)|0,w+=A>>>26,A&=67108863}_.words[T]=J,g=A,A=w}return g!==0?_.words[T]=g:_.length--,_.strip()}function N(D,b,_){var g=new P;return g.mulp(D,b,_)}s.prototype.mulTo=function(b,_){var g,w=this.length+b.length;return this.length===10&&b.length===10?g=k(this,b,_):w<63?g=E(this,b,_):w<1024?g=C(this,b,_):g=N(this,b,_),g};function P(D,b){this.x=D,this.y=b}P.prototype.makeRBT=function(b){for(var _=new Array(b),g=s.prototype._countBits(b)-1,w=0;w<b;w++)_[w]=this.revBin(w,g,b);return _},P.prototype.revBin=function(b,_,g){if(b===0||b===g-1)return b;for(var w=0,T=0;T<_;T++)w|=(b&1)<<_-T-1,b>>=1;return w},P.prototype.permute=function(b,_,g,w,T,A){for(var J=0;J<A;J++)w[J]=_[b[J]],T[J]=g[b[J]]},P.prototype.transform=function(b,_,g,w,T,A){this.permute(A,b,_,g,w,T);for(var J=1;J<T;J<<=1)for(var G=J<<1,I=Math.cos(2*Math.PI/G),V=Math.sin(2*Math.PI/G),x=0;x<T;x+=G)for(var z=I,ie=V,se=0;se<J;se++){var pe=g[x+se],be=w[x+se],Ee=g[x+se+J],oe=w[x+se+J],ce=z*Ee-ie*oe;oe=z*oe+ie*Ee,Ee=ce,g[x+se]=pe+Ee,w[x+se]=be+oe,g[x+se+J]=pe-Ee,w[x+se+J]=be-oe,se!==G&&(ce=I*z-V*ie,ie=I*ie+V*z,z=ce)}},P.prototype.guessLen13b=function(b,_){var g=Math.max(_,b)|1,w=g&1,T=0;for(g=g/2|0;g;g=g>>>1)T++;return 1<<T+1+w},P.prototype.conjugate=function(b,_,g){if(!(g<=1))for(var w=0;w<g/2;w++){var T=b[w];b[w]=b[g-w-1],b[g-w-1]=T,T=_[w],_[w]=-_[g-w-1],_[g-w-1]=-T}},P.prototype.normalize13b=function(b,_){for(var g=0,w=0;w<_/2;w++){var T=Math.round(b[2*w+1]/_)*8192+Math.round(b[2*w]/_)+g;b[w]=T&67108863,T<67108864?g=0:g=T/67108864|0}return b},P.prototype.convert13b=function(b,_,g,w){for(var T=0,A=0;A<_;A++)T=T+(b[A]|0),g[2*A]=T&8191,T=T>>>13,g[2*A+1]=T&8191,T=T>>>13;for(A=2*_;A<w;++A)g[A]=0;o(T===0),o((T&-8192)===0)},P.prototype.stub=function(b){for(var _=new Array(b),g=0;g<b;g++)_[g]=0;return _},P.prototype.mulp=function(b,_,g){var w=2*this.guessLen13b(b.length,_.length),T=this.makeRBT(w),A=this.stub(w),J=new Array(w),G=new Array(w),I=new Array(w),V=new Array(w),x=new Array(w),z=new Array(w),ie=g.words;ie.length=w,this.convert13b(b.words,b.length,J,w),this.convert13b(_.words,_.length,V,w),this.transform(J,A,G,I,w,T),this.transform(V,A,x,z,w,T);for(var se=0;se<w;se++){var pe=G[se]*x[se]-I[se]*z[se];I[se]=G[se]*z[se]+I[se]*x[se],G[se]=pe}return this.conjugate(G,I,w),this.transform(G,I,ie,A,w,T),this.conjugate(ie,A,w),this.normalize13b(ie,w),g.negative=b.negative^_.negative,g.length=b.length+_.length,g.strip()},s.prototype.mul=function(b){var _=new s(null);return _.words=new Array(this.length+b.length),this.mulTo(b,_)},s.prototype.mulf=function(b){var _=new s(null);return _.words=new Array(this.length+b.length),N(this,b,_)},s.prototype.imul=function(b){return this.clone().mulTo(b,this)},s.prototype.imuln=function(b){o(typeof b=="number"),o(b<67108864);for(var _=0,g=0;g<this.length;g++){var w=(this.words[g]|0)*b,T=(w&67108863)+(_&67108863);_>>=26,_+=w/67108864|0,_+=T>>>26,this.words[g]=T&67108863}return _!==0&&(this.words[g]=_,this.length++),this},s.prototype.muln=function(b){return this.clone().imuln(b)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(b){var _=v(b);if(_.length===0)return new s(1);for(var g=this,w=0;w<_.length&&_[w]===0;w++,g=g.sqr());if(++w<_.length)for(var T=g.sqr();w<_.length;w++,T=T.sqr())_[w]!==0&&(g=g.mul(T));return g},s.prototype.iushln=function(b){o(typeof b=="number"&&b>=0);var _=b%26,g=(b-_)/26,w=67108863>>>26-_<<26-_,T;if(_!==0){var A=0;for(T=0;T<this.length;T++){var J=this.words[T]&w,G=(this.words[T]|0)-J<<_;this.words[T]=G|A,A=J>>>26-_}A&&(this.words[T]=A,this.length++)}if(g!==0){for(T=this.length-1;T>=0;T--)this.words[T+g]=this.words[T];for(T=0;T<g;T++)this.words[T]=0;this.length+=g}return this.strip()},s.prototype.ishln=function(b){return o(this.negative===0),this.iushln(b)},s.prototype.iushrn=function(b,_,g){o(typeof b=="number"&&b>=0);var w;_?w=(_-_%26)/26:w=0;var T=b%26,A=Math.min((b-T)/26,this.length),J=67108863^67108863>>>T<<T,G=g;if(w-=A,w=Math.max(0,w),G){for(var I=0;I<A;I++)G.words[I]=this.words[I];G.length=A}if(A!==0)if(this.length>A)for(this.length-=A,I=0;I<this.length;I++)this.words[I]=this.words[I+A];else this.words[0]=0,this.length=1;var V=0;for(I=this.length-1;I>=0&&(V!==0||I>=w);I--){var x=this.words[I]|0;this.words[I]=V<<26-T|x>>>T,V=x&J}return G&&V!==0&&(G.words[G.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(b,_,g){return o(this.negative===0),this.iushrn(b,_,g)},s.prototype.shln=function(b){return this.clone().ishln(b)},s.prototype.ushln=function(b){return this.clone().iushln(b)},s.prototype.shrn=function(b){return this.clone().ishrn(b)},s.prototype.ushrn=function(b){return this.clone().iushrn(b)},s.prototype.testn=function(b){o(typeof b=="number"&&b>=0);var _=b%26,g=(b-_)/26,w=1<<_;if(this.length<=g)return!1;var T=this.words[g];return!!(T&w)},s.prototype.imaskn=function(b){o(typeof b=="number"&&b>=0);var _=b%26,g=(b-_)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(_!==0&&g++,this.length=Math.min(g,this.length),_!==0){var w=67108863^67108863>>>_<<_;this.words[this.length-1]&=w}return this.strip()},s.prototype.maskn=function(b){return this.clone().imaskn(b)},s.prototype.iaddn=function(b){return o(typeof b=="number"),o(b<67108864),b<0?this.isubn(-b):this.negative!==0?this.length===1&&(this.words[0]|0)<b?(this.words[0]=b-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(b),this.negative=1,this):this._iaddn(b)},s.prototype._iaddn=function(b){this.words[0]+=b;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},s.prototype.isubn=function(b){if(o(typeof b=="number"),o(b<67108864),b<0)return this.iaddn(-b);if(this.negative!==0)return this.negative=0,this.iaddn(b),this.negative=1,this;if(this.words[0]-=b,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},s.prototype.addn=function(b){return this.clone().iaddn(b)},s.prototype.subn=function(b){return this.clone().isubn(b)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(b,_,g){var w=b.length+g,T;this._expand(w);var A,J=0;for(T=0;T<b.length;T++){A=(this.words[T+g]|0)+J;var G=(b.words[T]|0)*_;A-=G&67108863,J=(A>>26)-(G/67108864|0),this.words[T+g]=A&67108863}for(;T<this.length-g;T++)A=(this.words[T+g]|0)+J,J=A>>26,this.words[T+g]=A&67108863;if(J===0)return this.strip();for(o(J===-1),J=0,T=0;T<this.length;T++)A=-(this.words[T]|0)+J,J=A>>26,this.words[T]=A&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(b,_){var g=this.length-b.length,w=this.clone(),T=b,A=T.words[T.length-1]|0,J=this._countBits(A);g=26-J,g!==0&&(T=T.ushln(g),w.iushln(g),A=T.words[T.length-1]|0);var G=w.length-T.length,I;if(_!=="mod"){I=new s(null),I.length=G+1,I.words=new Array(I.length);for(var V=0;V<I.length;V++)I.words[V]=0}var x=w.clone()._ishlnsubmul(T,1,G);x.negative===0&&(w=x,I&&(I.words[G]=1));for(var z=G-1;z>=0;z--){var ie=(w.words[T.length+z]|0)*67108864+(w.words[T.length+z-1]|0);for(ie=Math.min(ie/A|0,67108863),w._ishlnsubmul(T,ie,z);w.negative!==0;)ie--,w.negative=0,w._ishlnsubmul(T,1,z),w.isZero()||(w.negative^=1);I&&(I.words[z]=ie)}return I&&I.strip(),w.strip(),_!=="div"&&g!==0&&w.iushrn(g),{div:I||null,mod:w}},s.prototype.divmod=function(b,_,g){if(o(!b.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var w,T,A;return this.negative!==0&&b.negative===0?(A=this.neg().divmod(b,_),_!=="mod"&&(w=A.div.neg()),_!=="div"&&(T=A.mod.neg(),g&&T.negative!==0&&T.iadd(b)),{div:w,mod:T}):this.negative===0&&b.negative!==0?(A=this.divmod(b.neg(),_),_!=="mod"&&(w=A.div.neg()),{div:w,mod:A.mod}):this.negative&b.negative?(A=this.neg().divmod(b.neg(),_),_!=="div"&&(T=A.mod.neg(),g&&T.negative!==0&&T.isub(b)),{div:A.div,mod:T}):b.length>this.length||this.cmp(b)<0?{div:new s(0),mod:this}:b.length===1?_==="div"?{div:this.divn(b.words[0]),mod:null}:_==="mod"?{div:null,mod:new s(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new s(this.modn(b.words[0]))}:this._wordDiv(b,_)},s.prototype.div=function(b){return this.divmod(b,"div",!1).div},s.prototype.mod=function(b){return this.divmod(b,"mod",!1).mod},s.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod},s.prototype.divRound=function(b){var _=this.divmod(b);if(_.mod.isZero())return _.div;var g=_.div.negative!==0?_.mod.isub(b):_.mod,w=b.ushrn(1),T=b.andln(1),A=g.cmp(w);return A<0||T===1&&A===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},s.prototype.modn=function(b){o(b<=67108863);for(var _=(1<<26)%b,g=0,w=this.length-1;w>=0;w--)g=(_*g+(this.words[w]|0))%b;return g},s.prototype.idivn=function(b){o(b<=67108863);for(var _=0,g=this.length-1;g>=0;g--){var w=(this.words[g]|0)+_*67108864;this.words[g]=w/b|0,_=w%b}return this.strip()},s.prototype.divn=function(b){return this.clone().idivn(b)},s.prototype.egcd=function(b){o(b.negative===0),o(!b.isZero());var _=this,g=b.clone();_.negative!==0?_=_.umod(b):_=_.clone();for(var w=new s(1),T=new s(0),A=new s(0),J=new s(1),G=0;_.isEven()&&g.isEven();)_.iushrn(1),g.iushrn(1),++G;for(var I=g.clone(),V=_.clone();!_.isZero();){for(var x=0,z=1;!(_.words[0]&z)&&x<26;++x,z<<=1);if(x>0)for(_.iushrn(x);x-- >0;)(w.isOdd()||T.isOdd())&&(w.iadd(I),T.isub(V)),w.iushrn(1),T.iushrn(1);for(var ie=0,se=1;!(g.words[0]&se)&&ie<26;++ie,se<<=1);if(ie>0)for(g.iushrn(ie);ie-- >0;)(A.isOdd()||J.isOdd())&&(A.iadd(I),J.isub(V)),A.iushrn(1),J.iushrn(1);_.cmp(g)>=0?(_.isub(g),w.isub(A),T.isub(J)):(g.isub(_),A.isub(w),J.isub(T))}return{a:A,b:J,gcd:g.iushln(G)}},s.prototype._invmp=function(b){o(b.negative===0),o(!b.isZero());var _=this,g=b.clone();_.negative!==0?_=_.umod(b):_=_.clone();for(var w=new s(1),T=new s(0),A=g.clone();_.cmpn(1)>0&&g.cmpn(1)>0;){for(var J=0,G=1;!(_.words[0]&G)&&J<26;++J,G<<=1);if(J>0)for(_.iushrn(J);J-- >0;)w.isOdd()&&w.iadd(A),w.iushrn(1);for(var I=0,V=1;!(g.words[0]&V)&&I<26;++I,V<<=1);if(I>0)for(g.iushrn(I);I-- >0;)T.isOdd()&&T.iadd(A),T.iushrn(1);_.cmp(g)>=0?(_.isub(g),w.isub(T)):(g.isub(_),T.isub(w))}var x;return _.cmpn(1)===0?x=w:x=T,x.cmpn(0)<0&&x.iadd(b),x},s.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var _=this.clone(),g=b.clone();_.negative=0,g.negative=0;for(var w=0;_.isEven()&&g.isEven();w++)_.iushrn(1),g.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;g.isEven();)g.iushrn(1);var T=_.cmp(g);if(T<0){var A=_;_=g,g=A}else if(T===0||g.cmpn(1)===0)break;_.isub(g)}while(!0);return g.iushln(w)},s.prototype.invm=function(b){return this.egcd(b).a.umod(b)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(b){return this.words[0]&b},s.prototype.bincn=function(b){o(typeof b=="number");var _=b%26,g=(b-_)/26,w=1<<_;if(this.length<=g)return this._expand(g+1),this.words[g]|=w,this;for(var T=w,A=g;T!==0&&A<this.length;A++){var J=this.words[A]|0;J+=T,T=J>>>26,J&=67108863,this.words[A]=J}return T!==0&&(this.words[A]=T,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(b){var _=b<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var g;if(this.length>1)g=1;else{_&&(b=-b),o(b<=67108863,"Number is too big");var w=this.words[0]|0;g=w===b?0:w<b?-1:1}return this.negative!==0?-g|0:g},s.prototype.cmp=function(b){if(this.negative!==0&&b.negative===0)return-1;if(this.negative===0&&b.negative!==0)return 1;var _=this.ucmp(b);return this.negative!==0?-_|0:_},s.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var _=0,g=this.length-1;g>=0;g--){var w=this.words[g]|0,T=b.words[g]|0;if(w!==T){w<T?_=-1:w>T&&(_=1);break}}return _},s.prototype.gtn=function(b){return this.cmpn(b)===1},s.prototype.gt=function(b){return this.cmp(b)===1},s.prototype.gten=function(b){return this.cmpn(b)>=0},s.prototype.gte=function(b){return this.cmp(b)>=0},s.prototype.ltn=function(b){return this.cmpn(b)===-1},s.prototype.lt=function(b){return this.cmp(b)===-1},s.prototype.lten=function(b){return this.cmpn(b)<=0},s.prototype.lte=function(b){return this.cmp(b)<=0},s.prototype.eqn=function(b){return this.cmpn(b)===0},s.prototype.eq=function(b){return this.cmp(b)===0},s.red=function(b){return new Y(b)},s.prototype.toRed=function(b){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),b.convertTo(this)._forceRed(b)},s.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(b){return this.red=b,this},s.prototype.forceRed=function(b){return o(!this.red,"Already a number in reduction context"),this._forceRed(b)},s.prototype.redAdd=function(b){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,b)},s.prototype.redIAdd=function(b){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,b)},s.prototype.redSub=function(b){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,b)},s.prototype.redISub=function(b){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,b)},s.prototype.redShl=function(b){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,b)},s.prototype.redMul=function(b){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.mul(this,b)},s.prototype.redIMul=function(b){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.imul(this,b)},s.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(b){return o(this.red&&!b.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,b)};var M={k256:null,p224:null,p192:null,p25519:null};function L(D,b){this.name=D,this.p=new s(b,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}L.prototype._tmp=function(){var b=new s(null);return b.words=new Array(Math.ceil(this.n/13)),b},L.prototype.ireduce=function(b){var _=b,g;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),g=_.bitLength();while(g>this.n);var w=g<this.n?-1:_.ucmp(this.p);return w===0?(_.words[0]=0,_.length=1):w>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},L.prototype.split=function(b,_){b.iushrn(this.n,0,_)},L.prototype.imulK=function(b){return b.imul(this.k)};function $(){L.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d($,L),$.prototype.split=function(b,_){for(var g=4194303,w=Math.min(b.length,9),T=0;T<w;T++)_.words[T]=b.words[T];if(_.length=w,b.length<=9){b.words[0]=0,b.length=1;return}var A=b.words[9];for(_.words[_.length++]=A&g,T=10;T<b.length;T++){var J=b.words[T]|0;b.words[T-10]=(J&g)<<4|A>>>22,A=J}A>>>=22,b.words[T-10]=A,A===0&&b.length>10?b.length-=10:b.length-=9},$.prototype.imulK=function(b){b.words[b.length]=0,b.words[b.length+1]=0,b.length+=2;for(var _=0,g=0;g<b.length;g++){var w=b.words[g]|0;_+=w*977,b.words[g]=_&67108863,_=w*64+(_/67108864|0)}return b.words[b.length-1]===0&&(b.length--,b.words[b.length-1]===0&&b.length--),b};function H(){L.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(H,L);function Z(){L.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(Z,L);function re(){L.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(re,L),re.prototype.imulK=function(b){for(var _=0,g=0;g<b.length;g++){var w=(b.words[g]|0)*19+_,T=w&67108863;w>>>=26,b.words[g]=T,_=w}return _!==0&&(b.words[b.length++]=_),b},s._prime=function(b){if(M[b])return M[b];var _;if(b==="k256")_=new $;else if(b==="p224")_=new H;else if(b==="p192")_=new Z;else if(b==="p25519")_=new re;else throw new Error("Unknown prime "+b);return M[b]=_,_};function Y(D){if(typeof D=="string"){var b=s._prime(D);this.m=b.p,this.prime=b}else o(D.gtn(1),"modulus must be greater than 1"),this.m=D,this.prime=null}Y.prototype._verify1=function(b){o(b.negative===0,"red works only with positives"),o(b.red,"red works only with red numbers")},Y.prototype._verify2=function(b,_){o((b.negative|_.negative)===0,"red works only with positives"),o(b.red&&b.red===_.red,"red works only with red numbers")},Y.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):b.umod(this.m)._forceRed(this)},Y.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)},Y.prototype.add=function(b,_){this._verify2(b,_);var g=b.add(_);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},Y.prototype.iadd=function(b,_){this._verify2(b,_);var g=b.iadd(_);return g.cmp(this.m)>=0&&g.isub(this.m),g},Y.prototype.sub=function(b,_){this._verify2(b,_);var g=b.sub(_);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},Y.prototype.isub=function(b,_){this._verify2(b,_);var g=b.isub(_);return g.cmpn(0)<0&&g.iadd(this.m),g},Y.prototype.shl=function(b,_){return this._verify1(b),this.imod(b.ushln(_))},Y.prototype.imul=function(b,_){return this._verify2(b,_),this.imod(b.imul(_))},Y.prototype.mul=function(b,_){return this._verify2(b,_),this.imod(b.mul(_))},Y.prototype.isqr=function(b){return this.imul(b,b.clone())},Y.prototype.sqr=function(b){return this.mul(b,b)},Y.prototype.sqrt=function(b){if(b.isZero())return b.clone();var _=this.m.andln(3);if(o(_%2===1),_===3){var g=this.m.add(new s(1)).iushrn(2);return this.pow(b,g)}for(var w=this.m.subn(1),T=0;!w.isZero()&&w.andln(1)===0;)T++,w.iushrn(1);o(!w.isZero());var A=new s(1).toRed(this),J=A.redNeg(),G=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new s(2*I*I).toRed(this);this.pow(I,G).cmp(J)!==0;)I.redIAdd(J);for(var V=this.pow(I,w),x=this.pow(b,w.addn(1).iushrn(1)),z=this.pow(b,w),ie=T;z.cmp(A)!==0;){for(var se=z,pe=0;se.cmp(A)!==0;pe++)se=se.redSqr();o(pe<ie);var be=this.pow(V,new s(1).iushln(ie-pe-1));x=x.redMul(be),V=be.redSqr(),z=z.redMul(V),ie=pe}return x},Y.prototype.invm=function(b){var _=b._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},Y.prototype.pow=function(b,_){if(_.isZero())return new s(1).toRed(this);if(_.cmpn(1)===0)return b.clone();var g=4,w=new Array(1<<g);w[0]=new s(1).toRed(this),w[1]=b;for(var T=2;T<w.length;T++)w[T]=this.mul(w[T-1],b);var A=w[0],J=0,G=0,I=_.bitLength()%26;for(I===0&&(I=26),T=_.length-1;T>=0;T--){for(var V=_.words[T],x=I-1;x>=0;x--){var z=V>>x&1;if(A!==w[0]&&(A=this.sqr(A)),z===0&&J===0){G=0;continue}J<<=1,J|=z,G++,!(G!==g&&(T!==0||x!==0))&&(A=this.mul(A,w[J]),G=0,J=0)}I=26}return A},Y.prototype.convertTo=function(b){var _=b.umod(this.m);return _===b?_.clone():_},Y.prototype.convertFrom=function(b){var _=b.clone();return _.red=null,_},s.mont=function(b){return new O(b)};function O(D){Y.call(this,D),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(O,Y),O.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))},O.prototype.convertFrom=function(b){var _=this.imod(b.mul(this.rinv));return _.red=null,_},O.prototype.imul=function(b,_){if(b.isZero()||_.isZero())return b.words[0]=0,b.length=1,b;var g=b.imul(_),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=g.isub(w).iushrn(this.shift),A=T;return T.cmp(this.m)>=0?A=T.isub(this.m):T.cmpn(0)<0&&(A=T.iadd(this.m)),A._forceRed(this)},O.prototype.mul=function(b,_){if(b.isZero()||_.isZero())return new s(0)._forceRed(this);var g=b.mul(_),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=g.isub(w).iushrn(this.shift),A=T;return T.cmp(this.m)>=0?A=T.isub(this.m):T.cmpn(0)<0&&(A=T.iadd(this.m)),A._forceRed(this)},O.prototype.invm=function(b){var _=this.imod(b._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(typeof i>"u"||i,this)},{buffer:142}],140:[function(e,i,t){(function(n,a){function o(_,g){if(!_)throw new Error(g||"Assertion failed")}function d(_,g){_.super_=g;var w=function(){};w.prototype=g.prototype,_.prototype=new w,_.prototype.constructor=_}function s(_,g,w){if(s.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((g==="le"||g==="be")&&(w=g,g=10),this._init(_||0,g||10,w||"be"))}typeof n=="object"?n.exports=s:a.BN=s,s.BN=s,s.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=e("buffer").Buffer}catch{}s.isBN=function(g){return g instanceof s?!0:g!==null&&typeof g=="object"&&g.constructor.wordSize===s.wordSize&&Array.isArray(g.words)},s.max=function(g,w){return g.cmp(w)>0?g:w},s.min=function(g,w){return g.cmp(w)<0?g:w},s.prototype._init=function(g,w,T){if(typeof g=="number")return this._initNumber(g,w,T);if(typeof g=="object")return this._initArray(g,w,T);w==="hex"&&(w=16),o(w===(w|0)&&w>=2&&w<=36),g=g.toString().replace(/\s+/g,"");var A=0;g[0]==="-"&&(A++,this.negative=1),A<g.length&&(w===16?this._parseHex(g,A,T):(this._parseBase(g,w,A),T==="le"&&this._initArray(this.toArray(),w,T)))},s.prototype._initNumber=function(g,w,T){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[g&67108863],this.length=1):g<4503599627370496?(this.words=[g&67108863,g/67108864&67108863],this.length=2):(o(g<9007199254740992),this.words=[g&67108863,g/67108864&67108863,1],this.length=3),T==="le"&&this._initArray(this.toArray(),w,T)},s.prototype._initArray=function(g,w,T){if(o(typeof g.length=="number"),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var J,G,I=0;if(T==="be")for(A=g.length-1,J=0;A>=0;A-=3)G=g[A]|g[A-1]<<8|g[A-2]<<16,this.words[J]|=G<<I&67108863,this.words[J+1]=G>>>26-I&67108863,I+=24,I>=26&&(I-=26,J++);else if(T==="le")for(A=0,J=0;A<g.length;A+=3)G=g[A]|g[A+1]<<8|g[A+2]<<16,this.words[J]|=G<<I&67108863,this.words[J+1]=G>>>26-I&67108863,I+=24,I>=26&&(I-=26,J++);return this._strip()};function c(_,g){var w=_.charCodeAt(g);if(w>=48&&w<=57)return w-48;if(w>=65&&w<=70)return w-55;if(w>=97&&w<=102)return w-87;o(!1,"Invalid character in "+_)}function h(_,g,w){var T=c(_,w);return w-1>=g&&(T|=c(_,w-1)<<4),T}s.prototype._parseHex=function(g,w,T){this.length=Math.ceil((g.length-w)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var J=0,G=0,I;if(T==="be")for(A=g.length-1;A>=w;A-=2)I=h(g,w,A)<<J,this.words[G]|=I&67108863,J>=18?(J-=18,G+=1,this.words[G]|=I>>>26):J+=8;else{var V=g.length-w;for(A=V%2===0?w+1:w;A<g.length;A+=2)I=h(g,w,A)<<J,this.words[G]|=I&67108863,J>=18?(J-=18,G+=1,this.words[G]|=I>>>26):J+=8}this._strip()};function p(_,g,w,T){for(var A=0,J=0,G=Math.min(_.length,w),I=g;I<G;I++){var V=_.charCodeAt(I)-48;A*=T,V>=49?J=V-49+10:V>=17?J=V-17+10:J=V,o(V>=0&&J<T,"Invalid character"),A+=J}return A}s.prototype._parseBase=function(g,w,T){this.words=[0],this.length=1;for(var A=0,J=1;J<=67108863;J*=w)A++;A--,J=J/w|0;for(var G=g.length-T,I=G%A,V=Math.min(G,G-I)+T,x=0,z=T;z<V;z+=A)x=p(g,z,z+A,w),this.imuln(J),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x);if(I!==0){var ie=1;for(x=p(g,z,g.length,w),z=0;z<I;z++)ie*=w;this.imuln(ie),this.words[0]+x<67108864?this.words[0]+=x:this._iaddn(x)}this._strip()},s.prototype.copy=function(g){g.words=new Array(this.length);for(var w=0;w<this.length;w++)g.words[w]=this.words[w];g.length=this.length,g.negative=this.negative,g.red=this.red};function l(_,g){_.words=g.words,_.length=g.length,_.negative=g.negative,_.red=g.red}if(s.prototype._move=function(g){l(g,this)},s.prototype.clone=function(){var g=new s(null);return this.copy(g),g},s.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var m=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(g,w){g=g||10,w=w|0||1;var T;if(g===16||g==="hex"){T="";for(var A=0,J=0,G=0;G<this.length;G++){var I=this.words[G],V=((I<<A|J)&16777215).toString(16);J=I>>>24-A&16777215,A+=2,A>=26&&(A-=26,G--),J!==0||G!==this.length-1?T=m[6-V.length]+V+T:T=V+T}for(J!==0&&(T=J.toString(16)+T);T.length%w!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}if(g===(g|0)&&g>=2&&g<=36){var x=v[g],z=E[g];T="";var ie=this.clone();for(ie.negative=0;!ie.isZero();){var se=ie.modrn(z).toString(g);ie=ie.idivn(z),ie.isZero()?T=se+T:T=m[x-se.length]+se+T}for(this.isZero()&&(T="0"+T);T.length%w!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}o(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var g=this.words[0];return this.length===2?g+=this.words[1]*67108864:this.length===3&&this.words[2]===1?g+=4503599627370496+this.words[1]*67108864:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-g:g},s.prototype.toJSON=function(){return this.toString(16,2)},u&&(s.prototype.toBuffer=function(g,w){return this.toArrayLike(u,g,w)}),s.prototype.toArray=function(g,w){return this.toArrayLike(Array,g,w)};var k=function(g,w){return g.allocUnsafe?g.allocUnsafe(w):new g(w)};s.prototype.toArrayLike=function(g,w,T){this._strip();var A=this.byteLength(),J=T||Math.max(1,A);o(A<=J,"byte array longer than desired length"),o(J>0,"Requested array length <= 0");var G=k(g,J),I=w==="le"?"LE":"BE";return this["_toArrayLike"+I](G,A),G},s.prototype._toArrayLikeLE=function(g,w){for(var T=0,A=0,J=0,G=0;J<this.length;J++){var I=this.words[J]<<G|A;g[T++]=I&255,T<g.length&&(g[T++]=I>>8&255),T<g.length&&(g[T++]=I>>16&255),G===6?(T<g.length&&(g[T++]=I>>24&255),A=0,G=0):(A=I>>>24,G+=2)}if(T<g.length)for(g[T++]=A;T<g.length;)g[T++]=0},s.prototype._toArrayLikeBE=function(g,w){for(var T=g.length-1,A=0,J=0,G=0;J<this.length;J++){var I=this.words[J]<<G|A;g[T--]=I&255,T>=0&&(g[T--]=I>>8&255),T>=0&&(g[T--]=I>>16&255),G===6?(T>=0&&(g[T--]=I>>24&255),A=0,G=0):(A=I>>>24,G+=2)}if(T>=0)for(g[T--]=A;T>=0;)g[T--]=0},Math.clz32?s.prototype._countBits=function(g){return 32-Math.clz32(g)}:s.prototype._countBits=function(g){var w=g,T=0;return w>=4096&&(T+=13,w>>>=13),w>=64&&(T+=7,w>>>=7),w>=8&&(T+=4,w>>>=4),w>=2&&(T+=2,w>>>=2),T+w},s.prototype._zeroBits=function(g){if(g===0)return 26;var w=g,T=0;return w&8191||(T+=13,w>>>=13),w&127||(T+=7,w>>>=7),w&15||(T+=4,w>>>=4),w&3||(T+=2,w>>>=2),w&1||T++,T},s.prototype.bitLength=function(){var g=this.words[this.length-1],w=this._countBits(g);return(this.length-1)*26+w};function C(_){for(var g=new Array(_.bitLength()),w=0;w<g.length;w++){var T=w/26|0,A=w%26;g[w]=_.words[T]>>>A&1}return g}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,w=0;w<this.length;w++){var T=this._zeroBits(this.words[w]);if(g+=T,T!==26)break}return g},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(g){return this.negative!==0?this.abs().inotn(g).iaddn(1):this.clone()},s.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var w=0;w<g.length;w++)this.words[w]=this.words[w]|g.words[w];return this._strip()},s.prototype.ior=function(g){return o((this.negative|g.negative)===0),this.iuor(g)},s.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},s.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},s.prototype.iuand=function(g){var w;this.length>g.length?w=g:w=this;for(var T=0;T<w.length;T++)this.words[T]=this.words[T]&g.words[T];return this.length=w.length,this._strip()},s.prototype.iand=function(g){return o((this.negative|g.negative)===0),this.iuand(g)},s.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},s.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},s.prototype.iuxor=function(g){var w,T;this.length>g.length?(w=this,T=g):(w=g,T=this);for(var A=0;A<T.length;A++)this.words[A]=w.words[A]^T.words[A];if(this!==w)for(;A<w.length;A++)this.words[A]=w.words[A];return this.length=w.length,this._strip()},s.prototype.ixor=function(g){return o((this.negative|g.negative)===0),this.iuxor(g)},s.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},s.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},s.prototype.inotn=function(g){o(typeof g=="number"&&g>=0);var w=Math.ceil(g/26)|0,T=g%26;this._expand(w),T>0&&w--;for(var A=0;A<w;A++)this.words[A]=~this.words[A]&67108863;return T>0&&(this.words[A]=~this.words[A]&67108863>>26-T),this._strip()},s.prototype.notn=function(g){return this.clone().inotn(g)},s.prototype.setn=function(g,w){o(typeof g=="number"&&g>=0);var T=g/26|0,A=g%26;return this._expand(T+1),w?this.words[T]=this.words[T]|1<<A:this.words[T]=this.words[T]&~(1<<A),this._strip()},s.prototype.iadd=function(g){var w;if(this.negative!==0&&g.negative===0)return this.negative=0,w=this.isub(g),this.negative^=1,this._normSign();if(this.negative===0&&g.negative!==0)return g.negative=0,w=this.isub(g),g.negative=1,w._normSign();var T,A;this.length>g.length?(T=this,A=g):(T=g,A=this);for(var J=0,G=0;G<A.length;G++)w=(T.words[G]|0)+(A.words[G]|0)+J,this.words[G]=w&67108863,J=w>>>26;for(;J!==0&&G<T.length;G++)w=(T.words[G]|0)+J,this.words[G]=w&67108863,J=w>>>26;if(this.length=T.length,J!==0)this.words[this.length]=J,this.length++;else if(T!==this)for(;G<T.length;G++)this.words[G]=T.words[G];return this},s.prototype.add=function(g){var w;return g.negative!==0&&this.negative===0?(g.negative=0,w=this.sub(g),g.negative^=1,w):g.negative===0&&this.negative!==0?(this.negative=0,w=g.sub(this),this.negative=1,w):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},s.prototype.isub=function(g){if(g.negative!==0){g.negative=0;var w=this.iadd(g);return g.negative=1,w._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var T=this.cmp(g);if(T===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,J;T>0?(A=this,J=g):(A=g,J=this);for(var G=0,I=0;I<J.length;I++)w=(A.words[I]|0)-(J.words[I]|0)+G,G=w>>26,this.words[I]=w&67108863;for(;G!==0&&I<A.length;I++)w=(A.words[I]|0)+G,G=w>>26,this.words[I]=w&67108863;if(G===0&&I<A.length&&A!==this)for(;I<A.length;I++)this.words[I]=A.words[I];return this.length=Math.max(this.length,I),A!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(g){return this.clone().isub(g)};function N(_,g,w){w.negative=g.negative^_.negative;var T=_.length+g.length|0;w.length=T,T=T-1|0;var A=_.words[0]|0,J=g.words[0]|0,G=A*J,I=G&67108863,V=G/67108864|0;w.words[0]=I;for(var x=1;x<T;x++){for(var z=V>>>26,ie=V&67108863,se=Math.min(x,g.length-1),pe=Math.max(0,x-_.length+1);pe<=se;pe++){var be=x-pe|0;A=_.words[be]|0,J=g.words[pe]|0,G=A*J+ie,z+=G/67108864|0,ie=G&67108863}w.words[x]=ie|0,V=z|0}return V!==0?w.words[x]=V|0:w.length--,w._strip()}var P=function(g,w,T){var A=g.words,J=w.words,G=T.words,I=0,V,x,z,ie=A[0]|0,se=ie&8191,pe=ie>>>13,be=A[1]|0,Ee=be&8191,oe=be>>>13,ce=A[2]|0,ge=ce&8191,ke=ce>>>13,fe=A[3]|0,ee=fe&8191,te=fe>>>13,Q=A[4]|0,U=Q&8191,W=Q>>>13,X=A[5]|0,de=X&8191,ve=X>>>13,Se=A[6]|0,he=Se&8191,y=Se>>>13,F=A[7]|0,q=F&8191,ue=F>>>13,j=A[8]|0,S=j&8191,B=j>>>13,K=A[9]|0,me=K&8191,ae=K>>>13,_e=J[0]|0,Oe=_e&8191,Pe=_e>>>13,Ue=J[1]|0,De=Ue&8191,Ae=Ue>>>13,Re=J[2]|0,We=Re&8191,Le=Re>>>13,Be=J[3]|0,He=Be&8191,Me=Be>>>13,qe=J[4]|0,Qe=qe&8191,Fe=qe>>>13,Ye=J[5]|0,Xe=Ye&8191,Je=Ye>>>13,je=J[6]|0,ze=je&8191,Ve=je>>>13,et=J[7]|0,tt=et&8191,Ge=et>>>13,rt=J[8]|0,it=rt&8191,xe=rt>>>13,nt=J[9]|0,Ke=nt&8191,Ze=nt>>>13;T.negative=g.negative^w.negative,T.length=19,V=Math.imul(se,Oe),x=Math.imul(se,Pe),x=x+Math.imul(pe,Oe)|0,z=Math.imul(pe,Pe);var ne=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(ne>>>26)|0,ne&=67108863,V=Math.imul(Ee,Oe),x=Math.imul(Ee,Pe),x=x+Math.imul(oe,Oe)|0,z=Math.imul(oe,Pe),V=V+Math.imul(se,De)|0,x=x+Math.imul(se,Ae)|0,x=x+Math.imul(pe,De)|0,z=z+Math.imul(pe,Ae)|0;var le=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(le>>>26)|0,le&=67108863,V=Math.imul(ge,Oe),x=Math.imul(ge,Pe),x=x+Math.imul(ke,Oe)|0,z=Math.imul(ke,Pe),V=V+Math.imul(Ee,De)|0,x=x+Math.imul(Ee,Ae)|0,x=x+Math.imul(oe,De)|0,z=z+Math.imul(oe,Ae)|0,V=V+Math.imul(se,We)|0,x=x+Math.imul(se,Le)|0,x=x+Math.imul(pe,We)|0,z=z+Math.imul(pe,Le)|0;var ye=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(ye>>>26)|0,ye&=67108863,V=Math.imul(ee,Oe),x=Math.imul(ee,Pe),x=x+Math.imul(te,Oe)|0,z=Math.imul(te,Pe),V=V+Math.imul(ge,De)|0,x=x+Math.imul(ge,Ae)|0,x=x+Math.imul(ke,De)|0,z=z+Math.imul(ke,Ae)|0,V=V+Math.imul(Ee,We)|0,x=x+Math.imul(Ee,Le)|0,x=x+Math.imul(oe,We)|0,z=z+Math.imul(oe,Le)|0,V=V+Math.imul(se,He)|0,x=x+Math.imul(se,Me)|0,x=x+Math.imul(pe,He)|0,z=z+Math.imul(pe,Me)|0;var we=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(we>>>26)|0,we&=67108863,V=Math.imul(U,Oe),x=Math.imul(U,Pe),x=x+Math.imul(W,Oe)|0,z=Math.imul(W,Pe),V=V+Math.imul(ee,De)|0,x=x+Math.imul(ee,Ae)|0,x=x+Math.imul(te,De)|0,z=z+Math.imul(te,Ae)|0,V=V+Math.imul(ge,We)|0,x=x+Math.imul(ge,Le)|0,x=x+Math.imul(ke,We)|0,z=z+Math.imul(ke,Le)|0,V=V+Math.imul(Ee,He)|0,x=x+Math.imul(Ee,Me)|0,x=x+Math.imul(oe,He)|0,z=z+Math.imul(oe,Me)|0,V=V+Math.imul(se,Qe)|0,x=x+Math.imul(se,Fe)|0,x=x+Math.imul(pe,Qe)|0,z=z+Math.imul(pe,Fe)|0;var Te=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(Te>>>26)|0,Te&=67108863,V=Math.imul(de,Oe),x=Math.imul(de,Pe),x=x+Math.imul(ve,Oe)|0,z=Math.imul(ve,Pe),V=V+Math.imul(U,De)|0,x=x+Math.imul(U,Ae)|0,x=x+Math.imul(W,De)|0,z=z+Math.imul(W,Ae)|0,V=V+Math.imul(ee,We)|0,x=x+Math.imul(ee,Le)|0,x=x+Math.imul(te,We)|0,z=z+Math.imul(te,Le)|0,V=V+Math.imul(ge,He)|0,x=x+Math.imul(ge,Me)|0,x=x+Math.imul(ke,He)|0,z=z+Math.imul(ke,Me)|0,V=V+Math.imul(Ee,Qe)|0,x=x+Math.imul(Ee,Fe)|0,x=x+Math.imul(oe,Qe)|0,z=z+Math.imul(oe,Fe)|0,V=V+Math.imul(se,Xe)|0,x=x+Math.imul(se,Je)|0,x=x+Math.imul(pe,Xe)|0,z=z+Math.imul(pe,Je)|0;var Ne=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,V=Math.imul(he,Oe),x=Math.imul(he,Pe),x=x+Math.imul(y,Oe)|0,z=Math.imul(y,Pe),V=V+Math.imul(de,De)|0,x=x+Math.imul(de,Ae)|0,x=x+Math.imul(ve,De)|0,z=z+Math.imul(ve,Ae)|0,V=V+Math.imul(U,We)|0,x=x+Math.imul(U,Le)|0,x=x+Math.imul(W,We)|0,z=z+Math.imul(W,Le)|0,V=V+Math.imul(ee,He)|0,x=x+Math.imul(ee,Me)|0,x=x+Math.imul(te,He)|0,z=z+Math.imul(te,Me)|0,V=V+Math.imul(ge,Qe)|0,x=x+Math.imul(ge,Fe)|0,x=x+Math.imul(ke,Qe)|0,z=z+Math.imul(ke,Fe)|0,V=V+Math.imul(Ee,Xe)|0,x=x+Math.imul(Ee,Je)|0,x=x+Math.imul(oe,Xe)|0,z=z+Math.imul(oe,Je)|0,V=V+Math.imul(se,ze)|0,x=x+Math.imul(se,Ve)|0,x=x+Math.imul(pe,ze)|0,z=z+Math.imul(pe,Ve)|0;var Ie=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,V=Math.imul(q,Oe),x=Math.imul(q,Pe),x=x+Math.imul(ue,Oe)|0,z=Math.imul(ue,Pe),V=V+Math.imul(he,De)|0,x=x+Math.imul(he,Ae)|0,x=x+Math.imul(y,De)|0,z=z+Math.imul(y,Ae)|0,V=V+Math.imul(de,We)|0,x=x+Math.imul(de,Le)|0,x=x+Math.imul(ve,We)|0,z=z+Math.imul(ve,Le)|0,V=V+Math.imul(U,He)|0,x=x+Math.imul(U,Me)|0,x=x+Math.imul(W,He)|0,z=z+Math.imul(W,Me)|0,V=V+Math.imul(ee,Qe)|0,x=x+Math.imul(ee,Fe)|0,x=x+Math.imul(te,Qe)|0,z=z+Math.imul(te,Fe)|0,V=V+Math.imul(ge,Xe)|0,x=x+Math.imul(ge,Je)|0,x=x+Math.imul(ke,Xe)|0,z=z+Math.imul(ke,Je)|0,V=V+Math.imul(Ee,ze)|0,x=x+Math.imul(Ee,Ve)|0,x=x+Math.imul(oe,ze)|0,z=z+Math.imul(oe,Ve)|0,V=V+Math.imul(se,tt)|0,x=x+Math.imul(se,Ge)|0,x=x+Math.imul(pe,tt)|0,z=z+Math.imul(pe,Ge)|0;var Ce=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,V=Math.imul(S,Oe),x=Math.imul(S,Pe),x=x+Math.imul(B,Oe)|0,z=Math.imul(B,Pe),V=V+Math.imul(q,De)|0,x=x+Math.imul(q,Ae)|0,x=x+Math.imul(ue,De)|0,z=z+Math.imul(ue,Ae)|0,V=V+Math.imul(he,We)|0,x=x+Math.imul(he,Le)|0,x=x+Math.imul(y,We)|0,z=z+Math.imul(y,Le)|0,V=V+Math.imul(de,He)|0,x=x+Math.imul(de,Me)|0,x=x+Math.imul(ve,He)|0,z=z+Math.imul(ve,Me)|0,V=V+Math.imul(U,Qe)|0,x=x+Math.imul(U,Fe)|0,x=x+Math.imul(W,Qe)|0,z=z+Math.imul(W,Fe)|0,V=V+Math.imul(ee,Xe)|0,x=x+Math.imul(ee,Je)|0,x=x+Math.imul(te,Xe)|0,z=z+Math.imul(te,Je)|0,V=V+Math.imul(ge,ze)|0,x=x+Math.imul(ge,Ve)|0,x=x+Math.imul(ke,ze)|0,z=z+Math.imul(ke,Ve)|0,V=V+Math.imul(Ee,tt)|0,x=x+Math.imul(Ee,Ge)|0,x=x+Math.imul(oe,tt)|0,z=z+Math.imul(oe,Ge)|0,V=V+Math.imul(se,it)|0,x=x+Math.imul(se,xe)|0,x=x+Math.imul(pe,it)|0,z=z+Math.imul(pe,xe)|0;var $e=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+($e>>>26)|0,$e&=67108863,V=Math.imul(me,Oe),x=Math.imul(me,Pe),x=x+Math.imul(ae,Oe)|0,z=Math.imul(ae,Pe),V=V+Math.imul(S,De)|0,x=x+Math.imul(S,Ae)|0,x=x+Math.imul(B,De)|0,z=z+Math.imul(B,Ae)|0,V=V+Math.imul(q,We)|0,x=x+Math.imul(q,Le)|0,x=x+Math.imul(ue,We)|0,z=z+Math.imul(ue,Le)|0,V=V+Math.imul(he,He)|0,x=x+Math.imul(he,Me)|0,x=x+Math.imul(y,He)|0,z=z+Math.imul(y,Me)|0,V=V+Math.imul(de,Qe)|0,x=x+Math.imul(de,Fe)|0,x=x+Math.imul(ve,Qe)|0,z=z+Math.imul(ve,Fe)|0,V=V+Math.imul(U,Xe)|0,x=x+Math.imul(U,Je)|0,x=x+Math.imul(W,Xe)|0,z=z+Math.imul(W,Je)|0,V=V+Math.imul(ee,ze)|0,x=x+Math.imul(ee,Ve)|0,x=x+Math.imul(te,ze)|0,z=z+Math.imul(te,Ve)|0,V=V+Math.imul(ge,tt)|0,x=x+Math.imul(ge,Ge)|0,x=x+Math.imul(ke,tt)|0,z=z+Math.imul(ke,Ge)|0,V=V+Math.imul(Ee,it)|0,x=x+Math.imul(Ee,xe)|0,x=x+Math.imul(oe,it)|0,z=z+Math.imul(oe,xe)|0,V=V+Math.imul(se,Ke)|0,x=x+Math.imul(se,Ze)|0,x=x+Math.imul(pe,Ke)|0,z=z+Math.imul(pe,Ze)|0;var st=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(st>>>26)|0,st&=67108863,V=Math.imul(me,De),x=Math.imul(me,Ae),x=x+Math.imul(ae,De)|0,z=Math.imul(ae,Ae),V=V+Math.imul(S,We)|0,x=x+Math.imul(S,Le)|0,x=x+Math.imul(B,We)|0,z=z+Math.imul(B,Le)|0,V=V+Math.imul(q,He)|0,x=x+Math.imul(q,Me)|0,x=x+Math.imul(ue,He)|0,z=z+Math.imul(ue,Me)|0,V=V+Math.imul(he,Qe)|0,x=x+Math.imul(he,Fe)|0,x=x+Math.imul(y,Qe)|0,z=z+Math.imul(y,Fe)|0,V=V+Math.imul(de,Xe)|0,x=x+Math.imul(de,Je)|0,x=x+Math.imul(ve,Xe)|0,z=z+Math.imul(ve,Je)|0,V=V+Math.imul(U,ze)|0,x=x+Math.imul(U,Ve)|0,x=x+Math.imul(W,ze)|0,z=z+Math.imul(W,Ve)|0,V=V+Math.imul(ee,tt)|0,x=x+Math.imul(ee,Ge)|0,x=x+Math.imul(te,tt)|0,z=z+Math.imul(te,Ge)|0,V=V+Math.imul(ge,it)|0,x=x+Math.imul(ge,xe)|0,x=x+Math.imul(ke,it)|0,z=z+Math.imul(ke,xe)|0,V=V+Math.imul(Ee,Ke)|0,x=x+Math.imul(Ee,Ze)|0,x=x+Math.imul(oe,Ke)|0,z=z+Math.imul(oe,Ze)|0;var at=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(at>>>26)|0,at&=67108863,V=Math.imul(me,We),x=Math.imul(me,Le),x=x+Math.imul(ae,We)|0,z=Math.imul(ae,Le),V=V+Math.imul(S,He)|0,x=x+Math.imul(S,Me)|0,x=x+Math.imul(B,He)|0,z=z+Math.imul(B,Me)|0,V=V+Math.imul(q,Qe)|0,x=x+Math.imul(q,Fe)|0,x=x+Math.imul(ue,Qe)|0,z=z+Math.imul(ue,Fe)|0,V=V+Math.imul(he,Xe)|0,x=x+Math.imul(he,Je)|0,x=x+Math.imul(y,Xe)|0,z=z+Math.imul(y,Je)|0,V=V+Math.imul(de,ze)|0,x=x+Math.imul(de,Ve)|0,x=x+Math.imul(ve,ze)|0,z=z+Math.imul(ve,Ve)|0,V=V+Math.imul(U,tt)|0,x=x+Math.imul(U,Ge)|0,x=x+Math.imul(W,tt)|0,z=z+Math.imul(W,Ge)|0,V=V+Math.imul(ee,it)|0,x=x+Math.imul(ee,xe)|0,x=x+Math.imul(te,it)|0,z=z+Math.imul(te,xe)|0,V=V+Math.imul(ge,Ke)|0,x=x+Math.imul(ge,Ze)|0,x=x+Math.imul(ke,Ke)|0,z=z+Math.imul(ke,Ze)|0;var dt=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(dt>>>26)|0,dt&=67108863,V=Math.imul(me,He),x=Math.imul(me,Me),x=x+Math.imul(ae,He)|0,z=Math.imul(ae,Me),V=V+Math.imul(S,Qe)|0,x=x+Math.imul(S,Fe)|0,x=x+Math.imul(B,Qe)|0,z=z+Math.imul(B,Fe)|0,V=V+Math.imul(q,Xe)|0,x=x+Math.imul(q,Je)|0,x=x+Math.imul(ue,Xe)|0,z=z+Math.imul(ue,Je)|0,V=V+Math.imul(he,ze)|0,x=x+Math.imul(he,Ve)|0,x=x+Math.imul(y,ze)|0,z=z+Math.imul(y,Ve)|0,V=V+Math.imul(de,tt)|0,x=x+Math.imul(de,Ge)|0,x=x+Math.imul(ve,tt)|0,z=z+Math.imul(ve,Ge)|0,V=V+Math.imul(U,it)|0,x=x+Math.imul(U,xe)|0,x=x+Math.imul(W,it)|0,z=z+Math.imul(W,xe)|0,V=V+Math.imul(ee,Ke)|0,x=x+Math.imul(ee,Ze)|0,x=x+Math.imul(te,Ke)|0,z=z+Math.imul(te,Ze)|0;var ot=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(ot>>>26)|0,ot&=67108863,V=Math.imul(me,Qe),x=Math.imul(me,Fe),x=x+Math.imul(ae,Qe)|0,z=Math.imul(ae,Fe),V=V+Math.imul(S,Xe)|0,x=x+Math.imul(S,Je)|0,x=x+Math.imul(B,Xe)|0,z=z+Math.imul(B,Je)|0,V=V+Math.imul(q,ze)|0,x=x+Math.imul(q,Ve)|0,x=x+Math.imul(ue,ze)|0,z=z+Math.imul(ue,Ve)|0,V=V+Math.imul(he,tt)|0,x=x+Math.imul(he,Ge)|0,x=x+Math.imul(y,tt)|0,z=z+Math.imul(y,Ge)|0,V=V+Math.imul(de,it)|0,x=x+Math.imul(de,xe)|0,x=x+Math.imul(ve,it)|0,z=z+Math.imul(ve,xe)|0,V=V+Math.imul(U,Ke)|0,x=x+Math.imul(U,Ze)|0,x=x+Math.imul(W,Ke)|0,z=z+Math.imul(W,Ze)|0;var ct=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(ct>>>26)|0,ct&=67108863,V=Math.imul(me,Xe),x=Math.imul(me,Je),x=x+Math.imul(ae,Xe)|0,z=Math.imul(ae,Je),V=V+Math.imul(S,ze)|0,x=x+Math.imul(S,Ve)|0,x=x+Math.imul(B,ze)|0,z=z+Math.imul(B,Ve)|0,V=V+Math.imul(q,tt)|0,x=x+Math.imul(q,Ge)|0,x=x+Math.imul(ue,tt)|0,z=z+Math.imul(ue,Ge)|0,V=V+Math.imul(he,it)|0,x=x+Math.imul(he,xe)|0,x=x+Math.imul(y,it)|0,z=z+Math.imul(y,xe)|0,V=V+Math.imul(de,Ke)|0,x=x+Math.imul(de,Ze)|0,x=x+Math.imul(ve,Ke)|0,z=z+Math.imul(ve,Ze)|0;var ft=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(ft>>>26)|0,ft&=67108863,V=Math.imul(me,ze),x=Math.imul(me,Ve),x=x+Math.imul(ae,ze)|0,z=Math.imul(ae,Ve),V=V+Math.imul(S,tt)|0,x=x+Math.imul(S,Ge)|0,x=x+Math.imul(B,tt)|0,z=z+Math.imul(B,Ge)|0,V=V+Math.imul(q,it)|0,x=x+Math.imul(q,xe)|0,x=x+Math.imul(ue,it)|0,z=z+Math.imul(ue,xe)|0,V=V+Math.imul(he,Ke)|0,x=x+Math.imul(he,Ze)|0,x=x+Math.imul(y,Ke)|0,z=z+Math.imul(y,Ze)|0;var lt=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(lt>>>26)|0,lt&=67108863,V=Math.imul(me,tt),x=Math.imul(me,Ge),x=x+Math.imul(ae,tt)|0,z=Math.imul(ae,Ge),V=V+Math.imul(S,it)|0,x=x+Math.imul(S,xe)|0,x=x+Math.imul(B,it)|0,z=z+Math.imul(B,xe)|0,V=V+Math.imul(q,Ke)|0,x=x+Math.imul(q,Ze)|0,x=x+Math.imul(ue,Ke)|0,z=z+Math.imul(ue,Ze)|0;var ht=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(ht>>>26)|0,ht&=67108863,V=Math.imul(me,it),x=Math.imul(me,xe),x=x+Math.imul(ae,it)|0,z=Math.imul(ae,xe),V=V+Math.imul(S,Ke)|0,x=x+Math.imul(S,Ze)|0,x=x+Math.imul(B,Ke)|0,z=z+Math.imul(B,Ze)|0;var pt=(I+V|0)+((x&8191)<<13)|0;I=(z+(x>>>13)|0)+(pt>>>26)|0,pt&=67108863,V=Math.imul(me,Ke),x=Math.imul(me,Ze),x=x+Math.imul(ae,Ke)|0,z=Math.imul(ae,Ze);var mt=(I+V|0)+((x&8191)<<13)|0;return I=(z+(x>>>13)|0)+(mt>>>26)|0,mt&=67108863,G[0]=ne,G[1]=le,G[2]=ye,G[3]=we,G[4]=Te,G[5]=Ne,G[6]=Ie,G[7]=Ce,G[8]=$e,G[9]=st,G[10]=at,G[11]=dt,G[12]=ot,G[13]=ct,G[14]=ft,G[15]=lt,G[16]=ht,G[17]=pt,G[18]=mt,I!==0&&(G[19]=I,T.length++),T};Math.imul||(P=N);function M(_,g,w){w.negative=g.negative^_.negative,w.length=_.length+g.length;for(var T=0,A=0,J=0;J<w.length-1;J++){var G=A;A=0;for(var I=T&67108863,V=Math.min(J,g.length-1),x=Math.max(0,J-_.length+1);x<=V;x++){var z=J-x,ie=_.words[z]|0,se=g.words[x]|0,pe=ie*se,be=pe&67108863;G=G+(pe/67108864|0)|0,be=be+I|0,I=be&67108863,G=G+(be>>>26)|0,A+=G>>>26,G&=67108863}w.words[J]=I,T=G,G=A}return T!==0?w.words[J]=T:w.length--,w._strip()}function L(_,g,w){return M(_,g,w)}s.prototype.mulTo=function(g,w){var T,A=this.length+g.length;return this.length===10&&g.length===10?T=P(this,g,w):A<63?T=N(this,g,w):A<1024?T=M(this,g,w):T=L(this,g,w),T},s.prototype.mul=function(g){var w=new s(null);return w.words=new Array(this.length+g.length),this.mulTo(g,w)},s.prototype.mulf=function(g){var w=new s(null);return w.words=new Array(this.length+g.length),L(this,g,w)},s.prototype.imul=function(g){return this.clone().mulTo(g,this)},s.prototype.imuln=function(g){var w=g<0;w&&(g=-g),o(typeof g=="number"),o(g<67108864);for(var T=0,A=0;A<this.length;A++){var J=(this.words[A]|0)*g,G=(J&67108863)+(T&67108863);T>>=26,T+=J/67108864|0,T+=G>>>26,this.words[A]=G&67108863}return T!==0&&(this.words[A]=T,this.length++),w?this.ineg():this},s.prototype.muln=function(g){return this.clone().imuln(g)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(g){var w=C(g);if(w.length===0)return new s(1);for(var T=this,A=0;A<w.length&&w[A]===0;A++,T=T.sqr());if(++A<w.length)for(var J=T.sqr();A<w.length;A++,J=J.sqr())w[A]!==0&&(T=T.mul(J));return T},s.prototype.iushln=function(g){o(typeof g=="number"&&g>=0);var w=g%26,T=(g-w)/26,A=67108863>>>26-w<<26-w,J;if(w!==0){var G=0;for(J=0;J<this.length;J++){var I=this.words[J]&A,V=(this.words[J]|0)-I<<w;this.words[J]=V|G,G=I>>>26-w}G&&(this.words[J]=G,this.length++)}if(T!==0){for(J=this.length-1;J>=0;J--)this.words[J+T]=this.words[J];for(J=0;J<T;J++)this.words[J]=0;this.length+=T}return this._strip()},s.prototype.ishln=function(g){return o(this.negative===0),this.iushln(g)},s.prototype.iushrn=function(g,w,T){o(typeof g=="number"&&g>=0);var A;w?A=(w-w%26)/26:A=0;var J=g%26,G=Math.min((g-J)/26,this.length),I=67108863^67108863>>>J<<J,V=T;if(A-=G,A=Math.max(0,A),V){for(var x=0;x<G;x++)V.words[x]=this.words[x];V.length=G}if(G!==0)if(this.length>G)for(this.length-=G,x=0;x<this.length;x++)this.words[x]=this.words[x+G];else this.words[0]=0,this.length=1;var z=0;for(x=this.length-1;x>=0&&(z!==0||x>=A);x--){var ie=this.words[x]|0;this.words[x]=z<<26-J|ie>>>J,z=ie&I}return V&&z!==0&&(V.words[V.length++]=z),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(g,w,T){return o(this.negative===0),this.iushrn(g,w,T)},s.prototype.shln=function(g){return this.clone().ishln(g)},s.prototype.ushln=function(g){return this.clone().iushln(g)},s.prototype.shrn=function(g){return this.clone().ishrn(g)},s.prototype.ushrn=function(g){return this.clone().iushrn(g)},s.prototype.testn=function(g){o(typeof g=="number"&&g>=0);var w=g%26,T=(g-w)/26,A=1<<w;if(this.length<=T)return!1;var J=this.words[T];return!!(J&A)},s.prototype.imaskn=function(g){o(typeof g=="number"&&g>=0);var w=g%26,T=(g-w)/26;if(o(this.negative===0,"imaskn works only with positive numbers"),this.length<=T)return this;if(w!==0&&T++,this.length=Math.min(T,this.length),w!==0){var A=67108863^67108863>>>w<<w;this.words[this.length-1]&=A}return this._strip()},s.prototype.maskn=function(g){return this.clone().imaskn(g)},s.prototype.iaddn=function(g){return o(typeof g=="number"),o(g<67108864),g<0?this.isubn(-g):this.negative!==0?this.length===1&&(this.words[0]|0)<=g?(this.words[0]=g-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},s.prototype._iaddn=function(g){this.words[0]+=g;for(var w=0;w<this.length&&this.words[w]>=67108864;w++)this.words[w]-=67108864,w===this.length-1?this.words[w+1]=1:this.words[w+1]++;return this.length=Math.max(this.length,w+1),this},s.prototype.isubn=function(g){if(o(typeof g=="number"),o(g<67108864),g<0)return this.iaddn(-g);if(this.negative!==0)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var w=0;w<this.length&&this.words[w]<0;w++)this.words[w]+=67108864,this.words[w+1]-=1;return this._strip()},s.prototype.addn=function(g){return this.clone().iaddn(g)},s.prototype.subn=function(g){return this.clone().isubn(g)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(g,w,T){var A=g.length+T,J;this._expand(A);var G,I=0;for(J=0;J<g.length;J++){G=(this.words[J+T]|0)+I;var V=(g.words[J]|0)*w;G-=V&67108863,I=(G>>26)-(V/67108864|0),this.words[J+T]=G&67108863}for(;J<this.length-T;J++)G=(this.words[J+T]|0)+I,I=G>>26,this.words[J+T]=G&67108863;if(I===0)return this._strip();for(o(I===-1),I=0,J=0;J<this.length;J++)G=-(this.words[J]|0)+I,I=G>>26,this.words[J]=G&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(g,w){var T=this.length-g.length,A=this.clone(),J=g,G=J.words[J.length-1]|0,I=this._countBits(G);T=26-I,T!==0&&(J=J.ushln(T),A.iushln(T),G=J.words[J.length-1]|0);var V=A.length-J.length,x;if(w!=="mod"){x=new s(null),x.length=V+1,x.words=new Array(x.length);for(var z=0;z<x.length;z++)x.words[z]=0}var ie=A.clone()._ishlnsubmul(J,1,V);ie.negative===0&&(A=ie,x&&(x.words[V]=1));for(var se=V-1;se>=0;se--){var pe=(A.words[J.length+se]|0)*67108864+(A.words[J.length+se-1]|0);for(pe=Math.min(pe/G|0,67108863),A._ishlnsubmul(J,pe,se);A.negative!==0;)pe--,A.negative=0,A._ishlnsubmul(J,1,se),A.isZero()||(A.negative^=1);x&&(x.words[se]=pe)}return x&&x._strip(),A._strip(),w!=="div"&&T!==0&&A.iushrn(T),{div:x||null,mod:A}},s.prototype.divmod=function(g,w,T){if(o(!g.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var A,J,G;return this.negative!==0&&g.negative===0?(G=this.neg().divmod(g,w),w!=="mod"&&(A=G.div.neg()),w!=="div"&&(J=G.mod.neg(),T&&J.negative!==0&&J.iadd(g)),{div:A,mod:J}):this.negative===0&&g.negative!==0?(G=this.divmod(g.neg(),w),w!=="mod"&&(A=G.div.neg()),{div:A,mod:G.mod}):this.negative&g.negative?(G=this.neg().divmod(g.neg(),w),w!=="div"&&(J=G.mod.neg(),T&&J.negative!==0&&J.isub(g)),{div:G.div,mod:J}):g.length>this.length||this.cmp(g)<0?{div:new s(0),mod:this}:g.length===1?w==="div"?{div:this.divn(g.words[0]),mod:null}:w==="mod"?{div:null,mod:new s(this.modrn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new s(this.modrn(g.words[0]))}:this._wordDiv(g,w)},s.prototype.div=function(g){return this.divmod(g,"div",!1).div},s.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},s.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},s.prototype.divRound=function(g){var w=this.divmod(g);if(w.mod.isZero())return w.div;var T=w.div.negative!==0?w.mod.isub(g):w.mod,A=g.ushrn(1),J=g.andln(1),G=T.cmp(A);return G<0||J===1&&G===0?w.div:w.div.negative!==0?w.div.isubn(1):w.div.iaddn(1)},s.prototype.modrn=function(g){var w=g<0;w&&(g=-g),o(g<=67108863);for(var T=(1<<26)%g,A=0,J=this.length-1;J>=0;J--)A=(T*A+(this.words[J]|0))%g;return w?-A:A},s.prototype.modn=function(g){return this.modrn(g)},s.prototype.idivn=function(g){var w=g<0;w&&(g=-g),o(g<=67108863);for(var T=0,A=this.length-1;A>=0;A--){var J=(this.words[A]|0)+T*67108864;this.words[A]=J/g|0,T=J%g}return this._strip(),w?this.ineg():this},s.prototype.divn=function(g){return this.clone().idivn(g)},s.prototype.egcd=function(g){o(g.negative===0),o(!g.isZero());var w=this,T=g.clone();w.negative!==0?w=w.umod(g):w=w.clone();for(var A=new s(1),J=new s(0),G=new s(0),I=new s(1),V=0;w.isEven()&&T.isEven();)w.iushrn(1),T.iushrn(1),++V;for(var x=T.clone(),z=w.clone();!w.isZero();){for(var ie=0,se=1;!(w.words[0]&se)&&ie<26;++ie,se<<=1);if(ie>0)for(w.iushrn(ie);ie-- >0;)(A.isOdd()||J.isOdd())&&(A.iadd(x),J.isub(z)),A.iushrn(1),J.iushrn(1);for(var pe=0,be=1;!(T.words[0]&be)&&pe<26;++pe,be<<=1);if(pe>0)for(T.iushrn(pe);pe-- >0;)(G.isOdd()||I.isOdd())&&(G.iadd(x),I.isub(z)),G.iushrn(1),I.iushrn(1);w.cmp(T)>=0?(w.isub(T),A.isub(G),J.isub(I)):(T.isub(w),G.isub(A),I.isub(J))}return{a:G,b:I,gcd:T.iushln(V)}},s.prototype._invmp=function(g){o(g.negative===0),o(!g.isZero());var w=this,T=g.clone();w.negative!==0?w=w.umod(g):w=w.clone();for(var A=new s(1),J=new s(0),G=T.clone();w.cmpn(1)>0&&T.cmpn(1)>0;){for(var I=0,V=1;!(w.words[0]&V)&&I<26;++I,V<<=1);if(I>0)for(w.iushrn(I);I-- >0;)A.isOdd()&&A.iadd(G),A.iushrn(1);for(var x=0,z=1;!(T.words[0]&z)&&x<26;++x,z<<=1);if(x>0)for(T.iushrn(x);x-- >0;)J.isOdd()&&J.iadd(G),J.iushrn(1);w.cmp(T)>=0?(w.isub(T),A.isub(J)):(T.isub(w),J.isub(A))}var ie;return w.cmpn(1)===0?ie=A:ie=J,ie.cmpn(0)<0&&ie.iadd(g),ie},s.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var w=this.clone(),T=g.clone();w.negative=0,T.negative=0;for(var A=0;w.isEven()&&T.isEven();A++)w.iushrn(1),T.iushrn(1);do{for(;w.isEven();)w.iushrn(1);for(;T.isEven();)T.iushrn(1);var J=w.cmp(T);if(J<0){var G=w;w=T,T=G}else if(J===0||T.cmpn(1)===0)break;w.isub(T)}while(!0);return T.iushln(A)},s.prototype.invm=function(g){return this.egcd(g).a.umod(g)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(g){return this.words[0]&g},s.prototype.bincn=function(g){o(typeof g=="number");var w=g%26,T=(g-w)/26,A=1<<w;if(this.length<=T)return this._expand(T+1),this.words[T]|=A,this;for(var J=A,G=T;J!==0&&G<this.length;G++){var I=this.words[G]|0;I+=J,J=I>>>26,I&=67108863,this.words[G]=I}return J!==0&&(this.words[G]=J,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(g){var w=g<0;if(this.negative!==0&&!w)return-1;if(this.negative===0&&w)return 1;this._strip();var T;if(this.length>1)T=1;else{w&&(g=-g),o(g<=67108863,"Number is too big");var A=this.words[0]|0;T=A===g?0:A<g?-1:1}return this.negative!==0?-T|0:T},s.prototype.cmp=function(g){if(this.negative!==0&&g.negative===0)return-1;if(this.negative===0&&g.negative!==0)return 1;var w=this.ucmp(g);return this.negative!==0?-w|0:w},s.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var w=0,T=this.length-1;T>=0;T--){var A=this.words[T]|0,J=g.words[T]|0;if(A!==J){A<J?w=-1:A>J&&(w=1);break}}return w},s.prototype.gtn=function(g){return this.cmpn(g)===1},s.prototype.gt=function(g){return this.cmp(g)===1},s.prototype.gten=function(g){return this.cmpn(g)>=0},s.prototype.gte=function(g){return this.cmp(g)>=0},s.prototype.ltn=function(g){return this.cmpn(g)===-1},s.prototype.lt=function(g){return this.cmp(g)===-1},s.prototype.lten=function(g){return this.cmpn(g)<=0},s.prototype.lte=function(g){return this.cmp(g)<=0},s.prototype.eqn=function(g){return this.cmpn(g)===0},s.prototype.eq=function(g){return this.cmp(g)===0},s.red=function(g){return new D(g)},s.prototype.toRed=function(g){return o(!this.red,"Already a number in reduction context"),o(this.negative===0,"red works only with positives"),g.convertTo(this)._forceRed(g)},s.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(g){return this.red=g,this},s.prototype.forceRed=function(g){return o(!this.red,"Already a number in reduction context"),this._forceRed(g)},s.prototype.redAdd=function(g){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},s.prototype.redIAdd=function(g){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},s.prototype.redSub=function(g){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},s.prototype.redISub=function(g){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},s.prototype.redShl=function(g){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},s.prototype.redMul=function(g){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},s.prototype.redIMul=function(g){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},s.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(g){return o(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var $={k256:null,p224:null,p192:null,p25519:null};function H(_,g){this.name=_,this.p=new s(g,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var g=new s(null);return g.words=new Array(Math.ceil(this.n/13)),g},H.prototype.ireduce=function(g){var w=g,T;do this.split(w,this.tmp),w=this.imulK(w),w=w.iadd(this.tmp),T=w.bitLength();while(T>this.n);var A=T<this.n?-1:w.ucmp(this.p);return A===0?(w.words[0]=0,w.length=1):A>0?w.isub(this.p):w.strip!==void 0?w.strip():w._strip(),w},H.prototype.split=function(g,w){g.iushrn(this.n,0,w)},H.prototype.imulK=function(g){return g.imul(this.k)};function Z(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d(Z,H),Z.prototype.split=function(g,w){for(var T=4194303,A=Math.min(g.length,9),J=0;J<A;J++)w.words[J]=g.words[J];if(w.length=A,g.length<=9){g.words[0]=0,g.length=1;return}var G=g.words[9];for(w.words[w.length++]=G&T,J=10;J<g.length;J++){var I=g.words[J]|0;g.words[J-10]=(I&T)<<4|G>>>22,G=I}G>>>=22,g.words[J-10]=G,G===0&&g.length>10?g.length-=10:g.length-=9},Z.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var w=0,T=0;T<g.length;T++){var A=g.words[T]|0;w+=A*977,g.words[T]=w&67108863,w=A*64+(w/67108864|0)}return g.words[g.length-1]===0&&(g.length--,g.words[g.length-1]===0&&g.length--),g};function re(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(re,H);function Y(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(Y,H);function O(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(O,H),O.prototype.imulK=function(g){for(var w=0,T=0;T<g.length;T++){var A=(g.words[T]|0)*19+w,J=A&67108863;A>>>=26,g.words[T]=J,w=A}return w!==0&&(g.words[g.length++]=w),g},s._prime=function(g){if($[g])return $[g];var w;if(g==="k256")w=new Z;else if(g==="p224")w=new re;else if(g==="p192")w=new Y;else if(g==="p25519")w=new O;else throw new Error("Unknown prime "+g);return $[g]=w,w};function D(_){if(typeof _=="string"){var g=s._prime(_);this.m=g.p,this.prime=g}else o(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}D.prototype._verify1=function(g){o(g.negative===0,"red works only with positives"),o(g.red,"red works only with red numbers")},D.prototype._verify2=function(g,w){o((g.negative|w.negative)===0,"red works only with positives"),o(g.red&&g.red===w.red,"red works only with red numbers")},D.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):(l(g,g.umod(this.m)._forceRed(this)),g)},D.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},D.prototype.add=function(g,w){this._verify2(g,w);var T=g.add(w);return T.cmp(this.m)>=0&&T.isub(this.m),T._forceRed(this)},D.prototype.iadd=function(g,w){this._verify2(g,w);var T=g.iadd(w);return T.cmp(this.m)>=0&&T.isub(this.m),T},D.prototype.sub=function(g,w){this._verify2(g,w);var T=g.sub(w);return T.cmpn(0)<0&&T.iadd(this.m),T._forceRed(this)},D.prototype.isub=function(g,w){this._verify2(g,w);var T=g.isub(w);return T.cmpn(0)<0&&T.iadd(this.m),T},D.prototype.shl=function(g,w){return this._verify1(g),this.imod(g.ushln(w))},D.prototype.imul=function(g,w){return this._verify2(g,w),this.imod(g.imul(w))},D.prototype.mul=function(g,w){return this._verify2(g,w),this.imod(g.mul(w))},D.prototype.isqr=function(g){return this.imul(g,g.clone())},D.prototype.sqr=function(g){return this.mul(g,g)},D.prototype.sqrt=function(g){if(g.isZero())return g.clone();var w=this.m.andln(3);if(o(w%2===1),w===3){var T=this.m.add(new s(1)).iushrn(2);return this.pow(g,T)}for(var A=this.m.subn(1),J=0;!A.isZero()&&A.andln(1)===0;)J++,A.iushrn(1);o(!A.isZero());var G=new s(1).toRed(this),I=G.redNeg(),V=this.m.subn(1).iushrn(1),x=this.m.bitLength();for(x=new s(2*x*x).toRed(this);this.pow(x,V).cmp(I)!==0;)x.redIAdd(I);for(var z=this.pow(x,A),ie=this.pow(g,A.addn(1).iushrn(1)),se=this.pow(g,A),pe=J;se.cmp(G)!==0;){for(var be=se,Ee=0;be.cmp(G)!==0;Ee++)be=be.redSqr();o(Ee<pe);var oe=this.pow(z,new s(1).iushln(pe-Ee-1));ie=ie.redMul(oe),z=oe.redSqr(),se=se.redMul(z),pe=Ee}return ie},D.prototype.invm=function(g){var w=g._invmp(this.m);return w.negative!==0?(w.negative=0,this.imod(w).redNeg()):this.imod(w)},D.prototype.pow=function(g,w){if(w.isZero())return new s(1).toRed(this);if(w.cmpn(1)===0)return g.clone();var T=4,A=new Array(1<<T);A[0]=new s(1).toRed(this),A[1]=g;for(var J=2;J<A.length;J++)A[J]=this.mul(A[J-1],g);var G=A[0],I=0,V=0,x=w.bitLength()%26;for(x===0&&(x=26),J=w.length-1;J>=0;J--){for(var z=w.words[J],ie=x-1;ie>=0;ie--){var se=z>>ie&1;if(G!==A[0]&&(G=this.sqr(G)),se===0&&I===0){V=0;continue}I<<=1,I|=se,V++,!(V!==T&&(J!==0||ie!==0))&&(G=this.mul(G,A[I]),V=0,I=0)}x=26}return G},D.prototype.convertTo=function(g){var w=g.umod(this.m);return w===g?w.clone():w},D.prototype.convertFrom=function(g){var w=g.clone();return w.red=null,w},s.mont=function(g){return new b(g)};function b(_){D.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(b,D),b.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},b.prototype.convertFrom=function(g){var w=this.imod(g.mul(this.rinv));return w.red=null,w},b.prototype.imul=function(g,w){if(g.isZero()||w.isZero())return g.words[0]=0,g.length=1,g;var T=g.imul(w),A=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),J=T.isub(A).iushrn(this.shift),G=J;return J.cmp(this.m)>=0?G=J.isub(this.m):J.cmpn(0)<0&&(G=J.iadd(this.m)),G._forceRed(this)},b.prototype.mul=function(g,w){if(g.isZero()||w.isZero())return new s(0)._forceRed(this);var T=g.mul(w),A=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),J=T.isub(A).iushrn(this.shift),G=J;return J.cmp(this.m)>=0?G=J.isub(this.m):J.cmpn(0)<0&&(G=J.iadd(this.m)),G._forceRed(this)},b.prototype.invm=function(g){var w=this.imod(g._invmp(this.m).mul(this.r2));return w._forceRed(this)}})(typeof i>"u"||i,this)},{buffer:142}],141:[function(e,i,t){var n;i.exports=function(s){return n||(n=new a(null)),n.generate(s)};function a(d){this.rand=d}if(i.exports.Rand=a,a.prototype.generate=function(s){return this._rand(s)},a.prototype._rand=function(s){if(this.rand.getBytes)return this.rand.getBytes(s);for(var u=new Uint8Array(s),c=0;c<u.length;c++)u[c]=this.rand.getByte();return u},typeof self=="object")self.crypto&&self.crypto.getRandomValues?a.prototype._rand=function(s){var u=new Uint8Array(s);return self.crypto.getRandomValues(u),u}:self.msCrypto&&self.msCrypto.getRandomValues?a.prototype._rand=function(s){var u=new Uint8Array(s);return self.msCrypto.getRandomValues(u),u}:typeof window=="object"&&(a.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var o=e("crypto");if(typeof o.randomBytes!="function")throw new Error("Not supported");a.prototype._rand=function(s){return o.randomBytes(s)}}catch{}},{crypto:142}],142:[function(e,i,t){},{}],143:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(h){n.isBuffer(h)||(h=n.from(h));for(var p=h.length/4|0,l=new Array(p),f=0;f<p;f++)l[f]=h.readUInt32BE(f*4);return l}function o(h){for(var p=0;p<h.length;h++)h[p]=0}function d(h,p,l,f,m){for(var v=l[0],E=l[1],k=l[2],C=l[3],N=h[0]^p[0],P=h[1]^p[1],M=h[2]^p[2],L=h[3]^p[3],$,H,Z,re,Y=4,O=1;O<m;O++)$=v[N>>>24]^E[P>>>16&255]^k[M>>>8&255]^C[L&255]^p[Y++],H=v[P>>>24]^E[M>>>16&255]^k[L>>>8&255]^C[N&255]^p[Y++],Z=v[M>>>24]^E[L>>>16&255]^k[N>>>8&255]^C[P&255]^p[Y++],re=v[L>>>24]^E[N>>>16&255]^k[P>>>8&255]^C[M&255]^p[Y++],N=$,P=H,M=Z,L=re;return $=(f[N>>>24]<<24|f[P>>>16&255]<<16|f[M>>>8&255]<<8|f[L&255])^p[Y++],H=(f[P>>>24]<<24|f[M>>>16&255]<<16|f[L>>>8&255]<<8|f[N&255])^p[Y++],Z=(f[M>>>24]<<24|f[L>>>16&255]<<16|f[N>>>8&255]<<8|f[P&255])^p[Y++],re=(f[L>>>24]<<24|f[N>>>16&255]<<16|f[P>>>8&255]<<8|f[M&255])^p[Y++],$=$>>>0,H=H>>>0,Z=Z>>>0,re=re>>>0,[$,H,Z,re]}var s=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var h=new Array(256),p=0;p<256;p++)p<128?h[p]=p<<1:h[p]=p<<1^283;for(var l=[],f=[],m=[[],[],[],[]],v=[[],[],[],[]],E=0,k=0,C=0;C<256;++C){var N=k^k<<1^k<<2^k<<3^k<<4;N=N>>>8^N&255^99,l[E]=N,f[N]=E;var P=h[E],M=h[P],L=h[M],$=h[N]*257^N*16843008;m[0][E]=$<<24|$>>>8,m[1][E]=$<<16|$>>>16,m[2][E]=$<<8|$>>>24,m[3][E]=$,$=L*16843009^M*65537^P*257^E*16843008,v[0][N]=$<<24|$>>>8,v[1][N]=$<<16|$>>>16,v[2][N]=$<<8|$>>>24,v[3][N]=$,E===0?E=k=1:(E=P^h[h[h[L^P]]],k^=h[h[k]])}return{SBOX:l,INV_SBOX:f,SUB_MIX:m,INV_SUB_MIX:v}}();function c(h){this._key=a(h),this._reset()}c.blockSize=4*4,c.keySize=256/8,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var h=this._key,p=h.length,l=p+6,f=(l+1)*4,m=[],v=0;v<p;v++)m[v]=h[v];for(v=p;v<f;v++){var E=m[v-1];v%p===0?(E=E<<8|E>>>24,E=u.SBOX[E>>>24]<<24|u.SBOX[E>>>16&255]<<16|u.SBOX[E>>>8&255]<<8|u.SBOX[E&255],E^=s[v/p|0]<<24):p>6&&v%p===4&&(E=u.SBOX[E>>>24]<<24|u.SBOX[E>>>16&255]<<16|u.SBOX[E>>>8&255]<<8|u.SBOX[E&255]),m[v]=m[v-p]^E}for(var k=[],C=0;C<f;C++){var N=f-C,P=m[N-(C%4?0:4)];C<4||N<=4?k[C]=P:k[C]=u.INV_SUB_MIX[0][u.SBOX[P>>>24]]^u.INV_SUB_MIX[1][u.SBOX[P>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[P>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[P&255]]}this._nRounds=l,this._keySchedule=m,this._invKeySchedule=k},c.prototype.encryptBlockRaw=function(h){return h=a(h),d(h,this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},c.prototype.encryptBlock=function(h){var p=this.encryptBlockRaw(h),l=n.allocUnsafe(16);return l.writeUInt32BE(p[0],0),l.writeUInt32BE(p[1],4),l.writeUInt32BE(p[2],8),l.writeUInt32BE(p[3],12),l},c.prototype.decryptBlock=function(h){h=a(h);var p=h[1];h[1]=h[3],h[3]=p;var l=d(h,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),f=n.allocUnsafe(16);return f.writeUInt32BE(l[0],0),f.writeUInt32BE(l[3],4),f.writeUInt32BE(l[2],8),f.writeUInt32BE(l[1],12),f},c.prototype.scrub=function(){o(this._keySchedule),o(this._invKeySchedule),o(this._key)},i.exports.AES=c},{"safe-buffer":279}],144:[function(e,i,t){var n=e("./aes"),a=e("safe-buffer").Buffer,o=e("cipher-base"),d=e("inherits"),s=e("./ghash"),u=e("buffer-xor"),c=e("./incr32");function h(f,m){var v=0;f.length!==m.length&&v++;for(var E=Math.min(f.length,m.length),k=0;k<E;++k)v+=f[k]^m[k];return v}function p(f,m,v){if(m.length===12)return f._finID=a.concat([m,a.from([0,0,0,1])]),a.concat([m,a.from([0,0,0,2])]);var E=new s(v),k=m.length,C=k%16;E.update(m),C&&(C=16-C,E.update(a.alloc(C,0))),E.update(a.alloc(8,0));var N=k*8,P=a.alloc(8);P.writeUIntBE(N,0,8),E.update(P),f._finID=E.state;var M=a.from(f._finID);return c(M),M}function l(f,m,v,E){o.call(this);var k=a.alloc(4,0);this._cipher=new n.AES(m);var C=this._cipher.encryptBlock(k);this._ghash=new s(C),v=p(this,v,C),this._prev=a.from(v),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=E,this._alen=0,this._len=0,this._mode=f,this._authTag=null,this._called=!1}d(l,o),l.prototype._update=function(f){if(!this._called&&this._alen){var m=16-this._alen%16;m<16&&(m=a.alloc(m,0),this._ghash.update(m))}this._called=!0;var v=this._mode.encrypt(this,f);return this._decrypt?this._ghash.update(f):this._ghash.update(v),this._len+=f.length,v},l.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var f=u(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&h(f,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=f,this._cipher.scrub()},l.prototype.getAuthTag=function(){if(this._decrypt||!a.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},l.prototype.setAuthTag=function(m){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=m},l.prototype.setAAD=function(m){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(m),this._alen+=m.length},i.exports=l},{"./aes":143,"./ghash":148,"./incr32":149,"buffer-xor":170,"cipher-base":174,inherits:233,"safe-buffer":279}],145:[function(e,i,t){var n=e("./encrypter"),a=e("./decrypter"),o=e("./modes/list.json");function d(){return Object.keys(o)}t.createCipher=t.Cipher=n.createCipher,t.createCipheriv=t.Cipheriv=n.createCipheriv,t.createDecipher=t.Decipher=a.createDecipher,t.createDecipheriv=t.Decipheriv=a.createDecipheriv,t.listCiphers=t.getCiphers=d},{"./decrypter":146,"./encrypter":147,"./modes/list.json":157}],146:[function(e,i,t){var n=e("./authCipher"),a=e("safe-buffer").Buffer,o=e("./modes"),d=e("./streamCipher"),s=e("cipher-base"),u=e("./aes"),c=e("evp_bytestokey"),h=e("inherits");function p(E,k,C){s.call(this),this._cache=new l,this._last=void 0,this._cipher=new u.AES(k),this._prev=a.from(C),this._mode=E,this._autopadding=!0}h(p,s),p.prototype._update=function(E){this._cache.add(E);for(var k,C,N=[];k=this._cache.get(this._autopadding);)C=this._mode.decrypt(this,k),N.push(C);return a.concat(N)},p.prototype._final=function(){var E=this._cache.flush();if(this._autopadding)return f(this._mode.decrypt(this,E));if(E)throw new Error("data not multiple of block length")},p.prototype.setAutoPadding=function(E){return this._autopadding=!!E,this};function l(){this.cache=a.allocUnsafe(0)}l.prototype.add=function(E){this.cache=a.concat([this.cache,E])},l.prototype.get=function(E){var k;if(E){if(this.cache.length>16)return k=this.cache.slice(0,16),this.cache=this.cache.slice(16),k}else if(this.cache.length>=16)return k=this.cache.slice(0,16),this.cache=this.cache.slice(16),k;return null},l.prototype.flush=function(){if(this.cache.length)return this.cache};function f(E){var k=E[15];if(k<1||k>16)throw new Error("unable to decrypt data");for(var C=-1;++C<k;)if(E[C+(16-k)]!==k)throw new Error("unable to decrypt data");if(k!==16)return E.slice(0,16-k)}function m(E,k,C){var N=o[E.toLowerCase()];if(!N)throw new TypeError("invalid suite type");if(typeof C=="string"&&(C=a.from(C)),N.mode!=="GCM"&&C.length!==N.iv)throw new TypeError("invalid iv length "+C.length);if(typeof k=="string"&&(k=a.from(k)),k.length!==N.key/8)throw new TypeError("invalid key length "+k.length);return N.type==="stream"?new d(N.module,k,C,!0):N.type==="auth"?new n(N.module,k,C,!0):new p(N.module,k,C)}function v(E,k){var C=o[E.toLowerCase()];if(!C)throw new TypeError("invalid suite type");var N=c(k,!1,C.key,C.iv);return m(E,N.key,N.iv)}t.createDecipher=v,t.createDecipheriv=m},{"./aes":143,"./authCipher":144,"./modes":156,"./streamCipher":159,"cipher-base":174,evp_bytestokey:208,inherits:233,"safe-buffer":279}],147:[function(e,i,t){var n=e("./modes"),a=e("./authCipher"),o=e("safe-buffer").Buffer,d=e("./streamCipher"),s=e("cipher-base"),u=e("./aes"),c=e("evp_bytestokey"),h=e("inherits");function p(E,k,C){s.call(this),this._cache=new f,this._cipher=new u.AES(k),this._prev=o.from(C),this._mode=E,this._autopadding=!0}h(p,s),p.prototype._update=function(E){this._cache.add(E);for(var k,C,N=[];k=this._cache.get();)C=this._mode.encrypt(this,k),N.push(C);return o.concat(N)};var l=o.alloc(16,16);p.prototype._final=function(){var E=this._cache.flush();if(this._autopadding)return E=this._mode.encrypt(this,E),this._cipher.scrub(),E;if(!E.equals(l))throw this._cipher.scrub(),new Error("data not multiple of block length")},p.prototype.setAutoPadding=function(E){return this._autopadding=!!E,this};function f(){this.cache=o.allocUnsafe(0)}f.prototype.add=function(E){this.cache=o.concat([this.cache,E])},f.prototype.get=function(){if(this.cache.length>15){var E=this.cache.slice(0,16);return this.cache=this.cache.slice(16),E}return null},f.prototype.flush=function(){for(var E=16-this.cache.length,k=o.allocUnsafe(E),C=-1;++C<E;)k.writeUInt8(E,C);return o.concat([this.cache,k])};function m(E,k,C){var N=n[E.toLowerCase()];if(!N)throw new TypeError("invalid suite type");if(typeof k=="string"&&(k=o.from(k)),k.length!==N.key/8)throw new TypeError("invalid key length "+k.length);if(typeof C=="string"&&(C=o.from(C)),N.mode!=="GCM"&&C.length!==N.iv)throw new TypeError("invalid iv length "+C.length);return N.type==="stream"?new d(N.module,k,C):N.type==="auth"?new a(N.module,k,C):new p(N.module,k,C)}function v(E,k){var C=n[E.toLowerCase()];if(!C)throw new TypeError("invalid suite type");var N=c(k,!1,C.key,C.iv);return m(E,N.key,N.iv)}t.createCipheriv=m,t.createCipher=v},{"./aes":143,"./authCipher":144,"./modes":156,"./streamCipher":159,"cipher-base":174,evp_bytestokey:208,inherits:233,"safe-buffer":279}],148:[function(e,i,t){var n=e("safe-buffer").Buffer,a=n.alloc(16,0);function o(u){return[u.readUInt32BE(0),u.readUInt32BE(4),u.readUInt32BE(8),u.readUInt32BE(12)]}function d(u){var c=n.allocUnsafe(16);return c.writeUInt32BE(u[0]>>>0,0),c.writeUInt32BE(u[1]>>>0,4),c.writeUInt32BE(u[2]>>>0,8),c.writeUInt32BE(u[3]>>>0,12),c}function s(u){this.h=u,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}s.prototype.ghash=function(u){for(var c=-1;++c<u.length;)this.state[c]^=u[c];this._multiply()},s.prototype._multiply=function(){for(var u=o(this.h),c=[0,0,0,0],h,p,l,f=-1;++f<128;){for(p=(this.state[~~(f/8)]&1<<7-f%8)!==0,p&&(c[0]^=u[0],c[1]^=u[1],c[2]^=u[2],c[3]^=u[3]),l=(u[3]&1)!==0,h=3;h>0;h--)u[h]=u[h]>>>1|(u[h-1]&1)<<31;u[0]=u[0]>>>1,l&&(u[0]=u[0]^225<<24)}this.state=d(c)},s.prototype.update=function(u){this.cache=n.concat([this.cache,u]);for(var c;this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)},s.prototype.final=function(u,c){return this.cache.length&&this.ghash(n.concat([this.cache,a],16)),this.ghash(d([0,u,0,c])),this.state},i.exports=s},{"safe-buffer":279}],149:[function(e,i,t){function n(a){for(var o=a.length,d;o--;)if(d=a.readUInt8(o),d===255)a.writeUInt8(0,o);else{d++,a.writeUInt8(d,o);break}}i.exports=n},{}],150:[function(e,i,t){var n=e("buffer-xor");t.encrypt=function(a,o){var d=n(o,a._prev);return a._prev=a._cipher.encryptBlock(d),a._prev},t.decrypt=function(a,o){var d=a._prev;a._prev=o;var s=a._cipher.decryptBlock(o);return n(s,d)}},{"buffer-xor":170}],151:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("buffer-xor");function o(d,s,u){var c=s.length,h=a(s,d._cache);return d._cache=d._cache.slice(c),d._prev=n.concat([d._prev,u?s:h]),h}t.encrypt=function(d,s,u){for(var c=n.allocUnsafe(0),h;s.length;)if(d._cache.length===0&&(d._cache=d._cipher.encryptBlock(d._prev),d._prev=n.allocUnsafe(0)),d._cache.length<=s.length)h=d._cache.length,c=n.concat([c,o(d,s.slice(0,h),u)]),s=s.slice(h);else{c=n.concat([c,o(d,s,u)]);break}return c}},{"buffer-xor":170,"safe-buffer":279}],152:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(d,s,u){for(var c,h=-1,p=8,l=0,f,m;++h<p;)c=d._cipher.encryptBlock(d._prev),f=s&1<<7-h?128:0,m=c[0]^f,l+=(m&128)>>h%8,d._prev=o(d._prev,u?f:m);return l}function o(d,s){var u=d.length,c=-1,h=n.allocUnsafe(d.length);for(d=n.concat([d,n.from([s])]);++c<u;)h[c]=d[c]<<1|d[c+1]>>7;return h}t.encrypt=function(d,s,u){for(var c=s.length,h=n.allocUnsafe(c),p=-1;++p<c;)h[p]=a(d,s[p],u);return h}},{"safe-buffer":279}],153:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(o,d,s){var u=o._cipher.encryptBlock(o._prev),c=u[0]^d;return o._prev=n.concat([o._prev.slice(1),n.from([s?d:c])]),c}t.encrypt=function(o,d,s){for(var u=d.length,c=n.allocUnsafe(u),h=-1;++h<u;)c[h]=a(o,d[h],s);return c}},{"safe-buffer":279}],154:[function(e,i,t){var n=e("buffer-xor"),a=e("safe-buffer").Buffer,o=e("../incr32");function d(u){var c=u._cipher.encryptBlockRaw(u._prev);return o(u._prev),c}var s=16;t.encrypt=function(u,c){var h=Math.ceil(c.length/s),p=u._cache.length;u._cache=a.concat([u._cache,a.allocUnsafe(h*s)]);for(var l=0;l<h;l++){var f=d(u),m=p+l*s;u._cache.writeUInt32BE(f[0],m+0),u._cache.writeUInt32BE(f[1],m+4),u._cache.writeUInt32BE(f[2],m+8),u._cache.writeUInt32BE(f[3],m+12)}var v=u._cache.slice(0,c.length);return u._cache=u._cache.slice(c.length),n(c,v)}},{"../incr32":149,"buffer-xor":170,"safe-buffer":279}],155:[function(e,i,t){t.encrypt=function(n,a){return n._cipher.encryptBlock(a)},t.decrypt=function(n,a){return n._cipher.decryptBlock(a)}},{}],156:[function(e,i,t){var n={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},a=e("./list.json");for(var o in a)a[o].module=n[a[o].mode];i.exports=a},{"./cbc":150,"./cfb":151,"./cfb1":152,"./cfb8":153,"./ctr":154,"./ecb":155,"./list.json":157,"./ofb":158}],157:[function(e,i,t){i.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],158:[function(e,i,t){(function(n){(function(){var a=e("buffer-xor");function o(d){return d._prev=d._cipher.encryptBlock(d._prev),d._prev}t.encrypt=function(d,s){for(;d._cache.length<s.length;)d._cache=n.concat([d._cache,o(d)]);var u=d._cache.slice(0,s.length);return d._cache=d._cache.slice(s.length),a(s,u)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:171,"buffer-xor":170}],159:[function(e,i,t){var n=e("./aes"),a=e("safe-buffer").Buffer,o=e("cipher-base"),d=e("inherits");function s(u,c,h,p){o.call(this),this._cipher=new n.AES(c),this._prev=a.from(h),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=p,this._mode=u}d(s,o),s.prototype._update=function(u){return this._mode.encrypt(this,u,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},i.exports=s},{"./aes":143,"cipher-base":174,inherits:233,"safe-buffer":279}],160:[function(e,i,t){var n=e("browserify-des"),a=e("browserify-aes/browser"),o=e("browserify-aes/modes"),d=e("browserify-des/modes"),s=e("evp_bytestokey");function u(f,m){f=f.toLowerCase();var v,E;if(o[f])v=o[f].key,E=o[f].iv;else if(d[f])v=d[f].key*8,E=d[f].iv;else throw new TypeError("invalid suite type");var k=s(m,!1,v,E);return h(f,k.key,k.iv)}function c(f,m){f=f.toLowerCase();var v,E;if(o[f])v=o[f].key,E=o[f].iv;else if(d[f])v=d[f].key*8,E=d[f].iv;else throw new TypeError("invalid suite type");var k=s(m,!1,v,E);return p(f,k.key,k.iv)}function h(f,m,v){if(f=f.toLowerCase(),o[f])return a.createCipheriv(f,m,v);if(d[f])return new n({key:m,iv:v,mode:f});throw new TypeError("invalid suite type")}function p(f,m,v){if(f=f.toLowerCase(),o[f])return a.createDecipheriv(f,m,v);if(d[f])return new n({key:m,iv:v,mode:f,decrypt:!0});throw new TypeError("invalid suite type")}function l(){return Object.keys(d).concat(a.getCiphers())}t.createCipher=t.Cipher=u,t.createCipheriv=t.Cipheriv=h,t.createDecipher=t.Decipher=c,t.createDecipheriv=t.Decipheriv=p,t.listCiphers=t.getCiphers=l},{"browserify-aes/browser":145,"browserify-aes/modes":156,"browserify-des":161,"browserify-des/modes":162,evp_bytestokey:208}],161:[function(e,i,t){var n=e("cipher-base"),a=e("des.js"),o=e("inherits"),d=e("safe-buffer").Buffer,s={"des-ede3-cbc":a.CBC.instantiate(a.EDE),"des-ede3":a.EDE,"des-ede-cbc":a.CBC.instantiate(a.EDE),"des-ede":a.EDE,"des-cbc":a.CBC.instantiate(a.DES),"des-ecb":a.DES};s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],i.exports=u,o(u,n);function u(c){n.call(this);var h=c.mode.toLowerCase(),p=s[h],l;c.decrypt?l="decrypt":l="encrypt";var f=c.key;d.isBuffer(f)||(f=d.from(f)),(h==="des-ede"||h==="des-ede-cbc")&&(f=d.concat([f,f.slice(0,8)]));var m=c.iv;d.isBuffer(m)||(m=d.from(m)),this._des=p.create({key:f,iv:m,type:l})}u.prototype._update=function(c){return d.from(this._des.update(c))},u.prototype._final=function(){return d.from(this._des.final())}},{"cipher-base":174,"des.js":181,inherits:233,"safe-buffer":279}],162:[function(e,i,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},{}],163:[function(e,i,t){(function(n){(function(){var a=e("bn.js"),o=e("randombytes");function d(c){var h=s(c),p=h.toRed(a.mont(c.modulus)).redPow(new a(c.publicExponent)).fromRed();return{blinder:p,unblinder:h.invm(c.modulus)}}function s(c){var h=c.modulus.byteLength(),p;do p=new a(o(h));while(p.cmp(c.modulus)>=0||!p.umod(c.prime1)||!p.umod(c.prime2));return p}function u(c,h){var p=d(h),l=h.modulus.byteLength(),f=new a(c).mul(p.blinder).umod(h.modulus),m=f.toRed(a.mont(h.prime1)),v=f.toRed(a.mont(h.prime2)),E=h.coefficient,k=h.prime1,C=h.prime2,N=m.redPow(h.exponent1).fromRed(),P=v.redPow(h.exponent2).fromRed(),M=N.isub(P).imul(E).umod(k).imul(C);return P.iadd(M).imul(p.unblinder).umod(h.modulus).toArrayLike(n,"be",l)}u.getr=s,i.exports=u}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":140,buffer:171,randombytes:261}],164:[function(e,i,t){i.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":165}],165:[function(e,i,t){i.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],166:[function(e,i,t){i.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],167:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("create-hash"),o=e("readable-stream"),d=e("inherits"),s=e("./sign"),u=e("./verify"),c=e("./algorithms.json");Object.keys(c).forEach(function(m){c[m].id=n.from(c[m].id,"hex"),c[m.toLowerCase()]=c[m]});function h(m){o.Writable.call(this);var v=c[m];if(!v)throw new Error("Unknown message digest");this._hashType=v.hash,this._hash=a(v.hash),this._tag=v.id,this._signType=v.sign}d(h,o.Writable),h.prototype._write=function(v,E,k){this._hash.update(v),k()},h.prototype.update=function(v,E){return typeof v=="string"&&(v=n.from(v,E)),this._hash.update(v),this},h.prototype.sign=function(v,E){this.end();var k=this._hash.digest(),C=s(k,v,this._hashType,this._signType,this._tag);return E?C.toString(E):C};function p(m){o.Writable.call(this);var v=c[m];if(!v)throw new Error("Unknown message digest");this._hash=a(v.hash),this._tag=v.id,this._signType=v.sign}d(p,o.Writable),p.prototype._write=function(v,E,k){this._hash.update(v),k()},p.prototype.update=function(v,E){return typeof v=="string"&&(v=n.from(v,E)),this._hash.update(v),this},p.prototype.verify=function(v,E,k){typeof E=="string"&&(E=n.from(E,k)),this.end();var C=this._hash.digest();return u(E,C,v,this._signType,this._tag)};function l(m){return new h(m)}function f(m){return new p(m)}i.exports={Sign:l,Verify:f,createSign:l,createVerify:f}},{"./algorithms.json":165,"./sign":168,"./verify":169,"create-hash":176,inherits:233,"readable-stream":277,"safe-buffer":279}],168:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("create-hmac"),o=e("browserify-rsa"),d=e("elliptic").ec,s=e("bn.js"),u=e("parse-asn1"),c=e("./curves.json");function h(N,P,M,L,$){var H=u(P);if(H.curve){if(L!=="ecdsa"&&L!=="ecdsa/rsa")throw new Error("wrong private key type");return p(N,H)}else if(H.type==="dsa"){if(L!=="dsa")throw new Error("wrong private key type");return l(N,H,M)}else if(L!=="rsa"&&L!=="ecdsa/rsa")throw new Error("wrong private key type");N=n.concat([$,N]);for(var Z=H.modulus.byteLength(),re=[0,1];N.length+re.length+1<Z;)re.push(255);re.push(0);for(var Y=-1;++Y<N.length;)re.push(N[Y]);var O=o(re,H);return O}function p(N,P){var M=c[P.curve.join(".")];if(!M)throw new Error("unknown curve "+P.curve.join("."));var L=new d(M),$=L.keyFromPrivate(P.privateKey),H=$.sign(N);return n.from(H.toDER())}function l(N,P,M){for(var L=P.params.priv_key,$=P.params.p,H=P.params.q,Z=P.params.g,re=new s(0),Y,O=v(N,H).mod(H),D=!1,b=m(L,H,N,M);D===!1;)Y=k(H,b,M),re=C(Z,Y,$,H),D=Y.invm(H).imul(O.add(L.mul(re))).mod(H),D.cmpn(0)===0&&(D=!1,re=new s(0));return f(re,D)}function f(N,P){N=N.toArray(),P=P.toArray(),N[0]&128&&(N=[0].concat(N)),P[0]&128&&(P=[0].concat(P));var M=N.length+P.length+4,L=[48,M,2,N.length];return L=L.concat(N,[2,P.length],P),n.from(L)}function m(N,P,M,L){if(N=n.from(N.toArray()),N.length<P.byteLength()){var $=n.alloc(P.byteLength()-N.length);N=n.concat([$,N])}var H=M.length,Z=E(M,P),re=n.alloc(H);re.fill(1);var Y=n.alloc(H);return Y=a(L,Y).update(re).update(n.from([0])).update(N).update(Z).digest(),re=a(L,Y).update(re).digest(),Y=a(L,Y).update(re).update(n.from([1])).update(N).update(Z).digest(),re=a(L,Y).update(re).digest(),{k:Y,v:re}}function v(N,P){var M=new s(N),L=(N.length<<3)-P.bitLength();return L>0&&M.ishrn(L),M}function E(N,P){N=v(N,P),N=N.mod(P);var M=n.from(N.toArray());if(M.length<P.byteLength()){var L=n.alloc(P.byteLength()-M.length);M=n.concat([L,M])}return M}function k(N,P,M){var L,$;do{for(L=n.alloc(0);L.length*8<N.bitLength();)P.v=a(M,P.k).update(P.v).digest(),L=n.concat([L,P.v]);$=v(L,N),P.k=a(M,P.k).update(P.v).update(n.from([0])).digest(),P.v=a(M,P.k).update(P.v).digest()}while($.cmp(N)!==-1);return $}function C(N,P,M,L){return N.toRed(s.mont(M)).redPow(P).fromRed().mod(L)}i.exports=h,i.exports.getKey=m,i.exports.makeKey=k},{"./curves.json":166,"bn.js":140,"browserify-rsa":163,"create-hmac":178,elliptic:191,"parse-asn1":247,"safe-buffer":279}],169:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("bn.js"),o=e("elliptic").ec,d=e("parse-asn1"),s=e("./curves.json");function u(l,f,m,v,E){var k=d(m);if(k.type==="ec"){if(v!=="ecdsa"&&v!=="ecdsa/rsa")throw new Error("wrong public key type");return c(l,f,k)}else if(k.type==="dsa"){if(v!=="dsa")throw new Error("wrong public key type");return h(l,f,k)}else if(v!=="rsa"&&v!=="ecdsa/rsa")throw new Error("wrong public key type");f=n.concat([E,f]);for(var C=k.modulus.byteLength(),N=[1],P=0;f.length+N.length+2<C;)N.push(255),P++;N.push(0);for(var M=-1;++M<f.length;)N.push(f[M]);N=n.from(N);var L=a.mont(k.modulus);l=new a(l).toRed(L),l=l.redPow(new a(k.publicExponent)),l=n.from(l.fromRed().toArray());var $=P<8?1:0;for(C=Math.min(l.length,N.length),l.length!==N.length&&($=1),M=-1;++M<C;)$|=l[M]^N[M];return $===0}function c(l,f,m){var v=s[m.data.algorithm.curve.join(".")];if(!v)throw new Error("unknown curve "+m.data.algorithm.curve.join("."));var E=new o(v),k=m.data.subjectPrivateKey.data;return E.verify(f,l,k)}function h(l,f,m){var v=m.data.p,E=m.data.q,k=m.data.g,C=m.data.pub_key,N=d.signature.decode(l,"der"),P=N.s,M=N.r;p(P,E),p(M,E);var L=a.mont(v),$=P.invm(E),H=k.toRed(L).redPow(new a(f).mul($).mod(E)).fromRed().mul(C.toRed(L).redPow(M.mul($).mod(E)).fromRed()).mod(v).mod(E);return H.cmp(M)===0}function p(l,f){if(l.cmpn(0)<=0)throw new Error("invalid sig");if(l.cmp(f)>=f)throw new Error("invalid sig")}i.exports=u},{"./curves.json":166,"bn.js":140,elliptic:191,"parse-asn1":247,"safe-buffer":279}],170:[function(e,i,t){(function(n){(function(){i.exports=function(o,d){for(var s=Math.min(o.length,d.length),u=new n(s),c=0;c<s;++c)u[c]=o[c]^d[c];return u}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:171}],171:[function(e,i,t){(function(n){(function(){var a=e("base64-js"),o=e("ieee754");t.Buffer=c,t.SlowBuffer=N,t.INSPECT_MAX_BYTES=50;var d=2147483647;t.kMaxLength=d,c.TYPED_ARRAY_SUPPORT=s(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var Q=new Uint8Array(1);return Q.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Q.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function u(Q){if(Q>d)throw new RangeError('The value "'+Q+'" is invalid for option "size"');var U=new Uint8Array(Q);return U.__proto__=c.prototype,U}function c(Q,U,W){if(typeof Q=="number"){if(typeof U=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(Q)}return h(Q,U,W)}typeof Symbol<"u"&&Symbol.species!=null&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192;function h(Q,U,W){if(typeof Q=="string")return m(Q,U);if(ArrayBuffer.isView(Q))return v(Q);if(Q==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q);if(ee(Q,ArrayBuffer)||Q&&ee(Q.buffer,ArrayBuffer))return E(Q,U,W);if(typeof Q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var X=Q.valueOf&&Q.valueOf();if(X!=null&&X!==Q)return c.from(X,U,W);var de=k(Q);if(de)return de;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Q[Symbol.toPrimitive]=="function")return c.from(Q[Symbol.toPrimitive]("string"),U,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q)}c.from=function(Q,U,W){return h(Q,U,W)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array;function p(Q){if(typeof Q!="number")throw new TypeError('"size" argument must be of type number');if(Q<0)throw new RangeError('The value "'+Q+'" is invalid for option "size"')}function l(Q,U,W){return p(Q),Q<=0?u(Q):U!==void 0?typeof W=="string"?u(Q).fill(U,W):u(Q).fill(U):u(Q)}c.alloc=function(Q,U,W){return l(Q,U,W)};function f(Q){return p(Q),u(Q<0?0:C(Q)|0)}c.allocUnsafe=function(Q){return f(Q)},c.allocUnsafeSlow=function(Q){return f(Q)};function m(Q,U){if((typeof U!="string"||U==="")&&(U="utf8"),!c.isEncoding(U))throw new TypeError("Unknown encoding: "+U);var W=P(Q,U)|0,X=u(W),de=X.write(Q,U);return de!==W&&(X=X.slice(0,de)),X}function v(Q){for(var U=Q.length<0?0:C(Q.length)|0,W=u(U),X=0;X<U;X+=1)W[X]=Q[X]&255;return W}function E(Q,U,W){if(U<0||Q.byteLength<U)throw new RangeError('"offset" is outside of buffer bounds');if(Q.byteLength<U+(W||0))throw new RangeError('"length" is outside of buffer bounds');var X;return U===void 0&&W===void 0?X=new Uint8Array(Q):W===void 0?X=new Uint8Array(Q,U):X=new Uint8Array(Q,U,W),X.__proto__=c.prototype,X}function k(Q){if(c.isBuffer(Q)){var U=C(Q.length)|0,W=u(U);return W.length===0||Q.copy(W,0,0,U),W}if(Q.length!==void 0)return typeof Q.length!="number"||te(Q.length)?u(0):v(Q);if(Q.type==="Buffer"&&Array.isArray(Q.data))return v(Q.data)}function C(Q){if(Q>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return Q|0}function N(Q){return+Q!=Q&&(Q=0),c.alloc(+Q)}c.isBuffer=function(U){return U!=null&&U._isBuffer===!0&&U!==c.prototype},c.compare=function(U,W){if(ee(U,Uint8Array)&&(U=c.from(U,U.offset,U.byteLength)),ee(W,Uint8Array)&&(W=c.from(W,W.offset,W.byteLength)),!c.isBuffer(U)||!c.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(U===W)return 0;for(var X=U.length,de=W.length,ve=0,Se=Math.min(X,de);ve<Se;++ve)if(U[ve]!==W[ve]){X=U[ve],de=W[ve];break}return X<de?-1:de<X?1:0},c.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(U,W){if(!Array.isArray(U))throw new TypeError('"list" argument must be an Array of Buffers');if(U.length===0)return c.alloc(0);var X;if(W===void 0)for(W=0,X=0;X<U.length;++X)W+=U[X].length;var de=c.allocUnsafe(W),ve=0;for(X=0;X<U.length;++X){var Se=U[X];if(ee(Se,Uint8Array)&&(Se=c.from(Se)),!c.isBuffer(Se))throw new TypeError('"list" argument must be an Array of Buffers');Se.copy(de,ve),ve+=Se.length}return de};function P(Q,U){if(c.isBuffer(Q))return Q.length;if(ArrayBuffer.isView(Q)||ee(Q,ArrayBuffer))return Q.byteLength;if(typeof Q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Q);var W=Q.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&W===0)return 0;for(var de=!1;;)switch(U){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return oe(Q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return ke(Q).length;default:if(de)return X?-1:oe(Q).length;U=(""+U).toLowerCase(),de=!0}}c.byteLength=P;function M(Q,U,W){var X=!1;if((U===void 0||U<0)&&(U=0),U>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,U>>>=0,W<=U))return"";for(Q||(Q="utf8");;)switch(Q){case"hex":return G(this,U,W);case"utf8":case"utf-8":return g(this,U,W);case"ascii":return A(this,U,W);case"latin1":case"binary":return J(this,U,W);case"base64":return _(this,U,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,U,W);default:if(X)throw new TypeError("Unknown encoding: "+Q);Q=(Q+"").toLowerCase(),X=!0}}c.prototype._isBuffer=!0;function L(Q,U,W){var X=Q[U];Q[U]=Q[W],Q[W]=X}c.prototype.swap16=function(){var U=this.length;if(U%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var W=0;W<U;W+=2)L(this,W,W+1);return this},c.prototype.swap32=function(){var U=this.length;if(U%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var W=0;W<U;W+=4)L(this,W,W+3),L(this,W+1,W+2);return this},c.prototype.swap64=function(){var U=this.length;if(U%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var W=0;W<U;W+=8)L(this,W,W+7),L(this,W+1,W+6),L(this,W+2,W+5),L(this,W+3,W+4);return this},c.prototype.toString=function(){var U=this.length;return U===0?"":arguments.length===0?g(this,0,U):M.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(U){if(!c.isBuffer(U))throw new TypeError("Argument must be a Buffer");return this===U?!0:c.compare(this,U)===0},c.prototype.inspect=function(){var U="",W=t.INSPECT_MAX_BYTES;return U=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(U+=" ... "),"<Buffer "+U+">"},c.prototype.compare=function(U,W,X,de,ve){if(ee(U,Uint8Array)&&(U=c.from(U,U.offset,U.byteLength)),!c.isBuffer(U))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof U);if(W===void 0&&(W=0),X===void 0&&(X=U?U.length:0),de===void 0&&(de=0),ve===void 0&&(ve=this.length),W<0||X>U.length||de<0||ve>this.length)throw new RangeError("out of range index");if(de>=ve&&W>=X)return 0;if(de>=ve)return-1;if(W>=X)return 1;if(W>>>=0,X>>>=0,de>>>=0,ve>>>=0,this===U)return 0;for(var Se=ve-de,he=X-W,y=Math.min(Se,he),F=this.slice(de,ve),q=U.slice(W,X),ue=0;ue<y;++ue)if(F[ue]!==q[ue]){Se=F[ue],he=q[ue];break}return Se<he?-1:he<Se?1:0};function $(Q,U,W,X,de){if(Q.length===0)return-1;if(typeof W=="string"?(X=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,te(W)&&(W=de?0:Q.length-1),W<0&&(W=Q.length+W),W>=Q.length){if(de)return-1;W=Q.length-1}else if(W<0)if(de)W=0;else return-1;if(typeof U=="string"&&(U=c.from(U,X)),c.isBuffer(U))return U.length===0?-1:H(Q,U,W,X,de);if(typeof U=="number")return U=U&255,typeof Uint8Array.prototype.indexOf=="function"?de?Uint8Array.prototype.indexOf.call(Q,U,W):Uint8Array.prototype.lastIndexOf.call(Q,U,W):H(Q,[U],W,X,de);throw new TypeError("val must be string, number or Buffer")}function H(Q,U,W,X,de){var ve=1,Se=Q.length,he=U.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(Q.length<2||U.length<2)return-1;ve=2,Se/=2,he/=2,W/=2}function y(S,B){return ve===1?S[B]:S.readUInt16BE(B*ve)}var F;if(de){var q=-1;for(F=W;F<Se;F++)if(y(Q,F)===y(U,q===-1?0:F-q)){if(q===-1&&(q=F),F-q+1===he)return q*ve}else q!==-1&&(F-=F-q),q=-1}else for(W+he>Se&&(W=Se-he),F=W;F>=0;F--){for(var ue=!0,j=0;j<he;j++)if(y(Q,F+j)!==y(U,j)){ue=!1;break}if(ue)return F}return-1}c.prototype.includes=function(U,W,X){return this.indexOf(U,W,X)!==-1},c.prototype.indexOf=function(U,W,X){return $(this,U,W,X,!0)},c.prototype.lastIndexOf=function(U,W,X){return $(this,U,W,X,!1)};function Z(Q,U,W,X){W=Number(W)||0;var de=Q.length-W;X?(X=Number(X),X>de&&(X=de)):X=de;var ve=U.length;X>ve/2&&(X=ve/2);for(var Se=0;Se<X;++Se){var he=parseInt(U.substr(Se*2,2),16);if(te(he))return Se;Q[W+Se]=he}return Se}function re(Q,U,W,X){return fe(oe(U,Q.length-W),Q,W,X)}function Y(Q,U,W,X){return fe(ce(U),Q,W,X)}function O(Q,U,W,X){return Y(Q,U,W,X)}function D(Q,U,W,X){return fe(ke(U),Q,W,X)}function b(Q,U,W,X){return fe(ge(U,Q.length-W),Q,W,X)}c.prototype.write=function(U,W,X,de){if(W===void 0)de="utf8",X=this.length,W=0;else if(X===void 0&&typeof W=="string")de=W,X=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(X)?(X=X>>>0,de===void 0&&(de="utf8")):(de=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ve=this.length-W;if((X===void 0||X>ve)&&(X=ve),U.length>0&&(X<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");de||(de="utf8");for(var Se=!1;;)switch(de){case"hex":return Z(this,U,W,X);case"utf8":case"utf-8":return re(this,U,W,X);case"ascii":return Y(this,U,W,X);case"latin1":case"binary":return O(this,U,W,X);case"base64":return D(this,U,W,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,U,W,X);default:if(Se)throw new TypeError("Unknown encoding: "+de);de=(""+de).toLowerCase(),Se=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(Q,U,W){return U===0&&W===Q.length?a.fromByteArray(Q):a.fromByteArray(Q.slice(U,W))}function g(Q,U,W){W=Math.min(Q.length,W);for(var X=[],de=U;de<W;){var ve=Q[de],Se=null,he=ve>239?4:ve>223?3:ve>191?2:1;if(de+he<=W){var y,F,q,ue;switch(he){case 1:ve<128&&(Se=ve);break;case 2:y=Q[de+1],(y&192)===128&&(ue=(ve&31)<<6|y&63,ue>127&&(Se=ue));break;case 3:y=Q[de+1],F=Q[de+2],(y&192)===128&&(F&192)===128&&(ue=(ve&15)<<12|(y&63)<<6|F&63,ue>2047&&(ue<55296||ue>57343)&&(Se=ue));break;case 4:y=Q[de+1],F=Q[de+2],q=Q[de+3],(y&192)===128&&(F&192)===128&&(q&192)===128&&(ue=(ve&15)<<18|(y&63)<<12|(F&63)<<6|q&63,ue>65535&&ue<1114112&&(Se=ue))}}Se===null?(Se=65533,he=1):Se>65535&&(Se-=65536,X.push(Se>>>10&1023|55296),Se=56320|Se&1023),X.push(Se),de+=he}return T(X)}var w=4096;function T(Q){var U=Q.length;if(U<=w)return String.fromCharCode.apply(String,Q);for(var W="",X=0;X<U;)W+=String.fromCharCode.apply(String,Q.slice(X,X+=w));return W}function A(Q,U,W){var X="";W=Math.min(Q.length,W);for(var de=U;de<W;++de)X+=String.fromCharCode(Q[de]&127);return X}function J(Q,U,W){var X="";W=Math.min(Q.length,W);for(var de=U;de<W;++de)X+=String.fromCharCode(Q[de]);return X}function G(Q,U,W){var X=Q.length;(!U||U<0)&&(U=0),(!W||W<0||W>X)&&(W=X);for(var de="",ve=U;ve<W;++ve)de+=Ee(Q[ve]);return de}function I(Q,U,W){for(var X=Q.slice(U,W),de="",ve=0;ve<X.length;ve+=2)de+=String.fromCharCode(X[ve]+X[ve+1]*256);return de}c.prototype.slice=function(U,W){var X=this.length;U=~~U,W=W===void 0?X:~~W,U<0?(U+=X,U<0&&(U=0)):U>X&&(U=X),W<0?(W+=X,W<0&&(W=0)):W>X&&(W=X),W<U&&(W=U);var de=this.subarray(U,W);return de.__proto__=c.prototype,de};function V(Q,U,W){if(Q%1!==0||Q<0)throw new RangeError("offset is not uint");if(Q+U>W)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function(U,W,X){U=U>>>0,W=W>>>0,X||V(U,W,this.length);for(var de=this[U],ve=1,Se=0;++Se<W&&(ve*=256);)de+=this[U+Se]*ve;return de},c.prototype.readUIntBE=function(U,W,X){U=U>>>0,W=W>>>0,X||V(U,W,this.length);for(var de=this[U+--W],ve=1;W>0&&(ve*=256);)de+=this[U+--W]*ve;return de},c.prototype.readUInt8=function(U,W){return U=U>>>0,W||V(U,1,this.length),this[U]},c.prototype.readUInt16LE=function(U,W){return U=U>>>0,W||V(U,2,this.length),this[U]|this[U+1]<<8},c.prototype.readUInt16BE=function(U,W){return U=U>>>0,W||V(U,2,this.length),this[U]<<8|this[U+1]},c.prototype.readUInt32LE=function(U,W){return U=U>>>0,W||V(U,4,this.length),(this[U]|this[U+1]<<8|this[U+2]<<16)+this[U+3]*16777216},c.prototype.readUInt32BE=function(U,W){return U=U>>>0,W||V(U,4,this.length),this[U]*16777216+(this[U+1]<<16|this[U+2]<<8|this[U+3])},c.prototype.readIntLE=function(U,W,X){U=U>>>0,W=W>>>0,X||V(U,W,this.length);for(var de=this[U],ve=1,Se=0;++Se<W&&(ve*=256);)de+=this[U+Se]*ve;return ve*=128,de>=ve&&(de-=Math.pow(2,8*W)),de},c.prototype.readIntBE=function(U,W,X){U=U>>>0,W=W>>>0,X||V(U,W,this.length);for(var de=W,ve=1,Se=this[U+--de];de>0&&(ve*=256);)Se+=this[U+--de]*ve;return ve*=128,Se>=ve&&(Se-=Math.pow(2,8*W)),Se},c.prototype.readInt8=function(U,W){return U=U>>>0,W||V(U,1,this.length),this[U]&128?(255-this[U]+1)*-1:this[U]},c.prototype.readInt16LE=function(U,W){U=U>>>0,W||V(U,2,this.length);var X=this[U]|this[U+1]<<8;return X&32768?X|4294901760:X},c.prototype.readInt16BE=function(U,W){U=U>>>0,W||V(U,2,this.length);var X=this[U+1]|this[U]<<8;return X&32768?X|4294901760:X},c.prototype.readInt32LE=function(U,W){return U=U>>>0,W||V(U,4,this.length),this[U]|this[U+1]<<8|this[U+2]<<16|this[U+3]<<24},c.prototype.readInt32BE=function(U,W){return U=U>>>0,W||V(U,4,this.length),this[U]<<24|this[U+1]<<16|this[U+2]<<8|this[U+3]},c.prototype.readFloatLE=function(U,W){return U=U>>>0,W||V(U,4,this.length),o.read(this,U,!0,23,4)},c.prototype.readFloatBE=function(U,W){return U=U>>>0,W||V(U,4,this.length),o.read(this,U,!1,23,4)},c.prototype.readDoubleLE=function(U,W){return U=U>>>0,W||V(U,8,this.length),o.read(this,U,!0,52,8)},c.prototype.readDoubleBE=function(U,W){return U=U>>>0,W||V(U,8,this.length),o.read(this,U,!1,52,8)};function x(Q,U,W,X,de,ve){if(!c.isBuffer(Q))throw new TypeError('"buffer" argument must be a Buffer instance');if(U>de||U<ve)throw new RangeError('"value" argument is out of bounds');if(W+X>Q.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function(U,W,X,de){if(U=+U,W=W>>>0,X=X>>>0,!de){var ve=Math.pow(2,8*X)-1;x(this,U,W,X,ve,0)}var Se=1,he=0;for(this[W]=U&255;++he<X&&(Se*=256);)this[W+he]=U/Se&255;return W+X},c.prototype.writeUIntBE=function(U,W,X,de){if(U=+U,W=W>>>0,X=X>>>0,!de){var ve=Math.pow(2,8*X)-1;x(this,U,W,X,ve,0)}var Se=X-1,he=1;for(this[W+Se]=U&255;--Se>=0&&(he*=256);)this[W+Se]=U/he&255;return W+X},c.prototype.writeUInt8=function(U,W,X){return U=+U,W=W>>>0,X||x(this,U,W,1,255,0),this[W]=U&255,W+1},c.prototype.writeUInt16LE=function(U,W,X){return U=+U,W=W>>>0,X||x(this,U,W,2,65535,0),this[W]=U&255,this[W+1]=U>>>8,W+2},c.prototype.writeUInt16BE=function(U,W,X){return U=+U,W=W>>>0,X||x(this,U,W,2,65535,0),this[W]=U>>>8,this[W+1]=U&255,W+2},c.prototype.writeUInt32LE=function(U,W,X){return U=+U,W=W>>>0,X||x(this,U,W,4,4294967295,0),this[W+3]=U>>>24,this[W+2]=U>>>16,this[W+1]=U>>>8,this[W]=U&255,W+4},c.prototype.writeUInt32BE=function(U,W,X){return U=+U,W=W>>>0,X||x(this,U,W,4,4294967295,0),this[W]=U>>>24,this[W+1]=U>>>16,this[W+2]=U>>>8,this[W+3]=U&255,W+4},c.prototype.writeIntLE=function(U,W,X,de){if(U=+U,W=W>>>0,!de){var ve=Math.pow(2,8*X-1);x(this,U,W,X,ve-1,-ve)}var Se=0,he=1,y=0;for(this[W]=U&255;++Se<X&&(he*=256);)U<0&&y===0&&this[W+Se-1]!==0&&(y=1),this[W+Se]=(U/he>>0)-y&255;return W+X},c.prototype.writeIntBE=function(U,W,X,de){if(U=+U,W=W>>>0,!de){var ve=Math.pow(2,8*X-1);x(this,U,W,X,ve-1,-ve)}var Se=X-1,he=1,y=0;for(this[W+Se]=U&255;--Se>=0&&(he*=256);)U<0&&y===0&&this[W+Se+1]!==0&&(y=1),this[W+Se]=(U/he>>0)-y&255;return W+X},c.prototype.writeInt8=function(U,W,X){return U=+U,W=W>>>0,X||x(this,U,W,1,127,-128),U<0&&(U=255+U+1),this[W]=U&255,W+1},c.prototype.writeInt16LE=function(U,W,X){return U=+U,W=W>>>0,X||x(this,U,W,2,32767,-32768),this[W]=U&255,this[W+1]=U>>>8,W+2},c.prototype.writeInt16BE=function(U,W,X){return U=+U,W=W>>>0,X||x(this,U,W,2,32767,-32768),this[W]=U>>>8,this[W+1]=U&255,W+2},c.prototype.writeInt32LE=function(U,W,X){return U=+U,W=W>>>0,X||x(this,U,W,4,2147483647,-2147483648),this[W]=U&255,this[W+1]=U>>>8,this[W+2]=U>>>16,this[W+3]=U>>>24,W+4},c.prototype.writeInt32BE=function(U,W,X){return U=+U,W=W>>>0,X||x(this,U,W,4,2147483647,-2147483648),U<0&&(U=4294967295+U+1),this[W]=U>>>24,this[W+1]=U>>>16,this[W+2]=U>>>8,this[W+3]=U&255,W+4};function z(Q,U,W,X,de,ve){if(W+X>Q.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function ie(Q,U,W,X,de){return U=+U,W=W>>>0,de||z(Q,U,W,4),o.write(Q,U,W,X,23,4),W+4}c.prototype.writeFloatLE=function(U,W,X){return ie(this,U,W,!0,X)},c.prototype.writeFloatBE=function(U,W,X){return ie(this,U,W,!1,X)};function se(Q,U,W,X,de){return U=+U,W=W>>>0,de||z(Q,U,W,8),o.write(Q,U,W,X,52,8),W+8}c.prototype.writeDoubleLE=function(U,W,X){return se(this,U,W,!0,X)},c.prototype.writeDoubleBE=function(U,W,X){return se(this,U,W,!1,X)},c.prototype.copy=function(U,W,X,de){if(!c.isBuffer(U))throw new TypeError("argument should be a Buffer");if(X||(X=0),!de&&de!==0&&(de=this.length),W>=U.length&&(W=U.length),W||(W=0),de>0&&de<X&&(de=X),de===X||U.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(de<0)throw new RangeError("sourceEnd out of bounds");de>this.length&&(de=this.length),U.length-W<de-X&&(de=U.length-W+X);var ve=de-X;if(this===U&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(W,X,de);else if(this===U&&X<W&&W<de)for(var Se=ve-1;Se>=0;--Se)U[Se+W]=this[Se+X];else Uint8Array.prototype.set.call(U,this.subarray(X,de),W);return ve},c.prototype.fill=function(U,W,X,de){if(typeof U=="string"){if(typeof W=="string"?(de=W,W=0,X=this.length):typeof X=="string"&&(de=X,X=this.length),de!==void 0&&typeof de!="string")throw new TypeError("encoding must be a string");if(typeof de=="string"&&!c.isEncoding(de))throw new TypeError("Unknown encoding: "+de);if(U.length===1){var ve=U.charCodeAt(0);(de==="utf8"&&ve<128||de==="latin1")&&(U=ve)}}else typeof U=="number"&&(U=U&255);if(W<0||this.length<W||this.length<X)throw new RangeError("Out of range index");if(X<=W)return this;W=W>>>0,X=X===void 0?this.length:X>>>0,U||(U=0);var Se;if(typeof U=="number")for(Se=W;Se<X;++Se)this[Se]=U;else{var he=c.isBuffer(U)?U:c.from(U,de),y=he.length;if(y===0)throw new TypeError('The value "'+U+'" is invalid for argument "value"');for(Se=0;Se<X-W;++Se)this[Se+W]=he[Se%y]}return this};var pe=/[^+/0-9A-Za-z-_]/g;function be(Q){if(Q=Q.split("=")[0],Q=Q.trim().replace(pe,""),Q.length<2)return"";for(;Q.length%4!==0;)Q=Q+"=";return Q}function Ee(Q){return Q<16?"0"+Q.toString(16):Q.toString(16)}function oe(Q,U){U=U||1/0;for(var W,X=Q.length,de=null,ve=[],Se=0;Se<X;++Se){if(W=Q.charCodeAt(Se),W>55295&&W<57344){if(!de){if(W>56319){(U-=3)>-1&&ve.push(239,191,189);continue}else if(Se+1===X){(U-=3)>-1&&ve.push(239,191,189);continue}de=W;continue}if(W<56320){(U-=3)>-1&&ve.push(239,191,189),de=W;continue}W=(de-55296<<10|W-56320)+65536}else de&&(U-=3)>-1&&ve.push(239,191,189);if(de=null,W<128){if((U-=1)<0)break;ve.push(W)}else if(W<2048){if((U-=2)<0)break;ve.push(W>>6|192,W&63|128)}else if(W<65536){if((U-=3)<0)break;ve.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((U-=4)<0)break;ve.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return ve}function ce(Q){for(var U=[],W=0;W<Q.length;++W)U.push(Q.charCodeAt(W)&255);return U}function ge(Q,U){for(var W,X,de,ve=[],Se=0;Se<Q.length&&!((U-=2)<0);++Se)W=Q.charCodeAt(Se),X=W>>8,de=W%256,ve.push(de),ve.push(X);return ve}function ke(Q){return a.toByteArray(be(Q))}function fe(Q,U,W,X){for(var de=0;de<X&&!(de+W>=U.length||de>=Q.length);++de)U[de+W]=Q[de];return de}function ee(Q,U){return Q instanceof U||Q!=null&&Q.constructor!=null&&Q.constructor.name!=null&&Q.constructor.name===U.name}function te(Q){return Q!==Q}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":138,buffer:171,ieee754:232}],172:[function(e,i,t){var n=e("get-intrinsic"),a=e("./"),o=a(n("String.prototype.indexOf"));i.exports=function(s,u){var c=n(s,!!u);return typeof c=="function"&&o(s,".prototype.")>-1?a(c):c}},{"./":173,"get-intrinsic":212}],173:[function(e,i,t){var n=e("function-bind"),a=e("get-intrinsic"),o=a("%Function.prototype.apply%"),d=a("%Function.prototype.call%"),s=a("%Reflect.apply%",!0)||n.call(d,o),u=a("%Object.getOwnPropertyDescriptor%",!0),c=a("%Object.defineProperty%",!0),h=a("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}i.exports=function(f){var m=s(n,d,arguments);if(u&&c){var v=u(m,"length");v.configurable&&c(m,"length",{value:1+h(0,f.length-(arguments.length-1))})}return m};var p=function(){return s(n,o,arguments)};c?c(i.exports,"apply",{value:p}):i.exports.apply=p},{"function-bind":211,"get-intrinsic":212}],174:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("stream").Transform,o=e("string_decoder").StringDecoder,d=e("inherits");function s(u){a.call(this),this.hashMode=typeof u=="string",this.hashMode?this[u]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}d(s,a),s.prototype.update=function(u,c,h){typeof u=="string"&&(u=n.from(u,c));var p=this._update(u);return this.hashMode?this:(h&&(p=this._toString(p,h)),p)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(u,c,h){var p;try{this.hashMode?this._update(u):this.push(this._update(u))}catch(l){p=l}finally{h(p)}},s.prototype._flush=function(u){var c;try{this.push(this.__final())}catch(h){c=h}u(c)},s.prototype._finalOrDigest=function(u){var c=this.__final()||n.alloc(0);return u&&(c=this._toString(c,u,!0)),c},s.prototype._toString=function(u,c,h){if(this._decoder||(this._decoder=new o(c),this._encoding=c),this._encoding!==c)throw new Error("can't switch encodings");var p=this._decoder.write(u);return h&&(p+=this._decoder.end()),p},i.exports=s},{inherits:233,"safe-buffer":279,stream:289,string_decoder:290}],175:[function(e,i,t){(function(n){(function(){var a=e("elliptic"),o=e("bn.js");i.exports=function(h){return new s(h)};var d={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};d.p224=d.secp224r1,d.p256=d.secp256r1=d.prime256v1,d.p192=d.secp192r1=d.prime192v1,d.p384=d.secp384r1,d.p521=d.secp521r1;function s(c){this.curveType=d[c],this.curveType||(this.curveType={name:c}),this.curve=new a.ec(this.curveType.name),this.keys=void 0}s.prototype.generateKeys=function(c,h){return this.keys=this.curve.genKeyPair(),this.getPublicKey(c,h)},s.prototype.computeSecret=function(c,h,p){h=h||"utf8",n.isBuffer(c)||(c=new n(c,h));var l=this.curve.keyFromPublic(c).getPublic(),f=l.mul(this.keys.getPrivate()).getX();return u(f,p,this.curveType.byteLength)},s.prototype.getPublicKey=function(c,h){var p=this.keys.getPublic(h==="compressed",!0);return h==="hybrid"&&(p[p.length-1]%2?p[0]=7:p[0]=6),u(p,c)},s.prototype.getPrivateKey=function(c){return u(this.keys.getPrivate(),c)},s.prototype.setPublicKey=function(c,h){return h=h||"utf8",n.isBuffer(c)||(c=new n(c,h)),this.keys._importPublic(c),this},s.prototype.setPrivateKey=function(c,h){h=h||"utf8",n.isBuffer(c)||(c=new n(c,h));var p=new o(c);return p=p.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(p),this};function u(c,h,p){Array.isArray(c)||(c=c.toArray());var l=new n(c);if(p&&l.length<p){var f=new n(p-l.length);f.fill(0),l=n.concat([f,l])}return h?l.toString(h):l}}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":139,buffer:171,elliptic:191}],176:[function(e,i,t){var n=e("inherits"),a=e("md5.js"),o=e("ripemd160"),d=e("sha.js"),s=e("cipher-base");function u(c){s.call(this,"digest"),this._hash=c}n(u,s),u.prototype._update=function(c){this._hash.update(c)},u.prototype._final=function(){return this._hash.digest()},i.exports=function(h){return h=h.toLowerCase(),h==="md5"?new a:h==="rmd160"||h==="ripemd160"?new o:new u(d(h))}},{"cipher-base":174,inherits:233,"md5.js":239,ripemd160:278,"sha.js":282}],177:[function(e,i,t){var n=e("md5.js");i.exports=function(a){return new n().update(a).digest()}},{"md5.js":239}],178:[function(e,i,t){var n=e("inherits"),a=e("./legacy"),o=e("cipher-base"),d=e("safe-buffer").Buffer,s=e("create-hash/md5"),u=e("ripemd160"),c=e("sha.js"),h=d.alloc(128);function p(l,f){o.call(this,"digest"),typeof f=="string"&&(f=d.from(f));var m=l==="sha512"||l==="sha384"?128:64;if(this._alg=l,this._key=f,f.length>m){var v=l==="rmd160"?new u:c(l);f=v.update(f).digest()}else f.length<m&&(f=d.concat([f,h],m));for(var E=this._ipad=d.allocUnsafe(m),k=this._opad=d.allocUnsafe(m),C=0;C<m;C++)E[C]=f[C]^54,k[C]=f[C]^92;this._hash=l==="rmd160"?new u:c(l),this._hash.update(E)}n(p,o),p.prototype._update=function(l){this._hash.update(l)},p.prototype._final=function(){var l=this._hash.digest(),f=this._alg==="rmd160"?new u:c(this._alg);return f.update(this._opad).update(l).digest()},i.exports=function(f,m){return f=f.toLowerCase(),f==="rmd160"||f==="ripemd160"?new p("rmd160",m):f==="md5"?new a(s,m):new p(f,m)}},{"./legacy":179,"cipher-base":174,"create-hash/md5":177,inherits:233,ripemd160:278,"safe-buffer":279,"sha.js":282}],179:[function(e,i,t){var n=e("inherits"),a=e("safe-buffer").Buffer,o=e("cipher-base"),d=a.alloc(128),s=64;function u(c,h){o.call(this,"digest"),typeof h=="string"&&(h=a.from(h)),this._alg=c,this._key=h,h.length>s?h=c(h):h.length<s&&(h=a.concat([h,d],s));for(var p=this._ipad=a.allocUnsafe(s),l=this._opad=a.allocUnsafe(s),f=0;f<s;f++)p[f]=h[f]^54,l[f]=h[f]^92;this._hash=[p]}n(u,o),u.prototype._update=function(c){this._hash.push(c)},u.prototype._final=function(){var c=this._alg(a.concat(this._hash));return this._alg(a.concat([this._opad,c]))},i.exports=u},{"cipher-base":174,inherits:233,"safe-buffer":279}],180:[function(e,i,t){t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=e("randombytes"),t.createHash=t.Hash=e("create-hash"),t.createHmac=t.Hmac=e("create-hmac");var n=e("browserify-sign/algos"),a=Object.keys(n),o=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(a);t.getHashes=function(){return o};var d=e("pbkdf2");t.pbkdf2=d.pbkdf2,t.pbkdf2Sync=d.pbkdf2Sync;var s=e("browserify-cipher");t.Cipher=s.Cipher,t.createCipher=s.createCipher,t.Cipheriv=s.Cipheriv,t.createCipheriv=s.createCipheriv,t.Decipher=s.Decipher,t.createDecipher=s.createDecipher,t.Decipheriv=s.Decipheriv,t.createDecipheriv=s.createDecipheriv,t.getCiphers=s.getCiphers,t.listCiphers=s.listCiphers;var u=e("diffie-hellman");t.DiffieHellmanGroup=u.DiffieHellmanGroup,t.createDiffieHellmanGroup=u.createDiffieHellmanGroup,t.getDiffieHellman=u.getDiffieHellman,t.createDiffieHellman=u.createDiffieHellman,t.DiffieHellman=u.DiffieHellman;var c=e("browserify-sign");t.createSign=c.createSign,t.Sign=c.Sign,t.createVerify=c.createVerify,t.Verify=c.Verify,t.createECDH=e("create-ecdh");var h=e("public-encrypt");t.publicEncrypt=h.publicEncrypt,t.privateEncrypt=h.privateEncrypt,t.publicDecrypt=h.publicDecrypt,t.privateDecrypt=h.privateDecrypt;var p=e("randomfill");t.randomFill=p.randomFill,t.randomFillSync=p.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":160,"browserify-sign":167,"browserify-sign/algos":164,"create-ecdh":175,"create-hash":176,"create-hmac":178,"diffie-hellman":187,pbkdf2:248,"public-encrypt":255,randombytes:261,randomfill:262}],181:[function(e,i,t){t.utils=e("./des/utils"),t.Cipher=e("./des/cipher"),t.DES=e("./des/des"),t.CBC=e("./des/cbc"),t.EDE=e("./des/ede")},{"./des/cbc":182,"./des/cipher":183,"./des/des":184,"./des/ede":185,"./des/utils":186}],182:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits"),o={};function d(u){n.equal(u.length,8,"Invalid IV length"),this.iv=new Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=u[c]}function s(u){function c(f){u.call(this,f),this._cbcInit()}a(c,u);for(var h=Object.keys(o),p=0;p<h.length;p++){var l=h[p];c.prototype[l]=o[l]}return c.create=function(m){return new c(m)},c}t.instantiate=s,o._cbcInit=function(){var c=new d(this.options.iv);this._cbcState=c},o._update=function(c,h,p,l){var f=this._cbcState,m=this.constructor.super_.prototype,v=f.iv;if(this.type==="encrypt"){for(var E=0;E<this.blockSize;E++)v[E]^=c[h+E];m._update.call(this,v,0,p,l);for(var E=0;E<this.blockSize;E++)v[E]=p[l+E]}else{m._update.call(this,c,h,p,l);for(var E=0;E<this.blockSize;E++)p[l+E]^=v[E];for(var E=0;E<this.blockSize;E++)v[E]=c[h+E]}}},{inherits:233,"minimalistic-assert":241}],183:[function(e,i,t){var n=e("minimalistic-assert");function a(o){this.options=o,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}i.exports=a,a.prototype._init=function(){},a.prototype.update=function(d){return d.length===0?[]:this.type==="decrypt"?this._updateDecrypt(d):this._updateEncrypt(d)},a.prototype._buffer=function(d,s){for(var u=Math.min(this.buffer.length-this.bufferOff,d.length-s),c=0;c<u;c++)this.buffer[this.bufferOff+c]=d[s+c];return this.bufferOff+=u,u},a.prototype._flushBuffer=function(d,s){return this._update(this.buffer,0,d,s),this.bufferOff=0,this.blockSize},a.prototype._updateEncrypt=function(d){var s=0,u=0,c=(this.bufferOff+d.length)/this.blockSize|0,h=new Array(c*this.blockSize);this.bufferOff!==0&&(s+=this._buffer(d,s),this.bufferOff===this.buffer.length&&(u+=this._flushBuffer(h,u)));for(var p=d.length-(d.length-s)%this.blockSize;s<p;s+=this.blockSize)this._update(d,s,h,u),u+=this.blockSize;for(;s<d.length;s++,this.bufferOff++)this.buffer[this.bufferOff]=d[s];return h},a.prototype._updateDecrypt=function(d){for(var s=0,u=0,c=Math.ceil((this.bufferOff+d.length)/this.blockSize)-1,h=new Array(c*this.blockSize);c>0;c--)s+=this._buffer(d,s),u+=this._flushBuffer(h,u);return s+=this._buffer(d,s),h},a.prototype.final=function(d){var s;d&&(s=this.update(d));var u;return this.type==="encrypt"?u=this._finalEncrypt():u=this._finalDecrypt(),s?s.concat(u):u},a.prototype._pad=function(d,s){if(s===0)return!1;for(;s<d.length;)d[s++]=0;return!0},a.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var d=new Array(this.blockSize);return this._update(this.buffer,0,d,0),d},a.prototype._unpad=function(d){return d},a.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var d=new Array(this.blockSize);return this._flushBuffer(d,0),this._unpad(d)}},{"minimalistic-assert":241}],184:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits"),o=e("./utils"),d=e("./cipher");function s(){this.tmp=new Array(2),this.keys=null}function u(h){d.call(this,h);var p=new s;this._desState=p,this.deriveKeys(p,h.key)}a(u,d),i.exports=u,u.create=function(p){return new u(p)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];u.prototype.deriveKeys=function(p,l){p.keys=new Array(16*2),n.equal(l.length,this.blockSize,"Invalid key length");var f=o.readUInt32BE(l,0),m=o.readUInt32BE(l,4);o.pc1(f,m,p.tmp,0),f=p.tmp[0],m=p.tmp[1];for(var v=0;v<p.keys.length;v+=2){var E=c[v>>>1];f=o.r28shl(f,E),m=o.r28shl(m,E),o.pc2(f,m,p.keys,v)}},u.prototype._update=function(p,l,f,m){var v=this._desState,E=o.readUInt32BE(p,l),k=o.readUInt32BE(p,l+4);o.ip(E,k,v.tmp,0),E=v.tmp[0],k=v.tmp[1],this.type==="encrypt"?this._encrypt(v,E,k,v.tmp,0):this._decrypt(v,E,k,v.tmp,0),E=v.tmp[0],k=v.tmp[1],o.writeUInt32BE(f,E,m),o.writeUInt32BE(f,k,m+4)},u.prototype._pad=function(p,l){for(var f=p.length-l,m=l;m<p.length;m++)p[m]=f;return!0},u.prototype._unpad=function(p){for(var l=p[p.length-1],f=p.length-l;f<p.length;f++)n.equal(p[f],l);return p.slice(0,p.length-l)},u.prototype._encrypt=function(p,l,f,m,v){for(var E=l,k=f,C=0;C<p.keys.length;C+=2){var N=p.keys[C],P=p.keys[C+1];o.expand(k,p.tmp,0),N^=p.tmp[0],P^=p.tmp[1];var M=o.substitute(N,P),L=o.permute(M),$=k;k=(E^L)>>>0,E=$}o.rip(k,E,m,v)},u.prototype._decrypt=function(p,l,f,m,v){for(var E=f,k=l,C=p.keys.length-2;C>=0;C-=2){var N=p.keys[C],P=p.keys[C+1];o.expand(E,p.tmp,0),N^=p.tmp[0],P^=p.tmp[1];var M=o.substitute(N,P),L=o.permute(M),$=E;E=(k^L)>>>0,k=$}o.rip(E,k,m,v)}},{"./cipher":183,"./utils":186,inherits:233,"minimalistic-assert":241}],185:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits"),o=e("./cipher"),d=e("./des");function s(c,h){n.equal(h.length,24,"Invalid key length");var p=h.slice(0,8),l=h.slice(8,16),f=h.slice(16,24);c==="encrypt"?this.ciphers=[d.create({type:"encrypt",key:p}),d.create({type:"decrypt",key:l}),d.create({type:"encrypt",key:f})]:this.ciphers=[d.create({type:"decrypt",key:f}),d.create({type:"encrypt",key:l}),d.create({type:"decrypt",key:p})]}function u(c){o.call(this,c);var h=new s(this.type,this.options.key);this._edeState=h}a(u,o),i.exports=u,u.create=function(h){return new u(h)},u.prototype._update=function(h,p,l,f){var m=this._edeState;m.ciphers[0]._update(h,p,l,f),m.ciphers[1]._update(l,f,l,f),m.ciphers[2]._update(l,f,l,f)},u.prototype._pad=d.prototype._pad,u.prototype._unpad=d.prototype._unpad},{"./cipher":183,"./des":184,inherits:233,"minimalistic-assert":241}],186:[function(e,i,t){t.readUInt32BE=function(s,u){var c=s[0+u]<<24|s[1+u]<<16|s[2+u]<<8|s[3+u];return c>>>0},t.writeUInt32BE=function(s,u,c){s[0+c]=u>>>24,s[1+c]=u>>>16&255,s[2+c]=u>>>8&255,s[3+c]=u&255},t.ip=function(s,u,c,h){for(var p=0,l=0,f=6;f>=0;f-=2){for(var m=0;m<=24;m+=8)p<<=1,p|=u>>>m+f&1;for(var m=0;m<=24;m+=8)p<<=1,p|=s>>>m+f&1}for(var f=6;f>=0;f-=2){for(var m=1;m<=25;m+=8)l<<=1,l|=u>>>m+f&1;for(var m=1;m<=25;m+=8)l<<=1,l|=s>>>m+f&1}c[h+0]=p>>>0,c[h+1]=l>>>0},t.rip=function(s,u,c,h){for(var p=0,l=0,f=0;f<4;f++)for(var m=24;m>=0;m-=8)p<<=1,p|=u>>>m+f&1,p<<=1,p|=s>>>m+f&1;for(var f=4;f<8;f++)for(var m=24;m>=0;m-=8)l<<=1,l|=u>>>m+f&1,l<<=1,l|=s>>>m+f&1;c[h+0]=p>>>0,c[h+1]=l>>>0},t.pc1=function(s,u,c,h){for(var p=0,l=0,f=7;f>=5;f--){for(var m=0;m<=24;m+=8)p<<=1,p|=u>>m+f&1;for(var m=0;m<=24;m+=8)p<<=1,p|=s>>m+f&1}for(var m=0;m<=24;m+=8)p<<=1,p|=u>>m+f&1;for(var f=1;f<=3;f++){for(var m=0;m<=24;m+=8)l<<=1,l|=u>>m+f&1;for(var m=0;m<=24;m+=8)l<<=1,l|=s>>m+f&1}for(var m=0;m<=24;m+=8)l<<=1,l|=s>>m+f&1;c[h+0]=p>>>0,c[h+1]=l>>>0},t.r28shl=function(s,u){return s<<u&268435455|s>>>28-u};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(s,u,c,h){for(var p=0,l=0,f=n.length>>>1,m=0;m<f;m++)p<<=1,p|=s>>>n[m]&1;for(var m=f;m<n.length;m++)l<<=1,l|=u>>>n[m]&1;c[h+0]=p>>>0,c[h+1]=l>>>0},t.expand=function(s,u,c){var h=0,p=0;h=(s&1)<<5|s>>>27;for(var l=23;l>=15;l-=4)h<<=6,h|=s>>>l&63;for(var l=11;l>=3;l-=4)p|=s>>>l&63,p<<=6;p|=(s&31)<<1|s>>>31,u[c+0]=h>>>0,u[c+1]=p>>>0};var a=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(s,u){for(var c=0,h=0;h<4;h++){var p=s>>>18-h*6&63,l=a[h*64+p];c<<=4,c|=l}for(var h=0;h<4;h++){var p=u>>>18-h*6&63,l=a[4*64+h*64+p];c<<=4,c|=l}return c>>>0};var o=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(s){for(var u=0,c=0;c<o.length;c++)u<<=1,u|=s>>>o[c]&1;return u>>>0},t.padSplit=function(s,u,c){for(var h=s.toString(2);h.length<u;)h="0"+h;for(var p=[],l=0;l<u;l+=c)p.push(h.slice(l,l+c));return p.join(" ")}},{}],187:[function(e,i,t){(function(n){(function(){var a=e("./lib/generatePrime"),o=e("./lib/primes.json"),d=e("./lib/dh");function s(h){var p=new n(o[h].prime,"hex"),l=new n(o[h].gen,"hex");return new d(p,l)}var u={binary:!0,hex:!0,base64:!0};function c(h,p,l,f){return n.isBuffer(p)||u[p]===void 0?c(h,"binary",p,l):(p=p||"binary",f=f||"binary",l=l||new n([2]),n.isBuffer(l)||(l=new n(l,f)),typeof h=="number"?new d(a(h,l),l,!0):(n.isBuffer(h)||(h=new n(h,p)),new d(h,l,!0)))}t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=s,t.createDiffieHellman=t.DiffieHellman=c}).call(this)}).call(this,e("buffer").Buffer)},{"./lib/dh":188,"./lib/generatePrime":189,"./lib/primes.json":190,buffer:171}],188:[function(e,i,t){(function(n){(function(){var a=e("bn.js"),o=e("miller-rabin"),d=new o,s=new a(24),u=new a(11),c=new a(10),h=new a(3),p=new a(7),l=e("./generatePrime"),f=e("randombytes");i.exports=C;function m(P,M){return M=M||"utf8",n.isBuffer(P)||(P=new n(P,M)),this._pub=new a(P),this}function v(P,M){return M=M||"utf8",n.isBuffer(P)||(P=new n(P,M)),this._priv=new a(P),this}var E={};function k(P,M){var L=M.toString("hex"),$=[L,P.toString(16)].join("_");if($ in E)return E[$];var H=0;if(P.isEven()||!l.simpleSieve||!l.fermatTest(P)||!d.test(P))return H+=1,L==="02"||L==="05"?H+=8:H+=4,E[$]=H,H;d.test(P.shrn(1))||(H+=2);var Z;switch(L){case"02":P.mod(s).cmp(u)&&(H+=8);break;case"05":Z=P.mod(c),Z.cmp(h)&&Z.cmp(p)&&(H+=8);break;default:H+=4}return E[$]=H,H}function C(P,M,L){this.setGenerator(M),this.__prime=new a(P),this._prime=a.mont(this.__prime),this._primeLen=P.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,L?(this.setPublicKey=m,this.setPrivateKey=v):this._primeCode=8}Object.defineProperty(C.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=k(this.__prime,this.__gen)),this._primeCode}}),C.prototype.generateKeys=function(){return this._priv||(this._priv=new a(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},C.prototype.computeSecret=function(P){P=new a(P),P=P.toRed(this._prime);var M=P.redPow(this._priv).fromRed(),L=new n(M.toArray()),$=this.getPrime();if(L.length<$.length){var H=new n($.length-L.length);H.fill(0),L=n.concat([H,L])}return L},C.prototype.getPublicKey=function(M){return N(this._pub,M)},C.prototype.getPrivateKey=function(M){return N(this._priv,M)},C.prototype.getPrime=function(P){return N(this.__prime,P)},C.prototype.getGenerator=function(P){return N(this._gen,P)},C.prototype.setGenerator=function(P,M){return M=M||"utf8",n.isBuffer(P)||(P=new n(P,M)),this.__gen=P,this._gen=new a(P),this};function N(P,M){var L=new n(P.toArray());return M?L.toString(M):L}}).call(this)}).call(this,e("buffer").Buffer)},{"./generatePrime":189,"bn.js":139,buffer:171,"miller-rabin":240,randombytes:261}],189:[function(e,i,t){var n=e("randombytes");i.exports=N,N.simpleSieve=k,N.fermatTest=C;var a=e("bn.js"),o=new a(24),d=e("miller-rabin"),s=new d,u=new a(1),c=new a(2),h=new a(5);new a(16),new a(8);var p=new a(10),l=new a(3);new a(7);var f=new a(11),m=new a(4);new a(12);var v=null;function E(){if(v!==null)return v;var P=1048576,M=[];M[0]=2;for(var L=1,$=3;$<P;$+=2){for(var H=Math.ceil(Math.sqrt($)),Z=0;Z<L&&M[Z]<=H&&$%M[Z]!==0;Z++);L!==Z&&M[Z]<=H||(M[L++]=$)}return v=M,M}function k(P){for(var M=E(),L=0;L<M.length;L++)if(P.modn(M[L])===0)return P.cmpn(M[L])===0;return!0}function C(P){var M=a.mont(P);return c.toRed(M).redPow(P.subn(1)).fromRed().cmpn(1)===0}function N(P,M){if(P<16)return M===2||M===5?new a([140,123]):new a([140,39]);M=new a(M);for(var L,$;;){for(L=new a(n(Math.ceil(P/8)));L.bitLength()>P;)L.ishrn(1);if(L.isEven()&&L.iadd(u),L.testn(1)||L.iadd(c),M.cmp(c)){if(!M.cmp(h))for(;L.mod(p).cmp(l);)L.iadd(m)}else for(;L.mod(o).cmp(f);)L.iadd(m);if($=L.shrn(1),k($)&&k(L)&&C($)&&C(L)&&s.test($)&&s.test(L))return L}}},{"bn.js":139,"miller-rabin":240,randombytes:261}],190:[function(e,i,t){i.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],191:[function(e,i,t){var n=t;n.version=e("../package.json").version,n.utils=e("./elliptic/utils"),n.rand=e("brorand"),n.curve=e("./elliptic/curve"),n.curves=e("./elliptic/curves"),n.ec=e("./elliptic/ec"),n.eddsa=e("./elliptic/eddsa")},{"../package.json":206,"./elliptic/curve":194,"./elliptic/curves":197,"./elliptic/ec":198,"./elliptic/eddsa":201,"./elliptic/utils":205,brorand:141}],192:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),o=a.getNAF,d=a.getJSF,s=a.assert;function u(h,p){this.type=h,this.p=new n(p.p,16),this.red=p.prime?n.red(p.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=p.n&&new n(p.n,16),this.g=p.g&&this.pointFromJSON(p.g,p.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var l=this.n&&this.p.div(this.n);!l||l.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}i.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(p,l){s(p.precomputed);var f=p._getDoubles(),m=o(l,1,this._bitLength),v=(1<<f.step+1)-(f.step%2===0?2:1);v/=3;var E=[],k,C;for(k=0;k<m.length;k+=f.step){C=0;for(var N=k+f.step-1;N>=k;N--)C=(C<<1)+m[N];E.push(C)}for(var P=this.jpoint(null,null,null),M=this.jpoint(null,null,null),L=v;L>0;L--){for(k=0;k<E.length;k++)C=E[k],C===L?M=M.mixedAdd(f.points[k]):C===-L&&(M=M.mixedAdd(f.points[k].neg()));P=P.add(M)}return P.toP()},u.prototype._wnafMul=function(p,l){var f=4,m=p._getNAFPoints(f);f=m.wnd;for(var v=m.points,E=o(l,f,this._bitLength),k=this.jpoint(null,null,null),C=E.length-1;C>=0;C--){for(var N=0;C>=0&&E[C]===0;C--)N++;if(C>=0&&N++,k=k.dblp(N),C<0)break;var P=E[C];s(P!==0),p.type==="affine"?P>0?k=k.mixedAdd(v[P-1>>1]):k=k.mixedAdd(v[-P-1>>1].neg()):P>0?k=k.add(v[P-1>>1]):k=k.add(v[-P-1>>1].neg())}return p.type==="affine"?k.toP():k},u.prototype._wnafMulAdd=function(p,l,f,m,v){var E=this._wnafT1,k=this._wnafT2,C=this._wnafT3,N=0,P,M,L;for(P=0;P<m;P++){L=l[P];var $=L._getNAFPoints(p);E[P]=$.wnd,k[P]=$.points}for(P=m-1;P>=1;P-=2){var H=P-1,Z=P;if(E[H]!==1||E[Z]!==1){C[H]=o(f[H],E[H],this._bitLength),C[Z]=o(f[Z],E[Z],this._bitLength),N=Math.max(C[H].length,N),N=Math.max(C[Z].length,N);continue}var re=[l[H],null,null,l[Z]];l[H].y.cmp(l[Z].y)===0?(re[1]=l[H].add(l[Z]),re[2]=l[H].toJ().mixedAdd(l[Z].neg())):l[H].y.cmp(l[Z].y.redNeg())===0?(re[1]=l[H].toJ().mixedAdd(l[Z]),re[2]=l[H].add(l[Z].neg())):(re[1]=l[H].toJ().mixedAdd(l[Z]),re[2]=l[H].toJ().mixedAdd(l[Z].neg()));var Y=[-3,-1,-5,-7,0,7,5,1,3],O=d(f[H],f[Z]);for(N=Math.max(O[0].length,N),C[H]=new Array(N),C[Z]=new Array(N),M=0;M<N;M++){var D=O[0][M]|0,b=O[1][M]|0;C[H][M]=Y[(D+1)*3+(b+1)],C[Z][M]=0,k[H]=re}}var _=this.jpoint(null,null,null),g=this._wnafT4;for(P=N;P>=0;P--){for(var w=0;P>=0;){var T=!0;for(M=0;M<m;M++)g[M]=C[M][P]|0,g[M]!==0&&(T=!1);if(!T)break;w++,P--}if(P>=0&&w++,_=_.dblp(w),P<0)break;for(M=0;M<m;M++){var A=g[M];A!==0&&(A>0?L=k[M][A-1>>1]:A<0&&(L=k[M][-A-1>>1].neg()),L.type==="affine"?_=_.mixedAdd(L):_=_.add(L))}}for(P=0;P<m;P++)k[P]=null;return v?_:_.toP()};function c(h,p){this.curve=h,this.type=p,this.precomputed=null}u.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(p,l){p=a.toArray(p,l);var f=this.p.byteLength();if((p[0]===4||p[0]===6||p[0]===7)&&p.length-1===2*f){p[0]===6?s(p[p.length-1]%2===0):p[0]===7&&s(p[p.length-1]%2===1);var m=this.point(p.slice(1,1+f),p.slice(1+f,1+2*f));return m}else if((p[0]===2||p[0]===3)&&p.length-1===f)return this.pointFromX(p.slice(1,1+f),p[0]===3);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(p){return this.encode(p,!0)},c.prototype._encode=function(p){var l=this.curve.p.byteLength(),f=this.getX().toArray("be",l);return p?[this.getY().isEven()?2:3].concat(f):[4].concat(f,this.getY().toArray("be",l))},c.prototype.encode=function(p,l){return a.encode(this._encode(l),p)},c.prototype.precompute=function(p){if(this.precomputed)return this;var l={doubles:null,naf:null,beta:null};return l.naf=this._getNAFPoints(8),l.doubles=this._getDoubles(4,p),l.beta=this._getBeta(),this.precomputed=l,this},c.prototype._hasDoubles=function(p){if(!this.precomputed)return!1;var l=this.precomputed.doubles;return l?l.points.length>=Math.ceil((p.bitLength()+1)/l.step):!1},c.prototype._getDoubles=function(p,l){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var f=[this],m=this,v=0;v<l;v+=p){for(var E=0;E<p;E++)m=m.dbl();f.push(m)}return{step:p,points:f}},c.prototype._getNAFPoints=function(p){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var l=[this],f=(1<<p)-1,m=f===1?null:this.dbl(),v=1;v<f;v++)l[v]=l[v-1].add(m);return{wnd:p,points:l}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(p){for(var l=this,f=0;f<p;f++)l=l.dbl();return l}},{"../utils":205,"bn.js":139}],193:[function(e,i,t){var n=e("../utils"),a=e("bn.js"),o=e("inherits"),d=e("./base"),s=n.assert;function u(h){this.twisted=(h.a|0)!==1,this.mOneA=this.twisted&&(h.a|0)===-1,this.extended=this.mOneA,d.call(this,"edwards",h),this.a=new a(h.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(h.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(h.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),s(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(h.c|0)===1}o(u,d),i.exports=u,u.prototype._mulA=function(p){return this.mOneA?p.redNeg():this.a.redMul(p)},u.prototype._mulC=function(p){return this.oneC?p:this.c.redMul(p)},u.prototype.jpoint=function(p,l,f,m){return this.point(p,l,f,m)},u.prototype.pointFromX=function(p,l){p=new a(p,16),p.red||(p=p.toRed(this.red));var f=p.redSqr(),m=this.c2.redSub(this.a.redMul(f)),v=this.one.redSub(this.c2.redMul(this.d).redMul(f)),E=m.redMul(v.redInvm()),k=E.redSqrt();if(k.redSqr().redSub(E).cmp(this.zero)!==0)throw new Error("invalid point");var C=k.fromRed().isOdd();return(l&&!C||!l&&C)&&(k=k.redNeg()),this.point(p,k)},u.prototype.pointFromY=function(p,l){p=new a(p,16),p.red||(p=p.toRed(this.red));var f=p.redSqr(),m=f.redSub(this.c2),v=f.redMul(this.d).redMul(this.c2).redSub(this.a),E=m.redMul(v.redInvm());if(E.cmp(this.zero)===0){if(l)throw new Error("invalid point");return this.point(this.zero,p)}var k=E.redSqrt();if(k.redSqr().redSub(E).cmp(this.zero)!==0)throw new Error("invalid point");return k.fromRed().isOdd()!==l&&(k=k.redNeg()),this.point(k,p)},u.prototype.validate=function(p){if(p.isInfinity())return!0;p.normalize();var l=p.x.redSqr(),f=p.y.redSqr(),m=l.redMul(this.a).redAdd(f),v=this.c2.redMul(this.one.redAdd(this.d.redMul(l).redMul(f)));return m.cmp(v)===0};function c(h,p,l,f,m){d.BasePoint.call(this,h,"projective"),p===null&&l===null&&f===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(p,16),this.y=new a(l,16),this.z=f?new a(f,16):this.curve.one,this.t=m&&new a(m,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(c,d.BasePoint),u.prototype.pointFromJSON=function(p){return c.fromJSON(this,p)},u.prototype.point=function(p,l,f,m){return new c(this,p,l,f,m)},c.fromJSON=function(p,l){return new c(p,l[0],l[1],l[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},c.prototype._extDbl=function(){var p=this.x.redSqr(),l=this.y.redSqr(),f=this.z.redSqr();f=f.redIAdd(f);var m=this.curve._mulA(p),v=this.x.redAdd(this.y).redSqr().redISub(p).redISub(l),E=m.redAdd(l),k=E.redSub(f),C=m.redSub(l),N=v.redMul(k),P=E.redMul(C),M=v.redMul(C),L=k.redMul(E);return this.curve.point(N,P,L,M)},c.prototype._projDbl=function(){var p=this.x.redAdd(this.y).redSqr(),l=this.x.redSqr(),f=this.y.redSqr(),m,v,E,k,C,N;if(this.curve.twisted){k=this.curve._mulA(l);var P=k.redAdd(f);this.zOne?(m=p.redSub(l).redSub(f).redMul(P.redSub(this.curve.two)),v=P.redMul(k.redSub(f)),E=P.redSqr().redSub(P).redSub(P)):(C=this.z.redSqr(),N=P.redSub(C).redISub(C),m=p.redSub(l).redISub(f).redMul(N),v=P.redMul(k.redSub(f)),E=P.redMul(N))}else k=l.redAdd(f),C=this.curve._mulC(this.z).redSqr(),N=k.redSub(C).redSub(C),m=this.curve._mulC(p.redISub(k)).redMul(N),v=this.curve._mulC(k).redMul(l.redISub(f)),E=k.redMul(N);return this.curve.point(m,v,E)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(p){var l=this.y.redSub(this.x).redMul(p.y.redSub(p.x)),f=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x)),m=this.t.redMul(this.curve.dd).redMul(p.t),v=this.z.redMul(p.z.redAdd(p.z)),E=f.redSub(l),k=v.redSub(m),C=v.redAdd(m),N=f.redAdd(l),P=E.redMul(k),M=C.redMul(N),L=E.redMul(N),$=k.redMul(C);return this.curve.point(P,M,$,L)},c.prototype._projAdd=function(p){var l=this.z.redMul(p.z),f=l.redSqr(),m=this.x.redMul(p.x),v=this.y.redMul(p.y),E=this.curve.d.redMul(m).redMul(v),k=f.redSub(E),C=f.redAdd(E),N=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(m).redISub(v),P=l.redMul(k).redMul(N),M,L;return this.curve.twisted?(M=l.redMul(C).redMul(v.redSub(this.curve._mulA(m))),L=k.redMul(C)):(M=l.redMul(C).redMul(v.redSub(m)),L=this.curve._mulC(k).redMul(C)),this.curve.point(P,M,L)},c.prototype.add=function(p){return this.isInfinity()?p:p.isInfinity()?this:this.curve.extended?this._extAdd(p):this._projAdd(p)},c.prototype.mul=function(p){return this._hasDoubles(p)?this.curve._fixedNafMul(this,p):this.curve._wnafMul(this,p)},c.prototype.mulAdd=function(p,l,f){return this.curve._wnafMulAdd(1,[this,l],[p,f],2,!1)},c.prototype.jmulAdd=function(p,l,f){return this.curve._wnafMulAdd(1,[this,l],[p,f],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var p=this.z.redInvm();return this.x=this.x.redMul(p),this.y=this.y.redMul(p),this.t&&(this.t=this.t.redMul(p)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(p){return this===p||this.getX().cmp(p.getX())===0&&this.getY().cmp(p.getY())===0},c.prototype.eqXToP=function(p){var l=p.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(l)===0)return!0;for(var f=p.clone(),m=this.curve.redN.redMul(this.z);;){if(f.iadd(this.curve.n),f.cmp(this.curve.p)>=0)return!1;if(l.redIAdd(m),this.x.cmp(l)===0)return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},{"../utils":205,"./base":192,"bn.js":139,inherits:233}],194:[function(e,i,t){var n=t;n.base=e("./base"),n.short=e("./short"),n.mont=e("./mont"),n.edwards=e("./edwards")},{"./base":192,"./edwards":193,"./mont":195,"./short":196}],195:[function(e,i,t){var n=e("bn.js"),a=e("inherits"),o=e("./base"),d=e("../utils");function s(c){o.call(this,"mont",c),this.a=new n(c.a,16).toRed(this.red),this.b=new n(c.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}a(s,o),i.exports=s,s.prototype.validate=function(h){var p=h.normalize().x,l=p.redSqr(),f=l.redMul(p).redAdd(l.redMul(this.a)).redAdd(p),m=f.redSqrt();return m.redSqr().cmp(f)===0};function u(c,h,p){o.BasePoint.call(this,c,"projective"),h===null&&p===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(h,16),this.z=new n(p,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(u,o.BasePoint),s.prototype.decodePoint=function(h,p){return this.point(d.toArray(h,p),1)},s.prototype.point=function(h,p){return new u(this,h,p)},s.prototype.pointFromJSON=function(h){return u.fromJSON(this,h)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(h,p){return new u(h,p[0],p[1]||h.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return this.z.cmpn(0)===0},u.prototype.dbl=function(){var h=this.x.redAdd(this.z),p=h.redSqr(),l=this.x.redSub(this.z),f=l.redSqr(),m=p.redSub(f),v=p.redMul(f),E=m.redMul(f.redAdd(this.curve.a24.redMul(m)));return this.curve.point(v,E)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(h,p){var l=this.x.redAdd(this.z),f=this.x.redSub(this.z),m=h.x.redAdd(h.z),v=h.x.redSub(h.z),E=v.redMul(l),k=m.redMul(f),C=p.z.redMul(E.redAdd(k).redSqr()),N=p.x.redMul(E.redISub(k).redSqr());return this.curve.point(C,N)},u.prototype.mul=function(h){for(var p=h.clone(),l=this,f=this.curve.point(null,null),m=this,v=[];p.cmpn(0)!==0;p.iushrn(1))v.push(p.andln(1));for(var E=v.length-1;E>=0;E--)v[E]===0?(l=l.diffAdd(f,m),f=f.dbl()):(f=l.diffAdd(f,m),l=l.dbl());return f},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(h){return this.getX().cmp(h.getX())===0},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":205,"./base":192,"bn.js":139,inherits:233}],196:[function(e,i,t){var n=e("../utils"),a=e("bn.js"),o=e("inherits"),d=e("./base"),s=n.assert;function u(p){d.call(this,"short",p),this.a=new a(p.a,16).toRed(this.red),this.b=new a(p.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(p),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}o(u,d),i.exports=u,u.prototype._getEndomorphism=function(l){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var f,m;if(l.beta)f=new a(l.beta,16).toRed(this.red);else{var v=this._getEndoRoots(this.p);f=v[0].cmp(v[1])<0?v[0]:v[1],f=f.toRed(this.red)}if(l.lambda)m=new a(l.lambda,16);else{var E=this._getEndoRoots(this.n);this.g.mul(E[0]).x.cmp(this.g.x.redMul(f))===0?m=E[0]:(m=E[1],s(this.g.mul(m).x.cmp(this.g.x.redMul(f))===0))}var k;return l.basis?k=l.basis.map(function(C){return{a:new a(C.a,16),b:new a(C.b,16)}}):k=this._getEndoBasis(m),{beta:f,lambda:m,basis:k}}},u.prototype._getEndoRoots=function(l){var f=l===this.p?this.red:a.mont(l),m=new a(2).toRed(f).redInvm(),v=m.redNeg(),E=new a(3).toRed(f).redNeg().redSqrt().redMul(m),k=v.redAdd(E).fromRed(),C=v.redSub(E).fromRed();return[k,C]},u.prototype._getEndoBasis=function(l){for(var f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),m=l,v=this.n.clone(),E=new a(1),k=new a(0),C=new a(0),N=new a(1),P,M,L,$,H,Z,re,Y=0,O,D;m.cmpn(0)!==0;){var b=v.div(m);O=v.sub(b.mul(m)),D=C.sub(b.mul(E));var _=N.sub(b.mul(k));if(!L&&O.cmp(f)<0)P=re.neg(),M=E,L=O.neg(),$=D;else if(L&&++Y===2)break;re=O,v=m,m=O,C=E,E=D,N=k,k=_}H=O.neg(),Z=D;var g=L.sqr().add($.sqr()),w=H.sqr().add(Z.sqr());return w.cmp(g)>=0&&(H=P,Z=M),L.negative&&(L=L.neg(),$=$.neg()),H.negative&&(H=H.neg(),Z=Z.neg()),[{a:L,b:$},{a:H,b:Z}]},u.prototype._endoSplit=function(l){var f=this.endo.basis,m=f[0],v=f[1],E=v.b.mul(l).divRound(this.n),k=m.b.neg().mul(l).divRound(this.n),C=E.mul(m.a),N=k.mul(v.a),P=E.mul(m.b),M=k.mul(v.b),L=l.sub(C).sub(N),$=P.add(M).neg();return{k1:L,k2:$}},u.prototype.pointFromX=function(l,f){l=new a(l,16),l.red||(l=l.toRed(this.red));var m=l.redSqr().redMul(l).redIAdd(l.redMul(this.a)).redIAdd(this.b),v=m.redSqrt();if(v.redSqr().redSub(m).cmp(this.zero)!==0)throw new Error("invalid point");var E=v.fromRed().isOdd();return(f&&!E||!f&&E)&&(v=v.redNeg()),this.point(l,v)},u.prototype.validate=function(l){if(l.inf)return!0;var f=l.x,m=l.y,v=this.a.redMul(f),E=f.redSqr().redMul(f).redIAdd(v).redIAdd(this.b);return m.redSqr().redISub(E).cmpn(0)===0},u.prototype._endoWnafMulAdd=function(l,f,m){for(var v=this._endoWnafT1,E=this._endoWnafT2,k=0;k<l.length;k++){var C=this._endoSplit(f[k]),N=l[k],P=N._getBeta();C.k1.negative&&(C.k1.ineg(),N=N.neg(!0)),C.k2.negative&&(C.k2.ineg(),P=P.neg(!0)),v[k*2]=N,v[k*2+1]=P,E[k*2]=C.k1,E[k*2+1]=C.k2}for(var M=this._wnafMulAdd(1,v,E,k*2,m),L=0;L<k*2;L++)v[L]=null,E[L]=null;return M};function c(p,l,f,m){d.BasePoint.call(this,p,"affine"),l===null&&f===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(l,16),this.y=new a(f,16),m&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}o(c,d.BasePoint),u.prototype.point=function(l,f,m){return new c(this,l,f,m)},u.prototype.pointFromJSON=function(l,f){return c.fromJSON(this,l,f)},c.prototype._getBeta=function(){if(this.curve.endo){var l=this.precomputed;if(l&&l.beta)return l.beta;var f=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(l){var m=this.curve,v=function(E){return m.point(E.x.redMul(m.endo.beta),E.y)};l.beta=f,f.precomputed={beta:null,naf:l.naf&&{wnd:l.naf.wnd,points:l.naf.points.map(v)},doubles:l.doubles&&{step:l.doubles.step,points:l.doubles.points.map(v)}}}return f}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(l,f,m){typeof f=="string"&&(f=JSON.parse(f));var v=l.point(f[0],f[1],m);if(!f[2])return v;function E(C){return l.point(C[0],C[1],m)}var k=f[2];return v.precomputed={beta:null,doubles:k.doubles&&{step:k.doubles.step,points:[v].concat(k.doubles.points.map(E))},naf:k.naf&&{wnd:k.naf.wnd,points:[v].concat(k.naf.points.map(E))}},v},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(l){if(this.inf)return l;if(l.inf)return this;if(this.eq(l))return this.dbl();if(this.neg().eq(l))return this.curve.point(null,null);if(this.x.cmp(l.x)===0)return this.curve.point(null,null);var f=this.y.redSub(l.y);f.cmpn(0)!==0&&(f=f.redMul(this.x.redSub(l.x).redInvm()));var m=f.redSqr().redISub(this.x).redISub(l.x),v=f.redMul(this.x.redSub(m)).redISub(this.y);return this.curve.point(m,v)},c.prototype.dbl=function(){if(this.inf)return this;var l=this.y.redAdd(this.y);if(l.cmpn(0)===0)return this.curve.point(null,null);var f=this.curve.a,m=this.x.redSqr(),v=l.redInvm(),E=m.redAdd(m).redIAdd(m).redIAdd(f).redMul(v),k=E.redSqr().redISub(this.x.redAdd(this.x)),C=E.redMul(this.x.redSub(k)).redISub(this.y);return this.curve.point(k,C)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(l){return l=new a(l,16),this.isInfinity()?this:this._hasDoubles(l)?this.curve._fixedNafMul(this,l):this.curve.endo?this.curve._endoWnafMulAdd([this],[l]):this.curve._wnafMul(this,l)},c.prototype.mulAdd=function(l,f,m){var v=[this,f],E=[l,m];return this.curve.endo?this.curve._endoWnafMulAdd(v,E):this.curve._wnafMulAdd(1,v,E,2)},c.prototype.jmulAdd=function(l,f,m){var v=[this,f],E=[l,m];return this.curve.endo?this.curve._endoWnafMulAdd(v,E,!0):this.curve._wnafMulAdd(1,v,E,2,!0)},c.prototype.eq=function(l){return this===l||this.inf===l.inf&&(this.inf||this.x.cmp(l.x)===0&&this.y.cmp(l.y)===0)},c.prototype.neg=function(l){if(this.inf)return this;var f=this.curve.point(this.x,this.y.redNeg());if(l&&this.precomputed){var m=this.precomputed,v=function(E){return E.neg()};f.precomputed={naf:m.naf&&{wnd:m.naf.wnd,points:m.naf.points.map(v)},doubles:m.doubles&&{step:m.doubles.step,points:m.doubles.points.map(v)}}}return f},c.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var l=this.curve.jpoint(this.x,this.y,this.curve.one);return l};function h(p,l,f,m){d.BasePoint.call(this,p,"jacobian"),l===null&&f===null&&m===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(l,16),this.y=new a(f,16),this.z=new a(m,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(h,d.BasePoint),u.prototype.jpoint=function(l,f,m){return new h(this,l,f,m)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var l=this.z.redInvm(),f=l.redSqr(),m=this.x.redMul(f),v=this.y.redMul(f).redMul(l);return this.curve.point(m,v)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(l){if(this.isInfinity())return l;if(l.isInfinity())return this;var f=l.z.redSqr(),m=this.z.redSqr(),v=this.x.redMul(f),E=l.x.redMul(m),k=this.y.redMul(f.redMul(l.z)),C=l.y.redMul(m.redMul(this.z)),N=v.redSub(E),P=k.redSub(C);if(N.cmpn(0)===0)return P.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var M=N.redSqr(),L=M.redMul(N),$=v.redMul(M),H=P.redSqr().redIAdd(L).redISub($).redISub($),Z=P.redMul($.redISub(H)).redISub(k.redMul(L)),re=this.z.redMul(l.z).redMul(N);return this.curve.jpoint(H,Z,re)},h.prototype.mixedAdd=function(l){if(this.isInfinity())return l.toJ();if(l.isInfinity())return this;var f=this.z.redSqr(),m=this.x,v=l.x.redMul(f),E=this.y,k=l.y.redMul(f).redMul(this.z),C=m.redSub(v),N=E.redSub(k);if(C.cmpn(0)===0)return N.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var P=C.redSqr(),M=P.redMul(C),L=m.redMul(P),$=N.redSqr().redIAdd(M).redISub(L).redISub(L),H=N.redMul(L.redISub($)).redISub(E.redMul(M)),Z=this.z.redMul(C);return this.curve.jpoint($,H,Z)},h.prototype.dblp=function(l){if(l===0)return this;if(this.isInfinity())return this;if(!l)return this.dbl();var f;if(this.curve.zeroA||this.curve.threeA){var m=this;for(f=0;f<l;f++)m=m.dbl();return m}var v=this.curve.a,E=this.curve.tinv,k=this.x,C=this.y,N=this.z,P=N.redSqr().redSqr(),M=C.redAdd(C);for(f=0;f<l;f++){var L=k.redSqr(),$=M.redSqr(),H=$.redSqr(),Z=L.redAdd(L).redIAdd(L).redIAdd(v.redMul(P)),re=k.redMul($),Y=Z.redSqr().redISub(re.redAdd(re)),O=re.redISub(Y),D=Z.redMul(O);D=D.redIAdd(D).redISub(H);var b=M.redMul(N);f+1<l&&(P=P.redMul(H)),k=Y,N=b,M=D}return this.curve.jpoint(k,M.redMul(E),N)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var l,f,m;if(this.zOne){var v=this.x.redSqr(),E=this.y.redSqr(),k=E.redSqr(),C=this.x.redAdd(E).redSqr().redISub(v).redISub(k);C=C.redIAdd(C);var N=v.redAdd(v).redIAdd(v),P=N.redSqr().redISub(C).redISub(C),M=k.redIAdd(k);M=M.redIAdd(M),M=M.redIAdd(M),l=P,f=N.redMul(C.redISub(P)).redISub(M),m=this.y.redAdd(this.y)}else{var L=this.x.redSqr(),$=this.y.redSqr(),H=$.redSqr(),Z=this.x.redAdd($).redSqr().redISub(L).redISub(H);Z=Z.redIAdd(Z);var re=L.redAdd(L).redIAdd(L),Y=re.redSqr(),O=H.redIAdd(H);O=O.redIAdd(O),O=O.redIAdd(O),l=Y.redISub(Z).redISub(Z),f=re.redMul(Z.redISub(l)).redISub(O),m=this.y.redMul(this.z),m=m.redIAdd(m)}return this.curve.jpoint(l,f,m)},h.prototype._threeDbl=function(){var l,f,m;if(this.zOne){var v=this.x.redSqr(),E=this.y.redSqr(),k=E.redSqr(),C=this.x.redAdd(E).redSqr().redISub(v).redISub(k);C=C.redIAdd(C);var N=v.redAdd(v).redIAdd(v).redIAdd(this.curve.a),P=N.redSqr().redISub(C).redISub(C);l=P;var M=k.redIAdd(k);M=M.redIAdd(M),M=M.redIAdd(M),f=N.redMul(C.redISub(P)).redISub(M),m=this.y.redAdd(this.y)}else{var L=this.z.redSqr(),$=this.y.redSqr(),H=this.x.redMul($),Z=this.x.redSub(L).redMul(this.x.redAdd(L));Z=Z.redAdd(Z).redIAdd(Z);var re=H.redIAdd(H);re=re.redIAdd(re);var Y=re.redAdd(re);l=Z.redSqr().redISub(Y),m=this.y.redAdd(this.z).redSqr().redISub($).redISub(L);var O=$.redSqr();O=O.redIAdd(O),O=O.redIAdd(O),O=O.redIAdd(O),f=Z.redMul(re.redISub(l)).redISub(O)}return this.curve.jpoint(l,f,m)},h.prototype._dbl=function(){var l=this.curve.a,f=this.x,m=this.y,v=this.z,E=v.redSqr().redSqr(),k=f.redSqr(),C=m.redSqr(),N=k.redAdd(k).redIAdd(k).redIAdd(l.redMul(E)),P=f.redAdd(f);P=P.redIAdd(P);var M=P.redMul(C),L=N.redSqr().redISub(M.redAdd(M)),$=M.redISub(L),H=C.redSqr();H=H.redIAdd(H),H=H.redIAdd(H),H=H.redIAdd(H);var Z=N.redMul($).redISub(H),re=m.redAdd(m).redMul(v);return this.curve.jpoint(L,Z,re)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var l=this.x.redSqr(),f=this.y.redSqr(),m=this.z.redSqr(),v=f.redSqr(),E=l.redAdd(l).redIAdd(l),k=E.redSqr(),C=this.x.redAdd(f).redSqr().redISub(l).redISub(v);C=C.redIAdd(C),C=C.redAdd(C).redIAdd(C),C=C.redISub(k);var N=C.redSqr(),P=v.redIAdd(v);P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var M=E.redIAdd(C).redSqr().redISub(k).redISub(N).redISub(P),L=f.redMul(M);L=L.redIAdd(L),L=L.redIAdd(L);var $=this.x.redMul(N).redISub(L);$=$.redIAdd($),$=$.redIAdd($);var H=this.y.redMul(M.redMul(P.redISub(M)).redISub(C.redMul(N)));H=H.redIAdd(H),H=H.redIAdd(H),H=H.redIAdd(H);var Z=this.z.redAdd(C).redSqr().redISub(m).redISub(N);return this.curve.jpoint($,H,Z)},h.prototype.mul=function(l,f){return l=new a(l,f),this.curve._wnafMul(this,l)},h.prototype.eq=function(l){if(l.type==="affine")return this.eq(l.toJ());if(this===l)return!0;var f=this.z.redSqr(),m=l.z.redSqr();if(this.x.redMul(m).redISub(l.x.redMul(f)).cmpn(0)!==0)return!1;var v=f.redMul(this.z),E=m.redMul(l.z);return this.y.redMul(E).redISub(l.y.redMul(v)).cmpn(0)===0},h.prototype.eqXToP=function(l){var f=this.z.redSqr(),m=l.toRed(this.curve.red).redMul(f);if(this.x.cmp(m)===0)return!0;for(var v=l.clone(),E=this.curve.redN.redMul(f);;){if(v.iadd(this.curve.n),v.cmp(this.curve.p)>=0)return!1;if(m.redIAdd(E),this.x.cmp(m)===0)return!0}},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":205,"./base":192,"bn.js":139,inherits:233}],197:[function(e,i,t){var n=t,a=e("hash.js"),o=e("./curve"),d=e("./utils"),s=d.assert;function u(p){p.type==="short"?this.curve=new o.short(p):p.type==="edwards"?this.curve=new o.edwards(p):this.curve=new o.mont(p),this.g=this.curve.g,this.n=this.curve.n,this.hash=p.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=u;function c(p,l){Object.defineProperty(n,p,{configurable:!0,enumerable:!0,get:function(){var f=new u(l);return Object.defineProperty(n,p,{configurable:!0,enumerable:!0,value:f}),f}})}c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var h;try{h=e("./precomputed/secp256k1")}catch{h=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",h]})},{"./curve":194,"./precomputed/secp256k1":204,"./utils":205,"hash.js":219}],198:[function(e,i,t){var n=e("bn.js"),a=e("hmac-drbg"),o=e("../utils"),d=e("../curves"),s=e("brorand"),u=o.assert,c=e("./key"),h=e("./signature");function p(l){if(!(this instanceof p))return new p(l);typeof l=="string"&&(u(Object.prototype.hasOwnProperty.call(d,l),"Unknown curve "+l),l=d[l]),l instanceof d.PresetCurve&&(l={curve:l}),this.curve=l.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=l.curve.g,this.g.precompute(l.curve.n.bitLength()+1),this.hash=l.hash||l.curve.hash}i.exports=p,p.prototype.keyPair=function(f){return new c(this,f)},p.prototype.keyFromPrivate=function(f,m){return c.fromPrivate(this,f,m)},p.prototype.keyFromPublic=function(f,m){return c.fromPublic(this,f,m)},p.prototype.genKeyPair=function(f){f||(f={});for(var m=new a({hash:this.hash,pers:f.pers,persEnc:f.persEnc||"utf8",entropy:f.entropy||s(this.hash.hmacStrength),entropyEnc:f.entropy&&f.entropyEnc||"utf8",nonce:this.n.toArray()}),v=this.n.byteLength(),E=this.n.sub(new n(2));;){var k=new n(m.generate(v));if(!(k.cmp(E)>0))return k.iaddn(1),this.keyFromPrivate(k)}},p.prototype._truncateToN=function(f,m){var v=f.byteLength()*8-this.n.bitLength();return v>0&&(f=f.ushrn(v)),!m&&f.cmp(this.n)>=0?f.sub(this.n):f},p.prototype.sign=function(f,m,v,E){typeof v=="object"&&(E=v,v=null),E||(E={}),m=this.keyFromPrivate(m,v),f=this._truncateToN(new n(f,16));for(var k=this.n.byteLength(),C=m.getPrivate().toArray("be",k),N=f.toArray("be",k),P=new a({hash:this.hash,entropy:C,nonce:N,pers:E.pers,persEnc:E.persEnc||"utf8"}),M=this.n.sub(new n(1)),L=0;;L++){var $=E.k?E.k(L):new n(P.generate(this.n.byteLength()));if($=this._truncateToN($,!0),!($.cmpn(1)<=0||$.cmp(M)>=0)){var H=this.g.mul($);if(!H.isInfinity()){var Z=H.getX(),re=Z.umod(this.n);if(re.cmpn(0)!==0){var Y=$.invm(this.n).mul(re.mul(m.getPrivate()).iadd(f));if(Y=Y.umod(this.n),Y.cmpn(0)!==0){var O=(H.getY().isOdd()?1:0)|(Z.cmp(re)!==0?2:0);return E.canonical&&Y.cmp(this.nh)>0&&(Y=this.n.sub(Y),O^=1),new h({r:re,s:Y,recoveryParam:O})}}}}}},p.prototype.verify=function(f,m,v,E){f=this._truncateToN(new n(f,16)),v=this.keyFromPublic(v,E),m=new h(m,"hex");var k=m.r,C=m.s;if(k.cmpn(1)<0||k.cmp(this.n)>=0||C.cmpn(1)<0||C.cmp(this.n)>=0)return!1;var N=C.invm(this.n),P=N.mul(f).umod(this.n),M=N.mul(k).umod(this.n),L;return this.curve._maxwellTrick?(L=this.g.jmulAdd(P,v.getPublic(),M),L.isInfinity()?!1:L.eqXToP(k)):(L=this.g.mulAdd(P,v.getPublic(),M),L.isInfinity()?!1:L.getX().umod(this.n).cmp(k)===0)},p.prototype.recoverPubKey=function(l,f,m,v){u((3&m)===m,"The recovery param is more than two bits"),f=new h(f,v);var E=this.n,k=new n(l),C=f.r,N=f.s,P=m&1,M=m>>1;if(C.cmp(this.curve.p.umod(this.curve.n))>=0&&M)throw new Error("Unable to find sencond key candinate");M?C=this.curve.pointFromX(C.add(this.curve.n),P):C=this.curve.pointFromX(C,P);var L=f.r.invm(E),$=E.sub(k).mul(L).umod(E),H=N.mul(L).umod(E);return this.g.mulAdd($,C,H)},p.prototype.getKeyRecoveryParam=function(l,f,m,v){if(f=new h(f,v),f.recoveryParam!==null)return f.recoveryParam;for(var E=0;E<4;E++){var k;try{k=this.recoverPubKey(l,f,E)}catch{continue}if(k.eq(m))return E}throw new Error("Unable to find valid recovery factor")}},{"../curves":197,"../utils":205,"./key":199,"./signature":200,"bn.js":139,brorand:141,"hmac-drbg":231}],199:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),o=a.assert;function d(s,u){this.ec=s,this.priv=null,this.pub=null,u.priv&&this._importPrivate(u.priv,u.privEnc),u.pub&&this._importPublic(u.pub,u.pubEnc)}i.exports=d,d.fromPublic=function(u,c,h){return c instanceof d?c:new d(u,{pub:c,pubEnc:h})},d.fromPrivate=function(u,c,h){return c instanceof d?c:new d(u,{priv:c,privEnc:h})},d.prototype.validate=function(){var u=this.getPublic();return u.isInfinity()?{result:!1,reason:"Invalid public key"}:u.validate()?u.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},d.prototype.getPublic=function(u,c){return typeof u=="string"&&(c=u,u=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),c?this.pub.encode(c,u):this.pub},d.prototype.getPrivate=function(u){return u==="hex"?this.priv.toString(16,2):this.priv},d.prototype._importPrivate=function(u,c){this.priv=new n(u,c||16),this.priv=this.priv.umod(this.ec.curve.n)},d.prototype._importPublic=function(u,c){if(u.x||u.y){this.ec.curve.type==="mont"?o(u.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&o(u.x&&u.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(u.x,u.y);return}this.pub=this.ec.curve.decodePoint(u,c)},d.prototype.derive=function(u){return u.validate()||o(u.validate(),"public point not validated"),u.mul(this.priv).getX()},d.prototype.sign=function(u,c,h){return this.ec.sign(u,this,c,h)},d.prototype.verify=function(u,c){return this.ec.verify(u,c,this)},d.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":205,"bn.js":139}],200:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),o=a.assert;function d(p,l){if(p instanceof d)return p;this._importDER(p,l)||(o(p.r&&p.s,"Signature without r or s"),this.r=new n(p.r,16),this.s=new n(p.s,16),p.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=p.recoveryParam)}i.exports=d;function s(){this.place=0}function u(p,l){var f=p[l.place++];if(!(f&128))return f;var m=f&15;if(m===0||m>4)return!1;for(var v=0,E=0,k=l.place;E<m;E++,k++)v<<=8,v|=p[k],v>>>=0;return v<=127?!1:(l.place=k,v)}function c(p){for(var l=0,f=p.length-1;!p[l]&&!(p[l+1]&128)&&l<f;)l++;return l===0?p:p.slice(l)}d.prototype._importDER=function(l,f){l=a.toArray(l,f);var m=new s;if(l[m.place++]!==48)return!1;var v=u(l,m);if(v===!1||v+m.place!==l.length||l[m.place++]!==2)return!1;var E=u(l,m);if(E===!1)return!1;var k=l.slice(m.place,E+m.place);if(m.place+=E,l[m.place++]!==2)return!1;var C=u(l,m);if(C===!1||l.length!==C+m.place)return!1;var N=l.slice(m.place,C+m.place);if(k[0]===0)if(k[1]&128)k=k.slice(1);else return!1;if(N[0]===0)if(N[1]&128)N=N.slice(1);else return!1;return this.r=new n(k),this.s=new n(N),this.recoveryParam=null,!0};function h(p,l){if(l<128){p.push(l);return}var f=1+(Math.log(l)/Math.LN2>>>3);for(p.push(f|128);--f;)p.push(l>>>(f<<3)&255);p.push(l)}d.prototype.toDER=function(l){var f=this.r.toArray(),m=this.s.toArray();for(f[0]&128&&(f=[0].concat(f)),m[0]&128&&(m=[0].concat(m)),f=c(f),m=c(m);!m[0]&&!(m[1]&128);)m=m.slice(1);var v=[2];h(v,f.length),v=v.concat(f),v.push(2),h(v,m.length);var E=v.concat(m),k=[48];return h(k,E.length),k=k.concat(E),a.encode(k,l)}},{"../utils":205,"bn.js":139}],201:[function(e,i,t){var n=e("hash.js"),a=e("../curves"),o=e("../utils"),d=o.assert,s=o.parseBytes,u=e("./key"),c=e("./signature");function h(p){if(d(p==="ed25519","only tested with ed25519 so far"),!(this instanceof h))return new h(p);p=a[p].curve,this.curve=p,this.g=p.g,this.g.precompute(p.n.bitLength()+1),this.pointClass=p.point().constructor,this.encodingLength=Math.ceil(p.n.bitLength()/8),this.hash=n.sha512}i.exports=h,h.prototype.sign=function(l,f){l=s(l);var m=this.keyFromSecret(f),v=this.hashInt(m.messagePrefix(),l),E=this.g.mul(v),k=this.encodePoint(E),C=this.hashInt(k,m.pubBytes(),l).mul(m.priv()),N=v.add(C).umod(this.curve.n);return this.makeSignature({R:E,S:N,Rencoded:k})},h.prototype.verify=function(l,f,m){l=s(l),f=this.makeSignature(f);var v=this.keyFromPublic(m),E=this.hashInt(f.Rencoded(),v.pubBytes(),l),k=this.g.mul(f.S()),C=f.R().add(v.pub().mul(E));return C.eq(k)},h.prototype.hashInt=function(){for(var l=this.hash(),f=0;f<arguments.length;f++)l.update(arguments[f]);return o.intFromLE(l.digest()).umod(this.curve.n)},h.prototype.keyFromPublic=function(l){return u.fromPublic(this,l)},h.prototype.keyFromSecret=function(l){return u.fromSecret(this,l)},h.prototype.makeSignature=function(l){return l instanceof c?l:new c(this,l)},h.prototype.encodePoint=function(l){var f=l.getY().toArray("le",this.encodingLength);return f[this.encodingLength-1]|=l.getX().isOdd()?128:0,f},h.prototype.decodePoint=function(l){l=o.parseBytes(l);var f=l.length-1,m=l.slice(0,f).concat(l[f]&-129),v=(l[f]&128)!==0,E=o.intFromLE(m);return this.curve.pointFromY(E,v)},h.prototype.encodeInt=function(l){return l.toArray("le",this.encodingLength)},h.prototype.decodeInt=function(l){return o.intFromLE(l)},h.prototype.isPoint=function(l){return l instanceof this.pointClass}},{"../curves":197,"../utils":205,"./key":202,"./signature":203,"hash.js":219}],202:[function(e,i,t){var n=e("../utils"),a=n.assert,o=n.parseBytes,d=n.cachedProperty;function s(u,c){this.eddsa=u,this._secret=o(c.secret),u.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=o(c.pub)}s.fromPublic=function(c,h){return h instanceof s?h:new s(c,{pub:h})},s.fromSecret=function(c,h){return h instanceof s?h:new s(c,{secret:h})},s.prototype.secret=function(){return this._secret},d(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),d(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),d(s,"privBytes",function(){var c=this.eddsa,h=this.hash(),p=c.encodingLength-1,l=h.slice(0,c.encodingLength);return l[0]&=248,l[p]&=127,l[p]|=64,l}),d(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),d(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),d(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(c){return a(this._secret,"KeyPair can only verify"),this.eddsa.sign(c,this)},s.prototype.verify=function(c,h){return this.eddsa.verify(c,h,this)},s.prototype.getSecret=function(c){return a(this._secret,"KeyPair is public only"),n.encode(this.secret(),c)},s.prototype.getPublic=function(c){return n.encode(this.pubBytes(),c)},i.exports=s},{"../utils":205}],203:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),o=a.assert,d=a.cachedProperty,s=a.parseBytes;function u(c,h){this.eddsa=c,typeof h!="object"&&(h=s(h)),Array.isArray(h)&&(h={R:h.slice(0,c.encodingLength),S:h.slice(c.encodingLength)}),o(h.R&&h.S,"Signature without R or S"),c.isPoint(h.R)&&(this._R=h.R),h.S instanceof n&&(this._S=h.S),this._Rencoded=Array.isArray(h.R)?h.R:h.Rencoded,this._Sencoded=Array.isArray(h.S)?h.S:h.Sencoded}d(u,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),d(u,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),d(u,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),d(u,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return a.encode(this.toBytes(),"hex").toUpperCase()},i.exports=u},{"../utils":205,"bn.js":139}],204:[function(e,i,t){i.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],205:[function(e,i,t){var n=t,a=e("bn.js"),o=e("minimalistic-assert"),d=e("minimalistic-crypto-utils");n.assert=o,n.toArray=d.toArray,n.zero2=d.zero2,n.toHex=d.toHex,n.encode=d.encode;function s(l,f,m){var v=new Array(Math.max(l.bitLength(),m)+1);v.fill(0);for(var E=1<<f+1,k=l.clone(),C=0;C<v.length;C++){var N,P=k.andln(E-1);k.isOdd()?(P>(E>>1)-1?N=(E>>1)-P:N=P,k.isubn(N)):N=0,v[C]=N,k.iushrn(1)}return v}n.getNAF=s;function u(l,f){var m=[[],[]];l=l.clone(),f=f.clone();for(var v=0,E=0,k;l.cmpn(-v)>0||f.cmpn(-E)>0;){var C=l.andln(3)+v&3,N=f.andln(3)+E&3;C===3&&(C=-1),N===3&&(N=-1);var P;C&1?(k=l.andln(7)+v&7,(k===3||k===5)&&N===2?P=-C:P=C):P=0,m[0].push(P);var M;N&1?(k=f.andln(7)+E&7,(k===3||k===5)&&C===2?M=-N:M=N):M=0,m[1].push(M),2*v===P+1&&(v=1-v),2*E===M+1&&(E=1-E),l.iushrn(1),f.iushrn(1)}return m}n.getJSF=u;function c(l,f,m){var v="_"+f;l.prototype[f]=function(){return this[v]!==void 0?this[v]:this[v]=m.call(this)}}n.cachedProperty=c;function h(l){return typeof l=="string"?n.toArray(l,"hex"):l}n.parseBytes=h;function p(l){return new a(l,"hex","le")}n.intFromLE=p},{"bn.js":139,"minimalistic-assert":241,"minimalistic-crypto-utils":242}],206:[function(e,i,t){i.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],207:[function(e,i,t){var n=typeof Reflect=="object"?Reflect:null,a=n&&typeof n.apply=="function"?n.apply:function(H,Z,re){return Function.prototype.apply.call(H,Z,re)},o;n&&typeof n.ownKeys=="function"?o=n.ownKeys:Object.getOwnPropertySymbols?o=function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:o=function(H){return Object.getOwnPropertyNames(H)};function d($){console&&console.warn&&console.warn($)}var s=Number.isNaN||function(H){return H!==H};function u(){u.init.call(this)}i.exports=u,i.exports.once=P,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var c=10;function h($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function($){if(typeof $!="number"||$<0||s($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");c=$}}),u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(H){if(typeof H!="number"||H<0||s(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this};function p($){return $._maxListeners===void 0?u.defaultMaxListeners:$._maxListeners}u.prototype.getMaxListeners=function(){return p(this)},u.prototype.emit=function(H){for(var Z=[],re=1;re<arguments.length;re++)Z.push(arguments[re]);var Y=H==="error",O=this._events;if(O!==void 0)Y=Y&&O.error===void 0;else if(!Y)return!1;if(Y){var D;if(Z.length>0&&(D=Z[0]),D instanceof Error)throw D;var b=new Error("Unhandled error."+(D?" ("+D.message+")":""));throw b.context=D,b}var _=O[H];if(_===void 0)return!1;if(typeof _=="function")a(_,this,Z);else for(var g=_.length,w=k(_,g),re=0;re<g;++re)a(w[re],this,Z);return!0};function l($,H,Z,re){var Y,O,D;if(h(Z),O=$._events,O===void 0?(O=$._events=Object.create(null),$._eventsCount=0):(O.newListener!==void 0&&($.emit("newListener",H,Z.listener?Z.listener:Z),O=$._events),D=O[H]),D===void 0)D=O[H]=Z,++$._eventsCount;else if(typeof D=="function"?D=O[H]=re?[Z,D]:[D,Z]:re?D.unshift(Z):D.push(Z),Y=p($),Y>0&&D.length>Y&&!D.warned){D.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+D.length+" "+String(H)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=$,b.type=H,b.count=D.length,d(b)}return $}u.prototype.addListener=function(H,Z){return l(this,H,Z,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(H,Z){return l(this,H,Z,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m($,H,Z){var re={fired:!1,wrapFn:void 0,target:$,type:H,listener:Z},Y=f.bind(re);return Y.listener=Z,re.wrapFn=Y,Y}u.prototype.once=function(H,Z){return h(Z),this.on(H,m(this,H,Z)),this},u.prototype.prependOnceListener=function(H,Z){return h(Z),this.prependListener(H,m(this,H,Z)),this},u.prototype.removeListener=function(H,Z){var re,Y,O,D,b;if(h(Z),Y=this._events,Y===void 0)return this;if(re=Y[H],re===void 0)return this;if(re===Z||re.listener===Z)--this._eventsCount===0?this._events=Object.create(null):(delete Y[H],Y.removeListener&&this.emit("removeListener",H,re.listener||Z));else if(typeof re!="function"){for(O=-1,D=re.length-1;D>=0;D--)if(re[D]===Z||re[D].listener===Z){b=re[D].listener,O=D;break}if(O<0)return this;O===0?re.shift():C(re,O),re.length===1&&(Y[H]=re[0]),Y.removeListener!==void 0&&this.emit("removeListener",H,b||Z)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(H){var Z,re,Y;if(re=this._events,re===void 0)return this;if(re.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):re[H]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete re[H]),this;if(arguments.length===0){var O=Object.keys(re),D;for(Y=0;Y<O.length;++Y)D=O[Y],D!=="removeListener"&&this.removeAllListeners(D);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Z=re[H],typeof Z=="function")this.removeListener(H,Z);else if(Z!==void 0)for(Y=Z.length-1;Y>=0;Y--)this.removeListener(H,Z[Y]);return this};function v($,H,Z){var re=$._events;if(re===void 0)return[];var Y=re[H];return Y===void 0?[]:typeof Y=="function"?Z?[Y.listener||Y]:[Y]:Z?N(Y):k(Y,Y.length)}u.prototype.listeners=function(H){return v(this,H,!0)},u.prototype.rawListeners=function(H){return v(this,H,!1)},u.listenerCount=function($,H){return typeof $.listenerCount=="function"?$.listenerCount(H):E.call($,H)},u.prototype.listenerCount=E;function E($){var H=this._events;if(H!==void 0){var Z=H[$];if(typeof Z=="function")return 1;if(Z!==void 0)return Z.length}return 0}u.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function k($,H){for(var Z=new Array(H),re=0;re<H;++re)Z[re]=$[re];return Z}function C($,H){for(;H+1<$.length;H++)$[H]=$[H+1];$.pop()}function N($){for(var H=new Array($.length),Z=0;Z<H.length;++Z)H[Z]=$[Z].listener||$[Z];return H}function P($,H){return new Promise(function(Z,re){function Y(D){$.removeListener(H,O),re(D)}function O(){typeof $.removeListener=="function"&&$.removeListener("error",Y),Z([].slice.call(arguments))}L($,H,O,{once:!0}),H!=="error"&&M($,Y,{once:!0})})}function M($,H,Z){typeof $.on=="function"&&L($,"error",H,Z)}function L($,H,Z,re){if(typeof $.on=="function")re.once?$.once(H,Z):$.on(H,Z);else if(typeof $.addEventListener=="function")$.addEventListener(H,function Y(O){re.once&&$.removeEventListener(H,Y),Z(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $)}},{}],208:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("md5.js");function o(d,s,u,c){if(n.isBuffer(d)||(d=n.from(d,"binary")),s&&(n.isBuffer(s)||(s=n.from(s,"binary")),s.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var h=u/8,p=n.alloc(h),l=n.alloc(c||0),f=n.alloc(0);h>0||c>0;){var m=new a;m.update(f),m.update(d),s&&m.update(s),f=m.digest();var v=0;if(h>0){var E=p.length-h;v=Math.min(h,f.length),f.copy(p,E,0,v),h-=v}if(v<f.length&&c>0){var k=l.length-c,C=Math.min(c,f.length-v);f.copy(l,k,v,v+C),c-=C}}return f.fill(0),{key:p,iv:l}}i.exports=o},{"md5.js":239,"safe-buffer":279}],209:[function(e,i,t){var n=e("is-callable"),a=Object.prototype.toString,o=Object.prototype.hasOwnProperty,d=function(p,l,f){for(var m=0,v=p.length;m<v;m++)o.call(p,m)&&(f==null?l(p[m],m,p):l.call(f,p[m],m,p))},s=function(p,l,f){for(var m=0,v=p.length;m<v;m++)f==null?l(p.charAt(m),m,p):l.call(f,p.charAt(m),m,p)},u=function(p,l,f){for(var m in p)o.call(p,m)&&(f==null?l(p[m],m,p):l.call(f,p[m],m,p))},c=function(p,l,f){if(!n(l))throw new TypeError("iterator must be a function");var m;arguments.length>=3&&(m=f),a.call(p)==="[object Array]"?d(p,l,m):typeof p=="string"?s(p,l,m):u(p,l,m)};i.exports=c},{"is-callable":236}],210:[function(e,i,t){var n="Function.prototype.bind called on incompatible ",a=Array.prototype.slice,o=Object.prototype.toString,d="[object Function]";i.exports=function(u){var c=this;if(typeof c!="function"||o.call(c)!==d)throw new TypeError(n+c);for(var h=a.call(arguments,1),p,l=function(){if(this instanceof p){var k=c.apply(this,h.concat(a.call(arguments)));return Object(k)===k?k:this}else return c.apply(u,h.concat(a.call(arguments)))},f=Math.max(0,c.length-h.length),m=[],v=0;v<f;v++)m.push("$"+v);if(p=Function("binder","return function ("+m.join(",")+"){ return binder.apply(this,arguments); }")(l),c.prototype){var E=function(){};E.prototype=c.prototype,p.prototype=new E,E.prototype=null}return p}},{}],211:[function(e,i,t){var n=e("./implementation");i.exports=Function.prototype.bind||n},{"./implementation":210}],212:[function(e,i,t){var n,a=SyntaxError,o=Function,d=TypeError,s=function(b){try{return o('"use strict"; return ('+b+").constructor;")()}catch{}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch{u=null}var c=function(){throw new d},h=u?function(){try{return arguments.callee,c}catch{try{return u(arguments,"callee").get}catch{return c}}}():c,p=e("has-symbols")(),l=Object.getPrototypeOf||function(b){return b.__proto__},f={},m=typeof Uint8Array>"u"?n:l(Uint8Array),v={"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":p?l([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":f,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?l(l([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!p?n:l(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!p?n:l(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?l(""[Symbol.iterator]()):n,"%Symbol%":p?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":h,"%TypedArray%":m,"%TypeError%":d,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet};try{null.error}catch(b){var E=l(l(b));v["%Error.prototype%"]=E}var k=function b(_){var g;if(_==="%AsyncFunction%")g=s("async function () {}");else if(_==="%GeneratorFunction%")g=s("function* () {}");else if(_==="%AsyncGeneratorFunction%")g=s("async function* () {}");else if(_==="%AsyncGenerator%"){var w=b("%AsyncGeneratorFunction%");w&&(g=w.prototype)}else if(_==="%AsyncIteratorPrototype%"){var T=b("%AsyncGenerator%");T&&(g=l(T.prototype))}return v[_]=g,g},C={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},N=e("function-bind"),P=e("has"),M=N.call(Function.call,Array.prototype.concat),L=N.call(Function.apply,Array.prototype.splice),$=N.call(Function.call,String.prototype.replace),H=N.call(Function.call,String.prototype.slice),Z=N.call(Function.call,RegExp.prototype.exec),re=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Y=/\\(\\)?/g,O=function(_){var g=H(_,0,1),w=H(_,-1);if(g==="%"&&w!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(w==="%"&&g!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var T=[];return $(_,re,function(A,J,G,I){T[T.length]=G?$(I,Y,"$1"):J||A}),T},D=function(_,g){var w=_,T;if(P(C,w)&&(T=C[w],w="%"+T[0]+"%"),P(v,w)){var A=v[w];if(A===f&&(A=k(w)),typeof A>"u"&&!g)throw new d("intrinsic "+_+" exists, but is not available. Please file an issue!");return{alias:T,name:w,value:A}}throw new a("intrinsic "+_+" does not exist!")};i.exports=function(_,g){if(typeof _!="string"||_.length===0)throw new d("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof g!="boolean")throw new d('"allowMissing" argument must be a boolean');if(Z(/^%?[^%]*%?$/,_)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var w=O(_),T=w.length>0?w[0]:"",A=D("%"+T+"%",g),J=A.name,G=A.value,I=!1,V=A.alias;V&&(T=V[0],L(w,M([0,1],V)));for(var x=1,z=!0;x<w.length;x+=1){var ie=w[x],se=H(ie,0,1),pe=H(ie,-1);if((se==='"'||se==="'"||se==="`"||pe==='"'||pe==="'"||pe==="`")&&se!==pe)throw new a("property names with quotes must have matching quotes");if((ie==="constructor"||!z)&&(I=!0),T+="."+ie,J="%"+T+"%",P(v,J))G=v[J];else if(G!=null){if(!(ie in G)){if(!g)throw new d("base intrinsic for "+_+" exists, but the property is not available.");return}if(u&&x+1>=w.length){var be=u(G,ie);z=!!be,z&&"get"in be&&!("originalValue"in be.get)?G=be.get:G=G[ie]}else z=P(G,ie),G=G[ie];z&&!I&&(v[J]=G)}}return G}},{"function-bind":211,has:217,"has-symbols":214}],213:[function(e,i,t){var n=e("get-intrinsic"),a=n("%Object.getOwnPropertyDescriptor%",!0);if(a)try{a([],"length")}catch{a=null}i.exports=a},{"get-intrinsic":212}],214:[function(e,i,t){var n=typeof Symbol<"u"&&Symbol,a=e("./shams");i.exports=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:a()}},{"./shams":215}],215:[function(e,i,t){i.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var a={},o=Symbol("test"),d=Object(o);if(typeof o=="string"||Object.prototype.toString.call(o)!=="[object Symbol]"||Object.prototype.toString.call(d)!=="[object Symbol]")return!1;var s=42;a[o]=s;for(o in a)return!1;if(typeof Object.keys=="function"&&Object.keys(a).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(a).length!==0)return!1;var u=Object.getOwnPropertySymbols(a);if(u.length!==1||u[0]!==o||!Object.prototype.propertyIsEnumerable.call(a,o))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(a,o);if(c.value!==s||c.enumerable!==!0)return!1}return!0}},{}],216:[function(e,i,t){var n=e("has-symbols/shams");i.exports=function(){return n()&&!!Symbol.toStringTag}},{"has-symbols/shams":215}],217:[function(e,i,t){var n=e("function-bind");i.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":211}],218:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("readable-stream").Transform,o=e("inherits");function d(u,c){if(!n.isBuffer(u)&&typeof u!="string")throw new TypeError(c+" must be a string or a buffer")}function s(u){a.call(this),this._block=n.allocUnsafe(u),this._blockSize=u,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}o(s,a),s.prototype._transform=function(u,c,h){var p=null;try{this.update(u,c)}catch(l){p=l}h(p)},s.prototype._flush=function(u){var c=null;try{this.push(this.digest())}catch(h){c=h}u(c)},s.prototype.update=function(u,c){if(d(u,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(u)||(u=n.from(u,c));for(var h=this._block,p=0;this._blockOffset+u.length-p>=this._blockSize;){for(var l=this._blockOffset;l<this._blockSize;)h[l++]=u[p++];this._update(),this._blockOffset=0}for(;p<u.length;)h[this._blockOffset++]=u[p++];for(var f=0,m=u.length*8;m>0;++f)this._length[f]+=m,m=this._length[f]/4294967296|0,m>0&&(this._length[f]-=4294967296*m);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(u){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var c=this._digest();u!==void 0&&(c=c.toString(u)),this._block.fill(0),this._blockOffset=0;for(var h=0;h<4;++h)this._length[h]=0;return c},s.prototype._digest=function(){throw new Error("_digest is not implemented")},i.exports=s},{inherits:233,"readable-stream":277,"safe-buffer":279}],219:[function(e,i,t){var n=t;n.utils=e("./hash/utils"),n.common=e("./hash/common"),n.sha=e("./hash/sha"),n.ripemd=e("./hash/ripemd"),n.hmac=e("./hash/hmac"),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},{"./hash/common":220,"./hash/hmac":221,"./hash/ripemd":222,"./hash/sha":223,"./hash/utils":230}],220:[function(e,i,t){var n=e("./utils"),a=e("minimalistic-assert");function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=o,o.prototype.update=function(s,u){if(s=n.toArray(s,u),this.pending?this.pending=this.pending.concat(s):this.pending=s,this.pendingTotal+=s.length,this.pending.length>=this._delta8){s=this.pending;var c=s.length%this._delta8;this.pending=s.slice(s.length-c,s.length),this.pending.length===0&&(this.pending=null),s=n.join32(s,0,s.length-c,this.endian);for(var h=0;h<s.length;h+=this._delta32)this._update(s,h,h+this._delta32)}return this},o.prototype.digest=function(s){return this.update(this._pad()),a(this.pending===null),this._digest(s)},o.prototype._pad=function(){var s=this.pendingTotal,u=this._delta8,c=u-(s+this.padLength)%u,h=new Array(c+this.padLength);h[0]=128;for(var p=1;p<c;p++)h[p]=0;if(s<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)h[p++]=0;h[p++]=0,h[p++]=0,h[p++]=0,h[p++]=0,h[p++]=s>>>24&255,h[p++]=s>>>16&255,h[p++]=s>>>8&255,h[p++]=s&255}else for(h[p++]=s&255,h[p++]=s>>>8&255,h[p++]=s>>>16&255,h[p++]=s>>>24&255,h[p++]=0,h[p++]=0,h[p++]=0,h[p++]=0,l=8;l<this.padLength;l++)h[p++]=0;return h}},{"./utils":230,"minimalistic-assert":241}],221:[function(e,i,t){var n=e("./utils"),a=e("minimalistic-assert");function o(d,s,u){if(!(this instanceof o))return new o(d,s,u);this.Hash=d,this.blockSize=d.blockSize/8,this.outSize=d.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(s,u))}i.exports=o,o.prototype._init=function(s){s.length>this.blockSize&&(s=new this.Hash().update(s).digest()),a(s.length<=this.blockSize);for(var u=s.length;u<this.blockSize;u++)s.push(0);for(u=0;u<s.length;u++)s[u]^=54;for(this.inner=new this.Hash().update(s),u=0;u<s.length;u++)s[u]^=106;this.outer=new this.Hash().update(s)},o.prototype.update=function(s,u){return this.inner.update(s,u),this},o.prototype.digest=function(s){return this.outer.update(this.inner.digest()),this.outer.digest(s)}},{"./utils":230,"minimalistic-assert":241}],222:[function(e,i,t){var n=e("./utils"),a=e("./common"),o=n.rotl32,d=n.sum32,s=n.sum32_3,u=n.sum32_4,c=a.BlockHash;function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}n.inherits(h,c),t.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(N,P){for(var M=this.h[0],L=this.h[1],$=this.h[2],H=this.h[3],Z=this.h[4],re=M,Y=L,O=$,D=H,b=Z,_=0;_<80;_++){var g=d(o(u(M,p(_,L,$,H),N[m[_]+P],l(_)),E[_]),Z);M=Z,Z=H,H=o($,10),$=L,L=g,g=d(o(u(re,p(79-_,Y,O,D),N[v[_]+P],f(_)),k[_]),b),re=b,b=D,D=o(O,10),O=Y,Y=g}g=s(this.h[1],$,D),this.h[1]=s(this.h[2],H,b),this.h[2]=s(this.h[3],Z,re),this.h[3]=s(this.h[4],M,Y),this.h[4]=s(this.h[0],L,O),this.h[0]=g},h.prototype._digest=function(N){return N==="hex"?n.toHex32(this.h,"little"):n.split32(this.h,"little")};function p(C,N,P,M){return C<=15?N^P^M:C<=31?N&P|~N&M:C<=47?(N|~P)^M:C<=63?N&M|P&~M:N^(P|~M)}function l(C){return C<=15?0:C<=31?1518500249:C<=47?1859775393:C<=63?2400959708:2840853838}function f(C){return C<=15?1352829926:C<=31?1548603684:C<=47?1836072691:C<=63?2053994217:0}var m=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],E=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],k=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":220,"./utils":230}],223:[function(e,i,t){t.sha1=e("./sha/1"),t.sha224=e("./sha/224"),t.sha256=e("./sha/256"),t.sha384=e("./sha/384"),t.sha512=e("./sha/512")},{"./sha/1":224,"./sha/224":225,"./sha/256":226,"./sha/384":227,"./sha/512":228}],224:[function(e,i,t){var n=e("../utils"),a=e("../common"),o=e("./common"),d=n.rotl32,s=n.sum32,u=n.sum32_5,c=o.ft_1,h=a.BlockHash,p=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(l,h),i.exports=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(m,v){for(var E=this.W,k=0;k<16;k++)E[k]=m[v+k];for(;k<E.length;k++)E[k]=d(E[k-3]^E[k-8]^E[k-14]^E[k-16],1);var C=this.h[0],N=this.h[1],P=this.h[2],M=this.h[3],L=this.h[4];for(k=0;k<E.length;k++){var $=~~(k/20),H=u(d(C,5),c($,N,P,M),L,E[k],p[$]);L=M,M=P,P=d(N,30),N=C,C=H}this.h[0]=s(this.h[0],C),this.h[1]=s(this.h[1],N),this.h[2]=s(this.h[2],P),this.h[3]=s(this.h[3],M),this.h[4]=s(this.h[4],L)},l.prototype._digest=function(m){return m==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":220,"../utils":230,"./common":229}],225:[function(e,i,t){var n=e("../utils"),a=e("./256");function o(){if(!(this instanceof o))return new o;a.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(o,a),i.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(s){return s==="hex"?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},{"../utils":230,"./256":226}],226:[function(e,i,t){var n=e("../utils"),a=e("../common"),o=e("./common"),d=e("minimalistic-assert"),s=n.sum32,u=n.sum32_4,c=n.sum32_5,h=o.ch32,p=o.maj32,l=o.s0_256,f=o.s1_256,m=o.g0_256,v=o.g1_256,E=a.BlockHash,k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function C(){if(!(this instanceof C))return new C;E.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=k,this.W=new Array(64)}n.inherits(C,E),i.exports=C,C.blockSize=512,C.outSize=256,C.hmacStrength=192,C.padLength=64,C.prototype._update=function(P,M){for(var L=this.W,$=0;$<16;$++)L[$]=P[M+$];for(;$<L.length;$++)L[$]=u(v(L[$-2]),L[$-7],m(L[$-15]),L[$-16]);var H=this.h[0],Z=this.h[1],re=this.h[2],Y=this.h[3],O=this.h[4],D=this.h[5],b=this.h[6],_=this.h[7];for(d(this.k.length===L.length),$=0;$<L.length;$++){var g=c(_,f(O),h(O,D,b),this.k[$],L[$]),w=s(l(H),p(H,Z,re));_=b,b=D,D=O,O=s(Y,g),Y=re,re=Z,Z=H,H=s(g,w)}this.h[0]=s(this.h[0],H),this.h[1]=s(this.h[1],Z),this.h[2]=s(this.h[2],re),this.h[3]=s(this.h[3],Y),this.h[4]=s(this.h[4],O),this.h[5]=s(this.h[5],D),this.h[6]=s(this.h[6],b),this.h[7]=s(this.h[7],_)},C.prototype._digest=function(P){return P==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":220,"../utils":230,"./common":229,"minimalistic-assert":241}],227:[function(e,i,t){var n=e("../utils"),a=e("./512");function o(){if(!(this instanceof o))return new o;a.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(o,a),i.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(s){return s==="hex"?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},{"../utils":230,"./512":228}],228:[function(e,i,t){var n=e("../utils"),a=e("../common"),o=e("minimalistic-assert"),d=n.rotr64_hi,s=n.rotr64_lo,u=n.shr64_hi,c=n.shr64_lo,h=n.sum64,p=n.sum64_hi,l=n.sum64_lo,f=n.sum64_4_hi,m=n.sum64_4_lo,v=n.sum64_5_hi,E=n.sum64_5_lo,k=a.BlockHash,C=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function N(){if(!(this instanceof N))return new N;k.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=C,this.W=new Array(160)}n.inherits(N,k),i.exports=N,N.blockSize=1024,N.outSize=512,N.hmacStrength=192,N.padLength=128,N.prototype._prepareBlock=function(w,T){for(var A=this.W,J=0;J<32;J++)A[J]=w[T+J];for(;J<A.length;J+=2){var G=b(A[J-4],A[J-3]),I=_(A[J-4],A[J-3]),V=A[J-14],x=A[J-13],z=O(A[J-30],A[J-29]),ie=D(A[J-30],A[J-29]),se=A[J-32],pe=A[J-31];A[J]=f(G,I,V,x,z,ie,se,pe),A[J+1]=m(G,I,V,x,z,ie,se,pe)}},N.prototype._update=function(w,T){this._prepareBlock(w,T);var A=this.W,J=this.h[0],G=this.h[1],I=this.h[2],V=this.h[3],x=this.h[4],z=this.h[5],ie=this.h[6],se=this.h[7],pe=this.h[8],be=this.h[9],Ee=this.h[10],oe=this.h[11],ce=this.h[12],ge=this.h[13],ke=this.h[14],fe=this.h[15];o(this.k.length===A.length);for(var ee=0;ee<A.length;ee+=2){var te=ke,Q=fe,U=re(pe,be),W=Y(pe,be),X=P(pe,be,Ee,oe,ce),de=M(pe,be,Ee,oe,ce,ge),ve=this.k[ee],Se=this.k[ee+1],he=A[ee],y=A[ee+1],F=v(te,Q,U,W,X,de,ve,Se,he,y),q=E(te,Q,U,W,X,de,ve,Se,he,y);te=H(J,G),Q=Z(J,G),U=L(J,G,I,V,x),W=$(J,G,I,V,x,z);var ue=p(te,Q,U,W),j=l(te,Q,U,W);ke=ce,fe=ge,ce=Ee,ge=oe,Ee=pe,oe=be,pe=p(ie,se,F,q),be=l(se,se,F,q),ie=x,se=z,x=I,z=V,I=J,V=G,J=p(F,q,ue,j),G=l(F,q,ue,j)}h(this.h,0,J,G),h(this.h,2,I,V),h(this.h,4,x,z),h(this.h,6,ie,se),h(this.h,8,pe,be),h(this.h,10,Ee,oe),h(this.h,12,ce,ge),h(this.h,14,ke,fe)},N.prototype._digest=function(w){return w==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")};function P(g,w,T,A,J){var G=g&T^~g&J;return G<0&&(G+=4294967296),G}function M(g,w,T,A,J,G){var I=w&A^~w&G;return I<0&&(I+=4294967296),I}function L(g,w,T,A,J){var G=g&T^g&J^T&J;return G<0&&(G+=4294967296),G}function $(g,w,T,A,J,G){var I=w&A^w&G^A&G;return I<0&&(I+=4294967296),I}function H(g,w){var T=d(g,w,28),A=d(w,g,2),J=d(w,g,7),G=T^A^J;return G<0&&(G+=4294967296),G}function Z(g,w){var T=s(g,w,28),A=s(w,g,2),J=s(w,g,7),G=T^A^J;return G<0&&(G+=4294967296),G}function re(g,w){var T=d(g,w,14),A=d(g,w,18),J=d(w,g,9),G=T^A^J;return G<0&&(G+=4294967296),G}function Y(g,w){var T=s(g,w,14),A=s(g,w,18),J=s(w,g,9),G=T^A^J;return G<0&&(G+=4294967296),G}function O(g,w){var T=d(g,w,1),A=d(g,w,8),J=u(g,w,7),G=T^A^J;return G<0&&(G+=4294967296),G}function D(g,w){var T=s(g,w,1),A=s(g,w,8),J=c(g,w,7),G=T^A^J;return G<0&&(G+=4294967296),G}function b(g,w){var T=d(g,w,19),A=d(w,g,29),J=u(g,w,6),G=T^A^J;return G<0&&(G+=4294967296),G}function _(g,w){var T=s(g,w,19),A=s(w,g,29),J=c(g,w,6),G=T^A^J;return G<0&&(G+=4294967296),G}},{"../common":220,"../utils":230,"minimalistic-assert":241}],229:[function(e,i,t){var n=e("../utils"),a=n.rotr32;function o(f,m,v,E){if(f===0)return d(m,v,E);if(f===1||f===3)return u(m,v,E);if(f===2)return s(m,v,E)}t.ft_1=o;function d(f,m,v){return f&m^~f&v}t.ch32=d;function s(f,m,v){return f&m^f&v^m&v}t.maj32=s;function u(f,m,v){return f^m^v}t.p32=u;function c(f){return a(f,2)^a(f,13)^a(f,22)}t.s0_256=c;function h(f){return a(f,6)^a(f,11)^a(f,25)}t.s1_256=h;function p(f){return a(f,7)^a(f,18)^f>>>3}t.g0_256=p;function l(f){return a(f,17)^a(f,19)^f>>>10}t.g1_256=l},{"../utils":230}],230:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits");t.inherits=a;function o(_,g){return(_.charCodeAt(g)&64512)!==55296||g<0||g+1>=_.length?!1:(_.charCodeAt(g+1)&64512)===56320}function d(_,g){if(Array.isArray(_))return _.slice();if(!_)return[];var w=[];if(typeof _=="string")if(g){if(g==="hex")for(_=_.replace(/[^a-z0-9]+/ig,""),_.length%2!==0&&(_="0"+_),A=0;A<_.length;A+=2)w.push(parseInt(_[A]+_[A+1],16))}else for(var T=0,A=0;A<_.length;A++){var J=_.charCodeAt(A);J<128?w[T++]=J:J<2048?(w[T++]=J>>6|192,w[T++]=J&63|128):o(_,A)?(J=65536+((J&1023)<<10)+(_.charCodeAt(++A)&1023),w[T++]=J>>18|240,w[T++]=J>>12&63|128,w[T++]=J>>6&63|128,w[T++]=J&63|128):(w[T++]=J>>12|224,w[T++]=J>>6&63|128,w[T++]=J&63|128)}else for(A=0;A<_.length;A++)w[A]=_[A]|0;return w}t.toArray=d;function s(_){for(var g="",w=0;w<_.length;w++)g+=h(_[w].toString(16));return g}t.toHex=s;function u(_){var g=_>>>24|_>>>8&65280|_<<8&16711680|(_&255)<<24;return g>>>0}t.htonl=u;function c(_,g){for(var w="",T=0;T<_.length;T++){var A=_[T];g==="little"&&(A=u(A)),w+=p(A.toString(16))}return w}t.toHex32=c;function h(_){return _.length===1?"0"+_:_}t.zero2=h;function p(_){return _.length===7?"0"+_:_.length===6?"00"+_:_.length===5?"000"+_:_.length===4?"0000"+_:_.length===3?"00000"+_:_.length===2?"000000"+_:_.length===1?"0000000"+_:_}t.zero8=p;function l(_,g,w,T){var A=w-g;n(A%4===0);for(var J=new Array(A/4),G=0,I=g;G<J.length;G++,I+=4){var V;T==="big"?V=_[I]<<24|_[I+1]<<16|_[I+2]<<8|_[I+3]:V=_[I+3]<<24|_[I+2]<<16|_[I+1]<<8|_[I],J[G]=V>>>0}return J}t.join32=l;function f(_,g){for(var w=new Array(_.length*4),T=0,A=0;T<_.length;T++,A+=4){var J=_[T];g==="big"?(w[A]=J>>>24,w[A+1]=J>>>16&255,w[A+2]=J>>>8&255,w[A+3]=J&255):(w[A+3]=J>>>24,w[A+2]=J>>>16&255,w[A+1]=J>>>8&255,w[A]=J&255)}return w}t.split32=f;function m(_,g){return _>>>g|_<<32-g}t.rotr32=m;function v(_,g){return _<<g|_>>>32-g}t.rotl32=v;function E(_,g){return _+g>>>0}t.sum32=E;function k(_,g,w){return _+g+w>>>0}t.sum32_3=k;function C(_,g,w,T){return _+g+w+T>>>0}t.sum32_4=C;function N(_,g,w,T,A){return _+g+w+T+A>>>0}t.sum32_5=N;function P(_,g,w,T){var A=_[g],J=_[g+1],G=T+J>>>0,I=(G<T?1:0)+w+A;_[g]=I>>>0,_[g+1]=G}t.sum64=P;function M(_,g,w,T){var A=g+T>>>0,J=(A<g?1:0)+_+w;return J>>>0}t.sum64_hi=M;function L(_,g,w,T){var A=g+T;return A>>>0}t.sum64_lo=L;function $(_,g,w,T,A,J,G,I){var V=0,x=g;x=x+T>>>0,V+=x<g?1:0,x=x+J>>>0,V+=x<J?1:0,x=x+I>>>0,V+=x<I?1:0;var z=_+w+A+G+V;return z>>>0}t.sum64_4_hi=$;function H(_,g,w,T,A,J,G,I){var V=g+T+J+I;return V>>>0}t.sum64_4_lo=H;function Z(_,g,w,T,A,J,G,I,V,x){var z=0,ie=g;ie=ie+T>>>0,z+=ie<g?1:0,ie=ie+J>>>0,z+=ie<J?1:0,ie=ie+I>>>0,z+=ie<I?1:0,ie=ie+x>>>0,z+=ie<x?1:0;var se=_+w+A+G+V+z;return se>>>0}t.sum64_5_hi=Z;function re(_,g,w,T,A,J,G,I,V,x){var z=g+T+J+I+x;return z>>>0}t.sum64_5_lo=re;function Y(_,g,w){var T=g<<32-w|_>>>w;return T>>>0}t.rotr64_hi=Y;function O(_,g,w){var T=_<<32-w|g>>>w;return T>>>0}t.rotr64_lo=O;function D(_,g,w){return _>>>w}t.shr64_hi=D;function b(_,g,w){var T=_<<32-w|g>>>w;return T>>>0}t.shr64_lo=b},{inherits:233,"minimalistic-assert":241}],231:[function(e,i,t){var n=e("hash.js"),a=e("minimalistic-crypto-utils"),o=e("minimalistic-assert");function d(s){if(!(this instanceof d))return new d(s);this.hash=s.hash,this.predResist=!!s.predResist,this.outLen=this.hash.outSize,this.minEntropy=s.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var u=a.toArray(s.entropy,s.entropyEnc||"hex"),c=a.toArray(s.nonce,s.nonceEnc||"hex"),h=a.toArray(s.pers,s.persEnc||"hex");o(u.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(u,c,h)}i.exports=d,d.prototype._init=function(u,c,h){var p=u.concat(c).concat(h);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var l=0;l<this.V.length;l++)this.K[l]=0,this.V[l]=1;this._update(p),this._reseed=1,this.reseedInterval=281474976710656},d.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},d.prototype._update=function(u){var c=this._hmac().update(this.V).update([0]);u&&(c=c.update(u)),this.K=c.digest(),this.V=this._hmac().update(this.V).digest(),u&&(this.K=this._hmac().update(this.V).update([1]).update(u).digest(),this.V=this._hmac().update(this.V).digest())},d.prototype.reseed=function(u,c,h,p){typeof c!="string"&&(p=h,h=c,c=null),u=a.toArray(u,c),h=a.toArray(h,p),o(u.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(u.concat(h||[])),this._reseed=1},d.prototype.generate=function(u,c,h,p){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof c!="string"&&(p=h,h=c,c=null),h&&(h=a.toArray(h,p||"hex"),this._update(h));for(var l=[];l.length<u;)this.V=this._hmac().update(this.V).digest(),l=l.concat(this.V);var f=l.slice(0,u);return this._update(h),this._reseed++,a.encode(f,c)}},{"hash.js":219,"minimalistic-assert":241,"minimalistic-crypto-utils":242}],232:[function(e,i,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(n,a,o,d,s){var u,c,h=s*8-d-1,p=(1<<h)-1,l=p>>1,f=-7,m=o?s-1:0,v=o?-1:1,E=n[a+m];for(m+=v,u=E&(1<<-f)-1,E>>=-f,f+=h;f>0;u=u*256+n[a+m],m+=v,f-=8);for(c=u&(1<<-f)-1,u>>=-f,f+=d;f>0;c=c*256+n[a+m],m+=v,f-=8);if(u===0)u=1-l;else{if(u===p)return c?NaN:(E?-1:1)*(1/0);c=c+Math.pow(2,d),u=u-l}return(E?-1:1)*c*Math.pow(2,u-d)},t.write=function(n,a,o,d,s,u){var c,h,p,l=u*8-s-1,f=(1<<l)-1,m=f>>1,v=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=d?0:u-1,k=d?1:-1,C=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(h=isNaN(a)?1:0,c=f):(c=Math.floor(Math.log(a)/Math.LN2),a*(p=Math.pow(2,-c))<1&&(c--,p*=2),c+m>=1?a+=v/p:a+=v*Math.pow(2,1-m),a*p>=2&&(c++,p/=2),c+m>=f?(h=0,c=f):c+m>=1?(h=(a*p-1)*Math.pow(2,s),c=c+m):(h=a*Math.pow(2,m-1)*Math.pow(2,s),c=0));s>=8;n[o+E]=h&255,E+=k,h/=256,s-=8);for(c=c<<s|h,l+=s;l>0;n[o+E]=c&255,E+=k,c/=256,l-=8);n[o+E-k]|=C*128}},{}],233:[function(e,i,t){arguments[4][47][0].apply(t,arguments)},{dup:47}],234:[function(e,i,t){var n=e("has-tostringtag/shams")(),a=e("call-bind/callBound"),o=a("Object.prototype.toString"),d=function(h){return n&&h&&typeof h=="object"&&Symbol.toStringTag in h?!1:o(h)==="[object Arguments]"},s=function(h){return d(h)?!0:h!==null&&typeof h=="object"&&typeof h.length=="number"&&h.length>=0&&o(h)!=="[object Array]"&&o(h.callee)==="[object Function]"},u=function(){return d(arguments)}();d.isLegacyArguments=s,i.exports=u?d:s},{"call-bind/callBound":172,"has-tostringtag/shams":216}],235:[function(e,i,t){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */i.exports=function(o){return o!=null&&(n(o)||a(o)||!!o._isBuffer)};function n(o){return!!o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function a(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&n(o.slice(0,0))}},{}],236:[function(e,i,t){var n=Function.prototype.toString,a=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,o,d;if(typeof a=="function"&&typeof Object.defineProperty=="function")try{o=Object.defineProperty({},"length",{get:function(){throw d}}),d={},a(function(){throw 42},null,o)}catch(M){M!==d&&(a=null)}else a=null;var s=/^\s*class\b/,u=function(L){try{var $=n.call(L);return s.test($)}catch{return!1}},c=function(L){try{return u(L)?!1:(n.call(L),!0)}catch{return!1}},h=Object.prototype.toString,p="[object Object]",l="[object Function]",f="[object GeneratorFunction]",m="[object HTMLAllCollection]",v="[object HTML document.all class]",E="[object HTMLCollection]",k=typeof Symbol=="function"&&!!Symbol.toStringTag,C=!(0 in[,]),N=function(){return!1};if(typeof document=="object"){var P=document.all;h.call(P)===h.call(document.all)&&(N=function(L){if((C||!L)&&(typeof L>"u"||typeof L=="object"))try{var $=h.call(L);return($===m||$===v||$===E||$===p)&&L("")==null}catch{}return!1})}i.exports=a?function(L){if(N(L))return!0;if(!L||typeof L!="function"&&typeof L!="object")return!1;try{a(L,null,o)}catch($){if($!==d)return!1}return!u(L)&&c(L)}:function(L){if(N(L))return!0;if(!L||typeof L!="function"&&typeof L!="object")return!1;if(k)return c(L);if(u(L))return!1;var $=h.call(L);return $!==l&&$!==f&&!/^\[object HTML/.test($)?!1:c(L)}},{}],237:[function(e,i,t){var n=Object.prototype.toString,a=Function.prototype.toString,o=/^\s*(?:function)?\*/,d=e("has-tostringtag/shams")(),s=Object.getPrototypeOf,u=function(){if(!d)return!1;try{return Function("return function*() {}")()}catch{}},c;i.exports=function(p){if(typeof p!="function")return!1;if(o.test(a.call(p)))return!0;if(!d){var l=n.call(p);return l==="[object GeneratorFunction]"}if(!s)return!1;if(typeof c>"u"){var f=u();c=f?s(f):!1}return s(p)===c}},{"has-tostringtag/shams":216}],238:[function(e,i,t){(function(n){(function(){var a=e("for-each"),o=e("available-typed-arrays"),d=e("call-bind/callBound"),s=d("Object.prototype.toString"),u=e("has-tostringtag/shams")(),c=e("gopd"),h=typeof globalThis>"u"?n:globalThis,p=o(),l=d("Array.prototype.indexOf",!0)||function(C,N){for(var P=0;P<C.length;P+=1)if(C[P]===N)return P;return-1},f=d("String.prototype.slice"),m={},v=Object.getPrototypeOf;u&&c&&v&&a(p,function(k){var C=new h[k];if(Symbol.toStringTag in C){var N=v(C),P=c(N,Symbol.toStringTag);if(!P){var M=v(N);P=c(M,Symbol.toStringTag)}m[k]=P.get}});var E=function(C){var N=!1;return a(m,function(P,M){if(!N)try{N=P.call(C)===M}catch{}}),N};i.exports=function(C){if(!C||typeof C!="object")return!1;if(!u||!(Symbol.toStringTag in C)){var N=f(s(C),8,-1);return l(p,N)>-1}return c?E(C):!1}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":137,"call-bind/callBound":172,"for-each":209,gopd:213,"has-tostringtag/shams":216}],239:[function(e,i,t){var n=e("inherits"),a=e("hash-base"),o=e("safe-buffer").Buffer,d=new Array(16);function s(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}n(s,a),s.prototype._update=function(){for(var f=d,m=0;m<16;++m)f[m]=this._block.readInt32LE(m*4);var v=this._a,E=this._b,k=this._c,C=this._d;v=c(v,E,k,C,f[0],3614090360,7),C=c(C,v,E,k,f[1],3905402710,12),k=c(k,C,v,E,f[2],606105819,17),E=c(E,k,C,v,f[3],3250441966,22),v=c(v,E,k,C,f[4],4118548399,7),C=c(C,v,E,k,f[5],1200080426,12),k=c(k,C,v,E,f[6],2821735955,17),E=c(E,k,C,v,f[7],4249261313,22),v=c(v,E,k,C,f[8],1770035416,7),C=c(C,v,E,k,f[9],2336552879,12),k=c(k,C,v,E,f[10],4294925233,17),E=c(E,k,C,v,f[11],2304563134,22),v=c(v,E,k,C,f[12],1804603682,7),C=c(C,v,E,k,f[13],4254626195,12),k=c(k,C,v,E,f[14],2792965006,17),E=c(E,k,C,v,f[15],1236535329,22),v=h(v,E,k,C,f[1],4129170786,5),C=h(C,v,E,k,f[6],3225465664,9),k=h(k,C,v,E,f[11],643717713,14),E=h(E,k,C,v,f[0],3921069994,20),v=h(v,E,k,C,f[5],3593408605,5),C=h(C,v,E,k,f[10],38016083,9),k=h(k,C,v,E,f[15],3634488961,14),E=h(E,k,C,v,f[4],3889429448,20),v=h(v,E,k,C,f[9],568446438,5),C=h(C,v,E,k,f[14],3275163606,9),k=h(k,C,v,E,f[3],4107603335,14),E=h(E,k,C,v,f[8],1163531501,20),v=h(v,E,k,C,f[13],2850285829,5),C=h(C,v,E,k,f[2],4243563512,9),k=h(k,C,v,E,f[7],1735328473,14),E=h(E,k,C,v,f[12],2368359562,20),v=p(v,E,k,C,f[5],4294588738,4),C=p(C,v,E,k,f[8],2272392833,11),k=p(k,C,v,E,f[11],1839030562,16),E=p(E,k,C,v,f[14],4259657740,23),v=p(v,E,k,C,f[1],2763975236,4),C=p(C,v,E,k,f[4],1272893353,11),k=p(k,C,v,E,f[7],4139469664,16),E=p(E,k,C,v,f[10],3200236656,23),v=p(v,E,k,C,f[13],681279174,4),C=p(C,v,E,k,f[0],3936430074,11),k=p(k,C,v,E,f[3],3572445317,16),E=p(E,k,C,v,f[6],76029189,23),v=p(v,E,k,C,f[9],3654602809,4),C=p(C,v,E,k,f[12],3873151461,11),k=p(k,C,v,E,f[15],530742520,16),E=p(E,k,C,v,f[2],3299628645,23),v=l(v,E,k,C,f[0],4096336452,6),C=l(C,v,E,k,f[7],1126891415,10),k=l(k,C,v,E,f[14],2878612391,15),E=l(E,k,C,v,f[5],4237533241,21),v=l(v,E,k,C,f[12],1700485571,6),C=l(C,v,E,k,f[3],2399980690,10),k=l(k,C,v,E,f[10],4293915773,15),E=l(E,k,C,v,f[1],2240044497,21),v=l(v,E,k,C,f[8],1873313359,6),C=l(C,v,E,k,f[15],4264355552,10),k=l(k,C,v,E,f[6],2734768916,15),E=l(E,k,C,v,f[13],1309151649,21),v=l(v,E,k,C,f[4],4149444226,6),C=l(C,v,E,k,f[11],3174756917,10),k=l(k,C,v,E,f[2],718787259,15),E=l(E,k,C,v,f[9],3951481745,21),this._a=this._a+v|0,this._b=this._b+E|0,this._c=this._c+k|0,this._d=this._d+C|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var f=o.allocUnsafe(16);return f.writeInt32LE(this._a,0),f.writeInt32LE(this._b,4),f.writeInt32LE(this._c,8),f.writeInt32LE(this._d,12),f};function u(f,m){return f<<m|f>>>32-m}function c(f,m,v,E,k,C,N){return u(f+(m&v|~m&E)+k+C|0,N)+m|0}function h(f,m,v,E,k,C,N){return u(f+(m&E|v&~E)+k+C|0,N)+m|0}function p(f,m,v,E,k,C,N){return u(f+(m^v^E)+k+C|0,N)+m|0}function l(f,m,v,E,k,C,N){return u(f+(v^(m|~E))+k+C|0,N)+m|0}i.exports=s},{"hash-base":218,inherits:233,"safe-buffer":279}],240:[function(e,i,t){var n=e("bn.js"),a=e("brorand");function o(d){this.rand=d||new a.Rand}i.exports=o,o.create=function(s){return new o(s)},o.prototype._randbelow=function(s){var u=s.bitLength(),c=Math.ceil(u/8);do var h=new n(this.rand.generate(c));while(h.cmp(s)>=0);return h},o.prototype._randrange=function(s,u){var c=u.sub(s);return s.add(this._randbelow(c))},o.prototype.test=function(s,u,c){var h=s.bitLength(),p=n.mont(s),l=new n(1).toRed(p);u||(u=Math.max(1,h/48|0));for(var f=s.subn(1),m=0;!f.testn(m);m++);for(var v=s.shrn(m),E=f.toRed(p),k=!0;u>0;u--){var C=this._randrange(new n(2),f);c&&c(C);var N=C.toRed(p).redPow(v);if(!(N.cmp(l)===0||N.cmp(E)===0)){for(var P=1;P<m;P++){if(N=N.redSqr(),N.cmp(l)===0)return!1;if(N.cmp(E)===0)break}if(P===m)return!1}}return k},o.prototype.getDivisor=function(s,u){var c=s.bitLength(),h=n.mont(s),p=new n(1).toRed(h);u||(u=Math.max(1,c/48|0));for(var l=s.subn(1),f=0;!l.testn(f);f++);for(var m=s.shrn(f),v=l.toRed(h);u>0;u--){var E=this._randrange(new n(2),l),k=s.gcd(E);if(k.cmpn(1)!==0)return k;var C=E.toRed(h).redPow(m);if(!(C.cmp(p)===0||C.cmp(v)===0)){for(var N=1;N<f;N++){if(C=C.redSqr(),C.cmp(p)===0)return C.fromRed().subn(1).gcd(s);if(C.cmp(v)===0)break}if(N===f)return C=C.redSqr(),C.fromRed().subn(1).gcd(s)}}return!1}},{"bn.js":139,brorand:141}],241:[function(e,i,t){i.exports=n;function n(a,o){if(!a)throw new Error(o||"Assertion failed")}n.equal=function(o,d,s){if(o!=d)throw new Error(s||"Assertion failed: "+o+" != "+d)}},{}],242:[function(e,i,t){var n=t;function a(s,u){if(Array.isArray(s))return s.slice();if(!s)return[];var c=[];if(typeof s!="string"){for(var h=0;h<s.length;h++)c[h]=s[h]|0;return c}if(u==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var h=0;h<s.length;h+=2)c.push(parseInt(s[h]+s[h+1],16))}else for(var h=0;h<s.length;h++){var p=s.charCodeAt(h),l=p>>8,f=p&255;l?c.push(l,f):c.push(f)}return c}n.toArray=a;function o(s){return s.length===1?"0"+s:s}n.zero2=o;function d(s){for(var u="",c=0;c<s.length;c++)u+=o(s[c].toString(16));return u}n.toHex=d,n.encode=function(u,c){return c==="hex"?d(u):u}},{}],243:[function(e,i,t){i.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],244:[function(e,i,t){var n=e("asn1.js");t.certificate=e("./certificate");var a=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});t.RSAPrivateKey=a;var o=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});t.RSAPublicKey=o;var d=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});t.PublicKey=d;var s=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),u=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});t.PrivateKey=u;var c=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});t.EncryptedPrivateKey=c;var h=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});t.DSAPrivateKey=h,t.DSAparam=n.define("DSAparam",function(){this.int()});var p=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(l),this.key("publicKey").optional().explicit(1).bitstr())});t.ECPrivateKey=p;var l=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});t.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":245,"asn1.js":123}],245:[function(e,i,t){var n=e("asn1.js"),a=n.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),o=n.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),d=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),s=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(d),this.key("subjectPublicKey").bitstr())}),u=n.define("RelativeDistinguishedName",function(){this.setof(o)}),c=n.define("RDNSequence",function(){this.seqof(u)}),h=n.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),p=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(a),this.key("notAfter").use(a))}),l=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),f=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(d),this.key("issuer").use(h),this.key("validity").use(p),this.key("subject").use(h),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(l).optional())}),m=n.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(d),this.key("signatureValue").bitstr())});i.exports=m},{"asn1.js":123}],246:[function(e,i,t){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,d=e("evp_bytestokey"),s=e("browserify-aes"),u=e("safe-buffer").Buffer;i.exports=function(c,h){var p=c.toString(),l=p.match(n),f;if(l){var v="aes"+l[1],E=u.from(l[2],"hex"),k=u.from(l[3].replace(/[\r\n]/g,""),"base64"),C=d(h,E.slice(0,8),parseInt(l[1],10)).key,N=[],P=s.createDecipheriv(v,C,E);N.push(P.update(k)),N.push(P.final()),f=u.concat(N)}else{var m=p.match(o);f=u.from(m[2].replace(/[\r\n]/g,""),"base64")}var M=p.match(a)[1];return{tag:M,data:f}}},{"browserify-aes":145,evp_bytestokey:208,"safe-buffer":279}],247:[function(e,i,t){var n=e("./asn1"),a=e("./aesid.json"),o=e("./fixProc"),d=e("browserify-aes"),s=e("pbkdf2"),u=e("safe-buffer").Buffer;i.exports=c;function c(p){var l;typeof p=="object"&&!u.isBuffer(p)&&(l=p.passphrase,p=p.key),typeof p=="string"&&(p=u.from(p));var f=o(p,l),m=f.tag,v=f.data,E,k;switch(m){case"CERTIFICATE":k=n.certificate.decode(v,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(k||(k=n.PublicKey.decode(v,"der")),E=k.algorithm.algorithm.join("."),E){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(k.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return k.subjectPrivateKey=k.subjectPublicKey,{type:"ec",data:k};case"1.2.840.10040.4.1":return k.algorithm.params.pub_key=n.DSAparam.decode(k.subjectPublicKey.data,"der"),{type:"dsa",data:k.algorithm.params};default:throw new Error("unknown key id "+E)}case"ENCRYPTED PRIVATE KEY":v=n.EncryptedPrivateKey.decode(v,"der"),v=h(v,l);case"PRIVATE KEY":switch(k=n.PrivateKey.decode(v,"der"),E=k.algorithm.algorithm.join("."),E){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(k.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:k.algorithm.curve,privateKey:n.ECPrivateKey.decode(k.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return k.algorithm.params.priv_key=n.DSAparam.decode(k.subjectPrivateKey,"der"),{type:"dsa",params:k.algorithm.params};default:throw new Error("unknown key id "+E)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(v,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(v,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(v,"der")};case"EC PRIVATE KEY":return v=n.ECPrivateKey.decode(v,"der"),{curve:v.parameters.value,privateKey:v.privateKey};default:throw new Error("unknown key type "+m)}}c.signature=n.signature;function h(p,l){var f=p.algorithm.decrypt.kde.kdeparams.salt,m=parseInt(p.algorithm.decrypt.kde.kdeparams.iters.toString(),10),v=a[p.algorithm.decrypt.cipher.algo.join(".")],E=p.algorithm.decrypt.cipher.iv,k=p.subjectPrivateKey,C=parseInt(v.split("-")[1],10)/8,N=s.pbkdf2Sync(l,f,m,C,"sha1"),P=d.createDecipheriv(v,N,E),M=[];return M.push(P.update(k)),M.push(P.final()),u.concat(M)}},{"./aesid.json":243,"./asn1":244,"./fixProc":246,"browserify-aes":145,pbkdf2:248,"safe-buffer":279}],248:[function(e,i,t){t.pbkdf2=e("./lib/async"),t.pbkdf2Sync=e("./lib/sync")},{"./lib/async":249,"./lib/sync":252}],249:[function(e,i,t){(function(n){(function(){var a=e("safe-buffer").Buffer,o=e("./precondition"),d=e("./default-encoding"),s=e("./sync"),u=e("./to-buffer"),c,h=n.crypto&&n.crypto.subtle,p={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},l=[];function f(C){if(n.process&&!n.process.browser||!h||!h.importKey||!h.deriveBits)return Promise.resolve(!1);if(l[C]!==void 0)return l[C];c=c||a.alloc(8);var N=E(c,c,10,128,C).then(function(){return!0}).catch(function(){return!1});return l[C]=N,N}var m;function v(){return m||(n.process&&n.process.nextTick?m=n.process.nextTick:n.queueMicrotask?m=n.queueMicrotask:n.setImmediate?m=n.setImmediate:m=n.setTimeout,m)}function E(C,N,P,M,L){return h.importKey("raw",C,{name:"PBKDF2"},!1,["deriveBits"]).then(function($){return h.deriveBits({name:"PBKDF2",salt:N,iterations:P,hash:{name:L}},$,M<<3)}).then(function($){return a.from($)})}function k(C,N){C.then(function(P){v()(function(){N(null,P)})},function(P){v()(function(){N(P)})})}i.exports=function(C,N,P,M,L,$){typeof L=="function"&&($=L,L=void 0),L=L||"sha1";var H=p[L.toLowerCase()];if(!H||typeof n.Promise!="function"){v()(function(){var Z;try{Z=s(C,N,P,M,L)}catch(re){return $(re)}$(null,Z)});return}if(o(P,M),C=u(C,d,"Password"),N=u(N,d,"Salt"),typeof $!="function")throw new Error("No callback provided to pbkdf2");k(f(H).then(function(Z){return Z?E(C,N,P,M,H):s(C,N,P,M,L)}),$)}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":250,"./precondition":251,"./sync":252,"./to-buffer":253,"safe-buffer":279}],250:[function(e,i,t){(function(n,a){(function(){var o;if(a.process&&a.process.browser)o="utf-8";else if(a.process&&a.process.version){var d=parseInt(n.version.split(".")[0].slice(1),10);o=d>=6?"utf-8":"binary"}else o="utf-8";i.exports=o}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:254}],251:[function(e,i,t){var n=Math.pow(2,30)-1;i.exports=function(a,o){if(typeof a!="number")throw new TypeError("Iterations not a number");if(a<0)throw new TypeError("Bad iterations");if(typeof o!="number")throw new TypeError("Key length not a number");if(o<0||o>n||o!==o)throw new TypeError("Bad key length")}},{}],252:[function(e,i,t){var n=e("create-hash/md5"),a=e("ripemd160"),o=e("sha.js"),d=e("safe-buffer").Buffer,s=e("./precondition"),u=e("./default-encoding"),c=e("./to-buffer"),h=d.alloc(128),p={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function l(v,E,k){var C=f(v),N=v==="sha512"||v==="sha384"?128:64;E.length>N?E=C(E):E.length<N&&(E=d.concat([E,h],N));for(var P=d.allocUnsafe(N+p[v]),M=d.allocUnsafe(N+p[v]),L=0;L<N;L++)P[L]=E[L]^54,M[L]=E[L]^92;var $=d.allocUnsafe(N+k+4);P.copy($,0,0,N),this.ipad1=$,this.ipad2=P,this.opad=M,this.alg=v,this.blocksize=N,this.hash=C,this.size=p[v]}l.prototype.run=function(v,E){v.copy(E,this.blocksize);var k=this.hash(E);return k.copy(this.opad,this.blocksize),this.hash(this.opad)};function f(v){function E(C){return o(v).update(C).digest()}function k(C){return new a().update(C).digest()}return v==="rmd160"||v==="ripemd160"?k:v==="md5"?n:E}function m(v,E,k,C,N){s(k,C),v=c(v,u,"Password"),E=c(E,u,"Salt"),N=N||"sha1";var P=new l(N,v,E.length),M=d.allocUnsafe(C),L=d.allocUnsafe(E.length+4);E.copy(L,0,0,E.length);for(var $=0,H=p[N],Z=Math.ceil(C/H),re=1;re<=Z;re++){L.writeUInt32BE(re,E.length);for(var Y=P.run(L,P.ipad1),O=Y,D=1;D<k;D++){O=P.run(O,P.ipad2);for(var b=0;b<H;b++)Y[b]^=O[b]}Y.copy(M,$),$+=H}return M}i.exports=m},{"./default-encoding":250,"./precondition":251,"./to-buffer":253,"create-hash/md5":177,ripemd160:278,"safe-buffer":279,"sha.js":282}],253:[function(e,i,t){var n=e("safe-buffer").Buffer;i.exports=function(a,o,d){if(n.isBuffer(a))return a;if(typeof a=="string")return n.from(a,o);if(ArrayBuffer.isView(a))return n.from(a.buffer);throw new TypeError(d+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":279}],254:[function(e,i,t){var n=i.exports={},a,o;function d(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=d}catch{a=d}try{typeof clearTimeout=="function"?o=clearTimeout:o=s}catch{o=s}})();function u(C){if(a===setTimeout)return setTimeout(C,0);if((a===d||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function c(C){if(o===clearTimeout)return clearTimeout(C);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(C);try{return o(C)}catch{try{return o.call(null,C)}catch{return o.call(this,C)}}}var h=[],p=!1,l,f=-1;function m(){!p||!l||(p=!1,l.length?h=l.concat(h):f=-1,h.length&&v())}function v(){if(!p){var C=u(m);p=!0;for(var N=h.length;N;){for(l=h,h=[];++f<N;)l&&l[f].run();f=-1,N=h.length}l=null,p=!1,c(C)}}n.nextTick=function(C){var N=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)N[P-1]=arguments[P];h.push(new E(C,N)),h.length===1&&!p&&u(v)};function E(C,N){this.fun=C,this.array=N}E.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function k(){}n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(C){return[]},n.binding=function(C){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(C){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],255:[function(e,i,t){t.publicEncrypt=e("./publicEncrypt"),t.privateDecrypt=e("./privateDecrypt"),t.privateEncrypt=function(a,o){return t.publicEncrypt(a,o,!0)},t.publicDecrypt=function(a,o){return t.privateDecrypt(a,o,!0)}},{"./privateDecrypt":257,"./publicEncrypt":258}],256:[function(e,i,t){var n=e("create-hash"),a=e("safe-buffer").Buffer;i.exports=function(d,s){for(var u=a.alloc(0),c=0,h;u.length<s;)h=o(c++),u=a.concat([u,n("sha1").update(d).update(h).digest()]);return u.slice(0,s)};function o(d){var s=a.allocUnsafe(4);return s.writeUInt32BE(d,0),s}},{"create-hash":176,"safe-buffer":279}],257:[function(e,i,t){var n=e("parse-asn1"),a=e("./mgf"),o=e("./xor"),d=e("bn.js"),s=e("browserify-rsa"),u=e("create-hash"),c=e("./withPublic"),h=e("safe-buffer").Buffer;i.exports=function(v,E,k){var C;v.padding?C=v.padding:k?C=1:C=4;var N=n(v),P=N.modulus.byteLength();if(E.length>P||new d(E).cmp(N.modulus)>=0)throw new Error("decryption error");var M;k?M=c(new d(E),N):M=s(E,N);var L=h.alloc(P-M.length);if(M=h.concat([L,M],P),C===4)return p(N,M);if(C===1)return l(N,M,k);if(C===3)return M;throw new Error("unknown padding")};function p(m,v){var E=m.modulus.byteLength(),k=u("sha1").update(h.alloc(0)).digest(),C=k.length;if(v[0]!==0)throw new Error("decryption error");var N=v.slice(1,C+1),P=v.slice(C+1),M=o(N,a(P,C)),L=o(P,a(M,E-C-1));if(f(k,L.slice(0,C)))throw new Error("decryption error");for(var $=C;L[$]===0;)$++;if(L[$++]!==1)throw new Error("decryption error");return L.slice($)}function l(m,v,E){for(var k=v.slice(0,2),C=2,N=0;v[C++]!==0;)if(C>=v.length){N++;break}var P=v.slice(2,C-1);if((k.toString("hex")!=="0002"&&!E||k.toString("hex")!=="0001"&&E)&&N++,P.length<8&&N++,N)throw new Error("decryption error");return v.slice(C)}function f(m,v){m=h.from(m),v=h.from(v);var E=0,k=m.length;m.length!==v.length&&(E++,k=Math.min(m.length,v.length));for(var C=-1;++C<k;)E+=m[C]^v[C];return E}},{"./mgf":256,"./withPublic":259,"./xor":260,"bn.js":139,"browserify-rsa":163,"create-hash":176,"parse-asn1":247,"safe-buffer":279}],258:[function(e,i,t){var n=e("parse-asn1"),a=e("randombytes"),o=e("create-hash"),d=e("./mgf"),s=e("./xor"),u=e("bn.js"),c=e("./withPublic"),h=e("browserify-rsa"),p=e("safe-buffer").Buffer;i.exports=function(E,k,C){var N;E.padding?N=E.padding:C?N=1:N=4;var P=n(E),M;if(N===4)M=l(P,k);else if(N===1)M=f(P,k,C);else if(N===3){if(M=new u(k),M.cmp(P.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return C?h(M,P):c(M,P)};function l(v,E){var k=v.modulus.byteLength(),C=E.length,N=o("sha1").update(p.alloc(0)).digest(),P=N.length,M=2*P;if(C>k-M-2)throw new Error("message too long");var L=p.alloc(k-C-M-2),$=k-P-1,H=a(P),Z=s(p.concat([N,L,p.alloc(1,1),E],$),d(H,$)),re=s(H,d(Z,P));return new u(p.concat([p.alloc(1),re,Z],k))}function f(v,E,k){var C=E.length,N=v.modulus.byteLength();if(C>N-11)throw new Error("message too long");var P;return k?P=p.alloc(N-C-3,255):P=m(N-C-3),new u(p.concat([p.from([0,k?1:2]),P,p.alloc(1),E],N))}function m(v){for(var E=p.allocUnsafe(v),k=0,C=a(v*2),N=0,P;k<v;)N===C.length&&(C=a(v*2),N=0),P=C[N++],P&&(E[k++]=P);return E}},{"./mgf":256,"./withPublic":259,"./xor":260,"bn.js":139,"browserify-rsa":163,"create-hash":176,"parse-asn1":247,randombytes:261,"safe-buffer":279}],259:[function(e,i,t){var n=e("bn.js"),a=e("safe-buffer").Buffer;function o(d,s){return a.from(d.toRed(n.mont(s.modulus)).redPow(new n(s.publicExponent)).fromRed().toArray())}i.exports=o},{"bn.js":139,"safe-buffer":279}],260:[function(e,i,t){i.exports=function(a,o){for(var d=a.length,s=-1;++s<d;)a[s]^=o[s];return a}},{}],261:[function(e,i,t){arguments[4][102][0].apply(t,arguments)},{_process:254,dup:102,"safe-buffer":279}],262:[function(e,i,t){(function(n,a){(function(){function o(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var d=e("safe-buffer"),s=e("randombytes"),u=d.Buffer,c=d.kMaxLength,h=a.crypto||a.msCrypto,p=Math.pow(2,32)-1;function l(k,C){if(typeof k!="number"||k!==k)throw new TypeError("offset must be a number");if(k>p||k<0)throw new TypeError("offset must be a uint32");if(k>c||k>C)throw new RangeError("offset out of range")}function f(k,C,N){if(typeof k!="number"||k!==k)throw new TypeError("size must be a number");if(k>p||k<0)throw new TypeError("size must be a uint32");if(k+C>N||k>c)throw new RangeError("buffer too small")}h&&h.getRandomValues||!n.browser?(t.randomFill=m,t.randomFillSync=E):(t.randomFill=o,t.randomFillSync=o);function m(k,C,N,P){if(!u.isBuffer(k)&&!(k instanceof a.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof C=="function")P=C,C=0,N=k.length;else if(typeof N=="function")P=N,N=k.length-C;else if(typeof P!="function")throw new TypeError('"cb" argument must be a function');return l(C,k.length),f(N,C,k.length),v(k,C,N,P)}function v(k,C,N,P){if(n.browser){var M=k.buffer,L=new Uint8Array(M,C,N);if(h.getRandomValues(L),P){n.nextTick(function(){P(null,k)});return}return k}if(P){s(N,function(H,Z){if(H)return P(H);Z.copy(k,C),P(null,k)});return}var $=s(N);return $.copy(k,C),k}function E(k,C,N){if(typeof C>"u"&&(C=0),!u.isBuffer(k)&&!(k instanceof a.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return l(C,k.length),N===void 0&&(N=k.length-C),f(N,C,k.length),v(k,C,N)}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:254,randombytes:261,"safe-buffer":279}],263:[function(e,i,t){arguments[4][103][0].apply(t,arguments)},{dup:103}],264:[function(e,i,t){arguments[4][104][0].apply(t,arguments)},{"./_stream_readable":266,"./_stream_writable":268,_process:254,dup:104,inherits:233}],265:[function(e,i,t){arguments[4][105][0].apply(t,arguments)},{"./_stream_transform":267,dup:105,inherits:233}],266:[function(e,i,t){arguments[4][106][0].apply(t,arguments)},{"../errors":263,"./_stream_duplex":264,"./internal/streams/async_iterator":269,"./internal/streams/buffer_list":270,"./internal/streams/destroy":271,"./internal/streams/from":273,"./internal/streams/state":275,"./internal/streams/stream":276,_process:254,buffer:171,dup:106,events:207,inherits:233,"string_decoder/":290,util:142}],267:[function(e,i,t){arguments[4][107][0].apply(t,arguments)},{"../errors":263,"./_stream_duplex":264,dup:107,inherits:233}],268:[function(e,i,t){arguments[4][108][0].apply(t,arguments)},{"../errors":263,"./_stream_duplex":264,"./internal/streams/destroy":271,"./internal/streams/state":275,"./internal/streams/stream":276,_process:254,buffer:171,dup:108,inherits:233,"util-deprecate":291}],269:[function(e,i,t){arguments[4][109][0].apply(t,arguments)},{"./end-of-stream":272,_process:254,dup:109}],270:[function(e,i,t){arguments[4][110][0].apply(t,arguments)},{buffer:171,dup:110,util:142}],271:[function(e,i,t){arguments[4][111][0].apply(t,arguments)},{_process:254,dup:111}],272:[function(e,i,t){arguments[4][112][0].apply(t,arguments)},{"../../../errors":263,dup:112}],273:[function(e,i,t){arguments[4][113][0].apply(t,arguments)},{dup:113}],274:[function(e,i,t){arguments[4][114][0].apply(t,arguments)},{"../../../errors":263,"./end-of-stream":272,dup:114}],275:[function(e,i,t){arguments[4][115][0].apply(t,arguments)},{"../../../errors":263,dup:115}],276:[function(e,i,t){arguments[4][116][0].apply(t,arguments)},{dup:116,events:207}],277:[function(e,i,t){arguments[4][117][0].apply(t,arguments)},{"./lib/_stream_duplex.js":264,"./lib/_stream_passthrough.js":265,"./lib/_stream_readable.js":266,"./lib/_stream_transform.js":267,"./lib/_stream_writable.js":268,"./lib/internal/streams/end-of-stream.js":272,"./lib/internal/streams/pipeline.js":274,dup:117}],278:[function(e,i,t){var n=e("buffer").Buffer,a=e("inherits"),o=e("hash-base"),d=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],p=[0,1518500249,1859775393,2400959708,2840853838],l=[1352829926,1548603684,1836072691,2053994217,0];function f(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}a(f,o),f.prototype._update=function(){for(var P=d,M=0;M<16;++M)P[M]=this._block.readInt32LE(M*4);for(var L=this._a|0,$=this._b|0,H=this._c|0,Z=this._d|0,re=this._e|0,Y=this._a|0,O=this._b|0,D=this._c|0,b=this._d|0,_=this._e|0,g=0;g<80;g+=1){var w,T;g<16?(w=v(L,$,H,Z,re,P[s[g]],p[0],c[g]),T=N(Y,O,D,b,_,P[u[g]],l[0],h[g])):g<32?(w=E(L,$,H,Z,re,P[s[g]],p[1],c[g]),T=C(Y,O,D,b,_,P[u[g]],l[1],h[g])):g<48?(w=k(L,$,H,Z,re,P[s[g]],p[2],c[g]),T=k(Y,O,D,b,_,P[u[g]],l[2],h[g])):g<64?(w=C(L,$,H,Z,re,P[s[g]],p[3],c[g]),T=E(Y,O,D,b,_,P[u[g]],l[3],h[g])):(w=N(L,$,H,Z,re,P[s[g]],p[4],c[g]),T=v(Y,O,D,b,_,P[u[g]],l[4],h[g])),L=re,re=Z,Z=m(H,10),H=$,$=w,Y=_,_=b,b=m(D,10),D=O,O=T}var A=this._b+H+b|0;this._b=this._c+Z+_|0,this._c=this._d+re+Y|0,this._d=this._e+L+O|0,this._e=this._a+$+D|0,this._a=A},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var P=n.alloc?n.alloc(20):new n(20);return P.writeInt32LE(this._a,0),P.writeInt32LE(this._b,4),P.writeInt32LE(this._c,8),P.writeInt32LE(this._d,12),P.writeInt32LE(this._e,16),P};function m(P,M){return P<<M|P>>>32-M}function v(P,M,L,$,H,Z,re,Y){return m(P+(M^L^$)+Z+re|0,Y)+H|0}function E(P,M,L,$,H,Z,re,Y){return m(P+(M&L|~M&$)+Z+re|0,Y)+H|0}function k(P,M,L,$,H,Z,re,Y){return m(P+((M|~L)^$)+Z+re|0,Y)+H|0}function C(P,M,L,$,H,Z,re,Y){return m(P+(M&$|L&~$)+Z+re|0,Y)+H|0}function N(P,M,L,$,H,Z,re,Y){return m(P+(M^(L|~$))+Z+re|0,Y)+H|0}i.exports=f},{buffer:171,"hash-base":218,inherits:233}],279:[function(e,i,t){arguments[4][118][0].apply(t,arguments)},{buffer:171,dup:118}],280:[function(e,i,t){(function(n){(function(){var a=e("buffer"),o=a.Buffer,d={},s;for(s in a)a.hasOwnProperty(s)&&(s==="SlowBuffer"||s==="Buffer"||(d[s]=a[s]));var u=d.Buffer={};for(s in o)o.hasOwnProperty(s)&&(s==="allocUnsafe"||s==="allocUnsafeSlow"||(u[s]=o[s]));if(d.Buffer.prototype=o.prototype,(!u.from||u.from===Uint8Array.from)&&(u.from=function(c,h,p){if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof c);if(c&&typeof c.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);return o(c,h,p)}),u.alloc||(u.alloc=function(c,h,p){if(typeof c!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof c);if(c<0||c>=2*(1<<30))throw new RangeError('The value "'+c+'" is invalid for option "size"');var l=o(c);return!h||h.length===0?l.fill(0):typeof p=="string"?l.fill(h,p):l.fill(h),l}),!d.kStringMaxLength)try{d.kStringMaxLength=n.binding("buffer").kStringMaxLength}catch{}d.constants||(d.constants={MAX_LENGTH:d.kMaxLength},d.kStringMaxLength&&(d.constants.MAX_STRING_LENGTH=d.kStringMaxLength)),i.exports=d}).call(this)}).call(this,e("_process"))},{_process:254,buffer:171}],281:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(o,d){this._block=n.alloc(o),this._finalSize=d,this._blockSize=o,this._len=0}a.prototype.update=function(o,d){typeof o=="string"&&(d=d||"utf8",o=n.from(o,d));for(var s=this._block,u=this._blockSize,c=o.length,h=this._len,p=0;p<c;){for(var l=h%u,f=Math.min(c-p,u-l),m=0;m<f;m++)s[l+m]=o[p+m];h+=f,p+=f,h%u===0&&this._update(s)}return this._len+=c,this},a.prototype.digest=function(o){var d=this._len%this._blockSize;this._block[d]=128,this._block.fill(0,d+1),d>=this._finalSize&&(this._update(this._block),this._block.fill(0));var s=this._len*8;if(s<=4294967295)this._block.writeUInt32BE(s,this._blockSize-4);else{var u=(s&4294967295)>>>0,c=(s-u)/4294967296;this._block.writeUInt32BE(c,this._blockSize-8),this._block.writeUInt32BE(u,this._blockSize-4)}this._update(this._block);var h=this._hash();return o?h.toString(o):h},a.prototype._update=function(){throw new Error("_update must be implemented by subclass")},i.exports=a},{"safe-buffer":279}],282:[function(e,i,n){var n=i.exports=function(o){o=o.toLowerCase();var d=n[o];if(!d)throw new Error(o+" is not supported (we accept pull requests)");return new d};n.sha=e("./sha"),n.sha1=e("./sha1"),n.sha224=e("./sha224"),n.sha256=e("./sha256"),n.sha384=e("./sha384"),n.sha512=e("./sha512")},{"./sha":283,"./sha1":284,"./sha224":285,"./sha256":286,"./sha384":287,"./sha512":288}],283:[function(e,i,t){var n=e("inherits"),a=e("./hash"),o=e("safe-buffer").Buffer,d=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,a.call(this,64,56)}n(u,a),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function c(l){return l<<5|l>>>27}function h(l){return l<<30|l>>>2}function p(l,f,m,v){return l===0?f&m|~f&v:l===2?f&m|f&v|m&v:f^m^v}u.prototype._update=function(l){for(var f=this._w,m=this._a|0,v=this._b|0,E=this._c|0,k=this._d|0,C=this._e|0,N=0;N<16;++N)f[N]=l.readInt32BE(N*4);for(;N<80;++N)f[N]=f[N-3]^f[N-8]^f[N-14]^f[N-16];for(var P=0;P<80;++P){var M=~~(P/20),L=c(m)+p(M,v,E,k)+C+f[P]+d[M]|0;C=k,k=E,E=h(v),v=m,m=L}this._a=m+this._a|0,this._b=v+this._b|0,this._c=E+this._c|0,this._d=k+this._d|0,this._e=C+this._e|0},u.prototype._hash=function(){var l=o.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},i.exports=u},{"./hash":281,inherits:233,"safe-buffer":279}],284:[function(e,i,t){var n=e("inherits"),a=e("./hash"),o=e("safe-buffer").Buffer,d=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,a.call(this,64,56)}n(u,a),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function c(f){return f<<1|f>>>31}function h(f){return f<<5|f>>>27}function p(f){return f<<30|f>>>2}function l(f,m,v,E){return f===0?m&v|~m&E:f===2?m&v|m&E|v&E:m^v^E}u.prototype._update=function(f){for(var m=this._w,v=this._a|0,E=this._b|0,k=this._c|0,C=this._d|0,N=this._e|0,P=0;P<16;++P)m[P]=f.readInt32BE(P*4);for(;P<80;++P)m[P]=c(m[P-3]^m[P-8]^m[P-14]^m[P-16]);for(var M=0;M<80;++M){var L=~~(M/20),$=h(v)+l(L,E,k,C)+N+m[M]+d[L]|0;N=C,C=k,k=p(E),E=v,v=$}this._a=v+this._a|0,this._b=E+this._b|0,this._c=k+this._c|0,this._d=C+this._d|0,this._e=N+this._e|0},u.prototype._hash=function(){var f=o.allocUnsafe(20);return f.writeInt32BE(this._a|0,0),f.writeInt32BE(this._b|0,4),f.writeInt32BE(this._c|0,8),f.writeInt32BE(this._d|0,12),f.writeInt32BE(this._e|0,16),f},i.exports=u},{"./hash":281,inherits:233,"safe-buffer":279}],285:[function(e,i,t){var n=e("inherits"),a=e("./sha256"),o=e("./hash"),d=e("safe-buffer").Buffer,s=new Array(64);function u(){this.init(),this._w=s,o.call(this,64,56)}n(u,a),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var c=d.allocUnsafe(28);return c.writeInt32BE(this._a,0),c.writeInt32BE(this._b,4),c.writeInt32BE(this._c,8),c.writeInt32BE(this._d,12),c.writeInt32BE(this._e,16),c.writeInt32BE(this._f,20),c.writeInt32BE(this._g,24),c},i.exports=u},{"./hash":281,"./sha256":286,inherits:233,"safe-buffer":279}],286:[function(e,i,t){var n=e("inherits"),a=e("./hash"),o=e("safe-buffer").Buffer,d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,a.call(this,64,56)}n(u,a),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function c(v,E,k){return k^v&(E^k)}function h(v,E,k){return v&E|k&(v|E)}function p(v){return(v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10)}function l(v){return(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7)}function f(v){return(v>>>7|v<<25)^(v>>>18|v<<14)^v>>>3}function m(v){return(v>>>17|v<<15)^(v>>>19|v<<13)^v>>>10}u.prototype._update=function(v){for(var E=this._w,k=this._a|0,C=this._b|0,N=this._c|0,P=this._d|0,M=this._e|0,L=this._f|0,$=this._g|0,H=this._h|0,Z=0;Z<16;++Z)E[Z]=v.readInt32BE(Z*4);for(;Z<64;++Z)E[Z]=m(E[Z-2])+E[Z-7]+f(E[Z-15])+E[Z-16]|0;for(var re=0;re<64;++re){var Y=H+l(M)+c(M,L,$)+d[re]+E[re]|0,O=p(k)+h(k,C,N)|0;H=$,$=L,L=M,M=P+Y|0,P=N,N=C,C=k,k=Y+O|0}this._a=k+this._a|0,this._b=C+this._b|0,this._c=N+this._c|0,this._d=P+this._d|0,this._e=M+this._e|0,this._f=L+this._f|0,this._g=$+this._g|0,this._h=H+this._h|0},u.prototype._hash=function(){var v=o.allocUnsafe(32);return v.writeInt32BE(this._a,0),v.writeInt32BE(this._b,4),v.writeInt32BE(this._c,8),v.writeInt32BE(this._d,12),v.writeInt32BE(this._e,16),v.writeInt32BE(this._f,20),v.writeInt32BE(this._g,24),v.writeInt32BE(this._h,28),v},i.exports=u},{"./hash":281,inherits:233,"safe-buffer":279}],287:[function(e,i,t){var n=e("inherits"),a=e("./sha512"),o=e("./hash"),d=e("safe-buffer").Buffer,s=new Array(160);function u(){this.init(),this._w=s,o.call(this,128,112)}n(u,a),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var c=d.allocUnsafe(48);function h(p,l,f){c.writeInt32BE(p,f),c.writeInt32BE(l,f+4)}return h(this._ah,this._al,0),h(this._bh,this._bl,8),h(this._ch,this._cl,16),h(this._dh,this._dl,24),h(this._eh,this._el,32),h(this._fh,this._fl,40),c},i.exports=u},{"./hash":281,"./sha512":288,inherits:233,"safe-buffer":279}],288:[function(e,i,t){var n=e("inherits"),a=e("./hash"),o=e("safe-buffer").Buffer,d=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,a.call(this,128,112)}n(u,a),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function c(C,N,P){return P^C&(N^P)}function h(C,N,P){return C&N|P&(C|N)}function p(C,N){return(C>>>28|N<<4)^(N>>>2|C<<30)^(N>>>7|C<<25)}function l(C,N){return(C>>>14|N<<18)^(C>>>18|N<<14)^(N>>>9|C<<23)}function f(C,N){return(C>>>1|N<<31)^(C>>>8|N<<24)^C>>>7}function m(C,N){return(C>>>1|N<<31)^(C>>>8|N<<24)^(C>>>7|N<<25)}function v(C,N){return(C>>>19|N<<13)^(N>>>29|C<<3)^C>>>6}function E(C,N){return(C>>>19|N<<13)^(N>>>29|C<<3)^(C>>>6|N<<26)}function k(C,N){return C>>>0<N>>>0?1:0}u.prototype._update=function(C){for(var N=this._w,P=this._ah|0,M=this._bh|0,L=this._ch|0,$=this._dh|0,H=this._eh|0,Z=this._fh|0,re=this._gh|0,Y=this._hh|0,O=this._al|0,D=this._bl|0,b=this._cl|0,_=this._dl|0,g=this._el|0,w=this._fl|0,T=this._gl|0,A=this._hl|0,J=0;J<32;J+=2)N[J]=C.readInt32BE(J*4),N[J+1]=C.readInt32BE(J*4+4);for(;J<160;J+=2){var G=N[J-30],I=N[J-15*2+1],V=f(G,I),x=m(I,G);G=N[J-2*2],I=N[J-2*2+1];var z=v(G,I),ie=E(I,G),se=N[J-7*2],pe=N[J-7*2+1],be=N[J-16*2],Ee=N[J-16*2+1],oe=x+pe|0,ce=V+se+k(oe,x)|0;oe=oe+ie|0,ce=ce+z+k(oe,ie)|0,oe=oe+Ee|0,ce=ce+be+k(oe,Ee)|0,N[J]=ce,N[J+1]=oe}for(var ge=0;ge<160;ge+=2){ce=N[ge],oe=N[ge+1];var ke=h(P,M,L),fe=h(O,D,b),ee=p(P,O),te=p(O,P),Q=l(H,g),U=l(g,H),W=d[ge],X=d[ge+1],de=c(H,Z,re),ve=c(g,w,T),Se=A+U|0,he=Y+Q+k(Se,A)|0;Se=Se+ve|0,he=he+de+k(Se,ve)|0,Se=Se+X|0,he=he+W+k(Se,X)|0,Se=Se+oe|0,he=he+ce+k(Se,oe)|0;var y=te+fe|0,F=ee+ke+k(y,te)|0;Y=re,A=T,re=Z,T=w,Z=H,w=g,g=_+Se|0,H=$+he+k(g,_)|0,$=L,_=b,L=M,b=D,M=P,D=O,O=Se+y|0,P=he+F+k(O,Se)|0}this._al=this._al+O|0,this._bl=this._bl+D|0,this._cl=this._cl+b|0,this._dl=this._dl+_|0,this._el=this._el+g|0,this._fl=this._fl+w|0,this._gl=this._gl+T|0,this._hl=this._hl+A|0,this._ah=this._ah+P+k(this._al,O)|0,this._bh=this._bh+M+k(this._bl,D)|0,this._ch=this._ch+L+k(this._cl,b)|0,this._dh=this._dh+$+k(this._dl,_)|0,this._eh=this._eh+H+k(this._el,g)|0,this._fh=this._fh+Z+k(this._fl,w)|0,this._gh=this._gh+re+k(this._gl,T)|0,this._hh=this._hh+Y+k(this._hl,A)|0},u.prototype._hash=function(){var C=o.allocUnsafe(64);function N(P,M,L){C.writeInt32BE(P,L),C.writeInt32BE(M,L+4)}return N(this._ah,this._al,0),N(this._bh,this._bl,8),N(this._ch,this._cl,16),N(this._dh,this._dl,24),N(this._eh,this._el,32),N(this._fh,this._fl,40),N(this._gh,this._gl,48),N(this._hh,this._hl,56),C},i.exports=u},{"./hash":281,inherits:233,"safe-buffer":279}],289:[function(e,i,t){i.exports=o;var n=e("events").EventEmitter,a=e("inherits");a(o,n),o.Readable=e("readable-stream/lib/_stream_readable.js"),o.Writable=e("readable-stream/lib/_stream_writable.js"),o.Duplex=e("readable-stream/lib/_stream_duplex.js"),o.Transform=e("readable-stream/lib/_stream_transform.js"),o.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),o.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),o.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),o.Stream=o;function o(){n.call(this)}o.prototype.pipe=function(d,s){var u=this;function c(E){d.writable&&d.write(E)===!1&&u.pause&&u.pause()}u.on("data",c);function h(){u.readable&&u.resume&&u.resume()}d.on("drain",h),!d._isStdio&&(!s||s.end!==!1)&&(u.on("end",l),u.on("close",f));var p=!1;function l(){p||(p=!0,d.end())}function f(){p||(p=!0,typeof d.destroy=="function"&&d.destroy())}function m(E){if(v(),n.listenerCount(this,"error")===0)throw E}u.on("error",m),d.on("error",m);function v(){u.removeListener("data",c),d.removeListener("drain",h),u.removeListener("end",l),u.removeListener("close",f),u.removeListener("error",m),d.removeListener("error",m),u.removeListener("end",v),u.removeListener("close",v),d.removeListener("close",v)}return u.on("end",v),u.on("close",v),d.on("close",v),d.emit("pipe",u),d}},{events:207,inherits:233,"readable-stream/lib/_stream_duplex.js":264,"readable-stream/lib/_stream_passthrough.js":265,"readable-stream/lib/_stream_readable.js":266,"readable-stream/lib/_stream_transform.js":267,"readable-stream/lib/_stream_writable.js":268,"readable-stream/lib/internal/streams/end-of-stream.js":272,"readable-stream/lib/internal/streams/pipeline.js":274}],290:[function(e,i,t){arguments[4][121][0].apply(t,arguments)},{dup:121,"safe-buffer":279}],291:[function(e,i,t){arguments[4][122][0].apply(t,arguments)},{dup:122}],292:[function(e,i,t){i.exports=function(a){return a&&typeof a=="object"&&typeof a.copy=="function"&&typeof a.fill=="function"&&typeof a.readUInt8=="function"}},{}],293:[function(e,i,t){var n=e("is-arguments"),a=e("is-generator-function"),o=e("which-typed-array"),d=e("is-typed-array");function s(X){return X.call.bind(X)}var u=typeof BigInt<"u",c=typeof Symbol<"u",h=s(Object.prototype.toString),p=s(Number.prototype.valueOf),l=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(u)var m=s(BigInt.prototype.valueOf);if(c)var v=s(Symbol.prototype.valueOf);function E(X,de){if(typeof X!="object")return!1;try{return de(X),!0}catch{return!1}}t.isArgumentsObject=n,t.isGeneratorFunction=a,t.isTypedArray=d;function k(X){return typeof Promise<"u"&&X instanceof Promise||X!==null&&typeof X=="object"&&typeof X.then=="function"&&typeof X.catch=="function"}t.isPromise=k;function C(X){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(X):d(X)||z(X)}t.isArrayBufferView=C;function N(X){return o(X)==="Uint8Array"}t.isUint8Array=N;function P(X){return o(X)==="Uint8ClampedArray"}t.isUint8ClampedArray=P;function M(X){return o(X)==="Uint16Array"}t.isUint16Array=M;function L(X){return o(X)==="Uint32Array"}t.isUint32Array=L;function $(X){return o(X)==="Int8Array"}t.isInt8Array=$;function H(X){return o(X)==="Int16Array"}t.isInt16Array=H;function Z(X){return o(X)==="Int32Array"}t.isInt32Array=Z;function re(X){return o(X)==="Float32Array"}t.isFloat32Array=re;function Y(X){return o(X)==="Float64Array"}t.isFloat64Array=Y;function O(X){return o(X)==="BigInt64Array"}t.isBigInt64Array=O;function D(X){return o(X)==="BigUint64Array"}t.isBigUint64Array=D;function b(X){return h(X)==="[object Map]"}b.working=typeof Map<"u"&&b(new Map);function _(X){return typeof Map>"u"?!1:b.working?b(X):X instanceof Map}t.isMap=_;function g(X){return h(X)==="[object Set]"}g.working=typeof Set<"u"&&g(new Set);function w(X){return typeof Set>"u"?!1:g.working?g(X):X instanceof Set}t.isSet=w;function T(X){return h(X)==="[object WeakMap]"}T.working=typeof WeakMap<"u"&&T(new WeakMap);function A(X){return typeof WeakMap>"u"?!1:T.working?T(X):X instanceof WeakMap}t.isWeakMap=A;function J(X){return h(X)==="[object WeakSet]"}J.working=typeof WeakSet<"u"&&J(new WeakSet);function G(X){return J(X)}t.isWeakSet=G;function I(X){return h(X)==="[object ArrayBuffer]"}I.working=typeof ArrayBuffer<"u"&&I(new ArrayBuffer);function V(X){return typeof ArrayBuffer>"u"?!1:I.working?I(X):X instanceof ArrayBuffer}t.isArrayBuffer=V;function x(X){return h(X)==="[object DataView]"}x.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&x(new DataView(new ArrayBuffer(1),0,1));function z(X){return typeof DataView>"u"?!1:x.working?x(X):X instanceof DataView}t.isDataView=z;var ie=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function se(X){return h(X)==="[object SharedArrayBuffer]"}function pe(X){return typeof ie>"u"?!1:(typeof se.working>"u"&&(se.working=se(new ie)),se.working?se(X):X instanceof ie)}t.isSharedArrayBuffer=pe;function be(X){return h(X)==="[object AsyncFunction]"}t.isAsyncFunction=be;function Ee(X){return h(X)==="[object Map Iterator]"}t.isMapIterator=Ee;function oe(X){return h(X)==="[object Set Iterator]"}t.isSetIterator=oe;function ce(X){return h(X)==="[object Generator]"}t.isGeneratorObject=ce;function ge(X){return h(X)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=ge;function ke(X){return E(X,p)}t.isNumberObject=ke;function fe(X){return E(X,l)}t.isStringObject=fe;function ee(X){return E(X,f)}t.isBooleanObject=ee;function te(X){return u&&E(X,m)}t.isBigIntObject=te;function Q(X){return c&&E(X,v)}t.isSymbolObject=Q;function U(X){return ke(X)||fe(X)||ee(X)||te(X)||Q(X)}t.isBoxedPrimitive=U;function W(X){return typeof Uint8Array<"u"&&(V(X)||pe(X))}t.isAnyArrayBuffer=W,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(X){Object.defineProperty(t,X,{enumerable:!1,value:function(){throw new Error(X+" is not supported in userland")}})})},{"is-arguments":234,"is-generator-function":237,"is-typed-array":238,"which-typed-array":295}],294:[function(e,i,t){(function(n){(function(){var a=Object.getOwnPropertyDescriptors||function(ie){for(var se=Object.keys(ie),pe={},be=0;be<se.length;be++)pe[se[be]]=Object.getOwnPropertyDescriptor(ie,se[be]);return pe},o=/%[sdj%]/g;t.format=function(z){if(!H(z)){for(var ie=[],se=0;se<arguments.length;se++)ie.push(c(arguments[se]));return ie.join(" ")}for(var se=1,pe=arguments,be=pe.length,Ee=String(z).replace(o,function(ce){if(ce==="%%")return"%";if(se>=be)return ce;switch(ce){case"%s":return String(pe[se++]);case"%d":return Number(pe[se++]);case"%j":try{return JSON.stringify(pe[se++])}catch{return"[Circular]"}default:return ce}}),oe=pe[se];se<be;oe=pe[++se])M(oe)||!O(oe)?Ee+=" "+oe:Ee+=" "+c(oe);return Ee},t.deprecate=function(z,ie){if(typeof n<"u"&&n.noDeprecation===!0)return z;if(typeof n>"u")return function(){return t.deprecate(z,ie).apply(this,arguments)};var se=!1;function pe(){if(!se){if(n.throwDeprecation)throw new Error(ie);n.traceDeprecation?console.trace(ie):console.error(ie),se=!0}return z.apply(this,arguments)}return pe};var d={},s=/^$/;if({}.NODE_DEBUG){var u={}.NODE_DEBUG;u=u.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),s=new RegExp("^"+u+"$","i")}t.debuglog=function(z){if(z=z.toUpperCase(),!d[z])if(s.test(z)){var ie=n.pid;d[z]=function(){var se=t.format.apply(t,arguments);console.error("%s %d: %s",z,ie,se)}}else d[z]=function(){};return d[z]};function c(z,ie){var se={seen:[],stylize:p};return arguments.length>=3&&(se.depth=arguments[2]),arguments.length>=4&&(se.colors=arguments[3]),P(ie)?se.showHidden=ie:ie&&t._extend(se,ie),re(se.showHidden)&&(se.showHidden=!1),re(se.depth)&&(se.depth=2),re(se.colors)&&(se.colors=!1),re(se.customInspect)&&(se.customInspect=!0),se.colors&&(se.stylize=h),f(se,z,se.depth)}t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function h(z,ie){var se=c.styles[ie];return se?"\x1B["+c.colors[se][0]+"m"+z+"\x1B["+c.colors[se][1]+"m":z}function p(z,ie){return z}function l(z){var ie={};return z.forEach(function(se,pe){ie[se]=!0}),ie}function f(z,ie,se){if(z.customInspect&&ie&&_(ie.inspect)&&ie.inspect!==t.inspect&&!(ie.constructor&&ie.constructor.prototype===ie)){var pe=ie.inspect(se,z);return H(pe)||(pe=f(z,pe,se)),pe}var be=m(z,ie);if(be)return be;var Ee=Object.keys(ie),oe=l(Ee);if(z.showHidden&&(Ee=Object.getOwnPropertyNames(ie)),b(ie)&&(Ee.indexOf("message")>=0||Ee.indexOf("description")>=0))return v(ie);if(Ee.length===0){if(_(ie)){var ce=ie.name?": "+ie.name:"";return z.stylize("[Function"+ce+"]","special")}if(Y(ie))return z.stylize(RegExp.prototype.toString.call(ie),"regexp");if(D(ie))return z.stylize(Date.prototype.toString.call(ie),"date");if(b(ie))return v(ie)}var ge="",ke=!1,fe=["{","}"];if(N(ie)&&(ke=!0,fe=["[","]"]),_(ie)){var ee=ie.name?": "+ie.name:"";ge=" [Function"+ee+"]"}if(Y(ie)&&(ge=" "+RegExp.prototype.toString.call(ie)),D(ie)&&(ge=" "+Date.prototype.toUTCString.call(ie)),b(ie)&&(ge=" "+v(ie)),Ee.length===0&&(!ke||ie.length==0))return fe[0]+ge+fe[1];if(se<0)return Y(ie)?z.stylize(RegExp.prototype.toString.call(ie),"regexp"):z.stylize("[Object]","special");z.seen.push(ie);var te;return ke?te=E(z,ie,se,oe,Ee):te=Ee.map(function(Q){return k(z,ie,se,oe,Q,ke)}),z.seen.pop(),C(te,ge,fe)}function m(z,ie){if(re(ie))return z.stylize("undefined","undefined");if(H(ie)){var se="'"+JSON.stringify(ie).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(se,"string")}if($(ie))return z.stylize(""+ie,"number");if(P(ie))return z.stylize(""+ie,"boolean");if(M(ie))return z.stylize("null","null")}function v(z){return"["+Error.prototype.toString.call(z)+"]"}function E(z,ie,se,pe,be){for(var Ee=[],oe=0,ce=ie.length;oe<ce;++oe)G(ie,String(oe))?Ee.push(k(z,ie,se,pe,String(oe),!0)):Ee.push("");return be.forEach(function(ge){ge.match(/^\d+$/)||Ee.push(k(z,ie,se,pe,ge,!0))}),Ee}function k(z,ie,se,pe,be,Ee){var oe,ce,ge;if(ge=Object.getOwnPropertyDescriptor(ie,be)||{value:ie[be]},ge.get?ge.set?ce=z.stylize("[Getter/Setter]","special"):ce=z.stylize("[Getter]","special"):ge.set&&(ce=z.stylize("[Setter]","special")),G(pe,be)||(oe="["+be+"]"),ce||(z.seen.indexOf(ge.value)<0?(M(se)?ce=f(z,ge.value,null):ce=f(z,ge.value,se-1),ce.indexOf(`
`)>-1&&(Ee?ce=ce.split(`
`).map(function(ke){return"  "+ke}).join(`
`).slice(2):ce=`
`+ce.split(`
`).map(function(ke){return"   "+ke}).join(`
`))):ce=z.stylize("[Circular]","special")),re(oe)){if(Ee&&be.match(/^\d+$/))return ce;oe=JSON.stringify(""+be),oe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(oe=oe.slice(1,-1),oe=z.stylize(oe,"name")):(oe=oe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),oe=z.stylize(oe,"string"))}return oe+": "+ce}function C(z,ie,se){var pe=z.reduce(function(be,Ee){return Ee.indexOf(`
`)>=0,be+Ee.replace(/\u001b\[\d\d?m/g,"").length+1},0);return pe>60?se[0]+(ie===""?"":ie+`
 `)+" "+z.join(`,
  `)+" "+se[1]:se[0]+ie+" "+z.join(", ")+" "+se[1]}t.types=e("./support/types");function N(z){return Array.isArray(z)}t.isArray=N;function P(z){return typeof z=="boolean"}t.isBoolean=P;function M(z){return z===null}t.isNull=M;function L(z){return z==null}t.isNullOrUndefined=L;function $(z){return typeof z=="number"}t.isNumber=$;function H(z){return typeof z=="string"}t.isString=H;function Z(z){return typeof z=="symbol"}t.isSymbol=Z;function re(z){return z===void 0}t.isUndefined=re;function Y(z){return O(z)&&w(z)==="[object RegExp]"}t.isRegExp=Y,t.types.isRegExp=Y;function O(z){return typeof z=="object"&&z!==null}t.isObject=O;function D(z){return O(z)&&w(z)==="[object Date]"}t.isDate=D,t.types.isDate=D;function b(z){return O(z)&&(w(z)==="[object Error]"||z instanceof Error)}t.isError=b,t.types.isNativeError=b;function _(z){return typeof z=="function"}t.isFunction=_;function g(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}t.isPrimitive=g,t.isBuffer=e("./support/isBuffer");function w(z){return Object.prototype.toString.call(z)}function T(z){return z<10?"0"+z.toString(10):z.toString(10)}var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function J(){var z=new Date,ie=[T(z.getHours()),T(z.getMinutes()),T(z.getSeconds())].join(":");return[z.getDate(),A[z.getMonth()],ie].join(" ")}t.log=function(){console.log("%s - %s",J(),t.format.apply(t,arguments))},t.inherits=e("inherits"),t._extend=function(z,ie){if(!ie||!O(ie))return z;for(var se=Object.keys(ie),pe=se.length;pe--;)z[se[pe]]=ie[se[pe]];return z};function G(z,ie){return Object.prototype.hasOwnProperty.call(z,ie)}var I=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(ie){if(typeof ie!="function")throw new TypeError('The "original" argument must be of type Function');if(I&&ie[I]){var se=ie[I];if(typeof se!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(se,I,{value:se,enumerable:!1,writable:!1,configurable:!0}),se}function se(){for(var pe,be,Ee=new Promise(function(ge,ke){pe=ge,be=ke}),oe=[],ce=0;ce<arguments.length;ce++)oe.push(arguments[ce]);oe.push(function(ge,ke){ge?be(ge):pe(ke)});try{ie.apply(this,oe)}catch(ge){be(ge)}return Ee}return Object.setPrototypeOf(se,Object.getPrototypeOf(ie)),I&&Object.defineProperty(se,I,{value:se,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(se,a(ie))},t.promisify.custom=I;function V(z,ie){if(!z){var se=new Error("Promise was rejected with a falsy value");se.reason=z,z=se}return ie(z)}function x(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function ie(){for(var se=[],pe=0;pe<arguments.length;pe++)se.push(arguments[pe]);var be=se.pop();if(typeof be!="function")throw new TypeError("The last argument must be of type Function");var Ee=this,oe=function(){return be.apply(Ee,arguments)};z.apply(this,se).then(function(ce){n.nextTick(oe.bind(null,null,ce))},function(ce){n.nextTick(V.bind(null,ce,oe))})}return Object.setPrototypeOf(ie,Object.getPrototypeOf(z)),Object.defineProperties(ie,a(z)),ie}t.callbackify=x}).call(this)}).call(this,e("_process"))},{"./support/isBuffer":292,"./support/types":293,_process:254,inherits:233}],295:[function(e,i,t){(function(n){(function(){var a=e("for-each"),o=e("available-typed-arrays"),d=e("call-bind/callBound"),s=e("gopd"),u=d("Object.prototype.toString"),c=e("has-tostringtag/shams")(),h=typeof globalThis>"u"?n:globalThis,p=o(),l=d("String.prototype.slice"),f={},m=Object.getPrototypeOf;c&&s&&m&&a(p,function(k){if(typeof h[k]=="function"){var C=new h[k];if(Symbol.toStringTag in C){var N=m(C),P=s(N,Symbol.toStringTag);if(!P){var M=m(N);P=s(M,Symbol.toStringTag)}f[k]=P.get}}});var v=function(C){var N=!1;return a(f,function(P,M){if(!N)try{var L=P.call(C);L===M&&(N=L)}catch{}}),N},E=e("is-typed-array");i.exports=function(C){return E(C)?!c||!(Symbol.toStringTag in C)?l(u(C),8,-1):v(C):!1}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":137,"call-bind/callBound":172,"for-each":209,gopd:213,"has-tostringtag/shams":216,"is-typed-array":238}]},{},[1])(1)});const AccessToken=globalThis.livekitServerSDK.AccessToken;function getPublisherAccessToken(e,i,t){const n=new AccessToken(e,i,{identity:t,ttl:86400});return n.addGrant({room:t,roomJoin:!0,roomCreate:!0,roomAdmin:!0,roomList:!0,canPublish:!0,canSubscribe:!1,canPublishData:!0}),n.toJwt()}function getFrontendAccessToken(e,i,t,n){const a=new AccessToken(e,i,{identity:n,name:n,ttl:21600});return a.addGrant({room:t,roomList:!0,roomJoin:!0,canPublish:!0,canSubscribe:!0,canPublishData:!0}),a.toJwt()}const SimplePeer=globalThis.SimplePeer;class SimplePeerConnection{constructor(i,t,n){ut(this,"p");ut(this,"msgSendQueue",[]);ut(this,"onMesssageRecived");ut(this,"onConnStateChange");ut(this,"onOutgoingSignalMsg");this.onMesssageRecived=a=>i(a),this.onConnStateChange=a=>t(a),this.onOutgoingSignalMsg=a=>n(a)}async start(i){this.p=new SimplePeer(i),this.p.on("signal",t=>{console.log("SIMPLEPEER sendSignallingMsgCallback: ",t),this.onOutgoingSignalMsg(ENCODE_TXT(JSON.stringify(t)))}),this.p.on("connect",()=>{this._emptyMsgQueue()}),this.p.on("data",t=>{console.log("SIMPLEPEER: got a dc message: ",t)}),this.p.on("stream",t=>{console.info("SIMPLEPEER: got video stream: ",t);var n=document.getElementById("direct_video");"srcObject"in n?n.srcObject=t:n.src=window.URL.createObjectURL(t),n.play()})}sendMessage(i){this.msgSendQueue.push(i),this._emptyMsgQueue()}_emptyMsgQueue(){if(!this.p||!this.p.connected)return!1;const i=this.msgSendQueue.length;for(let t=0;t<i;t++)this.p.send(this.msgSendQueue[t])}handleSignalingMsg(i){let t="";try{t=DECODE_TXT(i);const n=JSON.parse(t);this.p.signal(n)}catch(n){console.warn("failed to parse signalling message: ",t,n.message)}}}let simplePeerPub=null;const initSimplePeerPublisher=e=>(simplePeerPub=new SimplePeerConnection(handleBackendMsgRcvd,i=>console.log("SIMPLEPEER new conn state:",i),i=>{sendLivekitMessage(new Uint8Array(i))}),simplePeerPub.start({initiator:!1,trickle:!1,streams:[e]}),simplePeerPub),sendSignalingDataToSimplePeerPublisher=e=>{simplePeerPub&&simplePeerPub.handleSignalingMsg(e)};function handleBackendMsgRcvd(e){let i=new Uint8Array(e);!i||i.length===0||(console.log("GOT DC DATA:",i),sendSignalingDataToSimplePeerPublisher(i))}async function createLivekitRoom(e,i){return await e.createRoom({name:i,maxParticipants:12,emptyTimeout:30})}async function updateLivekitRoomMetadata(e,i,t){return await e.updateRoomMetadata(i,t)}async function listLivekitRooms(e){return(await e.listRooms()).filter(t=>t.numParticipants>0)}async function refreshMetadata(e,i){const t=getFrontendAccessToken(i.CloudAPIKey,i.CloudSecretKey,i.RovRoomName,"PERSON"+Date.now().toString());await updateLivekitRoomMetadata(e,i.RovRoomName,JSON.stringify({accessToken:t}))}const RoomServiceClient=globalThis.livekitServerSDK.RoomServiceClient;class LivekitPublisherConnection{constructor(i,t,n){ut(this,"roomId");ut(this,"hostUrl");ut(this,"accessToken");ut(this,"roomConn");ut(this,"videoElem");ut(this,"onMesssageRecived");ut(this,"onConnStateChange");this.hostUrl=i,this.onMesssageRecived=a=>t(a,this.roomId,this.hostUrl),this.onConnStateChange=a=>n(a,this.roomId,this.hostUrl),this.roomConn=new Room({reconnectPolicy:new DefaultReconnectPolicy,dynacast:!0,videoCaptureDefaults:{resolution:VideoPresets.h1080.resolution},publishDefaults:{videoCodec:"h264"}})}async start(i,t){console.log(`Starting conn with ${i} via ${this.hostUrl} token = ${t}`);const n=Date.now();return this.roomId=i,this.roomConn.on(RoomEvent.SignalConnected,async()=>{const a=Date.now()-n;appendLog(`signal connection established in ${a}ms`);let o=await this.roomConn.localParticipant.setCameraEnabled(!0);console.log("camResult:",o)}).on(RoomEvent.Connected,async()=>{appendLog(`Connected to room: ${this.roomConn.name}`)}).on(RoomEvent.Disconnected,a=>{this.roomConn&&(appendLog("disconnected from room",{reason:a},this.roomConn.localParticipant),this.roomConn.participants.forEach(o=>{}))}).on(RoomEvent.Reconnecting,()=>{appendLog("Reconnecting to room")}).on(RoomEvent.Reconnected,async()=>{appendLog("Successfully reconnected. server",await this.roomConn.engine.getConnectedServerAddress())}).on(RoomEvent.ParticipantConnected,async a=>{appendLog("participant",a.identity,"connected",a.metadata),a.on(ParticipantEvent.TrackMuted,o=>{appendLog("track was muted",o.trackSid,a.identity)}).on(ParticipantEvent.TrackUnmuted,o=>{appendLog("track was unmuted",o.trackSid,a.identity)}).on(ParticipantEvent.IsSpeakingChanged,()=>{appendLog("ParticipantEvent.IsSpeakingChanged",a.isSpeaking)}).on(ParticipantEvent.ConnectionQualityChanged,()=>{appendLog("ParticipantEvent.ConnectionQualityChanged",a.connectionQuality)})}).on(RoomEvent.ParticipantDisconnected,a=>{appendLog("participant",a.sid,"disconnected")}).on(RoomEvent.MediaDevicesError,a=>{const o=MediaDeviceFailure.getFailure(a);appendLog("media device failure",o)}).on(RoomEvent.ConnectionQualityChanged,(a,o)=>{appendLog("connection quality changed",o==null?void 0:o.identity,a)}).on(RoomEvent.DataReceived,async(a,o)=>{const d=o?o.identity:"SERVER";appendLog(`Got dataReceived from ${d} via ${this.hostUrl}|${this.roomId}`,DECODE_TXT(a)),this.onMesssageRecived(a,this.roomId,this.hostUrl)}).on(RoomEvent.RoomMetadataChanged,a=>{appendLog("new metadata for room",a)}).on(RoomEvent.MediaDevicesChanged,()=>{appendLog("MediaDevicesChanged")}).on(RoomEvent.LocalTrackUnpublished,(a,o)=>{appendLog("LocalTrackUnpublished!!!?",a,o)}).on(RoomEvent.LocalTrackPublished,(a,o)=>{appendLog("LocalVideoTrackPublished ",a,o)}).on(RoomEvent.MediaDevicesError,a=>{const o=MediaDeviceFailure.getFailure(a);appendLog("media device failure",o)}).on(RoomEvent.ConnectionQualityChanged,(a,o)=>{appendLog("connection quality changed",o==null?void 0:o.identity,a)}).on(RoomEvent.TrackSubscribed,(a,o,d)=>{appendLog("subscribed to track _THIS SHOULDN'T HAPPEN on BACKEND??_",o.trackSid,d.identity)}).on(RoomEvent.TrackUnsubscribed,(a,o,d)=>{appendLog("unsubscribed from track _THIS SHOULDN'T HAPPEN on BACKEND??_",o.trackSid)}).on(RoomEvent.AudioPlaybackStatusChanged,()=>{appendLog("AudioPlaybackStatusChanged _THIS SHOULDN'T HAPPEN on BACKEND??_",this.roomConn.canPlaybackAudio)}),await this.roomConn.connect(getWebsocketURL(this.hostUrl),t,LIVEKIT_BACKEND_ROOM_CONNECTION_CONFIG),console.info("connected to room",this.roomConn.name,this.roomConn),!0}sendMessage(i,t,n=!1){console.log("sendMessage() to driver/spectator ",i),this.roomConn.localParticipant.publishData(i,DataPacket_Kind.RELIABLE)}close(){console.info("Closing Livekit Connection: ",this.roomId,this.hostUrl),this.roomConn&&this.roomConn.disconnect(!0)}}const cloudLivekitConnection=new LivekitPublisherConnection(LIVEKIT_CLOUD_ENDPOINT,(e,i,t)=>{handleBackendMsgRcvd(e)},(e,i,t)=>{console.log("Cloud Conn State Changed: "+e,i,t)});new LivekitPublisherConnection(LIVEKIT_LOCAL_ENDPOINT,(e,i,t)=>{handleBackendMsgRcvd(e)},(e,i,t)=>{console.log("Local Conn State Changed: "+e,i,t)});async function connectToLivekit(e){if(!e.CloudAPIKey||!e.CloudSecretKey||!e.RovRoomName)throw new Error("Missing some required livekit setup url query params.");e.ForceLocal?LIVEKIT_LOCAL_ENDPOINT:LIVEKIT_CLOUD_ENDPOINT;{const i=getPublisherAccessToken(e.CloudAPIKey,e.CloudSecretKey,e.RovRoomName),t=new RoomServiceClient(LIVEKIT_CLOUD_ENDPOINT,e.CloudAPIKey,e.CloudSecretKey);await createLivekitRoom(t,e.RovRoomName),await refreshMetadata(t,e),await cloudLivekitConnection.start(e.RovRoomName,i);let n=await listLivekitRooms(t);console.log("cloud roomList",n)}return!0}function sendLivekitMessage(e){cloudLivekitConnection.sendMessage(e)}const urlParams=new URLSearchParams(location.search);connectToLivekit({ForceLocal:(urlParams.get("ForceLocal")||"").toLowerCase()==="true",RovRoomName:urlParams.get("RovRoomName"),CloudAPIKey:urlParams.get("CloudAPIKey"),CloudSecretKey:urlParams.get("CloudSecretKey"),LocalAPIKey:urlParams.get("LocalAPIKey"),LocalSecretKey:urlParams.get("LocalSecretKey")}).then(async()=>{console.log("connected?");const e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});initSimplePeerPublisher(e)})});export default bt();
//# sourceMappingURL=index-d8a9d39d.js.map
