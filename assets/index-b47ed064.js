var Gc=Object.defineProperty;var Vc=(t,e,n)=>e in t?Gc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var N=(t,e,n)=>(Vc(t,typeof e!="symbol"?e+"":e,n),n);import"./modulepreload-polyfill-3cfb730f.js";import{g as mo,r as xt}from"./rovActionsProto-cd57f7a7.js";function fe(){}const nn=t=>t;function H(t,e){for(const n in e)t[n]=e[n];return t}function Xs(t){return t()}function qo(){return Object.create(null)}function Q(t){t.forEach(Xs)}function oe(t){return typeof t=="function"}function Se(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Uc(t){return Object.keys(t).length===0}function zc(t,...e){if(t==null)return fe;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Re(t,e,n){t.$$.on_destroy.push(zc(e,n))}function Z(t,e,n,r){if(t){const i=Qs(t,e,n,r);return t[0](i)}}function Qs(t,e,n,r){return t[1]&&r?H(n.ctx.slice(),t[1](r(e))):n.ctx}function $(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],l=Math.max(e.dirty.length,i.length);for(let c=0;c<l;c+=1)o[c]=e.dirty[c]|i[c];return o}return e.dirty|i}return e.dirty}function ee(t,e,n,r,i,o){if(i){const l=Qs(e,n,r,o);t.p(l,i)}}function te(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function rn(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Ze(t,e){const n={};e=new Set(e);for(const r in t)!e.has(r)&&r[0]!=="$"&&(n[r]=t[r]);return n}function An(t){return t??""}function F(t){return t&&oe(t.destroy)?t.destroy:fe}function Wo(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const Ys=typeof window<"u";let gr=Ys?()=>window.performance.now():()=>Date.now(),vo=Ys?t=>requestAnimationFrame(t):fe;const yn=new Set;function Ks(t){yn.forEach(e=>{e.c(t)||(yn.delete(e),e.f())}),yn.size!==0&&vo(Ks)}function mr(t){let e;return yn.size===0&&vo(Ks),{promise:new Promise(n=>{yn.add(e={c:t,f:n})}),abort(){yn.delete(e)}}}const yo=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;"WeakMap"in yo;function B(t,e){t.appendChild(e)}function Js(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Hc(t){const e=R("style");return qc(Js(t),e),e.sheet}function qc(t,e){return B(t.head||t,e),e.sheet}function O(t,e,n){t.insertBefore(e,n||null)}function P(t){t.parentNode&&t.parentNode.removeChild(t)}function kt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function R(t){return document.createElement(t)}function Ut(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ge(t){return document.createTextNode(t)}function K(){return Ge(" ")}function Ye(){return Ge("")}function de(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Zs(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Wc(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function D(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Xc=["width","height"];function V(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)e[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=e[r]:r==="__value"?t.value=t[r]=e[r]:n[r]&&n[r].set&&Xc.indexOf(r)===-1?t[r]=e[r]:D(t,r,e[r])}function $e(t,e){for(const n in e)D(t,n,e[n])}function Qc(t){return Array.from(t.childNodes)}function Rt(t,e){e=""+e,t.data!==e&&(t.data=e)}function Xo(t,e){t.value=e??""}function Qo(t,e,n,r){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function mt(t,e,n){t.classList[n?"add":"remove"](e)}function $s(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}class Yc{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,r=null){this.e||(this.is_svg?this.e=Ut(n.nodeName):this.e=R(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)O(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(P)}}function ti(t,e){return new t(e)}const ni=new Map;let ri=0;function Kc(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Jc(t,e){const n={stylesheet:Hc(e),rules:{}};return ni.set(t,n),n}function or(t,e,n,r,i,o,l,c=0){const a=16.666/r;let u=`{
`;for(let g=0;g<=1;g+=a){const v=e+(n-e)*o(g);u+=g*100+`%{${l(v,1-v)}}
`}const f=u+`100% {${l(n,1-n)}}
}`,s=`__svelte_${Kc(f)}_${c}`,d=Js(t),{stylesheet:p,rules:h}=ni.get(d)||Jc(d,t);h[s]||(h[s]=!0,p.insertRule(`@keyframes ${s} ${f}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${s} ${r}ms linear ${i}ms 1 both`,ri+=1,s}function ar(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=n.length-r.length;i&&(t.style.animation=r.join(", "),ri-=i,ri||Zc())}function Zc(){vo(()=>{ri||(ni.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&P(e)}),ni.clear())})}function $c(t,e,n,r){if(!e)return fe;const i=t.getBoundingClientRect();if(e.left===i.left&&e.right===i.right&&e.top===i.top&&e.bottom===i.bottom)return fe;const{delay:o=0,duration:l=300,easing:c=nn,start:a=gr()+o,end:u=a+l,tick:f=fe,css:s}=n(t,{from:e,to:i},r);let d=!0,p=!1,h;function m(){s&&(h=or(t,0,1,l,o,c,s)),o||(p=!0)}function g(){s&&ar(t,h),d=!1}return mr(v=>{if(!p&&v>=a&&(p=!0),p&&v>=u&&(f(1,0),g()),!d)return!1;if(p){const y=v-a,_=0+1*c(y/l);f(_,1-_)}return!0}),m(),f(0,1),g}function eu(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:n,height:r}=e,i=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=r,el(t,i)}}function el(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const r=getComputedStyle(t),i=r.transform==="none"?"":r.transform;t.style.transform=`${i} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}let sr;function $n(t){sr=t}function Ct(){if(!sr)throw new Error("Function called outside component initialization");return sr}function Mn(t){Ct().$$.on_mount.push(t)}function yt(t){Ct().$$.on_destroy.push(t)}function vr(){const t=Ct();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=$s(e,n,{cancelable:r});return i.slice().forEach(l=>{l.call(t,o)}),!o.defaultPrevented}return!0}}function yr(t,e){return Ct().$$.context.set(t,e),e}function Dn(t){return Ct().$$.context.get(t)}function tu(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const pn=[],ne=[];let bn=[];const Hi=[],tl=Promise.resolve();let qi=!1;function nl(){qi||(qi=!0,tl.then(il))}function bo(){return nl(),tl}function nt(t){bn.push(t)}function rl(t){Hi.push(t)}const xi=new Set;let sn=0;function il(){if(sn!==0)return;const t=sr;do{try{for(;sn<pn.length;){const e=pn[sn];sn++,$n(e),nu(e.$$)}}catch(e){throw pn.length=0,sn=0,e}for($n(null),pn.length=0,sn=0;ne.length;)ne.pop()();for(let e=0;e<bn.length;e+=1){const n=bn[e];xi.has(n)||(xi.add(n),n())}bn.length=0}while(pn.length);for(;Hi.length;)Hi.pop()();qi=!1,xi.clear(),$n(t)}function nu(t){if(t.fragment!==null){t.update(),Q(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(nt)}}function ru(t){const e=[],n=[];bn.forEach(r=>t.indexOf(r)===-1?e.push(r):n.push(r)),n.forEach(r=>r()),bn=e}let Fn;function _o(){return Fn||(Fn=Promise.resolve(),Fn.then(()=>{Fn=null})),Fn}function Qt(t,e,n){t.dispatchEvent($s(`${e?"intro":"outro"}${n}`))}const Ur=new Set;let vt;function lt(){vt={r:0,c:[],p:vt}}function ct(){vt.r||Q(vt.c),vt=vt.p}function k(t,e){t&&t.i&&(Ur.delete(t),t.i(e))}function T(t,e,n,r){if(t&&t.o){if(Ur.has(t))return;Ur.add(t),vt.c.push(()=>{Ur.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const Co={duration:0};function Ao(t,e,n){const r={direction:"in"};let i=e(t,n,r),o=!1,l,c,a=0;function u(){l&&ar(t,l)}function f(){const{delay:d=0,duration:p=300,easing:h=nn,tick:m=fe,css:g}=i||Co;g&&(l=or(t,0,1,p,d,h,g,a++)),m(0,1);const v=gr()+d,y=v+p;c&&c.abort(),o=!0,nt(()=>Qt(t,!0,"start")),c=mr(_=>{if(o){if(_>=y)return m(1,0),Qt(t,!0,"end"),u(),o=!1;if(_>=v){const b=h((_-v)/p);m(b,1-b)}}return o})}let s=!1;return{start(){s||(s=!0,ar(t),oe(i)?(i=i(r),_o().then(f)):f())},invalidate(){s=!1},end(){o&&(u(),o=!1)}}}function iu(t,e,n){const r={direction:"out"};let i=e(t,n,r),o=!0,l;const c=vt;c.r+=1;function a(){const{delay:u=0,duration:f=300,easing:s=nn,tick:d=fe,css:p}=i||Co;p&&(l=or(t,1,0,f,u,s,p));const h=gr()+u,m=h+f;nt(()=>Qt(t,!1,"start")),mr(g=>{if(o){if(g>=m)return d(0,1),Qt(t,!1,"end"),--c.r||Q(c.c),!1;if(g>=h){const v=s((g-h)/f);d(1-v,v)}}return o})}return oe(i)?_o().then(()=>{i=i(r),a()}):a(),{end(u){u&&i.tick&&i.tick(1,0),o&&(l&&ar(t,l),o=!1)}}}function Nt(t,e,n,r){const i={direction:"both"};let o=e(t,n,i),l=r?0:1,c=null,a=null,u=null;function f(){u&&ar(t,u)}function s(p,h){const m=p.b-l;return h*=Math.abs(m),{a:l,b:p.b,d:m,duration:h,start:p.start,end:p.start+h,group:p.group}}function d(p){const{delay:h=0,duration:m=300,easing:g=nn,tick:v=fe,css:y}=o||Co,_={start:gr()+h,b:p};p||(_.group=vt,vt.r+=1),c||a?a=_:(y&&(f(),u=or(t,l,p,m,h,g,y)),p&&v(0,1),c=s(_,m),nt(()=>Qt(t,p,"start")),mr(b=>{if(a&&b>a.start&&(c=s(a,m),a=null,Qt(t,c.b,"start"),y&&(f(),u=or(t,l,c.b,c.duration,0,g,o.css))),c){if(b>=c.end)v(l=c.b,1-l),Qt(t,c.b,"end"),a||(c.b?f():--c.group.r||Q(c.group.c)),c=null;else if(b>=c.start){const E=b-c.start;l=c.a+c.d*g(E/c.duration),v(l,1-l)}}return!!(c||a)}))}return{run(p){oe(o)?_o().then(()=>{o=o(i),d(p)}):d(p)},end(){f(),c=a=null}}}function ou(t,e){T(t,1,1,()=>{e.delete(t.key)})}function au(t,e){t.f(),ou(t,e)}function su(t,e,n,r,i,o,l,c,a,u,f,s){let d=t.length,p=o.length,h=d;const m={};for(;h--;)m[t[h].key]=h;const g=[],v=new Map,y=new Map,_=[];for(h=p;h--;){const S=s(i,o,h),x=n(S);let L=l.get(x);L?r&&_.push(()=>L.p(S,e)):(L=u(x,S),L.c()),v.set(x,g[h]=L),x in m&&y.set(x,Math.abs(h-m[x]))}const b=new Set,E=new Set;function w(S){k(S,1),S.m(c,f),l.set(S.key,S),f=S.first,p--}for(;d&&p;){const S=g[p-1],x=t[d-1],L=S.key,I=x.key;S===x?(f=S.first,d--,p--):v.has(I)?!l.has(L)||b.has(L)?w(S):E.has(I)?d--:y.get(L)>y.get(I)?(E.add(L),w(S)):(b.add(I),d--):(a(x,l),d--)}for(;d--;){const S=t[d];v.has(S.key)||a(S,l)}for(;p;)w(g[p-1]);return Q(_),g}function Y(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const l=t[o],c=e[o];if(c){for(const a in l)a in c||(r[a]=1);for(const a in c)i[a]||(n[a]=c[a],i[a]=1);t[o]=c}else for(const a in l)i[a]=1}for(const l in r)l in n||(n[l]=void 0);return n}function lr(t){return typeof t=="object"&&t!==null?t:{}}const lu=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...lu];function Wi(t,e,n){const r=t.$$.props[e];r!==void 0&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function se(t){t&&t.c()}function re(t,e,n,r){const{fragment:i,after_update:o}=t.$$;i&&i.m(e,n),r||nt(()=>{const l=t.$$.on_mount.map(Xs).filter(oe);t.$$.on_destroy?t.$$.on_destroy.push(...l):Q(l),t.$$.on_mount=[]}),o.forEach(nt)}function ie(t,e){const n=t.$$;n.fragment!==null&&(ru(n.after_update),Q(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function cu(t,e){t.$$.dirty[0]===-1&&(pn.push(t),nl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Te(t,e,n,r,i,o,l,c=[-1]){const a=sr;$n(t);const u=t.$$={fragment:null,ctx:[],props:o,update:fe,not_equal:i,bound:qo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:qo(),dirty:c,skip_bound:!1,root:e.target||a.$$.root};l&&l(u.root);let f=!1;if(u.ctx=n?n(t,e.props||{},(s,d,...p)=>{const h=p.length?p[0]:d;return u.ctx&&i(u.ctx[s],u.ctx[s]=h)&&(!u.skip_bound&&u.bound[s]&&u.bound[s](h),f&&cu(t,s)),d}):[],u.update(),f=!0,Q(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const s=Qc(e.target);u.fragment&&u.fragment.l(s),s.forEach(P)}else u.fragment&&u.fragment.c();e.intro&&k(t.$$.fragment),re(t,e.target,e.anchor,e.customElement),il()}$n(a)}class we{$destroy(){ie(this,1),this.$destroy=fe}$on(e,n){if(!oe(n))return fe;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const i=r.indexOf(n);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!Uc(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var G=function(){return G=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},G.apply(this,arguments)};function Eo(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function he(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ve(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){l={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o}function Pe(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Ee;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(Ee||(Ee={}));var En;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(En||(En={}));var Xi=Ee.Start,So=Ee.Stop,br=Ee.Raise,Ai=Ee.Send,ol=Ee.Cancel,uu=Ee.NullEvent,al=Ee.Assign;Ee.After;Ee.DoneState;var sl=Ee.Log,fu=Ee.Init,Qi=Ee.Invoke;Ee.ErrorExecution;var Yo=Ee.ErrorPlatform,du=Ee.ErrorCustom,ll=Ee.Update,pu=Ee.Choose,hu=Ee.Pure,cl=".",Ko={},Yi="xstate.guard",gu="",Dr;function ko(t,e,n){n===void 0&&(n=cl);var r=er(t,n),i=er(e,n);return _e(i)?_e(r)?i===r:!1:_e(r)?r in i:Object.keys(r).every(function(o){return o in i?ko(r[o],i[o]):!1})}function ul(t){try{return _e(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Ki(t,e){try{return In(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function mu(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function er(t,e){if(mu(t))return t.value;if(In(t))return ii(t);if(typeof t!="string")return t;var n=Ki(t,e);return ii(n)}function ii(t){if(t.length===1)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function Hn(t,e){for(var n={},r=Object.keys(t),i=0;i<r.length;i++){var o=r[i];n[o]=e(t[o],o,t,i)}return n}function Jo(t,e,n){var r,i,o={};try{for(var l=he(Object.keys(t)),c=l.next();!c.done;c=l.next()){var a=c.value,u=t[a];n(u)&&(o[a]=e(u,a,t))}}catch(f){r={error:f}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}var vu=function(t){return function(e){var n,r,i=e;try{for(var o=he(t),l=o.next();!l.done;l=o.next()){var c=l.value;i=i[c]}}catch(a){n={error:a}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}};function yu(t,e){return function(n){var r,i,o=n;try{for(var l=he(t),c=l.next();!c.done;c=l.next()){var a=c.value;o=o[e][a]}}catch(u){r={error:u}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}}function zr(t){if(!t)return[[]];if(_e(t))return[[t]];var e=De(Object.keys(t).map(function(n){var r=t[n];return typeof r!="string"&&(!r||!Object.keys(r).length)?[[n]]:zr(t[n]).map(function(i){return[n].concat(i)})}));return e}function De(t){var e;return(e=[]).concat.apply(e,Pe([],ve(t),!1))}function fl(t){return In(t)?t:[t]}function ft(t){return t===void 0?[]:fl(t)}function oi(t,e,n){var r,i;if(ye(t))return t(e,n.data);var o={};try{for(var l=he(Object.keys(t)),c=l.next();!c.done;c=l.next()){var a=c.value,u=t[a];ye(u)?o[a]=u(e,n.data):o[a]=u}}catch(f){r={error:f}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}function bu(t){return/^(done|error)\./.test(t)}function Zo(t){return!!(t instanceof Promise||t!==null&&(ye(t)||typeof t=="object")&&ye(t.then))}function _u(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function Cu(t,e){var n,r,i=ve([[],[]],2),o=i[0],l=i[1];try{for(var c=he(t),a=c.next();!a.done;a=c.next()){var u=a.value;e(u)?o.push(u):l.push(u)}}catch(f){n={error:f}}finally{try{a&&!a.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return[o,l]}function dl(t,e){return Hn(t.states,function(n,r){if(n){var i=(_e(e)?void 0:e[r])||(n?n.current:void 0);if(i)return{current:i,states:dl(n,i)}}})}function Au(t,e){return{current:e,states:dl(t,e)}}function $o(t,e,n,r){var i=t&&n.reduce(function(o,l){var c,a,u=l.assignment,f={state:r,action:l,_event:e},s={};if(ye(u))s=u(o,e.data,f);else try{for(var d=he(Object.keys(u)),p=d.next();!p.done;p=d.next()){var h=p.value,m=u[h];s[h]=ye(m)?m(o,e.data,f):m}}catch(g){c={error:g}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(c)throw c.error}}return Object.assign({},o,s)},t);return i}var Eu=function(){};function In(t){return Array.isArray(t)}function ye(t){return typeof t=="function"}function _e(t){return typeof t=="string"}function pl(t,e){if(t)return _e(t)?{type:Yi,name:t,predicate:e?e[t]:void 0}:ye(t)?{type:Yi,name:t.name,predicate:t}:t}function Su(t){try{return"subscribe"in t&&ye(t.subscribe)}catch{return!1}}var Ft=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();Dr={},Dr[Ft]=function(){return this},Dr[Symbol.observable]=function(){return this};function Sn(t){return!!t&&"__xstatenode"in t}function ku(t){return!!t&&typeof t.send=="function"}function Ei(t,e){return _e(t)||typeof t=="number"?G({type:t},e):t}function je(t,e){if(!_e(t)&&"$$type"in t&&t.$$type==="scxml")return t;var n=Ei(t);return G({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function ln(t,e){var n=fl(e).map(function(r){return typeof r>"u"||typeof r=="string"||Sn(r)?{target:r,event:t}:G(G({},r),{event:t})});return n}function Tu(t){if(!(t===void 0||t===gu))return ft(t)}function hl(t,e,n,r,i){var o=t.options.guards,l={state:i,cond:e,_event:r};if(e.type===Yi)return((o==null?void 0:o[e.name])||e.predicate)(n,r.data,l);var c=o==null?void 0:o[e.type];if(!c)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return c(n,r.data,l)}function gl(t){return typeof t=="string"?{type:t}:t}function Hr(t,e,n){var r=function(){},i=typeof t=="object",o=i?t:null;return{next:((i?t.next:t)||r).bind(o),error:((i?t.error:e)||r).bind(o),complete:((i?t.complete:n)||r).bind(o)}}function Ir(t,e){return"".concat(t,":invocation[").concat(e,"]")}function Ji(t){return(t.type===br||t.type===Ai&&t.to===En.Internal)&&typeof t.delay!="number"}var _n=je({type:fu});function Zi(t,e){return e&&e[t]||void 0}function cr(t,e){var n;if(_e(t)||typeof t=="number"){var r=Zi(t,e);ye(r)?n={type:t,exec:r}:r?n=r:n={type:t,exec:void 0}}else if(ye(t))n={type:t.name||t.toString(),exec:t};else{var r=Zi(t.type,e);if(ye(r))n=G(G({},t),{exec:r});else if(r){var i=r.type||t.type;n=G(G(G({},r),t),{type:i})}else n=t}return n}var jt=function(t,e){if(!t)return[];var n=In(t)?t:[t];return n.map(function(r){return cr(r,e)})};function To(t){var e=cr(t);return G(G({id:_e(t)?t:e.id},e),{type:e.type})}function wu(t,e){return{type:br,event:typeof t=="function"?t:Ei(t),delay:e?e.delay:void 0,id:e==null?void 0:e.id}}function Ru(t,e,n,r){var i={_event:n},o=je(ye(t.event)?t.event(e,n.data,i):t.event),l;if(_e(t.delay)){var c=r&&r[t.delay];l=ye(c)?c(e,n.data,i):c}else l=ye(t.delay)?t.delay(e,n.data,i):t.delay;return G(G({},t),{type:br,_event:o,delay:l})}function Pu(t,e){return{to:e?e.to:void 0,type:Ai,event:ye(t)?t:Ei(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:ye(t)?t.name:ul(t)}}function Ou(t,e,n,r){var i={_event:n},o=je(ye(t.event)?t.event(e,n.data,i):t.event),l;if(_e(t.delay)){var c=r&&r[t.delay];l=ye(c)?c(e,n.data,i):c}else l=ye(t.delay)?t.delay(e,n.data,i):t.delay;var a=ye(t.to)?t.to(e,n.data,i):t.to;return G(G({},t),{to:a,_event:o,event:o.data,delay:l})}var Mu=function(t,e,n){return G(G({},t),{value:_e(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})},Du=function(t){return{type:ol,sendId:t}};function Iu(t){var e=To(t);return{type:Ee.Start,activity:e,exec:void 0}}function Bu(t){var e=ye(t)?t:To(t);return{type:Ee.Stop,activity:e,exec:void 0}}function xu(t,e,n){var r=ye(t.activity)?t.activity(e,n.data):t.activity,i=typeof r=="string"?{id:r}:r,o={type:Ee.Stop,activity:i};return o}function Lu(t,e){var n=e?"#".concat(e):"";return"".concat(Ee.After,"(").concat(t,")").concat(n)}function Br(t,e){var n="".concat(Ee.DoneState,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function qr(t,e){var n="".concat(Ee.DoneInvoke,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}function qn(t,e){var n="".concat(Ee.ErrorPlatform,".").concat(t),r={type:n,data:e};return r.toString=function(){return n},r}var Fu=function(t){var e,n,r=[];try{for(var i=he(t),o=i.next();!o.done;o=i.next())for(var l=o.value,c=0;c<l.actions.length;){if(l.actions[c].type===al){r.push(l.actions[c]),l.actions.splice(c,1);continue}c++}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r};function ai(t,e,n,r,i,o,l){l===void 0&&(l=!1);var c=l?[]:Fu(i),a=c.length?$o(n,r,c,e):n,u=l?[n]:void 0,f=[];function s(h,m){var g;switch(m.type){case br:{var v=Ru(m,a,r,t.options.delays);return o&&typeof v.delay=="number"&&o(v,a,r),v}case Ai:var y=Ou(m,a,r,t.options.delays);return o&&y.to!==En.Internal&&(h==="entry"?f.push(y):o(y,a,r)),y;case sl:{var _=Mu(m,a,r);return o==null||o(_,a,r),_}case pu:{var b=m,E=(g=b.conds.find(function(me){var ce=pl(me.cond,t.options.guards);return!ce||hl(t,ce,a,r,o?void 0:e)}))===null||g===void 0?void 0:g.actions;if(!E)return[];var w=ve(ai(t,e,a,r,[{type:h,actions:jt(ft(E),t.options.actions)}],o,l),2),S=w[0],x=w[1];return a=x,u==null||u.push(a),S}case hu:{var E=m.get(a,r.data);if(!E)return[];var L=ve(ai(t,e,a,r,[{type:h,actions:jt(ft(E),t.options.actions)}],o,l),2),I=L[0],j=L[1];return a=j,u==null||u.push(a),I}case So:{var _=xu(m,a,r);return o==null||o(_,n,r),_}case al:{a=$o(a,r,[m],o?void 0:e),u==null||u.push(a);break}default:var A=cr(m,t.options.actions),q=A.exec;if(o)o(A,a,r);else if(q&&u){var z=u.length-1,ge=G(G({},A),{exec:function(me){for(var ce=[],U=1;U<arguments.length;U++)ce[U-1]=arguments[U];q.apply(void 0,Pe([u[z]],ve(ce),!1))}});A=ge}return A}}function d(h){var m,g,v=[];try{for(var y=he(h.actions),_=y.next();!_.done;_=y.next()){var b=_.value,E=s(h.type,b);E&&(v=v.concat(E))}}catch(w){m={error:w}}finally{try{_&&!_.done&&(g=y.return)&&g.call(y)}finally{if(m)throw m.error}}return f.forEach(function(w){o(w,a,r)}),f.length=0,v}var p=De(i.map(d));return[p,a]}var ea=[],hn=function(t,e){ea.push(t);var n=e(t);return ea.pop(),n};function ml(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Ft]=function(){return this},e}function ju(t,e,n,r){var i,o=gl(t.src),l=(i=e==null?void 0:e.options.services)===null||i===void 0?void 0:i[o.type],c=t.data?oi(t.data,n,r):void 0,a=l?vl(l,t.id,c):ml(t.id);return a.meta=t,a}function vl(t,e,n){var r=ml(e);if(r.deferred=!0,Sn(t)){var i=r.state=hn(void 0,function(){return(n?t.withContext(n):t).initialState});r.getSnapshot=function(){return i}}return r}function Nu(t){try{return typeof t.send=="function"}catch{return!1}}function Gu(t){return Nu(t)&&"id"in t}function Vu(t){var e;return G((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Ft]=function(){return this},e),t)}var si=function(t){return t.type==="atomic"||t.type==="final"};function yl(t){return Object.keys(t.states).map(function(e){return t.states[e]})}function ur(t){return yl(t).filter(function(e){return e.type!=="history"})}function bl(t){var e=[t];return si(t)?e:e.concat(De(ur(t).map(bl)))}function Wn(t,e){var n,r,i,o,l,c,a,u,f=new Set(t),s=$i(f),d=new Set(e);try{for(var p=he(d),h=p.next();!h.done;h=p.next())for(var m=h.value,g=m.parent;g&&!d.has(g);)d.add(g),g=g.parent}catch(L){n={error:L}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(n)throw n.error}}var v=$i(d);try{for(var y=he(d),_=y.next();!_.done;_=y.next()){var m=_.value;if(m.type==="compound"&&(!v.get(m)||!v.get(m).length))s.get(m)?s.get(m).forEach(function(I){return d.add(I)}):m.initialStateNodes.forEach(function(I){return d.add(I)});else if(m.type==="parallel")try{for(var b=(l=void 0,he(ur(m))),E=b.next();!E.done;E=b.next()){var w=E.value;d.has(w)||(d.add(w),s.get(w)?s.get(w).forEach(function(I){return d.add(I)}):w.initialStateNodes.forEach(function(I){return d.add(I)}))}}catch(I){l={error:I}}finally{try{E&&!E.done&&(c=b.return)&&c.call(b)}finally{if(l)throw l.error}}}}catch(L){i={error:L}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(i)throw i.error}}try{for(var S=he(d),x=S.next();!x.done;x=S.next())for(var m=x.value,g=m.parent;g&&!d.has(g);)d.add(g),g=g.parent}catch(L){a={error:L}}finally{try{x&&!x.done&&(u=S.return)&&u.call(S)}finally{if(a)throw a.error}}return d}function _l(t,e){var n=e.get(t);if(!n)return{};if(t.type==="compound"){var r=n[0];if(r){if(si(r))return r.key}else return{}}var i={};return n.forEach(function(o){i[o.key]=_l(o,e)}),i}function $i(t){var e,n,r=new Map;try{for(var i=he(t),o=i.next();!o.done;o=i.next()){var l=o.value;r.has(l)||r.set(l,[]),l.parent&&(r.has(l.parent)||r.set(l.parent,[]),r.get(l.parent).push(l))}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Uu(t,e){var n=Wn([t],e);return _l(t,$i(n))}function Xn(t,e){return Array.isArray(t)?t.some(function(n){return n===e}):t instanceof Set?t.has(e):!1}function zu(t){return Pe([],ve(new Set(De(Pe([],ve(t.map(function(e){return e.ownEvents})),!1)))),!1)}function Wr(t,e){return e.type==="compound"?ur(e).some(function(n){return n.type==="final"&&Xn(t,n)}):e.type==="parallel"?ur(e).every(function(n){return Wr(t,n)}):!1}function Hu(t){return t===void 0&&(t=[]),t.reduce(function(e,n){return n.meta!==void 0&&(e[n.id]=n.meta),e},{})}function ta(t){return new Set(De(t.map(function(e){return e.tags})))}function Cl(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(_e(t)||_e(e))return t===e;var n=Object.keys(t),r=Object.keys(e);return n.length===r.length&&n.every(function(i){return Cl(t[i],e[i])})}function qu(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function Wu(t,e){var n=t.exec,r=G(G({},t),{exec:n!==void 0?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return r}var ht=function(){function t(e){var n=this,r;this.actions=[],this.activities=Ko,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Ko,this.meta=Hu(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(r=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&r!==void 0?r:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return zu(n.configuration)}})}return t.from=function(e,n){if(e instanceof t)return e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var r=_n;return new t({value:e,context:n,_event:r,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=_n;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(e,n){var r=this;if(e===void 0&&(e=this.value),n===void 0&&(n="."),_e(e))return[e];var i=Object.keys(e);return i.concat.apply(i,Pe([],ve(i.map(function(o){return r.toStrings(e[o],n).map(function(l){return o+n+l})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var n=e.tags;e.machine;var r=Eo(e,["configuration","transitions","tags","machine"]);return G(G({},r),{tags:Array.from(n)})},t.prototype.matches=function(e){return ko(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var n;Eu(!!this.machine);var r=(n=this.machine)===null||n===void 0?void 0:n.getTransitionData(this,e);return!!(r!=null&&r.transitions.length)&&r.transitions.some(function(i){return i.target!==void 0||i.actions.length})},t}(),Xu={deferEvents:!1},na=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=G(G({},Xu),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(n){throw this.clear(),n}finally{this.processingEvent=!1}},t}(),Li=new Map,Qu=0,jn={bookId:function(){return"x:".concat(Qu++)},register:function(t,e){return Li.set(t,e),t},get:function(t){return Li.get(t)},free:function(t){Li.delete(t)}};function wo(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Yu(){var t=wo();if(t&&"__xstate__"in t)return t.__xstate__}function Ku(t){if(wo()){var e=Yu();e&&e.register(t)}}function Ju(t,e){e===void 0&&(e={});var n=t.initialState,r=new Set,i=[],o=!1,l=function(){if(!o){for(o=!0;i.length>0;){var u=i.shift();n=t.transition(n,u,a),r.forEach(function(f){return f.next(n)})}o=!1}},c=Vu({id:e.id,send:function(u){i.push(u),l()},getSnapshot:function(){return n},subscribe:function(u,f,s){var d=Hr(u,f,s);return r.add(d),d.next(n),{unsubscribe:function(){r.delete(d)}}}}),a={parent:e.parent,self:c,id:e.id||"anonymous",observers:r};return n=t.start?t.start(a):n,c}var Zu={sync:!1,autoForward:!1},Fe;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(Fe||(Fe={}));var $u=function(){function t(e,n){n===void 0&&(n=t.defaultOptions);var r=this;this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=Fe.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(f,s){if(In(f))return r.batch(f),r.state;var d=je(Ei(f,s));if(r.status===Fe.Stopped)return r.state;if(r.status!==Fe.Running&&!r.options.deferEvents)throw new Error('Event "'.concat(d.name,'" was sent to uninitialized service "').concat(r.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(d.data)));return r.scheduler.schedule(function(){r.forward(d);var p=r._nextState(d);r.update(p,d)}),r._state},this.sendTo=function(f,s,d){var p=r.parent&&(s===En.Parent||r.parent.id===s),h=p?r.parent:_e(s)?s===En.Internal?r:r.children.get(s)||jn.get(s):ku(s)?s:void 0;if(!h){if(!p)throw new Error("Unable to send event to child '".concat(s,"' from service '").concat(r.id,"'."));return}if("machine"in h){if(r.status!==Fe.Stopped||r.parent!==h||r.state.done){var m=G(G({},f),{name:f.name===du?"".concat(qn(r.id)):f.name,origin:r.sessionId});!d&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([h,m]):h.send(m)}}else!d&&r.machine.config.predictableActionArguments?r._outgoingQueue.push([h,f.data]):h.send(f.data)},this._exec=function(f,s,d,p){p===void 0&&(p=r.machine.options.actions);var h=f.exec||Zi(f.type,p),m=ye(h)?h:h?h.exec:f.exec;if(m)try{return m(s,d.data,r.machine.config.predictableActionArguments?{action:f,_event:d}:{action:f,state:r.state,_event:d})}catch(z){throw r.parent&&r.parent.send({type:"xstate.error",data:z}),z}switch(f.type){case br:{var g=f;r.defer(g);break}case Ai:var v=f;if(typeof v.delay=="number"){r.defer(v);return}else v.to?r.sendTo(v._event,v.to,d===_n):r.send(v._event);break;case ol:r.cancel(f.sendId);break;case Xi:{if(r.status!==Fe.Running)return;var y=f.activity;if(!r.machine.config.predictableActionArguments&&!r.state.activities[y.id||y.type])break;if(y.type===Ee.Invoke){var _=gl(y.src),b=r.machine.options.services?r.machine.options.services[_.type]:void 0,E=y.id,w=y.data,S="autoForward"in y?y.autoForward:!!y.forward;if(!b)return;var x=w?oi(w,s,d):void 0;if(typeof b=="string")return;var L=ye(b)?b(s,d.data,{data:x,src:_,meta:y.meta}):b;if(!L)return;var I=void 0;Sn(L)&&(L=x?L.withContext(x):L,I={autoForward:S}),r.spawn(L,E,I)}else r.spawnActivity(y);break}case So:{r.stopChild(f.activity.id);break}case sl:var j=f,A=j.label,q=j.value;A?r.logger(A,q):r.logger(q);break}};var i=G(G({},t.defaultOptions),n),o=i.clock,l=i.logger,c=i.parent,a=i.id,u=a!==void 0?a:e.id;this.id=u,this.logger=l,this.clock=o,this.parent=c,this.options=i,this.scheduler=new na({deferEvents:this.options.deferEvents}),this.sessionId=jn.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:hn(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,n){var r,i;try{for(var o=he(e.actions),l=o.next();!l.done;l=o.next()){var c=l.value;this.exec(c,e,n)}}catch(a){r={error:a}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},t.prototype.update=function(e,n){var r,i,o,l,c,a,u,f,s=this;if(e._sessionid=this.sessionId,this._state=e,(!this.machine.config.predictableActionArguments||n===_n)&&this.options.execute)this.execute(this.state);else for(var d=void 0;d=this._outgoingQueue.shift();)d[0].send(d[1]);if(this.children.forEach(function(L){s.state.children[L.id]=L}),this.devTools&&this.devTools.send(n.data,e),e.event)try{for(var p=he(this.eventListeners),h=p.next();!h.done;h=p.next()){var m=h.value;m(e.event)}}catch(L){r={error:L}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}try{for(var g=he(this.listeners),v=g.next();!v.done;v=g.next()){var m=v.value;m(e,e.event)}}catch(L){o={error:L}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}try{for(var y=he(this.contextListeners),_=y.next();!_.done;_=y.next()){var b=_.value;b(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(L){c={error:L}}finally{try{_&&!_.done&&(a=y.return)&&a.call(y)}finally{if(c)throw c.error}}if(this.state.done){var E=e.configuration.find(function(L){return L.type==="final"&&L.parent===s.machine}),w=E&&E.doneData?oi(E.doneData,e.context,n):void 0;this._doneEvent=qr(this.id,w);try{for(var S=he(this.doneListeners),x=S.next();!x.done;x=S.next()){var m=x.value;m(this._doneEvent)}}catch(L){u={error:L}}finally{try{x&&!x.done&&(f=S.return)&&f.call(S)}finally{if(u)throw u.error}}this._stop(),this._stopChildren(),jn.free(this.sessionId)}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===Fe.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,n,r){var i=this,o=Hr(e,n,r);this.listeners.add(o.next),this.status!==Fe.NotStarted&&o.next(this.state);var l=function(){i.doneListeners.delete(l),i.stopListeners.delete(l),o.complete()};return this.status===Fe.Stopped?o.complete():(this.onDone(l),this.onStop(l)),{unsubscribe:function(){i.listeners.delete(o.next),i.doneListeners.delete(l),i.stopListeners.delete(l)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.status===Fe.Stopped&&this._doneEvent?e(this._doneEvent):this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var n=this;if(this.status===Fe.Running)return this;this.machine._init(),jn.register(this.sessionId,this),this.initialized=!0,this.status=Fe.Running;var r=e===void 0?this.initialState:hn(this,function(){return qu(e)?n.machine.resolveState(e):n.machine.resolveState(ht.from(e,n.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){n.update(r,_n)}),this},t.prototype._stopChildren=function(){this.children.forEach(function(e){ye(e.stop)&&e.stop()}),this.children.clear()},t.prototype._stop=function(){var e,n,r,i,o,l,c,a,u,f;try{for(var s=he(this.listeners),d=s.next();!d.done;d=s.next()){var p=d.value;this.listeners.delete(p)}}catch(S){e={error:S}}finally{try{d&&!d.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}try{for(var h=he(this.stopListeners),m=h.next();!m.done;m=h.next()){var p=m.value;p(),this.stopListeners.delete(p)}}catch(S){r={error:S}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}try{for(var g=he(this.contextListeners),v=g.next();!v.done;v=g.next()){var p=v.value;this.contextListeners.delete(p)}}catch(S){o={error:S}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(o)throw o.error}}try{for(var y=he(this.doneListeners),_=y.next();!_.done;_=y.next()){var p=_.value;this.doneListeners.delete(p)}}catch(S){c={error:S}}finally{try{_&&!_.done&&(a=y.return)&&a.call(y)}finally{if(c)throw c.error}}if(!this.initialized)return this;this.initialized=!1,this.status=Fe.Stopped,this._initialState=void 0;try{for(var b=he(Object.keys(this.delayedEventsMap)),E=b.next();!E.done;E=b.next()){var w=E.value;this.clock.clearTimeout(this.delayedEventsMap[w])}}catch(S){u={error:S}}finally{try{E&&!E.done&&(f=b.return)&&f.call(b)}finally{if(u)throw u.error}}this.scheduler.clear(),this.scheduler=new na({deferEvents:this.options.deferEvents})},t.prototype.stop=function(){var e=this,n=this.scheduler;return this._stop(),n.schedule(function(){var r=je({type:"xstate.stop"}),i=hn(e,function(){var o=De(Pe([],ve(e.state.configuration),!1).sort(function(f,s){return s.order-f.order}).map(function(f){return jt(f.onExit,e.machine.options.actions)})),l=ve(ai(e.machine,e.state,e.state.context,r,[{type:"exit",actions:o}],e.machine.config.predictableActionArguments?e._exec:void 0,e.machine.config.predictableActionArguments||e.machine.config.preserveActionOrder),2),c=l[0],a=l[1],u=new ht({value:e.state.value,context:a,_event:r,_sessionid:e.sessionId,historyValue:void 0,history:e.state,actions:c.filter(function(f){return!Ji(f)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:e.state.done,tags:e.state.tags,machine:e.machine});return u.changed=!0,u});e.update(i,r),e._stopChildren(),jn.free(e.sessionId)}),this},t.prototype.batch=function(e){var n=this;if(!(this.status===Fe.NotStarted&&this.options.deferEvents)){if(this.status!==Fe.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}if(e.length){var r=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var i,o,l=n.state,c=!1,a=[],u=function(p){var h=je(p);n.forward(h),l=hn(n,function(){return n.machine.transition(l,h,void 0,r||void 0)}),a.push.apply(a,Pe([],ve(n.machine.config.predictableActionArguments?l.actions:l.actions.map(function(m){return Wu(m,l)})),!1)),c=c||!!l.changed};try{for(var f=he(e),s=f.next();!s.done;s=f.next()){var d=s.value;u(d)}}catch(p){i={error:p}}finally{try{s&&!s.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}l.changed=c,l.actions=a,n.update(l,je(e[e.length-1]))})}},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype._nextState=function(e,n){var r=this;n===void 0&&(n=!!this.machine.config.predictableActionArguments&&this._exec);var i=je(e);if(i.name.indexOf(Yo)===0&&!this.state.nextEvents.some(function(l){return l.indexOf(Yo)===0}))throw i.data.data;var o=hn(this,function(){return r.machine.transition(r.state,i,void 0,n||void 0)});return o},t.prototype.nextState=function(e){return this._nextState(e,!1)},t.prototype.forward=function(e){var n,r;try{for(var i=he(this.forwardTo),o=i.next();!o.done;o=i.next()){var l=o.value,c=this.children.get(l);if(!c)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(l,"'."));c.send(e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.defer=function(e){var n=this,r=this.clock.setTimeout(function(){"to"in e&&e.to?n.sendTo(e._event,e.to,!0):n.send(e._event)},e.delay);e.id&&(this.delayedEventsMap[e.id]=r)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,n,r){r===void 0&&(r=this.machine.options.actions),this._exec(e,n.context,n._event,r)},t.prototype.removeChild=function(e){var n;this.children.delete(e),this.forwardTo.delete(e),(n=this.state)===null||n===void 0||delete n.children[e]},t.prototype.stopChild=function(e){var n=this.children.get(e);n&&(this.removeChild(e),ye(n.stop)&&n.stop())},t.prototype.spawn=function(e,n,r){if(this.status!==Fe.Running)return vl(e,n);if(Zo(e))return this.spawnPromise(Promise.resolve(e),n);if(ye(e))return this.spawnCallback(e,n);if(Gu(e))return this.spawnActor(e,n);if(Su(e))return this.spawnObservable(e,n);if(Sn(e))return this.spawnMachine(e,G(G({},r),{id:n}));if(_u(e))return this.spawnBehavior(e,n);throw new Error('Unable to spawn entity "'.concat(n,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,n){var r=this;n===void 0&&(n={});var i=new t(e,G(G({},this.options),{parent:this,id:n.id||e.id})),o=G(G({},Zu),n);o.sync&&i.onTransition(function(c){r.send(ll,{state:c,id:i.id})});var l=i;return this.children.set(i.id,l),o.autoForward&&this.forwardTo.add(i.id),i.onDone(function(c){r.removeChild(i.id),r.send(je(c,{origin:i.id}))}).start(),l},t.prototype.spawnBehavior=function(e,n){var r=Ju(e,{id:n,parent:this});return this.children.set(n,r),r},t.prototype.spawnPromise=function(e,n){var r,i=this,o=!1,l;e.then(function(a){o||(l=a,i.removeChild(n),i.send(je(qr(n,a),{origin:n})))},function(a){if(!o){i.removeChild(n);var u=qn(n,a);try{i.send(je(u,{origin:n}))}catch{i.devTools&&i.devTools.send(u,i.state),i.machine.strict&&i.stop()}}});var c=(r={id:n,send:function(){},subscribe:function(a,u,f){var s=Hr(a,u,f),d=!1;return e.then(function(p){d||(s.next(p),!d&&s.complete())},function(p){d||s.error(p)}),{unsubscribe:function(){return d=!0}}},stop:function(){o=!0},toJSON:function(){return{id:n}},getSnapshot:function(){return l}},r[Ft]=function(){return this},r);return this.children.set(n,c),c},t.prototype.spawnCallback=function(e,n){var r,i=this,o=!1,l=new Set,c=new Set,a,u=function(d){a=d,c.forEach(function(p){return p(d)}),!o&&i.send(je(d,{origin:n}))},f;try{f=e(u,function(d){l.add(d)})}catch(d){this.send(qn(n,d))}if(Zo(f))return this.spawnPromise(f,n);var s=(r={id:n,send:function(d){return l.forEach(function(p){return p(d)})},subscribe:function(d){var p=Hr(d);return c.add(p.next),{unsubscribe:function(){c.delete(p.next)}}},stop:function(){o=!0,ye(f)&&f()},toJSON:function(){return{id:n}},getSnapshot:function(){return a}},r[Ft]=function(){return this},r);return this.children.set(n,s),s},t.prototype.spawnObservable=function(e,n){var r,i=this,o,l=e.subscribe(function(a){o=a,i.send(je(a,{origin:n}))},function(a){i.removeChild(n),i.send(je(qn(n,a),{origin:n}))},function(){i.removeChild(n),i.send(je(qr(n),{origin:n}))}),c=(r={id:n,send:function(){},subscribe:function(a,u,f){return e.subscribe(a,u,f)},stop:function(){return l.unsubscribe()},getSnapshot:function(){return o},toJSON:function(){return{id:n}}},r[Ft]=function(){return this},r);return this.children.set(n,c),c},t.prototype.spawnActor=function(e,n){return this.children.set(n,e),e},t.prototype.spawnActivity=function(e){var n=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(n){var r=n(this.state.context,e);this.spawnEffect(e.id,r)}},t.prototype.spawnEffect=function(e,n){var r;this.children.set(e,(r={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:n||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},r[Ft]=function(){return this},r))},t.prototype.attachDev=function(){var e=wo();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var n=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(G(G({name:this.id,autoPause:!0,stateSanitizer:function(r){return{value:r.value,context:r.context,actions:r.actions}}},n),{features:G({jump:!1,skip:!1},n?n.features:void 0)}),this.machine),this.devTools.init(this.state)}Ku(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Ft]=function(){return this},t.prototype.getSnapshot=function(){return this.status===Fe.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return setTimeout(e,n)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=Ro,t}();function Ro(t,e){var n=new $u(t,e);return n}function ef(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function xr(t){return G(G({type:Qi},t),{toJSON:function(){t.onDone,t.onError;var e=Eo(t,["onDone","onError"]);return G(G({},e),{type:Qi,src:ef(t.src)})}})}var Lr="",eo="#",Fi="*",cn={},un=function(t){return t[0]===eo},tf=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},nf=function(){function t(e,n,r,i){r===void 0&&(r="context"in e?e.context:void 0);var o=this,l;this.config=e,this._context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(tf(),n),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:cl),this.id=this.config.id||Pe([this.machine.key],ve(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(l=this.config.schema)!==null&&l!==void 0?l:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?Hn(this.config.states,function(u,f){var s,d=new t(u,{},void 0,{parent:o,key:f});return Object.assign(o.idMap,G((s={},s[d.id]=d,s),d.idMap)),d}):cn;var c=0;function a(u){var f,s;u.order=c++;try{for(var d=he(yl(u)),p=d.next();!p.done;p=d.next()){var h=p.value;a(h)}}catch(m){f={error:m}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(f)throw f.error}}}a(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(u){var f=u.event;return f===Lr}):Lr in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=ft(this.config.entry||this.config.onEntry).map(function(u){return cr(u)}),this.onExit=ft(this.config.exit||this.config.onExit).map(function(u){return cr(u)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=ft(this.config.invoke).map(function(u,f){var s,d;if(Sn(u)){var p=Ir(o.id,f);return o.machine.options.services=G((s={},s[p]=u,s),o.machine.options.services),xr({src:p,id:p})}else if(_e(u.src)){var p=u.id||Ir(o.id,f);return xr(G(G({},u),{id:p,src:u.src}))}else if(Sn(u.src)||ye(u.src)){var p=u.id||Ir(o.id,f);return o.machine.options.services=G((d={},d[p]=u.src,d),o.machine.options.services),xr(G(G({id:p},u),{src:p}))}else{var h=u.src;return xr(G(G({id:Ir(o.id,f)},u),{src:h}))}}),this.activities=ft(this.config.activities).concat(this.invoke).map(function(u){return To(u)}),this.transition=this.transition.bind(this),this.tags=ft(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||bl(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,n){var r=this.options,i=r.actions,o=r.activities,l=r.guards,c=r.services,a=r.delays;return new t(this.config,{actions:G(G({},i),e.actions),activities:G(G({},o),e.activities),guards:G(G({},l),e.guards),services:G(G({},c),e.services),delays:G(G({},a),e.delays)},n??this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return ye(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Hn(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(n,r){return n[r.eventType]=n[r.eventType]||[],n[r.eventType].push(r),n},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var n=e===Lr,r=this.transitions.filter(function(i){var o=i.eventType===e;return n?o:o||i.eventType===Fi});return this.__cache.candidates[e]=r,r},t.prototype.getDelayedTransitions=function(){var e=this,n=this.config.after;if(!n)return[];var r=function(o,l){var c=ye(o)?"".concat(e.id,":delay[").concat(l,"]"):o,a=Lu(c,e.id);return e.onEntry.push(Pu(a,{delay:o})),e.onExit.push(Du(a)),a},i=In(n)?n.map(function(o,l){var c=r(o.delay,l);return G(G({},o),{event:c})}):De(Object.keys(n).map(function(o,l){var c=n[o],a=_e(c)?{target:c}:c,u=isNaN(+o)?o:+o,f=r(u,l);return ft(a).map(function(s){return G(G({},s),{event:f,delay:u})})}));return i.map(function(o){var l=o.delay;return G(G({},e.formatTransition(o)),{delay:l})})},t.prototype.getStateNodes=function(e){var n,r=this;if(!e)return[];var i=e instanceof ht?e.value:er(e,this.delimiter);if(_e(i)){var o=this.getStateNode(i).initial;return o!==void 0?this.getStateNodes((n={},n[i]=o,n)):[this,this.states[i]]}var l=Object.keys(i),c=[this];return c.push.apply(c,Pe([],ve(De(l.map(function(a){return r.getStateNode(a).getStateNodes(i[a])}))),!1)),c},t.prototype.handles=function(e){var n=ul(e);return this.events.includes(n)},t.prototype.resolveState=function(e){var n=e instanceof ht?e:ht.create(e),r=Array.from(Wn([],this.getStateNodes(n.value)));return new ht(G(G({},n),{value:this.resolve(n.value),configuration:r,done:Wr(r,this),tags:ta(r),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,n,r){var i=this.getStateNode(e),o=i.next(n,r);return!o||!o.transitions.length?this.next(n,r):o},t.prototype.transitionCompoundNode=function(e,n,r){var i=Object.keys(e),o=this.getStateNode(i[0]),l=o._transition(e[i[0]],n,r);return!l||!l.transitions.length?this.next(n,r):l},t.prototype.transitionParallelNode=function(e,n,r){var i,o,l={};try{for(var c=he(Object.keys(e)),a=c.next();!a.done;a=c.next()){var u=a.value,f=e[u];if(f){var s=this.getStateNode(u),d=s._transition(f,n,r);d&&(l[u]=d)}}}catch(v){i={error:v}}finally{try{a&&!a.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}var p=Object.keys(l).map(function(v){return l[v]}),h=De(p.map(function(v){return v.transitions})),m=p.some(function(v){return v.transitions.length>0});if(!m)return this.next(n,r);var g=De(Object.keys(l).map(function(v){return l[v].configuration}));return{transitions:h,exitSet:De(p.map(function(v){return v.exitSet})),configuration:g,source:n,actions:De(Object.keys(l).map(function(v){return l[v].actions}))}},t.prototype._transition=function(e,n,r){return _e(e)?this.transitionLeafNode(e,n,r):Object.keys(e).length===1?this.transitionCompoundNode(e,n,r):this.transitionParallelNode(e,n,r)},t.prototype.getTransitionData=function(e,n){return this._transition(e.value,e,je(n))},t.prototype.next=function(e,n){var r,i,o=this,l=n.name,c=[],a=[],u;try{for(var f=he(this.getCandidates(l)),s=f.next();!s.done;s=f.next()){var d=s.value,p=d.cond,h=d.in,m=e.context,g=h?_e(h)&&un(h)?e.matches(er(this.getStateNodeById(h).path,this.delimiter)):ko(er(h,this.delimiter),vu(this.path.slice(0,-2))(e.value)):!0,v=!1;try{v=!p||hl(this.machine,p,m,n,e)}catch(b){throw new Error("Unable to evaluate guard '".concat(p.name||p.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,`':
`).concat(b.message))}if(v&&g){d.target!==void 0&&(a=d.target),c.push.apply(c,Pe([],ve(d.actions),!1)),u=d;break}}}catch(b){r={error:b}}finally{try{s&&!s.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}if(u){if(!a.length)return{transitions:[u],exitSet:[],configuration:e.value?[this]:[],source:e,actions:c};var y=De(a.map(function(b){return o.getRelativeStateNodes(b,e.historyValue)})),_=!!u.internal;return{transitions:[u],exitSet:_?[]:De(a.map(function(b){return o.getPotentiallyReenteringNodes(b)})),configuration:y,source:e,actions:c}}},t.prototype.getPotentiallyReenteringNodes=function(e){if(this.order<e.order)return[this];for(var n=[],r=this,i=e;r&&r!==i;)n.push(r),r=r.parent;return r!==i?[]:(n.push(i),n)},t.prototype.getActions=function(e,n,r,i,o,l,c){var a,u,f,s,d=this,p=l?Wn([],this.getStateNodes(l.value)):[],h=new Set;try{for(var m=he(Array.from(e).sort(function(j,A){return j.order-A.order})),g=m.next();!g.done;g=m.next()){var v=g.value;(!Xn(p,v)||Xn(r.exitSet,v)||v.parent&&h.has(v.parent))&&h.add(v)}}catch(j){a={error:j}}finally{try{g&&!g.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}try{for(var y=he(p),_=y.next();!_.done;_=y.next()){var v=_.value;(!Xn(e,v)||Xn(r.exitSet,v.parent))&&r.exitSet.push(v)}}catch(j){f={error:j}}finally{try{_&&!_.done&&(s=y.return)&&s.call(y)}finally{if(f)throw f.error}}r.exitSet.sort(function(j,A){return A.order-j.order});var b=Array.from(h).sort(function(j,A){return j.order-A.order}),E=new Set(r.exitSet),w=De(b.map(function(j){var A=[];if(j.type!=="final")return A;var q=j.parent;if(!q.parent)return A;A.push(Br(j.id,j.doneData),Br(q.id,j.doneData?oi(j.doneData,i,o):void 0));var z=q.parent;return z.type==="parallel"&&ur(z).every(function(ge){return Wr(r.configuration,ge)})&&A.push(Br(z.id)),A})),S=b.map(function(j){var A=j.onEntry,q=j.activities.map(function(z){return Iu(z)});return{type:"entry",actions:jt(c?Pe(Pe([],ve(A),!1),ve(q),!1):Pe(Pe([],ve(q),!1),ve(A),!1),d.machine.options.actions)}}).concat({type:"state_done",actions:w.map(function(j){return wu(j)})}),x=Array.from(E).map(function(j){return{type:"exit",actions:jt(Pe(Pe([],ve(j.onExit),!1),ve(j.activities.map(function(A){return Bu(A)})),!1),d.machine.options.actions)}}),L=x.concat({type:"transition",actions:jt(r.actions,this.machine.options.actions)}).concat(S);if(n){var I=jt(De(Pe([],ve(e),!1).sort(function(j,A){return A.order-j.order}).map(function(j){return j.onExit})),this.machine.options.actions).filter(function(j){return!Ji(j)});return L.concat({type:"stop",actions:I})}return L},t.prototype.transition=function(e,n,r,i){e===void 0&&(e=this.initialState);var o=je(n),l;if(e instanceof ht)l=r===void 0?e:this.resolveState(ht.from(e,r));else{var c=_e(e)?this.resolve(ii(this.getResolvedPath(e))):this.resolve(e),a=r??this.machine.context;l=this.resolveState(ht.from(c,a))}if(this.strict&&!this.events.includes(o.name)&&!bu(o.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(o.name,"'"));var u=this._transition(l.value,l,o)||{transitions:[],configuration:[],exitSet:[],source:l,actions:[]},f=Wn([],this.getStateNodes(l.value)),s=u.configuration.length?Wn(f,u.configuration):f;return u.configuration=Pe([],ve(s),!1),this.resolveTransition(u,l,l.context,i,o)},t.prototype.resolveRaisedTransition=function(e,n,r,i){var o,l=e.actions;return e=this.transition(e,n,void 0,i),e._event=r,e.event=r.data,(o=e.actions).unshift.apply(o,Pe([],ve(l),!1)),e},t.prototype.resolveTransition=function(e,n,r,i,o){var l,c,a,u,f=this;o===void 0&&(o=_n);var s=e.configuration,d=!n||e.transitions.length>0,p=d?e.configuration:n?n.configuration:[],h=Wr(p,this),m=d?Uu(this.machine,s):void 0,g=n?n.historyValue?n.historyValue:e.source?this.machine.historyValue(n.value):void 0:void 0,v=this.getActions(new Set(p),h,e,r,o,n,i),y=n?G({},n.activities):{};try{for(var _=he(v),b=_.next();!b.done;b=_.next()){var E=b.value;try{for(var w=(a=void 0,he(E.actions)),S=w.next();!S.done;S=w.next()){var x=S.value;x.type===Xi?y[x.activity.id||x.activity.type]=x:x.type===So&&(y[x.activity.id||x.activity.type]=!1)}}catch(ke){a={error:ke}}finally{try{S&&!S.done&&(u=w.return)&&u.call(w)}finally{if(a)throw a.error}}}}catch(ke){l={error:ke}}finally{try{b&&!b.done&&(c=_.return)&&c.call(_)}finally{if(l)throw l.error}}var L=ve(ai(this,n,r,o,v,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),I=L[0],j=L[1],A=ve(Cu(I,Ji),2),q=A[0],z=A[1],ge=I.filter(function(ke){var Be;return ke.type===Xi&&((Be=ke.activity)===null||Be===void 0?void 0:Be.type)===Qi}),me=ge.reduce(function(ke,Be){return ke[Be.activity.id]=ju(Be.activity,f.machine,j,o),ke},n?G({},n.children):{}),ce=new ht({value:m||n.value,context:j,_event:o,_sessionid:n?n._sessionid:null,historyValue:m?g?Au(g,m):void 0:n?n.historyValue:void 0,history:!m||e.source?n:void 0,actions:m?z:[],activities:m?y:n?n.activities:{},events:[],configuration:p,transitions:e.transitions,children:me,done:h,tags:ta(p),machine:this}),U=r!==j;ce.changed=o.name===ll||U;var ue=ce.history;ue&&delete ue.history;var Me=!h&&(this._transient||s.some(function(ke){return ke._transient}));if(!d&&(!Me||o.name===Lr))return ce;var M=ce;if(!h)for(Me&&(M=this.resolveRaisedTransition(M,{type:uu},o,i));q.length;){var le=q.shift();M=this.resolveRaisedTransition(M,le._event,o,i)}var et=M.changed||(ue?!!M.actions.length||U||typeof ue.value!=typeof M.value||!Cl(M.value,ue.value):void 0);return M.changed=et,M.history=ue,M},t.prototype.getStateNode=function(e){if(un(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var n=this.states[e];if(!n)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return n},t.prototype.getStateNodeById=function(e){var n=un(e)?e.slice(eo.length):e;if(n===this.id)return this;var r=this.machine.idMap[n];if(!r)throw new Error("Child state node '#".concat(n,"' does not exist on machine '").concat(this.id,"'"));return r},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&un(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var n=Ki(e,this.delimiter).slice(),r=this;n.length;){var i=n.shift();if(!i.length)break;r=r.getStateNode(i)}return r},t.prototype.resolve=function(e){var n,r=this;if(!e)return this.initialStateValue||cn;switch(this.type){case"parallel":return Hn(this.initialStateValue,function(o,l){return o?r.getStateNode(l).resolve(e[l]||o):cn});case"compound":if(_e(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(n={},n[e]=i.initialStateValue,n):e}return Object.keys(e).length?Hn(e,function(o,l){return o?r.getStateNode(l).resolve(o):cn}):this.initialStateValue||{};default:return e||cn}},t.prototype.getResolvedPath=function(e){if(un(e)){var n=this.machine.idMap[e.slice(eo.length)];if(!n)throw new Error("Unable to find state node '".concat(e,"'"));return n.path}return Ki(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var n;if(this.type==="parallel")n=Jo(this.states,function(r){return r.initialStateValue||cn},function(r){return r.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));n=si(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else n={};return this.__cache.initialStateValue=n,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,n){this._init();var r=this.getStateNodes(e);return this.resolveTransition({configuration:r,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,n??this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var n=this.config;_e(n.target)?e=un(n.target)?ii(this.machine.getStateNodeById(n.target).path.slice(this.path.length-1)):n.target:e=n.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,n,r){return r===void 0&&(r=!0),r?e.type==="history"?e.resolveHistory(n):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if(si(this))return[this];if(this.type==="compound"&&!this.initial)return[this];var n=zr(this.initialStateValue);return De(n.map(function(r){return e.getFromRelativePath(r)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var n=ve(e),r=n[0],i=n.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(r,"' from node with no states"));var o=this.getStateNode(r);if(o.type==="history")return o.resolveHistory();if(!this.states[r])throw new Error("Child state '".concat(r,"' does not exist on '").concat(this.id,"'"));return this.states[r].getFromRelativePath(i)},t.prototype.historyValue=function(e){if(Object.keys(this.states).length)return{current:e||this.initialStateValue,states:Jo(this.states,function(n,r){if(!e)return n.historyValue();var i=_e(e)?void 0:e[r];return n.historyValue(i||n.initialStateValue)},function(n){return!n.history})}},t.prototype.resolveHistory=function(e){var n=this;if(this.type!=="history")return[this];var r=this.parent;if(!e){var i=this.target;return i?De(zr(i).map(function(l){return r.getFromRelativePath(l)})):r.initialStateNodes}var o=yu(r.path,"states")(e).current;return _e(o)?[r.getStateNode(o)]:De(zr(o).map(function(l){return n.history==="deep"?r.getFromRelativePath(l):[r.states[l[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,n=De(Object.keys(this.states).map(function(r){return e.states[r].stateIds}));return[this.id].concat(n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,n,r,i;if(this.__cache.events)return this.__cache.events;var o=this.states,l=new Set(this.ownEvents);if(o)try{for(var c=he(Object.keys(o)),a=c.next();!a.done;a=c.next()){var u=a.value,f=o[u];if(f.states)try{for(var s=(r=void 0,he(f.events)),d=s.next();!d.done;d=s.next()){var p=d.value;l.add("".concat(p))}}catch(h){r={error:h}}finally{try{d&&!d.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}}catch(h){e={error:h}}finally{try{a&&!a.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(l)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(n){return!(!n.target&&!n.actions.length&&n.internal)}).map(function(n){return n.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var n=this;if(e!==void 0)return e.map(function(r){if(!_e(r))return r;var i=r[0]===n.delimiter;if(i&&!n.parent)return n.getStateNodeByPath(r.slice(1));var o=i?n.key+r:r;if(n.parent)try{var l=n.parent.getStateNodeByPath(o);return l}catch(c){throw new Error("Invalid transition definition for state node '".concat(n.id,`':
`).concat(c.message))}else return n.getStateNodeByPath(o)})},t.prototype.formatTransition=function(e){var n=this,r=Tu(e.target),i="internal"in e?e.internal:r?r.some(function(a){return _e(a)&&a[0]===n.delimiter}):!0,o=this.machine.options.guards,l=this.resolveTarget(r),c=G(G({},e),{actions:jt(ft(e.actions)),cond:pl(e.cond,o),target:l,source:this,internal:i,eventType:e.event,toJSON:function(){return G(G({},c),{target:c.target?c.target.map(function(a){return"#".concat(a.id)}):void 0,source:"#".concat(n.id)})}});return c},t.prototype.formatTransitions=function(){var e,n,r=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var o=this.config.on,l=Fi,c=o[l],a=c===void 0?[]:c,u=Eo(o,[typeof l=="symbol"?l:l+""]);i=De(Object.keys(u).map(function(y){var _=ln(y,u[y]);return _}).concat(ln(Fi,a)))}var f=this.config.always?ln("",this.config.always):[],s=this.config.onDone?ln(String(Br(this.id)),this.config.onDone):[],d=De(this.invoke.map(function(y){var _=[];return y.onDone&&_.push.apply(_,Pe([],ve(ln(String(qr(y.id)),y.onDone)),!1)),y.onError&&_.push.apply(_,Pe([],ve(ln(String(qn(y.id)),y.onError)),!1)),_})),p=this.after,h=De(Pe(Pe(Pe(Pe([],ve(s),!1),ve(d),!1),ve(i),!1),ve(f),!1).map(function(y){return ft(y).map(function(_){return r.formatTransition(_)})}));try{for(var m=he(p),g=m.next();!g.done;g=m.next()){var v=g.value;h.push(v)}}catch(y){e={error:y}}finally{try{g&&!g.done&&(n=m.return)&&n.call(m)}finally{if(e)throw e.error}}return h},t}();function Al(t,e){return new nf(t,e)}const El="ROV-",rf=74646,li={host:"0.peerjs.com",secure:!0,path:"/",port:443},of={host:"raspberrypi.local",path:"/",secure:!1,port:9e3};var X=(t=>(t.connecting="Connecting",t.connected="Connected",t.reconnecting="Reconnecting",t.disconnected="Disconnected",t))(X||{}),Oe=(t=>(t.clearAll="all",t.default="Loading...",t.ipScan="Scanning for ROV IP address...",t.internetCheck="Checking internet access...",t.serverConnecting="Connecting to peer server...",t.serverReconnecting="Reconnecting to peer server...",t.webrtcConnecting="Searching for ROV...",t.webrtcReconnecting="Reconnecting to ROV...",t.reloadingSite="Reloading site...",t.awaitingVideoCall="Waiting for livestream...",t.awaitingRovReconnect="Waiting for ROV to reconnect...",t))(Oe||{});const ra=[{btnName:"button_1",helpLabel:"TBD",tooltipPlacement:"left"},{btnName:"button_2",remoteAction:"record",helpLabel:"Start/Stop Recording",tooltipPlacement:"left"},{btnName:"button_3",remoteAction:"photo",helpLabel:"Take Photo",tooltipPlacement:"left"},{btnName:"button_4",remoteAction:"lights",helpLabel:"Toggle Lights",tooltipPlacement:"left"},{btnName:"shoulder_button_front_left",helpLabel:"TBD",tooltipPlacement:"right"},{btnName:"shoulder_button_front_right",remoteAction:"claw_open",helpLabel:"TBD",tooltipPlacement:"left"},{btnName:"shoulder_trigger_back_left",remoteAction:"claw_close",helpLabel:"Open Claw",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"shoulder_trigger_back_right",remoteAction:"claw_close",helpLabel:"Close Claw",holdAllowed:!0,tooltipPlacement:"left"},{btnName:"select_button",helpLabel:"Show/Hide Gamepad Help",tooltipPlacement:"right"},{btnName:"start_button",helpLabel:"Show/Hide Gamepad Help",tooltipPlacement:"left"},{btnName:"stick_button_left",helpLabel:"Move Forward/Back & Turn",tooltipPlacement:"right"},{btnName:"stick_button_right",helpLabel:"Move Up/Down & Left/Right",tooltipPlacement:"left"},{btnName:"d_pad_up",remoteAction:"exposure_plus",helpLabel:"Increase Camera Brightness",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"d_pad_down",remoteAction:"exposure_minus",helpLabel:"Decreases Camera Brightness",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"d_pad_left",remoteAction:"v_quality_plus",helpLabel:"Decrease Video Quality (reduces latency)",holdAllowed:!0,tooltipPlacement:"right"},{btnName:"d_pad_right",remoteAction:"v_quality_minus",helpLabel:"Increase Video Quality (increases latency)",holdAllowed:!0,tooltipPlacement:"right"}],Xr=["button_1","button_2","button_3","button_4","shoulder_button_front_left","shoulder_button_front_right","shoulder_trigger_back_left","shoulder_trigger_back_right","select_button","start_button","stick_button_left","stick_button_right","d_pad_up","d_pad_down","d_pad_left","d_pad_right"],ia="touched",oa="pressed";let mn=[];function Ae(t){let e=[],n=(l,c=!0)=>(e.includes(l)||e.push(l),c&&l(t),()=>{e=e.filter(a=>a!=l)});function r(l){if(l===t&&(t===null||typeof t!="object"))return;let c=t;t=l;for(let a of e)a(t,c)}function i(){let l=mn[mn.length-1];return l&&n(l[0],!1),t}if(typeof t=="function")return af(t);function o(){for(let l of e)l(t,t)}return{subscribe:n,set:r,get:i,refresh:o,update:l=>{typeof l=="function"&&r(l(t))}}}function af(t){let e=Ae(null),n=[r];return r(),e;function r(){if(mn.includes(n))throw Error("Circular computation");mn.push(n);let i;try{i=t()}catch(o){throw mn.pop(),o}mn.pop(),e.set(i)}}var Yt=(t=>(t[t.Alert=0]="Alert",t[t.Password=1]="Password",t[t.ScrollingText=2]="ScrollingText",t))(Yt||{});const ci=Ae(!1),Si=Ae(!1);Ae(!1);const Po=Ae(!1),aa=Ae(null),sf=Ae("raspberrypi.local"),$t=Ae(0);Ae(!1);const sa=Ae(!1),Cn=Ae("No Peer Id");Ae(null);Ae(null);Ae(null);const vn=Ae(X.disconnected),kn=Ae(X.disconnected),ui=Ae(X.disconnected),Sl=Ae(null);function lf(t,e,n){e.set(localStorage.getItem(t)||e.get()||n),e.subscribe(r=>{localStorage.setItem(t,r)})}function cf(t,e,n){e.set(parseFloat(localStorage.getItem(t))||e.get()||n),e.subscribe(r=>{localStorage.setItem(t,String(r))})}function Mt(t){return e=>{(e.key==="Enter"||e.key===" ")&&t(e)}}const fi=["Ancient","Dawn","Small","Broken","Red","Cold","Wild","Divine","Empty","Patient","Holy","Long","Wispy","White","Delicate","Bold","Billowing","Blue","Crimson","Aged","Misty","Snowy","Withered","Little","Frosty","Weathered","Nameless","Fragrant","Lively","Quiet","Purple","Proud","Dry","Bitter","Dark","Icy","Twilight","Wandering","Solitary","Morning","Lingering","Still","Late","Sparkling","Restless","Winter","Silent","Floral","Young","Green","Cool","Autumn","Falling","Spring","Summer","Polished","Hidden","Damp","Muddy","Black","Old","Rough"],di=["Pond","Snow","Glade","Hill","Voice","River","Sun","Dawn","Forest","Frog","Grass","Shadow","Dust","Water","Meadow","Moon","Thunder","Sun","Wildflower","Snowflake","Silence","Haze","Shape","Pine","Waterfall","Sound","Wood","Tree","Night","Flower","Dream","Cherry","Resonance","Firefly","Bush","Star","Darkness","Lake","Frost","Paper","Surf","Fog","Brook","Mountain","Field","Bird","Leaf","Sea","Water","Sky","Smoke","Sunset","Glitter","Dew","Butterfly","Wind","Fire","Rain","Morning","Feather","Cloud","Breeze","Violet","Wave"];function uf(t,e){let n=fi.length>>>0,r=di.length>>>0,i=Math.max(n,r)>>>0,o=Math.max(1,(t+1)%i)>>>0,l=Math.max(1,(e+1)%i)>>>0,c=fi[(o+l)%n],a=di[o*l%r];return c+"-"+a}function la(){var t=fi[Math.floor(Math.random()*fi.length)],e=di[Math.floor(Math.random()*di.length)];return t+"-"+e}function ff(t){for(var e=window.location.search.substring(1),n=e.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(decodeURIComponent(i[0])==t)return decodeURIComponent(i[1])}}function ca(t,e,n){var r,i,o,l=null,c=0;n||(n={});var a=function(){c=n.leading===!1?0:Date.now(),l=null,o=t.apply(r,i),l||(r=i=null)};return function(){var u=Date.now();!c&&n.leading===!1&&(c=u);var f=e-(u-c);return r=this,i=arguments,f<=0||f>e?(l&&(clearTimeout(l),l=null),c=u,o=t.apply(r,i),l||(r=i=null)):!l&&n.trailing!==!1&&(l=setTimeout(a,f)),o}}class df{constructor(){N(this,"items",[]);this.items=[]}push(e){this.items.push(e)}pop(){if(!this.isEmpty())return this.items.splice(0,1)}peak(){if(!this.isEmpty())return this.items[0]}isEmpty(){return this.items.length==0}printQueue(){for(var e="",n=0;n<this.items.length;n++)e+=this.items[n]+" ";return e}}function pf(t){return new Promise(e=>{console.info("checkingUrl",t);try{fetch(t).then(()=>{e(!0)}).catch(n=>{console.warn("Internet Offline, starting switch to local mode",n),e(!1)})}catch(n){console.warn("Error Checking internet, starting switch to local mode",n),e(!1)}})}window.closeFullscreen=()=>{const t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;if(t){const e=()=>{t.classList.remove("fullscreen-open")};document.exitFullscreen?document.exitFullscreen().then(e):document.msExitFullscreen?document.msExitFullscreen().then(e):document.mozCancelFullScreen?document.mozCancelFullScreen().then(e):document.webkitExitFullscreen&&document.webkitExitFullscreen().then(e)}};function hf(t,e){e=e||document.documentElement;var n=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;!n||e!==n?(e.requestFullscreen||e.webkitEnterFullscreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen).apply(e):(document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen).apply(document)}var kl={exports:{}};(function(t){var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),t.exports.binaryFeatures=e;var n=t.exports.BlobBuilder;typeof window<"u"&&(n=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function r(){this._pieces=[],this._parts=[]}r.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},r.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);e.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var i=new n,o=0,l=this._parts.length;o<l;o++)i.append(this._parts[o]);return i.getBlob()}else return new Blob(this._parts)},t.exports.BufferBuilder=r})(kl);var Tl=kl.exports,gf=Tl.BufferBuilder,ua=Tl.binaryFeatures,mf={unpack:function(t){var e=new Ve(t);return e.unpack()},pack:function(t){var e=new Ue;e.pack(t);var n=e.getBuffer();return n}},vf=mf;function Ve(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}Ve.prototype.unpack=function(){var t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;var e;if((e=t^160)<=15)return this.unpack_raw(e);if((e=t^176)<=15)return this.unpack_string(e);if((e=t^144)<=15)return this.unpack_array(e);if((e=t^128)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}};Ve.prototype.unpack_uint8=function(){var t=this.dataView[this.index]&255;return this.index++,t};Ve.prototype.unpack_uint16=function(){var t=this.read(2),e=(t[0]&255)*256+(t[1]&255);return this.index+=2,e};Ve.prototype.unpack_uint32=function(){var t=this.read(4),e=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,e};Ve.prototype.unpack_uint64=function(){var t=this.read(8),e=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,e};Ve.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256};Ve.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536};Ve.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)};Ve.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)};Ve.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e};Ve.prototype.unpack_string=function(t){for(var e=this.read(t),n=0,r="",i,o;n<t;)i=e[n],i<128?(r+=String.fromCharCode(i),n++):(i^192)<32?(o=(i^192)<<6|e[n+1]&63,r+=String.fromCharCode(o),n+=2):(o=(i&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,r+=String.fromCharCode(o),n+=3);return this.index+=t,r};Ve.prototype.unpack_array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.unpack();return e};Ve.prototype.unpack_map=function(t){for(var e={},n=0;n<t;n++){var r=this.unpack(),i=this.unpack();e[r]=i}return e};Ve.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,n=(t>>23&255)-127,r=t&8388607|8388608;return(e===0?1:-1)*r*Math.pow(2,n-23)};Ve.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),n=t>>31,r=(t>>20&2047)-1023,i=t&1048575|1048576,o=i*Math.pow(2,r-20)+e*Math.pow(2,r-52);return(n===0?1:-1)*o};Ve.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")};function Ue(){this.bufferBuilder=new gf}Ue.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};Ue.prototype.pack=function(t){var e=typeof t;if(e==="string")this.pack_string(t);else if(e==="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(e==="boolean")t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if(e==="undefined")this.bufferBuilder.append(192);else if(e==="object")if(t===null)this.bufferBuilder.append(192);else{var n=t.constructor;if(n==Array)this.pack_array(t);else if(n==Blob||n==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(n==ArrayBuffer)ua.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)ua.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(t);else if(n==Date)this.pack_string(t.toString());else if(typeof t.toBinaryPack=="function")this.bufferBuilder.append(t.toBinaryPack());else throw new Error('Type "'+n.toString()+'" not yet supported')}else throw new Error('Type "'+e+'" not yet supported');this.bufferBuilder.flush()};Ue.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};Ue.prototype.pack_string=function(t){var e=bf(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};Ue.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(e);else throw new Error("Invalid length");for(var n=0;n<e;n++)this.pack(t[n])};Ue.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(t&255);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")};Ue.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var n=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),o=Math.pow(2,32),l=e<<31|n+1023<<20|i/o&1048575,c=i%o;this.bufferBuilder.append(203),this.pack_int32(l),this.pack_int32(c)};Ue.prototype.pack_object=function(t){var e=Object.keys(t),n=e.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this.bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");for(var r in t)t.hasOwnProperty(r)&&(this.pack(r),this.pack(t[r]))};Ue.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)};Ue.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(t&255)};Ue.prototype.pack_uint32=function(t){var e=t&4294967295;this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};Ue.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};Ue.prototype.pack_int8=function(t){this.bufferBuilder.append(t&255)};Ue.prototype.pack_int16=function(t){this.bufferBuilder.append((t&65280)>>8),this.bufferBuilder.append(t&255)};Ue.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};Ue.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};function yf(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function bf(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,yf).length}const fa=mo(vf);let wl=!0,Rl=!0;function Qn(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function Bn(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(l,c){if(l!==e)return i.apply(this,arguments);const a=u=>{const f=n(u);f&&(c.handleEvent?c.handleEvent(f):c(f))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(c,a),i.apply(this,[l,a])};const o=r.removeEventListener;r.removeEventListener=function(l,c){if(l!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(c))return o.apply(this,arguments);const a=this._eventMap[e].get(c);return this._eventMap[e].delete(c),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[l,a])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(l){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),l&&this.addEventListener(e,this["_on"+e]=l)},enumerable:!0,configurable:!0})}function _f(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(wl=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Cf(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Rl=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Oo(){if(typeof window=="object"){if(wl)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function ki(t,e){Rl&&console.warn(t+" is deprecated, please use "+e+" instead.")}function Af(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=Qn(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=Qn(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=Qn(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=Qn(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function da(t){return Object.prototype.toString.call(t)==="[object Object]"}function Pl(t){return da(t)?Object.keys(t).reduce(function(e,n){const r=da(t[n]),i=r?Pl(t[n]):t[n],o=r&&!Object.keys(i).length;return i===void 0||o?e:Object.assign(e,{[n]:i})},{}):t}function to(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?to(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{to(t,t.get(i),n)})}))}function pa(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const o=[];return t.forEach(l=>{l.type==="track"&&l.trackIdentifier===e.id&&o.push(l)}),o.forEach(l=>{t.forEach(c=>{c.type===r&&c.trackId===l.id&&to(t,c,i)})}),i}const ha=Oo;function Ol(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(c){if(typeof c!="object"||c.mandatory||c.optional)return c;const a={};return Object.keys(c).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const f=typeof c[u]=="object"?c[u]:{ideal:c[u]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const s=function(d,p){return d?d+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(f.ideal!==void 0){a.optional=a.optional||[];let d={};typeof f.ideal=="number"?(d[s("min",u)]=f.ideal,a.optional.push(d),d={},d[s("max",u)]=f.ideal,a.optional.push(d)):(d[s("",u)]=f.ideal,a.optional.push(d))}f.exact!==void 0&&typeof f.exact!="number"?(a.mandatory=a.mandatory||{},a.mandatory[s("",u)]=f.exact):["min","max"].forEach(d=>{f[d]!==void 0&&(a.mandatory=a.mandatory||{},a.mandatory[s(d,u)]=f[d])})}),c.advanced&&(a.optional=(a.optional||[]).concat(c.advanced)),a},i=function(c,a){if(e.version>=61)return a(c);if(c=JSON.parse(JSON.stringify(c)),c&&typeof c.audio=="object"){const u=function(f,s,d){s in f&&!(d in f)&&(f[d]=f[s],delete f[s])};c=JSON.parse(JSON.stringify(c)),u(c.audio,"autoGainControl","googAutoGainControl"),u(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=r(c.audio)}if(c&&typeof c.video=="object"){let u=c.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const f=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete c.video.facingMode;let s;if(u.exact==="environment"||u.ideal==="environment"?s=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(s=["front"]),s)return n.mediaDevices.enumerateDevices().then(d=>{d=d.filter(h=>h.kind==="videoinput");let p=d.find(h=>s.some(m=>h.label.toLowerCase().includes(m)));return!p&&d.length&&s.includes("back")&&(p=d[d.length-1]),p&&(c.video.deviceId=u.exact?{exact:p.deviceId}:{ideal:p.deviceId}),c.video=r(c.video),ha("chrome: "+JSON.stringify(c)),a(c)})}c.video=r(c.video)}return ha("chrome: "+JSON.stringify(c)),a(c)},o=function(c){return e.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(c,a,u){i(c,f=>{n.webkitGetUserMedia(f,a,s=>{u&&u(o(s))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(a){return i(a,u=>c(u).then(f=>{if(u.audio&&!f.getAudioTracks().length||u.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(s=>{s.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(o(f))))}}}function Ef(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const o=r.video&&r.video.width,l=r.video&&r.video.height,c=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:c||3}},o&&(r.video.mandatory.maxWidth=o),l&&(r.video.mandatory.maxHeight=l),t.navigator.mediaDevices.getUserMedia(r)})}}}function Ml(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Dl(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(c=>c.track&&c.track.id===i.track.id):o={track:i.track};const l=new Event("track");l.track=i.track,l.receiver=o,l.transceiver={receiver:o},l.streams=[r.stream],this.dispatchEvent(l)}),r.stream.getTracks().forEach(i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(c=>c.track&&c.track.id===i.id):o={track:i};const l=new Event("track");l.track=i,l.receiver=o,l.transceiver={receiver:o},l.streams=[r.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Bn(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Il(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,a){let u=i.apply(this,arguments);return u||(u=e(this,c),this._senders.push(u)),u};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){o.apply(this,arguments);const a=this._senders.indexOf(c);a!==-1&&this._senders.splice(a,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(l=>{this._senders.push(e(this,l))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(l=>{const c=this._senders.find(a=>a.track===l);c&&this._senders.splice(this._senders.indexOf(c),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Bl(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const l=function(a){const u={};return a.result().forEach(s=>{const d={id:s.id,timestamp:s.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[s.type]||s.type};s.names().forEach(p=>{d[p]=s.stat(p)}),u[d.id]=d}),u},c=function(a){return new Map(Object.keys(a).map(u=>[u,a[u]]))};if(arguments.length>=2){const a=function(u){i(c(l(u)))};return e.apply(this,[a,r])}return new Promise((a,u)=>{e.apply(this,[function(f){a(c(l(f)))},u])}).then(i,o)}}function xl(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(l=>l._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(l=>pa(l,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Bn(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>pa(o,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,o,l;return this.getSenders().forEach(c=>{c.track===r&&(i?l=!0:i=c)}),this.getReceivers().forEach(c=>(c.track===r&&(o?l=!0:o=c),c.track===r)),l||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Ll(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,c){if(!c)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const a=e.apply(this,arguments);return this._shimmedLocalStreams[c.id]?this._shimmedLocalStreams[c.id].indexOf(a)===-1&&this._shimmedLocalStreams[c.id].push(a):this._shimmedLocalStreams[c.id]=[c,a],a};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(u=>{if(this.getSenders().find(s=>s.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const c=this.getSenders();n.apply(this,arguments);const a=this.getSenders().filter(u=>c.indexOf(u)===-1);this._shimmedLocalStreams[l.id]=[l].concat(a)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(c=>{const a=this._shimmedLocalStreams[c].indexOf(l);a!==-1&&this._shimmedLocalStreams[c].splice(a,1),this._shimmedLocalStreams[c].length===1&&delete this._shimmedLocalStreams[c]}),i.apply(this,arguments)}}function Fl(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Ll(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const f=n.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(s=>this._reverseStreams[s.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(s=>{if(this.getSenders().find(p=>p.track===s))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const s=new t.MediaStream(f.getTracks());this._streams[f.id]=s,this._reverseStreams[s.id]=f,f=s}r.apply(this,[f])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},t.RTCPeerConnection.prototype.addTrack=function(f,s){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const d=[].slice.call(arguments,1);if(d.length!==1||!d[0].getTracks().find(m=>m===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const h=this._streams[s.id];if(h)h.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new t.MediaStream([f]);this._streams[s.id]=m,this._reverseStreams[m.id]=s,this.addStream(m)}return this.getSenders().find(m=>m.track===f)};function o(u,f){let s=f.sdp;return Object.keys(u._reverseStreams||[]).forEach(d=>{const p=u._reverseStreams[d],h=u._streams[p.id];s=s.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:f.type,sdp:s})}function l(u,f){let s=f.sdp;return Object.keys(u._reverseStreams||[]).forEach(d=>{const p=u._reverseStreams[d],h=u._streams[p.id];s=s.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:f.type,sdp:s})}["createOffer","createAnswer"].forEach(function(u){const f=t.RTCPeerConnection.prototype[u],s={[u](){const d=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[h=>{const m=o(this,h);d[0].apply(null,[m])},h=>{d[1]&&d[1].apply(null,h)},arguments[2]]):f.apply(this,arguments).then(h=>o(this,h))}};t.RTCPeerConnection.prototype[u]=s[u]});const c=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?c.apply(this,arguments):(arguments[0]=l(this,arguments[0]),c.apply(this,arguments))};const a=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=a.get.apply(this);return u.type===""?u:o(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let d;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(m=>f.track===m)&&(d=this._streams[p])}),d&&(d.getTracks().length===1?this.removeStream(this._reverseStreams[d.id]):d.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function no(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function jl(t,e){Bn(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const ga=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:jl,shimAddTrackRemoveTrack:Fl,shimAddTrackRemoveTrackWithNative:Ll,shimGetDisplayMedia:Ef,shimGetSendersWithDtmf:Il,shimGetStats:Bl,shimGetUserMedia:Ol,shimMediaStream:Ml,shimOnTrack:Dl,shimPeerConnection:no,shimSenderReceiverGetStats:xl},Symbol.toStringTag,{value:"Module"}));function Sf(t,e){let n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(r=>{if(r&&(r.urls||r.url)){let i=r.urls||r.url;r.url&&!r.urls&&ki("RTCIceServer.url","RTCIceServer.urls");const o=typeof i=="string";return o&&(i=[i]),i=i.filter(l=>{if(l.indexOf("stun:")===0)return!1;const c=l.startsWith("turn")&&!l.startsWith("turn:[")&&l.includes("transport=udp");return c&&!n?(n=!0,!0):c&&!n}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}var Nl={exports:{}};(function(t){var e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(function(r){return r.trim()})},e.splitSections=function(n){var r=n.split(`
m=`);return r.map(function(i,o){return(o>0?"m="+i:i).trim()+`\r
`})},e.getDescription=function(n){var r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){var r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(function(i){return i.indexOf(r)===0})},e.parseCandidate=function(n){var r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");for(var i={foundation:r[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]=r[o+1];break}return i},e.writeCandidate=function(n){var r=[];r.push(n.foundation),r.push(n.component),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);var i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substr(14).split(" ")},e.parseRtpMap=function(n){var r=n.substr(9).split(" "),i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){var r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);var i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){var r=n.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},e.parseFmtp=function(n){for(var r={},i,o=n.substr(n.indexOf(" ")+1).split(";"),l=0;l<o.length;l++)i=o[l].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){var r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var o=[];Object.keys(n.parameters).forEach(function(l){n.parameters[l]?o.push(l+"="+n.parameters[l]):o.push(l)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){var r=n.substr(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){var r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(o){r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){var r=n.indexOf(" "),i={ssrc:parseInt(n.substr(7,r-7),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substr(r+1,o-r-1),i.value=n.substr(o+1)):i.attribute=n.substr(r+1),i},e.parseSsrcGroup=function(n){var r=n.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(i){return parseInt(i,10)})}},e.getMid=function(n){var r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substr(6)},e.parseFingerprint=function(n){var r=n.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},e.getDtlsParameters=function(n,r){var i=e.matchPrefix(n+r,"a=fingerprint:");return{role:"auto",fingerprints:i.map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){var i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(function(o){i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},e.parseCryptoLine=function(n){var r=n.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var r=n.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){var i=e.matchPrefix(n+r,"a=crypto:");return i.map(e.parseCryptoLine)},e.getIceParameters=function(n,r){var i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substr(12),password:o.substr(10)}:null},e.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},e.parseRtpParameters=function(n){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(n),o=i[0].split(" "),l=3;l<o.length;l++){var c=o[l],a=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(a){var u=e.parseRtpMap(a),f=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=f.length?e.parseFmtp(f[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}return e.matchPrefix(n,"a=extmap:").forEach(function(s){r.headerExtensions.push(e.parseExtmap(s))}),r},e.writeRtpDescription=function(n,r){var i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map(function(l){return l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(function(l){i+=e.writeRtpMap(l),i+=e.writeFmtp(l),i+=e.writeRtcpFb(l)});var o=0;return r.codecs.forEach(function(l){l.maxptime>o&&(o=l.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),i+=`a=rtcp-mux\r
`,r.headerExtensions&&r.headerExtensions.forEach(function(l){i+=e.writeExtmap(l)}),i},e.parseRtpEncodingParameters=function(n){var r=[],i=e.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,l=i.fecMechanisms.indexOf("ULPFEC")!==-1,c=e.matchPrefix(n,"a=ssrc:").map(function(d){return e.parseSsrcMedia(d)}).filter(function(d){return d.attribute==="cname"}),a=c.length>0&&c[0].ssrc,u,f=e.matchPrefix(n,"a=ssrc-group:FID").map(function(d){var p=d.substr(17).split(" ");return p.map(function(h){return parseInt(h,10)})});f.length>0&&f[0].length>1&&f[0][0]===a&&(u=f[0][1]),i.codecs.forEach(function(d){if(d.name.toUpperCase()==="RTX"&&d.parameters.apt){var p={ssrc:a,codecPayloadType:parseInt(d.parameters.apt,10)};a&&u&&(p.rtx={ssrc:u}),r.push(p),o&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:a,mechanism:l?"red+ulpfec":"red"},r.push(p))}}),r.length===0&&a&&r.push({ssrc:a});var s=e.matchPrefix(n,"b=");return s.length&&(s[0].indexOf("b=TIAS:")===0?s=parseInt(s[0].substr(7),10):s[0].indexOf("b=AS:")===0?s=parseInt(s[0].substr(5),10)*1e3*.95-50*40*8:s=void 0,r.forEach(function(d){d.maxBitrate=s})),r},e.parseRtcpParameters=function(n){var r={},i=e.matchPrefix(n,"a=ssrc:").map(function(c){return e.parseSsrcMedia(c)}).filter(function(c){return c.attribute==="cname"})[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;var l=e.matchPrefix(n,"a=rtcp-mux");return r.mux=l.length>0,r},e.parseMsid=function(n){var r,i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substr(7).split(" "),{stream:r[0],track:r[1]};var o=e.matchPrefix(n,"a=ssrc:").map(function(l){return e.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="msid"});if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){var r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:"),o;i.length>0&&(o=parseInt(i[0].substr(19),10)),isNaN(o)&&(o=65536);var l=e.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substr(12),10),protocol:r.fmt,maxMessageSize:o};var c=e.matchPrefix(n,"a=sctpmap:");if(c.length>0){var a=e.matchPrefix(n,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){var i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(n,r,i){var o,l=r!==void 0?r:2;n?o=n:o=e.generateSessionId();var c=i||"thisisadapterortc";return`v=0\r
o=`+c+" "+o+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(n,r,i,o){var l=e.writeRtpDescription(n.kind,r);if(l+=e.writeIceParameters(n.iceGatherer.getLocalParameters()),l+=e.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),l+="a=mid:"+n.mid+`\r
`,n.direction?l+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?l+=`a=sendrecv\r
`:n.rtpSender?l+=`a=sendonly\r
`:n.rtpReceiver?l+=`a=recvonly\r
`:l+=`a=inactive\r
`,n.rtpSender){var c="msid:"+o.id+" "+n.rtpSender.track.id+`\r
`;l+="a="+c,l+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+c,n.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+c,l+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return l+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(l+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),l},e.getDirection=function(n,r){for(var i=e.splitLines(n),o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substr(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){var r=e.splitLines(n),i=r[0].split(" ");return i[0].substr(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){var r=e.splitLines(n),i=r[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){var r=e.matchPrefix(n,"o=")[0],i=r.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var r=e.splitLines(n),i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(Nl);var Gl=Nl.exports;const Qr=mo(Gl);var J=Gl;function kf(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}function ma(t,e,n,r,i){var o=J.writeRtpDescription(t.kind,e);if(o+=J.writeIceParameters(t.iceGatherer.getLocalParameters()),o+=J.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":i||"active"),o+="a=mid:"+t.mid+`\r
`,t.rtpSender&&t.rtpReceiver?o+=`a=sendrecv\r
`:t.rtpSender?o+=`a=sendonly\r
`:t.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,t.rtpSender){var l=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=l;var c="msid:"+(r?r.id:"-")+" "+l+`\r
`;o+="a="+c,o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+c,t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+c,o+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+J.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+J.localCName+`\r
`),o}function Tf(t,e){var n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(function(r){if(r&&(r.urls||r.url)){var i=r.urls||r.url;r.url&&!r.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o=typeof i=="string";return o&&(i=[i]),i=i.filter(function(l){var c=l.indexOf("turn:")===0&&l.indexOf("transport=udp")!==-1&&l.indexOf("turn:[")===-1&&!n;return c?(n=!0,!0):l.indexOf("stun:")===0&&e>=14393&&l.indexOf("?transport=udp")===-1}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}function Fr(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(o,l){o=parseInt(o,10);for(var c=0;c<l.length;c++)if(l[c].payloadType===o||l[c].preferredPayloadType===o)return l[c]},i=function(o,l,c,a){var u=r(o.parameters.apt,c),f=r(l.parameters.apt,a);return u&&f&&u.name.toLowerCase()===f.name.toLowerCase()};return t.codecs.forEach(function(o){for(var l=0;l<e.codecs.length;l++){var c=e.codecs[l];if(o.name.toLowerCase()===c.name.toLowerCase()&&o.clockRate===c.clockRate){if(o.name.toLowerCase()==="rtx"&&o.parameters&&c.parameters.apt&&!i(o,c,t.codecs,e.codecs))continue;c=JSON.parse(JSON.stringify(c)),c.numChannels=Math.min(o.numChannels,c.numChannels),n.codecs.push(c),c.rtcpFeedback=c.rtcpFeedback.filter(function(a){for(var u=0;u<o.rtcpFeedback.length;u++)if(o.rtcpFeedback[u].type===a.type&&o.rtcpFeedback[u].parameter===a.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(o){for(var l=0;l<e.headerExtensions.length;l++){var c=e.headerExtensions[l];if(o.uri===c.uri){n.headerExtensions.push(c);break}}}),n}function va(t,e,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(n)!==-1}function ji(t,e){var n=t.getRemoteCandidates().find(function(r){return e.foundation===r.foundation&&e.ip===r.ip&&e.port===r.port&&e.priority===r.priority&&e.protocol===r.protocol&&e.type===r.type});return n||t.addRemoteCandidate(e),!n}function ze(t,e){var n=new Error(e);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}var wf=function(t,e){function n(a,u){u.addTrack(a),u.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:a}))}function r(a,u){u.removeTrack(a),u.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:a}))}function i(a,u,f,s){var d=new Event("track");d.track=u,d.receiver=f,d.transceiver={receiver:f},d.streams=s,t.setTimeout(function(){a._dispatchEvent("track",d)})}var o=function(a){var u=this,f=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(d){u[d]=f[d].bind(f)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",a=JSON.parse(JSON.stringify(a||{})),this.usingBundle=a.bundlePolicy==="max-bundle",a.rtcpMuxPolicy==="negotiate")throw ze("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(a.rtcpMuxPolicy||(a.rtcpMuxPolicy="require"),a.iceTransportPolicy){case"all":case"relay":break;default:a.iceTransportPolicy="all";break}switch(a.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:a.bundlePolicy="balanced";break}if(a.iceServers=Tf(a.iceServers||[],e),this._iceGatherers=[],a.iceCandidatePoolSize)for(var s=a.iceCandidatePoolSize;s>0;s--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:a.iceServers,gatherPolicy:a.iceTransportPolicy}));else a.iceCandidatePoolSize=0;this._config=a,this.transceivers=[],this._sdpSessionId=J.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(o.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(o.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),o.prototype.onicecandidate=null,o.prototype.onaddstream=null,o.prototype.ontrack=null,o.prototype.onremovestream=null,o.prototype.onsignalingstatechange=null,o.prototype.oniceconnectionstatechange=null,o.prototype.onconnectionstatechange=null,o.prototype.onicegatheringstatechange=null,o.prototype.onnegotiationneeded=null,o.prototype.ondatachannel=null,o.prototype._dispatchEvent=function(a,u){this._isClosed||(this.dispatchEvent(u),typeof this["on"+a]=="function"&&this["on"+a](u))},o.prototype._emitGatheringStateChange=function(){var a=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",a)},o.prototype.getConfiguration=function(){return this._config},o.prototype.getLocalStreams=function(){return this.localStreams},o.prototype.getRemoteStreams=function(){return this.remoteStreams},o.prototype._createTransceiver=function(a,u){var f=this.transceivers.length>0,s={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:a,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&f)s.iceTransport=this.transceivers[0].iceTransport,s.dtlsTransport=this.transceivers[0].dtlsTransport;else{var d=this._createIceAndDtlsTransports();s.iceTransport=d.iceTransport,s.dtlsTransport=d.dtlsTransport}return u||this.transceivers.push(s),s},o.prototype.addTrack=function(a,u){if(this._isClosed)throw ze("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var f=this.transceivers.find(function(p){return p.track===a});if(f)throw ze("InvalidAccessError","Track already exists.");for(var s,d=0;d<this.transceivers.length;d++)!this.transceivers[d].track&&this.transceivers[d].kind===a.kind&&(s=this.transceivers[d]);return s||(s=this._createTransceiver(a.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(u)===-1&&this.localStreams.push(u),s.track=a,s.stream=u,s.rtpSender=new t.RTCRtpSender(a,s.dtlsTransport),s.rtpSender},o.prototype.addStream=function(a){var u=this;if(e>=15025)a.getTracks().forEach(function(s){u.addTrack(s,a)});else{var f=a.clone();a.getTracks().forEach(function(s,d){var p=f.getTracks()[d];s.addEventListener("enabled",function(h){p.enabled=h.enabled})}),f.getTracks().forEach(function(s){u.addTrack(s,f)})}},o.prototype.removeTrack=function(a){if(this._isClosed)throw ze("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(a instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var u=this.transceivers.find(function(d){return d.rtpSender===a});if(!u)throw ze("InvalidAccessError","Sender was not created by this connection.");var f=u.stream;u.rtpSender.stop(),u.rtpSender=null,u.track=null,u.stream=null;var s=this.transceivers.map(function(d){return d.stream});s.indexOf(f)===-1&&this.localStreams.indexOf(f)>-1&&this.localStreams.splice(this.localStreams.indexOf(f),1),this._maybeFireNegotiationNeeded()},o.prototype.removeStream=function(a){var u=this;a.getTracks().forEach(function(f){var s=u.getSenders().find(function(d){return d.track===f});s&&u.removeTrack(s)})},o.prototype.getSenders=function(){return this.transceivers.filter(function(a){return!!a.rtpSender}).map(function(a){return a.rtpSender})},o.prototype.getReceivers=function(){return this.transceivers.filter(function(a){return!!a.rtpReceiver}).map(function(a){return a.rtpReceiver})},o.prototype._createIceGatherer=function(a,u){var f=this;if(u&&a>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var s=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(s,"state",{value:"new",writable:!0}),this.transceivers[a].bufferedCandidateEvents=[],this.transceivers[a].bufferCandidates=function(d){var p=!d.candidate||Object.keys(d.candidate).length===0;s.state=p?"completed":"gathering",f.transceivers[a].bufferedCandidateEvents!==null&&f.transceivers[a].bufferedCandidateEvents.push(d)},s.addEventListener("localcandidate",this.transceivers[a].bufferCandidates),s},o.prototype._gather=function(a,u){var f=this,s=this.transceivers[u].iceGatherer;if(!s.onlocalcandidate){var d=this.transceivers[u].bufferedCandidateEvents;this.transceivers[u].bufferedCandidateEvents=null,s.removeEventListener("localcandidate",this.transceivers[u].bufferCandidates),s.onlocalcandidate=function(p){if(!(f.usingBundle&&u>0)){var h=new Event("icecandidate");h.candidate={sdpMid:a,sdpMLineIndex:u};var m=p.candidate,g=!m||Object.keys(m).length===0;if(g)(s.state==="new"||s.state==="gathering")&&(s.state="completed");else{s.state==="new"&&(s.state="gathering"),m.component=1,m.ufrag=s.getLocalParameters().usernameFragment;var v=J.writeCandidate(m);h.candidate=Object.assign(h.candidate,J.parseCandidate(v)),h.candidate.candidate=v,h.candidate.toJSON=function(){return{candidate:h.candidate.candidate,sdpMid:h.candidate.sdpMid,sdpMLineIndex:h.candidate.sdpMLineIndex,usernameFragment:h.candidate.usernameFragment}}}var y=J.getMediaSections(f._localDescription.sdp);g?y[h.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:y[h.candidate.sdpMLineIndex]+="a="+h.candidate.candidate+`\r
`,f._localDescription.sdp=J.getDescription(f._localDescription.sdp)+y.join("");var _=f.transceivers.every(function(b){return b.iceGatherer&&b.iceGatherer.state==="completed"});f.iceGatheringState!=="gathering"&&(f.iceGatheringState="gathering",f._emitGatheringStateChange()),g||f._dispatchEvent("icecandidate",h),_&&(f._dispatchEvent("icecandidate",new Event("icecandidate")),f.iceGatheringState="complete",f._emitGatheringStateChange())}},t.setTimeout(function(){d.forEach(function(p){s.onlocalcandidate(p)})},0)}},o.prototype._createIceAndDtlsTransports=function(){var a=this,u=new t.RTCIceTransport(null);u.onicestatechange=function(){a._updateIceConnectionState(),a._updateConnectionState()};var f=new t.RTCDtlsTransport(u);return f.ondtlsstatechange=function(){a._updateConnectionState()},f.onerror=function(){Object.defineProperty(f,"state",{value:"failed",writable:!0}),a._updateConnectionState()},{iceTransport:u,dtlsTransport:f}},o.prototype._disposeIceAndDtlsTransports=function(a){var u=this.transceivers[a].iceGatherer;u&&(delete u.onlocalcandidate,delete this.transceivers[a].iceGatherer);var f=this.transceivers[a].iceTransport;f&&(delete f.onicestatechange,delete this.transceivers[a].iceTransport);var s=this.transceivers[a].dtlsTransport;s&&(delete s.ondtlsstatechange,delete s.onerror,delete this.transceivers[a].dtlsTransport)},o.prototype._transceive=function(a,u,f){var s=Fr(a.localCapabilities,a.remoteCapabilities);u&&a.rtpSender&&(s.encodings=a.sendEncodingParameters,s.rtcp={cname:J.localCName,compound:a.rtcpParameters.compound},a.recvEncodingParameters.length&&(s.rtcp.ssrc=a.recvEncodingParameters[0].ssrc),a.rtpSender.send(s)),f&&a.rtpReceiver&&s.codecs.length>0&&(a.kind==="video"&&a.recvEncodingParameters&&e<15019&&a.recvEncodingParameters.forEach(function(d){delete d.rtx}),a.recvEncodingParameters.length?s.encodings=a.recvEncodingParameters:s.encodings=[{}],s.rtcp={compound:a.rtcpParameters.compound},a.rtcpParameters.cname&&(s.rtcp.cname=a.rtcpParameters.cname),a.sendEncodingParameters.length&&(s.rtcp.ssrc=a.sendEncodingParameters[0].ssrc),a.rtpReceiver.receive(s))},o.prototype.setLocalDescription=function(a){var u=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(ze("TypeError",'Unsupported type "'+a.type+'"'));if(!va("setLocalDescription",a.type,u.signalingState)||u._isClosed)return Promise.reject(ze("InvalidStateError","Can not set local "+a.type+" in state "+u.signalingState));var f,s;if(a.type==="offer")f=J.splitSections(a.sdp),s=f.shift(),f.forEach(function(p,h){var m=J.parseRtpParameters(p);u.transceivers[h].localCapabilities=m}),u.transceivers.forEach(function(p,h){u._gather(p.mid,h)});else if(a.type==="answer"){f=J.splitSections(u._remoteDescription.sdp),s=f.shift();var d=J.matchPrefix(s,"a=ice-lite").length>0;f.forEach(function(p,h){var m=u.transceivers[h],g=m.iceGatherer,v=m.iceTransport,y=m.dtlsTransport,_=m.localCapabilities,b=m.remoteCapabilities,E=J.isRejected(p)&&J.matchPrefix(p,"a=bundle-only").length===0;if(!E&&!m.rejected){var w=J.getIceParameters(p,s),S=J.getDtlsParameters(p,s);d&&(S.role="server"),(!u.usingBundle||h===0)&&(u._gather(m.mid,h),v.state==="new"&&v.start(g,w,d?"controlling":"controlled"),y.state==="new"&&y.start(S));var x=Fr(_,b);u._transceive(m,x.codecs.length>0,!1)}})}return u._localDescription={type:a.type,sdp:a.sdp},a.type==="offer"?u._updateSignalingState("have-local-offer"):u._updateSignalingState("stable"),Promise.resolve()},o.prototype.setRemoteDescription=function(a){var u=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(ze("TypeError",'Unsupported type "'+a.type+'"'));if(!va("setRemoteDescription",a.type,u.signalingState)||u._isClosed)return Promise.reject(ze("InvalidStateError","Can not set remote "+a.type+" in state "+u.signalingState));var f={};u.remoteStreams.forEach(function(v){f[v.id]=v});var s=[],d=J.splitSections(a.sdp),p=d.shift(),h=J.matchPrefix(p,"a=ice-lite").length>0,m=J.matchPrefix(p,"a=group:BUNDLE ").length>0;u.usingBundle=m;var g=J.matchPrefix(p,"a=ice-options:")[0];return g?u.canTrickleIceCandidates=g.substr(14).split(" ").indexOf("trickle")>=0:u.canTrickleIceCandidates=!1,d.forEach(function(v,y){var _=J.splitLines(v),b=J.getKind(v),E=J.isRejected(v)&&J.matchPrefix(v,"a=bundle-only").length===0,w=_[0].substr(2).split(" ")[2],S=J.getDirection(v,p),x=J.parseMsid(v),L=J.getMid(v)||J.generateIdentifier();if(E||b==="application"&&(w==="DTLS/SCTP"||w==="UDP/DTLS/SCTP")){u.transceivers[y]={mid:L,kind:b,protocol:w,rejected:!0};return}!E&&u.transceivers[y]&&u.transceivers[y].rejected&&(u.transceivers[y]=u._createTransceiver(b,!0));var I,j,A,q,z,ge,me,ce,U,ue=J.parseRtpParameters(v),Me,M;E||(Me=J.getIceParameters(v,p),M=J.getDtlsParameters(v,p),M.role="client"),me=J.parseRtpEncodingParameters(v);var le=J.parseRtcpParameters(v),et=J.matchPrefix(v,"a=end-of-candidates",p).length>0,ke=J.matchPrefix(v,"a=candidate:").map(function(Le){return J.parseCandidate(Le)}).filter(function(Le){return Le.component===1});if((a.type==="offer"||a.type==="answer")&&!E&&m&&y>0&&u.transceivers[y]&&(u._disposeIceAndDtlsTransports(y),u.transceivers[y].iceGatherer=u.transceivers[0].iceGatherer,u.transceivers[y].iceTransport=u.transceivers[0].iceTransport,u.transceivers[y].dtlsTransport=u.transceivers[0].dtlsTransport,u.transceivers[y].rtpSender&&u.transceivers[y].rtpSender.setTransport(u.transceivers[0].dtlsTransport),u.transceivers[y].rtpReceiver&&u.transceivers[y].rtpReceiver.setTransport(u.transceivers[0].dtlsTransport)),a.type==="offer"&&!E){I=u.transceivers[y]||u._createTransceiver(b),I.mid=L,I.iceGatherer||(I.iceGatherer=u._createIceGatherer(y,m)),ke.length&&I.iceTransport.state==="new"&&(et&&(!m||y===0)?I.iceTransport.setRemoteCandidates(ke):ke.forEach(function(Le){ji(I.iceTransport,Le)})),ce=t.RTCRtpReceiver.getCapabilities(b),e<15019&&(ce.codecs=ce.codecs.filter(function(Le){return Le.name!=="rtx"})),ge=I.sendEncodingParameters||[{ssrc:(2*y+2)*1001}];var Be=!1;if(S==="sendrecv"||S==="sendonly"){if(Be=!I.rtpReceiver,z=I.rtpReceiver||new t.RTCRtpReceiver(I.dtlsTransport,b),Be){var Xe;U=z.track,x&&x.stream==="-"||(x?(f[x.stream]||(f[x.stream]=new t.MediaStream,Object.defineProperty(f[x.stream],"id",{get:function(){return x.stream}})),Object.defineProperty(U,"id",{get:function(){return x.track}}),Xe=f[x.stream]):(f.default||(f.default=new t.MediaStream),Xe=f.default)),Xe&&(n(U,Xe),I.associatedRemoteMediaStreams.push(Xe)),s.push([U,z,Xe])}}else I.rtpReceiver&&I.rtpReceiver.track&&(I.associatedRemoteMediaStreams.forEach(function(Le){var on=Le.getTracks().find(function(Ht){return Ht.id===I.rtpReceiver.track.id});on&&r(on,Le)}),I.associatedRemoteMediaStreams=[]);I.localCapabilities=ce,I.remoteCapabilities=ue,I.rtpReceiver=z,I.rtcpParameters=le,I.sendEncodingParameters=ge,I.recvEncodingParameters=me,u._transceive(u.transceivers[y],!1,Be)}else if(a.type==="answer"&&!E){I=u.transceivers[y],j=I.iceGatherer,A=I.iceTransport,q=I.dtlsTransport,z=I.rtpReceiver,ge=I.sendEncodingParameters,ce=I.localCapabilities,u.transceivers[y].recvEncodingParameters=me,u.transceivers[y].remoteCapabilities=ue,u.transceivers[y].rtcpParameters=le,ke.length&&A.state==="new"&&((h||et)&&(!m||y===0)?A.setRemoteCandidates(ke):ke.forEach(function(Le){ji(I.iceTransport,Le)})),(!m||y===0)&&(A.state==="new"&&A.start(j,Me,"controlling"),q.state==="new"&&q.start(M));var Ot=Fr(I.localCapabilities,I.remoteCapabilities),ut=Ot.codecs.filter(function(Le){return Le.name.toLowerCase()==="rtx"}).length;!ut&&I.sendEncodingParameters[0].rtx&&delete I.sendEncodingParameters[0].rtx,u._transceive(I,S==="sendrecv"||S==="recvonly",S==="sendrecv"||S==="sendonly"),z&&(S==="sendrecv"||S==="sendonly")?(U=z.track,x?(f[x.stream]||(f[x.stream]=new t.MediaStream),n(U,f[x.stream]),s.push([U,z,f[x.stream]])):(f.default||(f.default=new t.MediaStream),n(U,f.default),s.push([U,z,f.default]))):delete I.rtpReceiver}}),u._dtlsRole===void 0&&(u._dtlsRole=a.type==="offer"?"active":"passive"),u._remoteDescription={type:a.type,sdp:a.sdp},a.type==="offer"?u._updateSignalingState("have-remote-offer"):u._updateSignalingState("stable"),Object.keys(f).forEach(function(v){var y=f[v];if(y.getTracks().length){if(u.remoteStreams.indexOf(y)===-1){u.remoteStreams.push(y);var _=new Event("addstream");_.stream=y,t.setTimeout(function(){u._dispatchEvent("addstream",_)})}s.forEach(function(b){var E=b[0],w=b[1];y.id===b[2].id&&i(u,E,w,[y])})}}),s.forEach(function(v){v[2]||i(u,v[0],v[1],[])}),t.setTimeout(function(){u&&u.transceivers&&u.transceivers.forEach(function(v){v.iceTransport&&v.iceTransport.state==="new"&&v.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),v.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},o.prototype.close=function(){this.transceivers.forEach(function(a){a.iceTransport&&a.iceTransport.stop(),a.dtlsTransport&&a.dtlsTransport.stop(),a.rtpSender&&a.rtpSender.stop(),a.rtpReceiver&&a.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},o.prototype._updateSignalingState=function(a){this.signalingState=a;var u=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",u)},o.prototype._maybeFireNegotiationNeeded=function(){var a=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,t.setTimeout(function(){if(a.needNegotiation){a.needNegotiation=!1;var u=new Event("negotiationneeded");a._dispatchEvent("negotiationneeded",u)}},0))},o.prototype._updateIceConnectionState=function(){var a,u={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(s){s.iceTransport&&!s.rejected&&u[s.iceTransport.state]++}),a="new",u.failed>0?a="failed":u.checking>0?a="checking":u.disconnected>0?a="disconnected":u.new>0?a="new":u.connected>0?a="connected":u.completed>0&&(a="completed"),a!==this.iceConnectionState){this.iceConnectionState=a;var f=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",f)}},o.prototype._updateConnectionState=function(){var a,u={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(s){s.iceTransport&&s.dtlsTransport&&!s.rejected&&(u[s.iceTransport.state]++,u[s.dtlsTransport.state]++)}),u.connected+=u.completed,a="new",u.failed>0?a="failed":u.connecting>0?a="connecting":u.disconnected>0?a="disconnected":u.new>0?a="new":u.connected>0&&(a="connected"),a!==this.connectionState){this.connectionState=a;var f=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",f)}},o.prototype.createOffer=function(){var a=this;if(a._isClosed)return Promise.reject(ze("InvalidStateError","Can not call createOffer after close"));var u=a.transceivers.filter(function(h){return h.kind==="audio"}).length,f=a.transceivers.filter(function(h){return h.kind==="video"}).length,s=arguments[0];if(s){if(s.mandatory||s.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");s.offerToReceiveAudio!==void 0&&(s.offerToReceiveAudio===!0?u=1:s.offerToReceiveAudio===!1?u=0:u=s.offerToReceiveAudio),s.offerToReceiveVideo!==void 0&&(s.offerToReceiveVideo===!0?f=1:s.offerToReceiveVideo===!1?f=0:f=s.offerToReceiveVideo)}for(a.transceivers.forEach(function(h){h.kind==="audio"?(u--,u<0&&(h.wantReceive=!1)):h.kind==="video"&&(f--,f<0&&(h.wantReceive=!1))});u>0||f>0;)u>0&&(a._createTransceiver("audio"),u--),f>0&&(a._createTransceiver("video"),f--);var d=J.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.transceivers.forEach(function(h,m){var g=h.track,v=h.kind,y=h.mid||J.generateIdentifier();h.mid=y,h.iceGatherer||(h.iceGatherer=a._createIceGatherer(m,a.usingBundle));var _=t.RTCRtpSender.getCapabilities(v);e<15019&&(_.codecs=_.codecs.filter(function(E){return E.name!=="rtx"})),_.codecs.forEach(function(E){E.name==="H264"&&E.parameters["level-asymmetry-allowed"]===void 0&&(E.parameters["level-asymmetry-allowed"]="1"),h.remoteCapabilities&&h.remoteCapabilities.codecs&&h.remoteCapabilities.codecs.forEach(function(w){E.name.toLowerCase()===w.name.toLowerCase()&&E.clockRate===w.clockRate&&(E.preferredPayloadType=w.payloadType)})}),_.headerExtensions.forEach(function(E){var w=h.remoteCapabilities&&h.remoteCapabilities.headerExtensions||[];w.forEach(function(S){E.uri===S.uri&&(E.id=S.id)})});var b=h.sendEncodingParameters||[{ssrc:(2*m+1)*1001}];g&&e>=15019&&v==="video"&&!b[0].rtx&&(b[0].rtx={ssrc:b[0].ssrc+1}),h.wantReceive&&(h.rtpReceiver=new t.RTCRtpReceiver(h.dtlsTransport,v)),h.localCapabilities=_,h.sendEncodingParameters=b}),a._config.bundlePolicy!=="max-compat"&&(d+="a=group:BUNDLE "+a.transceivers.map(function(h){return h.mid}).join(" ")+`\r
`),d+=`a=ice-options:trickle\r
`,a.transceivers.forEach(function(h,m){d+=ma(h,h.localCapabilities,"offer",h.stream,a._dtlsRole),d+=`a=rtcp-rsize\r
`,h.iceGatherer&&a.iceGatheringState!=="new"&&(m===0||!a.usingBundle)&&(h.iceGatherer.getLocalCandidates().forEach(function(g){g.component=1,d+="a="+J.writeCandidate(g)+`\r
`}),h.iceGatherer.state==="completed"&&(d+=`a=end-of-candidates\r
`))});var p=new t.RTCSessionDescription({type:"offer",sdp:d});return Promise.resolve(p)},o.prototype.createAnswer=function(){var a=this;if(a._isClosed)return Promise.reject(ze("InvalidStateError","Can not call createAnswer after close"));if(!(a.signalingState==="have-remote-offer"||a.signalingState==="have-local-pranswer"))return Promise.reject(ze("InvalidStateError","Can not call createAnswer in signalingState "+a.signalingState));var u=J.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.usingBundle&&(u+="a=group:BUNDLE "+a.transceivers.map(function(d){return d.mid}).join(" ")+`\r
`),u+=`a=ice-options:trickle\r
`;var f=J.getMediaSections(a._remoteDescription.sdp).length;a.transceivers.forEach(function(d,p){if(!(p+1>f)){if(d.rejected){d.kind==="application"?d.protocol==="DTLS/SCTP"?u+=`m=application 0 DTLS/SCTP 5000\r
`:u+="m=application 0 "+d.protocol+` webrtc-datachannel\r
`:d.kind==="audio"?u+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:d.kind==="video"&&(u+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),u+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+d.mid+`\r
`;return}if(d.stream){var h;d.kind==="audio"?h=d.stream.getAudioTracks()[0]:d.kind==="video"&&(h=d.stream.getVideoTracks()[0]),h&&e>=15019&&d.kind==="video"&&!d.sendEncodingParameters[0].rtx&&(d.sendEncodingParameters[0].rtx={ssrc:d.sendEncodingParameters[0].ssrc+1})}var m=Fr(d.localCapabilities,d.remoteCapabilities),g=m.codecs.filter(function(v){return v.name.toLowerCase()==="rtx"}).length;!g&&d.sendEncodingParameters[0].rtx&&delete d.sendEncodingParameters[0].rtx,u+=ma(d,m,"answer",d.stream,a._dtlsRole),d.rtcpParameters&&d.rtcpParameters.reducedSize&&(u+=`a=rtcp-rsize\r
`)}});var s=new t.RTCSessionDescription({type:"answer",sdp:u});return Promise.resolve(s)},o.prototype.addIceCandidate=function(a){var u=this,f;return a&&!(a.sdpMLineIndex!==void 0||a.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(s,d){if(u._remoteDescription)if(!a||a.candidate==="")for(var p=0;p<u.transceivers.length&&!(!u.transceivers[p].rejected&&(u.transceivers[p].iceTransport.addRemoteCandidate({}),f=J.getMediaSections(u._remoteDescription.sdp),f[p]+=`a=end-of-candidates\r
`,u._remoteDescription.sdp=J.getDescription(u._remoteDescription.sdp)+f.join(""),u.usingBundle));p++);else{var h=a.sdpMLineIndex;if(a.sdpMid){for(var m=0;m<u.transceivers.length;m++)if(u.transceivers[m].mid===a.sdpMid){h=m;break}}var g=u.transceivers[h];if(g){if(g.rejected)return s();var v=Object.keys(a.candidate).length>0?J.parseCandidate(a.candidate):{};if(v.protocol==="tcp"&&(v.port===0||v.port===9)||v.component&&v.component!==1)return s();if((h===0||h>0&&g.iceTransport!==u.transceivers[0].iceTransport)&&!ji(g.iceTransport,v))return d(ze("OperationError","Can not add ICE candidate"));var y=a.candidate.trim();y.indexOf("a=")===0&&(y=y.substr(2)),f=J.getMediaSections(u._remoteDescription.sdp),f[h]+="a="+(v.type?y:"end-of-candidates")+`\r
`,u._remoteDescription.sdp=J.getDescription(u._remoteDescription.sdp)+f.join("")}else return d(ze("OperationError","Can not add ICE candidate"))}else return d(ze("InvalidStateError","Can not add ICE candidate without a remote description"));s()})},o.prototype.getStats=function(a){if(a&&a instanceof t.MediaStreamTrack){var u=null;if(this.transceivers.forEach(function(s){s.rtpSender&&s.rtpSender.track===a?u=s.rtpSender:s.rtpReceiver&&s.rtpReceiver.track===a&&(u=s.rtpReceiver)}),!u)throw ze("InvalidAccessError","Invalid selector.");return u.getStats()}var f=[];return this.transceivers.forEach(function(s){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(d){s[d]&&f.push(s[d].getStats())})}),Promise.all(f).then(function(s){var d=new Map;return s.forEach(function(p){p.forEach(function(h){d.set(h.id,h)})}),d})};var l=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];l.forEach(function(a){var u=t[a];if(u&&u.prototype&&u.prototype.getStats){var f=u.prototype.getStats;u.prototype.getStats=function(){return f.apply(this).then(function(s){var d=new Map;return Object.keys(s).forEach(function(p){s[p].type=kf(s[p]),d.set(p,s[p])}),d})}}});var c=["createOffer","createAnswer"];return c.forEach(function(a){var u=o.prototype[a];o.prototype[a]=function(){var f=arguments;return typeof f[0]=="function"||typeof f[1]=="function"?u.apply(this,[arguments[2]]).then(function(s){typeof f[0]=="function"&&f[0].apply(null,[s])},function(s){typeof f[1]=="function"&&f[1].apply(null,[s])}):u.apply(this,arguments)}}),c=["setLocalDescription","setRemoteDescription","addIceCandidate"],c.forEach(function(a){var u=o.prototype[a];o.prototype[a]=function(){var f=arguments;return typeof f[1]=="function"||typeof f[2]=="function"?u.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)},function(s){typeof f[2]=="function"&&f[2].apply(null,[s])}):u.apply(this,arguments)}}),["getStats"].forEach(function(a){var u=o.prototype[a];o.prototype[a]=function(){var f=arguments;return typeof f[1]=="function"?u.apply(this,arguments).then(function(){typeof f[1]=="function"&&f[1].apply(null)}):u.apply(this,arguments)}}),o};const Rf=mo(wf);function Vl(t){const e=t&&t.navigator,n=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},r=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(i){return r(i).catch(o=>Promise.reject(n(o)))}}function Ul(t){"getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}function ro(t,e){if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(i){return i}),t.RTCSessionDescription||(t.RTCSessionDescription=function(i){return i}),e.version<15025)){const r=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set(i){r.set.call(this,i);const o=new Event("enabled");o.enabled=i,this.dispatchEvent(o)}})}t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)&&Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new t.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);const n=Rf(t,e.version);t.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=Sf(i.iceServers,e.version),Oo("ICE servers after filtering:",i.iceServers)),new n(i)},t.RTCPeerConnection.prototype=n.prototype}function zl(t){t.RTCRtpSender&&!("replaceTrack"in t.RTCRtpSender.prototype)&&(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)}const ya=Object.freeze(Object.defineProperty({__proto__:null,shimGetDisplayMedia:Ul,shimGetUserMedia:Vl,shimPeerConnection:ro,shimReplaceTrack:zl},Symbol.toStringTag,{value:"Module"}));function Hl(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,o,l){ki("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,l)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(l,c,a){c in l&&!(a in l)&&(l[a]=l[c],delete l[c])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l.audio,"autoGainControl","mozAutoGainControl"),i(l.audio,"noiseSuppression","mozNoiseSuppression")),o(l)},r&&r.prototype.getSettings){const l=r.prototype.getSettings;r.prototype.getSettings=function(){const c=l.apply(this,arguments);return i(c,"mozAutoGainControl","autoGainControl"),i(c,"mozNoiseSuppression","noiseSuppression"),c}}if(r&&r.prototype.applyConstraints){const l=r.prototype.applyConstraints;r.prototype.applyConstraints=function(c){return this.kind==="audio"&&typeof c=="object"&&(c=JSON.parse(JSON.stringify(c)),i(c,"autoGainControl","mozAutoGainControl"),i(c,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[c])}}}}function Pf(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function ql(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function io(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=t.RTCPeerConnection.prototype[i],l={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=l[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,l,c]=arguments;return r.apply(this,[o||null]).then(a=>{if(e.version<53&&!l)try{a.forEach(u=>{u.type=n[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;a.forEach((f,s)=>{a.set(s,Object.assign({},f,{type:n[f.type]||f.type}))})}return a}).then(l,c)}}function Wl(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Xl(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Bn(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Ql(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){ki("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Yl(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Kl(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],i=r&&"sendEncodings"in r;i&&r.sendEncodings.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(i){const{sender:l}=o,c=l.getParameters();(!("encodings"in c)||c.encodings.length===1&&Object.keys(c.encodings[0]).length===0)&&(c.encodings=r.sendEncodings,l.sendEncodings=r.sendEncodings,this.setParametersPromises.push(l.setParameters(c).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return o})}function Jl(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Zl(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function $l(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const ba=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Kl,shimCreateAnswer:$l,shimCreateOffer:Zl,shimGetDisplayMedia:Pf,shimGetParameters:Jl,shimGetUserMedia:Hl,shimOnTrack:ql,shimPeerConnection:io,shimRTCDataChannel:Yl,shimReceiverGetStats:Xl,shimRemoveStream:Ql,shimSenderGetStats:Wl},Symbol.toStringTag,{value:"Module"}));function ec(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function tc(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const l=new Event("addstream");l.stream=o,r.dispatchEvent(l)})}),e.apply(r,arguments)}}}function nc(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,o=e.setRemoteDescription,l=e.addIceCandidate;e.createOffer=function(u,f){const s=arguments.length>=2?arguments[2]:arguments[0],d=n.apply(this,[s]);return f?(d.then(u,f),Promise.resolve()):d},e.createAnswer=function(u,f){const s=arguments.length>=2?arguments[2]:arguments[0],d=r.apply(this,[s]);return f?(d.then(u,f),Promise.resolve()):d};let c=function(a,u,f){const s=i.apply(this,[a]);return f?(s.then(u,f),Promise.resolve()):s};e.setLocalDescription=c,c=function(a,u,f){const s=o.apply(this,[a]);return f?(s.then(u,f),Promise.resolve()):s},e.setRemoteDescription=c,c=function(a,u,f){const s=l.apply(this,[a]);return f?(s.then(u,f),Promise.resolve()):s},e.addIceCandidate=c}function rc(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(ic(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(r,i,o){e.mediaDevices.getUserMedia(r).then(i,o)}.bind(e))}function ic(t){return t&&t.video!==void 0?Object.assign({},t,{video:Pl(t.video)}):t}function oc(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let l=0;l<r.iceServers.length;l++){let c=r.iceServers[l];!c.hasOwnProperty("urls")&&c.hasOwnProperty("url")?(ki("RTCIceServer.url","RTCIceServer.urls"),c=JSON.parse(JSON.stringify(c)),c.urls=c.url,delete c.url,o.push(c)):o.push(r.iceServers[l])}r.iceServers=o}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function ac(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function sc(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(l=>l.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video")}return e.apply(this,arguments)}}function lc(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const _a=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:lc,shimCallbacksAPI:nc,shimConstraints:ic,shimCreateOfferLegacy:sc,shimGetUserMedia:rc,shimLocalStreamsAPI:ec,shimRTCIceServerUrls:oc,shimRemoteStreamsAPI:tc,shimTrackEventTransceiver:ac},Symbol.toStringTag,{value:"Module"}));function Yr(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const i=new e(r),o=Qr.parseCandidate(r.candidate),l=Object.assign(i,o);return l.toJSON=function(){return{candidate:l.candidate,sdpMid:l.sdpMid,sdpMLineIndex:l.sdpMLineIndex,usernameFragment:l.usernameFragment}},l}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Bn(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Yn(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(c){if(!c||!c.sdp)return!1;const a=Qr.splitSections(c.sdp);return a.shift(),a.some(u=>{const f=Qr.parseMLine(u);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},r=function(c){const a=c.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(a===null||a.length<2)return-1;const u=parseInt(a[1],10);return u!==u?-1:u},i=function(c){let a=65536;return e.browser==="firefox"&&(e.version<57?c===-1?a=16384:a=2147483637:e.version<60?a=e.version===57?65535:65536:a=2147483637),a},o=function(c,a){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const f=Qr.matchPrefix(c.sdp,"a=max-message-size:");return f.length>0?u=parseInt(f[0].substr(19),10):e.browser==="firefox"&&a!==-1&&(u=2147483637),u},l=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:a}=this.getConfiguration();a==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const a=r(arguments[0]),u=i(a),f=o(arguments[0],a);let s;u===0&&f===0?s=Number.POSITIVE_INFINITY:u===0||f===0?s=Math.max(u,f):s=Math.min(u,f);const d={};Object.defineProperty(d,"maxMessageSize",{get(){return s}}),this._sctp=d}return l.apply(this,arguments)}}function Kn(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const o=r.send;r.send=function(){const c=arguments[0],a=c.length||c.size||c.byteLength;if(r.readyState==="open"&&i.sctp&&a>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},Bn(t,"datachannel",r=>(e(r.channel,r.target),r))}function oo(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const l=new Event("connectionstatechange",i);o.dispatchEvent(l)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function ao(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function Kr(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const Of=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:ao,shimAddIceCandidateNullOrEmpty:Kr,shimConnectionState:oo,shimMaxMessageSize:Yn,shimRTCIceCandidate:Yr,shimSendThrowTypeError:Kn},Symbol.toStringTag,{value:"Module"}));function Mf({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=Oo,r=Af(t),i={browserDetails:r,commonShim:Of,extractVersion:Qn,disableLog:_f,disableWarnings:Cf};switch(r.browser){case"chrome":if(!ga||!no||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=ga,Kr(t,r),Ol(t,r),Ml(t),no(t,r),Dl(t),Fl(t,r),Il(t),Bl(t),xl(t),jl(t,r),Yr(t),oo(t),Yn(t,r),Kn(t),ao(t,r);break;case"firefox":if(!ba||!io||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=ba,Kr(t,r),Hl(t,r),io(t,r),ql(t),Ql(t),Wl(t),Xl(t),Yl(t),Kl(t),Jl(t),Zl(t),$l(t),Yr(t),oo(t),Yn(t,r),Kn(t);break;case"edge":if(!ya||!ro||!e.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=ya,Vl(t),Ul(t),ro(t,r),zl(t),Yn(t,r),Kn(t);break;case"safari":if(!_a||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=_a,Kr(t,r),oc(t),sc(t),nc(t),ec(t),tc(t),ac(t),rc(t),lc(t),Yr(t),Yn(t,r),Kn(t),ao(t,r);break;default:n("Unsupported browser!");break}return i}const Ca=Mf({window:typeof window>"u"?void 0:window});function At(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var Ni=Ca.default||Ca,Nn=new(function(){function t(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return t.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},t.prototype.isBrowserSupported=function(){var e=this.getBrowser(),n=this.getVersion(),r=this.supportedBrowsers.includes(e);return r?e==="chrome"?n>=this.minChromeVersion:e==="firefox"?n>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&n>=this.minSafariVersion:!1:!1},t.prototype.getBrowser=function(){return Ni.browserDetails.browser},t.prototype.getVersion=function(){return Ni.browserDetails.version||0},t.prototype.isUnifiedPlanSupported=function(){var e=this.getBrowser(),n=Ni.browserDetails.version||0;if(e==="chrome"&&n<this.minChromeVersion)return!1;if(e==="firefox"&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,i=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),i=!0}catch{}finally{r&&r.close()}return i},t.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},t}()),Aa={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},Df=function(){function t(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=Aa,this.browser=Nn.getBrowser(),this.browserVersion=Nn.getVersion(),this.supports=function(){var e={browser:Nn.isBrowserSupported(),webRTC:Nn.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;var n;try{n=new RTCPeerConnection(Aa),e.audioVideo=!0;var r=void 0;try{r=n.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!Nn.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{n&&n.close()}return e}(),this.pack=fa.pack,this.unpack=fa.unpack,this._dataCount=1}return t.prototype.noop=function(){},t.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},t.prototype.chunk=function(e){for(var n=[],r=e.size,i=Math.ceil(r/Ce.chunkedMTU),o=0,l=0;l<r;){var c=Math.min(r,l+Ce.chunkedMTU),a=e.slice(l,c),u={__peerData:this._dataCount,n:o,data:a,total:i};n.push(u),l=c,o++}return this._dataCount++,n},t.prototype.blobToArrayBuffer=function(e,n){var r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r},t.prototype.binaryStringToArrayBuffer=function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer},t.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},t.prototype.isSecure=function(){return location.protocol==="https:"},t}(),Ce=new Df,cc={};At(cc,"Peer",()=>Ia,t=>Ia=t);var _r={},If=Object.prototype.hasOwnProperty,We="~";function fr(){}Object.create&&(fr.prototype=Object.create(null),new fr().__proto__||(We=!1));function Bf(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function uc(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new Bf(n,r||t,i),l=We?We+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function Jr(t,e){--t._eventsCount===0?t._events=new fr:delete t._events[e]}function qe(){this._events=new fr,this._eventsCount=0}qe.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)If.call(n,r)&&e.push(We?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};qe.prototype.listeners=function(e){var n=We?We+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,l=new Array(o);i<o;i++)l[i]=r[i].fn;return l};qe.prototype.listenerCount=function(e){var n=We?We+e:e,r=this._events[n];return r?r.fn?1:r.length:0};qe.prototype.emit=function(e,n,r,i,o,l){var c=We?We+e:e;if(!this._events[c])return!1;var a=this._events[c],u=arguments.length,f,s;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),u){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,i),!0;case 5:return a.fn.call(a.context,n,r,i,o),!0;case 6:return a.fn.call(a.context,n,r,i,o,l),!0}for(s=1,f=new Array(u-1);s<u;s++)f[s-1]=arguments[s];a.fn.apply(a.context,f)}else{var d=a.length,p;for(s=0;s<d;s++)switch(a[s].once&&this.removeListener(e,a[s].fn,void 0,!0),u){case 1:a[s].fn.call(a[s].context);break;case 2:a[s].fn.call(a[s].context,n);break;case 3:a[s].fn.call(a[s].context,n,r);break;case 4:a[s].fn.call(a[s].context,n,r,i);break;default:if(!f)for(p=1,f=new Array(u-1);p<u;p++)f[p-1]=arguments[p];a[s].fn.apply(a[s].context,f)}}return!0};qe.prototype.on=function(e,n,r){return uc(this,e,n,r,!1)};qe.prototype.once=function(e,n,r){return uc(this,e,n,r,!0)};qe.prototype.removeListener=function(e,n,r,i){var o=We?We+e:e;if(!this._events[o])return this;if(!n)return Jr(this,o),this;var l=this._events[o];if(l.fn)l.fn===n&&(!i||l.once)&&(!r||l.context===r)&&Jr(this,o);else{for(var c=0,a=[],u=l.length;c<u;c++)(l[c].fn!==n||i&&!l[c].once||r&&l[c].context!==r)&&a.push(l[c]);a.length?this._events[o]=a.length===1?a[0]:a:Jr(this,o)}return this};qe.prototype.removeAllListeners=function(e){var n;return e?(n=We?We+e:e,this._events[n]&&Jr(this,n)):(this._events=new fr,this._eventsCount=0),this};qe.prototype.off=qe.prototype.removeListener;qe.prototype.addListener=qe.prototype.on;qe.prefixed=We;qe.EventEmitter=qe;_r=qe;var W={};At(W,"LogLevel",()=>Qe,t=>Qe=t);At(W,"default",()=>Ea,t=>Ea=t);var qt=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){l={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},Wt=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},xf="PeerJS: ",Qe;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})(Qe||(Qe={}));var Lf=function(){function t(){this._logLevel=Qe.Disabled}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=Qe.All&&this._print.apply(this,Wt([Qe.All],qt(e),!1))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=Qe.Warnings&&this._print.apply(this,Wt([Qe.Warnings],qt(e),!1))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=Qe.Errors&&this._print.apply(this,Wt([Qe.Errors],qt(e),!1))},t.prototype.setLogFunction=function(e){this._print=e},t.prototype._print=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=Wt([xf],qt(n),!1);for(var o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);e>=Qe.All?console.log.apply(console,Wt([],qt(i),!1)):e>=Qe.Warnings?console.warn.apply(console,Wt(["WARNING"],qt(i),!1)):e>=Qe.Errors&&console.error.apply(console,Wt(["ERROR"],qt(i),!1))},t}(),Ea=new Lf,fc={};At(fc,"Socket",()=>Sa,t=>Sa=t);var dt;(function(t){t.Data="data",t.Media="media"})(dt||(dt={}));var xe;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})(xe||(xe={}));var St;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json"})(St||(St={}));var Tt;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(Tt||(Tt={}));var Ne;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(Ne||(Ne={}));var Mo={};Mo=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var Ff=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jf=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){l={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},Nf=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Gf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Sa=function(t){Ff(e,t);function e(n,r,i,o,l,c){c===void 0&&(c=5e3);var a=t.call(this)||this;a.pingInterval=c,a._disconnected=!0,a._messagesQueue=[];var u=n?"wss://":"ws://";return a._baseUrl=u+r+":"+i+o+"peerjs?key="+l,a}return e.prototype.start=function(n,r){var i=this;this._id=n;var o="".concat(this._baseUrl,"&id=").concat(n,"&token=").concat(r);this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+Mo.version),this._disconnected=!1,this._socket.onmessage=function(l){var c;try{c=JSON.parse(l.data),W.default.log("Server message received:",c)}catch{W.default.log("Invalid server message",l.data);return}i.emit(Tt.Message,c)},this._socket.onclose=function(l){i._disconnected||(W.default.log("Socket closed.",l),i._cleanup(),i._disconnected=!0,i.emit(Tt.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),W.default.log("Socket open"),i._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var n=this;this._wsPingTimer=setTimeout(function(){n._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(!this._wsOpen()){W.default.log("Cannot send heartbeat, because socket closed");return}var n=JSON.stringify({type:Ne.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()},e.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},e.prototype._sendQueuedMessages=function(){var n,r,i=Nf([],jf(this._messagesQueue),!1);this._messagesQueue=[];try{for(var o=Gf(i),l=o.next();!l.done;l=o.next()){var c=l.value;this.send(c)}}catch(a){n={error:a}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.send=function(n){if(!this._disconnected){if(!this._id){this._messagesQueue.push(n);return}if(!n.type){this.emit(Tt.Error,"Invalid message");return}if(this._wsOpen()){var r=JSON.stringify(n);this._socket.send(r)}}},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}(_r.EventEmitter),so={};At(so,"MediaConnection",()=>wa,t=>wa=t);var Do={};At(Do,"Negotiator",()=>ka,t=>ka=t);var pi=function(){return pi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},pi.apply(this,arguments)},jr=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(f){try{u(r.next(f))}catch(s){l(s)}}function a(f){try{u(r.throw(f))}catch(s){l(s)}}function u(f){f.done?o(f.value):i(f.value).then(c,a)}u((r=r.apply(t,e||[])).next())})},Nr=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(u){return function(f){return a([u,f])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(f){u=[6,f],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ka=function(){function t(e){this.connection=e}return t.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===dt.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===dt.Data){var r=this.connection,i={ordered:!!e.reliable},o=n.createDataChannel(r.label,i);r.initialize(o)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},t.prototype._startPeerConnection=function(){W.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},t.prototype._setupListeners=function(e){var n=this,r=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,l=this.connection.provider;W.default.log("Listening for ICE candidates."),e.onicecandidate=function(c){!c.candidate||!c.candidate.candidate||(W.default.log("Received ICE candidates for ".concat(r,":"),c.candidate),l.socket.send({type:Ne.Candidate,payload:{candidate:c.candidate,type:o,connectionId:i},dst:r}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":W.default.log("iceConnectionState is failed, closing connections to "+r),n.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),n.connection.close();break;case"closed":W.default.log("iceConnectionState is closed, closing connections to "+r),n.connection.emit("error",new Error("Connection to "+r+" closed.")),n.connection.close();break;case"disconnected":W.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=Ce.noop;break}n.connection.emit("iceStateChanged",e.iceConnectionState)},W.default.log("Listening for data channel"),e.ondatachannel=function(c){W.default.log("Received data channel");var a=c.channel,u=l.getConnection(r,i);u.initialize(a)},W.default.log("Listening for remote stream"),e.ontrack=function(c){W.default.log("Received remote stream");var a=c.streams[0],u=l.getConnection(r,i);if(u.type===dt.Media){var f=u;n._addStreamToMediaConnection(a,f)}}},t.prototype.cleanup=function(){W.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n=e.signalingState!=="closed",r=!1;if(this.connection.type===dt.Data){var i=this.connection,o=i.dataChannel;o&&(r=!!o.readyState&&o.readyState!=="closed")}(n||r)&&e.close()}},t.prototype._makeOffer=function(){return jr(this,void 0,Promise,function(){var e,n,r,i,o,l,c;return Nr(this,function(a){switch(a.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:r=a.sent(),W.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return a.sent(),W.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:Ce.browser},this.connection.type===dt.Data&&(o=this.connection,i=pi(pi({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),n.socket.send({type:Ne.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return l=a.sent(),l!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(xe.WebRTC,l),W.default.log("Failed to setLocalDescription, ",l)),[3,6];case 6:return[3,8];case 7:return c=a.sent(),n.emitError(xe.WebRTC,c),W.default.log("Failed to createOffer, ",c),[3,8];case 8:return[2]}})})},t.prototype._makeAnswer=function(){return jr(this,void 0,Promise,function(){var e,n,r,i,o;return Nr(this,function(l){switch(l.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,l.label=1;case 1:return l.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:r=l.sent(),W.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),l.label=3;case 3:return l.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return l.sent(),W.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),n.socket.send({type:Ne.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:Ce.browser},dst:this.connection.peer}),[3,6];case 5:return i=l.sent(),n.emitError(xe.WebRTC,i),W.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return o=l.sent(),n.emitError(xe.WebRTC,o),W.default.log("Failed to create answer, ",o),[3,8];case 8:return[2]}})})},t.prototype.handleSDP=function(e,n){return jr(this,void 0,Promise,function(){var r,i,o,l;return Nr(this,function(c){switch(c.label){case 0:n=new RTCSessionDescription(n),r=this.connection.peerConnection,i=this.connection.provider,W.default.log("Setting remote description",n),o=this,c.label=1;case 1:return c.trys.push([1,5,,6]),[4,r.setRemoteDescription(n)];case 2:return c.sent(),W.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),e!=="OFFER"?[3,4]:[4,o._makeAnswer()];case 3:c.sent(),c.label=4;case 4:return[3,6];case 5:return l=c.sent(),i.emitError(xe.WebRTC,l),W.default.log("Failed to setRemoteDescription, ",l),[3,6];case 6:return[2]}})})},t.prototype.handleCandidate=function(e){return jr(this,void 0,Promise,function(){var n,r,i,o,l,c;return Nr(this,function(a){switch(a.label){case 0:W.default.log("handleCandidate:",e),n=e.candidate,r=e.sdpMLineIndex,i=e.sdpMid,o=this.connection.peerConnection,l=this.connection.provider,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:r,candidate:n}))];case 2:return a.sent(),W.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return c=a.sent(),l.emitError(xe.WebRTC,c),W.default.log("Failed to handleCandidate, ",c),[3,4];case 4:return[2]}})})},t.prototype._addTracksToConnection=function(e,n){if(W.default.log("add tracks from stream ".concat(e.id," to peer connection")),!n.addTrack)return W.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(r){n.addTrack(r,e)})},t.prototype._addStreamToMediaConnection=function(e,n){W.default.log("add stream ".concat(e.id," to media connection ").concat(n.connectionId)),n.addStream(e)},t}(),Io={};At(Io,"BaseConnection",()=>Ta,t=>Ta=t);var Vf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ta=function(t){Vf(e,t);function e(n,r,i){var o=t.call(this)||this;return o.peer=n,o.provider=r,o.options=i,o._open=!1,o.metadata=i.metadata,o}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}(_r.EventEmitter),Uf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hi=function(){return hi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},hi.apply(this,arguments)},zf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wa=function(t){Uf(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||e.ID_PREFIX+Ce.randomToken(),o._negotiator=new Do.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return Object.defineProperty(e.prototype,"type",{get:function(){return dt.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(n){W.default.log("Receiving stream",n),this._remoteStream=n,t.prototype.emit.call(this,"stream",n)},e.prototype.handleMessage=function(n){var r=n.type,i=n.payload;switch(n.type){case Ne.Answer:this._negotiator.handleSDP(r,i.sdp),this._open=!0;break;case Ne.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:W.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer));break}},e.prototype.answer=function(n,r){var i,o;if(r===void 0&&(r={}),this._localStream){W.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(hi(hi({},this.options._payload),{_stream:n}));var l=this.provider._getMessages(this.connectionId);try{for(var c=zf(l),a=c.next();!a.done;a=c.next()){var u=a.value;this.handleMessage(u)}}catch(f){i={error:f}}finally{try{a&&!a.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}this._open=!0},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.ID_PREFIX="mc_",e}(Io.BaseConnection),lo={};At(lo,"DataConnection",()=>Pa,t=>Pa=t);var dc={};At(dc,"EncodingQueue",()=>Ra,t=>Ra=t);var Hf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ra=function(t){Hf(e,t);function e(){var n=t.call(this)||this;return n.fileReader=new FileReader,n._queue=[],n._processing=!1,n.fileReader.onload=function(r){n._processing=!1,r.target&&n.emit("done",r.target.result),n.doNextTask()},n.fileReader.onerror=function(r){W.default.error("EncodingQueue error:",r),n._processing=!1,n.destroy(),n.emit("error",r)},n}return Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(n){this.queue.push(n),!this.processing&&this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}(_r.EventEmitter),qf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Pa=function(t){qf(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new dc.EncodingQueue,o.connectionId=o.options.connectionId||e.ID_PREFIX+Ce.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||St.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(l){o._bufferedSend(l)}),o._encodingQueue.on("error",function(){W.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()}),o._negotiator=new Do.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return Object.defineProperty(e.prototype,"type",{get:function(){return dt.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(n){this._dc=n,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var n=this;(!Ce.supports.binaryBlob||Ce.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){W.default.log("DC#".concat(n.connectionId," dc connection success")),n._open=!0,n.emit("open")},this.dataChannel.onmessage=function(r){W.default.log("DC#".concat(n.connectionId," dc onmessage:"),r.data),n._handleDataMessage(r)},this.dataChannel.onclose=function(){W.default.log("DC#".concat(n.connectionId," dc closed for:"),n.peer),n.close()}},e.prototype._handleDataMessage=function(n){var r=this,i=n.data,o=i.constructor,l=this.serialization===St.Binary||this.serialization===St.BinaryUTF8,c=i;if(l){if(o===Blob){Ce.blobToArrayBuffer(i,function(u){var f=Ce.unpack(u);r.emit("data",f)});return}else if(o===ArrayBuffer)c=Ce.unpack(i);else if(o===String){var a=Ce.binaryStringToArrayBuffer(i);c=Ce.unpack(a)}}else this.serialization===St.JSON&&(c=this.parse(i));if(c.__peerData){this._handleChunk(c);return}t.prototype.emit.call(this,"data",c)},e.prototype._handleChunk=function(n){var r=n.__peerData,i=this._chunkedData[r]||{data:[],count:0,total:n.total};if(i.data[n.n]=n.data,i.count++,this._chunkedData[r]=i,i.total===i.count){delete this._chunkedData[r];var o=new Blob(i.data);this._handleDataMessage({data:o})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.prototype.send=function(n,r){if(!this.open){t.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===St.JSON)this._bufferedSend(this.stringify(n));else if(this.serialization===St.Binary||this.serialization===St.BinaryUTF8){var i=Ce.pack(n);if(!r&&i.size>Ce.chunkedMTU){this._sendChunks(i);return}Ce.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(n)},e.prototype._bufferedSend=function(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(i){return W.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var n=this._buffer[0];this._trySend(n)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},e.prototype._sendChunks=function(n){var r,i,o=Ce.chunk(n);W.default.log("DC#".concat(this.connectionId," Try to send ").concat(o.length," chunks..."));try{for(var l=Wf(o),c=l.next();!c.done;c=l.next()){var a=c.value;this.send(a,!0)}}catch(u){r={error:u}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}},e.prototype.handleMessage=function(n){var r=n.payload;switch(n.type){case Ne.Answer:this._negotiator.handleSDP(n.type,r.sdp);break;case Ne.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:W.default.warn("Unrecognized message type:",n.type,"from peer:",this.peer);break}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}(Io.BaseConnection),pc={};At(pc,"API",()=>Da,t=>Da=t);var Oa=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(f){try{u(r.next(f))}catch(s){l(s)}}function a(f){try{u(r.throw(f))}catch(s){l(s)}}function u(f){f.done?o(f.value):i(f.value).then(c,a)}u((r=r.apply(t,e||[])).next())})},Ma=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(u){return function(f){return a([u,f])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(f){u=[6,f],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Da=function(){function t(e){this._options=e}return t.prototype._buildRequest=function(e){var n=this._options.secure?"https":"http",r=this._options,i=r.host,o=r.port,l=r.path,c=r.key,a=new URL("".concat(n,"://").concat(i,":").concat(o).concat(l).concat(c,"/").concat(e));return a.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),a.searchParams.set("version",Mo.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})},t.prototype.retrieveId=function(){return Oa(this,void 0,Promise,function(){var e,n,r;return Ma(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(e=i.sent(),e.status!==200)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw n=i.sent(),W.default.error("Error retrieving ID",n),r="",this._options.path==="/"&&this._options.host!==Ce.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},t.prototype.listAllPeers=function(){return Oa(this,void 0,Promise,function(){var e,n,r;return Ma(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(e=i.sent(),e.status!==200)throw e.status===401?(n="",this._options.host===Ce.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)):new Error("Error. Status:".concat(e.status));return[2,e.json()];case 2:throw r=i.sent(),W.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},t}(),Xf=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),tr=function(){return tr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},tr.apply(this,arguments)},Gn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qf=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(c){l={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return o},Ia=function(t){Xf(e,t);function e(n,r){var i=t.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var o;return n&&n.constructor==Object?r=n:n&&(o=n.toString()),r=tr({debug:0,host:Ce.CLOUD_HOST,port:Ce.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:Ce.randomToken(),config:Ce.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),i._options=r,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==Ce.CLOUD_HOST?i._options.secure=Ce.isSecure():i._options.host==Ce.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&W.default.setLogFunction(i._options.logFunction),W.default.logLevel=i._options.debug||0,i._api=new pc.API(r),i._socket=i._createServerConnection(),!Ce.supports.audioVideo&&!Ce.supports.data?(i._delayedAbort(xe.BrowserIncompatible,"The current browser does not support WebRTC"),i):o&&!Ce.validateId(o)?(i._delayedAbort(xe.InvalidID,'ID "'.concat(o,'" is invalid')),i):(o?i._initialize(o):i._api.retrieveId().then(function(l){return i._initialize(l)}).catch(function(l){return i._abort(xe.ServerError,l)}),i)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var n,r,i=Object.create(null);try{for(var o=Gn(this._connections),l=o.next();!l.done;l=o.next()){var c=Qf(l.value,2),a=c[0],u=c[1];i[a]=u}}catch(f){n={error:f}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var n=this,r=new fc.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(Tt.Message,function(i){n._handleMessage(i)}),r.on(Tt.Error,function(i){n._abort(xe.SocketError,i)}),r.on(Tt.Disconnected,function(){n.disconnected||(n.emitError(xe.Network,"Lost connection to server."),n.disconnect())}),r.on(Tt.Close,function(){n.disconnected||n._abort(xe.SocketClosed,"Underlying socket is already closed.")}),r},e.prototype._initialize=function(n){this._id=n,this.socket.start(n,this._options.token)},e.prototype._handleMessage=function(n){var r,i,o=n.type,l=n.payload,c=n.src;switch(o){case Ne.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ne.Error:this._abort(xe.ServerError,l.msg);break;case Ne.IdTaken:this._abort(xe.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case Ne.InvalidKey:this._abort(xe.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case Ne.Leave:W.default.log("Received leave message from ".concat(c)),this._cleanupPeer(c),this._connections.delete(c);break;case Ne.Expire:this.emitError(xe.PeerUnavailable,"Could not connect to peer ".concat(c));break;case Ne.Offer:var h=l.connectionId,m=this.getConnection(c,h);if(m&&(m.close(),W.default.warn("Offer received for existing Connection ID:".concat(h))),l.type===dt.Media){var a=new so.MediaConnection(c,this,{connectionId:h,_payload:l,metadata:l.metadata});m=a,this._addConnection(c,m),this.emit("call",a)}else if(l.type===dt.Data){var u=new lo.DataConnection(c,this,{connectionId:h,_payload:l,metadata:l.metadata,label:l.label,serialization:l.serialization,reliable:l.reliable});m=u,this._addConnection(c,m),this.emit("connection",u)}else{W.default.warn("Received malformed connection type:".concat(l.type));return}var f=this._getMessages(h);try{for(var s=Gn(f),d=s.next();!d.done;d=s.next()){var p=d.value;m.handleMessage(p)}}catch(g){r={error:g}}finally{try{d&&!d.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}break;default:if(!l){W.default.warn("You received a malformed message from ".concat(c," of type ").concat(o));return}var h=l.connectionId,m=this.getConnection(c,h);m&&m.peerConnection?m.handleMessage(n):h?this._storeMessage(h,n):W.default.warn("You received an unrecognized message:",n);break}},e.prototype._storeMessage=function(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)},e.prototype._getMessages=function(n){var r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]},e.prototype.connect=function(n,r){if(r===void 0&&(r={}),this.disconnected){W.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(xe.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new lo.DataConnection(n,this,r);return this._addConnection(n,i),i},e.prototype.call=function(n,r,i){if(i===void 0&&(i={}),this.disconnected){W.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(xe.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){W.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var o=new so.MediaConnection(n,this,tr(tr({},i),{_stream:r}));return this._addConnection(n,o),o},e.prototype._addConnection=function(n,r){W.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(n)),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)},e.prototype._removeConnection=function(n){var r=this._connections.get(n.peer);if(r){var i=r.indexOf(n);i!==-1&&r.splice(i,1)}this._lostMessages.delete(n.connectionId)},e.prototype.getConnection=function(n,r){var i,o,l=this._connections.get(n);if(!l)return null;try{for(var c=Gn(l),a=c.next();!a.done;a=c.next()){var u=a.value;if(u.connectionId===r)return u}}catch(f){i={error:f}}finally{try{a&&!a.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return null},e.prototype._delayedAbort=function(n,r){var i=this;setTimeout(function(){i._abort(n,r)},0)},e.prototype._abort=function(n,r){W.default.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(n,r){W.default.error("Error:",r);var i;typeof r=="string"?i=new Error(r):i=r,i.type=n,this.emit("error",i)},e.prototype.destroy=function(){this.destroyed||(W.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},e.prototype._cleanup=function(){var n,r;try{for(var i=Gn(this._connections.keys()),o=i.next();!o.done;o=i.next()){var l=o.value;this._cleanupPeer(l),this._connections.delete(l)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(n){var r,i,o=this._connections.get(n);if(o)try{for(var l=Gn(o),c=l.next();!c.done;c=l.next()){var a=c.value;a.close()}}catch(u){r={error:u}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var n=this.id;W.default.log("Disconnect peer with ID:".concat(n)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)W.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)W.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},e.prototype.listAllPeers=function(n){var r=this;n===void 0&&(n=function(i){}),this._api.listAllPeers().then(function(i){return n(i)}).catch(function(i){return r._abort(xe.ServerError,i)})},e.DEFAULT_KEY="peerjs",e}(_r.EventEmitter),Yf=cc.Peer;function Bo(t){const e=t-1;return e*e*e+1}function en(t,{delay:e=0,duration:n=400,easing:r=nn}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:o=>`opacity: ${o*i}`}}function Kf(t,{delay:e=0,duration:n=400,easing:r=Bo,x:i=0,y:o=0,opacity:l=0}={}){const c=getComputedStyle(t),a=+c.opacity,u=c.transform==="none"?"":c.transform,f=a*(1-l),[s,d]=Wo(i),[p,h]=Wo(o);return{delay:e,duration:n,easing:r,css:(m,g)=>`
			transform: ${u} translate(${(1-m)*s}${d}, ${(1-m)*p}${h});
			opacity: ${a-f*g}`}}function gi(t,{delay:e=0,duration:n=400,easing:r=Bo,axis:i="y"}={}){const o=getComputedStyle(t),l=+o.opacity,c=i==="y"?"height":"width",a=parseFloat(o[c]),u=i==="y"?["top","bottom"]:["left","right"],f=u.map(v=>`${v[0].toUpperCase()}${v.slice(1)}`),s=parseFloat(o[`padding${f[0]}`]),d=parseFloat(o[`padding${f[1]}`]),p=parseFloat(o[`margin${f[0]}`]),h=parseFloat(o[`margin${f[1]}`]),m=parseFloat(o[`border${f[0]}Width`]),g=parseFloat(o[`border${f[1]}Width`]);return{delay:e,duration:n,easing:r,css:v=>`overflow: hidden;opacity: ${Math.min(v*20,1)*l};${c}: ${v*a}px;padding-${u[0]}: ${v*s}px;padding-${u[1]}: ${v*d}px;margin-${u[0]}: ${v*p}px;margin-${u[1]}: ${v*h}px;border-${u[0]}-width: ${v*m}px;border-${u[1]}-width: ${v*g}px;`}}function Jf(t,{from:e,to:n},r={}){const i=getComputedStyle(t),o=i.transform==="none"?"":i.transform,[l,c]=i.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*l/n.width-(n.left+l),u=e.top+e.height*c/n.height-(n.top+c),{delay:f=0,duration:s=p=>Math.sqrt(p)*120,easing:d=Bo}=r;return{delay:f,duration:oe(s)?s(Math.sqrt(a*a+u*u)):s,easing:d,css:(p,h)=>{const m=h*a,g=h*u,v=p+h*e.width/n.width,y=p+h*e.height/n.height;return`transform: ${o} translate(${m}px, ${g}px) scale(${v}, ${y});`}}}const fn=[];function xn(t,e=fe){let n;const r=new Set;function i(c){if(Se(t,c)&&(t=c,n)){const a=!fn.length;for(const u of r)u[1](),fn.push(u,t);if(a){for(let u=0;u<fn.length;u+=2)fn[u][0](fn[u+1]);fn.length=0}}}function o(c){i(c(t))}function l(c,a=fe){const u=[c,a];return r.add(u),r.size===1&&(n=e(i)||fe),c(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:l}}const Zf={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function $f(){const{subscribe:t,update:e}=xn(new Array),n={};let r=0;function i(u){return u instanceof Object}function o(u="default",f={}){return n[u]=f,n}function l(u,f){const s={target:"default",...i(u)?u:{...f,msg:u}},d=n[s.target]||{},p={...Zf,...d,...s,theme:{...d.theme,...s.theme},classes:[...d.classes||[],...s.classes||[]],id:++r};return e(h=>p.reversed?[...h,p]:[p,...h]),r}function c(u){e(f=>{if(!f.length||u===0)return[];if(typeof u=="function")return f.filter(d=>u(d));if(i(u))return f.filter(d=>d.target!==u.target);const s=u||Math.max(...f.map(d=>d.id));return f.filter(d=>d.id!==s)})}function a(u,f){const s=i(u)?u:{...f,id:u};e(d=>{const p=d.findIndex(h=>h.id===s.id);return p>-1&&(d[p]={...d[p],...s}),d})}return{subscribe:t,push:l,pop:c,set:a,_init:o}}const dr=$f();function Ba(t){return Object.prototype.toString.call(t)==="[object Date]"}function co(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const r=e.map((i,o)=>co(t[o],i));return i=>r.map(o=>o(i))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(Ba(t)&&Ba(e)){t=t.getTime(),e=e.getTime();const o=e-t;return l=>new Date(t+l*o)}const r=Object.keys(e),i={};return r.forEach(o=>{i[o]=co(t[o],e[o])}),o=>{const l={};return r.forEach(c=>{l[c]=i[c](o)}),l}}if(n==="number"){const r=e-t;return i=>t+i*r}throw new Error(`Cannot interpolate ${n} values`)}function ed(t,e={}){const n=xn(t);let r,i=t;function o(l,c){if(t==null)return n.set(t=l),Promise.resolve();i=l;let a=r,u=!1,{delay:f=0,duration:s=400,easing:d=nn,interpolate:p=co}=H(H({},e),c);if(s===0)return a&&(a.abort(),a=null),n.set(t=i),Promise.resolve();const h=gr()+f;let m;return r=mr(g=>{if(g<h)return!0;u||(m=p(t,l),typeof s=="function"&&(s=s(t,l)),u=!0),a&&(a.abort(),a=null);const v=g-h;return v>s?(n.set(t=l),!1):(n.set(t=m(d(v/s))),!0)}),r.promise}return{set:o,update:(l,c)=>o(l(i,t),c),subscribe:n.subscribe}}function td(t){let e,n=t[0].msg+"",r;return{c(){e=new Yc(!1),r=Ye(),e.a=r},m(i,o){e.m(n,i,o),O(i,r,o)},p(i,o){o&1&&n!==(n=i[0].msg+"")&&e.p(n)},i:fe,o:fe,d(i){i&&P(r),i&&e.d()}}}function nd(t){let e,n,r;const i=[t[2]];var o=t[0].component.src;function l(c){let a={};for(let u=0;u<i.length;u+=1)a=H(a,i[u]);return{props:a}}return o&&(e=ti(o,l())),{c(){e&&se(e.$$.fragment),n=Ye()},m(c,a){e&&re(e,c,a),O(c,n,a),r=!0},p(c,a){const u=a&4?Y(i,[lr(c[2])]):{};if(a&1&&o!==(o=c[0].component.src)){if(e){lt();const f=e;T(f.$$.fragment,1,0,()=>{ie(f,1)}),ct()}o?(e=ti(o,l()),se(e.$$.fragment),k(e.$$.fragment,1),re(e,n.parentNode,n)):e=null}else o&&e.$set(u)},i(c){r||(e&&k(e.$$.fragment,c),r=!0)},o(c){e&&T(e.$$.fragment,c),r=!1},d(c){c&&P(n),e&&ie(e,c)}}}function xa(t){let e,n,r;return{c(){e=R("div"),D(e,"class","_toastBtn pe svelte-95rq8t"),D(e,"role","button"),D(e,"tabindex","0")},m(i,o){O(i,e,o),n||(r=[de(e,"click",t[4]),de(e,"keydown",t[8])],n=!0)},p:fe,d(i){i&&P(e),n=!1,Q(r)}}}function rd(t){let e,n,r,i,o,l,c,a,u,f;const s=[nd,td],d=[];function p(m,g){return m[0].component?0:1}r=p(t),i=d[r]=s[r](t);let h=t[0].dismissable&&xa(t);return{c(){e=R("div"),n=R("div"),i.c(),o=K(),h&&h.c(),l=K(),c=R("progress"),D(n,"role","status"),D(n,"class","_toastMsg svelte-95rq8t"),mt(n,"pe",t[0].component),D(c,"class","_toastBar svelte-95rq8t"),c.value=t[1],D(e,"class","_toastItem svelte-95rq8t"),mt(e,"pe",t[0].pausable)},m(m,g){O(m,e,g),B(e,n),d[r].m(n,null),B(e,o),h&&h.m(e,null),B(e,l),B(e,c),a=!0,u||(f=[de(e,"mouseenter",t[9]),de(e,"mouseleave",t[6])],u=!0)},p(m,[g]){let v=r;r=p(m),r===v?d[r].p(m,g):(lt(),T(d[v],1,1,()=>{d[v]=null}),ct(),i=d[r],i?i.p(m,g):(i=d[r]=s[r](m),i.c()),k(i,1),i.m(n,null)),(!a||g&1)&&mt(n,"pe",m[0].component),m[0].dismissable?h?h.p(m,g):(h=xa(m),h.c(),h.m(e,l)):h&&(h.d(1),h=null),(!a||g&2)&&(c.value=m[1]),(!a||g&1)&&mt(e,"pe",m[0].pausable)},i(m){a||(k(i),a=!0)},o(m){T(i),a=!1},d(m){m&&P(e),d[r].d(),h&&h.d(),u=!1,Q(f)}}}function Gi(t,e="undefined"){return typeof t===e}function id(t,e,n){let r,{item:i}=e,o=i.initial,l=o,c=!1,a={},u;const f=ed(i.initial,{duration:i.duration,easing:nn});Re(t,f,y=>n(1,r=y));function s(){dr.pop(i.id)}function d(){(r===1||r===0)&&s()}function p(){!c&&r!==o&&(f.set(r,{duration:0}),c=!0)}function h(){if(c){const y=i.duration,_=y-y*((r-l)/(o-l));f.set(o,{duration:_}).then(d),c=!1}}function m(y=document){if(Gi(y.hidden))return;const _=()=>y.hidden?p():h(),b="visibilitychange";y.addEventListener(b,_),u=()=>y.removeEventListener(b,_),_()}Mn(m),yt(()=>{Gi(i.onpop,"function")&&i.onpop(i.id),u&&u()});const g=y=>{y instanceof KeyboardEvent&&["Enter"," "].includes(y.key)&&s()},v=()=>{i.pausable&&p()};return t.$$set=y=>{"item"in y&&n(0,i=y.item)},t.$$.update=()=>{if(t.$$.dirty&1&&(Gi(i.progress)||n(0,i.next=i.progress,i)),t.$$.dirty&131&&o!==i.next&&(n(7,o=i.next),l=r,c=!1,f.set(o).then(d)),t.$$.dirty&1&&i.component){const{props:y={},sendIdTo:_}=i.component;n(2,a={...y,..._&&{[_]:i.id}})}},[i,r,a,f,s,p,h,o,g,v]}class od extends we{constructor(e){super(),Te(this,e,id,rd,Se,{item:0})}}function La(t,e,n){const r=t.slice();return r[4]=e[n],r}function Fa(t,e){let n,r,i,o,l,c,a,u,f=fe,s;return r=new od({props:{item:e[4]}}),{key:t,first:null,c(){var d;n=R("li"),se(r.$$.fragment),i=K(),D(n,"class",o=An((d=e[4].classes)==null?void 0:d.join(" "))+" svelte-1u812xz"),D(n,"style",l=ja(e[4].theme)),this.first=n},m(d,p){O(d,n,p),re(r,n,null),B(n,i),s=!0},p(d,p){var m;e=d;const h={};p&1&&(h.item=e[4]),r.$set(h),(!s||p&1&&o!==(o=An((m=e[4].classes)==null?void 0:m.join(" "))+" svelte-1u812xz"))&&D(n,"class",o),(!s||p&1&&l!==(l=ja(e[4].theme)))&&D(n,"style",l)},r(){u=n.getBoundingClientRect()},f(){eu(n),f(),el(n,u)},a(){f(),f=$c(n,u,Jf,{duration:200})},i(d){s||(k(r.$$.fragment,d),nt(()=>{s&&(a&&a.end(1),c=Ao(n,Kf,e[4].intro),c.start())}),s=!0)},o(d){T(r.$$.fragment,d),c&&c.invalidate(),a=iu(n,en,{}),s=!1},d(d){d&&P(n),ie(r),d&&a&&a.end()}}}function ad(t){let e,n=[],r=new Map,i,o=t[0];const l=c=>c[4].id;for(let c=0;c<o.length;c+=1){let a=La(t,o,c),u=l(a);r.set(u,n[c]=Fa(u,a))}return{c(){e=R("ul");for(let c=0;c<n.length;c+=1)n[c].c();D(e,"class","_toastContainer svelte-1u812xz")},m(c,a){O(c,e,a);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);i=!0},p(c,[a]){if(a&1){o=c[0],lt();for(let u=0;u<n.length;u+=1)n[u].r();n=su(n,a,l,1,c,o,r,e,au,Fa,null,La);for(let u=0;u<n.length;u+=1)n[u].a();ct()}},i(c){if(!i){for(let a=0;a<o.length;a+=1)k(n[a]);i=!0}},o(c){for(let a=0;a<n.length;a+=1)T(n[a]);i=!1},d(c){c&&P(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function ja(t){return t?Object.keys(t).reduce((e,n)=>`${e}${n}:${t[n]};`,""):void 0}function sd(t,e,n){let r;Re(t,dr,c=>n(3,r=c));let{options:i={}}=e,{target:o="default"}=e,l=[];return t.$$set=c=>{"options"in c&&n(1,i=c.options),"target"in c&&n(2,o=c.target)},t.$$.update=()=>{t.$$.dirty&6&&dr._init(o,i),t.$$.dirty&12&&n(0,l=r.filter(c=>c.target===o))},[l,i,o,r]}class ld extends we{constructor(e){super(),Te(this,e,sd,ad,Se,{options:1,target:2})}}function Na(t){let e,n,r,i,o;return{c(){e=R("div"),n=R("div"),r=K(),i=R("span"),o=Ge(t[0]),D(n,"class","svelte-19tuhcz"),D(i,"id","site_loading_text"),D(i,"class","svelte-19tuhcz"),D(e,"id","site_loading_indicator"),D(e,"class","lds-circle svelte-19tuhcz")},m(l,c){O(l,e,c),B(e,n),B(e,r),B(e,i),B(i,o)},p(l,c){c&1&&Rt(o,l[0])},d(l){l&&P(e)}}}function cd(t){let e,n=t[0]!=null&&Na(t);return{c(){n&&n.c(),e=Ye()},m(r,i){n&&n.m(r,i),O(r,e,i)},p(r,[i]){r[0]!=null?n?n.p(r,i):(n=Na(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:fe,o:fe,d(r){n&&n.d(r),r&&P(e)}}}let mi=Ae(null),Jn={};const wt=(t,e)=>{const n=e||t||Oe.default;mi.set(n),console.debug("showLoadingUi",n),Jn[t]=n},it=t=>{t===Oe.clearAll?Jn={}:delete Jn[t];const e=Object.keys(Jn);e.length===0?mi.set(null):(mi.set(Jn[e[e.length-1]]),console.debug("hideLoadingUi Nonempty stack",t))};function ud(t,e,n){let r;return Re(t,mi,i=>n(0,r=i)),[r]}class fd extends we{constructor(e){super(),Te(this,e,ud,cd,Se,{})}}function vi(t){return El+uf(t,rf)}function dd(t){var e=Number(t[0].toFixed(3)),n=-1*Number(t[1].toFixed(3)),r=Number(t[2].toFixed(3)),i=-1*Number(t[3].toFixed(3));return{VelocityX:r,VelocityY:n,VelocityZ:i,AngularVelocityYaw:e}}var nr;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(nr||(nr={}));const pd="headlessui-open-closed-context";function hd(){return Dn(pd)}function uo(t,e,...n){if(t in e){let i=e[t];return typeof i=="function"?i(...n):i}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(i=>`"${i}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,uo),r}let gd=0;function md(){return++gd}function Ti(){return md()}let dn=new Set,It=new Map;function Ga(t){t.setAttribute("aria-hidden","true"),t.inert=!0}function Va(t){let e=It.get(t);e&&(e["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",e["aria-hidden"]),t.inert=e.inert)}function vd(t,e=!0){if(!e||!t)return;let n=t;dn.add(n);for(let r of It.keys())r.contains(n)&&(Va(r),It.delete(r));return document.querySelectorAll("body > *").forEach(r=>{if(r instanceof HTMLElement){for(let i of dn)if(r.contains(i))return;dn.size===1&&(It.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),Ga(r))}}),()=>{if(dn.delete(n),dn.size>0)document.querySelectorAll("body > *").forEach(r=>{if(r instanceof HTMLElement&&!It.has(r)){for(let i of dn)if(r.contains(i))return;It.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),Ga(r)}});else for(let r of It.keys())Va(r),It.delete(r)}}function fo(t,e){for(let n of t)if(n.contains(e))return!0;return!1}var yi;(function(t){t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab"})(yi||(yi={}));let yd=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var He;(function(t){t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll"})(He||(He={}));var Gt;(function(t){t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow"})(Gt||(Gt={}));var bi;(function(t){t[t.Previous=-1]="Previous",t[t.Next=1]="Next"})(bi||(bi={}));function bd(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(yd))}var Ua;(function(t){t[t.Strict=0]="Strict",t[t.Loose=1]="Loose"})(Ua||(Ua={}));function Vn(t){t==null||t.focus({preventScroll:!0})}function za(t,e){let n=Array.isArray(t)?t:bd(t),r=document.activeElement,i=(()=>{if(e&(He.First|He.Next))return bi.Next;if(e&(He.Previous|He.Last))return bi.Previous;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),o=(()=>{if(e&He.First)return 0;if(e&He.Previous)return Math.max(0,n.indexOf(r))-1;if(e&He.Next)return Math.max(0,n.indexOf(r))+1;if(e&He.Last)return n.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=e&He.NoScroll?{preventScroll:!0}:{},c=0,a=n.length,u;do{if(c>=a||c+a<=0)return Gt.Error;let f=o+c;if(e&He.WrapAround)f=(f+a)%a;else{if(f<0)return Gt.Underflow;if(f>=a)return Gt.Overflow}u=n[f],u==null||u.focus(l),c+=i}while(u!==document.activeElement);return u.hasAttribute("tabindex")||u.setAttribute("tabindex","0"),Gt.Success}const{window:Ha}=yo;function _d(t){let e,n;return{c:fe,m(r,i){e||(n=[de(Ha,"keydown",t[0]),de(Ha,"focus",t[1],!0)],e=!0)},p:fe,i:fe,o:fe,d(r){e=!1,Q(n)}}}function Cd(t,e,n){let{containers:r}=e,{enabled:i=!0}=e,{options:o={}}=e,l=typeof window<"u"?document.activeElement:null,c=null;async function a(){if(!i||r.size!==1)return;let{initialFocus:p}=o;await bo();let h=document.activeElement;if(p){if(p===h)return}else if(fo(r,h))return;if(l=h,p)Vn(p);else{let m=!1;for(let g of r)if(za(g,He.First)===Gt.Success){m=!0;break}m||console.warn("There are no focusable elements inside the <FocusTrap />")}c=document.activeElement}function u(){Vn(l),l=null,c=null}Mn(a);let f=!1;yt(()=>{f=!0,u()});function s(p){if(i&&p.key===yi.Tab&&document.activeElement&&r.size===1){p.preventDefault();for(let h of r)if(za(h,(p.shiftKey?He.Previous:He.Next)|He.WrapAround)===Gt.Success){c=document.activeElement;break}}}function d(p){if(p.target===window.document.body||!i||r.size!==1||f)return;let h=c;if(!h)return;let m=p.target;m&&m instanceof HTMLElement?fo(r,m)?(c=m,Vn(m)):(p.preventDefault(),p.stopPropagation(),Vn(h)):Vn(c)}return t.$$set=p=>{"containers"in p&&n(2,r=p.containers),"enabled"in p&&n(3,i=p.enabled),"options"in p&&n(4,o=p.options)},t.$$.update=()=>{t.$$.dirty&12&&(i&&r?a():u())},[s,d,r,i,o]}class Ad extends we{constructor(e){super(),Te(this,e,Cd,_d,Se,{containers:2,enabled:3,options:4})}}function Ed(t){let e;const n=t[4].default,r=Z(n,t,t[3],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,[o]){r&&r.p&&(!e||o&8)&&ee(r,n,i,i[3],e?$(n,i[3],o,null):te(i[3]),null)},i(i){e||(k(r,i),e=!0)},o(i){T(r,i),e=!1},d(i){r&&r.d(i)}}}var Tn;(function(t){t[t.Add=0]="Add",t[t.Remove=1]="Remove"})(Tn||(Tn={}));const qa="headlessui-stack-context";function Sd(t,e,n){let r,{$$slots:i={},$$scope:o}=e,{onUpdate:l}=e,{element:c}=e;function a(...f){l==null||l(...f),u==null||u(...f)}let u=Dn(qa);return yr(qa,a),yt(()=>{r&&r()}),t.$$set=f=>{"onUpdate"in f&&n(0,l=f.onUpdate),"element"in f&&n(1,c=f.element),"$$scope"in f&&n(3,o=f.$$scope)},t.$$.update=()=>{t.$$.dirty&6&&n(2,r=(()=>{if(r&&r(),!c)return null;let f=c;return a(Tn.Add,f),()=>a(Tn.Remove,f)})())},[l,c,r,o,i]}class kd extends we{constructor(e){super(),Te(this,e,Sd,Ed,Se,{onUpdate:0,element:1})}}const Td=t=>({describedby:t&1}),Wa=t=>({describedby:t[0].descriptionIds});function wd(t){let e;const n=t[6].default,r=Z(n,t,t[5],Wa);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,[o]){r&&r.p&&(!e||o&33)&&ee(r,n,i,i[5],e?$(n,i[5],o,Td):te(i[5]),Wa)},i(i){e||(k(r,i),e=!0)},o(i){T(r,i),e=!1},d(i){r&&r.d(i)}}}const hc="headlessui-description-context";function Rd(){return Dn(hc)}function Pd(t,e,n){const r=["name","slotProps"];let i=Ze(e,r),o,{$$slots:l={},$$scope:c}=e,{name:a}=e,{slotProps:u={}}=e,f=[],s=xn({name:a,slotProps:u,props:i,register:d});Re(t,s,p=>n(0,o=p)),yr(hc,s);function d(p){return n(4,f=[...f,p]),()=>{n(4,f=f.filter(h=>h!==p))}}return t.$$set=p=>{e=H(H({},e),rn(p)),n(8,i=Ze(e,r)),"name"in p&&n(2,a=p.name),"slotProps"in p&&n(3,u=p.slotProps),"$$scope"in p&&n(5,c=p.$$scope)},t.$$.update=()=>{s.set({name:a,slotProps:u,props:i,register:d,descriptionIds:f.length>0?f.join(" "):void 0})},[o,s,a,u,f,c,l]}class Od extends we{constructor(e){super(),Te(this,e,Pd,wd,Se,{name:2,slotProps:3})}}function Md(t){let e;const n=t[2].default,r=Z(n,t,t[1],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,[o]){r&&r.p&&(!e||o&2)&&ee(r,n,i,i[1],e?$(n,i[1],o,null):te(i[1]),null)},i(i){e||(k(r,i),e=!0)},o(i){T(r,i),e=!1},d(i){r&&r.d(i)}}}const gc="headlessui-force-portal-root-context";function Dd(){return Dn(gc)}function Id(t,e,n){let{$$slots:r={},$$scope:i}=e,{force:o}=e;return yr(gc,xn(o)),t.$$set=l=>{"force"in l&&n(0,o=l.force),"$$scope"in l&&n(1,i=l.$$scope)},[o,i,r]}class mc extends we{constructor(e){super(),Te(this,e,Id,Md,Se,{force:0})}}function Bd(t){let e;const n=t[2].default,r=Z(n,t,t[1],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,[o]){r&&r.p&&(!e||o&2)&&ee(r,n,i,i[1],e?$(n,i[1],o,null):te(i[1]),null)},i(i){e||(k(r,i),e=!0)},o(i){T(r,i),e=!1},d(i){r&&r.d(i)}}}const vc="headlessui-portal-group-context";function xd(){return Dn(vc)}function Ld(t,e,n){let{$$slots:r={},$$scope:i}=e,{target:o}=e,l=xn(o);return yr(vc,l),t.$$set=c=>{"target"in c&&n(0,o=c.target),"$$scope"in c&&n(1,i=c.$$scope)},t.$$.update=()=>{t.$$.dirty&1&&l.set(o)},[o,i,r]}class Fd extends we{constructor(e){super(),Te(this,e,Ld,Bd,Se,{target:0})}}function jd(t,e){return e&&e.append(t),{update(n){e=n,n.append(t)},destroy(){var n;e!=null&&e.contains(t)&&e.removeChild(t),e&&e.childNodes.length<=0&&((n=e.parentElement)==null||n.removeChild(e))}}}function Nd(t){let e,n,r,i,o;const l=t[6].default,c=Z(l,t,t[5],null);return{c(){e=R("div"),c&&c.c()},m(a,u){O(a,e,u),c&&c.m(e,null),r=!0,i||(o=F(n=jd.call(null,e,t[0])),i=!0)},p(a,[u]){c&&c.p&&(!r||u&32)&&ee(c,l,a,a[5],r?$(l,a[5],u,null):te(a[5]),null),n&&oe(n.update)&&u&1&&n.update.call(null,a[0])},i(a){r||(k(c,a),r=!0)},o(a){T(c,a),r=!1},d(a){a&&P(e),c&&c.d(a),i=!1,o()}}}function Gd(t,e,n){let r,i,o,{$$slots:l={},$$scope:c}=e,a=Dd();Re(t,a,f=>n(4,o=f));let u=xd();return Re(t,u,f=>n(3,i=f)),t.$$set=f=>{"$$scope"in f&&n(5,c=f.$$scope)},t.$$.update=()=>{t.$$.dirty&24&&n(0,r=(()=>{if(!(a&&o)&&u!==void 0&&i!==null)return i;if(typeof window>"u")return null;let f=document.getElementById("headlessui-portal-root");if(f)return f;let s=document.createElement("div");return s.setAttribute("id","headlessui-portal-root"),bo().then(()=>{s!==document.body.lastChild&&document.body.appendChild(s)}),document.body.appendChild(s)})())},[r,a,u,i,o,c,l]}class Vd extends we{constructor(e){super(),Te(this,e,Gd,Nd,Se,{})}}const po="!",Ud=new RegExp(`^[^${po}]+(?:${po}(?:preventDefault|stopPropagation|passive|nonpassive|capture|once|self))+$`);function Cr(t,e=[]){let n,r=[];t.$on=(o,l)=>{let c=o,a=()=>{};for(let u of e){if(typeof u=="string"&&u===c){const f=t.$$.callbacks[c]||(t.$$.callbacks[c]=[]);return f.push(l),()=>{const s=f.indexOf(l);s!==-1&&f.splice(s,1)}}if(typeof u=="object"&&u.name===c){let f=l;l=(...s)=>{typeof u=="object"&&u.shouldExclude()||f(...s)}}}return n?a=n(c,l):r.push([c,l]),()=>{a()}};function i(o){tu(t,o)}return o=>{const l=[],c={};n=(a,u)=>{let f=a,s=u,d=!1;if(f.match(Ud)){const g=f.split(po);f=g[0];const v=Object.fromEntries(g.slice(1).map(y=>[y,!0]));v.passive&&(d=d||{},d.passive=!0),v.nonpassive&&(d=d||{},d.passive=!1),v.capture&&(d=d||{},d.capture=!0),v.once&&(d=d||{},d.once=!0),v.preventDefault&&(s=Zs(s)),v.stopPropagation&&(s=Wc(s))}const h=de(o,f,s,d),m=()=>{h();const g=l.indexOf(m);g>-1&&l.splice(g,1)};return l.push(m),f in c||(c[f]=de(o,f,i)),m};for(let a=0;a<r.length;a++)n(r[a][0],r[a][1]);return{destroy:()=>{for(let a=0;a<l.length;a++)l[a]();for(let a of Object.entries(c))a[1]()}}}}const zd=["a","address","article","aside","b","bdi","bdo","blockquote","button","cite","code","data","datalist","dd","dl","dt","div","em","footer","form","h1","h2","h3","h4","h5","h6","header","i","input","label","li","main","nav","ol","p","section","span","strong","ul"];function Hd(t){return!(typeof t=="string"&&!zd.includes(t))}function pe(t,e){let n=[];if(e)for(let r=0;r<e.length;r++){const i=e[r],o=Array.isArray(i)?i[0]:i;Array.isArray(i)&&i.length>1?n.push(o(t,i[1])):n.push(o(t))}return{update(r){if((r&&r.length||0)!=n.length)throw new Error("You must not change the length of an actions array.");if(r)for(let i=0;i<r.length;i++){const o=n[i];if(o&&o.update){const l=r[i];Array.isArray(l)&&l.length>1?o.update(l[1]):o.update()}}},destroy(){for(let r=0;r<n.length;r++){const i=n[r];i&&i.destroy&&i.destroy()}}}}var pt;(function(t){t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static"})(pt||(pt={}));function Xa(t){let e,n,r,i;const o=[Op,Pp,Rp,wp,Tp,kp,Sp,Ep,Ap,Cp,_p,bp,yp,vp,mp,gp,hp,pp,dp,fp,up,cp,lp,sp,ap,op,ip,rp,np,tp,ep,$d,Zd,Jd,Kd,Yd,Qd,Xd,Wd,qd],l=[];function c(a,u){return a[1]==="a"?0:a[1]==="address"?1:a[1]==="article"?2:a[1]==="aside"?3:a[1]==="b"?4:a[1]==="bdi"?5:a[1]==="bdo"?6:a[1]==="blockquote"?7:a[1]==="button"?8:a[1]==="cite"?9:a[1]==="code"?10:a[1]==="data"?11:a[1]==="datalist"?12:a[1]==="dd"?13:a[1]==="dl"?14:a[1]==="dt"?15:a[1]==="div"?16:a[1]==="em"?17:a[1]==="footer"?18:a[1]==="form"?19:a[1]==="h1"?20:a[1]==="h2"?21:a[1]==="h3"?22:a[1]==="h4"?23:a[1]==="h5"?24:a[1]==="h6"?25:a[1]==="header"?26:a[1]==="i"?27:a[1]==="input"?28:a[1]==="label"?29:a[1]==="li"?30:a[1]==="main"?31:a[1]==="nav"?32:a[1]==="ol"?33:a[1]==="p"?34:a[1]==="section"?35:a[1]==="span"?36:a[1]==="strong"?37:a[1]==="ul"?38:39}return e=c(t),n=l[e]=o[e](t),{c(){n.c(),r=Ye()},m(a,u){l[e].m(a,u),O(a,r,u),i=!0},p(a,u){let f=e;e=c(a),e===f?l[e].p(a,u):(lt(),T(l[f],1,1,()=>{l[f]=null}),ct(),n=l[e],n?n.p(a,u):(n=l[e]=o[e](a),n.c()),k(n,1),n.m(r.parentNode,r))},i(a){i||(k(n),i=!0)},o(a){T(n),i=!1},d(a){l[e].d(a),a&&P(r)}}}function qd(t){let e,n,r,i;const o=[{use:[...t[2],t[6]]},t[7],t[3],{hidden:t[4]||void 0}];function l(u){t[58](u)}var c=t[1];function a(u){let f={$$slots:{default:[Mp]},$$scope:{ctx:u}};for(let s=0;s<o.length;s+=1)f=H(f,o[s]);return u[0]!==void 0&&(f.el=u[0]),{props:f}}return c&&(e=ti(c,a(t)),ne.push(()=>Wi(e,"el",l))),{c(){e&&se(e.$$.fragment),r=Ye()},m(u,f){e&&re(e,u,f),O(u,r,f),i=!0},p(u,f){const s=f[0]&220?Y(o,[f[0]&68&&{use:[...u[2],u[6]]},f[0]&128&&lr(u[7]),f[0]&8&&lr(u[3]),f[0]&16&&{hidden:u[4]||void 0}]):{};if(f[1]&268435456&&(s.$$scope={dirty:f,ctx:u}),!n&&f[0]&1&&(n=!0,s.el=u[0],rl(()=>n=!1)),f[0]&2&&c!==(c=u[1])){if(e){lt();const d=e;T(d.$$.fragment,1,0,()=>{ie(d,1)}),ct()}c?(e=ti(c,a(u)),ne.push(()=>Wi(e,"el",l)),se(e.$$.fragment),k(e.$$.fragment,1),re(e,r.parentNode,r)):e=null}else c&&e.$set(s)},i(u){i||(e&&k(e.$$.fragment,u),i=!0)},o(u){e&&T(e.$$.fragment,u),i=!1},d(u){u&&P(r),e&&ie(e,u)}}}function Wd(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("ul"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[57](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[57](null),o=!1,Q(l)}}}function Xd(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("strong"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[56](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[56](null),o=!1,Q(l)}}}function Qd(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("span"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[55](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[55](null),o=!1,Q(l)}}}function Yd(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("section"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[54](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[54](null),o=!1,Q(l)}}}function Kd(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("p"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[53](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[53](null),o=!1,Q(l)}}}function Jd(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("ol"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[52](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[52](null),o=!1,Q(l)}}}function Zd(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("nav"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[51](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[51](null),o=!1,Q(l)}}}function $d(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("main"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[50](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[50](null),o=!1,Q(l)}}}function ep(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("li"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[49](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[49](null),o=!1,Q(l)}}}function tp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("label"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[48](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[48](null),o=!1,Q(l)}}}function np(t){let e,n,r,i,o,l=[t[7],t[3],{hidden:n=t[4]||void 0}],c={};for(let a=0;a<l.length;a+=1)c=H(c,l[a]);return{c(){e=R("input"),V(e,c)},m(a,u){O(a,e,u),e.autofocus&&e.focus(),t[47](e),i||(o=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],i=!0)},p(a,u){V(e,c=Y(l,[u[0]&128&&a[7],u[0]&8&&a[3],u[0]&16&&n!==(n=a[4]||void 0)&&{hidden:n}])),r&&oe(r.update)&&u[0]&4&&r.update.call(null,a[2])},i:fe,o:fe,d(a){a&&P(e),t[47](null),i=!1,Q(o)}}}function rp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("i"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[46](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[46](null),o=!1,Q(l)}}}function ip(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("header"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[45](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[45](null),o=!1,Q(l)}}}function op(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("h6"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[44](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[44](null),o=!1,Q(l)}}}function ap(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("h5"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[43](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[43](null),o=!1,Q(l)}}}function sp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("h4"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[42](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[42](null),o=!1,Q(l)}}}function lp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("h3"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[41](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[41](null),o=!1,Q(l)}}}function cp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("h2"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[40](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[40](null),o=!1,Q(l)}}}function up(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("h1"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[39](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[39](null),o=!1,Q(l)}}}function fp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("form"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[38](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[38](null),o=!1,Q(l)}}}function dp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("footer"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[37](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[37](null),o=!1,Q(l)}}}function pp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("em"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[36](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[36](null),o=!1,Q(l)}}}function hp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("div"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[35](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[35](null),o=!1,Q(l)}}}function gp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("dt"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[34](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[34](null),o=!1,Q(l)}}}function mp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("dl"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[33](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[33](null),o=!1,Q(l)}}}function vp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("dd"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[32](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[32](null),o=!1,Q(l)}}}function yp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("datalist"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[31](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[31](null),o=!1,Q(l)}}}function bp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("data"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[30](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[30](null),o=!1,Q(l)}}}function _p(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("code"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[29](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[29](null),o=!1,Q(l)}}}function Cp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("cite"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[28](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[28](null),o=!1,Q(l)}}}function Ap(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("button"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),e.autofocus&&e.focus(),t[27](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[27](null),o=!1,Q(l)}}}function Ep(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("blockquote"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[26](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[26](null),o=!1,Q(l)}}}function Sp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("bdo"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[25](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[25](null),o=!1,Q(l)}}}function kp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("bdi"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[24](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[24](null),o=!1,Q(l)}}}function Tp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("b"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[23](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[23](null),o=!1,Q(l)}}}function wp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("aside"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[22](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[22](null),o=!1,Q(l)}}}function Rp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("article"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[21](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[21](null),o=!1,Q(l)}}}function Pp(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("address"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[20](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[20](null),o=!1,Q(l)}}}function Op(t){let e,n,r,i,o,l;const c=t[18].default,a=Z(c,t,t[59],null);let u=[t[7],t[3],{hidden:n=t[4]||void 0}],f={};for(let s=0;s<u.length;s+=1)f=H(f,u[s]);return{c(){e=R("a"),a&&a.c(),V(e,f)},m(s,d){O(s,e,d),a&&a.m(e,null),t[19](e),i=!0,o||(l=[F(r=pe.call(null,e,t[2])),F(t[6].call(null,e))],o=!0)},p(s,d){a&&a.p&&(!i||d[1]&268435456)&&ee(a,c,s,s[59],i?$(c,s[59],d,null):te(s[59]),null),V(e,f=Y(u,[d[0]&128&&s[7],d[0]&8&&s[3],(!i||d[0]&16&&n!==(n=s[4]||void 0))&&{hidden:n}])),r&&oe(r.update)&&d[0]&4&&r.update.call(null,s[2])},i(s){i||(k(a,s),i=!0)},o(s){T(a,s),i=!1},d(s){s&&P(e),a&&a.d(s),t[19](null),o=!1,Q(l)}}}function Mp(t){let e;const n=t[18].default,r=Z(n,t,t[59],null);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o[1]&268435456)&&ee(r,n,i,i[59],e?$(n,i[59],o,null):te(i[59]),null)},i(i){e||(k(r,i),e=!0)},o(i){T(r,i),e=!1},d(i){r&&r.d(i)}}}function Dp(t){let e,n,r=t[5]&&Xa(t);return{c(){r&&r.c(),e=Ye()},m(i,o){r&&r.m(i,o),O(i,e,o),n=!0},p(i,o){i[5]?r?(r.p(i,o),o[0]&32&&k(r,1)):(r=Xa(i),r.c(),k(r,1),r.m(e.parentNode,e)):r&&(lt(),T(r,1,1,()=>{r=null}),ct())},i(i){n||(k(r),n=!0)},o(i){T(r),n=!1},d(i){r&&r.d(i),i&&P(e)}}}var Qa;(function(t){t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden"})(Qa||(Qa={}));function Ip(t,e,n){let r,i,o,l,c;const a=["name","as","slotProps","el","use","visible","features","unmount","static","class","style"];let u=Ze(e,a),{$$slots:f={},$$scope:s}=e;const d=Cr(Ct());let{name:p}=e,{as:h}=e,{slotProps:m}=e,{el:g=null}=e,{use:v=[]}=e,{visible:y=!0}=e,{features:_=pt.None}=e,{unmount:b=!0}=e,{static:E=!1}=e,{class:w=void 0}=e,{style:S=void 0}=e;if(!h)throw new Error(`<${p}> did not provide an \`as\` value to <Render>`);if(!Hd(h))throw new Error(`<${p}> has an invalid or unsupported \`as\` prop: ${h}`);function x(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function L(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function I(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function j(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function A(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function q(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function z(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function ge(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function me(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function ce(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function U(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function ue(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Me(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function M(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function le(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function et(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function ke(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Be(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Xe(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Ot(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function ut(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Le(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function on(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Ht(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Oi(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Sr(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Mi(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Di(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function kr(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Tr(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Ii(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Bi(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Et(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function an(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function wr(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Rr(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Ln(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Pr(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Or(C){ne[C?"unshift":"push"](()=>{g=C,n(0,g)})}function Mr(C){g=C,n(0,g)}return t.$$set=C=>{e=H(H({},e),rn(C)),n(7,u=Ze(e,a)),"name"in C&&n(8,p=C.name),"as"in C&&n(1,h=C.as),"slotProps"in C&&n(9,m=C.slotProps),"el"in C&&n(0,g=C.el),"use"in C&&n(2,v=C.use),"visible"in C&&n(10,y=C.visible),"features"in C&&n(11,_=C.features),"unmount"in C&&n(12,b=C.unmount),"static"in C&&n(13,E=C.static),"class"in C&&n(14,w=C.class),"style"in C&&n(15,S=C.style),"$$scope"in C&&n(59,s=C.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&16896&&n(17,r=typeof w=="function"?w(m):w),t.$$.dirty[0]&33280&&n(16,i=typeof S=="function"?S(m):S),t.$$.dirty[0]&15360&&n(5,o=y||_&pt.Static&&E||!(_&pt.RenderStrategy&&b)),t.$$.dirty[0]&15360&&n(4,l=!y&&!(_&pt.Static&&E)&&_&pt.RenderStrategy&&!b),t.$$.dirty[0]&196624&&n(3,c={class:r,style:`${i??""}${l?" display: none":""}`||void 0}),t.$$.dirty[0]&8&&c.style===void 0&&delete c.style},[g,h,v,c,l,o,d,u,p,m,y,_,b,E,w,S,i,r,f,x,L,I,j,A,q,z,ge,me,ce,U,ue,Me,M,le,et,ke,Be,Xe,Ot,ut,Le,on,Ht,Oi,Sr,Mi,Di,kr,Tr,Ii,Bi,Et,an,wr,Rr,Ln,Pr,Or,Mr,s]}class wi extends we{constructor(e){super(),Te(this,e,Ip,Dp,Se,{name:8,as:1,slotProps:9,el:0,use:2,visible:10,features:11,unmount:12,static:13,class:14,style:15},null,[-1,-1])}}const{window:Ya}=yo,Bp=t=>t&64,xp=t=>({}),Ka=t=>({...t[6]});function Lp(t){let e;const n=t[24].default,r=Z(n,t,t[27],Ka);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&134217792)&&ee(r,n,i,i[27],Bp(o)||!e?te(i[27]):$(n,i[27],o,xp),Ka)},i(i){e||(k(r,i),e=!0)},o(i){T(r,i),e=!1},d(i){r&&r.d(i)}}}function Fp(t){let e,n,r;const i=[{...t[14],...t[7]},{as:t[0]},{slotProps:t[6]},{use:[...t[1],t[9]]},{name:"Dialog"},{"aria-describedby":t[30]},{visible:t[8]},{features:pt.RenderStrategy|pt.Static}];function o(c){t[25](c)}let l={$$slots:{default:[Lp]},$$scope:{ctx:t}};for(let c=0;c<i.length;c+=1)l=H(l,i[c]);return t[3]!==void 0&&(l.el=t[3]),e=new wi({props:l}),ne.push(()=>Wi(e,"el",o)),e.$on("click",Hp),{c(){se(e.$$.fragment)},m(c,a){re(e,c,a),r=!0},p(c,a){const u=a&1073759171?Y(i,[a&16512&&{...c[14],...c[7]},a&1&&{as:c[0]},a&64&&{slotProps:c[6]},a&514&&{use:[...c[1],c[9]]},i[4],a&1073741824&&{"aria-describedby":c[30]},a&256&&{visible:c[8]},a&0&&{features:pt.RenderStrategy|pt.Static}]):{};a&134217792&&(u.$$scope={dirty:a,ctx:c}),!n&&a&8&&(n=!0,u.el=c[3],rl(()=>n=!1)),e.$set(u)},i(c){r||(k(e.$$.fragment,c),r=!0)},o(c){T(e.$$.fragment,c),r=!1},d(c){ie(e,c)}}}function jp(t){let e,n;return e=new Od({props:{name:"DialogDescription",slotProps:t[6],$$slots:{default:[Fp,({describedby:r})=>({30:r}),({describedby:r})=>r?1073741824:0]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment)},m(r,i){re(e,r,i),n=!0},p(r,i){const o={};i&64&&(o.slotProps=r[6]),i&1207976395&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){ie(e,r)}}}function Np(t){let e,n;return e=new mc({props:{force:!1,$$slots:{default:[jp]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment)},m(r,i){re(e,r,i),n=!0},p(r,i){const o={};i&134234571&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){ie(e,r)}}}function Gp(t){let e,n;return e=new Fd({props:{target:t[3],$$slots:{default:[Np]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment)},m(r,i){re(e,r,i),n=!0},p(r,i){const o={};i&8&&(o.target=r[3]),i&134234571&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){ie(e,r)}}}function Vp(t){let e,n;return e=new Vd({props:{$$slots:{default:[Gp]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment)},m(r,i){re(e,r,i),n=!0},p(r,i){const o={};i&134234571&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){ie(e,r)}}}function Up(t){let e,n;return e=new mc({props:{force:!0,$$slots:{default:[Vp]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment)},m(r,i){re(e,r,i),n=!0},p(r,i){const o={};i&134234571&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){ie(e,r)}}}function zp(t){let e,n,r,i,o,l;return e=new Ad({props:{containers:t[5],enabled:t[4],options:{initialFocus:t[2]}}}),r=new kd({props:{element:t[3],onUpdate:t[26],$$slots:{default:[Up]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment),n=K(),se(r.$$.fragment)},m(c,a){re(e,c,a),O(c,n,a),re(r,c,a),i=!0,o||(l=[de(Ya,"mousedown",t[12]),de(Ya,"keydown",t[13])],o=!0)},p(c,[a]){const u={};a&32&&(u.containers=c[5]),a&16&&(u.enabled=c[4]),a&4&&(u.options={initialFocus:c[2]}),e.$set(u);const f={};a&8&&(f.element=c[3]),a&32&&(f.onUpdate=c[26]),a&134234571&&(f.$$scope={dirty:a,ctx:c}),r.$set(f)},i(c){i||(k(e.$$.fragment,c),k(r.$$.fragment,c),i=!0)},o(c){T(e.$$.fragment,c),T(r.$$.fragment,c),i=!1},d(c){ie(e,c),c&&P(n),ie(r,c),o=!1,Q(l)}}}var tt;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(tt||(tt={}));const yc="headlessui-dialog-context";function bc(t){let e=Dn(yc);if(e===void 0)throw new Error(`<${t} /> is missing a parent <Dialog /> component.`);return e}function Hp(t){t.stopPropagation()}function qp(t,e,n){let r,i,o,l,c,a,u,f;const s=["as","use","open","initialFocus"];let d=Ze(e,s),p,h,{$$slots:m={},$$scope:g}=e,{as:v="div"}=e,{use:y=[]}=e,{open:_=void 0}=e,{initialFocus:b=null}=e;const E=Cr(Ct(),["close"]),w=vr();let S=new Set,x=hd();Re(t,x,U=>n(23,h=U));let L=null;const I=`headlessui-dialog-${Ti()}`;yt(()=>{l&&l()});let j,A=xn({titleId:j,dialogState:r,setTitleId(U){j!==U&&n(16,j=U)},close(){w("close",!1)}});Re(t,A,U=>n(22,p=U)),yr(yc,A);async function q(U){let ue=U.target;r===tt.Open&&S.size===1&&(fo(S,ue)||(p.close(),await bo(),ue==null||ue.focus()))}function z(U){U.key===yi.Escape&&r===tt.Open&&(S.size>1||(U.preventDefault(),U.stopPropagation(),p.close()))}let ge=!1;Mn(()=>n(17,ge=!0)),yt(()=>{c&&c()}),yt(()=>{a&&a()});function me(U){L=U,n(3,L)}const ce=(U,ue)=>uo(U,{[Tn.Add](){n(5,S=new Set([...S,ue]))},[Tn.Remove](){S.delete(ue),n(5,S=new Set([...S]))}});return t.$$set=U=>{e=H(H({},e),rn(U)),n(14,d=Ze(e,s)),"as"in U&&n(0,v=U.as),"use"in U&&n(1,y=U.use),"open"in U&&n(15,_=U.open),"initialFocus"in U&&n(2,b=U.initialFocus),"$$scope"in U&&n(27,g=U.$$scope)},t.$$.update=()=>{if(t.$$.dirty&8421376){if(n(15,_=_===void 0&&x!==void 0?uo(h,{[nr.Open]:!0,[nr.Closed]:!1}):_),!(_!==void 0||x!==void 0))throw new Error("You forgot to provide an `open` prop to the `Dialog` component.");if(typeof _!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${_}`)}t.$$.dirty&32768&&n(18,r=_?tt.Open:tt.Closed),t.$$.dirty&8650752&&n(8,i=x!==void 0?h===nr.Open:r===tt.Open),t.$$.dirty&262144&&n(4,o=r===tt.Open),t.$$.dirty&2097176&&n(21,l=(()=>(l&&l(),vd(L,o)))()),t.$$.dirty&327680&&A.update(U=>({...U,titleId:j,dialogState:r})),t.$$.dirty&1441792&&n(20,c=(()=>{if(c&&c(),r!==tt.Open||!ge)return;let U=document.documentElement.style.overflow,ue=document.documentElement.style.paddingRight,Me=window.innerWidth-document.documentElement.clientWidth;return document.documentElement.style.overflow="hidden",document.documentElement.style.paddingRight=`${Me}px`,()=>{document.documentElement.style.overflow=U,document.documentElement.style.paddingRight=ue}})()),t.$$.dirty&4980744&&n(19,a=(()=>{if(a&&a(),r!==tt.Open)return;let U=L;if(!U)return;let ue=new IntersectionObserver(Me=>{for(let M of Me)M.boundingClientRect.x===0&&M.boundingClientRect.y===0&&M.boundingClientRect.width===0&&M.boundingClientRect.height===0&&p.close()});return ue.observe(U),()=>ue.disconnect()})()),t.$$.dirty&327680&&n(7,u={id:I,role:"dialog","aria-modal":r===tt.Open?!0:void 0,"aria-labelledby":j}),t.$$.dirty&32768&&n(6,f={open:_})},[v,y,b,L,o,S,f,u,i,E,x,A,q,z,d,_,j,ge,r,a,c,l,p,h,m,me,ce,g]}class Wp extends we{constructor(e){super(),Te(this,e,qp,zp,Se,{as:0,use:1,open:15,initialFocus:2})}}const Xp=t=>t&4,Qp=t=>({}),Ja=t=>({...t[2]});function Yp(t){let e;const n=t[8].default,r=Z(n,t,t[9],Ja);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&516)&&ee(r,n,i,i[9],Xp(o)||!e?te(i[9]):$(n,i[9],o,Qp),Ja)},i(i){e||(k(r,i),e=!0)},o(i){T(r,i),e=!1},d(i){r&&r.d(i)}}}function Kp(t){let e,n;const r=[{...t[6],...t[3]},{as:t[0]},{slotProps:t[2]},{use:[...t[1],t[4]]},{name:"DialogTitle"}];let i={$$slots:{default:[Yp]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=H(i,r[o]);return e=new wi({props:i}),{c(){se(e.$$.fragment)},m(o,l){re(e,o,l),n=!0},p(o,[l]){const c=l&95?Y(r,[l&72&&{...o[6],...o[3]},l&1&&{as:o[0]},l&4&&{slotProps:o[2]},l&18&&{use:[...o[1],o[4]]},r[4]]):{};l&516&&(c.$$scope={dirty:l,ctx:o}),e.$set(c)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){T(e.$$.fragment,o),n=!1},d(o){ie(e,o)}}}function Jp(t,e,n){let r,i;const o=["as","use"];let l=Ze(e,o),c,{$$slots:a={},$$scope:u}=e,{as:f="h2"}=e,{use:s=[]}=e;const d=Cr(Ct());let p=bc("DialogTitle");Re(t,p,m=>n(7,c=m));let h=`headlessui-dialog-title-${Ti()}`;return Mn(()=>(c.setTitleId(h),()=>c.setTitleId(void 0))),t.$$set=m=>{e=H(H({},e),rn(m)),n(6,l=Ze(e,o)),"as"in m&&n(0,f=m.as),"use"in m&&n(1,s=m.use),"$$scope"in m&&n(9,u=m.$$scope)},t.$$.update=()=>{t.$$.dirty&128&&n(2,i={open:c.dialogState===tt.Open})},n(3,r={id:h}),[f,s,i,r,d,p,l,c,a,u]}class Ri extends we{constructor(e){super(),Te(this,e,Jp,Kp,Se,{as:0,use:1})}}const Zp=t=>t&4,$p=t=>({}),Za=t=>({...t[2]});function eh(t){let e;const n=t[9].default,r=Z(n,t,t[10],Za);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&1028)&&ee(r,n,i,i[10],Zp(o)||!e?te(i[10]):$(n,i[10],o,$p),Za)},i(i){e||(k(r,i),e=!0)},o(i){T(r,i),e=!1},d(i){r&&r.d(i)}}}function th(t){let e,n;const r=[{...t[7],...t[3]},{as:t[0]},{slotProps:t[2]},{use:[...t[1],t[4]]},{name:"DialogOverlay"}];let i={$$slots:{default:[eh]},$$scope:{ctx:t}};for(let o=0;o<r.length;o+=1)i=H(i,r[o]);return e=new wi({props:i}),e.$on("click",t[6]),{c(){se(e.$$.fragment)},m(o,l){re(e,o,l),n=!0},p(o,[l]){const c=l&159?Y(r,[l&136&&{...o[7],...o[3]},l&1&&{as:o[0]},l&4&&{slotProps:o[2]},l&18&&{use:[...o[1],o[4]]},r[4]]):{};l&1028&&(c.$$scope={dirty:l,ctx:o}),e.$set(c)},i(o){n||(k(e.$$.fragment,o),n=!0)},o(o){T(e.$$.fragment,o),n=!1},d(o){ie(e,o)}}}function nh(t,e,n){let r,i;const o=["as","use"];let l=Ze(e,o),c,{$$slots:a={},$$scope:u}=e,{as:f="div"}=e,{use:s=[]}=e;const d=Cr(Ct());let p=bc("DialogOverlay");Re(t,p,g=>n(8,c=g));let h=`headlessui-dialog-overlay-${Ti()}`;function m(g){let v=g;v.target===v.currentTarget&&(v.preventDefault(),v.stopPropagation(),c.close())}return t.$$set=g=>{e=H(H({},e),rn(g)),n(7,l=Ze(e,o)),"as"in g&&n(0,f=g.as),"use"in g&&n(1,s=g.use),"$$scope"in g&&n(10,u=g.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(2,i={open:c.dialogState===tt.Open})},n(3,r={id:h,"aria-hidden":!0}),[f,s,i,r,d,p,m,l,c,a,u]}class rh extends we{constructor(e){super(),Te(this,e,nh,th,Se,{as:0,use:1})}}const ih=t=>t&8,oh=t=>({}),$a=t=>({...t[3]});function ah(t){let e;const n=t[8].default,r=Z(n,t,t[9],$a);return{c(){r&&r.c()},m(i,o){r&&r.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o&520)&&ee(r,n,i,i[9],ih(o)||!e?te(i[9]):$(n,i[9],o,oh),$a)},i(i){e||(k(r,i),e=!0)},o(i){T(r,i),e=!1},d(i){r&&r.d(i)}}}function sh(t){var o;let e,n;const r=[{name:"Description"},t[7],{as:t[0]},{slotProps:t[3]},(o=t[2])==null?void 0:o.props,{id:t[5]},{use:[...t[1],t[4]]}];let i={$$slots:{default:[ah]},$$scope:{ctx:t}};for(let l=0;l<r.length;l+=1)i=H(i,r[l]);return e=new wi({props:i}),{c(){se(e.$$.fragment)},m(l,c){re(e,l,c),n=!0},p(l,[c]){var u;const a=c&191?Y(r,[r[0],c&128&&lr(l[7]),c&1&&{as:l[0]},c&8&&{slotProps:l[3]},c&4&&lr((u=l[2])==null?void 0:u.props),c&32&&{id:l[5]},c&18&&{use:[...l[1],l[4]]}]):{};c&520&&(a.$$scope={dirty:c,ctx:l}),e.$set(a)},i(l){n||(k(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){ie(e,l)}}}function lh(t,e,n){let r;const i=["as","use"];let o=Ze(e,i),l,{$$slots:c={},$$scope:a}=e;const u=Cr(Ct());let{as:f="p"}=e,{use:s=[]}=e;const d=`headlessui-description-${Ti()}`;let p=Rd();if(Re(t,p,h=>n(2,l=h)),!p)throw new Error("You used a <Description /> component, but it is not inside a relevant parent.");return Mn(()=>l==null?void 0:l.register(d)),t.$$set=h=>{e=H(H({},e),rn(h)),n(7,o=Ze(e,i)),"as"in h&&n(0,f=h.as),"use"in h&&n(1,s=h.use),"$$scope"in h&&n(9,a=h.$$scope)},t.$$.update=()=>{t.$$.dirty&4&&n(3,r=l.slotProps||{})},[f,s,l,r,u,d,p,o,c,a]}class ch extends we{constructor(e){super(),Te(this,e,lh,sh,Se,{as:0,use:1})}}var es;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(es||(es={}));var ts;(function(t){t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing"})(ts||(ts={}));var ns;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(ns||(ns={}));var rs;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(rs||(rs={}));var is;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed"})(is||(is={}));var os;(function(t){t.Finished="finished",t.Cancelled="cancelled"})(os||(os={}));var as;(function(t){t.Visible="visible",t.Hidden="hidden"})(as||(as={}));function uh(t){let e;return{c(){e=Ge("Dialog w/o content")},m(n,r){O(n,e,r)},d(n){n&&P(e)}}}function fh(t){let e;return{c(){e=Ge("Please add some content")},m(n,r){O(n,e,r)},d(n){n&&P(e)}}}function dh(t){let e,n,r,i,o,l,c,a,u,f,s;return e=new Ri({props:{as:"h3",class:"font-bold text-lg",$$slots:{default:[uh]},$$scope:{ctx:t}}}),r=new ch({props:{class:"py-",$$slots:{default:[fh]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment),n=K(),se(r.$$.fragment),i=K(),o=R("button"),o.textContent="✕",l=K(),c=R("div"),a=R("button"),a.textContent="Got it, thanks!",D(o,"class","btn btn-sm btn-circle absolute right-2 top-2"),D(a,"type","button"),D(a,"class","btn"),D(c,"class","modal-action")},m(d,p){re(e,d,p),O(d,n,p),re(r,d,p),O(d,i,p),O(d,o,p),O(d,l,p),O(d,c,p),B(c,a),u=!0,f||(s=[de(o,"click",t[4]),de(a,"click",t[4])],f=!0)},p(d,p){const h={};p&256&&(h.$$scope={dirty:p,ctx:d}),e.$set(h);const m={};p&256&&(m.$$scope={dirty:p,ctx:d}),r.$set(m)},i(d){u||(k(e.$$.fragment,d),k(r.$$.fragment,d),u=!0)},o(d){T(e.$$.fragment,d),T(r.$$.fragment,d),u=!1},d(d){ie(e,d),d&&P(n),ie(r,d),d&&P(i),d&&P(o),d&&P(l),d&&P(c),f=!1,Q(s)}}}function ph(t){let e,n,r,i,o,l,c,a,u,f;n=new rh({props:{class:"absolute inset-0 bg-black opacity-70"}});const s=t[5].default,d=Z(s,t,t[8],null),p=d||dh(t);return{c(){e=R("div"),se(n.$$.fragment),i=K(),o=R("div"),p&&p.c(),D(e,"class","inset-0 absolute"),D(o,"class",l="modal-box mx-3 "+t[0]),D(o,"style",t[1])},m(h,m){O(h,e,m),re(n,e,null),O(h,i,m),O(h,o,m),p&&p.m(o,null),a=!0,u||(f=[de(o,"introstart",t[6]),de(o,"outroend",t[7])],u=!0)},p(h,m){d&&d.p&&(!a||m&256)&&ee(d,s,h,h[8],a?$(s,h[8],m,null):te(h[8]),null),(!a||m&1&&l!==(l="modal-box mx-3 "+h[0]))&&D(o,"class",l),(!a||m&2)&&D(o,"style",h[1])},i(h){a||(k(n.$$.fragment,h),nt(()=>{a&&(r||(r=Nt(e,en,{duration:300},!0)),r.run(1))}),k(p,h),nt(()=>{a&&(c||(c=Nt(o,gi,{duration:300},!0)),c.run(1))}),a=!0)},o(h){T(n.$$.fragment,h),r||(r=Nt(e,en,{duration:300},!1)),r.run(0),T(p,h),c||(c=Nt(o,gi,{duration:300},!1)),c.run(0),a=!1},d(h){h&&P(e),ie(n),h&&r&&r.end(),h&&P(i),h&&P(o),p&&p.d(h),h&&c&&c.end(),u=!1,Q(f)}}}function hh(t){let e,n;return e=new Wp({props:{class:"inset-0 absolute modal modal-bottom modal-open",open:t[3],static:!0,initialFocus:t[2],$$slots:{default:[ph]},$$scope:{ctx:t}}}),e.$on("close",t[4]),{c(){se(e.$$.fragment)},m(r,i){re(e,r,i),n=!0},p(r,[i]){const o={};i&8&&(o.open=r[3]),i&4&&(o.initialFocus=r[2]),i&267&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){ie(e,r)}}}function gh(t,e,n){let{$$slots:r={},$$scope:i}=e,{modalClass:o="mx-10"}=e,{modalStyle:l=""}=e,{initialFocus:c=null}=e,a=!0;const u=vr();function f(){u("close")}yt(()=>{});const s=()=>n(3,a=!0),d=()=>n(3,a=!1);return t.$$set=p=>{"modalClass"in p&&n(0,o=p.modalClass),"modalStyle"in p&&n(1,l=p.modalStyle),"initialFocus"in p&&n(2,c=p.initialFocus),"$$scope"in p&&n(8,i=p.$$scope)},[o,l,c,a,f,r,s,d,i]}class xo extends we{constructor(e){super(),Te(this,e,gh,hh,Se,{modalClass:0,modalStyle:1,initialFocus:2})}}function ss(t,e,n){const r=t.slice();return r[8]=e[n],r}function mh(t){let e;return{c(){e=Ge(t[2])},m(n,r){O(n,e,r)},p(n,r){r&4&&Rt(e,n[2])},d(n){n&&P(e)}}}function ls(t){let e=t[8]+"",n;return{c(){n=Ge(e)},m(r,i){O(r,n,i)},p(r,i){i&2&&e!==(e=r[8]+"")&&Rt(n,e)},d(r){r&&P(n)}}}function vh(t){let e,n,r,i,o,l,c,a,u,f;r=new Ri({props:{as:"h3",class:"font-bold text-lg mb-5",$$slots:{default:[mh]},$$scope:{ctx:t}}});let s=t[1],d=[];for(let p=0;p<s.length;p+=1)d[p]=ls(ss(t,s,p));return{c(){e=R("button"),e.textContent="✕",n=K(),se(r.$$.fragment),i=K(),o=R("pre"),l=Ge("    ");for(let p=0;p<d.length;p+=1)d[p].c();c=Ge(`
  `),D(e,"class","btn btn-sm btn-circle absolute right-2 top-2"),D(o,"class","overflow-auto flex-1 -mx-5 px-6 -mb-2 pb-2")},m(p,h){O(p,e,h),O(p,n,h),re(r,p,h),O(p,i,h),O(p,o,h),B(o,l);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(o,null);B(o,c),t[5](o),a=!0,u||(f=de(e,"click",t[3]),u=!0)},p(p,h){const m={};if(h&2052&&(m.$$scope={dirty:h,ctx:p}),r.$set(m),h&2){s=p[1];let g;for(g=0;g<s.length;g+=1){const v=ss(p,s,g);d[g]?d[g].p(v,h):(d[g]=ls(v),d[g].c(),d[g].m(o,c))}for(;g<d.length;g+=1)d[g].d(1);d.length=s.length}},i(p){a||(k(r.$$.fragment,p),a=!0)},o(p){T(r.$$.fragment,p),a=!1},d(p){p&&P(e),p&&P(n),ie(r,p),p&&P(i),p&&P(o),kt(d,p),t[5](null),u=!1,f()}}}function yh(t){let e,n;return e=new xo({props:{modalClass:"flex-col flex",$$slots:{default:[vh]},$$scope:{ctx:t}}}),e.$on("close",t[6]),{c(){se(e.$$.fragment)},m(r,i){re(e,r,i),n=!0},p(r,[i]){const o={};i&2055&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){ie(e,r)}}}function bh(t,e,n){let r,i;const o=vr();let{extraData:l={title:"Title",messageLines:[]}}=e,c=null;function a(){o("close",null)}function u(s){ne[s?"unshift":"push"](()=>{c=s,n(0,c),n(1,i),n(4,l)})}const f=()=>a();return t.$$set=s=>{"extraData"in s&&n(4,l=s.extraData)},t.$$.update=()=>{t.$$.dirty&16&&n(2,r=l.title||""),t.$$.dirty&16&&n(1,i=l.messageLines||[]),t.$$.dirty&3&&i.length>0&&c!=null&&c.scrollTop!=null&&c.scrollTop+c.clientHeight+100>c.scrollHeight&&n(0,c.scrollTop=c.scrollHeight,c)},[c,i,r,a,l,u,f]}class _h extends we{constructor(e){super(),Te(this,e,bh,yh,Se,{extraData:4})}}function Ch(t){let e;return{c(){e=Ge("Please enter the driver password")},m(n,r){O(n,e,r)},d(n){n&&P(e)}}}function Ah(t){let e,n,r,i,o,l,c,a,u,f,s;return e=new Ri({props:{as:"h3",class:"font-bold text-lg",$$slots:{default:[Ch]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment),n=K(),r=R("form"),i=R("input"),o=K(),l=R("button"),l.textContent="Ok",c=K(),a=R("button"),a.textContent="Cancel",D(i,"type","password"),D(i,"autocomplete","current-password"),D(i,"placeholder","Password"),D(i,"class","input input-bordered block w-full my-5"),D(l,"type","submit"),D(l,"class","btn btn-primary btn-block btn-shadow flex-1 mb-2"),D(a,"type","button"),D(a,"class","btn btn-outline btn-block flex-1")},m(d,p){re(e,d,p),O(d,n,p),O(d,r,p),B(r,i),t[4](i),Xo(i,t[0]),B(r,o),B(r,l),B(r,c),B(r,a),u=!0,f||(s=[de(i,"input",t[5]),de(a,"click",t[6]),de(r,"submit",Zs(t[3]))],f=!0)},p(d,p){const h={};p&512&&(h.$$scope={dirty:p,ctx:d}),e.$set(h),p&1&&i.value!==d[0]&&Xo(i,d[0])},i(d){u||(k(e.$$.fragment,d),u=!0)},o(d){T(e.$$.fragment,d),u=!1},d(d){ie(e,d),d&&P(n),d&&P(r),t[4](null),f=!1,Q(s)}}}function Eh(t){let e,n,r,i;return r=new xo({props:{modalStyle:"max-width:16rem; text-align:center",modalClass:"modal-bottom",initialFocus:t[1],$$slots:{default:[Ah]},$$scope:{ctx:t}}}),r.$on("close",t[7]),{c(){e=R("br"),n=K(),se(r.$$.fragment)},m(o,l){O(o,e,l),O(o,n,l),re(r,o,l),i=!0},p(o,[l]){const c={};l&2&&(c.initialFocus=o[1]),l&515&&(c.$$scope={dirty:l,ctx:o}),r.$set(c)},i(o){i||(k(r.$$.fragment,o),i=!0)},o(o){T(r.$$.fragment,o),i=!1},d(o){o&&P(e),o&&P(n),ie(r,o)}}}function Sh(t,e,n){let r="",i=null;const o=vr();function l(d){d&&r.length==0||(d?o("close",r):o("close",null))}function c(d){l(!0)}function a(d){ne[d?"unshift":"push"](()=>{i=d,n(1,i)})}function u(){r=this.value,n(0,r)}return[r,i,l,c,a,u,()=>l(!1),()=>l(!1)]}class kh extends we{constructor(e){super(),Te(this,e,Sh,Eh,Se,{})}}function Th(t){let e;return{c(){e=Ge(t[0])},m(n,r){O(n,e,r)},p(n,r){r&1&&Rt(e,n[0])},d(n){n&&P(e)}}}function wh(t){let e,n,r,i,o,l,c,a;return e=new Ri({props:{as:"h3",class:"font-bold text-lg mb-5",$$slots:{default:[Th]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment),n=K(),r=R("button"),r.textContent="Ok",i=K(),o=R("button"),o.textContent="Cancel",D(r,"type","button"),D(r,"class","btn btn-primary btn-block flex-1 mb-2"),D(o,"type","button"),D(o,"class","btn btn-outline btn-block flex-1")},m(u,f){re(e,u,f),O(u,n,f),O(u,r,f),O(u,i,f),O(u,o,f),l=!0,c||(a=[de(r,"click",t[3]),de(o,"click",t[4])],c=!0)},p(u,f){const s={};f&129&&(s.$$scope={dirty:f,ctx:u}),e.$set(s)},i(u){l||(k(e.$$.fragment,u),l=!0)},o(u){T(e.$$.fragment,u),l=!1},d(u){ie(e,u),u&&P(n),u&&P(r),u&&P(i),u&&P(o),c=!1,Q(a)}}}function Rh(t){let e,n;return e=new xo({props:{modalStyle:"max-width:16rem; text-align:center",modalClass:"modal-bottom",$$slots:{default:[wh]},$$scope:{ctx:t}}}),e.$on("close",t[5]),{c(){se(e.$$.fragment)},m(r,i){re(e,r,i),n=!0},p(r,[i]){const o={};i&129&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){ie(e,r)}}}function Ph(t,e,n){let r;const i=vr();let{extraData:o={}}=e;function l(f){i("close",f)}const c=()=>l(!0),a=()=>l(!1),u=()=>l(!1);return t.$$set=f=>{"extraData"in f&&n(2,o=f.extraData)},t.$$.update=()=>{t.$$.dirty&4&&n(0,r=o.title||"Are you sure?")},[r,l,o,c,a,u]}class Oh extends we{constructor(e){super(),Te(this,e,Ph,Rh,Se,{extraData:2})}}function Mh(t){let e,n;return e=new _h({props:{extraData:t[0].extraData}}),e.$on("close",Fo),{c(){se(e.$$.fragment)},m(r,i){re(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.extraData=r[0].extraData),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){ie(e,r)}}}function Dh(t){let e,n;return e=new Oh({props:{extraData:t[0].extraData}}),e.$on("close",Fo),{c(){se(e.$$.fragment)},m(r,i){re(e,r,i),n=!0},p(r,i){const o={};i&1&&(o.extraData=r[0].extraData),e.$set(o)},i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){ie(e,r)}}}function Ih(t){let e,n;return e=new kh({}),e.$on("close",Fo),{c(){se(e.$$.fragment)},m(r,i){re(e,r,i),n=!0},p:fe,i(r){n||(k(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){ie(e,r)}}}function Bh(t){let e,n,r,i;const o=[Ih,Dh,Mh],l=[];function c(a,u){return a[0]&&a[0].dialogType==Yt.Password?0:a[0]&&a[0].dialogType==Yt.Alert?1:a[0]&&a[0].dialogType==Yt.ScrollingText?2:-1}return~(e=c(t))&&(n=l[e]=o[e](t)),{c(){n&&n.c(),r=Ye()},m(a,u){~e&&l[e].m(a,u),O(a,r,u),i=!0},p(a,[u]){let f=e;e=c(a),e===f?~e&&l[e].p(a,u):(n&&(lt(),T(l[f],1,1,()=>{l[f]=null}),ct()),~e?(n=l[e],n?n.p(a,u):(n=l[e]=o[e](a),n.c()),k(n,1),n.m(r.parentNode,r)):n=null)},i(a){i||(k(n),i=!0)},o(a){T(n),i=!1},d(a){~e&&l[e].d(a),a&&P(r)}}}let Lt=[],gt=Ae(null);const Lo=(t,e,n)=>{const r=gt.get(),i={dialogType:t,callback:n,extraData:e};return r&&(Lt=[...Lt,r]),gt.set(i),o=>{i.extraData=o(i.extraData),console.log("newDialog.extraData",i.extraData,i===Lt[Lt.length-1],Lt[Lt.length-1],gt.get()===i,gt.get()),gt.get()===i&&gt.set(i)}},Fo=t=>{const e=gt.get();e.callback&&e.callback(t.detail),Lt.length>0?gt.set(Lt.pop()):gt.set(null)};function xh(t,e,n){let r;return Re(t,gt,i=>n(0,r=i)),[r]}class Lh extends we{constructor(e){super(),Te(this,e,xh,Bh,Se,{})}}let Vi={};function be(t,e=2e3,n=null){if(Vi[t])return;let i=dr.push({msg:t,duration:e});return Vi[t]=i,dr.subscribe(o=>{o.find(c=>c.msg===t)||(delete Vi[t],n&&n())}),i}function Gr(t,e){Lo(Yt.Alert,{title:t},n=>{e&&n&&e(n)})}let Ui=!1;function Fh(t,e){Ui||(Ui=!0,Lo(Yt.Password,{},n=>{Ui=!1,n!=null&&e&&e(n)}))}function jh(t,e){let n=Lo(Yt.ScrollingText,{title:t,messageLines:[]},i=>{e&&e(null)});return i=>{console.log("addTextToPopup",i),n(o=>({...o,messageLines:[...o.messageLines,i]}))}}const Nh=document.getElementById("connect_btn");document.getElementById("connect_btn_options");document.getElementById("disconnect_btn");const Gh=document.getElementById("connected_rov_label");document.getElementById("rov_connection_bar");function cs(){let t=$t.get(),e=vi(t),n="ROV "+t+" ("+e.replace(El,"")+")";Nh.innerText="Connect to "+n,Gh.innerText=n}class Vh{constructor(e){N(this,"eventHandlers",{});N(this,"connectionTimeout");N(this,"runningMachine",null);N(this,"peer",null);N(this,"ourPeerId",null);N(this,"onStateChangeCallback",e=>{});N(this,"currentState",null);N(this,"xstateMachineLayout",Al({predictableActionArguments:!0,preserveActionOrder:!0,id:"DataConnection",initial:"Connecting",states:{Connecting:{entry:"onConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Reconnecting:{entry:"onReConnectingFunction",on:{ON_CONNECTED:{target:"Connected"},ON_DESTROY:{target:"Destroyed"}}},Connected:{entry:"onConnectedFunction",on:{ON_DISCONNECTED:{target:"Reconnecting"},ON_DESTROY:{target:"Destroyed"}}},Destroyed:{entry:"onDestoyedFunction",type:"final"}}},{actions:{onConnectingFunction:()=>{this.onConnecting()},onReConnectingFunction:()=>{this.onReConnecting()},onConnectedFunction:()=>{this.onConnected()},onDestoyedFunction:()=>{this.cleanup()}}}));this.currentState=this.xstateMachineLayout.config.initial,this.onStateChangeCallback=e}start(){this.runningMachine=Ro(this.xstateMachineLayout,{devTools:Si.get()}),this.runningMachine.onTransition(r=>{this.currentState=r.value,this.onStateChangeCallback(this.currentState)}),this.runningMachine.start(),this.ourPeerId=Cn.get(),this.ourPeerId||(this.ourPeerId=la(),localStorage.setItem("ourPeerId",this.ourPeerId),Cn.set(this.ourPeerId));let e=localStorage.getItem("peerToken"),n=e?{...li,token:e}:li;this.peer=new Yf(this.ourPeerId,n),console.log("Our PeerToken:",this.peer.options.token),!e&&this.peer.options.token&&localStorage.setItem("peerToken",this.peer.options.token),this.eventHandlers.onOpen=()=>{this.sendEventToMachine("ON_CONNECTED"),be("OurPeer Open!")},this.peer.on("open",this.eventHandlers.onOpen),this.eventHandlers.onError=r=>{r.type!="peer-unavailable"&&(r.type=="unavailable-id"?(be("peer id "+this.ourPeerId+" already taken"),this.ourPeerId=la(),Cn.set(this.ourPeerId)):r.type=="webrtc"&&r.message.indexOf("No remoteDescription")==-1?be("Webrtc Error: "+r.message):console.log("!!!UNHANDLED!! OURPEER_ERROR:"+r.message+" | "+r.type),this.sendEventToMachine("ON_DESTROY"))},this.peer.on("error",this.eventHandlers.onError),this.eventHandlers.onClose=r=>{console.warn("!!UNHANDLED!! OURPEER_CLOSE:",r),this.sendEventToMachine("ON_DESTROY")},this.peer.on("close",this.eventHandlers.onClose),this.eventHandlers.onDisconnected=r=>{console.warn("!!UNHANDLED!! OURPEER_CLOSE:",r),this.sendEventToMachine("ON_DISCONNECTED")},this.peer.on("disconnected",this.eventHandlers.onDisconnected)}sendEventToMachine(e){this.runningMachine&&this.runningMachine.send(e)}onConnecting(){console.log("OnConnecting...."),this.connectionTimeout=setTimeout(()=>{this.sendEventToMachine("ON_DESTROY")},12e3)}onReConnecting(){console.log("OnReConnecting...."),this.peer.reconnect(),this.onConnecting()}onConnected(){clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0}cleanup(){clearTimeout(this.connectionTimeout),this.runningMachine.stop(),this.currentState="Destroyed",this.onStateChangeCallback(this.currentState),this.peer&&(this.peer.off("open",this.eventHandlers.onOpen),this.peer.off("error",this.eventHandlers.onError),this.peer.off("close",this.eventHandlers.onClose),this.peer.off("disconnected",this.eventHandlers.onDisconnected),this.peer.destroy(),this.peer=null)}}const us=12e3,fs=5e3,Uh=3e3;new TextEncoder;new TextDecoder;class zh{constructor(e,n,r,i){N(this,"closed",!1);N(this,"rovPeerId",null);N(this,"currentPeer",null);N(this,"dataConnection",null);N(this,"lastRecivedMessageTime",0);N(this,"connectionTimeoutId",-1);N(this,"currentState",X.disconnected);N(this,"onMessageRecived");N(this,"onStateChange");N(this,"eventHandlers",null);this.onMessageRecived=r,this.onStateChange=i,this.currentPeer=e,this.rovPeerId=n}setCurrentPeer(e){this.currentPeer=e}restart(){this.closed||(this._changeState(X.reconnecting),this.cleanup(),this.start())}start(){if(this.closed||this.eventHandlers!=null){console.warn("start called on running DataConnectionMachine");return}if(this.eventHandlers={},this._changeState(X.connecting),console.info("Connecting to rov peer: "+this.rovPeerId),this.dataConnection=this.currentPeer.connect(this.rovPeerId,{reliable:!0,serialization:"none"}),!this.dataConnection){console.warn("Failed to connect to peer: "+this.rovPeerId),this.connectionTimeoutId=window.setTimeout(()=>{this.restart()},us);return}this.connectionTimeoutId=window.setTimeout(()=>{this.restart()},us),console.log("Setting connection timeout",this.connectionTimeoutId),this.dataConnection.on("open",this.eventHandlers.onOpen=()=>{console.info("DataConnection Open!"),this._changeState(X.connected),this.resetConnectionTimeout()}),this.dataConnection.on("iceStateChanged",this.eventHandlers.onIceChange=e=>{console.info("DATACHANNEL_ICE_CHANGE:",e)}),this.dataConnection.on("error",this.eventHandlers.onError=e=>{console.warn("!!!UNHANDLED!! DATACHANNEL_ERROR:",e),this.restart()}),this.dataConnection.on("close",this.eventHandlers.onClose=()=>{console.warn("!!UNHANDLED!! DATACHANNEL_CLOSE:"),this.restart()}),this.currentPeer.on("error",this.eventHandlers.onPeerError=e=>{e.type=="peer-unavailable"&&(this.connectionTimeoutId=window.setTimeout(()=>{this.restart()},fs))}),this.dataConnection.on("data",this.eventHandlers.onData=e=>{this._changeState(X.connected),this.resetConnectionTimeout(),this.onMessageRecived(e)})}resetConnectionTimeout(){window.clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=setTimeout(()=>{this._changeState(X.reconnecting),this.connectionTimeoutId=setTimeout(()=>{this.restart()},Uh)},fs)}sendMessage(e){return this.dataConnection&&this.dataConnection.open&&this.currentState==X.connected?(this.dataConnection.send(e),!0):!1}cleanup(){console.debug("Cleaning up data connection",this.rovPeerId,this.connectionTimeoutId),window.clearTimeout(this.connectionTimeoutId),this.eventHandlers&&(this.currentPeer&&this.currentPeer.off("error",this.eventHandlers.onPeerError),this.dataConnection&&(this.dataConnection.off("open",this.eventHandlers.onOpen),this.dataConnection.off("error",this.eventHandlers.onError),this.dataConnection.off("close",this.eventHandlers.onClose),this.dataConnection.off("data",this.eventHandlers.onData),this.dataConnection.close()),this.eventHandlers=null)}close(){this.closed=!0,this.cleanup()}_changeState(e){this.currentState!=e&&(this.currentState=e,this.onStateChange(e))}}const Hh=6e3;class qh{constructor(e,n,r){N(this,"closed",!1);N(this,"rovPeerId",null);N(this,"currentPeer",null);N(this,"lastRecivedFrameTime",0);N(this,"frozenVideoTimeoutId",null);N(this,"mediaChannel",null);N(this,"mainTrack",null);N(this,"currentState",X.disconnected);N(this,"onStateChange");N(this,"eventHandlers",null);this.onStateChange=r,this.currentPeer=e,this.rovPeerId=n,this.mediaChannel=null}setCurrentPeer(e){this.currentPeer=e}restart(){this.closed||(this._changeState(X.reconnecting),this.cleanup(),this.start())}start(){if(this.closed||this.eventHandlers!=null){console.warn("Start() called on running MediaConnectionMachine");return}this.eventHandlers={},console.info("Waiting for "+this.rovPeerId+" to media call us..."),this.eventHandlers.onCall=e=>{window.clearTimeout(this.frozenVideoTimeoutId),console.info(e.peer+" media called us!"),!(this.mediaChannel&&this.mediaChannel.peer!=this.rovPeerId)&&(this.mediaChannel&&this.cleanup(),this.eventHandlers={},this.mediaChannel=e,e.answer(),console.log("streamb4",this.eventHandlers),e.on("stream",this.eventHandlers.onStream=n=>{Sl.set(n),this.mainTrack=n.getVideoTracks()[0],this._changeState(X.connected),this.mainTrack.addEventListener("mute",this.eventHandlers.onStreamMute=()=>{console.info("Frozen video stream timeout started!"),this.frozenVideoTimeoutId=setTimeout(()=>{console.info("Frozen video stream timeout reached!"),this.cleanup()},Hh)}),this.mainTrack.addEventListener("unmute",this.eventHandlers.onStreamUnMute=()=>{console.info("Frozen video stream timeout cleared!"),clearTimeout(this.frozenVideoTimeoutId)})}),e.on("error",this.eventHandlers.onError=n=>{console.log("MediaChannel Error: ",n),this.restart()}),e.on("close",this.eventHandlers.onClose=n=>{this.restart()}))},this.currentPeer.on("call",this.eventHandlers.onCall)}cleanup(){console.debug("Cleaning up media connection",this.rovPeerId,this.frozenVideoTimeoutId),this.eventHandlers&&(this.currentPeer&&this.currentPeer.off("call",this.eventHandlers.onCall),this.mediaChannel&&(this.mediaChannel.off("stream",this.eventHandlers.onStream),this.mediaChannel.off("error",this.eventHandlers.onError),this.mediaChannel.off("close",this.eventHandlers.onClose),this.mediaChannel.close(),this.mediaChannel=null),this.mainTrack&&(this.mainTrack.removeEventListener("mute",this.eventHandlers.onStreamMute),this.mainTrack.removeEventListener("unmute",this.eventHandlers.onStreamMute),this.mainTrack=null),this.eventHandlers=null)}close(){this.closed=!0,this.cleanup()}_changeState(e){this.currentState!=e&&(this.currentState=e,this.onStateChange(e))}}class Wh{constructor(e,n,r,i){N(this,"closed",!1);N(this,"rovPeerId");N(this,"ourPeerMachine");N(this,"dataConnection",null);N(this,"mediaConnection",null);N(this,"msgQueue",new df);N(this,"connectionFailureCount",0);N(this,"onMesssageRecived");N(this,"onOverallStateChange");this.rovPeerId=e,this.ourPeerMachine=n,this.onMesssageRecived=o=>r(o,e),this.onOverallStateChange=i}start(){this.mediaConnection&&this.mediaConnection.cleanup(),(this.mediaConnection=new qh(this.ourPeerMachine.peer,this.rovPeerId,this.mcStateChange.bind(this))).start(),this.dataConnection&&this.dataConnection.cleanup(),(this.dataConnection=new zh(this.ourPeerMachine.peer,this.rovPeerId,this.onMesssageRecived,this.dcStateChange.bind(this))).start()}_sendMsgToRov(e){return this.dataConnection.sendMessage(e.msgBytes)?(e.onSendCallback&&e.onSendCallback(e.msgBytes),!0):(console.info('Failed to send "{}" to rov: {}',e.msgBytes,this.rovPeerId),!1)}emptyMsgQueue(){if(this.dataConnection.currentState==X.connected)for(;!this.msgQueue.isEmpty();){let e=this.msgQueue.peak();if(!this._sendMsgToRov(e))break;this.msgQueue.pop()}}sendMessage(e,n,r=!1){let i={msgBytes:e,onSendCallback:n};r?this._sendMsgToRov(i):(this.msgQueue.push(i),setTimeout(this.emptyMsgQueue.bind(this),0))}dcStateChange(e){this.closed||(kn.set(e),console.debug("dcStateChange",e),this.onOverallStateChange(this.dataConnection.currentState,this.mediaConnection.currentState,this.rovPeerId),e==X.connected?(this.emptyMsgQueue(),this.connectionFailureCount=0):e==X.reconnecting?this.connectionFailureCount++:e==X.disconnected&&this.close())}mcStateChange(e){this.closed||(ui.set(e),console.debug("mcStateChange",e),e==X.connected||(e==X.reconnecting?this.connectionFailureCount++:e==X.disconnected&&this.close()))}_checkForTooManyFailures(){this.connectionFailureCount>5&&(console.info("Too many connection failures, closing connection"),this.close())}switchOutThisPeer(e){this.ourPeerMachine=e,this.dataConnection.setCurrentPeer(e.peer)}close(){console.info("Closing Rov Connection: ",this.rovPeerId),this.closed=!0,this.mediaConnection.close(),this.dataConnection.close()}}const Xh=Ae(0),Qh=Ae(0),Yh=Ae(0),Kh=Ae(0),Jh=Ae(0),_c=Ae(0),Zh=Ae(0),$h=Ae(0),e0=1013.25;function t0(t){for(let e of t.MeasurementUpdates)e.MeasurementType==xt.SensorMeasurmentTypes.pressure_mbar?(Jh.set(e.Value),Qh.set((e.Value-e0)*.009962143853)):e.MeasurementType==xt.SensorMeasurmentTypes.water_temp_celsius?Yh.set(e.Value):e.MeasurementType==xt.SensorMeasurmentTypes.internal_temp_celsius?Kh.set(e.Value):e.MeasurementType==xt.SensorMeasurmentTypes.yaw_degrees?_c.set(e.Value):e.MeasurementType==xt.SensorMeasurmentTypes.pitch_degrees?Zh.set(e.Value):e.MeasurementType==xt.SensorMeasurmentTypes.roll_degrees&&$h.set(e.Value)}let ds=NaN;class n0{constructor(){N(this,"replyContinuityCallbacks",[]);N(this,"sendMessageCallback");N(this,"setSendMessageCallback",e=>{this.sendMessageCallback=e})}handleRecivedMessage(e){let n=new Uint8Array(e);if(!n||n.length===0)return;console.log("GOT DC DATA:",n);const r=xt.RovResponse.decode(new Uint8Array(e));if(Si.get()&&be(JSON.stringify(r.toJSON()),800),this.runExchangeCallback(r.ExchangeId,r),r.Done)return this.handleDoneMsgRecived(r.ExchangeId,r.Done);if(r.Error)return this.handleErrorMsgRecived(r.ExchangeId,r.Error);if(r.Pong)return this.handlePongMsgRecived(r.ExchangeId,r.Pong);if(r.ContinuedOutput)return this.handleContinuedOutputMsgRecived(r.ExchangeId,r.ContinuedOutput);if(r.SensorUpdates)return this.handleSensorUpdatesMsgRecived(r.ExchangeId,r.SensorUpdates);if(r.PasswordRequired)return this.handlePasswordRequiredMsgRecived(r.ExchangeId,r.PasswordRequired);if(r.PasswordAccepted)return this.handlePasswordAcceptedMsgRecived(r.ExchangeId,r.PasswordAccepted);if(r.PasswordInvalid)return this.handlePasswordInvalidMsgRecived(r.ExchangeId,r.PasswordInvalid);if(r.DriverChanged)return this.handleDriverChangedMsgRecived(r.ExchangeId,r.DriverChanged);if(r.ClientConnected)return this.handleClientConnectedMsgRecived(r.ExchangeId,r.ClientConnected);if(r.ClientDisconnected)return this.handleClientDisconnectedMsgRecived(r.ExchangeId,r.ClientDisconnected);r.SimplepeerSignal}handleDoneMsgRecived(e,n){console.log("Done: ",n)}handleErrorMsgRecived(e,n){console.warn("ROV Error: ",n),be("ROV Error: "+n.Message,2e3,null)}handlePongMsgRecived(e,n){ds=Date.now();const r=ds-Number.parseFloat(n.Time);Xh.set(r)}handleContinuedOutputMsgRecived(e,n){console.log("ContinuedOutput: ",e,n)}handleSensorUpdatesMsgRecived(e,n){t0(n.MeasurementUpdates)}handlePasswordRequiredMsgRecived(e,n){console.log("PasswordRequired for rovId:",n.RovId),Fh("Enter Driver Password",r=>{r?this.sendRovMessage({PasswordAttempt:{Password:r},ExchangeId:e},null):delete this.replyContinuityCallbacks[e]})}handlePasswordAcceptedMsgRecived(e,n){be("Password Accepted",1e3,null),console.log("TODO: Got AuthToken:",n.AuthToken)}handlePasswordInvalidMsgRecived(e,n){be("Wrong Password",1e3,null),this.handlePasswordRequiredMsgRecived(e,n)}handleDriverChangedMsgRecived(e,n){console.info("Driver Changed: ",n);let r=Kt.getThisPeerId();n.DriverPeerId==r?(be("You are now the driver"),sa.set(!0)):(be("ROV Driver is now "+n.DriverPeerId),sa.set(!1))}handleClientConnectedMsgRecived(e,n){be(n.ClientPeerId+" Connected to ROV",1500,null)}handleClientDisconnectedMsgRecived(e,n){be(n.ClientPeerId+" Disconnected from ROV",1500,null)}sendRovMessage(e,n=null){!e.ExchangeId&&n&&(e.ExchangeId=this.replyContinuityCallbacks.length+1),this.replyContinuityCallbacks[e.ExchangeId]||(this.replyContinuityCallbacks[e.ExchangeId]={callback:n,originalMsgData:e}),console.info("Sending RovMessage: ",e);const r=xt.RovAction.encode(e).finish();this.sendMessageCallback(r)}resendMessage(e){const n=this.replyContinuityCallbacks[e];n&&n.originalMsgData?(console.info("Resending message: ",n.originalMsgData),this.sendRovMessage(n.originalMsgData,n.callback)):console.info("No message to resend for ExchangeId: ",e)}runExchangeCallback(e,n){const r=this.replyContinuityCallbacks[e];r&&(r.callback&&r.callback(n),(n.Done||n.Error)&&delete this.replyContinuityCallbacks[e])}}const _i=new n0;class r0{constructor(e){N(this,"pingLoopIntervalId",null);N(this,"lastMove",{VelocityX:0,VelocityY:0,VelocityZ:0,AngularVelocityYaw:0});N(this,"rovMsgHandler",null);N(this,"shutdownRov",()=>{Gr("Are you sure you want to shutdown the ROV?",e=>{be("Sending Shutdown Request..."),this.sendActionAndWaitForDone({ShutdownRov:{}},n=>{n.Error?be("ROV Shutdown Error: "+n.Error.Message):n.Done&&(be("Please wait 20 seconds before unplugging"),be("ROV: "+n.Done.Message),this.disconnectFromRov())})})});N(this,"rebootRov",()=>{Gr("Are you sure you want to reboot the ROV?",e=>{be("Sending Reboot Request..."),this.sendActionAndWaitForDone({RebootRov:{}},n=>{n.Error?be("ROV Reboot Error: "+n.Error.Message):n.Done&&(be("Press Connect again in about 30 seconds"),be("ROV: "+n.Done.Message),this.disconnectFromRov())})})});N(this,"restartRovServices",()=>{Gr("Are you sure you want to restart services? - The ROV will stop responding for about a minute and then you can re-connect.",()=>{let e=this.showCommandOutputPopup("Restarting ROV Services",`Sending Service Restart Request (Please Wait)...
`,`

Done.`);this.rovMsgHandler.sendRovMessage({RestartRovServices:{}},e)})});N(this,"getRovStatusReport",()=>{let e=this.showCommandOutputPopup("ROV Status Report",`Sending Status Request (Please Wait)...
`,`

Done.`);this.rovMsgHandler.sendRovMessage({RovStatusReport:{}},e)});N(this,"getRovLogs",()=>{let e=this.showCommandOutputPopup("ROV Logs",`Sending Request (Please Wait)...
`,`

Done.`);this.rovMsgHandler.sendRovMessage({RovLogs:{}},e)});N(this,"enableRovWifi",()=>{be("Sending Enable Wifi Command..."),this.sendActionAndWaitForDone({EnableWifi:{}},e=>{e.Error?be("Enable Wifi Error: "+e.Error.Message):e.Done&&be("Wifi Enable: "+e.Done.Message)})});N(this,"disableRovWifi",()=>{Gr("Are you sure you want to disable rov wifi? If the ROV is connected via wifi, don't do this!",()=>{be("Sending Disable Wifi Command..."),this.sendActionAndWaitForDone({DisableWifi:{}},e=>{e.Error?be("Disable Wifi Error: "+e.Error.Message):e.Done&&be("Wifi Disable: "+e.Done.Message)})})});this.rovMsgHandler=e}sendActionAndWaitForDone(e,n){this.rovMsgHandler.sendRovMessage(e,r=>{n&&(r.Done||r.Error||r.ContinuedOutput)&&n(r)})}startPingLoop(){this.pingLoopIntervalId||(this.pingLoopIntervalId=setInterval(()=>{this.rovMsgHandler.sendRovMessage({Ping:{Time:Date.now()}},null)},3e3))}stopPingLoop(){clearInterval(this.pingLoopIntervalId),this.pingLoopIntervalId=null}showCommandOutputPopup(e,n,r){let i=jh(e,null);return i(n),o=>{o.ContinuedOutput?i(o.ContinuedOutput.Message+`
`):o.Done?i(o.Done.Message+`
`+r):o.Error&&i(o.Error.Message+`
`)}}connectToRov(){Kt.connectToCurrentTargetRov()}disconnectFromRov(){Kt.disconnectFromCurrentRov()}switchToNextRovPeerId(){$t.update(e=>(e++,localStorage.setItem("rovPeerIdEndNumber",e.toString()),e)),cs(),this.disconnectFromRov()}switchToPrevRovPeerId(){$t.update(e=>(e=Math.max(e-1,0),localStorage.setItem("rovPeerIdEndNumber",e.toString()),e)),cs(),this.disconnectFromRov()}takeControl(){this.rovMsgHandler.sendRovMessage({TakeControl:{}},null)}moveRov(e,n,r,i){if(e==this.lastMove.VelocityX&&n==this.lastMove.VelocityY&&r==this.lastMove.VelocityZ&&i==this.lastMove.AngularVelocityYaw)return;const o={VelocityX:e,VelocityY:n,VelocityZ:r,AngularVelocityYaw:i};this.rovMsgHandler.sendRovMessage({Move:o},null),this.lastMove=o}refreshAllSensorData(){this.rovMsgHandler.sendRovMessage({RefreshAllSensors:{}},null)}toggleLights(){this.rovMsgHandler.sendRovMessage({ToogleLights:{}},null)}}const Ie=new r0(_i);class i0{constructor(e){N(this,"ROVs",{});N(this,"currentTargetRovId",vi($t.get()));N(this,"ourPeerMachines",[]);N(this,"overallPeerServerState",X.disconnected);N(this,"reconnectFailureCount",0);N(this,"onMessageRecivedCallback",e=>{console.debug("msg recived:"+e)});this.onMessageRecivedCallback=e}start(){if(this.ourPeerMachines.length!==0)return;const e=new Vh(this.peerConnStateChange.bind(this));this.ourPeerMachines=[e],e.start()}getThisPeerId(){return Cn.get()}peerConnStateChange(){let e=this.ourPeerMachines.map(r=>r.currentState);console.debug("PeerStatesChange: ",e);let n=0;for(let r=0;r<e.length;r++)e[r]==X.connected&&(n++,n>1?(this.ourPeerMachines[r].cleanup(),this.ourPeerMachines.splice(r,1)):this.connectToCurrentTargetRov(),this.reconnectFailureCount=0);if(n!=-1)if(console.debug("peer states:",e,n),n>0){if(this.overallPeerServerState==X.connected)return;vn.set(X.connected)}else if(e.indexOf(X.reconnecting)!=-1){if(this.overallPeerServerState==X.reconnecting)return;vn.set(X.reconnecting)}else if(e.indexOf(X.connecting)!=-1){if(this.overallPeerServerState==X.connecting)return;vn.set(X.connecting)}else this.overallPeerServerState!=X.disconnected&&vn.set(X.disconnected)}rovConnStateChange(e,n,r){r==this.currentTargetRovId&&(kn.set(e),ui.set(n),e==X.connected&&Ie.refreshAllSensorData())}messageRecived(e,n){n===this.currentTargetRovId?this.onMessageRecivedCallback(e):console.warn("Message Recived from wrong ROV Peer "+n,e)}connectToRov(e){this.ROVs[e]||(this.ROVs[e]=new Wh(e,this.ourPeerMachines[0],this.messageRecived.bind(this),this.rovConnStateChange.bind(this))),this.ROVs[e].start()}connectToCurrentTargetRov(){this.currentTargetRovId=vi($t.get()),this.connectToRov(this.currentTargetRovId)}disconnectFromRov(e){if(e==this.currentTargetRovId&&(kn.set(X.disconnected),ui.set(X.disconnected)),this.ROVs[e]===void 0){console.warn("Tried to disconnect from a rov that is not connected: ",e);return}this.ROVs[e].close(),delete this.ROVs[e]}disconnectFromCurrentRov(){this.disconnectFromRov(this.currentTargetRovId)}sendMessageToRov(e,n,r=!1){this.ROVs[n].sendMessage(e,null,r)}sendMessageToCurrentRov(e,n=!1){this.sendMessageToRov(e,this.currentTargetRovId,n)}cleanup(){for(const e in this.ROVs)this.disconnectFromRov(e);for(const e of this.ourPeerMachines)e.cleanup();this.ourPeerMachines=[]}}const Kt=new i0(_i.handleRecivedMessage.bind(_i)),o0=t=>{function e(i){r&&r.send(i)}const n=Al({context:{peerServerConfig:{},rovIpAddr:null},predictableActionArguments:!0,preserveActionOrder:!0,id:"siteInit",initial:"Checking_Internet_Access",states:{Checking_Internet_Access:{entry:"checkInternetAvailable",on:{URL_IS_ROV_IP:{actions:["setLocalPeerServerConfig","showHttpGamepadSupportDisabledAlert"],target:"#siteInit.Site_Ready"},INTERNET_AVAILABLE:{actions:"setCloudPeerServerConfig",target:"#siteInit.Site_Ready"},INTERNET_OFFLINE:{actions:["showIpScanButton","hideLoadingUi"],target:"#siteInit.Waiting_For_User_Scan_Button_Press"}}},Waiting_For_User_Scan_Button_Press:{entry:"setupWaitForUserScanButtonPress",on:{SCAN_BUTTON_CLICKED:{actions:["showIpScanningUi","hideIpScanButton"],target:"#siteInit.Scanning_For_ROV_IP"}}},Scanning_For_ROV_IP:{entry:"scanForRovIP",on:{ROV_IP_FOUND:{actions:"setRovIpAddr",target:"#siteInit.Redirect_Browser_To_ROV_IP"},IP_SCANNING_ERROR:{actions:["showIpScanButton","hideLoadingUi"],target:"#siteInit.Waiting_For_User_Scan_Button_Press"}}},Redirect_Browser_To_ROV_IP:{entry:"redirectBrowserToRovIp"},Site_Ready:{entry:"siteReady",type:"final"}}},{actions:{setCloudPeerServerConfig:()=>{aa.set(li)},setLocalPeerServerConfig:()=>{aa.set(of)},setRovIpAddr:(i,o)=>{sf.set(o.data)},showIpScanButton:()=>{be("Click scan to find the ROV locally."),be("No internet connection.")},hideIpScanButton:()=>{},hideLoadingUi:()=>{it(Oe.ipScan),it(Oe.internetCheck)},showIpScanningUi:()=>{wt(Oe.ipScan)},redirectBrowserToRovIp:(i,o)=>{window.location.href=`http://${o.data}`},siteReady:()=>{t("SITE_READY")},checkInternetAvailable:()=>{wt(Oe.internetCheck);const i=li;pf((i.secure?"https://":"http://")+i.host+":"+i.port).then(o=>{if(o)e("INTERNET_AVAILABLE");else{const l=window.location.host.split(".");l.length==4&&!isNaN(Number(l[3]))||l.length==2&&l[1]=="local"?e("URL_IS_ROV_IP"):e("INTERNET_OFFLINE")}})},setupWaitForUserScanButtonPress:()=>{const i=()=>{e("SCAN_BUTTON_CLICKED")},o=document.getElementById("scan_for_ip_btn");return o.addEventListener("click",i),()=>{o.removeEventListener("click",i)}},scanForRovIP:()=>{wt(Oe.ipScan)}},guards:{}}),r=Ro(n,{devTools:Si.get()}).start();return r};function ps(t,e,n){const r=t.slice();return r[5]=e[n],r}function hs(t,e,n){const r=t.slice();return r[5]=e[n],r}function gs(t,e,n){const r=t.slice();return r[5]=e[n],r}function ms(t,e,n){const r=t.slice();return r[5]=e[n],r}function vs(t,e,n){const r=t.slice();return r[5]=e[n],r}function ys(t,e,n){const r=t.slice();return r[5]=e[n],r}function bs(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=H(r,n[i]);return{c(){e=Ut("path"),$e(e,r)},m(i,o){O(i,e,o)},p(i,o){$e(e,r=Y(n,[o&2&&i[5]]))},d(i){i&&P(e)}}}function _s(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=H(r,n[i]);return{c(){e=Ut("rect"),$e(e,r)},m(i,o){O(i,e,o)},p(i,o){$e(e,r=Y(n,[o&2&&i[5]]))},d(i){i&&P(e)}}}function Cs(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=H(r,n[i]);return{c(){e=Ut("circle"),$e(e,r)},m(i,o){O(i,e,o)},p(i,o){$e(e,r=Y(n,[o&2&&i[5]]))},d(i){i&&P(e)}}}function As(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=H(r,n[i]);return{c(){e=Ut("polygon"),$e(e,r)},m(i,o){O(i,e,o)},p(i,o){$e(e,r=Y(n,[o&2&&i[5]]))},d(i){i&&P(e)}}}function Es(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=H(r,n[i]);return{c(){e=Ut("polyline"),$e(e,r)},m(i,o){O(i,e,o)},p(i,o){$e(e,r=Y(n,[o&2&&i[5]]))},d(i){i&&P(e)}}}function Ss(t){let e,n=[t[5]],r={};for(let i=0;i<n.length;i+=1)r=H(r,n[i]);return{c(){e=Ut("line"),$e(e,r)},m(i,o){O(i,e,o)},p(i,o){$e(e,r=Y(n,[o&2&&i[5]]))},d(i){i&&P(e)}}}function a0(t){var E,w,S,x,L,I,j;let e,n,r,i,o,l,c=((E=t[1])==null?void 0:E.path)??[],a=[];for(let A=0;A<c.length;A+=1)a[A]=bs(ys(t,c,A));let u=((w=t[1])==null?void 0:w.rect)??[],f=[];for(let A=0;A<u.length;A+=1)f[A]=_s(vs(t,u,A));let s=((S=t[1])==null?void 0:S.circle)??[],d=[];for(let A=0;A<s.length;A+=1)d[A]=Cs(ms(t,s,A));let p=((x=t[1])==null?void 0:x.polygon)??[],h=[];for(let A=0;A<p.length;A+=1)h[A]=As(gs(t,p,A));let m=((L=t[1])==null?void 0:L.polyline)??[],g=[];for(let A=0;A<m.length;A+=1)g[A]=Es(hs(t,m,A));let v=((I=t[1])==null?void 0:I.line)??[],y=[];for(let A=0;A<v.length;A+=1)y[A]=Ss(ps(t,v,A));let _=[(j=t[1])==null?void 0:j.a,{xmlns:"http://www.w3.org/2000/svg"},{width:t[0]},{height:t[0]},t[2]],b={};for(let A=0;A<_.length;A+=1)b=H(b,_[A]);return{c(){e=Ut("svg");for(let A=0;A<a.length;A+=1)a[A].c();n=Ye();for(let A=0;A<f.length;A+=1)f[A].c();r=Ye();for(let A=0;A<d.length;A+=1)d[A].c();i=Ye();for(let A=0;A<h.length;A+=1)h[A].c();o=Ye();for(let A=0;A<g.length;A+=1)g[A].c();l=Ye();for(let A=0;A<y.length;A+=1)y[A].c();$e(e,b)},m(A,q){O(A,e,q);for(let z=0;z<a.length;z+=1)a[z]&&a[z].m(e,null);B(e,n);for(let z=0;z<f.length;z+=1)f[z]&&f[z].m(e,null);B(e,r);for(let z=0;z<d.length;z+=1)d[z]&&d[z].m(e,null);B(e,i);for(let z=0;z<h.length;z+=1)h[z]&&h[z].m(e,null);B(e,o);for(let z=0;z<g.length;z+=1)g[z]&&g[z].m(e,null);B(e,l);for(let z=0;z<y.length;z+=1)y[z]&&y[z].m(e,null)},p(A,[q]){var z,ge,me,ce,U,ue,Me;if(q&2){c=((z=A[1])==null?void 0:z.path)??[];let M;for(M=0;M<c.length;M+=1){const le=ys(A,c,M);a[M]?a[M].p(le,q):(a[M]=bs(le),a[M].c(),a[M].m(e,n))}for(;M<a.length;M+=1)a[M].d(1);a.length=c.length}if(q&2){u=((ge=A[1])==null?void 0:ge.rect)??[];let M;for(M=0;M<u.length;M+=1){const le=vs(A,u,M);f[M]?f[M].p(le,q):(f[M]=_s(le),f[M].c(),f[M].m(e,r))}for(;M<f.length;M+=1)f[M].d(1);f.length=u.length}if(q&2){s=((me=A[1])==null?void 0:me.circle)??[];let M;for(M=0;M<s.length;M+=1){const le=ms(A,s,M);d[M]?d[M].p(le,q):(d[M]=Cs(le),d[M].c(),d[M].m(e,i))}for(;M<d.length;M+=1)d[M].d(1);d.length=s.length}if(q&2){p=((ce=A[1])==null?void 0:ce.polygon)??[];let M;for(M=0;M<p.length;M+=1){const le=gs(A,p,M);h[M]?h[M].p(le,q):(h[M]=As(le),h[M].c(),h[M].m(e,o))}for(;M<h.length;M+=1)h[M].d(1);h.length=p.length}if(q&2){m=((U=A[1])==null?void 0:U.polyline)??[];let M;for(M=0;M<m.length;M+=1){const le=hs(A,m,M);g[M]?g[M].p(le,q):(g[M]=Es(le),g[M].c(),g[M].m(e,l))}for(;M<g.length;M+=1)g[M].d(1);g.length=m.length}if(q&2){v=((ue=A[1])==null?void 0:ue.line)??[];let M;for(M=0;M<v.length;M+=1){const le=ps(A,v,M);y[M]?y[M].p(le,q):(y[M]=Ss(le),y[M].c(),y[M].m(e,null))}for(;M<y.length;M+=1)y[M].d(1);y.length=v.length}$e(e,b=Y(_,[q&2&&((Me=A[1])==null?void 0:Me.a),{xmlns:"http://www.w3.org/2000/svg"},q&1&&{width:A[0]},q&1&&{height:A[0]},q&4&&A[2]]))},i:fe,o:fe,d(A){A&&P(e),kt(a,A),kt(f,A),kt(d,A),kt(h,A),kt(g,A),kt(y,A)}}}function s0(t,e,n){let r;const i=["src","size","theme"];let o=Ze(e,i),{src:l}=e,{size:c="100%"}=e,{theme:a="default"}=e;if(c!=="100%"&&c.slice(-1)!="x"&&c.slice(-1)!="m"&&c.slice(-1)!="%")try{c=parseInt(c)+"px"}catch{c="100%"}return t.$$set=u=>{e=H(H({},e),rn(u)),n(2,o=Ze(e,i)),"src"in u&&n(3,l=u.src),"size"in u&&n(0,c=u.size),"theme"in u&&n(4,a=u.theme)},t.$$.update=()=>{t.$$.dirty&24&&n(1,r=(l==null?void 0:l[a])??(l==null?void 0:l.default))},[c,r,o,l,a]}class Jt extends we{constructor(e){super(),Te(this,e,s0,a0,Se,{src:3,size:0,theme:4})}}const l0={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M10 3.75a2 2 0 10-4 0 2 2 0 004 0zM17.25 4.5a.75.75 0 000-1.5h-5.5a.75.75 0 000 1.5h5.5zM5 3.75a.75.75 0 01-.75.75h-1.5a.75.75 0 010-1.5h1.5a.75.75 0 01.75.75zM4.25 17a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5zM17.25 17a.75.75 0 000-1.5h-5.5a.75.75 0 000 1.5h5.5zM9 10a.75.75 0 01-.75.75h-5.5a.75.75 0 010-1.5h5.5A.75.75 0 019 10zM17.25 10.75a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5h1.5zM14 10a2 2 0 10-4 0 2 2 0 004 0zM10 16.25a2 2 0 10-4 0 2 2 0 004 0z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{d:"M18.75 12.75h1.5a.75.75 0 000-1.5h-1.5a.75.75 0 000 1.5zM12 6a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 0112 6zM12 18a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 0112 18zM3.75 6.75h1.5a.75.75 0 100-1.5h-1.5a.75.75 0 000 1.5zM5.25 18.75h-1.5a.75.75 0 010-1.5h1.5a.75.75 0 010 1.5zM3 12a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5A.75.75 0 013 12zM9 3.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5zM12.75 12a2.25 2.25 0 114.5 0 2.25 2.25 0 01-4.5 0zM9 15.75a2.25 2.25 0 100 4.5 2.25 2.25 0 000-4.5z"}]}},ks={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M3.28 2.22a.75.75 0 00-1.06 1.06L5.44 6.5H2.75a.75.75 0 000 1.5h4.5A.75.75 0 008 7.25v-4.5a.75.75 0 00-1.5 0v2.69L3.28 2.22zM13.5 2.75a.75.75 0 00-1.5 0v4.5c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-2.69l3.22-3.22a.75.75 0 00-1.06-1.06L13.5 5.44V2.75zM3.28 17.78l3.22-3.22v2.69a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.69l-3.22 3.22a.75.75 0 101.06 1.06zM13.5 14.56l3.22 3.22a.75.75 0 101.06-1.06l-3.22-3.22h2.69a.75.75 0 000-1.5h-4.5a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0v-2.69z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M3.22 3.22a.75.75 0 011.06 0l3.97 3.97V4.5a.75.75 0 011.5 0V9a.75.75 0 01-.75.75H4.5a.75.75 0 010-1.5h2.69L3.22 4.28a.75.75 0 010-1.06zm17.56 0a.75.75 0 010 1.06l-3.97 3.97h2.69a.75.75 0 010 1.5H15a.75.75 0 01-.75-.75V4.5a.75.75 0 011.5 0v2.69l3.97-3.97a.75.75 0 011.06 0zM3.75 15a.75.75 0 01.75-.75H9a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-2.69l-3.97 3.97a.75.75 0 01-1.06-1.06l3.97-3.97H4.5a.75.75 0 01-.75-.75zm10.5 0a.75.75 0 01.75-.75h4.5a.75.75 0 010 1.5h-2.69l3.97 3.97a.75.75 0 11-1.06 1.06l-3.97-3.97v2.69a.75.75 0 01-1.5 0V15z","clip-rule":"evenodd"}]}},Ts={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{d:"M13.28 7.78l3.22-3.22v2.69a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.69l-3.22 3.22a.75.75 0 001.06 1.06zM2 17.25v-4.5a.75.75 0 011.5 0v2.69l3.22-3.22a.75.75 0 011.06 1.06L4.56 16.5h2.69a.75.75 0 010 1.5h-4.5a.747.747 0 01-.75-.75zM12.22 13.28l3.22 3.22h-2.69a.75.75 0 000 1.5h4.5a.747.747 0 00.75-.75v-4.5a.75.75 0 00-1.5 0v2.69l-3.22-3.22a.75.75 0 10-1.06 1.06zM3.5 4.56l3.22 3.22a.75.75 0 001.06-1.06L4.56 3.5h2.69a.75.75 0 000-1.5h-4.5a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0V4.56z"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M15 3.75a.75.75 0 01.75-.75h4.5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0V5.56l-3.97 3.97a.75.75 0 11-1.06-1.06l3.97-3.97h-2.69a.75.75 0 01-.75-.75zm-12 0A.75.75 0 013.75 3h4.5a.75.75 0 010 1.5H5.56l3.97 3.97a.75.75 0 01-1.06 1.06L4.5 5.56v2.69a.75.75 0 01-1.5 0v-4.5zm11.47 11.78a.75.75 0 111.06-1.06l3.97 3.97v-2.69a.75.75 0 011.5 0v4.5a.75.75 0 01-.75.75h-4.5a.75.75 0 010-1.5h2.69l-3.97-3.97zm-4.94-1.06a.75.75 0 010 1.06L5.56 19.5h2.69a.75.75 0 010 1.5h-4.5a.75.75 0 01-.75-.75v-4.5a.75.75 0 011.5 0v2.69l3.97-3.97a.75.75 0 011.06 0z","clip-rule":"evenodd"}]}},c0={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z","clip-rule":"evenodd"}]}},u0={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"},{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M7.84 1.804A1 1 0 018.82 1h2.36a1 1 0 01.98.804l.331 1.652a6.993 6.993 0 011.929 1.115l1.598-.54a1 1 0 011.186.447l1.18 2.044a1 1 0 01-.205 1.251l-1.267 1.113a7.047 7.047 0 010 2.228l1.267 1.113a1 1 0 01.206 1.25l-1.18 2.045a1 1 0 01-1.187.447l-1.598-.54a6.993 6.993 0 01-1.929 1.115l-.33 1.652a1 1 0 01-.98.804H8.82a1 1 0 01-.98-.804l-.331-1.652a6.993 6.993 0 01-1.929-1.115l-1.598.54a1 1 0 01-1.186-.447l-1.18-2.044a1 1 0 01.205-1.251l1.267-1.114a7.05 7.05 0 010-2.227L1.821 7.773a1 1 0 01-.206-1.25l1.18-2.045a1 1 0 011.187-.447l1.598.54A6.993 6.993 0 017.51 3.456l.33-1.652zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 00-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 00-2.282.819l-.922 1.597a1.875 1.875 0 00.432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 000 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 00-.432 2.385l.922 1.597a1.875 1.875 0 002.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 002.28-.819l.923-1.597a1.875 1.875 0 00-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 000-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 00-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 00-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 00-1.85-1.567h-1.843zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z","clip-rule":"evenodd"}]}},f0={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5.636 5.636a9 9 0 1012.728 0M12 3v9"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M10 2a.75.75 0 01.75.75v7.5a.75.75 0 01-1.5 0v-7.5A.75.75 0 0110 2zM5.404 4.343a.75.75 0 010 1.06 6.5 6.5 0 109.192 0 .75.75 0 111.06-1.06 8 8 0 11-11.313 0 .75.75 0 011.06 0z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 01.75.75v9a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM6.166 5.106a.75.75 0 010 1.06 8.25 8.25 0 1011.668 0 .75.75 0 111.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 011.06 0z","clip-rule":"evenodd"}]}},d0={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.94 6.94a.75.75 0 11-1.061-1.061 3 3 0 112.871 5.026v.345a.75.75 0 01-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 108.94 6.94zM10 15a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 01-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 01-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 01-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584zM12 18a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"}]}},p0={default:{a:{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},path:[{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75a4.5 4.5 0 01-4.884 4.484c-1.076-.091-2.264.071-2.95.904l-7.152 8.684a2.548 2.548 0 11-3.586-3.586l8.684-7.152c.833-.686.995-1.874.904-2.95a4.5 4.5 0 016.336-4.486l-3.276 3.276a3.004 3.004 0 002.25 2.25l3.276-3.276c.256.565.398 1.192.398 1.852z"},{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.867 19.125h.008v.008h-.008v-.008z"}]},mini:{a:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M19 5.5a4.5 4.5 0 01-4.791 4.49c-.873-.055-1.808.128-2.368.8l-6.024 7.23a2.724 2.724 0 11-3.837-3.837L9.21 8.16c.672-.56.855-1.495.8-2.368a4.5 4.5 0 015.873-4.575c.324.105.39.51.15.752L13.34 4.66a.455.455 0 00-.11.494 3.01 3.01 0 001.617 1.617c.17.07.363.02.493-.111l2.692-2.692c.241-.241.647-.174.752.15.14.435.216.9.216 1.382zM4 17a1 1 0 100-2 1 1 0 000 2z","clip-rule":"evenodd"}]},solid:{a:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},path:[{"fill-rule":"evenodd",d:"M12 6.75a5.25 5.25 0 016.775-5.025.75.75 0 01.313 1.248l-3.32 3.319c.063.475.276.934.641 1.299.365.365.824.578 1.3.64l3.318-3.319a.75.75 0 011.248.313 5.25 5.25 0 01-5.472 6.756c-1.018-.086-1.87.1-2.309.634L7.344 21.3A3.298 3.298 0 112.7 16.657l8.684-7.151c.533-.44.72-1.291.634-2.309A5.342 5.342 0 0112 6.75zM4.117 19.125a.75.75 0 01.75-.75h.008a.75.75 0 01.75.75v.008a.75.75 0 01-.75.75h-.008a.75.75 0 01-.75-.75v-.008z","clip-rule":"evenodd"}]}};var Ke="top",at="bottom",st="right",Je="left",jo="auto",Ar=[Ke,at,st,Je],wn="start",pr="end",h0="clippingParents",Cc="viewport",Un="popper",g0="reference",ws=Ar.reduce(function(t,e){return t.concat([e+"-"+wn,e+"-"+pr])},[]),Ac=[].concat(Ar,[jo]).reduce(function(t,e){return t.concat([e,e+"-"+wn,e+"-"+pr])},[]),m0="beforeRead",v0="read",y0="afterRead",b0="beforeMain",_0="main",C0="afterMain",A0="beforeWrite",E0="write",S0="afterWrite",k0=[m0,v0,y0,b0,_0,C0,A0,E0,S0];function _t(t){return t?(t.nodeName||"").toLowerCase():null}function rt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function tn(t){var e=rt(t).Element;return t instanceof e||t instanceof Element}function ot(t){var e=rt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function No(t){if(typeof ShadowRoot>"u")return!1;var e=rt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function T0(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},o=e.elements[n];!ot(o)||!_t(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(l){var c=i[l];c===!1?o.removeAttribute(l):o.setAttribute(l,c===!0?"":c)}))})}function w0(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],o=e.attributes[r]||{},l=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),c=l.reduce(function(a,u){return a[u]="",a},{});!ot(i)||!_t(i)||(Object.assign(i.style,c),Object.keys(o).forEach(function(a){i.removeAttribute(a)}))})}}const Ec={name:"applyStyles",enabled:!0,phase:"write",fn:T0,effect:w0,requires:["computeStyles"]};function bt(t){return t.split("-")[0]}var Zt=Math.max,Ci=Math.min,Rn=Math.round;function ho(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Sc(){return!/^((?!chrome|android).)*safari/i.test(ho())}function Pn(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,o=1;e&&ot(t)&&(i=t.offsetWidth>0&&Rn(r.width)/t.offsetWidth||1,o=t.offsetHeight>0&&Rn(r.height)/t.offsetHeight||1);var l=tn(t)?rt(t):window,c=l.visualViewport,a=!Sc()&&n,u=(r.left+(a&&c?c.offsetLeft:0))/i,f=(r.top+(a&&c?c.offsetTop:0))/o,s=r.width/i,d=r.height/o;return{width:s,height:d,top:f,right:u+s,bottom:f+d,left:u,x:u,y:f}}function Go(t){var e=Pn(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function kc(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&No(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Pt(t){return rt(t).getComputedStyle(t)}function R0(t){return["table","td","th"].indexOf(_t(t))>=0}function zt(t){return((tn(t)?t.ownerDocument:t.document)||window.document).documentElement}function Pi(t){return _t(t)==="html"?t:t.assignedSlot||t.parentNode||(No(t)?t.host:null)||zt(t)}function Rs(t){return!ot(t)||Pt(t).position==="fixed"?null:t.offsetParent}function P0(t){var e=/firefox/i.test(ho()),n=/Trident/i.test(ho());if(n&&ot(t)){var r=Pt(t);if(r.position==="fixed")return null}var i=Pi(t);for(No(i)&&(i=i.host);ot(i)&&["html","body"].indexOf(_t(i))<0;){var o=Pt(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Er(t){for(var e=rt(t),n=Rs(t);n&&R0(n)&&Pt(n).position==="static";)n=Rs(n);return n&&(_t(n)==="html"||_t(n)==="body"&&Pt(n).position==="static")?e:n||P0(t)||e}function Vo(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function rr(t,e,n){return Zt(t,Ci(e,n))}function O0(t,e,n){var r=rr(t,e,n);return r>n?n:r}function Tc(){return{top:0,right:0,bottom:0,left:0}}function wc(t){return Object.assign({},Tc(),t)}function Rc(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var M0=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,wc(typeof e!="number"?e:Rc(e,Ar))};function D0(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,l=n.modifiersData.popperOffsets,c=bt(n.placement),a=Vo(c),u=[Je,st].indexOf(c)>=0,f=u?"height":"width";if(!(!o||!l)){var s=M0(i.padding,n),d=Go(o),p=a==="y"?Ke:Je,h=a==="y"?at:st,m=n.rects.reference[f]+n.rects.reference[a]-l[a]-n.rects.popper[f],g=l[a]-n.rects.reference[a],v=Er(o),y=v?a==="y"?v.clientHeight||0:v.clientWidth||0:0,_=m/2-g/2,b=s[p],E=y-d[f]-s[h],w=y/2-d[f]/2+_,S=rr(b,w,E),x=a;n.modifiersData[r]=(e={},e[x]=S,e.centerOffset=S-w,e)}}function I0(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||kc(e.elements.popper,i)&&(e.elements.arrow=i))}const B0={name:"arrow",enabled:!0,phase:"main",fn:D0,effect:I0,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function On(t){return t.split("-")[1]}var x0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function L0(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Rn(n*i)/i||0,y:Rn(r*i)/i||0}}function Ps(t){var e,n=t.popper,r=t.popperRect,i=t.placement,o=t.variation,l=t.offsets,c=t.position,a=t.gpuAcceleration,u=t.adaptive,f=t.roundOffsets,s=t.isFixed,d=l.x,p=d===void 0?0:d,h=l.y,m=h===void 0?0:h,g=typeof f=="function"?f({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=l.hasOwnProperty("x"),y=l.hasOwnProperty("y"),_=Je,b=Ke,E=window;if(u){var w=Er(n),S="clientHeight",x="clientWidth";if(w===rt(n)&&(w=zt(n),Pt(w).position!=="static"&&c==="absolute"&&(S="scrollHeight",x="scrollWidth")),w=w,i===Ke||(i===Je||i===st)&&o===pr){b=at;var L=s&&w===E&&E.visualViewport?E.visualViewport.height:w[S];m-=L-r.height,m*=a?1:-1}if(i===Je||(i===Ke||i===at)&&o===pr){_=st;var I=s&&w===E&&E.visualViewport?E.visualViewport.width:w[x];p-=I-r.width,p*=a?1:-1}}var j=Object.assign({position:c},u&&x0),A=f===!0?L0({x:p,y:m},rt(n)):{x:p,y:m};if(p=A.x,m=A.y,a){var q;return Object.assign({},j,(q={},q[b]=y?"0":"",q[_]=v?"0":"",q.transform=(E.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",q))}return Object.assign({},j,(e={},e[b]=y?m+"px":"",e[_]=v?p+"px":"",e.transform="",e))}function F0(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,l=o===void 0?!0:o,c=n.roundOffsets,a=c===void 0?!0:c,u={placement:bt(e.placement),variation:On(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Ps(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ps(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Pc={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:F0,data:{}};var Vr={passive:!0};function j0(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,o=i===void 0?!0:i,l=r.resize,c=l===void 0?!0:l,a=rt(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&u.forEach(function(f){f.addEventListener("scroll",n.update,Vr)}),c&&a.addEventListener("resize",n.update,Vr),function(){o&&u.forEach(function(f){f.removeEventListener("scroll",n.update,Vr)}),c&&a.removeEventListener("resize",n.update,Vr)}}const Oc={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:j0,data:{}};var N0={left:"right",right:"left",bottom:"top",top:"bottom"};function Zr(t){return t.replace(/left|right|bottom|top/g,function(e){return N0[e]})}var G0={start:"end",end:"start"};function Os(t){return t.replace(/start|end/g,function(e){return G0[e]})}function Uo(t){var e=rt(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function zo(t){return Pn(zt(t)).left+Uo(t).scrollLeft}function V0(t,e){var n=rt(t),r=zt(t),i=n.visualViewport,o=r.clientWidth,l=r.clientHeight,c=0,a=0;if(i){o=i.width,l=i.height;var u=Sc();(u||!u&&e==="fixed")&&(c=i.offsetLeft,a=i.offsetTop)}return{width:o,height:l,x:c+zo(t),y:a}}function U0(t){var e,n=zt(t),r=Uo(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=Zt(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),l=Zt(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),c=-r.scrollLeft+zo(t),a=-r.scrollTop;return Pt(i||n).direction==="rtl"&&(c+=Zt(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:l,x:c,y:a}}function Ho(t){var e=Pt(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Mc(t){return["html","body","#document"].indexOf(_t(t))>=0?t.ownerDocument.body:ot(t)&&Ho(t)?t:Mc(Pi(t))}function ir(t,e){var n;e===void 0&&(e=[]);var r=Mc(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),o=rt(r),l=i?[o].concat(o.visualViewport||[],Ho(r)?r:[]):r,c=e.concat(l);return i?c:c.concat(ir(Pi(l)))}function go(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function z0(t,e){var n=Pn(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Ms(t,e,n){return e===Cc?go(V0(t,n)):tn(e)?z0(e,n):go(U0(zt(t)))}function H0(t){var e=ir(Pi(t)),n=["absolute","fixed"].indexOf(Pt(t).position)>=0,r=n&&ot(t)?Er(t):t;return tn(r)?e.filter(function(i){return tn(i)&&kc(i,r)&&_t(i)!=="body"}):[]}function q0(t,e,n,r){var i=e==="clippingParents"?H0(t):[].concat(e),o=[].concat(i,[n]),l=o[0],c=o.reduce(function(a,u){var f=Ms(t,u,r);return a.top=Zt(f.top,a.top),a.right=Ci(f.right,a.right),a.bottom=Ci(f.bottom,a.bottom),a.left=Zt(f.left,a.left),a},Ms(t,l,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function Dc(t){var e=t.reference,n=t.element,r=t.placement,i=r?bt(r):null,o=r?On(r):null,l=e.x+e.width/2-n.width/2,c=e.y+e.height/2-n.height/2,a;switch(i){case Ke:a={x:l,y:e.y-n.height};break;case at:a={x:l,y:e.y+e.height};break;case st:a={x:e.x+e.width,y:c};break;case Je:a={x:e.x-n.width,y:c};break;default:a={x:e.x,y:e.y}}var u=i?Vo(i):null;if(u!=null){var f=u==="y"?"height":"width";switch(o){case wn:a[u]=a[u]-(e[f]/2-n[f]/2);break;case pr:a[u]=a[u]+(e[f]/2-n[f]/2);break}}return a}function hr(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,o=n.strategy,l=o===void 0?t.strategy:o,c=n.boundary,a=c===void 0?h0:c,u=n.rootBoundary,f=u===void 0?Cc:u,s=n.elementContext,d=s===void 0?Un:s,p=n.altBoundary,h=p===void 0?!1:p,m=n.padding,g=m===void 0?0:m,v=wc(typeof g!="number"?g:Rc(g,Ar)),y=d===Un?g0:Un,_=t.rects.popper,b=t.elements[h?y:d],E=q0(tn(b)?b:b.contextElement||zt(t.elements.popper),a,f,l),w=Pn(t.elements.reference),S=Dc({reference:w,element:_,strategy:"absolute",placement:i}),x=go(Object.assign({},_,S)),L=d===Un?x:w,I={top:E.top-L.top+v.top,bottom:L.bottom-E.bottom+v.bottom,left:E.left-L.left+v.left,right:L.right-E.right+v.right},j=t.modifiersData.offset;if(d===Un&&j){var A=j[i];Object.keys(I).forEach(function(q){var z=[st,at].indexOf(q)>=0?1:-1,ge=[Ke,at].indexOf(q)>=0?"y":"x";I[q]+=A[ge]*z})}return I}function W0(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,l=n.padding,c=n.flipVariations,a=n.allowedAutoPlacements,u=a===void 0?Ac:a,f=On(r),s=f?c?ws:ws.filter(function(h){return On(h)===f}):Ar,d=s.filter(function(h){return u.indexOf(h)>=0});d.length===0&&(d=s);var p=d.reduce(function(h,m){return h[m]=hr(t,{placement:m,boundary:i,rootBoundary:o,padding:l})[bt(m)],h},{});return Object.keys(p).sort(function(h,m){return p[h]-p[m]})}function X0(t){if(bt(t)===jo)return[];var e=Zr(t);return[Os(t),e,Os(e)]}function Q0(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,l=n.altAxis,c=l===void 0?!0:l,a=n.fallbackPlacements,u=n.padding,f=n.boundary,s=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,h=p===void 0?!0:p,m=n.allowedAutoPlacements,g=e.options.placement,v=bt(g),y=v===g,_=a||(y||!h?[Zr(g)]:X0(g)),b=[g].concat(_).reduce(function(ke,Be){return ke.concat(bt(Be)===jo?W0(e,{placement:Be,boundary:f,rootBoundary:s,padding:u,flipVariations:h,allowedAutoPlacements:m}):Be)},[]),E=e.rects.reference,w=e.rects.popper,S=new Map,x=!0,L=b[0],I=0;I<b.length;I++){var j=b[I],A=bt(j),q=On(j)===wn,z=[Ke,at].indexOf(A)>=0,ge=z?"width":"height",me=hr(e,{placement:j,boundary:f,rootBoundary:s,altBoundary:d,padding:u}),ce=z?q?st:Je:q?at:Ke;E[ge]>w[ge]&&(ce=Zr(ce));var U=Zr(ce),ue=[];if(o&&ue.push(me[A]<=0),c&&ue.push(me[ce]<=0,me[U]<=0),ue.every(function(ke){return ke})){L=j,x=!1;break}S.set(j,ue)}if(x)for(var Me=h?3:1,M=function(Be){var Xe=b.find(function(Ot){var ut=S.get(Ot);if(ut)return ut.slice(0,Be).every(function(Le){return Le})});if(Xe)return L=Xe,"break"},le=Me;le>0;le--){var et=M(le);if(et==="break")break}e.placement!==L&&(e.modifiersData[r]._skip=!0,e.placement=L,e.reset=!0)}}const Ic={name:"flip",enabled:!0,phase:"main",fn:Q0,requiresIfExists:["offset"],data:{_skip:!1}};function Ds(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Is(t){return[Ke,st,at,Je].some(function(e){return t[e]>=0})}function Y0(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,l=hr(e,{elementContext:"reference"}),c=hr(e,{altBoundary:!0}),a=Ds(l,r),u=Ds(c,i,o),f=Is(a),s=Is(u);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:u,isReferenceHidden:f,hasPopperEscaped:s},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":s})}const K0={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Y0};function J0(t,e,n){var r=bt(t),i=[Je,Ke].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,l=o[0],c=o[1];return l=l||0,c=(c||0)*i,[Je,st].indexOf(r)>=0?{x:c,y:l}:{x:l,y:c}}function Z0(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=i===void 0?[0,0]:i,l=Ac.reduce(function(f,s){return f[s]=J0(s,e.rects,o),f},{}),c=l[e.placement],a=c.x,u=c.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=l}const $0={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Z0};function e1(t){var e=t.state,n=t.name;e.modifiersData[n]=Dc({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Bc={name:"popperOffsets",enabled:!0,phase:"read",fn:e1,data:{}};function t1(t){return t==="x"?"y":"x"}function n1(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=i===void 0?!0:i,l=n.altAxis,c=l===void 0?!1:l,a=n.boundary,u=n.rootBoundary,f=n.altBoundary,s=n.padding,d=n.tether,p=d===void 0?!0:d,h=n.tetherOffset,m=h===void 0?0:h,g=hr(e,{boundary:a,rootBoundary:u,padding:s,altBoundary:f}),v=bt(e.placement),y=On(e.placement),_=!y,b=Vo(v),E=t1(b),w=e.modifiersData.popperOffsets,S=e.rects.reference,x=e.rects.popper,L=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,I=typeof L=="number"?{mainAxis:L,altAxis:L}:Object.assign({mainAxis:0,altAxis:0},L),j=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(w){if(o){var q,z=b==="y"?Ke:Je,ge=b==="y"?at:st,me=b==="y"?"height":"width",ce=w[b],U=ce+g[z],ue=ce-g[ge],Me=p?-x[me]/2:0,M=y===wn?S[me]:x[me],le=y===wn?-x[me]:-S[me],et=e.elements.arrow,ke=p&&et?Go(et):{width:0,height:0},Be=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Tc(),Xe=Be[z],Ot=Be[ge],ut=rr(0,S[me],ke[me]),Le=_?S[me]/2-Me-ut-Xe-I.mainAxis:M-ut-Xe-I.mainAxis,on=_?-S[me]/2+Me+ut+Ot+I.mainAxis:le+ut+Ot+I.mainAxis,Ht=e.elements.arrow&&Er(e.elements.arrow),Oi=Ht?b==="y"?Ht.clientTop||0:Ht.clientLeft||0:0,Sr=(q=j==null?void 0:j[b])!=null?q:0,Mi=ce+Le-Sr-Oi,Di=ce+on-Sr,kr=rr(p?Ci(U,Mi):U,ce,p?Zt(ue,Di):ue);w[b]=kr,A[b]=kr-ce}if(c){var Tr,Ii=b==="x"?Ke:Je,Bi=b==="x"?at:st,Et=w[E],an=E==="y"?"height":"width",wr=Et+g[Ii],Rr=Et-g[Bi],Ln=[Ke,Je].indexOf(v)!==-1,Pr=(Tr=j==null?void 0:j[E])!=null?Tr:0,Or=Ln?wr:Et-S[an]-x[an]-Pr+I.altAxis,Mr=Ln?Et+S[an]+x[an]-Pr-I.altAxis:Rr,C=p&&Ln?O0(Or,Et,Mr):rr(p?Or:wr,Et,p?Mr:Rr);w[E]=C,A[E]=C-Et}e.modifiersData[r]=A}}const r1={name:"preventOverflow",enabled:!0,phase:"main",fn:n1,requiresIfExists:["offset"]};function i1(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function o1(t){return t===rt(t)||!ot(t)?Uo(t):i1(t)}function a1(t){var e=t.getBoundingClientRect(),n=Rn(e.width)/t.offsetWidth||1,r=Rn(e.height)/t.offsetHeight||1;return n!==1||r!==1}function s1(t,e,n){n===void 0&&(n=!1);var r=ot(e),i=ot(e)&&a1(e),o=zt(e),l=Pn(t,i,n),c={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(r||!r&&!n)&&((_t(e)!=="body"||Ho(o))&&(c=o1(e)),ot(e)?(a=Pn(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):o&&(a.x=zo(o))),{x:l.left+c.scrollLeft-a.x,y:l.top+c.scrollTop-a.y,width:l.width,height:l.height}}function l1(t){var e=new Map,n=new Set,r=[];t.forEach(function(o){e.set(o.name,o)});function i(o){n.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(c){if(!n.has(c)){var a=e.get(c);a&&i(a)}}),r.push(o)}return t.forEach(function(o){n.has(o.name)||i(o)}),r}function c1(t){var e=l1(t);return k0.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function u1(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function f1(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Bs={placement:"bottom",modifiers:[],strategy:"absolute"};function xs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function xc(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,o=i===void 0?Bs:i;return function(c,a,u){u===void 0&&(u=o);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},Bs,o),modifiersData:{},elements:{reference:c,popper:a},attributes:{},styles:{}},s=[],d=!1,p={state:f,setOptions:function(v){var y=typeof v=="function"?v(f.options):v;m(),f.options=Object.assign({},o,f.options,y),f.scrollParents={reference:tn(c)?ir(c):c.contextElement?ir(c.contextElement):[],popper:ir(a)};var _=c1(f1([].concat(r,f.options.modifiers)));return f.orderedModifiers=_.filter(function(b){return b.enabled}),h(),p.update()},forceUpdate:function(){if(!d){var v=f.elements,y=v.reference,_=v.popper;if(xs(y,_)){f.rects={reference:s1(y,Er(_),f.options.strategy==="fixed"),popper:Go(_)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(I){return f.modifiersData[I.name]=Object.assign({},I.data)});for(var b=0;b<f.orderedModifiers.length;b++){if(f.reset===!0){f.reset=!1,b=-1;continue}var E=f.orderedModifiers[b],w=E.fn,S=E.options,x=S===void 0?{}:S,L=E.name;typeof w=="function"&&(f=w({state:f,options:x,name:L,instance:p})||f)}}}},update:u1(function(){return new Promise(function(g){p.forceUpdate(),g(f)})}),destroy:function(){m(),d=!0}};if(!xs(c,a))return p;p.setOptions(u).then(function(g){!d&&u.onFirstUpdate&&u.onFirstUpdate(g)});function h(){f.orderedModifiers.forEach(function(g){var v=g.name,y=g.options,_=y===void 0?{}:y,b=g.effect;if(typeof b=="function"){var E=b({state:f,name:v,instance:p,options:_}),w=function(){};s.push(E||w)}})}function m(){s.forEach(function(g){return g()}),s=[]}return p}}var d1=[Oc,Bc,Pc,Ec],p1=xc({defaultModifiers:d1}),h1=[Oc,Bc,Pc,Ec,$0,Ic,r1,B0,K0],g1=xc({defaultModifiers:h1});function m1(t){let e=null,n,r,i=t;const o=()=>{n!==void 0&&r!==void 0&&(e=g1(n,r,i))},l=()=>{e!==null&&(e.destroy(),e=null)},c=f=>"subscribe"in f?(a(f),{}):(n=f,o(),{destroy(){l()}}),a=f=>{const s=f.subscribe(d=>{n===void 0?(n=d,o()):(Object.assign(n,d),e==null||e.update())});yt(s)};return[c,(f,s)=>(r=f,i={...t,...s},o(),{update(d){i={...t,...d},e==null||e.setOptions(i)},destroy(){l()}}),()=>e]}function Ls(t,e,n){const r=t.slice();return r[1]=e[n],r}function Fs(t){let e,n=t[1].label+"",r,i,o,l,c,a;return{c(){e=R("div"),r=Ge(n),i=K(),D(e,"class","popper-tooltip help-tooltip svelte-xhlzif")},m(u,f){O(u,e,f),B(e,r),B(e,i),l=!0,c||(a=F(t[1].popperContent(e)),c=!0)},p(u,f){(!l||f&1)&&n!==(n=u[1].label+"")&&Rt(r,n)},i(u){l||(nt(()=>{l&&(o||(o=Nt(e,en,{duration:300},!0)),o.run(1))}),l=!0)},o(u){o||(o=Nt(e,en,{duration:300},!1)),o.run(0),l=!1},d(u){u&&P(e),u&&o&&o.end(),c=!1,a()}}}function js(t){let e,n,r=t[1].visible&&Fs(t);return{c(){r&&r.c(),e=Ye()},m(i,o){r&&r.m(i,o),O(i,e,o),n=!0},p(i,o){i[1].visible?r?(r.p(i,o),o&1&&k(r,1)):(r=Fs(i),r.c(),k(r,1),r.m(e.parentNode,e)):r&&(lt(),T(r,1,1,()=>{r=null}),ct())},i(i){n||(k(r),n=!0)},o(i){T(r),n=!1},d(i){r&&r.d(i),i&&P(e)}}}function v1(t){let e,n,r=t[0],i=[];for(let l=0;l<r.length;l+=1)i[l]=js(Ls(t,r,l));const o=l=>T(i[l],1,1,()=>{i[l]=null});return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=Ye()},m(l,c){for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(l,c);O(l,e,c),n=!0},p(l,[c]){if(c&1){r=l[0];let a;for(a=0;a<r.length;a+=1){const u=Ls(l,r,a);i[a]?(i[a].p(u,c),k(i[a],1)):(i[a]=js(u),i[a].c(),k(i[a],1),i[a].m(e.parentNode,e))}for(lt(),a=r.length;a<i.length;a+=1)o(a);ct()}},i(l){if(!n){for(let c=0;c<r.length;c+=1)k(i[c]);n=!0}},o(l){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)T(i[c]);n=!1},d(l){kt(i,l),l&&P(e)}}}let Zn=Ae([]);const $r=(t,e,n=!0)=>{const{tooltip:r,showTooltip:i,showTooltipTimeout:o,hideTooltip:l,destroyTooltip:c}=y1(t,e);return n&&(t.addEventListener("pointerenter",o),t.addEventListener("pointerout",l),t.addEventListener("focusin",o),t.addEventListener("focusout",l),t.addEventListener("mousedown",l)),{tooltip:r,showTooltip:i,showTooltipTimeout:o,hideTooltip:l,destroyTooltip:c,destroy(){n&&(t.removeEventListener("pointerenter",i),t.removeEventListener("pointerout",l),t.removeEventListener("focusin",i),t.removeEventListener("focusout",l),t.removeEventListener("mousedown",l)),c()}}},y1=(t,e)=>{const[n,r]=m1({placement:e.placement||"top",strategy:"absolute",modifiers:[{name:"offset",options:{offset:[0,10]}}]});n(t);const i={label:e.label,visible:!1,popperContent:r};Zn.update(c=>(c.push(i),c));let o=null;const l=()=>{i.visible=!0,Zn.update(c=>c)};return{tooltip:i,showTooltip:l,showTooltipTimeout:()=>{o=setTimeout(l,e.timeout!=null?e.timeout:750)},hideTooltip:()=>{clearTimeout(o),i.visible=!1,t.blur(),Zn.update(c=>c)},destroyTooltip:()=>{clearTimeout(o),Zn.update(c=>c.filter(a=>a!=i))}}};function b1(t,e,n){let r;return Re(t,Zn,i=>n(0,r=i)),[r]}class _1 extends we{constructor(e){super(),Te(this,e,b1,v1,Se,{})}}function Ns(t,e,n){const r=t.slice();return r[8]=e[n],r}function Gs(t){let e,n,r,i;return{c(){e=R("p"),n=Ge("You Are: "),r=R("span"),i=Ge(t[3]),D(r,"class","font-bold"),D(e,"class","text-center p-2 text-white")},m(o,l){O(o,e,l),B(e,n),B(e,r),B(r,i)},p(o,l){l&8&&Rt(i,o[3])},d(o){o&&P(e)}}}function C1(t){let e,n,r,i,o,l=t[2]?"Disconnect":"Connect",c,a,u,f;return{c(){e=R("span"),n=Ge(t[0]),r=K(),i=R("button"),o=R("span"),c=Ge(l),D(e,"class","font-bold p-3 align-middle"),D(o,"class","whitespace-nowrap inline"),D(i,"class","btn btn-sm btn-error align-top")},m(s,d){O(s,e,d),B(e,n),O(s,r,d),O(s,i,d),B(i,o),B(o,c),u||(f=de(i,"click",t[7]),u=!0)},p(s,d){d&1&&Rt(n,s[0]),d&4&&l!==(l=s[2]?"Disconnect":"Connect")&&Rt(c,l)},i(s){a||nt(()=>{a=Ao(i,en,{}),a.start()})},o:fe,d(s){s&&P(e),s&&P(r),s&&P(i),u=!1,f()}}}function A1(t){let e,n,r,i,o=t[1],l=[];for(let a=0;a<o.length;a+=1)l[a]=Vs(Ns(t,o,a));const c=a=>T(l[a],1,1,()=>{l[a]=null});return{c(){e=R("h2"),e.textContent="Connect to a ROV:",n=K(),r=R("div");for(let a=0;a<l.length;a+=1)l[a].c();D(e,"class","text-center p-2 font-bold"),D(r,"class","flex flex-col align-stretch overflow-y-auto p-3")},m(a,u){O(a,e,u),O(a,n,u),O(a,r,u);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(r,null);i=!0},p(a,u){if(u&18){o=a[1];let f;for(f=0;f<o.length;f+=1){const s=Ns(a,o,f);l[f]?(l[f].p(s,u),k(l[f],1)):(l[f]=Vs(s),l[f].c(),k(l[f],1),l[f].m(r,null))}for(lt(),f=o.length;f<l.length;f+=1)c(f);ct()}},i(a){if(!i){for(let u=0;u<o.length;u+=1)k(l[u]);i=!0}},o(a){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)T(l[u]);i=!1},d(a){a&&P(e),a&&P(n),a&&P(r),kt(l,a)}}}function E1(t){let e;return{c(){e=R("h2"),e.textContent="Searching for online ROVs...",D(e,"class","text-center py-4 px-6 font-bold")},m(n,r){O(n,e,r)},p:fe,i:fe,o:fe,d(n){n&&P(e)}}}function Vs(t){let e,n=t[8]+"",r,i,o,l,c,a,u,f;o=new Jt({props:{theme:"solid",src:c0,class:"w-6 h-6 inline-block pointer-events-none"}});function s(){return t[6](t[8])}return{c(){e=R("button"),r=Ge(n),i=K(),se(o.$$.fragment),l=K(),D(e,"class","btn ring-white btn-primary align-top block m-1")},m(d,p){O(d,e,p),B(e,r),B(e,i),re(o,e,null),B(e,l),a=!0,u||(f=de(e,"click",s),u=!0)},p(d,p){t=d,(!a||p&2)&&n!==(n=t[8]+"")&&Rt(r,n)},i(d){a||(k(o.$$.fragment,d),c||nt(()=>{c=Ao(e,en,{}),c.start()}),a=!0)},o(d){T(o.$$.fragment,d),a=!1},d(d){d&&P(e),ie(o),u=!1,f()}}}function S1(t){let e,n,r,i,o,l,c,a,u=t[2]&&Gs(t);const f=[E1,A1,C1],s=[];function d(p,h){return p[1].length==0?0:p[2]?2:1}return i=d(t),o=s[i]=f[i](t),{c(){e=R("div"),u&&u.c(),n=K(),r=R("div"),o.c(),D(r,"class",l=`bg-base-100 m-0 items-center flex whitespace-nowrap text-center rounded-xl max-h-full  ${t[2]?"rounded-b-none":"flex-col"}`),mt(r,"p-2",t[2]),D(e,"id","rov_chooser"),D(e,"class",c=An(`absolute left-1/2 bottom-0  -translate-x-1/2 transition-all overflow-hidden z-50  ${t[2]?" ":"disconnected  top-0"} `)+" svelte-1simma4")},m(p,h){O(p,e,h),u&&u.m(e,null),B(e,n),B(e,r),s[i].m(r,null),a=!0},p(p,[h]){p[2]?u?u.p(p,h):(u=Gs(p),u.c(),u.m(e,n)):u&&(u.d(1),u=null);let m=i;i=d(p),i===m?s[i].p(p,h):(lt(),T(s[m],1,1,()=>{s[m]=null}),ct(),o=s[i],o?o.p(p,h):(o=s[i]=f[i](p),o.c()),k(o,1),o.m(r,null)),(!a||h&4&&l!==(l=`bg-base-100 m-0 items-center flex whitespace-nowrap text-center rounded-xl max-h-full  ${p[2]?"rounded-b-none":"flex-col"}`))&&D(r,"class",l),(!a||h&4)&&mt(r,"p-2",p[2]),(!a||h&4&&c!==(c=An(`absolute left-1/2 bottom-0  -translate-x-1/2 transition-all overflow-hidden z-50  ${p[2]?" ":"disconnected  top-0"} `)+" svelte-1simma4"))&&D(e,"class",c)},i(p){a||(k(o),a=!0)},o(p){T(o),a=!1},d(p){p&&P(e),u&&u.d(),s[i].d()}}}function k1(t,e,n){let r,i;Re(t,Cn,s=>n(3,i=s));let{selectedRov:o=""}=e,l=[];setInterval(()=>{l.push("rov-"+(Date.now()+1)),n(1,l)},2e3);function c(s){n(2,r=!0),n(0,o=s),Ie.connectToRov()}function a(){n(2,r=!1),Ie.disconnectFromRov()}const u=s=>c(s),f=()=>a();return t.$$set=s=>{"selectedRov"in s&&n(0,o=s.selectedRov)},n(2,r=!1),[o,l,r,i,c,a,u,f]}class T1 extends we{constructor(e){super(),Te(this,e,k1,S1,Se,{selectedRov:0})}}function w1(t){let e,n,r,i;return{c(){e=R("div"),n=R("div"),r=K(),i=R("div"),D(n,"class","line svelte-wxznj7"),D(i,"class","bg svelte-wxznj7"),D(i,"id","compassDiscImg"),Qo(i,"transform",`translateX(${t[0]}px)`),D(e,"class","compass bg-base-100 svelte-wxznj7")},m(o,l){O(o,e,l),B(e,n),B(e,r),B(e,i)},p(o,[l]){l&1&&Qo(i,"transform",`translateX(${o[0]}px)`)},i:fe,o:fe,d(o){o&&P(e)}}}function R1(t,e,n){let r;return Re(t,_c,i=>n(0,r=i)),[r]}class P1 extends we{constructor(e){super(),Te(this,e,R1,w1,Se,{})}}function Us(t){let e,n,r,i,o,l,c,a,u,f,s,d,p,h,m,g,v,y,_,b,E,w,S,x,L,I,j,A,q,z,ge,me,ce,U,ue,Me,M;return o=new Jt({props:{theme:"mini",src:f0,class:"h-12 pointer-events-none"}}),v=new Jt({props:{theme:"solid",src:p0,class:"h-12 pointer-events-none"}}),q=new Jt({props:{theme:"solid",src:l0,class:"h-12 pointer-events-none"}}),{c(){e=R("div"),n=R("div"),r=R("ul"),i=R("li"),se(o.$$.fragment),l=K(),c=R("li"),c.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Shutdown ROV</span>',a=K(),u=R("li"),u.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Reboot ROV</span>',f=K(),s=R("li"),s.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Restart ROV Services</span>',d=K(),p=R("div"),h=K(),m=R("ul"),g=R("li"),se(v.$$.fragment),y=K(),_=R("li"),_.innerHTML='<span class="btn btn-ghost svelte-16r1evb">System Status</span>',b=K(),E=R("li"),E.innerHTML='<span class="btn btn-ghost svelte-16r1evb">ROV Logs</span>',w=K(),S=R("li"),S.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Local Debug Links</span>',x=K(),L=R("div"),I=K(),j=R("ul"),A=R("li"),se(q.$$.fragment),z=K(),ge=R("li"),ge.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Enable ROV Wifi</span>',me=K(),ce=R("li"),ce.innerHTML='<span class="btn btn-ghost svelte-16r1evb">Disable ROV Wifi</span>',D(i,"aria-hidden","true"),D(c,"role","menuitem"),D(u,"role","menuitem"),D(s,"role","menuitem"),D(r,"class","menu inline-block menu-normal flex-1 svelte-16r1evb"),D(p,"class","divider md:divider-horizontal md:m-0"),D(g,"aria-hidden","true"),D(_,"role","menuitem"),D(E,"role","menuitem"),D(S,"role","menuitem"),D(m,"class","menu inline-block menu-normal flex-1 svelte-16r1evb"),D(L,"class","divider md:divider-horizontal md:m-0"),D(A,"aria-hidden","true"),D(ge,"role","menuitem"),D(ce,"role","menuitem"),D(j,"class","menu inline-block menu-normal flex-1 svelte-16r1evb"),D(n,"class","multi-menu card-body md:flex-row rounded-box svelte-16r1evb"),D(e,"class","mt-1 mb-24 m-auto w-full max-w-max card card-compact dropdown-content bg-base-100 shadow p-1 overflow-auto pointer-events-auto")},m(le,et){O(le,e,et),B(e,n),B(n,r),B(r,i),re(o,i,null),B(r,l),B(r,c),B(r,a),B(r,u),B(r,f),B(r,s),B(n,d),B(n,p),B(n,h),B(n,m),B(m,g),re(v,g,null),B(m,y),B(m,_),B(m,b),B(m,E),B(m,w),B(m,S),B(n,x),B(n,L),B(n,I),B(n,j),B(j,A),re(q,A,null),B(j,z),B(j,ge),B(j,me),B(j,ce),ue=!0,Me||(M=[de(c,"click",Ie.shutdownRov),de(c,"keypress",Mt(Ie.shutdownRov)),de(u,"click",Ie.rebootRov),de(u,"keypress",Mt(Ie.rebootRov)),de(s,"click",Ie.restartRovServices),de(s,"keypress",Mt(Ie.rebootRov)),de(_,"click",Ie.getRovStatusReport),de(_,"keypress",Mt(Ie.rebootRov)),de(E,"click",Ie.getRovLogs),de(E,"keypress",Mt(Ie.rebootRov)),de(S,"click",t[4]),de(S,"keypress",Mt(t[5])),de(ge,"click",Ie.enableRovWifi),de(ge,"keypress",Mt(Ie.rebootRov)),de(ce,"click",Ie.disableRovWifi),de(ce,"keypress",Mt(Ie.rebootRov))],Me=!0)},p:fe,i(le){ue||(k(o.$$.fragment,le),k(v.$$.fragment,le),k(q.$$.fragment,le),nt(()=>{ue&&(U||(U=Nt(e,gi,{},!0)),U.run(1))}),ue=!0)},o(le){T(o.$$.fragment,le),T(v.$$.fragment,le),T(q.$$.fragment,le),U||(U=Nt(e,gi,{},!1)),U.run(0),ue=!1},d(le){le&&P(e),ie(o),ie(v),ie(q),le&&U&&U.end(),Me=!1,Q(M)}}}function O1(t){let e,n,r,i,o,l,c,a,u,f,s,d,p,h,m,g,v,y,_,b;o=new Jt({props:{theme:"solid",src:u0,class:"w-6 h-6 pointer-events-none"}}),u=new P1({}),p=new Jt({props:{theme:"solid",src:d0,class:"w-6 h-6 pointer-events-none"}});let E=t[1]&&Us(t);return v=new Jt({props:{theme:"solid",src:t[2]?ks:Ts,class:"w-6 h-6 pointer-events-none"}}),{c(){e=R("div"),n=R("div"),r=R("div"),i=R("button"),se(o.$$.fragment),c=K(),a=R("div"),se(u.$$.fragment),f=K(),s=R("div"),d=R("button"),se(p.$$.fragment),h=K(),E&&E.c(),m=K(),g=R("button"),se(v.$$.fragment),D(i,"class","btn btn-ghost btn-square rounded-tl-none"),i.disabled=l=t[0]!=X.connected,D(r,"class","pr-3 justify-start flex-shrink"),D(a,"class","navbar-center flex-1 self-stretch"),D(d,"class","btn btn-square btn-ghost !rounded-tr-none"),D(s,"class","pl-3 justify-end flex-shrink"),D(n,"class","navbar rounded-t-none shadow-xl rounded-box h-9 p-0 min-h-0 lg:rounded-t-none bg-base-100 m-auto max-w-sm top-bar flex-none pointer-events-auto overflow-hidden svelte-16r1evb"),D(e,"class","px-1 absolute flex w-full flex-col max-h-screen pointer-events-none"),D(g,"class","btn btn-square bg-base-100 pointer-events-auto absolute -right-1 -top-1 rounded-none rounded-bl-2xl")},m(w,S){O(w,e,S),B(e,n),B(n,r),B(r,i),re(o,i,null),B(n,c),B(n,a),re(u,a,null),B(n,f),B(n,s),B(s,d),re(p,d,null),B(e,h),E&&E.m(e,null),O(w,m,S),O(w,g,S),re(v,g,null),y=!0,_||(b=[de(i,"click",t[3]),F($r.call(null,i,{label:"Menu",placement:"left"})),F($r.call(null,d,{label:"Hover or long-press buttons to show help",placement:"bottom",timeout:0})),de(g,"click",t[6]),F($r.call(null,g,{label:"Toggle Fullscreen",placement:"right"}))],_=!0)},p(w,[S]){(!y||S&1&&l!==(l=w[0]!=X.connected))&&(i.disabled=l),w[1]?E?(E.p(w,S),S&2&&k(E,1)):(E=Us(w),E.c(),k(E,1),E.m(e,null)):E&&(lt(),T(E,1,1,()=>{E=null}),ct());const x={};S&4&&(x.src=w[2]?ks:Ts),v.$set(x)},i(w){y||(k(o.$$.fragment,w),k(u.$$.fragment,w),k(p.$$.fragment,w),k(E),k(v.$$.fragment,w),y=!0)},o(w){T(o.$$.fragment,w),T(u.$$.fragment,w),T(p.$$.fragment,w),T(E),T(v.$$.fragment,w),y=!1},d(w){w&&P(e),ie(o),ie(u),ie(p),E&&E.d(),w&&P(m),w&&P(g),ie(v),_=!1,Q(b)}}}function M1(t,e,n){let r,i;Re(t,kn,f=>n(0,r=f)),Re(t,Po,f=>n(2,i=f));let o=!1;const l=()=>n(1,o=!o),c=()=>window.open("./404.html"),a=()=>window.open("./404.html"),u=f=>hf(f,null);return t.$$.update=()=>{t.$$.dirty&1&&r!=X.connected&&n(1,o=!1)},[r,o,i,l,c,a,u]}class D1 extends we{constructor(e){super(),Te(this,e,M1,O1,Se,{})}}const I1=`<svg width="100%" height="100%" viewBox="0 0 123 232" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd">
  <g id="left_side_of_controller">
    <path d="M112.977 140.769c-6 29.375-13.537 33.424-35.28 43.583-35.355 16.519-33.138 57.105-56.59 45.51-14.36-7.1-21.13-19.23-21.13-38.4 0-24.92 11.42-65.99 32.4-119.1 10.625-22.199 25.844-16.641 42.794-16.641 7.93 0 15.744-1.226 22.454 2.224 14.564 7.511 21.031 55.022 15.352 82.824Z"/>
    <g id="stick_button_left">
      <g id="stick_bg_left">
        <circle id="shadow10" cx="81.987" cy="176.33" r="26.46" style="fill-opacity:.5"/>
        <circle id="Oval5" cx="80.737" cy="175.09" r="25.21" style="fill:#6180b0;stroke:#000;stroke-width:2.49px"/>
      </g>
      <path d="M80.737 179.329v-8.477h25.442v-7.872l12.11 12.11-12.11 12.11v-7.871H80.737Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_right_direction_highlight"/>
      <path d="M76.499 175.09h8.477v25.442h7.872l-12.11 12.11-12.11-12.11h7.871V175.09Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_down_direction_highlight"/>
      <path d="M80.737 170.852v8.477H55.295v7.871l-12.11-12.11 12.11-12.11v7.872h25.442Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_left_direction_highlight"/>
      <path d="M84.976 175.09h-8.477v-25.442h-7.872l12.11-12.11 12.11 12.11h-7.871v25.442Z" style="fill:#ff00bf" class="direction_highlight" id="l_stick_up_direction_highlight"/>
      <g id="stick_left">
        <circle id="shadow11" cx="82.597" cy="176.96" r="17.12" style="fill-opacity:.5"/>
        <use xlink:href="#2a" x="48" y="143" width="65" height="65" class="gpad-highlight" id="stick_button_left_highlight"/>
        <g id="Group-6">
          <circle id="Oval-Copy" cx="80.737" cy="175.09" r="15.88" style="fill:#fff;stroke:#000;stroke-width:2.49px"/>
          <circle id="Oval-Copy-2" cx="80.737" cy="175.09" r="12.14" style="fill:#fff;stroke:#000;stroke-width:1.25px"/>
          <path d="M79.737 170.127a.402.402 0 0 0-.4-.4h-.725a.4.4 0 0 1-.32-.64l2.125-2.833a.4.4 0 0 1 .64 0l2.125 2.833a.4.4 0 0 1-.32.64h-.725a.402.402 0 0 0-.4.4v2.088a.402.402 0 0 0 .354.397c1.712.21 3.36.845 4.718 1.903a.4.4 0 0 0 .481.011l.619-.445a.399.399 0 0 1 .634.332l-.058 3.054a.4.4 0 0 1-.519.374l-2.916-.91a.402.402 0 0 1-.114-.707l.125-.091a.398.398 0 0 0-.018-.662 7.939 7.939 0 0 0-2.845-1.046.4.4 0 0 0-.459.394c-.002 1.15-.002 4.148-.002 5.234a.4.4 0 0 0 .4.4h.725a.4.4 0 0 1 .32.64l-2.125 2.833a.398.398 0 0 1-.64 0l-2.125-2.833a.4.4 0 0 1 .32-.64h.725a.4.4 0 0 0 .4-.4v-5.21a.4.4 0 0 0-.467-.395 8.156 8.156 0 0 0-2.818 1.075.398.398 0 0 0-.024.654c.045.036.093.072.141.108a.4.4 0 0 1-.127.704l-2.93.861a.399.399 0 0 1-.513-.383l-.006-3.054a.4.4 0 0 1 .639-.322l.604.451a.4.4 0 0 0 .486-.005c1.357-1.045 2.985-1.681 4.666-1.909a.4.4 0 0 0 .348-.396l.001-2.105Z"/>
        </g>
      </g>
    </g>
    <g id="select_button">
      <use xlink:href="#2b" x="78" y="118" width="43" height="39" class="gpad-highlight" id="select_button_highlight"/>
      <path id="select" d="M105.267 133.325a7.506 7.506 0 0 1 2.496 5.595 7.507 7.507 0 0 1-2.496 5.596H95.213a7.507 7.507 0 0 1-2.496-5.596c0-2.22.964-4.217 2.496-5.595h10.054Z" style="fill:#9a9a9a;fill-opacity:.5"/>
      <path id="select1" d="M104.162 132.138a7.506 7.506 0 0 1 2.496 5.595 7.507 7.507 0 0 1-2.496 5.596H94.108a7.507 7.507 0 0 1-2.496-5.596c0-2.22.964-4.217 2.496-5.595h10.054Z" style="fill:#fff;stroke:#000;stroke-width:1.35px"/>
      <text x="96.295" y="141.267" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:9.858px">?</text>
    </g>
    <g id="d_pad">
      <path d="M86.434 71.626c.913 0 1.659.746 1.659 1.659v18.212h18.212c.913 0 1.66.747 1.66 1.659v14.893c0 .913-.747 1.66-1.66 1.66H88.093v18.211c0 .913-.746 1.66-1.659 1.66H71.541c-.911 0-1.66-.749-1.66-1.66v-18.211H51.67c-.911 0-1.66-.749-1.66-1.66V93.156c0-.902.747-1.659 1.66-1.659h18.211V73.285c0-.902.747-1.659 1.66-1.659h14.893Z" style="fill:#9a9a9a;fill-opacity:.5" id="shadow14"/>
      <use xlink:href="#2c" x="53" y="54" width="48" height="53" class="gpad-highlight" id="d_pad_up_highlight"/>
      <use xlink:href="#2d" x="53" y="91" width="48" height="52" class="gpad-highlight" id="d_pad_down_highlight"/>
      <use xlink:href="#2e" x="70" y="75" width="52" height="48" class="gpad-highlight" id="d_pad_right_highlight"/>
      <use xlink:href="#2f" x="33" y="75" width="52" height="48" class="gpad-highlight" id="d_pad_left_highlight"/>
      <path d="M84.774 69.966c.913 0 1.66.747 1.66 1.66v18.211h18.222c.902 0 1.659.747 1.659 1.66V106.4c0 .903-.757 1.66-1.659 1.66H86.434v18.211c0 .903-.747 1.66-1.66 1.66H69.892c-.911 0-1.66-.749-1.66-1.66v-18.222H50.01c-.91 0-1.659-.749-1.659-1.659V91.497c0-.913.747-1.66 1.659-1.66h18.212V71.626c0-.913.747-1.66 1.659-1.66h14.893Z" style="fill:#fff;stroke:#000;stroke-width:1.66px;stroke-linejoin:round"/>
      <path d="m91.827 94.401 9.095 4.542-9.105 4.564V94.39l.01.011Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_right"/>
      <path d="m62.839 103.496-9.106-4.553 9.106-4.553v9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_left"/>
      <path d="m81.881 113.432-4.553 9.106-4.553-9.106h9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_down"/>
      <path d="m72.775 84.455 4.563-9.106 4.543 9.106h-9.106Z" style="fill:none;stroke:#000;stroke-width:1.66px;stroke-linejoin:round" id="d_pad_up"/>
      <path id="center_icon" d="M71.374 99.114c0-.817.672-1.49 1.49-1.49h8.939c.817 0 1.49.673 1.49 1.49v3.642c0 .817-.673 1.49-1.49 1.49h-8.939c-.818 0-1.49-.673-1.49-1.49v-3.642Zm1.071 1.382v2.389c0 .268.219.485.49.485h8.83a.49.49 0 0 0 .491-.485v-1.742l-1.452-1.437a.497.497 0 0 0-.694 0l-1.249 1.236.308.305c.099.091.156.22.156.355a.491.491 0 0 1-.85.331l-3.394-3.36a.497.497 0 0 0-.694 0l-1.942 1.923Zm5.55-2.209a.662.662 0 1 1 .001 1.323.662.662 0 0 1-.001-1.323Zm-5.131-1.656-.082.001c.21-.594.775-.995 1.406-.994h6.29c.649 0 1.202.415 1.406.994l-.081-.001h-8.939Zm1.242-1.985.082-.002h6.29c.028 0 .055 0 .082.002a1.493 1.493 0 0 0-1.406-.995h-3.642c-.63 0-1.196.4-1.406.995Z"/>
    </g>
    <g id="shoulder_trigger_back_left">
      <g class="direction_highlight" id="shoulder_trigger_back_left_direction_highlight">
        <path d="M110.415 51.254 98.146 34.763h24.538l-12.269 16.491Z" style="fill:#ff00bf"/>
        <path d="M97.161 17.167c2.534 0 13.254.512 13.218 21" style="fill:none;stroke:#ff00bf;stroke-width:8.5px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"/>
      </g>
      <path id="shadow4" d="M54.417 40.591h37.84c1.52 0 2.77-.618 2.77-1.36a.695.695 0 0 0-.07-.309l-10.9-23.604c-.7-1.545-3.53-2.648-6.75-2.648h-11.8c-7.66 0-13.86 3.05-13.86 6.811v19.761c0 .741 1.25 1.36 2.77 1.36v-.011Z" style="fill-opacity:.5"/>
      <use xlink:href="#2g" x="32" y="3" width="76" height="56" transform="translate(0 -4.346)" class="gpad-highlight" id="shoulder_trigger_back_left_highlight"/>
      <path id="bg" d="M51.957 38.16c-.38 0-.73-.072-.98-.196-.25-.124-.4-.288-.4-.484V17.719c0-1.69 1.4-3.225 3.65-4.327a20.546 20.546 0 0 1 8.83-1.803h11.79c1.26 0 2.48.206 3.46.597.98.392 1.67.928 1.95 1.525l10.9 23.625c.03.34-.13.515-.38.628-.26.134-.6.206-.98.206h-37.84v-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.2px"/>
      <path d="m74.228 32.999-.217-.942a.766.766 0 0 0-1.493.343l.9 3.914 3.914-.9a.766.766 0 0 0-.343-1.493l-1.606.369c.66-1.61.965-3.317.85-5.04a.766.766 0 0 0-1.529.101 9.59 9.59 0 0 1-.476 3.648Zm-9.227-13.535a2.177 2.177 0 1 1 4.168-.327.93.93 0 0 1 .191.118l2.594 2.023a.986.986 0 0 1-1.213 1.555l-2.594-2.023a1.04 1.04 0 0 1-.16-.158 2.16 2.16 0 0 1-1.678.093l-3.292 3.361.048.141.046.179c.021.101.036.205.043.312v.269c-.006.101-.019.2-.038.297l-.055.216a1.959 1.959 0 0 1-.044.129l3.292 3.361a2.16 2.16 0 0 1 1.678.093.957.957 0 0 1 .16-.158l2.594-2.023a.986.986 0 0 1 1.213 1.555L69.36 30.5a.97.97 0 0 1-.191.117 2.179 2.179 0 1 1-4.308.516 2.184 2.184 0 0 1 .14-.842l-3.291-3.362-.006.002a2.14 2.14 0 0 1-.356.093l-.131.018-.236.013-.171-.007-.188-.023a2.142 2.142 0 0 1-.447-.125l-.232-.108-.19-.117-.204-.158-.153-.147-.147-.173-.081-.113-.129-.221-.084-.186a2.661 2.661 0 0 1-.035-.095h-2.107v1.616a.704.704 0 1 1-1.408 0v-4.641a.704.704 0 1 1 1.408 0v1.616h2.107l.084-.209.08-.155.124-.195.144-.181.089-.095.125-.115.144-.113.065-.045.274-.156a2.182 2.182 0 0 1 .737-.2l.313-.006.24.027c.128.021.251.053.371.095l3.291-3.361Zm1.228 10.811.04-.038a1.127 1.127 0 1 1-.04.038Zm-4.929-6.48a1.13 1.13 0 0 0-1.401.76l-.032.141-.014.181.016.195.03.128a1.13 1.13 0 0 0 1.396.761l.113-.04c.411-.168.7-.572.7-1.044l-.002-.072a1.13 1.13 0 0 0-.698-.972l-.108-.038Zm12.928-7.039a9.59 9.59 0 0 1 .476 3.648.766.766 0 0 0 1.529.101c.115-1.723-.19-3.43-.85-5.04l1.606.369a.766.766 0 0 0 .343-1.493l-3.914-.901-.9 3.915a.765.765 0 1 0 1.493.343l.217-.942Zm-7.959 2.762a1.128 1.128 0 1 0-.04-.039l.04.039Z"/>
    </g>
    <g id="shoulder_button_front_left">
      <path id="shadow5" d="M94.279 44.584H54.287c-2.643 0-4.818 2.591-4.818 5.74v6.9c.004 1.258.875 2.29 1.931 2.29h45.767c1.059 0 1.93-1.038 1.93-2.3v-6.88c0-3.149-2.175-5.74-4.818-5.74v-.01Z" style="fill-opacity:.5"/>
      <use xlink:href="#2h" x="30" y="31" width="86" height="41" class="gpad-highlight" id="shoulder_button_front_left_highlight"/>
      <path id="bg1" d="M92.769 44.934h.017c2.109 0 3.844 2.067 3.844 4.58v6.92c0 .625-.433 1.14-.957 1.14H49.897c-.529 0-.965-.519-.965-1.15v-6.9c0-2.513 1.735-4.58 3.844-4.58h39.993v-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.12px"/>
      <text x="70.61" y="54.634" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:15px">-</text>
    </g>
    <g id="l_touch_targets" opacity="0">
      <path id="stick_button_left_touch_target" d="M103.497 149.101c7.227 6.337 11.792 15.634 11.792 25.989 0 19.069-15.482 34.551-34.552 34.551-19.069 0-34.551-15.482-34.551-34.551 0-19.07 15.482-34.552 34.551-34.552 2.258 0 4.466.217 6.601.631 1.548 5.051 6.247 8.728 11.797 8.728 1.535 0 3.005-.281 4.362-.796Z" style="fill:#419bf3"/>
      <path id="select_button_touch_target" d="M93.558 126.53a12.266 12.266 0 0 1 5.577-1.333c6.809 0 12.336 5.534 12.336 12.35s-5.527 12.35-12.336 12.35-12.337-5.534-12.337-12.35c0-1.681.336-3.284.945-4.744a18.743 18.743 0 0 0 5.815-6.273Z" style="fill:#419bf3"/>
      <path id="d_pad_left_touch_target" d="M57.9 116.925c-10.093-.218-18.219-8.48-18.219-18.625 0-10.281 8.346-18.628 18.628-18.628.14 0 .279.002.419.005l18.205 18.204v.01L57.9 116.925Z" style="fill:#419bf3"/>
      <path id="d_pad_down_touch_target" d="m57.9 116.925 19.042-19.043 19.033 19.042c.004.14.006.279.006.419 0 10.282-8.348 18.629-18.629 18.629-10.282 0-19.452-8.765-19.452-19.047Z" style="fill:#419bf3"/>
      <path id="d_pad_up_touch_target" d="M67.141 63.678h20.421c4.962 3.261 8.277 8.827 8.413 15.17L76.942 97.882l-.009-.001-18.205-18.204c-.004-.14-.005-.279-.005-.419 0-6.512 3.349-12.249 8.418-15.58Z" style="fill:#419bf3"/>
      <path id="d_pad_right_touch_target" d="m76.942 97.882 19.033-19.034c10.281 0 19.048 9.171 19.048 19.452 0 10.282-8.348 18.629-18.629 18.629-.14 0-.279-.002-.419-.005L76.942 97.882Z" style="fill:#419bf3"/>
      <path id="shoulder_button_front_left_touch_target" d="M99.096 41.101H47.503c-2.766 0-5.009 2.197-5.009 4.908v15.706c0 1.077.905 1.963 2.004 1.963h57.603c1.099 0 2.004-.886 2.004-1.963V46.009c0-2.711-2.243-4.908-5.009-4.908Z" style="fill:#419bf3"/>
      <path id="shoulder_trigger_back_left_touch_target" d="M47.697 41.101h52.635c1.521 0 2.816-1.579 2.065-2.955-2.77-5.082-14.508-29.61-14.508-29.61-.743-1.517-3.545-2.595-6.742-2.595H58.788c-7.657 0-13.864 3.027-13.864 6.761v27.047c0 .741 1.252 1.352 2.773 1.352Z" style="fill:#419bf3"/>
    </g>
  </g>
  <defs>
    <image id="2a" width="65" height="65" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABBCAYAAACO98lFAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHVUlEQVR4nO1b2XLjOAyEnawzmUxm9mF+Ll84P5eXzX1rX9R2q9UAacXeo2pQhaJsyyLRBEAQoCJ+U6yO3cHVcF31wb8N1XN+rX6Wv3+GDg6CEXqVXLvPQ8f1wQE5GAgi/Iralfmu6nugdjDfcXsQQD4NAgmfCb6m79w9TApAxXz/p8BYDIKZeeU1teuoAcmE/2i0/J/FQCwCQWY/E/wkdgDoZwUCpIJ+RMR7cs33TjRjXzD2AiFRfSf4CfEpXfM9CgTPPgRWfpPfGJCJqewDRDcIjdlXoStWDQE5AN4a/B5TDVkERBcICQCs5izkHyNvpMVvuJ+1gUFgAF6JX+RawXCa0QVEE4QEAFZtFXwTEWcjb6hlMAACgGBTUABeRn4e+YVaAMNAvIc4zxYQJQgFAGAV/ovhM2LcD7NQTWAteCF+MsygODC6gTitQCgAwGzyrH+JiPOI+Dq2zApECwTWAAj9SLwZ28zJxvic7bOvhutVBkQKgokD1AfwzEP4rxFxMTI+n9N9bBIsAIMAO4faMwD3MQdyLc9R+qDnW7J/FDNQ4aH+EP58FPrbyBfUAoweEODUMhDuie9G5u8eY2cmMA82jSEiBqcNlTm4ZRAgQP0x85ej4N/HFp9bILR8AoPAPkafEfQMx1vf4MxiBkLDDDIAvgs7ELBKYJlsgfAaO+f3GFOfwv93ALggivuZUKYJLhaAZz+LnQ/ArH+PiB8jA4hvsfML0IJNzE0hixPgHJ9juszy/0P+68LrWRCl2tBjDuuYrwbsBy5H4f8kEKAJcIwQgqNGFzazENAGaE/lUF2kmQZQIdowAWE0hSwiZFNgENgMGISL2K0MmUME8+BUG3oAYNBcJAkwuC8PApFziKwF8AfQBJgErlULsiUt20WC3X6DVxNeUl2IrXuMLRBsEg6EbEUACOwUsSxexnSJhC9QZ1htpVUbPuh+5z8yJ1pFkuvYOcm5TyBTyIBgTWBtUGYNYC1o5RIYiHUCAoPk4gkXVmeOeEtLNUEjRF4FeL9Q+QFHmCHdrkN4sGoAYomHmC/HzpdMNIGXGR4IO0V1jNAGjhg1NNaVwM2oCuoY/9Gdqu5XdBwZCJP+EROpJlQD0G2y2yXqdtl2boDXMTBhojAZ78k4dOfauyKVq4NLmigQbneone4DgI6BgRhkLFn+QnMXThMn4ziNmMUHVe7glDrQIIYB4I6dUPuQbubURJndmHg81h9lPsFtnnQWeBDaoVtplpBqg45HweCxuQnRcW0fnHXOJqEdaxY5iwGWCu/G4sbVGlO2Kk3GpSC4DhWMjDPhDwGEjqd3TOqXus1BB5517B5+aC1okY7N9d8cRwbC/5UWgZ+BoGXxfQqkQ5id2pFor6JtRgqCCuCyNRW7zg8FiEuZVXXLtESnVGmCE94lLcoszgFIn9Ma01vUEzQbmwMhE5737e46A8MJsi9l2tiqV2ZF28mY1hHb6oyzbdeRqw06MPa2zUL4bFJeC66AmFCPJrjSWFUT1PzeUiBckoXzCK5OWY1HD3ZsyW2gVAu0LMZJDG6fY7qF5nUbYHO+oEf4TCN1LDoOl1VKtUFBcB5YkXe1Qc0ouw0Lg9EiTaCw+nONksfwFL4K5Uw0InbVqGwrrabANQDuHJkczihzzM5CnYwt5/laAGAM7IdU+AdigPBkQHBARPBAxTmqCjotuDeMgWAwmLXsMIXz9u6QhuYRIXTWP7Sh0oQttXwCA4GBcElMK0PsC0Ke00q5u5WAfYCCfyfMILBfqFasFAQFwiU1HyKvDPEzGEg1lSyR6lYBgP8wCnwbETfEt+Gr06lTTMtwv1Y/h6vhWoVgTeAMkzuMxQKxWmsZTvOOFfCqBbcCAj7fxdQc1Cfg2TOqapGo1mBASGI8xTTL5CpDqsqupL5PQRbaB9W/iYi/Rr6h7wFCtjyiny4QcKMCAdWsKkPOo6OyzOajOcjM/GAKUHc1BTaHh5g7xdIULAijSTihNHHhhMhmkeOIpYc02CECCDUFtypMTqqovBYEEUqBeI25QwOp/2BbZhCqMwZVXIIl0a0KrAXOF2yF7z6uQ9rAzgpm8TrexiDoHkM9egWC9pNFhi420CAJS2PXxglUpqI6zitofZKLtb2lscqhsk+Ac3yMeVDmAjPd1qdnGXvOMbKTzH6vljWtUbp4gUFwTtUd5tQNE+8auwGIaGhChD3VmhVruQSmJTp3rLfn4BYD8WyuOafhEjsR4Y/t7QVCAwitVbqS2Ea+1/AZ5OIE1iz2E5o44VcAOChqAtANQgJEVglypTqefY4RqjDbpfSyM0k2rXfQo/6gxjsPzkyyFz9aYbPbUb4bThO8R3npA1S8+8RVKYDBbVa2Y9JUGgPCbZZB3hsACLGIirfgtETXKtsxue20u7bCRyx7GexT9cLGu5A97MgJyMLrPRHxL70SyFSAgTa7VhpMm11HxH/k5VClBJDq2tFMWLk+6KvCRy2fFy+L94IwoWO9NP5PnCGYUfUm/THfjv9NBf0N6UGHaHzqzbQAAAAASUVORK5CYII="/>
    <image id="2b" width="43" height="39" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAnCAYAAACWn7G7AAAACXBIWXMAAA7EAAAOxAGVKw4bAAADoklEQVRYhdWZ3XbaMBCExxQSCm2v8nJ5wrxc7hrCT0joBRo8HkayKTetztkjY2T0abzeXQvgP2rdPRc/n15vuv6lezrdM9/kySpgty72CvaWBYxOZpCd9a3jBHeq9ADGwauwDUg1hOMxODXYcRM4wgpogpxVjn1xNcCvyufLomrAV7AG6pDJHFqbQyVLC4jA87SCBuQ3s5n0Duygn8X0mIZy/rLI59Nr58AD2KCqQs5LvyjHcznnwAqrcMdgXQ04KZhAOSlBCLgA8GD9QhbjsAr6IXawzx8YKn/xY1XX3cBvPyEI9wDg0YzQhJ0JrIPui81LX/NxXfClJZ8lrKq6KGBLAN+LLYspMN1BYY84K7kHsCtG9/G7cBXa1HdryrqvPhSwVbF16QlOYMJ26F2Aiu4AvNuiUqTQ8wN156SXVSosXUBV/SFG6GWBpWIoEx8L7A7AVsbMZIxHB57TWN3DBmXpBuqvVHYN4KfYWtRdmLJ8mLblewflYmjHApxi9k1u8FigVjir+kuAV+hdwWH3shCqRfc4iGk00bsco0GKsUldAqvCa/SuoG5AWILwlh/QP2yMJBqvo7IzP9FQV4Edeo3eh92naXwgGUGoNkFTFgSAjjkguYEDc8WatTTuauylssxKFOOIs8KaSGrZr1bBVWsDH5ySRaoVaLz2qzI2FUC1krSawbTV6koP3MmmjPM5Rt8YWrA6ocdCFiEaduboowBKzyedY3ldqgPSIppxNtWfDsfUyaxEPz2VMeqzmhD49O9lERpbFXoAnNKtDkqgmt81G2lMZSrt5Fqm2TcAm3K8FWgHdujJynohQkiFIugSOYPxug2A3w1gugbnVgGbsKosb70GcIYkfs906rBc6LYAbnBW+A29a4y5Q4RlHcmB6gJ7DMMOTDktZLRE1EKG7rARo7qEHXeDl+7pVLJETVl9DyMoVeND5qqrG/GB3Iq9o3/gkrLAiBtwACdK+wRepzKLadrk7xBWo8gO15HBX2viW27y2Rqwnqeq/h6Wqn8HTqZuEF0AsPwrRbgXMlobaG6vVUyE1fcwTySeKLiwC3DzVVwmAa5fi9WXGfy9YvIqTtXldQrvbwieyQZtyo6MFh1exPjOTGuTQ+0znBvE17QjM2WvK+1z1Xr9TS9ofKuounUE5O2jCBuAE3iKFGkfQIHHKrQqaBPWgB261aeWqqmrWPrX+7Pawq732OfUqrXr1N3vSbDabv0fodbu/X/hn29/AAo2VaYa5XYBAAAAAElFTkSuQmCC"/>
    <image id="2c" width="48" height="53" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA1CAYAAAAHz2g0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEw0lEQVRoge1ay3LbMAxc2c6zSU/5uX5hfq7HJo7t2OqhXGu1Akgp8UybmXIGI1mWCCxeBCEBX3x0l5zsR/9z9nzP3VN/CZ6zGTaE+4wiUiBzQFYZB0J3M86XDBewz/7LwISMTfAuOEbXqnPOELSvnAOIQawajCjsqtBaaFPoSug6+H2dXL+S5znXWnithH8HxG48uSA36cMrjIH4uVNtuJZ7ACc5nux3bzSyxIhZRXhqPzq6xhAcM8Ep5LFxTEFsAg258O426j68Hpm9BYCaPhZ6lyPPO/lf5ziPCAAZq+YjfydFQDIAmfCHIvSh0L781mdPMt/UhYr7uNtQcAbdTaFrOXoQasyQBxmqb1PbFJi0kyMB0SLqUnjunvqaC6n2KfwtgLtyvDVAbgkH4D5PzVPYt0Jre0YDW90zjQFg6j4EcAfgXohgbjB2J89OketQuxScSlglwiuIswttgGb2oQsRwLdCD+VIEHQnWiED4K6zBfBa+FAOve8d09g6j6UuRAs8APhuIOhKfCYCoBlnXzRP63FR7TEOaMbAezDnBIBaIosBAngUusdgBQY05+Bw36ffq/CnIuiuEC0apWg4ABde44DLf2SFR4ytQADKUC1A7e/wx31UeALTmPK5VN5qFuowXsAiEIyFBwyxQMYRALoCAWwEGAPa03O2SALIs5ACURAszDSlalYiALpFBmBX5gTGWteU7MWdr/DNGMhKCq0oyVTXBwVAxsxAmlW6co3C+6JY1TxH5kIKwuNBXcpLZi2dIwDUKMrvPaZliS6IUYU7y4VaVakXeFrb1yygeV6fy4pCz/2z1gG9ObJGVGJHwByAW2Jtz9VcZpELZUBq8VEjXfqz/1s80jEHQAZmCS19dvZo7Yn/+fEfwN8eXx7A0iDm8C5BjT5y/0UBLGGuOyeOLvhvCdgPA/AJsibUEeMNN6/xfgVwrDwTAYzkmAXABc+E9l7OAUMez4o53WFpD8gBZZZpAshMqUyU+R7D/la3hVp6qAVYPvO5rHUSWQN23rRApHFtPnHr9ybC877WfoDdCAejVoksMRoOQG/yJpRvB7UdssZgJVajmQV0Q78t5GAia7g7hQCAMeJoI07ht0V4ap7WWbInfgXwUohA2KE7CO80MymAKHDVb1Xzrxh3E44YNunaScgAaE/oVyGC2GJoK6ornVuKKm/kQpp1nCGFp4ZVeG8xZgBcIS8BCI0LtYIruupC3kVjn0aF57Zwi6EVottB7wtFc7IzF7kSreAL5DgGnrunvrQXI/+nz2r3mf97K6TVG82sQBAkBrRaIEqp1TQaaUv3tEcM2ve+aK297n1PTwzMSG6BZhC78J0wUoGYz9WtXPiwEYtxbEXvB3ZCTKe+JgDuQia8g2BTlde1Nc7umm7mo62kr+6e4XyB1BU6WwvOk59H8pbGXzMp8frSd2RuCa+rDnZtEsS1l3zqr35d/Td7SxkJXwORValRTaRzxEwaLzuixpNnnEz4CERU6Wal9dl99D1xaz/AoUy0xsnaIXMBKBAFk9Hkc4OQUeVbicg6Ps+cvo6XBBEY+DH6VqLKLAGi5/783KaUCxLV+6N7Fn2t4qPyrdCiLlpjhAK2vhn6lABLvtBqjUt9wfXlxm/KDCtMj03mWAAAAABJRU5ErkJggg=="/>
    <image id="2d" width="48" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA0CAYAAADMk7uRAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEkklEQVRoge1ay3LbMAxcp3bzcnvqz+UL+3O5tY3t2I57CDdergBISjLT8Uw5g6EsiyQWDxKABFx4W7x34MPp8d1js/Zz8eM0d8wkJhJmPx0AgAGAMVAlE8b4wvrqemo7BdfRvRRIuGjBuBKC62yNaHFn+CSE4DoEMVg0YF7pqvjt80WAXLoRvRT/DUAsg0V0cWXyqqBIM1lzCb8kpP+9jX04PS4URLeQSF8lTPpipPci7VQAnPmj9E4KaKCJSAPOPJlcJqSAFIjOF9m5Mn8IiHwc29hOEzo5gIH0lXkyugLw1fqVAXGT8qY2TgkfAOyFnu33Hr02Oi24BtxBKd0VgGujr9JnIDhnJXkyvWvEOYDEkaVPTcg1QKnfALi1niBWGJqTamGM+Y3MsQjGqPbezHKKDyxxlvYtgDsA962/MxDqExkAmgOZ3zZS5v3ZI3rr6DVg9s+eGqCtE8A9gHUjAiGISAsKwO2ekn9CL/nIuY9tztFzINqBqIGbxvAawLdG6wbMtaBmRPuNpH/dxizkmUP7n+QCSU0ocmL6gAK4b8x/b71qgQ6dAXDpr0SyCi4TRre7KYAohJgK4h5nLXBr1TNBbZoAto1JMk+pq0/4zubCHmyjzny0ExGEOvS6XRMApaoaUADPOPvLS7tHjegcszQADLUwBQSB0IwyAJTyHmcTO+FsTrodZwfjqA8o81VIQSYJhoBucLZdXZwaOMh/aL/1QIxO9jJQzEwoA6LB3Ao9EPYVADJFh3WmXfJVWJICUMZ57SG1AllKr3FTBEC3yiwgrCQ/AJIByIAoiAyQMqMAXBORpCczPhWAA4kmnkJznw93nI8AGAP0WQBmNz8cLq79B/Cv28UDmOvEWb2moo+M+xQAY8xkdR22xchzUSErWnc2gGgyLzhl9Rw/8DQWiuo+Xv/pqg8VkAzAWB1H0709+iiTDGcAtIyi6aKCc804XyWAqvRX1XI0RGb+mgHYoU8Znw3MmGmlACo7V+lx0R1esyeV/AF1PnCQcVsD41rRYlbYKhPyLMrrOFvEOe2UlJKp41OjjYEhkMycysKWS96LUGScqd9Ve46ZlQNg87l2jfnfAP60a2qFIMZ8ogOQ2b5LbYM+adG0UMuMEQCaIoWxacw7iB36umjq0JUPZNL3ChptmmkhkxuNMr0uFJnRrwaC5kTHTkvsEQAgNh/aPbMnzawoSa+PRgAioWzQa8K1QBDhwbYEXsvUrbyYmQ/rOOqUR7mv9aCpxd29jKdpqkNHzjz5HIg04DUelaAXdmn7DkDn1SocS+tb9Nur+sCoE3MRj130bQmfoenorqPmVQGITMnPFj8X3JHfQHRpXDMjjWO8qLWy65X87wl6BSA6Y/x090Ot00L1joyLvST3OCnDh6yCFuW4WRSrsVAWG+VOHCzC5i/WdCusXrVWCXoWjntkmtp++poVCF+1qllFdaG51YUs0o3Cdb33NrYEEICIwIyVRTIQUWjsGokoZL5aaOx7Cb9XzlU0D86igC00HWcsbMFnNnN/Zy0KjyPtAKg/uZkstZkfOI058Wh7z8dPF9n+Akw5M9cvVTL/AAAAAElFTkSuQmCC"/>
    <image id="2e" width="52" height="48" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAwCAYAAABe6Vn9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEqUlEQVRogd2a3VLjMAyFT0qh/C1XvBxPyMtxudAW0nYv8GmOFclWYHd2Bs9o8m/7i2RbUgL8sDIsufnp9LLo/r9VnofHU/bebgcdiN7xd4vtfHXcgws7Y0CG5DbTRqtDp+Q2BJt1pAESCcx+rw2vI9phu2/lfL8HtQ464UGsgq0HGMF4QB7AMdhWUE+nl8FCVQ2KdiyIyoVzboWctrIgh7JP0eOZxhTK05CFIcC67FPWmMNFmuoB2c5bGWSrYLNyBnLGDmHY+TWAS7OlEExNMQOkmlGAEcBHkRHTSzrIs4Psz4EExJoaAS4BXAHYlC2PLZRqqgekJqYg70a0vuZYikxOYdYCsgFwXYTHERTrimDU1AhDgH2RHWqNe+NtELiuhi5Qa+YGwG3ZUiyUN0lYGKAeNwqzK7KVeuw4O5ZrqqmpsTJ+KBwzBLkuELcA7ozcYtIWoXQ8tTSk2qGZEeQNwKsjO3xq7r08o7MfnofH01c0dAfgF4D7IoTiuOJE0gLSscNxsy8wfDGD3KMTxEfrhbWmbR1Dl6XTBLoH8FDA7sr5a0yznzU7D8iOnR0+XxqfP2E+tqwFzIqnIUiHaH5XmMxPtfSASUs3mGZD1ZA3hjxz25ZnCUOQPWLtq8xmObvSe1A6MaimCKQNR2bhAe1Qa8ZqTde9pvZ7JqdAOpaoKU4W95hmvCVAHBM6Zgi4kfq0zqZHEpmcB8UJwgMjHE1zCRAXTh7vUS/e6nJ5MFX9GW/bQlnPgbKRfZpGC+ggnaSZ7aVugnhLQRiHRSbXg7L+nQXMaEg9ilHqinxE6yemx5CCWCjrgVvPW497QDzv1WE9eDsJhH5iy+QUJhMnRTFS5Pqcks96bYelBxTBWclcz9aVrcMtq/4t3ZJOMSXq+XZdWQ1FCYue/Ou6FgNFWRjrynsC9NchK/Za1P5ioAyIjftHTDMUkFuHxiJah02Q2KwP0IDygDIg7MiHEcJwnekBqXPK8MBCehmfEKqlIW1cQTQu0ZD5Qu4fE0Dq+uxFCMd2ohSWC2WB9IaWVjTmp2cAuSfjKaiGGKky/FYw1pmCUqDI1Gw2hiCMLglzwDx8QACkmR6+IIbdb6Vu1ZiaoQflAtkG7VvUN6lhAmHekQ/wbOqK4fcrgN8CRm2p+SnUrEQm540b1Yx2+lCuaQieySl4ITi1RCjVFKHClLAHBMw1pKa2xeR4ApNmliRJ7MxpkyRvqLW0RZ3lsWZXFU9D3szGN6hjQ+1f46BeGssbozaNRfOLzC5cYM8NltxcKzmiYTejVM3JeWFy1UYAZLVE06Z2KJwB3UkiSgV7Da0whcm8R7VmTe07qWA7k+qWIHZdqkp2DOm1I2oT0YlgyScVbzZV70OT9TznwYTrEMxN6mDqubFAaOIv+vLQ0lALSsVziapJwf3g9Tw8nuQbkQKNpmH1BqIPXi0YDyjyF72PX19aWFmO5rw25n3kysC0oDwwL8QIve1Zw8F3Vi9R0gJZAuRBachwdM6dn29+NA6gIjh7rVlno9jB7XkArlfgfdYPG1/440WzrmTxZi0PFsCCHy9sSfwak6onWWwnZ53+8q8xXvkfPy8t+XHpR5Y/ZaguuvoNjWEAAAAASUVORK5CYII="/>
    <image id="2f" width="52" height="48" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAwCAYAAABe6Vn9AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEqElEQVRogd2ay3LbMAxFIT/qxE26ys/lC/Nz2bV1/IisLsprXV0BJNRkughnMPRDgngEkAQgmX2x1i05+Hl4XXT8Z7WX7mnIHtscoAPR+v7RpoOffG/BhYMRkC7ZZ/VHgxqSfQjmXpBguI/E5HPrGt5AvIFHcjvOg5oNQmBYVkHvAYb6HSgP4hr0MziFmlwwgFmJrJ3fGK4G4oGpXIv0wecq1Ma5iMKsqd+UHp8VMLJUBIMeA8XAezN7L31fdPc2BVM9UyBnEcBgMXjItgj/5kGxrgjEs8p7kYv0nehwFwW1kOdqDPHNkQyU1xgGdx8AFzM7F1mXXm+ClXOH5+G1g9tFLsfzBUA7M7srsqOeLcZQ0FWDgZsxzNnMTmZ2JH16DgQ3LpxD3vzZ2F9L3JnZfZF96QG1s9FSGSupdRjmWAQ3qLO5a+o8mgBg/kB4zsASgPhuZg+l3xPYzkb3w13NAME6bJk3MzuY2W8z+1X6Q5G3Anu2ca7d4F66p6FmIV4QYCGGeiSw+3LMls5rAfHcYTfDjenkOMyt6g2rLdvqcrDWvsA8mtmPAuVZKQvE1jnY6Lb6v87TFBAOiBYFdr1Hkn2BZStFexLPB7gNXG1brjvYOK9ONl8kvAhltspFUQIv2zynGApWAtDG8kCXMljcCMAAYmdT6zDUrLVcji3lQQHswUa3w8Ait2AgzAu42UCAvC3oXhdGJJHL6Txi18MGy/sS4DCPMkB90XW20WVgGejJwEz0exZiOLWWBwYBIAaRAbrYaJm+wOhGnbJMDUjjMAXS+G4rkrUQz4N30uXFiOkcLLKQdyLnQRyBaxTOkXgNCG7m6dC0JJ2e1FyOYTJ5UitHUqAhea537bC1gCK4mgtE/y/Rl9Uxa6v2Ic2WLjEl9HxYV9ZCtaJFq6DxWbpSsC0grbREYbwnZu2NtSUK0gSLgDIgvQjiMrhxZh/COapLiyIKl07BcbBe3APhdBnhy7qcd10AhGgatQMPsGaxJhBftFbA4Lz/ZKNlEHRmgXA+BDoBGJWw3KZASu/B8AA4IeNBZmM5jraRjR4JTK3mWWoCx0DqnzUYDABhTkeD42jbKkCcPiAfQrrtgcH9qitfNIc0RdZqzIFgrBx7so8leEeb1hFgsZNN3Q+WSi0K3iKgd5HTbLOxJsApOIcv3g3DTVDLHwrQT4Fi9wtLwh4QX5Tdja2DAWNQKD1p0TEKJBmI5xFbCZaC+8H1eC6lXE4txCsacnoMEP/DBZE+aIpcA/IKJVzGgpXU7XhvmrTbxUptrlUxvRfRQqOX87eA+MZxofGN4PBdV7+btaJSsLfCIatE49+RYWKByGaW0UrKloIL4vMMwlOcWeW4TKQbIldrPqtYD92wRGajDYF4L9LasQfkZZmZzFKvA70aVnEfwrgPvF66p4GeEUVA7O/6wItT5RoM62sFvhrX4b/FGyuaPimDwpWNc0v3nGyG6UXzHlgrpZi02YUrD421UKK/qb6MhfizB6apw1WOrz80DqAiOP09C6JNg0wvAvC+5x7roy188aKqK9m8PCfql714wS3xakxKT7LpIGeD/udXY6L2v19gWvLi0pdsfwDrTzKXc+jmowAAAABJRU5ErkJggg=="/>
    <image id="2g" width="76" height="56" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAA4CAYAAABXJB78AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGn0lEQVR4nO2c21LjSBBE0zYwHhhmX/bn+ML9OV6XGTCL5wGllU5ltSSDL0RsRXRIsmypdZRVXX2BBQ6wh+3jwj5ajGx9Px23bFsc63YbzuOfxd/+2w/ZnEo7KIXi++kzv98hwBxQOvbPPxXapEoHUA5jiX1QfpygHQpMy1uxTfA+BdxopQVWAkA4Xha2z2O9zqT7YwhL4Wj5z44dIICPQ7uqThSqqgCtuuL7DjEpDsjgPCZVkFheZZ/ngH1wH7b4hk1VwFA1KytXXVnJVov+vnLRylxZDollY8cKT1X3IZWVChPjQ/LBFcy1bK/lWIsqz6EhbIFaXQSgkDYAXqRsunts7Bq8/vZh+7g4FNoAmKnL3Y4QrgHcyPabHSu8ltKAoWsmWAqMyiKoZym/u62rltd8s+PZtnfhEODV/RQUIa1ty0JoqjKNa61YVgFTV1RYvwH8ksJjQqQK1UUPds3kkim4ExaBrAF8t7KWQqhJZZXCKlUkddH9COeb3Gtp10jphl5/llUxTKFRJVTVdwC3XbmTrYKjym7QBtZqKStgqq5fAJ7sPgv7nacZy+46OCSW7YCNuCNdkcq6A/DDikKjEt0tk0vS5gKjutbdfRSW52baWu41AFMgqbnCUsBXd1zjXVE/ANwD+NkVQrtFrzIN/p6XTUktHBhbRwWm6lrK9z030zRjKd+ZrbJWDGMqkYDd4R3UX9iHRpW5wsYC/lRgrjDeY2nf9bSDOZoq7SCVJYW5S2rryPhFl7xHD+0e+8CosKkpRWXeSjLoV8ry/EyBEdoS0lrOUdlYK+nAGPTvunIv5Sd6lySwsdg1BxgV9ophkFdlpfzM0wsG/9kt5hUQx7c8YVVgDPzaUtId79C3ktrMt3IvhGN/CI9jvK7D0txMy3N37hq9yhby+8k2xSWTyqi0VBjw2ToqMGAfzhyFEYymJ8AwtikwTWYJ7Qq9e+/ysoft46REVoGltz4GbW0l5V9V33GOKTRVlsYtz/yf0L9EBcZ4tkIf/CerbBk+S+Nd2o/0znYq3vn2/mQaGkolfcf7s/riCOhWiifTnubsXmYITQNr5WGpi6TDNz4qkTraKaP3e7VM377ur9C7qCbVz6i7bApMYxmD/ySlJYVpZVvgWspJY1+toN8yd2etCxukqlFyaBouYsgYU1nLJb2CDi1l7mMjqx+xKV235J4JWiuhbtqYwvx4rACfC6mql6usFdNSHKsapVGVtYBp5Vpx6BhqatVH7+sNkrvlVJWt7NqljQFLFT4VnCn1GFOZw9JeiELT8AKgVtlcYJdgVQMwBiy1mD4aPCqGrwhMjQ9XJdeem6UWM+VlALLKviqwlO60eiNJaaqyyS3mVwWmlhoATWbHgLW6cQP76sAODf4p+48qc7f86sDUpuZlSWUpxfg0l0yrY85R1LTldGg+slL1L8s4piqbslQgVXTsYXTM/BT5mgKs4lk18awd8pfudzrAuNcpbwHzN+mTotUqGr0ZcDxg1Qy5jm5U4HTrs/Qb+e0bzCpgaXjYZ2/SCppX9G+E4+anUpgOKOrypgpcGsOr5h+aCqvcLkHSaSzKWYeSTwHM66v1TODSgKivbxukF5xZcmB+c1eUT2FxRobZMrrvpbH8Y1uaXdKZIp73vM231UjMFpgWw1rLjDh+zhu9dee9f3Zsq1TGenIsfzD5gZmDnJVLJlgbDCcZqCxW8kU+a+YzR7KkMs6ScyLEZ8G9cVsU+wD2gSV3rFTFNQ3qhi/o5yMndTOOZD6HyRfNl8xpN50NT8uhorViWLWe4Ql9oFRl6XzkuYHpC2cco2f8i/25ypbiBvAql1RY+pZ80RorpAtD0mz3KSylQmnFD5X21B3rXKUuiYpKuwLely526X+KXwqMyoFU5hm9i5ZjSye2VlhRaFzaOdk9W4kr3Y2BU4dwWRG6Ykr+zjmMnV68p0O6lKByTcCgtVpJfTv68FqBm+6GVaYMnAcaH9LX9qvSfIXPC4ZryAbQdsA6t9QbsgP9ahXRuDBnSeYprZWAew9F15Gl4D+qMN5o0PHEEJguHUiB/pwzS1N6Lakkhe1W9rT6ktz3v9nhzVLf69yu6OZpUjWAUC0ebivMWktguBaUAKulApeiLprHoGp4qvoruIHFh5r4J39V38uvec6g758lcNvieHcdXWhXPkz4izaHkiBdgqoq81CThrH83GBVYvMBiz9Z1v1LUNMcc2i+vwcnLeGc9ICN1SyXDmjMBkDG1rke/MBTljdeun32fxz434L9AZ7ptX/DaxeNAAAAAElFTkSuQmCC"/>
    <image id="2h" width="86" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFYAAAApCAYAAACvIt7jAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEmklEQVRoge2bzVLbQBCEW8YGgiG58HI8IS/HMeBfrBy0Y/W2ZlaKqyivEqZqSrKx1t6Pdmt2JAPf8SXRXHLQS/t20XFzjNfmub3kuMmAHJhjj+caCjJ7PBX0KAwB2jhb7++Tx79yRBDHtqOAw4k7QBliE6SOOSewLXKAUWbHRYDdiRNU3i7QA1wEW++4mqME8hRsFbILd6lPCFTORcob2rfHCnfMIq4dnlIV4mfanuSx/V3HySKbcACVAXIuaZ+Bl6yhplC1KsBj2rc8Ygj8rFxV7UCxKRgqw1ylY2xr+/waDy6Pe83wTlYK1SAeARxou0j7HGflvrRvDcM9g3XUyko1gCsAt04aZA8uR01g1QIM6oFyn/Imbb3P79qCKlY9kqHeArgDcJ/yjvIWvYrHVFtLqFpZpTvKLfrzSCPHtum58ZMXhjawRAfOgD4A+EFpkFm5pvbawbIFGNQ9OqCblCaWRo4bwGU7iBTL3mpg79BBXVM+pDTlqmoXzvjXDLUCBstQt+jnY1C9E5xlA1HuEjj7q+exbAP36BS6BvAE4DHlOj3PluCBvTZUC64G2AbMArbolOpB5ZOb7S8wwQo8xTJYU+wTgJ/oAT+gtwS1Ax67hlCwbANmAe/o5wDndau0b3YHeIqV4IogUuwjOqi/0naNHizbQa21LPsjn7TYAkyJahO36CuFwYrzpX3Da/PcMlhvpcUe66nWlPuI3g4MLCu2JrCRYvfwobLvWkbVT6jYUg3L5ZZVBKZeO5HNWbF7dJ+7Qe+7O3Tz/IBfUnL1k0Vp5aVLWV4gcD1roLXs8qqCmkIVy35qfmvzUaiuDfDgpTrWg7uUXAVpYGutY1mx9jkNsjcXXVmO9kM8K9B9D3Qpoz5trTF1bl4HDwjmtyz90Qlt9p6C/PzLca8RuqTlDBvbEuH8Io8d+wBWIHOpwsU0e1CtYfOyQt8aLtyEsXkqdB1jEEt6AZcLpXaavak1KTbIyxNeec0BLK+8uKTaIYfNq62sF+uFp1gPKjcobMmnNd8BeSOmdn/VliEvad/RlVgb9JBLcCd1t7x2mgfV4BlUr4atHSyQfxttjh8AfqMHzAo+0DGhDzNYbfx6PcoNelWCXrNF3oCZE1hdfe3RwXxHDneDoXJDS1DFMlzuqO+Q13S8OuGloNZ6tYc3V1atwWXVRmBHr3mVbICLaf7q6OWZ2k9cFp7PavtQFbuH77UA0EaN7ugaEC9PuePD3SBdQ88NLFufNl7sasIWuc9OUqxXah0x7N5wg4IvJmpjAqgbrjdfrs3Nb3eSXn3re+xr89zSVVp7kyYdzHD4K8NrafZVbf7WGgrWvol60uZFg9a0JxnnHJ4V2PYkz9sbHzFsTER9gtpjbEHECuYcrWOzydO1L68xoXfC6O1Gk5oTFUYEVwGfZL94N0xUFVjof8UGv6jjU2noV9nmWWoy8WsGUAEHQHCnoQKMvvZzAqrhea6KynsewASwQHhvLO/r43CsmYWnXg84v8a9jTOEUbg13muGF8eaWWhbMHqueFf3JBjBjzn+FZBjMYA35XcIF8P5X345c+mvZr7ji+IPPk7IumiDX5AAAAAASUVORK5CYII="/>
  </defs>
</svg>
`,B1=`<svg width="100%" height="100%" viewBox="0 0 123 232" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="fill-rule:evenodd;clip-rule:evenodd">
  <g id="right_side_of_controller">
    <path d="M10.5 140.855c6 29.375 13.537 33.424 35.28 43.583 35.355 16.519 33.138 57.105 56.59 45.51 14.36-7.1 21.13-19.23 21.13-38.4 0-24.92-11.42-65.99-32.4-119.1-10.625-22.2-25.844-16.642-42.794-16.642-7.93 0-15.744-1.225-22.454 2.225-14.564 7.511-21.031 55.022-15.352 82.824Z"/>
    <g id="stick_button_right">
      <g id="stick_bg_right">
        <circle id="shadow12" cx="42.54" cy="176.272" r="26.46" style="fill-opacity:.5"/>
        <circle id="Oval6" cx="41.3" cy="175.022" r="25.21" style="fill:#6180b0;stroke:#000;stroke-width:2.49px"/>
      </g>
      <path d="M41.215 179.291v-8.477h25.442v-7.872l12.11 12.11-12.11 12.11v-7.871H41.215Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_right_direction_highlight"/>
      <path d="M36.977 175.052h8.477v25.442h7.871l-12.11 12.11-12.11-12.11h7.872v-25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_down_direction_highlight"/>
      <path d="M41.216 170.814v8.477H15.774v7.871l-12.11-12.11 12.11-12.11v7.872h25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_left_direction_highlight"/>
      <path d="M45.454 175.052h-8.477V149.61h-7.872l12.11-12.11 12.11 12.11h-7.871v25.442Z" style="fill:#ff00bf" class="direction_highlight" id="r_stick_up_direction_highlight"/>
      <g id="stick_right">
        <circle id="shadow13" cx="43.16" cy="176.892" r="17.12" style="fill-opacity:.5"/>
        <use xlink:href="#4a" x="161" y="142" width="65" height="66" transform="translate(-152)" class="gpad-highlight" id="stick_button_right_highlight"/>
        <g id="Group-61">
          <circle id="Oval-Copy1" cx="41.3" cy="175.022" r="15.88" style="fill:#fff;stroke:#000;stroke-width:2.49px"/>
          <circle id="Oval-Copy-21" cx="41.3" cy="175.022" r="12.14" style="fill:#fff;stroke:#000;stroke-width:1.25px"/>
          <path d="M39.689 175a.318.318 0 0 0 .317-.353l-.282-2.586a.318.318 0 0 0-.317-.284h-2.102a.32.32 0 0 1-.239-.53l3.995-4.543a.317.317 0 0 1 .478 0l3.995 4.543a.32.32 0 0 1-.239.53h-2.102c-.163 0-.3.122-.317.284l-.282 2.586a.318.318 0 0 0 .317.353h3.433a.32.32 0 0 0 .319-.319v-.968a.318.318 0 0 1 .51-.255l3.05 2.287a.32.32 0 0 1 0 .51l-3.05 2.287a.318.318 0 0 1-.51-.255v-.968a.32.32 0 0 0-.319-.319h-3.721a.32.32 0 0 0-.317.284l-.386 3.542a.318.318 0 0 0 .317.353h.029a.318.318 0 0 1 .233.537l-.966 1.034a.318.318 0 0 1-.466 0 972.66 972.66 0 0 1-.966-1.034.318.318 0 0 1 .233-.537h.029a.318.318 0 0 0 .317-.353l-.386-3.542a.32.32 0 0 0-.317-.284h-3.721a.32.32 0 0 0-.319.319v.968a.318.318 0 0 1-.51.255l-3.05-2.287a.32.32 0 0 1 0-.51l3.05-2.287a.318.318 0 0 1 .51.255v.968a.32.32 0 0 0 .319.319h3.433Z"/>
        </g>
      </g>
    </g>
    <g id="start_button">
      <path id="start" d="M30.051 132.744a8.497 8.497 0 0 1 2.825 6.334 8.495 8.495 0 0 1-2.825 6.333H18.67a8.495 8.495 0 0 1-2.825-6.333 8.497 8.497 0 0 1 2.825-6.334h11.381Z" style="fill:#9a9a9a;fill-opacity:.5"/>
      <use xlink:href="#4b" x="152" y="117" width="46" height="41" transform="translate(-152)" class="gpad-highlight" id="start_button_highlight"/>
      <path id="start1" d="M28.85 131.196a8.494 8.494 0 0 1 2.826 6.333 8.496 8.496 0 0 1-2.826 6.333H17.47a8.495 8.495 0 0 1-2.825-6.333 8.493 8.493 0 0 1 2.825-6.333h11.38Z" style="fill:#fff;stroke:#000;stroke-width:1.35px"/>
      <path id="Playstation_Btn_Icon" d="m20.832 134.571 5.982 2.961-5.975 2.955v-5.916h-.007Z" style="stroke:#000;stroke-width:1.1px;stroke-linejoin:round"/>
    </g>
    <g id="button_1">
      <g id="Group">
        <circle id="shadow" cx="45.85" cy="121.855" r="11.806" style="fill:#00ff04;fill-opacity:.5"/>
        <use xlink:href="#4c" x="171" y="95" width="52" height="52" transform="translate(-152)" class="gpad-highlight" id="button_1_highlight"/>
        <circle id="Oval" cx="44.99" cy="121.007" r="10.945" style="fill:#00ff04;stroke:#000;stroke-width:1.72px"/>
      </g>
      <g id="Playstation_Btn_Icon1">
        <path id="Line" d="m41.345 117.35 7.72 7.731" style="fill:none;stroke:#000;stroke-width:1.72px;stroke-linecap:round;stroke-linejoin:round"/>
        <path id="Line-Copy" d="m41.345 125.081 7.72-7.731" style="fill:none;stroke:#000;stroke-width:1.72px;stroke-linecap:round;stroke-linejoin:round"/>
      </g>
    </g>
    <g id="button_2">
      <g id="Group1">
        <circle id="shadow1" cx="66.7" cy="101.005" r="11.806" style="fill:#ff0009;fill-opacity:.5"/>
        <use xlink:href="#4d" x="192" y="74" width="52" height="52" transform="translate(-152)" class="gpad-highlight" id="button_2_highlight"/>
        <circle id="Oval1" cx="65.851" cy="100.145" r="10.945" style="fill:#ff0009;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path d="M60.941 95.78c-.898 0-1.637.739-1.637 1.637v5.456c0 .898.739 1.637 1.637 1.637h5.456c.898 0 1.637-.739 1.637-1.637v-5.456c0-.898-.739-1.637-1.637-1.637h-5.456Zm11.457.546a.548.548 0 0 0-.931-.386l-2.182 2.183a.542.542 0 0 0-.16.385v3.274c0 .145.057.284.16.386l2.182 2.182c.103.102.241.16.386.16a.548.548 0 0 0 .545-.546v-7.638Zm-8.746.911a2.905 2.905 0 0 1 2.898 2.908 2.906 2.906 0 0 1-2.898 2.909 2.905 2.905 0 0 1-2.897-2.909 2.904 2.904 0 0 1 2.897-2.908Zm0 1.212c.933 0 1.69.76 1.69 1.696 0 .936-.757 1.696-1.69 1.696-.932 0-1.689-.76-1.689-1.696 0-.936.757-1.696 1.689-1.696Z"/>
    </g>
    <g id="button_3">
      <g id="Group2">
        <circle id="shadow2" cx="25" cy="101.005" r="11.806" style="fill:#48c0fb;fill-opacity:.5"/>
        <use xlink:href="#4e" x="151" y="74" width="51" height="52" transform="translate(-152)" class="gpad-highlight" id="button_3_highlight"/>
        <circle id="Oval3" cx="24.14" cy="100.145" r="10.945" style="fill:#48c0fb;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path d="M17.592 98.69c0-.798.657-1.455 1.455-1.455h.677c.486 0 .941-.243 1.21-.647l.591-.888c.27-.404.725-.647 1.211-.647h2.808c.486 0 .941.243 1.21.647l.591.888c.27.404.725.647 1.211.647h.676c.798 0 1.455.657 1.455 1.455v5.093c0 .798-.657 1.455-1.455 1.455H19.047a1.462 1.462 0 0 1-1.455-1.455V98.69Zm9.821 2.183a3.288 3.288 0 0 1-3.273 3.273 3.289 3.289 0 0 1-3.274-3.273 3.29 3.29 0 0 1 3.274-3.274 3.289 3.289 0 0 1 3.273 3.274Zm-3.273 2.182a2.192 2.192 0 0 0 2.182-2.182 2.193 2.193 0 0 0-2.182-2.183 2.193 2.193 0 0 0-2.183 2.183c0 1.197.985 2.182 2.183 2.182Z"/>
    </g>
    <g id="button_4">
      <g id="Group3">
        <circle id="shadow3" cx="45.85" cy="80.155" r="11.806" style="fill:#fff000;fill-opacity:.5"/>
        <use xlink:href="#4f" x="173" y="56" width="48" height="47" transform="translate(-152)" class="gpad-highlight" id="button_4_highlight"/>
        <circle id="Oval4" cx="44.99" cy="79.295" r="10.945" style="fill:#fff000;stroke:#000;stroke-width:1.72px"/>
      </g>
      <path id="Light_Icon" d="M44.99 72.753c.336 0 .613.277.613.613v1.227a.616.616 0 0 1-.613.613.616.616 0 0 1-.614-.613v-1.227c0-.336.277-.613.614-.613Zm0 10.631c.336 0 .613.277.613.613v1.227a.616.616 0 0 1-.613.613.617.617 0 0 1-.614-.613v-1.227c0-.336.277-.613.614-.613Zm0-6.542a2.465 2.465 0 0 0-2.454 2.453 2.465 2.465 0 0 0 2.454 2.453 2.464 2.464 0 0 0 2.453-2.453 2.464 2.464 0 0 0-2.453-2.453Zm4.626-1.305a.616.616 0 0 0 .195-.449.616.616 0 0 0-.613-.613.616.616 0 0 0-.449.195l-.868.867a.615.615 0 0 0-.164.418c0 .336.277.613.613.613a.615.615 0 0 0 .418-.164l.867-.867h.001Zm-7.518 7.517a.612.612 0 0 0-.418-1.062c-.17 0-.333.07-.449.195l-.866.867a.612.612 0 0 0 .866.866l.867-.866Zm9.434-3.759a.617.617 0 0 1-.614.614h-1.226a.616.616 0 0 1-.613-.614c0-.336.276-.613.613-.613h1.226c.337 0 .614.277.614.613Zm-10.631 0a.617.617 0 0 1-.613.614h-1.227a.617.617 0 0 1-.613-.614c0-.336.277-.613.613-.613h1.227c.336 0 .613.277.613.613Zm7.847 4.626a.614.614 0 0 0 .867-.867l-.867-.867a.616.616 0 1 0-.867.867l.867.866v.001Zm-7.517-7.517a.617.617 0 0 0 1.032-.449.612.612 0 0 0-.165-.418l-.867-.867a.611.611 0 0 0-.441-.187.613.613 0 0 0-.426 1.054l.867.867Z" style="fill-rule:nonzero"/>
    </g>
    <g id="shoulder_trigger_back_right">
      <g class="direction_highlight" id="shoulder_trigger_back_right_direction_highlight">
        <path d="m12.269 51.254 12.27-16.491H0l12.269 16.491Z" style="fill:#ff00bf"/>
        <path d="M25.523 17.167c-2.534 0-13.254.512-13.218 21" style="fill:none;stroke:#ff00bf;stroke-width:8.5px;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5"/>
      </g>
      <path id="shadow6" d="M70.5 39.658H32.67c-1.52 0-2.78-.6-2.78-1.32 0-.1.03-.2.07-.3l10.9-22.92c.71-1.5 3.53-2.57 6.76-2.57h11.8c7.65 0 13.86 2.96 13.86 6.61v19.18c0 .72-1.25 1.32-2.78 1.32Z" style="fill-opacity:.5"/>
      <use xlink:href="#4g" x="165" y="3" width="76" height="55" transform="translate(-152 -4.306)" class="gpad-highlight" id="shoulder_trigger_back_right_highlight"/>
      <path id="bg" d="M31.21 37.298c-.37 0-.72-.06-.98-.19-.25-.12-.4-.28-.4-.47l10.92-23.07c.28-.58.97-1.1 1.95-1.48.99-.37 2.2-.58 3.46-.58h11.8c3.44 0 6.56.67 8.82 1.75 2.34 1.11 3.66 2.63 3.65 4.2v19.18c0 .19-.15.35-.4.47-.26.13-.62.2-.98.2H31.2l.01-.01Z" style="fill:#fff;stroke:#000;stroke-width:2.17px"/>
      <path d="M60.102 31.312a10.054 10.054 0 0 1-1.374 2.86.681.681 0 0 0 1.122.769c.892-1.302 1.505-2.722 1.785-4.195l1.075 1.05a.68.68 0 1 0 .95-.974l-2.551-2.49-2.489 2.551a.68.68 0 1 0 .973.95l.509-.521Zm-8.281-11.708a1.932 1.932 0 1 1 3.698-.289.862.862 0 0 1 .17.104l2.302 1.795a.876.876 0 0 1-1.077 1.38l-2.301-1.796a.82.82 0 0 1-.143-.139 1.924 1.924 0 0 1-1.489.082l-2.921 2.983a1.183 1.183 0 0 1 .043.125c.011.038.022.076.031.115l.01.043c.019.09.031.183.037.277l.002.022.001.037a.508.508 0 0 1 .001.039v.026l-.001.071v.006l-.002.038a1.91 1.91 0 0 1-.034.263l-.014.066-.025.096-.004.012a1.515 1.515 0 0 1-.045.132l2.921 2.983a1.939 1.939 0 0 1 1.489.082.898.898 0 0 1 .143-.139l2.301-1.796a.875.875 0 0 1 1.077 1.38l-2.302 1.795a.862.862 0 0 1-.17.104 1.933 1.933 0 0 1-1.828 2.326 1.932 1.932 0 0 1-1.87-2.615L48.9 26.229l-.005.002a1.954 1.954 0 0 1-.339.085c-.026.005-.053.008-.079.011l-.014.002c-.035.004-.07.006-.105.008l-.018.001-.012.001-.048.001h-.027l-.074-.001-.013-.001-.015-.001a13.143 13.143 0 0 1-.119-.01l-.013-.001-.063-.009-.021-.003a1.881 1.881 0 0 1-.54-.175l-.011-.005-.02-.011-.011-.005-.01-.006-.01-.005-.046-.026-.018-.01-.007-.005c-.03-.018-.06-.036-.089-.056l-.009-.007a1.622 1.622 0 0 1-.141-.106l-.013-.01-.027-.024a1.461 1.461 0 0 1-.128-.122l-.008-.009-.039-.042-.005-.006-.028-.033-.027-.032-.007-.009-.012-.015-.012-.016-.029-.038-.005-.008-.032-.045-.006-.01a1.934 1.934 0 0 1-.076-.123l-.024-.044a.773.773 0 0 1-.015-.029l-.038-.079-.005-.011-.004-.011-.004-.008-.015-.035-.004-.011-.004-.009c-.011-.028-.022-.056-.031-.085h-1.87v1.434a.625.625 0 0 1-1.25 0v-4.118a.625.625 0 0 1 1.25 0v1.434h1.87a1.351 1.351 0 0 1 .05-.132l.005-.011.019-.043.034-.069.005-.01.006-.01.003-.007.023-.041a1.82 1.82 0 0 1 .095-.151l.006-.01.009-.012.023-.032.009-.012.007-.009a.106.106 0 0 0 .009-.011l.006-.008.009-.012.028-.034.036-.042.001-.001.063-.067.008-.009.008-.008.076-.072.026-.023.009-.007c.041-.035.083-.068.126-.099l.002-.002.047-.033.01-.006a2.03 2.03 0 0 1 .201-.118l.011-.005.021-.01.011-.005a1.924 1.924 0 0 1 .654-.178l.012-.001.058-.004.015-.001.015-.001h.022l.038-.001h.05l.012.001h.025l.012.001.018.001.032.002.012.001.024.002c.045.004.09.009.133.016l.012.002c.113.019.223.048.329.085l2.921-2.983Zm1.089 9.594.036-.034a1.002 1.002 0 1 1-.036.034Zm-4.373-5.75a1.002 1.002 0 0 0-1.269.783l-.003.016c-.006.04-.01.081-.012.122v.013l-.001.026c0 .054.005.107.013.158l.001.007.001.008c.007.037.015.073.026.109l.001.004a1.002 1.002 0 0 0 1.238.675l.007-.001.012-.004.011-.004a.142.142 0 0 0 .022-.007l.013-.005.009-.003a1.001 1.001 0 0 0 .648-.937l-.002-.064a1.002 1.002 0 0 0-.619-.862l-.027-.011-.009-.003-.013-.005-.01-.003-.012-.004-.009-.003-.016-.005Zm11.565-5.943-.509-.522a.681.681 0 0 0-.962-.012.681.681 0 0 0-.011.962l2.489 2.551 2.551-2.49a.68.68 0 0 0-.95-.974l-1.075 1.05c-.28-1.472-.893-2.893-1.785-4.195a.68.68 0 0 0-1.122.769 10.047 10.047 0 0 1 1.374 2.861Zm-7.156 2.147a1.002 1.002 0 1 0-.036-.034l.036.034Z"/>
    </g>
    <g id="shoulder_button_front_right">
      <path id="shadow7" d="M32.192 43.878h39.986c2.643 0 4.817 2.645 4.817 5.859v7.033c0 1.288-.871 2.347-1.93 2.347h-45.76c-1.059 0-1.93-1.059-1.93-2.347v-7.033c0-3.214 2.175-5.859 4.817-5.859Z" style="fill-opacity:.5"/>
      <use xlink:href="#4h" x="159" y="30" width="87" height="41" transform="translate(-152)" class="gpad-highlight" id="shoulder_button_front_right_highlight"/>
      <path id="bg1" d="M30.673 44.236h40.011c2.109 0 3.844 2.109 3.844 4.674v7.053c0 .638-.432 1.164-.957 1.164H27.795c-.53 0-.965-.53-.965-1.174V48.91c0-2.565 1.735-4.674 3.843-4.674Z" style="fill:#fff;stroke:#000;stroke-width:2.15px"/>
      <text x="48.396" y="55.277" style="font-family:'ArialRoundedMTBold','Arial Rounded MT Bold',sans-serif;font-size:13px">+</text>
    </g>
    <g id="r_touch_targets" opacity="0">
      <path id="stick_button_right_touch_target" d="M34.841 141.791a34.686 34.686 0 0 1 6.374-.588c19.07 0 34.552 15.482 34.552 34.552s-15.482 34.552-34.552 34.552c-19.069 0-34.551-15.482-34.551-34.552 0-10.648 4.827-20.178 12.411-26.518 1.298.465 2.697.718 4.155.718 5.345 0 9.9-3.406 11.611-8.164Z" style="fill:#419bf3"/>
      <path id="start_button_touch_target" d="M35.167 134.497c.26.997.399 2.043.399 3.122 0 6.809-5.528 12.336-12.336 12.336-6.808 0-12.336-5.527-12.336-12.336s5.528-12.337 12.336-12.337c2.48 0 4.789.734 6.723 1.995a16.16 16.16 0 0 0 5.214 7.22Z" style="fill:#419bf3"/>
      <path id="button_1_touch_target" d="M39.627 106.677a16.066 16.066 0 0 1 5.496-.963c1.93 0 3.781.34 5.496.963l9.655 9.656c.623 1.715.963 3.566.963 5.496 0 8.894-7.22 16.114-16.114 16.114-8.894 0-16.115-7.22-16.115-16.114 0-1.93.34-3.781.963-5.496l9.656-9.656Z" style="fill:#419bf3"/>
      <path id="button_2_touch_target" d="M60.481 85.823a16.066 16.066 0 0 1 5.496-.963c8.894 0 16.114 7.221 16.114 16.115 0 8.894-7.22 16.114-16.114 16.114-2.186 0-4.271-.436-6.173-1.226l-8.715-8.715a16.056 16.056 0 0 1-1.227-6.173c0-1.93.34-3.781.963-5.496l9.656-9.656Z" style="fill:#419bf3"/>
      <path id="button_3_touch_target" d="M30.442 115.863a16.056 16.056 0 0 1-6.173 1.226c-8.894 0-16.115-7.22-16.115-16.114 0-8.894 7.221-16.115 16.115-16.115 1.93 0 3.781.34 5.495.963l9.656 9.656c.623 1.715.963 3.566.963 5.496 0 2.186-.436 4.271-1.226 6.173l-8.715 8.715Z" style="fill:#419bf3"/>
      <path id="button_4_touch_target" d="M30.235 86.294a16.056 16.056 0 0 1-1.227-6.173c0-8.894 7.221-16.115 16.115-16.115 8.894 0 16.114 7.221 16.114 16.115 0 2.186-.436 4.271-1.226 6.173l-8.715 8.715a16.056 16.056 0 0 1-6.173 1.226c-2.186 0-4.271-.436-6.173-1.226l-8.715-8.715Z" style="fill:#419bf3"/>
      <path id="shoulder_trigger_back_right_touch_target" d="M76.155 41.187H23.519c-1.52 0-2.586-2.458-1.769-4.167.046-.096 14.212-28.399 14.212-28.399.743-1.517 3.546-2.595 6.744-2.595h22.358c7.656 0 13.863 3.027 13.863 6.762v27.046c0 .742-1.252 1.353-2.772 1.353Z" style="fill:#419bf3"/>
      <path id="shoulder_button_front_right_touch_target" d="M25.477 41.187h48.72c2.613 0 4.73 2.007 4.73 4.483v14.346c0 .983-.854 1.793-1.892 1.793H22.639c-1.038 0-1.892-.81-1.892-1.793V45.67c0-2.476 2.117-4.483 4.73-4.483Z" style="fill:#419bf3"/>
    </g>
  </g>
  <defs>
    <image id="4a" width="65" height="66" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABCCAYAAAAIY7vrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHcElEQVR4nO1c23YbNwyEZEduLm7ykJ/LF+bn8lK7kZVa1vahHO3s7IDk6hK3J+U5OEtJ3iUwBEAQ4Dri/xar1xr4y/BtMvbX1efhtXi5KggqaMe4KRDXBOmiIBihVx19bkNH/+KAXAQEEX5lru67rA10zfrHdglAzgKhInwP6fgqcIv4nrPAOAkEIzw+r+nzmq5r+Y7vQYMQhxgFPdBnvc7AOBWIxSAQADrz64RuzHcOCBZ8iIiXGEHgPpPTjsVgLAJBANAZh7A3QrfUx+98X4ggLPRLROzLVckBgmctAqIbBAOACg9hb4neyGcGg0EA8xCchX8u/T31+fdMM7qB6AJBAGD75tmG0KCNXAEIA8Hjs+qz0M8R8ZdcQaolJwHRBCEBgNVdBb8j2tBVgYA2BDENYVh40A8ifMdg7MNrRROIKggNADDzGxL2t4TwO5sHO0g1BQbgR0TsEsLvAEP9RRcQt50AgHT2N0XIu4h4W+gd9UHQDNaGDASYgQLwFBHbGLXqtnzH/uWZREgjzm4QBAC2fwiCmWfh3xdCH78BKAiAZ9VAgOrvivBb8wznYFnwA/pfhm+rTBusORQtUA2AGrPqvyOBPxC9J2qBgJaBAA3YRsT3iPhTCL89FcBgHrp6pGYx0wQTDXLQwyaA2f8QEfeGMhB4haiBAHN4kme0nKsjjkdmLTMHDYZ4CYQWYPZ/NwSNgKawT+hdHQCCA5F9igKQRZNDxD+TrNowASHRAvYF0AKYwH0R+iORgsArBAdNDLRGi/sYV4ddTE1J74+YCp9Fk3YXOgOBhFczUC14G1NN+BgRn8qVzQGziGXUaYGCcCgg3BUQWHi+n4XngCkLoDi0boKgQDhfAAAgsDMHaIFTY14e0RgEAMFLKmuA/r1GmfuYB1DrGE1i4iCPICR7Aw2KEA+oOYDuYzQF1gKdxWwrzRrR2ms4R+oiSWgEm96kqSb0moJbFnl5ZC3g4Eh9gYIA4QbhgUFgJ6oriQut+f6DA2IdvmWaoCAoIVrUuEB3kS7HoFtx3pNgddHYRMfG+M6RTvIYvAhkmuBAACMcITJBeHWENT/gwNckSbaCaEAFcoEZg40o8tgYBN0sZT6BgdCw2M2+A6C1e4XQDMCbmJoBtHKX8OFWFF2WRxAqGaNsv6DEAOjAtbxiCwB8vinfuQnJ+ADPuk+Z8aA+weULNWGyScghvxQA5gNXTeIwP7yN56vzB6k5OsfoNMFljXiwLGu0VHjlA1d1oK1MVpbO4wDt6BwZBBcnuBSaI/b6TvhzgUC/pqGtnGbqj5w54FozjWzJY/U9VxOUL8ePTpJbgpu81MyhNrAjB8AlmptBHq+XtxSMLFhiBmpUVbMrNF1me6jJWwuEX6K1QDipOHrFpsnTi/DmQHAPcnVATWBkDJzbVBDODdR4q/FV3UDxQG4Q3rfzNrWrUHpmY35cMqVWq6zywiAoACy4Cu8If+cGPBWIGk86vuYQdJJS06iZgwNAa4NaBktrgie0TCuVH02kKBiqpcdnI7ukW2lnBln2xtUFwZwGT2i9y6jaf2tCwA/zxxNTTbiuGZFOAFxNEAyoVpziMJ0GMACuROd4USDS8VkTsH11qqcpLNQGOZFRK4+57HILBD6xUivSMh9cqOUibdVBZuaQaQIXRjmRwQlVBWCIMR/Qyi6pxrhSPQu+jWkZjktxrJkMxKxlKXenCaoB25gmMlxNgQUDENneQjUAaXcUYjiNhrokE9cjoQ0100xBaGkCGPke8wSG7ibVrLKUO5tHNjZXp7ko+0h9BoI1oXle4QjC19XnoSQZFAg1B06quNMnTpieVFfLF0HtHws9UJ9BYHNwWjBrNXOATa6JGZfI0KSFizFq6S4ez/kBqDe04MEQl+mz8vxxjGpBlhiKGAsVXCDVBIbu2bOZdGcTHAjZGQVoAUzgISL+KARtYJ/Q7RRnIJBJgDEwBW2oJSxqqpwVZdkc2PzYGaovAAggNgf2B7VAKQeBmjoq1PIcACyEW1K1JKexBMYZzP18UgWrwGNM/QIDAFNwq0JEdJ5UMdoA5laFOXVqzpZ1SatVp/UZz+YZteM6uipokNSMVGsHt9g3RHlohPfoDAKH1xpPuIMaaO6AhsYGrBEcKGmkuOgYX7qhaZTqtT7Jp9j0GJ/WJ3tPr7FP4NBYo8NWhGhXBG6pJkjcEDHOdsTcZ2THbJ5iWhrrPbjFjpH3K3jmjr7v3TWmrbm17TjVqiUxPdp7F9MKkYscNTjTnSsLzH13GKPbDLpBqADhqlPZ4W72BVmAxfsFPt2uh7tZ7fko7ws9oxuAbhAMELpc6vsNXBJzhzSyiDFLn+k5JKf6s5Xgokf9K0DUymKuNFarEDMImkR1L36o8DZ11tMWV42S13+ystiN6bvKleYRXEq/O6t91dd/0JIXwbL6pfZdiUxTagdz1e8Gue/nvQjGrfJWXFaz1N+5KRAt4nt+/iuB2ha+HOr+NmIumBP2osI7Js5uF3hNOGIa3MyEjviXviactRNeGI9IIrz/zAvjS5oD6DX/fcAv3/4G1s+EbdFAgYoAAAAASUVORK5CYII="/>
    <image id="4b" width="46" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAApCAYAAABKvBuPAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAD00lEQVRYhdWZzXKjQAyEm8R2kv075eX8hHk533Ydm9gJe8g0NI0EYzuXTJVqKBjgk9BImgH4pq255eZtt7vp/pfmubv23otenIDWnMsAJ+drlakCN+BmoV9q3UIPYFmB2ZcFwI0dN8H56LkRpAqC41n4FFygHfYuONZz2XMd9sP6SFL4ENygVe4WhGP02W7RjwpZhJ+AJ9AEuy/9qhzfyzn27j6Edrj3Imc5zhSYwK8cPIFWyFWRtRyrIu42EAiFdTnJdb2Pik8A+2bWVisTeF1kU2QtfQTPlzr0qcib9ZR3EX6tkdUji0cuQuiHRAi/FnD6Ol+s0G9FjgBauUebzokGZvU5V3HoTYF8EnksPeE3GFtdwRW6LdCqbDQnCN8A6LbdrqHVe/BkUqqLPBTQHwB+lp6i8Gp1YJhoZ4M+YHAxdSudvGrxkdXd4lEUuRfwpwL6S4RKPJYxDk7/JvgRwGsZuwrGqXyU65ykfatxFX5OB/8N4I/BE5xAjVjvhE9rH2RcpBxd6oxpeF20uIdB+q+6CsEJT6tvAksSpsWntTkXgKn/U05ivN6Nt90OL81zNxdVCM44zQgyZ3W6C0Mjwd4xuMlarumX4NfQ0Fplca811M89HDKq0PoE5yTNwNU9VJkDhq+q0FEyG8CTKtBDIhXgCxhlGBIpDk5XYcija7SY5oG5DDyCr035DI1RFvVsqlYDhsjACcjxXjZEwGm1mYHPKXJJxcjWJdfnnhsVaxeDZ/Wy19cqnlR8TM0z04VEBp4V/FpzeLFEF2lkPDDOmicTrQ416WQro77dAWGh7laMqjqGsCOGyKDyGpw7yHiKKhTV5uGaVC2efXqv6hSUEYRWPmOcyjWKnDCk+70ppgoQfrISysAjBTRdK/Qe46qO0C3qMucewF8A/0QBlrhV8A4eQetLaTGGL1qU1xmTGdqAuFZ5LdAO3xYDRT4PAN2krA0UUPA3jOMu3aCT61o80X2a4DnqLrT83sC5Cqq2uEJHFteCX6GPyOtxL2u1HqevE5y+rq4yKWlH4C/Nc7ftdg7PF3pSIQx932uNaOkWrYA84lzt4w7eCKAnFPXba9acLcYhVd0kAl9cLGvc5Av1WrSiUehLV/nRSt/jePWGULagWJloRRfV0AoeZV5d7UQZtAev3RDSQbopE312tXJUQ2dJLZNwJ8vbLXuHDpttv2XwX7t3mMCzX9qpjWpoL5ayAi6sDC/arQ3gOTb7ErNF/4ICfq4fe9X+eAKv92R99NwuOI6qvv74pj8S3maUqHlmBDI596X/gLJ261834LY/b9+y/QdJLrfuY2EtwQAAAABJRU5ErkJggg=="/>
    <image id="4c" width="52" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE3ElEQVRogd2a3XbaMBCEF0ISaJr2Ji+XJ8zL5aZJgAQK7kU0ZjyelQ1JTlt0zh7xI2R9Hmm1WhNxZmXymZ3dN48n9fcwuWs+awwfAkoA9DN9r4PvwXwE8CQgAZkM1FlpBuqTwI4CqoA40zY8WK6dcZujwEYDEYyCTM1r/ox/oyB7qfV1+5uxUINARhU3eNgFveY2XBRkHxE7eu0gR0NVgRJVptGHcMZtuPDAd4ntow+Im1EFS4EMDO42BnsREbOKqVoYEMP8rtiO2uF3g1CzDEiKKoJBXxa7ktpBRQKziYgt1dvSHt/jd1ynxSok6jAMg1yRXZPhs8s4TD9WSGE2EfFGhveAQ9veFHQq9YAEBkCsCkPMiy3o9ZyAAKVAGCwgXiNiXWoY4DbRn4apo8imnMIASEG+kS1KPY+DUgDiKQcgKLEuhhs1i9w7ouzNZ+3A22KmGmAwxa7LwBcRcUP2vdQAA1QGhDsPZZZiLxGxKsZqbaPrCXsqOYVYHZ5urA4gbqVmKNzxDAhTbRUHRVUd3mx5/diIIgNSKHYCmGYA+kEGqGOBoCa8Yg2GbaIwHaAy3TJ1LuOgDoBuC8jPYj8EqDbl4BCwdrQdQNze1HMM981jO+2GphxPt6s4LHxMMwd0E/01xHcdg3uL7r7FMHDtW6rZhQOqp5ICqUpOITgEhoJBIXbdbmPdJjBQBV6Q9yk4BSjJYx10CjV3DTcNKDV4OQzW7UPuO4XBGmPT6KMXOUwjeusnUwhOASrxHsTejTfZ68Tm1Fb70b54TwMQbkRr2HJqCjkgVmoRfYDapopyEe8qsTK82a6ju5c5IA162+LW0FgoNQ53eG0oEB/82AFoXwrCMO7waIH4gm4tcYTtjKcEfpslTbRfvWncpyqjUBbI5Qj0VJod5rLDnb1oHBa0zoIxh0XXZ+vpdDq44pyFmiZHsj7cZ3pkz8wlYHrXGwP0X5UxJ1ZNMbm4SgNG10fWryZGMnPXyGO56EavLs1US2qo8T7hQI7tdzSYU0iB0CkHidvE4JV4n6klSXamT4Q7WfymYJ2iQKySJjQ4JHHGmym7Zr0ob6QM4PIKAEuP4Np/ppDeRb0wTprrqEfW7sDGfXJOgfMKqBkQYKxUT6FpRHuEdYtf1eELr8iWpQakJjvUXD/LpK8MqDPe2nlIFdLodxXdOCs7xA0dHzbU30ux5+jmFlgpBurkFLi4NQTjRYvpwUkNl6bim5BNQz2xAuipAD2X9wqEdJZTKAViKJ5ymzK4dfgwXgd7zBEcWZ7niPhFYDz1VKFhL/cwuWvum0e8xfFWFdKYS4/NrOQxQMsC8WSAXqPuFJqhNBYGyIkKflTCIbwOks8zY4HgCKASphxyc7qGUnUyIDRUlTZxCCC5rbrhMYlGtyaxljjR6BxCdWPNctvuPMTZU5cK1qwp59rGpIJ1K8DaqWVNm7G5bY0YFJ5dO68xbLScp86ePnB0oBurS9bbnJyWv/U4xUUfX/M4RaBq2dQxD7xqoQ8Hpe6hVy0oPfkJngaAteB1Fu93lnMAeoxwm/axjySrJVUo4sweGhsotM8SKPpYP0toZAc8BeiFNx9+rJ+AaZJial7XEifZiVg/G63KSUACxb91aWQH3w5Oamfc5mv+GsPlbP68pOVs/l6WlX/hD4BnV/4AcperLpSp2XYAAAAASUVORK5CYII="/>
    <image id="4d" width="52" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAYAAADFeBvrAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFUElEQVRogd2a0XbaSBBEC+LY2E68L/k5f2F+zi+7iQO2A+yDp6BUqh4JzO5D5pw+EiCGuaqenp5GwB/WFpfu8HH/dFKf3xff9pf8/Q8DBYBT+hzBfBTwLKAORHXUtg/nfgRwHtxJQAaig15MvNamg1dDOD8ZajaQwKSBL4tzBTsMUga+K84ddDbYJFBQxUEqUzgFUoBkFdwsqC5QAeMD/2S2lKOqxcE4wDaYA86GKoGCiyWQKzm68Rp1O1VmC+B3YT2wLtRVjxbZvRTgc8dUMQfSwb81e5Vz/Zxtxz4e90+LCioqZOq4aynINYCbZtdyVCh+n3dYlXlt9tKM5wRMinWVGgEVMEscVbmWwa+CKRRdkn2qqxFm0yDW7ZyvCaiKTbpf5XLualTGQW4B3DW7bcbPVCUHepNBbwD8Km5CFfL9vQwUopqqQxdTkHsAX9rx3qBuZHBLAeK8IcwaR1VdUQ7ajSqNWlLIg4C6GmEI8gXAVzm/b6AESgop0Brv6lRADqDutgCAx/3TwO0OQBOBwNW5byAPzb42I9CtATEoJKCVwPB3HWZrxx2Ga9uhuUIOlebOHY7KPAD4qxmVIhDnhANtcYxmq3DdAsMFV6OcAlGlQRifcjmq87kB6dxxoAcBSgNVICpEFakOMF503zBcnxTMs5CoUFpEk0KqEk3nEIF0YdXBOrB//mqmUBwfF9tDuwIO88ez6ASkYToFBgJxknMO8i7qwprWKCqii+2m9feCYdTUpWWWQp4VMCNQt6PdYbgeeUDQQXPgHs3oilxsGTBW7VzXKAUatKW9rnI3T3N0YVXTTEFTIE2V1FYn9KVJr2fyC0bpKihUiahD3WCYyymEh2HgXQlPVqnMTWEK4wnvSCEFqnaivQzbVah+WIE0hdlZn1V/qk7aCUegHpRv4vyHFGDkDtY/oaoN4ty+dZyH5nPI4c7dcleFE++711/v5pQK9YD0x/+vNue3utf0gKpyU8p6q3JUKk8hXHNKFSj1NQlUVWY0v6pyrAqy6jcVSXr5WxfOg0J11zy38hyLlhbTuUWS1J/uVuM23JsCpSJgShKZlngtgJ9rblZVfbahT+9Pc7gKaHL74C6hLuDbZq0BpM0c+/GFNeVsGzGvLejNqqD2ve1DUkjv3lpMawEpCdXFEBjmcszZfhVGMC+W+JwaNHe5pBDvjiqj22bfz/D7ugtV1ejCWiB5BvCz2XMzh3KgVDR5B/q++LZvyZ1CqbtRoTWO+dxUVceV88/ZH2H+AfCj2c+ZQJNziM0jkQJpnqUBQBNN3Y1OFUkU6G8BokobHAOE1uYiVC9s6938hOMGyxNFYHznvepT1RQU6EeDolJUaVKhWPUJbscfXwqUJonAsKDBqLVGLpIQ3BXXOaQu94yjy1GdbkAYAElzlX4jJ568lnON6nBz1gNSl6NKhPKg4OpsbYyDVtW2aZrW6zbcy8BeDtYImOaQRrkUugmawvZg/sytbfMiraq4MmmR5OC0PNUr1qdFdS3vazBIOd2oxVTcVPKiif4DoVvytBWvgofOuZdgnvak6Bb/Tun94aUX7+z9lJNRIa8BpBpClcvpH1+alM6CATqbJat1u1Is4mupS498PxVJNP2hUp7JE9i3L0CYN9pKhSyMsx06xVClbYN4Ra4BoPO9yvxfcX6/2ya3vMXzCVpD0GLHVC2gyhf1XD8bheez/wUvoPidFDTSMRUzfIud/vtxT7jcgxcFWJpfwDCDKCszGN75tJ0+SRVtZ1V0Jp758fe8edpfHf/7h5e8TTxa1uvbBzp4/ZFHzC5Wczv1wT9tl34I8I9q/wJ8hc/eTcdQhAAAAABJRU5ErkJggg=="/>
    <image id="4e" width="51" height="52" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAA0CAYAAAAnpACSAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFSElEQVRogd2a3VIbOxCE28TYQIDc5OV4wrwcNyfhP8CeC9S41duzP4FTpyqqmtLaXmv1aUajmbGBv6htPnOwq+F61Xg/Nt+Hz3z+h2CKya8Zs4P5KNxqmACwKfpq/GGmB/BnYKtgBER7v/b3tOnEh5nXANZBLYKZgKAcFdf+jMHktbjuoJYCzcIYSAI4KsS1xMm9Sl+JQ2MJ1CRMAaIT/hKE7/Nefl818ArgRXqVCmwWqIQJIAliW8gX9BqCTEon/hxEoV5kAThGCbRdCeIAx012cn0s9zmMauJ3kCcDg4NIP2ojzRQgrglOft9kJ/0OvYY4jpqXTv6xyZP0/JxQbnZROx3MhEZUE5z4HsAJgNPWnwQgmhtwMLFnA3kQuTc41dQsUDIz3+zUiGriVOSsiUJRcwnGQe6b8H7VJuS77Df23iQMgVwr1AgBvgI4b/1XA9q3yXHfAAcTew4gt+g1SRh30Z27vhquN6qdd5hmYnNaOZXJXzQY9gqUYAYcTIYwdw2E9yoMFyAdqNEZVGbm3su1cgHgssmFARFmZ5PTzf+IN42oFtW81PNpP4oYVDtb0QrQa8a1ws1+3uQSwLcmBFJT42qrN1MY3kdn4Rrxw9QPVM53bGaYNrEd+r3CyRPmMmhGHYDDPOHNzBQEsuL0eCp6oKoG31sys8rETtBvfALR3AiTTIcTpQN4Qu3t+LnLb/SRxasDLdWMmpkDnYucoTcd3wdcWXUO+pkfpDx/+Nq9HQBsroZr/Nh8H1wzafPrQelA7Hl9hrEncxN6KTSiIHQOqmU9h9x9v2kmuGQ/YxyGQCr64D0OZ1OKzdz0uEe4jzSqoFesQLqWNFPFYx7KEE7js2O5N53k6okUZB9Eg1eP9SLQ2nBmSqoUII09tPtebAzGdT6ujpcy2cM5EyCmkrCUu6gJaAaa8qWp3Cj1R6jNqxvfV64CS4C+UmnVgPEqrkm9Uwoe98sUzP/VNtavalXUDExHrFVFpcvXZZylY84VNapnABhrZu4BPKFTzOSxkz90auwUh6V4LI353rbhg1QG0gzR4ya+3rX7qlKTAmgxI9UCPG1WsDINcDPzVfM0lxGv5+16sKn7raozzzbuUxhXYzICVRoCABy1XCCpX0E00tWY6R7j+EknkTToabPXAXQ8h5kESppx02KooanuHfpwI4XxanL6PqF0LGact+2a6bQukGonOoKpPaPhuINoyOEg/F5KATwOuwNwI3IrokDUqGtG513uGX6Bq6gwt+jjsKqUNFedUZifAH41IdQdenNTU+s006XNBYhv/gfkeClNtCpoaNr8gIMWfgL4R6DU3HzvaLDatS3JWirgDkAfrvGY7wVf8SUFDYX51UAIc4NeM+7RZvcMm5uZBoR+hvg+eETtGBIMN/4NDmammnnAQSvRk8W6mYCwZ+FAgVKy5ftqrgioGuQepKgToNt391yGNKnWnBK0lDpr+sxrVmY829QF8vRY3TOFIHTN0cyW1Jp5g24yr/u6+3atLCmcc6KcuB7A1Mii8yVNEsCoIKjm5emzp9ApfU6OQrXjYYxqQn8BGMGknzRGmik8G9qgujI+sUeMXXc6ND1MUrCq6DerFWAiCSoK6SmF1vzffzXz1Fm9ZIrE9f3kvUYeTNtUcgb03o19ynGqH2qr6kzKYRxgFQgwk57avzGW1ALSWeQpQJUvOcAo/vrQT+cBSienE/aKTFWoc6DUu2AJyGIYA3KoqpJTjZ0m7GbM68//u4m2ALWk11btQ33vv/8jkLaJfzctGXsorj/0N60/hvG29o9z2j77T3R/RfsXSO/jtpPsGBMAAAAASUVORK5CYII="/>
    <image id="4f" width="48" height="47" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAvCAYAAAClgknJAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAE80lEQVRogd1a21bbMBCchJAGSri0/BxfyM/RQkm4E9wHdvBovLKdwEurc/bY2Eaa2V2tdqUA/3ibfEUnF83VTv1cTs6bz469MwEDPalcvTWV685ktiYgwCcjRFuTyJu925rIaAIV4FO57tnfSkIB87qxv5XYaCKjCBj4qcieyEzu+V4JvAnwDYBXud/Ie5IZRWKQQIBXjRP4LGQ/ZC7PZhUCryEvJnyuRBoAzRCJXgIJeAIn4G8mcyFCSwCt5l8BPIc8AXiMK5+RjLpXL4kqAQOvbkKwCwAHIYdxXcS7fbRWIAFqnsAfANzH9UHIPKG1yCCJlID4PF2GWifwQwDfARzZlSRoBSfwHEDvQ9YhdyH3QoTWoEulc2KWEegBfxBAlwCORZZBgpaYx/8ogZcgQM2vAdwmhFWpul6Ms4C4joM/DJBLAKchZwBOQpZBjm6UWYDucwdgBeAPgBuTW7TW4Pz4mBNuhZoFdNLuo3Ubgv8B4GdcSUIJDLnQHVqXc7LUdiciIbFCQSCZuLMAs4gBjwPweQhJnKB1IUajLAox+ih4utpEgNfWiclFc1XMhcwCrn26zzKAngVoEqAFCErDqK4DGkZppf34Tr/J1ogirCrYDwKVmK/uc2QEKKdBLtO+L2S0AsMsSfIdw6wK14cpEivULODuQwscBwlO4pN4ptrnmpHlQhuUKzXfcY3QEEuZBwlaomhOQNMFEqALefj00Kn+7OGQQGlZdy2d3Gu8RyiuKfdCmFaozoEshHLFJQmKrr7qzxl47TvLjzixuSDqJHeXLPpWAppx0g005zkwUeCa+2S1gLZpgNecStMS9q3h2INC0Zk2zeU1ccuSNmah2vkQeA8SrqRaYlirMzoE9HktbXbg2umY+qKWJPoYWX2RAh0qE7MCRifqNuBrRLw48nE6SiLmmgV0AL/3wT/bvI9ss6DanIBnf16A630RzlDJFgfa0DgunXGmQCfPdpCal2h+0qlhR5JwJWV1so/TSeaIOXMh7Vhr2GeUpV+WpwyR0G9UOcyRXpD3v3ECbErAzVirYSlZDav7PDXwrnHNf7R/zYOqlvCVWF1HNc8qisI6doF2BZ5If9nkc+Wwb62PWchojUwCbumUAAdS7XMAzVO0cNG8H8gXNdWcal2Br1HWyKzItDYerInd/zVDVPBMnVX7/L8soVPLUvPa5y3ey8vbkDVaKzAT7a8HLifnzUVzpYNpBcXB/qDcOvF8ni7Vt7FFpdwF2BsA1yhrYlrhEeU862yx1Fwos8BcRCsp/VbT6ixtVtehQq4B/Aq5jmcrlC5UjUJ9BHxA5irMURz8I9q5we+UgGufuxIZAbqQEhieA4kbcdAHdHeg1c0e0e5KaF2c7UowICiBawC/47pC6z4d/x+7reJW0KSO7zOX2JYAJ+8N2km8Qqv9bKEsWt/Wohf3Wh+zvFRheTm0L6Shc2Xi24sFgW23FmmF2vNso8orqdrGli9cCtwjT1X7wPDuNL/JttYXJlrD9u1OkwRFV93aFnv1sGPM+YCTcCIuXmYC5equiaGC1oOO0Sc1Y09olERWCnqI7dvYUiKvIln6PHjMtMsZWXbctJfcZ7mQkvD7nQ76tioJR5xU+s5Blsz5yeTOJ5RbE6gQcUL+jq1Wrn682+Ww+1NFeeW0vq/ftIb+zE8OvmJX4aON/c3EV/xG4r9pfwEs4yD3oK/mAAAAAABJRU5ErkJggg=="/>
    <image id="4g" width="76" height="55" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAA3CAYAAACmcqwpAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGiUlEQVR4nO2b3XbaSBCES9ixN7G9e5OXyxPm5XK3scHGMnuByiqVumckgQHnbJ8zRwKEfj6qe3p6hgZHth+7X4289P3G3tfPo9cl2xVe7ypbAMDP5rufo2pzbrBqAku3UfPPltxPBsj3S68BzAN3FGCBqrStgv1VcNzc+4nUE7W3wmcKcBK4g4ElqlIwKwBXsu9tCbQM1luw9VaCCKAM7nrCzU0xPqSCuqo0HuOK83OquRtGatLWyra19xzg+3l/7H41GbSDFGbqUtUQynXXvtg+P6tBy6wES8G8BlvuO8CR2iJoixUWwFJlEcwXADeyvZH3CVDdtaSyTF2qklYa4Wxlu5XXbA2Gqouu926HuqTGH6pKQd0mjeAITdXJ8+o26xE9VikoQnqR7XO35XurbqvGcyJyzUUuKeqiKhQWlfRX175K43sO7QrlDiACFgV2AlM1PUvb2Fbhqbuqiw5c8xCFKbQVhjGKoL517U72Ce4Wscqy3jJySXdHPjAV9YIezlqa/kh+Tv1B/LrzgSWBXhV2iz2QbwDurREclXYjN68qA5YDU1ekmjYAntCr2q+l52RrEMSxpQrzxFTd8Ra9uu4BPAD4u9sSGlWmD7AEmMcvdUl1wycMw4BeJ0pHVhBoGstmATN1Rb0i1fW1A3MP4B/sgSk0qowKm+KSfDhuHZoDozuuMQwBTGN4njZo2mMOlLZEYZG6CIzBXtX1gD00glO3dBc5BJgHfbrkGmNYmRtvu2NaecZlMaygLnVHDfZ36N1RGxXmLnIl565ZNCRiIwAC086FAFo5hsfxGKYbKozFCvOAn7kjgTHYP0ijwgjM49cSYO6aVIt2Ko19TpfddPeysWNXkESWcWwSMKtGRD0jgz3d8U6a95IM+uom7o5A2SX1tbe2O+8r+thIWKo8j21RTjiyOQqrxa5IYWyag2kPWUpaS1bK/N+683LYw89aDDuCaNQRDdMG91MFFtS6VGERLE1YtXmWr+44B5ZbFM90mEVYW8TDsxIsfe5ZaYUqa4q6tPmQKJP/lMprqcCnGTrP9ybXiwoAURGgWJtb4pI+DNJkVVukKt6kFxSnwPLPHB5VoMMdLzN50w4nKmqO7qcIrHPHSF2RO7rC+FpdIBoGzam0qtXAaqytVX2ze1mssFIJx2OXqoywSvWv2sPPMc8VFZz+6BGoST/gKnoTKKqLD671rgiaDrCzLvtYoCKL4mKpZd8bWAosOIHGg6xn9LqXBtnJgfXIVgOVgQstBJYMgzyViIqEWaBfmm9dnJUU5rC8Tu+B3iurHuirPdBnsBGwyiDb3dFL0A7rj1IXkCtsbqIauWMtQf2U0AbAJhQIS+qKhj61Icens0hhcwbZJXf842ABkrhWBtlTgHmSGtXpgcIEw5GstvAkXE8x1TzTj9QVAdOEVV/rWNFr56wkfCQsXsvXTpRgzQIYDY1qAd+hZfUkvRmdUPBrHduiyV2f3MhW8QAVcCVgUQzztRJRT+g33WKoro82vbavo4gWo7gS9TwjuwbC3tFdMiqTRDHKZ2PQ7Z9q/Kj3QGC6HMABOrhIbQNThWUDVS/r+MIRYDzFxQmEVzv21ApjDZ+THZzcdYAltRWn2bIBaZSl88Z0WovnY109KhCewhTYFv3s9xN6eL4QZbQIJbKsHpaN4N3ldLqK0+uv2P+KOmNzSmDa0eiygTWAx65xUYqqLYI2a21FNufnN8EJUk40cH7vXAmrA+MPuMEe1r8AfqNX2zMqy51kmwLzqatIUTr13qIH6DV74HzAdIab02u/u/aIMTTvAIBKDMsu7LCoIKD/BT0fO2dlgg/MXpDxao09pEeMVfaCcQcwySWjX0hnjHVBB2+GytJ041xVidLSAV0rRnCMZcU4li13ihZ38IIEweN0JnnKZOiprBZOdJGdB38CS3tKBcZBcXQxTQ34/gvyucYI1qng6cNmy6AITtuk9CJTmALz3EsDqWf9mrPRzuGS3PoQTZeh6+pqTWJHWf9oUfDP5vtOhkc6WG7lRtxFFdSlwKK5W/KHZgem8LI/PFRdEnaQgvPhhs8mR4nuOYuFWelGqxdRJaMNvjOwwUMlJWodT/qM8SXCopWgedshcEVg/PeZWh6mBT8uIypNgF4CKLcMXFQPK8ICggdM/lEbgfGe8BJh0TxrLxUNU1hA8pAGTY/LAF0yLGAci6Jhz/t+6f+S1QcN4E363oVbCOTD/pGbQPw0tuTP8f/bQvsPPoCzn/bfs3UAAAAASUVORK5CYII="/>
    <image id="4h" width="87" height="41" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFcAAAApCAYAAABA4LXdAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEk0lEQVRoge2bzVLbQBCE24kxhJ+ceDmekJfjCBhwsHKw2ttqzeyakFStUkzV1Aphy9qP9uzMrAC+7J/Z6rMXuBsePn2Nnu1+dTv86Xs/BCYBeeq53i2CODv3EdgnQTCoKxuzcydfvwNzYENjPAlydfIVqOp+rnbdXmDXVKqjO+y4CjmdrICNAH5Ljk+F3JNlUPfJ8Qx4BjicvIF1qDVfImBVIiHq+D6O++D3VcDryodmUL8nnkEG+gTsilVwhJo5X3+81t3wsHLAM7hBnHWo69HP5HiNOWQHDPQDebDjCOqvxFdIAPuHZMp11RLq2egbG+mq5ChE9GSq3AjsbvQ3GVU0NCoert4JXIu1qliC3QA4F7+Qcw44U29Ppqp1sG8AXsU5J3/vgDK/elhArlpC/CF+MY6EraHCw0NvpnAIV8G+iHM+sPfMMgdVbw2uxlmqljCvAFzK6IAj9fZmCkVVq2C3AJ5Qwpy+j6Hkm5yDjAVusJApYIVLqDcArjEHvEFZ4HqGCxT1uWq3o29Q5hGFD03TVmiEhdpCxhh7iQPUGwA/x+NrlDDBRS6C2wtkX8wUripWw4G/bocCOBRQLVtgzGQM9bBwjQNcAqZ6CZc3thTlaqy9QBEIMA0Z6pp6EnKcLYym6vWYywWN6iXgGxyAMzRo3O0VbrSYveIAd4OiWAf/giKe8Nt5NzzgfnU7tMJCFhoI+ApFxQwNmjUsRbksEHjvjLHvKFC3mK4phOv5/FS5QZ+2BpgKvsAUNMelwNVsgXDXKIAYBhRqlGqmc/xIhaalr4Kmn9vPS8oWtEBgGPDqU8FmRdJkngq31WJsNW68iaM30Kvp13iP+Ty8Z6Jzagqn1hXTG+AY/YWyi0+ayp1a1Ah3q805YnO0U+BGN6L9Te8iaV6oyu1NwV6haedL24tpDxcN8bTgttpx2uDQxeAdywgLXv5qs4bdMLrCznYmJhbB9TcoWE2ktf5mSrJHWXV7znFpOkev0OgvKHOmqBxwaArXW2cOVVXKG2BWgPF1ryh5oKYpvZrDZSHB8vcJwPP4s6pZ+wqpejPlcnTFEuwzpnU3b0qrs6XB9SrtGQe4jyiAqWIHvPcLA3O4mpaocrX80wIBKLGKSs6aNj2ahz4V0RYHqI8ogB1uFH+PtgYOO5dSpbUayNqCI/gXzCuzpcAFpnA1/D2jKPgJ0/AQhYaJtRY0hcutDsLay/lom6fHVqObw/X5qoI1NFC5rl4AGLKdCC5qvqDtUJSoC4B2kWo7EEuAG+1I6DpDz5Sr1wNQVy7BKiRVNP+63iWKFrLe4UYblZrjEihhZzF3Yke4jbjrKZp+dTKwvQKNzEOhhwjdfdCQEKVjR6ulYp5e+Kq6w7xZ0/uzCjVrlfY6eml8hJo+tyDq9VxXj9kzYB9B1cr0rPdY6xaFB193oufGUtUC7d4CdzX9gxWutt8QjEuwwY6j8t+hzyozf1YsBJBss9ccwbhUcxXX/Pj66CnHFETjafKsj7l0sMBcxRw93QrjrFoTRrK/1nr/EiFn3a0INoD2o/sfgvC//+fOKfaZ/+75sr9ovwE6VuMXJQtz3QAAAABJRU5ErkJggg=="/>
  </defs>
</svg>
`;class x1{constructor(){N(this,"gpadButtonHighlightElements");N(this,"gamepadContainer");N(this,"gamepadHelpTooltip");N(this,"gamepadHelpTooltipText");N(this,"defaultTooltipTarget");N(this,"gamepadConnectNotice");N(this,"tooManyGamepadsNotice");N(this,"currentPopperTarget");N(this,"touchingButtonsCount",0);N(this,"someAxiesNotCentered",!1);N(this,"someButtonsPressed",!1);N(this,"gamepadHelpVisible",!1);N(this,"helpTooltip");this.gamepadContainer=document.getElementById("gamepad-container"),this.gpadButtonHighlightElements=Xr.map(e=>document.getElementById(e+"_highlight")),this.gamepadHelpTooltip=document.querySelector("#gamepad-help-tooltip"),this.gamepadHelpTooltipText=document.querySelector("#gamepad-help-text"),this.defaultTooltipTarget=document.querySelector("#select_button"),this.gamepadConnectNotice=document.getElementById("gamepad-connect-notice"),this.tooManyGamepadsNotice=document.getElementById("too-many-gamepads-notice"),this.currentPopperTarget=this.defaultTooltipTarget,this.helpTooltip=p1({getBoundingClientRect:()=>this.currentPopperTarget.getBoundingClientRect(),contextElement:document.body},this.gamepadHelpTooltip,{modifiers:[Ic],placement:"right",strategy:"absolute"})}showExtraniousGamepadsConnected(e){this.tooManyGamepadsNotice.style.display=e?"block":"none"}showGamepadConnected(e){e?this.gamepadContainer.classList.add("gamepad-connected"):this.gamepadContainer.classList.remove("gamepad-connected")}showNoGamepads(e){this.gamepadConnectNotice.style.display=e?"block":"none"}toggleGamepadHelpScreen(){this.gamepadHelpVisible=!this.gamepadHelpVisible,this.gamepadHelpVisible?(document.body.classList.add("gamepad-help-open"),document.body.classList.remove("driving-now")):document.body.classList.remove("gamepad-help-open");let e=0;var n=()=>{this.helpTooltip.update(),e++,e<60&&requestAnimationFrame(n)};n()}showNotSupported(){alert("Gamepad interface not supported, please use a more modern browser.")}showHelpTooltip(e,n){this.gamepadHelpVisible?e?(this.currentPopperTarget=e,this.gamepadHelpTooltipText.innerText=n,this.gamepadHelpTooltip.style.opacity="0.9"):this.gamepadHelpTooltip.style.opacity="0":n||(this.currentPopperTarget=this.defaultTooltipTarget,this.gamepadHelpTooltipText.innerText="Gamepad Help",this.gamepadHelpTooltip.style.opacity="0.8"),this.helpTooltip.update()}handleGamepadVisualFeedbackAxisEvents(e,n){e.forEach(i=>{var o=i.thumbStickElement,l=i.axisRange,c=i.xValue||0,a=i.yValue||0;o.style.transform=`rotateY(${-c*30}deg) rotateX(${a*30}deg) translate(${c*l}px,${a*l}px)`,this.gamepadHelpVisible&&(i.upIndicatorElement&&i.downIndicatorElement&&(Math.abs(c)<n?a<-n?(i.upIndicatorElement.style.opacity=Math.max(-a,0),i.downIndicatorElement.style.opacity=0,this.showHelpTooltip(i.upIndicatorElement,i.upHelpText||"None")):a>n?(i.upIndicatorElement.style.opacity=0,i.downIndicatorElement.style.opacity=Math.max(a,0),this.showHelpTooltip(i.downIndicatorElement,i.downHelpText||"None")):(i.upIndicatorElement.style.opacity=0,i.downIndicatorElement.style.opacity=0):(i.upIndicatorElement.style.opacity=0,i.downIndicatorElement.style.opacity=0)),i.leftIndicatorElement&&i.rightIndicatorElement&&(Math.abs(a)<n?c<-n?(i.leftIndicatorElement.style.opacity=Math.max(-c,0),i.rightIndicatorElement.style.opacity=0,this.showHelpTooltip(i.leftIndicatorElement,i.leftHelpText||"None")):c>n?(i.leftIndicatorElement.style.opacity=0,i.rightIndicatorElement.style.opacity=Math.max(c,0),this.showHelpTooltip(i.rightIndicatorElement,i.rightHelpText||"None")):(i.leftIndicatorElement.style.opacity=0,i.rightIndicatorElement.style.opacity=0):(i.leftIndicatorElement.style.opacity=0,i.rightIndicatorElement.style.opacity=0)))});let r=e.reduce((i,o)=>i+Math.abs(o.xValue)+Math.abs(o.yValue)>.05?1:0,0);!this.gamepadHelpVisible&&r>0&&this.someAxiesNotCentered==!1?(this.someAxiesNotCentered=!0,this.setGamepadVisability()):this.someAxiesNotCentered==!0&&r==0&&(this.someAxiesNotCentered=!1,this.setGamepadVisability())}setGamepadVisability(){!this.gamepadHelpVisible&&(this.someAxiesNotCentered||this.someButtonsPressed)?document.body.classList.add("driving-now"):document.body.classList.remove("driving-now")}setGamepadButtonClass(e,n){var r=n[e],i=this.gpadButtonHighlightElements[e];!r||!i||(r.touched?i.classList.add(ia):i.classList.remove(ia),r.pressed?i.classList.add(oa):i.classList.remove(oa))}handleGamepadVisualFeedbackButtonEvents(e){let n=0;for(var r=0;r<e.length;r++)this.setGamepadButtonClass(r,e),n+=e[r].pressed?1:0;!this.gamepadHelpVisible&&n>0&&this.someButtonsPressed==!1?(this.someButtonsPressed=!0,this.setGamepadVisability()):this.someButtonsPressed==!0&&(this.someButtonsPressed=!1,this.setGamepadVisability())}handleGamepadVisualFeedbackVariableTriggerButtonEvents(e,n){for(var r=0;r<n.length;r++){const o=n[r],l=o.buttonIndex;this.setGamepadButtonClass(l,e);var i=e[l]?e[l].value:0;o.buttonElement.style.transform=`rotateX(${i*30}deg) translateY(${i*o.axisRange}px)`}}getButtonHighlightElements(){return console.log("getButtonHighlightElements",this.gpadButtonHighlightElements),this.gpadButtonHighlightElements}}var ae=(t=>(t.up="up",t.down="down",t.left="left",t.right="right",t))(ae||{}),Vt=(t=>(t.onOff="onOff",t.variable="variable",t))(Vt||{}),gn=(t=>(t.real="real",t.emulated="emulated",t.overlay="overlay",t))(gn||{});function L1(t,e,n){const r=Math.sqrt(t*t+e*e);return r>n?{x:t/r,y:e/r}:{x:t/n,y:e/n}}function F1(t){if(t instanceof SVGGraphicsElement){t.getAttribute("transform")&&console.warn("Setting Transform origin on an element that already has a transform attribute. This may break the transform!",t);const e=t.getBBox();t.style.transformOrigin=`${e.x+e.width/2}px ${e.y+e.height/2}px`}else if(t instanceof HTMLElement){console.warn("Setting Transform origin on an element that is not an SVG element. This may break the transform!",t);const e=t.getBoundingClientRect();t.style.transformOrigin=`${e.width/2}px ${e.height/2}px`}}var j1=Object.defineProperty,N1=(t,e,n)=>e in t?j1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bt=(t,e,n)=>(N1(t,typeof e!="symbol"?e+"":e,n),n);const Lc=18,Fc=4,ei=class{constructor(t){if(Bt(this,"getNativeGamepads",()=>[]),Bt(this,"buttonPressThreshold",.1),Bt(this,"realGpadToPatchedIndexMap",[]),Bt(this,"patchedGpadToRealIndexMap",[]),Bt(this,"emulatedGamepads",[]),Bt(this,"emulatedGamepadsMetadata",[]),Bt(this,"undoEventPatch",()=>{}),this.buttonPressThreshold=t||this.buttonPressThreshold,ei.instanceRunning)throw new Error("Only one GamepadEmulator instance may exist at a time!");ei.instanceRunning=!0,this.undoEventPatch=this.monkeyPatchGamepadEvents(),this.monkeyPatchGetGamepads()}AddEmulatedGamepad(t,e,n=Lc,r=Fc){if((t===-1||!t&&t!==0)&&(t=this.nextEmptyEGpadIndex(e)),this.emulatedGamepads[t])return!1;const i={emulation:gn.emulated,connected:!0,timestamp:Math.floor(Date.now()/1e3),displayId:"Emulated Gamepad "+t,id:"Emulated Gamepad "+t+" (Xinput STANDARD GAMEPAD)",mapping:"standard",index:t,buttons:new Array(n).fill({pressed:!1,value:0,touched:!1},0,n),axes:new Array(r).fill(0,0,r),hapticActuators:[]};this.emulatedGamepads[t]=i,this.emulatedGamepadsMetadata[t]={overlayMode:e};const o=new Event("gamepadconnected");return o.gamepad=i,window.dispatchEvent(o),i}RemoveEmulatedGamepad(t){this.ClearDisplayButtonEventListeners(t),this.ClearDisplayJoystickEventListeners(t);var e=this.emulatedGamepads[t];if(e){delete this.emulatedGamepads[t],delete this.emulatedGamepadsMetadata[t];const n={...e,connected:!1,timestamp:Math.floor(Date.now()/1e3)},r=new Event("gamepaddisconnected");r.gamepad=n,window.dispatchEvent(r)}else console.warn("Error: removing emulated gamepad. No emulated gamepad exists at index "+t)}PressButton(t,e,n,r){if(this.emulatedGamepads[t]===void 0)throw new Error("Error: PressButton() - no emulated gamepad at index "+t+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");var i=n>this.buttonPressThreshold;this.emulatedGamepads[t].buttons[e]={pressed:i,value:n||0,touched:i||r||!1}}MoveAxis(t,e,n){if(!this.emulatedGamepads[t])throw new Error("Error: MoveAxis() - no emulated gamepad at index "+t+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");this.emulatedGamepads[t].axes[e]=n}AddDisplayButtonEventListeners(t,e){if(!this.emulatedGamepads[t])throw new Error("Error: AddDisplayJoystickEventListeners() - no emulated gamepad at index "+t+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");let n=[];for(var r=0;r<e.length;r++){const i=e[r],o=i.buttonIndex,l=i.tapTarget;if(!l){console.warn("AddDisplayButtonEventListeners() - no tap target in button config "+o+", skipping...");continue}const c=s=>{s.changedTouches[0].target==l&&s.preventDefault()};window.addEventListener("touchstart",c,{passive:!1});const a=s=>{const d=s.buttons==1?1:0;(!i.lockTargetWhilePressed||d==0)&&this.PressButton(t,o,d,!0)};l.addEventListener("pointerenter",a);const u=s=>{const d=s.buttons==1?1:0;(!i.lockTargetWhilePressed||d==0)&&this.PressButton(t,o,0,!1)};l.addEventListener("pointerleave",u);const f=s=>{};if(l.addEventListener("pointercancel",f),i.type==Vt.onOff){const s=p=>{p.preventDefault(),this.PressButton(t,o,1,!0),i.lockTargetWhilePressed?l.setPointerCapture(p.pointerId):l.releasePointerCapture(p.pointerId),console.log("on/off pointer down",l.hasPointerCapture(p.pointerId))};l.addEventListener("pointerdown",s);const d=()=>{this.PressButton(t,o,0,!0)};l.addEventListener("pointerup",d),n.push(function(){window.removeEventListener("touchstart",c),l.removeEventListener("pointerenter",a),l.removeEventListener("pointerleave",u),l.removeEventListener("pointerdown",s),l.removeEventListener("pointerup",d),l.removeEventListener("pointercancel",f)})}else if(i.type==Vt.variable){const s={...i},d=this.AddDragControlListener(s,(p,h,m)=>{let g=p?this.buttonPressThreshold+1e-5:0;g+=i.directions[ae.left]||i.directions[ae.right]?Math.abs(h):0,g+=i.directions[ae.up]||i.directions[ae.down]?Math.abs(m):0,this.PressButton(t,i.buttonIndex,Math.min(g,1),p)});n.push(function(){window.removeEventListener("touchstart",c),l.removeEventListener("pointerenter",a),l.removeEventListener("pointerleave",u),l.removeEventListener("pointercancel",f),d()})}}this.emulatedGamepadsMetadata[t].removeButtonListenersFunc=()=>{n.forEach(i=>i())}}AddDisplayJoystickEventListeners(t,e){if(!this.emulatedGamepads[t])throw new Error("Error: AddDisplayJoystickEventListeners() - no emulated gamepad at index "+t+", pass a valid index, or call AddEmulatedGamepad() first to create an emulated gamepad at that index");let n=[];for(let r=0;r<e.length;r++){const i=e[r];if(i.tapTarget==null){console.warn(`AddDisplayJoystickEventListeners() - no tap target in joystick config ${r}, skipping...`);continue}const o=this.AddDragControlListener(i,(l,c,a)=>{i.xAxisIndex!==void 0&&this.MoveAxis(t,i.xAxisIndex,c),i.yAxisIndex!==void 0&&this.MoveAxis(t,i.yAxisIndex,a)});n.push(o)}this.emulatedGamepadsMetadata[t].removeJoystickListenersFunc=()=>{n.forEach(r=>r())}}ClearDisplayButtonEventListeners(t){var e;this.emulatedGamepadsMetadata[t]&&((e=this.emulatedGamepadsMetadata[t])!=null&&e.removeButtonListenersFunc)&&this.emulatedGamepadsMetadata[t].removeButtonListenersFunc()}ClearDisplayJoystickEventListeners(t){var e;this.emulatedGamepadsMetadata[t]&&((e=this.emulatedGamepadsMetadata[t])!=null&&e.removeJoystickListenersFunc)&&this.emulatedGamepadsMetadata[t].removeJoystickListenersFunc()}AddDragControlListener(t,e){let n={startX:0,startY:0},r=-1;const i=c=>{var a=c.pointerId;if(r===a){const u=t.directions[ae.left]?-1:0,f=t.directions[ae.right]?1:0,s=t.directions[ae.up]?-1:0,d=t.directions[ae.down]?1:0,p=c.clientX-n.startX,h=c.clientY-n.startY;let{x:m,y:g}=L1(p,h,t.dragDistance);m=Math.max(Math.min(m,f),u),g=Math.max(Math.min(g,d),s),e(!0,m,g)}},o=c=>{r==c.pointerId&&(document.removeEventListener("pointermove",i,!1),document.removeEventListener("pointerup",o,!1),r=-1,e(!1,0,0))};t.tapTarget.addEventListener("pointerdown",c=>{c.preventDefault(),n.startX=c.clientX,n.startY=c.clientY,r=c.pointerId,t.lockTargetWhilePressed?t.tapTarget.setPointerCapture(c.pointerId):t.tapTarget.releasePointerCapture(c.pointerId),console.log("stick pointer down",t.tapTarget.hasPointerCapture(c.pointerId)),e(!0,0,0),document.addEventListener("pointermove",i,!1),document.addEventListener("pointerup",o,!1)});const l=c=>{c.changedTouches[0].target==t.tapTarget&&c.preventDefault()};return window.addEventListener("touchstart",l,{passive:!1}),function(){window.removeEventListener("touchstart",l),t.tapTarget.removeEventListener("pointerdown",i)}}cloneGamepad(t){if(!t)return t;const e=t.axes?t.axes.length:0,n=t.buttons?t.buttons.length:0,r={};for(let i in t)if(i==="axes"){const o=new Array(e);for(let l=0;l<e;l++)o[l]=Number(t.axes[l]);Object.defineProperty(r,"axes",{value:o,enumerable:!0})}else if(i==="buttons"){const o=new Array(n);for(let l=0;l<n;l++){const c=t.buttons[l];if(c==null)o[l]=c;else{const a=c.pressed,u=c.value,f=c.touched||!1;o[l]={pressed:a,value:u,touched:f}}}Object.defineProperty(r,"buttons",{value:o,enumerable:!0})}else Object.defineProperty(r,i,{get:()=>t[i],configurable:!0,enumerable:!0});return r.emulation||(r.emulation=gn.real),r}nextEmptyEGpadIndex(t){let e=0;if(t)do{if(!this.emulatedGamepads[e])break;e++}while(e<this.emulatedGamepads.length);else{const n=Math.max(this.emulatedGamepads.length,this.patchedGpadToRealIndexMap.length);do{if(!this.emulatedGamepads[e]&&this.patchedGpadToRealIndexMap[e]==null)break;console.log("nextEmptyEGpadIndex",e,!this.emulatedGamepads[e],this.patchedGpadToRealIndexMap[e]==null),e++}while(e<n)}return e}nextEmptyRealGpadIndex(t){let e=t;const n=Math.max(this.emulatedGamepads.length,this.patchedGpadToRealIndexMap.length);do{const r=this.emulatedGamepadsMetadata[e],i=this.realGpadToPatchedIndexMap[e]==null&&this.patchedGpadToRealIndexMap[e]==null;if(r&&r.overlayMode||!r&&i)break;e++}while(e<n);return e}monkeyPatchGamepadEvents(){let t,e,n,r;window.hasOwnProperty("ongamepadconnected")&&(t=Object.getOwnPropertyDescriptor(window,"ongamepadconnected"),n=window.ongamepadconnected,window.ongamepadconnected=null,Object.defineProperty(window,"ongamepadconnected",{get:()=>function(l){},set:l=>{n=l},configurable:!0})),window.hasOwnProperty("ongamepaddisconnected")&&(e=Object.getOwnPropertyDescriptor(window,"ongamepaddisconnected"),r=window.ongamepaddisconnected,window.ongamepaddisconnected=null,Object.defineProperty(window,"ongamepaddisconnected",{get:()=>function(l){},set:l=>{n=l},configurable:!0}));const i=l=>{const c=l.gamepad;if(c&&c.emulation===void 0){l.stopImmediatePropagation();const a=this.cloneGamepad(l.gamepad),u=a.index,f=this.nextEmptyRealGpadIndex(u);this.realGpadToPatchedIndexMap[u]=f,this.patchedGpadToRealIndexMap[f]=u,Object.defineProperty(a,"index",{get:()=>f}),Object.defineProperty(a,"emulation",{get:()=>gn.real}),console.log(`real gamepad connected ${a.id} (${u}>${f})`,this.realGpadToPatchedIndexMap,this.emulatedGamepads,this.emulatedGamepadsMetadata),l=new Event("gamepadconnected"),l.gamepad=a,window.dispatchEvent(l)}console.log("windowOngamepadconnected",n),n&&n.call(window,l)};window.addEventListener("gamepadconnected",i);const o=l=>{const c=l.gamepad;if(c&&c.emulation===void 0){l.stopImmediatePropagation();const a=this.cloneGamepad(l.gamepad),u=this.realGpadToPatchedIndexMap[a.index]||a.index;Object.defineProperty(a,"index",{get:()=>u}),delete this.realGpadToPatchedIndexMap[a.index],delete this.patchedGpadToRealIndexMap[u],l=new Event("gamepaddisconnected"),l.gamepad=a,window.dispatchEvent(l)}r&&r.call(window,l)};return window.addEventListener("gamepaddisconnected",o),function(){window.removeEventListener("gamepadconnected",i),window.hasOwnProperty("ongamepadconnected")&&(Object.defineProperty(window,"ongamepadconnected",t),window.ongamepadconnected=n),window.removeEventListener("gamepaddisconnected",o),window.hasOwnProperty("ongamepaddisconnected")&&(Object.defineProperty(window,"ongamepaddisconnected",e),window.ongamepaddisconnected=r)}}monkeyPatchGetGamepads(){const t=this;let e=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads||navigator.msGetGamepads;e&&(this.getNativeGamepads=e),navigator.getGamepads=function(){let n=[],r=e!=null?t.getNativeGamepads.apply(navigator):[];for(let o=0;o<r.length;o++){const l=r[o];if(!l)continue;let c=t.cloneGamepad(l),a=t.realGpadToPatchedIndexMap[c.index]||c.index;Object.defineProperty(c,"index",{get:()=>a}),n[a]=c}let i=t.emulatedGamepads;for(let o=0;o<i.length;o++){let l=n[o],c=i[o];if(c&&l){l.emulation=gn.overlay;let a=Math.max(l.buttons.length,c.buttons.length);for(let f=0;f<a;f++){const s=c.buttons[f]||{touched:!1,pressed:!1,value:0},d=l.buttons[f]||{touched:!1,pressed:!1,value:0};n[o].buttons[f]={touched:s.touched||d.touched||!1,pressed:s.pressed||d.pressed||!1,value:Math.max(s.value,d.value)||0}}let u=Math.max(c.axes.length,l.axes.length);for(let f=0;f<u;f++){const s=c.axes[f]||0,d=l.axes[f]||0;n[o].axes[f]=Math.abs(s||0)>Math.abs(d||0)?s||0:d||0}}else c&&(c.emulation=gn.emulated,c.timestamp=Math.floor(Date.now()/1e3),n[o]=t.cloneGamepad(c))}return n}}cleanup(){for(let t=0;t<this.emulatedGamepads.length;t++)this.ClearDisplayButtonEventListeners(t),this.ClearDisplayJoystickEventListeners(t);this.emulatedGamepads=[],this.undoEventPatch(),navigator.getGamepads=this.getNativeGamepads,ei.instanceRunning=!1}};let jc=ei;Bt(jc,"instanceRunning",!1);var G1=Object.defineProperty,V1=(t,e,n)=>e in t?G1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Dt=(t,e,n)=>(V1(t,typeof e!="symbol"?e+"":e,n),n);class Nc{constructor(e){Dt(this,"updateDelay"),Dt(this,"axisDeadZone"),Dt(this,"buttonConfigs"),Dt(this,"currentStateOfGamepads"),Dt(this,"gamepadConnectListeners"),Dt(this,"gamepadDisconnectListeners"),Dt(this,"gamepadButtonChangeListeners"),Dt(this,"gamepadAxisChangeListeners"),this.updateDelay=e.updateDelay||0,this.axisDeadZone=e.axisDeadZone||0,this.buttonConfigs=e.buttonConfigs||[],this.currentStateOfGamepads=[],this.gamepadConnectListeners=[],this.gamepadDisconnectListeners=[],this.gamepadButtonChangeListeners=[],this.gamepadAxisChangeListeners=[],navigator.gamepadInputEmulation="gamepad",window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,navigator.getGamepads=navigator.getGamepads||navigator.webkitGetGamepads||navigator.mozGetGamepads||navigator.msGetGamepads,this.gamepadApiSupported()&&this.tickLoop()}setButtonsConfig(e){this.buttonConfigs=e}onGamepadConnect(e){return this.gamepadConnectListeners.push(e),window.addEventListener("gamepadconnected",e,!0),e}offGamepadConnect(e){this.gamepadConnectListeners=this.gamepadConnectListeners.filter(n=>n!==e),window.removeEventListener("gamepadconnected",e,!0)}onGamepadDisconnect(e){return this.gamepadDisconnectListeners.push(e),window.addEventListener("gamepaddisconnected",e,!0),e}offGamepadDisconnect(e){this.gamepadDisconnectListeners=this.gamepadDisconnectListeners.filter(n=>n!==e),window.removeEventListener("gamepaddisconnected",e,!0)}onGamepadAxisChange(e){return this.gamepadAxisChangeListeners.push(e),e}offGamepadAxisChange(e){this.gamepadAxisChangeListeners=this.gamepadAxisChangeListeners.filter(n=>n!==e)}onGamepadButtonChange(e){return this.gamepadButtonChangeListeners.push(e),e}offGamepadButtonChange(e){this.gamepadButtonChangeListeners=this.gamepadButtonChangeListeners.filter(n=>n!==e)}gamepadApiSupported(){return!!navigator.getGamepads&&!!navigator.getGamepads()}getCurrentGamepadStates(e=!1){return e&&this.checkForGamepadChanges(),this.currentStateOfGamepads}tickLoop(){this.checkForGamepadChanges(),this.updateDelay==0?requestAnimationFrame(this.tickLoop.bind(this)):setTimeout(()=>{requestAnimationFrame(this.tickLoop.bind(this))},this.updateDelay)}checkForGamepadChanges(){let e=navigator.getGamepads();for(var n=0;n<e.length;n++){let r=e[n];!r||(this.currentStateOfGamepads[n]||(this.currentStateOfGamepads[n]=r),this.checkForAxisChanges(n,r),this.checkForButtonChanges(n,r),this.currentStateOfGamepads[n]=r)}}checkForAxisChanges(e,n){let r=n.axes;if(r.length==0)return;let i=this.currentStateOfGamepads[e].axes||[],o=[],l,c=!1;for(l=0;l<r.length;l++){let a=r[l]||0,u=i[l]||0;if(a!=u){if(Math.abs(a)<this.axisDeadZone&&Math.abs(u)<this.axisDeadZone)continue;o[l]=!0,c=!0}else o[l]=!1}c&&this.gamepadAxisChangeListeners.forEach(a=>a(e,n,o))}checkForButtonChanges(e,n){let r=n.buttons;if(r.length==0)return;const i=this.currentStateOfGamepads[e].buttons||r;let o=[],l,c=!1;for(l=0;l<r.length;l++){let a=!1;const u=r[l]||{pressed:!1,value:0,touched:!1},f=i[l]||{pressed:!1,value:0,touched:!1},s=this.buttonConfigs[l]||{},d={};u.touched&&!f.touched?(d.touchDown=!0,a=!0):!u.touched&&f.touched&&(d.touchUp=!0,a=!0),u.pressed&&!f.pressed?(d.pressed=!0,a=!0):!u.pressed&&f.pressed&&(d.released=!0,a=!0),s.fireWhileHolding&&u.pressed&&f.pressed&&(d.heldDown=!0,a=!0),u.value!=f.value&&(d.valueChanged=!0,a=!0),a?(c=!0,o[l]=d):o[l]=!1}c&&this.gamepadButtonChangeListeners.forEach(a=>a(e,n,o))}}var U1=Object.defineProperty,z1=(t,e,n)=>e in t?U1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xt=(t,e,n)=>(z1(t,typeof e!="symbol"?e+"":e,n),n);class H1{constructor(e,n){Xt(this,"config"),Xt(this,"apiWrapper"),Xt(this,"btnChangeListener"),Xt(this,"axisChangeListener"),Xt(this,"DefaultJoystickDisplayFunction",(r,i,o)=>{const l=r.movementRange;if(r.joystickElement.style.transform=`translate(${i*l}px,${o*l}px)`,r.highlights&&this.config.moveDirectionHighlightClass){const c=r.highlights[ae.up],a=r.highlights[ae.down],u=r.highlights[ae.left],f=r.highlights[ae.right];c&&o<-.1?c.classList.add(this.config.moveDirectionHighlightClass||""):c&&c.classList.remove(this.config.moveDirectionHighlightClass||""),a&&o>.1?a.classList.add(this.config.moveDirectionHighlightClass||""):a&&a.classList.remove(this.config.moveDirectionHighlightClass||""),u&&i<-.1?u.classList.add(this.config.moveDirectionHighlightClass||""):u&&u.classList.remove(this.config.moveDirectionHighlightClass||""),f&&i>.1?f.classList.add(this.config.moveDirectionHighlightClass||""):f&&f.classList.remove(this.config.moveDirectionHighlightClass||"")}}),Xt(this,"DefaultButtonDisplayFunction",(r,i,o,l,c,a)=>{const u=r.highlight;if(this.config.touchedHighlightClass&&u&&(c.touchDown?u.classList.add(this.config.touchedHighlightClass):c.touchUp&&u.classList.remove(this.config.touchedHighlightClass)),this.config.pressedHighlightClass&&u&&(c.pressed?u.classList.add(this.config.pressedHighlightClass):c.released&&u.classList.remove(this.config.pressedHighlightClass)),r.type==Vt.variable){const f=r.directionHighlight;if(this.config.moveDirectionHighlightClass&&f&&(c.pressed?f.classList.add(this.config.moveDirectionHighlightClass):c.released&&f.classList.remove(this.config.moveDirectionHighlightClass)),r.buttonElement){const s=r.direction==ae.left||r.direction==ae.right,d=r.direction==ae.right||r.direction==ae.down;r.buttonElement.style.transform=`translate${s?"X":"Y"}(${d?"":"-"}${i*r.movementRange}px)`}}}),Xt(this,"displayButtonChanges",(r,i,o)=>{if(r!=this.config.gamepadIndex)return;const l=this.config.buttons;for(let c=0;c<l.length;c++){const a=o[c];if(!a||Object.keys(a).length==0)continue;const u=l[c],f=i.buttons[c].value,s=i.buttons[c].touched,d=i.buttons[c].pressed;this.config.buttonDisplayFunction?this.config.buttonDisplayFunction(u,f,s,d,a,c):this.DefaultButtonDisplayFunction(u,f,s,d,a,c)}}),this.config=e,this.apiWrapper=n||new Nc({buttonConfigs:[],updateDelay:0}),this.btnChangeListener=this.apiWrapper.onGamepadButtonChange(this.displayButtonChanges.bind(this)),this.axisChangeListener=this.apiWrapper.onGamepadAxisChange(this.displayJoystickChanges.bind(this))}displayJoystickChanges(e,n,r){if(e!=this.config.gamepadIndex)return;const i=this.config.sticks;for(let o=0;o<i.length;o++){const l=i[o];if(l.xAxisIndex!==void 0&&r[l.xAxisIndex]||l.yAxisIndex!==void 0&&r[l.yAxisIndex]){const c=n.axes,a=l.xAxisIndex!==void 0&&c[l.xAxisIndex]||0,u=l.yAxisIndex!==void 0&&c[l.yAxisIndex]||0;this.config.joystickDisplayFunction?this.config.joystickDisplayFunction(l,a,u):this.DefaultJoystickDisplayFunction(l,a,u)}}}Cleanup(){this.apiWrapper.offGamepadButtonChange(this.btnChangeListener),this.apiWrapper.offGamepadAxisChange(this.axisChangeListener)}}const zs=0,Hs=1,qs=3,zn=[];class q1{constructor(e=10){N(this,"gpadUi");N(this,"gpadEmulator");N(this,"gpadApiWrapper");N(this,"touchedGpadButtonCount");N(this,"throttleDelay");N(this,"onAxisChange");N(this,"onButtonChange");this.gpadUi=new x1,this.touchedGpadButtonCount=0,this.throttleDelay=e,this.gpadEmulator=new jc(.1),this.gpadApiWrapper=new Nc({axisDeadZone:.05,updateDelay:0,buttonConfigs:[]}),this.gpadApiWrapper.gamepadApiSupported()||this.gpadUi.showNotSupported(),this.gpadApiWrapper.onGamepadConnect(this.gamepadConnectDisconnectHandler.bind(this)),this.gpadApiWrapper.onGamepadDisconnect(this.gamepadConnectDisconnectHandler.bind(this)),this.gpadApiWrapper.onGamepadAxisChange(this.handleAxisChange.bind(this)),this.gpadApiWrapper.onGamepadButtonChange(this.handleButtonChange.bind(this)),this.setupGamepadEvents(this.throttleDelay)}setupOnscreenGamepad(e){this.gpadEmulator.AddEmulatedGamepad(0,!0,Lc,Fc),this.setupGamepadDisplay(0,e),this.setupEmulatedGamepadInput(0,e),this.addEmulatedGamepadKeyboardBindings(0),this.addHelpTooltips()}setupGamepadEvents(e){be("gamepad throttle delay: "+e),this.throttleDelay=e,this.clearExternalEventListenerCallbacks(),this.setupExternalEventListenerCallbacks((n,r)=>{if(n.buttons[12].pressed){let i=this.throttleDelay+1;this.setupGamepadEvents(i)}else if(n.buttons[13].pressed){let i=Math.max(this.throttleDelay-1,1);this.setupGamepadEvents(i)}else n.buttons[14].pressed?this.setupGamepadEvents(10):n.buttons[15].pressed&&this.setupGamepadEvents(100)},n=>{var{VelocityX:r,VelocityY:i,VelocityZ:o,AngularVelocityYaw:l}=dd(n.axes);r==0&&i==0&&o==0&&l==0&&console.info("GAMEPAD MOTION: STOPed"),Ie.moveRov(r,i,o,l)})}gamepadConnectDisconnectHandler(){const e=navigator.getGamepads();var n=e.reduce((r,i)=>i?r+1:r,0);n!=0&&e[0].emulated&&(n-=1),this.gpadUi.showGamepadStatus(n),n>1&&console.log("WARNING: More than one gamepad connected!",e)}setupExternalEventListenerCallbacks(e,n){this.onButtonChange=ca(e,this.throttleDelay,{trailing:!0,leading:!0}),this.onAxisChange=ca(n,this.throttleDelay,{trailing:!0,leading:!0})}clearExternalEventListenerCallbacks(){this.onButtonChange=null,this.onAxisChange=null}handleButtonChange(e,n,r){if(!(e!=0||!n||!n.buttons)){this.onButtonChange&&this.onButtonChange(n,r),(r[8]&&r[8].released||r[9]&&r[9].released)&&this.gpadUi.toggleGamepadHelpScreen();for(let i=0;i<r.length;i++)r[i]&&r[i].touchDown?zn[i]&&zn[i].showTooltipTimeout():r[i]&&r[i].touchUp&&zn[i]&&zn[i].hideTooltip()}}handleAxisChange(e,n){if(e!=0||!n||!n.axes)return;this.onAxisChange&&this.onAxisChange(n);const r=[{axisRange:14,xValue:n.axes[0]||0,yValue:n.axes[1]||0,thumbStickElement:document.getElementById("stick_left"),upIndicatorElement:document.getElementById("l_stick_up_direction_highlight"),downIndicatorElement:document.getElementById("l_stick_down_direction_highlight"),leftIndicatorElement:document.getElementById("l_stick_left_direction_highlight"),rightIndicatorElement:document.getElementById("l_stick_right_direction_highlight"),upHelpText:"Forward",downHelpText:"Back",leftHelpText:"Turn Left",rightHelpText:"Turn Right"},{axisRange:14,xValue:n.axes[2]||0,yValue:n.axes[3]||0,thumbStickElement:document.getElementById("stick_right"),upIndicatorElement:document.getElementById("r_stick_up_direction_highlight"),downIndicatorElement:document.getElementById("r_stick_down_direction_highlight"),leftIndicatorElement:document.getElementById("r_stick_left_direction_highlight"),rightIndicatorElement:document.getElementById("r_stick_right_direction_highlight"),upHelpText:"Up",downHelpText:"Down",leftHelpText:"Strafe Left",rightHelpText:"Strafe Right"}];this.gpadUi.handleGamepadVisualFeedbackAxisEvents(r,.4)}setupGamepadDisplay(e,n){n.querySelectorAll("#stick_right, #stick_left").forEach(o=>{F1(o)});const r=Xr.map((o,l)=>o.includes("trigger")?{type:Vt.variable,highlight:n.querySelector("#"+o+"_highlight"),buttonElement:n.querySelector("#"+o),direction:ae.down,directionHighlight:n.querySelector("#"+o+"_direction_highlight"),movementRange:10}:{type:Vt.onOff,highlight:n.querySelector("#"+o+"_highlight")}),i=[{joystickElement:n.querySelector("#stick_left"),xAxisIndex:0,yAxisIndex:1,movementRange:10,highlights:{[ae.up]:n.querySelector("#l_stick_up_direction_highlight"),[ae.down]:n.querySelector("#l_stick_down_direction_highlight"),[ae.left]:n.querySelector("#l_stick_left_direction_highlight"),[ae.right]:n.querySelector("#l_stick_right_direction_highlight")}},{joystickElement:n.querySelector("#stick_right"),xAxisIndex:2,yAxisIndex:3,movementRange:10,highlights:{[ae.up]:n.querySelector("#r_stick_up_direction_highlight"),[ae.down]:n.querySelector("#r_stick_down_direction_highlight"),[ae.left]:n.querySelector("#r_stick_left_direction_highlight"),[ae.right]:n.querySelector("#r_stick_right_direction_highlight")}}];new H1({gamepadIndex:e,pressedHighlightClass:"pressed",touchedHighlightClass:"touched",moveDirectionHighlightClass:"moved",buttons:r,sticks:i},this.gpadApiWrapper)}setupEmulatedGamepadInput(e,n){const r=Xr.map((o,l)=>o.includes("trigger")?{type:Vt.variable,buttonIndex:l,tapTarget:n.querySelector("#"+o+"_touch_target"),dragDistance:50,lockTargetWhilePressed:!0,directions:{[ae.up]:!1,[ae.down]:!0,[ae.left]:!1,[ae.right]:!1}}:{type:Vt.onOff,buttonIndex:l,lockTargetWhilePressed:o.includes("stick"),tapTarget:n.querySelector("#"+o+"_touch_target")});this.gpadEmulator.AddDisplayButtonEventListeners(e,r);const i=[{tapTarget:n.querySelector("#gamepad-joystick-touch-area-left"),dragDistance:30,xAxisIndex:0,yAxisIndex:1,lockTargetWhilePressed:!0,directions:{[ae.up]:!0,[ae.down]:!0,[ae.left]:!0,[ae.right]:!0}},{tapTarget:n.querySelector("#gamepad-joystick-touch-area-right"),dragDistance:30,xAxisIndex:2,yAxisIndex:3,lockTargetWhilePressed:!0,directions:{[ae.up]:!0,[ae.down]:!0,[ae.left]:!0,[ae.right]:!0}},{tapTarget:n.querySelector("#stick_button_left_touch_target"),dragDistance:30,xAxisIndex:0,yAxisIndex:1,lockTargetWhilePressed:!0,directions:{[ae.up]:!0,[ae.down]:!0,[ae.left]:!0,[ae.right]:!0}},{tapTarget:n.querySelector("#stick_button_right_touch_target"),dragDistance:30,xAxisIndex:2,yAxisIndex:3,lockTargetWhilePressed:!0,directions:{[ae.up]:!0,[ae.down]:!0,[ae.left]:!0,[ae.right]:!0}}];this.gpadEmulator.AddDisplayJoystickEventListeners(e,i)}addEmulatedGamepadKeyboardBindings(e){const n=(r,i)=>{const o=parseInt(i.key);i.key==="a"?this.gpadEmulator.MoveAxis(e,zs,r?-1:0):i.key==="d"?this.gpadEmulator.MoveAxis(e,zs,r?1:0):i.key==="w"?this.gpadEmulator.MoveAxis(e,Hs,r?-1:0):i.key==="s"?this.gpadEmulator.MoveAxis(e,Hs,r?1:0):i.key==="ArrowLeft"||i.key==="ArrowRight"?i.preventDefault():i.key==="ArrowUp"?(this.gpadEmulator.MoveAxis(e,qs,r?-1:0),i.preventDefault()):i.key==="ArrowDown"?(this.gpadEmulator.MoveAxis(e,qs,r?1:0),i.preventDefault()):isNaN(o)?i.keyCode&&this.gpadEmulator.PressButton(e,i.keyCode-66+10,r?1:0,r):this.gpadEmulator.PressButton(e,o,r?1:0,r)};window.onkeydown=r=>n(!0,r),window.onkeyup=r=>n(!1,r)}testGamepadJoysticks(){setInterval(()=>{this.gpadEmulator.MoveAxis(0,0,Math.random()*2-1),this.gpadEmulator.MoveAxis(0,1,Math.random()*2-1),this.gpadEmulator.MoveAxis(0,2,Math.random()*2-1),this.gpadEmulator.MoveAxis(0,3,Math.random()*2-1)},10)}addHelpTooltips(){Xr.forEach((e,n)=>{const r=document.getElementById(e+"_touch_target");r&&(zn[n]=$r(r,{label:ra[n].helpLabel,placement:ra[n].tooltipPlacement},!1))})}}const zi=new q1(10);function W1(t){let e,n,r,i,o,l,c,a,u;return{c(){e=R("div"),n=R("div"),r=K(),i=R("div"),o=K(),l=R("div"),c=K(),a=R("div"),D(n,"id","gamepad-joystick-touch-area-left"),D(n,"class","gamepad-joystick-touch-area svelte-10uba26"),D(i,"id","gamepad-joystick-touch-area-right"),D(i,"class","gamepad-joystick-touch-area svelte-10uba26"),D(l,"class","gpad-display gpad-display-left"),mt(l,"hidden",!t[0]),D(a,"class","gpad-display gpad-display-right"),mt(a,"hidden",!t[0]),D(e,"id","gamepad-container"),D(e,"class",u=(t[2],""))},m(f,s){O(f,e,s),B(e,n),B(e,r),B(e,i),B(e,o),B(e,l),l.innerHTML=I1,B(e,c),B(e,a),a.innerHTML=B1,t[6](e)},p(f,[s]){s&1&&mt(l,"hidden",!f[0]),s&1&&mt(a,"hidden",!f[0]),s&4&&u!==(u=(f[2],""))&&D(e,"class",u)},i:fe,o:fe,d(f){f&&P(e),t[6](null)}}}function X1(t,e,n){let r,i,o;Re(t,vn,s=>n(4,i=s)),Re(t,kn,s=>n(5,o=s));let l,{visible:c=!0}=e,{disabled:a=!1}=e;const u=ci.subscribe(s=>{s&&(u(),zi.setupOnscreenGamepad(l))});function f(s){ne[s?"unshift":"push"](()=>{l=s,n(1,l)})}return t.$$set=s=>{"visible"in s&&n(0,c=s.visible),"disabled"in s&&n(3,a=s.disabled)},t.$$.update=()=>{t.$$.dirty&48&&n(2,r=o===X.connected||o===X.connecting||o===X.reconnecting||i===X.connecting||i===X.reconnecting||i===X.disconnected),t.$$.dirty&9&&(c&&!a?zi.clearExternalEventListenerCallbacks():zi.setupGamepadEvents(10))},[c,l,r,a,i,o,f]}class Q1 extends we{constructor(e){super(),Te(this,e,X1,W1,Se,{visible:0,disabled:3})}}function Y1(t){let e,n;return{c(){e=R("div"),D(e,"id","livestream_container"),D(e,"class",n=An(t[1]?"full":"")+" svelte-4narkd")},m(r,i){O(r,e,i),t[4](e)},p(r,[i]){i&2&&n!==(n=An(r[1]?"full":"")+" svelte-4narkd")&&D(e,"class",n)},i:fe,o:fe,d(r){r&&P(e),t[4](null)}}}function K1(t,e,n){let r,i,o;Re(t,ui,s=>n(2,r=s)),Re(t,ci,s=>n(3,i=s)),Re(t,Po,s=>n(1,o=s));let l=null,c=null;const a=s=>{if(!s||s==c)return;c=s;const d=document.createElement("video");d.id="video_livestream",d.muted=!0,d.autoplay=!0,d.controls=!1,d.srcObject=s,d.setAttribute("tabindex","-1"),n(0,l.innerHTML="",l),l.appendChild(d),d.onclick=()=>{d.play()},setTimeout(()=>{d.play().catch(p=>{be("Click video to play.",5e3,()=>{d.play()})})},150)},u=Sl.subscribe(s=>{!s||s==c||(s.onaddtrack=function(d){console.log("Got remote track from relay",d.track),a(new MediaStream([d.track]))},a(s))});yt(()=>{videoElement&&(videoElement.pause(),videoElement.srcObject=null),u()});function f(s){ne[s?"unshift":"push"](()=>{l=s,n(0,l)})}return t.$$.update=()=>{t.$$.dirty&12&&i===!0&&(r==X.connecting||r==X.reconnecting?wt(Oe.awaitingVideoCall,null):(r==X.disconnected||r==X.connected)&&it(Oe.awaitingVideoCall))},[l,o,r,i,f]}class Ws extends we{constructor(e){super(),Te(this,e,K1,Y1,Se,{})}}/* @license twgl.js 5.3.1 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */function J1(t){let e,n,r,i,o,l,c,a,u,f,s,d,p,h,m,g,v,y,_;return n=new ld({props:{options:{reversed:!0,intro:{y:192},pausable:!0,classes:["toast-msg"]}}}),i=new _1({}),l=new Lh({}),a=new fd({}),f=new Ws({}),d=new Ws({}),h=new Q1({props:{disabled:t[0]!==X.connected}}),g=new D1({}),y=new T1({}),{c(){e=R("main"),se(n.$$.fragment),r=K(),se(i.$$.fragment),o=K(),se(l.$$.fragment),c=K(),se(a.$$.fragment),u=K(),se(f.$$.fragment),s=K(),se(d.$$.fragment),p=K(),se(h.$$.fragment),m=K(),se(g.$$.fragment),v=K(),se(y.$$.fragment),D(e,"class","svelte-18jji2s")},m(b,E){O(b,e,E),re(n,e,null),B(e,r),re(i,e,null),B(e,o),re(l,e,null),B(e,c),re(a,e,null),B(e,u),re(f,e,null),B(e,s),re(d,e,null),B(e,p),re(h,e,null),B(e,m),re(g,e,null),B(e,v),re(y,e,null),_=!0},p(b,[E]){const w={};E&1&&(w.disabled=b[0]!==X.connected),h.$set(w)},i(b){_||(k(n.$$.fragment,b),k(i.$$.fragment,b),k(l.$$.fragment,b),k(a.$$.fragment,b),k(f.$$.fragment,b),k(d.$$.fragment,b),k(h.$$.fragment,b),k(g.$$.fragment,b),k(y.$$.fragment,b),_=!0)},o(b){T(n.$$.fragment,b),T(i.$$.fragment,b),T(l.$$.fragment,b),T(a.$$.fragment,b),T(f.$$.fragment,b),T(d.$$.fragment,b),T(h.$$.fragment,b),T(g.$$.fragment,b),T(y.$$.fragment,b),_=!1},d(b){b&&P(e),ie(n),ie(i),ie(l),ie(a),ie(f),ie(d),ie(h),ie(g),ie(y)}}}function Z1(t,e,n){let r,i,o,l;return Re(t,vn,c=>n(1,r=c)),Re(t,kn,c=>n(0,i=c)),Re(t,$t,c=>n(2,o=c)),Re(t,ci,c=>n(3,l=c)),cf("rovPeerIdEndNumber",$t,0),lf("ourPeerId",Cn),Mn(()=>{ci.set(!0),wt(Oe.internetCheck,null),o0(()=>{it(Oe.internetCheck),_i.setSendMessageCallback(Kt.sendMessageToCurrentRov.bind(Kt)),Kt.start()})}),yt(()=>{Ie.stopPingLoop(),gpadCtrl.gpadEmulator.cleanup()}),t.$$.update=()=>{t.$$.dirty&15&&l===!0&&(i==X.connecting?(wt(Oe.webrtcConnecting,"Searching for "+vi(o)),Ie.stopPingLoop()):i==X.reconnecting?(wt(Oe.webrtcReconnecting,null),Ie.stopPingLoop()):i==X.disconnected?(it(Oe.webrtcReconnecting),it(Oe.webrtcConnecting),Ie.stopPingLoop()):i==X.connected&&(be("Connected to ROV!",1e3),it(Oe.webrtcReconnecting),it(Oe.webrtcConnecting),Ie.startPingLoop()),r==X.connecting?wt(Oe.serverConnecting,null):r==X.reconnecting?it(Oe.serverReconnecting):(r==X.disconnected||r==X.connected)&&(it(Oe.serverConnecting),it(Oe.serverReconnecting)))},[i,r,o,l]}class $1 extends we{constructor(e){super(),Te(this,e,Z1,J1,Se,{})}}Si.set(ff("debug")!=null);document.addEventListener("fullscreenchange",t=>{Po.set(document.fullscreenElement!==null)});window.onbeforeunload=()=>{Kt.cleanup()};new $1({target:document.getElementById("app")});
//# sourceMappingURL=index-b47ed064.js.map
