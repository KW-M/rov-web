var vt=Object.defineProperty;var gt=(e,i,t)=>i in e?vt(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var ht=(e,i,t)=>(gt(e,typeof i!="symbol"?i+"":i,t),t);import{E as ENCODE_TXT,D as DECODE_TXT}from"./consts-87a546d8.js";function waitfor(e){return new Promise(i=>{setTimeout(()=>{i("")},e)})}function appendLog(...e){console.log(...e);const i=document.createElement("p");i.innerText=e.map(t=>JSON.stringify(t)).join(" | "),document.body.appendChild(i)}function getWebsocketURL(e,i=!1){return e.replace("http","ws")}function _mergeNamespaces(e,i){return i.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(n){if(n!=="default"&&!(n in e)){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}})}),Object.freeze(e)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var loglevelExports={},loglevel={get exports(){return loglevelExports},set exports(e){loglevelExports=e}};(function(e){(function(i,t){e.exports?e.exports=t():i.log=t()})(commonjsGlobal,function(){var i=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"];function s(m,w){var k=m[w];if(typeof k.bind=="function")return k.bind(m);try{return Function.prototype.bind.call(k,m)}catch{return function(){return Function.prototype.apply.apply(k,[m,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(m){return m==="debug"&&(m="log"),typeof console===t?!1:m==="trace"&&n?d:console[m]!==void 0?s(console,m):console.log!==void 0?s(console,"log"):i}function f(m,w){for(var k=0;k<a.length;k++){var C=a[k];this[C]=k<m?i:this.methodFactory(C,m,w)}this.log=this.debug}function c(m,w,k){return function(){typeof console!==t&&(f.call(this,w,k),this[m].apply(this,arguments))}}function p(m,w,k){return o(m)||c.apply(this,arguments)}function v(m,w,k){var C=this,O;w=w??"WARN";var P="loglevel";typeof m=="string"?P+=":"+m:typeof m=="symbol"&&(P=void 0);function M(Z){var re=(a[Z]||"silent").toUpperCase();if(!(typeof window===t||!P)){try{window.localStorage[P]=re;return}catch{}try{window.document.cookie=encodeURIComponent(P)+"="+re+";"}catch{}}}function D(){var Z;if(!(typeof window===t||!P)){try{Z=window.localStorage[P]}catch{}if(typeof Z===t)try{var re=window.document.cookie,Y=re.indexOf(encodeURIComponent(P)+"=");Y!==-1&&(Z=/^([^;]+)/.exec(re.slice(Y))[1])}catch{}return C.levels[Z]===void 0&&(Z=void 0),Z}}function $(){if(!(typeof window===t||!P)){try{window.localStorage.removeItem(P);return}catch{}try{window.document.cookie=encodeURIComponent(P)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}C.name=m,C.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},C.methodFactory=k||p,C.getLevel=function(){return O},C.setLevel=function(Z,re){if(typeof Z=="string"&&C.levels[Z.toUpperCase()]!==void 0&&(Z=C.levels[Z.toUpperCase()]),typeof Z=="number"&&Z>=0&&Z<=C.levels.SILENT){if(O=Z,re!==!1&&M(Z),f.call(C,Z,m),typeof console===t&&Z<C.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+Z},C.setDefaultLevel=function(Z){w=Z,D()||C.setLevel(Z,!1)},C.resetLevel=function(){C.setLevel(w,!1),$()},C.enableAll=function(Z){C.setLevel(C.levels.TRACE,Z)},C.disableAll=function(Z){C.setLevel(C.levels.SILENT,Z)};var H=D();H==null&&(H=w),C.setLevel(H,!1)}var l=new v,u={};l.getLogger=function(w){if(typeof w!="symbol"&&typeof w!="string"||w==="")throw new TypeError("You must supply a name when creating a logger.");var k=u[w];return k||(k=u[w]=new v(w,l.getLevel(),l.methodFactory)),k};var h=typeof window!==t?window.log:void 0;return l.noConflict=function(){return typeof window!==t&&window.log===l&&(window.log=h),l},l.getLoggers=function(){return u},l.default=l,l})})(loglevel);var LogLevel;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(LogLevel||(LogLevel={}));const livekitLogger=loglevelExports.getLogger("livekit");livekitLogger.setLevel(LogLevel.info);var long=Long,wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long(e,i,t){this.low=e|0,this.high=i|0,this.unsigned=!!t}Long.prototype.__isLong__;Object.defineProperty(Long.prototype,"__isLong__",{value:!0});function isLong(e){return(e&&e.__isLong__)===!0}Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,i){var t,n,a;return i?(e>>>=0,(a=0<=e&&e<256)&&(n=UINT_CACHE[e],n)?n:(t=fromBits(e,(e|0)<0?-1:0,!0),a&&(UINT_CACHE[e]=t),t)):(e|=0,(a=-128<=e&&e<128)&&(n=INT_CACHE[e],n)?n:(t=fromBits(e,e<0?-1:0,!1),a&&(INT_CACHE[e]=t),t))}Long.fromInt=fromInt;function fromNumber(e,i){if(isNaN(e))return i?UZERO:ZERO;if(i){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE}return e<0?fromNumber(-e,i).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,i)}Long.fromNumber=fromNumber;function fromBits(e,i,t){return new Long(e,i,t)}Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(e,i,t){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return ZERO;if(typeof i=="number"?(t=i,i=!1):i=!!i,t=t||10,t<2||36<t)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return fromString(e.substring(1),i,t).neg();for(var a=fromNumber(pow_dbl(t,8)),s=ZERO,d=0;d<e.length;d+=8){var o=Math.min(8,e.length-d),f=parseInt(e.substring(d,d+o),t);if(o<8){var c=fromNumber(pow_dbl(t,o));s=s.mul(c).add(fromNumber(f))}else s=s.mul(a),s=s.add(fromNumber(f))}return s.unsigned=i,s}Long.fromString=fromString;function fromValue(e,i){return typeof e=="number"?fromNumber(e,i):typeof e=="string"?fromString(e,i):fromBits(e.low,e.high,typeof i=="boolean"?i:e.unsigned)}Long.fromValue=fromValue;var TWO_PWR_16_DBL=1<<16,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low};LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)};LongPrototype.toString=function(i){if(i=i||10,i<2||36<i)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(MIN_VALUE)){var t=fromNumber(i),n=this.div(t),a=n.mul(t).sub(this);return n.toString(i)+a.toInt().toString(i)}else return"-"+this.neg().toString(i);for(var s=fromNumber(pow_dbl(i,6),this.unsigned),d=this,o="";;){var f=d.div(s),c=d.sub(f.mul(s)).toInt()>>>0,p=c.toString(i);if(d=f,d.isZero())return p+o;for(;p.length<6;)p="0"+p;o=""+p+o}};LongPrototype.getHighBits=function(){return this.high};LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0};LongPrototype.getLowBits=function(){return this.low};LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0};LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var i=this.high!=0?this.high:this.low,t=31;t>0&&!(i&1<<t);t--);return this.high!=0?t+33:t+1};LongPrototype.isZero=function(){return this.high===0&&this.low===0};LongPrototype.eqz=LongPrototype.isZero;LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0};LongPrototype.isPositive=function(){return this.unsigned||this.high>=0};LongPrototype.isOdd=function(){return(this.low&1)===1};LongPrototype.isEven=function(){return(this.low&1)===0};LongPrototype.equals=function(i){return isLong(i)||(i=fromValue(i)),this.unsigned!==i.unsigned&&this.high>>>31===1&&i.high>>>31===1?!1:this.high===i.high&&this.low===i.low};LongPrototype.eq=LongPrototype.equals;LongPrototype.notEquals=function(i){return!this.eq(i)};LongPrototype.neq=LongPrototype.notEquals;LongPrototype.ne=LongPrototype.notEquals;LongPrototype.lessThan=function(i){return this.comp(i)<0};LongPrototype.lt=LongPrototype.lessThan;LongPrototype.lessThanOrEqual=function(i){return this.comp(i)<=0};LongPrototype.lte=LongPrototype.lessThanOrEqual;LongPrototype.le=LongPrototype.lessThanOrEqual;LongPrototype.greaterThan=function(i){return this.comp(i)>0};LongPrototype.gt=LongPrototype.greaterThan;LongPrototype.greaterThanOrEqual=function(i){return this.comp(i)>=0};LongPrototype.gte=LongPrototype.greaterThanOrEqual;LongPrototype.ge=LongPrototype.greaterThanOrEqual;LongPrototype.compare=function(i){if(isLong(i)||(i=fromValue(i)),this.eq(i))return 0;var t=this.isNegative(),n=i.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?i.high>>>0>this.high>>>0||i.high===this.high&&i.low>>>0>this.low>>>0?-1:1:this.sub(i).isNegative()?-1:1};LongPrototype.comp=LongPrototype.compare;LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)};LongPrototype.neg=LongPrototype.negate;LongPrototype.add=function(i){isLong(i)||(i=fromValue(i));var t=this.high>>>16,n=this.high&65535,a=this.low>>>16,s=this.low&65535,d=i.high>>>16,o=i.high&65535,f=i.low>>>16,c=i.low&65535,p=0,v=0,l=0,u=0;return u+=s+c,l+=u>>>16,u&=65535,l+=a+f,v+=l>>>16,l&=65535,v+=n+o,p+=v>>>16,v&=65535,p+=t+d,p&=65535,fromBits(l<<16|u,p<<16|v,this.unsigned)};LongPrototype.subtract=function(i){return isLong(i)||(i=fromValue(i)),this.add(i.neg())};LongPrototype.sub=LongPrototype.subtract;LongPrototype.multiply=function(i){if(this.isZero())return ZERO;if(isLong(i)||(i=fromValue(i)),wasm){var t=wasm.mul(this.low,this.high,i.low,i.high);return fromBits(t,wasm.get_high(),this.unsigned)}if(i.isZero())return ZERO;if(this.eq(MIN_VALUE))return i.isOdd()?MIN_VALUE:ZERO;if(i.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return i.isNegative()?this.neg().mul(i.neg()):this.neg().mul(i).neg();if(i.isNegative())return this.mul(i.neg()).neg();if(this.lt(TWO_PWR_24)&&i.lt(TWO_PWR_24))return fromNumber(this.toNumber()*i.toNumber(),this.unsigned);var n=this.high>>>16,a=this.high&65535,s=this.low>>>16,d=this.low&65535,o=i.high>>>16,f=i.high&65535,c=i.low>>>16,p=i.low&65535,v=0,l=0,u=0,h=0;return h+=d*p,u+=h>>>16,h&=65535,u+=s*p,l+=u>>>16,u&=65535,u+=d*c,l+=u>>>16,u&=65535,l+=a*p,v+=l>>>16,l&=65535,l+=s*c,v+=l>>>16,l&=65535,l+=d*f,v+=l>>>16,l&=65535,v+=n*p+a*c+s*f+d*o,v&=65535,fromBits(u<<16|h,v<<16|l,this.unsigned)};LongPrototype.mul=LongPrototype.multiply;LongPrototype.divide=function(i){if(isLong(i)||(i=fromValue(i)),i.isZero())throw Error("division by zero");if(wasm){if(!this.unsigned&&this.high===-2147483648&&i.low===-1&&i.high===-1)return this;var t=(this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,i.low,i.high);return fromBits(t,wasm.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?UZERO:ZERO;var n,a,s;if(this.unsigned){if(i.unsigned||(i=i.toUnsigned()),i.gt(this))return UZERO;if(i.gt(this.shru(1)))return UONE;s=UZERO}else{if(this.eq(MIN_VALUE)){if(i.eq(ONE)||i.eq(NEG_ONE))return MIN_VALUE;if(i.eq(MIN_VALUE))return ONE;var d=this.shr(1);return n=d.div(i).shl(1),n.eq(ZERO)?i.isNegative()?ONE:NEG_ONE:(a=this.sub(i.mul(n)),s=n.add(a.div(i)),s)}else if(i.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return i.isNegative()?this.neg().div(i.neg()):this.neg().div(i).neg();if(i.isNegative())return this.div(i.neg()).neg();s=ZERO}for(a=this;a.gte(i);){n=Math.max(1,Math.floor(a.toNumber()/i.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),f=o<=48?1:pow_dbl(2,o-48),c=fromNumber(n),p=c.mul(i);p.isNegative()||p.gt(a);)n-=f,c=fromNumber(n,this.unsigned),p=c.mul(i);c.isZero()&&(c=ONE),s=s.add(c),a=a.sub(p)}return s};LongPrototype.div=LongPrototype.divide;LongPrototype.modulo=function(i){if(isLong(i)||(i=fromValue(i)),wasm){var t=(this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,i.low,i.high);return fromBits(t,wasm.get_high(),this.unsigned)}return this.sub(this.div(i).mul(i))};LongPrototype.mod=LongPrototype.modulo;LongPrototype.rem=LongPrototype.modulo;LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)};LongPrototype.and=function(i){return isLong(i)||(i=fromValue(i)),fromBits(this.low&i.low,this.high&i.high,this.unsigned)};LongPrototype.or=function(i){return isLong(i)||(i=fromValue(i)),fromBits(this.low|i.low,this.high|i.high,this.unsigned)};LongPrototype.xor=function(i){return isLong(i)||(i=fromValue(i)),fromBits(this.low^i.low,this.high^i.high,this.unsigned)};LongPrototype.shiftLeft=function(i){return isLong(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?fromBits(this.low<<i,this.high<<i|this.low>>>32-i,this.unsigned):fromBits(0,this.low<<i-32,this.unsigned)};LongPrototype.shl=LongPrototype.shiftLeft;LongPrototype.shiftRight=function(i){return isLong(i)&&(i=i.toInt()),(i&=63)===0?this:i<32?fromBits(this.low>>>i|this.high<<32-i,this.high>>i,this.unsigned):fromBits(this.high>>i-32,this.high>=0?0:-1,this.unsigned)};LongPrototype.shr=LongPrototype.shiftRight;LongPrototype.shiftRightUnsigned=function(i){if(isLong(i)&&(i=i.toInt()),i&=63,i===0)return this;var t=this.high;if(i<32){var n=this.low;return fromBits(n>>>i|t<<32-i,t>>>i,this.unsigned)}else return i===32?fromBits(t,0,this.unsigned):fromBits(t>>>i-32,0,this.unsigned)};LongPrototype.shru=LongPrototype.shiftRightUnsigned;LongPrototype.shr_u=LongPrototype.shiftRightUnsigned;LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this};LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)};LongPrototype.toBytes=function(i){return i?this.toBytesLE():this.toBytesBE()};LongPrototype.toBytesLE=function(){var i=this.high,t=this.low;return[t&255,t>>>8&255,t>>>16&255,t>>>24,i&255,i>>>8&255,i>>>16&255,i>>>24]};LongPrototype.toBytesBE=function(){var i=this.high,t=this.low;return[i>>>24,i>>>16&255,i>>>8&255,i&255,t>>>24,t>>>16&255,t>>>8&255,t&255]};Long.fromBytes=function(i,t,n){return n?Long.fromBytesLE(i,t):Long.fromBytesBE(i,t)};Long.fromBytesLE=function(i,t){return new Long(i[0]|i[1]<<8|i[2]<<16|i[3]<<24,i[4]|i[5]<<8|i[6]<<16|i[7]<<24,t)};Long.fromBytesBE=function(i,t){return new Long(i[4]<<24|i[5]<<16|i[6]<<8|i[7],i[0]<<24|i[1]<<16|i[2]<<8|i[3],t)};var minimalExports={},minimal$1={get exports(){return minimalExports},set exports(e){minimalExports=e}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=e;function e(i,t){for(var n=new Array(arguments.length-1),a=0,s=2,d=!0;s<arguments.length;)n[a++]=arguments[s++];return new Promise(function(f,c){n[a]=function(v){if(d)if(d=!1,v)c(v);else{for(var l=new Array(arguments.length-1),u=0;u<l.length;)l[u++]=arguments[u];f.apply(null,l)}};try{i.apply(t||null,n)}catch(p){d&&(d=!1,c(p))}})}return aspromise}var base64$1={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(e){var i=e;i.length=function(o){var f=o.length;if(!f)return 0;for(var c=0;--f%4>1&&o.charAt(f)==="=";)++c;return Math.ceil(o.length*3)/4-c};for(var t=new Array(64),n=new Array(123),a=0;a<64;)n[t[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;i.encode=function(o,f,c){for(var p=null,v=[],l=0,u=0,h;f<c;){var m=o[f++];switch(u){case 0:v[l++]=t[m>>2],h=(m&3)<<4,u=1;break;case 1:v[l++]=t[h|m>>4],h=(m&15)<<2,u=2;break;case 2:v[l++]=t[h|m>>6],v[l++]=t[m&63],u=0;break}l>8191&&((p||(p=[])).push(String.fromCharCode.apply(String,v)),l=0)}return u&&(v[l++]=t[h],v[l++]=61,u===1&&(v[l++]=61)),p?(l&&p.push(String.fromCharCode.apply(String,v.slice(0,l))),p.join("")):String.fromCharCode.apply(String,v.slice(0,l))};var s="invalid encoding";i.decode=function(o,f,c){for(var p=c,v=0,l,u=0;u<o.length;){var h=o.charCodeAt(u++);if(h===61&&v>1)break;if((h=n[h])===void 0)throw Error(s);switch(v){case 0:l=h,v=1;break;case 1:f[c++]=l<<2|(h&48)>>4,l=h,v=2;break;case 2:f[c++]=(l&15)<<4|(h&60)>>2,l=h,v=3;break;case 3:f[c++]=(l&3)<<6|h,v=0;break}}if(v===1)throw Error(s);return c-p},i.test=function(o){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(o)}}(base64$1)),base64$1}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=e;function e(){this._listeners={}}return e.prototype.on=function(t,n,a){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:n,ctx:a||this}),this},e.prototype.off=function(t,n){if(t===void 0)this._listeners={};else if(n===void 0)this._listeners[t]=[];else for(var a=this._listeners[t],s=0;s<a.length;)a[s].fn===n?a.splice(s,1):++s;return this},e.prototype.emit=function(t){var n=this._listeners[t];if(n){for(var a=[],s=1;s<arguments.length;)a.push(arguments[s++]);for(s=0;s<n.length;)n[s].fn.apply(n[s++].ctx,a)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=e(e);function e(s){return typeof Float32Array<"u"?function(){var d=new Float32Array([-0]),o=new Uint8Array(d.buffer),f=o[3]===128;function c(u,h,m){d[0]=u,h[m]=o[0],h[m+1]=o[1],h[m+2]=o[2],h[m+3]=o[3]}function p(u,h,m){d[0]=u,h[m]=o[3],h[m+1]=o[2],h[m+2]=o[1],h[m+3]=o[0]}s.writeFloatLE=f?c:p,s.writeFloatBE=f?p:c;function v(u,h){return o[0]=u[h],o[1]=u[h+1],o[2]=u[h+2],o[3]=u[h+3],d[0]}function l(u,h){return o[3]=u[h],o[2]=u[h+1],o[1]=u[h+2],o[0]=u[h+3],d[0]}s.readFloatLE=f?v:l,s.readFloatBE=f?l:v}():function(){function d(f,c,p,v){var l=c<0?1:0;if(l&&(c=-c),c===0)f(1/c>0?0:2147483648,p,v);else if(isNaN(c))f(2143289344,p,v);else if(c>34028234663852886e22)f((l<<31|2139095040)>>>0,p,v);else if(c<11754943508222875e-54)f((l<<31|Math.round(c/1401298464324817e-60))>>>0,p,v);else{var u=Math.floor(Math.log(c)/Math.LN2),h=Math.round(c*Math.pow(2,-u)*8388608)&8388607;f((l<<31|u+127<<23|h)>>>0,p,v)}}s.writeFloatLE=d.bind(null,i),s.writeFloatBE=d.bind(null,t);function o(f,c,p){var v=f(c,p),l=(v>>31)*2+1,u=v>>>23&255,h=v&8388607;return u===255?h?NaN:l*(1/0):u===0?l*1401298464324817e-60*h:l*Math.pow(2,u-150)*(h+8388608)}s.readFloatLE=o.bind(null,n),s.readFloatBE=o.bind(null,a)}(),typeof Float64Array<"u"?function(){var d=new Float64Array([-0]),o=new Uint8Array(d.buffer),f=o[7]===128;function c(u,h,m){d[0]=u,h[m]=o[0],h[m+1]=o[1],h[m+2]=o[2],h[m+3]=o[3],h[m+4]=o[4],h[m+5]=o[5],h[m+6]=o[6],h[m+7]=o[7]}function p(u,h,m){d[0]=u,h[m]=o[7],h[m+1]=o[6],h[m+2]=o[5],h[m+3]=o[4],h[m+4]=o[3],h[m+5]=o[2],h[m+6]=o[1],h[m+7]=o[0]}s.writeDoubleLE=f?c:p,s.writeDoubleBE=f?p:c;function v(u,h){return o[0]=u[h],o[1]=u[h+1],o[2]=u[h+2],o[3]=u[h+3],o[4]=u[h+4],o[5]=u[h+5],o[6]=u[h+6],o[7]=u[h+7],d[0]}function l(u,h){return o[7]=u[h],o[6]=u[h+1],o[5]=u[h+2],o[4]=u[h+3],o[3]=u[h+4],o[2]=u[h+5],o[1]=u[h+6],o[0]=u[h+7],d[0]}s.readDoubleLE=f?v:l,s.readDoubleBE=f?l:v}():function(){function d(f,c,p,v,l,u){var h=v<0?1:0;if(h&&(v=-v),v===0)f(0,l,u+c),f(1/v>0?0:2147483648,l,u+p);else if(isNaN(v))f(0,l,u+c),f(2146959360,l,u+p);else if(v>17976931348623157e292)f(0,l,u+c),f((h<<31|2146435072)>>>0,l,u+p);else{var m;if(v<22250738585072014e-324)m=v/5e-324,f(m>>>0,l,u+c),f((h<<31|m/4294967296)>>>0,l,u+p);else{var w=Math.floor(Math.log(v)/Math.LN2);w===1024&&(w=1023),m=v*Math.pow(2,-w),f(m*4503599627370496>>>0,l,u+c),f((h<<31|w+1023<<20|m*1048576&1048575)>>>0,l,u+p)}}}s.writeDoubleLE=d.bind(null,i,0,4),s.writeDoubleBE=d.bind(null,t,4,0);function o(f,c,p,v,l){var u=f(v,l+c),h=f(v,l+p),m=(h>>31)*2+1,w=h>>>20&2047,k=4294967296*(h&1048575)+u;return w===2047?k?NaN:m*(1/0):w===0?m*5e-324*k:m*Math.pow(2,w-1075)*(k+4503599627370496)}s.readDoubleLE=o.bind(null,n,0,4),s.readDoubleBE=o.bind(null,a,4,0)}(),s}function i(s,d,o){d[o]=s&255,d[o+1]=s>>>8&255,d[o+2]=s>>>16&255,d[o+3]=s>>>24}function t(s,d,o){d[o]=s>>>24,d[o+1]=s>>>16&255,d[o+2]=s>>>8&255,d[o+3]=s&255}function n(s,d){return(s[d]|s[d+1]<<8|s[d+2]<<16|s[d+3]<<24)>>>0}function a(s,d){return(s[d]<<24|s[d+1]<<16|s[d+2]<<8|s[d+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=e;function e(i){try{var t=void 0;if(t&&(t.length||Object.keys(t).length))return t}catch{}return null}return inquire_1}var utf8$2={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(e){var i=e;i.length=function(n){for(var a=0,s=0,d=0;d<n.length;++d)s=n.charCodeAt(d),s<128?a+=1:s<2048?a+=2:(s&64512)===55296&&(n.charCodeAt(d+1)&64512)===56320?(++d,a+=4):a+=3;return a},i.read=function(n,a,s){var d=s-a;if(d<1)return"";for(var o=null,f=[],c=0,p;a<s;)p=n[a++],p<128?f[c++]=p:p>191&&p<224?f[c++]=(p&31)<<6|n[a++]&63:p>239&&p<365?(p=((p&7)<<18|(n[a++]&63)<<12|(n[a++]&63)<<6|n[a++]&63)-65536,f[c++]=55296+(p>>10),f[c++]=56320+(p&1023)):f[c++]=(p&15)<<12|(n[a++]&63)<<6|n[a++]&63,c>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,f)),c=0);return o?(c&&o.push(String.fromCharCode.apply(String,f.slice(0,c))),o.join("")):String.fromCharCode.apply(String,f.slice(0,c))},i.write=function(n,a,s){for(var d=s,o,f,c=0;c<n.length;++c)o=n.charCodeAt(c),o<128?a[s++]=o:o<2048?(a[s++]=o>>6|192,a[s++]=o&63|128):(o&64512)===55296&&((f=n.charCodeAt(c+1))&64512)===56320?(o=65536+((o&1023)<<10)+(f&1023),++c,a[s++]=o>>18|240,a[s++]=o>>12&63|128,a[s++]=o>>6&63|128,a[s++]=o&63|128):(a[s++]=o>>12|224,a[s++]=o>>6&63|128,a[s++]=o&63|128);return s-d}}(utf8$2)),utf8$2}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=e;function e(i,t,n){var a=n||8192,s=a>>>1,d=null,o=a;return function(c){if(c<1||c>s)return i(c);o+c>a&&(d=i(a),o=0);var p=t.call(d,o,o+=c);return o&7&&(o=(o|7)+1),p}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=i;var e=requireMinimal();function i(s,d){this.lo=s>>>0,this.hi=d>>>0}var t=i.zero=new i(0,0);t.toNumber=function(){return 0},t.zzEncode=t.zzDecode=function(){return this},t.length=function(){return 1};var n=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(d){if(d===0)return t;var o=d<0;o&&(d=-d);var f=d>>>0,c=(d-f)/4294967296>>>0;return o&&(c=~c>>>0,f=~f>>>0,++f>4294967295&&(f=0,++c>4294967295&&(c=0))),new i(f,c)},i.from=function(d){if(typeof d=="number")return i.fromNumber(d);if(e.isString(d))if(e.Long)d=e.Long.fromString(d);else return i.fromNumber(parseInt(d,10));return d.low||d.high?new i(d.low>>>0,d.high>>>0):t},i.prototype.toNumber=function(d){if(!d&&this.hi>>>31){var o=~this.lo+1>>>0,f=~this.hi>>>0;return o||(f=f+1>>>0),-(o+f*4294967296)}return this.lo+this.hi*4294967296},i.prototype.toLong=function(d){return e.Long?new e.Long(this.lo|0,this.hi|0,!!d):{low:this.lo|0,high:this.hi|0,unsigned:!!d}};var a=String.prototype.charCodeAt;return i.fromHash=function(d){return d===n?t:new i((a.call(d,0)|a.call(d,1)<<8|a.call(d,2)<<16|a.call(d,3)<<24)>>>0,(a.call(d,4)|a.call(d,5)<<8|a.call(d,6)<<16|a.call(d,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var d=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^d)>>>0,this.lo=(this.lo<<1^d)>>>0,this},i.prototype.zzDecode=function(){var d=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^d)>>>0,this.hi=(this.hi>>>1^d)>>>0,this},i.prototype.length=function(){var d=this.lo,o=(this.lo>>>28|this.hi<<4)>>>0,f=this.hi>>>24;return f===0?o===0?d<16384?d<128?1:2:d<2097152?3:4:o<16384?o<128?5:6:o<2097152?7:8:f<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(e){var i=e;i.asPromise=requireAspromise(),i.base64=requireBase64(),i.EventEmitter=requireEventemitter(),i.float=requireFloat(),i.inquire=requireInquire(),i.utf8=requireUtf8(),i.pool=requirePool(),i.LongBits=requireLongbits(),i.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),i.global=i.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s},i.isString=function(s){return typeof s=="string"||s instanceof String},i.isObject=function(s){return s&&typeof s=="object"},i.isset=i.isSet=function(s,d){var o=s[d];return o!=null&&s.hasOwnProperty(d)?typeof o!="object"||(Array.isArray(o)?o.length:Object.keys(o).length)>0:!1},i.Buffer=function(){try{var a=i.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(s){return typeof s=="number"?i.Buffer?i._Buffer_allocUnsafe(s):new i.Array(s):i.Buffer?i._Buffer_from(s):typeof Uint8Array>"u"?s:new Uint8Array(s)},i.Array=typeof Uint8Array<"u"?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(s){return s?i.LongBits.from(s).toHash():i.LongBits.zeroHash},i.longFromHash=function(s,d){var o=i.LongBits.fromHash(s);return i.Long?i.Long.fromBits(o.lo,o.hi,d):o.toNumber(!!d)};function t(a,s,d){for(var o=Object.keys(s),f=0;f<o.length;++f)(a[o[f]]===void 0||!d)&&(a[o[f]]=s[o[f]]);return a}i.merge=t,i.lcFirst=function(s){return s.charAt(0).toLowerCase()+s.substring(1)};function n(a){function s(d,o){if(!(this instanceof s))return new s(d,o);Object.defineProperty(this,"message",{get:function(){return d}}),Error.captureStackTrace?Error.captureStackTrace(this,s):Object.defineProperty(this,"stack",{value:new Error().stack||""}),o&&t(this,o)}return s.prototype=Object.create(Error.prototype,{constructor:{value:s,writable:!0,enumerable:!1,configurable:!0},name:{get(){return a},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),s}i.newError=n,i.ProtocolError=n("ProtocolError"),i.oneOfGetter=function(s){for(var d={},o=0;o<s.length;++o)d[s[o]]=1;return function(){for(var f=Object.keys(this),c=f.length-1;c>-1;--c)if(d[f[c]]===1&&this[f[c]]!==void 0&&this[f[c]]!==null)return f[c]}},i.oneOfSetter=function(s){return function(d){for(var o=0;o<s.length;++o)s[o]!==d&&delete this[s[o]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var a=i.Buffer;if(!a){i._Buffer_from=i._Buffer_allocUnsafe=null;return}i._Buffer_from=a.from!==Uint8Array.from&&a.from||function(d,o){return new a(d,o)},i._Buffer_allocUnsafe=a.allocUnsafe||function(d){return new a(d)}}}(minimal)),minimal}var writer$2=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64=util$4.base64,utf8$1=util$4.utf8;function Op(e,i,t){this.fn=e,this.len=i,this.next=void 0,this.val=t}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$1=function(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$1();Writer$1.alloc=function(i){return new util$4.Array(i)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function(i,t,n){return this.tail=this.tail.next=new Op(i,t,n),this.len+=t,this};function writeByte(e,i,t){i[t]=e&255}function writeVarint32(e,i,t){for(;e>127;)i[t++]=e&127|128,e>>>=7;i[t]=e}function VarintOp(e,i){this.len=e,this.next=void 0,this.val=i}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function(i){return this.len+=(this.tail=this.tail.next=new VarintOp((i=i>>>0)<128?1:i<16384?2:i<2097152?3:i<268435456?4:5,i)).len,this};Writer$1.prototype.int32=function(i){return i<0?this._push(writeVarint64,10,LongBits$1.fromNumber(i)):this.uint32(i)};Writer$1.prototype.sint32=function(i){return this.uint32((i<<1^i>>31)>>>0)};function writeVarint64(e,i,t){for(;e.hi;)i[t++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)i[t++]=e.lo&127|128,e.lo=e.lo>>>7;i[t++]=e.lo}Writer$1.prototype.uint64=function(i){var t=LongBits$1.from(i);return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function(i){var t=LongBits$1.from(i).zzEncode();return this._push(writeVarint64,t.length(),t)};Writer$1.prototype.bool=function(i){return this._push(writeByte,1,i?1:0)};function writeFixed32(e,i,t){i[t]=e&255,i[t+1]=e>>>8&255,i[t+2]=e>>>16&255,i[t+3]=e>>>24}Writer$1.prototype.fixed32=function(i){return this._push(writeFixed32,4,i>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function(i){var t=LongBits$1.from(i);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function(i){return this._push(util$4.float.writeFloatLE,4,i)};Writer$1.prototype.double=function(i){return this._push(util$4.float.writeDoubleLE,8,i)};var writeBytes=util$4.Array.prototype.set?function(i,t,n){t.set(i,n)}:function(i,t,n){for(var a=0;a<i.length;++a)t[n+a]=i[a]};Writer$1.prototype.bytes=function(i){var t=i.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$4.isString(i)){var n=Writer$1.alloc(t=base64.length(i));base64.decode(i,n,0),i=n}return this.uint32(t)._push(writeBytes,t,i)};Writer$1.prototype.string=function(i){var t=utf8$1.length(i);return t?this.uint32(t)._push(utf8$1.write,t,i):this._push(writeByte,1,0)};Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function(){var i=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=i.next,this.tail=t,this.len+=n),this};Writer$1.prototype.finish=function(){for(var i=this.head.next,t=this.constructor.alloc(this.len),n=0;i;)i.fn(i.val,t,n),n+=i.len,i=i.next;return t};Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer$2;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(i,t,n){t.set(i,n)}:function(i,t,n){if(i.copy)i.copy(t,n,0,i.length);else for(var a=0;a<i.length;)t[n++]=i[a++]}};BufferWriter.prototype.bytes=function(i){util$3.isString(i)&&(i=util$3._Buffer_from(i,"base64"));var t=i.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,i),this};function writeStringBuffer(e,i,t){e.length<40?util$3.utf8.write(e,i,t):i.utf8Write?i.utf8Write(e,t):i.write(e,t)}BufferWriter.prototype.string=function(i){var t=util$3.Buffer.byteLength(i);return this.uint32(t),t&&this._push(writeStringBuffer,t,i),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(e,i){return RangeError("index out of range: "+e.pos+" + "+(i||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array=typeof Uint8Array<"u"?function(i){if(i instanceof Uint8Array||Array.isArray(i))return new Reader$1(i);throw Error("illegal buffer")}:function(i){if(Array.isArray(i))return new Reader$1(i);throw Error("illegal buffer")},create=function(){return util$2.Buffer?function(t){return(Reader$1.create=function(a){return util$2.Buffer.isBuffer(a)?new BufferReader$1(a):create_array(a)})(t)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function(){var i=4294967295;return function(){if(i=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(i=(i|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(i=(i|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(i=(i|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(i=(i|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return i;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return i}}();Reader$1.prototype.int32=function(){return this.uint32()|0};Reader$1.prototype.sint32=function(){var i=this.uint32();return i>>>1^-(i&1)|0};function readLongVarint(){var e=new LongBits(0,0),i=0;if(this.len-this.pos>4){for(;i<4;++i)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<i*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;i=0}else{for(;i<3;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<i*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<i*7)>>>0,e}if(this.len-this.pos>4){for(;i<5;++i)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<i*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;i<5;++i){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<i*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function(){return this.uint32()!==0};function readFixed32_end(e,i){return(e[i-4]|e[i-3]<<8|e[i-2]<<16|e[i-1]<<24)>>>0}Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var i=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,i};Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var i=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,i};Reader$1.prototype.bytes=function(){var i=this.uint32(),t=this.pos,n=this.pos+i;if(n>this.len)throw indexOutOfRange(this,i);return this.pos+=i,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)};Reader$1.prototype.string=function(){var i=this.bytes();return utf8.read(i,0,i.length)};Reader$1.prototype.skip=function(i){if(typeof i=="number"){if(this.pos+i>this.len)throw indexOutOfRange(this,i);this.pos+=i}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create(),BufferReader$1._configure();var i=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[i](!1)},uint64:function(){return readLongVarint.call(this)[i](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[i](!1)},fixed64:function(){return readFixed64.call(this)[i](!0)},sfixed64:function(){return readFixed64.call(this)[i](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function(){var i=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+i,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+i,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(e,i,t){if(typeof e!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!i,this.responseDelimited=!!t}Service.prototype.rpcCall=function e(i,t,n,a,s){if(!a)throw TypeError("request must be specified");var d=this;if(!s)return util.asPromise(e,d,i,t,n,a);if(!d.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return d.rpcImpl(i,t[d.requestDelimited?"encodeDelimited":"encode"](a).finish(),function(f,c){if(f)return d.emit("error",f,i),s(f);if(c===null){d.end(!0);return}if(!(c instanceof n))try{c=n[d.responseDelimited?"decodeDelimited":"decode"](c)}catch(p){return d.emit("error",p,i),s(p)}return d.emit("data",c,i),s(null,c)})}catch(o){d.emit("error",o,i),setTimeout(function(){s(o)},0);return}};Service.prototype.end=function(i){return this.rpcImpl&&(i||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(e){var i=e;i.Service=service})(rpc);var roots={};(function(e){var i=e;i.build="minimal",i.Writer=writer$2,i.BufferWriter=writer_buffer,i.Reader=reader,i.BufferReader=reader_buffer,i.util=requireMinimal(),i.rpc=rpc,i.roots=roots,i.configure=t;function t(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}t()})(indexMinimal);(function(e){e.exports=indexMinimal})(minimal$1);var _m0=getDefaultExportFromCjs(minimalExports);(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw"Unable to locate global object"})();_m0.util.Long!==long&&(_m0.util.Long=long,_m0.configure());var TrackType;(function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.DATA=2]="DATA",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(TrackType||(TrackType={}));function trackTypeFromJSON(e){switch(e){case 0:case"AUDIO":return TrackType.AUDIO;case 1:case"VIDEO":return TrackType.VIDEO;case 2:case"DATA":return TrackType.DATA;case-1:case"UNRECOGNIZED":default:return TrackType.UNRECOGNIZED}}function trackTypeToJSON(e){switch(e){case TrackType.AUDIO:return"AUDIO";case TrackType.VIDEO:return"VIDEO";case TrackType.DATA:return"DATA";case TrackType.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var TrackSource;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CAMERA=1]="CAMERA",e[e.MICROPHONE=2]="MICROPHONE",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(TrackSource||(TrackSource={}));function trackSourceFromJSON(e){switch(e){case 0:case"UNKNOWN":return TrackSource.UNKNOWN;case 1:case"CAMERA":return TrackSource.CAMERA;case 2:case"MICROPHONE":return TrackSource.MICROPHONE;case 3:case"SCREEN_SHARE":return TrackSource.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return TrackSource.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return TrackSource.UNRECOGNIZED}}function trackSourceToJSON(e){switch(e){case TrackSource.UNKNOWN:return"UNKNOWN";case TrackSource.CAMERA:return"CAMERA";case TrackSource.MICROPHONE:return"MICROPHONE";case TrackSource.SCREEN_SHARE:return"SCREEN_SHARE";case TrackSource.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";case TrackSource.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var VideoQuality;(function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(VideoQuality||(VideoQuality={}));function videoQualityFromJSON(e){switch(e){case 0:case"LOW":return VideoQuality.LOW;case 1:case"MEDIUM":return VideoQuality.MEDIUM;case 2:case"HIGH":return VideoQuality.HIGH;case 3:case"OFF":return VideoQuality.OFF;case-1:case"UNRECOGNIZED":default:return VideoQuality.UNRECOGNIZED}}function videoQualityToJSON(e){switch(e){case VideoQuality.LOW:return"LOW";case VideoQuality.MEDIUM:return"MEDIUM";case VideoQuality.HIGH:return"HIGH";case VideoQuality.OFF:return"OFF";case VideoQuality.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ConnectionQuality$1;(function(e){e[e.POOR=0]="POOR",e[e.GOOD=1]="GOOD",e[e.EXCELLENT=2]="EXCELLENT",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ConnectionQuality$1||(ConnectionQuality$1={}));function connectionQualityFromJSON(e){switch(e){case 0:case"POOR":return ConnectionQuality$1.POOR;case 1:case"GOOD":return ConnectionQuality$1.GOOD;case 2:case"EXCELLENT":return ConnectionQuality$1.EXCELLENT;case-1:case"UNRECOGNIZED":default:return ConnectionQuality$1.UNRECOGNIZED}}function connectionQualityToJSON(e){switch(e){case ConnectionQuality$1.POOR:return"POOR";case ConnectionQuality$1.GOOD:return"GOOD";case ConnectionQuality$1.EXCELLENT:return"EXCELLENT";case ConnectionQuality$1.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ClientConfigSetting;(function(e){e[e.UNSET=0]="UNSET",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientConfigSetting||(ClientConfigSetting={}));function clientConfigSettingFromJSON(e){switch(e){case 0:case"UNSET":return ClientConfigSetting.UNSET;case 1:case"DISABLED":return ClientConfigSetting.DISABLED;case 2:case"ENABLED":return ClientConfigSetting.ENABLED;case-1:case"UNRECOGNIZED":default:return ClientConfigSetting.UNRECOGNIZED}}function clientConfigSettingToJSON(e){switch(e){case ClientConfigSetting.UNSET:return"UNSET";case ClientConfigSetting.DISABLED:return"DISABLED";case ClientConfigSetting.ENABLED:return"ENABLED";case ClientConfigSetting.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var DisconnectReason;(function(e){e[e.UNKNOWN_REASON=0]="UNKNOWN_REASON",e[e.CLIENT_INITIATED=1]="CLIENT_INITIATED",e[e.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",e[e.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",e[e.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",e[e.ROOM_DELETED=5]="ROOM_DELETED",e[e.STATE_MISMATCH=6]="STATE_MISMATCH",e[e.JOIN_FAILURE=7]="JOIN_FAILURE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(DisconnectReason||(DisconnectReason={}));function disconnectReasonFromJSON(e){switch(e){case 0:case"UNKNOWN_REASON":return DisconnectReason.UNKNOWN_REASON;case 1:case"CLIENT_INITIATED":return DisconnectReason.CLIENT_INITIATED;case 2:case"DUPLICATE_IDENTITY":return DisconnectReason.DUPLICATE_IDENTITY;case 3:case"SERVER_SHUTDOWN":return DisconnectReason.SERVER_SHUTDOWN;case 4:case"PARTICIPANT_REMOVED":return DisconnectReason.PARTICIPANT_REMOVED;case 5:case"ROOM_DELETED":return DisconnectReason.ROOM_DELETED;case 6:case"STATE_MISMATCH":return DisconnectReason.STATE_MISMATCH;case 7:case"JOIN_FAILURE":return DisconnectReason.JOIN_FAILURE;case-1:case"UNRECOGNIZED":default:return DisconnectReason.UNRECOGNIZED}}function disconnectReasonToJSON(e){switch(e){case DisconnectReason.UNKNOWN_REASON:return"UNKNOWN_REASON";case DisconnectReason.CLIENT_INITIATED:return"CLIENT_INITIATED";case DisconnectReason.DUPLICATE_IDENTITY:return"DUPLICATE_IDENTITY";case DisconnectReason.SERVER_SHUTDOWN:return"SERVER_SHUTDOWN";case DisconnectReason.PARTICIPANT_REMOVED:return"PARTICIPANT_REMOVED";case DisconnectReason.ROOM_DELETED:return"ROOM_DELETED";case DisconnectReason.STATE_MISMATCH:return"STATE_MISMATCH";case DisconnectReason.JOIN_FAILURE:return"JOIN_FAILURE";case DisconnectReason.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ReconnectReason;(function(e){e[e.RR_UNKOWN=0]="RR_UNKOWN",e[e.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",e[e.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",e[e.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",e[e.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ReconnectReason||(ReconnectReason={}));var ParticipantInfo_State;(function(e){e[e.JOINING=0]="JOINING",e[e.JOINED=1]="JOINED",e[e.ACTIVE=2]="ACTIVE",e[e.DISCONNECTED=3]="DISCONNECTED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ParticipantInfo_State||(ParticipantInfo_State={}));function participantInfo_StateFromJSON(e){switch(e){case 0:case"JOINING":return ParticipantInfo_State.JOINING;case 1:case"JOINED":return ParticipantInfo_State.JOINED;case 2:case"ACTIVE":return ParticipantInfo_State.ACTIVE;case 3:case"DISCONNECTED":return ParticipantInfo_State.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return ParticipantInfo_State.UNRECOGNIZED}}function participantInfo_StateToJSON(e){switch(e){case ParticipantInfo_State.JOINING:return"JOINING";case ParticipantInfo_State.JOINED:return"JOINED";case ParticipantInfo_State.ACTIVE:return"ACTIVE";case ParticipantInfo_State.DISCONNECTED:return"DISCONNECTED";case ParticipantInfo_State.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var Encryption_Type;(function(e){e[e.NONE=0]="NONE",e[e.GCM=1]="GCM",e[e.CUSTOM=2]="CUSTOM",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Encryption_Type||(Encryption_Type={}));function encryption_TypeFromJSON(e){switch(e){case 0:case"NONE":return Encryption_Type.NONE;case 1:case"GCM":return Encryption_Type.GCM;case 2:case"CUSTOM":return Encryption_Type.CUSTOM;case-1:case"UNRECOGNIZED":default:return Encryption_Type.UNRECOGNIZED}}function encryption_TypeToJSON(e){switch(e){case Encryption_Type.NONE:return"NONE";case Encryption_Type.GCM:return"GCM";case Encryption_Type.CUSTOM:return"CUSTOM";case Encryption_Type.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var DataPacket_Kind;(function(e){e[e.RELIABLE=0]="RELIABLE",e[e.LOSSY=1]="LOSSY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(DataPacket_Kind||(DataPacket_Kind={}));function dataPacket_KindFromJSON(e){switch(e){case 0:case"RELIABLE":return DataPacket_Kind.RELIABLE;case 1:case"LOSSY":return DataPacket_Kind.LOSSY;case-1:case"UNRECOGNIZED":default:return DataPacket_Kind.UNRECOGNIZED}}function dataPacket_KindToJSON(e){switch(e){case DataPacket_Kind.RELIABLE:return"RELIABLE";case DataPacket_Kind.LOSSY:return"LOSSY";case DataPacket_Kind.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ServerInfo_Edition;(function(e){e[e.Standard=0]="Standard",e[e.Cloud=1]="Cloud",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ServerInfo_Edition||(ServerInfo_Edition={}));function serverInfo_EditionFromJSON(e){switch(e){case 0:case"Standard":return ServerInfo_Edition.Standard;case 1:case"Cloud":return ServerInfo_Edition.Cloud;case-1:case"UNRECOGNIZED":default:return ServerInfo_Edition.UNRECOGNIZED}}function serverInfo_EditionToJSON(e){switch(e){case ServerInfo_Edition.Standard:return"Standard";case ServerInfo_Edition.Cloud:return"Cloud";case ServerInfo_Edition.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var ClientInfo_SDK;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JS=1]="JS",e[e.SWIFT=2]="SWIFT",e[e.ANDROID=3]="ANDROID",e[e.FLUTTER=4]="FLUTTER",e[e.GO=5]="GO",e[e.UNITY=6]="UNITY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(ClientInfo_SDK||(ClientInfo_SDK={}));function clientInfo_SDKFromJSON(e){switch(e){case 0:case"UNKNOWN":return ClientInfo_SDK.UNKNOWN;case 1:case"JS":return ClientInfo_SDK.JS;case 2:case"SWIFT":return ClientInfo_SDK.SWIFT;case 3:case"ANDROID":return ClientInfo_SDK.ANDROID;case 4:case"FLUTTER":return ClientInfo_SDK.FLUTTER;case 5:case"GO":return ClientInfo_SDK.GO;case 6:case"UNITY":return ClientInfo_SDK.UNITY;case-1:case"UNRECOGNIZED":default:return ClientInfo_SDK.UNRECOGNIZED}}function clientInfo_SDKToJSON(e){switch(e){case ClientInfo_SDK.UNKNOWN:return"UNKNOWN";case ClientInfo_SDK.JS:return"JS";case ClientInfo_SDK.SWIFT:return"SWIFT";case ClientInfo_SDK.ANDROID:return"ANDROID";case ClientInfo_SDK.FLUTTER:return"FLUTTER";case ClientInfo_SDK.GO:return"GO";case ClientInfo_SDK.UNITY:return"UNITY";case ClientInfo_SDK.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseRoom(){return{sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,activeRecording:!1}}const Room$1={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.sid!==""&&i.uint32(10).string(e.sid),e.name!==""&&i.uint32(18).string(e.name),e.emptyTimeout!==0&&i.uint32(24).uint32(e.emptyTimeout),e.maxParticipants!==0&&i.uint32(32).uint32(e.maxParticipants),e.creationTime!==0&&i.uint32(40).int64(e.creationTime),e.turnPassword!==""&&i.uint32(50).string(e.turnPassword);for(const t of e.enabledCodecs)Codec.encode(t,i.uint32(58).fork()).ldelim();return e.metadata!==""&&i.uint32(66).string(e.metadata),e.numParticipants!==0&&i.uint32(72).uint32(e.numParticipants),e.activeRecording===!0&&i.uint32(80).bool(e.activeRecording),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseRoom();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.sid=t.string();break;case 2:a.name=t.string();break;case 3:a.emptyTimeout=t.uint32();break;case 4:a.maxParticipants=t.uint32();break;case 5:a.creationTime=longToNumber$1(t.int64());break;case 6:a.turnPassword=t.string();break;case 7:a.enabledCodecs.push(Codec.decode(t,t.uint32()));break;case 8:a.metadata=t.string();break;case 9:a.numParticipants=t.uint32();break;case 10:a.activeRecording=t.bool();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",name:isSet$1(e.name)?String(e.name):"",emptyTimeout:isSet$1(e.emptyTimeout)?Number(e.emptyTimeout):0,maxParticipants:isSet$1(e.maxParticipants)?Number(e.maxParticipants):0,creationTime:isSet$1(e.creationTime)?Number(e.creationTime):0,turnPassword:isSet$1(e.turnPassword)?String(e.turnPassword):"",enabledCodecs:Array.isArray(e==null?void 0:e.enabledCodecs)?e.enabledCodecs.map(i=>Codec.fromJSON(i)):[],metadata:isSet$1(e.metadata)?String(e.metadata):"",numParticipants:isSet$1(e.numParticipants)?Number(e.numParticipants):0,activeRecording:isSet$1(e.activeRecording)?!!e.activeRecording:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.name!==void 0&&(i.name=e.name),e.emptyTimeout!==void 0&&(i.emptyTimeout=Math.round(e.emptyTimeout)),e.maxParticipants!==void 0&&(i.maxParticipants=Math.round(e.maxParticipants)),e.creationTime!==void 0&&(i.creationTime=Math.round(e.creationTime)),e.turnPassword!==void 0&&(i.turnPassword=e.turnPassword),e.enabledCodecs?i.enabledCodecs=e.enabledCodecs.map(t=>t?Codec.toJSON(t):void 0):i.enabledCodecs=[],e.metadata!==void 0&&(i.metadata=e.metadata),e.numParticipants!==void 0&&(i.numParticipants=Math.round(e.numParticipants)),e.activeRecording!==void 0&&(i.activeRecording=e.activeRecording),i},create(e){return Room$1.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d,o,f,c,p;const v=createBaseRoom();return v.sid=(i=e.sid)!==null&&i!==void 0?i:"",v.name=(t=e.name)!==null&&t!==void 0?t:"",v.emptyTimeout=(n=e.emptyTimeout)!==null&&n!==void 0?n:0,v.maxParticipants=(a=e.maxParticipants)!==null&&a!==void 0?a:0,v.creationTime=(s=e.creationTime)!==null&&s!==void 0?s:0,v.turnPassword=(d=e.turnPassword)!==null&&d!==void 0?d:"",v.enabledCodecs=((o=e.enabledCodecs)===null||o===void 0?void 0:o.map(l=>Codec.fromPartial(l)))||[],v.metadata=(f=e.metadata)!==null&&f!==void 0?f:"",v.numParticipants=(c=e.numParticipants)!==null&&c!==void 0?c:0,v.activeRecording=(p=e.activeRecording)!==null&&p!==void 0?p:!1,v}};function createBaseCodec(){return{mime:"",fmtpLine:""}}const Codec={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.mime!==""&&i.uint32(10).string(e.mime),e.fmtpLine!==""&&i.uint32(18).string(e.fmtpLine),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseCodec();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.mime=t.string();break;case 2:a.fmtpLine=t.string();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{mime:isSet$1(e.mime)?String(e.mime):"",fmtpLine:isSet$1(e.fmtpLine)?String(e.fmtpLine):""}},toJSON(e){const i={};return e.mime!==void 0&&(i.mime=e.mime),e.fmtpLine!==void 0&&(i.fmtpLine=e.fmtpLine),i},create(e){return Codec.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseCodec();return n.mime=(i=e.mime)!==null&&i!==void 0?i:"",n.fmtpLine=(t=e.fmtpLine)!==null&&t!==void 0?t:"",n}};function createBaseParticipantPermission(){return{canSubscribe:!1,canPublish:!1,canPublishData:!1,canPublishSources:[],hidden:!1,recorder:!1}}const ParticipantPermission={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.canSubscribe===!0&&i.uint32(8).bool(e.canSubscribe),e.canPublish===!0&&i.uint32(16).bool(e.canPublish),e.canPublishData===!0&&i.uint32(24).bool(e.canPublishData),i.uint32(74).fork();for(const t of e.canPublishSources)i.int32(t);return i.ldelim(),e.hidden===!0&&i.uint32(56).bool(e.hidden),e.recorder===!0&&i.uint32(64).bool(e.recorder),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantPermission();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.canSubscribe=t.bool();break;case 2:a.canPublish=t.bool();break;case 3:a.canPublishData=t.bool();break;case 9:if((s&7)===2){const d=t.uint32()+t.pos;for(;t.pos<d;)a.canPublishSources.push(t.int32())}else a.canPublishSources.push(t.int32());break;case 7:a.hidden=t.bool();break;case 8:a.recorder=t.bool();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{canSubscribe:isSet$1(e.canSubscribe)?!!e.canSubscribe:!1,canPublish:isSet$1(e.canPublish)?!!e.canPublish:!1,canPublishData:isSet$1(e.canPublishData)?!!e.canPublishData:!1,canPublishSources:Array.isArray(e==null?void 0:e.canPublishSources)?e.canPublishSources.map(i=>trackSourceFromJSON(i)):[],hidden:isSet$1(e.hidden)?!!e.hidden:!1,recorder:isSet$1(e.recorder)?!!e.recorder:!1}},toJSON(e){const i={};return e.canSubscribe!==void 0&&(i.canSubscribe=e.canSubscribe),e.canPublish!==void 0&&(i.canPublish=e.canPublish),e.canPublishData!==void 0&&(i.canPublishData=e.canPublishData),e.canPublishSources?i.canPublishSources=e.canPublishSources.map(t=>trackSourceToJSON(t)):i.canPublishSources=[],e.hidden!==void 0&&(i.hidden=e.hidden),e.recorder!==void 0&&(i.recorder=e.recorder),i},create(e){return ParticipantPermission.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d;const o=createBaseParticipantPermission();return o.canSubscribe=(i=e.canSubscribe)!==null&&i!==void 0?i:!1,o.canPublish=(t=e.canPublish)!==null&&t!==void 0?t:!1,o.canPublishData=(n=e.canPublishData)!==null&&n!==void 0?n:!1,o.canPublishSources=((a=e.canPublishSources)===null||a===void 0?void 0:a.map(f=>f))||[],o.hidden=(s=e.hidden)!==null&&s!==void 0?s:!1,o.recorder=(d=e.recorder)!==null&&d!==void 0?d:!1,o}};function createBaseParticipantInfo(){return{sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1}}const ParticipantInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.sid!==""&&i.uint32(10).string(e.sid),e.identity!==""&&i.uint32(18).string(e.identity),e.state!==0&&i.uint32(24).int32(e.state);for(const t of e.tracks)TrackInfo.encode(t,i.uint32(34).fork()).ldelim();return e.metadata!==""&&i.uint32(42).string(e.metadata),e.joinedAt!==0&&i.uint32(48).int64(e.joinedAt),e.name!==""&&i.uint32(74).string(e.name),e.version!==0&&i.uint32(80).uint32(e.version),e.permission!==void 0&&ParticipantPermission.encode(e.permission,i.uint32(90).fork()).ldelim(),e.region!==""&&i.uint32(98).string(e.region),e.isPublisher===!0&&i.uint32(104).bool(e.isPublisher),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantInfo();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.sid=t.string();break;case 2:a.identity=t.string();break;case 3:a.state=t.int32();break;case 4:a.tracks.push(TrackInfo.decode(t,t.uint32()));break;case 5:a.metadata=t.string();break;case 6:a.joinedAt=longToNumber$1(t.int64());break;case 9:a.name=t.string();break;case 10:a.version=t.uint32();break;case 11:a.permission=ParticipantPermission.decode(t,t.uint32());break;case 12:a.region=t.string();break;case 13:a.isPublisher=t.bool();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",identity:isSet$1(e.identity)?String(e.identity):"",state:isSet$1(e.state)?participantInfo_StateFromJSON(e.state):0,tracks:Array.isArray(e==null?void 0:e.tracks)?e.tracks.map(i=>TrackInfo.fromJSON(i)):[],metadata:isSet$1(e.metadata)?String(e.metadata):"",joinedAt:isSet$1(e.joinedAt)?Number(e.joinedAt):0,name:isSet$1(e.name)?String(e.name):"",version:isSet$1(e.version)?Number(e.version):0,permission:isSet$1(e.permission)?ParticipantPermission.fromJSON(e.permission):void 0,region:isSet$1(e.region)?String(e.region):"",isPublisher:isSet$1(e.isPublisher)?!!e.isPublisher:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.identity!==void 0&&(i.identity=e.identity),e.state!==void 0&&(i.state=participantInfo_StateToJSON(e.state)),e.tracks?i.tracks=e.tracks.map(t=>t?TrackInfo.toJSON(t):void 0):i.tracks=[],e.metadata!==void 0&&(i.metadata=e.metadata),e.joinedAt!==void 0&&(i.joinedAt=Math.round(e.joinedAt)),e.name!==void 0&&(i.name=e.name),e.version!==void 0&&(i.version=Math.round(e.version)),e.permission!==void 0&&(i.permission=e.permission?ParticipantPermission.toJSON(e.permission):void 0),e.region!==void 0&&(i.region=e.region),e.isPublisher!==void 0&&(i.isPublisher=e.isPublisher),i},create(e){return ParticipantInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d,o,f,c,p;const v=createBaseParticipantInfo();return v.sid=(i=e.sid)!==null&&i!==void 0?i:"",v.identity=(t=e.identity)!==null&&t!==void 0?t:"",v.state=(n=e.state)!==null&&n!==void 0?n:0,v.tracks=((a=e.tracks)===null||a===void 0?void 0:a.map(l=>TrackInfo.fromPartial(l)))||[],v.metadata=(s=e.metadata)!==null&&s!==void 0?s:"",v.joinedAt=(d=e.joinedAt)!==null&&d!==void 0?d:0,v.name=(o=e.name)!==null&&o!==void 0?o:"",v.version=(f=e.version)!==null&&f!==void 0?f:0,v.permission=e.permission!==void 0&&e.permission!==null?ParticipantPermission.fromPartial(e.permission):void 0,v.region=(c=e.region)!==null&&c!==void 0?c:"",v.isPublisher=(p=e.isPublisher)!==null&&p!==void 0?p:!1,v}};function createBaseSimulcastCodecInfo(){return{mimeType:"",mid:"",cid:"",layers:[]}}const SimulcastCodecInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.mimeType!==""&&i.uint32(10).string(e.mimeType),e.mid!==""&&i.uint32(18).string(e.mid),e.cid!==""&&i.uint32(26).string(e.cid);for(const t of e.layers)VideoLayer.encode(t,i.uint32(34).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSimulcastCodecInfo();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.mimeType=t.string();break;case 2:a.mid=t.string();break;case 3:a.cid=t.string();break;case 4:a.layers.push(VideoLayer.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{mimeType:isSet$1(e.mimeType)?String(e.mimeType):"",mid:isSet$1(e.mid)?String(e.mid):"",cid:isSet$1(e.cid)?String(e.cid):"",layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[]}},toJSON(e){const i={};return e.mimeType!==void 0&&(i.mimeType=e.mimeType),e.mid!==void 0&&(i.mid=e.mid),e.cid!==void 0&&(i.cid=e.cid),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],i},create(e){return SimulcastCodecInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a;const s=createBaseSimulcastCodecInfo();return s.mimeType=(i=e.mimeType)!==null&&i!==void 0?i:"",s.mid=(t=e.mid)!==null&&t!==void 0?t:"",s.cid=(n=e.cid)!==null&&n!==void 0?n:"",s.layers=((a=e.layers)===null||a===void 0?void 0:a.map(d=>VideoLayer.fromPartial(d)))||[],s}};function createBaseTrackInfo(){return{sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[],stereo:!1,disableRed:!1,encryption:0}}const TrackInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.sid!==""&&i.uint32(10).string(e.sid),e.type!==0&&i.uint32(16).int32(e.type),e.name!==""&&i.uint32(26).string(e.name),e.muted===!0&&i.uint32(32).bool(e.muted),e.width!==0&&i.uint32(40).uint32(e.width),e.height!==0&&i.uint32(48).uint32(e.height),e.simulcast===!0&&i.uint32(56).bool(e.simulcast),e.disableDtx===!0&&i.uint32(64).bool(e.disableDtx),e.source!==0&&i.uint32(72).int32(e.source);for(const t of e.layers)VideoLayer.encode(t,i.uint32(82).fork()).ldelim();e.mimeType!==""&&i.uint32(90).string(e.mimeType),e.mid!==""&&i.uint32(98).string(e.mid);for(const t of e.codecs)SimulcastCodecInfo.encode(t,i.uint32(106).fork()).ldelim();return e.stereo===!0&&i.uint32(112).bool(e.stereo),e.disableRed===!0&&i.uint32(120).bool(e.disableRed),e.encryption!==0&&i.uint32(128).int32(e.encryption),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackInfo();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.sid=t.string();break;case 2:a.type=t.int32();break;case 3:a.name=t.string();break;case 4:a.muted=t.bool();break;case 5:a.width=t.uint32();break;case 6:a.height=t.uint32();break;case 7:a.simulcast=t.bool();break;case 8:a.disableDtx=t.bool();break;case 9:a.source=t.int32();break;case 10:a.layers.push(VideoLayer.decode(t,t.uint32()));break;case 11:a.mimeType=t.string();break;case 12:a.mid=t.string();break;case 13:a.codecs.push(SimulcastCodecInfo.decode(t,t.uint32()));break;case 14:a.stereo=t.bool();break;case 15:a.disableRed=t.bool();break;case 16:a.encryption=t.int32();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",type:isSet$1(e.type)?trackTypeFromJSON(e.type):0,name:isSet$1(e.name)?String(e.name):"",muted:isSet$1(e.muted)?!!e.muted:!1,width:isSet$1(e.width)?Number(e.width):0,height:isSet$1(e.height)?Number(e.height):0,simulcast:isSet$1(e.simulcast)?!!e.simulcast:!1,disableDtx:isSet$1(e.disableDtx)?!!e.disableDtx:!1,source:isSet$1(e.source)?trackSourceFromJSON(e.source):0,layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[],mimeType:isSet$1(e.mimeType)?String(e.mimeType):"",mid:isSet$1(e.mid)?String(e.mid):"",codecs:Array.isArray(e==null?void 0:e.codecs)?e.codecs.map(i=>SimulcastCodecInfo.fromJSON(i)):[],stereo:isSet$1(e.stereo)?!!e.stereo:!1,disableRed:isSet$1(e.disableRed)?!!e.disableRed:!1,encryption:isSet$1(e.encryption)?encryption_TypeFromJSON(e.encryption):0}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.type!==void 0&&(i.type=trackTypeToJSON(e.type)),e.name!==void 0&&(i.name=e.name),e.muted!==void 0&&(i.muted=e.muted),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.simulcast!==void 0&&(i.simulcast=e.simulcast),e.disableDtx!==void 0&&(i.disableDtx=e.disableDtx),e.source!==void 0&&(i.source=trackSourceToJSON(e.source)),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],e.mimeType!==void 0&&(i.mimeType=e.mimeType),e.mid!==void 0&&(i.mid=e.mid),e.codecs?i.codecs=e.codecs.map(t=>t?SimulcastCodecInfo.toJSON(t):void 0):i.codecs=[],e.stereo!==void 0&&(i.stereo=e.stereo),e.disableRed!==void 0&&(i.disableRed=e.disableRed),e.encryption!==void 0&&(i.encryption=encryption_TypeToJSON(e.encryption)),i},create(e){return TrackInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d,o,f,c,p,v,l,u,h,m,w;const k=createBaseTrackInfo();return k.sid=(i=e.sid)!==null&&i!==void 0?i:"",k.type=(t=e.type)!==null&&t!==void 0?t:0,k.name=(n=e.name)!==null&&n!==void 0?n:"",k.muted=(a=e.muted)!==null&&a!==void 0?a:!1,k.width=(s=e.width)!==null&&s!==void 0?s:0,k.height=(d=e.height)!==null&&d!==void 0?d:0,k.simulcast=(o=e.simulcast)!==null&&o!==void 0?o:!1,k.disableDtx=(f=e.disableDtx)!==null&&f!==void 0?f:!1,k.source=(c=e.source)!==null&&c!==void 0?c:0,k.layers=((p=e.layers)===null||p===void 0?void 0:p.map(C=>VideoLayer.fromPartial(C)))||[],k.mimeType=(v=e.mimeType)!==null&&v!==void 0?v:"",k.mid=(l=e.mid)!==null&&l!==void 0?l:"",k.codecs=((u=e.codecs)===null||u===void 0?void 0:u.map(C=>SimulcastCodecInfo.fromPartial(C)))||[],k.stereo=(h=e.stereo)!==null&&h!==void 0?h:!1,k.disableRed=(m=e.disableRed)!==null&&m!==void 0?m:!1,k.encryption=(w=e.encryption)!==null&&w!==void 0?w:0,k}};function createBaseVideoLayer(){return{quality:0,width:0,height:0,bitrate:0,ssrc:0}}const VideoLayer={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.quality!==0&&i.uint32(8).int32(e.quality),e.width!==0&&i.uint32(16).uint32(e.width),e.height!==0&&i.uint32(24).uint32(e.height),e.bitrate!==0&&i.uint32(32).uint32(e.bitrate),e.ssrc!==0&&i.uint32(40).uint32(e.ssrc),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseVideoLayer();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.quality=t.int32();break;case 2:a.width=t.uint32();break;case 3:a.height=t.uint32();break;case 4:a.bitrate=t.uint32();break;case 5:a.ssrc=t.uint32();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{quality:isSet$1(e.quality)?videoQualityFromJSON(e.quality):0,width:isSet$1(e.width)?Number(e.width):0,height:isSet$1(e.height)?Number(e.height):0,bitrate:isSet$1(e.bitrate)?Number(e.bitrate):0,ssrc:isSet$1(e.ssrc)?Number(e.ssrc):0}},toJSON(e){const i={};return e.quality!==void 0&&(i.quality=videoQualityToJSON(e.quality)),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.bitrate!==void 0&&(i.bitrate=Math.round(e.bitrate)),e.ssrc!==void 0&&(i.ssrc=Math.round(e.ssrc)),i},create(e){return VideoLayer.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s;const d=createBaseVideoLayer();return d.quality=(i=e.quality)!==null&&i!==void 0?i:0,d.width=(t=e.width)!==null&&t!==void 0?t:0,d.height=(n=e.height)!==null&&n!==void 0?n:0,d.bitrate=(a=e.bitrate)!==null&&a!==void 0?a:0,d.ssrc=(s=e.ssrc)!==null&&s!==void 0?s:0,d}};function createBaseDataPacket(){return{kind:0,value:void 0}}const DataPacket={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch(e.kind!==0&&i.uint32(8).int32(e.kind),(t=e.value)===null||t===void 0?void 0:t.$case){case"user":UserPacket.encode(e.value.user,i.uint32(18).fork()).ldelim();break;case"speaker":ActiveSpeakerUpdate.encode(e.value.speaker,i.uint32(26).fork()).ldelim();break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseDataPacket();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.kind=t.int32();break;case 2:a.value={$case:"user",user:UserPacket.decode(t,t.uint32())};break;case 3:a.value={$case:"speaker",speaker:ActiveSpeakerUpdate.decode(t,t.uint32())};break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{kind:isSet$1(e.kind)?dataPacket_KindFromJSON(e.kind):0,value:isSet$1(e.user)?{$case:"user",user:UserPacket.fromJSON(e.user)}:isSet$1(e.speaker)?{$case:"speaker",speaker:ActiveSpeakerUpdate.fromJSON(e.speaker)}:void 0}},toJSON(e){var i,t,n,a,s,d;const o={};return e.kind!==void 0&&(o.kind=dataPacket_KindToJSON(e.kind)),((i=e.value)===null||i===void 0?void 0:i.$case)==="user"&&(o.user=!((t=e.value)===null||t===void 0)&&t.user?UserPacket.toJSON((n=e.value)===null||n===void 0?void 0:n.user):void 0),((a=e.value)===null||a===void 0?void 0:a.$case)==="speaker"&&(o.speaker=!((s=e.value)===null||s===void 0)&&s.speaker?ActiveSpeakerUpdate.toJSON((d=e.value)===null||d===void 0?void 0:d.speaker):void 0),o},create(e){return DataPacket.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d,o;const f=createBaseDataPacket();return f.kind=(i=e.kind)!==null&&i!==void 0?i:0,((t=e.value)===null||t===void 0?void 0:t.$case)==="user"&&((n=e.value)===null||n===void 0?void 0:n.user)!==void 0&&((a=e.value)===null||a===void 0?void 0:a.user)!==null&&(f.value={$case:"user",user:UserPacket.fromPartial(e.value.user)}),((s=e.value)===null||s===void 0?void 0:s.$case)==="speaker"&&((d=e.value)===null||d===void 0?void 0:d.speaker)!==void 0&&((o=e.value)===null||o===void 0?void 0:o.speaker)!==null&&(f.value={$case:"speaker",speaker:ActiveSpeakerUpdate.fromPartial(e.value.speaker)}),f}};function createBaseActiveSpeakerUpdate(){return{speakers:[]}}const ActiveSpeakerUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.speakers)SpeakerInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseActiveSpeakerUpdate();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.speakers.push(SpeakerInfo.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{speakers:Array.isArray(e==null?void 0:e.speakers)?e.speakers.map(i=>SpeakerInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.speakers?i.speakers=e.speakers.map(t=>t?SpeakerInfo.toJSON(t):void 0):i.speakers=[],i},create(e){return ActiveSpeakerUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseActiveSpeakerUpdate();return t.speakers=((i=e.speakers)===null||i===void 0?void 0:i.map(n=>SpeakerInfo.fromPartial(n)))||[],t}};function createBaseSpeakerInfo(){return{sid:"",level:0,active:!1}}const SpeakerInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.sid!==""&&i.uint32(10).string(e.sid),e.level!==0&&i.uint32(21).float(e.level),e.active===!0&&i.uint32(24).bool(e.active),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSpeakerInfo();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.sid=t.string();break;case 2:a.level=t.float();break;case 3:a.active=t.bool();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{sid:isSet$1(e.sid)?String(e.sid):"",level:isSet$1(e.level)?Number(e.level):0,active:isSet$1(e.active)?!!e.active:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.level!==void 0&&(i.level=e.level),e.active!==void 0&&(i.active=e.active),i},create(e){return SpeakerInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSpeakerInfo();return a.sid=(i=e.sid)!==null&&i!==void 0?i:"",a.level=(t=e.level)!==null&&t!==void 0?t:0,a.active=(n=e.active)!==null&&n!==void 0?n:!1,a}};function createBaseUserPacket(){return{participantSid:"",payload:new Uint8Array,destinationSids:[],topic:void 0}}const UserPacket={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.payload.length!==0&&i.uint32(18).bytes(e.payload);for(const t of e.destinationSids)i.uint32(26).string(t);return e.topic!==void 0&&i.uint32(34).string(e.topic),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUserPacket();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.participantSid=t.string();break;case 2:a.payload=t.bytes();break;case 3:a.destinationSids.push(t.string());break;case 4:a.topic=t.string();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{participantSid:isSet$1(e.participantSid)?String(e.participantSid):"",payload:isSet$1(e.payload)?bytesFromBase64(e.payload):new Uint8Array,destinationSids:Array.isArray(e==null?void 0:e.destinationSids)?e.destinationSids.map(i=>String(i)):[],topic:isSet$1(e.topic)?String(e.topic):void 0}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.payload!==void 0&&(i.payload=base64FromBytes(e.payload!==void 0?e.payload:new Uint8Array)),e.destinationSids?i.destinationSids=e.destinationSids.map(t=>t):i.destinationSids=[],e.topic!==void 0&&(i.topic=e.topic),i},create(e){return UserPacket.fromPartial(e??{})},fromPartial(e){var i,t,n,a;const s=createBaseUserPacket();return s.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",s.payload=(t=e.payload)!==null&&t!==void 0?t:new Uint8Array,s.destinationSids=((n=e.destinationSids)===null||n===void 0?void 0:n.map(d=>d))||[],s.topic=(a=e.topic)!==null&&a!==void 0?a:void 0,s}};function createBaseParticipantTracks(){return{participantSid:"",trackSids:[]}}const ParticipantTracks={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.participantSid!==""&&i.uint32(10).string(e.participantSid);for(const t of e.trackSids)i.uint32(18).string(t);return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantTracks();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.participantSid=t.string();break;case 2:a.trackSids.push(t.string());break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{participantSid:isSet$1(e.participantSid)?String(e.participantSid):"",trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[]}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],i},create(e){return ParticipantTracks.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseParticipantTracks();return n.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",n.trackSids=((t=e.trackSids)===null||t===void 0?void 0:t.map(a=>a))||[],n}};function createBaseServerInfo(){return{edition:0,version:"",protocol:0,region:"",nodeId:"",debugInfo:""}}const ServerInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.edition!==0&&i.uint32(8).int32(e.edition),e.version!==""&&i.uint32(18).string(e.version),e.protocol!==0&&i.uint32(24).int32(e.protocol),e.region!==""&&i.uint32(34).string(e.region),e.nodeId!==""&&i.uint32(42).string(e.nodeId),e.debugInfo!==""&&i.uint32(50).string(e.debugInfo),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseServerInfo();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.edition=t.int32();break;case 2:a.version=t.string();break;case 3:a.protocol=t.int32();break;case 4:a.region=t.string();break;case 5:a.nodeId=t.string();break;case 6:a.debugInfo=t.string();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{edition:isSet$1(e.edition)?serverInfo_EditionFromJSON(e.edition):0,version:isSet$1(e.version)?String(e.version):"",protocol:isSet$1(e.protocol)?Number(e.protocol):0,region:isSet$1(e.region)?String(e.region):"",nodeId:isSet$1(e.nodeId)?String(e.nodeId):"",debugInfo:isSet$1(e.debugInfo)?String(e.debugInfo):""}},toJSON(e){const i={};return e.edition!==void 0&&(i.edition=serverInfo_EditionToJSON(e.edition)),e.version!==void 0&&(i.version=e.version),e.protocol!==void 0&&(i.protocol=Math.round(e.protocol)),e.region!==void 0&&(i.region=e.region),e.nodeId!==void 0&&(i.nodeId=e.nodeId),e.debugInfo!==void 0&&(i.debugInfo=e.debugInfo),i},create(e){return ServerInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d;const o=createBaseServerInfo();return o.edition=(i=e.edition)!==null&&i!==void 0?i:0,o.version=(t=e.version)!==null&&t!==void 0?t:"",o.protocol=(n=e.protocol)!==null&&n!==void 0?n:0,o.region=(a=e.region)!==null&&a!==void 0?a:"",o.nodeId=(s=e.nodeId)!==null&&s!==void 0?s:"",o.debugInfo=(d=e.debugInfo)!==null&&d!==void 0?d:"",o}};function createBaseClientInfo(){return{sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:"",network:""}}const ClientInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.sdk!==0&&i.uint32(8).int32(e.sdk),e.version!==""&&i.uint32(18).string(e.version),e.protocol!==0&&i.uint32(24).int32(e.protocol),e.os!==""&&i.uint32(34).string(e.os),e.osVersion!==""&&i.uint32(42).string(e.osVersion),e.deviceModel!==""&&i.uint32(50).string(e.deviceModel),e.browser!==""&&i.uint32(58).string(e.browser),e.browserVersion!==""&&i.uint32(66).string(e.browserVersion),e.address!==""&&i.uint32(74).string(e.address),e.network!==""&&i.uint32(82).string(e.network),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseClientInfo();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.sdk=t.int32();break;case 2:a.version=t.string();break;case 3:a.protocol=t.int32();break;case 4:a.os=t.string();break;case 5:a.osVersion=t.string();break;case 6:a.deviceModel=t.string();break;case 7:a.browser=t.string();break;case 8:a.browserVersion=t.string();break;case 9:a.address=t.string();break;case 10:a.network=t.string();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{sdk:isSet$1(e.sdk)?clientInfo_SDKFromJSON(e.sdk):0,version:isSet$1(e.version)?String(e.version):"",protocol:isSet$1(e.protocol)?Number(e.protocol):0,os:isSet$1(e.os)?String(e.os):"",osVersion:isSet$1(e.osVersion)?String(e.osVersion):"",deviceModel:isSet$1(e.deviceModel)?String(e.deviceModel):"",browser:isSet$1(e.browser)?String(e.browser):"",browserVersion:isSet$1(e.browserVersion)?String(e.browserVersion):"",address:isSet$1(e.address)?String(e.address):"",network:isSet$1(e.network)?String(e.network):""}},toJSON(e){const i={};return e.sdk!==void 0&&(i.sdk=clientInfo_SDKToJSON(e.sdk)),e.version!==void 0&&(i.version=e.version),e.protocol!==void 0&&(i.protocol=Math.round(e.protocol)),e.os!==void 0&&(i.os=e.os),e.osVersion!==void 0&&(i.osVersion=e.osVersion),e.deviceModel!==void 0&&(i.deviceModel=e.deviceModel),e.browser!==void 0&&(i.browser=e.browser),e.browserVersion!==void 0&&(i.browserVersion=e.browserVersion),e.address!==void 0&&(i.address=e.address),e.network!==void 0&&(i.network=e.network),i},create(e){return ClientInfo.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d,o,f,c,p;const v=createBaseClientInfo();return v.sdk=(i=e.sdk)!==null&&i!==void 0?i:0,v.version=(t=e.version)!==null&&t!==void 0?t:"",v.protocol=(n=e.protocol)!==null&&n!==void 0?n:0,v.os=(a=e.os)!==null&&a!==void 0?a:"",v.osVersion=(s=e.osVersion)!==null&&s!==void 0?s:"",v.deviceModel=(d=e.deviceModel)!==null&&d!==void 0?d:"",v.browser=(o=e.browser)!==null&&o!==void 0?o:"",v.browserVersion=(f=e.browserVersion)!==null&&f!==void 0?f:"",v.address=(c=e.address)!==null&&c!==void 0?c:"",v.network=(p=e.network)!==null&&p!==void 0?p:"",v}};function createBaseClientConfiguration(){return{video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0,forceRelay:0}}const ClientConfiguration={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.video!==void 0&&VideoConfiguration.encode(e.video,i.uint32(10).fork()).ldelim(),e.screen!==void 0&&VideoConfiguration.encode(e.screen,i.uint32(18).fork()).ldelim(),e.resumeConnection!==0&&i.uint32(24).int32(e.resumeConnection),e.disabledCodecs!==void 0&&DisabledCodecs.encode(e.disabledCodecs,i.uint32(34).fork()).ldelim(),e.forceRelay!==0&&i.uint32(40).int32(e.forceRelay),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseClientConfiguration();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.video=VideoConfiguration.decode(t,t.uint32());break;case 2:a.screen=VideoConfiguration.decode(t,t.uint32());break;case 3:a.resumeConnection=t.int32();break;case 4:a.disabledCodecs=DisabledCodecs.decode(t,t.uint32());break;case 5:a.forceRelay=t.int32();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{video:isSet$1(e.video)?VideoConfiguration.fromJSON(e.video):void 0,screen:isSet$1(e.screen)?VideoConfiguration.fromJSON(e.screen):void 0,resumeConnection:isSet$1(e.resumeConnection)?clientConfigSettingFromJSON(e.resumeConnection):0,disabledCodecs:isSet$1(e.disabledCodecs)?DisabledCodecs.fromJSON(e.disabledCodecs):void 0,forceRelay:isSet$1(e.forceRelay)?clientConfigSettingFromJSON(e.forceRelay):0}},toJSON(e){const i={};return e.video!==void 0&&(i.video=e.video?VideoConfiguration.toJSON(e.video):void 0),e.screen!==void 0&&(i.screen=e.screen?VideoConfiguration.toJSON(e.screen):void 0),e.resumeConnection!==void 0&&(i.resumeConnection=clientConfigSettingToJSON(e.resumeConnection)),e.disabledCodecs!==void 0&&(i.disabledCodecs=e.disabledCodecs?DisabledCodecs.toJSON(e.disabledCodecs):void 0),e.forceRelay!==void 0&&(i.forceRelay=clientConfigSettingToJSON(e.forceRelay)),i},create(e){return ClientConfiguration.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseClientConfiguration();return n.video=e.video!==void 0&&e.video!==null?VideoConfiguration.fromPartial(e.video):void 0,n.screen=e.screen!==void 0&&e.screen!==null?VideoConfiguration.fromPartial(e.screen):void 0,n.resumeConnection=(i=e.resumeConnection)!==null&&i!==void 0?i:0,n.disabledCodecs=e.disabledCodecs!==void 0&&e.disabledCodecs!==null?DisabledCodecs.fromPartial(e.disabledCodecs):void 0,n.forceRelay=(t=e.forceRelay)!==null&&t!==void 0?t:0,n}};function createBaseVideoConfiguration(){return{hardwareEncoder:0}}const VideoConfiguration={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.hardwareEncoder!==0&&i.uint32(8).int32(e.hardwareEncoder),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseVideoConfiguration();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.hardwareEncoder=t.int32();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{hardwareEncoder:isSet$1(e.hardwareEncoder)?clientConfigSettingFromJSON(e.hardwareEncoder):0}},toJSON(e){const i={};return e.hardwareEncoder!==void 0&&(i.hardwareEncoder=clientConfigSettingToJSON(e.hardwareEncoder)),i},create(e){return VideoConfiguration.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseVideoConfiguration();return t.hardwareEncoder=(i=e.hardwareEncoder)!==null&&i!==void 0?i:0,t}};function createBaseDisabledCodecs(){return{codecs:[]}}const DisabledCodecs={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.codecs)Codec.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseDisabledCodecs();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.codecs.push(Codec.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{codecs:Array.isArray(e==null?void 0:e.codecs)?e.codecs.map(i=>Codec.fromJSON(i)):[]}},toJSON(e){const i={};return e.codecs?i.codecs=e.codecs.map(t=>t?Codec.toJSON(t):void 0):i.codecs=[],i},create(e){return DisabledCodecs.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseDisabledCodecs();return t.codecs=((i=e.codecs)===null||i===void 0?void 0:i.map(n=>Codec.fromPartial(n)))||[],t}};var tsProtoGlobalThis$1=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw"Unable to locate global object"})();function bytesFromBase64(e){if(tsProtoGlobalThis$1.Buffer)return Uint8Array.from(tsProtoGlobalThis$1.Buffer.from(e,"base64"));{const i=tsProtoGlobalThis$1.atob(e),t=new Uint8Array(i.length);for(let n=0;n<i.length;++n)t[n]=i.charCodeAt(n);return t}}function base64FromBytes(e){if(tsProtoGlobalThis$1.Buffer)return tsProtoGlobalThis$1.Buffer.from(e).toString("base64");{const i=[];return e.forEach(t=>{i.push(String.fromCharCode(t))}),tsProtoGlobalThis$1.btoa(i.join(""))}}function longToNumber$1(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new tsProtoGlobalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}_m0.util.Long!==long&&(_m0.util.Long=long,_m0.configure());function isSet$1(e){return e!=null}const maxRetryDelay=7e3,DEFAULT_RETRY_DELAYS_IN_MS=[0,300,2*2*300,3*3*300,4*4*300,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay,maxRetryDelay];class DefaultReconnectPolicy{constructor(i){this._retryDelays=i!==void 0?[...i]:DEFAULT_RETRY_DELAYS_IN_MS}nextRetryDelayInMs(i){if(i.retryCount>=this._retryDelays.length)return null;const t=this._retryDelays[i.retryCount];return i.retryCount<=1?t:t+Math.random()*1e3}}function _asyncIterator(e){var i,t,n,a=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,n=Symbol.iterator);a--;){if(t&&(i=e[t])!=null)return i.call(e);if(n&&(i=e[n])!=null)return new AsyncFromSyncIterator(i.call(e));t="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function AsyncFromSyncIterator(e){function i(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var n=t.done;return Promise.resolve(t.value).then(function(a){return{value:a,done:n}})}return AsyncFromSyncIterator=function(t){this.s=t,this.n=t.next},AsyncFromSyncIterator.prototype={s:null,n:null,next:function(){return i(this.n.apply(this.s,arguments))},return:function(t){var n=this.s.return;return n===void 0?Promise.resolve({value:t,done:!0}):i(n.apply(this.s,arguments))},throw:function(t){var n=this.s.return;return n===void 0?Promise.reject(t):i(n.apply(this.s,arguments))}},new AsyncFromSyncIterator(e)}function ownKeys(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function _objectSpread2(e){for(var i=1;i<arguments.length;i++){var t=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(t),!0).forEach(function(n){_defineProperty(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function _defineProperty(e,i,t){return i=_toPropertyKey(i),i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function _toPrimitive(e,i){if(typeof e!="object"||e===null)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,i||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}function _toPropertyKey(e){var i=_toPrimitive(e,"string");return typeof i=="symbol"?i:String(i)}let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(e,i,t){const n=e.match(i);return n&&n.length>=t&&parseInt(n[t],10)}function wrapPeerConnectionEvent(e,i,t){if(!e.RTCPeerConnection)return;const n=e.RTCPeerConnection.prototype,a=n.addEventListener;n.addEventListener=function(d,o){if(d!==i)return a.apply(this,arguments);const f=c=>{const p=t(c);p&&(o.handleEvent?o.handleEvent(p):o(p))};return this._eventMap=this._eventMap||{},this._eventMap[i]||(this._eventMap[i]=new Map),this._eventMap[i].set(o,f),a.apply(this,[d,f])};const s=n.removeEventListener;n.removeEventListener=function(d,o){if(d!==i||!this._eventMap||!this._eventMap[i])return s.apply(this,arguments);if(!this._eventMap[i].has(o))return s.apply(this,arguments);const f=this._eventMap[i].get(o);return this._eventMap[i].delete(o),this._eventMap[i].size===0&&delete this._eventMap[i],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[d,f])},Object.defineProperty(n,"on"+i,{get(){return this["_on"+i]},set(d){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),d&&this.addEventListener(i,this["_on"+i]=d)},enumerable:!0,configurable:!0})}function disableLog(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(logDisabled_=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(deprecationWarnings_=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function log(){if(typeof window=="object"){if(logDisabled_)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function deprecated(e,i){deprecationWarnings_&&console.warn(e+" is deprecated, please use "+i+" instead.")}function detectBrowser(e){const i={browser:null,version:null};if(typeof e>"u"||!e.navigator)return i.browser="Not a browser.",i;const{navigator:t}=e;if(t.mozGetUserMedia)i.browser="firefox",i.version=extractVersion(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)i.browser="chrome",i.version=extractVersion(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))i.browser="safari",i.version=extractVersion(t.userAgent,/AppleWebKit\/(\d+)\./,1),i.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return i.browser="Not a supported browser.",i;return i}function isObject(e){return Object.prototype.toString.call(e)==="[object Object]"}function compactObject(e){return isObject(e)?Object.keys(e).reduce(function(i,t){const n=isObject(e[t]),a=n?compactObject(e[t]):e[t],s=n&&!Object.keys(a).length;return a===void 0||s?i:Object.assign(i,{[t]:a})},{}):e}function walkStats(e,i,t){!i||t.has(i.id)||(t.set(i.id,i),Object.keys(i).forEach(n=>{n.endsWith("Id")?walkStats(e,e.get(i[n]),t):n.endsWith("Ids")&&i[n].forEach(a=>{walkStats(e,e.get(a),t)})}))}function filterStats(e,i,t){const n=t?"outbound-rtp":"inbound-rtp",a=new Map;if(i===null)return a;const s=[];return e.forEach(d=>{d.type==="track"&&d.trackIdentifier===i.id&&s.push(d)}),s.forEach(d=>{e.forEach(o=>{o.type===n&&o.trackId===d.id&&walkStats(e,o,a)})}),a}const logging=log;function shimGetUserMedia$2(e,i){const t=e&&e.navigator;if(!t.mediaDevices)return;const n=function(o){if(typeof o!="object"||o.mandatory||o.optional)return o;const f={};return Object.keys(o).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const p=typeof o[c]=="object"?o[c]:{ideal:o[c]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const v=function(l,u){return l?l+u.charAt(0).toUpperCase()+u.slice(1):u==="deviceId"?"sourceId":u};if(p.ideal!==void 0){f.optional=f.optional||[];let l={};typeof p.ideal=="number"?(l[v("min",c)]=p.ideal,f.optional.push(l),l={},l[v("max",c)]=p.ideal,f.optional.push(l)):(l[v("",c)]=p.ideal,f.optional.push(l))}p.exact!==void 0&&typeof p.exact!="number"?(f.mandatory=f.mandatory||{},f.mandatory[v("",c)]=p.exact):["min","max"].forEach(l=>{p[l]!==void 0&&(f.mandatory=f.mandatory||{},f.mandatory[v(l,c)]=p[l])})}),o.advanced&&(f.optional=(f.optional||[]).concat(o.advanced)),f},a=function(o,f){if(i.version>=61)return f(o);if(o=JSON.parse(JSON.stringify(o)),o&&typeof o.audio=="object"){const c=function(p,v,l){v in p&&!(l in p)&&(p[l]=p[v],delete p[v])};o=JSON.parse(JSON.stringify(o)),c(o.audio,"autoGainControl","googAutoGainControl"),c(o.audio,"noiseSuppression","googNoiseSuppression"),o.audio=n(o.audio)}if(o&&typeof o.video=="object"){let c=o.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const p=i.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete o.video.facingMode;let v;if(c.exact==="environment"||c.ideal==="environment"?v=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(v=["front"]),v)return t.mediaDevices.enumerateDevices().then(l=>{l=l.filter(h=>h.kind==="videoinput");let u=l.find(h=>v.some(m=>h.label.toLowerCase().includes(m)));return!u&&l.length&&v.includes("back")&&(u=l[l.length-1]),u&&(o.video.deviceId=c.exact?{exact:u.deviceId}:{ideal:u.deviceId}),o.video=n(o.video),logging("chrome: "+JSON.stringify(o)),f(o)})}o.video=n(o.video)}return logging("chrome: "+JSON.stringify(o)),f(o)},s=function(o){return i.version>=64?o:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[o.name]||o.name,message:o.message,constraint:o.constraint||o.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},d=function(o,f,c){a(o,p=>{t.webkitGetUserMedia(p,f,v=>{c&&c(s(v))})})};if(t.getUserMedia=d.bind(t),t.mediaDevices.getUserMedia){const o=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(f){return a(f,c=>o(c).then(p=>{if(c.audio&&!p.getAudioTracks().length||c.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(v=>{v.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(s(p))))}}}function shimGetDisplayMedia$1(e,i){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof i!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(n){return i(n).then(a=>{const s=n.video&&n.video.width,d=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:a,maxFrameRate:o||3}},s&&(n.video.mandatory.maxWidth=s),d&&(n.video.mandatory.maxHeight=d),e.navigator.mediaDevices.getUserMedia(n)})}}}function shimMediaStream(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function shimOnTrack$1(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=n=>{n.stream.addEventListener("addtrack",a=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===a.track.id):s={track:a.track};const d=new Event("track");d.track=a.track,d.receiver=s,d.transceiver={receiver:s},d.streams=[n.stream],this.dispatchEvent(d)}),n.stream.getTracks().forEach(a=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===a.id):s={track:a};const d=new Event("track");d.track=a,d.receiver=s,d.transceiver={receiver:s},d.streams=[n.stream],this.dispatchEvent(d)})},this.addEventListener("addstream",this._ontrackpoly)),i.apply(this,arguments)}}else wrapPeerConnectionEvent(e,"track",i=>(i.transceiver||Object.defineProperty(i,"transceiver",{value:{receiver:i.receiver}}),i))}function shimGetSendersWithDtmf(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const i=function(a,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=a.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:a}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const a=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,f){let c=a.apply(this,arguments);return c||(c=i(this,o),this._senders.push(c)),c};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){s.apply(this,arguments);const f=this._senders.indexOf(o);f!==-1&&this._senders.splice(f,1)}}const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],t.apply(this,[s]),s.getTracks().forEach(d=>{this._senders.push(i(this,d))})};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(d=>{const o=this._senders.find(f=>f.track===d);o&&this._senders.splice(this._senders.indexOf(o),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const i=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const n=i.apply(this,[]);return n.forEach(a=>a._pc=this),n},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimGetStats(e){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[n,a,s]=arguments;if(arguments.length>0&&typeof n=="function")return i.apply(this,arguments);if(i.length===0&&(arguments.length===0||typeof n!="function"))return i.apply(this,[]);const d=function(f){const c={};return f.result().forEach(v=>{const l={id:v.id,timestamp:v.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[v.type]||v.type};v.names().forEach(u=>{l[u]=v.stat(u)}),c[l.id]=l}),c},o=function(f){return new Map(Object.keys(f).map(c=>[c,f[c]]))};if(arguments.length>=2){const f=function(c){a(o(d(c)))};return i.apply(this,[f,n])}return new Promise((f,c)=>{i.apply(this,[function(p){f(o(d(p)))},c])}).then(a,s)}}function shimSenderReceiverGetStats(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=t.apply(this,[]);return s.forEach(d=>d._pc=this),s});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=n.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(d=>filterStats(d,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const a=t.apply(this,[]);return a.forEach(s=>s._pc=this),a}),wrapPeerConnectionEvent(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){const a=this;return this._pc.getStats().then(s=>filterStats(s,a.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const n=arguments[0];let a,s,d;return this.getSenders().forEach(o=>{o.track===n&&(a?d=!0:a=o)}),this.getReceivers().forEach(o=>(o.track===n&&(s?d=!0:s=o),o.track===n)),d||a&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):a?a.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(d=>this._shimmedLocalStreams[d][0])};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(d,o){if(!o)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const f=i.apply(this,arguments);return this._shimmedLocalStreams[o.id]?this._shimmedLocalStreams[o.id].indexOf(f)===-1&&this._shimmedLocalStreams[o.id].push(f):this._shimmedLocalStreams[o.id]=[o,f],f};const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(d){this._shimmedLocalStreams=this._shimmedLocalStreams||{},d.getTracks().forEach(c=>{if(this.getSenders().find(v=>v.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();t.apply(this,arguments);const f=this.getSenders().filter(c=>o.indexOf(c)===-1);this._shimmedLocalStreams[d.id]=[d].concat(f)};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[d.id],n.apply(this,arguments)};const a=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},d&&Object.keys(this._shimmedLocalStreams).forEach(o=>{const f=this._shimmedLocalStreams[o].indexOf(d);f!==-1&&this._shimmedLocalStreams[o].splice(f,1),this._shimmedLocalStreams[o].length===1&&delete this._shimmedLocalStreams[o]}),a.apply(this,arguments)}}function shimAddTrackRemoveTrack(e,i){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&i.version>=65)return shimAddTrackRemoveTrackWithNative(e);const t=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const p=t.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(v=>this._reverseStreams[v.id])};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(v=>{if(this.getSenders().find(u=>u.track===v))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const v=new e.MediaStream(p.getTracks());this._streams[p.id]=v,this._reverseStreams[v.id]=p,p=v}n.apply(this,[p])};const a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},a.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},e.RTCPeerConnection.prototype.addTrack=function(p,v){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const l=[].slice.call(arguments,1);if(l.length!==1||!l[0].getTracks().find(m=>m===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const h=this._streams[v.id];if(h)h.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new e.MediaStream([p]);this._streams[v.id]=m,this._reverseStreams[m.id]=v,this.addStream(m)}return this.getSenders().find(m=>m.track===p)};function s(c,p){let v=p.sdp;return Object.keys(c._reverseStreams||[]).forEach(l=>{const u=c._reverseStreams[l],h=c._streams[u.id];v=v.replace(new RegExp(h.id,"g"),u.id)}),new RTCSessionDescription({type:p.type,sdp:v})}function d(c,p){let v=p.sdp;return Object.keys(c._reverseStreams||[]).forEach(l=>{const u=c._reverseStreams[l],h=c._streams[u.id];v=v.replace(new RegExp(u.id,"g"),h.id)}),new RTCSessionDescription({type:p.type,sdp:v})}["createOffer","createAnswer"].forEach(function(c){const p=e.RTCPeerConnection.prototype[c],v={[c](){const l=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[h=>{const m=s(this,h);l[0].apply(null,[m])},h=>{l[1]&&l[1].apply(null,h)},arguments[2]]):p.apply(this,arguments).then(h=>s(this,h))}};e.RTCPeerConnection.prototype[c]=v[c]});const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?o.apply(this,arguments):(arguments[0]=d(this,arguments[0]),o.apply(this,arguments))};const f=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=f.get.apply(this);return c.type===""?c:s(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let l;Object.keys(this._streams).forEach(u=>{this._streams[u].getTracks().find(m=>p.track===m)&&(l=this._streams[u])}),l&&(l.getTracks().length===1?this.removeStream(this._reverseStreams[l.id]):l.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection$1(e,i){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=e.RTCPeerConnection.prototype[t],a={[t](){return arguments[0]=new(t==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=a[t]})}function fixNegotiationNeeded(e,i){wrapPeerConnectionEvent(e,"negotiationneeded",t=>{const n=t.target;if(!((i.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return t})}var chromeShim=Object.freeze({__proto__:null,fixNegotiationNeeded,shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative,shimGetDisplayMedia:shimGetDisplayMedia$1,shimGetSendersWithDtmf,shimGetStats,shimGetUserMedia:shimGetUserMedia$2,shimMediaStream,shimOnTrack:shimOnTrack$1,shimPeerConnection:shimPeerConnection$1,shimSenderReceiverGetStats});function shimGetUserMedia$1(e,i){const t=e&&e.navigator,n=e&&e.MediaStreamTrack;if(t.getUserMedia=function(a,s,d){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(a).then(s,d)},!(i.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const a=function(d,o,f){o in d&&!(f in d)&&(d[f]=d[o],delete d[o])},s=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(d){return typeof d=="object"&&typeof d.audio=="object"&&(d=JSON.parse(JSON.stringify(d)),a(d.audio,"autoGainControl","mozAutoGainControl"),a(d.audio,"noiseSuppression","mozNoiseSuppression")),s(d)},n&&n.prototype.getSettings){const d=n.prototype.getSettings;n.prototype.getSettings=function(){const o=d.apply(this,arguments);return a(o,"mozAutoGainControl","autoGainControl"),a(o,"mozNoiseSuppression","noiseSuppression"),o}}if(n&&n.prototype.applyConstraints){const d=n.prototype.applyConstraints;n.prototype.applyConstraints=function(o){return this.kind==="audio"&&typeof o=="object"&&(o=JSON.parse(JSON.stringify(o)),a(o,"autoGainControl","mozAutoGainControl"),a(o,"noiseSuppression","mozNoiseSuppression")),d.apply(this,[o])}}}}function shimGetDisplayMedia(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!(n&&n.video)){const a=new DOMException("getDisplayMedia without video constraints is undefined");return a.name="NotFoundError",a.code=8,Promise.reject(a)}return n.video===!0?n.video={mediaSource:i}:n.video.mediaSource=i,e.navigator.mediaDevices.getUserMedia(n)})}function shimOnTrack(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimPeerConnection(e,i){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){const s=e.RTCPeerConnection.prototype[a],d={[a](){return arguments[0]=new(a==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[a]=d[a]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,d,o]=arguments;return n.apply(this,[s||null]).then(f=>{if(i.version<53&&!d)try{f.forEach(c=>{c.type=t[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;f.forEach((p,v)=>{f.set(v,Object.assign({},p,{type:t[p.type]||p.type}))})}return f}).then(d,o)}}function shimSenderGetStats(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const i=e.RTCPeerConnection.prototype.getSenders;i&&(e.RTCPeerConnection.prototype.getSenders=function(){const a=i.apply(this,[]);return a.forEach(s=>s._pc=this),a});const t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){const a=t.apply(this,arguments);return a._pc=this,a}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=i.apply(this,[]);return n.forEach(a=>a._pc=this),n}),wrapPeerConnectionEvent(e,"track",t=>(t.receiver._pc=t.srcElement,t)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function shimRemoveStream(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){deprecated("removeStream","removeTrack"),this.getSenders().forEach(n=>{n.track&&t.getTracks().includes(n.track)&&this.removeTrack(n)})})}function shimRTCDataChannel(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function shimAddTransceiver(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.addTransceiver;i&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const n=arguments[1],a=n&&"sendEncodings"in n;a&&n.sendEncodings.forEach(d=>{if("rid"in d&&!/^[a-z0-9]{0,16}$/i.test(d.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in d&&!(parseFloat(d.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in d&&!(parseFloat(d.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=i.apply(this,arguments);if(a){const{sender:d}=s,o=d.getParameters();(!("encodings"in o)||o.encodings.length===1&&Object.keys(o.encodings[0]).length===0)&&(o.encodings=n.sendEncodings,d.sendEncodings=n.sendEncodings,this.setParametersPromises.push(d.setParameters(o).then(()=>{delete d.sendEncodings}).catch(()=>{delete d.sendEncodings})))}return s})}function shimGetParameters(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const i=e.RTCRtpSender.prototype.getParameters;i&&(e.RTCRtpSender.prototype.getParameters=function(){const n=i.apply(this,arguments);return"encodings"in n||(n.encodings=[].concat(this.sendEncodings||[{}])),n})}function shimCreateOffer(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}function shimCreateAnswer(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}var firefoxShim=Object.freeze({__proto__:null,shimAddTransceiver,shimCreateAnswer,shimCreateOffer,shimGetDisplayMedia,shimGetParameters,shimGetUserMedia:shimGetUserMedia$1,shimOnTrack,shimPeerConnection,shimRTCDataChannel,shimReceiverGetStats,shimRemoveStream,shimSenderGetStats});function shimLocalStreamsAPI(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(n){this._localStreams||(this._localStreams=[]),this._localStreams.includes(n)||this._localStreams.push(n),n.getAudioTracks().forEach(a=>i.call(this,a,n)),n.getVideoTracks().forEach(a=>i.call(this,a,n))},e.RTCPeerConnection.prototype.addTrack=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),d=1;d<a;d++)s[d-1]=arguments[d];return s&&s.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),i.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(t){this._localStreams||(this._localStreams=[]);const n=this._localStreams.indexOf(t);if(n===-1)return;this._localStreams.splice(n,1);const a=t.getTracks();this.getSenders().forEach(s=>{a.includes(s.track)&&this.removeTrack(s)})})}}function shimRemoteStreamsAPI(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(a=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(a))return;this._remoteStreams.push(a);const s=new Event("addstream");s.stream=a,this.dispatchEvent(s)})})}});const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const n=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(a){a.streams.forEach(s=>{if(n._remoteStreams||(n._remoteStreams=[]),n._remoteStreams.indexOf(s)>=0)return;n._remoteStreams.push(s);const d=new Event("addstream");d.stream=s,n.dispatchEvent(d)})}),i.apply(n,arguments)}}}function shimCallbacksAPI(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,t=i.createOffer,n=i.createAnswer,a=i.setLocalDescription,s=i.setRemoteDescription,d=i.addIceCandidate;i.createOffer=function(c,p){const v=arguments.length>=2?arguments[2]:arguments[0],l=t.apply(this,[v]);return p?(l.then(c,p),Promise.resolve()):l},i.createAnswer=function(c,p){const v=arguments.length>=2?arguments[2]:arguments[0],l=n.apply(this,[v]);return p?(l.then(c,p),Promise.resolve()):l};let o=function(f,c,p){const v=a.apply(this,[f]);return p?(v.then(c,p),Promise.resolve()):v};i.setLocalDescription=o,o=function(f,c,p){const v=s.apply(this,[f]);return p?(v.then(c,p),Promise.resolve()):v},i.setRemoteDescription=o,o=function(f,c,p){const v=d.apply(this,[f]);return p?(v.then(c,p),Promise.resolve()):v},i.addIceCandidate=o}function shimGetUserMedia(e){const i=e&&e.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){const t=i.mediaDevices,n=t.getUserMedia.bind(t);i.mediaDevices.getUserMedia=a=>n(shimConstraints(a))}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=function(n,a,s){i.mediaDevices.getUserMedia(n).then(a,s)}.bind(i))}function shimConstraints(e){return e&&e.video!==void 0?Object.assign({},e,{video:compactObject(e.video)}):e}function shimRTCIceServerUrls(e){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection;e.RTCPeerConnection=function(n,a){if(n&&n.iceServers){const s=[];for(let d=0;d<n.iceServers.length;d++){let o=n.iceServers[d];!o.hasOwnProperty("urls")&&o.hasOwnProperty("url")?(deprecated("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,s.push(o)):s.push(n.iceServers[d])}n.iceServers=s}return new i(n,a)},e.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return i.generateCertificate}})}function shimTrackEventTransceiver(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(e){const i=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(n){if(n){typeof n.offerToReceiveAudio<"u"&&(n.offerToReceiveAudio=!!n.offerToReceiveAudio);const a=this.getTransceivers().find(d=>d.receiver.track.kind==="audio");n.offerToReceiveAudio===!1&&a?a.direction==="sendrecv"?a.setDirection?a.setDirection("sendonly"):a.direction="sendonly":a.direction==="recvonly"&&(a.setDirection?a.setDirection("inactive"):a.direction="inactive"):n.offerToReceiveAudio===!0&&!a&&this.addTransceiver("audio",{direction:"recvonly"}),typeof n.offerToReceiveVideo<"u"&&(n.offerToReceiveVideo=!!n.offerToReceiveVideo);const s=this.getTransceivers().find(d=>d.receiver.track.kind==="video");n.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):n.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return i.apply(this,arguments)}}function shimAudioContext(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var safariShim=Object.freeze({__proto__:null,shimAudioContext,shimCallbacksAPI,shimConstraints,shimCreateOfferLegacy,shimGetUserMedia,shimLocalStreamsAPI,shimRTCIceServerUrls,shimRemoteStreamsAPI,shimTrackEventTransceiver}),sdpExports={},sdp$1={get exports(){return sdpExports},set exports(e){sdpExports=e}};(function(e){const i={};i.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},i.localCName=i.generateIdentifier(),i.splitLines=function(t){return t.trim().split(`
`).map(n=>n.trim())},i.splitSections=function(t){return t.split(`
m=`).map((a,s)=>(s>0?"m="+a:a).trim()+`\r
`)},i.getDescription=function(t){const n=i.splitSections(t);return n&&n[0]},i.getMediaSections=function(t){const n=i.splitSections(t);return n.shift(),n},i.matchPrefix=function(t,n){return i.splitLines(t).filter(a=>a.indexOf(n)===0)},i.parseCandidate=function(t){let n;t.indexOf("a=candidate:")===0?n=t.substring(12).split(" "):n=t.substring(10).split(" ");const a={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let s=8;s<n.length;s+=2)switch(n[s]){case"raddr":a.relatedAddress=n[s+1];break;case"rport":a.relatedPort=parseInt(n[s+1],10);break;case"tcptype":a.tcpType=n[s+1];break;case"ufrag":a.ufrag=n[s+1],a.usernameFragment=n[s+1];break;default:a[n[s]]===void 0&&(a[n[s]]=n[s+1]);break}return a},i.writeCandidate=function(t){const n=[];n.push(t.foundation);const a=t.component;a==="rtp"?n.push(1):a==="rtcp"?n.push(2):n.push(a),n.push(t.protocol.toUpperCase()),n.push(t.priority),n.push(t.address||t.ip),n.push(t.port);const s=t.type;return n.push("typ"),n.push(s),s!=="host"&&t.relatedAddress&&t.relatedPort&&(n.push("raddr"),n.push(t.relatedAddress),n.push("rport"),n.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(n.push("ufrag"),n.push(t.usernameFragment||t.ufrag)),"candidate:"+n.join(" ")},i.parseIceOptions=function(t){return t.substr(14).split(" ")},i.parseRtpMap=function(t){let n=t.substr(9).split(" ");const a={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),a.name=n[0],a.clockRate=parseInt(n[1],10),a.channels=n.length===3?parseInt(n[2],10):1,a.numChannels=a.channels,a},i.writeRtpMap=function(t){let n=t.payloadType;t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType);const a=t.channels||t.numChannels||1;return"a=rtpmap:"+n+" "+t.name+"/"+t.clockRate+(a!==1?"/"+a:"")+`\r
`},i.parseExtmap=function(t){const n=t.substr(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1]}},i.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+`\r
`},i.parseFmtp=function(t){const n={};let a;const s=t.substr(t.indexOf(" ")+1).split(";");for(let d=0;d<s.length;d++)a=s[d].trim().split("="),n[a[0].trim()]=a[1];return n},i.writeFmtp=function(t){let n="",a=t.payloadType;if(t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const s=[];Object.keys(t.parameters).forEach(d=>{t.parameters[d]!==void 0?s.push(d+"="+t.parameters[d]):s.push(d)}),n+="a=fmtp:"+a+" "+s.join(";")+`\r
`}return n},i.parseRtcpFb=function(t){const n=t.substr(t.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},i.writeRtcpFb=function(t){let n="",a=t.payloadType;return t.preferredPayloadType!==void 0&&(a=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(s=>{n+="a=rtcp-fb:"+a+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),n},i.parseSsrcMedia=function(t){const n=t.indexOf(" "),a={ssrc:parseInt(t.substr(7,n-7),10)},s=t.indexOf(":",n);return s>-1?(a.attribute=t.substr(n+1,s-n-1),a.value=t.substr(s+1)):a.attribute=t.substr(n+1),a},i.parseSsrcGroup=function(t){const n=t.substr(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(a=>parseInt(a,10))}},i.getMid=function(t){const n=i.matchPrefix(t,"a=mid:")[0];if(n)return n.substr(6)},i.parseFingerprint=function(t){const n=t.substr(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},i.getDtlsParameters=function(t,n){return{role:"auto",fingerprints:i.matchPrefix(t+n,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(t,n){let a="a=setup:"+n+`\r
`;return t.fingerprints.forEach(s=>{a+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),a},i.parseCryptoLine=function(t){const n=t.substr(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},i.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?i.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},i.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const n=t.substr(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},i.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},i.getCryptoParameters=function(t,n){return i.matchPrefix(t+n,"a=crypto:").map(i.parseCryptoLine)},i.getIceParameters=function(t,n){const a=i.matchPrefix(t+n,"a=ice-ufrag:")[0],s=i.matchPrefix(t+n,"a=ice-pwd:")[0];return a&&s?{usernameFragment:a.substr(12),password:s.substr(10)}:null},i.writeIceParameters=function(t){let n="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(n+=`a=ice-lite\r
`),n},i.parseRtpParameters=function(t){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=i.splitLines(t)[0].split(" ");for(let d=3;d<s.length;d++){const o=s[d],f=i.matchPrefix(t,"a=rtpmap:"+o+" ")[0];if(f){const c=i.parseRtpMap(f),p=i.matchPrefix(t,"a=fmtp:"+o+" ");switch(c.parameters=p.length?i.parseFmtp(p[0]):{},c.rtcpFeedback=i.matchPrefix(t,"a=rtcp-fb:"+o+" ").map(i.parseRtcpFb),n.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(c.name.toUpperCase());break}}}return i.matchPrefix(t,"a=extmap:").forEach(d=>{n.headerExtensions.push(i.parseExtmap(d))}),n},i.writeRtpDescription=function(t,n){let a="";a+="m="+t+" ",a+=n.codecs.length>0?"9":"0",a+=" UDP/TLS/RTP/SAVPF ",a+=n.codecs.map(d=>d.preferredPayloadType!==void 0?d.preferredPayloadType:d.payloadType).join(" ")+`\r
`,a+=`c=IN IP4 0.0.0.0\r
`,a+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(d=>{a+=i.writeRtpMap(d),a+=i.writeFmtp(d),a+=i.writeRtcpFb(d)});let s=0;return n.codecs.forEach(d=>{d.maxptime>s&&(s=d.maxptime)}),s>0&&(a+="a=maxptime:"+s+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(d=>{a+=i.writeExtmap(d)}),a},i.parseRtpEncodingParameters=function(t){const n=[],a=i.parseRtpParameters(t),s=a.fecMechanisms.indexOf("RED")!==-1,d=a.fecMechanisms.indexOf("ULPFEC")!==-1,o=i.matchPrefix(t,"a=ssrc:").map(l=>i.parseSsrcMedia(l)).filter(l=>l.attribute==="cname"),f=o.length>0&&o[0].ssrc;let c;const p=i.matchPrefix(t,"a=ssrc-group:FID").map(l=>l.substr(17).split(" ").map(h=>parseInt(h,10)));p.length>0&&p[0].length>1&&p[0][0]===f&&(c=p[0][1]),a.codecs.forEach(l=>{if(l.name.toUpperCase()==="RTX"&&l.parameters.apt){let u={ssrc:f,codecPayloadType:parseInt(l.parameters.apt,10)};f&&c&&(u.rtx={ssrc:c}),n.push(u),s&&(u=JSON.parse(JSON.stringify(u)),u.fec={ssrc:f,mechanism:d?"red+ulpfec":"red"},n.push(u))}}),n.length===0&&f&&n.push({ssrc:f});let v=i.matchPrefix(t,"b=");return v.length&&(v[0].indexOf("b=TIAS:")===0?v=parseInt(v[0].substr(7),10):v[0].indexOf("b=AS:")===0?v=parseInt(v[0].substr(5),10)*1e3*.95-50*40*8:v=void 0,n.forEach(l=>{l.maxBitrate=v})),n},i.parseRtcpParameters=function(t){const n={},a=i.matchPrefix(t,"a=ssrc:").map(o=>i.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];a&&(n.cname=a.value,n.ssrc=a.ssrc);const s=i.matchPrefix(t,"a=rtcp-rsize");n.reducedSize=s.length>0,n.compound=s.length===0;const d=i.matchPrefix(t,"a=rtcp-mux");return n.mux=d.length>0,n},i.writeRtcpParameters=function(t){let n="";return t.reducedSize&&(n+=`a=rtcp-rsize\r
`),t.mux&&(n+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(n+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),n},i.parseMsid=function(t){let n;const a=i.matchPrefix(t,"a=msid:");if(a.length===1)return n=a[0].substr(7).split(" "),{stream:n[0],track:n[1]};const s=i.matchPrefix(t,"a=ssrc:").map(d=>i.parseSsrcMedia(d)).filter(d=>d.attribute==="msid");if(s.length>0)return n=s[0].value.split(" "),{stream:n[0],track:n[1]}},i.parseSctpDescription=function(t){const n=i.parseMLine(t),a=i.matchPrefix(t,"a=max-message-size:");let s;a.length>0&&(s=parseInt(a[0].substr(19),10)),isNaN(s)&&(s=65536);const d=i.matchPrefix(t,"a=sctp-port:");if(d.length>0)return{port:parseInt(d[0].substr(12),10),protocol:n.fmt,maxMessageSize:s};const o=i.matchPrefix(t,"a=sctpmap:");if(o.length>0){const f=o[0].substr(10).split(" ");return{port:parseInt(f[0],10),protocol:f[1],maxMessageSize:s}}},i.writeSctpDescription=function(t,n){let a=[];return t.protocol!=="DTLS/SCTP"?a=["m="+t.kind+" 9 "+t.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:a=["m="+t.kind+" 9 "+t.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&a.push("a=max-message-size:"+n.maxMessageSize+`\r
`),a.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(t,n,a){let s;const d=n!==void 0?n:2;return t?s=t:s=i.generateSessionId(),`v=0\r
o=`+(a||"thisisadapterortc")+" "+s+" "+d+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},i.getDirection=function(t,n){const a=i.splitLines(t);for(let s=0;s<a.length;s++)switch(a[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return a[s].substr(2)}return n?i.getDirection(n):"sendrecv"},i.getKind=function(t){return i.splitLines(t)[0].split(" ")[0].substr(2)},i.isRejected=function(t){return t.split(" ",2)[1]==="0"},i.parseMLine=function(t){const a=i.splitLines(t)[0].substr(2).split(" ");return{kind:a[0],port:parseInt(a[1],10),protocol:a[2],fmt:a.slice(3).join(" ")}},i.parseOLine=function(t){const a=i.matchPrefix(t,"o=")[0].substr(2).split(" ");return{username:a[0],sessionId:a[1],sessionVersion:parseInt(a[2],10),netType:a[3],addressType:a[4],address:a[5]}},i.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const n=i.splitLines(t);for(let a=0;a<n.length;a++)if(n[a].length<2||n[a].charAt(1)!=="=")return!1;return!0},e.exports=i})(sdp$1);var SDPUtils=sdpExports,sdp=_mergeNamespaces({__proto__:null,default:SDPUtils},[sdpExports]);function shimRTCIceCandidate(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const i=e.RTCIceCandidate;e.RTCIceCandidate=function(n){if(typeof n=="object"&&n.candidate&&n.candidate.indexOf("a=")===0&&(n=JSON.parse(JSON.stringify(n)),n.candidate=n.candidate.substr(2)),n.candidate&&n.candidate.length){const a=new i(n),s=SDPUtils.parseCandidate(n.candidate),d=Object.assign(a,s);return d.toJSON=function(){return{candidate:d.candidate,sdpMid:d.sdpMid,sdpMLineIndex:d.sdpMLineIndex,usernameFragment:d.usernameFragment}},d}return new i(n)},e.RTCIceCandidate.prototype=i.prototype,wrapPeerConnectionEvent(e,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t))}function shimMaxMessageSize(e,i){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(o){if(!o||!o.sdp)return!1;const f=SDPUtils.splitSections(o.sdp);return f.shift(),f.some(c=>{const p=SDPUtils.parseMLine(c);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},n=function(o){const f=o.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(f===null||f.length<2)return-1;const c=parseInt(f[1],10);return c!==c?-1:c},a=function(o){let f=65536;return i.browser==="firefox"&&(i.version<57?o===-1?f=16384:f=2147483637:i.version<60?f=i.version===57?65535:65536:f=2147483637),f},s=function(o,f){let c=65536;i.browser==="firefox"&&i.version===57&&(c=65535);const p=SDPUtils.matchPrefix(o.sdp,"a=max-message-size:");return p.length>0?c=parseInt(p[0].substr(19),10):i.browser==="firefox"&&f!==-1&&(c=2147483637),c},d=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,i.browser==="chrome"&&i.version>=76){const{sdpSemantics:f}=this.getConfiguration();f==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const f=n(arguments[0]),c=a(f),p=s(arguments[0],f);let v;c===0&&p===0?v=Number.POSITIVE_INFINITY:c===0||p===0?v=Math.max(c,p):v=Math.min(c,p);const l={};Object.defineProperty(l,"maxMessageSize",{get(){return v}}),this._sctp=l}return d.apply(this,arguments)}}function shimSendThrowTypeError(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function i(n,a){const s=n.send;n.send=function(){const o=arguments[0],f=o.length||o.size||o.byteLength;if(n.readyState==="open"&&a.sctp&&f>a.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+a.sctp.maxMessageSize+" bytes)");return s.apply(n,arguments)}}const t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const a=t.apply(this,arguments);return i(a,this),a},wrapPeerConnectionEvent(e,"datachannel",n=>(i(n.channel,n.target),n))}function shimConnectionState(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype;Object.defineProperty(i,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(i,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const n=i[t];i[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=a=>{const s=a.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const d=new Event("connectionstatechange",a);s.dispatchEvent(d)}return a},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function removeExtmapAllowMixed(e,i){if(!e.RTCPeerConnection||i.browser==="chrome"&&i.version>=71||i.browser==="safari"&&i.version>=605)return;const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(a){if(a&&a.sdp&&a.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=a.sdp.split(`
`).filter(d=>d.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&a instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:a.type,sdp:s}):a.sdp=s}return t.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(e,i){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const t=e.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(i.browser==="chrome"&&i.version<78||i.browser==="firefox"&&i.version<68||i.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(e,i){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const t=e.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let a=arguments[0]||{};if(typeof a!="object"||a.type&&a.sdp)return t.apply(this,arguments);if(a={type:a.type,sdp:a.sdp},!a.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":a.type="offer";break;default:a.type="answer";break}return a.sdp||a.type!=="offer"&&a.type!=="answer"?t.apply(this,[a]):(a.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(d=>t.apply(this,[d]))})}var commonShim=Object.freeze({__proto__:null,removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty,shimConnectionState,shimMaxMessageSize,shimParameterlessSetLocalDescription,shimRTCIceCandidate,shimSendThrowTypeError});function adapterFactory(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const t=log,n=detectBrowser(e),a={browserDetails:n,commonShim,extractVersion,disableLog,disableWarnings,sdp};switch(n.browser){case"chrome":if(!chromeShim||!shimPeerConnection$1||!i.shimChrome)return t("Chrome shim is not included in this adapter release."),a;if(n.version===null)return t("Chrome shim can not determine version, not shimming."),a;t("adapter.js shimming chrome."),a.browserShim=chromeShim,shimAddIceCandidateNullOrEmpty(e,n),shimParameterlessSetLocalDescription(e),shimGetUserMedia$2(e,n),shimMediaStream(e),shimPeerConnection$1(e,n),shimOnTrack$1(e),shimAddTrackRemoveTrack(e,n),shimGetSendersWithDtmf(e),shimGetStats(e),shimSenderReceiverGetStats(e),fixNegotiationNeeded(e,n),shimRTCIceCandidate(e),shimConnectionState(e),shimMaxMessageSize(e,n),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,n);break;case"firefox":if(!firefoxShim||!shimPeerConnection||!i.shimFirefox)return t("Firefox shim is not included in this adapter release."),a;t("adapter.js shimming firefox."),a.browserShim=firefoxShim,shimAddIceCandidateNullOrEmpty(e,n),shimParameterlessSetLocalDescription(e),shimGetUserMedia$1(e,n),shimPeerConnection(e,n),shimOnTrack(e),shimRemoveStream(e),shimSenderGetStats(e),shimReceiverGetStats(e),shimRTCDataChannel(e),shimAddTransceiver(e),shimGetParameters(e),shimCreateOffer(e),shimCreateAnswer(e),shimRTCIceCandidate(e),shimConnectionState(e),shimMaxMessageSize(e,n),shimSendThrowTypeError(e);break;case"safari":if(!safariShim||!i.shimSafari)return t("Safari shim is not included in this adapter release."),a;t("adapter.js shimming safari."),a.browserShim=safariShim,shimAddIceCandidateNullOrEmpty(e,n),shimParameterlessSetLocalDescription(e),shimRTCIceServerUrls(e),shimCreateOfferLegacy(e),shimCallbacksAPI(e),shimLocalStreamsAPI(e),shimRemoteStreamsAPI(e),shimTrackEventTransceiver(e),shimGetUserMedia(e),shimAudioContext(e),shimRTCIceCandidate(e),shimMaxMessageSize(e,n),shimSendThrowTypeError(e),removeExtmapAllowMixed(e,n);break;default:t("Unsupported browser!");break}return a}adapterFactory({window:typeof window>"u"?void 0:window});var SignalTarget;(function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(SignalTarget||(SignalTarget={}));function signalTargetFromJSON(e){switch(e){case 0:case"PUBLISHER":return SignalTarget.PUBLISHER;case 1:case"SUBSCRIBER":return SignalTarget.SUBSCRIBER;case-1:case"UNRECOGNIZED":default:return SignalTarget.UNRECOGNIZED}}function signalTargetToJSON(e){switch(e){case SignalTarget.PUBLISHER:return"PUBLISHER";case SignalTarget.SUBSCRIBER:return"SUBSCRIBER";case SignalTarget.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var StreamState;(function(e){e[e.ACTIVE=0]="ACTIVE",e[e.PAUSED=1]="PAUSED",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(StreamState||(StreamState={}));function streamStateFromJSON(e){switch(e){case 0:case"ACTIVE":return StreamState.ACTIVE;case 1:case"PAUSED":return StreamState.PAUSED;case-1:case"UNRECOGNIZED":default:return StreamState.UNRECOGNIZED}}function streamStateToJSON(e){switch(e){case StreamState.ACTIVE:return"ACTIVE";case StreamState.PAUSED:return"PAUSED";case StreamState.UNRECOGNIZED:default:return"UNRECOGNIZED"}}var CandidateProtocol;(function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.TLS=2]="TLS",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"})(CandidateProtocol||(CandidateProtocol={}));function candidateProtocolFromJSON(e){switch(e){case 0:case"UDP":return CandidateProtocol.UDP;case 1:case"TCP":return CandidateProtocol.TCP;case 2:case"TLS":return CandidateProtocol.TLS;case-1:case"UNRECOGNIZED":default:return CandidateProtocol.UNRECOGNIZED}}function candidateProtocolToJSON(e){switch(e){case CandidateProtocol.UDP:return"UDP";case CandidateProtocol.TCP:return"TCP";case CandidateProtocol.TLS:return"TLS";case CandidateProtocol.UNRECOGNIZED:default:return"UNRECOGNIZED"}}function createBaseSignalRequest(){return{message:void 0}}const SignalRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch((t=e.message)===null||t===void 0?void 0:t.$case){case"offer":SessionDescription.encode(e.message.offer,i.uint32(10).fork()).ldelim();break;case"answer":SessionDescription.encode(e.message.answer,i.uint32(18).fork()).ldelim();break;case"trickle":TrickleRequest.encode(e.message.trickle,i.uint32(26).fork()).ldelim();break;case"addTrack":AddTrackRequest.encode(e.message.addTrack,i.uint32(34).fork()).ldelim();break;case"mute":MuteTrackRequest.encode(e.message.mute,i.uint32(42).fork()).ldelim();break;case"subscription":UpdateSubscription.encode(e.message.subscription,i.uint32(50).fork()).ldelim();break;case"trackSetting":UpdateTrackSettings.encode(e.message.trackSetting,i.uint32(58).fork()).ldelim();break;case"leave":LeaveRequest.encode(e.message.leave,i.uint32(66).fork()).ldelim();break;case"updateLayers":UpdateVideoLayers.encode(e.message.updateLayers,i.uint32(82).fork()).ldelim();break;case"subscriptionPermission":SubscriptionPermission.encode(e.message.subscriptionPermission,i.uint32(90).fork()).ldelim();break;case"syncState":SyncState.encode(e.message.syncState,i.uint32(98).fork()).ldelim();break;case"simulate":SimulateScenario.encode(e.message.simulate,i.uint32(106).fork()).ldelim();break;case"ping":i.uint32(112).int64(e.message.ping);break;case"updateMetadata":UpdateParticipantMetadata.encode(e.message.updateMetadata,i.uint32(122).fork()).ldelim();break;case"pingReq":Ping.encode(e.message.pingReq,i.uint32(130).fork()).ldelim();break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSignalRequest();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.message={$case:"offer",offer:SessionDescription.decode(t,t.uint32())};break;case 2:a.message={$case:"answer",answer:SessionDescription.decode(t,t.uint32())};break;case 3:a.message={$case:"trickle",trickle:TrickleRequest.decode(t,t.uint32())};break;case 4:a.message={$case:"addTrack",addTrack:AddTrackRequest.decode(t,t.uint32())};break;case 5:a.message={$case:"mute",mute:MuteTrackRequest.decode(t,t.uint32())};break;case 6:a.message={$case:"subscription",subscription:UpdateSubscription.decode(t,t.uint32())};break;case 7:a.message={$case:"trackSetting",trackSetting:UpdateTrackSettings.decode(t,t.uint32())};break;case 8:a.message={$case:"leave",leave:LeaveRequest.decode(t,t.uint32())};break;case 10:a.message={$case:"updateLayers",updateLayers:UpdateVideoLayers.decode(t,t.uint32())};break;case 11:a.message={$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.decode(t,t.uint32())};break;case 12:a.message={$case:"syncState",syncState:SyncState.decode(t,t.uint32())};break;case 13:a.message={$case:"simulate",simulate:SimulateScenario.decode(t,t.uint32())};break;case 14:a.message={$case:"ping",ping:longToNumber(t.int64())};break;case 15:a.message={$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.decode(t,t.uint32())};break;case 16:a.message={$case:"pingReq",pingReq:Ping.decode(t,t.uint32())};break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{message:isSet(e.offer)?{$case:"offer",offer:SessionDescription.fromJSON(e.offer)}:isSet(e.answer)?{$case:"answer",answer:SessionDescription.fromJSON(e.answer)}:isSet(e.trickle)?{$case:"trickle",trickle:TrickleRequest.fromJSON(e.trickle)}:isSet(e.addTrack)?{$case:"addTrack",addTrack:AddTrackRequest.fromJSON(e.addTrack)}:isSet(e.mute)?{$case:"mute",mute:MuteTrackRequest.fromJSON(e.mute)}:isSet(e.subscription)?{$case:"subscription",subscription:UpdateSubscription.fromJSON(e.subscription)}:isSet(e.trackSetting)?{$case:"trackSetting",trackSetting:UpdateTrackSettings.fromJSON(e.trackSetting)}:isSet(e.leave)?{$case:"leave",leave:LeaveRequest.fromJSON(e.leave)}:isSet(e.updateLayers)?{$case:"updateLayers",updateLayers:UpdateVideoLayers.fromJSON(e.updateLayers)}:isSet(e.subscriptionPermission)?{$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.fromJSON(e.subscriptionPermission)}:isSet(e.syncState)?{$case:"syncState",syncState:SyncState.fromJSON(e.syncState)}:isSet(e.simulate)?{$case:"simulate",simulate:SimulateScenario.fromJSON(e.simulate)}:isSet(e.ping)?{$case:"ping",ping:Number(e.ping)}:isSet(e.updateMetadata)?{$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.fromJSON(e.updateMetadata)}:isSet(e.pingReq)?{$case:"pingReq",pingReq:Ping.fromJSON(e.pingReq)}:void 0}},toJSON(e){var i,t,n,a,s,d,o,f,c,p,v,l,u,h,m,w,k,C,O,P,M,D,$,H,Z,re,Y,N,x,b,_,g,E,T,A,J,G,I,V,L,z,ie,se,me;const Se={};return((i=e.message)===null||i===void 0?void 0:i.$case)==="offer"&&(Se.offer=!((t=e.message)===null||t===void 0)&&t.offer?SessionDescription.toJSON((n=e.message)===null||n===void 0?void 0:n.offer):void 0),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&(Se.answer=!((s=e.message)===null||s===void 0)&&s.answer?SessionDescription.toJSON((d=e.message)===null||d===void 0?void 0:d.answer):void 0),((o=e.message)===null||o===void 0?void 0:o.$case)==="trickle"&&(Se.trickle=!((f=e.message)===null||f===void 0)&&f.trickle?TrickleRequest.toJSON((c=e.message)===null||c===void 0?void 0:c.trickle):void 0),((p=e.message)===null||p===void 0?void 0:p.$case)==="addTrack"&&(Se.addTrack=!((v=e.message)===null||v===void 0)&&v.addTrack?AddTrackRequest.toJSON((l=e.message)===null||l===void 0?void 0:l.addTrack):void 0),((u=e.message)===null||u===void 0?void 0:u.$case)==="mute"&&(Se.mute=!((h=e.message)===null||h===void 0)&&h.mute?MuteTrackRequest.toJSON((m=e.message)===null||m===void 0?void 0:m.mute):void 0),((w=e.message)===null||w===void 0?void 0:w.$case)==="subscription"&&(Se.subscription=!((k=e.message)===null||k===void 0)&&k.subscription?UpdateSubscription.toJSON((C=e.message)===null||C===void 0?void 0:C.subscription):void 0),((O=e.message)===null||O===void 0?void 0:O.$case)==="trackSetting"&&(Se.trackSetting=!((P=e.message)===null||P===void 0)&&P.trackSetting?UpdateTrackSettings.toJSON((M=e.message)===null||M===void 0?void 0:M.trackSetting):void 0),((D=e.message)===null||D===void 0?void 0:D.$case)==="leave"&&(Se.leave=!(($=e.message)===null||$===void 0)&&$.leave?LeaveRequest.toJSON((H=e.message)===null||H===void 0?void 0:H.leave):void 0),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="updateLayers"&&(Se.updateLayers=!((re=e.message)===null||re===void 0)&&re.updateLayers?UpdateVideoLayers.toJSON((Y=e.message)===null||Y===void 0?void 0:Y.updateLayers):void 0),((N=e.message)===null||N===void 0?void 0:N.$case)==="subscriptionPermission"&&(Se.subscriptionPermission=!((x=e.message)===null||x===void 0)&&x.subscriptionPermission?SubscriptionPermission.toJSON((b=e.message)===null||b===void 0?void 0:b.subscriptionPermission):void 0),((_=e.message)===null||_===void 0?void 0:_.$case)==="syncState"&&(Se.syncState=!((g=e.message)===null||g===void 0)&&g.syncState?SyncState.toJSON((E=e.message)===null||E===void 0?void 0:E.syncState):void 0),((T=e.message)===null||T===void 0?void 0:T.$case)==="simulate"&&(Se.simulate=!((A=e.message)===null||A===void 0)&&A.simulate?SimulateScenario.toJSON((J=e.message)===null||J===void 0?void 0:J.simulate):void 0),((G=e.message)===null||G===void 0?void 0:G.$case)==="ping"&&(Se.ping=Math.round((I=e.message)===null||I===void 0?void 0:I.ping)),((V=e.message)===null||V===void 0?void 0:V.$case)==="updateMetadata"&&(Se.updateMetadata=!((L=e.message)===null||L===void 0)&&L.updateMetadata?UpdateParticipantMetadata.toJSON((z=e.message)===null||z===void 0?void 0:z.updateMetadata):void 0),((ie=e.message)===null||ie===void 0?void 0:ie.$case)==="pingReq"&&(Se.pingReq=!((se=e.message)===null||se===void 0)&&se.pingReq?Ping.toJSON((me=e.message)===null||me===void 0?void 0:me.pingReq):void 0),Se},create(e){return SignalRequest.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d,o,f,c,p,v,l,u,h,m,w,k,C,O,P,M,D,$,H,Z,re,Y,N,x,b,_,g,E,T,A,J,G,I,V,L,z,ie,se,me,Se;const ke=createBaseSignalRequest();return((i=e.message)===null||i===void 0?void 0:i.$case)==="offer"&&((t=e.message)===null||t===void 0?void 0:t.offer)!==void 0&&((n=e.message)===null||n===void 0?void 0:n.offer)!==null&&(ke.message={$case:"offer",offer:SessionDescription.fromPartial(e.message.offer)}),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&((s=e.message)===null||s===void 0?void 0:s.answer)!==void 0&&((d=e.message)===null||d===void 0?void 0:d.answer)!==null&&(ke.message={$case:"answer",answer:SessionDescription.fromPartial(e.message.answer)}),((o=e.message)===null||o===void 0?void 0:o.$case)==="trickle"&&((f=e.message)===null||f===void 0?void 0:f.trickle)!==void 0&&((c=e.message)===null||c===void 0?void 0:c.trickle)!==null&&(ke.message={$case:"trickle",trickle:TrickleRequest.fromPartial(e.message.trickle)}),((p=e.message)===null||p===void 0?void 0:p.$case)==="addTrack"&&((v=e.message)===null||v===void 0?void 0:v.addTrack)!==void 0&&((l=e.message)===null||l===void 0?void 0:l.addTrack)!==null&&(ke.message={$case:"addTrack",addTrack:AddTrackRequest.fromPartial(e.message.addTrack)}),((u=e.message)===null||u===void 0?void 0:u.$case)==="mute"&&((h=e.message)===null||h===void 0?void 0:h.mute)!==void 0&&((m=e.message)===null||m===void 0?void 0:m.mute)!==null&&(ke.message={$case:"mute",mute:MuteTrackRequest.fromPartial(e.message.mute)}),((w=e.message)===null||w===void 0?void 0:w.$case)==="subscription"&&((k=e.message)===null||k===void 0?void 0:k.subscription)!==void 0&&((C=e.message)===null||C===void 0?void 0:C.subscription)!==null&&(ke.message={$case:"subscription",subscription:UpdateSubscription.fromPartial(e.message.subscription)}),((O=e.message)===null||O===void 0?void 0:O.$case)==="trackSetting"&&((P=e.message)===null||P===void 0?void 0:P.trackSetting)!==void 0&&((M=e.message)===null||M===void 0?void 0:M.trackSetting)!==null&&(ke.message={$case:"trackSetting",trackSetting:UpdateTrackSettings.fromPartial(e.message.trackSetting)}),((D=e.message)===null||D===void 0?void 0:D.$case)==="leave"&&(($=e.message)===null||$===void 0?void 0:$.leave)!==void 0&&((H=e.message)===null||H===void 0?void 0:H.leave)!==null&&(ke.message={$case:"leave",leave:LeaveRequest.fromPartial(e.message.leave)}),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="updateLayers"&&((re=e.message)===null||re===void 0?void 0:re.updateLayers)!==void 0&&((Y=e.message)===null||Y===void 0?void 0:Y.updateLayers)!==null&&(ke.message={$case:"updateLayers",updateLayers:UpdateVideoLayers.fromPartial(e.message.updateLayers)}),((N=e.message)===null||N===void 0?void 0:N.$case)==="subscriptionPermission"&&((x=e.message)===null||x===void 0?void 0:x.subscriptionPermission)!==void 0&&((b=e.message)===null||b===void 0?void 0:b.subscriptionPermission)!==null&&(ke.message={$case:"subscriptionPermission",subscriptionPermission:SubscriptionPermission.fromPartial(e.message.subscriptionPermission)}),((_=e.message)===null||_===void 0?void 0:_.$case)==="syncState"&&((g=e.message)===null||g===void 0?void 0:g.syncState)!==void 0&&((E=e.message)===null||E===void 0?void 0:E.syncState)!==null&&(ke.message={$case:"syncState",syncState:SyncState.fromPartial(e.message.syncState)}),((T=e.message)===null||T===void 0?void 0:T.$case)==="simulate"&&((A=e.message)===null||A===void 0?void 0:A.simulate)!==void 0&&((J=e.message)===null||J===void 0?void 0:J.simulate)!==null&&(ke.message={$case:"simulate",simulate:SimulateScenario.fromPartial(e.message.simulate)}),((G=e.message)===null||G===void 0?void 0:G.$case)==="ping"&&((I=e.message)===null||I===void 0?void 0:I.ping)!==void 0&&((V=e.message)===null||V===void 0?void 0:V.ping)!==null&&(ke.message={$case:"ping",ping:e.message.ping}),((L=e.message)===null||L===void 0?void 0:L.$case)==="updateMetadata"&&((z=e.message)===null||z===void 0?void 0:z.updateMetadata)!==void 0&&((ie=e.message)===null||ie===void 0?void 0:ie.updateMetadata)!==null&&(ke.message={$case:"updateMetadata",updateMetadata:UpdateParticipantMetadata.fromPartial(e.message.updateMetadata)}),((se=e.message)===null||se===void 0?void 0:se.$case)==="pingReq"&&((me=e.message)===null||me===void 0?void 0:me.pingReq)!==void 0&&((Se=e.message)===null||Se===void 0?void 0:Se.pingReq)!==null&&(ke.message={$case:"pingReq",pingReq:Ping.fromPartial(e.message.pingReq)}),ke}};function createBaseSignalResponse(){return{message:void 0}}const SignalResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch((t=e.message)===null||t===void 0?void 0:t.$case){case"join":JoinResponse.encode(e.message.join,i.uint32(10).fork()).ldelim();break;case"answer":SessionDescription.encode(e.message.answer,i.uint32(18).fork()).ldelim();break;case"offer":SessionDescription.encode(e.message.offer,i.uint32(26).fork()).ldelim();break;case"trickle":TrickleRequest.encode(e.message.trickle,i.uint32(34).fork()).ldelim();break;case"update":ParticipantUpdate.encode(e.message.update,i.uint32(42).fork()).ldelim();break;case"trackPublished":TrackPublishedResponse.encode(e.message.trackPublished,i.uint32(50).fork()).ldelim();break;case"leave":LeaveRequest.encode(e.message.leave,i.uint32(66).fork()).ldelim();break;case"mute":MuteTrackRequest.encode(e.message.mute,i.uint32(74).fork()).ldelim();break;case"speakersChanged":SpeakersChanged.encode(e.message.speakersChanged,i.uint32(82).fork()).ldelim();break;case"roomUpdate":RoomUpdate.encode(e.message.roomUpdate,i.uint32(90).fork()).ldelim();break;case"connectionQuality":ConnectionQualityUpdate.encode(e.message.connectionQuality,i.uint32(98).fork()).ldelim();break;case"streamStateUpdate":StreamStateUpdate.encode(e.message.streamStateUpdate,i.uint32(106).fork()).ldelim();break;case"subscribedQualityUpdate":SubscribedQualityUpdate.encode(e.message.subscribedQualityUpdate,i.uint32(114).fork()).ldelim();break;case"subscriptionPermissionUpdate":SubscriptionPermissionUpdate.encode(e.message.subscriptionPermissionUpdate,i.uint32(122).fork()).ldelim();break;case"refreshToken":i.uint32(130).string(e.message.refreshToken);break;case"trackUnpublished":TrackUnpublishedResponse.encode(e.message.trackUnpublished,i.uint32(138).fork()).ldelim();break;case"pong":i.uint32(144).int64(e.message.pong);break;case"reconnect":ReconnectResponse.encode(e.message.reconnect,i.uint32(154).fork()).ldelim();break;case"pongResp":Pong.encode(e.message.pongResp,i.uint32(162).fork()).ldelim();break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSignalResponse();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.message={$case:"join",join:JoinResponse.decode(t,t.uint32())};break;case 2:a.message={$case:"answer",answer:SessionDescription.decode(t,t.uint32())};break;case 3:a.message={$case:"offer",offer:SessionDescription.decode(t,t.uint32())};break;case 4:a.message={$case:"trickle",trickle:TrickleRequest.decode(t,t.uint32())};break;case 5:a.message={$case:"update",update:ParticipantUpdate.decode(t,t.uint32())};break;case 6:a.message={$case:"trackPublished",trackPublished:TrackPublishedResponse.decode(t,t.uint32())};break;case 8:a.message={$case:"leave",leave:LeaveRequest.decode(t,t.uint32())};break;case 9:a.message={$case:"mute",mute:MuteTrackRequest.decode(t,t.uint32())};break;case 10:a.message={$case:"speakersChanged",speakersChanged:SpeakersChanged.decode(t,t.uint32())};break;case 11:a.message={$case:"roomUpdate",roomUpdate:RoomUpdate.decode(t,t.uint32())};break;case 12:a.message={$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.decode(t,t.uint32())};break;case 13:a.message={$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.decode(t,t.uint32())};break;case 14:a.message={$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.decode(t,t.uint32())};break;case 15:a.message={$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.decode(t,t.uint32())};break;case 16:a.message={$case:"refreshToken",refreshToken:t.string()};break;case 17:a.message={$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.decode(t,t.uint32())};break;case 18:a.message={$case:"pong",pong:longToNumber(t.int64())};break;case 19:a.message={$case:"reconnect",reconnect:ReconnectResponse.decode(t,t.uint32())};break;case 20:a.message={$case:"pongResp",pongResp:Pong.decode(t,t.uint32())};break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{message:isSet(e.join)?{$case:"join",join:JoinResponse.fromJSON(e.join)}:isSet(e.answer)?{$case:"answer",answer:SessionDescription.fromJSON(e.answer)}:isSet(e.offer)?{$case:"offer",offer:SessionDescription.fromJSON(e.offer)}:isSet(e.trickle)?{$case:"trickle",trickle:TrickleRequest.fromJSON(e.trickle)}:isSet(e.update)?{$case:"update",update:ParticipantUpdate.fromJSON(e.update)}:isSet(e.trackPublished)?{$case:"trackPublished",trackPublished:TrackPublishedResponse.fromJSON(e.trackPublished)}:isSet(e.leave)?{$case:"leave",leave:LeaveRequest.fromJSON(e.leave)}:isSet(e.mute)?{$case:"mute",mute:MuteTrackRequest.fromJSON(e.mute)}:isSet(e.speakersChanged)?{$case:"speakersChanged",speakersChanged:SpeakersChanged.fromJSON(e.speakersChanged)}:isSet(e.roomUpdate)?{$case:"roomUpdate",roomUpdate:RoomUpdate.fromJSON(e.roomUpdate)}:isSet(e.connectionQuality)?{$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.fromJSON(e.connectionQuality)}:isSet(e.streamStateUpdate)?{$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.fromJSON(e.streamStateUpdate)}:isSet(e.subscribedQualityUpdate)?{$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.fromJSON(e.subscribedQualityUpdate)}:isSet(e.subscriptionPermissionUpdate)?{$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.fromJSON(e.subscriptionPermissionUpdate)}:isSet(e.refreshToken)?{$case:"refreshToken",refreshToken:String(e.refreshToken)}:isSet(e.trackUnpublished)?{$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.fromJSON(e.trackUnpublished)}:isSet(e.pong)?{$case:"pong",pong:Number(e.pong)}:isSet(e.reconnect)?{$case:"reconnect",reconnect:ReconnectResponse.fromJSON(e.reconnect)}:isSet(e.pongResp)?{$case:"pongResp",pongResp:Pong.fromJSON(e.pongResp)}:void 0}},toJSON(e){var i,t,n,a,s,d,o,f,c,p,v,l,u,h,m,w,k,C,O,P,M,D,$,H,Z,re,Y,N,x,b,_,g,E,T,A,J,G,I,V,L,z,ie,se,me,Se,ke,oe,ue,ye,we,le,ee,te,Q,B;const W={};return((i=e.message)===null||i===void 0?void 0:i.$case)==="join"&&(W.join=!((t=e.message)===null||t===void 0)&&t.join?JoinResponse.toJSON((n=e.message)===null||n===void 0?void 0:n.join):void 0),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&(W.answer=!((s=e.message)===null||s===void 0)&&s.answer?SessionDescription.toJSON((d=e.message)===null||d===void 0?void 0:d.answer):void 0),((o=e.message)===null||o===void 0?void 0:o.$case)==="offer"&&(W.offer=!((f=e.message)===null||f===void 0)&&f.offer?SessionDescription.toJSON((c=e.message)===null||c===void 0?void 0:c.offer):void 0),((p=e.message)===null||p===void 0?void 0:p.$case)==="trickle"&&(W.trickle=!((v=e.message)===null||v===void 0)&&v.trickle?TrickleRequest.toJSON((l=e.message)===null||l===void 0?void 0:l.trickle):void 0),((u=e.message)===null||u===void 0?void 0:u.$case)==="update"&&(W.update=!((h=e.message)===null||h===void 0)&&h.update?ParticipantUpdate.toJSON((m=e.message)===null||m===void 0?void 0:m.update):void 0),((w=e.message)===null||w===void 0?void 0:w.$case)==="trackPublished"&&(W.trackPublished=!((k=e.message)===null||k===void 0)&&k.trackPublished?TrackPublishedResponse.toJSON((C=e.message)===null||C===void 0?void 0:C.trackPublished):void 0),((O=e.message)===null||O===void 0?void 0:O.$case)==="leave"&&(W.leave=!((P=e.message)===null||P===void 0)&&P.leave?LeaveRequest.toJSON((M=e.message)===null||M===void 0?void 0:M.leave):void 0),((D=e.message)===null||D===void 0?void 0:D.$case)==="mute"&&(W.mute=!(($=e.message)===null||$===void 0)&&$.mute?MuteTrackRequest.toJSON((H=e.message)===null||H===void 0?void 0:H.mute):void 0),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="speakersChanged"&&(W.speakersChanged=!((re=e.message)===null||re===void 0)&&re.speakersChanged?SpeakersChanged.toJSON((Y=e.message)===null||Y===void 0?void 0:Y.speakersChanged):void 0),((N=e.message)===null||N===void 0?void 0:N.$case)==="roomUpdate"&&(W.roomUpdate=!((x=e.message)===null||x===void 0)&&x.roomUpdate?RoomUpdate.toJSON((b=e.message)===null||b===void 0?void 0:b.roomUpdate):void 0),((_=e.message)===null||_===void 0?void 0:_.$case)==="connectionQuality"&&(W.connectionQuality=!((g=e.message)===null||g===void 0)&&g.connectionQuality?ConnectionQualityUpdate.toJSON((E=e.message)===null||E===void 0?void 0:E.connectionQuality):void 0),((T=e.message)===null||T===void 0?void 0:T.$case)==="streamStateUpdate"&&(W.streamStateUpdate=!((A=e.message)===null||A===void 0)&&A.streamStateUpdate?StreamStateUpdate.toJSON((J=e.message)===null||J===void 0?void 0:J.streamStateUpdate):void 0),((G=e.message)===null||G===void 0?void 0:G.$case)==="subscribedQualityUpdate"&&(W.subscribedQualityUpdate=!((I=e.message)===null||I===void 0)&&I.subscribedQualityUpdate?SubscribedQualityUpdate.toJSON((V=e.message)===null||V===void 0?void 0:V.subscribedQualityUpdate):void 0),((L=e.message)===null||L===void 0?void 0:L.$case)==="subscriptionPermissionUpdate"&&(W.subscriptionPermissionUpdate=!((z=e.message)===null||z===void 0)&&z.subscriptionPermissionUpdate?SubscriptionPermissionUpdate.toJSON((ie=e.message)===null||ie===void 0?void 0:ie.subscriptionPermissionUpdate):void 0),((se=e.message)===null||se===void 0?void 0:se.$case)==="refreshToken"&&(W.refreshToken=(me=e.message)===null||me===void 0?void 0:me.refreshToken),((Se=e.message)===null||Se===void 0?void 0:Se.$case)==="trackUnpublished"&&(W.trackUnpublished=!((ke=e.message)===null||ke===void 0)&&ke.trackUnpublished?TrackUnpublishedResponse.toJSON((oe=e.message)===null||oe===void 0?void 0:oe.trackUnpublished):void 0),((ue=e.message)===null||ue===void 0?void 0:ue.$case)==="pong"&&(W.pong=Math.round((ye=e.message)===null||ye===void 0?void 0:ye.pong)),((we=e.message)===null||we===void 0?void 0:we.$case)==="reconnect"&&(W.reconnect=!((le=e.message)===null||le===void 0)&&le.reconnect?ReconnectResponse.toJSON((ee=e.message)===null||ee===void 0?void 0:ee.reconnect):void 0),((te=e.message)===null||te===void 0?void 0:te.$case)==="pongResp"&&(W.pongResp=!((Q=e.message)===null||Q===void 0)&&Q.pongResp?Pong.toJSON((B=e.message)===null||B===void 0?void 0:B.pongResp):void 0),W},create(e){return SignalResponse.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d,o,f,c,p,v,l,u,h,m,w,k,C,O,P,M,D,$,H,Z,re,Y,N,x,b,_,g,E,T,A,J,G,I,V,L,z,ie,se,me,Se,ke,oe,ue,ye,we,le,ee,te,Q,B,W,X;const ce=createBaseSignalResponse();return((i=e.message)===null||i===void 0?void 0:i.$case)==="join"&&((t=e.message)===null||t===void 0?void 0:t.join)!==void 0&&((n=e.message)===null||n===void 0?void 0:n.join)!==null&&(ce.message={$case:"join",join:JoinResponse.fromPartial(e.message.join)}),((a=e.message)===null||a===void 0?void 0:a.$case)==="answer"&&((s=e.message)===null||s===void 0?void 0:s.answer)!==void 0&&((d=e.message)===null||d===void 0?void 0:d.answer)!==null&&(ce.message={$case:"answer",answer:SessionDescription.fromPartial(e.message.answer)}),((o=e.message)===null||o===void 0?void 0:o.$case)==="offer"&&((f=e.message)===null||f===void 0?void 0:f.offer)!==void 0&&((c=e.message)===null||c===void 0?void 0:c.offer)!==null&&(ce.message={$case:"offer",offer:SessionDescription.fromPartial(e.message.offer)}),((p=e.message)===null||p===void 0?void 0:p.$case)==="trickle"&&((v=e.message)===null||v===void 0?void 0:v.trickle)!==void 0&&((l=e.message)===null||l===void 0?void 0:l.trickle)!==null&&(ce.message={$case:"trickle",trickle:TrickleRequest.fromPartial(e.message.trickle)}),((u=e.message)===null||u===void 0?void 0:u.$case)==="update"&&((h=e.message)===null||h===void 0?void 0:h.update)!==void 0&&((m=e.message)===null||m===void 0?void 0:m.update)!==null&&(ce.message={$case:"update",update:ParticipantUpdate.fromPartial(e.message.update)}),((w=e.message)===null||w===void 0?void 0:w.$case)==="trackPublished"&&((k=e.message)===null||k===void 0?void 0:k.trackPublished)!==void 0&&((C=e.message)===null||C===void 0?void 0:C.trackPublished)!==null&&(ce.message={$case:"trackPublished",trackPublished:TrackPublishedResponse.fromPartial(e.message.trackPublished)}),((O=e.message)===null||O===void 0?void 0:O.$case)==="leave"&&((P=e.message)===null||P===void 0?void 0:P.leave)!==void 0&&((M=e.message)===null||M===void 0?void 0:M.leave)!==null&&(ce.message={$case:"leave",leave:LeaveRequest.fromPartial(e.message.leave)}),((D=e.message)===null||D===void 0?void 0:D.$case)==="mute"&&(($=e.message)===null||$===void 0?void 0:$.mute)!==void 0&&((H=e.message)===null||H===void 0?void 0:H.mute)!==null&&(ce.message={$case:"mute",mute:MuteTrackRequest.fromPartial(e.message.mute)}),((Z=e.message)===null||Z===void 0?void 0:Z.$case)==="speakersChanged"&&((re=e.message)===null||re===void 0?void 0:re.speakersChanged)!==void 0&&((Y=e.message)===null||Y===void 0?void 0:Y.speakersChanged)!==null&&(ce.message={$case:"speakersChanged",speakersChanged:SpeakersChanged.fromPartial(e.message.speakersChanged)}),((N=e.message)===null||N===void 0?void 0:N.$case)==="roomUpdate"&&((x=e.message)===null||x===void 0?void 0:x.roomUpdate)!==void 0&&((b=e.message)===null||b===void 0?void 0:b.roomUpdate)!==null&&(ce.message={$case:"roomUpdate",roomUpdate:RoomUpdate.fromPartial(e.message.roomUpdate)}),((_=e.message)===null||_===void 0?void 0:_.$case)==="connectionQuality"&&((g=e.message)===null||g===void 0?void 0:g.connectionQuality)!==void 0&&((E=e.message)===null||E===void 0?void 0:E.connectionQuality)!==null&&(ce.message={$case:"connectionQuality",connectionQuality:ConnectionQualityUpdate.fromPartial(e.message.connectionQuality)}),((T=e.message)===null||T===void 0?void 0:T.$case)==="streamStateUpdate"&&((A=e.message)===null||A===void 0?void 0:A.streamStateUpdate)!==void 0&&((J=e.message)===null||J===void 0?void 0:J.streamStateUpdate)!==null&&(ce.message={$case:"streamStateUpdate",streamStateUpdate:StreamStateUpdate.fromPartial(e.message.streamStateUpdate)}),((G=e.message)===null||G===void 0?void 0:G.$case)==="subscribedQualityUpdate"&&((I=e.message)===null||I===void 0?void 0:I.subscribedQualityUpdate)!==void 0&&((V=e.message)===null||V===void 0?void 0:V.subscribedQualityUpdate)!==null&&(ce.message={$case:"subscribedQualityUpdate",subscribedQualityUpdate:SubscribedQualityUpdate.fromPartial(e.message.subscribedQualityUpdate)}),((L=e.message)===null||L===void 0?void 0:L.$case)==="subscriptionPermissionUpdate"&&((z=e.message)===null||z===void 0?void 0:z.subscriptionPermissionUpdate)!==void 0&&((ie=e.message)===null||ie===void 0?void 0:ie.subscriptionPermissionUpdate)!==null&&(ce.message={$case:"subscriptionPermissionUpdate",subscriptionPermissionUpdate:SubscriptionPermissionUpdate.fromPartial(e.message.subscriptionPermissionUpdate)}),((se=e.message)===null||se===void 0?void 0:se.$case)==="refreshToken"&&((me=e.message)===null||me===void 0?void 0:me.refreshToken)!==void 0&&((Se=e.message)===null||Se===void 0?void 0:Se.refreshToken)!==null&&(ce.message={$case:"refreshToken",refreshToken:e.message.refreshToken}),((ke=e.message)===null||ke===void 0?void 0:ke.$case)==="trackUnpublished"&&((oe=e.message)===null||oe===void 0?void 0:oe.trackUnpublished)!==void 0&&((ue=e.message)===null||ue===void 0?void 0:ue.trackUnpublished)!==null&&(ce.message={$case:"trackUnpublished",trackUnpublished:TrackUnpublishedResponse.fromPartial(e.message.trackUnpublished)}),((ye=e.message)===null||ye===void 0?void 0:ye.$case)==="pong"&&((we=e.message)===null||we===void 0?void 0:we.pong)!==void 0&&((le=e.message)===null||le===void 0?void 0:le.pong)!==null&&(ce.message={$case:"pong",pong:e.message.pong}),((ee=e.message)===null||ee===void 0?void 0:ee.$case)==="reconnect"&&((te=e.message)===null||te===void 0?void 0:te.reconnect)!==void 0&&((Q=e.message)===null||Q===void 0?void 0:Q.reconnect)!==null&&(ce.message={$case:"reconnect",reconnect:ReconnectResponse.fromPartial(e.message.reconnect)}),((B=e.message)===null||B===void 0?void 0:B.$case)==="pongResp"&&((W=e.message)===null||W===void 0?void 0:W.pongResp)!==void 0&&((X=e.message)===null||X===void 0?void 0:X.pongResp)!==null&&(ce.message={$case:"pongResp",pongResp:Pong.fromPartial(e.message.pongResp)}),ce}};function createBaseSimulcastCodec(){return{codec:"",cid:"",enableSimulcastLayers:!1}}const SimulcastCodec={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.codec!==""&&i.uint32(10).string(e.codec),e.cid!==""&&i.uint32(18).string(e.cid),e.enableSimulcastLayers===!0&&i.uint32(24).bool(e.enableSimulcastLayers),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSimulcastCodec();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.codec=t.string();break;case 2:a.cid=t.string();break;case 3:a.enableSimulcastLayers=t.bool();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{codec:isSet(e.codec)?String(e.codec):"",cid:isSet(e.cid)?String(e.cid):"",enableSimulcastLayers:isSet(e.enableSimulcastLayers)?!!e.enableSimulcastLayers:!1}},toJSON(e){const i={};return e.codec!==void 0&&(i.codec=e.codec),e.cid!==void 0&&(i.cid=e.cid),e.enableSimulcastLayers!==void 0&&(i.enableSimulcastLayers=e.enableSimulcastLayers),i},create(e){return SimulcastCodec.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSimulcastCodec();return a.codec=(i=e.codec)!==null&&i!==void 0?i:"",a.cid=(t=e.cid)!==null&&t!==void 0?t:"",a.enableSimulcastLayers=(n=e.enableSimulcastLayers)!==null&&n!==void 0?n:!1,a}};function createBaseAddTrackRequest(){return{cid:"",name:"",type:0,width:0,height:0,muted:!1,disableDtx:!1,source:0,layers:[],simulcastCodecs:[],sid:"",stereo:!1,disableRed:!1,encryption:0}}const AddTrackRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.cid!==""&&i.uint32(10).string(e.cid),e.name!==""&&i.uint32(18).string(e.name),e.type!==0&&i.uint32(24).int32(e.type),e.width!==0&&i.uint32(32).uint32(e.width),e.height!==0&&i.uint32(40).uint32(e.height),e.muted===!0&&i.uint32(48).bool(e.muted),e.disableDtx===!0&&i.uint32(56).bool(e.disableDtx),e.source!==0&&i.uint32(64).int32(e.source);for(const t of e.layers)VideoLayer.encode(t,i.uint32(74).fork()).ldelim();for(const t of e.simulcastCodecs)SimulcastCodec.encode(t,i.uint32(82).fork()).ldelim();return e.sid!==""&&i.uint32(90).string(e.sid),e.stereo===!0&&i.uint32(96).bool(e.stereo),e.disableRed===!0&&i.uint32(104).bool(e.disableRed),e.encryption!==0&&i.uint32(112).int32(e.encryption),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseAddTrackRequest();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.cid=t.string();break;case 2:a.name=t.string();break;case 3:a.type=t.int32();break;case 4:a.width=t.uint32();break;case 5:a.height=t.uint32();break;case 6:a.muted=t.bool();break;case 7:a.disableDtx=t.bool();break;case 8:a.source=t.int32();break;case 9:a.layers.push(VideoLayer.decode(t,t.uint32()));break;case 10:a.simulcastCodecs.push(SimulcastCodec.decode(t,t.uint32()));break;case 11:a.sid=t.string();break;case 12:a.stereo=t.bool();break;case 13:a.disableRed=t.bool();break;case 14:a.encryption=t.int32();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{cid:isSet(e.cid)?String(e.cid):"",name:isSet(e.name)?String(e.name):"",type:isSet(e.type)?trackTypeFromJSON(e.type):0,width:isSet(e.width)?Number(e.width):0,height:isSet(e.height)?Number(e.height):0,muted:isSet(e.muted)?!!e.muted:!1,disableDtx:isSet(e.disableDtx)?!!e.disableDtx:!1,source:isSet(e.source)?trackSourceFromJSON(e.source):0,layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[],simulcastCodecs:Array.isArray(e==null?void 0:e.simulcastCodecs)?e.simulcastCodecs.map(i=>SimulcastCodec.fromJSON(i)):[],sid:isSet(e.sid)?String(e.sid):"",stereo:isSet(e.stereo)?!!e.stereo:!1,disableRed:isSet(e.disableRed)?!!e.disableRed:!1,encryption:isSet(e.encryption)?encryption_TypeFromJSON(e.encryption):0}},toJSON(e){const i={};return e.cid!==void 0&&(i.cid=e.cid),e.name!==void 0&&(i.name=e.name),e.type!==void 0&&(i.type=trackTypeToJSON(e.type)),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.muted!==void 0&&(i.muted=e.muted),e.disableDtx!==void 0&&(i.disableDtx=e.disableDtx),e.source!==void 0&&(i.source=trackSourceToJSON(e.source)),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],e.simulcastCodecs?i.simulcastCodecs=e.simulcastCodecs.map(t=>t?SimulcastCodec.toJSON(t):void 0):i.simulcastCodecs=[],e.sid!==void 0&&(i.sid=e.sid),e.stereo!==void 0&&(i.stereo=e.stereo),e.disableRed!==void 0&&(i.disableRed=e.disableRed),e.encryption!==void 0&&(i.encryption=encryption_TypeToJSON(e.encryption)),i},create(e){return AddTrackRequest.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d,o,f,c,p,v,l,u,h;const m=createBaseAddTrackRequest();return m.cid=(i=e.cid)!==null&&i!==void 0?i:"",m.name=(t=e.name)!==null&&t!==void 0?t:"",m.type=(n=e.type)!==null&&n!==void 0?n:0,m.width=(a=e.width)!==null&&a!==void 0?a:0,m.height=(s=e.height)!==null&&s!==void 0?s:0,m.muted=(d=e.muted)!==null&&d!==void 0?d:!1,m.disableDtx=(o=e.disableDtx)!==null&&o!==void 0?o:!1,m.source=(f=e.source)!==null&&f!==void 0?f:0,m.layers=((c=e.layers)===null||c===void 0?void 0:c.map(w=>VideoLayer.fromPartial(w)))||[],m.simulcastCodecs=((p=e.simulcastCodecs)===null||p===void 0?void 0:p.map(w=>SimulcastCodec.fromPartial(w)))||[],m.sid=(v=e.sid)!==null&&v!==void 0?v:"",m.stereo=(l=e.stereo)!==null&&l!==void 0?l:!1,m.disableRed=(u=e.disableRed)!==null&&u!==void 0?u:!1,m.encryption=(h=e.encryption)!==null&&h!==void 0?h:0,m}};function createBaseTrickleRequest(){return{candidateInit:"",target:0}}const TrickleRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.candidateInit!==""&&i.uint32(10).string(e.candidateInit),e.target!==0&&i.uint32(16).int32(e.target),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrickleRequest();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.candidateInit=t.string();break;case 2:a.target=t.int32();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{candidateInit:isSet(e.candidateInit)?String(e.candidateInit):"",target:isSet(e.target)?signalTargetFromJSON(e.target):0}},toJSON(e){const i={};return e.candidateInit!==void 0&&(i.candidateInit=e.candidateInit),e.target!==void 0&&(i.target=signalTargetToJSON(e.target)),i},create(e){return TrickleRequest.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseTrickleRequest();return n.candidateInit=(i=e.candidateInit)!==null&&i!==void 0?i:"",n.target=(t=e.target)!==null&&t!==void 0?t:0,n}};function createBaseMuteTrackRequest(){return{sid:"",muted:!1}}const MuteTrackRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.sid!==""&&i.uint32(10).string(e.sid),e.muted===!0&&i.uint32(16).bool(e.muted),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseMuteTrackRequest();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.sid=t.string();break;case 2:a.muted=t.bool();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{sid:isSet(e.sid)?String(e.sid):"",muted:isSet(e.muted)?!!e.muted:!1}},toJSON(e){const i={};return e.sid!==void 0&&(i.sid=e.sid),e.muted!==void 0&&(i.muted=e.muted),i},create(e){return MuteTrackRequest.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseMuteTrackRequest();return n.sid=(i=e.sid)!==null&&i!==void 0?i:"",n.muted=(t=e.muted)!==null&&t!==void 0?t:!1,n}};function createBaseJoinResponse(){return{room:void 0,participant:void 0,otherParticipants:[],serverVersion:"",iceServers:[],subscriberPrimary:!1,alternativeUrl:"",clientConfiguration:void 0,serverRegion:"",pingTimeout:0,pingInterval:0,serverInfo:void 0}}const JoinResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.room!==void 0&&Room$1.encode(e.room,i.uint32(10).fork()).ldelim(),e.participant!==void 0&&ParticipantInfo.encode(e.participant,i.uint32(18).fork()).ldelim();for(const t of e.otherParticipants)ParticipantInfo.encode(t,i.uint32(26).fork()).ldelim();e.serverVersion!==""&&i.uint32(34).string(e.serverVersion);for(const t of e.iceServers)ICEServer.encode(t,i.uint32(42).fork()).ldelim();return e.subscriberPrimary===!0&&i.uint32(48).bool(e.subscriberPrimary),e.alternativeUrl!==""&&i.uint32(58).string(e.alternativeUrl),e.clientConfiguration!==void 0&&ClientConfiguration.encode(e.clientConfiguration,i.uint32(66).fork()).ldelim(),e.serverRegion!==""&&i.uint32(74).string(e.serverRegion),e.pingTimeout!==0&&i.uint32(80).int32(e.pingTimeout),e.pingInterval!==0&&i.uint32(88).int32(e.pingInterval),e.serverInfo!==void 0&&ServerInfo.encode(e.serverInfo,i.uint32(98).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseJoinResponse();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.room=Room$1.decode(t,t.uint32());break;case 2:a.participant=ParticipantInfo.decode(t,t.uint32());break;case 3:a.otherParticipants.push(ParticipantInfo.decode(t,t.uint32()));break;case 4:a.serverVersion=t.string();break;case 5:a.iceServers.push(ICEServer.decode(t,t.uint32()));break;case 6:a.subscriberPrimary=t.bool();break;case 7:a.alternativeUrl=t.string();break;case 8:a.clientConfiguration=ClientConfiguration.decode(t,t.uint32());break;case 9:a.serverRegion=t.string();break;case 10:a.pingTimeout=t.int32();break;case 11:a.pingInterval=t.int32();break;case 12:a.serverInfo=ServerInfo.decode(t,t.uint32());break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{room:isSet(e.room)?Room$1.fromJSON(e.room):void 0,participant:isSet(e.participant)?ParticipantInfo.fromJSON(e.participant):void 0,otherParticipants:Array.isArray(e==null?void 0:e.otherParticipants)?e.otherParticipants.map(i=>ParticipantInfo.fromJSON(i)):[],serverVersion:isSet(e.serverVersion)?String(e.serverVersion):"",iceServers:Array.isArray(e==null?void 0:e.iceServers)?e.iceServers.map(i=>ICEServer.fromJSON(i)):[],subscriberPrimary:isSet(e.subscriberPrimary)?!!e.subscriberPrimary:!1,alternativeUrl:isSet(e.alternativeUrl)?String(e.alternativeUrl):"",clientConfiguration:isSet(e.clientConfiguration)?ClientConfiguration.fromJSON(e.clientConfiguration):void 0,serverRegion:isSet(e.serverRegion)?String(e.serverRegion):"",pingTimeout:isSet(e.pingTimeout)?Number(e.pingTimeout):0,pingInterval:isSet(e.pingInterval)?Number(e.pingInterval):0,serverInfo:isSet(e.serverInfo)?ServerInfo.fromJSON(e.serverInfo):void 0}},toJSON(e){const i={};return e.room!==void 0&&(i.room=e.room?Room$1.toJSON(e.room):void 0),e.participant!==void 0&&(i.participant=e.participant?ParticipantInfo.toJSON(e.participant):void 0),e.otherParticipants?i.otherParticipants=e.otherParticipants.map(t=>t?ParticipantInfo.toJSON(t):void 0):i.otherParticipants=[],e.serverVersion!==void 0&&(i.serverVersion=e.serverVersion),e.iceServers?i.iceServers=e.iceServers.map(t=>t?ICEServer.toJSON(t):void 0):i.iceServers=[],e.subscriberPrimary!==void 0&&(i.subscriberPrimary=e.subscriberPrimary),e.alternativeUrl!==void 0&&(i.alternativeUrl=e.alternativeUrl),e.clientConfiguration!==void 0&&(i.clientConfiguration=e.clientConfiguration?ClientConfiguration.toJSON(e.clientConfiguration):void 0),e.serverRegion!==void 0&&(i.serverRegion=e.serverRegion),e.pingTimeout!==void 0&&(i.pingTimeout=Math.round(e.pingTimeout)),e.pingInterval!==void 0&&(i.pingInterval=Math.round(e.pingInterval)),e.serverInfo!==void 0&&(i.serverInfo=e.serverInfo?ServerInfo.toJSON(e.serverInfo):void 0),i},create(e){return JoinResponse.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d,o,f;const c=createBaseJoinResponse();return c.room=e.room!==void 0&&e.room!==null?Room$1.fromPartial(e.room):void 0,c.participant=e.participant!==void 0&&e.participant!==null?ParticipantInfo.fromPartial(e.participant):void 0,c.otherParticipants=((i=e.otherParticipants)===null||i===void 0?void 0:i.map(p=>ParticipantInfo.fromPartial(p)))||[],c.serverVersion=(t=e.serverVersion)!==null&&t!==void 0?t:"",c.iceServers=((n=e.iceServers)===null||n===void 0?void 0:n.map(p=>ICEServer.fromPartial(p)))||[],c.subscriberPrimary=(a=e.subscriberPrimary)!==null&&a!==void 0?a:!1,c.alternativeUrl=(s=e.alternativeUrl)!==null&&s!==void 0?s:"",c.clientConfiguration=e.clientConfiguration!==void 0&&e.clientConfiguration!==null?ClientConfiguration.fromPartial(e.clientConfiguration):void 0,c.serverRegion=(d=e.serverRegion)!==null&&d!==void 0?d:"",c.pingTimeout=(o=e.pingTimeout)!==null&&o!==void 0?o:0,c.pingInterval=(f=e.pingInterval)!==null&&f!==void 0?f:0,c.serverInfo=e.serverInfo!==void 0&&e.serverInfo!==null?ServerInfo.fromPartial(e.serverInfo):void 0,c}};function createBaseReconnectResponse(){return{iceServers:[],clientConfiguration:void 0}}const ReconnectResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.iceServers)ICEServer.encode(t,i.uint32(10).fork()).ldelim();return e.clientConfiguration!==void 0&&ClientConfiguration.encode(e.clientConfiguration,i.uint32(18).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseReconnectResponse();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.iceServers.push(ICEServer.decode(t,t.uint32()));break;case 2:a.clientConfiguration=ClientConfiguration.decode(t,t.uint32());break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{iceServers:Array.isArray(e==null?void 0:e.iceServers)?e.iceServers.map(i=>ICEServer.fromJSON(i)):[],clientConfiguration:isSet(e.clientConfiguration)?ClientConfiguration.fromJSON(e.clientConfiguration):void 0}},toJSON(e){const i={};return e.iceServers?i.iceServers=e.iceServers.map(t=>t?ICEServer.toJSON(t):void 0):i.iceServers=[],e.clientConfiguration!==void 0&&(i.clientConfiguration=e.clientConfiguration?ClientConfiguration.toJSON(e.clientConfiguration):void 0),i},create(e){return ReconnectResponse.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseReconnectResponse();return t.iceServers=((i=e.iceServers)===null||i===void 0?void 0:i.map(n=>ICEServer.fromPartial(n)))||[],t.clientConfiguration=e.clientConfiguration!==void 0&&e.clientConfiguration!==null?ClientConfiguration.fromPartial(e.clientConfiguration):void 0,t}};function createBaseTrackPublishedResponse(){return{cid:"",track:void 0}}const TrackPublishedResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.cid!==""&&i.uint32(10).string(e.cid),e.track!==void 0&&TrackInfo.encode(e.track,i.uint32(18).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackPublishedResponse();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.cid=t.string();break;case 2:a.track=TrackInfo.decode(t,t.uint32());break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{cid:isSet(e.cid)?String(e.cid):"",track:isSet(e.track)?TrackInfo.fromJSON(e.track):void 0}},toJSON(e){const i={};return e.cid!==void 0&&(i.cid=e.cid),e.track!==void 0&&(i.track=e.track?TrackInfo.toJSON(e.track):void 0),i},create(e){return TrackPublishedResponse.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseTrackPublishedResponse();return t.cid=(i=e.cid)!==null&&i!==void 0?i:"",t.track=e.track!==void 0&&e.track!==null?TrackInfo.fromPartial(e.track):void 0,t}};function createBaseTrackUnpublishedResponse(){return{trackSid:""}}const TrackUnpublishedResponse={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.trackSid!==""&&i.uint32(10).string(e.trackSid),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackUnpublishedResponse();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.trackSid=t.string();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):""}},toJSON(e){const i={};return e.trackSid!==void 0&&(i.trackSid=e.trackSid),i},create(e){return TrackUnpublishedResponse.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseTrackUnpublishedResponse();return t.trackSid=(i=e.trackSid)!==null&&i!==void 0?i:"",t}};function createBaseSessionDescription(){return{type:"",sdp:""}}const SessionDescription={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.type!==""&&i.uint32(10).string(e.type),e.sdp!==""&&i.uint32(18).string(e.sdp),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSessionDescription();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.type=t.string();break;case 2:a.sdp=t.string();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{type:isSet(e.type)?String(e.type):"",sdp:isSet(e.sdp)?String(e.sdp):""}},toJSON(e){const i={};return e.type!==void 0&&(i.type=e.type),e.sdp!==void 0&&(i.sdp=e.sdp),i},create(e){return SessionDescription.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSessionDescription();return n.type=(i=e.type)!==null&&i!==void 0?i:"",n.sdp=(t=e.sdp)!==null&&t!==void 0?t:"",n}};function createBaseParticipantUpdate(){return{participants:[]}}const ParticipantUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.participants)ParticipantInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseParticipantUpdate();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.participants.push(ParticipantInfo.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{participants:Array.isArray(e==null?void 0:e.participants)?e.participants.map(i=>ParticipantInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.participants?i.participants=e.participants.map(t=>t?ParticipantInfo.toJSON(t):void 0):i.participants=[],i},create(e){return ParticipantUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseParticipantUpdate();return t.participants=((i=e.participants)===null||i===void 0?void 0:i.map(n=>ParticipantInfo.fromPartial(n)))||[],t}};function createBaseUpdateSubscription(){return{trackSids:[],subscribe:!1,participantTracks:[]}}const UpdateSubscription={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.trackSids)i.uint32(10).string(t);e.subscribe===!0&&i.uint32(16).bool(e.subscribe);for(const t of e.participantTracks)ParticipantTracks.encode(t,i.uint32(26).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateSubscription();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.trackSids.push(t.string());break;case 2:a.subscribe=t.bool();break;case 3:a.participantTracks.push(ParticipantTracks.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[],subscribe:isSet(e.subscribe)?!!e.subscribe:!1,participantTracks:Array.isArray(e==null?void 0:e.participantTracks)?e.participantTracks.map(i=>ParticipantTracks.fromJSON(i)):[]}},toJSON(e){const i={};return e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],e.subscribe!==void 0&&(i.subscribe=e.subscribe),e.participantTracks?i.participantTracks=e.participantTracks.map(t=>t?ParticipantTracks.toJSON(t):void 0):i.participantTracks=[],i},create(e){return UpdateSubscription.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseUpdateSubscription();return a.trackSids=((i=e.trackSids)===null||i===void 0?void 0:i.map(s=>s))||[],a.subscribe=(t=e.subscribe)!==null&&t!==void 0?t:!1,a.participantTracks=((n=e.participantTracks)===null||n===void 0?void 0:n.map(s=>ParticipantTracks.fromPartial(s)))||[],a}};function createBaseUpdateTrackSettings(){return{trackSids:[],disabled:!1,quality:0,width:0,height:0,fps:0,priority:0}}const UpdateTrackSettings={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.trackSids)i.uint32(10).string(t);return e.disabled===!0&&i.uint32(24).bool(e.disabled),e.quality!==0&&i.uint32(32).int32(e.quality),e.width!==0&&i.uint32(40).uint32(e.width),e.height!==0&&i.uint32(48).uint32(e.height),e.fps!==0&&i.uint32(56).uint32(e.fps),e.priority!==0&&i.uint32(64).uint32(e.priority),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateTrackSettings();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.trackSids.push(t.string());break;case 3:a.disabled=t.bool();break;case 4:a.quality=t.int32();break;case 5:a.width=t.uint32();break;case 6:a.height=t.uint32();break;case 7:a.fps=t.uint32();break;case 8:a.priority=t.uint32();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[],disabled:isSet(e.disabled)?!!e.disabled:!1,quality:isSet(e.quality)?videoQualityFromJSON(e.quality):0,width:isSet(e.width)?Number(e.width):0,height:isSet(e.height)?Number(e.height):0,fps:isSet(e.fps)?Number(e.fps):0,priority:isSet(e.priority)?Number(e.priority):0}},toJSON(e){const i={};return e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],e.disabled!==void 0&&(i.disabled=e.disabled),e.quality!==void 0&&(i.quality=videoQualityToJSON(e.quality)),e.width!==void 0&&(i.width=Math.round(e.width)),e.height!==void 0&&(i.height=Math.round(e.height)),e.fps!==void 0&&(i.fps=Math.round(e.fps)),e.priority!==void 0&&(i.priority=Math.round(e.priority)),i},create(e){return UpdateTrackSettings.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d,o;const f=createBaseUpdateTrackSettings();return f.trackSids=((i=e.trackSids)===null||i===void 0?void 0:i.map(c=>c))||[],f.disabled=(t=e.disabled)!==null&&t!==void 0?t:!1,f.quality=(n=e.quality)!==null&&n!==void 0?n:0,f.width=(a=e.width)!==null&&a!==void 0?a:0,f.height=(s=e.height)!==null&&s!==void 0?s:0,f.fps=(d=e.fps)!==null&&d!==void 0?d:0,f.priority=(o=e.priority)!==null&&o!==void 0?o:0,f}};function createBaseLeaveRequest(){return{canReconnect:!1,reason:0}}const LeaveRequest={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.canReconnect===!0&&i.uint32(8).bool(e.canReconnect),e.reason!==0&&i.uint32(16).int32(e.reason),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseLeaveRequest();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.canReconnect=t.bool();break;case 2:a.reason=t.int32();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{canReconnect:isSet(e.canReconnect)?!!e.canReconnect:!1,reason:isSet(e.reason)?disconnectReasonFromJSON(e.reason):0}},toJSON(e){const i={};return e.canReconnect!==void 0&&(i.canReconnect=e.canReconnect),e.reason!==void 0&&(i.reason=disconnectReasonToJSON(e.reason)),i},create(e){return LeaveRequest.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseLeaveRequest();return n.canReconnect=(i=e.canReconnect)!==null&&i!==void 0?i:!1,n.reason=(t=e.reason)!==null&&t!==void 0?t:0,n}};function createBaseUpdateVideoLayers(){return{trackSid:"",layers:[]}}const UpdateVideoLayers={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.trackSid!==""&&i.uint32(10).string(e.trackSid);for(const t of e.layers)VideoLayer.encode(t,i.uint32(18).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateVideoLayers();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.trackSid=t.string();break;case 2:a.layers.push(VideoLayer.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):"",layers:Array.isArray(e==null?void 0:e.layers)?e.layers.map(i=>VideoLayer.fromJSON(i)):[]}},toJSON(e){const i={};return e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.layers?i.layers=e.layers.map(t=>t?VideoLayer.toJSON(t):void 0):i.layers=[],i},create(e){return UpdateVideoLayers.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseUpdateVideoLayers();return n.trackSid=(i=e.trackSid)!==null&&i!==void 0?i:"",n.layers=((t=e.layers)===null||t===void 0?void 0:t.map(a=>VideoLayer.fromPartial(a)))||[],n}};function createBaseUpdateParticipantMetadata(){return{metadata:""}}const UpdateParticipantMetadata={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.metadata!==""&&i.uint32(10).string(e.metadata),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseUpdateParticipantMetadata();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.metadata=t.string();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{metadata:isSet(e.metadata)?String(e.metadata):""}},toJSON(e){const i={};return e.metadata!==void 0&&(i.metadata=e.metadata),i},create(e){return UpdateParticipantMetadata.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseUpdateParticipantMetadata();return t.metadata=(i=e.metadata)!==null&&i!==void 0?i:"",t}};function createBaseICEServer(){return{urls:[],username:"",credential:""}}const ICEServer={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.urls)i.uint32(10).string(t);return e.username!==""&&i.uint32(18).string(e.username),e.credential!==""&&i.uint32(26).string(e.credential),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseICEServer();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.urls.push(t.string());break;case 2:a.username=t.string();break;case 3:a.credential=t.string();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{urls:Array.isArray(e==null?void 0:e.urls)?e.urls.map(i=>String(i)):[],username:isSet(e.username)?String(e.username):"",credential:isSet(e.credential)?String(e.credential):""}},toJSON(e){const i={};return e.urls?i.urls=e.urls.map(t=>t):i.urls=[],e.username!==void 0&&(i.username=e.username),e.credential!==void 0&&(i.credential=e.credential),i},create(e){return ICEServer.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseICEServer();return a.urls=((i=e.urls)===null||i===void 0?void 0:i.map(s=>s))||[],a.username=(t=e.username)!==null&&t!==void 0?t:"",a.credential=(n=e.credential)!==null&&n!==void 0?n:"",a}};function createBaseSpeakersChanged(){return{speakers:[]}}const SpeakersChanged={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.speakers)SpeakerInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSpeakersChanged();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.speakers.push(SpeakerInfo.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{speakers:Array.isArray(e==null?void 0:e.speakers)?e.speakers.map(i=>SpeakerInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.speakers?i.speakers=e.speakers.map(t=>t?SpeakerInfo.toJSON(t):void 0):i.speakers=[],i},create(e){return SpeakersChanged.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseSpeakersChanged();return t.speakers=((i=e.speakers)===null||i===void 0?void 0:i.map(n=>SpeakerInfo.fromPartial(n)))||[],t}};function createBaseRoomUpdate(){return{room:void 0}}const RoomUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.room!==void 0&&Room$1.encode(e.room,i.uint32(10).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseRoomUpdate();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.room=Room$1.decode(t,t.uint32());break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{room:isSet(e.room)?Room$1.fromJSON(e.room):void 0}},toJSON(e){const i={};return e.room!==void 0&&(i.room=e.room?Room$1.toJSON(e.room):void 0),i},create(e){return RoomUpdate.fromPartial(e??{})},fromPartial(e){const i=createBaseRoomUpdate();return i.room=e.room!==void 0&&e.room!==null?Room$1.fromPartial(e.room):void 0,i}};function createBaseConnectionQualityInfo(){return{participantSid:"",quality:0,score:0}}const ConnectionQualityInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.quality!==0&&i.uint32(16).int32(e.quality),e.score!==0&&i.uint32(29).float(e.score),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseConnectionQualityInfo();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.participantSid=t.string();break;case 2:a.quality=t.int32();break;case 3:a.score=t.float();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",quality:isSet(e.quality)?connectionQualityFromJSON(e.quality):0,score:isSet(e.score)?Number(e.score):0}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.quality!==void 0&&(i.quality=connectionQualityToJSON(e.quality)),e.score!==void 0&&(i.score=e.score),i},create(e){return ConnectionQualityInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseConnectionQualityInfo();return a.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",a.quality=(t=e.quality)!==null&&t!==void 0?t:0,a.score=(n=e.score)!==null&&n!==void 0?n:0,a}};function createBaseConnectionQualityUpdate(){return{updates:[]}}const ConnectionQualityUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.updates)ConnectionQualityInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseConnectionQualityUpdate();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.updates.push(ConnectionQualityInfo.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{updates:Array.isArray(e==null?void 0:e.updates)?e.updates.map(i=>ConnectionQualityInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.updates?i.updates=e.updates.map(t=>t?ConnectionQualityInfo.toJSON(t):void 0):i.updates=[],i},create(e){return ConnectionQualityUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseConnectionQualityUpdate();return t.updates=((i=e.updates)===null||i===void 0?void 0:i.map(n=>ConnectionQualityInfo.fromPartial(n)))||[],t}};function createBaseStreamStateInfo(){return{participantSid:"",trackSid:"",state:0}}const StreamStateInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.trackSid!==""&&i.uint32(18).string(e.trackSid),e.state!==0&&i.uint32(24).int32(e.state),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseStreamStateInfo();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.participantSid=t.string();break;case 2:a.trackSid=t.string();break;case 3:a.state=t.int32();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",trackSid:isSet(e.trackSid)?String(e.trackSid):"",state:isSet(e.state)?streamStateFromJSON(e.state):0}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.state!==void 0&&(i.state=streamStateToJSON(e.state)),i},create(e){return StreamStateInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseStreamStateInfo();return a.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",a.trackSid=(t=e.trackSid)!==null&&t!==void 0?t:"",a.state=(n=e.state)!==null&&n!==void 0?n:0,a}};function createBaseStreamStateUpdate(){return{streamStates:[]}}const StreamStateUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();for(const t of e.streamStates)StreamStateInfo.encode(t,i.uint32(10).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseStreamStateUpdate();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.streamStates.push(StreamStateInfo.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{streamStates:Array.isArray(e==null?void 0:e.streamStates)?e.streamStates.map(i=>StreamStateInfo.fromJSON(i)):[]}},toJSON(e){const i={};return e.streamStates?i.streamStates=e.streamStates.map(t=>t?StreamStateInfo.toJSON(t):void 0):i.streamStates=[],i},create(e){return StreamStateUpdate.fromPartial(e??{})},fromPartial(e){var i;const t=createBaseStreamStateUpdate();return t.streamStates=((i=e.streamStates)===null||i===void 0?void 0:i.map(n=>StreamStateInfo.fromPartial(n)))||[],t}};function createBaseSubscribedQuality(){return{quality:0,enabled:!1}}const SubscribedQuality={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.quality!==0&&i.uint32(8).int32(e.quality),e.enabled===!0&&i.uint32(16).bool(e.enabled),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscribedQuality();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.quality=t.int32();break;case 2:a.enabled=t.bool();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{quality:isSet(e.quality)?videoQualityFromJSON(e.quality):0,enabled:isSet(e.enabled)?!!e.enabled:!1}},toJSON(e){const i={};return e.quality!==void 0&&(i.quality=videoQualityToJSON(e.quality)),e.enabled!==void 0&&(i.enabled=e.enabled),i},create(e){return SubscribedQuality.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSubscribedQuality();return n.quality=(i=e.quality)!==null&&i!==void 0?i:0,n.enabled=(t=e.enabled)!==null&&t!==void 0?t:!1,n}};function createBaseSubscribedCodec(){return{codec:"",qualities:[]}}const SubscribedCodec={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.codec!==""&&i.uint32(10).string(e.codec);for(const t of e.qualities)SubscribedQuality.encode(t,i.uint32(18).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscribedCodec();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.codec=t.string();break;case 2:a.qualities.push(SubscribedQuality.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{codec:isSet(e.codec)?String(e.codec):"",qualities:Array.isArray(e==null?void 0:e.qualities)?e.qualities.map(i=>SubscribedQuality.fromJSON(i)):[]}},toJSON(e){const i={};return e.codec!==void 0&&(i.codec=e.codec),e.qualities?i.qualities=e.qualities.map(t=>t?SubscribedQuality.toJSON(t):void 0):i.qualities=[],i},create(e){return SubscribedCodec.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSubscribedCodec();return n.codec=(i=e.codec)!==null&&i!==void 0?i:"",n.qualities=((t=e.qualities)===null||t===void 0?void 0:t.map(a=>SubscribedQuality.fromPartial(a)))||[],n}};function createBaseSubscribedQualityUpdate(){return{trackSid:"",subscribedQualities:[],subscribedCodecs:[]}}const SubscribedQualityUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.trackSid!==""&&i.uint32(10).string(e.trackSid);for(const t of e.subscribedQualities)SubscribedQuality.encode(t,i.uint32(18).fork()).ldelim();for(const t of e.subscribedCodecs)SubscribedCodec.encode(t,i.uint32(26).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscribedQualityUpdate();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.trackSid=t.string();break;case 2:a.subscribedQualities.push(SubscribedQuality.decode(t,t.uint32()));break;case 3:a.subscribedCodecs.push(SubscribedCodec.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{trackSid:isSet(e.trackSid)?String(e.trackSid):"",subscribedQualities:Array.isArray(e==null?void 0:e.subscribedQualities)?e.subscribedQualities.map(i=>SubscribedQuality.fromJSON(i)):[],subscribedCodecs:Array.isArray(e==null?void 0:e.subscribedCodecs)?e.subscribedCodecs.map(i=>SubscribedCodec.fromJSON(i)):[]}},toJSON(e){const i={};return e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.subscribedQualities?i.subscribedQualities=e.subscribedQualities.map(t=>t?SubscribedQuality.toJSON(t):void 0):i.subscribedQualities=[],e.subscribedCodecs?i.subscribedCodecs=e.subscribedCodecs.map(t=>t?SubscribedCodec.toJSON(t):void 0):i.subscribedCodecs=[],i},create(e){return SubscribedQualityUpdate.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSubscribedQualityUpdate();return a.trackSid=(i=e.trackSid)!==null&&i!==void 0?i:"",a.subscribedQualities=((t=e.subscribedQualities)===null||t===void 0?void 0:t.map(s=>SubscribedQuality.fromPartial(s)))||[],a.subscribedCodecs=((n=e.subscribedCodecs)===null||n===void 0?void 0:n.map(s=>SubscribedCodec.fromPartial(s)))||[],a}};function createBaseTrackPermission(){return{participantSid:"",allTracks:!1,trackSids:[],participantIdentity:""}}const TrackPermission={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.allTracks===!0&&i.uint32(16).bool(e.allTracks);for(const t of e.trackSids)i.uint32(26).string(t);return e.participantIdentity!==""&&i.uint32(34).string(e.participantIdentity),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseTrackPermission();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.participantSid=t.string();break;case 2:a.allTracks=t.bool();break;case 3:a.trackSids.push(t.string());break;case 4:a.participantIdentity=t.string();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",allTracks:isSet(e.allTracks)?!!e.allTracks:!1,trackSids:Array.isArray(e==null?void 0:e.trackSids)?e.trackSids.map(i=>String(i)):[],participantIdentity:isSet(e.participantIdentity)?String(e.participantIdentity):""}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.allTracks!==void 0&&(i.allTracks=e.allTracks),e.trackSids?i.trackSids=e.trackSids.map(t=>t):i.trackSids=[],e.participantIdentity!==void 0&&(i.participantIdentity=e.participantIdentity),i},create(e){return TrackPermission.fromPartial(e??{})},fromPartial(e){var i,t,n,a;const s=createBaseTrackPermission();return s.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",s.allTracks=(t=e.allTracks)!==null&&t!==void 0?t:!1,s.trackSids=((n=e.trackSids)===null||n===void 0?void 0:n.map(d=>d))||[],s.participantIdentity=(a=e.participantIdentity)!==null&&a!==void 0?a:"",s}};function createBaseSubscriptionPermission(){return{allParticipants:!1,trackPermissions:[]}}const SubscriptionPermission={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.allParticipants===!0&&i.uint32(8).bool(e.allParticipants);for(const t of e.trackPermissions)TrackPermission.encode(t,i.uint32(18).fork()).ldelim();return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscriptionPermission();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.allParticipants=t.bool();break;case 2:a.trackPermissions.push(TrackPermission.decode(t,t.uint32()));break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{allParticipants:isSet(e.allParticipants)?!!e.allParticipants:!1,trackPermissions:Array.isArray(e==null?void 0:e.trackPermissions)?e.trackPermissions.map(i=>TrackPermission.fromJSON(i)):[]}},toJSON(e){const i={};return e.allParticipants!==void 0&&(i.allParticipants=e.allParticipants),e.trackPermissions?i.trackPermissions=e.trackPermissions.map(t=>t?TrackPermission.toJSON(t):void 0):i.trackPermissions=[],i},create(e){return SubscriptionPermission.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSubscriptionPermission();return n.allParticipants=(i=e.allParticipants)!==null&&i!==void 0?i:!1,n.trackPermissions=((t=e.trackPermissions)===null||t===void 0?void 0:t.map(a=>TrackPermission.fromPartial(a)))||[],n}};function createBaseSubscriptionPermissionUpdate(){return{participantSid:"",trackSid:"",allowed:!1}}const SubscriptionPermissionUpdate={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.participantSid!==""&&i.uint32(10).string(e.participantSid),e.trackSid!==""&&i.uint32(18).string(e.trackSid),e.allowed===!0&&i.uint32(24).bool(e.allowed),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSubscriptionPermissionUpdate();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.participantSid=t.string();break;case 2:a.trackSid=t.string();break;case 3:a.allowed=t.bool();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{participantSid:isSet(e.participantSid)?String(e.participantSid):"",trackSid:isSet(e.trackSid)?String(e.trackSid):"",allowed:isSet(e.allowed)?!!e.allowed:!1}},toJSON(e){const i={};return e.participantSid!==void 0&&(i.participantSid=e.participantSid),e.trackSid!==void 0&&(i.trackSid=e.trackSid),e.allowed!==void 0&&(i.allowed=e.allowed),i},create(e){return SubscriptionPermissionUpdate.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseSubscriptionPermissionUpdate();return a.participantSid=(i=e.participantSid)!==null&&i!==void 0?i:"",a.trackSid=(t=e.trackSid)!==null&&t!==void 0?t:"",a.allowed=(n=e.allowed)!==null&&n!==void 0?n:!1,a}};function createBaseSyncState(){return{answer:void 0,subscription:void 0,publishTracks:[],dataChannels:[],offer:void 0}}const SyncState={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();e.answer!==void 0&&SessionDescription.encode(e.answer,i.uint32(10).fork()).ldelim(),e.subscription!==void 0&&UpdateSubscription.encode(e.subscription,i.uint32(18).fork()).ldelim();for(const t of e.publishTracks)TrackPublishedResponse.encode(t,i.uint32(26).fork()).ldelim();for(const t of e.dataChannels)DataChannelInfo.encode(t,i.uint32(34).fork()).ldelim();return e.offer!==void 0&&SessionDescription.encode(e.offer,i.uint32(42).fork()).ldelim(),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSyncState();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.answer=SessionDescription.decode(t,t.uint32());break;case 2:a.subscription=UpdateSubscription.decode(t,t.uint32());break;case 3:a.publishTracks.push(TrackPublishedResponse.decode(t,t.uint32()));break;case 4:a.dataChannels.push(DataChannelInfo.decode(t,t.uint32()));break;case 5:a.offer=SessionDescription.decode(t,t.uint32());break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{answer:isSet(e.answer)?SessionDescription.fromJSON(e.answer):void 0,subscription:isSet(e.subscription)?UpdateSubscription.fromJSON(e.subscription):void 0,publishTracks:Array.isArray(e==null?void 0:e.publishTracks)?e.publishTracks.map(i=>TrackPublishedResponse.fromJSON(i)):[],dataChannels:Array.isArray(e==null?void 0:e.dataChannels)?e.dataChannels.map(i=>DataChannelInfo.fromJSON(i)):[],offer:isSet(e.offer)?SessionDescription.fromJSON(e.offer):void 0}},toJSON(e){const i={};return e.answer!==void 0&&(i.answer=e.answer?SessionDescription.toJSON(e.answer):void 0),e.subscription!==void 0&&(i.subscription=e.subscription?UpdateSubscription.toJSON(e.subscription):void 0),e.publishTracks?i.publishTracks=e.publishTracks.map(t=>t?TrackPublishedResponse.toJSON(t):void 0):i.publishTracks=[],e.dataChannels?i.dataChannels=e.dataChannels.map(t=>t?DataChannelInfo.toJSON(t):void 0):i.dataChannels=[],e.offer!==void 0&&(i.offer=e.offer?SessionDescription.toJSON(e.offer):void 0),i},create(e){return SyncState.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBaseSyncState();return n.answer=e.answer!==void 0&&e.answer!==null?SessionDescription.fromPartial(e.answer):void 0,n.subscription=e.subscription!==void 0&&e.subscription!==null?UpdateSubscription.fromPartial(e.subscription):void 0,n.publishTracks=((i=e.publishTracks)===null||i===void 0?void 0:i.map(a=>TrackPublishedResponse.fromPartial(a)))||[],n.dataChannels=((t=e.dataChannels)===null||t===void 0?void 0:t.map(a=>DataChannelInfo.fromPartial(a)))||[],n.offer=e.offer!==void 0&&e.offer!==null?SessionDescription.fromPartial(e.offer):void 0,n}};function createBaseDataChannelInfo(){return{label:"",id:0,target:0}}const DataChannelInfo={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.label!==""&&i.uint32(10).string(e.label),e.id!==0&&i.uint32(16).uint32(e.id),e.target!==0&&i.uint32(24).int32(e.target),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseDataChannelInfo();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.label=t.string();break;case 2:a.id=t.uint32();break;case 3:a.target=t.int32();break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{label:isSet(e.label)?String(e.label):"",id:isSet(e.id)?Number(e.id):0,target:isSet(e.target)?signalTargetFromJSON(e.target):0}},toJSON(e){const i={};return e.label!==void 0&&(i.label=e.label),e.id!==void 0&&(i.id=Math.round(e.id)),e.target!==void 0&&(i.target=signalTargetToJSON(e.target)),i},create(e){return DataChannelInfo.fromPartial(e??{})},fromPartial(e){var i,t,n;const a=createBaseDataChannelInfo();return a.label=(i=e.label)!==null&&i!==void 0?i:"",a.id=(t=e.id)!==null&&t!==void 0?t:0,a.target=(n=e.target)!==null&&n!==void 0?n:0,a}};function createBaseSimulateScenario(){return{scenario:void 0}}const SimulateScenario={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();var t;switch((t=e.scenario)===null||t===void 0?void 0:t.$case){case"speakerUpdate":i.uint32(8).int32(e.scenario.speakerUpdate);break;case"nodeFailure":i.uint32(16).bool(e.scenario.nodeFailure);break;case"migration":i.uint32(24).bool(e.scenario.migration);break;case"serverLeave":i.uint32(32).bool(e.scenario.serverLeave);break;case"switchCandidateProtocol":i.uint32(40).int32(e.scenario.switchCandidateProtocol);break}return i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBaseSimulateScenario();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.scenario={$case:"speakerUpdate",speakerUpdate:t.int32()};break;case 2:a.scenario={$case:"nodeFailure",nodeFailure:t.bool()};break;case 3:a.scenario={$case:"migration",migration:t.bool()};break;case 4:a.scenario={$case:"serverLeave",serverLeave:t.bool()};break;case 5:a.scenario={$case:"switchCandidateProtocol",switchCandidateProtocol:t.int32()};break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{scenario:isSet(e.speakerUpdate)?{$case:"speakerUpdate",speakerUpdate:Number(e.speakerUpdate)}:isSet(e.nodeFailure)?{$case:"nodeFailure",nodeFailure:!!e.nodeFailure}:isSet(e.migration)?{$case:"migration",migration:!!e.migration}:isSet(e.serverLeave)?{$case:"serverLeave",serverLeave:!!e.serverLeave}:isSet(e.switchCandidateProtocol)?{$case:"switchCandidateProtocol",switchCandidateProtocol:candidateProtocolFromJSON(e.switchCandidateProtocol)}:void 0}},toJSON(e){var i,t,n,a,s,d,o,f,c,p,v;const l={};return((i=e.scenario)===null||i===void 0?void 0:i.$case)==="speakerUpdate"&&(l.speakerUpdate=Math.round((t=e.scenario)===null||t===void 0?void 0:t.speakerUpdate)),((n=e.scenario)===null||n===void 0?void 0:n.$case)==="nodeFailure"&&(l.nodeFailure=(a=e.scenario)===null||a===void 0?void 0:a.nodeFailure),((s=e.scenario)===null||s===void 0?void 0:s.$case)==="migration"&&(l.migration=(d=e.scenario)===null||d===void 0?void 0:d.migration),((o=e.scenario)===null||o===void 0?void 0:o.$case)==="serverLeave"&&(l.serverLeave=(f=e.scenario)===null||f===void 0?void 0:f.serverLeave),((c=e.scenario)===null||c===void 0?void 0:c.$case)==="switchCandidateProtocol"&&(l.switchCandidateProtocol=((p=e.scenario)===null||p===void 0?void 0:p.switchCandidateProtocol)!==void 0?candidateProtocolToJSON((v=e.scenario)===null||v===void 0?void 0:v.switchCandidateProtocol):void 0),l},create(e){return SimulateScenario.fromPartial(e??{})},fromPartial(e){var i,t,n,a,s,d,o,f,c,p,v,l,u,h,m;const w=createBaseSimulateScenario();return((i=e.scenario)===null||i===void 0?void 0:i.$case)==="speakerUpdate"&&((t=e.scenario)===null||t===void 0?void 0:t.speakerUpdate)!==void 0&&((n=e.scenario)===null||n===void 0?void 0:n.speakerUpdate)!==null&&(w.scenario={$case:"speakerUpdate",speakerUpdate:e.scenario.speakerUpdate}),((a=e.scenario)===null||a===void 0?void 0:a.$case)==="nodeFailure"&&((s=e.scenario)===null||s===void 0?void 0:s.nodeFailure)!==void 0&&((d=e.scenario)===null||d===void 0?void 0:d.nodeFailure)!==null&&(w.scenario={$case:"nodeFailure",nodeFailure:e.scenario.nodeFailure}),((o=e.scenario)===null||o===void 0?void 0:o.$case)==="migration"&&((f=e.scenario)===null||f===void 0?void 0:f.migration)!==void 0&&((c=e.scenario)===null||c===void 0?void 0:c.migration)!==null&&(w.scenario={$case:"migration",migration:e.scenario.migration}),((p=e.scenario)===null||p===void 0?void 0:p.$case)==="serverLeave"&&((v=e.scenario)===null||v===void 0?void 0:v.serverLeave)!==void 0&&((l=e.scenario)===null||l===void 0?void 0:l.serverLeave)!==null&&(w.scenario={$case:"serverLeave",serverLeave:e.scenario.serverLeave}),((u=e.scenario)===null||u===void 0?void 0:u.$case)==="switchCandidateProtocol"&&((h=e.scenario)===null||h===void 0?void 0:h.switchCandidateProtocol)!==void 0&&((m=e.scenario)===null||m===void 0?void 0:m.switchCandidateProtocol)!==null&&(w.scenario={$case:"switchCandidateProtocol",switchCandidateProtocol:e.scenario.switchCandidateProtocol}),w}};function createBasePing(){return{timestamp:0,rtt:0}}const Ping={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.timestamp!==0&&i.uint32(8).int64(e.timestamp),e.rtt!==0&&i.uint32(16).int64(e.rtt),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBasePing();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.timestamp=longToNumber(t.int64());break;case 2:a.rtt=longToNumber(t.int64());break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{timestamp:isSet(e.timestamp)?Number(e.timestamp):0,rtt:isSet(e.rtt)?Number(e.rtt):0}},toJSON(e){const i={};return e.timestamp!==void 0&&(i.timestamp=Math.round(e.timestamp)),e.rtt!==void 0&&(i.rtt=Math.round(e.rtt)),i},create(e){return Ping.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBasePing();return n.timestamp=(i=e.timestamp)!==null&&i!==void 0?i:0,n.rtt=(t=e.rtt)!==null&&t!==void 0?t:0,n}};function createBasePong(){return{lastPingTimestamp:0,timestamp:0}}const Pong={encode(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_m0.Writer.create();return e.lastPingTimestamp!==0&&i.uint32(8).int64(e.lastPingTimestamp),e.timestamp!==0&&i.uint32(16).int64(e.timestamp),i},decode(e,i){const t=e instanceof _m0.Reader?e:new _m0.Reader(e);let n=i===void 0?t.len:t.pos+i;const a=createBasePong();for(;t.pos<n;){const s=t.uint32();switch(s>>>3){case 1:a.lastPingTimestamp=longToNumber(t.int64());break;case 2:a.timestamp=longToNumber(t.int64());break;default:t.skipType(s&7);break}}return a},fromJSON(e){return{lastPingTimestamp:isSet(e.lastPingTimestamp)?Number(e.lastPingTimestamp):0,timestamp:isSet(e.timestamp)?Number(e.timestamp):0}},toJSON(e){const i={};return e.lastPingTimestamp!==void 0&&(i.lastPingTimestamp=Math.round(e.lastPingTimestamp)),e.timestamp!==void 0&&(i.timestamp=Math.round(e.timestamp)),i},create(e){return Pong.fromPartial(e??{})},fromPartial(e){var i,t;const n=createBasePong();return n.lastPingTimestamp=(i=e.lastPingTimestamp)!==null&&i!==void 0?i:0,n.timestamp=(t=e.timestamp)!==null&&t!==void 0?t:0,n}};var tsProtoGlobalThis=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw"Unable to locate global object"})();function longToNumber(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new tsProtoGlobalThis.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}_m0.util.Long!==long&&(_m0.util.Long=long,_m0.configure());function isSet(e){return e!=null}class LivekitError extends Error{constructor(i,t){super(t||"an error has occured"),this.code=i}}class ConnectionError extends LivekitError{constructor(i,t,n){super(1,i),this.status=n,this.reason=t}}class DeviceUnsupportedError extends LivekitError{constructor(i){super(21,i??"device is unsupported")}}class TrackInvalidError extends LivekitError{constructor(i){super(20,i??"track is invalid")}}class UnsupportedServer extends LivekitError{constructor(i){super(10,i??"unsupported server")}}class UnexpectedConnectionState extends LivekitError{constructor(i){super(12,i??"unexpected connection state")}}class NegotiationError extends LivekitError{constructor(i){super(13,i??"unable to negotiate")}}var MediaDeviceFailure;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(MediaDeviceFailure||(MediaDeviceFailure={}));(function(e){function i(t){if(t&&"name"in t)return t.name==="NotFoundError"||t.name==="DevicesNotFoundError"?e.NotFound:t.name==="NotAllowedError"||t.name==="PermissionDeniedError"?e.PermissionDenied:t.name==="NotReadableError"||t.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=i})(MediaDeviceFailure||(MediaDeviceFailure={}));var RoomEvent;(function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.StateChanged="connectionStateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged"})(RoomEvent||(RoomEvent={}));var ParticipantEvent;(function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.DataReceived="dataReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged"})(ParticipantEvent||(ParticipantEvent={}));var EngineEvent;(function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived"})(EngineEvent||(EngineEvent={}));var TrackEvent;(function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged"})(TrackEvent||(TrackEvent={}));const monitorFrequency=2e3;function computeBitrate(e,i){if(!i)return 0;let t,n;return"bytesReceived"in e?(t=e.bytesReceived,n=i.bytesReceived):"bytesSent"in e&&(t=e.bytesSent,n=i.bytesSent),t===void 0||n===void 0||e.timestamp===void 0||i.timestamp===void 0?0:(t-n)*8*1e3/(e.timestamp-i.timestamp)}var uaParserExports={},uaParser={get exports(){return uaParserExports},set exports(e){uaParserExports=e}};(function(e,i){(function(t,n){var a="1.0.33",s="",d="?",o="function",f="undefined",c="object",p="string",v="major",l="model",u="name",h="type",m="vendor",w="version",k="architecture",C="console",O="mobile",P="tablet",M="smarttv",D="wearable",$="embedded",H=350,Z="Amazon",re="Apple",Y="ASUS",N="BlackBerry",x="Browser",b="Chrome",_="Edge",g="Firefox",E="Google",T="Huawei",A="LG",J="Microsoft",G="Motorola",I="Opera",V="Samsung",L="Sharp",z="Sony",ie="Xiaomi",se="Zebra",me="Facebook",Se=function(he,ge){var fe={};for(var y in he)ge[y]&&ge[y].length%2===0?fe[y]=ge[y].concat(he[y]):fe[y]=he[y];return fe},ke=function(he){for(var ge={},fe=0;fe<he.length;fe++)ge[he[fe].toUpperCase()]=he[fe];return ge},oe=function(he,ge){return typeof he===p?ue(ge).indexOf(ue(he))!==-1:!1},ue=function(he){return he.toLowerCase()},ye=function(he){return typeof he===p?he.replace(/[^\d\.]/g,s).split(".")[0]:n},we=function(he,ge){if(typeof he===p)return he=he.replace(/^\s\s*/,s),typeof ge===f?he:he.substring(0,H)},le=function(he,ge){for(var fe=0,y,U,q,de,j,S;fe<ge.length&&!j;){var F=ge[fe],K=ge[fe+1];for(y=U=0;y<F.length&&!j;)if(j=F[y++].exec(he),j)for(q=0;q<K.length;q++)S=j[++U],de=K[q],typeof de===c&&de.length>0?de.length===2?typeof de[1]==o?this[de[0]]=de[1].call(this,S):this[de[0]]=de[1]:de.length===3?typeof de[1]===o&&!(de[1].exec&&de[1].test)?this[de[0]]=S?de[1].call(this,S,de[2]):n:this[de[0]]=S?S.replace(de[1],de[2]):n:de.length===4&&(this[de[0]]=S?de[3].call(this,S.replace(de[1],de[2])):n):this[de]=S||n;fe+=2}},ee=function(he,ge){for(var fe in ge)if(typeof ge[fe]===c&&ge[fe].length>0){for(var y=0;y<ge[fe].length;y++)if(oe(ge[fe][y],he))return fe===d?n:fe}else if(oe(ge[fe],he))return fe===d?n:fe;return he},te={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},B={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[w,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[w,[u,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[u,w],[/opios[\/ ]+([\w\.]+)/i],[w,[u,I+" Mini"]],[/\bopr\/([\w\.]+)/i],[w,[u,I]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[u,w],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[w,[u,"UC"+x]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[w,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[w,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[w,[u,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[w,[u,"IE"]],[/yabrowser\/([\w\.]+)/i],[w,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure "+x],w],[/\bfocus\/([\w\.]+)/i],[w,[u,g+" Focus"]],[/\bopt\/([\w\.]+)/i],[w,[u,I+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[w,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[w,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[w,[u,I+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[w,[u,"MIUI "+x]],[/fxios\/([-\w\.]+)/i],[w,[u,g]],[/\bqihu|(qi?ho?o?|360)browser/i],[[u,"360 "+x]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 "+x],w],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],w],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[u,w],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[u],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[u,me],w],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[u,w],[/\bgsa\/([\w\.]+) .*safari\//i],[w,[u,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[w,[u,b+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[u,b+" WebView"],w],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[w,[u,"Android "+x]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[u,w],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[w,[u,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[w,u],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[u,[w,ee,te]],[/(webkit|khtml)\/([\w\.]+)/i],[u,w],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[u,"Netscape"],w],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[w,[u,g+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[u,w],[/(cobalt)\/([\w\.]+)/i],[u,[w,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[k,"amd64"]],[/(ia32(?=;))/i],[[k,ue]],[/((?:i[346]|x)86)[;\)]/i],[[k,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[k,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[k,"armhf"]],[/windows (ce|mobile); ppc;/i],[[k,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[k,/ower/,s,ue]],[/(sun4\w)[;\)]/i],[[k,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[k,ue]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[m,V],[h,P]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[m,V],[h,O]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[m,re],[h,O]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[m,re],[h,P]],[/(macintosh);/i],[l,[m,re]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[m,T],[h,P]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[m,T],[h,O]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[m,ie],[h,O]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[m,ie],[h,P]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[m,"OPPO"],[h,O]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[m,"Vivo"],[h,O]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[m,"Realme"],[h,O]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[m,G],[h,O]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[m,G],[h,P]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[m,A],[h,P]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[m,A],[h,O]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[m,"Lenovo"],[h,P]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[m,"Nokia"],[h,O]],[/(pixel c)\b/i],[l,[m,E],[h,P]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[m,E],[h,O]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[m,z],[h,O]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[m,z],[h,P]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[m,"OnePlus"],[h,O]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[m,Z],[h,P]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[m,Z],[h,O]],[/(playbook);[-\w\),; ]+(rim)/i],[l,m,[h,P]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[m,N],[h,O]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[m,Y],[h,P]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[m,Y],[h,O]],[/(nexus 9)/i],[l,[m,"HTC"],[h,P]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[m,[l,/_/g," "],[h,O]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[m,"Acer"],[h,P]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[m,"Meizu"],[h,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[m,L],[h,O]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[m,l,[h,O]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[m,l,[h,P]],[/(surface duo)/i],[l,[m,J],[h,P]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[m,"Fairphone"],[h,O]],[/(u304aa)/i],[l,[m,"AT&T"],[h,O]],[/\bsie-(\w*)/i],[l,[m,"Siemens"],[h,O]],[/\b(rct\w+) b/i],[l,[m,"RCA"],[h,P]],[/\b(venue[\d ]{2,7}) b/i],[l,[m,"Dell"],[h,P]],[/\b(q(?:mv|ta)\w+) b/i],[l,[m,"Verizon"],[h,P]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[m,"Barnes & Noble"],[h,P]],[/\b(tm\d{3}\w+) b/i],[l,[m,"NuVision"],[h,P]],[/\b(k88) b/i],[l,[m,"ZTE"],[h,P]],[/\b(nx\d{3}j) b/i],[l,[m,"ZTE"],[h,O]],[/\b(gen\d{3}) b.+49h/i],[l,[m,"Swiss"],[h,O]],[/\b(zur\d{3}) b/i],[l,[m,"Swiss"],[h,P]],[/\b((zeki)?tb.*\b) b/i],[l,[m,"Zeki"],[h,P]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[m,"Dragon Touch"],l,[h,P]],[/\b(ns-?\w{0,9}) b/i],[l,[m,"Insignia"],[h,P]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[m,"NextBook"],[h,P]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[m,"Voice"],l,[h,O]],[/\b(lvtel\-)?(v1[12]) b/i],[[m,"LvTel"],l,[h,O]],[/\b(ph-1) /i],[l,[m,"Essential"],[h,O]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[m,"Envizen"],[h,P]],[/\b(trio[-\w\. ]+) b/i],[l,[m,"MachSpeed"],[h,P]],[/\btu_(1491) b/i],[l,[m,"Rotor"],[h,P]],[/(shield[\w ]+) b/i],[l,[m,"Nvidia"],[h,P]],[/(sprint) (\w+)/i],[m,l,[h,O]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[m,J],[h,O]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[m,se],[h,P]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[m,se],[h,O]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[m,l,[h,C]],[/droid.+; (shield) bui/i],[l,[m,"Nvidia"],[h,C]],[/(playstation [345portablevi]+)/i],[l,[m,z],[h,C]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[m,J],[h,C]],[/smart-tv.+(samsung)/i],[m,[h,M]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[m,V],[h,M]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[m,A],[h,M]],[/(apple) ?tv/i],[m,[l,re+" TV"],[h,M]],[/crkey/i],[[l,b+"cast"],[m,E],[h,M]],[/droid.+aft(\w)( bui|\))/i],[l,[m,Z],[h,M]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[m,L],[h,M]],[/(bravia[\w ]+)( bui|\))/i],[l,[m,z],[h,M]],[/(mitv-\w{5}) bui/i],[l,[m,ie],[h,M]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[m,we],[l,we],[h,M]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,M]],[/((pebble))app/i],[m,l,[h,D]],[/droid.+; (glass) \d/i],[l,[m,E],[h,D]],[/droid.+; (wt63?0{2,3})\)/i],[l,[m,se],[h,D]],[/(quest( 2)?)/i],[l,[m,me],[h,D]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[m,[h,$]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[h,O]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[h,P]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,P]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,O]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[m,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[w,[u,_+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[w,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[u,w],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[w,u]],os:[[/microsoft (windows) (vista|xp)/i],[u,w],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[u,[w,ee,Q]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,"Windows"],[w,ee,Q]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[w,/_/g,"."],[u,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[u,"Mac OS"],[w,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[w,u],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[u,w],[/\(bb(10);/i],[w,[u,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[w,[u,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[w,[u,g+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[w,[u,"webOS"]],[/crkey\/([\d\.]+)/i],[w,[u,b+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[u,"Chromium OS"],w],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[u,w],[/(sunos) ?([\w\.\d]*)/i],[[u,"Solaris"],w],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[u,w]]},W=function(he,ge){if(typeof he===c&&(ge=he,he=n),!(this instanceof W))return new W(he,ge).getResult();var fe=he||(typeof t!==f&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:s),y=ge?Se(B,ge):B;return this.getBrowser=function(){var U={};return U[u]=n,U[w]=n,le.call(U,fe,y.browser),U.major=ye(U.version),U},this.getCPU=function(){var U={};return U[k]=n,le.call(U,fe,y.cpu),U},this.getDevice=function(){var U={};return U[m]=n,U[l]=n,U[h]=n,le.call(U,fe,y.device),U},this.getEngine=function(){var U={};return U[u]=n,U[w]=n,le.call(U,fe,y.engine),U},this.getOS=function(){var U={};return U[u]=n,U[w]=n,le.call(U,fe,y.os),U},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return fe},this.setUA=function(U){return fe=typeof U===p&&U.length>H?we(U,H):U,this},this.setUA(fe),this};W.VERSION=a,W.BROWSER=ke([u,w,v]),W.CPU=ke([k]),W.DEVICE=ke([l,m,h,C,O,M,P,D,$]),W.ENGINE=W.OS=ke([u,w]),e.exports&&(i=e.exports=W),i.UAParser=W;var X=typeof t!==f&&(t.jQuery||t.Zepto);if(X&&!X.ua){var ce=new W;X.ua=ce.getResult(),X.ua.get=function(){return ce.getUA()},X.ua.set=function(he){ce.setUA(he);var ge=ce.getResult();for(var fe in ge)X.ua[fe]=ge[fe]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser,uaParserExports);var UAParser=uaParserExports,version$1="1.6.9";const version=version$1,protocolVersion=9;function mergeDefaultOptions(e,i,t){const n=_objectSpread2({},e);return n.audio===!0&&(n.audio={}),n.video===!0&&(n.video={}),n.audio&&mergeObjectWithoutOverwriting(n.audio,i),n.video&&mergeObjectWithoutOverwriting(n.video,t),n}function mergeObjectWithoutOverwriting(e,i){return Object.keys(i).forEach(t=>{e[t]===void 0&&(e[t]=i[t])}),e}function constraintsForOptions(e){const i={};if(e.video)if(typeof e.video=="object"){const t={},n=t,a=e.video;Object.keys(a).forEach(s=>{switch(s){case"resolution":mergeObjectWithoutOverwriting(n,a.resolution);break;default:n[s]=a[s]}}),i.video=t}else i.video=e.video;else i.video=!1;return e.audio?typeof e.audio=="object"?i.audio=e.audio:i.audio=!0:i.audio=!1,i}async function detectSilence(e){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;const t=getNewAudioContext();if(t){const n=t.createAnalyser();n.fftSize=2048;const a=n.frequencyBinCount,s=new Uint8Array(a);t.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(n),await sleep(i),n.getByteTimeDomainData(s);const o=s.some(f=>f!==128&&f!==0);return t.close(),!o}return!1}function getNewAudioContext(){const e=window.AudioContext||window.webkitAudioContext;if(e)return new e({latencyHint:"interactive"})}const separator="|";function unpackStreamId(e){const i=e.split(separator);return i.length>1?[i[0],e.substr(i[0].length+1)]:[e,""]}async function sleep(e){return new Promise(i=>setTimeout(i,e))}function supportsTransceiver(){return"addTransceiver"in RTCPeerConnection.prototype}function supportsAddTrack(){return"addTrack"in RTCPeerConnection.prototype}function supportsAV1(){const e=RTCRtpReceiver.getCapabilities("video");let i=!1,t=!1;if(e){for(const n of e.codecs)if(n.mimeType==="video/AV1"){i=!0;break}for(const n of e.headerExtensions)if(n.uri==="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension"){t=!0;break}}return i&&t}function supportsSetSinkId(e){return document?(e||(e=document.createElement("audio")),"setSinkId"in e):!1}const setCodecPreferencesVersions={Chrome:"100",Chromium:"100",Safari:"15",Firefox:"100",Edge:"100",Brave:"1.40"};function supportsSetCodecPreferences(e){if(!isWeb()||!("setCodecPreferences"in e))return!1;const i=UAParser();if(!i.browser.name||!i.browser.version)return!1;const t=setCodecPreferencesVersions[i.browser.name];return t?compareVersions(i.browser.version,t)>=0:!1}function isFireFox(){return isWeb()?navigator.userAgent.indexOf("Firefox")!==-1:!1}function isSafari(){return isWeb()?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}function isMobile(){return isWeb()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function isWeb(){return typeof document<"u"}function compareVersions(e,i){const t=e.split("."),n=i.split("."),a=Math.min(e.length,i.length);for(let s=0;s<a;++s){const d=parseInt(t[s],10),o=parseInt(n[s],10);if(d>o)return 1;if(d<o)return-1}return t.length==n.length?0:t.length<n.length?-1:1}function roDispatchCallback(e){for(const i of e)i.target.handleResize(i)}function ioDispatchCallback(e){for(const i of e)i.target.handleVisibilityChanged(i)}let resizeObserver=null;const getResizeObserver=()=>(resizeObserver||(resizeObserver=new ResizeObserver(roDispatchCallback)),resizeObserver);let intersectionObserver=null;const getIntersectionObserver=()=>(intersectionObserver||(intersectionObserver=new IntersectionObserver(ioDispatchCallback,{root:document,rootMargin:"0px"})),intersectionObserver);function getClientInfo(){return ClientInfo.fromPartial({sdk:ClientInfo_SDK.JS,protocol:protocolVersion,version})}let emptyVideoStreamTrack;function getEmptyVideoStreamTrack(){return emptyVideoStreamTrack||(emptyVideoStreamTrack=createDummyVideoStreamTrack()),emptyVideoStreamTrack}function createDummyVideoStreamTrack(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const a=document.createElement("canvas");a.width=e,a.height=i;const s=a.getContext("2d");s==null||s.fillRect(0,0,a.width,a.height),n&&s&&(s.beginPath(),s.arc(e/2,i/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const d=a.captureStream(),[o]=d.getTracks();if(!o)throw Error("Could not get empty media stream video track");return o.enabled=t,o}let emptyAudioStreamTrack;function getEmptyAudioStreamTrack(){if(!emptyAudioStreamTrack){const e=new AudioContext,i=e.createOscillator(),t=e.createMediaStreamDestination();if(i.connect(t),i.start(),[emptyAudioStreamTrack]=t.stream.getAudioTracks(),!emptyAudioStreamTrack)throw Error("Could not get empty media stream audio track");emptyAudioStreamTrack.enabled=!1}return emptyAudioStreamTrack}class Future{constructor(i,t){this.onFinally=t,this.promise=new Promise(async(n,a)=>{this.resolve=n,this.reject=a,i&&await i(n,a)}).finally(()=>{var n;return(n=this.onFinally)===null||n===void 0?void 0:n.call(this)})}}class Mutex{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let i;const t=new Promise(a=>i=()=>{this._locks-=1,a()}),n=this._locking.then(()=>i);return this._locking=this._locking.then(()=>t),n}}class Queue{constructor(i,t){this.maxConcurrent=i||1,this.minCycle=t||0,this.queueRunning=[],this.queueWaiting={},this.lastRun=0}dequeue(i){const t=this.queueRunning,n=t.findIndex(s=>s.hash===i);if(n==-1)throw"queue desync";const a=t[n];return t.splice(n,1),a}getFirstWaiting(){for(let i of Object.keys(this.queueWaiting).sort((t,n)=>t-n))if(this.queueWaiting[i]!==void 0&&this.queueWaiting[i].length>0)return this.queueWaiting[i]}end(i){this.dequeue(i).resolve();const n=this.getFirstWaiting();n!==void 0&&n.shift().resolve()}async wait(i,t){const n=t===void 0?0:t;let a={hash:i,priority:n};for(this.queueWaiting[n]==null&&(this.queueWaiting[n]=[]),this.queueRunning.length>=this.maxConcurrent&&(a.promise=new Promise(s=>{a.resolve=s}),this.queueWaiting[n].push(a),await a.promise),this.queueRunning.push(a),a.promise=new Promise(s=>{a.resolve=s});Date.now()-this.lastRun<this.minCycle;)await new Promise(s=>setTimeout(s,this.minCycle-Date.now()+this.lastRun));this.lastRun=Date.now()}run(i,t){const n=t===void 0?0:t,a=Symbol();return this.wait(a,n).then(()=>i()).finally(()=>{this.end(a)})}stat(){return{running:this.queueRunning.length,waiting:Object.keys(this.queueWaiting).reduce((i,t)=>i+=this.queueWaiting[t].length,0),last:this.lastRun}}async flush(){for(;this.stat().waiting>0;)for(let i of Object.keys(this.queueWaiting).sort((t,n)=>n-t)){const t=this.queueWaiting[i];t!==void 0&&t.length>0&&await t[t.length-1].promise}for(;this.queueRunning.length>0;)await Promise.allSettled(this.queueRunning.map(i=>i.promise))}}const defaultId="default";class DeviceManager{static getInstance(){return this.instance===void 0&&(this.instance=new DeviceManager),this.instance}async getDevices(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var n;if(((n=DeviceManager.userMediaPromiseMap)===null||n===void 0?void 0:n.size)>0){livekitLogger.debug("awaiting getUserMedia promise");try{i?await DeviceManager.userMediaPromiseMap.get(i):await Promise.all(DeviceManager.userMediaPromiseMap.values())}catch{livekitLogger.warn("error waiting for media permissons")}}let a=await navigator.mediaDevices.enumerateDevices();if(t&&i&&(!DeviceManager.userMediaPromiseMap.get(i)||!isSafari())&&(a.length===0||a.some(d=>{const o=d.label==="",f=i?d.kind===i:!0;return o&&f}))){const d={video:i!=="audioinput"&&i!=="audiooutput",audio:i!=="videoinput"},o=await navigator.mediaDevices.getUserMedia(d);a=await navigator.mediaDevices.enumerateDevices(),o.getTracks().forEach(f=>{f.stop()})}return i&&(a=a.filter(s=>s.kind===i)),a}async normalizeDeviceId(i,t,n){if(t!==defaultId)return t;const s=(await this.getDevices(i)).find(d=>d.groupId===n&&d.deviceId!==defaultId);return s==null?void 0:s.deviceId}}DeviceManager.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];DeviceManager.userMediaPromiseMap=new Map;var eventsExports={},events={get exports(){return eventsExports},set exports(e){eventsExports=e}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(i,t,n){return Function.prototype.apply.call(i,t,n)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:ReflectOwnKeys=function(i){return Object.getOwnPropertyNames(i)};function ProcessEmitWarning(e){console&&console.warn&&console.warn(e)}var NumberIsNaN=Number.isNaN||function(i){return i!==i};function EventEmitter(){EventEmitter.init.call(this)}events.exports=EventEmitter;eventsExports.once=once;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=void 0;EventEmitter.prototype._eventsCount=0;EventEmitter.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");defaultMaxListeners=e}});EventEmitter.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter.prototype.setMaxListeners=function(i){if(typeof i!="number"||i<0||NumberIsNaN(i))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+i+".");return this._maxListeners=i,this};function _getMaxListeners(e){return e._maxListeners===void 0?EventEmitter.defaultMaxListeners:e._maxListeners}EventEmitter.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter.prototype.emit=function(i){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a=i==="error",s=this._events;if(s!==void 0)a=a&&s.error===void 0;else if(!a)return!1;if(a){var d;if(t.length>0&&(d=t[0]),d instanceof Error)throw d;var o=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw o.context=d,o}var f=s[i];if(f===void 0)return!1;if(typeof f=="function")ReflectApply(f,this,t);else for(var c=f.length,p=arrayClone(f,c),n=0;n<c;++n)ReflectApply(p[n],this,t);return!0};function _addListener(e,i,t,n){var a,s,d;if(checkListener(t),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",i,t.listener?t.listener:t),s=e._events),d=s[i]),d===void 0)d=s[i]=t,++e._eventsCount;else if(typeof d=="function"?d=s[i]=n?[t,d]:[d,t]:n?d.unshift(t):d.push(t),a=_getMaxListeners(e),a>0&&d.length>a&&!d.warned){d.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(i)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=i,o.count=d.length,ProcessEmitWarning(o)}return e}EventEmitter.prototype.addListener=function(i,t){return _addListener(this,i,t,!1)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function(i,t){return _addListener(this,i,t,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(e,i,t){var n={fired:!1,wrapFn:void 0,target:e,type:i,listener:t},a=onceWrapper.bind(n);return a.listener=t,n.wrapFn=a,a}EventEmitter.prototype.once=function(i,t){return checkListener(t),this.on(i,_onceWrap(this,i,t)),this};EventEmitter.prototype.prependOnceListener=function(i,t){return checkListener(t),this.prependListener(i,_onceWrap(this,i,t)),this};EventEmitter.prototype.removeListener=function(i,t){var n,a,s,d,o;if(checkListener(t),a=this._events,a===void 0)return this;if(n=a[i],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete a[i],a.removeListener&&this.emit("removeListener",i,n.listener||t));else if(typeof n!="function"){for(s=-1,d=n.length-1;d>=0;d--)if(n[d]===t||n[d].listener===t){o=n[d].listener,s=d;break}if(s<0)return this;s===0?n.shift():spliceOne(n,s),n.length===1&&(a[i]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",i,o||t)}return this};EventEmitter.prototype.off=EventEmitter.prototype.removeListener;EventEmitter.prototype.removeAllListeners=function(i){var t,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[i]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[i]),this;if(arguments.length===0){var s=Object.keys(n),d;for(a=0;a<s.length;++a)d=s[a],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[i],typeof t=="function")this.removeListener(i,t);else if(t!==void 0)for(a=t.length-1;a>=0;a--)this.removeListener(i,t[a]);return this};function _listeners(e,i,t){var n=e._events;if(n===void 0)return[];var a=n[i];return a===void 0?[]:typeof a=="function"?t?[a.listener||a]:[a]:t?unwrapListeners(a):arrayClone(a,a.length)}EventEmitter.prototype.listeners=function(i){return _listeners(this,i,!0)};EventEmitter.prototype.rawListeners=function(i){return _listeners(this,i,!1)};EventEmitter.listenerCount=function(e,i){return typeof e.listenerCount=="function"?e.listenerCount(i):listenerCount.call(e,i)};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(e){var i=this._events;if(i!==void 0){var t=i[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}EventEmitter.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(e,i){for(var t=new Array(i),n=0;n<i;++n)t[n]=e[n];return t}function spliceOne(e,i){for(;i+1<e.length;i++)e[i]=e[i+1];e.pop()}function unwrapListeners(e){for(var i=new Array(e.length),t=0;t<i.length;++t)i[t]=e[t].listener||e[t];return i}function once(e,i){return new Promise(function(t,n){function a(d){e.removeListener(i,s),n(d)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",a),t([].slice.call(arguments))}eventTargetAgnosticAddListener(e,i,s,{once:!0}),i!=="error"&&addErrorHandlerIfEventEmitter(e,a,{once:!0})})}function addErrorHandlerIfEventEmitter(e,i,t){typeof e.on=="function"&&eventTargetAgnosticAddListener(e,"error",i,t)}function eventTargetAgnosticAddListener(e,i,t,n){if(typeof e.on=="function")n.once?e.once(i,t):e.on(i,t);else if(typeof e.addEventListener=="function")e.addEventListener(i,function a(s){n.once&&e.removeEventListener(i,a),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}const BACKGROUND_REACTION_DELAY=5e3,recycledElements=[];class Track extends eventsExports.EventEmitter{constructor(i,t){super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Track.StreamState.Active,this._currentBitrate=0,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),BACKGROUND_REACTION_DELAY):this.handleAppVisibilityChanged()},this.setMaxListeners(100),this.kind=t,this._mediaStreamTrack=i,this._mediaStreamID=i.id,this.source=Track.Source.Unknown,isWeb()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(i){let t="audio";this.kind===Track.Kind.Video&&(t="video"),i||(t==="audio"&&(recycledElements.forEach(a=>{a.parentElement===null&&!i&&(i=a)}),i&&recycledElements.splice(recycledElements.indexOf(i),1)),i||(i=document.createElement(t))),this.attachedElements.includes(i)||this.attachedElements.push(i),attachToElement(this._mediaStreamTrack,i);const n=i.srcObject.getTracks();return n.some(a=>a.kind==="audio")&&i.play().then(()=>{this.emit(TrackEvent.AudioPlaybackStarted)}).catch(a=>{a.name==="NotAllowedError"?this.emit(TrackEvent.AudioPlaybackFailed,a):livekitLogger.warn("could not playback audio",a),i&&n.some(s=>s.kind==="video")&&a.name==="NotAllowedError"&&(i.muted=!0,i.play().catch(()=>{}))}),this.emit(TrackEvent.ElementAttached,i),i}detach(i){if(i){detachTrack(this._mediaStreamTrack,i);const n=this.attachedElements.indexOf(i);return n>=0&&(this.attachedElements.splice(n,1),this.recycleElement(i),this.emit(TrackEvent.ElementDetached,i)),i}const t=[];return this.attachedElements.forEach(n=>{detachTrack(this._mediaStreamTrack,n),t.push(n),this.recycleElement(n),this.emit(TrackEvent.ElementDetached,n)}),this.attachedElements=[],t}stop(){this.stopMonitor(),this._mediaStreamTrack.stop(),isWeb()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}recycleElement(i){if(i instanceof HTMLAudioElement){let t=!0;i.pause(),recycledElements.forEach(n=>{n.parentElement||(t=!1)}),t&&recycledElements.push(i)}}async handleAppVisibilityChanged(){this.isInBackground=document.visibilityState==="hidden"}}function attachToElement(e,i){let t;i.srcObject instanceof MediaStream?t=i.srcObject:t=new MediaStream;let n;e.kind==="audio"?n=t.getAudioTracks():n=t.getVideoTracks(),n.includes(e)||(n.forEach(a=>{t.removeTrack(a)}),t.addTrack(e)),i.autoplay=!0,i.muted=t.getAudioTracks().length===0,i instanceof HTMLVideoElement&&(i.playsInline=!0),i.srcObject!==t&&(i.srcObject=t,(isSafari()||isFireFox())&&i instanceof HTMLVideoElement&&setTimeout(()=>{i.srcObject=t,i.play().catch(()=>{})},0))}function detachTrack(e,i){if(i.srcObject instanceof MediaStream){const t=i.srcObject;t.removeTrack(e),t.getTracks().length>0?i.srcObject=t:i.srcObject=null}}(function(e){let i;(function(c){c.Audio="audio",c.Video="video",c.Unknown="unknown"})(i=e.Kind||(e.Kind={}));let t;(function(c){c.Camera="camera",c.Microphone="microphone",c.ScreenShare="screen_share",c.ScreenShareAudio="screen_share_audio",c.Unknown="unknown"})(t=e.Source||(e.Source={}));let n;(function(c){c.Active="active",c.Paused="paused",c.Unknown="unknown"})(n=e.StreamState||(e.StreamState={}));function a(c){switch(c){case i.Audio:return TrackType.AUDIO;case i.Video:return TrackType.VIDEO;default:return TrackType.UNRECOGNIZED}}e.kindToProto=a;function s(c){switch(c){case TrackType.AUDIO:return i.Audio;case TrackType.VIDEO:return i.Video;default:return i.Unknown}}e.kindFromProto=s;function d(c){switch(c){case t.Camera:return TrackSource.CAMERA;case t.Microphone:return TrackSource.MICROPHONE;case t.ScreenShare:return TrackSource.SCREEN_SHARE;case t.ScreenShareAudio:return TrackSource.SCREEN_SHARE_AUDIO;default:return TrackSource.UNRECOGNIZED}}e.sourceToProto=d;function o(c){switch(c){case TrackSource.CAMERA:return t.Camera;case TrackSource.MICROPHONE:return t.Microphone;case TrackSource.SCREEN_SHARE:return t.ScreenShare;case TrackSource.SCREEN_SHARE_AUDIO:return t.ScreenShareAudio;default:return t.Unknown}}e.sourceFromProto=o;function f(c){switch(c){case StreamState.ACTIVE:return n.Active;case StreamState.PAUSED:return n.Paused;default:return n.Unknown}}e.streamStateFromProto=f})(Track||(Track={}));const defaultDimensionsTimeout=2*1e3;class LocalTrack extends Track{constructor(i,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;super(i,t),this._isUpstreamPaused=!1,this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this.emit(TrackEvent.Ended,this)},this._mediaStreamTrack.addEventListener("ended",this.handleEnded),this.constraints=n??i.getConstraints(),this.reacquireTrack=!1,this.providedByUser=a,this.muteQueue=new Queue}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Track.Kind.Video)return;const{width:i,height:t}=this._mediaStreamTrack.getSettings();if(i&&t)return{width:i,height:t}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}async waitForDimensions(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDimensionsTimeout;if(this.kind===Track.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");const t=Date.now();for(;Date.now()-t<i;){const n=this.dimensions;if(n)return n;await sleep(50)}throw new TrackInvalidError("unable to get track dimensions after timeout")}async getDeviceId(){if(this.source===Track.Source.ScreenShare)return;const{deviceId:i,groupId:t}=this._mediaStreamTrack.getSettings(),n=this.kind===Track.Kind.Audio?"audioinput":"videoinput";return DeviceManager.getInstance().normalizeDeviceId(n,i,t)}async mute(){return this.setTrackMuted(!0),this}async unmute(){return this.setTrackMuted(!1),this}async replaceTrack(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!this.sender)throw new TrackInvalidError("unable to replace an unpublished track");return this.attachedElements.forEach(n=>{detachTrack(this._mediaStreamTrack,n)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this.providedByUser||this._mediaStreamTrack.stop(),i.addEventListener("ended",this.handleEnded),livekitLogger.debug("replace MediaStreamTrack"),this.sender&&await this.sender.replaceTrack(i),this._mediaStreamTrack=i,this._mediaStreamTrack.enabled=!this.isMuted,await this.resumeUpstream(),this.attachedElements.forEach(n=>{attachToElement(i,n)}),this.mediaStream=new MediaStream([i]),this.providedByUser=t,this}async restart(i){i||(i=this.constraints),livekitLogger.debug("restarting track with constraints",i);const t={audio:!1,video:!1};this.kind===Track.Kind.Video?t.video=i:t.audio=i,this.attachedElements.forEach(s=>{detachTrack(this._mediaStreamTrack,s)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const n=await navigator.mediaDevices.getUserMedia(t),a=n.getTracks()[0];return a.addEventListener("ended",this.handleEnded),livekitLogger.debug("re-acquired MediaStreamTrack"),this.sender&&await this.sender.replaceTrack(a),this._mediaStreamTrack=a,await this.resumeUpstream(),this.attachedElements.forEach(s=>{attachToElement(a,s)}),this.mediaStream=n,this.constraints=i,this.emit(TrackEvent.Restarted,this),this}setTrackMuted(i){livekitLogger.debug("setting ".concat(this.kind," track ").concat(i?"muted":"unmuted")),!(this.isMuted===i&&this._mediaStreamTrack.enabled!==i)&&(this.isMuted=i,this._mediaStreamTrack.enabled=!i,this.emit(i?TrackEvent.Muted:TrackEvent.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),isMobile()&&(livekitLogger.debug("visibility changed, is in Background: ".concat(this.isInBackground)),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(livekitLogger.debug("track needs to be reaquired, restarting ".concat(this.source)),await this.restart(),this.reacquireTrack=!1))}async pauseUpstream(){this.muteQueue.run(async()=>{if(this._isUpstreamPaused===!0)return;if(!this.sender){livekitLogger.warn("unable to pause upstream for an unpublished track");return}this._isUpstreamPaused=!0,this.emit(TrackEvent.UpstreamPaused,this);const i=this.kind===Track.Kind.Audio?getEmptyAudioStreamTrack():getEmptyVideoStreamTrack();await this.sender.replaceTrack(i)})}async resumeUpstream(){this.muteQueue.run(async()=>{if(this._isUpstreamPaused!==!1){if(!this.sender){livekitLogger.warn("unable to resume upstream for an unpublished track");return}this._isUpstreamPaused=!1,this.emit(TrackEvent.UpstreamResumed,this),await this.sender.replaceTrack(this._mediaStreamTrack)}})}}class LocalAudioTrack extends LocalTrack{constructor(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;super(i,Track.Kind.Audio,t,n),this.stopOnMute=!1,this.monitorSender=async()=>{if(!this.sender){this._currentBitrate=0;return}let a;try{a=await this.getSenderStats()}catch(s){livekitLogger.error("could not get audio sender stats",{error:s});return}a&&this.prevStats&&(this._currentBitrate=computeBitrate(a,this.prevStats)),this.prevStats=a},this.checkForSilence()}async setDeviceId(i){this.constraints.deviceId!==i&&(this.constraints.deviceId=i,this.isMuted||await this.restartTrack())}async mute(){return await this.muteQueue.run(async()=>{this.source===Track.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(livekitLogger.debug("stopping mic track"),this._mediaStreamTrack.stop()),await super.mute()}),this}async unmute(){return await this.muteQueue.run(async()=>{this.source===Track.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended")&&!this.isUserProvided&&(livekitLogger.debug("reacquiring mic track"),await this.restartTrack()),await super.unmute()}),this}async restartTrack(i){let t;if(i){const n=constraintsForOptions({audio:i});typeof n.audio!="boolean"&&(t=n.audio)}await this.restart(t)}async restart(i){const t=await super.restart(i);return this.checkForSilence(),t}startMonitor(){isWeb()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency)))}async getSenderStats(){var i;if(!(!((i=this.sender)===null||i===void 0)&&i.getStats))return;const t=await this.sender.getStats();let n;return t.forEach(a=>{a.type==="outbound-rtp"&&(n={type:"audio",streamId:a.id,packetsSent:a.packetsSent,packetsLost:a.packetsLost,bytesSent:a.bytesSent,timestamp:a.timestamp,roundTripTime:a.roundTripTime,jitter:a.jitter})}),n}async checkForSilence(){await detectSilence(this)&&(this.isMuted||livekitLogger.warn("silence detected on local audio track"),this.emit(TrackEvent.AudioSilenceDetected))}}const refreshSubscribedCodecAfterNewCodec=5e3;class LocalVideoTrack extends LocalTrack{constructor(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;super(i,Track.Kind.Video,t,n),this.simulcastCodecs=new Map,this.monitorSender=async()=>{if(!this.sender){this._currentBitrate=0;return}let a;try{a=await this.getSenderStats()}catch(d){livekitLogger.error("could not get audio sender stats",{error:d});return}const s=new Map(a.map(d=>[d.rid,d]));if(this.prevStats){let d=0;s.forEach((o,f)=>{var c;const p=(c=this.prevStats)===null||c===void 0?void 0:c.get(f);d+=computeBitrate(o,p)}),this._currentBitrate=d}this.prevStats=s},this.senderLock=new Mutex}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(i){var t;if(this.signalClient=i,!isWeb())return;const n=(t=this.sender)===null||t===void 0?void 0:t.getParameters();n&&(this.encodings=n.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},monitorFrequency))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(i=>{i.mediaStreamTrack.stop()}),super.stop()}async mute(){return await this.muteQueue.run(async()=>{this.source===Track.Source.Camera&&!this.isUserProvided&&(livekitLogger.debug("stopping camera track"),this._mediaStreamTrack.stop()),await super.mute()}),this}async unmute(){return await this.muteQueue.run(async()=>{this.source===Track.Source.Camera&&!this.isUserProvided&&(livekitLogger.debug("reacquiring camera track"),await this.restartTrack()),await super.unmute()}),this}async getSenderStats(){var i;if(!(!((i=this.sender)===null||i===void 0)&&i.getStats))return[];const t=[],n=await this.sender.getStats();return n.forEach(a=>{var s;if(a.type==="outbound-rtp"){const d={type:"video",streamId:a.id,frameHeight:a.frameHeight,frameWidth:a.frameWidth,firCount:a.firCount,pliCount:a.pliCount,nackCount:a.nackCount,packetsSent:a.packetsSent,bytesSent:a.bytesSent,framesSent:a.framesSent,timestamp:a.timestamp,rid:(s=a.rid)!==null&&s!==void 0?s:a.id,retransmittedPacketsSent:a.retransmittedPacketsSent,qualityLimitationReason:a.qualityLimitationReason,qualityLimitationResolutionChanges:a.qualityLimitationResolutionChanges},o=n.get(a.remoteId);o&&(d.jitter=o.jitter,d.packetsLost=o.packetsLost,d.roundTripTime=o.roundTripTime),t.push(d)}}),t}setPublishingQuality(i){const t=[];for(let n=VideoQuality.LOW;n<=VideoQuality.HIGH;n+=1)t.push({quality:n,enabled:n<=i});livekitLogger.debug("setting publishing quality. max quality ".concat(i)),this.setPublishingLayers(t)}async setDeviceId(i){this.constraints.deviceId!==i&&(this.constraints.deviceId=i,this.isMuted||await this.restartTrack())}async restartTrack(i){let t;if(i){const n=constraintsForOptions({video:i});typeof n.video!="boolean"&&(t=n.video)}await this.restart(t)}addSimulcastTrack(i,t){if(this.simulcastCodecs.has(i))throw new Error("".concat(i," already added"));const n={codec:i,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:t};return this.simulcastCodecs.set(i,n),n}setSimulcastTrackSender(i,t){const n=this.simulcastCodecs.get(i);n&&(n.sender=t,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},refreshSubscribedCodecAfterNewCodec))}async setPublishingCodecs(i){if(livekitLogger.debug("setting publishing codecs",{codecs:i,currentCodec:this.codec}),!this.codec&&i.length>0)return await this.setPublishingLayers(i[0].qualities),[];this.subscribedCodecs=i;const t=[];var n=!1,a=!1,s;try{for(var d=_asyncIterator(i),o;n=!(o=await d.next()).done;n=!1){const f=o.value;if(!this.codec||this.codec===f.codec)await this.setPublishingLayers(f.qualities);else{const c=this.simulcastCodecs.get(f.codec);if(livekitLogger.debug("try setPublishingCodec for ".concat(f.codec),c),!c||!c.sender){for(const p of f.qualities)if(p.enabled){t.push(f.codec);break}}else c.encodings&&(livekitLogger.debug("try setPublishingLayersForSender ".concat(f.codec)),await setPublishingLayersForSender(c.sender,c.encodings,f.qualities,this.senderLock))}}}catch(f){a=!0,s=f}finally{try{n&&d.return!=null&&await d.return()}finally{if(a)throw s}}return t}async setPublishingLayers(i){livekitLogger.debug("setting publishing layers",i),!(!this.sender||!this.encodings)&&await setPublishingLayersForSender(this.sender,this.encodings,i,this.senderLock)}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),isMobile()&&this.isInBackground&&this.source===Track.Source.Camera&&(this._mediaStreamTrack.enabled=!1)}}async function setPublishingLayersForSender(e,i,t,n){const a=await n.lock();livekitLogger.debug("setPublishingLayersForSender",{sender:e,qualities:t,senderEncodings:i});try{const s=e.getParameters(),{encodings:d}=s;if(!d)return;if(d.length!==i.length){livekitLogger.warn("cannot set publishing layers, encodings mismatch");return}let o=!1;d.forEach((f,c)=>{var p;let v=(p=f.rid)!==null&&p!==void 0?p:"";v===""&&(v="q");const l=videoQualityForRid(v),u=t.find(h=>h.quality===l);u&&f.active!==u.enabled&&(o=!0,f.active=u.enabled,livekitLogger.debug("setting layer ".concat(u.quality," to ").concat(f.active?"enabled":"disabled")),isFireFox()&&(u.enabled?(f.scaleResolutionDownBy=i[c].scaleResolutionDownBy,f.maxBitrate=i[c].maxBitrate,f.maxFrameRate=i[c].maxFrameRate):(f.scaleResolutionDownBy=4,f.maxBitrate=10,f.maxFrameRate=2)))}),o&&(s.encodings=d,await e.setParameters(s))}finally{a()}}function videoQualityForRid(e){switch(e){case"f":return VideoQuality.HIGH;case"h":return VideoQuality.MEDIUM;case"q":return VideoQuality.LOW;default:return VideoQuality.UNRECOGNIZED}}function videoLayersFromEncodings(e,i,t){return t?t.map(n=>{var a,s,d;const o=(a=n.scaleResolutionDownBy)!==null&&a!==void 0?a:1;let f=videoQualityForRid((s=n.rid)!==null&&s!==void 0?s:"");return f===VideoQuality.UNRECOGNIZED&&t.length===1&&(f=VideoQuality.HIGH),{quality:f,width:e/o,height:i/o,bitrate:(d=n.maxBitrate)!==null&&d!==void 0?d:0,ssrc:0}}):[{quality:VideoQuality.HIGH,width:e,height:i,bitrate:0,ssrc:0}]}class RemoteTrack extends Track{constructor(i,t,n,a){super(i,n),this.sid=t,this.receiver=a}setMuted(i){this.isMuted!==i&&(this.isMuted=i,this._mediaStreamTrack.enabled=!i,this.emit(i?TrackEvent.Muted:TrackEvent.Unmuted,this))}setMediaStream(i){this.mediaStream=i,i.onremovetrack=()=>{this.receiver=void 0,this._currentBitrate=0,this.emit(TrackEvent.Ended,this)}}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),monitorFrequency))}}class RemoteAudioTrack extends RemoteTrack{constructor(i,t,n,a,s){super(i,t,Track.Kind.Audio,n),this.monitorReceiver=async()=>{if(!this.receiver){this._currentBitrate=0;return}const d=await this.getReceiverStats();d&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(d,this.prevStats)),this.prevStats=d},this.audioContext=a,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(i){var t;for(const n of this.attachedElements)this.audioContext?(t=this.gainNode)===null||t===void 0||t.gain.setTargetAtTime(i,0,.1):n.volume=i;this.elementVolume=i}getVolume(){if(this.elementVolume)return this.elementVolume;let i=0;return this.attachedElements.forEach(t=>{t.volume>i&&(i=t.volume)}),i}async setSinkId(i){this.sinkId=i,await Promise.all(this.attachedElements.map(t=>{if(supportsSetSinkId(t))return t.setSinkId(i)}))}attach(i){const t=this.attachedElements.length===0;return i?super.attach(i):i=super.attach(),this.elementVolume&&(i.volume=this.elementVolume),this.sinkId&&supportsSetSinkId(i)&&i.setSinkId(this.sinkId),this.audioContext&&t&&(livekitLogger.debug("using audio context mapping"),this.connectWebAudio(this.audioContext,i),i.volume=0,i.muted=!0),i}detach(i){let t;return i?(t=super.detach(i),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(t=super.detach(),this.disconnectWebAudio()),t}setAudioContext(i){this.audioContext=i,i&&this.attachedElements.length>0?this.connectWebAudio(i,this.attachedElements[0]):i||this.disconnectWebAudio()}setWebAudioPlugins(i){this.webAudioPluginNodes=i,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(i,t){this.disconnectWebAudio(),this.sourceNode=i.createMediaStreamSource(t.srcObject);let n=this.sourceNode;this.webAudioPluginNodes.forEach(a=>{n.connect(a),n=a}),this.gainNode=i.createGain(),n.connect(this.gainNode),this.gainNode.connect(i.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),i.state!=="running"&&i.resume().then(()=>{i.state!=="running"&&this.emit(TrackEvent.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(a=>{this.emit(TrackEvent.AudioPlaybackFailed,a)})}disconnectWebAudio(){var i,t;(i=this.gainNode)===null||i===void 0||i.disconnect(),(t=this.sourceNode)===null||t===void 0||t.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}async getReceiverStats(){if(!this.receiver||!this.receiver.getStats)return;const i=await this.receiver.getStats();let t;return i.forEach(n=>{n.type==="inbound-rtp"&&(t={type:"audio",timestamp:n.timestamp,jitter:n.jitter,bytesReceived:n.bytesReceived,concealedSamples:n.concealedSamples,concealmentEvents:n.concealmentEvents,silentConcealedSamples:n.silentConcealedSamples,silentConcealmentEvents:n.silentConcealmentEvents,totalAudioEnergy:n.totalAudioEnergy,totalSamplesDuration:n.totalSamplesDuration})}),t}}function r(e,i,t){var n,a,s;i===void 0&&(i=50),t===void 0&&(t={});var d=(n=t.isImmediate)!=null&&n,o=(a=t.callback)!=null&&a,f=t.maxWait,c=Date.now(),p=[];function v(){if(f!==void 0){var u=Date.now()-c;if(u+i>=f)return f-u}return i}var l=function(){var u=[].slice.call(arguments),h=this;return new Promise(function(m,w){var k=d&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,c=Date.now(),!d){var O=e.apply(h,u);o&&o(O),p.forEach(function(P){return(0,P.resolve)(O)}),p=[]}},v()),k){var C=e.apply(h,u);return o&&o(C),m(C)}p.push({resolve:m,reject:w})})};return l.cancel=function(u){s!==void 0&&clearTimeout(s),p.forEach(function(h){return(0,h.reject)(u)}),p=[]},l}class CriticalTimers{}CriticalTimers.setTimeout=function(){return setTimeout(...arguments)};CriticalTimers.setInterval=function(){return setInterval(...arguments)};CriticalTimers.clearTimeout=function(){return clearTimeout(...arguments)};CriticalTimers.clearInterval=function(){return clearInterval(...arguments)};const REACTION_DELAY=100;class RemoteVideoTrack extends RemoteTrack{constructor(i,t,n,a){super(i,t,Track.Kind.Video,n),this.elementInfos=[],this.hasUsedAttach=!1,this.monitorReceiver=async()=>{if(!this.receiver){this._currentBitrate=0;return}const s=await this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=computeBitrate(s,this.prevStats)),this.prevStats=s},this.debouncedHandleResize=r(()=>{this.updateDimensions()},REACTION_DELAY),this.adaptiveStreamSettings=a}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this.isAdaptiveStream&&!this.hasUsedAttach&&livekitLogger.warn("When using adaptiveStream, you need to use remoteVideoTrack.attach() to add the track to a HTMLVideoElement, otherwise your video tracks might never start"),this._mediaStreamTrack}setMuted(i){super.setMuted(i),this.attachedElements.forEach(t=>{i?detachTrack(this._mediaStreamTrack,t):attachToElement(this._mediaStreamTrack,t)})}attach(i){if(i?super.attach(i):i=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(t=>t.element===i)===void 0){const t=new HTMLElementInfo(i);this.observeElementInfo(t)}return this.hasUsedAttach=!0,i}observeElementInfo(i){this.adaptiveStreamSettings&&this.elementInfos.find(t=>t===i)===void 0?(i.handleResize=()=>{this.debouncedHandleResize()},i.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(i),i.observe(),this.debouncedHandleResize(),this.updateVisibility()):livekitLogger.warn("visibility resize observer not triggered")}stopObservingElementInfo(i){if(!this.isAdaptiveStream){livekitLogger.warn("stopObservingElementInfo ignored");return}const t=this.elementInfos.filter(n=>n===i);for(const n of t)n.stopObserving();this.elementInfos=this.elementInfos.filter(n=>n!==i),this.updateVisibility()}detach(i){let t=[];if(i)return this.stopObservingElement(i),super.detach(i);t=super.detach();for(const n of t)this.stopObservingElement(n);return t}getDecoderImplementation(){var i;return(i=this.prevStats)===null||i===void 0?void 0:i.decoderImplementation}async getReceiverStats(){if(!this.receiver||!this.receiver.getStats)return;const i=await this.receiver.getStats();let t;return i.forEach(n=>{n.type==="inbound-rtp"&&(t={type:"video",framesDecoded:n.framesDecoded,framesDropped:n.framesDropped,framesReceived:n.framesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost,frameWidth:n.frameWidth,frameHeight:n.frameHeight,pliCount:n.pliCount,firCount:n.firCount,nackCount:n.nackCount,jitter:n.jitter,timestamp:n.timestamp,bytesReceived:n.bytesReceived,decoderImplementation:n.decoderImplementation})}),t}stopObservingElement(i){const t=this.elementInfos.filter(n=>n.element===i);for(const n of t)n.stopObserving();this.elementInfos=this.elementInfos.filter(n=>n.element!==i)}async handleAppVisibilityChanged(){await super.handleAppVisibilityChanged(),this.isAdaptiveStream&&this.updateVisibility()}updateVisibility(){var i,t;const n=this.elementInfos.reduce((d,o)=>Math.max(d,o.visibilityChangedAt||0),0),a=!((t=(i=this.adaptiveStreamSettings)===null||i===void 0?void 0:i.pauseVideoInBackground)!==null&&t!==void 0)||t?this.isInBackground:!1,s=this.elementInfos.some(d=>d.visible)&&!a;if(this.lastVisible!==s){if(!s&&Date.now()-n<REACTION_DELAY){CriticalTimers.setTimeout(()=>{this.updateVisibility()},REACTION_DELAY);return}this.lastVisible=s,this.emit(TrackEvent.VisibilityChanged,s,this)}}updateDimensions(){var i,t,n,a;let s=0,d=0;for(const o of this.elementInfos){const f=(t=(i=this.adaptiveStreamSettings)===null||i===void 0?void 0:i.pixelDensity)!==null&&t!==void 0?t:1,c=f==="screen"?window.devicePixelRatio:f,p=o.width()*c,v=o.height()*c;p+v>s+d&&(s=p,d=v)}((n=this.lastDimensions)===null||n===void 0?void 0:n.width)===s&&((a=this.lastDimensions)===null||a===void 0?void 0:a.height)===d||(this.lastDimensions={width:s,height:d},this.emit(TrackEvent.VideoDimensionsChanged,this.lastDimensions,this))}}class HTMLElementInfo{constructor(i,t){this.onVisibilityChanged=n=>{var a;const{target:s,isIntersecting:d}=n;s===this.element&&(this.visible=d,this.visibilityChangedAt=Date.now(),(a=this.handleVisibilityChanged)===null||a===void 0||a.call(this))},this.element=i,this.visible=t??isElementInViewport(i),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.element.handleResize=()=>{var i;(i=this.handleResize)===null||i===void 0||i.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,getIntersectionObserver().observe(this.element),getResizeObserver().observe(this.element)}stopObserving(){var i,t;(i=getIntersectionObserver())===null||i===void 0||i.unobserve(this.element),(t=getResizeObserver())===null||t===void 0||t.unobserve(this.element)}}function isElementInViewport(e){let i=e.offsetTop,t=e.offsetLeft;const n=e.offsetWidth,a=e.offsetHeight,{hidden:s}=e,{opacity:d,display:o}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,i+=e.offsetTop,t+=e.offsetLeft;return i<window.pageYOffset+window.innerHeight&&t<window.pageXOffset+window.innerWidth&&i+a>window.pageYOffset&&t+n>window.pageXOffset&&!s&&(d!==""?parseFloat(d)>0:!0)&&o!=="none"}class TrackPublication extends eventsExports.EventEmitter{constructor(i,t,n){super(),this.metadataMuted=!1,this.handleMuted=()=>{this.emit(TrackEvent.Muted)},this.handleUnmuted=()=>{this.emit(TrackEvent.Unmuted)},this.setMaxListeners(100),this.kind=i,this.trackSid=t,this.trackName=n,this.source=Track.Source.Unknown}setTrack(i){this.track&&(this.track.off(TrackEvent.Muted,this.handleMuted),this.track.off(TrackEvent.Unmuted,this.handleUnmuted)),this.track=i,i&&(i.on(TrackEvent.Muted,this.handleMuted),i.on(TrackEvent.Unmuted,this.handleUnmuted))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get audioTrack(){if(this.track instanceof LocalAudioTrack||this.track instanceof RemoteAudioTrack)return this.track}get videoTrack(){if(this.track instanceof LocalVideoTrack||this.track instanceof RemoteVideoTrack)return this.track}updateInfo(i){this.trackSid=i.sid,this.trackName=i.name,this.source=Track.sourceFromProto(i.source),this.mimeType=i.mimeType,this.kind===Track.Kind.Video&&i.width>0&&(this.dimensions={width:i.width,height:i.height},this.simulcasted=i.simulcast),this.trackInfo=i,livekitLogger.trace("update publication info",{info:i})}}(function(e){(function(i){i.Desired="desired",i.Subscribed="subscribed",i.Unsubscribed="unsubscribed"})(e.SubscriptionStatus||(e.SubscriptionStatus={})),function(i){i.Allowed="allowed",i.NotAllowed="not_allowed"}(e.PermissionStatus||(e.PermissionStatus={}))})(TrackPublication||(TrackPublication={}));class LocalTrackPublication extends TrackPublication{get isUpstreamPaused(){var i;return(i=this.track)===null||i===void 0?void 0:i.isUpstreamPaused}constructor(i,t,n){super(i,t.sid,t.name),this.track=void 0,this.handleTrackEnded=()=>{this.emit(TrackEvent.Ended)},this.updateInfo(t),this.setTrack(n)}setTrack(i){this.track&&this.track.off(TrackEvent.Ended,this.handleTrackEnded),super.setTrack(i),i&&i.on(TrackEvent.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}async mute(){var i;return(i=this.track)===null||i===void 0?void 0:i.mute()}async unmute(){var i;return(i=this.track)===null||i===void 0?void 0:i.unmute()}async pauseUpstream(){var i;await((i=this.track)===null||i===void 0?void 0:i.pauseUpstream())}async resumeUpstream(){var i;await((i=this.track)===null||i===void 0?void 0:i.resumeUpstream())}}class VideoPreset{constructor(i,t,n,a){this.width=i,this.height=t,this.encoding={maxBitrate:n,maxFramerate:a}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const backupCodecs=["vp8","h264"];function isBackupCodec(e){return!!backupCodecs.find(i=>i===e)}var AudioPresets;(function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:2e4},e.music={maxBitrate:32e3},e.musicStereo={maxBitrate:48e3},e.musicHighQuality={maxBitrate:64e3},e.musicHighQualityStereo={maxBitrate:96e3}})(AudioPresets||(AudioPresets={}));const VideoPresets={h90:new VideoPreset(160,90,6e4,15),h180:new VideoPreset(320,180,12e4,15),h216:new VideoPreset(384,216,18e4,15),h360:new VideoPreset(640,360,3e5,20),h540:new VideoPreset(960,540,6e5,25),h720:new VideoPreset(1280,720,17e5,30),h1080:new VideoPreset(1920,1080,3e6,30),h1440:new VideoPreset(2560,1440,5e6,30),h2160:new VideoPreset(3840,2160,8e6,30)},VideoPresets43={h120:new VideoPreset(160,120,8e4,15),h180:new VideoPreset(240,180,1e5,15),h240:new VideoPreset(320,240,15e4,15),h360:new VideoPreset(480,360,225e3,20),h480:new VideoPreset(640,480,3e5,20),h540:new VideoPreset(720,540,45e4,25),h720:new VideoPreset(960,720,15e5,30),h1080:new VideoPreset(1440,1080,25e5,30),h1440:new VideoPreset(1920,1440,35e5,30)},ScreenSharePresets={h360fps3:new VideoPreset(640,360,2e5,3),h720fps5:new VideoPreset(1280,720,4e5,5),h720fps15:new VideoPreset(1280,720,1e6,15),h1080fps15:new VideoPreset(1920,1080,15e5,15),h1080fps30:new VideoPreset(1920,1080,3e6,30)};var ConnectionQuality;(function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Unknown="unknown"})(ConnectionQuality||(ConnectionQuality={}));function qualityFromProto(e){switch(e){case ConnectionQuality$1.EXCELLENT:return ConnectionQuality.Excellent;case ConnectionQuality$1.GOOD:return ConnectionQuality.Good;case ConnectionQuality$1.POOR:return ConnectionQuality.Poor;default:return ConnectionQuality.Unknown}}class Participant extends eventsExports.EventEmitter{constructor(i,t,n,a){super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ConnectionQuality.Unknown,this.setMaxListeners(100),this.sid=i,this.identity=t,this.name=n,this.metadata=a,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(i){if(i!==Track.Source.Unknown){for(const[,t]of this.tracks)if(t.source===i)return t}}getTrackByName(i){for(const[,t]of this.tracks)if(t.trackName===i)return t}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var i;const t=this.getTrack(Track.Source.Camera);return!(!((i=t==null?void 0:t.isMuted)!==null&&i!==void 0)||i)}get isMicrophoneEnabled(){var i;const t=this.getTrack(Track.Source.Microphone);return!(!((i=t==null?void 0:t.isMuted)!==null&&i!==void 0)||i)}get isScreenShareEnabled(){return!!this.getTrack(Track.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(this.participantInfo.joinedAt*1e3):new Date}updateInfo(i){this.identity=i.identity,this.sid=i.sid,this.name=i.name,this.setMetadata(i.metadata),i.permission&&this.setPermissions(i.permission),this.participantInfo=i,livekitLogger.trace("update participant info",{info:i})}setMetadata(i){const t=this.metadata!==i,n=this.metadata;this.metadata=i,t&&this.emit(ParticipantEvent.ParticipantMetadataChanged,n)}setPermissions(i){var t,n,a,s,d;const o=this.permissions,f=i.canPublish!==((t=this.permissions)===null||t===void 0?void 0:t.canPublish)||i.canSubscribe!==((n=this.permissions)===null||n===void 0?void 0:n.canSubscribe)||i.canPublishData!==((a=this.permissions)===null||a===void 0?void 0:a.canPublishData)||i.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||i.recorder!==((d=this.permissions)===null||d===void 0?void 0:d.recorder)||i.canPublishSources.length!==this.permissions.canPublishSources.length||i.canPublishSources.some((c,p)=>{var v;return c!==((v=this.permissions)===null||v===void 0?void 0:v.canPublishSources[p])});return this.permissions=i,f&&this.emit(ParticipantEvent.ParticipantPermissionsChanged,o),f}setIsSpeaking(i){i!==this.isSpeaking&&(this.isSpeaking=i,i&&(this.lastSpokeAt=new Date),this.emit(ParticipantEvent.IsSpeakingChanged,i))}setConnectionQuality(i){const t=this._connectionQuality;this._connectionQuality=qualityFromProto(i),t!==this._connectionQuality&&this.emit(ParticipantEvent.ConnectionQualityChanged,this._connectionQuality)}addTrackPublication(i){i.on(TrackEvent.Muted,()=>{this.emit(ParticipantEvent.TrackMuted,i)}),i.on(TrackEvent.Unmuted,()=>{this.emit(ParticipantEvent.TrackUnmuted,i)});const t=i;switch(t.track&&(t.track.sid=i.trackSid),this.tracks.set(i.trackSid,i),i.kind){case Track.Kind.Audio:this.audioTracks.set(i.trackSid,i);break;case Track.Kind.Video:this.videoTracks.set(i.trackSid,i);break}}}function trackPermissionToProto(e){var i,t,n;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return{participantIdentity:(i=e.participantIdentity)!==null&&i!==void 0?i:"",participantSid:(t=e.participantSid)!==null&&t!==void 0?t:"",allTracks:(n=e.allowAll)!==null&&n!==void 0?n:!1,trackSids:e.allowedTrackSids||[]}}function mediaTrackToLocalTrack(e,i){switch(e.kind){case"audio":return new LocalAudioTrack(e,i,!1);case"video":return new LocalVideoTrack(e,i,!1);default:throw new TrackInvalidError("unsupported track type: ".concat(e.kind))}}const presets169=Object.values(VideoPresets),presets43=Object.values(VideoPresets43),presetsScreenShare=Object.values(ScreenSharePresets),defaultSimulcastPresets169=[VideoPresets.h180,VideoPresets.h360],defaultSimulcastPresets43=[VideoPresets43.h180,VideoPresets43.h360],computeDefaultScreenShareSimulcastPresets=e=>[{scaleResolutionDownBy:2,fps:3}].map(t=>{var n;return new VideoPreset(Math.floor(e.width/t.scaleResolutionDownBy),Math.floor(e.height/t.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(t.scaleResolutionDownBy**2*(((n=e.encoding.maxFramerate)!==null&&n!==void 0?n:30)/t.fps)))),t.fps)}),videoRids=["q","h","f"];function computeVideoEncodings(e,i,t,n){var a,s;let d=n==null?void 0:n.videoEncoding;e&&(d=n==null?void 0:n.screenShareEncoding);const o=n==null?void 0:n.simulcast,f=n==null?void 0:n.scalabilityMode,c=n==null?void 0:n.videoCodec;if(!d&&!o&&!f||!i||!t)return[{}];d||(d=determineAppropriateEncoding(e,i,t,c),livekitLogger.debug("using video encoding",d));const p=new VideoPreset(i,t,d.maxBitrate,d.maxFramerate);if(f&&c==="av1"){livekitLogger.debug("using svc with scalabilityMode ".concat(f));const u=[];switch(f){case"L3T3":for(let h=0;h<3;h+=1)u.push({rid:videoRids[2-h],scaleResolutionDownBy:2**h,maxBitrate:d.maxBitrate/3**h,maxFramerate:p.encoding.maxFramerate,scalabilityMode:"L3T3"});return livekitLogger.debug("encodings",u),u;default:throw new Error("unsupported scalabilityMode: ".concat(f))}}if(!o)return[d];let v=[];e?v=(a=sortPresets(n==null?void 0:n.screenShareSimulcastLayers))!==null&&a!==void 0?a:defaultSimulcastLayers(e,p):v=(s=sortPresets(n==null?void 0:n.videoSimulcastLayers))!==null&&s!==void 0?s:defaultSimulcastLayers(e,p);let l;if(v.length>0){const u=v[0];v.length>1&&([,l]=v);const h=Math.max(i,t);if(h>=960&&l)return encodingsFromPresets(i,t,[u,l,p]);if(h>=480)return encodingsFromPresets(i,t,[u,p])}return encodingsFromPresets(i,t,[p])}function computeTrackBackupEncodings(e,i,t){var n,a,s,d;if(!t.backupCodec||t.backupCodec.codec===t.videoCodec)return;i!==t.backupCodec.codec&&livekitLogger.warn("requested a different codec than specified as backup",{serverRequested:i,backup:t.backupCodec.codec}),t.videoCodec=i,t.videoEncoding=t.backupCodec.encoding;const o=e.mediaStreamTrack.getSettings(),f=(n=o.width)!==null&&n!==void 0?n:(a=e.dimensions)===null||a===void 0?void 0:a.width,c=(s=o.height)!==null&&s!==void 0?s:(d=e.dimensions)===null||d===void 0?void 0:d.height;return computeVideoEncodings(e.source===Track.Source.ScreenShare,f,c,t)}function determineAppropriateEncoding(e,i,t,n){const a=presetsForResolution(e,i,t);let{encoding:s}=a[0];const d=Math.max(i,t);for(let o=0;o<a.length;o+=1){const f=a[o];if(s=f.encoding,f.width>=d)break}if(n)switch(n){case"av1":s.maxBitrate=s.maxBitrate*.7;break}return s}function presetsForResolution(e,i,t){if(e)return presetsScreenShare;const n=i>t?i/t:t/i;return Math.abs(n-16/9)<Math.abs(n-4/3)?presets169:presets43}function defaultSimulcastLayers(e,i){if(e)return computeDefaultScreenShareSimulcastPresets(i);const{width:t,height:n}=i,a=t>n?t/n:n/t;return Math.abs(a-16/9)<Math.abs(a-4/3)?defaultSimulcastPresets169:defaultSimulcastPresets43}function encodingsFromPresets(e,i,t){const n=[];return t.forEach((a,s)=>{if(s>=videoRids.length)return;const d=Math.min(e,i),o=videoRids[s];n.push({rid:o,scaleResolutionDownBy:Math.max(1,d/Math.min(a.width,a.height)),maxBitrate:a.encoding.maxBitrate,maxFramerate:a.encoding.maxFramerate})}),n}function sortPresets(e){if(e)return e.sort((i,t)=>{const{encoding:n}=i,{encoding:a}=t;return n.maxBitrate>a.maxBitrate?1:n.maxBitrate<a.maxBitrate?-1:n.maxBitrate===a.maxBitrate&&n.maxFramerate&&a.maxFramerate?n.maxFramerate>a.maxFramerate?1:-1:0})}class RemoteTrackPublication extends TrackPublication{constructor(i,t,n){super(i,t.sid,t.name),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=VideoQuality.HIGH,this.handleEnded=a=>{this.setTrack(void 0),this.emit(TrackEvent.Ended,a)},this.handleVisibilityChange=a=>{livekitLogger.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(a),{trackSid:this.trackSid}),this.disabled=!a,this.emitTrackUpdate()},this.handleVideoDimensionsChange=a=>{livekitLogger.debug("adaptivestream video dimensions ".concat(a.width,"x").concat(a.height),{trackSid:this.trackSid}),this.videoDimensions=a,this.emitTrackUpdate()},this.subscribed=n,this.updateInfo(t)}setSubscribed(i){const t=this.subscriptionStatus,n=this.permissionStatus;this.subscribed=i,i&&(this.allowed=!0);const a={trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[{participantSid:"",trackSids:[this.trackSid]}]};this.emit(TrackEvent.UpdateSubscription,a),this.emitSubscriptionUpdateIfChanged(t),this.emitPermissionUpdateIfChanged(n)}get subscriptionStatus(){return this.subscribed===!1?TrackPublication.SubscriptionStatus.Unsubscribed:super.isSubscribed?TrackPublication.SubscriptionStatus.Subscribed:TrackPublication.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?TrackPublication.PermissionStatus.Allowed:TrackPublication.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(i){!this.isManualOperationAllowed()||this.disabled===!i||(this.disabled=!i,this.emitTrackUpdate())}setVideoQuality(i){!this.isManualOperationAllowed()||this.currentVideoQuality===i||(this.currentVideoQuality=i,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(i){var t,n;this.isManualOperationAllowed()&&(((t=this.videoDimensions)===null||t===void 0?void 0:t.width)===i.width&&((n=this.videoDimensions)===null||n===void 0?void 0:n.height)===i.height||(this.track instanceof RemoteVideoTrack&&(this.videoDimensions=i),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(i){this.isManualOperationAllowed()&&this.track instanceof RemoteVideoTrack&&this.fps!==i&&(this.fps=i,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(i){const t=this.subscriptionStatus,n=this.permissionStatus,a=this.track;a!==i&&(a&&(a.off(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),a.off(TrackEvent.VisibilityChanged,this.handleVisibilityChange),a.off(TrackEvent.Ended,this.handleEnded),a.detach(),this.emit(TrackEvent.Unsubscribed,a)),super.setTrack(i),i&&(i.sid=this.trackSid,i.on(TrackEvent.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.on(TrackEvent.VisibilityChanged,this.handleVisibilityChange),i.on(TrackEvent.Ended,this.handleEnded),this.emit(TrackEvent.Subscribed,i)),this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t))}setAllowed(i){const t=this.subscriptionStatus,n=this.permissionStatus;this.allowed=i,this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t)}updateInfo(i){var t;super.updateInfo(i),this.metadataMuted=i.muted,(t=this.track)===null||t===void 0||t.setMuted(i.muted)}emitSubscriptionUpdateIfChanged(i){const t=this.subscriptionStatus;i!==t&&this.emit(TrackEvent.SubscriptionStatusChanged,t,i)}emitPermissionUpdateIfChanged(i){this.permissionStatus!==i&&this.emit(TrackEvent.SubscriptionPermissionChanged,this.permissionStatus,i)}isManualOperationAllowed(){return this.isAdaptiveStream?(livekitLogger.warn("adaptive stream is enabled, cannot change track settings",{trackSid:this.trackSid}),!1):this.isDesired?!0:(livekitLogger.warn("cannot update track settings when not subscribed",{trackSid:this.trackSid}),!1)}get isAdaptiveStream(){return this.track instanceof RemoteVideoTrack&&this.track.isAdaptiveStream}emitTrackUpdate(){const i=UpdateTrackSettings.fromPartial({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(i.width=this.videoDimensions.width,i.height=this.videoDimensions.height):this.currentVideoQuality!==void 0?i.quality=this.currentVideoQuality:i.quality=VideoQuality.HIGH,this.emit(TrackEvent.UpdateSettings,i)}}class RemoteParticipant extends Participant{static fromParticipantInfo(i,t){return new RemoteParticipant(i,t.sid,t.identity,t.name,t.metadata)}constructor(i,t,n,a,s){super(t,n||"",a,s),this.signalClient=i,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map}addTrackPublication(i){super.addTrackPublication(i),i.on(TrackEvent.UpdateSettings,t=>{livekitLogger.debug("send update settings",t),this.signalClient.sendUpdateTrackSettings(t)}),i.on(TrackEvent.UpdateSubscription,t=>{t.participantTracks.forEach(n=>{n.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(t)}),i.on(TrackEvent.SubscriptionPermissionChanged,t=>{this.emit(ParticipantEvent.TrackSubscriptionPermissionChanged,i,t)}),i.on(TrackEvent.SubscriptionStatusChanged,t=>{this.emit(ParticipantEvent.TrackSubscriptionStatusChanged,i,t)}),i.on(TrackEvent.Subscribed,t=>{this.emit(ParticipantEvent.TrackSubscribed,t,i)}),i.on(TrackEvent.Unsubscribed,t=>{this.emit(ParticipantEvent.TrackUnsubscribed,t,i)})}getTrack(i){const t=super.getTrack(i);if(t)return t}getTrackByName(i){const t=super.getTrackByName(i);if(t)return t}setVolume(i){this.volume=i;const t=this.getTrack(Track.Source.Microphone);t&&t.track&&t.track.setVolume(i)}getVolume(){const i=this.getTrack(Track.Source.Microphone);return i&&i.track?i.track.getVolume():this.volume}addSubscribedMediaTrack(i,t,n,a,s,d){let o=this.getTrackPublication(t);if(o||t.startsWith("TR")||this.tracks.forEach(p=>{!o&&i.kind===p.kind.toString()&&(o=p)}),!o){if(d===0){livekitLogger.error("could not find published track",{participant:this.sid,trackSid:t}),this.emit(ParticipantEvent.TrackSubscriptionFailed,t);return}d===void 0&&(d=20),setTimeout(()=>{this.addSubscribedMediaTrack(i,t,n,a,s,d-1)},150);return}if(i.readyState==="ended"){livekitLogger.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",{participant:this.sid,trackSid:t}),this.emit(ParticipantEvent.TrackSubscriptionFailed,t);return}const f=i.kind==="video";let c;return f?c=new RemoteVideoTrack(i,t,a,s):c=new RemoteAudioTrack(i,t,a,this.audioContext,this.audioOutput),c.source=o.source,c.isMuted=o.isMuted,c.setMediaStream(n),c.start(),o.setTrack(c),this.volume!==void 0&&c instanceof RemoteAudioTrack&&c.source===Track.Source.Microphone&&c.setVolume(this.volume),o}get hasMetadata(){return!!this.participantInfo}getTrackPublication(i){return this.tracks.get(i)}updateInfo(i){super.updateInfo(i);const t=new Map,n=new Map;i.tracks.forEach(a=>{var s;let d=this.getTrackPublication(a.sid);if(d)d.updateInfo(a);else{const o=Track.kindFromProto(a.type);if(!o)return;d=new RemoteTrackPublication(o,a,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe),d.updateInfo(a),n.set(a.sid,d);const f=Array.from(this.tracks.values()).find(c=>c.source===(d==null?void 0:d.source));f&&d.source!==Track.Source.Unknown&&livekitLogger.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(d.source),{oldTrack:f,newTrack:d,participant:this,participantInfo:i}),this.addTrackPublication(d)}t.set(a.sid,d)}),this.tracks.forEach(a=>{t.has(a.trackSid)||(livekitLogger.trace("detected removed track on remote participant, unpublishing",{publication:a,participantSid:this.sid}),this.unpublishTrack(a.trackSid,!0))}),n.forEach(a=>{this.emit(ParticipantEvent.TrackPublished,a)})}unpublishTrack(i,t){const n=this.tracks.get(i);if(!n)return;switch(this.tracks.delete(i),n.kind){case Track.Kind.Audio:this.audioTracks.delete(i);break;case Track.Kind.Video:this.videoTracks.delete(i);break}const{track:a}=n;a&&(a.stop(),n.setTrack(void 0)),t&&this.emit(ParticipantEvent.TrackUnpublished,n)}setAudioContext(i){this.audioContext=i,this.audioTracks.forEach(t=>t.track instanceof RemoteAudioTrack&&t.track.setAudioContext(i))}async setAudioOutput(i){this.audioOutput=i;const t=[];this.audioTracks.forEach(n=>{var a;n.track instanceof RemoteAudioTrack&&t.push(n.track.setSinkId((a=i.deviceId)!==null&&a!==void 0?a:"default"))}),await Promise.all(t)}emit(i){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return livekitLogger.trace("participant event",{participant:this.sid,event:i,args:n}),super.emit(i,...n)}}class LocalParticipant extends Participant{constructor(i,t,n,a){super(i,t),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new Future)},this.handleReconnected=()=>{var s,d;(d=(s=this.reconnectFuture)===null||s===void 0?void 0:s.resolve)===null||d===void 0||d.call(s),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var s,d;(d=(s=this.reconnectFuture)===null||s===void 0?void 0:s.reject)===null||d===void 0||d.call(s,"Got disconnected during publishing attempt"),this.reconnectFuture=void 0},this.updateTrackSubscriptionPermissions=()=>{livekitLogger.debug("updating track subscription permissions",{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions}),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(s=>trackPermissionToProto(s)))},this.onTrackUnmuted=s=>{this.onTrackMuted(s,s.isUpstreamPaused)},this.onTrackMuted=(s,d)=>{if(d===void 0&&(d=!0),!s.sid){livekitLogger.error("could not update mute status for unpublished track",s);return}this.engine.updateMuteStatus(s.sid,d)},this.onTrackUpstreamPaused=s=>{livekitLogger.debug("upstream paused"),this.onTrackMuted(s,!0)},this.onTrackUpstreamResumed=s=>{livekitLogger.debug("upstream resumed"),this.onTrackMuted(s,s.isMuted)},this.handleSubscribedQualityUpdate=async s=>{var d,o;if(!(!((d=this.roomOptions)===null||d===void 0)&&d.dynacast))return;const f=this.videoTracks.get(s.trackSid);if(!f){livekitLogger.warn("received subscribed quality update for unknown track",{method:"handleSubscribedQualityUpdate",sid:s.trackSid});return}if(s.subscribedCodecs.length>0){if(!f.videoTrack)return;const h=await f.videoTrack.setPublishingCodecs(s.subscribedCodecs);var c=!1,p=!1,v;try{for(var l=_asyncIterator(h),u;c=!(u=await l.next()).done;c=!1){const m=u.value;isBackupCodec(m)&&(livekitLogger.debug("publish ".concat(m," for ").concat(f.videoTrack.sid)),await this.publishAdditionalCodecForTrack(f.videoTrack,m,f.options))}}catch(m){p=!0,v=m}finally{try{c&&l.return!=null&&await l.return()}finally{if(p)throw v}}}else s.subscribedQualities.length>0&&await((o=f.videoTrack)===null||o===void 0?void 0:o.setPublishingLayers(s.subscribedQualities))},this.handleLocalTrackUnpublished=s=>{const d=this.tracks.get(s.trackSid);if(!d){livekitLogger.warn("received unpublished event for unknown track",{method:"handleLocalTrackUnpublished",trackSid:s.trackSid});return}this.unpublishTrack(d.track)},this.handleTrackEnded=async s=>{if(s.source===Track.Source.ScreenShare||s.source===Track.Source.ScreenShareAudio)livekitLogger.debug("unpublishing local track due to TrackEnded",{track:s.sid}),this.unpublishTrack(s);else if(s.isUserProvided)await s.mute();else if(s instanceof LocalAudioTrack||s instanceof LocalVideoTrack)try{if(isWeb())try{const d=await(navigator==null?void 0:navigator.permissions.query({name:s.source===Track.Source.Camera?"camera":"microphone"}));if(d&&d.state==="denied")throw livekitLogger.warn("user has revoked access to ".concat(s.source)),d.onchange=()=>{d.state!=="denied"&&(s.isMuted||s.restartTrack(),d.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}s.isMuted||(livekitLogger.debug("track ended, attempting to use a different device"),await s.restartTrack())}catch{livekitLogger.warn("could not restart track, muting instead"),await s.mute()}},this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=n,this.roomOptions=a,this.setupEngine(n)}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}getTrack(i){const t=super.getTrack(i);if(t)return t}getTrackByName(i){const t=super.getTrackByName(i);if(t)return t}setupEngine(i){this.engine=i,this.engine.client.onRemoteMuteChanged=(t,n)=>{const a=this.tracks.get(t);!a||!a.track||(n?a.mute():a.unmute())},this.engine.client.onSubscribedQualityUpdate=this.handleSubscribedQualityUpdate,this.engine.client.onLocalTrackUnpublished=this.handleLocalTrackUnpublished,this.engine.on(EngineEvent.Connected,this.handleReconnected).on(EngineEvent.Restarted,this.handleReconnected).on(EngineEvent.Resumed,this.handleReconnected).on(EngineEvent.Restarting,this.handleReconnecting).on(EngineEvent.Resuming,this.handleReconnecting).on(EngineEvent.Disconnected,this.handleDisconnected)}setCameraEnabled(i,t,n){return this.setTrackEnabled(Track.Source.Camera,i,t,n)}setMicrophoneEnabled(i,t,n){return this.setTrackEnabled(Track.Source.Microphone,i,t,n)}setScreenShareEnabled(i,t,n){return this.setTrackEnabled(Track.Source.ScreenShare,i,t,n)}async setTrackEnabled(i,t,n,a){var s,d;livekitLogger.debug("setTrackEnabled",{source:i,enabled:t});let o=this.getTrack(i);if(t)if(o)await o.unmute();else{let f;if(this.pendingPublishing.has(i)){livekitLogger.info("skipping duplicate published source",{source:i});return}this.pendingPublishing.add(i);try{switch(i){case Track.Source.Camera:f=await this.createTracks({video:(s=n)!==null&&s!==void 0?s:!0});break;case Track.Source.Microphone:f=await this.createTracks({audio:(d=n)!==null&&d!==void 0?d:!0});break;case Track.Source.ScreenShare:f=await this.createScreenTracks(_objectSpread2({},n));break;default:throw new TrackInvalidError(i)}const c=[];for(const v of f)livekitLogger.info("publishing track",{localTrack:v}),c.push(this.publishTrack(v,a));[o]=await Promise.all(c)}catch(c){throw c instanceof Error&&!(c instanceof TrackInvalidError)&&this.emit(ParticipantEvent.MediaDevicesError,c),c}finally{this.pendingPublishing.delete(i)}}else if(o&&o.track)if(i===Track.Source.ScreenShare){o=await this.unpublishTrack(o.track);const f=this.getTrack(Track.Source.ScreenShareAudio);f&&f.track&&this.unpublishTrack(f.track)}else await o.mute();return o}async enableCameraAndMicrophone(){if(!(this.pendingPublishing.has(Track.Source.Camera)||this.pendingPublishing.has(Track.Source.Microphone))){this.pendingPublishing.add(Track.Source.Camera),this.pendingPublishing.add(Track.Source.Microphone);try{const i=await this.createTracks({audio:!0,video:!0});await Promise.all(i.map(t=>this.publishTrack(t)))}finally{this.pendingPublishing.delete(Track.Source.Camera),this.pendingPublishing.delete(Track.Source.Microphone)}}}async createTracks(i){var t,n;const a=mergeDefaultOptions(i,(t=this.roomOptions)===null||t===void 0?void 0:t.audioCaptureDefaults,(n=this.roomOptions)===null||n===void 0?void 0:n.videoCaptureDefaults),s=constraintsForOptions(a);let d;try{d=await navigator.mediaDevices.getUserMedia(s)}catch(o){throw o instanceof Error&&(s.audio&&(this.microphoneError=o),s.video&&(this.cameraError=o)),o}return s.audio&&(this.microphoneError=void 0),s.video&&(this.cameraError=void 0),d.getTracks().map(o=>{const f=o.kind==="audio";f?i.audio:i.video;let c;const p=f?s.audio:s.video;typeof p!="boolean"&&(c=p);const v=mediaTrackToLocalTrack(o,c);return v.kind===Track.Kind.Video?v.source=Track.Source.Camera:v.kind===Track.Kind.Audio&&(v.source=Track.Source.Microphone),v.mediaStream=d,v})}async createScreenTracks(i){var t;i===void 0&&(i={}),i.resolution===void 0&&(i.resolution=ScreenSharePresets.h1080fps15.resolution);let n=!0;if(i.resolution&&(isSafari()?n={width:{max:i.resolution.width},height:{max:i.resolution.height},frameRate:i.resolution.frameRate}:n={width:{ideal:i.resolution.width},height:{ideal:i.resolution.height},frameRate:i.resolution.frameRate}),navigator.mediaDevices.getDisplayMedia===void 0)throw new DeviceUnsupportedError("getDisplayMedia not supported");const a=await navigator.mediaDevices.getDisplayMedia({audio:(t=i.audio)!==null&&t!==void 0?t:!1,video:n,controller:i.controller,selfBrowserSurface:i.selfBrowserSurface,surfaceSwitching:i.surfaceSwitching,systemAudio:i.systemAudio}),s=a.getVideoTracks();if(s.length===0)throw new TrackInvalidError("no video track found");const d=new LocalVideoTrack(s[0],void 0,!1);d.source=Track.Source.ScreenShare;const o=[d];if(a.getAudioTracks().length>0){const f=new LocalAudioTrack(a.getAudioTracks()[0],void 0,!1);f.source=Track.Source.ScreenShareAudio,o.push(f)}return o}async publishTrack(i,t){var n,a,s;if(await((n=this.reconnectFuture)===null||n===void 0?void 0:n.promise),i instanceof LocalTrack&&this.pendingPublishPromises.has(i)&&await this.pendingPublishPromises.get(i),i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new LocalAudioTrack(i,void 0,!0);break;case"video":i=new LocalVideoTrack(i,void 0,!0);break;default:throw new TrackInvalidError("unsupported MediaStreamTrack kind ".concat(i.kind))}let d;if(this.tracks.forEach(p=>{p.track&&p.track===i&&(d=p)}),d)return livekitLogger.warn("track has already been published, skipping"),d;const o=(t==null?void 0:t.forceStereo)||"channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2;o&&(t||(t={}),t.dtx===void 0&&livekitLogger.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work."),t.red===void 0&&livekitLogger.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(a=t.dtx)!==null&&a!==void 0||(t.dtx=!1),(s=t.red)!==null&&s!==void 0||(t.red=!1));const f=_objectSpread2(_objectSpread2({},this.roomOptions.publishDefaults),t);f.source&&(i.source=f.source);const c=this.publish(i,f,t,o);this.pendingPublishPromises.set(i,c);try{return await c}catch(p){throw p}finally{this.pendingPublishPromises.delete(i)}}async publish(i,t,n,a){var s,d,o,f;const c=Array.from(this.tracks.values()).find(m=>i instanceof LocalTrack&&m.source===i.source);if(c&&i.source!==Track.Source.Unknown)try{throw Error("publishing a second track with the same source: ".concat(i.source))}catch(m){m instanceof Error&&livekitLogger.warn(m.message,{oldTrack:c,newTrack:i,trace:m.stack})}t.stopMicTrackOnMute&&i instanceof LocalAudioTrack&&(i.stopOnMute=!0),i.source===Track.Source.ScreenShare&&isFireFox()&&(t.simulcast=!1),t.videoCodec==="av1"&&!supportsAV1()&&(t.videoCodec=void 0),i.on(TrackEvent.Muted,this.onTrackMuted),i.on(TrackEvent.Unmuted,this.onTrackUnmuted),i.on(TrackEvent.Ended,this.handleTrackEnded),i.on(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),i.on(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed);const p=AddTrackRequest.fromPartial({cid:i.mediaStreamTrack.id,name:n==null?void 0:n.name,type:Track.kindToProto(i.kind),muted:i.isMuted,source:Track.sourceToProto(i.source),disableDtx:!(!((s=t.dtx)!==null&&s!==void 0)||s),stereo:a,disableRed:!(!((d=t.red)!==null&&d!==void 0)||d)});let v,l;if(i.kind===Track.Kind.Video){let m={width:0,height:0};try{m=await i.waitForDimensions()}catch{livekitLogger.error("could not determine track dimensions")}if(p.width=m.width,p.height=m.height,i instanceof LocalVideoTrack&&((t==null?void 0:t.videoCodec)==="av1"&&(t.scalabilityMode=(o=t.scalabilityMode)!==null&&o!==void 0?o:"L3T3"),t.videoCodec&&t.backupCodec&&t.videoCodec!==t.backupCodec.codec)){const w=_objectSpread2({},t);w.simulcast=!0,l=computeTrackBackupEncodings(i,t.backupCodec.codec,w),p.simulcastCodecs=[{codec:t.videoCodec,cid:i.mediaStreamTrack.id,enableSimulcastLayers:!0},{codec:t.backupCodec.codec,cid:"",enableSimulcastLayers:!0}]}v=computeVideoEncodings(i.source===Track.Source.ScreenShare,m.width,m.height,t),p.layers=videoLayersFromEncodings(p.width,p.height,l??v)}else i.kind===Track.Kind.Audio&&t.audioBitrate&&(v=[{maxBitrate:t.audioBitrate}]);if(!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const u=await this.engine.addTrack(p),h=new LocalTrackPublication(i.kind,u,i);if(h.options=t,i.sid=u.sid,!this.engine.publisher)throw new UnexpectedConnectionState("publisher is closed");return livekitLogger.debug("publishing ".concat(i.kind," with encodings"),{encodings:v,trackInfo:u}),i.sender=await this.engine.createSender(i,t,v),i.codec==="av1"&&v&&(!((f=v[0])===null||f===void 0)&&f.maxBitrate)&&this.engine.publisher.setTrackCodecBitrate(p.cid,i.codec,v[0].maxBitrate/1e3),this.engine.negotiate(),i instanceof LocalVideoTrack?i.startMonitor(this.engine.client):i instanceof LocalAudioTrack&&i.startMonitor(),this.addTrackPublication(h),this.emit(ParticipantEvent.LocalTrackPublished,h),h}get isLocal(){return!0}async publishAdditionalCodecForTrack(i,t,n){var a;let s;if(this.tracks.forEach(v=>{v.track&&v.track===i&&(s=v)}),!s)throw new TrackInvalidError("track is not published");if(!(i instanceof LocalVideoTrack))throw new TrackInvalidError("track is not a video track");const d=_objectSpread2(_objectSpread2({},(a=this.roomOptions)===null||a===void 0?void 0:a.publishDefaults),n),o=computeTrackBackupEncodings(i,t,d);if(!o){livekitLogger.info("backup codec has been disabled, ignoring request to add additional codec for track");return}const f=i.addSimulcastTrack(t,o),c=AddTrackRequest.fromPartial({cid:f.mediaStreamTrack.id,type:Track.kindToProto(i.kind),muted:i.isMuted,source:Track.sourceToProto(i.source),sid:i.sid,simulcastCodecs:[{codec:d.videoCodec,cid:f.mediaStreamTrack.id,enableSimulcastLayers:d.simulcast}]});if(c.layers=videoLayersFromEncodings(c.width,c.height,o),!this.engine||this.engine.isClosed)throw new UnexpectedConnectionState("cannot publish track when not connected");const p=await this.engine.addTrack(c);await this.engine.createSimulcastSender(i,f,d,o),this.engine.negotiate(),livekitLogger.debug("published ".concat(t," for track ").concat(i.sid),{encodings:o,trackInfo:p})}async unpublishTrack(i,t){var n,a;const s=this.getPublicationForTrack(i);if(livekitLogger.debug("unpublishing track",{track:i,method:"unpublishTrack"}),!s||!s.track){livekitLogger.warn("track was not unpublished because no publication was found",{track:i,method:"unpublishTrack"});return}i=s.track,i.off(TrackEvent.Muted,this.onTrackMuted),i.off(TrackEvent.Unmuted,this.onTrackUnmuted),i.off(TrackEvent.Ended,this.handleTrackEnded),i.off(TrackEvent.UpstreamPaused,this.onTrackUpstreamPaused),i.off(TrackEvent.UpstreamResumed,this.onTrackUpstreamResumed),t===void 0&&(t=(a=(n=this.roomOptions)===null||n===void 0?void 0:n.stopLocalTrackOnUnpublish)!==null&&a!==void 0?a:!0),t&&i.stop();let d=!1;const o=i.sender;if(i.sender=void 0,this.engine.publisher&&this.engine.publisher.pc.connectionState!=="closed"&&o)try{if(this.engine.removeTrack(o)&&(d=!0),i instanceof LocalVideoTrack){for(const[,f]of i.simulcastCodecs)f.sender&&(this.engine.removeTrack(f.sender)&&(d=!0),f.sender=void 0);i.simulcastCodecs.clear()}}catch(f){livekitLogger.warn("failed to unpublish track",{error:f,method:"unpublishTrack"})}switch(this.tracks.delete(s.trackSid),s.kind){case Track.Kind.Audio:this.audioTracks.delete(s.trackSid);break;case Track.Kind.Video:this.videoTracks.delete(s.trackSid);break}return this.emit(ParticipantEvent.LocalTrackUnpublished,s),s.setTrack(void 0),d&&await this.engine.negotiate(),s}async unpublishTracks(i){return(await Promise.all(i.map(n=>this.unpublishTrack(n)))).filter(n=>n instanceof LocalTrackPublication)}async republishAllTracks(i){const t=[];this.tracks.forEach(n=>{n.track&&(i&&(n.options=_objectSpread2(_objectSpread2({},n.options),i)),t.push(n))}),await Promise.all(t.map(async n=>{const a=n.track;await this.unpublishTrack(a,!1),await this.publishTrack(a,n.options)}))}async publishData(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=Array.isArray(n)?n:n==null?void 0:n.destination,s=[],d=Array.isArray(n)?void 0:n.topic;a!==void 0&&a.forEach(f=>{f instanceof RemoteParticipant?s.push(f.sid):s.push(f)});const o={kind:t,value:{$case:"user",user:{participantSid:this.sid,payload:i,destinationSids:s,topic:d}}};await this.engine.sendDataPacket(o,t)}setTrackSubscriptionPermissions(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=t,this.allParticipantsAllowedToSubscribe=i,this.engine.client.isConnected&&this.updateTrackSubscriptionPermissions()}updateInfo(i){i.sid===this.sid&&(super.updateInfo(i),i.tracks.forEach(t=>{var n,a;const s=this.tracks.get(t.sid);if(s){const d=s.isMuted||((a=(n=s.track)===null||n===void 0?void 0:n.isUpstreamPaused)!==null&&a!==void 0?a:!1);d!==t.muted&&(livekitLogger.debug("updating server mute state after reconcile",{sid:t.sid,muted:d}),this.engine.client.sendMuteTrack(t.sid,d))}}))}getPublicationForTrack(i){let t;return this.tracks.forEach(n=>{const a=n.track;a&&(i instanceof MediaStreamTrack?(a instanceof LocalAudioTrack||a instanceof LocalVideoTrack)&&a.mediaStreamTrack===i&&(t=n):i===a&&(t=n))}),t}publishedTracksInfo(){const i=[];return this.tracks.forEach(t=>{t.track!==void 0&&i.push({cid:t.track.mediaStreamID,track:t.trackInfo})}),i}dataChannelsInfo(){const i=[],t=(n,a)=>{(n==null?void 0:n.id)!==void 0&&n.id!==null&&i.push({label:n.label,id:n.id,target:a})};return t(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY),SignalTarget.PUBLISHER),t(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE),SignalTarget.PUBLISHER),t(this.engine.dataChannelForKind(DataPacket_Kind.LOSSY,!0),SignalTarget.SUBSCRIBER),t(this.engine.dataChannelForKind(DataPacket_Kind.RELIABLE,!0),SignalTarget.SUBSCRIBER),i}}const passThroughQueueSignals=["syncState","trickle","offer","answer","simulate","leave"];function canPassThroughQueue(e){const i=passThroughQueueSignals.includes(e.$case);return livekitLogger.trace("request allowed to bypass queue:",{canPass:i,req:e}),i}class SignalClient{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.rtt=0,this.isConnected=!1,this.isReconnecting=!1,this.useJSON=i,this.requestQueue=new Queue,this.queuedRequests=[],this.closingLock=new Mutex}async join(i,t,n,a){return this.isConnected=!1,this.options=n,await this.connect(i,t,n,a)}async reconnect(i,t,n,a){if(!this.options){livekitLogger.warn("attempted to reconnect without signal options being set, ignoring");return}return this.isReconnecting=!0,this.clearPingInterval(),await this.connect(i,t,_objectSpread2(_objectSpread2({},this.options),{},{reconnect:!0,sid:n,reconnectReason:a}))}connect(i,t,n,a){this.connectOptions=n,i.startsWith("http")&&(i=i.replace("http","ws")),i=i.replace(/\/$/,""),i+="/rtc";const s=getClientInfo(),d=createConnectionParams(t,s,n);return new Promise(async(o,f)=>{const c=async()=>{await this.close(),f(new ConnectionError("room connection has been cancelled"))};a!=null&&a.aborted&&c(),a==null||a.addEventListener("abort",c),livekitLogger.debug("connecting to ".concat(i+d)),this.ws&&await this.close(),this.ws=new WebSocket(i+d),this.ws.binaryType="arraybuffer",this.ws.onerror=async p=>{if(!this.isConnected){try{const v=await fetch("http".concat(i.substring(2),"/validate").concat(d));if(v.ok)f(new ConnectionError("Internal error",2,v.status));else{const l=await v.text();f(new ConnectionError(l,0,v.status))}}catch{f(new ConnectionError("server was not reachable",1))}return}this.handleWSError(p)},this.ws.onmessage=async p=>{var v,l,u,h;let m;if(typeof p.data=="string"){const w=JSON.parse(p.data);m=SignalResponse.fromJSON(w)}else if(p.data instanceof ArrayBuffer)m=SignalResponse.decode(new Uint8Array(p.data));else{livekitLogger.error("could not decode websocket message: ".concat(typeof p.data));return}if(!this.isConnected){let w=!1;if(((v=m.message)===null||v===void 0?void 0:v.$case)==="join"?(this.isConnected=!0,a==null||a.removeEventListener("abort",c),this.pingTimeoutDuration=m.message.join.pingTimeout,this.pingIntervalDuration=m.message.join.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(livekitLogger.debug("ping config",{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration}),this.startPingInterval()),o(m.message.join)):n.reconnect?(this.isConnected=!0,a==null||a.removeEventListener("abort",c),this.startPingInterval(),((l=m.message)===null||l===void 0?void 0:l.$case)==="reconnect"?o((u=m.message)===null||u===void 0?void 0:u.reconnect):(o(),w=!0)):n.reconnect||f(new ConnectionError("did not receive join response, got ".concat((h=m.message)===null||h===void 0?void 0:h.$case," instead"))),!w)return}this.signalLatency&&await sleep(this.signalLatency),this.handleSignalResponse(m)},this.ws.onclose=p=>{this.isConnected&&(livekitLogger.debug("websocket connection closed: ".concat(p.reason)),this.isConnected=!1,this.onClose&&this.onClose(p.reason),this.ws=void 0)}})}async close(){const i=await this.closingLock.lock();try{if(this.isConnected=!1,this.ws){this.ws.onclose=null,this.ws.onmessage=null,this.ws.onopen=null;const t=new Promise(n=>{this.ws?this.ws.onclose=n:n(!0)});this.ws.close(),await Promise.race([t,sleep(250)])}this.ws=void 0,this.clearPingInterval()}finally{i()}}sendOffer(i){livekitLogger.debug("sending offer",i),this.sendRequest({$case:"offer",offer:toProtoSessionDescription(i)})}sendAnswer(i){livekitLogger.debug("sending answer"),this.sendRequest({$case:"answer",answer:toProtoSessionDescription(i)})}sendIceCandidate(i,t){livekitLogger.trace("sending ice candidate",i),this.sendRequest({$case:"trickle",trickle:{candidateInit:JSON.stringify(i),target:t}})}sendMuteTrack(i,t){this.sendRequest({$case:"mute",mute:{sid:i,muted:t}})}sendAddTrack(i){this.sendRequest({$case:"addTrack",addTrack:AddTrackRequest.fromPartial(i)})}sendUpdateTrackSettings(i){this.sendRequest({$case:"trackSetting",trackSetting:i})}sendUpdateSubscription(i){this.sendRequest({$case:"subscription",subscription:i})}sendSyncState(i){this.sendRequest({$case:"syncState",syncState:i})}sendUpdateVideoLayers(i,t){this.sendRequest({$case:"updateLayers",updateLayers:{trackSid:i,layers:t}})}sendUpdateSubscriptionPermissions(i,t){this.sendRequest({$case:"subscriptionPermission",subscriptionPermission:{allParticipants:i,trackPermissions:t}})}sendSimulateScenario(i){this.sendRequest({$case:"simulate",simulate:i})}sendPing(){this.sendRequest({$case:"ping",ping:Date.now()}),this.sendRequest({$case:"pingReq",pingReq:{timestamp:Date.now(),rtt:this.rtt}})}async sendLeave(){await this.sendRequest({$case:"leave",leave:{canReconnect:!1,reason:DisconnectReason.CLIENT_INITIATED}})}async sendRequest(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!t&&!canPassThroughQueue(i)&&this.isReconnecting){this.queuedRequests.push(async()=>{await this.sendRequest(i,!0)});return}if(t||await this.requestQueue.flush(),this.signalLatency&&await sleep(this.signalLatency),!this.ws||this.ws.readyState!==this.ws.OPEN){livekitLogger.error("cannot send signal request before connected, type: ".concat(i==null?void 0:i.$case));return}const a={message:i};try{this.useJSON?this.ws.send(JSON.stringify(SignalRequest.toJSON(a))):this.ws.send(SignalRequest.encode(a).finish())}catch(s){livekitLogger.error("error sending signal message",{error:s})}}handleSignalResponse(i){var t,n;const a=i.message;if(a==null){livekitLogger.debug("received unsupported message");return}if(a.$case==="answer"){const s=fromProtoSessionDescription(a.answer);this.onAnswer&&this.onAnswer(s)}else if(a.$case==="offer"){const s=fromProtoSessionDescription(a.offer);this.onOffer&&this.onOffer(s)}else if(a.$case==="trickle"){const s=JSON.parse(a.trickle.candidateInit);this.onTrickle&&this.onTrickle(s,a.trickle.target)}else a.$case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((t=a.update.participants)!==null&&t!==void 0?t:[]):a.$case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(a.trackPublished):a.$case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((n=a.speakersChanged.speakers)!==null&&n!==void 0?n:[]):a.$case==="leave"?this.onLeave&&this.onLeave(a.leave):a.$case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(a.mute.sid,a.mute.muted):a.$case==="roomUpdate"?this.onRoomUpdate&&a.roomUpdate.room&&this.onRoomUpdate(a.roomUpdate.room):a.$case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(a.connectionQuality):a.$case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(a.streamStateUpdate):a.$case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(a.subscribedQualityUpdate):a.$case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(a.subscriptionPermissionUpdate):a.$case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(a.refreshToken):a.$case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(a.trackUnpublished):a.$case==="pong"?this.resetPingTimeout():a.$case==="pongResp"?(this.rtt=Date.now()-a.pongResp.lastPingTimestamp,this.resetPingTimeout()):livekitLogger.debug("unsupported message",a)}setReconnected(){for(;this.queuedRequests.length>0;){const i=this.queuedRequests.shift();i&&this.requestQueue.run(i)}this.isReconnecting=!1}handleWSError(i){livekitLogger.error("websocket error",i)}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){livekitLogger.warn("ping timeout duration not set");return}this.pingTimeout=CriticalTimers.setTimeout(()=>{livekitLogger.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString())),this.onClose&&this.onClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&CriticalTimers.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){livekitLogger.warn("ping interval duration not set");return}livekitLogger.debug("start ping interval"),this.pingInterval=CriticalTimers.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){livekitLogger.debug("clearing ping interval"),this.clearPingTimeout(),this.pingInterval&&CriticalTimers.clearInterval(this.pingInterval)}}function fromProtoSessionDescription(e){const i={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":i.type=e.type;break}return i}function toProtoSessionDescription(e){return{sdp:e.sdp,type:e.type}}function createConnectionParams(e,i,t){var n;const a=new URLSearchParams;return a.set("access_token",e),t.reconnect&&(a.set("reconnect","1"),t.sid&&a.set("sid",t.sid)),a.set("auto_subscribe",t.autoSubscribe?"1":"0"),a.set("sdk","js"),a.set("version",i.version),a.set("protocol",i.protocol.toString()),i.deviceModel&&a.set("device_model",i.deviceModel),i.os&&a.set("os",i.os),i.osVersion&&a.set("os_version",i.osVersion),i.browser&&a.set("browser",i.browser),i.browserVersion&&a.set("browser_version",i.browserVersion),t.publishOnly!==void 0&&a.set("publish",t.publishOnly),t.adaptiveStream&&a.set("adaptive_stream","1"),t.reconnectReason&&a.set("reconnect_reason",t.reconnectReason.toString()),!((n=navigator.connection)===null||n===void 0)&&n.type&&a.set("network",navigator.connection.type),"?".concat(a.toString())}const publishDefaults={audioBitrate:AudioPresets.music.maxBitrate,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:ScreenSharePresets.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:"vp8",backupCodec:{codec:"vp8",encoding:VideoPresets.h540.encoding}},audioDefaults={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},videoDefaults={resolution:VideoPresets.h720.resolution},roomOptionDefaults={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new DefaultReconnectPolicy,expWebAudioMix:!1},roomConnectOptionDefaults={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3};var parser$1={},grammarExports={},grammar$2={get exports(){return grammarExports},set exports(e){grammarExports=e}},grammar$1=grammar$2.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var i="candidate:%s %d %s %d %s %d typ %s";return i+=e.raddr!=null?" raddr %s rport %d":"%v%v",i+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(i+=" generation %d"),i+=e["network-id"]!=null?" network-id %d":"%v",i+=e["network-cost"]!=null?" network-cost %d":"%v",i}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var i="ssrc:%d";return e.attribute!=null&&(i+=" %s",e.value!=null&&(i+=":%s")),i}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var i="mediaclk:";return i+=e.id!=null?"id=%s %s":"%v%s",i+=e.mediaClockValue!=null?"=%s":"",i+=e.rateNumerator!=null?" rate=%s":"",i+=e.rateDenominator!=null?"/%s":"",i}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(grammar$1).forEach(function(e){var i=grammar$1[e];i.forEach(function(t){t.reg||(t.reg=/(.*)/),t.format||(t.format="%s")})});(function(e){var i=function(o){return String(Number(o))===o?Number(o):o},t=function(o,f,c,p){if(p&&!c)f[p]=i(o[1]);else for(var v=0;v<c.length;v+=1)o[v+1]!=null&&(f[c[v]]=i(o[v+1]))},n=function(o,f,c){var p=o.name&&o.names;o.push&&!f[o.push]?f[o.push]=[]:p&&!f[o.name]&&(f[o.name]={});var v=o.push?{}:p?f[o.name]:f;t(c.match(o.reg),v,o.names,o.name),o.push&&f[o.push].push(v)},a=grammarExports,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(o){var f={},c=[],p=f;return o.split(/(\r\n|\r|\n)/).filter(s).forEach(function(v){var l=v[0],u=v.slice(2);l==="m"&&(c.push({rtp:[],fmtp:[]}),p=c[c.length-1]);for(var h=0;h<(a[l]||[]).length;h+=1){var m=a[l][h];if(m.reg.test(u))return n(m,p,u)}}),f.media=c,f};var d=function(o,f){var c=f.split(/=(.+)/,2);return c.length===2?o[c[0]]=i(c[1]):c.length===1&&f.length>1&&(o[c[0]]=void 0),o};e.parseParams=function(o){return o.split(/;\s?/).reduce(d,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(o){return o.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(o){for(var f=[],c=o.split(" ").map(i),p=0;p<c.length;p+=3)f.push({component:c[p],ip:c[p+1],port:c[p+2]});return f},e.parseImageAttributes=function(o){return o.split(" ").map(function(f){return f.substring(1,f.length-1).split(",").reduce(d,{})})},e.parseSimulcastStreamList=function(o){return o.split(";").map(function(f){return f.split(",").map(function(c){var p,v=!1;return c[0]!=="~"?p=i(c):(p=i(c.substring(1,c.length)),v=!0),{scid:p,paused:v}})})}})(parser$1);var grammar=grammarExports,formatRegExp=/%[sdv%]/g,format=function(e){var i=1,t=arguments,n=t.length;return e.replace(formatRegExp,function(a){if(i>=n)return a;var s=t[i];switch(i+=1,a){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},makeLine=function(e,i,t){var n=i.format instanceof Function?i.format(i.push?t:t[i.name]):i.format,a=[e+"="+n];if(i.names)for(var s=0;s<i.names.length;s+=1){var d=i.names[s];i.name?a.push(t[i.name][d]):a.push(t[i.names[s]])}else a.push(t[i.name]);return format.apply(null,a)},defaultOuterOrder=["v","o","s","i","u","e","p","c","b","t","r","z","a"],defaultInnerOrder=["i","c","b","a"],writer$1=function(e,i){i=i||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var t=i.outerOrder||defaultOuterOrder,n=i.innerOrder||defaultInnerOrder,a=[];return t.forEach(function(s){grammar[s].forEach(function(d){d.name in e&&e[d.name]!=null?a.push(makeLine(s,d,e)):d.push in e&&e[d.push]!=null&&e[d.push].forEach(function(o){a.push(makeLine(s,d,o))})})}),e.media.forEach(function(s){a.push(makeLine("m",grammar.m[0],s)),n.forEach(function(d){grammar[d].forEach(function(o){o.name in s&&s[o.name]!=null?a.push(makeLine(d,o,s)):o.push in s&&s[o.push]!=null&&s[o.push].forEach(function(f){a.push(makeLine(d,o,f))})})})}),a.join(`\r
`)+`\r
`},parser=parser$1,writer=writer$1,write=writer,parse=parser.parse;const PCEvents={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete"};class PCTransport extends eventsExports{constructor(i){super(),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=r(t=>{this.emit(PCEvents.NegotiationStarted);try{this.createAndSendOffer()}catch(n){if(t)t(n);else throw n}},100),this.pc=new RTCPeerConnection(i)}get isICEConnected(){return this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed"}async addIceCandidate(i){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(i);this.pendingCandidates.push(i)}async setRemoteDescription(i){if(i.type==="offer"){let{stereoMids:t,nackMids:n}=extractStereoAndNackAudioFromOffer(i);this.remoteStereoMids=t,this.remoteNackMids=n}await this.pc.setRemoteDescription(i),this.pendingCandidates.forEach(t=>{this.pc.addIceCandidate(t)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,this.createAndSendOffer()):i.type==="answer"&&this.emit(PCEvents.NegotiationComplete)}async createAndSendOffer(i){var t;if(this.onOffer===void 0)return;if(i!=null&&i.iceRestart&&(livekitLogger.debug("restarting ICE"),this.restartingIce=!0),this.pc.signalingState==="have-local-offer"){const s=this.pc.remoteDescription;if(i!=null&&i.iceRestart&&s)await this.pc.setRemoteDescription(s);else{this.renegotiate=!0;return}}else if(this.pc.signalingState==="closed"){livekitLogger.warn("could not createOffer with closed peer connection");return}livekitLogger.debug("starting to negotiate");const n=await this.pc.createOffer(i),a=parse((t=n.sdp)!==null&&t!==void 0?t:"");a.media.forEach(s=>{s.type==="audio"?ensureAudioNackAndStereo(s,[],[]):s.type==="video"&&this.trackBitrates.some(d=>{if(!s.msid||!s.msid.includes(d.sid))return!1;let o=0;return s.rtp.some(f=>f.codec.toUpperCase()===d.codec.toUpperCase()?(o=f.payload,!0):!1),o>0&&(s.fmtp.some(f=>f.payload===o?(f.config.includes("x-google-max-bitrate")||(f.config+=";x-google-max-bitrate=".concat(d.maxbr)),!0):!1)||s.fmtp.push({payload:o,config:"x-google-max-bitrate=".concat(d.maxbr)})),!0})}),this.trackBitrates=[],await this.setMungedLocalDescription(n,write(a)),this.onOffer(n)}async createAndSetAnswer(){var i;const t=await this.pc.createAnswer(),n=parse((i=t.sdp)!==null&&i!==void 0?i:"");return n.media.forEach(a=>{a.type==="audio"&&ensureAudioNackAndStereo(a,this.remoteStereoMids,this.remoteNackMids)}),await this.setMungedLocalDescription(t,write(n)),t}setTrackCodecBitrate(i,t,n){this.trackBitrates.push({sid:i,codec:t,maxbr:n})}close(){this.pc.onconnectionstatechange=null,this.pc.oniceconnectionstatechange=null,this.pc.close()}async setMungedLocalDescription(i,t){const n=i.sdp;i.sdp=t;try{livekitLogger.debug("setting munged local description"),await this.pc.setLocalDescription(i);return}catch(a){livekitLogger.warn("not able to set ".concat(i.type,", falling back to unmodified sdp"),{error:a}),i.sdp=n}try{await this.pc.setLocalDescription(i)}catch(a){let s="unknown error";throw a instanceof Error?s=a.message:typeof a=="string"&&(s=a),new NegotiationError(s)}}}function ensureAudioNackAndStereo(e,i,t){let n=0;e.rtp.some(a=>a.codec==="opus"?(n=a.payload,!0):!1),n>0&&(e.rtcpFb||(e.rtcpFb=[]),t.includes(e.mid)&&!e.rtcpFb.some(a=>a.payload===n&&a.type==="nack")&&e.rtcpFb.push({payload:n,type:"nack"}),i.includes(e.mid)&&e.fmtp.some(a=>a.payload===n?(a.config.includes("stereo=1")||(a.config+=";stereo=1"),!0):!1))}function extractStereoAndNackAudioFromOffer(e){var i;const t=[],n=[],a=parse((i=e.sdp)!==null&&i!==void 0?i:"");let s=0;return a.media.forEach(d=>{var o;d.type==="audio"&&(d.rtp.some(f=>f.codec==="opus"?(s=f.payload,!0):!1),!((o=d.rtcpFb)===null||o===void 0)&&o.some(f=>f.payload===s&&f.type==="nack")&&n.push(d.mid),d.fmtp.some(f=>f.payload===s?(f.config.includes("sprop-stereo=1")&&t.push(d.mid),!0):!1))}),{stereoMids:t,nackMids:n}}const lossyDataChannel="_lossy",reliableDataChannel="_reliable",minReconnectWait=2*1e3,leaveReconnect="leave-reconnect";var PCState;(function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"})(PCState||(PCState={}));class RTCEngine extends eventsExports.EventEmitter{get isClosed(){return this._isClosed}constructor(i){super(),this.options=i,this.rtcConfig={},this.peerConnectionTimeout=roomConnectOptionDefaults.peerConnectionTimeout,this.subscriberPrimary=!1,this.pcState=PCState.New,this._isClosed=!0,this.pendingTrackResolvers={},this.hasPublished=!1,this.reconnectAttempts=0,this.reconnectStart=0,this.fullReconnectOnNext=!1,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.handleDataChannel=async t=>{let{channel:n}=t;if(n){if(n.label===reliableDataChannel)this.reliableDCSub=n;else if(n.label===lossyDataChannel)this.lossyDCSub=n;else return;livekitLogger.debug("on data channel ".concat(n.id,", ").concat(n.label)),n.onmessage=this.handleDataMessage}},this.handleDataMessage=async t=>{var n,a;let s;if(t.data instanceof ArrayBuffer)s=t.data;else if(t.data instanceof Blob)s=await t.data.arrayBuffer();else{livekitLogger.error("unsupported data type",t.data);return}const d=DataPacket.decode(new Uint8Array(s));((n=d.value)===null||n===void 0?void 0:n.$case)==="speaker"?this.emit(EngineEvent.ActiveSpeakersUpdate,d.value.speaker.speakers):((a=d.value)===null||a===void 0?void 0:a.$case)==="user"&&this.emit(EngineEvent.DataPacketReceived,d.value.user,d.kind)},this.handleDataError=t=>{const a=t.currentTarget.maxRetransmits===0?"lossy":"reliable";if(t instanceof ErrorEvent){const{error:s}=t.error;livekitLogger.error("DataChannel error on ".concat(a,": ").concat(t.message),s)}else livekitLogger.error("Unknown DataChannel Error on ".concat(a),t)},this.handleDisconnect=(t,n)=>{if(this._isClosed)return;livekitLogger.warn("".concat(t," disconnected")),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const a=o=>{livekitLogger.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(o,"ms. giving up")),this.emit(EngineEvent.Disconnected),this.close()},s=Date.now()-this.reconnectStart;let d=this.getNextRetryDelay({elapsedMs:s,retryCount:this.reconnectAttempts});if(d===null){a(s);return}t===leaveReconnect&&(d=0),livekitLogger.debug("reconnecting in ".concat(d,"ms")),this.clearReconnectTimeout(),this.reconnectTimeout=CriticalTimers.setTimeout(()=>this.attemptReconnect(n),d)},this.handleBrowserOnLine=()=>{this.client.isReconnecting&&(this.clearReconnectTimeout(),this.attemptReconnect(ReconnectReason.RR_SIGNAL_DISCONNECTED))},this.client=new SignalClient,this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Mutex}async join(i,t,n,a){this.url=i,this.token=t,this.signalOpts=n;try{this.joinAttempts+=1;const s=await this.client.join(i,t,n,a);return this._isClosed=!1,this.subscriberPrimary=s.subscriberPrimary,this.publisher||this.configure(s),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=s.clientConfiguration,s}catch(s){if(s instanceof ConnectionError&&s.reason===1&&(livekitLogger.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts)),this.joinAttempts<this.maxJoinAttempts))return this.join(i,t,n,a);throw s}}async close(){const i=await this.closingLock.lock();if(this.isClosed){i();return}try{this._isClosed=!0,this.emit(EngineEvent.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),this.publisher&&this.publisher.pc.signalingState!=="closed"&&(this.publisher.pc.getSenders().forEach(t=>{var n,a;try{!((n=this.publisher)===null||n===void 0)&&n.pc.removeTrack&&((a=this.publisher)===null||a===void 0||a.pc.removeTrack(t))}catch(s){livekitLogger.warn("could not removeTrack",{error:s})}}),this.publisher.close(),this.publisher=void 0),this.subscriber&&(this.subscriber.close(),this.subscriber=void 0),await this.client.close()}finally{i()}}addTrack(i){if(this.pendingTrackResolvers[i.cid])throw new TrackInvalidError("a track with the same ID has already been published");return new Promise((t,n)=>{const a=setTimeout(()=>{delete this.pendingTrackResolvers[i.cid],n(new ConnectionError("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[i.cid]={resolve:s=>{clearTimeout(a),t(s)},reject:()=>{clearTimeout(a),n(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(i)})}removeTrack(i){var t;if(i.track&&this.pendingTrackResolvers[i.track.id]){const{reject:n}=this.pendingTrackResolvers[i.track.id];n&&n(),delete this.pendingTrackResolvers[i.track.id]}try{return(t=this.publisher)===null||t===void 0||t.pc.removeTrack(i),!0}catch(n){livekitLogger.warn("failed to remove track",{error:n,method:"removeTrack"})}return!1}updateMuteStatus(i,t){this.client.sendMuteTrack(i,t)}get dataSubscriberReadyState(){var i;return(i=this.reliableDCSub)===null||i===void 0?void 0:i.readyState}async getConnectedServerAddress(){if(this.primaryPC!==void 0)return getConnectedAddress(this.primaryPC)}configure(i){var t;if(this.publisher||this.subscriber)return;this.participantSid=(t=i.participant)===null||t===void 0?void 0:t.sid;const n=this.makeRTCConfiguration(i);this.publisher=new PCTransport(n),this.subscriber=new PCTransport(n),this.emit(EngineEvent.TransportsCreated,this.publisher,this.subscriber),this.publisher.pc.onicecandidate=o=>{o.candidate&&(livekitLogger.trace("adding ICE candidate for peer",o.candidate),this.client.sendIceCandidate(o.candidate,SignalTarget.PUBLISHER))},this.subscriber.pc.onicecandidate=o=>{o.candidate&&this.client.sendIceCandidate(o.candidate,SignalTarget.SUBSCRIBER)},this.publisher.onOffer=o=>{this.client.sendOffer(o)};let a=this.publisher.pc,s=this.subscriber.pc,d=i.subscriberPrimary;d&&(a=this.subscriber.pc,s=this.publisher.pc,this.subscriber.pc.ondatachannel=this.handleDataChannel),this.primaryPC=a,a.onconnectionstatechange=async()=>{if(livekitLogger.debug("primary PC state changed ".concat(a.connectionState)),a.connectionState==="connected"){const o=this.pcState===PCState.New;this.pcState=PCState.Connected,o&&this.emit(EngineEvent.Connected,i)}else a.connectionState==="failed"&&this.pcState===PCState.Connected&&(this.pcState=PCState.Disconnected,this.handleDisconnect("primary peerconnection",d?ReconnectReason.RR_SUBSCRIBER_FAILED:ReconnectReason.RR_PUBLISHER_FAILED))},s.onconnectionstatechange=async()=>{livekitLogger.debug("secondary PC state changed ".concat(s.connectionState)),s.connectionState==="failed"&&this.handleDisconnect("secondary peerconnection",d?ReconnectReason.RR_PUBLISHER_FAILED:ReconnectReason.RR_SUBSCRIBER_FAILED)},this.subscriber.pc.ontrack=o=>{this.emit(EngineEvent.MediaTrackAdded,o.track,o.streams[0],o.receiver)},this.createDataChannels(),this.client.onAnswer=async o=>{this.publisher&&(livekitLogger.debug("received server answer",{RTCSdpType:o.type,signalingState:this.publisher.pc.signalingState}),await this.publisher.setRemoteDescription(o))},this.client.onTrickle=(o,f)=>{!this.publisher||!this.subscriber||(livekitLogger.trace("got ICE candidate from peer",{candidate:o,target:f}),f===SignalTarget.PUBLISHER?this.publisher.addIceCandidate(o):this.subscriber.addIceCandidate(o))},this.client.onOffer=async o=>{if(!this.subscriber)return;livekitLogger.debug("received server offer",{RTCSdpType:o.type,signalingState:this.subscriber.pc.signalingState}),await this.subscriber.setRemoteDescription(o);const f=await this.subscriber.createAndSetAnswer();this.client.sendAnswer(f)},this.client.onLocalTrackPublished=o=>{livekitLogger.debug("received trackPublishedResponse",o);const{resolve:f}=this.pendingTrackResolvers[o.cid];if(!f){livekitLogger.error("missing track resolver for ".concat(o.cid));return}delete this.pendingTrackResolvers[o.cid],f(o.track)},this.client.onTokenRefresh=o=>{this.token=o},this.client.onClose=()=>{this.handleDisconnect("signal",ReconnectReason.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=o=>{o!=null&&o.canReconnect?(this.fullReconnectOnNext=!0,this.primaryPC=void 0,this.handleDisconnect(leaveReconnect)):(this.emit(EngineEvent.Disconnected,o==null?void 0:o.reason),this.close()),livekitLogger.trace("leave request",{leave:o})}}makeRTCConfiguration(i){const t=_objectSpread2({},this.rtcConfig);if(i.iceServers&&!t.iceServers){const n=[];i.iceServers.forEach(a=>{const s={urls:a.urls};a.username&&(s.username=a.username),a.credential&&(s.credential=a.credential),n.push(s)}),t.iceServers=n}return i.clientConfiguration&&i.clientConfiguration.forceRelay===ClientConfigSetting.ENABLED&&(t.iceTransportPolicy="relay"),t.sdpSemantics="unified-plan",t.continualGatheringPolicy="gather_continually",t}createDataChannels(){this.publisher&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.publisher.pc.createDataChannel(lossyDataChannel,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.publisher.pc.createDataChannel(reliableDataChannel,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError)}setPreferredCodec(i,t,n){if(!("getCapabilities"in RTCRtpSender))return;const a=RTCRtpSender.getCapabilities(t);if(!a)return;livekitLogger.debug("get capabilities",a);const s=[],d=[],o=[];a.codecs.forEach(f=>{const c=f.mimeType.toLowerCase();if(c==="audio/opus"){s.push(f);return}if(!(c==="video/".concat(n))){o.push(f);return}if(n==="h264"){f.sdpFmtpLine&&f.sdpFmtpLine.includes("profile-level-id=42e01f")?s.push(f):d.push(f);return}s.push(f)}),supportsSetCodecPreferences(i)&&i.setCodecPreferences(s.concat(d,o))}async createSender(i,t,n){if(supportsTransceiver())return this.createTransceiverRTCRtpSender(i,t,n);if(supportsAddTrack())return livekitLogger.debug("using add-track fallback"),this.createRTCRtpSender(i.mediaStreamTrack);throw new UnexpectedConnectionState("Required webRTC APIs not supported on this device")}async createSimulcastSender(i,t,n,a){if(supportsTransceiver())return this.createSimulcastTransceiverSender(i,t,n,a);if(supportsAddTrack())return livekitLogger.debug("using add-track fallback"),this.createRTCRtpSender(i.mediaStreamTrack);throw new UnexpectedConnectionState("Cannot stream on this device")}async createTransceiverRTCRtpSender(i,t,n){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");const a={direction:"sendonly"};n&&(a.sendEncodings=n);const s=await this.publisher.pc.addTransceiver(i.mediaStreamTrack,a);return i.kind===Track.Kind.Video&&t.videoCodec&&(this.setPreferredCodec(s,i.kind,t.videoCodec),i.codec=t.videoCodec),s.sender}async createSimulcastTransceiverSender(i,t,n,a){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");const s={direction:"sendonly"};a&&(s.sendEncodings=a);const d=await this.publisher.pc.addTransceiver(t.mediaStreamTrack,s);if(n.videoCodec)return this.setPreferredCodec(d,i.kind,n.videoCodec),i.setSimulcastTrackSender(n.videoCodec,d.sender),d.sender}async createRTCRtpSender(i){if(!this.publisher)throw new UnexpectedConnectionState("publisher is closed");return this.publisher.pc.addTrack(i)}async attemptReconnect(i){var t,n,a;if(!this._isClosed&&!this.attemptingReconnect){(((t=this.clientConfiguration)===null||t===void 0?void 0:t.resumeConnection)===ClientConfigSetting.DISABLED||((a=(n=this.primaryPC)===null||n===void 0?void 0:n.signalingState)!==null&&a!==void 0?a:"closed")==="closed")&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?await this.restartConnection():await this.resumeConnection(i),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let d=!0;s instanceof UnexpectedConnectionState?(livekitLogger.debug("received unrecoverable error",{error:s}),d=!1):s instanceof SignalReconnectError||(this.fullReconnectOnNext=!0),d?this.handleDisconnect("reconnect",ReconnectReason.RR_UNKOWN):(livekitLogger.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up")),this.emit(EngineEvent.Disconnected),this.close())}finally{this.attemptingReconnect=!1}}}getNextRetryDelay(i){try{return this.reconnectPolicy.nextRetryDelayInMs(i)}catch(t){livekitLogger.warn("encountered error in reconnect policy",{error:t})}return null}async restartConnection(){var i,t;if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");livekitLogger.info("reconnecting, attempt: ".concat(this.reconnectAttempts)),this.emit(EngineEvent.Restarting),this.client.isConnected&&await this.client.sendLeave(),await this.client.close(),this.primaryPC=void 0,(i=this.publisher)===null||i===void 0||i.close(),this.publisher=void 0,(t=this.subscriber)===null||t===void 0||t.close(),this.subscriber=void 0;let n;try{if(!this.signalOpts)throw livekitLogger.warn("attempted connection restart, without signal options present"),new SignalReconnectError;n=await this.join(this.url,this.token,this.signalOpts)}catch{throw new SignalReconnectError}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");await this.waitForPCConnected(),this.client.setReconnected(),this.emit(EngineEvent.Restarted,n)}async resumeConnection(i){var t;if(!this.url||!this.token)throw new UnexpectedConnectionState("could not reconnect, url or token not saved");if(!this.publisher||!this.subscriber)throw new UnexpectedConnectionState("publisher and subscriber connections unset");livekitLogger.info("resuming signal connection, attempt ".concat(this.reconnectAttempts)),this.emit(EngineEvent.Resuming);try{const n=await this.client.reconnect(this.url,this.token,this.participantSid,i);if(n){const a=this.makeRTCConfiguration(n);this.publisher.pc.setConfiguration(a),this.subscriber.pc.setConfiguration(a)}}catch(n){let a="";throw n instanceof Error&&(a=n.message),new SignalReconnectError(a)}if(this.emit(EngineEvent.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");this.subscriber.restartingIce=!0,this.hasPublished&&await this.publisher.createAndSendOffer({iceRestart:!0}),await this.waitForPCConnected(),this.client.setReconnected(),((t=this.reliableDC)===null||t===void 0?void 0:t.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(EngineEvent.Resumed)}async waitForPCConnected(){var i;const t=Date.now();let n=t;for(this.pcState=PCState.Reconnecting,livekitLogger.debug("waiting for peer connection to reconnect");n-t<this.peerConnectionTimeout&&this.primaryPC!==void 0;){if(n-t>minReconnectWait&&((i=this.primaryPC)===null||i===void 0?void 0:i.connectionState)==="connected"&&(this.pcState=PCState.Connected),this.pcState===PCState.Connected)return;await sleep(100),n=Date.now()}throw new ConnectionError("could not establish PC connection")}async sendDataPacket(i,t){const n=DataPacket.encode(i).finish();await this.ensurePublisherConnected(t),t===DataPacket_Kind.LOSSY&&this.lossyDC?this.lossyDC.send(n):t===DataPacket_Kind.RELIABLE&&this.reliableDC&&this.reliableDC.send(n)}async ensureDataTransportConnected(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var n,a,s;const d=t?this.subscriber:this.publisher,o=t?"Subscriber":"Publisher";if(!d)throw new ConnectionError("".concat(o," connection not set"));!t&&!(!((n=this.publisher)===null||n===void 0)&&n.isICEConnected)&&((a=this.publisher)===null||a===void 0?void 0:a.pc.iceConnectionState)!=="checking"&&this.negotiate();const f=this.dataChannelForKind(i,t);if((f==null?void 0:f.readyState)==="open")return;const c=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<c;){if(d.isICEConnected&&((s=this.dataChannelForKind(i,t))===null||s===void 0?void 0:s.readyState)==="open")return;await sleep(50)}throw new ConnectionError("could not establish ".concat(o," connection, state: ").concat(d.pc.iceConnectionState))}async ensurePublisherConnected(i){await this.ensureDataTransportConnected(i,!1)}negotiate(){return new Promise((i,t)=>{if(!this.publisher){t(new NegotiationError("publisher is not defined"));return}this.hasPublished=!0;const n=()=>{livekitLogger.debug("engine disconnected while negotiation was ongoing"),s(),i()};this.on(EngineEvent.Closing,n);const a=setTimeout(()=>{t("negotiation timed out"),this.handleDisconnect("negotiation",ReconnectReason.RR_SIGNAL_DISCONNECTED)},this.peerConnectionTimeout),s=()=>{clearTimeout(a),this.off(EngineEvent.Closing,n)};this.publisher.once(PCEvents.NegotiationStarted,()=>{var d;(d=this.publisher)===null||d===void 0||d.once(PCEvents.NegotiationComplete,()=>{s(),i()})}),this.publisher.negotiate(d=>{s(),t(d),d instanceof NegotiationError&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",ReconnectReason.RR_UNKOWN)})})}dataChannelForKind(i,t){if(t){if(i===DataPacket_Kind.LOSSY)return this.lossyDCSub;if(i===DataPacket_Kind.RELIABLE)return this.reliableDCSub}else{if(i===DataPacket_Kind.LOSSY)return this.lossyDC;if(i===DataPacket_Kind.RELIABLE)return this.reliableDC}}failNext(){this.shouldFailNext=!0}clearReconnectTimeout(){this.reconnectTimeout&&CriticalTimers.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){isWeb()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){isWeb()&&window.removeEventListener("online",this.handleBrowserOnLine)}}async function getConnectedAddress(e){var i;let t="";const n=new Map,a=new Map;if((await e.getStats()).forEach(o=>{switch(o.type){case"transport":t=o.selectedCandidatePairId;break;case"candidate-pair":t===""&&o.selected&&(t=o.id),n.set(o.id,o);break;case"remote-candidate":a.set(o.id,"".concat(o.address,":").concat(o.port));break}}),t==="")return;const d=(i=n.get(t))===null||i===void 0?void 0:i.remoteCandidateId;if(d!==void 0)return a.get(d)}class SignalReconnectError extends Error{}var ConnectionState;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting"})(ConnectionState||(ConnectionState={}));class Room extends eventsExports.EventEmitter{constructor(i){var t;super(),t=this,this.state=ConnectionState.Disconnected,this.activeSpeakers=[],this.sid="",this.name="",this.metadata=void 0,this._isRecording=!1,this.audioEnabled=!0,this.connect=async(n,a,s)=>{const d=await this.disconnectLock.lock();if(this.state===ConnectionState.Connected)return livekitLogger.info("already connected to room ".concat(this.name)),d(),Promise.resolve();if(this.connectFuture)return d(),this.connectFuture.promise;this.setAndEmitConnectionState(ConnectionState.Connecting);const o=async(f,c)=>{var p,v;(!this.abortController||this.abortController.signal.aborted)&&(this.abortController=new AbortController),d(),this.state===ConnectionState.Reconnecting?(livekitLogger.info("Reconnection attempt replaced by new connection attempt"),this.recreateEngine()):this.maybeCreateEngine(),this.acquireAudioContext(),this.connOptions=_objectSpread2(_objectSpread2({},roomConnectOptionDefaults),s),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const h=await this.engine.join(n,a,{autoSubscribe:this.connOptions.autoSubscribe,publishOnly:this.connOptions.publishOnly,adaptiveStream:typeof this.options.adaptiveStream=="object"?!0:this.options.adaptiveStream,maxRetries:this.connOptions.maxRetries},this.abortController.signal);let m=h.serverInfo;if(m||(m={version:h.serverVersion,region:h.serverRegion}),livekitLogger.debug("connected to Livekit Server ".concat(Object.entries(m).map(k=>{let[C,O]=k;return"".concat(C,": ").concat(O)}).join(", "))),!h.serverVersion)throw new UnsupportedServer("unknown server version");h.serverVersion==="0.15.1"&&this.options.dynacast&&(livekitLogger.debug("disabling dynacast due to server version"),this.options.dynacast=!1);const w=h.participant;this.localParticipant.sid=w.sid,this.localParticipant.identity=w.identity,this.localParticipant.updateInfo(w),this.setupLocalParticipantEvents(),h.otherParticipants.forEach(k=>{k.sid!==this.localParticipant.sid&&k.identity!==this.localParticipant.identity?this.getOrCreateParticipant(k.sid,k):livekitLogger.warn("received info to create local participant as remote participant",{info:k,localParticipant:this.localParticipant})}),this.name=h.room.name,this.sid=h.room.sid,this.metadata=h.room.metadata,this._isRecording!==h.room.activeRecording&&(this._isRecording=h.room.activeRecording,this.emit(RoomEvent.RecordingStatusChanged,h.room.activeRecording)),this.emit(RoomEvent.SignalConnected)}catch(h){this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish);const m=new ConnectionError("could not establish signal connection");h instanceof Error&&(m.message="".concat(m.message,": ").concat(h.message)),h instanceof ConnectionError&&(m.reason=h.reason,m.status=h.status),livekitLogger.debug("error trying to establish signal connection",{error:h}),c(m);return}const l=CriticalTimers.setTimeout(()=>{this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),c(new ConnectionError("could not connect PeerConnection after timeout"))},this.connOptions.peerConnectionTimeout),u=()=>{livekitLogger.warn("closing engine"),CriticalTimers.clearTimeout(l),this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),c(new ConnectionError("room connection has been cancelled"))};!((p=this.abortController)===null||p===void 0)&&p.signal.aborted&&u(),(v=this.abortController)===null||v===void 0||v.signal.addEventListener("abort",u),this.engine.once(EngineEvent.Connected,()=>{var h,m;CriticalTimers.clearTimeout(l),(h=this.abortController)===null||h===void 0||h.signal.removeEventListener("abort",u),isWeb()&&(window.addEventListener("beforeunload",this.onBeforeUnload),(m=navigator.mediaDevices)===null||m===void 0||m.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Connected),f()})};return this.connectFuture=new Future(o,()=>{this.clearConnectionFutures()}),this.connectFuture.promise},this.disconnect=async function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;var a,s,d,o;const f=await t.disconnectLock.lock();try{if(t.state===ConnectionState.Disconnected){livekitLogger.debug("already disconnected");return}livekitLogger.info("disconnect from room",{identity:t.localParticipant.identity}),(t.state===ConnectionState.Connecting||t.state===ConnectionState.Reconnecting)&&(livekitLogger.warn("abort connection attempt"),(a=t.abortController)===null||a===void 0||a.abort(),(d=(s=t.connectFuture)===null||s===void 0?void 0:s.reject)===null||d===void 0||d.call(s,new ConnectionError("Client initiated disconnect")),t.connectFuture=void 0),!((o=t.engine)===null||o===void 0)&&o.client.isConnected&&await t.engine.client.sendLeave(),t.engine&&await t.engine.close(),t.handleDisconnect(n,DisconnectReason.CLIENT_INITIATED),t.engine=void 0}finally{f()}},this.onBeforeUnload=async()=>{await this.disconnect()},this.handleRestarting=()=>{for(const n of this.participants.values())this.handleParticipantDisconnected(n.sid,n);this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)},this.handleRestarted=async n=>{livekitLogger.debug("reconnected to server",{region:n.serverRegion});try{n.participant&&(this.localParticipant.sid=n.participant.sid,this.handleParticipantUpdates([n.participant])),this.handleParticipantUpdates(n.otherParticipants);const a=[];this.localParticipant.tracks.forEach(s=>{s.track&&a.push(s)}),await Promise.all(a.map(async s=>{const d=s.track;this.localParticipant.unpublishTrack(d,!1),d.isMuted||((d instanceof LocalAudioTrack||d instanceof LocalVideoTrack)&&!d.isUserProvided&&(livekitLogger.debug("restarting existing track",{track:s.trackSid}),await d.restartTrack()),livekitLogger.debug("publishing new track",{track:s.trackSid}),await this.localParticipant.publishTrack(d,s.options))}))}catch(a){livekitLogger.error("error trying to re-publish tracks after reconnection",{error:a})}finally{this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected)}},this.handleParticipantUpdates=n=>{n.forEach(a=>{if(a.identity===this.localParticipant.identity){this.localParticipant.updateInfo(a);return}const s=this.identityToSid.get(a.identity);s&&s!==a.sid&&this.handleParticipantDisconnected(s,this.participants.get(s));let d=this.participants.get(a.sid);const o=!d;a.state===ParticipantInfo_State.DISCONNECTED?this.handleParticipantDisconnected(a.sid,d):(d=this.getOrCreateParticipant(a.sid,a),o||d.updateInfo(a))})},this.handleActiveSpeakersUpdate=n=>{const a=[],s={};n.forEach(d=>{if(s[d.sid]=!0,d.sid===this.localParticipant.sid)this.localParticipant.audioLevel=d.level,this.localParticipant.setIsSpeaking(!0),a.push(this.localParticipant);else{const o=this.participants.get(d.sid);o&&(o.audioLevel=d.level,o.setIsSpeaking(!0),a.push(o))}}),s[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(d=>{s[d.sid]||(d.audioLevel=0,d.setIsSpeaking(!1))}),this.activeSpeakers=a,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,a)},this.handleSpeakersChanged=n=>{const a=new Map;this.activeSpeakers.forEach(d=>{a.set(d.sid,d)}),n.forEach(d=>{let o=this.participants.get(d.sid);d.sid===this.localParticipant.sid&&(o=this.localParticipant),o&&(o.audioLevel=d.level,o.setIsSpeaking(d.active),d.active?a.set(d.sid,o):a.delete(d.sid))});const s=Array.from(a.values());s.sort((d,o)=>o.audioLevel-d.audioLevel),this.activeSpeakers=s,this.emitWhenConnected(RoomEvent.ActiveSpeakersChanged,s)},this.handleStreamStateUpdate=n=>{n.streamStates.forEach(a=>{const s=this.participants.get(a.participantSid);if(!s)return;const d=s.getTrackPublication(a.trackSid);!d||!d.track||(d.track.streamState=Track.streamStateFromProto(a.state),s.emit(ParticipantEvent.TrackStreamStateChanged,d,d.track.streamState),this.emitWhenConnected(RoomEvent.TrackStreamStateChanged,d,d.track.streamState,s))})},this.handleSubscriptionPermissionUpdate=n=>{const a=this.participants.get(n.participantSid);if(!a)return;const s=a.getTrackPublication(n.trackSid);s&&s.setAllowed(n.allowed)},this.handleDataPacket=(n,a)=>{const s=this.participants.get(n.participantSid);this.emit(RoomEvent.DataReceived,n.payload,s,a,n.topic),s==null||s.emit(ParticipantEvent.DataReceived,n.payload,a)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(RoomEvent.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=n=>{livekitLogger.warn("could not playback audio",n),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(RoomEvent.AudioPlaybackStatusChanged,!1))},this.handleDeviceChange=async()=>{this.emit(RoomEvent.MediaDevicesChanged)},this.handleRoomUpdate=n=>{this._isRecording!==n.activeRecording&&(this._isRecording=n.activeRecording,this.emit(RoomEvent.RecordingStatusChanged,n.activeRecording)),this.metadata!==n.metadata&&(this.metadata=n.metadata,this.emitWhenConnected(RoomEvent.RoomMetadataChanged,n.metadata))},this.handleConnectionQualityUpdate=n=>{n.updates.forEach(a=>{if(a.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(a.quality);return}const s=this.participants.get(a.participantSid);s&&s.setConnectionQuality(a.quality)})},this.onLocalParticipantMetadataChanged=n=>{this.emit(RoomEvent.ParticipantMetadataChanged,n,this.localParticipant)},this.onLocalTrackMuted=n=>{this.emit(RoomEvent.TrackMuted,n,this.localParticipant)},this.onLocalTrackUnmuted=n=>{this.emit(RoomEvent.TrackUnmuted,n,this.localParticipant)},this.onLocalTrackPublished=n=>{this.emit(RoomEvent.LocalTrackPublished,n,this.localParticipant)},this.onLocalTrackUnpublished=n=>{this.emit(RoomEvent.LocalTrackUnpublished,n,this.localParticipant)},this.onLocalConnectionQualityChanged=n=>{this.emit(RoomEvent.ConnectionQualityChanged,n,this.localParticipant)},this.onMediaDevicesError=n=>{this.emit(RoomEvent.MediaDevicesError,n)},this.onLocalParticipantPermissionsChanged=n=>{this.emit(RoomEvent.ParticipantPermissionsChanged,n,this.localParticipant)},this.setMaxListeners(100),this.participants=new Map,this.identityToSid=new Map,this.options=_objectSpread2(_objectSpread2({},roomOptionDefaults),i),this.options.audioCaptureDefaults=_objectSpread2(_objectSpread2({},audioDefaults),i==null?void 0:i.audioCaptureDefaults),this.options.videoCaptureDefaults=_objectSpread2(_objectSpread2({},videoDefaults),i==null?void 0:i.videoCaptureDefaults),this.options.publishDefaults=_objectSpread2(_objectSpread2({},publishDefaults),i==null?void 0:i.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Mutex,this.localParticipant=new LocalParticipant("","",this.engine,this.options)}maybeCreateEngine(){this.engine||(this.engine=new RTCEngine(this.options),this.engine.client.onParticipantUpdate=this.handleParticipantUpdates,this.engine.client.onRoomUpdate=this.handleRoomUpdate,this.engine.client.onSpeakersChanged=this.handleSpeakersChanged,this.engine.client.onStreamStateUpdate=this.handleStreamStateUpdate,this.engine.client.onSubscriptionPermissionUpdate=this.handleSubscriptionPermissionUpdate,this.engine.client.onConnectionQuality=this.handleConnectionQualityUpdate,this.engine.on(EngineEvent.MediaTrackAdded,(i,t,n)=>{this.onTrackAdded(i,t,n)}).on(EngineEvent.Disconnected,i=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,i)}).on(EngineEvent.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(EngineEvent.DataPacketReceived,this.handleDataPacket).on(EngineEvent.Resuming,()=>{this.setAndEmitConnectionState(ConnectionState.Reconnecting)&&this.emit(RoomEvent.Reconnecting)}).on(EngineEvent.Resumed,()=>{this.setAndEmitConnectionState(ConnectionState.Connected),this.emit(RoomEvent.Reconnected),this.updateSubscriptions()}).on(EngineEvent.SignalResumed,()=>{this.state===ConnectionState.Reconnecting&&this.sendSyncState()}).on(EngineEvent.Restarting,this.handleRestarting).on(EngineEvent.Restarted,this.handleRestarted),this.localParticipant&&this.localParticipant.setupEngine(this.engine))}static getLocalDevices(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return DeviceManager.getInstance().getDevices(i,t)}async prepareConnection(i){await fetch("http".concat(i.substring(2)),{method:"HEAD"})}getParticipantByIdentity(i){if(this.localParticipant.identity===i)return this.localParticipant;const t=this.identityToSid.get(i);if(t)return this.participants.get(t)}clearConnectionFutures(){this.connectFuture=void 0}get isRecording(){return this._isRecording}async simulateScenario(i){let t=()=>{},n;switch(i){case"signal-reconnect":await this.engine.client.close(),this.engine.client.onClose&&this.engine.client.onClose("simulate disconnect");break;case"speaker":n=SimulateScenario.fromPartial({scenario:{$case:"speakerUpdate",speakerUpdate:3}});break;case"node-failure":n=SimulateScenario.fromPartial({scenario:{$case:"nodeFailure",nodeFailure:!0}});break;case"server-leave":n=SimulateScenario.fromPartial({scenario:{$case:"serverLeave",serverLeave:!0}});break;case"migration":n=SimulateScenario.fromPartial({scenario:{$case:"migration",migration:!0}});break;case"resume-reconnect":this.engine.failNext(),await this.engine.client.close(),this.engine.client.onClose&&this.engine.client.onClose("simulate resume-reconnect");break;case"force-tcp":case"force-tls":n=SimulateScenario.fromPartial({scenario:{$case:"switchCandidateProtocol",switchCandidateProtocol:i==="force-tls"?2:1}}),t=async()=>{const a=this.engine.client.onLeave;a&&a({reason:DisconnectReason.CLIENT_INITIATED,canReconnect:!0})};break}n&&(this.engine.client.sendSimulateScenario(n),t())}async startAudio(){await this.acquireAudioContext();const i=[];this.participants.forEach(t=>{t.audioTracks.forEach(n=>{n.track&&n.track.attachedElements.forEach(a=>{i.push(a)})})});try{await Promise.all(i.map(t=>(t.muted=!1,t.play()))),this.handleAudioPlaybackStarted()}catch(t){throw this.handleAudioPlaybackFailed(t),t}}get canPlaybackAudio(){return this.audioEnabled}getActiveAudioOutputDevice(){var i,t;return(t=(i=this.options.audioOutput)===null||i===void 0?void 0:i.deviceId)!==null&&t!==void 0?t:""}async switchActiveDevice(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var a,s;const d=n?{exact:t}:t;if(i==="audioinput"){const o=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=d;const f=Array.from(this.localParticipant.audioTracks.values()).filter(c=>c.source===Track.Source.Microphone);try{await Promise.all(f.map(c=>{var p;return(p=c.audioTrack)===null||p===void 0?void 0:p.setDeviceId(d)}))}catch(c){throw this.options.audioCaptureDefaults.deviceId=o,c}}else if(i==="videoinput"){const o=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=d;const f=Array.from(this.localParticipant.videoTracks.values()).filter(c=>c.source===Track.Source.Camera);try{await Promise.all(f.map(c=>{var p;return(p=c.videoTrack)===null||p===void 0?void 0:p.setDeviceId(d)}))}catch(c){throw this.options.videoCaptureDefaults.deviceId=o,c}}else if(i==="audiooutput"){if(!supportsSetSinkId())throw new Error("cannot switch audio output, setSinkId not supported");(a=(s=this.options).audioOutput)!==null&&a!==void 0||(s.audioOutput={});const o=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=t;try{await Promise.all(Array.from(this.participants.values()).map(f=>f.setAudioOutput({deviceId:t})))}catch(f){throw this.options.audioOutput.deviceId=o,f}}}setupLocalParticipantEvents(){this.localParticipant.on(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).on(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).on(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).on(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).on(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var i;(i=this.engine)===null||i===void 0||i.close(),this.engine=void 0,this.participants.clear(),this.maybeCreateEngine()}onTrackAdded(i,t,n){if(this.state===ConnectionState.Connecting||this.state===ConnectionState.Reconnecting){const c=()=>{this.onTrackAdded(i,t,n),p()},p=()=>{this.off(RoomEvent.Reconnected,c),this.off(RoomEvent.Connected,c),this.off(RoomEvent.Disconnected,p)};this.once(RoomEvent.Reconnected,c),this.once(RoomEvent.Connected,c),this.once(RoomEvent.Disconnected,p);return}if(this.state===ConnectionState.Disconnected){livekitLogger.warn("skipping incoming track after Room disconnected");return}const a=unpackStreamId(t.id),s=a[0];let d=a[1];if((!d||d==="")&&(d=i.id),s===this.localParticipant.sid){livekitLogger.warn("tried to create RemoteParticipant for local participant");return}const o=this.getOrCreateParticipant(s);let f;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?f=this.options.adaptiveStream:f={}),o.addSubscribedMediaTrack(i,d,t,n,f)}handleDisconnect(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1?arguments[1]:void 0;var n;this.state!==ConnectionState.Disconnected&&(this.participants.forEach(a=>{a.tracks.forEach(s=>{a.unpublishTrack(s.trackSid)})}),this.localParticipant.tracks.forEach(a=>{var s,d;a.track&&this.localParticipant.unpublishTrack(a.track,i),i&&((s=a.track)===null||s===void 0||s.detach(),(d=a.track)===null||d===void 0||d.stop())}),this.localParticipant.off(ParticipantEvent.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ParticipantEvent.TrackMuted,this.onLocalTrackMuted).off(ParticipantEvent.TrackUnmuted,this.onLocalTrackUnmuted).off(ParticipantEvent.LocalTrackPublished,this.onLocalTrackPublished).off(ParticipantEvent.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ParticipantEvent.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ParticipantEvent.MediaDevicesError,this.onMediaDevicesError).off(ParticipantEvent.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.expWebAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),isWeb()&&(window.removeEventListener("beforeunload",this.onBeforeUnload),(n=navigator.mediaDevices)===null||n===void 0||n.removeEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ConnectionState.Disconnected),this.emit(RoomEvent.Disconnected,t))}handleParticipantDisconnected(i,t){this.participants.delete(i),t&&(this.identityToSid.delete(t.identity),t.tracks.forEach(n=>{t.unpublishTrack(n.trackSid,!0)}),this.emit(RoomEvent.ParticipantDisconnected,t))}async acquireAudioContext(){var i,t;typeof this.options.expWebAudioMix!="boolean"&&this.options.expWebAudioMix.audioContext?(this.audioContext=this.options.expWebAudioMix.audioContext,await this.audioContext.resume()):this.audioContext=(i=getNewAudioContext())!==null&&i!==void 0?i:void 0,this.options.expWebAudioMix&&this.participants.forEach(a=>a.setAudioContext(this.audioContext));const n=((t=this.audioContext)===null||t===void 0?void 0:t.state)==="running";n!==this.canPlaybackAudio&&(this.audioEnabled=n,this.emit(RoomEvent.AudioPlaybackStatusChanged,n))}createParticipant(i,t){let n;return t?n=RemoteParticipant.fromParticipantInfo(this.engine.client,t):n=new RemoteParticipant(this.engine.client,i,"",void 0,void 0),this.options.expWebAudioMix&&n.setAudioContext(this.audioContext),n}getOrCreateParticipant(i,t){if(this.participants.has(i))return this.participants.get(i);const n=this.createParticipant(i,t);return this.participants.set(i,n),t&&(this.identityToSid.set(t.identity,t.sid),this.emitWhenConnected(RoomEvent.ParticipantConnected,n)),n.on(ParticipantEvent.TrackPublished,a=>{this.emitWhenConnected(RoomEvent.TrackPublished,a,n)}).on(ParticipantEvent.TrackSubscribed,(a,s)=>{a.kind===Track.Kind.Audio&&(a.on(TrackEvent.AudioPlaybackStarted,this.handleAudioPlaybackStarted),a.on(TrackEvent.AudioPlaybackFailed,this.handleAudioPlaybackFailed)),this.emit(RoomEvent.TrackSubscribed,a,s,n)}).on(ParticipantEvent.TrackUnpublished,a=>{this.emit(RoomEvent.TrackUnpublished,a,n)}).on(ParticipantEvent.TrackUnsubscribed,(a,s)=>{this.emit(RoomEvent.TrackUnsubscribed,a,s,n)}).on(ParticipantEvent.TrackSubscriptionFailed,a=>{this.emit(RoomEvent.TrackSubscriptionFailed,a,n)}).on(ParticipantEvent.TrackMuted,a=>{this.emitWhenConnected(RoomEvent.TrackMuted,a,n)}).on(ParticipantEvent.TrackUnmuted,a=>{this.emitWhenConnected(RoomEvent.TrackUnmuted,a,n)}).on(ParticipantEvent.ParticipantMetadataChanged,a=>{this.emitWhenConnected(RoomEvent.ParticipantMetadataChanged,a,n)}).on(ParticipantEvent.ConnectionQualityChanged,a=>{this.emitWhenConnected(RoomEvent.ConnectionQualityChanged,a,n)}).on(ParticipantEvent.ParticipantPermissionsChanged,a=>{this.emitWhenConnected(RoomEvent.ParticipantPermissionsChanged,a,n)}).on(ParticipantEvent.TrackSubscriptionStatusChanged,(a,s)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionStatusChanged,a,s,n)}).on(ParticipantEvent.TrackSubscriptionPermissionChanged,(a,s)=>{this.emitWhenConnected(RoomEvent.TrackSubscriptionPermissionChanged,a,s,n)}),t&&n.updateInfo(t),n}sendSyncState(){var i,t;if(this.engine.subscriber===void 0||this.engine.subscriber.pc.localDescription===null)return;const n=this.engine.subscriber.pc.localDescription,a=this.engine.subscriber.pc.remoteDescription,s=(t=(i=this.connOptions)===null||i===void 0?void 0:i.autoSubscribe)!==null&&t!==void 0?t:!0,d=new Array;this.participants.forEach(o=>{o.tracks.forEach(f=>{f.isDesired!==s&&d.push(f.trackSid)})}),this.engine.client.sendSyncState({answer:toProtoSessionDescription({sdp:n.sdp,type:n.type}),offer:a?toProtoSessionDescription({sdp:a.sdp,type:a.type}):void 0,subscription:{trackSids:d,subscribe:!s,participantTracks:[]},publishTracks:this.localParticipant.publishedTracksInfo(),dataChannels:this.localParticipant.dataChannelsInfo()})}updateSubscriptions(){for(const i of this.participants.values())for(const t of i.videoTracks.values())t.isSubscribed&&t instanceof RemoteTrackPublication&&t.emitTrackUpdate()}setAndEmitConnectionState(i){return i===this.state?!1:(this.state=i,this.emit(RoomEvent.ConnectionStateChanged,this.state),!0)}emitWhenConnected(i){if(this.state===ConnectionState.Connected){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return this.emit(i,...n)}return!1}async simulateParticipants(i){var t,n;const a=_objectSpread2({audio:!0,video:!0,useRealTracks:!1},i.publish),s=_objectSpread2({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},i.participants);if(this.handleDisconnect(),this.name="simulated-room",this.localParticipant.updateInfo(ParticipantInfo.fromPartial({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(RoomEvent.SignalConnected),this.emit(RoomEvent.Connected),this.setAndEmitConnectionState(ConnectionState.Connected),a.video){const d=new LocalTrackPublication(Track.Kind.Video,TrackInfo.fromPartial({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO,name:"video-dummy"}),new LocalVideoTrack(a.useRealTracks?(await navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:createDummyVideoStreamTrack((t=160*s.aspectRatios[0])!==null&&t!==void 0?t:1,160,!0,!0)));this.localParticipant.addTrackPublication(d),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,d)}if(a.audio){const d=new LocalTrackPublication(Track.Kind.Audio,TrackInfo.fromPartial({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO}),new LocalAudioTrack(a.useRealTracks?(await navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:getEmptyAudioStreamTrack()));this.localParticipant.addTrackPublication(d),this.localParticipant.emit(ParticipantEvent.LocalTrackPublished,d)}for(let d=0;d<s.count-1;d+=1){let o=ParticipantInfo.fromPartial({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(d),state:ParticipantInfo_State.ACTIVE,tracks:[],joinedAt:Date.now()});const f=this.getOrCreateParticipant(o.identity,o);if(s.video){const c=createDummyVideoStreamTrack((n=160*s.aspectRatios[d%s.aspectRatios.length])!==null&&n!==void 0?n:1,160,!1,!0),p=TrackInfo.fromPartial({source:TrackSource.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});f.addSubscribedMediaTrack(c,p.sid,new MediaStream([c])),o.tracks=[...o.tracks,p]}if(s.audio){const c=getEmptyAudioStreamTrack(),p=TrackInfo.fromPartial({source:TrackSource.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:TrackType.AUDIO});f.addSubscribedMediaTrack(c,p.sid,new MediaStream([c])),o.tracks=[...o.tracks,p]}f.updateInfo(o)}}emit(i){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return i!==RoomEvent.ActiveSpeakersChanged&&livekitLogger.debug("room event ".concat(i),{event:i,args:n}),super.emit(i,...n)}}var CheckStatus;(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"})(CheckStatus||(CheckStatus={}));class Checker extends eventsExports.EventEmitter{constructor(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=CheckStatus.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=i,this.token=t,this.name=this.constructor.name,this.room=new Room(n.roomOptions),this.connectOptions=n.connectOptions,n.errorsAsWarnings&&(this.errorsAsWarnings=n.errorsAsWarnings)}async run(i){if(this.status!==CheckStatus.IDLE)throw Error("check is running already");this.setStatus(CheckStatus.RUNNING),this.appendMessage("".concat(this.name," started."));try{await this.perform()}catch(t){t instanceof Error&&(this.errorsAsWarnings?this.appendWarning(t.message):this.appendError(t.message))}return await this.disconnect(),await new Promise(t=>setTimeout(t,500)),this.status!==CheckStatus.SKIPPED&&this.setStatus(this.isSuccess()?CheckStatus.SUCCESS:CheckStatus.FAILED),i&&i(),this.getInfo()}isSuccess(){return!this.logs.some(i=>i.level==="error")}async connect(){return this.room.state===ConnectionState.Connected?this.room:(await this.room.connect(this.url,this.token),this.room)}async disconnect(){this.room&&this.room.state!==ConnectionState.Disconnected&&(await this.room.disconnect(),await new Promise(i=>setTimeout(i,500)))}skip(){this.setStatus(CheckStatus.SKIPPED)}appendMessage(i){this.logs.push({level:"info",message:i}),this.emit("update",this.getInfo())}appendWarning(i){this.logs.push({level:"warning",message:i}),this.emit("update",this.getInfo())}appendError(i){this.logs.push({level:"error",message:i}),this.emit("update",this.getInfo())}setStatus(i){this.status=i,this.emit("update",this.getInfo())}get engine(){var i;return(i=this.room)===null||i===void 0?void 0:i.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}(function(e){if(typeof exports=="object"&&typeof module<"u")module.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var i;typeof window<"u"?i=window:typeof global<"u"?i=global:typeof self<"u"?i=self:i=this,i.nodeJsShim=e()}})(function(){return function(){function e(i,t,n){function a(o,f){if(!t[o]){if(!i[o]){var c=typeof require=="function"&&require;if(!f&&c)return c(o,!0);if(s)return s(o,!0);var p=new Error("Cannot find module '"+o+"'");throw p.code="MODULE_NOT_FOUND",p}var v=t[o]={exports:{}};i[o][0].call(v.exports,function(l){var u=i[o][1][l];return a(u||l)},v,v.exports,e,i,t,n)}return t[o].exports}for(var s=typeof require=="function"&&require,d=0;d<n.length;d++)a(n[d]);return a}return e}()({1:[function(e,i,t){const n=e("livekit-server-sdk");window.livekitServerSDK=n;const a=e("simple-peer");window.SimplePeer=a},{"livekit-server-sdk":71,"simple-peer":120}],2:[function(e,i,t){i.exports=n;function n(a,s){for(var d=new Array(arguments.length-1),o=0,f=2,c=!0;f<arguments.length;)d[o++]=arguments[f++];return new Promise(function(v,l){d[o]=function(h){if(c)if(c=!1,h)l(h);else{for(var m=new Array(arguments.length-1),w=0;w<m.length;)m[w++]=arguments[w];v.apply(null,m)}};try{a.apply(s||null,d)}catch(u){c&&(c=!1,l(u))}})}},{}],3:[function(e,i,t){var n=t;n.length=function(c){var p=c.length;if(!p)return 0;for(var v=0;--p%4>1&&c.charAt(p)==="=";)++v;return Math.ceil(c.length*3)/4-v};for(var a=new Array(64),s=new Array(123),d=0;d<64;)s[a[d]=d<26?d+65:d<52?d+71:d<62?d-4:d-59|43]=d++;n.encode=function(c,p,v){for(var l=null,u=[],h=0,m=0,w;p<v;){var k=c[p++];switch(m){case 0:u[h++]=a[k>>2],w=(k&3)<<4,m=1;break;case 1:u[h++]=a[w|k>>4],w=(k&15)<<2,m=2;break;case 2:u[h++]=a[w|k>>6],u[h++]=a[k&63],m=0;break}h>8191&&((l||(l=[])).push(String.fromCharCode.apply(String,u)),h=0)}return m&&(u[h++]=a[w],u[h++]=61,m===1&&(u[h++]=61)),l?(h&&l.push(String.fromCharCode.apply(String,u.slice(0,h))),l.join("")):String.fromCharCode.apply(String,u.slice(0,h))};var o="invalid encoding";n.decode=function(c,p,v){for(var l=v,u=0,h,m=0;m<c.length;){var w=c.charCodeAt(m++);if(w===61&&u>1)break;if((w=s[w])===void 0)throw Error(o);switch(u){case 0:h=w,u=1;break;case 1:p[v++]=h<<2|(w&48)>>4,h=w,u=2;break;case 2:p[v++]=(h&15)<<4|(w&60)>>2,h=w,u=3;break;case 3:p[v++]=(h&3)<<6|w,u=0;break}}if(u===1)throw Error(o);return v-l},n.test=function(c){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(c)}},{}],4:[function(e,i,t){i.exports=n;function n(){this._listeners={}}n.prototype.on=function(s,d,o){return(this._listeners[s]||(this._listeners[s]=[])).push({fn:d,ctx:o||this}),this},n.prototype.off=function(s,d){if(s===void 0)this._listeners={};else if(d===void 0)this._listeners[s]=[];else for(var o=this._listeners[s],f=0;f<o.length;)o[f].fn===d?o.splice(f,1):++f;return this},n.prototype.emit=function(s){var d=this._listeners[s];if(d){for(var o=[],f=1;f<arguments.length;)o.push(arguments[f++]);for(f=0;f<d.length;)d[f].fn.apply(d[f++].ctx,o)}return this}},{}],5:[function(e,i,t){i.exports=n(n);function n(f){return typeof Float32Array<"u"?function(){var c=new Float32Array([-0]),p=new Uint8Array(c.buffer),v=p[3]===128;function l(w,k,C){c[0]=w,k[C]=p[0],k[C+1]=p[1],k[C+2]=p[2],k[C+3]=p[3]}function u(w,k,C){c[0]=w,k[C]=p[3],k[C+1]=p[2],k[C+2]=p[1],k[C+3]=p[0]}f.writeFloatLE=v?l:u,f.writeFloatBE=v?u:l;function h(w,k){return p[0]=w[k],p[1]=w[k+1],p[2]=w[k+2],p[3]=w[k+3],c[0]}function m(w,k){return p[3]=w[k],p[2]=w[k+1],p[1]=w[k+2],p[0]=w[k+3],c[0]}f.readFloatLE=v?h:m,f.readFloatBE=v?m:h}():function(){function c(v,l,u,h){var m=l<0?1:0;if(m&&(l=-l),l===0)v(1/l>0?0:2147483648,u,h);else if(isNaN(l))v(2143289344,u,h);else if(l>34028234663852886e22)v((m<<31|2139095040)>>>0,u,h);else if(l<11754943508222875e-54)v((m<<31|Math.round(l/1401298464324817e-60))>>>0,u,h);else{var w=Math.floor(Math.log(l)/Math.LN2),k=Math.round(l*Math.pow(2,-w)*8388608)&8388607;v((m<<31|w+127<<23|k)>>>0,u,h)}}f.writeFloatLE=c.bind(null,a),f.writeFloatBE=c.bind(null,s);function p(v,l,u){var h=v(l,u),m=(h>>31)*2+1,w=h>>>23&255,k=h&8388607;return w===255?k?NaN:m*(1/0):w===0?m*1401298464324817e-60*k:m*Math.pow(2,w-150)*(k+8388608)}f.readFloatLE=p.bind(null,d),f.readFloatBE=p.bind(null,o)}(),typeof Float64Array<"u"?function(){var c=new Float64Array([-0]),p=new Uint8Array(c.buffer),v=p[7]===128;function l(w,k,C){c[0]=w,k[C]=p[0],k[C+1]=p[1],k[C+2]=p[2],k[C+3]=p[3],k[C+4]=p[4],k[C+5]=p[5],k[C+6]=p[6],k[C+7]=p[7]}function u(w,k,C){c[0]=w,k[C]=p[7],k[C+1]=p[6],k[C+2]=p[5],k[C+3]=p[4],k[C+4]=p[3],k[C+5]=p[2],k[C+6]=p[1],k[C+7]=p[0]}f.writeDoubleLE=v?l:u,f.writeDoubleBE=v?u:l;function h(w,k){return p[0]=w[k],p[1]=w[k+1],p[2]=w[k+2],p[3]=w[k+3],p[4]=w[k+4],p[5]=w[k+5],p[6]=w[k+6],p[7]=w[k+7],c[0]}function m(w,k){return p[7]=w[k],p[6]=w[k+1],p[5]=w[k+2],p[4]=w[k+3],p[3]=w[k+4],p[2]=w[k+5],p[1]=w[k+6],p[0]=w[k+7],c[0]}f.readDoubleLE=v?h:m,f.readDoubleBE=v?m:h}():function(){function c(v,l,u,h,m,w){var k=h<0?1:0;if(k&&(h=-h),h===0)v(0,m,w+l),v(1/h>0?0:2147483648,m,w+u);else if(isNaN(h))v(0,m,w+l),v(2146959360,m,w+u);else if(h>17976931348623157e292)v(0,m,w+l),v((k<<31|2146435072)>>>0,m,w+u);else{var C;if(h<22250738585072014e-324)C=h/5e-324,v(C>>>0,m,w+l),v((k<<31|C/4294967296)>>>0,m,w+u);else{var O=Math.floor(Math.log(h)/Math.LN2);O===1024&&(O=1023),C=h*Math.pow(2,-O),v(C*4503599627370496>>>0,m,w+l),v((k<<31|O+1023<<20|C*1048576&1048575)>>>0,m,w+u)}}}f.writeDoubleLE=c.bind(null,a,0,4),f.writeDoubleBE=c.bind(null,s,4,0);function p(v,l,u,h,m){var w=v(h,m+l),k=v(h,m+u),C=(k>>31)*2+1,O=k>>>20&2047,P=4294967296*(k&1048575)+w;return O===2047?P?NaN:C*(1/0):O===0?C*5e-324*P:C*Math.pow(2,O-1075)*(P+4503599627370496)}f.readDoubleLE=p.bind(null,d,0,4),f.readDoubleBE=p.bind(null,o,4,0)}(),f}function a(f,c,p){c[p]=f&255,c[p+1]=f>>>8&255,c[p+2]=f>>>16&255,c[p+3]=f>>>24}function s(f,c,p){c[p]=f>>>24,c[p+1]=f>>>16&255,c[p+2]=f>>>8&255,c[p+3]=f&255}function d(f,c){return(f[c]|f[c+1]<<8|f[c+2]<<16|f[c+3]<<24)>>>0}function o(f,c){return(f[c]<<24|f[c+1]<<16|f[c+2]<<8|f[c+3])>>>0}},{}],6:[function(require,module,exports){module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}},{}],7:[function(e,i,t){i.exports=n;function n(a,s,d){var o=d||8192,f=o>>>1,c=null,p=o;return function(l){if(l<1||l>f)return a(l);p+l>o&&(c=a(o),p=0);var u=s.call(c,p,p+=l);return p&7&&(p=(p|7)+1),u}}},{}],8:[function(e,i,t){var n=t;n.length=function(s){for(var d=0,o=0,f=0;f<s.length;++f)o=s.charCodeAt(f),o<128?d+=1:o<2048?d+=2:(o&64512)===55296&&(s.charCodeAt(f+1)&64512)===56320?(++f,d+=4):d+=3;return d},n.read=function(s,d,o){var f=o-d;if(f<1)return"";for(var c=null,p=[],v=0,l;d<o;)l=s[d++],l<128?p[v++]=l:l>191&&l<224?p[v++]=(l&31)<<6|s[d++]&63:l>239&&l<365?(l=((l&7)<<18|(s[d++]&63)<<12|(s[d++]&63)<<6|s[d++]&63)-65536,p[v++]=55296+(l>>10),p[v++]=56320+(l&1023)):p[v++]=(l&15)<<12|(s[d++]&63)<<6|s[d++]&63,v>8191&&((c||(c=[])).push(String.fromCharCode.apply(String,p)),v=0);return c?(v&&c.push(String.fromCharCode.apply(String,p.slice(0,v))),c.join("")):String.fromCharCode.apply(String,p.slice(0,v))},n.write=function(s,d,o){for(var f=o,c,p,v=0;v<s.length;++v)c=s.charCodeAt(v),c<128?d[o++]=c:c<2048?(d[o++]=c>>6|192,d[o++]=c&63|128):(c&64512)===55296&&((p=s.charCodeAt(v+1))&64512)===56320?(c=65536+((c&1023)<<10)+(p&1023),++v,d[o++]=c>>18|240,d[o++]=c>>12&63|128,d[o++]=c>>6&63|128,d[o++]=c&63|128):(d[o++]=c>>12|224,d[o++]=c>>6&63|128,d[o++]=c&63|128);return o-f}},{}],9:[function(e,i,t){i.exports=e("./lib/axios")},{"./lib/axios":11}],10:[function(e,i,t){var n=e("./../utils"),a=e("./../core/settle"),s=e("./../helpers/cookies"),d=e("./../helpers/buildURL"),o=e("../core/buildFullPath"),f=e("./../helpers/parseHeaders"),c=e("./../helpers/isURLSameOrigin"),p=e("../core/createError");i.exports=function(l){return new Promise(function(h,m){var w=l.data,k=l.headers,C=l.responseType;n.isFormData(w)&&delete k["Content-Type"];var O=new XMLHttpRequest;if(l.auth){var P=l.auth.username||"",M=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";k.Authorization="Basic "+btoa(P+":"+M)}var D=o(l.baseURL,l.url);O.open(l.method.toUpperCase(),d(D,l.params,l.paramsSerializer),!0),O.timeout=l.timeout;function $(){if(O){var Z="getAllResponseHeaders"in O?f(O.getAllResponseHeaders()):null,re=!C||C==="text"||C==="json"?O.responseText:O.response,Y={data:re,status:O.status,statusText:O.statusText,headers:Z,config:l,request:O};a(h,m,Y),O=null}}if("onloadend"in O?O.onloadend=$:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout($)},O.onabort=function(){O&&(m(p("Request aborted",l,"ECONNABORTED",O)),O=null)},O.onerror=function(){m(p("Network Error",l,null,O)),O=null},O.ontimeout=function(){var re="timeout of "+l.timeout+"ms exceeded";l.timeoutErrorMessage&&(re=l.timeoutErrorMessage),m(p(re,l,l.transitional&&l.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",O)),O=null},n.isStandardBrowserEnv()){var H=(l.withCredentials||c(D))&&l.xsrfCookieName?s.read(l.xsrfCookieName):void 0;H&&(k[l.xsrfHeaderName]=H)}"setRequestHeader"in O&&n.forEach(k,function(re,Y){typeof w>"u"&&Y.toLowerCase()==="content-type"?delete k[Y]:O.setRequestHeader(Y,re)}),n.isUndefined(l.withCredentials)||(O.withCredentials=!!l.withCredentials),C&&C!=="json"&&(O.responseType=l.responseType),typeof l.onDownloadProgress=="function"&&O.addEventListener("progress",l.onDownloadProgress),typeof l.onUploadProgress=="function"&&O.upload&&O.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then(function(re){O&&(O.abort(),m(re),O=null)}),w||(w=null),O.send(w)})}},{"../core/buildFullPath":17,"../core/createError":18,"./../core/settle":22,"./../helpers/buildURL":26,"./../helpers/cookies":28,"./../helpers/isURLSameOrigin":31,"./../helpers/parseHeaders":33,"./../utils":36}],11:[function(e,i,t){var n=e("./utils"),a=e("./helpers/bind"),s=e("./core/Axios"),d=e("./core/mergeConfig"),o=e("./defaults");function f(p){var v=new s(p),l=a(s.prototype.request,v);return n.extend(l,s.prototype,v),n.extend(l,v),l}var c=f(o);c.Axios=s,c.create=function(v){return f(d(c.defaults,v))},c.Cancel=e("./cancel/Cancel"),c.CancelToken=e("./cancel/CancelToken"),c.isCancel=e("./cancel/isCancel"),c.all=function(v){return Promise.all(v)},c.spread=e("./helpers/spread"),c.isAxiosError=e("./helpers/isAxiosError"),i.exports=c,i.exports.default=c},{"./cancel/Cancel":12,"./cancel/CancelToken":13,"./cancel/isCancel":14,"./core/Axios":15,"./core/mergeConfig":21,"./defaults":24,"./helpers/bind":25,"./helpers/isAxiosError":30,"./helpers/spread":34,"./utils":36}],12:[function(e,i,t){function n(a){this.message=a}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,i.exports=n},{}],13:[function(e,i,t){var n=e("./Cancel");function a(s){if(typeof s!="function")throw new TypeError("executor must be a function.");var d;this.promise=new Promise(function(c){d=c});var o=this;s(function(c){o.reason||(o.reason=new n(c),d(o.reason))})}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.source=function(){var d,o=new a(function(c){d=c});return{token:o,cancel:d}},i.exports=a},{"./Cancel":12}],14:[function(e,i,t){i.exports=function(a){return!!(a&&a.__CANCEL__)}},{}],15:[function(e,i,t){var n=e("./../utils"),a=e("../helpers/buildURL"),s=e("./InterceptorManager"),d=e("./dispatchRequest"),o=e("./mergeConfig"),f=e("../helpers/validator"),c=f.validators;function p(v){this.defaults=v,this.interceptors={request:new s,response:new s}}p.prototype.request=function(l){typeof l=="string"?(l=arguments[1]||{},l.url=arguments[0]):l=l||{},l=o(this.defaults,l),l.method?l.method=l.method.toLowerCase():this.defaults.method?l.method=this.defaults.method.toLowerCase():l.method="get";var u=l.transitional;u!==void 0&&f.assertOptions(u,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var h=[],m=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(l)===!1||(m=m&&$.synchronous,h.unshift($.fulfilled,$.rejected))});var w=[];this.interceptors.response.forEach(function($){w.push($.fulfilled,$.rejected)});var k;if(!m){var C=[d,void 0];for(Array.prototype.unshift.apply(C,h),C=C.concat(w),k=Promise.resolve(l);C.length;)k=k.then(C.shift(),C.shift());return k}for(var O=l;h.length;){var P=h.shift(),M=h.shift();try{O=P(O)}catch(D){M(D);break}}try{k=d(O)}catch(D){return Promise.reject(D)}for(;w.length;)k=k.then(w.shift(),w.shift());return k},p.prototype.getUri=function(l){return l=o(this.defaults,l),a(l.url,l.params,l.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],function(l){p.prototype[l]=function(u,h){return this.request(o(h||{},{method:l,url:u,data:(h||{}).data}))}}),n.forEach(["post","put","patch"],function(l){p.prototype[l]=function(u,h,m){return this.request(o(m||{},{method:l,url:u,data:h}))}}),i.exports=p},{"../helpers/buildURL":26,"../helpers/validator":35,"./../utils":36,"./InterceptorManager":16,"./dispatchRequest":19,"./mergeConfig":21}],16:[function(e,i,t){var n=e("./../utils");function a(){this.handlers=[]}a.prototype.use=function(d,o,f){return this.handlers.push({fulfilled:d,rejected:o,synchronous:f?f.synchronous:!1,runWhen:f?f.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(d){this.handlers[d]&&(this.handlers[d]=null)},a.prototype.forEach=function(d){n.forEach(this.handlers,function(f){f!==null&&d(f)})},i.exports=a},{"./../utils":36}],17:[function(e,i,t){var n=e("../helpers/isAbsoluteURL"),a=e("../helpers/combineURLs");i.exports=function(d,o){return d&&!n(o)?a(d,o):o}},{"../helpers/combineURLs":27,"../helpers/isAbsoluteURL":29}],18:[function(e,i,t){var n=e("./enhanceError");i.exports=function(s,d,o,f,c){var p=new Error(s);return n(p,d,o,f,c)}},{"./enhanceError":20}],19:[function(e,i,t){var n=e("./../utils"),a=e("./transformData"),s=e("../cancel/isCancel"),d=e("../defaults");function o(f){f.cancelToken&&f.cancelToken.throwIfRequested()}i.exports=function(c){o(c),c.headers=c.headers||{},c.data=a.call(c,c.data,c.headers,c.transformRequest),c.headers=n.merge(c.headers.common||{},c.headers[c.method]||{},c.headers),n.forEach(["delete","get","head","post","put","patch","common"],function(l){delete c.headers[l]});var p=c.adapter||d.adapter;return p(c).then(function(l){return o(c),l.data=a.call(c,l.data,l.headers,c.transformResponse),l},function(l){return s(l)||(o(c),l&&l.response&&(l.response.data=a.call(c,l.response.data,l.response.headers,c.transformResponse))),Promise.reject(l)})}},{"../cancel/isCancel":14,"../defaults":24,"./../utils":36,"./transformData":23}],20:[function(e,i,t){i.exports=function(a,s,d,o,f){return a.config=s,d&&(a.code=d),a.request=o,a.response=f,a.isAxiosError=!0,a.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},a}},{}],21:[function(e,i,t){var n=e("../utils");i.exports=function(s,d){d=d||{};var o={},f=["url","method","data"],c=["headers","auth","proxy","params"],p=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],v=["validateStatus"];function l(w,k){return n.isPlainObject(w)&&n.isPlainObject(k)?n.merge(w,k):n.isPlainObject(k)?n.merge({},k):n.isArray(k)?k.slice():k}function u(w){n.isUndefined(d[w])?n.isUndefined(s[w])||(o[w]=l(void 0,s[w])):o[w]=l(s[w],d[w])}n.forEach(f,function(k){n.isUndefined(d[k])||(o[k]=l(void 0,d[k]))}),n.forEach(c,u),n.forEach(p,function(k){n.isUndefined(d[k])?n.isUndefined(s[k])||(o[k]=l(void 0,s[k])):o[k]=l(void 0,d[k])}),n.forEach(v,function(k){k in d?o[k]=l(s[k],d[k]):k in s&&(o[k]=l(void 0,s[k]))});var h=f.concat(c).concat(p).concat(v),m=Object.keys(s).concat(Object.keys(d)).filter(function(k){return h.indexOf(k)===-1});return n.forEach(m,u),o}},{"../utils":36}],22:[function(e,i,t){var n=e("./createError");i.exports=function(s,d,o){var f=o.config.validateStatus;!o.status||!f||f(o.status)?s(o):d(n("Request failed with status code "+o.status,o.config,null,o.request,o))}},{"./createError":18}],23:[function(e,i,t){var n=e("./../utils"),a=e("./../defaults");i.exports=function(d,o,f){var c=this||a;return n.forEach(f,function(v){d=v.call(c,d,o)}),d}},{"./../defaults":24,"./../utils":36}],24:[function(e,i,t){(function(n){(function(){var a=e("./utils"),s=e("./helpers/normalizeHeaderName"),d=e("./core/enhanceError"),o={"Content-Type":"application/x-www-form-urlencoded"};function f(l,u){!a.isUndefined(l)&&a.isUndefined(l["Content-Type"])&&(l["Content-Type"]=u)}function c(){var l;return typeof XMLHttpRequest<"u"?l=e("./adapters/xhr"):typeof n<"u"&&Object.prototype.toString.call(n)==="[object process]"&&(l=e("./adapters/http")),l}function p(l,u,h){if(a.isString(l))try{return(u||JSON.parse)(l),a.trim(l)}catch(m){if(m.name!=="SyntaxError")throw m}return(h||JSON.stringify)(l)}var v={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:c(),transformRequest:[function(u,h){return s(h,"Accept"),s(h,"Content-Type"),a.isFormData(u)||a.isArrayBuffer(u)||a.isBuffer(u)||a.isStream(u)||a.isFile(u)||a.isBlob(u)?u:a.isArrayBufferView(u)?u.buffer:a.isURLSearchParams(u)?(f(h,"application/x-www-form-urlencoded;charset=utf-8"),u.toString()):a.isObject(u)||h&&h["Content-Type"]==="application/json"?(f(h,"application/json"),p(u)):u}],transformResponse:[function(u){var h=this.transitional,m=h&&h.silentJSONParsing,w=h&&h.forcedJSONParsing,k=!m&&this.responseType==="json";if(k||w&&a.isString(u)&&u.length)try{return JSON.parse(u)}catch(C){if(k)throw C.name==="SyntaxError"?d(C,this,"E_JSON_PARSE"):C}return u}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(u){return u>=200&&u<300}};v.headers={common:{Accept:"application/json, text/plain, */*"}},a.forEach(["delete","get","head"],function(u){v.headers[u]={}}),a.forEach(["post","put","patch"],function(u){v.headers[u]=a.merge(o)}),i.exports=v}).call(this)}).call(this,e("_process"))},{"./adapters/http":10,"./adapters/xhr":10,"./core/enhanceError":20,"./helpers/normalizeHeaderName":32,"./utils":36,_process:254}],25:[function(e,i,t){i.exports=function(a,s){return function(){for(var o=new Array(arguments.length),f=0;f<o.length;f++)o[f]=arguments[f];return a.apply(s,o)}}},{}],26:[function(e,i,t){var n=e("./../utils");function a(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}i.exports=function(d,o,f){if(!o)return d;var c;if(f)c=f(o);else if(n.isURLSearchParams(o))c=o.toString();else{var p=[];n.forEach(o,function(u,h){u===null||typeof u>"u"||(n.isArray(u)?h=h+"[]":u=[u],n.forEach(u,function(w){n.isDate(w)?w=w.toISOString():n.isObject(w)&&(w=JSON.stringify(w)),p.push(a(h)+"="+a(w))}))}),c=p.join("&")}if(c){var v=d.indexOf("#");v!==-1&&(d=d.slice(0,v)),d+=(d.indexOf("?")===-1?"?":"&")+c}return d}},{"./../utils":36}],27:[function(e,i,t){i.exports=function(a,s){return s?a.replace(/\/+$/,"")+"/"+s.replace(/^\/+/,""):a}},{}],28:[function(e,i,t){var n=e("./../utils");i.exports=n.isStandardBrowserEnv()?function(){return{write:function(d,o,f,c,p,v){var l=[];l.push(d+"="+encodeURIComponent(o)),n.isNumber(f)&&l.push("expires="+new Date(f).toGMTString()),n.isString(c)&&l.push("path="+c),n.isString(p)&&l.push("domain="+p),v===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(d){var o=document.cookie.match(new RegExp("(^|;\\s*)("+d+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(d){this.write(d,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},{"./../utils":36}],29:[function(e,i,t){i.exports=function(a){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(a)}},{}],30:[function(e,i,t){i.exports=function(a){return typeof a=="object"&&a.isAxiosError===!0}},{}],31:[function(e,i,t){var n=e("./../utils");i.exports=n.isStandardBrowserEnv()?function(){var s=/(msie|trident)/i.test(navigator.userAgent),d=document.createElement("a"),o;function f(c){var p=c;return s&&(d.setAttribute("href",p),p=d.href),d.setAttribute("href",p),{href:d.href,protocol:d.protocol?d.protocol.replace(/:$/,""):"",host:d.host,search:d.search?d.search.replace(/^\?/,""):"",hash:d.hash?d.hash.replace(/^#/,""):"",hostname:d.hostname,port:d.port,pathname:d.pathname.charAt(0)==="/"?d.pathname:"/"+d.pathname}}return o=f(window.location.href),function(p){var v=n.isString(p)?f(p):p;return v.protocol===o.protocol&&v.host===o.host}}():function(){return function(){return!0}}()},{"./../utils":36}],32:[function(e,i,t){var n=e("../utils");i.exports=function(s,d){n.forEach(s,function(f,c){c!==d&&c.toUpperCase()===d.toUpperCase()&&(s[d]=f,delete s[c])})}},{"../utils":36}],33:[function(e,i,t){var n=e("./../utils"),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];i.exports=function(d){var o={},f,c,p;return d&&n.forEach(d.split(`
`),function(l){if(p=l.indexOf(":"),f=n.trim(l.substr(0,p)).toLowerCase(),c=n.trim(l.substr(p+1)),f){if(o[f]&&a.indexOf(f)>=0)return;f==="set-cookie"?o[f]=(o[f]?o[f]:[]).concat([c]):o[f]=o[f]?o[f]+", "+c:c}}),o}},{"./../utils":36}],34:[function(e,i,t){i.exports=function(a){return function(d){return a.apply(null,d)}}},{}],35:[function(e,i,t){var n=e("./../../package.json"),a={};["object","boolean","number","function","string","symbol"].forEach(function(c,p){a[c]=function(l){return typeof l===c||"a"+(p<1?"n ":" ")+c}});var s={},d=n.version.split(".");function o(c,p){for(var v=p?p.split("."):d,l=c.split("."),u=0;u<3;u++){if(v[u]>l[u])return!0;if(v[u]<l[u])return!1}return!1}a.transitional=function(p,v,l){var u=v&&o(v);function h(m,w){return"[Axios v"+n.version+"] Transitional option '"+m+"'"+w+(l?". "+l:"")}return function(m,w,k){if(p===!1)throw new Error(h(w," has been removed in "+v));return u&&!s[w]&&(s[w]=!0,console.warn(h(w," has been deprecated since v"+v+" and will be removed in the near future"))),p?p(m,w,k):!0}};function f(c,p,v){if(typeof c!="object")throw new TypeError("options must be an object");for(var l=Object.keys(c),u=l.length;u-- >0;){var h=l[u],m=p[h];if(m){var w=c[h],k=w===void 0||m(w,h,c);if(k!==!0)throw new TypeError("option "+h+" must be "+k);continue}if(v!==!0)throw Error("Unknown option "+h)}}i.exports={isOlderVersion:o,assertOptions:f,validators:a}},{"./../../package.json":37}],36:[function(e,i,t){var n=e("./helpers/bind"),a=Object.prototype.toString;function s(Y){return a.call(Y)==="[object Array]"}function d(Y){return typeof Y>"u"}function o(Y){return Y!==null&&!d(Y)&&Y.constructor!==null&&!d(Y.constructor)&&typeof Y.constructor.isBuffer=="function"&&Y.constructor.isBuffer(Y)}function f(Y){return a.call(Y)==="[object ArrayBuffer]"}function c(Y){return typeof FormData<"u"&&Y instanceof FormData}function p(Y){var N;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?N=ArrayBuffer.isView(Y):N=Y&&Y.buffer&&Y.buffer instanceof ArrayBuffer,N}function v(Y){return typeof Y=="string"}function l(Y){return typeof Y=="number"}function u(Y){return Y!==null&&typeof Y=="object"}function h(Y){if(a.call(Y)!=="[object Object]")return!1;var N=Object.getPrototypeOf(Y);return N===null||N===Object.prototype}function m(Y){return a.call(Y)==="[object Date]"}function w(Y){return a.call(Y)==="[object File]"}function k(Y){return a.call(Y)==="[object Blob]"}function C(Y){return a.call(Y)==="[object Function]"}function O(Y){return u(Y)&&C(Y.pipe)}function P(Y){return typeof URLSearchParams<"u"&&Y instanceof URLSearchParams}function M(Y){return Y.trim?Y.trim():Y.replace(/^\s+|\s+$/g,"")}function D(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function $(Y,N){if(!(Y===null||typeof Y>"u"))if(typeof Y!="object"&&(Y=[Y]),s(Y))for(var x=0,b=Y.length;x<b;x++)N.call(null,Y[x],x,Y);else for(var _ in Y)Object.prototype.hasOwnProperty.call(Y,_)&&N.call(null,Y[_],_,Y)}function H(){var Y={};function N(_,g){h(Y[g])&&h(_)?Y[g]=H(Y[g],_):h(_)?Y[g]=H({},_):s(_)?Y[g]=_.slice():Y[g]=_}for(var x=0,b=arguments.length;x<b;x++)$(arguments[x],N);return Y}function Z(Y,N,x){return $(N,function(_,g){x&&typeof _=="function"?Y[g]=n(_,x):Y[g]=_}),Y}function re(Y){return Y.charCodeAt(0)===65279&&(Y=Y.slice(1)),Y}i.exports={isArray:s,isArrayBuffer:f,isBuffer:o,isFormData:c,isArrayBufferView:p,isString:v,isNumber:l,isObject:u,isPlainObject:h,isUndefined:d,isDate:m,isFile:w,isBlob:k,isFunction:C,isStream:O,isURLSearchParams:P,isStandardBrowserEnv:D,forEach:$,merge:H,extend:Z,trim:M,stripBOM:re}},{"./helpers/bind":25}],37:[function(e,i,t){i.exports={name:"axios",version:"0.21.4",description:"Promise based HTTP client for the browser and node.js",main:"index.js",scripts:{test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},repository:{type:"git",url:"https://github.com/axios/axios.git"},keywords:["xhr","http","ajax","promise","node"],author:"Matt Zabriskie",license:"MIT",bugs:{url:"https://github.com/axios/axios/issues"},homepage:"https://axios-http.com",devDependencies:{coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},browser:{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},jsdelivr:"dist/axios.min.js",unpkg:"dist/axios.min.js",typings:"./index.d.ts",dependencies:{"follow-redirects":"^1.14.0"},bundlesize:[{path:"./dist/axios.min.js",threshold:"5kB"}]}},{}],38:[function(e,i,t){var n=e("buffer").Buffer,a=e("buffer").SlowBuffer;i.exports=s;function s(f,c){if(!n.isBuffer(f)||!n.isBuffer(c)||f.length!==c.length)return!1;for(var p=0,v=0;v<f.length;v++)p|=f[v]^c[v];return p===0}s.install=function(){n.prototype.equal=a.prototype.equal=function(c){return s(this,c)}};var d=n.prototype.equal,o=a.prototype.equal;s.restore=function(){n.prototype.equal=d,a.prototype.equal=o}},{buffer:171}],39:[function(e,i,t){const n=e("map-obj"),a=e("camelcase"),s=e("quick-lru"),d=(p,v)=>p.some(l=>typeof l=="string"?l===v:(l.lastIndex=0,l.test(v))),o=new s({maxSize:1e5}),f=p=>typeof p=="object"&&p!==null&&!(p instanceof RegExp)&&!(p instanceof Error)&&!(p instanceof Date),c=(p,v)=>{if(!f(p))return p;v={deep:!1,pascalCase:!1,...v};const{exclude:l,pascalCase:u,stopPaths:h,deep:m}=v,w=new Set(h),k=C=>(O,P)=>{if(m&&f(P)){const M=C===void 0?O:`${C}.${O}`;w.has(M)||(P=n(P,k(M)))}if(!(l&&d(l,O))){const M=u?`${O}_`:O;if(o.has(M))O=o.get(M);else{const D=a(O,{pascalCase:u,locale:!1});O.length<100&&o.set(M,D),O=D}}return[O,P]};return n(p,k(void 0))};i.exports=(p,v)=>Array.isArray(p)?Object.keys(p).map(l=>c(p[l],v)):c(p,v)},{camelcase:40,"map-obj":86,"quick-lru":101}],40:[function(e,i,t){const n=/[\p{Lu}]/u,a=/[\p{Ll}]/u,s=/^[\p{Lu}](?![\p{Lu}])/gu,d=/([\p{Alpha}\p{N}_]|$)/u,o=/[_.\- ]+/,f=new RegExp("^"+o.source),c=new RegExp(o.source+d.source,"gu"),p=new RegExp("\\d+"+d.source,"gu"),v=(m,w,k)=>{let C=!1,O=!1,P=!1;for(let M=0;M<m.length;M++){const D=m[M];C&&n.test(D)?(m=m.slice(0,M)+"-"+m.slice(M),C=!1,P=O,O=!0,M++):O&&P&&a.test(D)?(m=m.slice(0,M-1)+"-"+m.slice(M-1),P=O,O=!1,C=!0):(C=w(D)===D&&k(D)!==D,P=O,O=k(D)===D&&w(D)!==D)}return m},l=(m,w)=>(s.lastIndex=0,m.replace(s,k=>w(k))),u=(m,w)=>(c.lastIndex=0,p.lastIndex=0,m.replace(c,(k,C)=>w(C)).replace(p,k=>w(k))),h=(m,w)=>{if(!(typeof m=="string"||Array.isArray(m)))throw new TypeError("Expected the input to be `string | string[]`");if(w={pascalCase:!1,preserveConsecutiveUppercase:!1,...w},Array.isArray(m)?m=m.map(P=>P.trim()).filter(P=>P.length).join("-"):m=m.trim(),m.length===0)return"";const k=w.locale===!1?P=>P.toLowerCase():P=>P.toLocaleLowerCase(w.locale),C=w.locale===!1?P=>P.toUpperCase():P=>P.toLocaleUpperCase(w.locale);return m.length===1?w.pascalCase?C(m):k(m):(m!==k(m)&&(m=v(m,k,C)),m=m.replace(f,""),w.preserveConsecutiveUppercase?m=l(m,k):m=k(m),w.pascalCase&&(m=C(m.charAt(0))+m.slice(1)),u(m,C))};i.exports=h,i.exports.default=h},{}],41:[function(e,i,t){(function(n){(function(){t.formatArgs=s,t.save=d,t.load=o,t.useColors=a,t.storage=f(),t.destroy=(()=>{let p=!1;return()=>{p||(p=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function a(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(p){if(p[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+p[0]+(this.useColors?"%c ":" ")+"+"+i.exports.humanize(this.diff),!this.useColors)return;const v="color: "+this.color;p.splice(1,0,v,"color: inherit");let l=0,u=0;p[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(l++,h==="%c"&&(u=l))}),p.splice(u,0,v)}t.log=console.debug||console.log||(()=>{});function d(p){try{p?t.storage.setItem("debug",p):t.storage.removeItem("debug")}catch{}}function o(){let p;try{p=t.storage.getItem("debug")}catch{}return!p&&typeof n<"u"&&"env"in n&&(p={}.DEBUG),p}function f(){try{return localStorage}catch{}}i.exports=e("./common")(t);const{formatters:c}=i.exports;c.j=function(p){try{return JSON.stringify(p)}catch(v){return"[UnexpectedJSONParseError]: "+v.message}}}).call(this)}).call(this,e("_process"))},{"./common":42,_process:254}],42:[function(e,i,t){function n(a){d.debug=d,d.default=d,d.coerce=l,d.disable=c,d.enable=f,d.enabled=p,d.humanize=e("ms"),d.destroy=u,Object.keys(a).forEach(h=>{d[h]=a[h]}),d.names=[],d.skips=[],d.formatters={};function s(h){let m=0;for(let w=0;w<h.length;w++)m=(m<<5)-m+h.charCodeAt(w),m|=0;return d.colors[Math.abs(m)%d.colors.length]}d.selectColor=s;function d(h){let m,w=null,k,C;function O(...P){if(!O.enabled)return;const M=O,D=Number(new Date),$=D-(m||D);M.diff=$,M.prev=m,M.curr=D,m=D,P[0]=d.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let H=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(re,Y)=>{if(re==="%%")return"%";H++;const N=d.formatters[Y];if(typeof N=="function"){const x=P[H];re=N.call(M,x),P.splice(H,1),H--}return re}),d.formatArgs.call(M,P),(M.log||d.log).apply(M,P)}return O.namespace=h,O.useColors=d.useColors(),O.color=d.selectColor(h),O.extend=o,O.destroy=d.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(k!==d.namespaces&&(k=d.namespaces,C=d.enabled(h)),C),set:P=>{w=P}}),typeof d.init=="function"&&d.init(O),O}function o(h,m){const w=d(this.namespace+(typeof m>"u"?":":m)+h);return w.log=this.log,w}function f(h){d.save(h),d.namespaces=h,d.names=[],d.skips=[];let m;const w=(typeof h=="string"?h:"").split(/[\s,]+/),k=w.length;for(m=0;m<k;m++)w[m]&&(h=w[m].replace(/\*/g,".*?"),h[0]==="-"?d.skips.push(new RegExp("^"+h.slice(1)+"$")):d.names.push(new RegExp("^"+h+"$")))}function c(){const h=[...d.names.map(v),...d.skips.map(v).map(m=>"-"+m)].join(",");return d.enable(""),h}function p(h){if(h[h.length-1]==="*")return!0;let m,w;for(m=0,w=d.skips.length;m<w;m++)if(d.skips[m].test(h))return!1;for(m=0,w=d.names.length;m<w;m++)if(d.names[m].test(h))return!0;return!1}function v(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function l(h){return h instanceof Error?h.stack||h.message:h}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return d.enable(d.load()),d}i.exports=n},{ms:87}],43:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("./param-bytes-for-alg"),s=128,d=0,o=32,f=16,c=2,p=f|o|d<<6,v=c|d<<6;function l(k){return k.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(k){if(n.isBuffer(k))return k;if(typeof k=="string")return n.from(k,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function h(k,C){k=u(k);var O=a(C),P=O+1,M=k.length,D=0;if(k[D++]!==p)throw new Error('Could not find expected "seq"');var $=k[D++];if($===(s|1)&&($=k[D++]),M-D<$)throw new Error('"seq" specified length of "'+$+'", only "'+(M-D)+'" remaining');if(k[D++]!==v)throw new Error('Could not find expected "int" for "r"');var H=k[D++];if(M-D-2<H)throw new Error('"r" specified length of "'+H+'", only "'+(M-D-2)+'" available');if(P<H)throw new Error('"r" specified length of "'+H+'", max of "'+P+'" is acceptable');var Z=D;if(D+=H,k[D++]!==v)throw new Error('Could not find expected "int" for "s"');var re=k[D++];if(M-D!==re)throw new Error('"s" specified length of "'+re+'", expected "'+(M-D)+'"');if(P<re)throw new Error('"s" specified length of "'+re+'", max of "'+P+'" is acceptable');var Y=D;if(D+=re,D!==M)throw new Error('Expected to consume entire buffer, but "'+(M-D)+'" bytes remain');var N=O-H,x=O-re,b=n.allocUnsafe(N+H+x+re);for(D=0;D<N;++D)b[D]=0;k.copy(b,D,Z+Math.max(-N,0),Z+H),D=O;for(var _=D;D<_+x;++D)b[D]=0;return k.copy(b,D,Y+Math.max(-x,0),Y+re),b=b.toString("base64"),b=l(b),b}function m(k,C,O){for(var P=0;C+P<O&&k[C+P]===0;)++P;var M=k[C+P]>=s;return M&&--P,P}function w(k,C){k=u(k);var O=a(C),P=k.length;if(P!==O*2)throw new TypeError('"'+C+'" signatures must be "'+O*2+'" bytes, saw "'+P+'"');var M=m(k,0,O),D=m(k,O,k.length),$=O-M,H=O-D,Z=1+1+$+1+1+H,re=Z<s,Y=n.allocUnsafe((re?2:3)+Z),N=0;return Y[N++]=p,re?Y[N++]=Z:(Y[N++]=s|1,Y[N++]=Z&255),Y[N++]=v,Y[N++]=$,M<0?(Y[N++]=0,N+=k.copy(Y,N,0,O)):N+=k.copy(Y,N,M,O),Y[N++]=v,Y[N++]=H,D<0?(Y[N++]=0,k.copy(Y,N,O)):k.copy(Y,N,O+D),Y}i.exports={derToJose:h,joseToDer:w}},{"./param-bytes-for-alg":44,"safe-buffer":118}],44:[function(e,i,t){function n(d){var o=(d/8|0)+(d%8===0?0:1);return o}var a={ES256:n(256),ES384:n(384),ES512:n(521)};function s(d){var o=a[d];if(o)return o;throw new Error('Unknown algorithm "'+d+'"')}i.exports=s},{}],45:[function(e,i,t){function n(s,d){for(const o in d)Object.defineProperty(s,o,{value:d[o],enumerable:!0,configurable:!0});return s}function a(s,d,o){if(!s||typeof s=="string")throw new TypeError("Please pass an Error to err-code");o||(o={}),typeof d=="object"&&(o=d,d=""),d&&(o.code=d);try{return n(s,o)}catch{o.message=s.message,o.stack=s.stack;const c=function(){};return c.prototype=Object.create(Object.getPrototypeOf(s)),n(new c,o)}}i.exports=a},{}],46:[function(e,i,t){i.exports=function(){if(typeof globalThis>"u")return null;var a={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return a.RTCPeerConnection?a:null}},{}],47:[function(e,i,t){typeof Object.create=="function"?i.exports=function(a,s){s&&(a.super_=s,a.prototype=Object.create(s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}))}:i.exports=function(a,s){if(s){a.super_=s;var d=function(){};d.prototype=s.prototype,a.prototype=new d,a.prototype.constructor=a}}},{}],48:[function(e,i,t){var n=e("jws");i.exports=function(a,s){s=s||{};var d=n.decode(a,s);if(!d)return null;var o=d.payload;if(typeof o=="string")try{var f=JSON.parse(o);f!==null&&typeof f=="object"&&(o=f)}catch{}return s.complete===!0?{header:d.header,payload:o,signature:d.signature}:o}},{jws:58}],49:[function(e,i,t){i.exports={decode:e("./decode"),verify:e("./verify"),sign:e("./sign"),JsonWebTokenError:e("./lib/JsonWebTokenError"),NotBeforeError:e("./lib/NotBeforeError"),TokenExpiredError:e("./lib/TokenExpiredError")}},{"./decode":48,"./lib/JsonWebTokenError":50,"./lib/NotBeforeError":51,"./lib/TokenExpiredError":52,"./sign":55,"./verify":56}],50:[function(e,i,t){var n=function(a,s){Error.call(this,a),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=a,s&&(this.inner=s)};n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,i.exports=n},{}],51:[function(e,i,t){var n=e("./JsonWebTokenError"),a=function(s,d){n.call(this,s),this.name="NotBeforeError",this.date=d};a.prototype=Object.create(n.prototype),a.prototype.constructor=a,i.exports=a},{"./JsonWebTokenError":50}],52:[function(e,i,t){var n=e("./JsonWebTokenError"),a=function(s,d){n.call(this,s),this.name="TokenExpiredError",this.expiredAt=d};a.prototype=Object.create(n.prototype),a.prototype.constructor=a,i.exports=a},{"./JsonWebTokenError":50}],53:[function(e,i,t){(function(n){(function(){var a=e("semver");i.exports=a.satisfies(n.version,"^6.12.0 || >=8.0.0")}).call(this)}).call(this,e("_process"))},{_process:254,semver:119}],54:[function(e,i,t){var n=e("ms");i.exports=function(a,s){var d=s||Math.floor(Date.now()/1e3);if(typeof a=="string"){var o=n(a);return typeof o>"u"?void 0:Math.floor(d+o/1e3)}else return typeof a=="number"?d+a:void 0}},{ms:88}],55:[function(e,i,t){(function(n){(function(){var a=e("./lib/timespan"),s=e("./lib/psSupported"),d=e("jws"),o=e("lodash.includes"),f=e("lodash.isboolean"),c=e("lodash.isinteger"),p=e("lodash.isnumber"),v=e("lodash.isplainobject"),l=e("lodash.isstring"),u=e("lodash.once"),h=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];s&&h.splice(3,0,"PS256","PS384","PS512");var m={expiresIn:{isValid:function(D){return c(D)||l(D)&&D},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(D){return c(D)||l(D)&&D},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(D){return l(D)||Array.isArray(D)},message:'"audience" must be a string or array'},algorithm:{isValid:o.bind(null,h),message:'"algorithm" must be a valid string enum value'},header:{isValid:v,message:'"header" must be an object'},encoding:{isValid:l,message:'"encoding" must be a string'},issuer:{isValid:l,message:'"issuer" must be a string'},subject:{isValid:l,message:'"subject" must be a string'},jwtid:{isValid:l,message:'"jwtid" must be a string'},noTimestamp:{isValid:f,message:'"noTimestamp" must be a boolean'},keyid:{isValid:l,message:'"keyid" must be a string'},mutatePayload:{isValid:f,message:'"mutatePayload" must be a boolean'}},w={iat:{isValid:p,message:'"iat" should be a number of seconds'},exp:{isValid:p,message:'"exp" should be a number of seconds'},nbf:{isValid:p,message:'"nbf" should be a number of seconds'}};function k(D,$,H,Z){if(!v(H))throw new Error('Expected "'+Z+'" to be a plain object.');Object.keys(H).forEach(function(re){var Y=D[re];if(!Y){if(!$)throw new Error('"'+re+'" is not allowed in "'+Z+'"');return}if(!Y.isValid(H[re]))throw new Error(Y.message)})}function C(D){return k(m,!1,D,"options")}function O(D){return k(w,!0,D,"payload")}var P={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},M=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];i.exports=function(D,$,H,Z){typeof H=="function"?(Z=H,H={}):H=H||{};var re=typeof D=="object"&&!n.isBuffer(D),Y=Object.assign({alg:H.algorithm||"HS256",typ:re?"JWT":void 0,kid:H.keyid},H.header);function N(g){if(Z)return Z(g);throw g}if(!$&&H.algorithm!=="none")return N(new Error("secretOrPrivateKey must have a value"));if(typeof D>"u")return N(new Error("payload is required"));if(re){try{O(D)}catch(g){return N(g)}H.mutatePayload||(D=Object.assign({},D))}else{var x=M.filter(function(g){return typeof H[g]<"u"});if(x.length>0)return N(new Error("invalid "+x.join(",")+" option for "+typeof D+" payload"))}if(typeof D.exp<"u"&&typeof H.expiresIn<"u")return N(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof D.nbf<"u"&&typeof H.notBefore<"u")return N(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{C(H)}catch(g){return N(g)}var b=D.iat||Math.floor(Date.now()/1e3);if(H.noTimestamp?delete D.iat:re&&(D.iat=b),typeof H.notBefore<"u"){try{D.nbf=a(H.notBefore,b)}catch(g){return N(g)}if(typeof D.nbf>"u")return N(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof H.expiresIn<"u"&&typeof D=="object"){try{D.exp=a(H.expiresIn,b)}catch(g){return N(g)}if(typeof D.exp>"u")return N(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(P).forEach(function(g){var E=P[g];if(typeof H[g]<"u"){if(typeof D[E]<"u")return N(new Error('Bad "options.'+g+'" option. The payload already has an "'+E+'" property.'));D[E]=H[g]}});var _=H.encoding||"utf8";if(typeof Z=="function")Z=Z&&u(Z),d.createSign({header:Y,privateKey:$,payload:D,encoding:_}).once("error",Z).once("done",function(g){Z(null,g)});else return d.sign({header:Y,payload:D,secret:$,encoding:_})}}).call(this)}).call(this,{isBuffer:e("../../../../../../../../Library/pnpm/global/5/.pnpm/is-buffer@1.1.6/node_modules/is-buffer/index.js")})},{"../../../../../../../../Library/pnpm/global/5/.pnpm/is-buffer@1.1.6/node_modules/is-buffer/index.js":235,"./lib/psSupported":53,"./lib/timespan":54,jws:58,"lodash.includes":78,"lodash.isboolean":79,"lodash.isinteger":80,"lodash.isnumber":81,"lodash.isplainobject":82,"lodash.isstring":83,"lodash.once":84}],56:[function(e,i,t){var n=e("./lib/JsonWebTokenError"),a=e("./lib/NotBeforeError"),s=e("./lib/TokenExpiredError"),d=e("./decode"),o=e("./lib/timespan"),f=e("./lib/psSupported"),c=e("jws"),p=["RS256","RS384","RS512","ES256","ES384","ES512"],v=["RS256","RS384","RS512"],l=["HS256","HS384","HS512"];f&&(p.splice(3,0,"PS256","PS384","PS512"),v.splice(3,0,"PS256","PS384","PS512")),i.exports=function(u,h,m,w){typeof m=="function"&&!w&&(w=m,m={}),m||(m={}),m=Object.assign({},m);var k;if(w?k=w:k=function($,H){if($)throw $;return H},m.clockTimestamp&&typeof m.clockTimestamp!="number")return k(new n("clockTimestamp must be a number"));if(m.nonce!==void 0&&(typeof m.nonce!="string"||m.nonce.trim()===""))return k(new n("nonce must be a non-empty string"));var C=m.clockTimestamp||Math.floor(Date.now()/1e3);if(!u)return k(new n("jwt must be provided"));if(typeof u!="string")return k(new n("jwt must be a string"));var O=u.split(".");if(O.length!==3)return k(new n("jwt malformed"));var P;try{P=d(u,{complete:!0})}catch($){return k($)}if(!P)return k(new n("invalid token"));var M=P.header,D;if(typeof h=="function"){if(!w)return k(new n("verify must be called asynchronous if secret or public key is provided as a callback"));D=h}else D=function($,H){return H(null,h)};return D(M,function($,H){if($)return k(new n("error in secret or public key callback: "+$.message));var Z=O[2].trim()!=="";if(!Z&&H)return k(new n("jwt signature is required"));if(Z&&!H)return k(new n("secret or public key must be provided"));if(!Z&&!m.algorithms&&(m.algorithms=["none"]),m.algorithms||(m.algorithms=~H.toString().indexOf("BEGIN CERTIFICATE")||~H.toString().indexOf("BEGIN PUBLIC KEY")?p:~H.toString().indexOf("BEGIN RSA PUBLIC KEY")?v:l),!~m.algorithms.indexOf(P.header.alg))return k(new n("invalid algorithm"));var re;try{re=c.verify(u,P.header.alg,H)}catch(T){return k(T)}if(!re)return k(new n("invalid signature"));var Y=P.payload;if(typeof Y.nbf<"u"&&!m.ignoreNotBefore){if(typeof Y.nbf!="number")return k(new n("invalid nbf value"));if(Y.nbf>C+(m.clockTolerance||0))return k(new a("jwt not active",new Date(Y.nbf*1e3)))}if(typeof Y.exp<"u"&&!m.ignoreExpiration){if(typeof Y.exp!="number")return k(new n("invalid exp value"));if(C>=Y.exp+(m.clockTolerance||0))return k(new s("jwt expired",new Date(Y.exp*1e3)))}if(m.audience){var N=Array.isArray(m.audience)?m.audience:[m.audience],x=Array.isArray(Y.aud)?Y.aud:[Y.aud],b=x.some(function(T){return N.some(function(A){return A instanceof RegExp?A.test(T):A===T})});if(!b)return k(new n("jwt audience invalid. expected: "+N.join(" or ")))}if(m.issuer){var _=typeof m.issuer=="string"&&Y.iss!==m.issuer||Array.isArray(m.issuer)&&m.issuer.indexOf(Y.iss)===-1;if(_)return k(new n("jwt issuer invalid. expected: "+m.issuer))}if(m.subject&&Y.sub!==m.subject)return k(new n("jwt subject invalid. expected: "+m.subject));if(m.jwtid&&Y.jti!==m.jwtid)return k(new n("jwt jwtid invalid. expected: "+m.jwtid));if(m.nonce&&Y.nonce!==m.nonce)return k(new n("jwt nonce invalid. expected: "+m.nonce));if(m.maxAge){if(typeof Y.iat!="number")return k(new n("iat required when maxAge is specified"));var g=o(m.maxAge,Y.iat);if(typeof g>"u")return k(new n('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(C>=g+(m.clockTolerance||0))return k(new s("maxAge exceeded",new Date(g*1e3)))}if(m.complete===!0){var E=P.signature;return k(null,{header:M,payload:Y,signature:E})}return k(null,Y)})}},{"./decode":48,"./lib/JsonWebTokenError":50,"./lib/NotBeforeError":51,"./lib/TokenExpiredError":52,"./lib/psSupported":53,"./lib/timespan":54,jws:58}],57:[function(e,i,t){var n=e("buffer-equal-constant-time"),a=e("safe-buffer").Buffer,s=e("crypto"),d=e("ecdsa-sig-formatter"),o=e("util"),f=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,c="secret must be a string or buffer",p="key must be a string or a buffer",v="key must be a string, a buffer or an object",l=typeof s.createPublicKey=="function";l&&(p+=" or a KeyObject",c+="or a KeyObject");function u(_){if(!a.isBuffer(_)&&typeof _!="string"&&(!l||typeof _!="object"||typeof _.type!="string"||typeof _.asymmetricKeyType!="string"||typeof _.export!="function"))throw C(p)}function h(_){if(!a.isBuffer(_)&&typeof _!="string"&&typeof _!="object")throw C(v)}function m(_){if(!a.isBuffer(_)){if(typeof _=="string")return _;if(!l||typeof _!="object"||_.type!=="secret"||typeof _.export!="function")throw C(c)}}function w(_){return _.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function k(_){_=_.toString();var g=4-_.length%4;if(g!==4)for(var E=0;E<g;++E)_+="=";return _.replace(/\-/g,"+").replace(/_/g,"/")}function C(_){var g=[].slice.call(arguments,1),E=o.format.bind(o,_).apply(null,g);return new TypeError(E)}function O(_){return a.isBuffer(_)||typeof _=="string"}function P(_){return O(_)||(_=JSON.stringify(_)),_}function M(_){return function(E,T){m(T),E=P(E);var A=s.createHmac("sha"+_,T),J=(A.update(E),A.digest("base64"));return w(J)}}function D(_){return function(E,T,A){var J=M(_)(E,A);return n(a.from(T),a.from(J))}}function $(_){return function(E,T){h(T),E=P(E);var A=s.createSign("RSA-SHA"+_),J=(A.update(E),A.sign(T,"base64"));return w(J)}}function H(_){return function(E,T,A){u(A),E=P(E),T=k(T);var J=s.createVerify("RSA-SHA"+_);return J.update(E),J.verify(A,T,"base64")}}function Z(_){return function(E,T){h(T),E=P(E);var A=s.createSign("RSA-SHA"+_),J=(A.update(E),A.sign({key:T,padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return w(J)}}function re(_){return function(E,T,A){u(A),E=P(E),T=k(T);var J=s.createVerify("RSA-SHA"+_);return J.update(E),J.verify({key:A,padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST},T,"base64")}}function Y(_){var g=$(_);return function(){var T=g.apply(null,arguments);return T=d.derToJose(T,"ES"+_),T}}function N(_){var g=H(_);return function(T,A,J){A=d.joseToDer(A,"ES"+_).toString("base64");var G=g(T,A,J);return G}}function x(){return function(){return""}}function b(){return function(g,E){return E===""}}i.exports=function(g){var E={hs:M,rs:$,ps:Z,es:Y,none:x},T={hs:D,rs:H,ps:re,es:N,none:b},A=g.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!A)throw C(f,g);var J=(A[1]||A[3]).toLowerCase(),G=A[2];return{sign:E[J](G),verify:T[J](G)}}},{"buffer-equal-constant-time":38,crypto:180,"ecdsa-sig-formatter":43,"safe-buffer":118,util:294}],58:[function(e,i,t){var n=e("./lib/sign-stream"),a=e("./lib/verify-stream"),s=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];t.ALGORITHMS=s,t.sign=n.sign,t.verify=a.verify,t.decode=a.decode,t.isValid=a.isValid,t.createSign=function(o){return new n(o)},t.createVerify=function(o){return new a(o)}},{"./lib/sign-stream":60,"./lib/verify-stream":62}],59:[function(e,i,t){(function(n){(function(){var a=e("safe-buffer").Buffer,s=e("stream"),d=e("util");function o(f){if(this.buffer=null,this.writable=!0,this.readable=!0,!f)return this.buffer=a.alloc(0),this;if(typeof f.pipe=="function")return this.buffer=a.alloc(0),f.pipe(this),this;if(f.length||typeof f=="object")return this.buffer=f,this.writable=!1,n.nextTick(function(){this.emit("end",f),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof f+")")}d.inherits(o,s),o.prototype.write=function(c){this.buffer=a.concat([this.buffer,a.from(c)]),this.emit("data",c)},o.prototype.end=function(c){c&&this.write(c),this.emit("end",c),this.emit("close"),this.writable=!1,this.readable=!1},i.exports=o}).call(this)}).call(this,e("_process"))},{_process:254,"safe-buffer":118,stream:289,util:294}],60:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("./data-stream"),s=e("jwa"),d=e("stream"),o=e("./tostring"),f=e("util");function c(u,h){return n.from(u,h).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(u,h,m){m=m||"utf8";var w=c(o(u),"binary"),k=c(o(h),m);return f.format("%s.%s",w,k)}function v(u){var h=u.header,m=u.payload,w=u.secret||u.privateKey,k=u.encoding,C=s(h.alg),O=p(h,m,k),P=C.sign(O,w);return f.format("%s.%s",O,P)}function l(u){var h=u.secret||u.privateKey||u.key,m=new a(h);this.readable=!0,this.header=u.header,this.encoding=u.encoding,this.secret=this.privateKey=this.key=m,this.payload=new a(u.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}f.inherits(l,d),l.prototype.sign=function(){try{var h=v({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",h),this.emit("data",h),this.emit("end"),this.readable=!1,h}catch(m){this.readable=!1,this.emit("error",m),this.emit("close")}},l.sign=v,i.exports=l},{"./data-stream":59,"./tostring":61,jwa:57,"safe-buffer":118,stream:289,util:294}],61:[function(e,i,t){var n=e("buffer").Buffer;i.exports=function(s){return typeof s=="string"?s:typeof s=="number"||n.isBuffer(s)?s.toString():JSON.stringify(s)}},{buffer:171}],62:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("./data-stream"),s=e("jwa"),d=e("stream"),o=e("./tostring"),f=e("util"),c=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function p(P){return Object.prototype.toString.call(P)==="[object Object]"}function v(P){if(p(P))return P;try{return JSON.parse(P)}catch{return}}function l(P){var M=P.split(".",1)[0];return v(n.from(M,"base64").toString("binary"))}function u(P){return P.split(".",2).join(".")}function h(P){return P.split(".")[2]}function m(P,M){M=M||"utf8";var D=P.split(".")[1];return n.from(D,"base64").toString(M)}function w(P){return c.test(P)&&!!l(P)}function k(P,M,D){if(!M){var $=new Error("Missing algorithm parameter for jws.verify");throw $.code="MISSING_ALGORITHM",$}P=o(P);var H=h(P),Z=u(P),re=s(M);return re.verify(Z,H,D)}function C(P,M){if(M=M||{},P=o(P),!w(P))return null;var D=l(P);if(!D)return null;var $=m(P);return(D.typ==="JWT"||M.json)&&($=JSON.parse($,M.encoding)),{header:D,payload:$,signature:h(P)}}function O(P){P=P||{};var M=P.secret||P.publicKey||P.key,D=new a(M);this.readable=!0,this.algorithm=P.algorithm,this.encoding=P.encoding,this.secret=this.publicKey=this.key=D,this.signature=new a(P.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}f.inherits(O,d),O.prototype.verify=function(){try{var M=k(this.signature.buffer,this.algorithm,this.key.buffer),D=C(this.signature.buffer,this.encoding);return this.emit("done",M,D),this.emit("data",M),this.emit("end"),this.readable=!1,M}catch($){this.readable=!1,this.emit("error",$),this.emit("close")}},O.decode=C,O.isValid=w,O.verify=k,i.exports=O},{"./data-stream":59,"./tostring":61,jwa:57,"safe-buffer":118,stream:289,util:294}],63:[function(e,i,t){(function(n){(function(){var a=this&&this.__createBinding||(Object.create?function(v,l,u,h){h===void 0&&(h=u),Object.defineProperty(v,h,{enumerable:!0,get:function(){return l[u]}})}:function(v,l,u,h){h===void 0&&(h=u),v[h]=l[u]}),s=this&&this.__setModuleDefault||(Object.create?function(v,l){Object.defineProperty(v,"default",{enumerable:!0,value:l})}:function(v,l){v.default=l}),d=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var l={};if(v!=null)for(var u in v)u!=="default"&&Object.prototype.hasOwnProperty.call(v,u)&&a(l,v,u);return s(l,v),l};Object.defineProperty(t,"__esModule",{value:!0}),t.TokenVerifier=t.AccessToken=void 0;const o=d(e("jsonwebtoken")),f=6*60*60;class c{constructor(l,u,h){if(l||(l={}.LIVEKIT_API_KEY),u||(u={}.LIVEKIT_API_SECRET),!l||!u)throw Error("api-key and api-secret must be set");this.apiKey=l,this.apiSecret=u,this.grants={},this.identity=h==null?void 0:h.identity,this.ttl=(h==null?void 0:h.ttl)||f,h!=null&&h.metadata&&(this.metadata=h.metadata),h!=null&&h.name&&(this.name=h.name)}addGrant(l){this.grants.video=l}set metadata(l){this.grants.metadata=l}set name(l){this.grants.name=l}get sha256(){return this.grants.sha256}set sha256(l){this.grants.sha256=l}toJwt(){var l;const u={issuer:this.apiKey,expiresIn:this.ttl,notBefore:0};if(this.identity)u.subject=this.identity,u.jwtid=this.identity;else if(!((l=this.grants.video)===null||l===void 0)&&l.roomJoin)throw Error("identity is required for join but not set");return o.sign(this.grants,this.apiSecret,u)}}t.AccessToken=c;class p{constructor(l,u){this.apiKey=l,this.apiSecret=u}verify(l){const u=o.verify(l,this.apiSecret,{issuer:this.apiKey});if(!u)throw Error("invalid token");return u}}t.TokenVerifier=p}).call(this)}).call(this,e("_process"))},{_process:254,jsonwebtoken:49}],64:[function(e,i,t){var n=this&&this.__awaiter||function(p,v,l,u){function h(m){return m instanceof l?m:new l(function(w){w(m)})}return new(l||(l=Promise))(function(m,w){function k(P){try{O(u.next(P))}catch(M){w(M)}}function C(P){try{O(u.throw(P))}catch(M){w(M)}}function O(P){P.done?m(P.value):h(P.value).then(k,C)}O((u=u.apply(p,v||[])).next())})},a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(t,"__esModule",{value:!0}),t.EgressClient=void 0;const s=e("./proto/livekit_egress"),d=a(e("./ServiceBase")),o=e("./TwirpRPC"),f="Egress";class c extends d.default{constructor(v,l,u){super(l,u),this.rpc=new o.TwirpRpc(v,o.livekitPackage)}startRoomCompositeEgress(v,l,u,h,m,w,k){return n(this,void 0,void 0,function*(){let C;if(u!==void 0)if(typeof u=="string")C=u;else{const re=u;C=re.layout,h=re.encodingOptions,m=re.audioOnly,w=re.videoOnly,k=re.customBaseUrl}C??(C=""),m??(m=!1),w??(w=!1),k??(k="");const{file:O,segments:P,stream:M,preset:D,advanced:$}=this.getOutputParams(l,h),H=s.RoomCompositeEgressRequest.toJSON({roomName:v,layout:C,audioOnly:m,videoOnly:w,customBaseUrl:k,file:O,stream:M,segments:P,preset:D,advanced:$}),Z=yield this.rpc.request(f,"StartRoomCompositeEgress",H,this.authHeader({roomRecord:!0}));return s.EgressInfo.fromJSON(Z)})}startWebEgress(v,l,u){return n(this,void 0,void 0,function*(){const h=(u==null?void 0:u.audioOnly)||!1,m=(u==null?void 0:u.videoOnly)||!1,{file:w,segments:k,stream:C,preset:O,advanced:P}=this.getOutputParams(l,u==null?void 0:u.encodingOptions),M=s.WebEgressRequest.toJSON({url:v,audioOnly:h,videoOnly:m,file:w,stream:C,segments:k,preset:O,advanced:P}),D=yield this.rpc.request(f,"StartWebEgress",M,this.authHeader({roomRecord:!0}));return s.EgressInfo.fromJSON(D)})}startTrackCompositeEgress(v,l,u,h,m){return n(this,void 0,void 0,function*(){let w;if(u!==void 0)if(typeof u=="string")w=u;else{const H=u;w=H.audioTrackId,h=H.videoTrackId,m=H.encodingOptions}w??(w=""),h??(h="");const{file:k,segments:C,stream:O,preset:P,advanced:M}=this.getOutputParams(l,m),D=s.TrackCompositeEgressRequest.toJSON({roomName:v,audioTrackId:w,videoTrackId:h,file:k,stream:O,segments:C,preset:P,advanced:M}),$=yield this.rpc.request(f,"StartTrackCompositeEgress",D,this.authHeader({roomRecord:!0}));return s.EgressInfo.fromJSON($)})}getOutputParams(v,l){let u,h,m,w,k;return v.filepath!==void 0?u=v:v.filenamePrefix!==void 0?m=v:h=v,l&&(typeof l=="number"?w=l:k=l),{file:u,segments:m,stream:h,preset:w,advanced:k}}startTrackEgress(v,l,u){return n(this,void 0,void 0,function*(){let h,m;l.filepath!==void 0?h=l:m=l;const w=s.TrackEgressRequest.toJSON({roomName:v,trackId:u,file:h,websocketUrl:m}),k=yield this.rpc.request(f,"StartTrackEgress",w,this.authHeader({roomRecord:!0}));return s.EgressInfo.fromJSON(k)})}updateLayout(v,l){return n(this,void 0,void 0,function*(){const u=yield this.rpc.request(f,"UpdateLayout",s.UpdateLayoutRequest.toJSON({egressId:v,layout:l}),this.authHeader({roomRecord:!0}));return s.EgressInfo.fromJSON(u)})}updateStream(v,l,u){return n(this,void 0,void 0,function*(){l??(l=[]),u??(u=[]);const h=yield this.rpc.request(f,"UpdateStream",s.UpdateStreamRequest.toJSON({egressId:v,addOutputUrls:l,removeOutputUrls:u}),this.authHeader({roomRecord:!0}));return s.EgressInfo.fromJSON(h)})}listEgress(v){var l;return n(this,void 0,void 0,function*(){v??(v="");const u=yield this.rpc.request(f,"ListEgress",s.ListEgressRequest.toJSON({roomName:v}),this.authHeader({roomRecord:!0}));return(l=s.ListEgressResponse.fromJSON(u).items)!==null&&l!==void 0?l:[]})}stopEgress(v){return n(this,void 0,void 0,function*(){const l=yield this.rpc.request(f,"StopEgress",s.StopEgressRequest.toJSON({egressId:v}),this.authHeader({roomRecord:!0}));return s.EgressInfo.fromJSON(l)})}}t.EgressClient=c},{"./ServiceBase":67,"./TwirpRPC":68,"./proto/livekit_egress":73}],65:[function(e,i,t){var n=this&&this.__awaiter||function(p,v,l,u){function h(m){return m instanceof l?m:new l(function(w){w(m)})}return new(l||(l=Promise))(function(m,w){function k(P){try{O(u.next(P))}catch(M){w(M)}}function C(P){try{O(u.throw(P))}catch(M){w(M)}}function O(P){P.done?m(P.value):h(P.value).then(k,C)}O((u=u.apply(p,v||[])).next())})},a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(t,"__esModule",{value:!0}),t.IngressClient=void 0;const s=e("./proto/livekit_ingress"),d=a(e("./ServiceBase")),o=e("./TwirpRPC"),f="Ingress";class c extends d.default{constructor(v,l,u){super(l,u),this.rpc=new o.TwirpRpc(v,o.livekitPackage)}createIngress(v,l){return n(this,void 0,void 0,function*(){let u="",h="",m="",w="",k,C;l!==void 0&&(u=l.name||"",h=l.roomName||"",m=l.participantName||"",w=l.participantIdentity||"",k=l.audioParams,C=l.videoParams);const O=s.CreateIngressRequest.toJSON({inputType:v,name:u,roomName:h,participantIdentity:w,participantName:m,audio:k,video:C}),P=yield this.rpc.request(f,"CreateIngress",O,this.authHeader({ingressAdmin:!0}));return s.IngressInfo.fromJSON(P)})}updateIngress(v,l){return n(this,void 0,void 0,function*(){const u=l.name||"",h=l.roomName||"",m=l.participantName||"",w=l.participantIdentity||"",k=l.audioParams,C=l.videoParams,O=s.UpdateIngressRequest.toJSON({ingressId:v,name:u,roomName:h,participantIdentity:w,participantName:m,audio:k,video:C}),P=yield this.rpc.request(f,"UpdateIngress",O,this.authHeader({ingressAdmin:!0}));return s.IngressInfo.fromJSON(P)})}listIngress(v){var l;return n(this,void 0,void 0,function*(){v??(v="");const u=yield this.rpc.request(f,"ListIngress",s.ListIngressRequest.toJSON({roomName:v}),this.authHeader({ingressAdmin:!0}));return(l=s.ListIngressResponse.fromJSON(u).items)!==null&&l!==void 0?l:[]})}deleteIngress(v){return n(this,void 0,void 0,function*(){const l=yield this.rpc.request(f,"DeleteIngress",s.DeleteIngressRequest.toJSON({ingressId:v}),this.authHeader({ingressAdmin:!0}));return s.IngressInfo.fromJSON(l)})}}t.IngressClient=c},{"./ServiceBase":67,"./TwirpRPC":68,"./proto/livekit_ingress":74}],66:[function(e,i,t){var n=this&&this.__awaiter||function(v,l,u,h){function m(w){return w instanceof u?w:new u(function(k){k(w)})}return new(u||(u=Promise))(function(w,k){function C(M){try{P(h.next(M))}catch(D){k(D)}}function O(M){try{P(h.throw(M))}catch(D){k(D)}}function P(M){M.done?w(M.value):m(M.value).then(C,O)}P((h=h.apply(v,l||[])).next())})},a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(t,"__esModule",{value:!0}),t.RoomServiceClient=void 0;const s=e("./proto/livekit_models"),d=e("./proto/livekit_room"),o=a(e("./ServiceBase")),f=e("./TwirpRPC"),c="RoomService";class p extends o.default{constructor(l,u,h){super(u,h),this.rpc=new f.TwirpRpc(l,f.livekitPackage)}createRoom(l){return n(this,void 0,void 0,function*(){const u=yield this.rpc.request(c,"CreateRoom",d.CreateRoomRequest.toJSON(d.CreateRoomRequest.fromPartial(l)),this.authHeader({roomCreate:!0}));return s.Room.fromJSON(u)})}listRooms(l){var u;return n(this,void 0,void 0,function*(){const h=yield this.rpc.request(c,"ListRooms",d.ListRoomsRequest.toJSON({names:l??[]}),this.authHeader({roomList:!0}));return(u=d.ListRoomsResponse.fromJSON(h).rooms)!==null&&u!==void 0?u:[]})}deleteRoom(l){return n(this,void 0,void 0,function*(){yield this.rpc.request(c,"DeleteRoom",d.DeleteRoomRequest.toJSON({room:l}),this.authHeader({roomCreate:!0}))})}updateRoomMetadata(l,u){return n(this,void 0,void 0,function*(){const h=yield this.rpc.request(c,"UpdateRoomMetadata",d.UpdateRoomMetadataRequest.toJSON({room:l,metadata:u}),this.authHeader({roomAdmin:!0,room:l}));return s.Room.fromJSON(h)})}listParticipants(l){var u;return n(this,void 0,void 0,function*(){const h=yield this.rpc.request(c,"ListParticipants",d.ListParticipantsRequest.toJSON({room:l}),this.authHeader({roomAdmin:!0,room:l}));return(u=d.ListParticipantsResponse.fromJSON(h).participants)!==null&&u!==void 0?u:[]})}getParticipant(l,u){return n(this,void 0,void 0,function*(){const h=yield this.rpc.request(c,"GetParticipant",d.RoomParticipantIdentity.toJSON({room:l,identity:u}),this.authHeader({roomAdmin:!0,room:l}));return s.ParticipantInfo.fromJSON(h)})}removeParticipant(l,u){return n(this,void 0,void 0,function*(){yield this.rpc.request(c,"RemoveParticipant",d.RoomParticipantIdentity.toJSON({room:l,identity:u}),this.authHeader({roomAdmin:!0,room:l}))})}mutePublishedTrack(l,u,h,m){return n(this,void 0,void 0,function*(){const w=d.MuteRoomTrackRequest.toJSON({room:l,identity:u,trackSid:h,muted:m}),k=yield this.rpc.request(c,"MutePublishedTrack",w,this.authHeader({roomAdmin:!0,room:l}));return d.MuteRoomTrackResponse.fromJSON(k).track})}updateParticipant(l,u,h,m,w){return n(this,void 0,void 0,function*(){const k={room:l,identity:u,metadata:h||"",permission:m,name:w||""},C=yield this.rpc.request(c,"UpdateParticipant",d.UpdateParticipantRequest.toJSON(k),this.authHeader({roomAdmin:!0,room:l}));return s.ParticipantInfo.fromJSON(C)})}updateSubscriptions(l,u,h,m){return n(this,void 0,void 0,function*(){const w=d.UpdateSubscriptionsRequest.toJSON({room:l,identity:u,trackSids:h,subscribe:m,participantTracks:[]});yield this.rpc.request(c,"UpdateSubscriptions",w,this.authHeader({roomAdmin:!0,room:l}))})}sendData(l,u,h,m=[]){return n(this,void 0,void 0,function*(){const w=d.SendDataRequest.toJSON({room:l,data:u,kind:h,destinationSids:m});yield this.rpc.request(c,"SendData",w,this.authHeader({roomAdmin:!0,room:l}))})}}t.RoomServiceClient=p},{"./ServiceBase":67,"./TwirpRPC":68,"./proto/livekit_models":75,"./proto/livekit_room":76}],67:[function(e,i,t){Object.defineProperty(t,"__esModule",{value:!0});const n=e("./AccessToken");class a{constructor(d,o,f){this.apiKey=d,this.secret=o,this.ttl=f||"10m"}authHeader(d){const o=new n.AccessToken(this.apiKey,this.secret,{ttl:this.ttl});return o.addGrant(d),{Authorization:`Bearer ${o.toJwt()}`}}}t.default=a},{"./AccessToken":63}],68:[function(e,i,t){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.TwirpRpc=t.livekitPackage=void 0;const a=n(e("axios")),s=n(e("camelcase-keys")),d="/twirp";t.livekitPackage="livekit";class o{constructor(c,p,v){this.host=c,this.pkg=p,this.prefix=v||d,this.instance=a.default.create({baseURL:c})}request(c,p,v,l){return new Promise((u,h)=>{const m=`${this.prefix}/${this.pkg}.${c}/${p}`;this.instance.post(m,v,{headers:l}).then(w=>{u(s.default(w.data,{deep:!0}))}).catch(h)})}}t.TwirpRpc=o},{axios:9,"camelcase-keys":39}],69:[function(e,i,t){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebhookReceiver=t.authorizeHeader=void 0;const a=n(e("crypto")),s=e("./AccessToken"),d=e("./proto/livekit_webhook");t.authorizeHeader="Authorize";class o{constructor(c,p){this.verifier=new s.TokenVerifier(c,p)}receive(c,p,v=!1){if(!v){if(!p)throw new Error("authorization header is empty");const l=this.verifier.verify(p),u=a.default.createHash("sha256");if(u.update(c),l.sha256!==u.digest("base64"))throw new Error("sha256 checksum of body does not match")}return d.WebhookEvent.fromJSON(JSON.parse(c))}}t.WebhookReceiver=o},{"./AccessToken":63,"./proto/livekit_webhook":77,crypto:180}],70:[function(e,i,t){Object.defineProperty(t,"__esModule",{value:!0})},{}],71:[function(e,i,t){var n=this&&this.__createBinding||(Object.create?function(f,c,p,v){v===void 0&&(v=p),Object.defineProperty(f,v,{enumerable:!0,get:function(){return c[p]}})}:function(f,c,p,v){v===void 0&&(v=p),f[v]=c[p]}),a=this&&this.__exportStar||function(f,c){for(var p in f)p!=="default"&&!Object.prototype.hasOwnProperty.call(c,p)&&n(c,f,p)};Object.defineProperty(t,"__esModule",{value:!0}),t.TrackType=t.TrackInfo=t.Room=t.ParticipantPermission=t.ParticipantInfo_State=t.ParticipantInfo=t.DataPacket_Kind=t.IngressVideoOptions=t.IngressState=t.IngressInput=t.IngressInfo=t.IngressAudioOptions=t.StreamProtocol=t.StreamOutput=t.SegmentedFileProtocol=t.SegmentedFileOutput=t.EncodingOptionsPreset=t.EncodingOptions=t.EncodedFileType=t.EncodedFileOutput=t.EgressInfo=t.DirectFileOutput=void 0,a(e("./AccessToken"),t),a(e("./EgressClient"),t),a(e("./grants"),t),a(e("./IngressClient"),t);var s=e("./proto/livekit_egress");Object.defineProperty(t,"DirectFileOutput",{enumerable:!0,get:function(){return s.DirectFileOutput}}),Object.defineProperty(t,"EgressInfo",{enumerable:!0,get:function(){return s.EgressInfo}}),Object.defineProperty(t,"EncodedFileOutput",{enumerable:!0,get:function(){return s.EncodedFileOutput}}),Object.defineProperty(t,"EncodedFileType",{enumerable:!0,get:function(){return s.EncodedFileType}}),Object.defineProperty(t,"EncodingOptions",{enumerable:!0,get:function(){return s.EncodingOptions}}),Object.defineProperty(t,"EncodingOptionsPreset",{enumerable:!0,get:function(){return s.EncodingOptionsPreset}}),Object.defineProperty(t,"SegmentedFileOutput",{enumerable:!0,get:function(){return s.SegmentedFileOutput}}),Object.defineProperty(t,"SegmentedFileProtocol",{enumerable:!0,get:function(){return s.SegmentedFileProtocol}}),Object.defineProperty(t,"StreamOutput",{enumerable:!0,get:function(){return s.StreamOutput}}),Object.defineProperty(t,"StreamProtocol",{enumerable:!0,get:function(){return s.StreamProtocol}});var d=e("./proto/livekit_ingress");Object.defineProperty(t,"IngressAudioOptions",{enumerable:!0,get:function(){return d.IngressAudioOptions}}),Object.defineProperty(t,"IngressInfo",{enumerable:!0,get:function(){return d.IngressInfo}}),Object.defineProperty(t,"IngressInput",{enumerable:!0,get:function(){return d.IngressInput}}),Object.defineProperty(t,"IngressState",{enumerable:!0,get:function(){return d.IngressState}}),Object.defineProperty(t,"IngressVideoOptions",{enumerable:!0,get:function(){return d.IngressVideoOptions}});var o=e("./proto/livekit_models");Object.defineProperty(t,"DataPacket_Kind",{enumerable:!0,get:function(){return o.DataPacket_Kind}}),Object.defineProperty(t,"ParticipantInfo",{enumerable:!0,get:function(){return o.ParticipantInfo}}),Object.defineProperty(t,"ParticipantInfo_State",{enumerable:!0,get:function(){return o.ParticipantInfo_State}}),Object.defineProperty(t,"ParticipantPermission",{enumerable:!0,get:function(){return o.ParticipantPermission}}),Object.defineProperty(t,"Room",{enumerable:!0,get:function(){return o.Room}}),Object.defineProperty(t,"TrackInfo",{enumerable:!0,get:function(){return o.TrackInfo}}),Object.defineProperty(t,"TrackType",{enumerable:!0,get:function(){return o.TrackType}}),a(e("./RoomServiceClient"),t),a(e("./WebhookReceiver"),t)},{"./AccessToken":63,"./EgressClient":64,"./IngressClient":65,"./RoomServiceClient":66,"./WebhookReceiver":69,"./grants":70,"./proto/livekit_egress":73,"./proto/livekit_ingress":74,"./proto/livekit_models":75}],72:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(t,"__esModule",{value:!0}),t.Timestamp=t.protobufPackage=void 0;const s=a(e("long")),d=a(e("protobufjs/minimal"));t.protobufPackage="google.protobuf";function o(){return{seconds:0,nanos:0}}t.Timestamp={encode(v,l=d.default.Writer.create()){return v.seconds!==0&&l.uint32(8).int64(v.seconds),v.nanos!==0&&l.uint32(16).int32(v.nanos),l},decode(v,l){const u=v instanceof d.default.Reader?v:new d.default.Reader(v);let h=l===void 0?u.len:u.pos+l;const m=o();for(;u.pos<h;){const w=u.uint32();switch(w>>>3){case 1:m.seconds=c(u.int64());break;case 2:m.nanos=u.int32();break;default:u.skipType(w&7);break}}return m},fromJSON(v){return{seconds:p(v.seconds)?Number(v.seconds):0,nanos:p(v.nanos)?Number(v.nanos):0}},toJSON(v){const l={};return v.seconds!==void 0&&(l.seconds=Math.round(v.seconds)),v.nanos!==void 0&&(l.nanos=Math.round(v.nanos)),l},fromPartial(v){var l,u;const h=o();return h.seconds=(l=v.seconds)!==null&&l!==void 0?l:0,h.nanos=(u=v.nanos)!==null&&u!==void 0?u:0,h}};var f=(()=>{if(typeof f<"u")return f;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function c(v){if(v.gt(Number.MAX_SAFE_INTEGER))throw new f.Error("Value is larger than Number.MAX_SAFE_INTEGER");return v.toNumber()}d.default.util.Long!==s.default&&(d.default.util.Long=s.default,d.default.configure());function p(v){return v!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{long:85,"protobufjs/minimal":89}],73:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTrackEgress=t.SegmentsInfo=t.FileInfo=t.StreamInfo=t.StreamInfoList=t.EgressInfo=t.StopEgressRequest=t.ListEgressResponse=t.ListEgressRequest=t.UpdateStreamRequest=t.UpdateLayoutRequest=t.EncodingOptions=t.StreamOutput=t.AliOSSUpload=t.AzureBlobUpload=t.GCPUpload=t.S3Upload_MetadataEntry=t.S3Upload=t.DirectFileOutput=t.SegmentedFileOutput=t.EncodedFileOutput=t.WebEgressRequest=t.TrackEgressRequest=t.TrackCompositeEgressRequest=t.RoomCompositeEgressRequest=t.streamInfo_StatusToJSON=t.streamInfo_StatusFromJSON=t.StreamInfo_Status=t.egressStatusToJSON=t.egressStatusFromJSON=t.EgressStatus=t.encodingOptionsPresetToJSON=t.encodingOptionsPresetFromJSON=t.EncodingOptionsPreset=t.videoCodecToJSON=t.videoCodecFromJSON=t.VideoCodec=t.audioCodecToJSON=t.audioCodecFromJSON=t.AudioCodec=t.segmentedFileProtocolToJSON=t.segmentedFileProtocolFromJSON=t.SegmentedFileProtocol=t.streamProtocolToJSON=t.streamProtocolFromJSON=t.StreamProtocol=t.encodedFileTypeToJSON=t.encodedFileTypeFromJSON=t.EncodedFileType=t.protobufPackage=void 0;const s=a(e("long")),d=a(e("protobufjs/minimal"));t.protobufPackage="livekit";var o;(function(y){y[y.DEFAULT_FILETYPE=0]="DEFAULT_FILETYPE",y[y.MP4=1]="MP4",y[y.OGG=2]="OGG",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(o=t.EncodedFileType||(t.EncodedFileType={}));function f(y){switch(y){case 0:case"DEFAULT_FILETYPE":return o.DEFAULT_FILETYPE;case 1:case"MP4":return o.MP4;case 2:case"OGG":return o.OGG;case-1:case"UNRECOGNIZED":default:return o.UNRECOGNIZED}}t.encodedFileTypeFromJSON=f;function c(y){switch(y){case o.DEFAULT_FILETYPE:return"DEFAULT_FILETYPE";case o.MP4:return"MP4";case o.OGG:return"OGG";case o.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.encodedFileTypeToJSON=c;var p;(function(y){y[y.DEFAULT_PROTOCOL=0]="DEFAULT_PROTOCOL",y[y.RTMP=1]="RTMP",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(p=t.StreamProtocol||(t.StreamProtocol={}));function v(y){switch(y){case 0:case"DEFAULT_PROTOCOL":return p.DEFAULT_PROTOCOL;case 1:case"RTMP":return p.RTMP;case-1:case"UNRECOGNIZED":default:return p.UNRECOGNIZED}}t.streamProtocolFromJSON=v;function l(y){switch(y){case p.DEFAULT_PROTOCOL:return"DEFAULT_PROTOCOL";case p.RTMP:return"RTMP";case p.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.streamProtocolToJSON=l;var u;(function(y){y[y.DEFAULT_SEGMENTED_FILE_PROTOCOL=0]="DEFAULT_SEGMENTED_FILE_PROTOCOL",y[y.HLS_PROTOCOL=1]="HLS_PROTOCOL",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(u=t.SegmentedFileProtocol||(t.SegmentedFileProtocol={}));function h(y){switch(y){case 0:case"DEFAULT_SEGMENTED_FILE_PROTOCOL":return u.DEFAULT_SEGMENTED_FILE_PROTOCOL;case 1:case"HLS_PROTOCOL":return u.HLS_PROTOCOL;case-1:case"UNRECOGNIZED":default:return u.UNRECOGNIZED}}t.segmentedFileProtocolFromJSON=h;function m(y){switch(y){case u.DEFAULT_SEGMENTED_FILE_PROTOCOL:return"DEFAULT_SEGMENTED_FILE_PROTOCOL";case u.HLS_PROTOCOL:return"HLS_PROTOCOL";case u.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.segmentedFileProtocolToJSON=m;var w;(function(y){y[y.DEFAULT_AC=0]="DEFAULT_AC",y[y.OPUS=1]="OPUS",y[y.AAC=2]="AAC",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(w=t.AudioCodec||(t.AudioCodec={}));function k(y){switch(y){case 0:case"DEFAULT_AC":return w.DEFAULT_AC;case 1:case"OPUS":return w.OPUS;case 2:case"AAC":return w.AAC;case-1:case"UNRECOGNIZED":default:return w.UNRECOGNIZED}}t.audioCodecFromJSON=k;function C(y){switch(y){case w.DEFAULT_AC:return"DEFAULT_AC";case w.OPUS:return"OPUS";case w.AAC:return"AAC";case w.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.audioCodecToJSON=C;var O;(function(y){y[y.DEFAULT_VC=0]="DEFAULT_VC",y[y.H264_BASELINE=1]="H264_BASELINE",y[y.H264_MAIN=2]="H264_MAIN",y[y.H264_HIGH=3]="H264_HIGH",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(O=t.VideoCodec||(t.VideoCodec={}));function P(y){switch(y){case 0:case"DEFAULT_VC":return O.DEFAULT_VC;case 1:case"H264_BASELINE":return O.H264_BASELINE;case 2:case"H264_MAIN":return O.H264_MAIN;case 3:case"H264_HIGH":return O.H264_HIGH;case-1:case"UNRECOGNIZED":default:return O.UNRECOGNIZED}}t.videoCodecFromJSON=P;function M(y){switch(y){case O.DEFAULT_VC:return"DEFAULT_VC";case O.H264_BASELINE:return"H264_BASELINE";case O.H264_MAIN:return"H264_MAIN";case O.H264_HIGH:return"H264_HIGH";case O.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.videoCodecToJSON=M;var D;(function(y){y[y.H264_720P_30=0]="H264_720P_30",y[y.H264_720P_60=1]="H264_720P_60",y[y.H264_1080P_30=2]="H264_1080P_30",y[y.H264_1080P_60=3]="H264_1080P_60",y[y.PORTRAIT_H264_720P_30=4]="PORTRAIT_H264_720P_30",y[y.PORTRAIT_H264_720P_60=5]="PORTRAIT_H264_720P_60",y[y.PORTRAIT_H264_1080P_30=6]="PORTRAIT_H264_1080P_30",y[y.PORTRAIT_H264_1080P_60=7]="PORTRAIT_H264_1080P_60",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(D=t.EncodingOptionsPreset||(t.EncodingOptionsPreset={}));function $(y){switch(y){case 0:case"H264_720P_30":return D.H264_720P_30;case 1:case"H264_720P_60":return D.H264_720P_60;case 2:case"H264_1080P_30":return D.H264_1080P_30;case 3:case"H264_1080P_60":return D.H264_1080P_60;case 4:case"PORTRAIT_H264_720P_30":return D.PORTRAIT_H264_720P_30;case 5:case"PORTRAIT_H264_720P_60":return D.PORTRAIT_H264_720P_60;case 6:case"PORTRAIT_H264_1080P_30":return D.PORTRAIT_H264_1080P_30;case 7:case"PORTRAIT_H264_1080P_60":return D.PORTRAIT_H264_1080P_60;case-1:case"UNRECOGNIZED":default:return D.UNRECOGNIZED}}t.encodingOptionsPresetFromJSON=$;function H(y){switch(y){case D.H264_720P_30:return"H264_720P_30";case D.H264_720P_60:return"H264_720P_60";case D.H264_1080P_30:return"H264_1080P_30";case D.H264_1080P_60:return"H264_1080P_60";case D.PORTRAIT_H264_720P_30:return"PORTRAIT_H264_720P_30";case D.PORTRAIT_H264_720P_60:return"PORTRAIT_H264_720P_60";case D.PORTRAIT_H264_1080P_30:return"PORTRAIT_H264_1080P_30";case D.PORTRAIT_H264_1080P_60:return"PORTRAIT_H264_1080P_60";case D.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.encodingOptionsPresetToJSON=H;var Z;(function(y){y[y.EGRESS_STARTING=0]="EGRESS_STARTING",y[y.EGRESS_ACTIVE=1]="EGRESS_ACTIVE",y[y.EGRESS_ENDING=2]="EGRESS_ENDING",y[y.EGRESS_COMPLETE=3]="EGRESS_COMPLETE",y[y.EGRESS_FAILED=4]="EGRESS_FAILED",y[y.EGRESS_ABORTED=5]="EGRESS_ABORTED",y[y.EGRESS_LIMIT_REACHED=6]="EGRESS_LIMIT_REACHED",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(Z=t.EgressStatus||(t.EgressStatus={}));function re(y){switch(y){case 0:case"EGRESS_STARTING":return Z.EGRESS_STARTING;case 1:case"EGRESS_ACTIVE":return Z.EGRESS_ACTIVE;case 2:case"EGRESS_ENDING":return Z.EGRESS_ENDING;case 3:case"EGRESS_COMPLETE":return Z.EGRESS_COMPLETE;case 4:case"EGRESS_FAILED":return Z.EGRESS_FAILED;case 5:case"EGRESS_ABORTED":return Z.EGRESS_ABORTED;case 6:case"EGRESS_LIMIT_REACHED":return Z.EGRESS_LIMIT_REACHED;case-1:case"UNRECOGNIZED":default:return Z.UNRECOGNIZED}}t.egressStatusFromJSON=re;function Y(y){switch(y){case Z.EGRESS_STARTING:return"EGRESS_STARTING";case Z.EGRESS_ACTIVE:return"EGRESS_ACTIVE";case Z.EGRESS_ENDING:return"EGRESS_ENDING";case Z.EGRESS_COMPLETE:return"EGRESS_COMPLETE";case Z.EGRESS_FAILED:return"EGRESS_FAILED";case Z.EGRESS_ABORTED:return"EGRESS_ABORTED";case Z.EGRESS_LIMIT_REACHED:return"EGRESS_LIMIT_REACHED";case Z.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.egressStatusToJSON=Y;var N;(function(y){y[y.ACTIVE=0]="ACTIVE",y[y.FINISHED=1]="FINISHED",y[y.FAILED=2]="FAILED",y[y.UNRECOGNIZED=-1]="UNRECOGNIZED"})(N=t.StreamInfo_Status||(t.StreamInfo_Status={}));function x(y){switch(y){case 0:case"ACTIVE":return N.ACTIVE;case 1:case"FINISHED":return N.FINISHED;case 2:case"FAILED":return N.FAILED;case-1:case"UNRECOGNIZED":default:return N.UNRECOGNIZED}}t.streamInfo_StatusFromJSON=x;function b(y){switch(y){case N.ACTIVE:return"ACTIVE";case N.FINISHED:return"FINISHED";case N.FAILED:return"FAILED";case N.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.streamInfo_StatusToJSON=b;function _(){return{roomName:"",layout:"",audioOnly:!1,videoOnly:!1,customBaseUrl:"",file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}t.RoomCompositeEgressRequest={encode(y,U=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&U.uint32(10).string(y.roomName),y.layout!==void 0&&y.layout!==""&&U.uint32(18).string(y.layout),y.audioOnly===!0&&U.uint32(24).bool(y.audioOnly),y.videoOnly===!0&&U.uint32(32).bool(y.videoOnly),y.customBaseUrl!==void 0&&y.customBaseUrl!==""&&U.uint32(42).string(y.customBaseUrl),y.file!==void 0&&t.EncodedFileOutput.encode(y.file,U.uint32(50).fork()).ldelim(),y.stream!==void 0&&t.StreamOutput.encode(y.stream,U.uint32(58).fork()).ldelim(),y.segments!==void 0&&t.SegmentedFileOutput.encode(y.segments,U.uint32(82).fork()).ldelim(),y.preset!==void 0&&U.uint32(64).int32(y.preset),y.advanced!==void 0&&t.EncodingOptions.encode(y.advanced,U.uint32(74).fork()).ldelim(),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=_();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.roomName=q.string();break;case 2:j.layout=q.string();break;case 3:j.audioOnly=q.bool();break;case 4:j.videoOnly=q.bool();break;case 5:j.customBaseUrl=q.string();break;case 6:j.file=t.EncodedFileOutput.decode(q,q.uint32());break;case 7:j.stream=t.StreamOutput.decode(q,q.uint32());break;case 10:j.segments=t.SegmentedFileOutput.decode(q,q.uint32());break;case 8:j.preset=q.int32();break;case 9:j.advanced=t.EncodingOptions.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{roomName:fe(y.roomName)?String(y.roomName):"",layout:fe(y.layout)?String(y.layout):"",audioOnly:fe(y.audioOnly)?!!y.audioOnly:!1,videoOnly:fe(y.videoOnly)?!!y.videoOnly:!1,customBaseUrl:fe(y.customBaseUrl)?String(y.customBaseUrl):"",file:fe(y.file)?t.EncodedFileOutput.fromJSON(y.file):void 0,stream:fe(y.stream)?t.StreamOutput.fromJSON(y.stream):void 0,segments:fe(y.segments)?t.SegmentedFileOutput.fromJSON(y.segments):void 0,preset:fe(y.preset)?$(y.preset):void 0,advanced:fe(y.advanced)?t.EncodingOptions.fromJSON(y.advanced):void 0}},toJSON(y){const U={};return y.roomName!==void 0&&(U.roomName=y.roomName),y.layout!==void 0&&(U.layout=y.layout),y.audioOnly!==void 0&&(U.audioOnly=y.audioOnly),y.videoOnly!==void 0&&(U.videoOnly=y.videoOnly),y.customBaseUrl!==void 0&&(U.customBaseUrl=y.customBaseUrl),y.file!==void 0&&(U.file=y.file?t.EncodedFileOutput.toJSON(y.file):void 0),y.stream!==void 0&&(U.stream=y.stream?t.StreamOutput.toJSON(y.stream):void 0),y.segments!==void 0&&(U.segments=y.segments?t.SegmentedFileOutput.toJSON(y.segments):void 0),y.preset!==void 0&&(U.preset=y.preset!==void 0?H(y.preset):void 0),y.advanced!==void 0&&(U.advanced=y.advanced?t.EncodingOptions.toJSON(y.advanced):void 0),U},fromPartial(y){var U,q,de,j,S,F;const K=_();return K.roomName=(U=y.roomName)!==null&&U!==void 0?U:"",K.layout=(q=y.layout)!==null&&q!==void 0?q:"",K.audioOnly=(de=y.audioOnly)!==null&&de!==void 0?de:!1,K.videoOnly=(j=y.videoOnly)!==null&&j!==void 0?j:!1,K.customBaseUrl=(S=y.customBaseUrl)!==null&&S!==void 0?S:"",K.file=y.file!==void 0&&y.file!==null?t.EncodedFileOutput.fromPartial(y.file):void 0,K.stream=y.stream!==void 0&&y.stream!==null?t.StreamOutput.fromPartial(y.stream):void 0,K.segments=y.segments!==void 0&&y.segments!==null?t.SegmentedFileOutput.fromPartial(y.segments):void 0,K.preset=(F=y.preset)!==null&&F!==void 0?F:void 0,K.advanced=y.advanced!==void 0&&y.advanced!==null?t.EncodingOptions.fromPartial(y.advanced):void 0,K}};function g(){return{roomName:"",audioTrackId:"",videoTrackId:"",file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}t.TrackCompositeEgressRequest={encode(y,U=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&U.uint32(10).string(y.roomName),y.audioTrackId!==void 0&&y.audioTrackId!==""&&U.uint32(18).string(y.audioTrackId),y.videoTrackId!==void 0&&y.videoTrackId!==""&&U.uint32(26).string(y.videoTrackId),y.file!==void 0&&t.EncodedFileOutput.encode(y.file,U.uint32(34).fork()).ldelim(),y.stream!==void 0&&t.StreamOutput.encode(y.stream,U.uint32(42).fork()).ldelim(),y.segments!==void 0&&t.SegmentedFileOutput.encode(y.segments,U.uint32(66).fork()).ldelim(),y.preset!==void 0&&U.uint32(48).int32(y.preset),y.advanced!==void 0&&t.EncodingOptions.encode(y.advanced,U.uint32(58).fork()).ldelim(),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=g();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.roomName=q.string();break;case 2:j.audioTrackId=q.string();break;case 3:j.videoTrackId=q.string();break;case 4:j.file=t.EncodedFileOutput.decode(q,q.uint32());break;case 5:j.stream=t.StreamOutput.decode(q,q.uint32());break;case 8:j.segments=t.SegmentedFileOutput.decode(q,q.uint32());break;case 6:j.preset=q.int32();break;case 7:j.advanced=t.EncodingOptions.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{roomName:fe(y.roomName)?String(y.roomName):"",audioTrackId:fe(y.audioTrackId)?String(y.audioTrackId):"",videoTrackId:fe(y.videoTrackId)?String(y.videoTrackId):"",file:fe(y.file)?t.EncodedFileOutput.fromJSON(y.file):void 0,stream:fe(y.stream)?t.StreamOutput.fromJSON(y.stream):void 0,segments:fe(y.segments)?t.SegmentedFileOutput.fromJSON(y.segments):void 0,preset:fe(y.preset)?$(y.preset):void 0,advanced:fe(y.advanced)?t.EncodingOptions.fromJSON(y.advanced):void 0}},toJSON(y){const U={};return y.roomName!==void 0&&(U.roomName=y.roomName),y.audioTrackId!==void 0&&(U.audioTrackId=y.audioTrackId),y.videoTrackId!==void 0&&(U.videoTrackId=y.videoTrackId),y.file!==void 0&&(U.file=y.file?t.EncodedFileOutput.toJSON(y.file):void 0),y.stream!==void 0&&(U.stream=y.stream?t.StreamOutput.toJSON(y.stream):void 0),y.segments!==void 0&&(U.segments=y.segments?t.SegmentedFileOutput.toJSON(y.segments):void 0),y.preset!==void 0&&(U.preset=y.preset!==void 0?H(y.preset):void 0),y.advanced!==void 0&&(U.advanced=y.advanced?t.EncodingOptions.toJSON(y.advanced):void 0),U},fromPartial(y){var U,q,de,j;const S=g();return S.roomName=(U=y.roomName)!==null&&U!==void 0?U:"",S.audioTrackId=(q=y.audioTrackId)!==null&&q!==void 0?q:"",S.videoTrackId=(de=y.videoTrackId)!==null&&de!==void 0?de:"",S.file=y.file!==void 0&&y.file!==null?t.EncodedFileOutput.fromPartial(y.file):void 0,S.stream=y.stream!==void 0&&y.stream!==null?t.StreamOutput.fromPartial(y.stream):void 0,S.segments=y.segments!==void 0&&y.segments!==null?t.SegmentedFileOutput.fromPartial(y.segments):void 0,S.preset=(j=y.preset)!==null&&j!==void 0?j:void 0,S.advanced=y.advanced!==void 0&&y.advanced!==null?t.EncodingOptions.fromPartial(y.advanced):void 0,S}};function E(){return{roomName:"",trackId:"",file:void 0,websocketUrl:void 0}}t.TrackEgressRequest={encode(y,U=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&U.uint32(10).string(y.roomName),y.trackId!==void 0&&y.trackId!==""&&U.uint32(18).string(y.trackId),y.file!==void 0&&t.DirectFileOutput.encode(y.file,U.uint32(26).fork()).ldelim(),y.websocketUrl!==void 0&&U.uint32(34).string(y.websocketUrl),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=E();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.roomName=q.string();break;case 2:j.trackId=q.string();break;case 3:j.file=t.DirectFileOutput.decode(q,q.uint32());break;case 4:j.websocketUrl=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{roomName:fe(y.roomName)?String(y.roomName):"",trackId:fe(y.trackId)?String(y.trackId):"",file:fe(y.file)?t.DirectFileOutput.fromJSON(y.file):void 0,websocketUrl:fe(y.websocketUrl)?String(y.websocketUrl):void 0}},toJSON(y){const U={};return y.roomName!==void 0&&(U.roomName=y.roomName),y.trackId!==void 0&&(U.trackId=y.trackId),y.file!==void 0&&(U.file=y.file?t.DirectFileOutput.toJSON(y.file):void 0),y.websocketUrl!==void 0&&(U.websocketUrl=y.websocketUrl),U},fromPartial(y){var U,q,de;const j=E();return j.roomName=(U=y.roomName)!==null&&U!==void 0?U:"",j.trackId=(q=y.trackId)!==null&&q!==void 0?q:"",j.file=y.file!==void 0&&y.file!==null?t.DirectFileOutput.fromPartial(y.file):void 0,j.websocketUrl=(de=y.websocketUrl)!==null&&de!==void 0?de:void 0,j}};function T(){return{url:"",audioOnly:!1,videoOnly:!1,file:void 0,stream:void 0,segments:void 0,preset:void 0,advanced:void 0}}t.WebEgressRequest={encode(y,U=d.default.Writer.create()){return y.url!==void 0&&y.url!==""&&U.uint32(10).string(y.url),y.audioOnly===!0&&U.uint32(16).bool(y.audioOnly),y.videoOnly===!0&&U.uint32(24).bool(y.videoOnly),y.file!==void 0&&t.EncodedFileOutput.encode(y.file,U.uint32(34).fork()).ldelim(),y.stream!==void 0&&t.StreamOutput.encode(y.stream,U.uint32(42).fork()).ldelim(),y.segments!==void 0&&t.SegmentedFileOutput.encode(y.segments,U.uint32(50).fork()).ldelim(),y.preset!==void 0&&U.uint32(56).int32(y.preset),y.advanced!==void 0&&t.EncodingOptions.encode(y.advanced,U.uint32(66).fork()).ldelim(),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=T();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.url=q.string();break;case 2:j.audioOnly=q.bool();break;case 3:j.videoOnly=q.bool();break;case 4:j.file=t.EncodedFileOutput.decode(q,q.uint32());break;case 5:j.stream=t.StreamOutput.decode(q,q.uint32());break;case 6:j.segments=t.SegmentedFileOutput.decode(q,q.uint32());break;case 7:j.preset=q.int32();break;case 8:j.advanced=t.EncodingOptions.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{url:fe(y.url)?String(y.url):"",audioOnly:fe(y.audioOnly)?!!y.audioOnly:!1,videoOnly:fe(y.videoOnly)?!!y.videoOnly:!1,file:fe(y.file)?t.EncodedFileOutput.fromJSON(y.file):void 0,stream:fe(y.stream)?t.StreamOutput.fromJSON(y.stream):void 0,segments:fe(y.segments)?t.SegmentedFileOutput.fromJSON(y.segments):void 0,preset:fe(y.preset)?$(y.preset):void 0,advanced:fe(y.advanced)?t.EncodingOptions.fromJSON(y.advanced):void 0}},toJSON(y){const U={};return y.url!==void 0&&(U.url=y.url),y.audioOnly!==void 0&&(U.audioOnly=y.audioOnly),y.videoOnly!==void 0&&(U.videoOnly=y.videoOnly),y.file!==void 0&&(U.file=y.file?t.EncodedFileOutput.toJSON(y.file):void 0),y.stream!==void 0&&(U.stream=y.stream?t.StreamOutput.toJSON(y.stream):void 0),y.segments!==void 0&&(U.segments=y.segments?t.SegmentedFileOutput.toJSON(y.segments):void 0),y.preset!==void 0&&(U.preset=y.preset!==void 0?H(y.preset):void 0),y.advanced!==void 0&&(U.advanced=y.advanced?t.EncodingOptions.toJSON(y.advanced):void 0),U},fromPartial(y){var U,q,de,j;const S=T();return S.url=(U=y.url)!==null&&U!==void 0?U:"",S.audioOnly=(q=y.audioOnly)!==null&&q!==void 0?q:!1,S.videoOnly=(de=y.videoOnly)!==null&&de!==void 0?de:!1,S.file=y.file!==void 0&&y.file!==null?t.EncodedFileOutput.fromPartial(y.file):void 0,S.stream=y.stream!==void 0&&y.stream!==null?t.StreamOutput.fromPartial(y.stream):void 0,S.segments=y.segments!==void 0&&y.segments!==null?t.SegmentedFileOutput.fromPartial(y.segments):void 0,S.preset=(j=y.preset)!==null&&j!==void 0?j:void 0,S.advanced=y.advanced!==void 0&&y.advanced!==null?t.EncodingOptions.fromPartial(y.advanced):void 0,S}};function A(){return{fileType:0,filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}t.EncodedFileOutput={encode(y,U=d.default.Writer.create()){return y.fileType!==void 0&&y.fileType!==0&&U.uint32(8).int32(y.fileType),y.filepath!==void 0&&y.filepath!==""&&U.uint32(18).string(y.filepath),y.disableManifest===!0&&U.uint32(48).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,U.uint32(26).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,U.uint32(34).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,U.uint32(42).fork()).ldelim(),y.aliOSS!==void 0&&t.AliOSSUpload.encode(y.aliOSS,U.uint32(58).fork()).ldelim(),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=A();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.fileType=q.int32();break;case 2:j.filepath=q.string();break;case 6:j.disableManifest=q.bool();break;case 3:j.s3=t.S3Upload.decode(q,q.uint32());break;case 4:j.gcp=t.GCPUpload.decode(q,q.uint32());break;case 5:j.azure=t.AzureBlobUpload.decode(q,q.uint32());break;case 7:j.aliOSS=t.AliOSSUpload.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{fileType:fe(y.fileType)?f(y.fileType):0,filepath:fe(y.filepath)?String(y.filepath):"",disableManifest:fe(y.disableManifest)?!!y.disableManifest:!1,s3:fe(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:fe(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:fe(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0,aliOSS:fe(y.aliOSS)?t.AliOSSUpload.fromJSON(y.aliOSS):void 0}},toJSON(y){const U={};return y.fileType!==void 0&&(U.fileType=c(y.fileType)),y.filepath!==void 0&&(U.filepath=y.filepath),y.disableManifest!==void 0&&(U.disableManifest=y.disableManifest),y.s3!==void 0&&(U.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(U.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(U.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),y.aliOSS!==void 0&&(U.aliOSS=y.aliOSS?t.AliOSSUpload.toJSON(y.aliOSS):void 0),U},fromPartial(y){var U,q,de;const j=A();return j.fileType=(U=y.fileType)!==null&&U!==void 0?U:0,j.filepath=(q=y.filepath)!==null&&q!==void 0?q:"",j.disableManifest=(de=y.disableManifest)!==null&&de!==void 0?de:!1,j.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,j.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,j.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,j.aliOSS=y.aliOSS!==void 0&&y.aliOSS!==null?t.AliOSSUpload.fromPartial(y.aliOSS):void 0,j}};function J(){return{protocol:0,filenamePrefix:"",playlistName:"",segmentDuration:0,disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}t.SegmentedFileOutput={encode(y,U=d.default.Writer.create()){return y.protocol!==void 0&&y.protocol!==0&&U.uint32(8).int32(y.protocol),y.filenamePrefix!==void 0&&y.filenamePrefix!==""&&U.uint32(18).string(y.filenamePrefix),y.playlistName!==void 0&&y.playlistName!==""&&U.uint32(26).string(y.playlistName),y.segmentDuration!==void 0&&y.segmentDuration!==0&&U.uint32(32).uint32(y.segmentDuration),y.disableManifest===!0&&U.uint32(64).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,U.uint32(42).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,U.uint32(50).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,U.uint32(58).fork()).ldelim(),y.aliOSS!==void 0&&t.AliOSSUpload.encode(y.aliOSS,U.uint32(74).fork()).ldelim(),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=J();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.protocol=q.int32();break;case 2:j.filenamePrefix=q.string();break;case 3:j.playlistName=q.string();break;case 4:j.segmentDuration=q.uint32();break;case 8:j.disableManifest=q.bool();break;case 5:j.s3=t.S3Upload.decode(q,q.uint32());break;case 6:j.gcp=t.GCPUpload.decode(q,q.uint32());break;case 7:j.azure=t.AzureBlobUpload.decode(q,q.uint32());break;case 9:j.aliOSS=t.AliOSSUpload.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{protocol:fe(y.protocol)?h(y.protocol):0,filenamePrefix:fe(y.filenamePrefix)?String(y.filenamePrefix):"",playlistName:fe(y.playlistName)?String(y.playlistName):"",segmentDuration:fe(y.segmentDuration)?Number(y.segmentDuration):0,disableManifest:fe(y.disableManifest)?!!y.disableManifest:!1,s3:fe(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:fe(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:fe(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0,aliOSS:fe(y.aliOSS)?t.AliOSSUpload.fromJSON(y.aliOSS):void 0}},toJSON(y){const U={};return y.protocol!==void 0&&(U.protocol=m(y.protocol)),y.filenamePrefix!==void 0&&(U.filenamePrefix=y.filenamePrefix),y.playlistName!==void 0&&(U.playlistName=y.playlistName),y.segmentDuration!==void 0&&(U.segmentDuration=Math.round(y.segmentDuration)),y.disableManifest!==void 0&&(U.disableManifest=y.disableManifest),y.s3!==void 0&&(U.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(U.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(U.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),y.aliOSS!==void 0&&(U.aliOSS=y.aliOSS?t.AliOSSUpload.toJSON(y.aliOSS):void 0),U},fromPartial(y){var U,q,de,j,S;const F=J();return F.protocol=(U=y.protocol)!==null&&U!==void 0?U:0,F.filenamePrefix=(q=y.filenamePrefix)!==null&&q!==void 0?q:"",F.playlistName=(de=y.playlistName)!==null&&de!==void 0?de:"",F.segmentDuration=(j=y.segmentDuration)!==null&&j!==void 0?j:0,F.disableManifest=(S=y.disableManifest)!==null&&S!==void 0?S:!1,F.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,F.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,F.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,F.aliOSS=y.aliOSS!==void 0&&y.aliOSS!==null?t.AliOSSUpload.fromPartial(y.aliOSS):void 0,F}};function G(){return{filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0,aliOSS:void 0}}t.DirectFileOutput={encode(y,U=d.default.Writer.create()){return y.filepath!==void 0&&y.filepath!==""&&U.uint32(10).string(y.filepath),y.disableManifest===!0&&U.uint32(40).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,U.uint32(18).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,U.uint32(26).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,U.uint32(34).fork()).ldelim(),y.aliOSS!==void 0&&t.AliOSSUpload.encode(y.aliOSS,U.uint32(50).fork()).ldelim(),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=G();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.filepath=q.string();break;case 5:j.disableManifest=q.bool();break;case 2:j.s3=t.S3Upload.decode(q,q.uint32());break;case 3:j.gcp=t.GCPUpload.decode(q,q.uint32());break;case 4:j.azure=t.AzureBlobUpload.decode(q,q.uint32());break;case 6:j.aliOSS=t.AliOSSUpload.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{filepath:fe(y.filepath)?String(y.filepath):"",disableManifest:fe(y.disableManifest)?!!y.disableManifest:!1,s3:fe(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:fe(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:fe(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0,aliOSS:fe(y.aliOSS)?t.AliOSSUpload.fromJSON(y.aliOSS):void 0}},toJSON(y){const U={};return y.filepath!==void 0&&(U.filepath=y.filepath),y.disableManifest!==void 0&&(U.disableManifest=y.disableManifest),y.s3!==void 0&&(U.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(U.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(U.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),y.aliOSS!==void 0&&(U.aliOSS=y.aliOSS?t.AliOSSUpload.toJSON(y.aliOSS):void 0),U},fromPartial(y){var U,q;const de=G();return de.filepath=(U=y.filepath)!==null&&U!==void 0?U:"",de.disableManifest=(q=y.disableManifest)!==null&&q!==void 0?q:!1,de.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,de.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,de.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,de.aliOSS=y.aliOSS!==void 0&&y.aliOSS!==null?t.AliOSSUpload.fromPartial(y.aliOSS):void 0,de}};function I(){return{accessKey:"",secret:"",region:"",endpoint:"",bucket:"",forcePathStyle:!1,metadata:{},tagging:""}}t.S3Upload={encode(y,U=d.default.Writer.create()){return y.accessKey!==void 0&&y.accessKey!==""&&U.uint32(10).string(y.accessKey),y.secret!==void 0&&y.secret!==""&&U.uint32(18).string(y.secret),y.region!==void 0&&y.region!==""&&U.uint32(26).string(y.region),y.endpoint!==void 0&&y.endpoint!==""&&U.uint32(34).string(y.endpoint),y.bucket!==void 0&&y.bucket!==""&&U.uint32(42).string(y.bucket),y.forcePathStyle===!0&&U.uint32(48).bool(y.forcePathStyle),Object.entries(y.metadata||{}).forEach(([q,de])=>{t.S3Upload_MetadataEntry.encode({key:q,value:de},U.uint32(58).fork()).ldelim()}),y.tagging!==void 0&&y.tagging!==""&&U.uint32(66).string(y.tagging),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=I();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.accessKey=q.string();break;case 2:j.secret=q.string();break;case 3:j.region=q.string();break;case 4:j.endpoint=q.string();break;case 5:j.bucket=q.string();break;case 6:j.forcePathStyle=q.bool();break;case 7:const F=t.S3Upload_MetadataEntry.decode(q,q.uint32());F.value!==void 0&&(j.metadata[F.key]=F.value);break;case 8:j.tagging=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{accessKey:fe(y.accessKey)?String(y.accessKey):"",secret:fe(y.secret)?String(y.secret):"",region:fe(y.region)?String(y.region):"",endpoint:fe(y.endpoint)?String(y.endpoint):"",bucket:fe(y.bucket)?String(y.bucket):"",forcePathStyle:fe(y.forcePathStyle)?!!y.forcePathStyle:!1,metadata:ge(y.metadata)?Object.entries(y.metadata).reduce((U,[q,de])=>(U[q]=String(de),U),{}):{},tagging:fe(y.tagging)?String(y.tagging):""}},toJSON(y){const U={};return y.accessKey!==void 0&&(U.accessKey=y.accessKey),y.secret!==void 0&&(U.secret=y.secret),y.region!==void 0&&(U.region=y.region),y.endpoint!==void 0&&(U.endpoint=y.endpoint),y.bucket!==void 0&&(U.bucket=y.bucket),y.forcePathStyle!==void 0&&(U.forcePathStyle=y.forcePathStyle),U.metadata={},y.metadata&&Object.entries(y.metadata).forEach(([q,de])=>{U.metadata[q]=de}),y.tagging!==void 0&&(U.tagging=y.tagging),U},fromPartial(y){var U,q,de,j,S,F,K,ve;const ae=I();return ae.accessKey=(U=y.accessKey)!==null&&U!==void 0?U:"",ae.secret=(q=y.secret)!==null&&q!==void 0?q:"",ae.region=(de=y.region)!==null&&de!==void 0?de:"",ae.endpoint=(j=y.endpoint)!==null&&j!==void 0?j:"",ae.bucket=(S=y.bucket)!==null&&S!==void 0?S:"",ae.forcePathStyle=(F=y.forcePathStyle)!==null&&F!==void 0?F:!1,ae.metadata=Object.entries((K=y.metadata)!==null&&K!==void 0?K:{}).reduce((_e,[Ne,Pe])=>(Pe!==void 0&&(_e[Ne]=String(Pe)),_e),{}),ae.tagging=(ve=y.tagging)!==null&&ve!==void 0?ve:"",ae}};function V(){return{key:"",value:""}}t.S3Upload_MetadataEntry={encode(y,U=d.default.Writer.create()){return y.key!==""&&U.uint32(10).string(y.key),y.value!==""&&U.uint32(18).string(y.value),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=V();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.key=q.string();break;case 2:j.value=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{key:fe(y.key)?String(y.key):"",value:fe(y.value)?String(y.value):""}},toJSON(y){const U={};return y.key!==void 0&&(U.key=y.key),y.value!==void 0&&(U.value=y.value),U},fromPartial(y){var U,q;const de=V();return de.key=(U=y.key)!==null&&U!==void 0?U:"",de.value=(q=y.value)!==null&&q!==void 0?q:"",de}};function L(){return{credentials:new Uint8Array,bucket:""}}t.GCPUpload={encode(y,U=d.default.Writer.create()){return y.credentials!==void 0&&y.credentials.length!==0&&U.uint32(10).bytes(y.credentials),y.bucket!==void 0&&y.bucket!==""&&U.uint32(18).string(y.bucket),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=L();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.credentials=q.bytes();break;case 2:j.bucket=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{credentials:fe(y.credentials)?X(y.credentials):new Uint8Array,bucket:fe(y.bucket)?String(y.bucket):""}},toJSON(y){const U={};return y.credentials!==void 0&&(U.credentials=ce(y.credentials!==void 0?y.credentials:new Uint8Array)),y.bucket!==void 0&&(U.bucket=y.bucket),U},fromPartial(y){var U,q;const de=L();return de.credentials=(U=y.credentials)!==null&&U!==void 0?U:new Uint8Array,de.bucket=(q=y.bucket)!==null&&q!==void 0?q:"",de}};function z(){return{accountName:"",accountKey:"",containerName:""}}t.AzureBlobUpload={encode(y,U=d.default.Writer.create()){return y.accountName!==void 0&&y.accountName!==""&&U.uint32(10).string(y.accountName),y.accountKey!==void 0&&y.accountKey!==""&&U.uint32(18).string(y.accountKey),y.containerName!==void 0&&y.containerName!==""&&U.uint32(26).string(y.containerName),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=z();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.accountName=q.string();break;case 2:j.accountKey=q.string();break;case 3:j.containerName=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{accountName:fe(y.accountName)?String(y.accountName):"",accountKey:fe(y.accountKey)?String(y.accountKey):"",containerName:fe(y.containerName)?String(y.containerName):""}},toJSON(y){const U={};return y.accountName!==void 0&&(U.accountName=y.accountName),y.accountKey!==void 0&&(U.accountKey=y.accountKey),y.containerName!==void 0&&(U.containerName=y.containerName),U},fromPartial(y){var U,q,de;const j=z();return j.accountName=(U=y.accountName)!==null&&U!==void 0?U:"",j.accountKey=(q=y.accountKey)!==null&&q!==void 0?q:"",j.containerName=(de=y.containerName)!==null&&de!==void 0?de:"",j}};function ie(){return{accessKey:"",secret:"",region:"",endpoint:"",bucket:""}}t.AliOSSUpload={encode(y,U=d.default.Writer.create()){return y.accessKey!==void 0&&y.accessKey!==""&&U.uint32(10).string(y.accessKey),y.secret!==void 0&&y.secret!==""&&U.uint32(18).string(y.secret),y.region!==void 0&&y.region!==""&&U.uint32(26).string(y.region),y.endpoint!==void 0&&y.endpoint!==""&&U.uint32(34).string(y.endpoint),y.bucket!==void 0&&y.bucket!==""&&U.uint32(42).string(y.bucket),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=ie();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.accessKey=q.string();break;case 2:j.secret=q.string();break;case 3:j.region=q.string();break;case 4:j.endpoint=q.string();break;case 5:j.bucket=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{accessKey:fe(y.accessKey)?String(y.accessKey):"",secret:fe(y.secret)?String(y.secret):"",region:fe(y.region)?String(y.region):"",endpoint:fe(y.endpoint)?String(y.endpoint):"",bucket:fe(y.bucket)?String(y.bucket):""}},toJSON(y){const U={};return y.accessKey!==void 0&&(U.accessKey=y.accessKey),y.secret!==void 0&&(U.secret=y.secret),y.region!==void 0&&(U.region=y.region),y.endpoint!==void 0&&(U.endpoint=y.endpoint),y.bucket!==void 0&&(U.bucket=y.bucket),U},fromPartial(y){var U,q,de,j,S;const F=ie();return F.accessKey=(U=y.accessKey)!==null&&U!==void 0?U:"",F.secret=(q=y.secret)!==null&&q!==void 0?q:"",F.region=(de=y.region)!==null&&de!==void 0?de:"",F.endpoint=(j=y.endpoint)!==null&&j!==void 0?j:"",F.bucket=(S=y.bucket)!==null&&S!==void 0?S:"",F}};function se(){return{protocol:0,urls:[]}}t.StreamOutput={encode(y,U=d.default.Writer.create()){if(y.protocol!==void 0&&y.protocol!==0&&U.uint32(8).int32(y.protocol),y.urls!==void 0&&y.urls.length!==0)for(const q of y.urls)U.uint32(18).string(q);return U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=se();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.protocol=q.int32();break;case 2:j.urls.push(q.string());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{protocol:fe(y.protocol)?v(y.protocol):0,urls:Array.isArray(y==null?void 0:y.urls)?y.urls.map(U=>String(U)):[]}},toJSON(y){const U={};return y.protocol!==void 0&&(U.protocol=l(y.protocol)),y.urls?U.urls=y.urls.map(q=>q):U.urls=[],U},fromPartial(y){var U,q;const de=se();return de.protocol=(U=y.protocol)!==null&&U!==void 0?U:0,de.urls=((q=y.urls)===null||q===void 0?void 0:q.map(j=>j))||[],de}};function me(){return{width:0,height:0,depth:0,framerate:0,audioCodec:0,audioBitrate:0,audioFrequency:0,videoCodec:0,videoBitrate:0}}t.EncodingOptions={encode(y,U=d.default.Writer.create()){return y.width!==void 0&&y.width!==0&&U.uint32(8).int32(y.width),y.height!==void 0&&y.height!==0&&U.uint32(16).int32(y.height),y.depth!==void 0&&y.depth!==0&&U.uint32(24).int32(y.depth),y.framerate!==void 0&&y.framerate!==0&&U.uint32(32).int32(y.framerate),y.audioCodec!==void 0&&y.audioCodec!==0&&U.uint32(40).int32(y.audioCodec),y.audioBitrate!==void 0&&y.audioBitrate!==0&&U.uint32(48).int32(y.audioBitrate),y.audioFrequency!==void 0&&y.audioFrequency!==0&&U.uint32(56).int32(y.audioFrequency),y.videoCodec!==void 0&&y.videoCodec!==0&&U.uint32(64).int32(y.videoCodec),y.videoBitrate!==void 0&&y.videoBitrate!==0&&U.uint32(72).int32(y.videoBitrate),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=me();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.width=q.int32();break;case 2:j.height=q.int32();break;case 3:j.depth=q.int32();break;case 4:j.framerate=q.int32();break;case 5:j.audioCodec=q.int32();break;case 6:j.audioBitrate=q.int32();break;case 7:j.audioFrequency=q.int32();break;case 8:j.videoCodec=q.int32();break;case 9:j.videoBitrate=q.int32();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{width:fe(y.width)?Number(y.width):0,height:fe(y.height)?Number(y.height):0,depth:fe(y.depth)?Number(y.depth):0,framerate:fe(y.framerate)?Number(y.framerate):0,audioCodec:fe(y.audioCodec)?k(y.audioCodec):0,audioBitrate:fe(y.audioBitrate)?Number(y.audioBitrate):0,audioFrequency:fe(y.audioFrequency)?Number(y.audioFrequency):0,videoCodec:fe(y.videoCodec)?P(y.videoCodec):0,videoBitrate:fe(y.videoBitrate)?Number(y.videoBitrate):0}},toJSON(y){const U={};return y.width!==void 0&&(U.width=Math.round(y.width)),y.height!==void 0&&(U.height=Math.round(y.height)),y.depth!==void 0&&(U.depth=Math.round(y.depth)),y.framerate!==void 0&&(U.framerate=Math.round(y.framerate)),y.audioCodec!==void 0&&(U.audioCodec=C(y.audioCodec)),y.audioBitrate!==void 0&&(U.audioBitrate=Math.round(y.audioBitrate)),y.audioFrequency!==void 0&&(U.audioFrequency=Math.round(y.audioFrequency)),y.videoCodec!==void 0&&(U.videoCodec=M(y.videoCodec)),y.videoBitrate!==void 0&&(U.videoBitrate=Math.round(y.videoBitrate)),U},fromPartial(y){var U,q,de,j,S,F,K,ve,ae;const _e=me();return _e.width=(U=y.width)!==null&&U!==void 0?U:0,_e.height=(q=y.height)!==null&&q!==void 0?q:0,_e.depth=(de=y.depth)!==null&&de!==void 0?de:0,_e.framerate=(j=y.framerate)!==null&&j!==void 0?j:0,_e.audioCodec=(S=y.audioCodec)!==null&&S!==void 0?S:0,_e.audioBitrate=(F=y.audioBitrate)!==null&&F!==void 0?F:0,_e.audioFrequency=(K=y.audioFrequency)!==null&&K!==void 0?K:0,_e.videoCodec=(ve=y.videoCodec)!==null&&ve!==void 0?ve:0,_e.videoBitrate=(ae=y.videoBitrate)!==null&&ae!==void 0?ae:0,_e}};function Se(){return{egressId:"",layout:""}}t.UpdateLayoutRequest={encode(y,U=d.default.Writer.create()){return y.egressId!==void 0&&y.egressId!==""&&U.uint32(10).string(y.egressId),y.layout!==void 0&&y.layout!==""&&U.uint32(18).string(y.layout),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=Se();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.egressId=q.string();break;case 2:j.layout=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{egressId:fe(y.egressId)?String(y.egressId):"",layout:fe(y.layout)?String(y.layout):""}},toJSON(y){const U={};return y.egressId!==void 0&&(U.egressId=y.egressId),y.layout!==void 0&&(U.layout=y.layout),U},fromPartial(y){var U,q;const de=Se();return de.egressId=(U=y.egressId)!==null&&U!==void 0?U:"",de.layout=(q=y.layout)!==null&&q!==void 0?q:"",de}};function ke(){return{egressId:"",addOutputUrls:[],removeOutputUrls:[]}}t.UpdateStreamRequest={encode(y,U=d.default.Writer.create()){if(y.egressId!==void 0&&y.egressId!==""&&U.uint32(10).string(y.egressId),y.addOutputUrls!==void 0&&y.addOutputUrls.length!==0)for(const q of y.addOutputUrls)U.uint32(18).string(q);if(y.removeOutputUrls!==void 0&&y.removeOutputUrls.length!==0)for(const q of y.removeOutputUrls)U.uint32(26).string(q);return U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=ke();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.egressId=q.string();break;case 2:j.addOutputUrls.push(q.string());break;case 3:j.removeOutputUrls.push(q.string());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{egressId:fe(y.egressId)?String(y.egressId):"",addOutputUrls:Array.isArray(y==null?void 0:y.addOutputUrls)?y.addOutputUrls.map(U=>String(U)):[],removeOutputUrls:Array.isArray(y==null?void 0:y.removeOutputUrls)?y.removeOutputUrls.map(U=>String(U)):[]}},toJSON(y){const U={};return y.egressId!==void 0&&(U.egressId=y.egressId),y.addOutputUrls?U.addOutputUrls=y.addOutputUrls.map(q=>q):U.addOutputUrls=[],y.removeOutputUrls?U.removeOutputUrls=y.removeOutputUrls.map(q=>q):U.removeOutputUrls=[],U},fromPartial(y){var U,q,de;const j=ke();return j.egressId=(U=y.egressId)!==null&&U!==void 0?U:"",j.addOutputUrls=((q=y.addOutputUrls)===null||q===void 0?void 0:q.map(S=>S))||[],j.removeOutputUrls=((de=y.removeOutputUrls)===null||de===void 0?void 0:de.map(S=>S))||[],j}};function oe(){return{roomName:""}}t.ListEgressRequest={encode(y,U=d.default.Writer.create()){return y.roomName!==void 0&&y.roomName!==""&&U.uint32(10).string(y.roomName),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=oe();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.roomName=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{roomName:fe(y.roomName)?String(y.roomName):""}},toJSON(y){const U={};return y.roomName!==void 0&&(U.roomName=y.roomName),U},fromPartial(y){var U;const q=oe();return q.roomName=(U=y.roomName)!==null&&U!==void 0?U:"",q}};function ue(){return{items:[]}}t.ListEgressResponse={encode(y,U=d.default.Writer.create()){if(y.items!==void 0&&y.items.length!==0)for(const q of y.items)t.EgressInfo.encode(q,U.uint32(10).fork()).ldelim();return U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=ue();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.items.push(t.EgressInfo.decode(q,q.uint32()));break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{items:Array.isArray(y==null?void 0:y.items)?y.items.map(U=>t.EgressInfo.fromJSON(U)):[]}},toJSON(y){const U={};return y.items?U.items=y.items.map(q=>q?t.EgressInfo.toJSON(q):void 0):U.items=[],U},fromPartial(y){var U;const q=ue();return q.items=((U=y.items)===null||U===void 0?void 0:U.map(de=>t.EgressInfo.fromPartial(de)))||[],q}};function ye(){return{egressId:""}}t.StopEgressRequest={encode(y,U=d.default.Writer.create()){return y.egressId!==void 0&&y.egressId!==""&&U.uint32(10).string(y.egressId),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=ye();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.egressId=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{egressId:fe(y.egressId)?String(y.egressId):""}},toJSON(y){const U={};return y.egressId!==void 0&&(U.egressId=y.egressId),U},fromPartial(y){var U;const q=ye();return q.egressId=(U=y.egressId)!==null&&U!==void 0?U:"",q}};function we(){return{egressId:"",roomId:"",roomName:"",status:0,startedAt:0,endedAt:0,error:"",roomComposite:void 0,trackComposite:void 0,track:void 0,web:void 0,stream:void 0,file:void 0,segments:void 0}}t.EgressInfo={encode(y,U=d.default.Writer.create()){return y.egressId!==void 0&&y.egressId!==""&&U.uint32(10).string(y.egressId),y.roomId!==void 0&&y.roomId!==""&&U.uint32(18).string(y.roomId),y.roomName!==void 0&&y.roomName!==""&&U.uint32(106).string(y.roomName),y.status!==void 0&&y.status!==0&&U.uint32(24).int32(y.status),y.startedAt!==void 0&&y.startedAt!==0&&U.uint32(80).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&U.uint32(88).int64(y.endedAt),y.error!==void 0&&y.error!==""&&U.uint32(74).string(y.error),y.roomComposite!==void 0&&t.RoomCompositeEgressRequest.encode(y.roomComposite,U.uint32(34).fork()).ldelim(),y.trackComposite!==void 0&&t.TrackCompositeEgressRequest.encode(y.trackComposite,U.uint32(42).fork()).ldelim(),y.track!==void 0&&t.TrackEgressRequest.encode(y.track,U.uint32(50).fork()).ldelim(),y.web!==void 0&&t.WebEgressRequest.encode(y.web,U.uint32(114).fork()).ldelim(),y.stream!==void 0&&t.StreamInfoList.encode(y.stream,U.uint32(58).fork()).ldelim(),y.file!==void 0&&t.FileInfo.encode(y.file,U.uint32(66).fork()).ldelim(),y.segments!==void 0&&t.SegmentsInfo.encode(y.segments,U.uint32(98).fork()).ldelim(),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=we();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.egressId=q.string();break;case 2:j.roomId=q.string();break;case 13:j.roomName=q.string();break;case 3:j.status=q.int32();break;case 10:j.startedAt=he(q.int64());break;case 11:j.endedAt=he(q.int64());break;case 9:j.error=q.string();break;case 4:j.roomComposite=t.RoomCompositeEgressRequest.decode(q,q.uint32());break;case 5:j.trackComposite=t.TrackCompositeEgressRequest.decode(q,q.uint32());break;case 6:j.track=t.TrackEgressRequest.decode(q,q.uint32());break;case 14:j.web=t.WebEgressRequest.decode(q,q.uint32());break;case 7:j.stream=t.StreamInfoList.decode(q,q.uint32());break;case 8:j.file=t.FileInfo.decode(q,q.uint32());break;case 12:j.segments=t.SegmentsInfo.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{egressId:fe(y.egressId)?String(y.egressId):"",roomId:fe(y.roomId)?String(y.roomId):"",roomName:fe(y.roomName)?String(y.roomName):"",status:fe(y.status)?re(y.status):0,startedAt:fe(y.startedAt)?Number(y.startedAt):0,endedAt:fe(y.endedAt)?Number(y.endedAt):0,error:fe(y.error)?String(y.error):"",roomComposite:fe(y.roomComposite)?t.RoomCompositeEgressRequest.fromJSON(y.roomComposite):void 0,trackComposite:fe(y.trackComposite)?t.TrackCompositeEgressRequest.fromJSON(y.trackComposite):void 0,track:fe(y.track)?t.TrackEgressRequest.fromJSON(y.track):void 0,web:fe(y.web)?t.WebEgressRequest.fromJSON(y.web):void 0,stream:fe(y.stream)?t.StreamInfoList.fromJSON(y.stream):void 0,file:fe(y.file)?t.FileInfo.fromJSON(y.file):void 0,segments:fe(y.segments)?t.SegmentsInfo.fromJSON(y.segments):void 0}},toJSON(y){const U={};return y.egressId!==void 0&&(U.egressId=y.egressId),y.roomId!==void 0&&(U.roomId=y.roomId),y.roomName!==void 0&&(U.roomName=y.roomName),y.status!==void 0&&(U.status=Y(y.status)),y.startedAt!==void 0&&(U.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(U.endedAt=Math.round(y.endedAt)),y.error!==void 0&&(U.error=y.error),y.roomComposite!==void 0&&(U.roomComposite=y.roomComposite?t.RoomCompositeEgressRequest.toJSON(y.roomComposite):void 0),y.trackComposite!==void 0&&(U.trackComposite=y.trackComposite?t.TrackCompositeEgressRequest.toJSON(y.trackComposite):void 0),y.track!==void 0&&(U.track=y.track?t.TrackEgressRequest.toJSON(y.track):void 0),y.web!==void 0&&(U.web=y.web?t.WebEgressRequest.toJSON(y.web):void 0),y.stream!==void 0&&(U.stream=y.stream?t.StreamInfoList.toJSON(y.stream):void 0),y.file!==void 0&&(U.file=y.file?t.FileInfo.toJSON(y.file):void 0),y.segments!==void 0&&(U.segments=y.segments?t.SegmentsInfo.toJSON(y.segments):void 0),U},fromPartial(y){var U,q,de,j,S,F,K;const ve=we();return ve.egressId=(U=y.egressId)!==null&&U!==void 0?U:"",ve.roomId=(q=y.roomId)!==null&&q!==void 0?q:"",ve.roomName=(de=y.roomName)!==null&&de!==void 0?de:"",ve.status=(j=y.status)!==null&&j!==void 0?j:0,ve.startedAt=(S=y.startedAt)!==null&&S!==void 0?S:0,ve.endedAt=(F=y.endedAt)!==null&&F!==void 0?F:0,ve.error=(K=y.error)!==null&&K!==void 0?K:"",ve.roomComposite=y.roomComposite!==void 0&&y.roomComposite!==null?t.RoomCompositeEgressRequest.fromPartial(y.roomComposite):void 0,ve.trackComposite=y.trackComposite!==void 0&&y.trackComposite!==null?t.TrackCompositeEgressRequest.fromPartial(y.trackComposite):void 0,ve.track=y.track!==void 0&&y.track!==null?t.TrackEgressRequest.fromPartial(y.track):void 0,ve.web=y.web!==void 0&&y.web!==null?t.WebEgressRequest.fromPartial(y.web):void 0,ve.stream=y.stream!==void 0&&y.stream!==null?t.StreamInfoList.fromPartial(y.stream):void 0,ve.file=y.file!==void 0&&y.file!==null?t.FileInfo.fromPartial(y.file):void 0,ve.segments=y.segments!==void 0&&y.segments!==null?t.SegmentsInfo.fromPartial(y.segments):void 0,ve}};function le(){return{info:[]}}t.StreamInfoList={encode(y,U=d.default.Writer.create()){if(y.info!==void 0&&y.info.length!==0)for(const q of y.info)t.StreamInfo.encode(q,U.uint32(10).fork()).ldelim();return U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=le();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.info.push(t.StreamInfo.decode(q,q.uint32()));break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{info:Array.isArray(y==null?void 0:y.info)?y.info.map(U=>t.StreamInfo.fromJSON(U)):[]}},toJSON(y){const U={};return y.info?U.info=y.info.map(q=>q?t.StreamInfo.toJSON(q):void 0):U.info=[],U},fromPartial(y){var U;const q=le();return q.info=((U=y.info)===null||U===void 0?void 0:U.map(de=>t.StreamInfo.fromPartial(de)))||[],q}};function ee(){return{url:"",startedAt:0,endedAt:0,duration:0,status:0}}t.StreamInfo={encode(y,U=d.default.Writer.create()){return y.url!==void 0&&y.url!==""&&U.uint32(10).string(y.url),y.startedAt!==void 0&&y.startedAt!==0&&U.uint32(16).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&U.uint32(24).int64(y.endedAt),y.duration!==void 0&&y.duration!==0&&U.uint32(32).int64(y.duration),y.status!==void 0&&y.status!==0&&U.uint32(40).int32(y.status),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=ee();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.url=q.string();break;case 2:j.startedAt=he(q.int64());break;case 3:j.endedAt=he(q.int64());break;case 4:j.duration=he(q.int64());break;case 5:j.status=q.int32();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{url:fe(y.url)?String(y.url):"",startedAt:fe(y.startedAt)?Number(y.startedAt):0,endedAt:fe(y.endedAt)?Number(y.endedAt):0,duration:fe(y.duration)?Number(y.duration):0,status:fe(y.status)?x(y.status):0}},toJSON(y){const U={};return y.url!==void 0&&(U.url=y.url),y.startedAt!==void 0&&(U.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(U.endedAt=Math.round(y.endedAt)),y.duration!==void 0&&(U.duration=Math.round(y.duration)),y.status!==void 0&&(U.status=b(y.status)),U},fromPartial(y){var U,q,de,j,S;const F=ee();return F.url=(U=y.url)!==null&&U!==void 0?U:"",F.startedAt=(q=y.startedAt)!==null&&q!==void 0?q:0,F.endedAt=(de=y.endedAt)!==null&&de!==void 0?de:0,F.duration=(j=y.duration)!==null&&j!==void 0?j:0,F.status=(S=y.status)!==null&&S!==void 0?S:0,F}};function te(){return{filename:"",startedAt:0,endedAt:0,duration:0,size:0,location:""}}t.FileInfo={encode(y,U=d.default.Writer.create()){return y.filename!==void 0&&y.filename!==""&&U.uint32(10).string(y.filename),y.startedAt!==void 0&&y.startedAt!==0&&U.uint32(16).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&U.uint32(24).int64(y.endedAt),y.duration!==void 0&&y.duration!==0&&U.uint32(48).int64(y.duration),y.size!==void 0&&y.size!==0&&U.uint32(32).int64(y.size),y.location!==void 0&&y.location!==""&&U.uint32(42).string(y.location),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=te();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.filename=q.string();break;case 2:j.startedAt=he(q.int64());break;case 3:j.endedAt=he(q.int64());break;case 6:j.duration=he(q.int64());break;case 4:j.size=he(q.int64());break;case 5:j.location=q.string();break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{filename:fe(y.filename)?String(y.filename):"",startedAt:fe(y.startedAt)?Number(y.startedAt):0,endedAt:fe(y.endedAt)?Number(y.endedAt):0,duration:fe(y.duration)?Number(y.duration):0,size:fe(y.size)?Number(y.size):0,location:fe(y.location)?String(y.location):""}},toJSON(y){const U={};return y.filename!==void 0&&(U.filename=y.filename),y.startedAt!==void 0&&(U.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(U.endedAt=Math.round(y.endedAt)),y.duration!==void 0&&(U.duration=Math.round(y.duration)),y.size!==void 0&&(U.size=Math.round(y.size)),y.location!==void 0&&(U.location=y.location),U},fromPartial(y){var U,q,de,j,S,F;const K=te();return K.filename=(U=y.filename)!==null&&U!==void 0?U:"",K.startedAt=(q=y.startedAt)!==null&&q!==void 0?q:0,K.endedAt=(de=y.endedAt)!==null&&de!==void 0?de:0,K.duration=(j=y.duration)!==null&&j!==void 0?j:0,K.size=(S=y.size)!==null&&S!==void 0?S:0,K.location=(F=y.location)!==null&&F!==void 0?F:"",K}};function Q(){return{playlistName:"",duration:0,size:0,playlistLocation:"",segmentCount:0,startedAt:0,endedAt:0}}t.SegmentsInfo={encode(y,U=d.default.Writer.create()){return y.playlistName!==void 0&&y.playlistName!==""&&U.uint32(10).string(y.playlistName),y.duration!==void 0&&y.duration!==0&&U.uint32(16).int64(y.duration),y.size!==void 0&&y.size!==0&&U.uint32(24).int64(y.size),y.playlistLocation!==void 0&&y.playlistLocation!==""&&U.uint32(34).string(y.playlistLocation),y.segmentCount!==void 0&&y.segmentCount!==0&&U.uint32(40).int64(y.segmentCount),y.startedAt!==void 0&&y.startedAt!==0&&U.uint32(48).int64(y.startedAt),y.endedAt!==void 0&&y.endedAt!==0&&U.uint32(56).int64(y.endedAt),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=Q();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.playlistName=q.string();break;case 2:j.duration=he(q.int64());break;case 3:j.size=he(q.int64());break;case 4:j.playlistLocation=q.string();break;case 5:j.segmentCount=he(q.int64());break;case 6:j.startedAt=he(q.int64());break;case 7:j.endedAt=he(q.int64());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{playlistName:fe(y.playlistName)?String(y.playlistName):"",duration:fe(y.duration)?Number(y.duration):0,size:fe(y.size)?Number(y.size):0,playlistLocation:fe(y.playlistLocation)?String(y.playlistLocation):"",segmentCount:fe(y.segmentCount)?Number(y.segmentCount):0,startedAt:fe(y.startedAt)?Number(y.startedAt):0,endedAt:fe(y.endedAt)?Number(y.endedAt):0}},toJSON(y){const U={};return y.playlistName!==void 0&&(U.playlistName=y.playlistName),y.duration!==void 0&&(U.duration=Math.round(y.duration)),y.size!==void 0&&(U.size=Math.round(y.size)),y.playlistLocation!==void 0&&(U.playlistLocation=y.playlistLocation),y.segmentCount!==void 0&&(U.segmentCount=Math.round(y.segmentCount)),y.startedAt!==void 0&&(U.startedAt=Math.round(y.startedAt)),y.endedAt!==void 0&&(U.endedAt=Math.round(y.endedAt)),U},fromPartial(y){var U,q,de,j,S,F,K;const ve=Q();return ve.playlistName=(U=y.playlistName)!==null&&U!==void 0?U:"",ve.duration=(q=y.duration)!==null&&q!==void 0?q:0,ve.size=(de=y.size)!==null&&de!==void 0?de:0,ve.playlistLocation=(j=y.playlistLocation)!==null&&j!==void 0?j:"",ve.segmentCount=(S=y.segmentCount)!==null&&S!==void 0?S:0,ve.startedAt=(F=y.startedAt)!==null&&F!==void 0?F:0,ve.endedAt=(K=y.endedAt)!==null&&K!==void 0?K:0,ve}};function B(){return{filepath:"",disableManifest:!1,s3:void 0,gcp:void 0,azure:void 0}}t.AutoTrackEgress={encode(y,U=d.default.Writer.create()){return y.filepath!==void 0&&y.filepath!==""&&U.uint32(10).string(y.filepath),y.disableManifest===!0&&U.uint32(40).bool(y.disableManifest),y.s3!==void 0&&t.S3Upload.encode(y.s3,U.uint32(18).fork()).ldelim(),y.gcp!==void 0&&t.GCPUpload.encode(y.gcp,U.uint32(26).fork()).ldelim(),y.azure!==void 0&&t.AzureBlobUpload.encode(y.azure,U.uint32(34).fork()).ldelim(),U},decode(y,U){const q=y instanceof d.default.Reader?y:new d.default.Reader(y);let de=U===void 0?q.len:q.pos+U;const j=B();for(;q.pos<de;){const S=q.uint32();switch(S>>>3){case 1:j.filepath=q.string();break;case 5:j.disableManifest=q.bool();break;case 2:j.s3=t.S3Upload.decode(q,q.uint32());break;case 3:j.gcp=t.GCPUpload.decode(q,q.uint32());break;case 4:j.azure=t.AzureBlobUpload.decode(q,q.uint32());break;default:q.skipType(S&7);break}}return j},fromJSON(y){return{filepath:fe(y.filepath)?String(y.filepath):"",disableManifest:fe(y.disableManifest)?!!y.disableManifest:!1,s3:fe(y.s3)?t.S3Upload.fromJSON(y.s3):void 0,gcp:fe(y.gcp)?t.GCPUpload.fromJSON(y.gcp):void 0,azure:fe(y.azure)?t.AzureBlobUpload.fromJSON(y.azure):void 0}},toJSON(y){const U={};return y.filepath!==void 0&&(U.filepath=y.filepath),y.disableManifest!==void 0&&(U.disableManifest=y.disableManifest),y.s3!==void 0&&(U.s3=y.s3?t.S3Upload.toJSON(y.s3):void 0),y.gcp!==void 0&&(U.gcp=y.gcp?t.GCPUpload.toJSON(y.gcp):void 0),y.azure!==void 0&&(U.azure=y.azure?t.AzureBlobUpload.toJSON(y.azure):void 0),U},fromPartial(y){var U,q;const de=B();return de.filepath=(U=y.filepath)!==null&&U!==void 0?U:"",de.disableManifest=(q=y.disableManifest)!==null&&q!==void 0?q:!1,de.s3=y.s3!==void 0&&y.s3!==null?t.S3Upload.fromPartial(y.s3):void 0,de.gcp=y.gcp!==void 0&&y.gcp!==null?t.GCPUpload.fromPartial(y.gcp):void 0,de.azure=y.azure!==void 0&&y.azure!==null?t.AzureBlobUpload.fromPartial(y.azure):void 0,de}};var W=(()=>{if(typeof W<"u")return W;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function X(y){if(W.Buffer)return Uint8Array.from(W.Buffer.from(y,"base64"));{const U=W.atob(y),q=new Uint8Array(U.length);for(let de=0;de<U.length;++de)q[de]=U.charCodeAt(de);return q}}function ce(y){if(W.Buffer)return W.Buffer.from(y).toString("base64");{const U=[];return y.forEach(q=>{U.push(String.fromCharCode(q))}),W.btoa(U.join(""))}}function he(y){if(y.gt(Number.MAX_SAFE_INTEGER))throw new W.Error("Value is larger than Number.MAX_SAFE_INTEGER");return y.toNumber()}d.default.util.Long!==s.default&&(d.default.util.Long=s.default,d.default.configure());function ge(y){return typeof y=="object"&&y!==null}function fe(y){return y!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{long:85,"protobufjs/minimal":89}],74:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteIngressRequest=t.ListIngressResponse=t.ListIngressRequest=t.UpdateIngressRequest=t.InputAudioState=t.InputVideoState=t.IngressState=t.IngressInfo=t.IngressVideoOptions=t.IngressAudioOptions=t.CreateIngressRequest=t.ingressState_StatusToJSON=t.ingressState_StatusFromJSON=t.IngressState_Status=t.ingressInputToJSON=t.ingressInputFromJSON=t.IngressInput=t.protobufPackage=void 0;const s=a(e("long")),d=a(e("protobufjs/minimal")),o=e("./livekit_models");t.protobufPackage="livekit";var f;(function(N){N[N.RTMP_INPUT=0]="RTMP_INPUT",N[N.UNRECOGNIZED=-1]="UNRECOGNIZED"})(f=t.IngressInput||(t.IngressInput={}));function c(N){switch(N){case 0:case"RTMP_INPUT":return f.RTMP_INPUT;case-1:case"UNRECOGNIZED":default:return f.UNRECOGNIZED}}t.ingressInputFromJSON=c;function p(N){switch(N){case f.RTMP_INPUT:return"RTMP_INPUT";case f.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.ingressInputToJSON=p;var v;(function(N){N[N.ENDPOINT_INACTIVE=0]="ENDPOINT_INACTIVE",N[N.ENDPOINT_BUFFERING=1]="ENDPOINT_BUFFERING",N[N.ENDPOINT_PUBLISHING=2]="ENDPOINT_PUBLISHING",N[N.ENDPOINT_ERROR=3]="ENDPOINT_ERROR",N[N.UNRECOGNIZED=-1]="UNRECOGNIZED"})(v=t.IngressState_Status||(t.IngressState_Status={}));function l(N){switch(N){case 0:case"ENDPOINT_INACTIVE":return v.ENDPOINT_INACTIVE;case 1:case"ENDPOINT_BUFFERING":return v.ENDPOINT_BUFFERING;case 2:case"ENDPOINT_PUBLISHING":return v.ENDPOINT_PUBLISHING;case 3:case"ENDPOINT_ERROR":return v.ENDPOINT_ERROR;case-1:case"UNRECOGNIZED":default:return v.UNRECOGNIZED}}t.ingressState_StatusFromJSON=l;function u(N){switch(N){case v.ENDPOINT_INACTIVE:return"ENDPOINT_INACTIVE";case v.ENDPOINT_BUFFERING:return"ENDPOINT_BUFFERING";case v.ENDPOINT_PUBLISHING:return"ENDPOINT_PUBLISHING";case v.ENDPOINT_ERROR:return"ENDPOINT_ERROR";case v.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.ingressState_StatusToJSON=u;function h(){return{inputType:0,name:"",roomName:"",participantIdentity:"",participantName:"",audio:void 0,video:void 0}}t.CreateIngressRequest={encode(N,x=d.default.Writer.create()){return N.inputType!==void 0&&N.inputType!==0&&x.uint32(8).int32(N.inputType),N.name!==void 0&&N.name!==""&&x.uint32(18).string(N.name),N.roomName!==void 0&&N.roomName!==""&&x.uint32(26).string(N.roomName),N.participantIdentity!==void 0&&N.participantIdentity!==""&&x.uint32(34).string(N.participantIdentity),N.participantName!==void 0&&N.participantName!==""&&x.uint32(42).string(N.participantName),N.audio!==void 0&&t.IngressAudioOptions.encode(N.audio,x.uint32(50).fork()).ldelim(),N.video!==void 0&&t.IngressVideoOptions.encode(N.video,x.uint32(58).fork()).ldelim(),x},decode(N,x){const b=N instanceof d.default.Reader?N:new d.default.Reader(N);let _=x===void 0?b.len:b.pos+x;const g=h();for(;b.pos<_;){const E=b.uint32();switch(E>>>3){case 1:g.inputType=b.int32();break;case 2:g.name=b.string();break;case 3:g.roomName=b.string();break;case 4:g.participantIdentity=b.string();break;case 5:g.participantName=b.string();break;case 6:g.audio=t.IngressAudioOptions.decode(b,b.uint32());break;case 7:g.video=t.IngressVideoOptions.decode(b,b.uint32());break;default:b.skipType(E&7);break}}return g},fromJSON(N){return{inputType:Y(N.inputType)?c(N.inputType):0,name:Y(N.name)?String(N.name):"",roomName:Y(N.roomName)?String(N.roomName):"",participantIdentity:Y(N.participantIdentity)?String(N.participantIdentity):"",participantName:Y(N.participantName)?String(N.participantName):"",audio:Y(N.audio)?t.IngressAudioOptions.fromJSON(N.audio):void 0,video:Y(N.video)?t.IngressVideoOptions.fromJSON(N.video):void 0}},toJSON(N){const x={};return N.inputType!==void 0&&(x.inputType=p(N.inputType)),N.name!==void 0&&(x.name=N.name),N.roomName!==void 0&&(x.roomName=N.roomName),N.participantIdentity!==void 0&&(x.participantIdentity=N.participantIdentity),N.participantName!==void 0&&(x.participantName=N.participantName),N.audio!==void 0&&(x.audio=N.audio?t.IngressAudioOptions.toJSON(N.audio):void 0),N.video!==void 0&&(x.video=N.video?t.IngressVideoOptions.toJSON(N.video):void 0),x},fromPartial(N){var x,b,_,g,E;const T=h();return T.inputType=(x=N.inputType)!==null&&x!==void 0?x:0,T.name=(b=N.name)!==null&&b!==void 0?b:"",T.roomName=(_=N.roomName)!==null&&_!==void 0?_:"",T.participantIdentity=(g=N.participantIdentity)!==null&&g!==void 0?g:"",T.participantName=(E=N.participantName)!==null&&E!==void 0?E:"",T.audio=N.audio!==void 0&&N.audio!==null?t.IngressAudioOptions.fromPartial(N.audio):void 0,T.video=N.video!==void 0&&N.video!==null?t.IngressVideoOptions.fromPartial(N.video):void 0,T}};function m(){return{name:"",source:0,mimeType:"",bitrate:0,disableDtx:!1,channels:0}}t.IngressAudioOptions={encode(N,x=d.default.Writer.create()){return N.name!==void 0&&N.name!==""&&x.uint32(10).string(N.name),N.source!==void 0&&N.source!==0&&x.uint32(16).int32(N.source),N.mimeType!==void 0&&N.mimeType!==""&&x.uint32(26).string(N.mimeType),N.bitrate!==void 0&&N.bitrate!==0&&x.uint32(32).uint32(N.bitrate),N.disableDtx===!0&&x.uint32(40).bool(N.disableDtx),N.channels!==void 0&&N.channels!==0&&x.uint32(48).uint32(N.channels),x},decode(N,x){const b=N instanceof d.default.Reader?N:new d.default.Reader(N);let _=x===void 0?b.len:b.pos+x;const g=m();for(;b.pos<_;){const E=b.uint32();switch(E>>>3){case 1:g.name=b.string();break;case 2:g.source=b.int32();break;case 3:g.mimeType=b.string();break;case 4:g.bitrate=b.uint32();break;case 5:g.disableDtx=b.bool();break;case 6:g.channels=b.uint32();break;default:b.skipType(E&7);break}}return g},fromJSON(N){return{name:Y(N.name)?String(N.name):"",source:Y(N.source)?o.trackSourceFromJSON(N.source):0,mimeType:Y(N.mimeType)?String(N.mimeType):"",bitrate:Y(N.bitrate)?Number(N.bitrate):0,disableDtx:Y(N.disableDtx)?!!N.disableDtx:!1,channels:Y(N.channels)?Number(N.channels):0}},toJSON(N){const x={};return N.name!==void 0&&(x.name=N.name),N.source!==void 0&&(x.source=o.trackSourceToJSON(N.source)),N.mimeType!==void 0&&(x.mimeType=N.mimeType),N.bitrate!==void 0&&(x.bitrate=Math.round(N.bitrate)),N.disableDtx!==void 0&&(x.disableDtx=N.disableDtx),N.channels!==void 0&&(x.channels=Math.round(N.channels)),x},fromPartial(N){var x,b,_,g,E,T;const A=m();return A.name=(x=N.name)!==null&&x!==void 0?x:"",A.source=(b=N.source)!==null&&b!==void 0?b:0,A.mimeType=(_=N.mimeType)!==null&&_!==void 0?_:"",A.bitrate=(g=N.bitrate)!==null&&g!==void 0?g:0,A.disableDtx=(E=N.disableDtx)!==null&&E!==void 0?E:!1,A.channels=(T=N.channels)!==null&&T!==void 0?T:0,A}};function w(){return{name:"",source:0,mimeType:"",layers:[]}}t.IngressVideoOptions={encode(N,x=d.default.Writer.create()){if(N.name!==void 0&&N.name!==""&&x.uint32(10).string(N.name),N.source!==void 0&&N.source!==0&&x.uint32(16).int32(N.source),N.mimeType!==void 0&&N.mimeType!==""&&x.uint32(26).string(N.mimeType),N.layers!==void 0&&N.layers.length!==0)for(const b of N.layers)o.VideoLayer.encode(b,x.uint32(34).fork()).ldelim();return x},decode(N,x){const b=N instanceof d.default.Reader?N:new d.default.Reader(N);let _=x===void 0?b.len:b.pos+x;const g=w();for(;b.pos<_;){const E=b.uint32();switch(E>>>3){case 1:g.name=b.string();break;case 2:g.source=b.int32();break;case 3:g.mimeType=b.string();break;case 4:g.layers.push(o.VideoLayer.decode(b,b.uint32()));break;default:b.skipType(E&7);break}}return g},fromJSON(N){return{name:Y(N.name)?String(N.name):"",source:Y(N.source)?o.trackSourceFromJSON(N.source):0,mimeType:Y(N.mimeType)?String(N.mimeType):"",layers:Array.isArray(N==null?void 0:N.layers)?N.layers.map(x=>o.VideoLayer.fromJSON(x)):[]}},toJSON(N){const x={};return N.name!==void 0&&(x.name=N.name),N.source!==void 0&&(x.source=o.trackSourceToJSON(N.source)),N.mimeType!==void 0&&(x.mimeType=N.mimeType),N.layers?x.layers=N.layers.map(b=>b?o.VideoLayer.toJSON(b):void 0):x.layers=[],x},fromPartial(N){var x,b,_,g;const E=w();return E.name=(x=N.name)!==null&&x!==void 0?x:"",E.source=(b=N.source)!==null&&b!==void 0?b:0,E.mimeType=(_=N.mimeType)!==null&&_!==void 0?_:"",E.layers=((g=N.layers)===null||g===void 0?void 0:g.map(T=>o.VideoLayer.fromPartial(T)))||[],E}};function k(){return{ingressId:"",name:"",streamKey:"",url:"",inputType:0,audio:void 0,video:void 0,roomName:"",participantIdentity:"",participantName:"",reusable:!1,state:void 0}}t.IngressInfo={encode(N,x=d.default.Writer.create()){return N.ingressId!==void 0&&N.ingressId!==""&&x.uint32(10).string(N.ingressId),N.name!==void 0&&N.name!==""&&x.uint32(18).string(N.name),N.streamKey!==void 0&&N.streamKey!==""&&x.uint32(26).string(N.streamKey),N.url!==void 0&&N.url!==""&&x.uint32(34).string(N.url),N.inputType!==void 0&&N.inputType!==0&&x.uint32(40).int32(N.inputType),N.audio!==void 0&&t.IngressAudioOptions.encode(N.audio,x.uint32(50).fork()).ldelim(),N.video!==void 0&&t.IngressVideoOptions.encode(N.video,x.uint32(58).fork()).ldelim(),N.roomName!==void 0&&N.roomName!==""&&x.uint32(66).string(N.roomName),N.participantIdentity!==void 0&&N.participantIdentity!==""&&x.uint32(74).string(N.participantIdentity),N.participantName!==void 0&&N.participantName!==""&&x.uint32(82).string(N.participantName),N.reusable===!0&&x.uint32(88).bool(N.reusable),N.state!==void 0&&t.IngressState.encode(N.state,x.uint32(98).fork()).ldelim(),x},decode(N,x){const b=N instanceof d.default.Reader?N:new d.default.Reader(N);let _=x===void 0?b.len:b.pos+x;const g=k();for(;b.pos<_;){const E=b.uint32();switch(E>>>3){case 1:g.ingressId=b.string();break;case 2:g.name=b.string();break;case 3:g.streamKey=b.string();break;case 4:g.url=b.string();break;case 5:g.inputType=b.int32();break;case 6:g.audio=t.IngressAudioOptions.decode(b,b.uint32());break;case 7:g.video=t.IngressVideoOptions.decode(b,b.uint32());break;case 8:g.roomName=b.string();break;case 9:g.participantIdentity=b.string();break;case 10:g.participantName=b.string();break;case 11:g.reusable=b.bool();break;case 12:g.state=t.IngressState.decode(b,b.uint32());break;default:b.skipType(E&7);break}}return g},fromJSON(N){return{ingressId:Y(N.ingressId)?String(N.ingressId):"",name:Y(N.name)?String(N.name):"",streamKey:Y(N.streamKey)?String(N.streamKey):"",url:Y(N.url)?String(N.url):"",inputType:Y(N.inputType)?c(N.inputType):0,audio:Y(N.audio)?t.IngressAudioOptions.fromJSON(N.audio):void 0,video:Y(N.video)?t.IngressVideoOptions.fromJSON(N.video):void 0,roomName:Y(N.roomName)?String(N.roomName):"",participantIdentity:Y(N.participantIdentity)?String(N.participantIdentity):"",participantName:Y(N.participantName)?String(N.participantName):"",reusable:Y(N.reusable)?!!N.reusable:!1,state:Y(N.state)?t.IngressState.fromJSON(N.state):void 0}},toJSON(N){const x={};return N.ingressId!==void 0&&(x.ingressId=N.ingressId),N.name!==void 0&&(x.name=N.name),N.streamKey!==void 0&&(x.streamKey=N.streamKey),N.url!==void 0&&(x.url=N.url),N.inputType!==void 0&&(x.inputType=p(N.inputType)),N.audio!==void 0&&(x.audio=N.audio?t.IngressAudioOptions.toJSON(N.audio):void 0),N.video!==void 0&&(x.video=N.video?t.IngressVideoOptions.toJSON(N.video):void 0),N.roomName!==void 0&&(x.roomName=N.roomName),N.participantIdentity!==void 0&&(x.participantIdentity=N.participantIdentity),N.participantName!==void 0&&(x.participantName=N.participantName),N.reusable!==void 0&&(x.reusable=N.reusable),N.state!==void 0&&(x.state=N.state?t.IngressState.toJSON(N.state):void 0),x},fromPartial(N){var x,b,_,g,E,T,A,J,G;const I=k();return I.ingressId=(x=N.ingressId)!==null&&x!==void 0?x:"",I.name=(b=N.name)!==null&&b!==void 0?b:"",I.streamKey=(_=N.streamKey)!==null&&_!==void 0?_:"",I.url=(g=N.url)!==null&&g!==void 0?g:"",I.inputType=(E=N.inputType)!==null&&E!==void 0?E:0,I.audio=N.audio!==void 0&&N.audio!==null?t.IngressAudioOptions.fromPartial(N.audio):void 0,I.video=N.video!==void 0&&N.video!==null?t.IngressVideoOptions.fromPartial(N.video):void 0,I.roomName=(T=N.roomName)!==null&&T!==void 0?T:"",I.participantIdentity=(A=N.participantIdentity)!==null&&A!==void 0?A:"",I.participantName=(J=N.participantName)!==null&&J!==void 0?J:"",I.reusable=(G=N.reusable)!==null&&G!==void 0?G:!1,I.state=N.state!==void 0&&N.state!==null?t.IngressState.fromPartial(N.state):void 0,I}};function C(){return{status:0,error:"",video:void 0,audio:void 0,roomId:"",startedAt:0,tracks:[]}}t.IngressState={encode(N,x=d.default.Writer.create()){if(N.status!==void 0&&N.status!==0&&x.uint32(8).int32(N.status),N.error!==void 0&&N.error!==""&&x.uint32(18).string(N.error),N.video!==void 0&&t.InputVideoState.encode(N.video,x.uint32(26).fork()).ldelim(),N.audio!==void 0&&t.InputAudioState.encode(N.audio,x.uint32(34).fork()).ldelim(),N.roomId!==void 0&&N.roomId!==""&&x.uint32(42).string(N.roomId),N.startedAt!==void 0&&N.startedAt!==0&&x.uint32(56).int64(N.startedAt),N.tracks!==void 0&&N.tracks.length!==0)for(const b of N.tracks)o.TrackInfo.encode(b,x.uint32(50).fork()).ldelim();return x},decode(N,x){const b=N instanceof d.default.Reader?N:new d.default.Reader(N);let _=x===void 0?b.len:b.pos+x;const g=C();for(;b.pos<_;){const E=b.uint32();switch(E>>>3){case 1:g.status=b.int32();break;case 2:g.error=b.string();break;case 3:g.video=t.InputVideoState.decode(b,b.uint32());break;case 4:g.audio=t.InputAudioState.decode(b,b.uint32());break;case 5:g.roomId=b.string();break;case 7:g.startedAt=re(b.int64());break;case 6:g.tracks.push(o.TrackInfo.decode(b,b.uint32()));break;default:b.skipType(E&7);break}}return g},fromJSON(N){return{status:Y(N.status)?l(N.status):0,error:Y(N.error)?String(N.error):"",video:Y(N.video)?t.InputVideoState.fromJSON(N.video):void 0,audio:Y(N.audio)?t.InputAudioState.fromJSON(N.audio):void 0,roomId:Y(N.roomId)?String(N.roomId):"",startedAt:Y(N.startedAt)?Number(N.startedAt):0,tracks:Array.isArray(N==null?void 0:N.tracks)?N.tracks.map(x=>o.TrackInfo.fromJSON(x)):[]}},toJSON(N){const x={};return N.status!==void 0&&(x.status=u(N.status)),N.error!==void 0&&(x.error=N.error),N.video!==void 0&&(x.video=N.video?t.InputVideoState.toJSON(N.video):void 0),N.audio!==void 0&&(x.audio=N.audio?t.InputAudioState.toJSON(N.audio):void 0),N.roomId!==void 0&&(x.roomId=N.roomId),N.startedAt!==void 0&&(x.startedAt=Math.round(N.startedAt)),N.tracks?x.tracks=N.tracks.map(b=>b?o.TrackInfo.toJSON(b):void 0):x.tracks=[],x},fromPartial(N){var x,b,_,g,E;const T=C();return T.status=(x=N.status)!==null&&x!==void 0?x:0,T.error=(b=N.error)!==null&&b!==void 0?b:"",T.video=N.video!==void 0&&N.video!==null?t.InputVideoState.fromPartial(N.video):void 0,T.audio=N.audio!==void 0&&N.audio!==null?t.InputAudioState.fromPartial(N.audio):void 0,T.roomId=(_=N.roomId)!==null&&_!==void 0?_:"",T.startedAt=(g=N.startedAt)!==null&&g!==void 0?g:0,T.tracks=((E=N.tracks)===null||E===void 0?void 0:E.map(A=>o.TrackInfo.fromPartial(A)))||[],T}};function O(){return{mimeType:0,width:0,height:0,framerate:0}}t.InputVideoState={encode(N,x=d.default.Writer.create()){return N.mimeType!==void 0&&N.mimeType!==0&&x.uint32(8).uint32(N.mimeType),N.width!==void 0&&N.width!==0&&x.uint32(24).uint32(N.width),N.height!==void 0&&N.height!==0&&x.uint32(32).uint32(N.height),N.framerate!==void 0&&N.framerate!==0&&x.uint32(40).uint32(N.framerate),x},decode(N,x){const b=N instanceof d.default.Reader?N:new d.default.Reader(N);let _=x===void 0?b.len:b.pos+x;const g=O();for(;b.pos<_;){const E=b.uint32();switch(E>>>3){case 1:g.mimeType=b.uint32();break;case 3:g.width=b.uint32();break;case 4:g.height=b.uint32();break;case 5:g.framerate=b.uint32();break;default:b.skipType(E&7);break}}return g},fromJSON(N){return{mimeType:Y(N.mimeType)?Number(N.mimeType):0,width:Y(N.width)?Number(N.width):0,height:Y(N.height)?Number(N.height):0,framerate:Y(N.framerate)?Number(N.framerate):0}},toJSON(N){const x={};return N.mimeType!==void 0&&(x.mimeType=Math.round(N.mimeType)),N.width!==void 0&&(x.width=Math.round(N.width)),N.height!==void 0&&(x.height=Math.round(N.height)),N.framerate!==void 0&&(x.framerate=Math.round(N.framerate)),x},fromPartial(N){var x,b,_,g;const E=O();return E.mimeType=(x=N.mimeType)!==null&&x!==void 0?x:0,E.width=(b=N.width)!==null&&b!==void 0?b:0,E.height=(_=N.height)!==null&&_!==void 0?_:0,E.framerate=(g=N.framerate)!==null&&g!==void 0?g:0,E}};function P(){return{mimeType:0,channels:0,sampleRate:0}}t.InputAudioState={encode(N,x=d.default.Writer.create()){return N.mimeType!==void 0&&N.mimeType!==0&&x.uint32(8).uint32(N.mimeType),N.channels!==void 0&&N.channels!==0&&x.uint32(24).uint32(N.channels),N.sampleRate!==void 0&&N.sampleRate!==0&&x.uint32(32).uint32(N.sampleRate),x},decode(N,x){const b=N instanceof d.default.Reader?N:new d.default.Reader(N);let _=x===void 0?b.len:b.pos+x;const g=P();for(;b.pos<_;){const E=b.uint32();switch(E>>>3){case 1:g.mimeType=b.uint32();break;case 3:g.channels=b.uint32();break;case 4:g.sampleRate=b.uint32();break;default:b.skipType(E&7);break}}return g},fromJSON(N){return{mimeType:Y(N.mimeType)?Number(N.mimeType):0,channels:Y(N.channels)?Number(N.channels):0,sampleRate:Y(N.sampleRate)?Number(N.sampleRate):0}},toJSON(N){const x={};return N.mimeType!==void 0&&(x.mimeType=Math.round(N.mimeType)),N.channels!==void 0&&(x.channels=Math.round(N.channels)),N.sampleRate!==void 0&&(x.sampleRate=Math.round(N.sampleRate)),x},fromPartial(N){var x,b,_;const g=P();return g.mimeType=(x=N.mimeType)!==null&&x!==void 0?x:0,g.channels=(b=N.channels)!==null&&b!==void 0?b:0,g.sampleRate=(_=N.sampleRate)!==null&&_!==void 0?_:0,g}};function M(){return{ingressId:"",name:"",roomName:"",participantIdentity:"",participantName:"",audio:void 0,video:void 0}}t.UpdateIngressRequest={encode(N,x=d.default.Writer.create()){return N.ingressId!==void 0&&N.ingressId!==""&&x.uint32(10).string(N.ingressId),N.name!==void 0&&N.name!==""&&x.uint32(18).string(N.name),N.roomName!==void 0&&N.roomName!==""&&x.uint32(26).string(N.roomName),N.participantIdentity!==void 0&&N.participantIdentity!==""&&x.uint32(34).string(N.participantIdentity),N.participantName!==void 0&&N.participantName!==""&&x.uint32(42).string(N.participantName),N.audio!==void 0&&t.IngressAudioOptions.encode(N.audio,x.uint32(50).fork()).ldelim(),N.video!==void 0&&t.IngressVideoOptions.encode(N.video,x.uint32(58).fork()).ldelim(),x},decode(N,x){const b=N instanceof d.default.Reader?N:new d.default.Reader(N);let _=x===void 0?b.len:b.pos+x;const g=M();for(;b.pos<_;){const E=b.uint32();switch(E>>>3){case 1:g.ingressId=b.string();break;case 2:g.name=b.string();break;case 3:g.roomName=b.string();break;case 4:g.participantIdentity=b.string();break;case 5:g.participantName=b.string();break;case 6:g.audio=t.IngressAudioOptions.decode(b,b.uint32());break;case 7:g.video=t.IngressVideoOptions.decode(b,b.uint32());break;default:b.skipType(E&7);break}}return g},fromJSON(N){return{ingressId:Y(N.ingressId)?String(N.ingressId):"",name:Y(N.name)?String(N.name):"",roomName:Y(N.roomName)?String(N.roomName):"",participantIdentity:Y(N.participantIdentity)?String(N.participantIdentity):"",participantName:Y(N.participantName)?String(N.participantName):"",audio:Y(N.audio)?t.IngressAudioOptions.fromJSON(N.audio):void 0,video:Y(N.video)?t.IngressVideoOptions.fromJSON(N.video):void 0}},toJSON(N){const x={};return N.ingressId!==void 0&&(x.ingressId=N.ingressId),N.name!==void 0&&(x.name=N.name),N.roomName!==void 0&&(x.roomName=N.roomName),N.participantIdentity!==void 0&&(x.participantIdentity=N.participantIdentity),N.participantName!==void 0&&(x.participantName=N.participantName),N.audio!==void 0&&(x.audio=N.audio?t.IngressAudioOptions.toJSON(N.audio):void 0),N.video!==void 0&&(x.video=N.video?t.IngressVideoOptions.toJSON(N.video):void 0),x},fromPartial(N){var x,b,_,g,E;const T=M();return T.ingressId=(x=N.ingressId)!==null&&x!==void 0?x:"",T.name=(b=N.name)!==null&&b!==void 0?b:"",T.roomName=(_=N.roomName)!==null&&_!==void 0?_:"",T.participantIdentity=(g=N.participantIdentity)!==null&&g!==void 0?g:"",T.participantName=(E=N.participantName)!==null&&E!==void 0?E:"",T.audio=N.audio!==void 0&&N.audio!==null?t.IngressAudioOptions.fromPartial(N.audio):void 0,T.video=N.video!==void 0&&N.video!==null?t.IngressVideoOptions.fromPartial(N.video):void 0,T}};function D(){return{roomName:""}}t.ListIngressRequest={encode(N,x=d.default.Writer.create()){return N.roomName!==void 0&&N.roomName!==""&&x.uint32(10).string(N.roomName),x},decode(N,x){const b=N instanceof d.default.Reader?N:new d.default.Reader(N);let _=x===void 0?b.len:b.pos+x;const g=D();for(;b.pos<_;){const E=b.uint32();switch(E>>>3){case 1:g.roomName=b.string();break;default:b.skipType(E&7);break}}return g},fromJSON(N){return{roomName:Y(N.roomName)?String(N.roomName):""}},toJSON(N){const x={};return N.roomName!==void 0&&(x.roomName=N.roomName),x},fromPartial(N){var x;const b=D();return b.roomName=(x=N.roomName)!==null&&x!==void 0?x:"",b}};function $(){return{items:[]}}t.ListIngressResponse={encode(N,x=d.default.Writer.create()){if(N.items!==void 0&&N.items.length!==0)for(const b of N.items)t.IngressInfo.encode(b,x.uint32(10).fork()).ldelim();return x},decode(N,x){const b=N instanceof d.default.Reader?N:new d.default.Reader(N);let _=x===void 0?b.len:b.pos+x;const g=$();for(;b.pos<_;){const E=b.uint32();switch(E>>>3){case 1:g.items.push(t.IngressInfo.decode(b,b.uint32()));break;default:b.skipType(E&7);break}}return g},fromJSON(N){return{items:Array.isArray(N==null?void 0:N.items)?N.items.map(x=>t.IngressInfo.fromJSON(x)):[]}},toJSON(N){const x={};return N.items?x.items=N.items.map(b=>b?t.IngressInfo.toJSON(b):void 0):x.items=[],x},fromPartial(N){var x;const b=$();return b.items=((x=N.items)===null||x===void 0?void 0:x.map(_=>t.IngressInfo.fromPartial(_)))||[],b}};function H(){return{ingressId:""}}t.DeleteIngressRequest={encode(N,x=d.default.Writer.create()){return N.ingressId!==void 0&&N.ingressId!==""&&x.uint32(10).string(N.ingressId),x},decode(N,x){const b=N instanceof d.default.Reader?N:new d.default.Reader(N);let _=x===void 0?b.len:b.pos+x;const g=H();for(;b.pos<_;){const E=b.uint32();switch(E>>>3){case 1:g.ingressId=b.string();break;default:b.skipType(E&7);break}}return g},fromJSON(N){return{ingressId:Y(N.ingressId)?String(N.ingressId):""}},toJSON(N){const x={};return N.ingressId!==void 0&&(x.ingressId=N.ingressId),x},fromPartial(N){var x;const b=H();return b.ingressId=(x=N.ingressId)!==null&&x!==void 0?x:"",b}};var Z=(()=>{if(typeof Z<"u")return Z;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function re(N){if(N.gt(Number.MAX_SAFE_INTEGER))throw new Z.Error("Value is larger than Number.MAX_SAFE_INTEGER");return N.toNumber()}d.default.util.Long!==s.default&&(d.default.util.Long=s.default,d.default.configure());function Y(N){return N!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./livekit_models":75,long:85,"protobufjs/minimal":89}],75:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(t,"__esModule",{value:!0}),t.RTPStats_GapHistogramEntry=t.RTPStats=t.DisabledCodecs=t.VideoConfiguration=t.ClientConfiguration=t.ClientInfo=t.ServerInfo=t.ParticipantTracks=t.UserPacket=t.SpeakerInfo=t.ActiveSpeakerUpdate=t.DataPacket=t.VideoLayer=t.TrackInfo=t.SimulcastCodecInfo=t.ParticipantInfo=t.ParticipantPermission=t.Codec=t.Room=t.clientInfo_SDKToJSON=t.clientInfo_SDKFromJSON=t.ClientInfo_SDK=t.serverInfo_EditionToJSON=t.serverInfo_EditionFromJSON=t.ServerInfo_Edition=t.dataPacket_KindToJSON=t.dataPacket_KindFromJSON=t.DataPacket_Kind=t.participantInfo_StateToJSON=t.participantInfo_StateFromJSON=t.ParticipantInfo_State=t.disconnectReasonToJSON=t.disconnectReasonFromJSON=t.DisconnectReason=t.clientConfigSettingToJSON=t.clientConfigSettingFromJSON=t.ClientConfigSetting=t.connectionQualityToJSON=t.connectionQualityFromJSON=t.ConnectionQuality=t.videoQualityToJSON=t.videoQualityFromJSON=t.VideoQuality=t.trackSourceToJSON=t.trackSourceFromJSON=t.TrackSource=t.trackTypeToJSON=t.trackTypeFromJSON=t.TrackType=t.protobufPackage=void 0,t.TimedVersion=void 0;const s=a(e("long")),d=a(e("protobufjs/minimal")),o=e("./google/protobuf/timestamp");t.protobufPackage="livekit";var f;(function(S){S[S.AUDIO=0]="AUDIO",S[S.VIDEO=1]="VIDEO",S[S.DATA=2]="DATA",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(f=t.TrackType||(t.TrackType={}));function c(S){switch(S){case 0:case"AUDIO":return f.AUDIO;case 1:case"VIDEO":return f.VIDEO;case 2:case"DATA":return f.DATA;case-1:case"UNRECOGNIZED":default:return f.UNRECOGNIZED}}t.trackTypeFromJSON=c;function p(S){switch(S){case f.AUDIO:return"AUDIO";case f.VIDEO:return"VIDEO";case f.DATA:return"DATA";case f.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.trackTypeToJSON=p;var v;(function(S){S[S.UNKNOWN=0]="UNKNOWN",S[S.CAMERA=1]="CAMERA",S[S.MICROPHONE=2]="MICROPHONE",S[S.SCREEN_SHARE=3]="SCREEN_SHARE",S[S.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(v=t.TrackSource||(t.TrackSource={}));function l(S){switch(S){case 0:case"UNKNOWN":return v.UNKNOWN;case 1:case"CAMERA":return v.CAMERA;case 2:case"MICROPHONE":return v.MICROPHONE;case 3:case"SCREEN_SHARE":return v.SCREEN_SHARE;case 4:case"SCREEN_SHARE_AUDIO":return v.SCREEN_SHARE_AUDIO;case-1:case"UNRECOGNIZED":default:return v.UNRECOGNIZED}}t.trackSourceFromJSON=l;function u(S){switch(S){case v.UNKNOWN:return"UNKNOWN";case v.CAMERA:return"CAMERA";case v.MICROPHONE:return"MICROPHONE";case v.SCREEN_SHARE:return"SCREEN_SHARE";case v.SCREEN_SHARE_AUDIO:return"SCREEN_SHARE_AUDIO";case v.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.trackSourceToJSON=u;var h;(function(S){S[S.LOW=0]="LOW",S[S.MEDIUM=1]="MEDIUM",S[S.HIGH=2]="HIGH",S[S.OFF=3]="OFF",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(h=t.VideoQuality||(t.VideoQuality={}));function m(S){switch(S){case 0:case"LOW":return h.LOW;case 1:case"MEDIUM":return h.MEDIUM;case 2:case"HIGH":return h.HIGH;case 3:case"OFF":return h.OFF;case-1:case"UNRECOGNIZED":default:return h.UNRECOGNIZED}}t.videoQualityFromJSON=m;function w(S){switch(S){case h.LOW:return"LOW";case h.MEDIUM:return"MEDIUM";case h.HIGH:return"HIGH";case h.OFF:return"OFF";case h.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.videoQualityToJSON=w;var k;(function(S){S[S.POOR=0]="POOR",S[S.GOOD=1]="GOOD",S[S.EXCELLENT=2]="EXCELLENT",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(k=t.ConnectionQuality||(t.ConnectionQuality={}));function C(S){switch(S){case 0:case"POOR":return k.POOR;case 1:case"GOOD":return k.GOOD;case 2:case"EXCELLENT":return k.EXCELLENT;case-1:case"UNRECOGNIZED":default:return k.UNRECOGNIZED}}t.connectionQualityFromJSON=C;function O(S){switch(S){case k.POOR:return"POOR";case k.GOOD:return"GOOD";case k.EXCELLENT:return"EXCELLENT";case k.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.connectionQualityToJSON=O;var P;(function(S){S[S.UNSET=0]="UNSET",S[S.DISABLED=1]="DISABLED",S[S.ENABLED=2]="ENABLED",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(P=t.ClientConfigSetting||(t.ClientConfigSetting={}));function M(S){switch(S){case 0:case"UNSET":return P.UNSET;case 1:case"DISABLED":return P.DISABLED;case 2:case"ENABLED":return P.ENABLED;case-1:case"UNRECOGNIZED":default:return P.UNRECOGNIZED}}t.clientConfigSettingFromJSON=M;function D(S){switch(S){case P.UNSET:return"UNSET";case P.DISABLED:return"DISABLED";case P.ENABLED:return"ENABLED";case P.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.clientConfigSettingToJSON=D;var $;(function(S){S[S.UNKNOWN_REASON=0]="UNKNOWN_REASON",S[S.CLIENT_INITIATED=1]="CLIENT_INITIATED",S[S.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",S[S.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",S[S.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",S[S.ROOM_DELETED=5]="ROOM_DELETED",S[S.STATE_MISMATCH=6]="STATE_MISMATCH",S[S.JOIN_FAILURE=7]="JOIN_FAILURE",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})($=t.DisconnectReason||(t.DisconnectReason={}));function H(S){switch(S){case 0:case"UNKNOWN_REASON":return $.UNKNOWN_REASON;case 1:case"CLIENT_INITIATED":return $.CLIENT_INITIATED;case 2:case"DUPLICATE_IDENTITY":return $.DUPLICATE_IDENTITY;case 3:case"SERVER_SHUTDOWN":return $.SERVER_SHUTDOWN;case 4:case"PARTICIPANT_REMOVED":return $.PARTICIPANT_REMOVED;case 5:case"ROOM_DELETED":return $.ROOM_DELETED;case 6:case"STATE_MISMATCH":return $.STATE_MISMATCH;case 7:case"JOIN_FAILURE":return $.JOIN_FAILURE;case-1:case"UNRECOGNIZED":default:return $.UNRECOGNIZED}}t.disconnectReasonFromJSON=H;function Z(S){switch(S){case $.UNKNOWN_REASON:return"UNKNOWN_REASON";case $.CLIENT_INITIATED:return"CLIENT_INITIATED";case $.DUPLICATE_IDENTITY:return"DUPLICATE_IDENTITY";case $.SERVER_SHUTDOWN:return"SERVER_SHUTDOWN";case $.PARTICIPANT_REMOVED:return"PARTICIPANT_REMOVED";case $.ROOM_DELETED:return"ROOM_DELETED";case $.STATE_MISMATCH:return"STATE_MISMATCH";case $.JOIN_FAILURE:return"JOIN_FAILURE";case $.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.disconnectReasonToJSON=Z;var re;(function(S){S[S.JOINING=0]="JOINING",S[S.JOINED=1]="JOINED",S[S.ACTIVE=2]="ACTIVE",S[S.DISCONNECTED=3]="DISCONNECTED",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(re=t.ParticipantInfo_State||(t.ParticipantInfo_State={}));function Y(S){switch(S){case 0:case"JOINING":return re.JOINING;case 1:case"JOINED":return re.JOINED;case 2:case"ACTIVE":return re.ACTIVE;case 3:case"DISCONNECTED":return re.DISCONNECTED;case-1:case"UNRECOGNIZED":default:return re.UNRECOGNIZED}}t.participantInfo_StateFromJSON=Y;function N(S){switch(S){case re.JOINING:return"JOINING";case re.JOINED:return"JOINED";case re.ACTIVE:return"ACTIVE";case re.DISCONNECTED:return"DISCONNECTED";case re.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.participantInfo_StateToJSON=N;var x;(function(S){S[S.RELIABLE=0]="RELIABLE",S[S.LOSSY=1]="LOSSY",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(x=t.DataPacket_Kind||(t.DataPacket_Kind={}));function b(S){switch(S){case 0:case"RELIABLE":return x.RELIABLE;case 1:case"LOSSY":return x.LOSSY;case-1:case"UNRECOGNIZED":default:return x.UNRECOGNIZED}}t.dataPacket_KindFromJSON=b;function _(S){switch(S){case x.RELIABLE:return"RELIABLE";case x.LOSSY:return"LOSSY";case x.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.dataPacket_KindToJSON=_;var g;(function(S){S[S.Standard=0]="Standard",S[S.Cloud=1]="Cloud",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(g=t.ServerInfo_Edition||(t.ServerInfo_Edition={}));function E(S){switch(S){case 0:case"Standard":return g.Standard;case 1:case"Cloud":return g.Cloud;case-1:case"UNRECOGNIZED":default:return g.UNRECOGNIZED}}t.serverInfo_EditionFromJSON=E;function T(S){switch(S){case g.Standard:return"Standard";case g.Cloud:return"Cloud";case g.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.serverInfo_EditionToJSON=T;var A;(function(S){S[S.UNKNOWN=0]="UNKNOWN",S[S.JS=1]="JS",S[S.SWIFT=2]="SWIFT",S[S.ANDROID=3]="ANDROID",S[S.FLUTTER=4]="FLUTTER",S[S.GO=5]="GO",S[S.UNITY=6]="UNITY",S[S.UNRECOGNIZED=-1]="UNRECOGNIZED"})(A=t.ClientInfo_SDK||(t.ClientInfo_SDK={}));function J(S){switch(S){case 0:case"UNKNOWN":return A.UNKNOWN;case 1:case"JS":return A.JS;case 2:case"SWIFT":return A.SWIFT;case 3:case"ANDROID":return A.ANDROID;case 4:case"FLUTTER":return A.FLUTTER;case 5:case"GO":return A.GO;case 6:case"UNITY":return A.UNITY;case-1:case"UNRECOGNIZED":default:return A.UNRECOGNIZED}}t.clientInfo_SDKFromJSON=J;function G(S){switch(S){case A.UNKNOWN:return"UNKNOWN";case A.JS:return"JS";case A.SWIFT:return"SWIFT";case A.ANDROID:return"ANDROID";case A.FLUTTER:return"FLUTTER";case A.GO:return"GO";case A.UNITY:return"UNITY";case A.UNRECOGNIZED:default:return"UNRECOGNIZED"}}t.clientInfo_SDKToJSON=G;function I(){return{sid:"",name:"",emptyTimeout:0,maxParticipants:0,creationTime:0,turnPassword:"",enabledCodecs:[],metadata:"",numParticipants:0,activeRecording:!1}}t.Room={encode(S,F=d.default.Writer.create()){S.sid!==""&&F.uint32(10).string(S.sid),S.name!==""&&F.uint32(18).string(S.name),S.emptyTimeout!==0&&F.uint32(24).uint32(S.emptyTimeout),S.maxParticipants!==0&&F.uint32(32).uint32(S.maxParticipants),S.creationTime!==0&&F.uint32(40).int64(S.creationTime),S.turnPassword!==""&&F.uint32(50).string(S.turnPassword);for(const K of S.enabledCodecs)t.Codec.encode(K,F.uint32(58).fork()).ldelim();return S.metadata!==""&&F.uint32(66).string(S.metadata),S.numParticipants!==0&&F.uint32(72).uint32(S.numParticipants),S.activeRecording===!0&&F.uint32(80).bool(S.activeRecording),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=I();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.name=K.string();break;case 3:ae.emptyTimeout=K.uint32();break;case 4:ae.maxParticipants=K.uint32();break;case 5:ae.creationTime=q(K.int64());break;case 6:ae.turnPassword=K.string();break;case 7:ae.enabledCodecs.push(t.Codec.decode(K,K.uint32()));break;case 8:ae.metadata=K.string();break;case 9:ae.numParticipants=K.uint32();break;case 10:ae.activeRecording=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{sid:j(S.sid)?String(S.sid):"",name:j(S.name)?String(S.name):"",emptyTimeout:j(S.emptyTimeout)?Number(S.emptyTimeout):0,maxParticipants:j(S.maxParticipants)?Number(S.maxParticipants):0,creationTime:j(S.creationTime)?Number(S.creationTime):0,turnPassword:j(S.turnPassword)?String(S.turnPassword):"",enabledCodecs:Array.isArray(S==null?void 0:S.enabledCodecs)?S.enabledCodecs.map(F=>t.Codec.fromJSON(F)):[],metadata:j(S.metadata)?String(S.metadata):"",numParticipants:j(S.numParticipants)?Number(S.numParticipants):0,activeRecording:j(S.activeRecording)?!!S.activeRecording:!1}},toJSON(S){const F={};return S.sid!==void 0&&(F.sid=S.sid),S.name!==void 0&&(F.name=S.name),S.emptyTimeout!==void 0&&(F.emptyTimeout=Math.round(S.emptyTimeout)),S.maxParticipants!==void 0&&(F.maxParticipants=Math.round(S.maxParticipants)),S.creationTime!==void 0&&(F.creationTime=Math.round(S.creationTime)),S.turnPassword!==void 0&&(F.turnPassword=S.turnPassword),S.enabledCodecs?F.enabledCodecs=S.enabledCodecs.map(K=>K?t.Codec.toJSON(K):void 0):F.enabledCodecs=[],S.metadata!==void 0&&(F.metadata=S.metadata),S.numParticipants!==void 0&&(F.numParticipants=Math.round(S.numParticipants)),S.activeRecording!==void 0&&(F.activeRecording=S.activeRecording),F},fromPartial(S){var F,K,ve,ae,_e,Ne,Pe,Ue,xe,Ae;const Re=I();return Re.sid=(F=S.sid)!==null&&F!==void 0?F:"",Re.name=(K=S.name)!==null&&K!==void 0?K:"",Re.emptyTimeout=(ve=S.emptyTimeout)!==null&&ve!==void 0?ve:0,Re.maxParticipants=(ae=S.maxParticipants)!==null&&ae!==void 0?ae:0,Re.creationTime=(_e=S.creationTime)!==null&&_e!==void 0?_e:0,Re.turnPassword=(Ne=S.turnPassword)!==null&&Ne!==void 0?Ne:"",Re.enabledCodecs=((Pe=S.enabledCodecs)===null||Pe===void 0?void 0:Pe.map($e=>t.Codec.fromPartial($e)))||[],Re.metadata=(Ue=S.metadata)!==null&&Ue!==void 0?Ue:"",Re.numParticipants=(xe=S.numParticipants)!==null&&xe!==void 0?xe:0,Re.activeRecording=(Ae=S.activeRecording)!==null&&Ae!==void 0?Ae:!1,Re}};function V(){return{mime:"",fmtpLine:""}}t.Codec={encode(S,F=d.default.Writer.create()){return S.mime!==""&&F.uint32(10).string(S.mime),S.fmtpLine!==""&&F.uint32(18).string(S.fmtpLine),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=V();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.mime=K.string();break;case 2:ae.fmtpLine=K.string();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{mime:j(S.mime)?String(S.mime):"",fmtpLine:j(S.fmtpLine)?String(S.fmtpLine):""}},toJSON(S){const F={};return S.mime!==void 0&&(F.mime=S.mime),S.fmtpLine!==void 0&&(F.fmtpLine=S.fmtpLine),F},fromPartial(S){var F,K;const ve=V();return ve.mime=(F=S.mime)!==null&&F!==void 0?F:"",ve.fmtpLine=(K=S.fmtpLine)!==null&&K!==void 0?K:"",ve}};function L(){return{canSubscribe:!1,canPublish:!1,canPublishData:!1,hidden:!1,recorder:!1}}t.ParticipantPermission={encode(S,F=d.default.Writer.create()){return S.canSubscribe===!0&&F.uint32(8).bool(S.canSubscribe),S.canPublish===!0&&F.uint32(16).bool(S.canPublish),S.canPublishData===!0&&F.uint32(24).bool(S.canPublishData),S.hidden===!0&&F.uint32(56).bool(S.hidden),S.recorder===!0&&F.uint32(64).bool(S.recorder),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=L();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.canSubscribe=K.bool();break;case 2:ae.canPublish=K.bool();break;case 3:ae.canPublishData=K.bool();break;case 7:ae.hidden=K.bool();break;case 8:ae.recorder=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{canSubscribe:j(S.canSubscribe)?!!S.canSubscribe:!1,canPublish:j(S.canPublish)?!!S.canPublish:!1,canPublishData:j(S.canPublishData)?!!S.canPublishData:!1,hidden:j(S.hidden)?!!S.hidden:!1,recorder:j(S.recorder)?!!S.recorder:!1}},toJSON(S){const F={};return S.canSubscribe!==void 0&&(F.canSubscribe=S.canSubscribe),S.canPublish!==void 0&&(F.canPublish=S.canPublish),S.canPublishData!==void 0&&(F.canPublishData=S.canPublishData),S.hidden!==void 0&&(F.hidden=S.hidden),S.recorder!==void 0&&(F.recorder=S.recorder),F},fromPartial(S){var F,K,ve,ae,_e;const Ne=L();return Ne.canSubscribe=(F=S.canSubscribe)!==null&&F!==void 0?F:!1,Ne.canPublish=(K=S.canPublish)!==null&&K!==void 0?K:!1,Ne.canPublishData=(ve=S.canPublishData)!==null&&ve!==void 0?ve:!1,Ne.hidden=(ae=S.hidden)!==null&&ae!==void 0?ae:!1,Ne.recorder=(_e=S.recorder)!==null&&_e!==void 0?_e:!1,Ne}};function z(){return{sid:"",identity:"",state:0,tracks:[],metadata:"",joinedAt:0,name:"",version:0,permission:void 0,region:"",isPublisher:!1}}t.ParticipantInfo={encode(S,F=d.default.Writer.create()){S.sid!==""&&F.uint32(10).string(S.sid),S.identity!==""&&F.uint32(18).string(S.identity),S.state!==0&&F.uint32(24).int32(S.state);for(const K of S.tracks)t.TrackInfo.encode(K,F.uint32(34).fork()).ldelim();return S.metadata!==""&&F.uint32(42).string(S.metadata),S.joinedAt!==0&&F.uint32(48).int64(S.joinedAt),S.name!==""&&F.uint32(74).string(S.name),S.version!==0&&F.uint32(80).uint32(S.version),S.permission!==void 0&&t.ParticipantPermission.encode(S.permission,F.uint32(90).fork()).ldelim(),S.region!==""&&F.uint32(98).string(S.region),S.isPublisher===!0&&F.uint32(104).bool(S.isPublisher),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=z();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.identity=K.string();break;case 3:ae.state=K.int32();break;case 4:ae.tracks.push(t.TrackInfo.decode(K,K.uint32()));break;case 5:ae.metadata=K.string();break;case 6:ae.joinedAt=q(K.int64());break;case 9:ae.name=K.string();break;case 10:ae.version=K.uint32();break;case 11:ae.permission=t.ParticipantPermission.decode(K,K.uint32());break;case 12:ae.region=K.string();break;case 13:ae.isPublisher=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{sid:j(S.sid)?String(S.sid):"",identity:j(S.identity)?String(S.identity):"",state:j(S.state)?Y(S.state):0,tracks:Array.isArray(S==null?void 0:S.tracks)?S.tracks.map(F=>t.TrackInfo.fromJSON(F)):[],metadata:j(S.metadata)?String(S.metadata):"",joinedAt:j(S.joinedAt)?Number(S.joinedAt):0,name:j(S.name)?String(S.name):"",version:j(S.version)?Number(S.version):0,permission:j(S.permission)?t.ParticipantPermission.fromJSON(S.permission):void 0,region:j(S.region)?String(S.region):"",isPublisher:j(S.isPublisher)?!!S.isPublisher:!1}},toJSON(S){const F={};return S.sid!==void 0&&(F.sid=S.sid),S.identity!==void 0&&(F.identity=S.identity),S.state!==void 0&&(F.state=N(S.state)),S.tracks?F.tracks=S.tracks.map(K=>K?t.TrackInfo.toJSON(K):void 0):F.tracks=[],S.metadata!==void 0&&(F.metadata=S.metadata),S.joinedAt!==void 0&&(F.joinedAt=Math.round(S.joinedAt)),S.name!==void 0&&(F.name=S.name),S.version!==void 0&&(F.version=Math.round(S.version)),S.permission!==void 0&&(F.permission=S.permission?t.ParticipantPermission.toJSON(S.permission):void 0),S.region!==void 0&&(F.region=S.region),S.isPublisher!==void 0&&(F.isPublisher=S.isPublisher),F},fromPartial(S){var F,K,ve,ae,_e,Ne,Pe,Ue,xe,Ae;const Re=z();return Re.sid=(F=S.sid)!==null&&F!==void 0?F:"",Re.identity=(K=S.identity)!==null&&K!==void 0?K:"",Re.state=(ve=S.state)!==null&&ve!==void 0?ve:0,Re.tracks=((ae=S.tracks)===null||ae===void 0?void 0:ae.map($e=>t.TrackInfo.fromPartial($e)))||[],Re.metadata=(_e=S.metadata)!==null&&_e!==void 0?_e:"",Re.joinedAt=(Ne=S.joinedAt)!==null&&Ne!==void 0?Ne:0,Re.name=(Pe=S.name)!==null&&Pe!==void 0?Pe:"",Re.version=(Ue=S.version)!==null&&Ue!==void 0?Ue:0,Re.permission=S.permission!==void 0&&S.permission!==null?t.ParticipantPermission.fromPartial(S.permission):void 0,Re.region=(xe=S.region)!==null&&xe!==void 0?xe:"",Re.isPublisher=(Ae=S.isPublisher)!==null&&Ae!==void 0?Ae:!1,Re}};function ie(){return{mimeType:"",mid:"",cid:"",layers:[]}}t.SimulcastCodecInfo={encode(S,F=d.default.Writer.create()){S.mimeType!==""&&F.uint32(10).string(S.mimeType),S.mid!==""&&F.uint32(18).string(S.mid),S.cid!==""&&F.uint32(26).string(S.cid);for(const K of S.layers)t.VideoLayer.encode(K,F.uint32(34).fork()).ldelim();return F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=ie();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.mimeType=K.string();break;case 2:ae.mid=K.string();break;case 3:ae.cid=K.string();break;case 4:ae.layers.push(t.VideoLayer.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{mimeType:j(S.mimeType)?String(S.mimeType):"",mid:j(S.mid)?String(S.mid):"",cid:j(S.cid)?String(S.cid):"",layers:Array.isArray(S==null?void 0:S.layers)?S.layers.map(F=>t.VideoLayer.fromJSON(F)):[]}},toJSON(S){const F={};return S.mimeType!==void 0&&(F.mimeType=S.mimeType),S.mid!==void 0&&(F.mid=S.mid),S.cid!==void 0&&(F.cid=S.cid),S.layers?F.layers=S.layers.map(K=>K?t.VideoLayer.toJSON(K):void 0):F.layers=[],F},fromPartial(S){var F,K,ve,ae;const _e=ie();return _e.mimeType=(F=S.mimeType)!==null&&F!==void 0?F:"",_e.mid=(K=S.mid)!==null&&K!==void 0?K:"",_e.cid=(ve=S.cid)!==null&&ve!==void 0?ve:"",_e.layers=((ae=S.layers)===null||ae===void 0?void 0:ae.map(Ne=>t.VideoLayer.fromPartial(Ne)))||[],_e}};function se(){return{sid:"",type:0,name:"",muted:!1,width:0,height:0,simulcast:!1,disableDtx:!1,source:0,layers:[],mimeType:"",mid:"",codecs:[],stereo:!1,disableRed:!1}}t.TrackInfo={encode(S,F=d.default.Writer.create()){S.sid!==""&&F.uint32(10).string(S.sid),S.type!==0&&F.uint32(16).int32(S.type),S.name!==""&&F.uint32(26).string(S.name),S.muted===!0&&F.uint32(32).bool(S.muted),S.width!==0&&F.uint32(40).uint32(S.width),S.height!==0&&F.uint32(48).uint32(S.height),S.simulcast===!0&&F.uint32(56).bool(S.simulcast),S.disableDtx===!0&&F.uint32(64).bool(S.disableDtx),S.source!==0&&F.uint32(72).int32(S.source);for(const K of S.layers)t.VideoLayer.encode(K,F.uint32(82).fork()).ldelim();S.mimeType!==""&&F.uint32(90).string(S.mimeType),S.mid!==""&&F.uint32(98).string(S.mid);for(const K of S.codecs)t.SimulcastCodecInfo.encode(K,F.uint32(106).fork()).ldelim();return S.stereo===!0&&F.uint32(112).bool(S.stereo),S.disableRed===!0&&F.uint32(120).bool(S.disableRed),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=se();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.type=K.int32();break;case 3:ae.name=K.string();break;case 4:ae.muted=K.bool();break;case 5:ae.width=K.uint32();break;case 6:ae.height=K.uint32();break;case 7:ae.simulcast=K.bool();break;case 8:ae.disableDtx=K.bool();break;case 9:ae.source=K.int32();break;case 10:ae.layers.push(t.VideoLayer.decode(K,K.uint32()));break;case 11:ae.mimeType=K.string();break;case 12:ae.mid=K.string();break;case 13:ae.codecs.push(t.SimulcastCodecInfo.decode(K,K.uint32()));break;case 14:ae.stereo=K.bool();break;case 15:ae.disableRed=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{sid:j(S.sid)?String(S.sid):"",type:j(S.type)?c(S.type):0,name:j(S.name)?String(S.name):"",muted:j(S.muted)?!!S.muted:!1,width:j(S.width)?Number(S.width):0,height:j(S.height)?Number(S.height):0,simulcast:j(S.simulcast)?!!S.simulcast:!1,disableDtx:j(S.disableDtx)?!!S.disableDtx:!1,source:j(S.source)?l(S.source):0,layers:Array.isArray(S==null?void 0:S.layers)?S.layers.map(F=>t.VideoLayer.fromJSON(F)):[],mimeType:j(S.mimeType)?String(S.mimeType):"",mid:j(S.mid)?String(S.mid):"",codecs:Array.isArray(S==null?void 0:S.codecs)?S.codecs.map(F=>t.SimulcastCodecInfo.fromJSON(F)):[],stereo:j(S.stereo)?!!S.stereo:!1,disableRed:j(S.disableRed)?!!S.disableRed:!1}},toJSON(S){const F={};return S.sid!==void 0&&(F.sid=S.sid),S.type!==void 0&&(F.type=p(S.type)),S.name!==void 0&&(F.name=S.name),S.muted!==void 0&&(F.muted=S.muted),S.width!==void 0&&(F.width=Math.round(S.width)),S.height!==void 0&&(F.height=Math.round(S.height)),S.simulcast!==void 0&&(F.simulcast=S.simulcast),S.disableDtx!==void 0&&(F.disableDtx=S.disableDtx),S.source!==void 0&&(F.source=u(S.source)),S.layers?F.layers=S.layers.map(K=>K?t.VideoLayer.toJSON(K):void 0):F.layers=[],S.mimeType!==void 0&&(F.mimeType=S.mimeType),S.mid!==void 0&&(F.mid=S.mid),S.codecs?F.codecs=S.codecs.map(K=>K?t.SimulcastCodecInfo.toJSON(K):void 0):F.codecs=[],S.stereo!==void 0&&(F.stereo=S.stereo),S.disableRed!==void 0&&(F.disableRed=S.disableRed),F},fromPartial(S){var F,K,ve,ae,_e,Ne,Pe,Ue,xe,Ae,Re,$e,De,Be,He;const Me=se();return Me.sid=(F=S.sid)!==null&&F!==void 0?F:"",Me.type=(K=S.type)!==null&&K!==void 0?K:0,Me.name=(ve=S.name)!==null&&ve!==void 0?ve:"",Me.muted=(ae=S.muted)!==null&&ae!==void 0?ae:!1,Me.width=(_e=S.width)!==null&&_e!==void 0?_e:0,Me.height=(Ne=S.height)!==null&&Ne!==void 0?Ne:0,Me.simulcast=(Pe=S.simulcast)!==null&&Pe!==void 0?Pe:!1,Me.disableDtx=(Ue=S.disableDtx)!==null&&Ue!==void 0?Ue:!1,Me.source=(xe=S.source)!==null&&xe!==void 0?xe:0,Me.layers=((Ae=S.layers)===null||Ae===void 0?void 0:Ae.map(qe=>t.VideoLayer.fromPartial(qe)))||[],Me.mimeType=(Re=S.mimeType)!==null&&Re!==void 0?Re:"",Me.mid=($e=S.mid)!==null&&$e!==void 0?$e:"",Me.codecs=((De=S.codecs)===null||De===void 0?void 0:De.map(qe=>t.SimulcastCodecInfo.fromPartial(qe)))||[],Me.stereo=(Be=S.stereo)!==null&&Be!==void 0?Be:!1,Me.disableRed=(He=S.disableRed)!==null&&He!==void 0?He:!1,Me}};function me(){return{quality:0,width:0,height:0,bitrate:0,ssrc:0}}t.VideoLayer={encode(S,F=d.default.Writer.create()){return S.quality!==0&&F.uint32(8).int32(S.quality),S.width!==0&&F.uint32(16).uint32(S.width),S.height!==0&&F.uint32(24).uint32(S.height),S.bitrate!==0&&F.uint32(32).uint32(S.bitrate),S.ssrc!==0&&F.uint32(40).uint32(S.ssrc),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=me();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.quality=K.int32();break;case 2:ae.width=K.uint32();break;case 3:ae.height=K.uint32();break;case 4:ae.bitrate=K.uint32();break;case 5:ae.ssrc=K.uint32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{quality:j(S.quality)?m(S.quality):0,width:j(S.width)?Number(S.width):0,height:j(S.height)?Number(S.height):0,bitrate:j(S.bitrate)?Number(S.bitrate):0,ssrc:j(S.ssrc)?Number(S.ssrc):0}},toJSON(S){const F={};return S.quality!==void 0&&(F.quality=w(S.quality)),S.width!==void 0&&(F.width=Math.round(S.width)),S.height!==void 0&&(F.height=Math.round(S.height)),S.bitrate!==void 0&&(F.bitrate=Math.round(S.bitrate)),S.ssrc!==void 0&&(F.ssrc=Math.round(S.ssrc)),F},fromPartial(S){var F,K,ve,ae,_e;const Ne=me();return Ne.quality=(F=S.quality)!==null&&F!==void 0?F:0,Ne.width=(K=S.width)!==null&&K!==void 0?K:0,Ne.height=(ve=S.height)!==null&&ve!==void 0?ve:0,Ne.bitrate=(ae=S.bitrate)!==null&&ae!==void 0?ae:0,Ne.ssrc=(_e=S.ssrc)!==null&&_e!==void 0?_e:0,Ne}};function Se(){return{kind:0,user:void 0,speaker:void 0}}t.DataPacket={encode(S,F=d.default.Writer.create()){return S.kind!==0&&F.uint32(8).int32(S.kind),S.user!==void 0&&t.UserPacket.encode(S.user,F.uint32(18).fork()).ldelim(),S.speaker!==void 0&&t.ActiveSpeakerUpdate.encode(S.speaker,F.uint32(26).fork()).ldelim(),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=Se();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.kind=K.int32();break;case 2:ae.user=t.UserPacket.decode(K,K.uint32());break;case 3:ae.speaker=t.ActiveSpeakerUpdate.decode(K,K.uint32());break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{kind:j(S.kind)?b(S.kind):0,user:j(S.user)?t.UserPacket.fromJSON(S.user):void 0,speaker:j(S.speaker)?t.ActiveSpeakerUpdate.fromJSON(S.speaker):void 0}},toJSON(S){const F={};return S.kind!==void 0&&(F.kind=_(S.kind)),S.user!==void 0&&(F.user=S.user?t.UserPacket.toJSON(S.user):void 0),S.speaker!==void 0&&(F.speaker=S.speaker?t.ActiveSpeakerUpdate.toJSON(S.speaker):void 0),F},fromPartial(S){var F;const K=Se();return K.kind=(F=S.kind)!==null&&F!==void 0?F:0,K.user=S.user!==void 0&&S.user!==null?t.UserPacket.fromPartial(S.user):void 0,K.speaker=S.speaker!==void 0&&S.speaker!==null?t.ActiveSpeakerUpdate.fromPartial(S.speaker):void 0,K}};function ke(){return{speakers:[]}}t.ActiveSpeakerUpdate={encode(S,F=d.default.Writer.create()){for(const K of S.speakers)t.SpeakerInfo.encode(K,F.uint32(10).fork()).ldelim();return F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=ke();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.speakers.push(t.SpeakerInfo.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{speakers:Array.isArray(S==null?void 0:S.speakers)?S.speakers.map(F=>t.SpeakerInfo.fromJSON(F)):[]}},toJSON(S){const F={};return S.speakers?F.speakers=S.speakers.map(K=>K?t.SpeakerInfo.toJSON(K):void 0):F.speakers=[],F},fromPartial(S){var F;const K=ke();return K.speakers=((F=S.speakers)===null||F===void 0?void 0:F.map(ve=>t.SpeakerInfo.fromPartial(ve)))||[],K}};function oe(){return{sid:"",level:0,active:!1}}t.SpeakerInfo={encode(S,F=d.default.Writer.create()){return S.sid!==""&&F.uint32(10).string(S.sid),S.level!==0&&F.uint32(21).float(S.level),S.active===!0&&F.uint32(24).bool(S.active),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=oe();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sid=K.string();break;case 2:ae.level=K.float();break;case 3:ae.active=K.bool();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{sid:j(S.sid)?String(S.sid):"",level:j(S.level)?Number(S.level):0,active:j(S.active)?!!S.active:!1}},toJSON(S){const F={};return S.sid!==void 0&&(F.sid=S.sid),S.level!==void 0&&(F.level=S.level),S.active!==void 0&&(F.active=S.active),F},fromPartial(S){var F,K,ve;const ae=oe();return ae.sid=(F=S.sid)!==null&&F!==void 0?F:"",ae.level=(K=S.level)!==null&&K!==void 0?K:0,ae.active=(ve=S.active)!==null&&ve!==void 0?ve:!1,ae}};function ue(){return{participantSid:"",payload:new Uint8Array,destinationSids:[]}}t.UserPacket={encode(S,F=d.default.Writer.create()){S.participantSid!==""&&F.uint32(10).string(S.participantSid),S.payload.length!==0&&F.uint32(18).bytes(S.payload);for(const K of S.destinationSids)F.uint32(26).string(K);return F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=ue();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.participantSid=K.string();break;case 2:ae.payload=K.bytes();break;case 3:ae.destinationSids.push(K.string());break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{participantSid:j(S.participantSid)?String(S.participantSid):"",payload:j(S.payload)?he(S.payload):new Uint8Array,destinationSids:Array.isArray(S==null?void 0:S.destinationSids)?S.destinationSids.map(F=>String(F)):[]}},toJSON(S){const F={};return S.participantSid!==void 0&&(F.participantSid=S.participantSid),S.payload!==void 0&&(F.payload=ge(S.payload!==void 0?S.payload:new Uint8Array)),S.destinationSids?F.destinationSids=S.destinationSids.map(K=>K):F.destinationSids=[],F},fromPartial(S){var F,K,ve;const ae=ue();return ae.participantSid=(F=S.participantSid)!==null&&F!==void 0?F:"",ae.payload=(K=S.payload)!==null&&K!==void 0?K:new Uint8Array,ae.destinationSids=((ve=S.destinationSids)===null||ve===void 0?void 0:ve.map(_e=>_e))||[],ae}};function ye(){return{participantSid:"",trackSids:[]}}t.ParticipantTracks={encode(S,F=d.default.Writer.create()){S.participantSid!==""&&F.uint32(10).string(S.participantSid);for(const K of S.trackSids)F.uint32(18).string(K);return F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=ye();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.participantSid=K.string();break;case 2:ae.trackSids.push(K.string());break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{participantSid:j(S.participantSid)?String(S.participantSid):"",trackSids:Array.isArray(S==null?void 0:S.trackSids)?S.trackSids.map(F=>String(F)):[]}},toJSON(S){const F={};return S.participantSid!==void 0&&(F.participantSid=S.participantSid),S.trackSids?F.trackSids=S.trackSids.map(K=>K):F.trackSids=[],F},fromPartial(S){var F,K;const ve=ye();return ve.participantSid=(F=S.participantSid)!==null&&F!==void 0?F:"",ve.trackSids=((K=S.trackSids)===null||K===void 0?void 0:K.map(ae=>ae))||[],ve}};function we(){return{edition:0,version:"",protocol:0,region:"",nodeId:"",debugInfo:""}}t.ServerInfo={encode(S,F=d.default.Writer.create()){return S.edition!==0&&F.uint32(8).int32(S.edition),S.version!==""&&F.uint32(18).string(S.version),S.protocol!==0&&F.uint32(24).int32(S.protocol),S.region!==""&&F.uint32(34).string(S.region),S.nodeId!==""&&F.uint32(42).string(S.nodeId),S.debugInfo!==""&&F.uint32(50).string(S.debugInfo),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=we();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.edition=K.int32();break;case 2:ae.version=K.string();break;case 3:ae.protocol=K.int32();break;case 4:ae.region=K.string();break;case 5:ae.nodeId=K.string();break;case 6:ae.debugInfo=K.string();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{edition:j(S.edition)?E(S.edition):0,version:j(S.version)?String(S.version):"",protocol:j(S.protocol)?Number(S.protocol):0,region:j(S.region)?String(S.region):"",nodeId:j(S.nodeId)?String(S.nodeId):"",debugInfo:j(S.debugInfo)?String(S.debugInfo):""}},toJSON(S){const F={};return S.edition!==void 0&&(F.edition=T(S.edition)),S.version!==void 0&&(F.version=S.version),S.protocol!==void 0&&(F.protocol=Math.round(S.protocol)),S.region!==void 0&&(F.region=S.region),S.nodeId!==void 0&&(F.nodeId=S.nodeId),S.debugInfo!==void 0&&(F.debugInfo=S.debugInfo),F},fromPartial(S){var F,K,ve,ae,_e,Ne;const Pe=we();return Pe.edition=(F=S.edition)!==null&&F!==void 0?F:0,Pe.version=(K=S.version)!==null&&K!==void 0?K:"",Pe.protocol=(ve=S.protocol)!==null&&ve!==void 0?ve:0,Pe.region=(ae=S.region)!==null&&ae!==void 0?ae:"",Pe.nodeId=(_e=S.nodeId)!==null&&_e!==void 0?_e:"",Pe.debugInfo=(Ne=S.debugInfo)!==null&&Ne!==void 0?Ne:"",Pe}};function le(){return{sdk:0,version:"",protocol:0,os:"",osVersion:"",deviceModel:"",browser:"",browserVersion:"",address:"",network:""}}t.ClientInfo={encode(S,F=d.default.Writer.create()){return S.sdk!==0&&F.uint32(8).int32(S.sdk),S.version!==""&&F.uint32(18).string(S.version),S.protocol!==0&&F.uint32(24).int32(S.protocol),S.os!==""&&F.uint32(34).string(S.os),S.osVersion!==""&&F.uint32(42).string(S.osVersion),S.deviceModel!==""&&F.uint32(50).string(S.deviceModel),S.browser!==""&&F.uint32(58).string(S.browser),S.browserVersion!==""&&F.uint32(66).string(S.browserVersion),S.address!==""&&F.uint32(74).string(S.address),S.network!==""&&F.uint32(82).string(S.network),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=le();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.sdk=K.int32();break;case 2:ae.version=K.string();break;case 3:ae.protocol=K.int32();break;case 4:ae.os=K.string();break;case 5:ae.osVersion=K.string();break;case 6:ae.deviceModel=K.string();break;case 7:ae.browser=K.string();break;case 8:ae.browserVersion=K.string();break;case 9:ae.address=K.string();break;case 10:ae.network=K.string();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{sdk:j(S.sdk)?J(S.sdk):0,version:j(S.version)?String(S.version):"",protocol:j(S.protocol)?Number(S.protocol):0,os:j(S.os)?String(S.os):"",osVersion:j(S.osVersion)?String(S.osVersion):"",deviceModel:j(S.deviceModel)?String(S.deviceModel):"",browser:j(S.browser)?String(S.browser):"",browserVersion:j(S.browserVersion)?String(S.browserVersion):"",address:j(S.address)?String(S.address):"",network:j(S.network)?String(S.network):""}},toJSON(S){const F={};return S.sdk!==void 0&&(F.sdk=G(S.sdk)),S.version!==void 0&&(F.version=S.version),S.protocol!==void 0&&(F.protocol=Math.round(S.protocol)),S.os!==void 0&&(F.os=S.os),S.osVersion!==void 0&&(F.osVersion=S.osVersion),S.deviceModel!==void 0&&(F.deviceModel=S.deviceModel),S.browser!==void 0&&(F.browser=S.browser),S.browserVersion!==void 0&&(F.browserVersion=S.browserVersion),S.address!==void 0&&(F.address=S.address),S.network!==void 0&&(F.network=S.network),F},fromPartial(S){var F,K,ve,ae,_e,Ne,Pe,Ue,xe,Ae;const Re=le();return Re.sdk=(F=S.sdk)!==null&&F!==void 0?F:0,Re.version=(K=S.version)!==null&&K!==void 0?K:"",Re.protocol=(ve=S.protocol)!==null&&ve!==void 0?ve:0,Re.os=(ae=S.os)!==null&&ae!==void 0?ae:"",Re.osVersion=(_e=S.osVersion)!==null&&_e!==void 0?_e:"",Re.deviceModel=(Ne=S.deviceModel)!==null&&Ne!==void 0?Ne:"",Re.browser=(Pe=S.browser)!==null&&Pe!==void 0?Pe:"",Re.browserVersion=(Ue=S.browserVersion)!==null&&Ue!==void 0?Ue:"",Re.address=(xe=S.address)!==null&&xe!==void 0?xe:"",Re.network=(Ae=S.network)!==null&&Ae!==void 0?Ae:"",Re}};function ee(){return{video:void 0,screen:void 0,resumeConnection:0,disabledCodecs:void 0,forceRelay:0}}t.ClientConfiguration={encode(S,F=d.default.Writer.create()){return S.video!==void 0&&t.VideoConfiguration.encode(S.video,F.uint32(10).fork()).ldelim(),S.screen!==void 0&&t.VideoConfiguration.encode(S.screen,F.uint32(18).fork()).ldelim(),S.resumeConnection!==0&&F.uint32(24).int32(S.resumeConnection),S.disabledCodecs!==void 0&&t.DisabledCodecs.encode(S.disabledCodecs,F.uint32(34).fork()).ldelim(),S.forceRelay!==0&&F.uint32(40).int32(S.forceRelay),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=ee();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.video=t.VideoConfiguration.decode(K,K.uint32());break;case 2:ae.screen=t.VideoConfiguration.decode(K,K.uint32());break;case 3:ae.resumeConnection=K.int32();break;case 4:ae.disabledCodecs=t.DisabledCodecs.decode(K,K.uint32());break;case 5:ae.forceRelay=K.int32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{video:j(S.video)?t.VideoConfiguration.fromJSON(S.video):void 0,screen:j(S.screen)?t.VideoConfiguration.fromJSON(S.screen):void 0,resumeConnection:j(S.resumeConnection)?M(S.resumeConnection):0,disabledCodecs:j(S.disabledCodecs)?t.DisabledCodecs.fromJSON(S.disabledCodecs):void 0,forceRelay:j(S.forceRelay)?M(S.forceRelay):0}},toJSON(S){const F={};return S.video!==void 0&&(F.video=S.video?t.VideoConfiguration.toJSON(S.video):void 0),S.screen!==void 0&&(F.screen=S.screen?t.VideoConfiguration.toJSON(S.screen):void 0),S.resumeConnection!==void 0&&(F.resumeConnection=D(S.resumeConnection)),S.disabledCodecs!==void 0&&(F.disabledCodecs=S.disabledCodecs?t.DisabledCodecs.toJSON(S.disabledCodecs):void 0),S.forceRelay!==void 0&&(F.forceRelay=D(S.forceRelay)),F},fromPartial(S){var F,K;const ve=ee();return ve.video=S.video!==void 0&&S.video!==null?t.VideoConfiguration.fromPartial(S.video):void 0,ve.screen=S.screen!==void 0&&S.screen!==null?t.VideoConfiguration.fromPartial(S.screen):void 0,ve.resumeConnection=(F=S.resumeConnection)!==null&&F!==void 0?F:0,ve.disabledCodecs=S.disabledCodecs!==void 0&&S.disabledCodecs!==null?t.DisabledCodecs.fromPartial(S.disabledCodecs):void 0,ve.forceRelay=(K=S.forceRelay)!==null&&K!==void 0?K:0,ve}};function te(){return{hardwareEncoder:0}}t.VideoConfiguration={encode(S,F=d.default.Writer.create()){return S.hardwareEncoder!==0&&F.uint32(8).int32(S.hardwareEncoder),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=te();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.hardwareEncoder=K.int32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{hardwareEncoder:j(S.hardwareEncoder)?M(S.hardwareEncoder):0}},toJSON(S){const F={};return S.hardwareEncoder!==void 0&&(F.hardwareEncoder=D(S.hardwareEncoder)),F},fromPartial(S){var F;const K=te();return K.hardwareEncoder=(F=S.hardwareEncoder)!==null&&F!==void 0?F:0,K}};function Q(){return{codecs:[]}}t.DisabledCodecs={encode(S,F=d.default.Writer.create()){for(const K of S.codecs)t.Codec.encode(K,F.uint32(10).fork()).ldelim();return F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=Q();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.codecs.push(t.Codec.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{codecs:Array.isArray(S==null?void 0:S.codecs)?S.codecs.map(F=>t.Codec.fromJSON(F)):[]}},toJSON(S){const F={};return S.codecs?F.codecs=S.codecs.map(K=>K?t.Codec.toJSON(K):void 0):F.codecs=[],F},fromPartial(S){var F;const K=Q();return K.codecs=((F=S.codecs)===null||F===void 0?void 0:F.map(ve=>t.Codec.fromPartial(ve)))||[],K}};function B(){return{startTime:void 0,endTime:void 0,duration:0,packets:0,packetRate:0,bytes:0,headerBytes:0,bitrate:0,packetsLost:0,packetLossRate:0,packetLossPercentage:0,packetsDuplicate:0,packetDuplicateRate:0,bytesDuplicate:0,headerBytesDuplicate:0,bitrateDuplicate:0,packetsPadding:0,packetPaddingRate:0,bytesPadding:0,headerBytesPadding:0,bitratePadding:0,packetsOutOfOrder:0,frames:0,frameRate:0,jitterCurrent:0,jitterMax:0,gapHistogram:{},nacks:0,nackAcks:0,nackMisses:0,nackRepeated:0,plis:0,lastPli:void 0,firs:0,lastFir:void 0,rttCurrent:0,rttMax:0,keyFrames:0,lastKeyFrame:void 0,layerLockPlis:0,lastLayerLockPli:void 0}}t.RTPStats={encode(S,F=d.default.Writer.create()){return S.startTime!==void 0&&o.Timestamp.encode(fe(S.startTime),F.uint32(10).fork()).ldelim(),S.endTime!==void 0&&o.Timestamp.encode(fe(S.endTime),F.uint32(18).fork()).ldelim(),S.duration!==0&&F.uint32(25).double(S.duration),S.packets!==0&&F.uint32(32).uint32(S.packets),S.packetRate!==0&&F.uint32(41).double(S.packetRate),S.bytes!==0&&F.uint32(48).uint64(S.bytes),S.headerBytes!==0&&F.uint32(312).uint64(S.headerBytes),S.bitrate!==0&&F.uint32(57).double(S.bitrate),S.packetsLost!==0&&F.uint32(64).uint32(S.packetsLost),S.packetLossRate!==0&&F.uint32(73).double(S.packetLossRate),S.packetLossPercentage!==0&&F.uint32(85).float(S.packetLossPercentage),S.packetsDuplicate!==0&&F.uint32(88).uint32(S.packetsDuplicate),S.packetDuplicateRate!==0&&F.uint32(97).double(S.packetDuplicateRate),S.bytesDuplicate!==0&&F.uint32(104).uint64(S.bytesDuplicate),S.headerBytesDuplicate!==0&&F.uint32(320).uint64(S.headerBytesDuplicate),S.bitrateDuplicate!==0&&F.uint32(113).double(S.bitrateDuplicate),S.packetsPadding!==0&&F.uint32(120).uint32(S.packetsPadding),S.packetPaddingRate!==0&&F.uint32(129).double(S.packetPaddingRate),S.bytesPadding!==0&&F.uint32(136).uint64(S.bytesPadding),S.headerBytesPadding!==0&&F.uint32(328).uint64(S.headerBytesPadding),S.bitratePadding!==0&&F.uint32(145).double(S.bitratePadding),S.packetsOutOfOrder!==0&&F.uint32(152).uint32(S.packetsOutOfOrder),S.frames!==0&&F.uint32(160).uint32(S.frames),S.frameRate!==0&&F.uint32(169).double(S.frameRate),S.jitterCurrent!==0&&F.uint32(177).double(S.jitterCurrent),S.jitterMax!==0&&F.uint32(185).double(S.jitterMax),Object.entries(S.gapHistogram).forEach(([K,ve])=>{t.RTPStats_GapHistogramEntry.encode({key:K,value:ve},F.uint32(194).fork()).ldelim()}),S.nacks!==0&&F.uint32(200).uint32(S.nacks),S.nackAcks!==0&&F.uint32(296).uint32(S.nackAcks),S.nackMisses!==0&&F.uint32(208).uint32(S.nackMisses),S.nackRepeated!==0&&F.uint32(304).uint32(S.nackRepeated),S.plis!==0&&F.uint32(216).uint32(S.plis),S.lastPli!==void 0&&o.Timestamp.encode(fe(S.lastPli),F.uint32(226).fork()).ldelim(),S.firs!==0&&F.uint32(232).uint32(S.firs),S.lastFir!==void 0&&o.Timestamp.encode(fe(S.lastFir),F.uint32(242).fork()).ldelim(),S.rttCurrent!==0&&F.uint32(248).uint32(S.rttCurrent),S.rttMax!==0&&F.uint32(256).uint32(S.rttMax),S.keyFrames!==0&&F.uint32(264).uint32(S.keyFrames),S.lastKeyFrame!==void 0&&o.Timestamp.encode(fe(S.lastKeyFrame),F.uint32(274).fork()).ldelim(),S.layerLockPlis!==0&&F.uint32(280).uint32(S.layerLockPlis),S.lastLayerLockPli!==void 0&&o.Timestamp.encode(fe(S.lastLayerLockPli),F.uint32(290).fork()).ldelim(),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=B();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.startTime=y(o.Timestamp.decode(K,K.uint32()));break;case 2:ae.endTime=y(o.Timestamp.decode(K,K.uint32()));break;case 3:ae.duration=K.double();break;case 4:ae.packets=K.uint32();break;case 5:ae.packetRate=K.double();break;case 6:ae.bytes=q(K.uint64());break;case 39:ae.headerBytes=q(K.uint64());break;case 7:ae.bitrate=K.double();break;case 8:ae.packetsLost=K.uint32();break;case 9:ae.packetLossRate=K.double();break;case 10:ae.packetLossPercentage=K.float();break;case 11:ae.packetsDuplicate=K.uint32();break;case 12:ae.packetDuplicateRate=K.double();break;case 13:ae.bytesDuplicate=q(K.uint64());break;case 40:ae.headerBytesDuplicate=q(K.uint64());break;case 14:ae.bitrateDuplicate=K.double();break;case 15:ae.packetsPadding=K.uint32();break;case 16:ae.packetPaddingRate=K.double();break;case 17:ae.bytesPadding=q(K.uint64());break;case 41:ae.headerBytesPadding=q(K.uint64());break;case 18:ae.bitratePadding=K.double();break;case 19:ae.packetsOutOfOrder=K.uint32();break;case 20:ae.frames=K.uint32();break;case 21:ae.frameRate=K.double();break;case 22:ae.jitterCurrent=K.double();break;case 23:ae.jitterMax=K.double();break;case 24:const Ne=t.RTPStats_GapHistogramEntry.decode(K,K.uint32());Ne.value!==void 0&&(ae.gapHistogram[Ne.key]=Ne.value);break;case 25:ae.nacks=K.uint32();break;case 37:ae.nackAcks=K.uint32();break;case 26:ae.nackMisses=K.uint32();break;case 38:ae.nackRepeated=K.uint32();break;case 27:ae.plis=K.uint32();break;case 28:ae.lastPli=y(o.Timestamp.decode(K,K.uint32()));break;case 29:ae.firs=K.uint32();break;case 30:ae.lastFir=y(o.Timestamp.decode(K,K.uint32()));break;case 31:ae.rttCurrent=K.uint32();break;case 32:ae.rttMax=K.uint32();break;case 33:ae.keyFrames=K.uint32();break;case 34:ae.lastKeyFrame=y(o.Timestamp.decode(K,K.uint32()));break;case 35:ae.layerLockPlis=K.uint32();break;case 36:ae.lastLayerLockPli=y(o.Timestamp.decode(K,K.uint32()));break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{startTime:j(S.startTime)?U(S.startTime):void 0,endTime:j(S.endTime)?U(S.endTime):void 0,duration:j(S.duration)?Number(S.duration):0,packets:j(S.packets)?Number(S.packets):0,packetRate:j(S.packetRate)?Number(S.packetRate):0,bytes:j(S.bytes)?Number(S.bytes):0,headerBytes:j(S.headerBytes)?Number(S.headerBytes):0,bitrate:j(S.bitrate)?Number(S.bitrate):0,packetsLost:j(S.packetsLost)?Number(S.packetsLost):0,packetLossRate:j(S.packetLossRate)?Number(S.packetLossRate):0,packetLossPercentage:j(S.packetLossPercentage)?Number(S.packetLossPercentage):0,packetsDuplicate:j(S.packetsDuplicate)?Number(S.packetsDuplicate):0,packetDuplicateRate:j(S.packetDuplicateRate)?Number(S.packetDuplicateRate):0,bytesDuplicate:j(S.bytesDuplicate)?Number(S.bytesDuplicate):0,headerBytesDuplicate:j(S.headerBytesDuplicate)?Number(S.headerBytesDuplicate):0,bitrateDuplicate:j(S.bitrateDuplicate)?Number(S.bitrateDuplicate):0,packetsPadding:j(S.packetsPadding)?Number(S.packetsPadding):0,packetPaddingRate:j(S.packetPaddingRate)?Number(S.packetPaddingRate):0,bytesPadding:j(S.bytesPadding)?Number(S.bytesPadding):0,headerBytesPadding:j(S.headerBytesPadding)?Number(S.headerBytesPadding):0,bitratePadding:j(S.bitratePadding)?Number(S.bitratePadding):0,packetsOutOfOrder:j(S.packetsOutOfOrder)?Number(S.packetsOutOfOrder):0,frames:j(S.frames)?Number(S.frames):0,frameRate:j(S.frameRate)?Number(S.frameRate):0,jitterCurrent:j(S.jitterCurrent)?Number(S.jitterCurrent):0,jitterMax:j(S.jitterMax)?Number(S.jitterMax):0,gapHistogram:de(S.gapHistogram)?Object.entries(S.gapHistogram).reduce((F,[K,ve])=>(F[Number(K)]=Number(ve),F),{}):{},nacks:j(S.nacks)?Number(S.nacks):0,nackAcks:j(S.nackAcks)?Number(S.nackAcks):0,nackMisses:j(S.nackMisses)?Number(S.nackMisses):0,nackRepeated:j(S.nackRepeated)?Number(S.nackRepeated):0,plis:j(S.plis)?Number(S.plis):0,lastPli:j(S.lastPli)?U(S.lastPli):void 0,firs:j(S.firs)?Number(S.firs):0,lastFir:j(S.lastFir)?U(S.lastFir):void 0,rttCurrent:j(S.rttCurrent)?Number(S.rttCurrent):0,rttMax:j(S.rttMax)?Number(S.rttMax):0,keyFrames:j(S.keyFrames)?Number(S.keyFrames):0,lastKeyFrame:j(S.lastKeyFrame)?U(S.lastKeyFrame):void 0,layerLockPlis:j(S.layerLockPlis)?Number(S.layerLockPlis):0,lastLayerLockPli:j(S.lastLayerLockPli)?U(S.lastLayerLockPli):void 0}},toJSON(S){const F={};return S.startTime!==void 0&&(F.startTime=S.startTime.toISOString()),S.endTime!==void 0&&(F.endTime=S.endTime.toISOString()),S.duration!==void 0&&(F.duration=S.duration),S.packets!==void 0&&(F.packets=Math.round(S.packets)),S.packetRate!==void 0&&(F.packetRate=S.packetRate),S.bytes!==void 0&&(F.bytes=Math.round(S.bytes)),S.headerBytes!==void 0&&(F.headerBytes=Math.round(S.headerBytes)),S.bitrate!==void 0&&(F.bitrate=S.bitrate),S.packetsLost!==void 0&&(F.packetsLost=Math.round(S.packetsLost)),S.packetLossRate!==void 0&&(F.packetLossRate=S.packetLossRate),S.packetLossPercentage!==void 0&&(F.packetLossPercentage=S.packetLossPercentage),S.packetsDuplicate!==void 0&&(F.packetsDuplicate=Math.round(S.packetsDuplicate)),S.packetDuplicateRate!==void 0&&(F.packetDuplicateRate=S.packetDuplicateRate),S.bytesDuplicate!==void 0&&(F.bytesDuplicate=Math.round(S.bytesDuplicate)),S.headerBytesDuplicate!==void 0&&(F.headerBytesDuplicate=Math.round(S.headerBytesDuplicate)),S.bitrateDuplicate!==void 0&&(F.bitrateDuplicate=S.bitrateDuplicate),S.packetsPadding!==void 0&&(F.packetsPadding=Math.round(S.packetsPadding)),S.packetPaddingRate!==void 0&&(F.packetPaddingRate=S.packetPaddingRate),S.bytesPadding!==void 0&&(F.bytesPadding=Math.round(S.bytesPadding)),S.headerBytesPadding!==void 0&&(F.headerBytesPadding=Math.round(S.headerBytesPadding)),S.bitratePadding!==void 0&&(F.bitratePadding=S.bitratePadding),S.packetsOutOfOrder!==void 0&&(F.packetsOutOfOrder=Math.round(S.packetsOutOfOrder)),S.frames!==void 0&&(F.frames=Math.round(S.frames)),S.frameRate!==void 0&&(F.frameRate=S.frameRate),S.jitterCurrent!==void 0&&(F.jitterCurrent=S.jitterCurrent),S.jitterMax!==void 0&&(F.jitterMax=S.jitterMax),F.gapHistogram={},S.gapHistogram&&Object.entries(S.gapHistogram).forEach(([K,ve])=>{F.gapHistogram[K]=Math.round(ve)}),S.nacks!==void 0&&(F.nacks=Math.round(S.nacks)),S.nackAcks!==void 0&&(F.nackAcks=Math.round(S.nackAcks)),S.nackMisses!==void 0&&(F.nackMisses=Math.round(S.nackMisses)),S.nackRepeated!==void 0&&(F.nackRepeated=Math.round(S.nackRepeated)),S.plis!==void 0&&(F.plis=Math.round(S.plis)),S.lastPli!==void 0&&(F.lastPli=S.lastPli.toISOString()),S.firs!==void 0&&(F.firs=Math.round(S.firs)),S.lastFir!==void 0&&(F.lastFir=S.lastFir.toISOString()),S.rttCurrent!==void 0&&(F.rttCurrent=Math.round(S.rttCurrent)),S.rttMax!==void 0&&(F.rttMax=Math.round(S.rttMax)),S.keyFrames!==void 0&&(F.keyFrames=Math.round(S.keyFrames)),S.lastKeyFrame!==void 0&&(F.lastKeyFrame=S.lastKeyFrame.toISOString()),S.layerLockPlis!==void 0&&(F.layerLockPlis=Math.round(S.layerLockPlis)),S.lastLayerLockPli!==void 0&&(F.lastLayerLockPli=S.lastLayerLockPli.toISOString()),F},fromPartial(S){var F,K,ve,ae,_e,Ne,Pe,Ue,xe,Ae,Re,$e,De,Be,He,Me,qe,Qe,Fe,Ye,Xe,Je,je,ze,Ve,et,tt,Ge,rt,it,Le,nt,Ke,Ze,ne,pe,be,Ee,Te,Oe,Ie;const Ce=B();return Ce.startTime=(F=S.startTime)!==null&&F!==void 0?F:void 0,Ce.endTime=(K=S.endTime)!==null&&K!==void 0?K:void 0,Ce.duration=(ve=S.duration)!==null&&ve!==void 0?ve:0,Ce.packets=(ae=S.packets)!==null&&ae!==void 0?ae:0,Ce.packetRate=(_e=S.packetRate)!==null&&_e!==void 0?_e:0,Ce.bytes=(Ne=S.bytes)!==null&&Ne!==void 0?Ne:0,Ce.headerBytes=(Pe=S.headerBytes)!==null&&Pe!==void 0?Pe:0,Ce.bitrate=(Ue=S.bitrate)!==null&&Ue!==void 0?Ue:0,Ce.packetsLost=(xe=S.packetsLost)!==null&&xe!==void 0?xe:0,Ce.packetLossRate=(Ae=S.packetLossRate)!==null&&Ae!==void 0?Ae:0,Ce.packetLossPercentage=(Re=S.packetLossPercentage)!==null&&Re!==void 0?Re:0,Ce.packetsDuplicate=($e=S.packetsDuplicate)!==null&&$e!==void 0?$e:0,Ce.packetDuplicateRate=(De=S.packetDuplicateRate)!==null&&De!==void 0?De:0,Ce.bytesDuplicate=(Be=S.bytesDuplicate)!==null&&Be!==void 0?Be:0,Ce.headerBytesDuplicate=(He=S.headerBytesDuplicate)!==null&&He!==void 0?He:0,Ce.bitrateDuplicate=(Me=S.bitrateDuplicate)!==null&&Me!==void 0?Me:0,Ce.packetsPadding=(qe=S.packetsPadding)!==null&&qe!==void 0?qe:0,Ce.packetPaddingRate=(Qe=S.packetPaddingRate)!==null&&Qe!==void 0?Qe:0,Ce.bytesPadding=(Fe=S.bytesPadding)!==null&&Fe!==void 0?Fe:0,Ce.headerBytesPadding=(Ye=S.headerBytesPadding)!==null&&Ye!==void 0?Ye:0,Ce.bitratePadding=(Xe=S.bitratePadding)!==null&&Xe!==void 0?Xe:0,Ce.packetsOutOfOrder=(Je=S.packetsOutOfOrder)!==null&&Je!==void 0?Je:0,Ce.frames=(je=S.frames)!==null&&je!==void 0?je:0,Ce.frameRate=(ze=S.frameRate)!==null&&ze!==void 0?ze:0,Ce.jitterCurrent=(Ve=S.jitterCurrent)!==null&&Ve!==void 0?Ve:0,Ce.jitterMax=(et=S.jitterMax)!==null&&et!==void 0?et:0,Ce.gapHistogram=Object.entries((tt=S.gapHistogram)!==null&&tt!==void 0?tt:{}).reduce((We,[st,at])=>(at!==void 0&&(We[Number(st)]=Number(at)),We),{}),Ce.nacks=(Ge=S.nacks)!==null&&Ge!==void 0?Ge:0,Ce.nackAcks=(rt=S.nackAcks)!==null&&rt!==void 0?rt:0,Ce.nackMisses=(it=S.nackMisses)!==null&&it!==void 0?it:0,Ce.nackRepeated=(Le=S.nackRepeated)!==null&&Le!==void 0?Le:0,Ce.plis=(nt=S.plis)!==null&&nt!==void 0?nt:0,Ce.lastPli=(Ke=S.lastPli)!==null&&Ke!==void 0?Ke:void 0,Ce.firs=(Ze=S.firs)!==null&&Ze!==void 0?Ze:0,Ce.lastFir=(ne=S.lastFir)!==null&&ne!==void 0?ne:void 0,Ce.rttCurrent=(pe=S.rttCurrent)!==null&&pe!==void 0?pe:0,Ce.rttMax=(be=S.rttMax)!==null&&be!==void 0?be:0,Ce.keyFrames=(Ee=S.keyFrames)!==null&&Ee!==void 0?Ee:0,Ce.lastKeyFrame=(Te=S.lastKeyFrame)!==null&&Te!==void 0?Te:void 0,Ce.layerLockPlis=(Oe=S.layerLockPlis)!==null&&Oe!==void 0?Oe:0,Ce.lastLayerLockPli=(Ie=S.lastLayerLockPli)!==null&&Ie!==void 0?Ie:void 0,Ce}};function W(){return{key:0,value:0}}t.RTPStats_GapHistogramEntry={encode(S,F=d.default.Writer.create()){return S.key!==0&&F.uint32(8).int32(S.key),S.value!==0&&F.uint32(16).uint32(S.value),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=W();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.key=K.int32();break;case 2:ae.value=K.uint32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{key:j(S.key)?Number(S.key):0,value:j(S.value)?Number(S.value):0}},toJSON(S){const F={};return S.key!==void 0&&(F.key=Math.round(S.key)),S.value!==void 0&&(F.value=Math.round(S.value)),F},fromPartial(S){var F,K;const ve=W();return ve.key=(F=S.key)!==null&&F!==void 0?F:0,ve.value=(K=S.value)!==null&&K!==void 0?K:0,ve}};function X(){return{unixMicro:0,ticks:0}}t.TimedVersion={encode(S,F=d.default.Writer.create()){return S.unixMicro!==0&&F.uint32(8).int64(S.unixMicro),S.ticks!==0&&F.uint32(16).int32(S.ticks),F},decode(S,F){const K=S instanceof d.default.Reader?S:new d.default.Reader(S);let ve=F===void 0?K.len:K.pos+F;const ae=X();for(;K.pos<ve;){const _e=K.uint32();switch(_e>>>3){case 1:ae.unixMicro=q(K.int64());break;case 2:ae.ticks=K.int32();break;default:K.skipType(_e&7);break}}return ae},fromJSON(S){return{unixMicro:j(S.unixMicro)?Number(S.unixMicro):0,ticks:j(S.ticks)?Number(S.ticks):0}},toJSON(S){const F={};return S.unixMicro!==void 0&&(F.unixMicro=Math.round(S.unixMicro)),S.ticks!==void 0&&(F.ticks=Math.round(S.ticks)),F},fromPartial(S){var F,K;const ve=X();return ve.unixMicro=(F=S.unixMicro)!==null&&F!==void 0?F:0,ve.ticks=(K=S.ticks)!==null&&K!==void 0?K:0,ve}};var ce=(()=>{if(typeof ce<"u")return ce;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function he(S){if(ce.Buffer)return Uint8Array.from(ce.Buffer.from(S,"base64"));{const F=ce.atob(S),K=new Uint8Array(F.length);for(let ve=0;ve<F.length;++ve)K[ve]=F.charCodeAt(ve);return K}}function ge(S){if(ce.Buffer)return ce.Buffer.from(S).toString("base64");{const F=[];return S.forEach(K=>{F.push(String.fromCharCode(K))}),ce.btoa(F.join(""))}}function fe(S){const F=S.getTime()/1e3,K=S.getTime()%1e3*1e6;return{seconds:F,nanos:K}}function y(S){let F=S.seconds*1e3;return F+=S.nanos/1e6,new Date(F)}function U(S){return S instanceof Date?S:typeof S=="string"?new Date(S):y(o.Timestamp.fromJSON(S))}function q(S){if(S.gt(Number.MAX_SAFE_INTEGER))throw new ce.Error("Value is larger than Number.MAX_SAFE_INTEGER");return S.toNumber()}d.default.util.Long!==s.default&&(d.default.util.Long=s.default,d.default.configure());function de(S){return typeof S=="object"&&S!==null}function j(S){return S!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./google/protobuf/timestamp":72,long:85,"protobufjs/minimal":89}],76:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateRoomMetadataRequest=t.SendDataResponse=t.SendDataRequest=t.UpdateSubscriptionsResponse=t.UpdateSubscriptionsRequest=t.UpdateParticipantRequest=t.MuteRoomTrackResponse=t.MuteRoomTrackRequest=t.RemoveParticipantResponse=t.RoomParticipantIdentity=t.ListParticipantsResponse=t.ListParticipantsRequest=t.DeleteRoomResponse=t.DeleteRoomRequest=t.ListRoomsResponse=t.ListRoomsRequest=t.RoomEgress=t.CreateRoomRequest=t.protobufPackage=void 0;const s=a(e("protobufjs/minimal")),d=e("./livekit_egress"),o=e("./livekit_models");t.protobufPackage="livekit";function f(){return{name:"",emptyTimeout:0,maxParticipants:0,nodeId:"",metadata:"",egress:void 0}}t.CreateRoomRequest={encode(b,_=s.default.Writer.create()){return b.name!==void 0&&b.name!==""&&_.uint32(10).string(b.name),b.emptyTimeout!==void 0&&b.emptyTimeout!==0&&_.uint32(16).uint32(b.emptyTimeout),b.maxParticipants!==void 0&&b.maxParticipants!==0&&_.uint32(24).uint32(b.maxParticipants),b.nodeId!==void 0&&b.nodeId!==""&&_.uint32(34).string(b.nodeId),b.metadata!==void 0&&b.metadata!==""&&_.uint32(42).string(b.metadata),b.egress!==void 0&&t.RoomEgress.encode(b.egress,_.uint32(50).fork()).ldelim(),_},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=f();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.name=g.string();break;case 2:T.emptyTimeout=g.uint32();break;case 3:T.maxParticipants=g.uint32();break;case 4:T.nodeId=g.string();break;case 5:T.metadata=g.string();break;case 6:T.egress=t.RoomEgress.decode(g,g.uint32());break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{name:x(b.name)?String(b.name):"",emptyTimeout:x(b.emptyTimeout)?Number(b.emptyTimeout):0,maxParticipants:x(b.maxParticipants)?Number(b.maxParticipants):0,nodeId:x(b.nodeId)?String(b.nodeId):"",metadata:x(b.metadata)?String(b.metadata):"",egress:x(b.egress)?t.RoomEgress.fromJSON(b.egress):void 0}},toJSON(b){const _={};return b.name!==void 0&&(_.name=b.name),b.emptyTimeout!==void 0&&(_.emptyTimeout=Math.round(b.emptyTimeout)),b.maxParticipants!==void 0&&(_.maxParticipants=Math.round(b.maxParticipants)),b.nodeId!==void 0&&(_.nodeId=b.nodeId),b.metadata!==void 0&&(_.metadata=b.metadata),b.egress!==void 0&&(_.egress=b.egress?t.RoomEgress.toJSON(b.egress):void 0),_},fromPartial(b){var _,g,E,T,A;const J=f();return J.name=(_=b.name)!==null&&_!==void 0?_:"",J.emptyTimeout=(g=b.emptyTimeout)!==null&&g!==void 0?g:0,J.maxParticipants=(E=b.maxParticipants)!==null&&E!==void 0?E:0,J.nodeId=(T=b.nodeId)!==null&&T!==void 0?T:"",J.metadata=(A=b.metadata)!==null&&A!==void 0?A:"",J.egress=b.egress!==void 0&&b.egress!==null?t.RoomEgress.fromPartial(b.egress):void 0,J}};function c(){return{room:void 0,tracks:void 0}}t.RoomEgress={encode(b,_=s.default.Writer.create()){return b.room!==void 0&&d.RoomCompositeEgressRequest.encode(b.room,_.uint32(10).fork()).ldelim(),b.tracks!==void 0&&d.AutoTrackEgress.encode(b.tracks,_.uint32(18).fork()).ldelim(),_},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=c();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=d.RoomCompositeEgressRequest.decode(g,g.uint32());break;case 2:T.tracks=d.AutoTrackEgress.decode(g,g.uint32());break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:x(b.room)?d.RoomCompositeEgressRequest.fromJSON(b.room):void 0,tracks:x(b.tracks)?d.AutoTrackEgress.fromJSON(b.tracks):void 0}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room?d.RoomCompositeEgressRequest.toJSON(b.room):void 0),b.tracks!==void 0&&(_.tracks=b.tracks?d.AutoTrackEgress.toJSON(b.tracks):void 0),_},fromPartial(b){const _=c();return _.room=b.room!==void 0&&b.room!==null?d.RoomCompositeEgressRequest.fromPartial(b.room):void 0,_.tracks=b.tracks!==void 0&&b.tracks!==null?d.AutoTrackEgress.fromPartial(b.tracks):void 0,_}};function p(){return{names:[]}}t.ListRoomsRequest={encode(b,_=s.default.Writer.create()){if(b.names!==void 0&&b.names.length!==0)for(const g of b.names)_.uint32(10).string(g);return _},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=p();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.names.push(g.string());break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{names:Array.isArray(b==null?void 0:b.names)?b.names.map(_=>String(_)):[]}},toJSON(b){const _={};return b.names?_.names=b.names.map(g=>g):_.names=[],_},fromPartial(b){var _;const g=p();return g.names=((_=b.names)===null||_===void 0?void 0:_.map(E=>E))||[],g}};function v(){return{rooms:[]}}t.ListRoomsResponse={encode(b,_=s.default.Writer.create()){if(b.rooms!==void 0&&b.rooms.length!==0)for(const g of b.rooms)o.Room.encode(g,_.uint32(10).fork()).ldelim();return _},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=v();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.rooms.push(o.Room.decode(g,g.uint32()));break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{rooms:Array.isArray(b==null?void 0:b.rooms)?b.rooms.map(_=>o.Room.fromJSON(_)):[]}},toJSON(b){const _={};return b.rooms?_.rooms=b.rooms.map(g=>g?o.Room.toJSON(g):void 0):_.rooms=[],_},fromPartial(b){var _;const g=v();return g.rooms=((_=b.rooms)===null||_===void 0?void 0:_.map(E=>o.Room.fromPartial(E)))||[],g}};function l(){return{room:""}}t.DeleteRoomRequest={encode(b,_=s.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),_},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=l();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:x(b.room)?String(b.room):""}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),_},fromPartial(b){var _;const g=l();return g.room=(_=b.room)!==null&&_!==void 0?_:"",g}};function u(){return{}}t.DeleteRoomResponse={encode(b,_=s.default.Writer.create()){return _},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=u();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(b){return{}},toJSON(b){return{}},fromPartial(b){return u()}};function h(){return{room:""}}t.ListParticipantsRequest={encode(b,_=s.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),_},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=h();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:x(b.room)?String(b.room):""}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),_},fromPartial(b){var _;const g=h();return g.room=(_=b.room)!==null&&_!==void 0?_:"",g}};function m(){return{participants:[]}}t.ListParticipantsResponse={encode(b,_=s.default.Writer.create()){if(b.participants!==void 0&&b.participants.length!==0)for(const g of b.participants)o.ParticipantInfo.encode(g,_.uint32(10).fork()).ldelim();return _},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=m();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.participants.push(o.ParticipantInfo.decode(g,g.uint32()));break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{participants:Array.isArray(b==null?void 0:b.participants)?b.participants.map(_=>o.ParticipantInfo.fromJSON(_)):[]}},toJSON(b){const _={};return b.participants?_.participants=b.participants.map(g=>g?o.ParticipantInfo.toJSON(g):void 0):_.participants=[],_},fromPartial(b){var _;const g=m();return g.participants=((_=b.participants)===null||_===void 0?void 0:_.map(E=>o.ParticipantInfo.fromPartial(E)))||[],g}};function w(){return{room:"",identity:""}}t.RoomParticipantIdentity={encode(b,_=s.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.identity!==void 0&&b.identity!==""&&_.uint32(18).string(b.identity),_},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=w();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:x(b.room)?String(b.room):"",identity:x(b.identity)?String(b.identity):""}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.identity!==void 0&&(_.identity=b.identity),_},fromPartial(b){var _,g;const E=w();return E.room=(_=b.room)!==null&&_!==void 0?_:"",E.identity=(g=b.identity)!==null&&g!==void 0?g:"",E}};function k(){return{}}t.RemoveParticipantResponse={encode(b,_=s.default.Writer.create()){return _},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=k();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(b){return{}},toJSON(b){return{}},fromPartial(b){return k()}};function C(){return{room:"",identity:"",trackSid:"",muted:!1}}t.MuteRoomTrackRequest={encode(b,_=s.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.identity!==void 0&&b.identity!==""&&_.uint32(18).string(b.identity),b.trackSid!==void 0&&b.trackSid!==""&&_.uint32(26).string(b.trackSid),b.muted===!0&&_.uint32(32).bool(b.muted),_},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=C();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;case 3:T.trackSid=g.string();break;case 4:T.muted=g.bool();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:x(b.room)?String(b.room):"",identity:x(b.identity)?String(b.identity):"",trackSid:x(b.trackSid)?String(b.trackSid):"",muted:x(b.muted)?!!b.muted:!1}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.identity!==void 0&&(_.identity=b.identity),b.trackSid!==void 0&&(_.trackSid=b.trackSid),b.muted!==void 0&&(_.muted=b.muted),_},fromPartial(b){var _,g,E,T;const A=C();return A.room=(_=b.room)!==null&&_!==void 0?_:"",A.identity=(g=b.identity)!==null&&g!==void 0?g:"",A.trackSid=(E=b.trackSid)!==null&&E!==void 0?E:"",A.muted=(T=b.muted)!==null&&T!==void 0?T:!1,A}};function O(){return{track:void 0}}t.MuteRoomTrackResponse={encode(b,_=s.default.Writer.create()){return b.track!==void 0&&o.TrackInfo.encode(b.track,_.uint32(10).fork()).ldelim(),_},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=O();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.track=o.TrackInfo.decode(g,g.uint32());break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{track:x(b.track)?o.TrackInfo.fromJSON(b.track):void 0}},toJSON(b){const _={};return b.track!==void 0&&(_.track=b.track?o.TrackInfo.toJSON(b.track):void 0),_},fromPartial(b){const _=O();return _.track=b.track!==void 0&&b.track!==null?o.TrackInfo.fromPartial(b.track):void 0,_}};function P(){return{room:"",identity:"",metadata:"",permission:void 0,name:""}}t.UpdateParticipantRequest={encode(b,_=s.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.identity!==void 0&&b.identity!==""&&_.uint32(18).string(b.identity),b.metadata!==void 0&&b.metadata!==""&&_.uint32(26).string(b.metadata),b.permission!==void 0&&o.ParticipantPermission.encode(b.permission,_.uint32(34).fork()).ldelim(),b.name!==void 0&&b.name!==""&&_.uint32(42).string(b.name),_},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=P();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;case 3:T.metadata=g.string();break;case 4:T.permission=o.ParticipantPermission.decode(g,g.uint32());break;case 5:T.name=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:x(b.room)?String(b.room):"",identity:x(b.identity)?String(b.identity):"",metadata:x(b.metadata)?String(b.metadata):"",permission:x(b.permission)?o.ParticipantPermission.fromJSON(b.permission):void 0,name:x(b.name)?String(b.name):""}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.identity!==void 0&&(_.identity=b.identity),b.metadata!==void 0&&(_.metadata=b.metadata),b.permission!==void 0&&(_.permission=b.permission?o.ParticipantPermission.toJSON(b.permission):void 0),b.name!==void 0&&(_.name=b.name),_},fromPartial(b){var _,g,E,T;const A=P();return A.room=(_=b.room)!==null&&_!==void 0?_:"",A.identity=(g=b.identity)!==null&&g!==void 0?g:"",A.metadata=(E=b.metadata)!==null&&E!==void 0?E:"",A.permission=b.permission!==void 0&&b.permission!==null?o.ParticipantPermission.fromPartial(b.permission):void 0,A.name=(T=b.name)!==null&&T!==void 0?T:"",A}};function M(){return{room:"",identity:"",trackSids:[],subscribe:!1,participantTracks:[]}}t.UpdateSubscriptionsRequest={encode(b,_=s.default.Writer.create()){if(b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.identity!==void 0&&b.identity!==""&&_.uint32(18).string(b.identity),b.trackSids!==void 0&&b.trackSids.length!==0)for(const g of b.trackSids)_.uint32(26).string(g);if(b.subscribe===!0&&_.uint32(32).bool(b.subscribe),b.participantTracks!==void 0&&b.participantTracks.length!==0)for(const g of b.participantTracks)o.ParticipantTracks.encode(g,_.uint32(42).fork()).ldelim();return _},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=M();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.identity=g.string();break;case 3:T.trackSids.push(g.string());break;case 4:T.subscribe=g.bool();break;case 5:T.participantTracks.push(o.ParticipantTracks.decode(g,g.uint32()));break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:x(b.room)?String(b.room):"",identity:x(b.identity)?String(b.identity):"",trackSids:Array.isArray(b==null?void 0:b.trackSids)?b.trackSids.map(_=>String(_)):[],subscribe:x(b.subscribe)?!!b.subscribe:!1,participantTracks:Array.isArray(b==null?void 0:b.participantTracks)?b.participantTracks.map(_=>o.ParticipantTracks.fromJSON(_)):[]}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.identity!==void 0&&(_.identity=b.identity),b.trackSids?_.trackSids=b.trackSids.map(g=>g):_.trackSids=[],b.subscribe!==void 0&&(_.subscribe=b.subscribe),b.participantTracks?_.participantTracks=b.participantTracks.map(g=>g?o.ParticipantTracks.toJSON(g):void 0):_.participantTracks=[],_},fromPartial(b){var _,g,E,T,A;const J=M();return J.room=(_=b.room)!==null&&_!==void 0?_:"",J.identity=(g=b.identity)!==null&&g!==void 0?g:"",J.trackSids=((E=b.trackSids)===null||E===void 0?void 0:E.map(G=>G))||[],J.subscribe=(T=b.subscribe)!==null&&T!==void 0?T:!1,J.participantTracks=((A=b.participantTracks)===null||A===void 0?void 0:A.map(G=>o.ParticipantTracks.fromPartial(G)))||[],J}};function D(){return{}}t.UpdateSubscriptionsResponse={encode(b,_=s.default.Writer.create()){return _},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=D();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(b){return{}},toJSON(b){return{}},fromPartial(b){return D()}};function $(){return{room:"",data:new Uint8Array,kind:0,destinationSids:[]}}t.SendDataRequest={encode(b,_=s.default.Writer.create()){if(b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.data!==void 0&&b.data.length!==0&&_.uint32(18).bytes(b.data),b.kind!==void 0&&b.kind!==0&&_.uint32(24).int32(b.kind),b.destinationSids!==void 0&&b.destinationSids.length!==0)for(const g of b.destinationSids)_.uint32(34).string(g);return _},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=$();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.data=g.bytes();break;case 3:T.kind=g.int32();break;case 4:T.destinationSids.push(g.string());break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:x(b.room)?String(b.room):"",data:x(b.data)?Y(b.data):new Uint8Array,kind:x(b.kind)?o.dataPacket_KindFromJSON(b.kind):0,destinationSids:Array.isArray(b==null?void 0:b.destinationSids)?b.destinationSids.map(_=>String(_)):[]}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.data!==void 0&&(_.data=N(b.data!==void 0?b.data:new Uint8Array)),b.kind!==void 0&&(_.kind=o.dataPacket_KindToJSON(b.kind)),b.destinationSids?_.destinationSids=b.destinationSids.map(g=>g):_.destinationSids=[],_},fromPartial(b){var _,g,E,T;const A=$();return A.room=(_=b.room)!==null&&_!==void 0?_:"",A.data=(g=b.data)!==null&&g!==void 0?g:new Uint8Array,A.kind=(E=b.kind)!==null&&E!==void 0?E:0,A.destinationSids=((T=b.destinationSids)===null||T===void 0?void 0:T.map(J=>J))||[],A}};function H(){return{}}t.SendDataResponse={encode(b,_=s.default.Writer.create()){return _},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=H();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){default:g.skipType(A&7);break}}return T},fromJSON(b){return{}},toJSON(b){return{}},fromPartial(b){return H()}};function Z(){return{room:"",metadata:""}}t.UpdateRoomMetadataRequest={encode(b,_=s.default.Writer.create()){return b.room!==void 0&&b.room!==""&&_.uint32(10).string(b.room),b.metadata!==void 0&&b.metadata!==""&&_.uint32(18).string(b.metadata),_},decode(b,_){const g=b instanceof s.default.Reader?b:new s.default.Reader(b);let E=_===void 0?g.len:g.pos+_;const T=Z();for(;g.pos<E;){const A=g.uint32();switch(A>>>3){case 1:T.room=g.string();break;case 2:T.metadata=g.string();break;default:g.skipType(A&7);break}}return T},fromJSON(b){return{room:x(b.room)?String(b.room):"",metadata:x(b.metadata)?String(b.metadata):""}},toJSON(b){const _={};return b.room!==void 0&&(_.room=b.room),b.metadata!==void 0&&(_.metadata=b.metadata),_},fromPartial(b){var _,g;const E=Z();return E.room=(_=b.room)!==null&&_!==void 0?_:"",E.metadata=(g=b.metadata)!==null&&g!==void 0?g:"",E}};var re=(()=>{if(typeof re<"u")return re;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function Y(b){if(re.Buffer)return Uint8Array.from(re.Buffer.from(b,"base64"));{const _=re.atob(b),g=new Uint8Array(_.length);for(let E=0;E<_.length;++E)g[E]=_.charCodeAt(E);return g}}function N(b){if(re.Buffer)return re.Buffer.from(b).toString("base64");{const _=[];return b.forEach(g=>{_.push(String.fromCharCode(g))}),re.btoa(_.join(""))}}function x(b){return b!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./livekit_egress":73,"./livekit_models":75,"protobufjs/minimal":89}],77:[function(e,i,t){(function(n){(function(){var a=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebhookEvent=t.protobufPackage=void 0;const s=a(e("long")),d=a(e("protobufjs/minimal")),o=e("./livekit_egress"),f=e("./livekit_ingress"),c=e("./livekit_models");t.protobufPackage="livekit";function p(){return{event:"",room:void 0,participant:void 0,egressInfo:void 0,ingressInfo:void 0,track:void 0,id:"",createdAt:0}}t.WebhookEvent={encode(h,m=d.default.Writer.create()){return h.event!==void 0&&h.event!==""&&m.uint32(10).string(h.event),h.room!==void 0&&c.Room.encode(h.room,m.uint32(18).fork()).ldelim(),h.participant!==void 0&&c.ParticipantInfo.encode(h.participant,m.uint32(26).fork()).ldelim(),h.egressInfo!==void 0&&o.EgressInfo.encode(h.egressInfo,m.uint32(74).fork()).ldelim(),h.ingressInfo!==void 0&&f.IngressInfo.encode(h.ingressInfo,m.uint32(82).fork()).ldelim(),h.track!==void 0&&c.TrackInfo.encode(h.track,m.uint32(66).fork()).ldelim(),h.id!==void 0&&h.id!==""&&m.uint32(50).string(h.id),h.createdAt!==void 0&&h.createdAt!==0&&m.uint32(56).int64(h.createdAt),m},decode(h,m){const w=h instanceof d.default.Reader?h:new d.default.Reader(h);let k=m===void 0?w.len:w.pos+m;const C=p();for(;w.pos<k;){const O=w.uint32();switch(O>>>3){case 1:C.event=w.string();break;case 2:C.room=c.Room.decode(w,w.uint32());break;case 3:C.participant=c.ParticipantInfo.decode(w,w.uint32());break;case 9:C.egressInfo=o.EgressInfo.decode(w,w.uint32());break;case 10:C.ingressInfo=f.IngressInfo.decode(w,w.uint32());break;case 8:C.track=c.TrackInfo.decode(w,w.uint32());break;case 6:C.id=w.string();break;case 7:C.createdAt=l(w.int64());break;default:w.skipType(O&7);break}}return C},fromJSON(h){return{event:u(h.event)?String(h.event):"",room:u(h.room)?c.Room.fromJSON(h.room):void 0,participant:u(h.participant)?c.ParticipantInfo.fromJSON(h.participant):void 0,egressInfo:u(h.egressInfo)?o.EgressInfo.fromJSON(h.egressInfo):void 0,ingressInfo:u(h.ingressInfo)?f.IngressInfo.fromJSON(h.ingressInfo):void 0,track:u(h.track)?c.TrackInfo.fromJSON(h.track):void 0,id:u(h.id)?String(h.id):"",createdAt:u(h.createdAt)?Number(h.createdAt):0}},toJSON(h){const m={};return h.event!==void 0&&(m.event=h.event),h.room!==void 0&&(m.room=h.room?c.Room.toJSON(h.room):void 0),h.participant!==void 0&&(m.participant=h.participant?c.ParticipantInfo.toJSON(h.participant):void 0),h.egressInfo!==void 0&&(m.egressInfo=h.egressInfo?o.EgressInfo.toJSON(h.egressInfo):void 0),h.ingressInfo!==void 0&&(m.ingressInfo=h.ingressInfo?f.IngressInfo.toJSON(h.ingressInfo):void 0),h.track!==void 0&&(m.track=h.track?c.TrackInfo.toJSON(h.track):void 0),h.id!==void 0&&(m.id=h.id),h.createdAt!==void 0&&(m.createdAt=Math.round(h.createdAt)),m},fromPartial(h){var m,w,k;const C=p();return C.event=(m=h.event)!==null&&m!==void 0?m:"",C.room=h.room!==void 0&&h.room!==null?c.Room.fromPartial(h.room):void 0,C.participant=h.participant!==void 0&&h.participant!==null?c.ParticipantInfo.fromPartial(h.participant):void 0,C.egressInfo=h.egressInfo!==void 0&&h.egressInfo!==null?o.EgressInfo.fromPartial(h.egressInfo):void 0,C.ingressInfo=h.ingressInfo!==void 0&&h.ingressInfo!==null?f.IngressInfo.fromPartial(h.ingressInfo):void 0,C.track=h.track!==void 0&&h.track!==null?c.TrackInfo.fromPartial(h.track):void 0,C.id=(w=h.id)!==null&&w!==void 0?w:"",C.createdAt=(k=h.createdAt)!==null&&k!==void 0?k:0,C}};var v=(()=>{if(typeof v<"u")return v;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof n<"u")return n;throw"Unable to locate global object"})();function l(h){if(h.gt(Number.MAX_SAFE_INTEGER))throw new v.Error("Value is larger than Number.MAX_SAFE_INTEGER");return h.toNumber()}d.default.util.Long!==s.default&&(d.default.util.Long=s.default,d.default.configure());function u(h){return h!=null}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./livekit_egress":73,"./livekit_ingress":74,"./livekit_models":75,long:85,"protobufjs/minimal":89}],78:[function(e,i,t){var n=1/0,a=9007199254740991,s=17976931348623157e292,d=0/0,o="[object Arguments]",f="[object Function]",c="[object GeneratorFunction]",p="[object String]",v="[object Symbol]",l=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,m=/^0o[0-7]+$/i,w=/^(?:0|[1-9]\d*)$/,k=parseInt;function C(le,ee){for(var te=-1,Q=le?le.length:0,B=Array(Q);++te<Q;)B[te]=ee(le[te],te,le);return B}function O(le,ee,te,Q){for(var B=le.length,W=te+(Q?1:-1);Q?W--:++W<B;)if(ee(le[W],W,le))return W;return-1}function P(le,ee,te){if(ee!==ee)return O(le,M,te);for(var Q=te-1,B=le.length;++Q<B;)if(le[Q]===ee)return Q;return-1}function M(le){return le!==le}function D(le,ee){for(var te=-1,Q=Array(le);++te<le;)Q[te]=ee(te);return Q}function $(le,ee){return C(ee,function(te){return le[te]})}function H(le,ee){return function(te){return le(ee(te))}}var Z=Object.prototype,re=Z.hasOwnProperty,Y=Z.toString,N=Z.propertyIsEnumerable,x=H(Object.keys,Object),b=Math.max;function _(le,ee){var te=G(le)||J(le)?D(le.length,String):[],Q=te.length,B=!!Q;for(var W in le)(ee||re.call(le,W))&&!(B&&(W=="length"||E(W,Q)))&&te.push(W);return te}function g(le){if(!T(le))return x(le);var ee=[];for(var te in Object(le))re.call(le,te)&&te!="constructor"&&ee.push(te);return ee}function E(le,ee){return ee=ee??a,!!ee&&(typeof le=="number"||w.test(le))&&le>-1&&le%1==0&&le<ee}function T(le){var ee=le&&le.constructor,te=typeof ee=="function"&&ee.prototype||Z;return le===te}function A(le,ee,te,Q){le=I(le)?le:we(le),te=te&&!Q?oe(te):0;var B=le.length;return te<0&&(te=b(B+te,0)),me(le)?te<=B&&le.indexOf(ee,te)>-1:!!B&&P(le,ee,te)>-1}function J(le){return V(le)&&re.call(le,"callee")&&(!N.call(le,"callee")||Y.call(le)==o)}var G=Array.isArray;function I(le){return le!=null&&z(le.length)&&!L(le)}function V(le){return se(le)&&I(le)}function L(le){var ee=ie(le)?Y.call(le):"";return ee==f||ee==c}function z(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=a}function ie(le){var ee=typeof le;return!!le&&(ee=="object"||ee=="function")}function se(le){return!!le&&typeof le=="object"}function me(le){return typeof le=="string"||!G(le)&&se(le)&&Y.call(le)==p}function Se(le){return typeof le=="symbol"||se(le)&&Y.call(le)==v}function ke(le){if(!le)return le===0?le:0;if(le=ue(le),le===n||le===-n){var ee=le<0?-1:1;return ee*s}return le===le?le:0}function oe(le){var ee=ke(le),te=ee%1;return ee===ee?te?ee-te:ee:0}function ue(le){if(typeof le=="number")return le;if(Se(le))return d;if(ie(le)){var ee=typeof le.valueOf=="function"?le.valueOf():le;le=ie(ee)?ee+"":ee}if(typeof le!="string")return le===0?le:+le;le=le.replace(l,"");var te=h.test(le);return te||m.test(le)?k(le.slice(2),te?2:8):u.test(le)?d:+le}function ye(le){return I(le)?_(le):g(le)}function we(le){return le?$(le,ye(le)):[]}i.exports=A},{}],79:[function(e,i,t){var n="[object Boolean]",a=Object.prototype,s=a.toString;function d(f){return f===!0||f===!1||o(f)&&s.call(f)==n}function o(f){return!!f&&typeof f=="object"}i.exports=d},{}],80:[function(e,i,t){var n=1/0,a=17976931348623157e292,s=0/0,d="[object Symbol]",o=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,p=/^0o[0-7]+$/i,v=parseInt,l=Object.prototype,u=l.toString;function h(M){return typeof M=="number"&&M==O(M)}function m(M){var D=typeof M;return!!M&&(D=="object"||D=="function")}function w(M){return!!M&&typeof M=="object"}function k(M){return typeof M=="symbol"||w(M)&&u.call(M)==d}function C(M){if(!M)return M===0?M:0;if(M=P(M),M===n||M===-n){var D=M<0?-1:1;return D*a}return M===M?M:0}function O(M){var D=C(M),$=D%1;return D===D?$?D-$:D:0}function P(M){if(typeof M=="number")return M;if(k(M))return s;if(m(M)){var D=typeof M.valueOf=="function"?M.valueOf():M;M=m(D)?D+"":D}if(typeof M!="string")return M===0?M:+M;M=M.replace(o,"");var $=c.test(M);return $||p.test(M)?v(M.slice(2),$?2:8):f.test(M)?s:+M}i.exports=h},{}],81:[function(e,i,t){var n="[object Number]",a=Object.prototype,s=a.toString;function d(f){return!!f&&typeof f=="object"}function o(f){return typeof f=="number"||d(f)&&s.call(f)==n}i.exports=o},{}],82:[function(e,i,t){var n="[object Object]";function a(m){var w=!1;if(m!=null&&typeof m.toString!="function")try{w=!!(m+"")}catch{}return w}function s(m,w){return function(k){return m(w(k))}}var d=Function.prototype,o=Object.prototype,f=d.toString,c=o.hasOwnProperty,p=f.call(Object),v=o.toString,l=s(Object.getPrototypeOf,Object);function u(m){return!!m&&typeof m=="object"}function h(m){if(!u(m)||v.call(m)!=n||a(m))return!1;var w=l(m);if(w===null)return!0;var k=c.call(w,"constructor")&&w.constructor;return typeof k=="function"&&k instanceof k&&f.call(k)==p}i.exports=h},{}],83:[function(e,i,t){var n="[object String]",a=Object.prototype,s=a.toString,d=Array.isArray;function o(c){return!!c&&typeof c=="object"}function f(c){return typeof c=="string"||!d(c)&&o(c)&&s.call(c)==n}i.exports=f},{}],84:[function(e,i,t){var n="Expected a function",a=1/0,s=17976931348623157e292,d=0/0,o="[object Symbol]",f=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,v=/^0o[0-7]+$/i,l=parseInt,u=Object.prototype,h=u.toString;function m($,H){var Z;if(typeof H!="function")throw new TypeError(n);return $=M($),function(){return--$>0&&(Z=H.apply(this,arguments)),$<=1&&(H=void 0),Z}}function w($){return m(2,$)}function k($){var H=typeof $;return!!$&&(H=="object"||H=="function")}function C($){return!!$&&typeof $=="object"}function O($){return typeof $=="symbol"||C($)&&h.call($)==o}function P($){if(!$)return $===0?$:0;if($=D($),$===a||$===-a){var H=$<0?-1:1;return H*s}return $===$?$:0}function M($){var H=P($),Z=H%1;return H===H?Z?H-Z:H:0}function D($){if(typeof $=="number")return $;if(O($))return d;if(k($)){var H=typeof $.valueOf=="function"?$.valueOf():$;$=k(H)?H+"":H}if(typeof $!="string")return $===0?$:+$;$=$.replace(f,"");var Z=p.test($);return Z||v.test($)?l($.slice(2),Z?2:8):c.test($)?d:+$}i.exports=w},{}],85:[function(e,i,t){var n=function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;/**
 * @license
 * Copyright 2009 The Closure Library Authors
 * Copyright 2020 Daniel Wirtz / The long.js Authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * SPDX-License-Identifier: Apache-2.0
 */var s=null;try{s=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function d(E,T,A){this.low=E|0,this.high=T|0,this.unsigned=!!A}d.prototype.__isLong__,Object.defineProperty(d.prototype,"__isLong__",{value:!0});function o(E){return(E&&E.__isLong__)===!0}function f(E){var T=Math.clz32(E&-E);return E?31-T:T}d.isLong=o;var c={},p={};function v(E,T){var A,J,G;return T?(E>>>=0,(G=0<=E&&E<256)&&(J=p[E],J)?J:(A=u(E,0,!0),G&&(p[E]=A),A)):(E|=0,(G=-128<=E&&E<128)&&(J=c[E],J)?J:(A=u(E,E<0?-1:0,!1),G&&(c[E]=A),A))}d.fromInt=v;function l(E,T){if(isNaN(E))return T?H:$;if(T){if(E<0)return H;if(E>=P)return x}else{if(E<=-M)return b;if(E+1>=M)return N}return E<0?l(-E,T).neg():u(E%O|0,E/O|0,T)}d.fromNumber=l;function u(E,T,A){return new d(E,T,A)}d.fromBits=u;var h=Math.pow;function m(E,T,A){if(E.length===0)throw Error("empty string");if(typeof T=="number"?(A=T,T=!1):T=!!T,E==="NaN"||E==="Infinity"||E==="+Infinity"||E==="-Infinity")return T?H:$;if(A=A||10,A<2||36<A)throw RangeError("radix");var J;if((J=E.indexOf("-"))>0)throw Error("interior hyphen");if(J===0)return m(E.substring(1),T,A).neg();for(var G=l(h(A,8)),I=$,V=0;V<E.length;V+=8){var L=Math.min(8,E.length-V),z=parseInt(E.substring(V,V+L),A);if(L<8){var ie=l(h(A,L));I=I.mul(ie).add(l(z))}else I=I.mul(G),I=I.add(l(z))}return I.unsigned=T,I}d.fromString=m;function w(E,T){return typeof E=="number"?l(E,T):typeof E=="string"?m(E,T):u(E.low,E.high,typeof T=="boolean"?T:E.unsigned)}d.fromValue=w;var k=1<<16,C=1<<24,O=k*k,P=O*O,M=P/2,D=v(C),$=v(0);d.ZERO=$;var H=v(0,!0);d.UZERO=H;var Z=v(1);d.ONE=Z;var re=v(1,!0);d.UONE=re;var Y=v(-1);d.NEG_ONE=Y;var N=u(-1,2147483647,!1);d.MAX_VALUE=N;var x=u(-1,-1,!0);d.MAX_UNSIGNED_VALUE=x;var b=u(0,-2147483648,!1);d.MIN_VALUE=b;var _=d.prototype;_.toInt=function(){return this.unsigned?this.low>>>0:this.low},_.toNumber=function(){return this.unsigned?(this.high>>>0)*O+(this.low>>>0):this.high*O+(this.low>>>0)},_.toString=function(T){if(T=T||10,T<2||36<T)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(b)){var A=l(T),J=this.div(A),G=J.mul(A).sub(this);return J.toString(T)+G.toInt().toString(T)}else return"-"+this.neg().toString(T);for(var I=l(h(T,6),this.unsigned),V=this,L="";;){var z=V.div(I),ie=V.sub(z.mul(I)).toInt()>>>0,se=ie.toString(T);if(V=z,V.isZero())return se+L;for(;se.length<6;)se="0"+se;L=""+se+L}},_.getHighBits=function(){return this.high},_.getHighBitsUnsigned=function(){return this.high>>>0},_.getLowBits=function(){return this.low},_.getLowBitsUnsigned=function(){return this.low>>>0},_.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var T=this.high!=0?this.high:this.low,A=31;A>0&&!(T&1<<A);A--);return this.high!=0?A+33:A+1},_.isZero=function(){return this.high===0&&this.low===0},_.eqz=_.isZero,_.isNegative=function(){return!this.unsigned&&this.high<0},_.isPositive=function(){return this.unsigned||this.high>=0},_.isOdd=function(){return(this.low&1)===1},_.isEven=function(){return(this.low&1)===0},_.equals=function(T){return o(T)||(T=w(T)),this.unsigned!==T.unsigned&&this.high>>>31===1&&T.high>>>31===1?!1:this.high===T.high&&this.low===T.low},_.eq=_.equals,_.notEquals=function(T){return!this.eq(T)},_.neq=_.notEquals,_.ne=_.notEquals,_.lessThan=function(T){return this.comp(T)<0},_.lt=_.lessThan,_.lessThanOrEqual=function(T){return this.comp(T)<=0},_.lte=_.lessThanOrEqual,_.le=_.lessThanOrEqual,_.greaterThan=function(T){return this.comp(T)>0},_.gt=_.greaterThan,_.greaterThanOrEqual=function(T){return this.comp(T)>=0},_.gte=_.greaterThanOrEqual,_.ge=_.greaterThanOrEqual,_.compare=function(T){if(o(T)||(T=w(T)),this.eq(T))return 0;var A=this.isNegative(),J=T.isNegative();return A&&!J?-1:!A&&J?1:this.unsigned?T.high>>>0>this.high>>>0||T.high===this.high&&T.low>>>0>this.low>>>0?-1:1:this.sub(T).isNegative()?-1:1},_.comp=_.compare,_.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(Z)},_.neg=_.negate,_.add=function(T){o(T)||(T=w(T));var A=this.high>>>16,J=this.high&65535,G=this.low>>>16,I=this.low&65535,V=T.high>>>16,L=T.high&65535,z=T.low>>>16,ie=T.low&65535,se=0,me=0,Se=0,ke=0;return ke+=I+ie,Se+=ke>>>16,ke&=65535,Se+=G+z,me+=Se>>>16,Se&=65535,me+=J+L,se+=me>>>16,me&=65535,se+=A+V,se&=65535,u(Se<<16|ke,se<<16|me,this.unsigned)},_.subtract=function(T){return o(T)||(T=w(T)),this.add(T.neg())},_.sub=_.subtract,_.multiply=function(T){if(this.isZero())return this;if(o(T)||(T=w(T)),s){var A=s.mul(this.low,this.high,T.low,T.high);return u(A,s.get_high(),this.unsigned)}if(T.isZero())return this.unsigned?H:$;if(this.eq(b))return T.isOdd()?b:$;if(T.eq(b))return this.isOdd()?b:$;if(this.isNegative())return T.isNegative()?this.neg().mul(T.neg()):this.neg().mul(T).neg();if(T.isNegative())return this.mul(T.neg()).neg();if(this.lt(D)&&T.lt(D))return l(this.toNumber()*T.toNumber(),this.unsigned);var J=this.high>>>16,G=this.high&65535,I=this.low>>>16,V=this.low&65535,L=T.high>>>16,z=T.high&65535,ie=T.low>>>16,se=T.low&65535,me=0,Se=0,ke=0,oe=0;return oe+=V*se,ke+=oe>>>16,oe&=65535,ke+=I*se,Se+=ke>>>16,ke&=65535,ke+=V*ie,Se+=ke>>>16,ke&=65535,Se+=G*se,me+=Se>>>16,Se&=65535,Se+=I*ie,me+=Se>>>16,Se&=65535,Se+=V*z,me+=Se>>>16,Se&=65535,me+=J*se+G*ie+I*z+V*L,me&=65535,u(ke<<16|oe,me<<16|Se,this.unsigned)},_.mul=_.multiply,_.divide=function(T){if(o(T)||(T=w(T)),T.isZero())throw Error("division by zero");if(s){if(!this.unsigned&&this.high===-2147483648&&T.low===-1&&T.high===-1)return this;var A=(this.unsigned?s.div_u:s.div_s)(this.low,this.high,T.low,T.high);return u(A,s.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?H:$;var J,G,I;if(this.unsigned){if(T.unsigned||(T=T.toUnsigned()),T.gt(this))return H;if(T.gt(this.shru(1)))return re;I=H}else{if(this.eq(b)){if(T.eq(Z)||T.eq(Y))return b;if(T.eq(b))return Z;var V=this.shr(1);return J=V.div(T).shl(1),J.eq($)?T.isNegative()?Z:Y:(G=this.sub(T.mul(J)),I=J.add(G.div(T)),I)}else if(T.eq(b))return this.unsigned?H:$;if(this.isNegative())return T.isNegative()?this.neg().div(T.neg()):this.neg().div(T).neg();if(T.isNegative())return this.div(T.neg()).neg();I=$}for(G=this;G.gte(T);){J=Math.max(1,Math.floor(G.toNumber()/T.toNumber()));for(var L=Math.ceil(Math.log(J)/Math.LN2),z=L<=48?1:h(2,L-48),ie=l(J),se=ie.mul(T);se.isNegative()||se.gt(G);)J-=z,ie=l(J,this.unsigned),se=ie.mul(T);ie.isZero()&&(ie=Z),I=I.add(ie),G=G.sub(se)}return I},_.div=_.divide,_.modulo=function(T){if(o(T)||(T=w(T)),s){var A=(this.unsigned?s.rem_u:s.rem_s)(this.low,this.high,T.low,T.high);return u(A,s.get_high(),this.unsigned)}return this.sub(this.div(T).mul(T))},_.mod=_.modulo,_.rem=_.modulo,_.not=function(){return u(~this.low,~this.high,this.unsigned)},_.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},_.clz=_.countLeadingZeros,_.countTrailingZeros=function(){return this.low?f(this.low):f(this.high)+32},_.ctz=_.countTrailingZeros,_.and=function(T){return o(T)||(T=w(T)),u(this.low&T.low,this.high&T.high,this.unsigned)},_.or=function(T){return o(T)||(T=w(T)),u(this.low|T.low,this.high|T.high,this.unsigned)},_.xor=function(T){return o(T)||(T=w(T)),u(this.low^T.low,this.high^T.high,this.unsigned)},_.shiftLeft=function(T){return o(T)&&(T=T.toInt()),(T&=63)===0?this:T<32?u(this.low<<T,this.high<<T|this.low>>>32-T,this.unsigned):u(0,this.low<<T-32,this.unsigned)},_.shl=_.shiftLeft,_.shiftRight=function(T){return o(T)&&(T=T.toInt()),(T&=63)===0?this:T<32?u(this.low>>>T|this.high<<32-T,this.high>>T,this.unsigned):u(this.high>>T-32,this.high>=0?0:-1,this.unsigned)},_.shr=_.shiftRight,_.shiftRightUnsigned=function(T){return o(T)&&(T=T.toInt()),(T&=63)===0?this:T<32?u(this.low>>>T|this.high<<32-T,this.high>>>T,this.unsigned):T===32?u(this.high,0,this.unsigned):u(this.high>>>T-32,0,this.unsigned)},_.shru=_.shiftRightUnsigned,_.shr_u=_.shiftRightUnsigned,_.rotateLeft=function(T){var A;return o(T)&&(T=T.toInt()),(T&=63)===0?this:T===32?u(this.high,this.low,this.unsigned):T<32?(A=32-T,u(this.low<<T|this.high>>>A,this.high<<T|this.low>>>A,this.unsigned)):(T-=32,A=32-T,u(this.high<<T|this.low>>>A,this.low<<T|this.high>>>A,this.unsigned))},_.rotl=_.rotateLeft,_.rotateRight=function(T){var A;return o(T)&&(T=T.toInt()),(T&=63)===0?this:T===32?u(this.high,this.low,this.unsigned):T<32?(A=32-T,u(this.high<<A|this.low>>>T,this.low<<A|this.high>>>T,this.unsigned)):(T-=32,A=32-T,u(this.low<<A|this.high>>>T,this.high<<A|this.low>>>T,this.unsigned))},_.rotr=_.rotateRight,_.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},_.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},_.toBytes=function(T){return T?this.toBytesLE():this.toBytesBE()},_.toBytesLE=function(){var T=this.high,A=this.low;return[A&255,A>>>8&255,A>>>16&255,A>>>24,T&255,T>>>8&255,T>>>16&255,T>>>24]},_.toBytesBE=function(){var T=this.high,A=this.low;return[T>>>24,T>>>16&255,T>>>8&255,T&255,A>>>24,A>>>16&255,A>>>8&255,A&255]},d.fromBytes=function(T,A,J){return J?d.fromBytesLE(T,A):d.fromBytesBE(T,A)},d.fromBytesLE=function(T,A){return new d(T[0]|T[1]<<8|T[2]<<16|T[3]<<24,T[4]|T[5]<<8|T[6]<<16|T[7]<<24,A)},d.fromBytesBE=function(T,A){return new d(T[4]<<24|T[5]<<16|T[6]<<8|T[7],T[0]<<24|T[1]<<16|T[2]<<8|T[3],A)};var g=d;return a.default=g,"default"in a?a.default:a}({});typeof i=="object"&&typeof t=="object"&&(i.exports=n)},{}],86:[function(e,i,t){const n=o=>typeof o=="object"&&o!==null,a=Symbol("skip"),s=o=>n(o)&&!(o instanceof RegExp)&&!(o instanceof Error)&&!(o instanceof Date),d=(o,f,c,p=new WeakMap)=>{if(c={deep:!1,target:{},...c},p.has(o))return p.get(o);p.set(o,c.target);const{target:v}=c;delete c.target;const l=u=>u.map(h=>s(h)?d(h,f,c,p):h);if(Array.isArray(o))return l(o);for(const[u,h]of Object.entries(o)){const m=f(u,h,o);if(m===a)continue;let[w,k,{shouldRecurse:C=!0}={}]=m;w!=="__proto__"&&(c.deep&&C&&s(k)&&(k=Array.isArray(k)?l(k):d(k,f,c,p)),v[w]=k)}return v};i.exports=(o,f,c)=>{if(!n(o))throw new TypeError(`Expected an object, got \`${o}\` (${typeof o})`);return d(o,f,c)},i.exports.mapObjectSkip=a},{}],87:[function(e,i,t){var n=1e3,a=n*60,s=a*60,d=s*24,o=d*7,f=d*365.25;i.exports=function(u,h){h=h||{};var m=typeof u;if(m==="string"&&u.length>0)return c(u);if(m==="number"&&isFinite(u))return h.long?v(u):p(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function c(u){if(u=String(u),!(u.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(h){var m=parseFloat(h[1]),w=(h[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return m*f;case"weeks":case"week":case"w":return m*o;case"days":case"day":case"d":return m*d;case"hours":case"hour":case"hrs":case"hr":case"h":return m*s;case"minutes":case"minute":case"mins":case"min":case"m":return m*a;case"seconds":case"second":case"secs":case"sec":case"s":return m*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function p(u){var h=Math.abs(u);return h>=d?Math.round(u/d)+"d":h>=s?Math.round(u/s)+"h":h>=a?Math.round(u/a)+"m":h>=n?Math.round(u/n)+"s":u+"ms"}function v(u){var h=Math.abs(u);return h>=d?l(u,h,d,"day"):h>=s?l(u,h,s,"hour"):h>=a?l(u,h,a,"minute"):h>=n?l(u,h,n,"second"):u+" ms"}function l(u,h,m,w){var k=h>=m*1.5;return Math.round(u/m)+" "+w+(k?"s":"")}},{}],88:[function(e,i,t){var n=1e3,a=n*60,s=a*60,d=s*24,o=d*7,f=d*365.25;i.exports=function(u,h){h=h||{};var m=typeof u;if(m==="string"&&u.length>0)return c(u);if(m==="number"&&isFinite(u))return h.long?v(u):p(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function c(u){if(u=String(u),!(u.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(h){var m=parseFloat(h[1]),w=(h[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return m*f;case"weeks":case"week":case"w":return m*o;case"days":case"day":case"d":return m*d;case"hours":case"hour":case"hrs":case"hr":case"h":return m*s;case"minutes":case"minute":case"mins":case"min":case"m":return m*a;case"seconds":case"second":case"secs":case"sec":case"s":return m*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function p(u){var h=Math.abs(u);return h>=d?Math.round(u/d)+"d":h>=s?Math.round(u/s)+"h":h>=a?Math.round(u/a)+"m":h>=n?Math.round(u/n)+"s":u+"ms"}function v(u){var h=Math.abs(u);return h>=d?l(u,h,d,"day"):h>=s?l(u,h,s,"hour"):h>=a?l(u,h,a,"minute"):h>=n?l(u,h,n,"second"):u+" ms"}function l(u,h,m,w){var k=h>=m*1.5;return Math.round(u/m)+" "+w+(k?"s":"")}},{}],89:[function(e,i,t){i.exports=e("./src/index-minimal")},{"./src/index-minimal":90}],90:[function(e,i,t){var n=t;n.build="minimal",n.Writer=e("./writer"),n.BufferWriter=e("./writer_buffer"),n.Reader=e("./reader"),n.BufferReader=e("./reader_buffer"),n.util=e("./util/minimal"),n.rpc=e("./rpc"),n.roots=e("./roots"),n.configure=a;function a(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}a()},{"./reader":91,"./reader_buffer":92,"./roots":93,"./rpc":94,"./util/minimal":97,"./writer":98,"./writer_buffer":99}],91:[function(e,i,t){i.exports=f;var n=e("./util/minimal"),a,s=n.LongBits,d=n.utf8;function o(h,m){return RangeError("index out of range: "+h.pos+" + "+(m||1)+" > "+h.len)}function f(h){this.buf=h,this.pos=0,this.len=h.length}var c=typeof Uint8Array<"u"?function(m){if(m instanceof Uint8Array||Array.isArray(m))return new f(m);throw Error("illegal buffer")}:function(m){if(Array.isArray(m))return new f(m);throw Error("illegal buffer")},p=function(){return n.Buffer?function(w){return(f.create=function(C){return n.Buffer.isBuffer(C)?new a(C):c(C)})(w)}:c};f.create=p(),f.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,f.prototype.uint32=function(){var m=4294967295;return function(){if(m=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(m=(m|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(m=(m|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(m=(m|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(m=(m|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return m;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return m}}(),f.prototype.int32=function(){return this.uint32()|0},f.prototype.sint32=function(){var m=this.uint32();return m>>>1^-(m&1)|0};function v(){var h=new s(0,0),m=0;if(this.len-this.pos>4){for(;m<4;++m)if(h.lo=(h.lo|(this.buf[this.pos]&127)<<m*7)>>>0,this.buf[this.pos++]<128)return h;if(h.lo=(h.lo|(this.buf[this.pos]&127)<<28)>>>0,h.hi=(h.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return h;m=0}else{for(;m<3;++m){if(this.pos>=this.len)throw o(this);if(h.lo=(h.lo|(this.buf[this.pos]&127)<<m*7)>>>0,this.buf[this.pos++]<128)return h}return h.lo=(h.lo|(this.buf[this.pos++]&127)<<m*7)>>>0,h}if(this.len-this.pos>4){for(;m<5;++m)if(h.hi=(h.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0,this.buf[this.pos++]<128)return h}else for(;m<5;++m){if(this.pos>=this.len)throw o(this);if(h.hi=(h.hi|(this.buf[this.pos]&127)<<m*7+3)>>>0,this.buf[this.pos++]<128)return h}throw Error("invalid varint encoding")}f.prototype.bool=function(){return this.uint32()!==0};function l(h,m){return(h[m-4]|h[m-3]<<8|h[m-2]<<16|h[m-1]<<24)>>>0}f.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return l(this.buf,this.pos+=4)},f.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return l(this.buf,this.pos+=4)|0};function u(){if(this.pos+8>this.len)throw o(this,8);return new s(l(this.buf,this.pos+=4),l(this.buf,this.pos+=4))}f.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var m=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,m},f.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var m=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,m},f.prototype.bytes=function(){var m=this.uint32(),w=this.pos,k=this.pos+m;if(k>this.len)throw o(this,m);return this.pos+=m,Array.isArray(this.buf)?this.buf.slice(w,k):w===k?new this.buf.constructor(0):this._slice.call(this.buf,w,k)},f.prototype.string=function(){var m=this.bytes();return d.read(m,0,m.length)},f.prototype.skip=function(m){if(typeof m=="number"){if(this.pos+m>this.len)throw o(this,m);this.pos+=m}else do if(this.pos>=this.len)throw o(this);while(this.buf[this.pos++]&128);return this},f.prototype.skipType=function(h){switch(h){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(h=this.uint32()&7)!==4;)this.skipType(h);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+h+" at offset "+this.pos)}return this},f._configure=function(h){a=h,f.create=p(),a._configure();var m=n.Long?"toLong":"toNumber";n.merge(f.prototype,{int64:function(){return v.call(this)[m](!1)},uint64:function(){return v.call(this)[m](!0)},sint64:function(){return v.call(this).zzDecode()[m](!1)},fixed64:function(){return u.call(this)[m](!0)},sfixed64:function(){return u.call(this)[m](!1)}})}},{"./util/minimal":97}],92:[function(e,i,t){i.exports=s;var n=e("./reader");(s.prototype=Object.create(n.prototype)).constructor=s;var a=e("./util/minimal");function s(d){n.call(this,d)}s._configure=function(){a.Buffer&&(s.prototype._slice=a.Buffer.prototype.slice)},s.prototype.string=function(){var o=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+o,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+o,this.len))},s._configure()},{"./reader":91,"./util/minimal":97}],93:[function(e,i,t){i.exports={}},{}],94:[function(e,i,t){var n=t;n.Service=e("./rpc/service")},{"./rpc/service":95}],95:[function(e,i,t){i.exports=a;var n=e("../util/minimal");(a.prototype=Object.create(n.EventEmitter.prototype)).constructor=a;function a(s,d,o){if(typeof s!="function")throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=s,this.requestDelimited=!!d,this.responseDelimited=!!o}a.prototype.rpcCall=function s(d,o,f,c,p){if(!c)throw TypeError("request must be specified");var v=this;if(!p)return n.asPromise(s,v,d,o,f,c);if(!v.rpcImpl){setTimeout(function(){p(Error("already ended"))},0);return}try{return v.rpcImpl(d,o[v.requestDelimited?"encodeDelimited":"encode"](c).finish(),function(u,h){if(u)return v.emit("error",u,d),p(u);if(h===null){v.end(!0);return}if(!(h instanceof f))try{h=f[v.responseDelimited?"decodeDelimited":"decode"](h)}catch(m){return v.emit("error",m,d),p(m)}return v.emit("data",h,d),p(null,h)})}catch(l){v.emit("error",l,d),setTimeout(function(){p(l)},0);return}},a.prototype.end=function(d){return this.rpcImpl&&(d||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},{"../util/minimal":97}],96:[function(e,i,t){i.exports=a;var n=e("../util/minimal");function a(f,c){this.lo=f>>>0,this.hi=c>>>0}var s=a.zero=new a(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var d=a.zeroHash="\0\0\0\0\0\0\0\0";a.fromNumber=function(c){if(c===0)return s;var p=c<0;p&&(c=-c);var v=c>>>0,l=(c-v)/4294967296>>>0;return p&&(l=~l>>>0,v=~v>>>0,++v>4294967295&&(v=0,++l>4294967295&&(l=0))),new a(v,l)},a.from=function(c){if(typeof c=="number")return a.fromNumber(c);if(n.isString(c))if(n.Long)c=n.Long.fromString(c);else return a.fromNumber(parseInt(c,10));return c.low||c.high?new a(c.low>>>0,c.high>>>0):s},a.prototype.toNumber=function(c){if(!c&&this.hi>>>31){var p=~this.lo+1>>>0,v=~this.hi>>>0;return p||(v=v+1>>>0),-(p+v*4294967296)}return this.lo+this.hi*4294967296},a.prototype.toLong=function(c){return n.Long?new n.Long(this.lo|0,this.hi|0,!!c):{low:this.lo|0,high:this.hi|0,unsigned:!!c}};var o=String.prototype.charCodeAt;a.fromHash=function(c){return c===d?s:new a((o.call(c,0)|o.call(c,1)<<8|o.call(c,2)<<16|o.call(c,3)<<24)>>>0,(o.call(c,4)|o.call(c,5)<<8|o.call(c,6)<<16|o.call(c,7)<<24)>>>0)},a.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},a.prototype.zzEncode=function(){var c=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^c)>>>0,this.lo=(this.lo<<1^c)>>>0,this},a.prototype.zzDecode=function(){var c=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^c)>>>0,this.hi=(this.hi>>>1^c)>>>0,this},a.prototype.length=function(){var c=this.lo,p=(this.lo>>>28|this.hi<<4)>>>0,v=this.hi>>>24;return v===0?p===0?c<16384?c<128?1:2:c<2097152?3:4:p<16384?p<128?5:6:p<2097152?7:8:v<128?9:10}},{"../util/minimal":97}],97:[function(e,i,t){(function(n){(function(){var a=t;a.asPromise=e("@protobufjs/aspromise"),a.base64=e("@protobufjs/base64"),a.EventEmitter=e("@protobufjs/eventemitter"),a.float=e("@protobufjs/float"),a.inquire=e("@protobufjs/inquire"),a.utf8=e("@protobufjs/utf8"),a.pool=e("@protobufjs/pool"),a.LongBits=e("./longbits"),a.isNode=!!(typeof n<"u"&&n&&n.process&&n.process.versions&&n.process.versions.node),a.global=a.isNode&&n||typeof window<"u"&&window||typeof self<"u"&&self||this,a.emptyArray=Object.freeze?Object.freeze([]):[],a.emptyObject=Object.freeze?Object.freeze({}):{},a.isInteger=Number.isInteger||function(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f},a.isString=function(f){return typeof f=="string"||f instanceof String},a.isObject=function(f){return f&&typeof f=="object"},a.isset=a.isSet=function(f,c){var p=f[c];return p!=null&&f.hasOwnProperty(c)?typeof p!="object"||(Array.isArray(p)?p.length:Object.keys(p).length)>0:!1},a.Buffer=function(){try{var o=a.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),a._Buffer_from=null,a._Buffer_allocUnsafe=null,a.newBuffer=function(f){return typeof f=="number"?a.Buffer?a._Buffer_allocUnsafe(f):new a.Array(f):a.Buffer?a._Buffer_from(f):typeof Uint8Array>"u"?f:new Uint8Array(f)},a.Array=typeof Uint8Array<"u"?Uint8Array:Array,a.Long=a.global.dcodeIO&&a.global.dcodeIO.Long||a.global.Long||a.inquire("long"),a.key2Re=/^true|false|0|1$/,a.key32Re=/^-?(?:0|[1-9][0-9]*)$/,a.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,a.longToHash=function(f){return f?a.LongBits.from(f).toHash():a.LongBits.zeroHash},a.longFromHash=function(f,c){var p=a.LongBits.fromHash(f);return a.Long?a.Long.fromBits(p.lo,p.hi,c):p.toNumber(!!c)};function s(o,f,c){for(var p=Object.keys(f),v=0;v<p.length;++v)(o[p[v]]===void 0||!c)&&(o[p[v]]=f[p[v]]);return o}a.merge=s,a.lcFirst=function(f){return f.charAt(0).toLowerCase()+f.substring(1)};function d(o){function f(c,p){if(!(this instanceof f))return new f(c,p);Object.defineProperty(this,"message",{get:function(){return c}}),Error.captureStackTrace?Error.captureStackTrace(this,f):Object.defineProperty(this,"stack",{value:new Error().stack||""}),p&&s(this,p)}return(f.prototype=Object.create(Error.prototype)).constructor=f,Object.defineProperty(f.prototype,"name",{get:function(){return o}}),f.prototype.toString=function(){return this.name+": "+this.message},f}a.newError=d,a.ProtocolError=d("ProtocolError"),a.oneOfGetter=function(f){for(var c={},p=0;p<f.length;++p)c[f[p]]=1;return function(){for(var v=Object.keys(this),l=v.length-1;l>-1;--l)if(c[v[l]]===1&&this[v[l]]!==void 0&&this[v[l]]!==null)return v[l]}},a.oneOfSetter=function(f){return function(c){for(var p=0;p<f.length;++p)f[p]!==c&&delete this[f[p]]}},a.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},a._configure=function(){var o=a.Buffer;if(!o){a._Buffer_from=a._Buffer_allocUnsafe=null;return}a._Buffer_from=o.from!==Uint8Array.from&&o.from||function(c,p){return new o(c,p)},a._Buffer_allocUnsafe=o.allocUnsafe||function(c){return new o(c)}}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./longbits":96,"@protobufjs/aspromise":2,"@protobufjs/base64":3,"@protobufjs/eventemitter":4,"@protobufjs/float":5,"@protobufjs/inquire":6,"@protobufjs/pool":7,"@protobufjs/utf8":8}],98:[function(e,i,t){i.exports=v;var n=e("./util/minimal"),a,s=n.LongBits,d=n.base64,o=n.utf8;function f(O,P,M){this.fn=O,this.len=P,this.next=void 0,this.val=M}function c(){}function p(O){this.head=O.head,this.tail=O.tail,this.len=O.len,this.next=O.states}function v(){this.len=0,this.head=new f(c,0,0),this.tail=this.head,this.states=null}var l=function(){return n.Buffer?function(){return(v.create=function(){return new a})()}:function(){return new v}};v.create=l(),v.alloc=function(P){return new n.Array(P)},n.Array!==Array&&(v.alloc=n.pool(v.alloc,n.Array.prototype.subarray)),v.prototype._push=function(P,M,D){return this.tail=this.tail.next=new f(P,M,D),this.len+=M,this};function u(O,P,M){P[M]=O&255}function h(O,P,M){for(;O>127;)P[M++]=O&127|128,O>>>=7;P[M]=O}function m(O,P){this.len=O,this.next=void 0,this.val=P}m.prototype=Object.create(f.prototype),m.prototype.fn=h,v.prototype.uint32=function(P){return this.len+=(this.tail=this.tail.next=new m((P=P>>>0)<128?1:P<16384?2:P<2097152?3:P<268435456?4:5,P)).len,this},v.prototype.int32=function(P){return P<0?this._push(w,10,s.fromNumber(P)):this.uint32(P)},v.prototype.sint32=function(P){return this.uint32((P<<1^P>>31)>>>0)};function w(O,P,M){for(;O.hi;)P[M++]=O.lo&127|128,O.lo=(O.lo>>>7|O.hi<<25)>>>0,O.hi>>>=7;for(;O.lo>127;)P[M++]=O.lo&127|128,O.lo=O.lo>>>7;P[M++]=O.lo}v.prototype.uint64=function(P){var M=s.from(P);return this._push(w,M.length(),M)},v.prototype.int64=v.prototype.uint64,v.prototype.sint64=function(P){var M=s.from(P).zzEncode();return this._push(w,M.length(),M)},v.prototype.bool=function(P){return this._push(u,1,P?1:0)};function k(O,P,M){P[M]=O&255,P[M+1]=O>>>8&255,P[M+2]=O>>>16&255,P[M+3]=O>>>24}v.prototype.fixed32=function(P){return this._push(k,4,P>>>0)},v.prototype.sfixed32=v.prototype.fixed32,v.prototype.fixed64=function(P){var M=s.from(P);return this._push(k,4,M.lo)._push(k,4,M.hi)},v.prototype.sfixed64=v.prototype.fixed64,v.prototype.float=function(P){return this._push(n.float.writeFloatLE,4,P)},v.prototype.double=function(P){return this._push(n.float.writeDoubleLE,8,P)};var C=n.Array.prototype.set?function(P,M,D){M.set(P,D)}:function(P,M,D){for(var $=0;$<P.length;++$)M[D+$]=P[$]};v.prototype.bytes=function(P){var M=P.length>>>0;if(!M)return this._push(u,1,0);if(n.isString(P)){var D=v.alloc(M=d.length(P));d.decode(P,D,0),P=D}return this.uint32(M)._push(C,M,P)},v.prototype.string=function(P){var M=o.length(P);return M?this.uint32(M)._push(o.write,M,P):this._push(u,1,0)},v.prototype.fork=function(){return this.states=new p(this),this.head=this.tail=new f(c,0,0),this.len=0,this},v.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new f(c,0,0),this.len=0),this},v.prototype.ldelim=function(){var P=this.head,M=this.tail,D=this.len;return this.reset().uint32(D),D&&(this.tail.next=P.next,this.tail=M,this.len+=D),this},v.prototype.finish=function(){for(var P=this.head.next,M=this.constructor.alloc(this.len),D=0;P;)P.fn(P.val,M,D),D+=P.len,P=P.next;return M},v._configure=function(O){a=O,v.create=l(),a._configure()}},{"./util/minimal":97}],99:[function(e,i,t){i.exports=s;var n=e("./writer");(s.prototype=Object.create(n.prototype)).constructor=s;var a=e("./util/minimal");function s(){n.call(this)}s._configure=function(){s.alloc=a._Buffer_allocUnsafe,s.writeBytesBuffer=a.Buffer&&a.Buffer.prototype instanceof Uint8Array&&a.Buffer.prototype.set.name==="set"?function(f,c,p){c.set(f,p)}:function(f,c,p){if(f.copy)f.copy(c,p,0,f.length);else for(var v=0;v<f.length;)c[p++]=f[v++]}},s.prototype.bytes=function(f){a.isString(f)&&(f=a._Buffer_from(f,"base64"));var c=f.length>>>0;return this.uint32(c),c&&this._push(s.writeBytesBuffer,c,f),this};function d(o,f,c){o.length<40?a.utf8.write(o,f,c):f.utf8Write?f.utf8Write(o,c):f.write(o,c)}s.prototype.string=function(f){var c=a.Buffer.byteLength(f);return this.uint32(c),c&&this._push(d,c,f),this},s._configure()},{"./util/minimal":97,"./writer":98}],100:[function(e,i,t){(function(n){(function(){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let a;i.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:n):s=>(a||(a=Promise.resolve())).then(s).catch(d=>setTimeout(()=>{throw d},0))}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],101:[function(e,i,t){class n{constructor(s={}){if(!(s.maxSize&&s.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=s.maxSize,this.onEviction=s.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(s,d){if(this.cache.set(s,d),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(const[o,f]of this.oldCache.entries())this.onEviction(o,f);this.oldCache=this.cache,this.cache=new Map}}get(s){if(this.cache.has(s))return this.cache.get(s);if(this.oldCache.has(s)){const d=this.oldCache.get(s);return this.oldCache.delete(s),this._set(s,d),d}}set(s,d){return this.cache.has(s)?this.cache.set(s,d):this._set(s,d),this}has(s){return this.cache.has(s)||this.oldCache.has(s)}peek(s){if(this.cache.has(s))return this.cache.get(s);if(this.oldCache.has(s))return this.oldCache.get(s)}delete(s){const d=this.cache.delete(s);return d&&this._size--,this.oldCache.delete(s)||d}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[s]of this)yield s}*values(){for(const[,s]of this)yield s}*[Symbol.iterator](){for(const s of this.cache)yield s;for(const s of this.oldCache){const[d]=s;this.cache.has(d)||(yield s)}}get size(){let s=0;for(const d of this.oldCache.keys())this.cache.has(d)||s++;return Math.min(this._size+s,this.maxSize)}}i.exports=n},{}],102:[function(e,i,t){(function(n,a){(function(){var s=65536,d=4294967295;function o(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var f=e("safe-buffer").Buffer,c=a.crypto||a.msCrypto;c&&c.getRandomValues?i.exports=p:i.exports=o;function p(v,l){if(v>d)throw new RangeError("requested too many random bytes");var u=f.allocUnsafe(v);if(v>0)if(v>s)for(var h=0;h<v;h+=s)c.getRandomValues(u.slice(h,h+s));else c.getRandomValues(u);return typeof l=="function"?n.nextTick(function(){l(null,u)}):u}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:254,"safe-buffer":118}],103:[function(e,i,t){function n(p,v){p.prototype=Object.create(v.prototype),p.prototype.constructor=p,p.__proto__=v}var a={};function s(p,v,l){l||(l=Error);function u(m,w,k){return typeof v=="string"?v:v(m,w,k)}var h=function(m){n(w,m);function w(k,C,O){return m.call(this,u(k,C,O))||this}return w}(l);h.prototype.name=l.name,h.prototype.code=p,a[p]=h}function d(p,v){if(Array.isArray(p)){var l=p.length;return p=p.map(function(u){return String(u)}),l>2?"one of ".concat(v," ").concat(p.slice(0,l-1).join(", "),", or ")+p[l-1]:l===2?"one of ".concat(v," ").concat(p[0]," or ").concat(p[1]):"of ".concat(v," ").concat(p[0])}else return"of ".concat(v," ").concat(String(p))}function o(p,v,l){return p.substr(!l||l<0?0:+l,v.length)===v}function f(p,v,l){return(l===void 0||l>p.length)&&(l=p.length),p.substring(l-v.length,l)===v}function c(p,v,l){return typeof l!="number"&&(l=0),l+v.length>p.length?!1:p.indexOf(v,l)!==-1}s("ERR_INVALID_OPT_VALUE",function(p,v){return'The value "'+v+'" is invalid for option "'+p+'"'},TypeError),s("ERR_INVALID_ARG_TYPE",function(p,v,l){var u;typeof v=="string"&&o(v,"not ")?(u="must not be",v=v.replace(/^not /,"")):u="must be";var h;if(f(p," argument"))h="The ".concat(p," ").concat(u," ").concat(d(v,"type"));else{var m=c(p,".")?"property":"argument";h='The "'.concat(p,'" ').concat(m," ").concat(u," ").concat(d(v,"type"))}return h+=". Received type ".concat(typeof l),h},TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",function(p){return"The "+p+" method is not implemented"}),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",function(p){return"Cannot call "+p+" after a stream was destroyed"}),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",function(p){return"Unknown encoding: "+p},TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),i.exports.codes=a},{}],104:[function(e,i,t){(function(n){(function(){var a=Object.keys||function(u){var h=[];for(var m in u)h.push(m);return h};i.exports=p;var s=e("./_stream_readable"),d=e("./_stream_writable");e("inherits")(p,s);for(var o=a(d.prototype),f=0;f<o.length;f++){var c=o[f];p.prototype[c]||(p.prototype[c]=d.prototype[c])}function p(u){if(!(this instanceof p))return new p(u);s.call(this,u),d.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",v)))}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(p.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function v(){this._writableState.ended||n.nextTick(l,this)}function l(u){u.end()}Object.defineProperty(p.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":106,"./_stream_writable":108,_process:254,inherits:47}],105:[function(e,i,t){i.exports=a;var n=e("./_stream_transform");e("inherits")(a,n);function a(s){if(!(this instanceof a))return new a(s);n.call(this,s)}a.prototype._transform=function(s,d,o){o(null,s)}},{"./_stream_transform":107,inherits:47}],106:[function(e,i,t){(function(n,a){(function(){i.exports=b;var s;b.ReadableState=x,e("events").EventEmitter;var d=function(te,Q){return te.listeners(Q).length},o=e("./internal/streams/stream"),f=e("buffer").Buffer,c=(typeof a<"u"?a:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function p(ee){return f.from(ee)}function v(ee){return f.isBuffer(ee)||ee instanceof c}var l=e("util"),u;l&&l.debuglog?u=l.debuglog("stream"):u=function(){};var h=e("./internal/streams/buffer_list"),m=e("./internal/streams/destroy"),w=e("./internal/streams/state"),k=w.getHighWaterMark,C=e("../errors").codes,O=C.ERR_INVALID_ARG_TYPE,P=C.ERR_STREAM_PUSH_AFTER_EOF,M=C.ERR_METHOD_NOT_IMPLEMENTED,D=C.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,$,H,Z;e("inherits")(b,o);var re=m.errorOrDestroy,Y=["error","close","destroy","pause","resume"];function N(ee,te,Q){if(typeof ee.prependListener=="function")return ee.prependListener(te,Q);!ee._events||!ee._events[te]?ee.on(te,Q):Array.isArray(ee._events[te])?ee._events[te].unshift(Q):ee._events[te]=[Q,ee._events[te]]}function x(ee,te,Q){s=s||e("./_stream_duplex"),ee=ee||{},typeof Q!="boolean"&&(Q=te instanceof s),this.objectMode=!!ee.objectMode,Q&&(this.objectMode=this.objectMode||!!ee.readableObjectMode),this.highWaterMark=k(this,ee,"readableHighWaterMark",Q),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=ee.emitClose!==!1,this.autoDestroy=!!ee.autoDestroy,this.destroyed=!1,this.defaultEncoding=ee.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ee.encoding&&($||($=e("string_decoder/").StringDecoder),this.decoder=new $(ee.encoding),this.encoding=ee.encoding)}function b(ee){if(s=s||e("./_stream_duplex"),!(this instanceof b))return new b(ee);var te=this instanceof s;this._readableState=new x(ee,this,te),this.readable=!0,ee&&(typeof ee.read=="function"&&(this._read=ee.read),typeof ee.destroy=="function"&&(this._destroy=ee.destroy)),o.call(this)}Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(te){this._readableState&&(this._readableState.destroyed=te)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(ee,te){te(ee)},b.prototype.push=function(ee,te){var Q=this._readableState,B;return Q.objectMode?B=!0:typeof ee=="string"&&(te=te||Q.defaultEncoding,te!==Q.encoding&&(ee=f.from(ee,te),te=""),B=!0),_(this,ee,te,!1,B)},b.prototype.unshift=function(ee){return _(this,ee,null,!0,!1)};function _(ee,te,Q,B,W){u("readableAddChunk",te);var X=ee._readableState;if(te===null)X.reading=!1,G(ee,X);else{var ce;if(W||(ce=E(X,te)),ce)re(ee,ce);else if(X.objectMode||te&&te.length>0)if(typeof te!="string"&&!X.objectMode&&Object.getPrototypeOf(te)!==f.prototype&&(te=p(te)),B)X.endEmitted?re(ee,new D):g(ee,X,te,!0);else if(X.ended)re(ee,new P);else{if(X.destroyed)return!1;X.reading=!1,X.decoder&&!Q?(te=X.decoder.write(te),X.objectMode||te.length!==0?g(ee,X,te,!1):L(ee,X)):g(ee,X,te,!1)}else B||(X.reading=!1,L(ee,X))}return!X.ended&&(X.length<X.highWaterMark||X.length===0)}function g(ee,te,Q,B){te.flowing&&te.length===0&&!te.sync?(te.awaitDrain=0,ee.emit("data",Q)):(te.length+=te.objectMode?1:Q.length,B?te.buffer.unshift(Q):te.buffer.push(Q),te.needReadable&&I(ee)),L(ee,te)}function E(ee,te){var Q;return!v(te)&&typeof te!="string"&&te!==void 0&&!ee.objectMode&&(Q=new O("chunk",["string","Buffer","Uint8Array"],te)),Q}b.prototype.isPaused=function(){return this._readableState.flowing===!1},b.prototype.setEncoding=function(ee){$||($=e("string_decoder/").StringDecoder);var te=new $(ee);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;for(var Q=this._readableState.buffer.head,B="";Q!==null;)B+=te.write(Q.data),Q=Q.next;return this._readableState.buffer.clear(),B!==""&&this._readableState.buffer.push(B),this._readableState.length=B.length,this};var T=1073741824;function A(ee){return ee>=T?ee=T:(ee--,ee|=ee>>>1,ee|=ee>>>2,ee|=ee>>>4,ee|=ee>>>8,ee|=ee>>>16,ee++),ee}function J(ee,te){return ee<=0||te.length===0&&te.ended?0:te.objectMode?1:ee!==ee?te.flowing&&te.length?te.buffer.head.data.length:te.length:(ee>te.highWaterMark&&(te.highWaterMark=A(ee)),ee<=te.length?ee:te.ended?te.length:(te.needReadable=!0,0))}b.prototype.read=function(ee){u("read",ee),ee=parseInt(ee,10);var te=this._readableState,Q=ee;if(ee!==0&&(te.emittedReadable=!1),ee===0&&te.needReadable&&((te.highWaterMark!==0?te.length>=te.highWaterMark:te.length>0)||te.ended))return u("read: emitReadable",te.length,te.ended),te.length===0&&te.ended?ye(this):I(this),null;if(ee=J(ee,te),ee===0&&te.ended)return te.length===0&&ye(this),null;var B=te.needReadable;u("need readable",B),(te.length===0||te.length-ee<te.highWaterMark)&&(B=!0,u("length less than watermark",B)),te.ended||te.reading?(B=!1,u("reading or ended",B)):B&&(u("do read"),te.reading=!0,te.sync=!0,te.length===0&&(te.needReadable=!0),this._read(te.highWaterMark),te.sync=!1,te.reading||(ee=J(Q,te)));var W;return ee>0?W=ue(ee,te):W=null,W===null?(te.needReadable=te.length<=te.highWaterMark,ee=0):(te.length-=ee,te.awaitDrain=0),te.length===0&&(te.ended||(te.needReadable=!0),Q!==ee&&te.ended&&ye(this)),W!==null&&this.emit("data",W),W};function G(ee,te){if(u("onEofChunk"),!te.ended){if(te.decoder){var Q=te.decoder.end();Q&&Q.length&&(te.buffer.push(Q),te.length+=te.objectMode?1:Q.length)}te.ended=!0,te.sync?I(ee):(te.needReadable=!1,te.emittedReadable||(te.emittedReadable=!0,V(ee)))}}function I(ee){var te=ee._readableState;u("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(u("emitReadable",te.flowing),te.emittedReadable=!0,n.nextTick(V,ee))}function V(ee){var te=ee._readableState;u("emitReadable_",te.destroyed,te.length,te.ended),!te.destroyed&&(te.length||te.ended)&&(ee.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,oe(ee)}function L(ee,te){te.readingMore||(te.readingMore=!0,n.nextTick(z,ee,te))}function z(ee,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&te.length===0);){var Q=te.length;if(u("maybeReadMore read 0"),ee.read(0),Q===te.length)break}te.readingMore=!1}b.prototype._read=function(ee){re(this,new M("_read()"))},b.prototype.pipe=function(ee,te){var Q=this,B=this._readableState;switch(B.pipesCount){case 0:B.pipes=ee;break;case 1:B.pipes=[B.pipes,ee];break;default:B.pipes.push(ee);break}B.pipesCount+=1,u("pipe count=%d opts=%j",B.pipesCount,te);var W=(!te||te.end!==!1)&&ee!==n.stdout&&ee!==n.stderr,X=W?he:S;B.endEmitted?n.nextTick(X):Q.once("end",X),ee.on("unpipe",ce);function ce(F,K){u("onunpipe"),F===Q&&K&&K.hasUnpiped===!1&&(K.hasUnpiped=!0,y())}function he(){u("onend"),ee.end()}var ge=ie(Q);ee.on("drain",ge);var fe=!1;function y(){u("cleanup"),ee.removeListener("close",de),ee.removeListener("finish",j),ee.removeListener("drain",ge),ee.removeListener("error",q),ee.removeListener("unpipe",ce),Q.removeListener("end",he),Q.removeListener("end",S),Q.removeListener("data",U),fe=!0,B.awaitDrain&&(!ee._writableState||ee._writableState.needDrain)&&ge()}Q.on("data",U);function U(F){u("ondata");var K=ee.write(F);u("dest.write",K),K===!1&&((B.pipesCount===1&&B.pipes===ee||B.pipesCount>1&&le(B.pipes,ee)!==-1)&&!fe&&(u("false write response, pause",B.awaitDrain),B.awaitDrain++),Q.pause())}function q(F){u("onerror",F),S(),ee.removeListener("error",q),d(ee,"error")===0&&re(ee,F)}N(ee,"error",q);function de(){ee.removeListener("finish",j),S()}ee.once("close",de);function j(){u("onfinish"),ee.removeListener("close",de),S()}ee.once("finish",j);function S(){u("unpipe"),Q.unpipe(ee)}return ee.emit("pipe",Q),B.flowing||(u("pipe resume"),Q.resume()),ee};function ie(ee){return function(){var Q=ee._readableState;u("pipeOnDrain",Q.awaitDrain),Q.awaitDrain&&Q.awaitDrain--,Q.awaitDrain===0&&d(ee,"data")&&(Q.flowing=!0,oe(ee))}}b.prototype.unpipe=function(ee){var te=this._readableState,Q={hasUnpiped:!1};if(te.pipesCount===0)return this;if(te.pipesCount===1)return ee&&ee!==te.pipes?this:(ee||(ee=te.pipes),te.pipes=null,te.pipesCount=0,te.flowing=!1,ee&&ee.emit("unpipe",this,Q),this);if(!ee){var B=te.pipes,W=te.pipesCount;te.pipes=null,te.pipesCount=0,te.flowing=!1;for(var X=0;X<W;X++)B[X].emit("unpipe",this,{hasUnpiped:!1});return this}var ce=le(te.pipes,ee);return ce===-1?this:(te.pipes.splice(ce,1),te.pipesCount-=1,te.pipesCount===1&&(te.pipes=te.pipes[0]),ee.emit("unpipe",this,Q),this)},b.prototype.on=function(ee,te){var Q=o.prototype.on.call(this,ee,te),B=this._readableState;return ee==="data"?(B.readableListening=this.listenerCount("readable")>0,B.flowing!==!1&&this.resume()):ee==="readable"&&!B.endEmitted&&!B.readableListening&&(B.readableListening=B.needReadable=!0,B.flowing=!1,B.emittedReadable=!1,u("on readable",B.length,B.reading),B.length?I(this):B.reading||n.nextTick(me,this)),Q},b.prototype.addListener=b.prototype.on,b.prototype.removeListener=function(ee,te){var Q=o.prototype.removeListener.call(this,ee,te);return ee==="readable"&&n.nextTick(se,this),Q},b.prototype.removeAllListeners=function(ee){var te=o.prototype.removeAllListeners.apply(this,arguments);return(ee==="readable"||ee===void 0)&&n.nextTick(se,this),te};function se(ee){var te=ee._readableState;te.readableListening=ee.listenerCount("readable")>0,te.resumeScheduled&&!te.paused?te.flowing=!0:ee.listenerCount("data")>0&&ee.resume()}function me(ee){u("readable nexttick read 0"),ee.read(0)}b.prototype.resume=function(){var ee=this._readableState;return ee.flowing||(u("resume"),ee.flowing=!ee.readableListening,Se(this,ee)),ee.paused=!1,this};function Se(ee,te){te.resumeScheduled||(te.resumeScheduled=!0,n.nextTick(ke,ee,te))}function ke(ee,te){u("resume",te.reading),te.reading||ee.read(0),te.resumeScheduled=!1,ee.emit("resume"),oe(ee),te.flowing&&!te.reading&&ee.read(0)}b.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function oe(ee){var te=ee._readableState;for(u("flow",te.flowing);te.flowing&&ee.read()!==null;);}b.prototype.wrap=function(ee){var te=this,Q=this._readableState,B=!1;ee.on("end",function(){if(u("wrapped end"),Q.decoder&&!Q.ended){var ce=Q.decoder.end();ce&&ce.length&&te.push(ce)}te.push(null)}),ee.on("data",function(ce){if(u("wrapped data"),Q.decoder&&(ce=Q.decoder.write(ce)),!(Q.objectMode&&ce==null)&&!(!Q.objectMode&&(!ce||!ce.length))){var he=te.push(ce);he||(B=!0,ee.pause())}});for(var W in ee)this[W]===void 0&&typeof ee[W]=="function"&&(this[W]=function(he){return function(){return ee[he].apply(ee,arguments)}}(W));for(var X=0;X<Y.length;X++)ee.on(Y[X],this.emit.bind(this,Y[X]));return this._read=function(ce){u("wrapped _read",ce),B&&(B=!1,ee.resume())},this},typeof Symbol=="function"&&(b.prototype[Symbol.asyncIterator]=function(){return H===void 0&&(H=e("./internal/streams/async_iterator")),H(this)}),Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(b.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(b.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}}),b._fromList=ue,Object.defineProperty(b.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function ue(ee,te){if(te.length===0)return null;var Q;return te.objectMode?Q=te.buffer.shift():!ee||ee>=te.length?(te.decoder?Q=te.buffer.join(""):te.buffer.length===1?Q=te.buffer.first():Q=te.buffer.concat(te.length),te.buffer.clear()):Q=te.buffer.consume(ee,te.decoder),Q}function ye(ee){var te=ee._readableState;u("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,n.nextTick(we,te,ee))}function we(ee,te){if(u("endReadableNT",ee.endEmitted,ee.length),!ee.endEmitted&&ee.length===0&&(ee.endEmitted=!0,te.readable=!1,te.emit("end"),ee.autoDestroy)){var Q=te._writableState;(!Q||Q.autoDestroy&&Q.finished)&&te.destroy()}}typeof Symbol=="function"&&(b.from=function(ee,te){return Z===void 0&&(Z=e("./internal/streams/from")),Z(b,ee,te)});function le(ee,te){for(var Q=0,B=ee.length;Q<B;Q++)if(ee[Q]===te)return Q;return-1}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":103,"./_stream_duplex":104,"./internal/streams/async_iterator":109,"./internal/streams/buffer_list":110,"./internal/streams/destroy":111,"./internal/streams/from":113,"./internal/streams/state":115,"./internal/streams/stream":116,_process:254,buffer:171,events:207,inherits:47,"string_decoder/":121,util:142}],107:[function(e,i,t){i.exports=p;var n=e("../errors").codes,a=n.ERR_METHOD_NOT_IMPLEMENTED,s=n.ERR_MULTIPLE_CALLBACK,d=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=n.ERR_TRANSFORM_WITH_LENGTH_0,f=e("./_stream_duplex");e("inherits")(p,f);function c(u,h){var m=this._transformState;m.transforming=!1;var w=m.writecb;if(w===null)return this.emit("error",new s);m.writechunk=null,m.writecb=null,h!=null&&this.push(h),w(u);var k=this._readableState;k.reading=!1,(k.needReadable||k.length<k.highWaterMark)&&this._read(k.highWaterMark)}function p(u){if(!(this instanceof p))return new p(u);f.call(this,u),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",v)}function v(){var u=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(h,m){l(u,h,m)}):l(this,null,null)}p.prototype.push=function(u,h){return this._transformState.needTransform=!1,f.prototype.push.call(this,u,h)},p.prototype._transform=function(u,h,m){m(new a("_transform()"))},p.prototype._write=function(u,h,m){var w=this._transformState;if(w.writecb=m,w.writechunk=u,w.writeencoding=h,!w.transforming){var k=this._readableState;(w.needTransform||k.needReadable||k.length<k.highWaterMark)&&this._read(k.highWaterMark)}},p.prototype._read=function(u){var h=this._transformState;h.writechunk!==null&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},p.prototype._destroy=function(u,h){f.prototype._destroy.call(this,u,function(m){h(m)})};function l(u,h,m){if(h)return u.emit("error",h);if(m!=null&&u.push(m),u._writableState.length)throw new o;if(u._transformState.transforming)throw new d;return u.push(null)}},{"../errors":103,"./_stream_duplex":104,inherits:47}],108:[function(e,i,t){(function(n,a){(function(){i.exports=x;function s(oe){var ue=this;this.next=null,this.entry=null,this.finish=function(){ke(ue,oe)}}var d;x.WritableState=Y;var o={deprecate:e("util-deprecate")},f=e("./internal/streams/stream"),c=e("buffer").Buffer,p=(typeof a<"u"?a:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function v(oe){return c.from(oe)}function l(oe){return c.isBuffer(oe)||oe instanceof p}var u=e("./internal/streams/destroy"),h=e("./internal/streams/state"),m=h.getHighWaterMark,w=e("../errors").codes,k=w.ERR_INVALID_ARG_TYPE,C=w.ERR_METHOD_NOT_IMPLEMENTED,O=w.ERR_MULTIPLE_CALLBACK,P=w.ERR_STREAM_CANNOT_PIPE,M=w.ERR_STREAM_DESTROYED,D=w.ERR_STREAM_NULL_VALUES,$=w.ERR_STREAM_WRITE_AFTER_END,H=w.ERR_UNKNOWN_ENCODING,Z=u.errorOrDestroy;e("inherits")(x,f);function re(){}function Y(oe,ue,ye){d=d||e("./_stream_duplex"),oe=oe||{},typeof ye!="boolean"&&(ye=ue instanceof d),this.objectMode=!!oe.objectMode,ye&&(this.objectMode=this.objectMode||!!oe.writableObjectMode),this.highWaterMark=m(this,oe,"writableHighWaterMark",ye),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var we=oe.decodeStrings===!1;this.decodeStrings=!we,this.defaultEncoding=oe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(le){G(ue,le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=oe.emitClose!==!1,this.autoDestroy=!!oe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}Y.prototype.getBuffer=function(){for(var ue=this.bufferedRequest,ye=[];ue;)ye.push(ue),ue=ue.next;return ye},function(){try{Object.defineProperty(Y.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var N;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(ue){return N.call(this,ue)?!0:this!==x?!1:ue&&ue._writableState instanceof Y}})):N=function(ue){return ue instanceof this};function x(oe){d=d||e("./_stream_duplex");var ue=this instanceof d;if(!ue&&!N.call(x,this))return new x(oe);this._writableState=new Y(oe,this,ue),this.writable=!0,oe&&(typeof oe.write=="function"&&(this._write=oe.write),typeof oe.writev=="function"&&(this._writev=oe.writev),typeof oe.destroy=="function"&&(this._destroy=oe.destroy),typeof oe.final=="function"&&(this._final=oe.final)),f.call(this)}x.prototype.pipe=function(){Z(this,new P)};function b(oe,ue){var ye=new $;Z(oe,ye),n.nextTick(ue,ye)}function _(oe,ue,ye,we){var le;return ye===null?le=new D:typeof ye!="string"&&!ue.objectMode&&(le=new k("chunk",["string","Buffer"],ye)),le?(Z(oe,le),n.nextTick(we,le),!1):!0}x.prototype.write=function(oe,ue,ye){var we=this._writableState,le=!1,ee=!we.objectMode&&l(oe);return ee&&!c.isBuffer(oe)&&(oe=v(oe)),typeof ue=="function"&&(ye=ue,ue=null),ee?ue="buffer":ue||(ue=we.defaultEncoding),typeof ye!="function"&&(ye=re),we.ending?b(this,ye):(ee||_(this,we,oe,ye))&&(we.pendingcb++,le=E(this,we,ee,oe,ue,ye)),le},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var oe=this._writableState;oe.corked&&(oe.corked--,!oe.writing&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&L(this,oe))},x.prototype.setDefaultEncoding=function(ue){if(typeof ue=="string"&&(ue=ue.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ue+"").toLowerCase())>-1))throw new H(ue);return this._writableState.defaultEncoding=ue,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function g(oe,ue,ye){return!oe.objectMode&&oe.decodeStrings!==!1&&typeof ue=="string"&&(ue=c.from(ue,ye)),ue}Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function E(oe,ue,ye,we,le,ee){if(!ye){var te=g(ue,we,le);we!==te&&(ye=!0,le="buffer",we=te)}var Q=ue.objectMode?1:we.length;ue.length+=Q;var B=ue.length<ue.highWaterMark;if(B||(ue.needDrain=!0),ue.writing||ue.corked){var W=ue.lastBufferedRequest;ue.lastBufferedRequest={chunk:we,encoding:le,isBuf:ye,callback:ee,next:null},W?W.next=ue.lastBufferedRequest:ue.bufferedRequest=ue.lastBufferedRequest,ue.bufferedRequestCount+=1}else T(oe,ue,!1,Q,we,le,ee);return B}function T(oe,ue,ye,we,le,ee,te){ue.writelen=we,ue.writecb=te,ue.writing=!0,ue.sync=!0,ue.destroyed?ue.onwrite(new M("write")):ye?oe._writev(le,ue.onwrite):oe._write(le,ee,ue.onwrite),ue.sync=!1}function A(oe,ue,ye,we,le){--ue.pendingcb,ye?(n.nextTick(le,we),n.nextTick(me,oe,ue),oe._writableState.errorEmitted=!0,Z(oe,we)):(le(we),oe._writableState.errorEmitted=!0,Z(oe,we),me(oe,ue))}function J(oe){oe.writing=!1,oe.writecb=null,oe.length-=oe.writelen,oe.writelen=0}function G(oe,ue){var ye=oe._writableState,we=ye.sync,le=ye.writecb;if(typeof le!="function")throw new O;if(J(ye),ue)A(oe,ye,we,ue,le);else{var ee=z(ye)||oe.destroyed;!ee&&!ye.corked&&!ye.bufferProcessing&&ye.bufferedRequest&&L(oe,ye),we?n.nextTick(I,oe,ye,ee,le):I(oe,ye,ee,le)}}function I(oe,ue,ye,we){ye||V(oe,ue),ue.pendingcb--,we(),me(oe,ue)}function V(oe,ue){ue.length===0&&ue.needDrain&&(ue.needDrain=!1,oe.emit("drain"))}function L(oe,ue){ue.bufferProcessing=!0;var ye=ue.bufferedRequest;if(oe._writev&&ye&&ye.next){var we=ue.bufferedRequestCount,le=new Array(we),ee=ue.corkedRequestsFree;ee.entry=ye;for(var te=0,Q=!0;ye;)le[te]=ye,ye.isBuf||(Q=!1),ye=ye.next,te+=1;le.allBuffers=Q,T(oe,ue,!0,ue.length,le,"",ee.finish),ue.pendingcb++,ue.lastBufferedRequest=null,ee.next?(ue.corkedRequestsFree=ee.next,ee.next=null):ue.corkedRequestsFree=new s(ue),ue.bufferedRequestCount=0}else{for(;ye;){var B=ye.chunk,W=ye.encoding,X=ye.callback,ce=ue.objectMode?1:B.length;if(T(oe,ue,!1,ce,B,W,X),ye=ye.next,ue.bufferedRequestCount--,ue.writing)break}ye===null&&(ue.lastBufferedRequest=null)}ue.bufferedRequest=ye,ue.bufferProcessing=!1}x.prototype._write=function(oe,ue,ye){ye(new C("_write()"))},x.prototype._writev=null,x.prototype.end=function(oe,ue,ye){var we=this._writableState;return typeof oe=="function"?(ye=oe,oe=null,ue=null):typeof ue=="function"&&(ye=ue,ue=null),oe!=null&&this.write(oe,ue),we.corked&&(we.corked=1,this.uncork()),we.ending||Se(this,we,ye),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function z(oe){return oe.ending&&oe.length===0&&oe.bufferedRequest===null&&!oe.finished&&!oe.writing}function ie(oe,ue){oe._final(function(ye){ue.pendingcb--,ye&&Z(oe,ye),ue.prefinished=!0,oe.emit("prefinish"),me(oe,ue)})}function se(oe,ue){!ue.prefinished&&!ue.finalCalled&&(typeof oe._final=="function"&&!ue.destroyed?(ue.pendingcb++,ue.finalCalled=!0,n.nextTick(ie,oe,ue)):(ue.prefinished=!0,oe.emit("prefinish")))}function me(oe,ue){var ye=z(ue);if(ye&&(se(oe,ue),ue.pendingcb===0&&(ue.finished=!0,oe.emit("finish"),ue.autoDestroy))){var we=oe._readableState;(!we||we.autoDestroy&&we.endEmitted)&&oe.destroy()}return ye}function Se(oe,ue,ye){ue.ending=!0,me(oe,ue),ye&&(ue.finished?n.nextTick(ye):oe.once("finish",ye)),ue.ended=!0,oe.writable=!1}function ke(oe,ue,ye){var we=oe.entry;for(oe.entry=null;we;){var le=we.callback;ue.pendingcb--,le(ye),we=we.next}ue.corkedRequestsFree.next=oe}Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(ue){this._writableState&&(this._writableState.destroyed=ue)}}),x.prototype.destroy=u.destroy,x.prototype._undestroy=u.undestroy,x.prototype._destroy=function(oe,ue){ue(oe)}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":103,"./_stream_duplex":104,"./internal/streams/destroy":111,"./internal/streams/state":115,"./internal/streams/stream":116,_process:254,buffer:171,inherits:47,"util-deprecate":122}],109:[function(e,i,t){(function(n){(function(){var a;function s($,H,Z){return H=d(H),H in $?Object.defineProperty($,H,{value:Z,enumerable:!0,configurable:!0,writable:!0}):$[H]=Z,$}function d($){var H=o($,"string");return typeof H=="symbol"?H:String(H)}function o($,H){if(typeof $!="object"||$===null)return $;var Z=$[Symbol.toPrimitive];if(Z!==void 0){var re=Z.call($,H||"default");if(typeof re!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)($)}var f=e("./end-of-stream"),c=Symbol("lastResolve"),p=Symbol("lastReject"),v=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),h=Symbol("handlePromise"),m=Symbol("stream");function w($,H){return{value:$,done:H}}function k($){var H=$[c];if(H!==null){var Z=$[m].read();Z!==null&&($[u]=null,$[c]=null,$[p]=null,H(w(Z,!1)))}}function C($){n.nextTick(k,$)}function O($,H){return function(Z,re){$.then(function(){if(H[l]){Z(w(void 0,!0));return}H[h](Z,re)},re)}}var P=Object.getPrototypeOf(function(){}),M=Object.setPrototypeOf((a={get stream(){return this[m]},next:function(){var H=this,Z=this[v];if(Z!==null)return Promise.reject(Z);if(this[l])return Promise.resolve(w(void 0,!0));if(this[m].destroyed)return new Promise(function(x,b){n.nextTick(function(){H[v]?b(H[v]):x(w(void 0,!0))})});var re=this[u],Y;if(re)Y=new Promise(O(re,this));else{var N=this[m].read();if(N!==null)return Promise.resolve(w(N,!1));Y=new Promise(this[h])}return this[u]=Y,Y}},s(a,Symbol.asyncIterator,function(){return this}),s(a,"return",function(){var H=this;return new Promise(function(Z,re){H[m].destroy(null,function(Y){if(Y){re(Y);return}Z(w(void 0,!0))})})}),a),P),D=function(H){var Z,re=Object.create(M,(Z={},s(Z,m,{value:H,writable:!0}),s(Z,c,{value:null,writable:!0}),s(Z,p,{value:null,writable:!0}),s(Z,v,{value:null,writable:!0}),s(Z,l,{value:H._readableState.endEmitted,writable:!0}),s(Z,h,{value:function(N,x){var b=re[m].read();b?(re[u]=null,re[c]=null,re[p]=null,N(w(b,!1))):(re[c]=N,re[p]=x)},writable:!0}),Z));return re[u]=null,f(H,function(Y){if(Y&&Y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var N=re[p];N!==null&&(re[u]=null,re[c]=null,re[p]=null,N(Y)),re[v]=Y;return}var x=re[c];x!==null&&(re[u]=null,re[c]=null,re[p]=null,x(w(void 0,!0))),re[l]=!0}),H.on("readable",C.bind(null,re)),re};i.exports=D}).call(this)}).call(this,e("_process"))},{"./end-of-stream":112,_process:254}],110:[function(e,i,t){function n(k,C){var O=Object.keys(k);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(k);C&&(P=P.filter(function(M){return Object.getOwnPropertyDescriptor(k,M).enumerable})),O.push.apply(O,P)}return O}function a(k){for(var C=1;C<arguments.length;C++){var O=arguments[C]!=null?arguments[C]:{};C%2?n(Object(O),!0).forEach(function(P){s(k,P,O[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(O)):n(Object(O)).forEach(function(P){Object.defineProperty(k,P,Object.getOwnPropertyDescriptor(O,P))})}return k}function s(k,C,O){return C=c(C),C in k?Object.defineProperty(k,C,{value:O,enumerable:!0,configurable:!0,writable:!0}):k[C]=O,k}function d(k,C){if(!(k instanceof C))throw new TypeError("Cannot call a class as a function")}function o(k,C){for(var O=0;O<C.length;O++){var P=C[O];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(k,c(P.key),P)}}function f(k,C,O){return C&&o(k.prototype,C),O&&o(k,O),Object.defineProperty(k,"prototype",{writable:!1}),k}function c(k){var C=p(k,"string");return typeof C=="symbol"?C:String(C)}function p(k,C){if(typeof k!="object"||k===null)return k;var O=k[Symbol.toPrimitive];if(O!==void 0){var P=O.call(k,C||"default");if(typeof P!="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(k)}var v=e("buffer"),l=v.Buffer,u=e("util"),h=u.inspect,m=h&&h.custom||"inspect";function w(k,C,O){l.prototype.copy.call(k,C,O)}i.exports=function(){function k(){d(this,k),this.head=null,this.tail=null,this.length=0}return f(k,[{key:"push",value:function(O){var P={data:O,next:null};this.length>0?this.tail.next=P:this.head=P,this.tail=P,++this.length}},{key:"unshift",value:function(O){var P={data:O,next:this.head};this.length===0&&(this.tail=P),this.head=P,++this.length}},{key:"shift",value:function(){if(this.length!==0){var O=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,O}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(O){if(this.length===0)return"";for(var P=this.head,M=""+P.data;P=P.next;)M+=O+P.data;return M}},{key:"concat",value:function(O){if(this.length===0)return l.alloc(0);for(var P=l.allocUnsafe(O>>>0),M=this.head,D=0;M;)w(M.data,P,D),D+=M.data.length,M=M.next;return P}},{key:"consume",value:function(O,P){var M;return O<this.head.data.length?(M=this.head.data.slice(0,O),this.head.data=this.head.data.slice(O)):O===this.head.data.length?M=this.shift():M=P?this._getString(O):this._getBuffer(O),M}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(O){var P=this.head,M=1,D=P.data;for(O-=D.length;P=P.next;){var $=P.data,H=O>$.length?$.length:O;if(H===$.length?D+=$:D+=$.slice(0,O),O-=H,O===0){H===$.length?(++M,P.next?this.head=P.next:this.head=this.tail=null):(this.head=P,P.data=$.slice(H));break}++M}return this.length-=M,D}},{key:"_getBuffer",value:function(O){var P=l.allocUnsafe(O),M=this.head,D=1;for(M.data.copy(P),O-=M.data.length;M=M.next;){var $=M.data,H=O>$.length?$.length:O;if($.copy(P,P.length-O,0,H),O-=H,O===0){H===$.length?(++D,M.next?this.head=M.next:this.head=this.tail=null):(this.head=M,M.data=$.slice(H));break}++D}return this.length-=D,P}},{key:m,value:function(O,P){return h(this,a(a({},P),{},{depth:0,customInspect:!1}))}}]),k}()},{buffer:171,util:142}],111:[function(e,i,t){(function(n){(function(){function a(p,v){var l=this,u=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return u||h?(v?v(p):p&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(f,this,p)):n.nextTick(f,this,p)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(p||null,function(m){!v&&m?l._writableState?l._writableState.errorEmitted?n.nextTick(d,l):(l._writableState.errorEmitted=!0,n.nextTick(s,l,m)):n.nextTick(s,l,m):v?(n.nextTick(d,l),v(m)):n.nextTick(d,l)}),this)}function s(p,v){f(p,v),d(p)}function d(p){p._writableState&&!p._writableState.emitClose||p._readableState&&!p._readableState.emitClose||p.emit("close")}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function f(p,v){p.emit("error",v)}function c(p,v){var l=p._readableState,u=p._writableState;l&&l.autoDestroy||u&&u.autoDestroy?p.destroy(v):p.emit("error",v)}i.exports={destroy:a,undestroy:o,errorOrDestroy:c}}).call(this)}).call(this,e("_process"))},{_process:254}],112:[function(e,i,t){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function a(f){var c=!1;return function(){if(!c){c=!0;for(var p=arguments.length,v=new Array(p),l=0;l<p;l++)v[l]=arguments[l];f.apply(this,v)}}}function s(){}function d(f){return f.setHeader&&typeof f.abort=="function"}function o(f,c,p){if(typeof c=="function")return o(f,null,c);c||(c={}),p=a(p||s);var v=c.readable||c.readable!==!1&&f.readable,l=c.writable||c.writable!==!1&&f.writable,u=function(){f.writable||m()},h=f._writableState&&f._writableState.finished,m=function(){l=!1,h=!0,v||p.call(f)},w=f._readableState&&f._readableState.endEmitted,k=function(){v=!1,w=!0,l||p.call(f)},C=function(D){p.call(f,D)},O=function(){var D;if(v&&!w)return(!f._readableState||!f._readableState.ended)&&(D=new n),p.call(f,D);if(l&&!h)return(!f._writableState||!f._writableState.ended)&&(D=new n),p.call(f,D)},P=function(){f.req.on("finish",m)};return d(f)?(f.on("complete",m),f.on("abort",O),f.req?P():f.on("request",P)):l&&!f._writableState&&(f.on("end",u),f.on("close",u)),f.on("end",k),f.on("finish",m),c.error!==!1&&f.on("error",C),f.on("close",O),function(){f.removeListener("complete",m),f.removeListener("abort",O),f.removeListener("request",P),f.req&&f.req.removeListener("finish",m),f.removeListener("end",u),f.removeListener("close",u),f.removeListener("finish",m),f.removeListener("end",k),f.removeListener("error",C),f.removeListener("close",O)}}i.exports=o},{"../../../errors":103}],113:[function(e,i,t){i.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],114:[function(e,i,t){var n;function a(m){var w=!1;return function(){w||(w=!0,m.apply(void 0,arguments))}}var s=e("../../../errors").codes,d=s.ERR_MISSING_ARGS,o=s.ERR_STREAM_DESTROYED;function f(m){if(m)throw m}function c(m){return m.setHeader&&typeof m.abort=="function"}function p(m,w,k,C){C=a(C);var O=!1;m.on("close",function(){O=!0}),n===void 0&&(n=e("./end-of-stream")),n(m,{readable:w,writable:k},function(M){if(M)return C(M);O=!0,C()});var P=!1;return function(M){if(!O&&!P){if(P=!0,c(m))return m.abort();if(typeof m.destroy=="function")return m.destroy();C(M||new o("pipe"))}}}function v(m){m()}function l(m,w){return m.pipe(w)}function u(m){return!m.length||typeof m[m.length-1]!="function"?f:m.pop()}function h(){for(var m=arguments.length,w=new Array(m),k=0;k<m;k++)w[k]=arguments[k];var C=u(w);if(Array.isArray(w[0])&&(w=w[0]),w.length<2)throw new d("streams");var O,P=w.map(function(M,D){var $=D<w.length-1,H=D>0;return p(M,$,H,function(Z){O||(O=Z),Z&&P.forEach(v),!$&&(P.forEach(v),C(O))})});return w.reduce(l)}i.exports=h},{"../../../errors":103,"./end-of-stream":112}],115:[function(e,i,t){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function a(d,o,f){return d.highWaterMark!=null?d.highWaterMark:o?d[f]:null}function s(d,o,f,c){var p=a(o,c,f);if(p!=null){if(!(isFinite(p)&&Math.floor(p)===p)||p<0){var v=c?f:"highWaterMark";throw new n(v,p)}return Math.floor(p)}return d.objectMode?16:16*1024}i.exports={getHighWaterMark:s}},{"../../../errors":103}],116:[function(e,i,t){i.exports=e("events").EventEmitter},{events:207}],117:[function(e,i,t){t=i.exports=e("./lib/_stream_readable.js"),t.Stream=t,t.Readable=t,t.Writable=e("./lib/_stream_writable.js"),t.Duplex=e("./lib/_stream_duplex.js"),t.Transform=e("./lib/_stream_transform.js"),t.PassThrough=e("./lib/_stream_passthrough.js"),t.finished=e("./lib/internal/streams/end-of-stream.js"),t.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":104,"./lib/_stream_passthrough.js":105,"./lib/_stream_readable.js":106,"./lib/_stream_transform.js":107,"./lib/_stream_writable.js":108,"./lib/internal/streams/end-of-stream.js":112,"./lib/internal/streams/pipeline.js":114}],118:[function(e,i,t){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var n=e("buffer"),a=n.Buffer;function s(o,f){for(var c in o)f[c]=o[c]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?i.exports=n:(s(n,t),t.Buffer=d);function d(o,f,c){return a(o,f,c)}d.prototype=Object.create(a.prototype),s(a,d),d.from=function(o,f,c){if(typeof o=="number")throw new TypeError("Argument must not be a number");return a(o,f,c)},d.alloc=function(o,f,c){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=a(o);return f!==void 0?typeof c=="string"?p.fill(f,c):p.fill(f):p.fill(0),p},d.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return a(o)},d.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}},{buffer:171}],119:[function(e,i,t){(function(n){(function(){t=i.exports=B;var a;typeof n=="object"&&n.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?a=function(){var ne=Array.prototype.slice.call(arguments,0);ne.unshift("SEMVER"),console.log.apply(console,ne)}:a=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var s=256,d=Number.MAX_SAFE_INTEGER||9007199254740991,o=16,f=t.re=[],c=t.src=[],p=0,v=p++;c[v]="0|[1-9]\\d*";var l=p++;c[l]="[0-9]+";var u=p++;c[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var h=p++;c[h]="("+c[v]+")\\.("+c[v]+")\\.("+c[v]+")";var m=p++;c[m]="("+c[l]+")\\.("+c[l]+")\\.("+c[l]+")";var w=p++;c[w]="(?:"+c[v]+"|"+c[u]+")";var k=p++;c[k]="(?:"+c[l]+"|"+c[u]+")";var C=p++;c[C]="(?:-("+c[w]+"(?:\\."+c[w]+")*))";var O=p++;c[O]="(?:-?("+c[k]+"(?:\\."+c[k]+")*))";var P=p++;c[P]="[0-9A-Za-z-]+";var M=p++;c[M]="(?:\\+("+c[P]+"(?:\\."+c[P]+")*))";var D=p++,$="v?"+c[h]+c[C]+"?"+c[M]+"?";c[D]="^"+$+"$";var H="[v=\\s]*"+c[m]+c[O]+"?"+c[M]+"?",Z=p++;c[Z]="^"+H+"$";var re=p++;c[re]="((?:<|>)?=?)";var Y=p++;c[Y]=c[l]+"|x|X|\\*";var N=p++;c[N]=c[v]+"|x|X|\\*";var x=p++;c[x]="[v=\\s]*("+c[N]+")(?:\\.("+c[N]+")(?:\\.("+c[N]+")(?:"+c[C]+")?"+c[M]+"?)?)?";var b=p++;c[b]="[v=\\s]*("+c[Y]+")(?:\\.("+c[Y]+")(?:\\.("+c[Y]+")(?:"+c[O]+")?"+c[M]+"?)?)?";var _=p++;c[_]="^"+c[re]+"\\s*"+c[x]+"$";var g=p++;c[g]="^"+c[re]+"\\s*"+c[b]+"$";var E=p++;c[E]="(?:^|[^\\d])(\\d{1,"+o+"})(?:\\.(\\d{1,"+o+"}))?(?:\\.(\\d{1,"+o+"}))?(?:$|[^\\d])";var T=p++;c[T]="(?:~>?)";var A=p++;c[A]="(\\s*)"+c[T]+"\\s+",f[A]=new RegExp(c[A],"g");var J="$1~",G=p++;c[G]="^"+c[T]+c[x]+"$";var I=p++;c[I]="^"+c[T]+c[b]+"$";var V=p++;c[V]="(?:\\^)";var L=p++;c[L]="(\\s*)"+c[V]+"\\s+",f[L]=new RegExp(c[L],"g");var z="$1^",ie=p++;c[ie]="^"+c[V]+c[x]+"$";var se=p++;c[se]="^"+c[V]+c[b]+"$";var me=p++;c[me]="^"+c[re]+"\\s*("+H+")$|^$";var Se=p++;c[Se]="^"+c[re]+"\\s*("+$+")$|^$";var ke=p++;c[ke]="(\\s*)"+c[re]+"\\s*("+H+"|"+c[x]+")",f[ke]=new RegExp(c[ke],"g");var oe="$1$2$3",ue=p++;c[ue]="^\\s*("+c[x]+")\\s+-\\s+("+c[x]+")\\s*$";var ye=p++;c[ye]="^\\s*("+c[b]+")\\s+-\\s+("+c[b]+")\\s*$";var we=p++;c[we]="(<|>)?=?\\s*\\*";for(var le=0;le<p;le++)a(le,c[le]),f[le]||(f[le]=new RegExp(c[le]));t.parse=ee;function ee(ne,pe){if((!pe||typeof pe!="object")&&(pe={loose:!!pe,includePrerelease:!1}),ne instanceof B)return ne;if(typeof ne!="string"||ne.length>s)return null;var be=pe.loose?f[Z]:f[D];if(!be.test(ne))return null;try{return new B(ne,pe)}catch{return null}}t.valid=te;function te(ne,pe){var be=ee(ne,pe);return be?be.version:null}t.clean=Q;function Q(ne,pe){var be=ee(ne.trim().replace(/^[=v]+/,""),pe);return be?be.version:null}t.SemVer=B;function B(ne,pe){if((!pe||typeof pe!="object")&&(pe={loose:!!pe,includePrerelease:!1}),ne instanceof B){if(ne.loose===pe.loose)return ne;ne=ne.version}else if(typeof ne!="string")throw new TypeError("Invalid Version: "+ne);if(ne.length>s)throw new TypeError("version is longer than "+s+" characters");if(!(this instanceof B))return new B(ne,pe);a("SemVer",ne,pe),this.options=pe,this.loose=!!pe.loose;var be=ne.trim().match(pe.loose?f[Z]:f[D]);if(!be)throw new TypeError("Invalid Version: "+ne);if(this.raw=ne,this.major=+be[1],this.minor=+be[2],this.patch=+be[3],this.major>d||this.major<0)throw new TypeError("Invalid major version");if(this.minor>d||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>d||this.patch<0)throw new TypeError("Invalid patch version");be[4]?this.prerelease=be[4].split(".").map(function(Ee){if(/^[0-9]+$/.test(Ee)){var Te=+Ee;if(Te>=0&&Te<d)return Te}return Ee}):this.prerelease=[],this.build=be[5]?be[5].split("."):[],this.format()}B.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},B.prototype.toString=function(){return this.version},B.prototype.compare=function(ne){return a("SemVer.compare",this.version,this.options,ne),ne instanceof B||(ne=new B(ne,this.options)),this.compareMain(ne)||this.comparePre(ne)},B.prototype.compareMain=function(ne){return ne instanceof B||(ne=new B(ne,this.options)),he(this.major,ne.major)||he(this.minor,ne.minor)||he(this.patch,ne.patch)},B.prototype.comparePre=function(ne){if(ne instanceof B||(ne=new B(ne,this.options)),this.prerelease.length&&!ne.prerelease.length)return-1;if(!this.prerelease.length&&ne.prerelease.length)return 1;if(!this.prerelease.length&&!ne.prerelease.length)return 0;var pe=0;do{var be=this.prerelease[pe],Ee=ne.prerelease[pe];if(a("prerelease compare",pe,be,Ee),be===void 0&&Ee===void 0)return 0;if(Ee===void 0)return 1;if(be===void 0)return-1;if(be===Ee)continue;return he(be,Ee)}while(++pe)},B.prototype.inc=function(ne,pe){switch(ne){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",pe);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",pe);break;case"prepatch":this.prerelease.length=0,this.inc("patch",pe),this.inc("pre",pe);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",pe),this.inc("pre",pe);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var be=this.prerelease.length;--be>=0;)typeof this.prerelease[be]=="number"&&(this.prerelease[be]++,be=-2);be===-1&&this.prerelease.push(0)}pe&&(this.prerelease[0]===pe?isNaN(this.prerelease[1])&&(this.prerelease=[pe,0]):this.prerelease=[pe,0]);break;default:throw new Error("invalid increment argument: "+ne)}return this.format(),this.raw=this.version,this},t.inc=W;function W(ne,pe,be,Ee){typeof be=="string"&&(Ee=be,be=void 0);try{return new B(ne,be).inc(pe,Ee).version}catch{return null}}t.diff=X;function X(ne,pe){if(ae(ne,pe))return null;var be=ee(ne),Ee=ee(pe),Te="";if(be.prerelease.length||Ee.prerelease.length){Te="pre";var Oe="prerelease"}for(var Ie in be)if((Ie==="major"||Ie==="minor"||Ie==="patch")&&be[Ie]!==Ee[Ie])return Te+Ie;return Oe}t.compareIdentifiers=he;var ce=/^[0-9]+$/;function he(ne,pe){var be=ce.test(ne),Ee=ce.test(pe);return be&&Ee&&(ne=+ne,pe=+pe),ne===pe?0:be&&!Ee?-1:Ee&&!be?1:ne<pe?-1:1}t.rcompareIdentifiers=ge;function ge(ne,pe){return he(pe,ne)}t.major=fe;function fe(ne,pe){return new B(ne,pe).major}t.minor=y;function y(ne,pe){return new B(ne,pe).minor}t.patch=U;function U(ne,pe){return new B(ne,pe).patch}t.compare=q;function q(ne,pe,be){return new B(ne,be).compare(new B(pe,be))}t.compareLoose=de;function de(ne,pe){return q(ne,pe,!0)}t.rcompare=j;function j(ne,pe,be){return q(pe,ne,be)}t.sort=S;function S(ne,pe){return ne.sort(function(be,Ee){return t.compare(be,Ee,pe)})}t.rsort=F;function F(ne,pe){return ne.sort(function(be,Ee){return t.rcompare(be,Ee,pe)})}t.gt=K;function K(ne,pe,be){return q(ne,pe,be)>0}t.lt=ve;function ve(ne,pe,be){return q(ne,pe,be)<0}t.eq=ae;function ae(ne,pe,be){return q(ne,pe,be)===0}t.neq=_e;function _e(ne,pe,be){return q(ne,pe,be)!==0}t.gte=Ne;function Ne(ne,pe,be){return q(ne,pe,be)>=0}t.lte=Pe;function Pe(ne,pe,be){return q(ne,pe,be)<=0}t.cmp=Ue;function Ue(ne,pe,be,Ee){switch(pe){case"===":return typeof ne=="object"&&(ne=ne.version),typeof be=="object"&&(be=be.version),ne===be;case"!==":return typeof ne=="object"&&(ne=ne.version),typeof be=="object"&&(be=be.version),ne!==be;case"":case"=":case"==":return ae(ne,be,Ee);case"!=":return _e(ne,be,Ee);case">":return K(ne,be,Ee);case">=":return Ne(ne,be,Ee);case"<":return ve(ne,be,Ee);case"<=":return Pe(ne,be,Ee);default:throw new TypeError("Invalid operator: "+pe)}}t.Comparator=xe;function xe(ne,pe){if((!pe||typeof pe!="object")&&(pe={loose:!!pe,includePrerelease:!1}),ne instanceof xe){if(ne.loose===!!pe.loose)return ne;ne=ne.value}if(!(this instanceof xe))return new xe(ne,pe);a("comparator",ne,pe),this.options=pe,this.loose=!!pe.loose,this.parse(ne),this.semver===Ae?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}var Ae={};xe.prototype.parse=function(ne){var pe=this.options.loose?f[me]:f[Se],be=ne.match(pe);if(!be)throw new TypeError("Invalid comparator: "+ne);this.operator=be[1],this.operator==="="&&(this.operator=""),be[2]?this.semver=new B(be[2],this.options.loose):this.semver=Ae},xe.prototype.toString=function(){return this.value},xe.prototype.test=function(ne){return a("Comparator.test",ne,this.options.loose),this.semver===Ae?!0:(typeof ne=="string"&&(ne=new B(ne,this.options)),Ue(ne,this.operator,this.semver,this.options))},xe.prototype.intersects=function(ne,pe){if(!(ne instanceof xe))throw new TypeError("a Comparator is required");(!pe||typeof pe!="object")&&(pe={loose:!!pe,includePrerelease:!1});var be;if(this.operator==="")return be=new Re(ne.value,pe),ze(this.value,be,pe);if(ne.operator==="")return be=new Re(this.value,pe),ze(ne.semver,be,pe);var Ee=(this.operator===">="||this.operator===">")&&(ne.operator===">="||ne.operator===">"),Te=(this.operator==="<="||this.operator==="<")&&(ne.operator==="<="||ne.operator==="<"),Oe=this.semver.version===ne.semver.version,Ie=(this.operator===">="||this.operator==="<=")&&(ne.operator===">="||ne.operator==="<="),Ce=Ue(this.semver,"<",ne.semver,pe)&&(this.operator===">="||this.operator===">")&&(ne.operator==="<="||ne.operator==="<"),We=Ue(this.semver,">",ne.semver,pe)&&(this.operator==="<="||this.operator==="<")&&(ne.operator===">="||ne.operator===">");return Ee||Te||Oe&&Ie||Ce||We},t.Range=Re;function Re(ne,pe){if((!pe||typeof pe!="object")&&(pe={loose:!!pe,includePrerelease:!1}),ne instanceof Re)return ne.loose===!!pe.loose&&ne.includePrerelease===!!pe.includePrerelease?ne:new Re(ne.raw,pe);if(ne instanceof xe)return new Re(ne.value,pe);if(!(this instanceof Re))return new Re(ne,pe);if(this.options=pe,this.loose=!!pe.loose,this.includePrerelease=!!pe.includePrerelease,this.raw=ne,this.set=ne.split(/\s*\|\|\s*/).map(function(be){return this.parseRange(be.trim())},this).filter(function(be){return be.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+ne);this.format()}Re.prototype.format=function(){return this.range=this.set.map(function(ne){return ne.join(" ").trim()}).join("||").trim(),this.range},Re.prototype.toString=function(){return this.range},Re.prototype.parseRange=function(ne){var pe=this.options.loose;ne=ne.trim();var be=pe?f[ye]:f[ue];ne=ne.replace(be,Je),a("hyphen replace",ne),ne=ne.replace(f[ke],oe),a("comparator trim",ne,f[ke]),ne=ne.replace(f[A],J),ne=ne.replace(f[L],z),ne=ne.split(/\s+/).join(" ");var Ee=pe?f[me]:f[Se],Te=ne.split(" ").map(function(Oe){return De(Oe,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(Te=Te.filter(function(Oe){return!!Oe.match(Ee)})),Te=Te.map(function(Oe){return new xe(Oe,this.options)},this),Te},Re.prototype.intersects=function(ne,pe){if(!(ne instanceof Re))throw new TypeError("a Range is required");return this.set.some(function(be){return be.every(function(Ee){return ne.set.some(function(Te){return Te.every(function(Oe){return Ee.intersects(Oe,pe)})})})})},t.toComparators=$e;function $e(ne,pe){return new Re(ne,pe).set.map(function(be){return be.map(function(Ee){return Ee.value}).join(" ").trim().split(" ")})}function De(ne,pe){return a("comp",ne,pe),ne=qe(ne,pe),a("caret",ne),ne=He(ne,pe),a("tildes",ne),ne=Fe(ne,pe),a("xrange",ne),ne=Xe(ne,pe),a("stars",ne),ne}function Be(ne){return!ne||ne.toLowerCase()==="x"||ne==="*"}function He(ne,pe){return ne.trim().split(/\s+/).map(function(be){return Me(be,pe)}).join(" ")}function Me(ne,pe){var be=pe.loose?f[I]:f[G];return ne.replace(be,function(Ee,Te,Oe,Ie,Ce){a("tilde",ne,Ee,Te,Oe,Ie,Ce);var We;return Be(Te)?We="":Be(Oe)?We=">="+Te+".0.0 <"+(+Te+1)+".0.0":Be(Ie)?We=">="+Te+"."+Oe+".0 <"+Te+"."+(+Oe+1)+".0":Ce?(a("replaceTilde pr",Ce),We=">="+Te+"."+Oe+"."+Ie+"-"+Ce+" <"+Te+"."+(+Oe+1)+".0"):We=">="+Te+"."+Oe+"."+Ie+" <"+Te+"."+(+Oe+1)+".0",a("tilde return",We),We})}function qe(ne,pe){return ne.trim().split(/\s+/).map(function(be){return Qe(be,pe)}).join(" ")}function Qe(ne,pe){a("caret",ne,pe);var be=pe.loose?f[se]:f[ie];return ne.replace(be,function(Ee,Te,Oe,Ie,Ce){a("caret",ne,Ee,Te,Oe,Ie,Ce);var We;return Be(Te)?We="":Be(Oe)?We=">="+Te+".0.0 <"+(+Te+1)+".0.0":Be(Ie)?Te==="0"?We=">="+Te+"."+Oe+".0 <"+Te+"."+(+Oe+1)+".0":We=">="+Te+"."+Oe+".0 <"+(+Te+1)+".0.0":Ce?(a("replaceCaret pr",Ce),Te==="0"?Oe==="0"?We=">="+Te+"."+Oe+"."+Ie+"-"+Ce+" <"+Te+"."+Oe+"."+(+Ie+1):We=">="+Te+"."+Oe+"."+Ie+"-"+Ce+" <"+Te+"."+(+Oe+1)+".0":We=">="+Te+"."+Oe+"."+Ie+"-"+Ce+" <"+(+Te+1)+".0.0"):(a("no pr"),Te==="0"?Oe==="0"?We=">="+Te+"."+Oe+"."+Ie+" <"+Te+"."+Oe+"."+(+Ie+1):We=">="+Te+"."+Oe+"."+Ie+" <"+Te+"."+(+Oe+1)+".0":We=">="+Te+"."+Oe+"."+Ie+" <"+(+Te+1)+".0.0"),a("caret return",We),We})}function Fe(ne,pe){return a("replaceXRanges",ne,pe),ne.split(/\s+/).map(function(be){return Ye(be,pe)}).join(" ")}function Ye(ne,pe){ne=ne.trim();var be=pe.loose?f[g]:f[_];return ne.replace(be,function(Ee,Te,Oe,Ie,Ce,We){a("xRange",ne,Ee,Te,Oe,Ie,Ce,We);var st=Be(Oe),at=st||Be(Ie),dt=at||Be(Ce),ot=dt;return Te==="="&&ot&&(Te=""),st?Te===">"||Te==="<"?Ee="<0.0.0":Ee="*":Te&&ot?(at&&(Ie=0),Ce=0,Te===">"?(Te=">=",at?(Oe=+Oe+1,Ie=0,Ce=0):(Ie=+Ie+1,Ce=0)):Te==="<="&&(Te="<",at?Oe=+Oe+1:Ie=+Ie+1),Ee=Te+Oe+"."+Ie+"."+Ce):at?Ee=">="+Oe+".0.0 <"+(+Oe+1)+".0.0":dt&&(Ee=">="+Oe+"."+Ie+".0 <"+Oe+"."+(+Ie+1)+".0"),a("xRange return",Ee),Ee})}function Xe(ne,pe){return a("replaceStars",ne,pe),ne.trim().replace(f[we],"")}function Je(ne,pe,be,Ee,Te,Oe,Ie,Ce,We,st,at,dt,ot){return Be(be)?pe="":Be(Ee)?pe=">="+be+".0.0":Be(Te)?pe=">="+be+"."+Ee+".0":pe=">="+pe,Be(We)?Ce="":Be(st)?Ce="<"+(+We+1)+".0.0":Be(at)?Ce="<"+We+"."+(+st+1)+".0":dt?Ce="<="+We+"."+st+"."+at+"-"+dt:Ce="<="+Ce,(pe+" "+Ce).trim()}Re.prototype.test=function(ne){if(!ne)return!1;typeof ne=="string"&&(ne=new B(ne,this.options));for(var pe=0;pe<this.set.length;pe++)if(je(this.set[pe],ne,this.options))return!0;return!1};function je(ne,pe,be){for(var Ee=0;Ee<ne.length;Ee++)if(!ne[Ee].test(pe))return!1;if(pe.prerelease.length&&!be.includePrerelease){for(Ee=0;Ee<ne.length;Ee++)if(a(ne[Ee].semver),ne[Ee].semver!==Ae&&ne[Ee].semver.prerelease.length>0){var Te=ne[Ee].semver;if(Te.major===pe.major&&Te.minor===pe.minor&&Te.patch===pe.patch)return!0}return!1}return!0}t.satisfies=ze;function ze(ne,pe,be){try{pe=new Re(pe,be)}catch{return!1}return pe.test(ne)}t.maxSatisfying=Ve;function Ve(ne,pe,be){var Ee=null,Te=null;try{var Oe=new Re(pe,be)}catch{return null}return ne.forEach(function(Ie){Oe.test(Ie)&&(!Ee||Te.compare(Ie)===-1)&&(Ee=Ie,Te=new B(Ee,be))}),Ee}t.minSatisfying=et;function et(ne,pe,be){var Ee=null,Te=null;try{var Oe=new Re(pe,be)}catch{return null}return ne.forEach(function(Ie){Oe.test(Ie)&&(!Ee||Te.compare(Ie)===1)&&(Ee=Ie,Te=new B(Ee,be))}),Ee}t.minVersion=tt;function tt(ne,pe){ne=new Re(ne,pe);var be=new B("0.0.0");if(ne.test(be)||(be=new B("0.0.0-0"),ne.test(be)))return be;be=null;for(var Ee=0;Ee<ne.set.length;++Ee){var Te=ne.set[Ee];Te.forEach(function(Oe){var Ie=new B(Oe.semver.version);switch(Oe.operator){case">":Ie.prerelease.length===0?Ie.patch++:Ie.prerelease.push(0),Ie.raw=Ie.format();case"":case">=":(!be||K(be,Ie))&&(be=Ie);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+Oe.operator)}})}return be&&ne.test(be)?be:null}t.validRange=Ge;function Ge(ne,pe){try{return new Re(ne,pe).range||"*"}catch{return null}}t.ltr=rt;function rt(ne,pe,be){return Le(ne,pe,"<",be)}t.gtr=it;function it(ne,pe,be){return Le(ne,pe,">",be)}t.outside=Le;function Le(ne,pe,be,Ee){ne=new B(ne,Ee),pe=new Re(pe,Ee);var Te,Oe,Ie,Ce,We;switch(be){case">":Te=K,Oe=Pe,Ie=ve,Ce=">",We=">=";break;case"<":Te=ve,Oe=Ne,Ie=K,Ce="<",We="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ze(ne,pe,Ee))return!1;for(var st=0;st<pe.set.length;++st){var at=pe.set[st],dt=null,ot=null;if(at.forEach(function(ct){ct.semver===Ae&&(ct=new xe(">=0.0.0")),dt=dt||ct,ot=ot||ct,Te(ct.semver,dt.semver,Ee)?dt=ct:Ie(ct.semver,ot.semver,Ee)&&(ot=ct)}),dt.operator===Ce||dt.operator===We||(!ot.operator||ot.operator===Ce)&&Oe(ne,ot.semver))return!1;if(ot.operator===We&&Ie(ne,ot.semver))return!1}return!0}t.prerelease=nt;function nt(ne,pe){var be=ee(ne,pe);return be&&be.prerelease.length?be.prerelease:null}t.intersects=Ke;function Ke(ne,pe,be){return ne=new Re(ne,be),pe=new Re(pe,be),ne.intersects(pe)}t.coerce=Ze;function Ze(ne){if(ne instanceof B)return ne;if(typeof ne!="string")return null;var pe=ne.match(f[E]);return pe==null?null:ee(pe[1]+"."+(pe[2]||"0")+"."+(pe[3]||"0"))}}).call(this)}).call(this,e("_process"))},{_process:254}],120:[function(e,i,t){/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */const n=e("debug")("simple-peer"),a=e("get-browser-rtc"),s=e("randombytes"),d=e("readable-stream"),o=e("queue-microtask"),f=e("err-code"),{Buffer:c}=e("buffer"),p=64*1024,v=5*1e3,l=5*1e3;function u(w){return w.replace(/a=ice-options:trickle\s\n/g,"")}function h(w){console.warn(w)}class m extends d.Duplex{constructor(k){if(k=Object.assign({allowHalfOpen:!1},k),super(k),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",k),this.channelName=k.initiator?k.channelName||s(20).toString("hex"):null,this.initiator=k.initiator||!1,this.channelConfig=k.channelConfig||m.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},m.config,k.config),this.offerOptions=k.offerOptions||{},this.answerOptions=k.answerOptions||{},this.sdpTransform=k.sdpTransform||(C=>C),this.streams=k.streams||(k.stream?[k.stream]:[]),this.trickle=k.trickle!==void 0?k.trickle:!0,this.allowHalfTrickle=k.allowHalfTrickle!==void 0?k.allowHalfTrickle:!1,this.iceCompleteTimeout=k.iceCompleteTimeout||v,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=k.wrtc&&typeof k.wrtc=="object"?k.wrtc:a(),!this._wrtc)throw f(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(C){this.destroy(f(C,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=C=>{this._onIceCandidate(C)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(C=>{this.destroy(f(C,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=C=>{this._setupData(C)},this.streams&&this.streams.forEach(C=>{this.addStream(C)}),this._pc.ontrack=C=>{this._onTrack(C)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(k){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof k=="string")try{k=JSON.parse(k)}catch{k={}}this._debug("signal()"),k.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),k.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(k.transceiverRequest.kind,k.transceiverRequest.init)),k.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(k.candidate):this._pendingCandidates.push(k.candidate)),k.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(k)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(C=>{this._addIceCandidate(C)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(C=>{this.destroy(f(C,"ERR_SET_REMOTE_DESCRIPTION"))}),!k.sdp&&!k.candidate&&!k.renegotiate&&!k.transceiverRequest&&this.destroy(f(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(k){const C=new this._wrtc.RTCIceCandidate(k);this._pc.addIceCandidate(C).catch(O=>{!C.address||C.address.endsWith(".local")?h("Ignoring unsupported ICE candidate."):this.destroy(f(O,"ERR_ADD_ICE_CANDIDATE"))})}send(k){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(k)}}addTransceiver(k,C){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(k,C),this._needsNegotiation()}catch(O){this.destroy(f(O,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:k,init:C}})}}addStream(k){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),k.getTracks().forEach(C=>{this.addTrack(C,k)})}}addTrack(k,C){if(this.destroying)return;if(this.destroyed)throw f(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const O=this._senderMap.get(k)||new Map;let P=O.get(C);if(!P)P=this._pc.addTrack(k,C),O.set(C,P),this._senderMap.set(k,O),this._needsNegotiation();else throw P.removed?f(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):f(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(k,C,O){if(this.destroying)return;if(this.destroyed)throw f(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const P=this._senderMap.get(k),M=P?P.get(O):null;if(!M)throw f(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");C&&this._senderMap.set(C,P),M.replaceTrack!=null?M.replaceTrack(C):this.destroy(f(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(k,C){if(this.destroying)return;if(this.destroyed)throw f(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const O=this._senderMap.get(k),P=O?O.get(C):null;if(!P)throw f(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{P.removed=!0,this._pc.removeTrack(P)}catch(M){M.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(P):this.destroy(f(M,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(k){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),k.getTracks().forEach(C=>{this.removeTrack(C,k)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,o(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(k){this._destroy(k,()=>{})}_destroy(k,C){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",k&&(k.message||k)),o(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",k&&(k.message||k)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,k&&this.emit("error",k),this.emit("close"),C()}))}_setupData(k){if(!k.channel)return this.destroy(f(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=k.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=p),this.channelName=this._channel.label,this._channel.onmessage=O=>{this._onChannelMessage(O)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=O=>{const P=O.error instanceof Error?O.error:new Error(`Datachannel error: ${O.message} ${O.filename}:${O.lineno}:${O.colno}`);this.destroy(f(P,"ERR_DATA_CHANNEL"))};let C=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(C&&this._onChannelClose(),C=!0):C=!1},l)}_read(){}_write(k,C,O){if(this.destroyed)return O(f(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(k)}catch(P){return this.destroy(f(P,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>p?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=O):O(null)}else this._debug("write before connect"),this._chunk=k,this._cb=O}_onFinish(){if(this.destroyed)return;const k=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?k():this.once("connect",k)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(k=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(k.sdp=u(k.sdp)),k.sdp=this.sdpTransform(k.sdp);const C=()=>{if(this.destroyed)return;const M=this._pc.localDescription||k;this._debug("signal"),this.emit("signal",{type:M.type,sdp:M.sdp})},O=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?C():this.once("_iceComplete",C))},P=M=>{this.destroy(f(M,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(k).then(O).catch(P)}).catch(k=>{this.destroy(f(k,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(k=>{!k.mid&&k.sender.track&&!k.requested&&(k.requested=!0,this.addTransceiver(k.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(k=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(k.sdp=u(k.sdp)),k.sdp=this.sdpTransform(k.sdp);const C=()=>{if(this.destroyed)return;const M=this._pc.localDescription||k;this._debug("signal"),this.emit("signal",{type:M.type,sdp:M.sdp}),this.initiator||this._requestMissingTransceivers()},O=()=>{this.destroyed||(this.trickle||this._iceComplete?C():this.once("_iceComplete",C))},P=M=>{this.destroy(f(M,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(k).then(O).catch(P)}).catch(k=>{this.destroy(f(k,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(f(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const k=this._pc.iceConnectionState,C=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",k,C),this.emit("iceStateChange",k,C),(k==="connected"||k==="completed")&&(this._pcReady=!0,this._maybeReady()),k==="failed"&&this.destroy(f(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),k==="closed"&&this.destroy(f(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(k){const C=O=>(Object.prototype.toString.call(O.values)==="[object Array]"&&O.values.forEach(P=>{Object.assign(O,P)}),O);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(O=>{const P=[];O.forEach(M=>{P.push(C(M))}),k(null,P)},O=>k(O)):this._pc.getStats.length>0?this._pc.getStats(O=>{if(this.destroyed)return;const P=[];O.result().forEach(M=>{const D={};M.names().forEach($=>{D[$]=M.stat($)}),D.id=M.id,D.type=M.type,D.timestamp=M.timestamp,P.push(C(D))}),k(null,P)},O=>k(O)):k(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const k=()=>{this.destroyed||this.getStats((C,O)=>{if(this.destroyed)return;C&&(O=[]);const P={},M={},D={};let $=!1;O.forEach(Z=>{(Z.type==="remotecandidate"||Z.type==="remote-candidate")&&(P[Z.id]=Z),(Z.type==="localcandidate"||Z.type==="local-candidate")&&(M[Z.id]=Z),(Z.type==="candidatepair"||Z.type==="candidate-pair")&&(D[Z.id]=Z)});const H=Z=>{$=!0;let re=M[Z.localCandidateId];re&&(re.ip||re.address)?(this.localAddress=re.ip||re.address,this.localPort=Number(re.port)):re&&re.ipAddress?(this.localAddress=re.ipAddress,this.localPort=Number(re.portNumber)):typeof Z.googLocalAddress=="string"&&(re=Z.googLocalAddress.split(":"),this.localAddress=re[0],this.localPort=Number(re[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let Y=P[Z.remoteCandidateId];Y&&(Y.ip||Y.address)?(this.remoteAddress=Y.ip||Y.address,this.remotePort=Number(Y.port)):Y&&Y.ipAddress?(this.remoteAddress=Y.ipAddress,this.remotePort=Number(Y.portNumber)):typeof Z.googRemoteAddress=="string"&&(Y=Z.googRemoteAddress.split(":"),this.remoteAddress=Y[0],this.remotePort=Number(Y[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(O.forEach(Z=>{Z.type==="transport"&&Z.selectedCandidatePairId&&H(D[Z.selectedCandidatePairId]),(Z.type==="googCandidatePair"&&Z.googActiveConnection==="true"||(Z.type==="candidatepair"||Z.type==="candidate-pair")&&Z.selected)&&H(Z)}),!$&&(!Object.keys(D).length||Object.keys(M).length)){setTimeout(k,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(re){return this.destroy(f(re,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const Z=this._cb;this._cb=null,Z(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};k()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>p||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(k=>{this._pc.removeTrack(k),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(k){this.destroyed||(k.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:k.candidate.candidate,sdpMLineIndex:k.candidate.sdpMLineIndex,sdpMid:k.candidate.sdpMid}}):!k.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),k.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(k){if(this.destroyed)return;let C=k.data;C instanceof ArrayBuffer&&(C=c.from(C)),this.push(C)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const k=this._cb;this._cb=null,k(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(k){this.destroyed||k.streams.forEach(C=>{this._debug("on track"),this.emit("track",k.track,C),this._remoteTracks.push({track:k.track,stream:C}),!this._remoteStreams.some(O=>O.id===C.id)&&(this._remoteStreams.push(C),o(()=>{this._debug("on stream"),this.emit("stream",C)}))})}_debug(){const k=[].slice.call(arguments);k[0]="["+this._id+"] "+k[0],n.apply(null,k)}}m.WEBRTC_SUPPORT=!!a(),m.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},m.channelConfig={},i.exports=m},{buffer:171,debug:41,"err-code":45,"get-browser-rtc":46,"queue-microtask":100,randombytes:102,"readable-stream":117}],121:[function(e,i,t){var n=e("safe-buffer").Buffer,a=n.isEncoding||function(P){switch(P=""+P,P&&P.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(P){if(!P)return"utf8";for(var M;;)switch(P){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return P;default:if(M)return;P=(""+P).toLowerCase(),M=!0}}function d(P){var M=s(P);if(typeof M!="string"&&(n.isEncoding===a||!a(P)))throw new Error("Unknown encoding: "+P);return M||P}t.StringDecoder=o;function o(P){this.encoding=d(P);var M;switch(this.encoding){case"utf16le":this.text=h,this.end=m,M=4;break;case"utf8":this.fillLast=v,M=4;break;case"base64":this.text=w,this.end=k,M=3;break;default:this.write=C,this.end=O;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(M)}o.prototype.write=function(P){if(P.length===0)return"";var M,D;if(this.lastNeed){if(M=this.fillLast(P),M===void 0)return"";D=this.lastNeed,this.lastNeed=0}else D=0;return D<P.length?M?M+this.text(P,D):this.text(P,D):M||""},o.prototype.end=u,o.prototype.text=l,o.prototype.fillLast=function(P){if(this.lastNeed<=P.length)return P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,this.lastTotal-this.lastNeed,0,P.length),this.lastNeed-=P.length};function f(P){return P<=127?0:P>>5===6?2:P>>4===14?3:P>>3===30?4:P>>6===2?-1:-2}function c(P,M,D){var $=M.length-1;if($<D)return 0;var H=f(M[$]);return H>=0?(H>0&&(P.lastNeed=H-1),H):--$<D||H===-2?0:(H=f(M[$]),H>=0?(H>0&&(P.lastNeed=H-2),H):--$<D||H===-2?0:(H=f(M[$]),H>=0?(H>0&&(H===2?H=0:P.lastNeed=H-3),H):0))}function p(P,M,D){if((M[0]&192)!==128)return P.lastNeed=0,"�";if(P.lastNeed>1&&M.length>1){if((M[1]&192)!==128)return P.lastNeed=1,"�";if(P.lastNeed>2&&M.length>2&&(M[2]&192)!==128)return P.lastNeed=2,"�"}}function v(P){var M=this.lastTotal-this.lastNeed,D=p(this,P);if(D!==void 0)return D;if(this.lastNeed<=P.length)return P.copy(this.lastChar,M,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);P.copy(this.lastChar,M,0,P.length),this.lastNeed-=P.length}function l(P,M){var D=c(this,P,M);if(!this.lastNeed)return P.toString("utf8",M);this.lastTotal=D;var $=P.length-(D-this.lastNeed);return P.copy(this.lastChar,0,$),P.toString("utf8",M,$)}function u(P){var M=P&&P.length?this.write(P):"";return this.lastNeed?M+"�":M}function h(P,M){if((P.length-M)%2===0){var D=P.toString("utf16le",M);if(D){var $=D.charCodeAt(D.length-1);if($>=55296&&$<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1],D.slice(0,-1)}return D}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=P[P.length-1],P.toString("utf16le",M,P.length-1)}function m(P){var M=P&&P.length?this.write(P):"";if(this.lastNeed){var D=this.lastTotal-this.lastNeed;return M+this.lastChar.toString("utf16le",0,D)}return M}function w(P,M){var D=(P.length-M)%3;return D===0?P.toString("base64",M):(this.lastNeed=3-D,this.lastTotal=3,D===1?this.lastChar[0]=P[P.length-1]:(this.lastChar[0]=P[P.length-2],this.lastChar[1]=P[P.length-1]),P.toString("base64",M,P.length-D))}function k(P){var M=P&&P.length?this.write(P):"";return this.lastNeed?M+this.lastChar.toString("base64",0,3-this.lastNeed):M}function C(P){return P.toString(this.encoding)}function O(P){return P&&P.length?this.write(P):""}},{"safe-buffer":118}],122:[function(e,i,t){(function(n){(function(){i.exports=a;function a(d,o){if(s("noDeprecation"))return d;var f=!1;function c(){if(!f){if(s("throwDeprecation"))throw new Error(o);s("traceDeprecation")?console.trace(o):console.warn(o),f=!0}return d.apply(this,arguments)}return c}function s(d){try{if(!n.localStorage)return!1}catch{return!1}var o=n.localStorage[d];return o==null?!1:String(o).toLowerCase()==="true"}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],123:[function(e,i,t){const n=t;n.bignum=e("bn.js"),n.define=e("./asn1/api").define,n.base=e("./asn1/base"),n.constants=e("./asn1/constants"),n.decoders=e("./asn1/decoders"),n.encoders=e("./asn1/encoders")},{"./asn1/api":124,"./asn1/base":126,"./asn1/constants":130,"./asn1/decoders":132,"./asn1/encoders":135,"bn.js":139}],124:[function(e,i,t){const n=e("./encoders"),a=e("./decoders"),s=e("inherits"),d=t;d.define=function(c,p){return new o(c,p)};function o(f,c){this.name=f,this.body=c,this.decoders={},this.encoders={}}o.prototype._createNamed=function(c){const p=this.name;function v(l){this._initNamed(l,p)}return s(v,c),v.prototype._initNamed=function(u,h){c.call(this,u,h)},new v(this)},o.prototype._getDecoder=function(c){return c=c||"der",this.decoders.hasOwnProperty(c)||(this.decoders[c]=this._createNamed(a[c])),this.decoders[c]},o.prototype.decode=function(c,p,v){return this._getDecoder(p).decode(c,v)},o.prototype._getEncoder=function(c){return c=c||"der",this.encoders.hasOwnProperty(c)||(this.encoders[c]=this._createNamed(n[c])),this.encoders[c]},o.prototype.encode=function(c,p,v){return this._getEncoder(p).encode(c,v)}},{"./decoders":132,"./encoders":135,inherits:233}],125:[function(e,i,t){const n=e("inherits"),a=e("../base/reporter").Reporter,s=e("safer-buffer").Buffer;function d(f,c){if(a.call(this,c),!s.isBuffer(f)){this.error("Input not Buffer");return}this.base=f,this.offset=0,this.length=f.length}n(d,a),t.DecoderBuffer=d,d.isDecoderBuffer=function(c){return c instanceof d?!0:typeof c=="object"&&s.isBuffer(c.base)&&c.constructor.name==="DecoderBuffer"&&typeof c.offset=="number"&&typeof c.length=="number"&&typeof c.save=="function"&&typeof c.restore=="function"&&typeof c.isEmpty=="function"&&typeof c.readUInt8=="function"&&typeof c.skip=="function"&&typeof c.raw=="function"},d.prototype.save=function(){return{offset:this.offset,reporter:a.prototype.save.call(this)}},d.prototype.restore=function(c){const p=new d(this.base);return p.offset=c.offset,p.length=this.offset,this.offset=c.offset,a.prototype.restore.call(this,c.reporter),p},d.prototype.isEmpty=function(){return this.offset===this.length},d.prototype.readUInt8=function(c){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(c||"DecoderBuffer overrun")},d.prototype.skip=function(c,p){if(!(this.offset+c<=this.length))return this.error(p||"DecoderBuffer overrun");const v=new d(this.base);return v._reporterState=this._reporterState,v.offset=this.offset,v.length=this.offset+c,this.offset+=c,v},d.prototype.raw=function(c){return this.base.slice(c?c.offset:this.offset,this.length)};function o(f,c){if(Array.isArray(f))this.length=0,this.value=f.map(function(p){return o.isEncoderBuffer(p)||(p=new o(p,c)),this.length+=p.length,p},this);else if(typeof f=="number"){if(!(0<=f&&f<=255))return c.error("non-byte EncoderBuffer value");this.value=f,this.length=1}else if(typeof f=="string")this.value=f,this.length=s.byteLength(f);else if(s.isBuffer(f))this.value=f,this.length=f.length;else return c.error("Unsupported type: "+typeof f)}t.EncoderBuffer=o,o.isEncoderBuffer=function(c){return c instanceof o?!0:typeof c=="object"&&c.constructor.name==="EncoderBuffer"&&typeof c.length=="number"&&typeof c.join=="function"},o.prototype.join=function(c,p){return c||(c=s.alloc(this.length)),p||(p=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(v){v.join(c,p),p+=v.length}):(typeof this.value=="number"?c[p]=this.value:typeof this.value=="string"?c.write(this.value,p):s.isBuffer(this.value)&&this.value.copy(c,p),p+=this.length)),c}},{"../base/reporter":128,inherits:233,"safer-buffer":280}],126:[function(e,i,t){const n=t;n.Reporter=e("./reporter").Reporter,n.DecoderBuffer=e("./buffer").DecoderBuffer,n.EncoderBuffer=e("./buffer").EncoderBuffer,n.Node=e("./node")},{"./buffer":125,"./node":127,"./reporter":128}],127:[function(e,i,t){const n=e("../base/reporter").Reporter,a=e("../base/buffer").EncoderBuffer,s=e("../base/buffer").DecoderBuffer,d=e("minimalistic-assert"),o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],f=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o),c=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function p(l,u,h){const m={};this._baseState=m,m.name=h,m.enc=l,m.parent=u||null,m.children=null,m.tag=null,m.args=null,m.reverseArgs=null,m.choice=null,m.optional=!1,m.any=!1,m.obj=!1,m.use=null,m.useDecoder=null,m.key=null,m.default=null,m.explicit=null,m.implicit=null,m.contains=null,m.parent||(m.children=[],this._wrap())}i.exports=p;const v=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];p.prototype.clone=function(){const u=this._baseState,h={};v.forEach(function(w){h[w]=u[w]});const m=new this.constructor(h.parent);return m._baseState=h,m},p.prototype._wrap=function(){const u=this._baseState;f.forEach(function(h){this[h]=function(){const w=new this.constructor(this);return u.children.push(w),w[h].apply(w,arguments)}},this)},p.prototype._init=function(u){const h=this._baseState;d(h.parent===null),u.call(this),h.children=h.children.filter(function(m){return m._baseState.parent===this},this),d.equal(h.children.length,1,"Root node can have only one child")},p.prototype._useArgs=function(u){const h=this._baseState,m=u.filter(function(w){return w instanceof this.constructor},this);u=u.filter(function(w){return!(w instanceof this.constructor)},this),m.length!==0&&(d(h.children===null),h.children=m,m.forEach(function(w){w._baseState.parent=this},this)),u.length!==0&&(d(h.args===null),h.args=u,h.reverseArgs=u.map(function(w){if(typeof w!="object"||w.constructor!==Object)return w;const k={};return Object.keys(w).forEach(function(C){C==(C|0)&&(C|=0);const O=w[C];k[O]=C}),k}))},c.forEach(function(l){p.prototype[l]=function(){const h=this._baseState;throw new Error(l+" not implemented for encoding: "+h.enc)}}),o.forEach(function(l){p.prototype[l]=function(){const h=this._baseState,m=Array.prototype.slice.call(arguments);return d(h.tag===null),h.tag=l,this._useArgs(m),this}}),p.prototype.use=function(u){d(u);const h=this._baseState;return d(h.use===null),h.use=u,this},p.prototype.optional=function(){const u=this._baseState;return u.optional=!0,this},p.prototype.def=function(u){const h=this._baseState;return d(h.default===null),h.default=u,h.optional=!0,this},p.prototype.explicit=function(u){const h=this._baseState;return d(h.explicit===null&&h.implicit===null),h.explicit=u,this},p.prototype.implicit=function(u){const h=this._baseState;return d(h.explicit===null&&h.implicit===null),h.implicit=u,this},p.prototype.obj=function(){const u=this._baseState,h=Array.prototype.slice.call(arguments);return u.obj=!0,h.length!==0&&this._useArgs(h),this},p.prototype.key=function(u){const h=this._baseState;return d(h.key===null),h.key=u,this},p.prototype.any=function(){const u=this._baseState;return u.any=!0,this},p.prototype.choice=function(u){const h=this._baseState;return d(h.choice===null),h.choice=u,this._useArgs(Object.keys(u).map(function(m){return u[m]})),this},p.prototype.contains=function(u){const h=this._baseState;return d(h.use===null),h.contains=u,this},p.prototype._decode=function(u,h){const m=this._baseState;if(m.parent===null)return u.wrapResult(m.children[0]._decode(u,h));let w=m.default,k=!0,C=null;if(m.key!==null&&(C=u.enterKey(m.key)),m.optional){let P=null;if(m.explicit!==null?P=m.explicit:m.implicit!==null?P=m.implicit:m.tag!==null&&(P=m.tag),P===null&&!m.any){const M=u.save();try{m.choice===null?this._decodeGeneric(m.tag,u,h):this._decodeChoice(u,h),k=!0}catch{k=!1}u.restore(M)}else if(k=this._peekTag(u,P,m.any),u.isError(k))return k}let O;if(m.obj&&k&&(O=u.enterObject()),k){if(m.explicit!==null){const M=this._decodeTag(u,m.explicit);if(u.isError(M))return M;u=M}const P=u.offset;if(m.use===null&&m.choice===null){let M;m.any&&(M=u.save());const D=this._decodeTag(u,m.implicit!==null?m.implicit:m.tag,m.any);if(u.isError(D))return D;m.any?w=u.raw(M):u=D}if(h&&h.track&&m.tag!==null&&h.track(u.path(),P,u.length,"tagged"),h&&h.track&&m.tag!==null&&h.track(u.path(),u.offset,u.length,"content"),m.any||(m.choice===null?w=this._decodeGeneric(m.tag,u,h):w=this._decodeChoice(u,h)),u.isError(w))return w;if(!m.any&&m.choice===null&&m.children!==null&&m.children.forEach(function(D){D._decode(u,h)}),m.contains&&(m.tag==="octstr"||m.tag==="bitstr")){const M=new s(w);w=this._getUse(m.contains,u._reporterState.obj)._decode(M,h)}}return m.obj&&k&&(w=u.leaveObject(O)),m.key!==null&&(w!==null||k===!0)?u.leaveKey(C,m.key,w):C!==null&&u.exitKey(C),w},p.prototype._decodeGeneric=function(u,h,m){const w=this._baseState;return u==="seq"||u==="set"?null:u==="seqof"||u==="setof"?this._decodeList(h,u,w.args[0],m):/str$/.test(u)?this._decodeStr(h,u,m):u==="objid"&&w.args?this._decodeObjid(h,w.args[0],w.args[1],m):u==="objid"?this._decodeObjid(h,null,null,m):u==="gentime"||u==="utctime"?this._decodeTime(h,u,m):u==="null_"?this._decodeNull(h,m):u==="bool"?this._decodeBool(h,m):u==="objDesc"?this._decodeStr(h,u,m):u==="int"||u==="enum"?this._decodeInt(h,w.args&&w.args[0],m):w.use!==null?this._getUse(w.use,h._reporterState.obj)._decode(h,m):h.error("unknown tag: "+u)},p.prototype._getUse=function(u,h){const m=this._baseState;return m.useDecoder=this._use(u,h),d(m.useDecoder._baseState.parent===null),m.useDecoder=m.useDecoder._baseState.children[0],m.implicit!==m.useDecoder._baseState.implicit&&(m.useDecoder=m.useDecoder.clone(),m.useDecoder._baseState.implicit=m.implicit),m.useDecoder},p.prototype._decodeChoice=function(u,h){const m=this._baseState;let w=null,k=!1;return Object.keys(m.choice).some(function(C){const O=u.save(),P=m.choice[C];try{const M=P._decode(u,h);if(u.isError(M))return!1;w={type:C,value:M},k=!0}catch{return u.restore(O),!1}return!0},this),k?w:u.error("Choice not matched")},p.prototype._createEncoderBuffer=function(u){return new a(u,this.reporter)},p.prototype._encode=function(u,h,m){const w=this._baseState;if(w.default!==null&&w.default===u)return;const k=this._encodeValue(u,h,m);if(k!==void 0&&!this._skipDefault(k,h,m))return k},p.prototype._encodeValue=function(u,h,m){const w=this._baseState;if(w.parent===null)return w.children[0]._encode(u,h||new n);let k=null;if(this.reporter=h,w.optional&&u===void 0)if(w.default!==null)u=w.default;else return;let C=null,O=!1;if(w.any)k=this._createEncoderBuffer(u);else if(w.choice)k=this._encodeChoice(u,h);else if(w.contains)C=this._getUse(w.contains,m)._encode(u,h),O=!0;else if(w.children)C=w.children.map(function(P){if(P._baseState.tag==="null_")return P._encode(null,h,u);if(P._baseState.key===null)return h.error("Child should have a key");const M=h.enterKey(P._baseState.key);if(typeof u!="object")return h.error("Child expected, but input is not object");const D=P._encode(u[P._baseState.key],h,u);return h.leaveKey(M),D},this).filter(function(P){return P}),C=this._createEncoderBuffer(C);else if(w.tag==="seqof"||w.tag==="setof"){if(!(w.args&&w.args.length===1))return h.error("Too many args for : "+w.tag);if(!Array.isArray(u))return h.error("seqof/setof, but data is not Array");const P=this.clone();P._baseState.implicit=null,C=this._createEncoderBuffer(u.map(function(M){const D=this._baseState;return this._getUse(D.args[0],u)._encode(M,h)},P))}else w.use!==null?k=this._getUse(w.use,m)._encode(u,h):(C=this._encodePrimitive(w.tag,u),O=!0);if(!w.any&&w.choice===null){const P=w.implicit!==null?w.implicit:w.tag,M=w.implicit===null?"universal":"context";P===null?w.use===null&&h.error("Tag could be omitted only for .use()"):w.use===null&&(k=this._encodeComposite(P,O,M,C))}return w.explicit!==null&&(k=this._encodeComposite(w.explicit,!1,"context",k)),k},p.prototype._encodeChoice=function(u,h){const m=this._baseState,w=m.choice[u.type];return w||d(!1,u.type+" not found in "+JSON.stringify(Object.keys(m.choice))),w._encode(u.value,h)},p.prototype._encodePrimitive=function(u,h){const m=this._baseState;if(/str$/.test(u))return this._encodeStr(h,u);if(u==="objid"&&m.args)return this._encodeObjid(h,m.reverseArgs[0],m.args[1]);if(u==="objid")return this._encodeObjid(h,null,null);if(u==="gentime"||u==="utctime")return this._encodeTime(h,u);if(u==="null_")return this._encodeNull();if(u==="int"||u==="enum")return this._encodeInt(h,m.args&&m.reverseArgs[0]);if(u==="bool")return this._encodeBool(h);if(u==="objDesc")return this._encodeStr(h,u);throw new Error("Unsupported tag: "+u)},p.prototype._isNumstr=function(u){return/^[0-9 ]*$/.test(u)},p.prototype._isPrintstr=function(u){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(u)}},{"../base/buffer":125,"../base/reporter":128,"minimalistic-assert":241}],128:[function(e,i,t){const n=e("inherits");function a(d){this._reporterState={obj:null,path:[],options:d||{},errors:[]}}t.Reporter=a,a.prototype.isError=function(o){return o instanceof s},a.prototype.save=function(){const o=this._reporterState;return{obj:o.obj,pathLen:o.path.length}},a.prototype.restore=function(o){const f=this._reporterState;f.obj=o.obj,f.path=f.path.slice(0,o.pathLen)},a.prototype.enterKey=function(o){return this._reporterState.path.push(o)},a.prototype.exitKey=function(o){const f=this._reporterState;f.path=f.path.slice(0,o-1)},a.prototype.leaveKey=function(o,f,c){const p=this._reporterState;this.exitKey(o),p.obj!==null&&(p.obj[f]=c)},a.prototype.path=function(){return this._reporterState.path.join("/")},a.prototype.enterObject=function(){const o=this._reporterState,f=o.obj;return o.obj={},f},a.prototype.leaveObject=function(o){const f=this._reporterState,c=f.obj;return f.obj=o,c},a.prototype.error=function(o){let f;const c=this._reporterState,p=o instanceof s;if(p?f=o:f=new s(c.path.map(function(v){return"["+JSON.stringify(v)+"]"}).join(""),o.message||o,o.stack),!c.options.partial)throw f;return p||c.errors.push(f),f},a.prototype.wrapResult=function(o){const f=this._reporterState;return f.options.partial?{result:this.isError(o)?null:o,errors:f.errors}:o};function s(d,o){this.path=d,this.rethrow(o)}n(s,Error),s.prototype.rethrow=function(o){if(this.message=o+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,s),!this.stack)try{throw new Error(this.message)}catch(f){this.stack=f.stack}return this}},{inherits:233}],129:[function(e,i,t){function n(a){const s={};return Object.keys(a).forEach(function(d){(d|0)==d&&(d=d|0);const o=a[d];s[o]=d}),s}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n(t.tag)},{}],130:[function(e,i,t){const n=t;n._reverse=function(s){const d={};return Object.keys(s).forEach(function(o){(o|0)==o&&(o=o|0);const f=s[o];d[f]=o}),d},n.der=e("./der")},{"./der":129}],131:[function(e,i,t){const n=e("inherits"),a=e("bn.js"),s=e("../base/buffer").DecoderBuffer,d=e("../base/node"),o=e("../constants/der");function f(l){this.enc="der",this.name=l.name,this.entity=l,this.tree=new c,this.tree._init(l.body)}i.exports=f,f.prototype.decode=function(u,h){return s.isDecoderBuffer(u)||(u=new s(u,h)),this.tree._decode(u,h)};function c(l){d.call(this,"der",l)}n(c,d),c.prototype._peekTag=function(u,h,m){if(u.isEmpty())return!1;const w=u.save(),k=p(u,'Failed to peek tag: "'+h+'"');return u.isError(k)?k:(u.restore(w),k.tag===h||k.tagStr===h||k.tagStr+"of"===h||m)},c.prototype._decodeTag=function(u,h,m){const w=p(u,'Failed to decode tag of "'+h+'"');if(u.isError(w))return w;let k=v(u,w.primitive,'Failed to get length of "'+h+'"');if(u.isError(k))return k;if(!m&&w.tag!==h&&w.tagStr!==h&&w.tagStr+"of"!==h)return u.error('Failed to match tag: "'+h+'"');if(w.primitive||k!==null)return u.skip(k,'Failed to match body of: "'+h+'"');const C=u.save(),O=this._skipUntilEnd(u,'Failed to skip indefinite length body: "'+this.tag+'"');return u.isError(O)?O:(k=u.offset-C.offset,u.restore(C),u.skip(k,'Failed to match body of: "'+h+'"'))},c.prototype._skipUntilEnd=function(u,h){for(;;){const m=p(u,h);if(u.isError(m))return m;const w=v(u,m.primitive,h);if(u.isError(w))return w;let k;if(m.primitive||w!==null?k=u.skip(w):k=this._skipUntilEnd(u,h),u.isError(k))return k;if(m.tagStr==="end")break}},c.prototype._decodeList=function(u,h,m,w){const k=[];for(;!u.isEmpty();){const C=this._peekTag(u,"end");if(u.isError(C))return C;const O=m.decode(u,"der",w);if(u.isError(O)&&C)break;k.push(O)}return k},c.prototype._decodeStr=function(u,h){if(h==="bitstr"){const m=u.readUInt8();return u.isError(m)?m:{unused:m,data:u.raw()}}else if(h==="bmpstr"){const m=u.raw();if(m.length%2===1)return u.error("Decoding of string type: bmpstr length mismatch");let w="";for(let k=0;k<m.length/2;k++)w+=String.fromCharCode(m.readUInt16BE(k*2));return w}else if(h==="numstr"){const m=u.raw().toString("ascii");return this._isNumstr(m)?m:u.error("Decoding of string type: numstr unsupported characters")}else{if(h==="octstr")return u.raw();if(h==="objDesc")return u.raw();if(h==="printstr"){const m=u.raw().toString("ascii");return this._isPrintstr(m)?m:u.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(h)?u.raw().toString():u.error("Decoding of string type: "+h+" unsupported")}},c.prototype._decodeObjid=function(u,h,m){let w;const k=[];let C=0,O=0;for(;!u.isEmpty();)O=u.readUInt8(),C<<=7,C|=O&127,O&128||(k.push(C),C=0);O&128&&k.push(C);const P=k[0]/40|0,M=k[0]%40;if(m?w=k:w=[P,M].concat(k.slice(1)),h){let D=h[w.join(" ")];D===void 0&&(D=h[w.join(".")]),D!==void 0&&(w=D)}return w},c.prototype._decodeTime=function(u,h){const m=u.raw().toString();let w,k,C,O,P,M;if(h==="gentime")w=m.slice(0,4)|0,k=m.slice(4,6)|0,C=m.slice(6,8)|0,O=m.slice(8,10)|0,P=m.slice(10,12)|0,M=m.slice(12,14)|0;else if(h==="utctime")w=m.slice(0,2)|0,k=m.slice(2,4)|0,C=m.slice(4,6)|0,O=m.slice(6,8)|0,P=m.slice(8,10)|0,M=m.slice(10,12)|0,w<70?w=2e3+w:w=1900+w;else return u.error("Decoding "+h+" time is not supported yet");return Date.UTC(w,k-1,C,O,P,M,0)},c.prototype._decodeNull=function(){return null},c.prototype._decodeBool=function(u){const h=u.readUInt8();return u.isError(h)?h:h!==0},c.prototype._decodeInt=function(u,h){const m=u.raw();let w=new a(m);return h&&(w=h[w.toString(10)]||w),w},c.prototype._use=function(u,h){return typeof u=="function"&&(u=u(h)),u._getDecoder("der").tree};function p(l,u){let h=l.readUInt8(u);if(l.isError(h))return h;const m=o.tagClass[h>>6],w=(h&32)===0;if((h&31)===31){let C=h;for(h=0;(C&128)===128;){if(C=l.readUInt8(u),l.isError(C))return C;h<<=7,h|=C&127}}else h&=31;const k=o.tag[h];return{cls:m,primitive:w,tag:h,tagStr:k}}function v(l,u,h){let m=l.readUInt8(h);if(l.isError(m))return m;if(!u&&m===128)return null;if(!(m&128))return m;const w=m&127;if(w>4)return l.error("length octect is too long");m=0;for(let k=0;k<w;k++){m<<=8;const C=l.readUInt8(h);if(l.isError(C))return C;m|=C}return m}},{"../base/buffer":125,"../base/node":127,"../constants/der":129,"bn.js":139,inherits:233}],132:[function(e,i,t){const n=t;n.der=e("./der"),n.pem=e("./pem")},{"./der":131,"./pem":133}],133:[function(e,i,t){const n=e("inherits"),a=e("safer-buffer").Buffer,s=e("./der");function d(o){s.call(this,o),this.enc="pem"}n(d,s),i.exports=d,d.prototype.decode=function(f,c){const p=f.toString().split(/[\r\n]+/g),v=c.label.toUpperCase(),l=/^-----(BEGIN|END) ([^-]+)-----$/;let u=-1,h=-1;for(let k=0;k<p.length;k++){const C=p[k].match(l);if(C!==null&&C[2]===v)if(u===-1){if(C[1]!=="BEGIN")break;u=k}else{if(C[1]!=="END")break;h=k;break}}if(u===-1||h===-1)throw new Error("PEM section not found for: "+v);const m=p.slice(u+1,h).join("");m.replace(/[^a-z0-9+/=]+/gi,"");const w=a.from(m,"base64");return s.prototype.decode.call(this,w,c)}},{"./der":131,inherits:233,"safer-buffer":280}],134:[function(e,i,t){const n=e("inherits"),a=e("safer-buffer").Buffer,s=e("../base/node"),d=e("../constants/der");function o(v){this.enc="der",this.name=v.name,this.entity=v,this.tree=new f,this.tree._init(v.body)}i.exports=o,o.prototype.encode=function(l,u){return this.tree._encode(l,u).join()};function f(v){s.call(this,"der",v)}n(f,s),f.prototype._encodeComposite=function(l,u,h,m){const w=p(l,u,h,this.reporter);if(m.length<128){const O=a.alloc(2);return O[0]=w,O[1]=m.length,this._createEncoderBuffer([O,m])}let k=1;for(let O=m.length;O>=256;O>>=8)k++;const C=a.alloc(1+1+k);C[0]=w,C[1]=128|k;for(let O=1+k,P=m.length;P>0;O--,P>>=8)C[O]=P&255;return this._createEncoderBuffer([C,m])},f.prototype._encodeStr=function(l,u){if(u==="bitstr")return this._createEncoderBuffer([l.unused|0,l.data]);if(u==="bmpstr"){const h=a.alloc(l.length*2);for(let m=0;m<l.length;m++)h.writeUInt16BE(l.charCodeAt(m),m*2);return this._createEncoderBuffer(h)}else return u==="numstr"?this._isNumstr(l)?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: numstr supports only digits and space"):u==="printstr"?this._isPrintstr(l)?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(u)?this._createEncoderBuffer(l):u==="objDesc"?this._createEncoderBuffer(l):this.reporter.error("Encoding of string type: "+u+" unsupported")},f.prototype._encodeObjid=function(l,u,h){if(typeof l=="string"){if(!u)return this.reporter.error("string objid given, but no values map found");if(!u.hasOwnProperty(l))return this.reporter.error("objid not found in values map");l=u[l].split(/[\s.]+/g);for(let C=0;C<l.length;C++)l[C]|=0}else if(Array.isArray(l)){l=l.slice();for(let C=0;C<l.length;C++)l[C]|=0}if(!Array.isArray(l))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(l));if(!h){if(l[1]>=40)return this.reporter.error("Second objid identifier OOB");l.splice(0,2,l[0]*40+l[1])}let m=0;for(let C=0;C<l.length;C++){let O=l[C];for(m++;O>=128;O>>=7)m++}const w=a.alloc(m);let k=w.length-1;for(let C=l.length-1;C>=0;C--){let O=l[C];for(w[k--]=O&127;(O>>=7)>0;)w[k--]=128|O&127}return this._createEncoderBuffer(w)};function c(v){return v<10?"0"+v:v}f.prototype._encodeTime=function(l,u){let h;const m=new Date(l);return u==="gentime"?h=[c(m.getUTCFullYear()),c(m.getUTCMonth()+1),c(m.getUTCDate()),c(m.getUTCHours()),c(m.getUTCMinutes()),c(m.getUTCSeconds()),"Z"].join(""):u==="utctime"?h=[c(m.getUTCFullYear()%100),c(m.getUTCMonth()+1),c(m.getUTCDate()),c(m.getUTCHours()),c(m.getUTCMinutes()),c(m.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+u+" time is not supported yet"),this._encodeStr(h,"octstr")},f.prototype._encodeNull=function(){return this._createEncoderBuffer("")},f.prototype._encodeInt=function(l,u){if(typeof l=="string"){if(!u)return this.reporter.error("String int or enum given, but no values map");if(!u.hasOwnProperty(l))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(l));l=u[l]}if(typeof l!="number"&&!a.isBuffer(l)){const w=l.toArray();!l.sign&&w[0]&128&&w.unshift(0),l=a.from(w)}if(a.isBuffer(l)){let w=l.length;l.length===0&&w++;const k=a.alloc(w);return l.copy(k),l.length===0&&(k[0]=0),this._createEncoderBuffer(k)}if(l<128)return this._createEncoderBuffer(l);if(l<256)return this._createEncoderBuffer([0,l]);let h=1;for(let w=l;w>=256;w>>=8)h++;const m=new Array(h);for(let w=m.length-1;w>=0;w--)m[w]=l&255,l>>=8;return m[0]&128&&m.unshift(0),this._createEncoderBuffer(a.from(m))},f.prototype._encodeBool=function(l){return this._createEncoderBuffer(l?255:0)},f.prototype._use=function(l,u){return typeof l=="function"&&(l=l(u)),l._getEncoder("der").tree},f.prototype._skipDefault=function(l,u,h){const m=this._baseState;let w;if(m.default===null)return!1;const k=l.join();if(m.defaultBuffer===void 0&&(m.defaultBuffer=this._encodeValue(m.default,u,h).join()),k.length!==m.defaultBuffer.length)return!1;for(w=0;w<k.length;w++)if(k[w]!==m.defaultBuffer[w])return!1;return!0};function p(v,l,u,h){let m;if(v==="seqof"?v="seq":v==="setof"&&(v="set"),d.tagByName.hasOwnProperty(v))m=d.tagByName[v];else if(typeof v=="number"&&(v|0)===v)m=v;else return h.error("Unknown tag: "+v);return m>=31?h.error("Multi-octet tag encoding unsupported"):(l||(m|=32),m|=d.tagClassByName[u||"universal"]<<6,m)}},{"../base/node":127,"../constants/der":129,inherits:233,"safer-buffer":280}],135:[function(e,i,t){const n=t;n.der=e("./der"),n.pem=e("./pem")},{"./der":134,"./pem":136}],136:[function(e,i,t){const n=e("inherits"),a=e("./der");function s(d){a.call(this,d),this.enc="pem"}n(s,a),i.exports=s,s.prototype.encode=function(o,f){const p=a.prototype.encode.call(this,o).toString("base64"),v=["-----BEGIN "+f.label+"-----"];for(let l=0;l<p.length;l+=64)v.push(p.slice(l,l+64));return v.push("-----END "+f.label+"-----"),v.join(`
`)}},{"./der":134,inherits:233}],137:[function(e,i,t){(function(n){(function(){var a=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],s=typeof globalThis>"u"?n:globalThis;i.exports=function(){for(var o=[],f=0;f<a.length;f++)typeof s[a[f]]=="function"&&(o[o.length]=a[f]);return o}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],138:[function(e,i,t){t.byteLength=p,t.toByteArray=l,t.fromByteArray=m;for(var n=[],a=[],s=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,f=d.length;o<f;++o)n[o]=d[o],a[d.charCodeAt(o)]=o;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function c(w){var k=w.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=w.indexOf("=");C===-1&&(C=k);var O=C===k?0:4-C%4;return[C,O]}function p(w){var k=c(w),C=k[0],O=k[1];return(C+O)*3/4-O}function v(w,k,C){return(k+C)*3/4-C}function l(w){var k,C=c(w),O=C[0],P=C[1],M=new s(v(w,O,P)),D=0,$=P>0?O-4:O,H;for(H=0;H<$;H+=4)k=a[w.charCodeAt(H)]<<18|a[w.charCodeAt(H+1)]<<12|a[w.charCodeAt(H+2)]<<6|a[w.charCodeAt(H+3)],M[D++]=k>>16&255,M[D++]=k>>8&255,M[D++]=k&255;return P===2&&(k=a[w.charCodeAt(H)]<<2|a[w.charCodeAt(H+1)]>>4,M[D++]=k&255),P===1&&(k=a[w.charCodeAt(H)]<<10|a[w.charCodeAt(H+1)]<<4|a[w.charCodeAt(H+2)]>>2,M[D++]=k>>8&255,M[D++]=k&255),M}function u(w){return n[w>>18&63]+n[w>>12&63]+n[w>>6&63]+n[w&63]}function h(w,k,C){for(var O,P=[],M=k;M<C;M+=3)O=(w[M]<<16&16711680)+(w[M+1]<<8&65280)+(w[M+2]&255),P.push(u(O));return P.join("")}function m(w){for(var k,C=w.length,O=C%3,P=[],M=16383,D=0,$=C-O;D<$;D+=M)P.push(h(w,D,D+M>$?$:D+M));return O===1?(k=w[C-1],P.push(n[k>>2]+n[k<<4&63]+"==")):O===2&&(k=(w[C-2]<<8)+w[C-1],P.push(n[k>>10]+n[k>>4&63]+n[k<<2&63]+"=")),P.join("")}},{}],139:[function(e,i,t){(function(n,a){function s(x,b){if(!x)throw new Error(b||"Assertion failed")}function d(x,b){x.super_=b;var _=function(){};_.prototype=b.prototype,x.prototype=new _,x.prototype.constructor=x}function o(x,b,_){if(o.isBN(x))return x;this.negative=0,this.words=null,this.length=0,this.red=null,x!==null&&((b==="le"||b==="be")&&(_=b,b=10),this._init(x||0,b||10,_||"be"))}typeof n=="object"?n.exports=o:a.BN=o,o.BN=o,o.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=e("buffer").Buffer}catch{}o.isBN=function(b){return b instanceof o?!0:b!==null&&typeof b=="object"&&b.constructor.wordSize===o.wordSize&&Array.isArray(b.words)},o.max=function(b,_){return b.cmp(_)>0?b:_},o.min=function(b,_){return b.cmp(_)<0?b:_},o.prototype._init=function(b,_,g){if(typeof b=="number")return this._initNumber(b,_,g);if(typeof b=="object")return this._initArray(b,_,g);_==="hex"&&(_=16),s(_===(_|0)&&_>=2&&_<=36),b=b.toString().replace(/\s+/g,"");var E=0;b[0]==="-"&&(E++,this.negative=1),E<b.length&&(_===16?this._parseHex(b,E,g):(this._parseBase(b,_,E),g==="le"&&this._initArray(this.toArray(),_,g)))},o.prototype._initNumber=function(b,_,g){b<0&&(this.negative=1,b=-b),b<67108864?(this.words=[b&67108863],this.length=1):b<4503599627370496?(this.words=[b&67108863,b/67108864&67108863],this.length=2):(s(b<9007199254740992),this.words=[b&67108863,b/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),_,g)},o.prototype._initArray=function(b,_,g){if(s(typeof b.length=="number"),b.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(b.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var T,A,J=0;if(g==="be")for(E=b.length-1,T=0;E>=0;E-=3)A=b[E]|b[E-1]<<8|b[E-2]<<16,this.words[T]|=A<<J&67108863,this.words[T+1]=A>>>26-J&67108863,J+=24,J>=26&&(J-=26,T++);else if(g==="le")for(E=0,T=0;E<b.length;E+=3)A=b[E]|b[E+1]<<8|b[E+2]<<16,this.words[T]|=A<<J&67108863,this.words[T+1]=A>>>26-J&67108863,J+=24,J>=26&&(J-=26,T++);return this.strip()};function c(x,b){var _=x.charCodeAt(b);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function p(x,b,_){var g=c(x,_);return _-1>=b&&(g|=c(x,_-1)<<4),g}o.prototype._parseHex=function(b,_,g){this.length=Math.ceil((b.length-_)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var T=0,A=0,J;if(g==="be")for(E=b.length-1;E>=_;E-=2)J=p(b,_,E)<<T,this.words[A]|=J&67108863,T>=18?(T-=18,A+=1,this.words[A]|=J>>>26):T+=8;else{var G=b.length-_;for(E=G%2===0?_+1:_;E<b.length;E+=2)J=p(b,_,E)<<T,this.words[A]|=J&67108863,T>=18?(T-=18,A+=1,this.words[A]|=J>>>26):T+=8}this.strip()};function v(x,b,_,g){for(var E=0,T=Math.min(x.length,_),A=b;A<T;A++){var J=x.charCodeAt(A)-48;E*=g,J>=49?E+=J-49+10:J>=17?E+=J-17+10:E+=J}return E}o.prototype._parseBase=function(b,_,g){this.words=[0],this.length=1;for(var E=0,T=1;T<=67108863;T*=_)E++;E--,T=T/_|0;for(var A=b.length-g,J=A%E,G=Math.min(A,A-J)+g,I=0,V=g;V<G;V+=E)I=v(b,V,V+E,_),this.imuln(T),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I);if(J!==0){var L=1;for(I=v(b,V,b.length,_),V=0;V<J;V++)L*=_;this.imuln(L),this.words[0]+I<67108864?this.words[0]+=I:this._iaddn(I)}this.strip()},o.prototype.copy=function(b){b.words=new Array(this.length);for(var _=0;_<this.length;_++)b.words[_]=this.words[_];b.length=this.length,b.negative=this.negative,b.red=this.red},o.prototype.clone=function(){var b=new o(null);return this.copy(b),b},o.prototype._expand=function(b){for(;this.length<b;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(b,_){b=b||10,_=_|0||1;var g;if(b===16||b==="hex"){g="";for(var E=0,T=0,A=0;A<this.length;A++){var J=this.words[A],G=((J<<E|T)&16777215).toString(16);T=J>>>24-E&16777215,T!==0||A!==this.length-1?g=l[6-G.length]+G+g:g=G+g,E+=2,E>=26&&(E-=26,A--)}for(T!==0&&(g=T.toString(16)+g);g.length%_!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(b===(b|0)&&b>=2&&b<=36){var I=u[b],V=h[b];g="";var L=this.clone();for(L.negative=0;!L.isZero();){var z=L.modn(V).toString(b);L=L.idivn(V),L.isZero()?g=z+g:g=l[I-z.length]+z+g}for(this.isZero()&&(g="0"+g);g.length%_!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}s(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var b=this.words[0];return this.length===2?b+=this.words[1]*67108864:this.length===3&&this.words[2]===1?b+=4503599627370496+this.words[1]*67108864:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-b:b},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(b,_){return s(typeof f<"u"),this.toArrayLike(f,b,_)},o.prototype.toArray=function(b,_){return this.toArrayLike(Array,b,_)},o.prototype.toArrayLike=function(b,_,g){var E=this.byteLength(),T=g||Math.max(1,E);s(E<=T,"byte array longer than desired length"),s(T>0,"Requested array length <= 0"),this.strip();var A=_==="le",J=new b(T),G,I,V=this.clone();if(A){for(I=0;!V.isZero();I++)G=V.andln(255),V.iushrn(8),J[I]=G;for(;I<T;I++)J[I]=0}else{for(I=0;I<T-E;I++)J[I]=0;for(I=0;!V.isZero();I++)G=V.andln(255),V.iushrn(8),J[T-I-1]=G}return J},Math.clz32?o.prototype._countBits=function(b){return 32-Math.clz32(b)}:o.prototype._countBits=function(b){var _=b,g=0;return _>=4096&&(g+=13,_>>>=13),_>=64&&(g+=7,_>>>=7),_>=8&&(g+=4,_>>>=4),_>=2&&(g+=2,_>>>=2),g+_},o.prototype._zeroBits=function(b){if(b===0)return 26;var _=b,g=0;return _&8191||(g+=13,_>>>=13),_&127||(g+=7,_>>>=7),_&15||(g+=4,_>>>=4),_&3||(g+=2,_>>>=2),_&1||g++,g},o.prototype.bitLength=function(){var b=this.words[this.length-1],_=this._countBits(b);return(this.length-1)*26+_};function m(x){for(var b=new Array(x.bitLength()),_=0;_<b.length;_++){var g=_/26|0,E=_%26;b[_]=(x.words[g]&1<<E)>>>E}return b}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var b=0,_=0;_<this.length;_++){var g=this._zeroBits(this.words[_]);if(b+=g,g!==26)break}return b},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(b){return this.negative!==0?this.abs().inotn(b).iaddn(1):this.clone()},o.prototype.fromTwos=function(b){return this.testn(b-1)?this.notn(b).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(b){for(;this.length<b.length;)this.words[this.length++]=0;for(var _=0;_<b.length;_++)this.words[_]=this.words[_]|b.words[_];return this.strip()},o.prototype.ior=function(b){return s((this.negative|b.negative)===0),this.iuor(b)},o.prototype.or=function(b){return this.length>b.length?this.clone().ior(b):b.clone().ior(this)},o.prototype.uor=function(b){return this.length>b.length?this.clone().iuor(b):b.clone().iuor(this)},o.prototype.iuand=function(b){var _;this.length>b.length?_=b:_=this;for(var g=0;g<_.length;g++)this.words[g]=this.words[g]&b.words[g];return this.length=_.length,this.strip()},o.prototype.iand=function(b){return s((this.negative|b.negative)===0),this.iuand(b)},o.prototype.and=function(b){return this.length>b.length?this.clone().iand(b):b.clone().iand(this)},o.prototype.uand=function(b){return this.length>b.length?this.clone().iuand(b):b.clone().iuand(this)},o.prototype.iuxor=function(b){var _,g;this.length>b.length?(_=this,g=b):(_=b,g=this);for(var E=0;E<g.length;E++)this.words[E]=_.words[E]^g.words[E];if(this!==_)for(;E<_.length;E++)this.words[E]=_.words[E];return this.length=_.length,this.strip()},o.prototype.ixor=function(b){return s((this.negative|b.negative)===0),this.iuxor(b)},o.prototype.xor=function(b){return this.length>b.length?this.clone().ixor(b):b.clone().ixor(this)},o.prototype.uxor=function(b){return this.length>b.length?this.clone().iuxor(b):b.clone().iuxor(this)},o.prototype.inotn=function(b){s(typeof b=="number"&&b>=0);var _=Math.ceil(b/26)|0,g=b%26;this._expand(_),g>0&&_--;for(var E=0;E<_;E++)this.words[E]=~this.words[E]&67108863;return g>0&&(this.words[E]=~this.words[E]&67108863>>26-g),this.strip()},o.prototype.notn=function(b){return this.clone().inotn(b)},o.prototype.setn=function(b,_){s(typeof b=="number"&&b>=0);var g=b/26|0,E=b%26;return this._expand(g+1),_?this.words[g]=this.words[g]|1<<E:this.words[g]=this.words[g]&~(1<<E),this.strip()},o.prototype.iadd=function(b){var _;if(this.negative!==0&&b.negative===0)return this.negative=0,_=this.isub(b),this.negative^=1,this._normSign();if(this.negative===0&&b.negative!==0)return b.negative=0,_=this.isub(b),b.negative=1,_._normSign();var g,E;this.length>b.length?(g=this,E=b):(g=b,E=this);for(var T=0,A=0;A<E.length;A++)_=(g.words[A]|0)+(E.words[A]|0)+T,this.words[A]=_&67108863,T=_>>>26;for(;T!==0&&A<g.length;A++)_=(g.words[A]|0)+T,this.words[A]=_&67108863,T=_>>>26;if(this.length=g.length,T!==0)this.words[this.length]=T,this.length++;else if(g!==this)for(;A<g.length;A++)this.words[A]=g.words[A];return this},o.prototype.add=function(b){var _;return b.negative!==0&&this.negative===0?(b.negative=0,_=this.sub(b),b.negative^=1,_):b.negative===0&&this.negative!==0?(this.negative=0,_=b.sub(this),this.negative=1,_):this.length>b.length?this.clone().iadd(b):b.clone().iadd(this)},o.prototype.isub=function(b){if(b.negative!==0){b.negative=0;var _=this.iadd(b);return b.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(b),this.negative=1,this._normSign();var g=this.cmp(b);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,T;g>0?(E=this,T=b):(E=b,T=this);for(var A=0,J=0;J<T.length;J++)_=(E.words[J]|0)-(T.words[J]|0)+A,A=_>>26,this.words[J]=_&67108863;for(;A!==0&&J<E.length;J++)_=(E.words[J]|0)+A,A=_>>26,this.words[J]=_&67108863;if(A===0&&J<E.length&&E!==this)for(;J<E.length;J++)this.words[J]=E.words[J];return this.length=Math.max(this.length,J),E!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(b){return this.clone().isub(b)};function w(x,b,_){_.negative=b.negative^x.negative;var g=x.length+b.length|0;_.length=g,g=g-1|0;var E=x.words[0]|0,T=b.words[0]|0,A=E*T,J=A&67108863,G=A/67108864|0;_.words[0]=J;for(var I=1;I<g;I++){for(var V=G>>>26,L=G&67108863,z=Math.min(I,b.length-1),ie=Math.max(0,I-x.length+1);ie<=z;ie++){var se=I-ie|0;E=x.words[se]|0,T=b.words[ie]|0,A=E*T+L,V+=A/67108864|0,L=A&67108863}_.words[I]=L|0,G=V|0}return G!==0?_.words[I]=G|0:_.length--,_.strip()}var k=function(b,_,g){var E=b.words,T=_.words,A=g.words,J=0,G,I,V,L=E[0]|0,z=L&8191,ie=L>>>13,se=E[1]|0,me=se&8191,Se=se>>>13,ke=E[2]|0,oe=ke&8191,ue=ke>>>13,ye=E[3]|0,we=ye&8191,le=ye>>>13,ee=E[4]|0,te=ee&8191,Q=ee>>>13,B=E[5]|0,W=B&8191,X=B>>>13,ce=E[6]|0,he=ce&8191,ge=ce>>>13,fe=E[7]|0,y=fe&8191,U=fe>>>13,q=E[8]|0,de=q&8191,j=q>>>13,S=E[9]|0,F=S&8191,K=S>>>13,ve=T[0]|0,ae=ve&8191,_e=ve>>>13,Ne=T[1]|0,Pe=Ne&8191,Ue=Ne>>>13,xe=T[2]|0,Ae=xe&8191,Re=xe>>>13,$e=T[3]|0,De=$e&8191,Be=$e>>>13,He=T[4]|0,Me=He&8191,qe=He>>>13,Qe=T[5]|0,Fe=Qe&8191,Ye=Qe>>>13,Xe=T[6]|0,Je=Xe&8191,je=Xe>>>13,ze=T[7]|0,Ve=ze&8191,et=ze>>>13,tt=T[8]|0,Ge=tt&8191,rt=tt>>>13,it=T[9]|0,Le=it&8191,nt=it>>>13;g.negative=b.negative^_.negative,g.length=19,G=Math.imul(z,ae),I=Math.imul(z,_e),I=I+Math.imul(ie,ae)|0,V=Math.imul(ie,_e);var Ke=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,G=Math.imul(me,ae),I=Math.imul(me,_e),I=I+Math.imul(Se,ae)|0,V=Math.imul(Se,_e),G=G+Math.imul(z,Pe)|0,I=I+Math.imul(z,Ue)|0,I=I+Math.imul(ie,Pe)|0,V=V+Math.imul(ie,Ue)|0;var Ze=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,G=Math.imul(oe,ae),I=Math.imul(oe,_e),I=I+Math.imul(ue,ae)|0,V=Math.imul(ue,_e),G=G+Math.imul(me,Pe)|0,I=I+Math.imul(me,Ue)|0,I=I+Math.imul(Se,Pe)|0,V=V+Math.imul(Se,Ue)|0,G=G+Math.imul(z,Ae)|0,I=I+Math.imul(z,Re)|0,I=I+Math.imul(ie,Ae)|0,V=V+Math.imul(ie,Re)|0;var ne=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ne>>>26)|0,ne&=67108863,G=Math.imul(we,ae),I=Math.imul(we,_e),I=I+Math.imul(le,ae)|0,V=Math.imul(le,_e),G=G+Math.imul(oe,Pe)|0,I=I+Math.imul(oe,Ue)|0,I=I+Math.imul(ue,Pe)|0,V=V+Math.imul(ue,Ue)|0,G=G+Math.imul(me,Ae)|0,I=I+Math.imul(me,Re)|0,I=I+Math.imul(Se,Ae)|0,V=V+Math.imul(Se,Re)|0,G=G+Math.imul(z,De)|0,I=I+Math.imul(z,Be)|0,I=I+Math.imul(ie,De)|0,V=V+Math.imul(ie,Be)|0;var pe=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(pe>>>26)|0,pe&=67108863,G=Math.imul(te,ae),I=Math.imul(te,_e),I=I+Math.imul(Q,ae)|0,V=Math.imul(Q,_e),G=G+Math.imul(we,Pe)|0,I=I+Math.imul(we,Ue)|0,I=I+Math.imul(le,Pe)|0,V=V+Math.imul(le,Ue)|0,G=G+Math.imul(oe,Ae)|0,I=I+Math.imul(oe,Re)|0,I=I+Math.imul(ue,Ae)|0,V=V+Math.imul(ue,Re)|0,G=G+Math.imul(me,De)|0,I=I+Math.imul(me,Be)|0,I=I+Math.imul(Se,De)|0,V=V+Math.imul(Se,Be)|0,G=G+Math.imul(z,Me)|0,I=I+Math.imul(z,qe)|0,I=I+Math.imul(ie,Me)|0,V=V+Math.imul(ie,qe)|0;var be=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(be>>>26)|0,be&=67108863,G=Math.imul(W,ae),I=Math.imul(W,_e),I=I+Math.imul(X,ae)|0,V=Math.imul(X,_e),G=G+Math.imul(te,Pe)|0,I=I+Math.imul(te,Ue)|0,I=I+Math.imul(Q,Pe)|0,V=V+Math.imul(Q,Ue)|0,G=G+Math.imul(we,Ae)|0,I=I+Math.imul(we,Re)|0,I=I+Math.imul(le,Ae)|0,V=V+Math.imul(le,Re)|0,G=G+Math.imul(oe,De)|0,I=I+Math.imul(oe,Be)|0,I=I+Math.imul(ue,De)|0,V=V+Math.imul(ue,Be)|0,G=G+Math.imul(me,Me)|0,I=I+Math.imul(me,qe)|0,I=I+Math.imul(Se,Me)|0,V=V+Math.imul(Se,qe)|0,G=G+Math.imul(z,Fe)|0,I=I+Math.imul(z,Ye)|0,I=I+Math.imul(ie,Fe)|0,V=V+Math.imul(ie,Ye)|0;var Ee=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,G=Math.imul(he,ae),I=Math.imul(he,_e),I=I+Math.imul(ge,ae)|0,V=Math.imul(ge,_e),G=G+Math.imul(W,Pe)|0,I=I+Math.imul(W,Ue)|0,I=I+Math.imul(X,Pe)|0,V=V+Math.imul(X,Ue)|0,G=G+Math.imul(te,Ae)|0,I=I+Math.imul(te,Re)|0,I=I+Math.imul(Q,Ae)|0,V=V+Math.imul(Q,Re)|0,G=G+Math.imul(we,De)|0,I=I+Math.imul(we,Be)|0,I=I+Math.imul(le,De)|0,V=V+Math.imul(le,Be)|0,G=G+Math.imul(oe,Me)|0,I=I+Math.imul(oe,qe)|0,I=I+Math.imul(ue,Me)|0,V=V+Math.imul(ue,qe)|0,G=G+Math.imul(me,Fe)|0,I=I+Math.imul(me,Ye)|0,I=I+Math.imul(Se,Fe)|0,V=V+Math.imul(Se,Ye)|0,G=G+Math.imul(z,Je)|0,I=I+Math.imul(z,je)|0,I=I+Math.imul(ie,Je)|0,V=V+Math.imul(ie,je)|0;var Te=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Te>>>26)|0,Te&=67108863,G=Math.imul(y,ae),I=Math.imul(y,_e),I=I+Math.imul(U,ae)|0,V=Math.imul(U,_e),G=G+Math.imul(he,Pe)|0,I=I+Math.imul(he,Ue)|0,I=I+Math.imul(ge,Pe)|0,V=V+Math.imul(ge,Ue)|0,G=G+Math.imul(W,Ae)|0,I=I+Math.imul(W,Re)|0,I=I+Math.imul(X,Ae)|0,V=V+Math.imul(X,Re)|0,G=G+Math.imul(te,De)|0,I=I+Math.imul(te,Be)|0,I=I+Math.imul(Q,De)|0,V=V+Math.imul(Q,Be)|0,G=G+Math.imul(we,Me)|0,I=I+Math.imul(we,qe)|0,I=I+Math.imul(le,Me)|0,V=V+Math.imul(le,qe)|0,G=G+Math.imul(oe,Fe)|0,I=I+Math.imul(oe,Ye)|0,I=I+Math.imul(ue,Fe)|0,V=V+Math.imul(ue,Ye)|0,G=G+Math.imul(me,Je)|0,I=I+Math.imul(me,je)|0,I=I+Math.imul(Se,Je)|0,V=V+Math.imul(Se,je)|0,G=G+Math.imul(z,Ve)|0,I=I+Math.imul(z,et)|0,I=I+Math.imul(ie,Ve)|0,V=V+Math.imul(ie,et)|0;var Oe=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,G=Math.imul(de,ae),I=Math.imul(de,_e),I=I+Math.imul(j,ae)|0,V=Math.imul(j,_e),G=G+Math.imul(y,Pe)|0,I=I+Math.imul(y,Ue)|0,I=I+Math.imul(U,Pe)|0,V=V+Math.imul(U,Ue)|0,G=G+Math.imul(he,Ae)|0,I=I+Math.imul(he,Re)|0,I=I+Math.imul(ge,Ae)|0,V=V+Math.imul(ge,Re)|0,G=G+Math.imul(W,De)|0,I=I+Math.imul(W,Be)|0,I=I+Math.imul(X,De)|0,V=V+Math.imul(X,Be)|0,G=G+Math.imul(te,Me)|0,I=I+Math.imul(te,qe)|0,I=I+Math.imul(Q,Me)|0,V=V+Math.imul(Q,qe)|0,G=G+Math.imul(we,Fe)|0,I=I+Math.imul(we,Ye)|0,I=I+Math.imul(le,Fe)|0,V=V+Math.imul(le,Ye)|0,G=G+Math.imul(oe,Je)|0,I=I+Math.imul(oe,je)|0,I=I+Math.imul(ue,Je)|0,V=V+Math.imul(ue,je)|0,G=G+Math.imul(me,Ve)|0,I=I+Math.imul(me,et)|0,I=I+Math.imul(Se,Ve)|0,V=V+Math.imul(Se,et)|0,G=G+Math.imul(z,Ge)|0,I=I+Math.imul(z,rt)|0,I=I+Math.imul(ie,Ge)|0,V=V+Math.imul(ie,rt)|0;var Ie=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,G=Math.imul(F,ae),I=Math.imul(F,_e),I=I+Math.imul(K,ae)|0,V=Math.imul(K,_e),G=G+Math.imul(de,Pe)|0,I=I+Math.imul(de,Ue)|0,I=I+Math.imul(j,Pe)|0,V=V+Math.imul(j,Ue)|0,G=G+Math.imul(y,Ae)|0,I=I+Math.imul(y,Re)|0,I=I+Math.imul(U,Ae)|0,V=V+Math.imul(U,Re)|0,G=G+Math.imul(he,De)|0,I=I+Math.imul(he,Be)|0,I=I+Math.imul(ge,De)|0,V=V+Math.imul(ge,Be)|0,G=G+Math.imul(W,Me)|0,I=I+Math.imul(W,qe)|0,I=I+Math.imul(X,Me)|0,V=V+Math.imul(X,qe)|0,G=G+Math.imul(te,Fe)|0,I=I+Math.imul(te,Ye)|0,I=I+Math.imul(Q,Fe)|0,V=V+Math.imul(Q,Ye)|0,G=G+Math.imul(we,Je)|0,I=I+Math.imul(we,je)|0,I=I+Math.imul(le,Je)|0,V=V+Math.imul(le,je)|0,G=G+Math.imul(oe,Ve)|0,I=I+Math.imul(oe,et)|0,I=I+Math.imul(ue,Ve)|0,V=V+Math.imul(ue,et)|0,G=G+Math.imul(me,Ge)|0,I=I+Math.imul(me,rt)|0,I=I+Math.imul(Se,Ge)|0,V=V+Math.imul(Se,rt)|0,G=G+Math.imul(z,Le)|0,I=I+Math.imul(z,nt)|0,I=I+Math.imul(ie,Le)|0,V=V+Math.imul(ie,nt)|0;var Ce=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,G=Math.imul(F,Pe),I=Math.imul(F,Ue),I=I+Math.imul(K,Pe)|0,V=Math.imul(K,Ue),G=G+Math.imul(de,Ae)|0,I=I+Math.imul(de,Re)|0,I=I+Math.imul(j,Ae)|0,V=V+Math.imul(j,Re)|0,G=G+Math.imul(y,De)|0,I=I+Math.imul(y,Be)|0,I=I+Math.imul(U,De)|0,V=V+Math.imul(U,Be)|0,G=G+Math.imul(he,Me)|0,I=I+Math.imul(he,qe)|0,I=I+Math.imul(ge,Me)|0,V=V+Math.imul(ge,qe)|0,G=G+Math.imul(W,Fe)|0,I=I+Math.imul(W,Ye)|0,I=I+Math.imul(X,Fe)|0,V=V+Math.imul(X,Ye)|0,G=G+Math.imul(te,Je)|0,I=I+Math.imul(te,je)|0,I=I+Math.imul(Q,Je)|0,V=V+Math.imul(Q,je)|0,G=G+Math.imul(we,Ve)|0,I=I+Math.imul(we,et)|0,I=I+Math.imul(le,Ve)|0,V=V+Math.imul(le,et)|0,G=G+Math.imul(oe,Ge)|0,I=I+Math.imul(oe,rt)|0,I=I+Math.imul(ue,Ge)|0,V=V+Math.imul(ue,rt)|0,G=G+Math.imul(me,Le)|0,I=I+Math.imul(me,nt)|0,I=I+Math.imul(Se,Le)|0,V=V+Math.imul(Se,nt)|0;var We=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(We>>>26)|0,We&=67108863,G=Math.imul(F,Ae),I=Math.imul(F,Re),I=I+Math.imul(K,Ae)|0,V=Math.imul(K,Re),G=G+Math.imul(de,De)|0,I=I+Math.imul(de,Be)|0,I=I+Math.imul(j,De)|0,V=V+Math.imul(j,Be)|0,G=G+Math.imul(y,Me)|0,I=I+Math.imul(y,qe)|0,I=I+Math.imul(U,Me)|0,V=V+Math.imul(U,qe)|0,G=G+Math.imul(he,Fe)|0,I=I+Math.imul(he,Ye)|0,I=I+Math.imul(ge,Fe)|0,V=V+Math.imul(ge,Ye)|0,G=G+Math.imul(W,Je)|0,I=I+Math.imul(W,je)|0,I=I+Math.imul(X,Je)|0,V=V+Math.imul(X,je)|0,G=G+Math.imul(te,Ve)|0,I=I+Math.imul(te,et)|0,I=I+Math.imul(Q,Ve)|0,V=V+Math.imul(Q,et)|0,G=G+Math.imul(we,Ge)|0,I=I+Math.imul(we,rt)|0,I=I+Math.imul(le,Ge)|0,V=V+Math.imul(le,rt)|0,G=G+Math.imul(oe,Le)|0,I=I+Math.imul(oe,nt)|0,I=I+Math.imul(ue,Le)|0,V=V+Math.imul(ue,nt)|0;var st=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(st>>>26)|0,st&=67108863,G=Math.imul(F,De),I=Math.imul(F,Be),I=I+Math.imul(K,De)|0,V=Math.imul(K,Be),G=G+Math.imul(de,Me)|0,I=I+Math.imul(de,qe)|0,I=I+Math.imul(j,Me)|0,V=V+Math.imul(j,qe)|0,G=G+Math.imul(y,Fe)|0,I=I+Math.imul(y,Ye)|0,I=I+Math.imul(U,Fe)|0,V=V+Math.imul(U,Ye)|0,G=G+Math.imul(he,Je)|0,I=I+Math.imul(he,je)|0,I=I+Math.imul(ge,Je)|0,V=V+Math.imul(ge,je)|0,G=G+Math.imul(W,Ve)|0,I=I+Math.imul(W,et)|0,I=I+Math.imul(X,Ve)|0,V=V+Math.imul(X,et)|0,G=G+Math.imul(te,Ge)|0,I=I+Math.imul(te,rt)|0,I=I+Math.imul(Q,Ge)|0,V=V+Math.imul(Q,rt)|0,G=G+Math.imul(we,Le)|0,I=I+Math.imul(we,nt)|0,I=I+Math.imul(le,Le)|0,V=V+Math.imul(le,nt)|0;var at=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(at>>>26)|0,at&=67108863,G=Math.imul(F,Me),I=Math.imul(F,qe),I=I+Math.imul(K,Me)|0,V=Math.imul(K,qe),G=G+Math.imul(de,Fe)|0,I=I+Math.imul(de,Ye)|0,I=I+Math.imul(j,Fe)|0,V=V+Math.imul(j,Ye)|0,G=G+Math.imul(y,Je)|0,I=I+Math.imul(y,je)|0,I=I+Math.imul(U,Je)|0,V=V+Math.imul(U,je)|0,G=G+Math.imul(he,Ve)|0,I=I+Math.imul(he,et)|0,I=I+Math.imul(ge,Ve)|0,V=V+Math.imul(ge,et)|0,G=G+Math.imul(W,Ge)|0,I=I+Math.imul(W,rt)|0,I=I+Math.imul(X,Ge)|0,V=V+Math.imul(X,rt)|0,G=G+Math.imul(te,Le)|0,I=I+Math.imul(te,nt)|0,I=I+Math.imul(Q,Le)|0,V=V+Math.imul(Q,nt)|0;var dt=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(dt>>>26)|0,dt&=67108863,G=Math.imul(F,Fe),I=Math.imul(F,Ye),I=I+Math.imul(K,Fe)|0,V=Math.imul(K,Ye),G=G+Math.imul(de,Je)|0,I=I+Math.imul(de,je)|0,I=I+Math.imul(j,Je)|0,V=V+Math.imul(j,je)|0,G=G+Math.imul(y,Ve)|0,I=I+Math.imul(y,et)|0,I=I+Math.imul(U,Ve)|0,V=V+Math.imul(U,et)|0,G=G+Math.imul(he,Ge)|0,I=I+Math.imul(he,rt)|0,I=I+Math.imul(ge,Ge)|0,V=V+Math.imul(ge,rt)|0,G=G+Math.imul(W,Le)|0,I=I+Math.imul(W,nt)|0,I=I+Math.imul(X,Le)|0,V=V+Math.imul(X,nt)|0;var ot=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ot>>>26)|0,ot&=67108863,G=Math.imul(F,Je),I=Math.imul(F,je),I=I+Math.imul(K,Je)|0,V=Math.imul(K,je),G=G+Math.imul(de,Ve)|0,I=I+Math.imul(de,et)|0,I=I+Math.imul(j,Ve)|0,V=V+Math.imul(j,et)|0,G=G+Math.imul(y,Ge)|0,I=I+Math.imul(y,rt)|0,I=I+Math.imul(U,Ge)|0,V=V+Math.imul(U,rt)|0,G=G+Math.imul(he,Le)|0,I=I+Math.imul(he,nt)|0,I=I+Math.imul(ge,Le)|0,V=V+Math.imul(ge,nt)|0;var ct=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ct>>>26)|0,ct&=67108863,G=Math.imul(F,Ve),I=Math.imul(F,et),I=I+Math.imul(K,Ve)|0,V=Math.imul(K,et),G=G+Math.imul(de,Ge)|0,I=I+Math.imul(de,rt)|0,I=I+Math.imul(j,Ge)|0,V=V+Math.imul(j,rt)|0,G=G+Math.imul(y,Le)|0,I=I+Math.imul(y,nt)|0,I=I+Math.imul(U,Le)|0,V=V+Math.imul(U,nt)|0;var ut=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ut>>>26)|0,ut&=67108863,G=Math.imul(F,Ge),I=Math.imul(F,rt),I=I+Math.imul(K,Ge)|0,V=Math.imul(K,rt),G=G+Math.imul(de,Le)|0,I=I+Math.imul(de,nt)|0,I=I+Math.imul(j,Le)|0,V=V+Math.imul(j,nt)|0;var ft=(J+G|0)+((I&8191)<<13)|0;J=(V+(I>>>13)|0)+(ft>>>26)|0,ft&=67108863,G=Math.imul(F,Le),I=Math.imul(F,nt),I=I+Math.imul(K,Le)|0,V=Math.imul(K,nt);var lt=(J+G|0)+((I&8191)<<13)|0;return J=(V+(I>>>13)|0)+(lt>>>26)|0,lt&=67108863,A[0]=Ke,A[1]=Ze,A[2]=ne,A[3]=pe,A[4]=be,A[5]=Ee,A[6]=Te,A[7]=Oe,A[8]=Ie,A[9]=Ce,A[10]=We,A[11]=st,A[12]=at,A[13]=dt,A[14]=ot,A[15]=ct,A[16]=ut,A[17]=ft,A[18]=lt,J!==0&&(A[19]=J,g.length++),g};Math.imul||(k=w);function C(x,b,_){_.negative=b.negative^x.negative,_.length=x.length+b.length;for(var g=0,E=0,T=0;T<_.length-1;T++){var A=E;E=0;for(var J=g&67108863,G=Math.min(T,b.length-1),I=Math.max(0,T-x.length+1);I<=G;I++){var V=T-I,L=x.words[V]|0,z=b.words[I]|0,ie=L*z,se=ie&67108863;A=A+(ie/67108864|0)|0,se=se+J|0,J=se&67108863,A=A+(se>>>26)|0,E+=A>>>26,A&=67108863}_.words[T]=J,g=A,A=E}return g!==0?_.words[T]=g:_.length--,_.strip()}function O(x,b,_){var g=new P;return g.mulp(x,b,_)}o.prototype.mulTo=function(b,_){var g,E=this.length+b.length;return this.length===10&&b.length===10?g=k(this,b,_):E<63?g=w(this,b,_):E<1024?g=C(this,b,_):g=O(this,b,_),g};function P(x,b){this.x=x,this.y=b}P.prototype.makeRBT=function(b){for(var _=new Array(b),g=o.prototype._countBits(b)-1,E=0;E<b;E++)_[E]=this.revBin(E,g,b);return _},P.prototype.revBin=function(b,_,g){if(b===0||b===g-1)return b;for(var E=0,T=0;T<_;T++)E|=(b&1)<<_-T-1,b>>=1;return E},P.prototype.permute=function(b,_,g,E,T,A){for(var J=0;J<A;J++)E[J]=_[b[J]],T[J]=g[b[J]]},P.prototype.transform=function(b,_,g,E,T,A){this.permute(A,b,_,g,E,T);for(var J=1;J<T;J<<=1)for(var G=J<<1,I=Math.cos(2*Math.PI/G),V=Math.sin(2*Math.PI/G),L=0;L<T;L+=G)for(var z=I,ie=V,se=0;se<J;se++){var me=g[L+se],Se=E[L+se],ke=g[L+se+J],oe=E[L+se+J],ue=z*ke-ie*oe;oe=z*oe+ie*ke,ke=ue,g[L+se]=me+ke,E[L+se]=Se+oe,g[L+se+J]=me-ke,E[L+se+J]=Se-oe,se!==G&&(ue=I*z-V*ie,ie=I*ie+V*z,z=ue)}},P.prototype.guessLen13b=function(b,_){var g=Math.max(_,b)|1,E=g&1,T=0;for(g=g/2|0;g;g=g>>>1)T++;return 1<<T+1+E},P.prototype.conjugate=function(b,_,g){if(!(g<=1))for(var E=0;E<g/2;E++){var T=b[E];b[E]=b[g-E-1],b[g-E-1]=T,T=_[E],_[E]=-_[g-E-1],_[g-E-1]=-T}},P.prototype.normalize13b=function(b,_){for(var g=0,E=0;E<_/2;E++){var T=Math.round(b[2*E+1]/_)*8192+Math.round(b[2*E]/_)+g;b[E]=T&67108863,T<67108864?g=0:g=T/67108864|0}return b},P.prototype.convert13b=function(b,_,g,E){for(var T=0,A=0;A<_;A++)T=T+(b[A]|0),g[2*A]=T&8191,T=T>>>13,g[2*A+1]=T&8191,T=T>>>13;for(A=2*_;A<E;++A)g[A]=0;s(T===0),s((T&-8192)===0)},P.prototype.stub=function(b){for(var _=new Array(b),g=0;g<b;g++)_[g]=0;return _},P.prototype.mulp=function(b,_,g){var E=2*this.guessLen13b(b.length,_.length),T=this.makeRBT(E),A=this.stub(E),J=new Array(E),G=new Array(E),I=new Array(E),V=new Array(E),L=new Array(E),z=new Array(E),ie=g.words;ie.length=E,this.convert13b(b.words,b.length,J,E),this.convert13b(_.words,_.length,V,E),this.transform(J,A,G,I,E,T),this.transform(V,A,L,z,E,T);for(var se=0;se<E;se++){var me=G[se]*L[se]-I[se]*z[se];I[se]=G[se]*z[se]+I[se]*L[se],G[se]=me}return this.conjugate(G,I,E),this.transform(G,I,ie,A,E,T),this.conjugate(ie,A,E),this.normalize13b(ie,E),g.negative=b.negative^_.negative,g.length=b.length+_.length,g.strip()},o.prototype.mul=function(b){var _=new o(null);return _.words=new Array(this.length+b.length),this.mulTo(b,_)},o.prototype.mulf=function(b){var _=new o(null);return _.words=new Array(this.length+b.length),O(this,b,_)},o.prototype.imul=function(b){return this.clone().mulTo(b,this)},o.prototype.imuln=function(b){s(typeof b=="number"),s(b<67108864);for(var _=0,g=0;g<this.length;g++){var E=(this.words[g]|0)*b,T=(E&67108863)+(_&67108863);_>>=26,_+=E/67108864|0,_+=T>>>26,this.words[g]=T&67108863}return _!==0&&(this.words[g]=_,this.length++),this},o.prototype.muln=function(b){return this.clone().imuln(b)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(b){var _=m(b);if(_.length===0)return new o(1);for(var g=this,E=0;E<_.length&&_[E]===0;E++,g=g.sqr());if(++E<_.length)for(var T=g.sqr();E<_.length;E++,T=T.sqr())_[E]!==0&&(g=g.mul(T));return g},o.prototype.iushln=function(b){s(typeof b=="number"&&b>=0);var _=b%26,g=(b-_)/26,E=67108863>>>26-_<<26-_,T;if(_!==0){var A=0;for(T=0;T<this.length;T++){var J=this.words[T]&E,G=(this.words[T]|0)-J<<_;this.words[T]=G|A,A=J>>>26-_}A&&(this.words[T]=A,this.length++)}if(g!==0){for(T=this.length-1;T>=0;T--)this.words[T+g]=this.words[T];for(T=0;T<g;T++)this.words[T]=0;this.length+=g}return this.strip()},o.prototype.ishln=function(b){return s(this.negative===0),this.iushln(b)},o.prototype.iushrn=function(b,_,g){s(typeof b=="number"&&b>=0);var E;_?E=(_-_%26)/26:E=0;var T=b%26,A=Math.min((b-T)/26,this.length),J=67108863^67108863>>>T<<T,G=g;if(E-=A,E=Math.max(0,E),G){for(var I=0;I<A;I++)G.words[I]=this.words[I];G.length=A}if(A!==0)if(this.length>A)for(this.length-=A,I=0;I<this.length;I++)this.words[I]=this.words[I+A];else this.words[0]=0,this.length=1;var V=0;for(I=this.length-1;I>=0&&(V!==0||I>=E);I--){var L=this.words[I]|0;this.words[I]=V<<26-T|L>>>T,V=L&J}return G&&V!==0&&(G.words[G.length++]=V),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(b,_,g){return s(this.negative===0),this.iushrn(b,_,g)},o.prototype.shln=function(b){return this.clone().ishln(b)},o.prototype.ushln=function(b){return this.clone().iushln(b)},o.prototype.shrn=function(b){return this.clone().ishrn(b)},o.prototype.ushrn=function(b){return this.clone().iushrn(b)},o.prototype.testn=function(b){s(typeof b=="number"&&b>=0);var _=b%26,g=(b-_)/26,E=1<<_;if(this.length<=g)return!1;var T=this.words[g];return!!(T&E)},o.prototype.imaskn=function(b){s(typeof b=="number"&&b>=0);var _=b%26,g=(b-_)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(_!==0&&g++,this.length=Math.min(g,this.length),_!==0){var E=67108863^67108863>>>_<<_;this.words[this.length-1]&=E}return this.strip()},o.prototype.maskn=function(b){return this.clone().imaskn(b)},o.prototype.iaddn=function(b){return s(typeof b=="number"),s(b<67108864),b<0?this.isubn(-b):this.negative!==0?this.length===1&&(this.words[0]|0)<b?(this.words[0]=b-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(b),this.negative=1,this):this._iaddn(b)},o.prototype._iaddn=function(b){this.words[0]+=b;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},o.prototype.isubn=function(b){if(s(typeof b=="number"),s(b<67108864),b<0)return this.iaddn(-b);if(this.negative!==0)return this.negative=0,this.iaddn(b),this.negative=1,this;if(this.words[0]-=b,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},o.prototype.addn=function(b){return this.clone().iaddn(b)},o.prototype.subn=function(b){return this.clone().isubn(b)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(b,_,g){var E=b.length+g,T;this._expand(E);var A,J=0;for(T=0;T<b.length;T++){A=(this.words[T+g]|0)+J;var G=(b.words[T]|0)*_;A-=G&67108863,J=(A>>26)-(G/67108864|0),this.words[T+g]=A&67108863}for(;T<this.length-g;T++)A=(this.words[T+g]|0)+J,J=A>>26,this.words[T+g]=A&67108863;if(J===0)return this.strip();for(s(J===-1),J=0,T=0;T<this.length;T++)A=-(this.words[T]|0)+J,J=A>>26,this.words[T]=A&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(b,_){var g=this.length-b.length,E=this.clone(),T=b,A=T.words[T.length-1]|0,J=this._countBits(A);g=26-J,g!==0&&(T=T.ushln(g),E.iushln(g),A=T.words[T.length-1]|0);var G=E.length-T.length,I;if(_!=="mod"){I=new o(null),I.length=G+1,I.words=new Array(I.length);for(var V=0;V<I.length;V++)I.words[V]=0}var L=E.clone()._ishlnsubmul(T,1,G);L.negative===0&&(E=L,I&&(I.words[G]=1));for(var z=G-1;z>=0;z--){var ie=(E.words[T.length+z]|0)*67108864+(E.words[T.length+z-1]|0);for(ie=Math.min(ie/A|0,67108863),E._ishlnsubmul(T,ie,z);E.negative!==0;)ie--,E.negative=0,E._ishlnsubmul(T,1,z),E.isZero()||(E.negative^=1);I&&(I.words[z]=ie)}return I&&I.strip(),E.strip(),_!=="div"&&g!==0&&E.iushrn(g),{div:I||null,mod:E}},o.prototype.divmod=function(b,_,g){if(s(!b.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var E,T,A;return this.negative!==0&&b.negative===0?(A=this.neg().divmod(b,_),_!=="mod"&&(E=A.div.neg()),_!=="div"&&(T=A.mod.neg(),g&&T.negative!==0&&T.iadd(b)),{div:E,mod:T}):this.negative===0&&b.negative!==0?(A=this.divmod(b.neg(),_),_!=="mod"&&(E=A.div.neg()),{div:E,mod:A.mod}):this.negative&b.negative?(A=this.neg().divmod(b.neg(),_),_!=="div"&&(T=A.mod.neg(),g&&T.negative!==0&&T.isub(b)),{div:A.div,mod:T}):b.length>this.length||this.cmp(b)<0?{div:new o(0),mod:this}:b.length===1?_==="div"?{div:this.divn(b.words[0]),mod:null}:_==="mod"?{div:null,mod:new o(this.modn(b.words[0]))}:{div:this.divn(b.words[0]),mod:new o(this.modn(b.words[0]))}:this._wordDiv(b,_)},o.prototype.div=function(b){return this.divmod(b,"div",!1).div},o.prototype.mod=function(b){return this.divmod(b,"mod",!1).mod},o.prototype.umod=function(b){return this.divmod(b,"mod",!0).mod},o.prototype.divRound=function(b){var _=this.divmod(b);if(_.mod.isZero())return _.div;var g=_.div.negative!==0?_.mod.isub(b):_.mod,E=b.ushrn(1),T=b.andln(1),A=g.cmp(E);return A<0||T===1&&A===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},o.prototype.modn=function(b){s(b<=67108863);for(var _=(1<<26)%b,g=0,E=this.length-1;E>=0;E--)g=(_*g+(this.words[E]|0))%b;return g},o.prototype.idivn=function(b){s(b<=67108863);for(var _=0,g=this.length-1;g>=0;g--){var E=(this.words[g]|0)+_*67108864;this.words[g]=E/b|0,_=E%b}return this.strip()},o.prototype.divn=function(b){return this.clone().idivn(b)},o.prototype.egcd=function(b){s(b.negative===0),s(!b.isZero());var _=this,g=b.clone();_.negative!==0?_=_.umod(b):_=_.clone();for(var E=new o(1),T=new o(0),A=new o(0),J=new o(1),G=0;_.isEven()&&g.isEven();)_.iushrn(1),g.iushrn(1),++G;for(var I=g.clone(),V=_.clone();!_.isZero();){for(var L=0,z=1;!(_.words[0]&z)&&L<26;++L,z<<=1);if(L>0)for(_.iushrn(L);L-- >0;)(E.isOdd()||T.isOdd())&&(E.iadd(I),T.isub(V)),E.iushrn(1),T.iushrn(1);for(var ie=0,se=1;!(g.words[0]&se)&&ie<26;++ie,se<<=1);if(ie>0)for(g.iushrn(ie);ie-- >0;)(A.isOdd()||J.isOdd())&&(A.iadd(I),J.isub(V)),A.iushrn(1),J.iushrn(1);_.cmp(g)>=0?(_.isub(g),E.isub(A),T.isub(J)):(g.isub(_),A.isub(E),J.isub(T))}return{a:A,b:J,gcd:g.iushln(G)}},o.prototype._invmp=function(b){s(b.negative===0),s(!b.isZero());var _=this,g=b.clone();_.negative!==0?_=_.umod(b):_=_.clone();for(var E=new o(1),T=new o(0),A=g.clone();_.cmpn(1)>0&&g.cmpn(1)>0;){for(var J=0,G=1;!(_.words[0]&G)&&J<26;++J,G<<=1);if(J>0)for(_.iushrn(J);J-- >0;)E.isOdd()&&E.iadd(A),E.iushrn(1);for(var I=0,V=1;!(g.words[0]&V)&&I<26;++I,V<<=1);if(I>0)for(g.iushrn(I);I-- >0;)T.isOdd()&&T.iadd(A),T.iushrn(1);_.cmp(g)>=0?(_.isub(g),E.isub(T)):(g.isub(_),T.isub(E))}var L;return _.cmpn(1)===0?L=E:L=T,L.cmpn(0)<0&&L.iadd(b),L},o.prototype.gcd=function(b){if(this.isZero())return b.abs();if(b.isZero())return this.abs();var _=this.clone(),g=b.clone();_.negative=0,g.negative=0;for(var E=0;_.isEven()&&g.isEven();E++)_.iushrn(1),g.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;g.isEven();)g.iushrn(1);var T=_.cmp(g);if(T<0){var A=_;_=g,g=A}else if(T===0||g.cmpn(1)===0)break;_.isub(g)}while(!0);return g.iushln(E)},o.prototype.invm=function(b){return this.egcd(b).a.umod(b)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(b){return this.words[0]&b},o.prototype.bincn=function(b){s(typeof b=="number");var _=b%26,g=(b-_)/26,E=1<<_;if(this.length<=g)return this._expand(g+1),this.words[g]|=E,this;for(var T=E,A=g;T!==0&&A<this.length;A++){var J=this.words[A]|0;J+=T,T=J>>>26,J&=67108863,this.words[A]=J}return T!==0&&(this.words[A]=T,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(b){var _=b<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var g;if(this.length>1)g=1;else{_&&(b=-b),s(b<=67108863,"Number is too big");var E=this.words[0]|0;g=E===b?0:E<b?-1:1}return this.negative!==0?-g|0:g},o.prototype.cmp=function(b){if(this.negative!==0&&b.negative===0)return-1;if(this.negative===0&&b.negative!==0)return 1;var _=this.ucmp(b);return this.negative!==0?-_|0:_},o.prototype.ucmp=function(b){if(this.length>b.length)return 1;if(this.length<b.length)return-1;for(var _=0,g=this.length-1;g>=0;g--){var E=this.words[g]|0,T=b.words[g]|0;if(E!==T){E<T?_=-1:E>T&&(_=1);break}}return _},o.prototype.gtn=function(b){return this.cmpn(b)===1},o.prototype.gt=function(b){return this.cmp(b)===1},o.prototype.gten=function(b){return this.cmpn(b)>=0},o.prototype.gte=function(b){return this.cmp(b)>=0},o.prototype.ltn=function(b){return this.cmpn(b)===-1},o.prototype.lt=function(b){return this.cmp(b)===-1},o.prototype.lten=function(b){return this.cmpn(b)<=0},o.prototype.lte=function(b){return this.cmp(b)<=0},o.prototype.eqn=function(b){return this.cmpn(b)===0},o.prototype.eq=function(b){return this.cmp(b)===0},o.red=function(b){return new Y(b)},o.prototype.toRed=function(b){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),b.convertTo(this)._forceRed(b)},o.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(b){return this.red=b,this},o.prototype.forceRed=function(b){return s(!this.red,"Already a number in reduction context"),this._forceRed(b)},o.prototype.redAdd=function(b){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,b)},o.prototype.redIAdd=function(b){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,b)},o.prototype.redSub=function(b){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,b)},o.prototype.redISub=function(b){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,b)},o.prototype.redShl=function(b){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,b)},o.prototype.redMul=function(b){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.mul(this,b)},o.prototype.redIMul=function(b){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,b),this.red.imul(this,b)},o.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(b){return s(this.red&&!b.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,b)};var M={k256:null,p224:null,p192:null,p25519:null};function D(x,b){this.name=x,this.p=new o(b,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}D.prototype._tmp=function(){var b=new o(null);return b.words=new Array(Math.ceil(this.n/13)),b},D.prototype.ireduce=function(b){var _=b,g;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),g=_.bitLength();while(g>this.n);var E=g<this.n?-1:_.ucmp(this.p);return E===0?(_.words[0]=0,_.length=1):E>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},D.prototype.split=function(b,_){b.iushrn(this.n,0,_)},D.prototype.imulK=function(b){return b.imul(this.k)};function $(){D.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d($,D),$.prototype.split=function(b,_){for(var g=4194303,E=Math.min(b.length,9),T=0;T<E;T++)_.words[T]=b.words[T];if(_.length=E,b.length<=9){b.words[0]=0,b.length=1;return}var A=b.words[9];for(_.words[_.length++]=A&g,T=10;T<b.length;T++){var J=b.words[T]|0;b.words[T-10]=(J&g)<<4|A>>>22,A=J}A>>>=22,b.words[T-10]=A,A===0&&b.length>10?b.length-=10:b.length-=9},$.prototype.imulK=function(b){b.words[b.length]=0,b.words[b.length+1]=0,b.length+=2;for(var _=0,g=0;g<b.length;g++){var E=b.words[g]|0;_+=E*977,b.words[g]=_&67108863,_=E*64+(_/67108864|0)}return b.words[b.length-1]===0&&(b.length--,b.words[b.length-1]===0&&b.length--),b};function H(){D.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(H,D);function Z(){D.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(Z,D);function re(){D.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(re,D),re.prototype.imulK=function(b){for(var _=0,g=0;g<b.length;g++){var E=(b.words[g]|0)*19+_,T=E&67108863;E>>>=26,b.words[g]=T,_=E}return _!==0&&(b.words[b.length++]=_),b},o._prime=function(b){if(M[b])return M[b];var _;if(b==="k256")_=new $;else if(b==="p224")_=new H;else if(b==="p192")_=new Z;else if(b==="p25519")_=new re;else throw new Error("Unknown prime "+b);return M[b]=_,_};function Y(x){if(typeof x=="string"){var b=o._prime(x);this.m=b.p,this.prime=b}else s(x.gtn(1),"modulus must be greater than 1"),this.m=x,this.prime=null}Y.prototype._verify1=function(b){s(b.negative===0,"red works only with positives"),s(b.red,"red works only with red numbers")},Y.prototype._verify2=function(b,_){s((b.negative|_.negative)===0,"red works only with positives"),s(b.red&&b.red===_.red,"red works only with red numbers")},Y.prototype.imod=function(b){return this.prime?this.prime.ireduce(b)._forceRed(this):b.umod(this.m)._forceRed(this)},Y.prototype.neg=function(b){return b.isZero()?b.clone():this.m.sub(b)._forceRed(this)},Y.prototype.add=function(b,_){this._verify2(b,_);var g=b.add(_);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},Y.prototype.iadd=function(b,_){this._verify2(b,_);var g=b.iadd(_);return g.cmp(this.m)>=0&&g.isub(this.m),g},Y.prototype.sub=function(b,_){this._verify2(b,_);var g=b.sub(_);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},Y.prototype.isub=function(b,_){this._verify2(b,_);var g=b.isub(_);return g.cmpn(0)<0&&g.iadd(this.m),g},Y.prototype.shl=function(b,_){return this._verify1(b),this.imod(b.ushln(_))},Y.prototype.imul=function(b,_){return this._verify2(b,_),this.imod(b.imul(_))},Y.prototype.mul=function(b,_){return this._verify2(b,_),this.imod(b.mul(_))},Y.prototype.isqr=function(b){return this.imul(b,b.clone())},Y.prototype.sqr=function(b){return this.mul(b,b)},Y.prototype.sqrt=function(b){if(b.isZero())return b.clone();var _=this.m.andln(3);if(s(_%2===1),_===3){var g=this.m.add(new o(1)).iushrn(2);return this.pow(b,g)}for(var E=this.m.subn(1),T=0;!E.isZero()&&E.andln(1)===0;)T++,E.iushrn(1);s(!E.isZero());var A=new o(1).toRed(this),J=A.redNeg(),G=this.m.subn(1).iushrn(1),I=this.m.bitLength();for(I=new o(2*I*I).toRed(this);this.pow(I,G).cmp(J)!==0;)I.redIAdd(J);for(var V=this.pow(I,E),L=this.pow(b,E.addn(1).iushrn(1)),z=this.pow(b,E),ie=T;z.cmp(A)!==0;){for(var se=z,me=0;se.cmp(A)!==0;me++)se=se.redSqr();s(me<ie);var Se=this.pow(V,new o(1).iushln(ie-me-1));L=L.redMul(Se),V=Se.redSqr(),z=z.redMul(V),ie=me}return L},Y.prototype.invm=function(b){var _=b._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},Y.prototype.pow=function(b,_){if(_.isZero())return new o(1).toRed(this);if(_.cmpn(1)===0)return b.clone();var g=4,E=new Array(1<<g);E[0]=new o(1).toRed(this),E[1]=b;for(var T=2;T<E.length;T++)E[T]=this.mul(E[T-1],b);var A=E[0],J=0,G=0,I=_.bitLength()%26;for(I===0&&(I=26),T=_.length-1;T>=0;T--){for(var V=_.words[T],L=I-1;L>=0;L--){var z=V>>L&1;if(A!==E[0]&&(A=this.sqr(A)),z===0&&J===0){G=0;continue}J<<=1,J|=z,G++,!(G!==g&&(T!==0||L!==0))&&(A=this.mul(A,E[J]),G=0,J=0)}I=26}return A},Y.prototype.convertTo=function(b){var _=b.umod(this.m);return _===b?_.clone():_},Y.prototype.convertFrom=function(b){var _=b.clone();return _.red=null,_},o.mont=function(b){return new N(b)};function N(x){Y.call(this,x),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(N,Y),N.prototype.convertTo=function(b){return this.imod(b.ushln(this.shift))},N.prototype.convertFrom=function(b){var _=this.imod(b.mul(this.rinv));return _.red=null,_},N.prototype.imul=function(b,_){if(b.isZero()||_.isZero())return b.words[0]=0,b.length=1,b;var g=b.imul(_),E=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=g.isub(E).iushrn(this.shift),A=T;return T.cmp(this.m)>=0?A=T.isub(this.m):T.cmpn(0)<0&&(A=T.iadd(this.m)),A._forceRed(this)},N.prototype.mul=function(b,_){if(b.isZero()||_.isZero())return new o(0)._forceRed(this);var g=b.mul(_),E=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),T=g.isub(E).iushrn(this.shift),A=T;return T.cmp(this.m)>=0?A=T.isub(this.m):T.cmpn(0)<0&&(A=T.iadd(this.m)),A._forceRed(this)},N.prototype.invm=function(b){var _=this.imod(b._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(typeof i>"u"||i,this)},{buffer:142}],140:[function(e,i,t){(function(n,a){function s(_,g){if(!_)throw new Error(g||"Assertion failed")}function d(_,g){_.super_=g;var E=function(){};E.prototype=g.prototype,_.prototype=new E,_.prototype.constructor=_}function o(_,g,E){if(o.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((g==="le"||g==="be")&&(E=g,g=10),this._init(_||0,g||10,E||"be"))}typeof n=="object"?n.exports=o:a.BN=o,o.BN=o,o.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=e("buffer").Buffer}catch{}o.isBN=function(g){return g instanceof o?!0:g!==null&&typeof g=="object"&&g.constructor.wordSize===o.wordSize&&Array.isArray(g.words)},o.max=function(g,E){return g.cmp(E)>0?g:E},o.min=function(g,E){return g.cmp(E)<0?g:E},o.prototype._init=function(g,E,T){if(typeof g=="number")return this._initNumber(g,E,T);if(typeof g=="object")return this._initArray(g,E,T);E==="hex"&&(E=16),s(E===(E|0)&&E>=2&&E<=36),g=g.toString().replace(/\s+/g,"");var A=0;g[0]==="-"&&(A++,this.negative=1),A<g.length&&(E===16?this._parseHex(g,A,T):(this._parseBase(g,E,A),T==="le"&&this._initArray(this.toArray(),E,T)))},o.prototype._initNumber=function(g,E,T){g<0&&(this.negative=1,g=-g),g<67108864?(this.words=[g&67108863],this.length=1):g<4503599627370496?(this.words=[g&67108863,g/67108864&67108863],this.length=2):(s(g<9007199254740992),this.words=[g&67108863,g/67108864&67108863,1],this.length=3),T==="le"&&this._initArray(this.toArray(),E,T)},o.prototype._initArray=function(g,E,T){if(s(typeof g.length=="number"),g.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(g.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var J,G,I=0;if(T==="be")for(A=g.length-1,J=0;A>=0;A-=3)G=g[A]|g[A-1]<<8|g[A-2]<<16,this.words[J]|=G<<I&67108863,this.words[J+1]=G>>>26-I&67108863,I+=24,I>=26&&(I-=26,J++);else if(T==="le")for(A=0,J=0;A<g.length;A+=3)G=g[A]|g[A+1]<<8|g[A+2]<<16,this.words[J]|=G<<I&67108863,this.words[J+1]=G>>>26-I&67108863,I+=24,I>=26&&(I-=26,J++);return this._strip()};function c(_,g){var E=_.charCodeAt(g);if(E>=48&&E<=57)return E-48;if(E>=65&&E<=70)return E-55;if(E>=97&&E<=102)return E-87;s(!1,"Invalid character in "+_)}function p(_,g,E){var T=c(_,E);return E-1>=g&&(T|=c(_,E-1)<<4),T}o.prototype._parseHex=function(g,E,T){this.length=Math.ceil((g.length-E)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var J=0,G=0,I;if(T==="be")for(A=g.length-1;A>=E;A-=2)I=p(g,E,A)<<J,this.words[G]|=I&67108863,J>=18?(J-=18,G+=1,this.words[G]|=I>>>26):J+=8;else{var V=g.length-E;for(A=V%2===0?E+1:E;A<g.length;A+=2)I=p(g,E,A)<<J,this.words[G]|=I&67108863,J>=18?(J-=18,G+=1,this.words[G]|=I>>>26):J+=8}this._strip()};function v(_,g,E,T){for(var A=0,J=0,G=Math.min(_.length,E),I=g;I<G;I++){var V=_.charCodeAt(I)-48;A*=T,V>=49?J=V-49+10:V>=17?J=V-17+10:J=V,s(V>=0&&J<T,"Invalid character"),A+=J}return A}o.prototype._parseBase=function(g,E,T){this.words=[0],this.length=1;for(var A=0,J=1;J<=67108863;J*=E)A++;A--,J=J/E|0;for(var G=g.length-T,I=G%A,V=Math.min(G,G-I)+T,L=0,z=T;z<V;z+=A)L=v(g,z,z+A,E),this.imuln(J),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L);if(I!==0){var ie=1;for(L=v(g,z,g.length,E),z=0;z<I;z++)ie*=E;this.imuln(ie),this.words[0]+L<67108864?this.words[0]+=L:this._iaddn(L)}this._strip()},o.prototype.copy=function(g){g.words=new Array(this.length);for(var E=0;E<this.length;E++)g.words[E]=this.words[E];g.length=this.length,g.negative=this.negative,g.red=this.red};function l(_,g){_.words=g.words,_.length=g.length,_.negative=g.negative,_.red=g.red}if(o.prototype._move=function(g){l(g,this)},o.prototype.clone=function(){var g=new o(null);return this.copy(g),g},o.prototype._expand=function(g){for(;this.length<g;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=u}catch{o.prototype.inspect=u}else o.prototype.inspect=u;function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],m=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(g,E){g=g||10,E=E|0||1;var T;if(g===16||g==="hex"){T="";for(var A=0,J=0,G=0;G<this.length;G++){var I=this.words[G],V=((I<<A|J)&16777215).toString(16);J=I>>>24-A&16777215,A+=2,A>=26&&(A-=26,G--),J!==0||G!==this.length-1?T=h[6-V.length]+V+T:T=V+T}for(J!==0&&(T=J.toString(16)+T);T.length%E!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}if(g===(g|0)&&g>=2&&g<=36){var L=m[g],z=w[g];T="";var ie=this.clone();for(ie.negative=0;!ie.isZero();){var se=ie.modrn(z).toString(g);ie=ie.idivn(z),ie.isZero()?T=se+T:T=h[L-se.length]+se+T}for(this.isZero()&&(T="0"+T);T.length%E!==0;)T="0"+T;return this.negative!==0&&(T="-"+T),T}s(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var g=this.words[0];return this.length===2?g+=this.words[1]*67108864:this.length===3&&this.words[2]===1?g+=4503599627370496+this.words[1]*67108864:this.length>2&&s(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-g:g},o.prototype.toJSON=function(){return this.toString(16,2)},f&&(o.prototype.toBuffer=function(g,E){return this.toArrayLike(f,g,E)}),o.prototype.toArray=function(g,E){return this.toArrayLike(Array,g,E)};var k=function(g,E){return g.allocUnsafe?g.allocUnsafe(E):new g(E)};o.prototype.toArrayLike=function(g,E,T){this._strip();var A=this.byteLength(),J=T||Math.max(1,A);s(A<=J,"byte array longer than desired length"),s(J>0,"Requested array length <= 0");var G=k(g,J),I=E==="le"?"LE":"BE";return this["_toArrayLike"+I](G,A),G},o.prototype._toArrayLikeLE=function(g,E){for(var T=0,A=0,J=0,G=0;J<this.length;J++){var I=this.words[J]<<G|A;g[T++]=I&255,T<g.length&&(g[T++]=I>>8&255),T<g.length&&(g[T++]=I>>16&255),G===6?(T<g.length&&(g[T++]=I>>24&255),A=0,G=0):(A=I>>>24,G+=2)}if(T<g.length)for(g[T++]=A;T<g.length;)g[T++]=0},o.prototype._toArrayLikeBE=function(g,E){for(var T=g.length-1,A=0,J=0,G=0;J<this.length;J++){var I=this.words[J]<<G|A;g[T--]=I&255,T>=0&&(g[T--]=I>>8&255),T>=0&&(g[T--]=I>>16&255),G===6?(T>=0&&(g[T--]=I>>24&255),A=0,G=0):(A=I>>>24,G+=2)}if(T>=0)for(g[T--]=A;T>=0;)g[T--]=0},Math.clz32?o.prototype._countBits=function(g){return 32-Math.clz32(g)}:o.prototype._countBits=function(g){var E=g,T=0;return E>=4096&&(T+=13,E>>>=13),E>=64&&(T+=7,E>>>=7),E>=8&&(T+=4,E>>>=4),E>=2&&(T+=2,E>>>=2),T+E},o.prototype._zeroBits=function(g){if(g===0)return 26;var E=g,T=0;return E&8191||(T+=13,E>>>=13),E&127||(T+=7,E>>>=7),E&15||(T+=4,E>>>=4),E&3||(T+=2,E>>>=2),E&1||T++,T},o.prototype.bitLength=function(){var g=this.words[this.length-1],E=this._countBits(g);return(this.length-1)*26+E};function C(_){for(var g=new Array(_.bitLength()),E=0;E<g.length;E++){var T=E/26|0,A=E%26;g[E]=_.words[T]>>>A&1}return g}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var g=0,E=0;E<this.length;E++){var T=this._zeroBits(this.words[E]);if(g+=T,T!==26)break}return g},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(g){return this.negative!==0?this.abs().inotn(g).iaddn(1):this.clone()},o.prototype.fromTwos=function(g){return this.testn(g-1)?this.notn(g).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(g){for(;this.length<g.length;)this.words[this.length++]=0;for(var E=0;E<g.length;E++)this.words[E]=this.words[E]|g.words[E];return this._strip()},o.prototype.ior=function(g){return s((this.negative|g.negative)===0),this.iuor(g)},o.prototype.or=function(g){return this.length>g.length?this.clone().ior(g):g.clone().ior(this)},o.prototype.uor=function(g){return this.length>g.length?this.clone().iuor(g):g.clone().iuor(this)},o.prototype.iuand=function(g){var E;this.length>g.length?E=g:E=this;for(var T=0;T<E.length;T++)this.words[T]=this.words[T]&g.words[T];return this.length=E.length,this._strip()},o.prototype.iand=function(g){return s((this.negative|g.negative)===0),this.iuand(g)},o.prototype.and=function(g){return this.length>g.length?this.clone().iand(g):g.clone().iand(this)},o.prototype.uand=function(g){return this.length>g.length?this.clone().iuand(g):g.clone().iuand(this)},o.prototype.iuxor=function(g){var E,T;this.length>g.length?(E=this,T=g):(E=g,T=this);for(var A=0;A<T.length;A++)this.words[A]=E.words[A]^T.words[A];if(this!==E)for(;A<E.length;A++)this.words[A]=E.words[A];return this.length=E.length,this._strip()},o.prototype.ixor=function(g){return s((this.negative|g.negative)===0),this.iuxor(g)},o.prototype.xor=function(g){return this.length>g.length?this.clone().ixor(g):g.clone().ixor(this)},o.prototype.uxor=function(g){return this.length>g.length?this.clone().iuxor(g):g.clone().iuxor(this)},o.prototype.inotn=function(g){s(typeof g=="number"&&g>=0);var E=Math.ceil(g/26)|0,T=g%26;this._expand(E),T>0&&E--;for(var A=0;A<E;A++)this.words[A]=~this.words[A]&67108863;return T>0&&(this.words[A]=~this.words[A]&67108863>>26-T),this._strip()},o.prototype.notn=function(g){return this.clone().inotn(g)},o.prototype.setn=function(g,E){s(typeof g=="number"&&g>=0);var T=g/26|0,A=g%26;return this._expand(T+1),E?this.words[T]=this.words[T]|1<<A:this.words[T]=this.words[T]&~(1<<A),this._strip()},o.prototype.iadd=function(g){var E;if(this.negative!==0&&g.negative===0)return this.negative=0,E=this.isub(g),this.negative^=1,this._normSign();if(this.negative===0&&g.negative!==0)return g.negative=0,E=this.isub(g),g.negative=1,E._normSign();var T,A;this.length>g.length?(T=this,A=g):(T=g,A=this);for(var J=0,G=0;G<A.length;G++)E=(T.words[G]|0)+(A.words[G]|0)+J,this.words[G]=E&67108863,J=E>>>26;for(;J!==0&&G<T.length;G++)E=(T.words[G]|0)+J,this.words[G]=E&67108863,J=E>>>26;if(this.length=T.length,J!==0)this.words[this.length]=J,this.length++;else if(T!==this)for(;G<T.length;G++)this.words[G]=T.words[G];return this},o.prototype.add=function(g){var E;return g.negative!==0&&this.negative===0?(g.negative=0,E=this.sub(g),g.negative^=1,E):g.negative===0&&this.negative!==0?(this.negative=0,E=g.sub(this),this.negative=1,E):this.length>g.length?this.clone().iadd(g):g.clone().iadd(this)},o.prototype.isub=function(g){if(g.negative!==0){g.negative=0;var E=this.iadd(g);return g.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(g),this.negative=1,this._normSign();var T=this.cmp(g);if(T===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,J;T>0?(A=this,J=g):(A=g,J=this);for(var G=0,I=0;I<J.length;I++)E=(A.words[I]|0)-(J.words[I]|0)+G,G=E>>26,this.words[I]=E&67108863;for(;G!==0&&I<A.length;I++)E=(A.words[I]|0)+G,G=E>>26,this.words[I]=E&67108863;if(G===0&&I<A.length&&A!==this)for(;I<A.length;I++)this.words[I]=A.words[I];return this.length=Math.max(this.length,I),A!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(g){return this.clone().isub(g)};function O(_,g,E){E.negative=g.negative^_.negative;var T=_.length+g.length|0;E.length=T,T=T-1|0;var A=_.words[0]|0,J=g.words[0]|0,G=A*J,I=G&67108863,V=G/67108864|0;E.words[0]=I;for(var L=1;L<T;L++){for(var z=V>>>26,ie=V&67108863,se=Math.min(L,g.length-1),me=Math.max(0,L-_.length+1);me<=se;me++){var Se=L-me|0;A=_.words[Se]|0,J=g.words[me]|0,G=A*J+ie,z+=G/67108864|0,ie=G&67108863}E.words[L]=ie|0,V=z|0}return V!==0?E.words[L]=V|0:E.length--,E._strip()}var P=function(g,E,T){var A=g.words,J=E.words,G=T.words,I=0,V,L,z,ie=A[0]|0,se=ie&8191,me=ie>>>13,Se=A[1]|0,ke=Se&8191,oe=Se>>>13,ue=A[2]|0,ye=ue&8191,we=ue>>>13,le=A[3]|0,ee=le&8191,te=le>>>13,Q=A[4]|0,B=Q&8191,W=Q>>>13,X=A[5]|0,ce=X&8191,he=X>>>13,ge=A[6]|0,fe=ge&8191,y=ge>>>13,U=A[7]|0,q=U&8191,de=U>>>13,j=A[8]|0,S=j&8191,F=j>>>13,K=A[9]|0,ve=K&8191,ae=K>>>13,_e=J[0]|0,Ne=_e&8191,Pe=_e>>>13,Ue=J[1]|0,xe=Ue&8191,Ae=Ue>>>13,Re=J[2]|0,$e=Re&8191,De=Re>>>13,Be=J[3]|0,He=Be&8191,Me=Be>>>13,qe=J[4]|0,Qe=qe&8191,Fe=qe>>>13,Ye=J[5]|0,Xe=Ye&8191,Je=Ye>>>13,je=J[6]|0,ze=je&8191,Ve=je>>>13,et=J[7]|0,tt=et&8191,Ge=et>>>13,rt=J[8]|0,it=rt&8191,Le=rt>>>13,nt=J[9]|0,Ke=nt&8191,Ze=nt>>>13;T.negative=g.negative^E.negative,T.length=19,V=Math.imul(se,Ne),L=Math.imul(se,Pe),L=L+Math.imul(me,Ne)|0,z=Math.imul(me,Pe);var ne=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(ne>>>26)|0,ne&=67108863,V=Math.imul(ke,Ne),L=Math.imul(ke,Pe),L=L+Math.imul(oe,Ne)|0,z=Math.imul(oe,Pe),V=V+Math.imul(se,xe)|0,L=L+Math.imul(se,Ae)|0,L=L+Math.imul(me,xe)|0,z=z+Math.imul(me,Ae)|0;var pe=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(pe>>>26)|0,pe&=67108863,V=Math.imul(ye,Ne),L=Math.imul(ye,Pe),L=L+Math.imul(we,Ne)|0,z=Math.imul(we,Pe),V=V+Math.imul(ke,xe)|0,L=L+Math.imul(ke,Ae)|0,L=L+Math.imul(oe,xe)|0,z=z+Math.imul(oe,Ae)|0,V=V+Math.imul(se,$e)|0,L=L+Math.imul(se,De)|0,L=L+Math.imul(me,$e)|0,z=z+Math.imul(me,De)|0;var be=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(be>>>26)|0,be&=67108863,V=Math.imul(ee,Ne),L=Math.imul(ee,Pe),L=L+Math.imul(te,Ne)|0,z=Math.imul(te,Pe),V=V+Math.imul(ye,xe)|0,L=L+Math.imul(ye,Ae)|0,L=L+Math.imul(we,xe)|0,z=z+Math.imul(we,Ae)|0,V=V+Math.imul(ke,$e)|0,L=L+Math.imul(ke,De)|0,L=L+Math.imul(oe,$e)|0,z=z+Math.imul(oe,De)|0,V=V+Math.imul(se,He)|0,L=L+Math.imul(se,Me)|0,L=L+Math.imul(me,He)|0,z=z+Math.imul(me,Me)|0;var Ee=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,V=Math.imul(B,Ne),L=Math.imul(B,Pe),L=L+Math.imul(W,Ne)|0,z=Math.imul(W,Pe),V=V+Math.imul(ee,xe)|0,L=L+Math.imul(ee,Ae)|0,L=L+Math.imul(te,xe)|0,z=z+Math.imul(te,Ae)|0,V=V+Math.imul(ye,$e)|0,L=L+Math.imul(ye,De)|0,L=L+Math.imul(we,$e)|0,z=z+Math.imul(we,De)|0,V=V+Math.imul(ke,He)|0,L=L+Math.imul(ke,Me)|0,L=L+Math.imul(oe,He)|0,z=z+Math.imul(oe,Me)|0,V=V+Math.imul(se,Qe)|0,L=L+Math.imul(se,Fe)|0,L=L+Math.imul(me,Qe)|0,z=z+Math.imul(me,Fe)|0;var Te=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(Te>>>26)|0,Te&=67108863,V=Math.imul(ce,Ne),L=Math.imul(ce,Pe),L=L+Math.imul(he,Ne)|0,z=Math.imul(he,Pe),V=V+Math.imul(B,xe)|0,L=L+Math.imul(B,Ae)|0,L=L+Math.imul(W,xe)|0,z=z+Math.imul(W,Ae)|0,V=V+Math.imul(ee,$e)|0,L=L+Math.imul(ee,De)|0,L=L+Math.imul(te,$e)|0,z=z+Math.imul(te,De)|0,V=V+Math.imul(ye,He)|0,L=L+Math.imul(ye,Me)|0,L=L+Math.imul(we,He)|0,z=z+Math.imul(we,Me)|0,V=V+Math.imul(ke,Qe)|0,L=L+Math.imul(ke,Fe)|0,L=L+Math.imul(oe,Qe)|0,z=z+Math.imul(oe,Fe)|0,V=V+Math.imul(se,Xe)|0,L=L+Math.imul(se,Je)|0,L=L+Math.imul(me,Xe)|0,z=z+Math.imul(me,Je)|0;var Oe=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,V=Math.imul(fe,Ne),L=Math.imul(fe,Pe),L=L+Math.imul(y,Ne)|0,z=Math.imul(y,Pe),V=V+Math.imul(ce,xe)|0,L=L+Math.imul(ce,Ae)|0,L=L+Math.imul(he,xe)|0,z=z+Math.imul(he,Ae)|0,V=V+Math.imul(B,$e)|0,L=L+Math.imul(B,De)|0,L=L+Math.imul(W,$e)|0,z=z+Math.imul(W,De)|0,V=V+Math.imul(ee,He)|0,L=L+Math.imul(ee,Me)|0,L=L+Math.imul(te,He)|0,z=z+Math.imul(te,Me)|0,V=V+Math.imul(ye,Qe)|0,L=L+Math.imul(ye,Fe)|0,L=L+Math.imul(we,Qe)|0,z=z+Math.imul(we,Fe)|0,V=V+Math.imul(ke,Xe)|0,L=L+Math.imul(ke,Je)|0,L=L+Math.imul(oe,Xe)|0,z=z+Math.imul(oe,Je)|0,V=V+Math.imul(se,ze)|0,L=L+Math.imul(se,Ve)|0,L=L+Math.imul(me,ze)|0,z=z+Math.imul(me,Ve)|0;var Ie=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,V=Math.imul(q,Ne),L=Math.imul(q,Pe),L=L+Math.imul(de,Ne)|0,z=Math.imul(de,Pe),V=V+Math.imul(fe,xe)|0,L=L+Math.imul(fe,Ae)|0,L=L+Math.imul(y,xe)|0,z=z+Math.imul(y,Ae)|0,V=V+Math.imul(ce,$e)|0,L=L+Math.imul(ce,De)|0,L=L+Math.imul(he,$e)|0,z=z+Math.imul(he,De)|0,V=V+Math.imul(B,He)|0,L=L+Math.imul(B,Me)|0,L=L+Math.imul(W,He)|0,z=z+Math.imul(W,Me)|0,V=V+Math.imul(ee,Qe)|0,L=L+Math.imul(ee,Fe)|0,L=L+Math.imul(te,Qe)|0,z=z+Math.imul(te,Fe)|0,V=V+Math.imul(ye,Xe)|0,L=L+Math.imul(ye,Je)|0,L=L+Math.imul(we,Xe)|0,z=z+Math.imul(we,Je)|0,V=V+Math.imul(ke,ze)|0,L=L+Math.imul(ke,Ve)|0,L=L+Math.imul(oe,ze)|0,z=z+Math.imul(oe,Ve)|0,V=V+Math.imul(se,tt)|0,L=L+Math.imul(se,Ge)|0,L=L+Math.imul(me,tt)|0,z=z+Math.imul(me,Ge)|0;var Ce=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,V=Math.imul(S,Ne),L=Math.imul(S,Pe),L=L+Math.imul(F,Ne)|0,z=Math.imul(F,Pe),V=V+Math.imul(q,xe)|0,L=L+Math.imul(q,Ae)|0,L=L+Math.imul(de,xe)|0,z=z+Math.imul(de,Ae)|0,V=V+Math.imul(fe,$e)|0,L=L+Math.imul(fe,De)|0,L=L+Math.imul(y,$e)|0,z=z+Math.imul(y,De)|0,V=V+Math.imul(ce,He)|0,L=L+Math.imul(ce,Me)|0,L=L+Math.imul(he,He)|0,z=z+Math.imul(he,Me)|0,V=V+Math.imul(B,Qe)|0,L=L+Math.imul(B,Fe)|0,L=L+Math.imul(W,Qe)|0,z=z+Math.imul(W,Fe)|0,V=V+Math.imul(ee,Xe)|0,L=L+Math.imul(ee,Je)|0,L=L+Math.imul(te,Xe)|0,z=z+Math.imul(te,Je)|0,V=V+Math.imul(ye,ze)|0,L=L+Math.imul(ye,Ve)|0,L=L+Math.imul(we,ze)|0,z=z+Math.imul(we,Ve)|0,V=V+Math.imul(ke,tt)|0,L=L+Math.imul(ke,Ge)|0,L=L+Math.imul(oe,tt)|0,z=z+Math.imul(oe,Ge)|0,V=V+Math.imul(se,it)|0,L=L+Math.imul(se,Le)|0,L=L+Math.imul(me,it)|0,z=z+Math.imul(me,Le)|0;var We=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(We>>>26)|0,We&=67108863,V=Math.imul(ve,Ne),L=Math.imul(ve,Pe),L=L+Math.imul(ae,Ne)|0,z=Math.imul(ae,Pe),V=V+Math.imul(S,xe)|0,L=L+Math.imul(S,Ae)|0,L=L+Math.imul(F,xe)|0,z=z+Math.imul(F,Ae)|0,V=V+Math.imul(q,$e)|0,L=L+Math.imul(q,De)|0,L=L+Math.imul(de,$e)|0,z=z+Math.imul(de,De)|0,V=V+Math.imul(fe,He)|0,L=L+Math.imul(fe,Me)|0,L=L+Math.imul(y,He)|0,z=z+Math.imul(y,Me)|0,V=V+Math.imul(ce,Qe)|0,L=L+Math.imul(ce,Fe)|0,L=L+Math.imul(he,Qe)|0,z=z+Math.imul(he,Fe)|0,V=V+Math.imul(B,Xe)|0,L=L+Math.imul(B,Je)|0,L=L+Math.imul(W,Xe)|0,z=z+Math.imul(W,Je)|0,V=V+Math.imul(ee,ze)|0,L=L+Math.imul(ee,Ve)|0,L=L+Math.imul(te,ze)|0,z=z+Math.imul(te,Ve)|0,V=V+Math.imul(ye,tt)|0,L=L+Math.imul(ye,Ge)|0,L=L+Math.imul(we,tt)|0,z=z+Math.imul(we,Ge)|0,V=V+Math.imul(ke,it)|0,L=L+Math.imul(ke,Le)|0,L=L+Math.imul(oe,it)|0,z=z+Math.imul(oe,Le)|0,V=V+Math.imul(se,Ke)|0,L=L+Math.imul(se,Ze)|0,L=L+Math.imul(me,Ke)|0,z=z+Math.imul(me,Ze)|0;var st=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(st>>>26)|0,st&=67108863,V=Math.imul(ve,xe),L=Math.imul(ve,Ae),L=L+Math.imul(ae,xe)|0,z=Math.imul(ae,Ae),V=V+Math.imul(S,$e)|0,L=L+Math.imul(S,De)|0,L=L+Math.imul(F,$e)|0,z=z+Math.imul(F,De)|0,V=V+Math.imul(q,He)|0,L=L+Math.imul(q,Me)|0,L=L+Math.imul(de,He)|0,z=z+Math.imul(de,Me)|0,V=V+Math.imul(fe,Qe)|0,L=L+Math.imul(fe,Fe)|0,L=L+Math.imul(y,Qe)|0,z=z+Math.imul(y,Fe)|0,V=V+Math.imul(ce,Xe)|0,L=L+Math.imul(ce,Je)|0,L=L+Math.imul(he,Xe)|0,z=z+Math.imul(he,Je)|0,V=V+Math.imul(B,ze)|0,L=L+Math.imul(B,Ve)|0,L=L+Math.imul(W,ze)|0,z=z+Math.imul(W,Ve)|0,V=V+Math.imul(ee,tt)|0,L=L+Math.imul(ee,Ge)|0,L=L+Math.imul(te,tt)|0,z=z+Math.imul(te,Ge)|0,V=V+Math.imul(ye,it)|0,L=L+Math.imul(ye,Le)|0,L=L+Math.imul(we,it)|0,z=z+Math.imul(we,Le)|0,V=V+Math.imul(ke,Ke)|0,L=L+Math.imul(ke,Ze)|0,L=L+Math.imul(oe,Ke)|0,z=z+Math.imul(oe,Ze)|0;var at=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(at>>>26)|0,at&=67108863,V=Math.imul(ve,$e),L=Math.imul(ve,De),L=L+Math.imul(ae,$e)|0,z=Math.imul(ae,De),V=V+Math.imul(S,He)|0,L=L+Math.imul(S,Me)|0,L=L+Math.imul(F,He)|0,z=z+Math.imul(F,Me)|0,V=V+Math.imul(q,Qe)|0,L=L+Math.imul(q,Fe)|0,L=L+Math.imul(de,Qe)|0,z=z+Math.imul(de,Fe)|0,V=V+Math.imul(fe,Xe)|0,L=L+Math.imul(fe,Je)|0,L=L+Math.imul(y,Xe)|0,z=z+Math.imul(y,Je)|0,V=V+Math.imul(ce,ze)|0,L=L+Math.imul(ce,Ve)|0,L=L+Math.imul(he,ze)|0,z=z+Math.imul(he,Ve)|0,V=V+Math.imul(B,tt)|0,L=L+Math.imul(B,Ge)|0,L=L+Math.imul(W,tt)|0,z=z+Math.imul(W,Ge)|0,V=V+Math.imul(ee,it)|0,L=L+Math.imul(ee,Le)|0,L=L+Math.imul(te,it)|0,z=z+Math.imul(te,Le)|0,V=V+Math.imul(ye,Ke)|0,L=L+Math.imul(ye,Ze)|0,L=L+Math.imul(we,Ke)|0,z=z+Math.imul(we,Ze)|0;var dt=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(dt>>>26)|0,dt&=67108863,V=Math.imul(ve,He),L=Math.imul(ve,Me),L=L+Math.imul(ae,He)|0,z=Math.imul(ae,Me),V=V+Math.imul(S,Qe)|0,L=L+Math.imul(S,Fe)|0,L=L+Math.imul(F,Qe)|0,z=z+Math.imul(F,Fe)|0,V=V+Math.imul(q,Xe)|0,L=L+Math.imul(q,Je)|0,L=L+Math.imul(de,Xe)|0,z=z+Math.imul(de,Je)|0,V=V+Math.imul(fe,ze)|0,L=L+Math.imul(fe,Ve)|0,L=L+Math.imul(y,ze)|0,z=z+Math.imul(y,Ve)|0,V=V+Math.imul(ce,tt)|0,L=L+Math.imul(ce,Ge)|0,L=L+Math.imul(he,tt)|0,z=z+Math.imul(he,Ge)|0,V=V+Math.imul(B,it)|0,L=L+Math.imul(B,Le)|0,L=L+Math.imul(W,it)|0,z=z+Math.imul(W,Le)|0,V=V+Math.imul(ee,Ke)|0,L=L+Math.imul(ee,Ze)|0,L=L+Math.imul(te,Ke)|0,z=z+Math.imul(te,Ze)|0;var ot=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(ot>>>26)|0,ot&=67108863,V=Math.imul(ve,Qe),L=Math.imul(ve,Fe),L=L+Math.imul(ae,Qe)|0,z=Math.imul(ae,Fe),V=V+Math.imul(S,Xe)|0,L=L+Math.imul(S,Je)|0,L=L+Math.imul(F,Xe)|0,z=z+Math.imul(F,Je)|0,V=V+Math.imul(q,ze)|0,L=L+Math.imul(q,Ve)|0,L=L+Math.imul(de,ze)|0,z=z+Math.imul(de,Ve)|0,V=V+Math.imul(fe,tt)|0,L=L+Math.imul(fe,Ge)|0,L=L+Math.imul(y,tt)|0,z=z+Math.imul(y,Ge)|0,V=V+Math.imul(ce,it)|0,L=L+Math.imul(ce,Le)|0,L=L+Math.imul(he,it)|0,z=z+Math.imul(he,Le)|0,V=V+Math.imul(B,Ke)|0,L=L+Math.imul(B,Ze)|0,L=L+Math.imul(W,Ke)|0,z=z+Math.imul(W,Ze)|0;var ct=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(ct>>>26)|0,ct&=67108863,V=Math.imul(ve,Xe),L=Math.imul(ve,Je),L=L+Math.imul(ae,Xe)|0,z=Math.imul(ae,Je),V=V+Math.imul(S,ze)|0,L=L+Math.imul(S,Ve)|0,L=L+Math.imul(F,ze)|0,z=z+Math.imul(F,Ve)|0,V=V+Math.imul(q,tt)|0,L=L+Math.imul(q,Ge)|0,L=L+Math.imul(de,tt)|0,z=z+Math.imul(de,Ge)|0,V=V+Math.imul(fe,it)|0,L=L+Math.imul(fe,Le)|0,L=L+Math.imul(y,it)|0,z=z+Math.imul(y,Le)|0,V=V+Math.imul(ce,Ke)|0,L=L+Math.imul(ce,Ze)|0,L=L+Math.imul(he,Ke)|0,z=z+Math.imul(he,Ze)|0;var ut=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(ut>>>26)|0,ut&=67108863,V=Math.imul(ve,ze),L=Math.imul(ve,Ve),L=L+Math.imul(ae,ze)|0,z=Math.imul(ae,Ve),V=V+Math.imul(S,tt)|0,L=L+Math.imul(S,Ge)|0,L=L+Math.imul(F,tt)|0,z=z+Math.imul(F,Ge)|0,V=V+Math.imul(q,it)|0,L=L+Math.imul(q,Le)|0,L=L+Math.imul(de,it)|0,z=z+Math.imul(de,Le)|0,V=V+Math.imul(fe,Ke)|0,L=L+Math.imul(fe,Ze)|0,L=L+Math.imul(y,Ke)|0,z=z+Math.imul(y,Ze)|0;var ft=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(ft>>>26)|0,ft&=67108863,V=Math.imul(ve,tt),L=Math.imul(ve,Ge),L=L+Math.imul(ae,tt)|0,z=Math.imul(ae,Ge),V=V+Math.imul(S,it)|0,L=L+Math.imul(S,Le)|0,L=L+Math.imul(F,it)|0,z=z+Math.imul(F,Le)|0,V=V+Math.imul(q,Ke)|0,L=L+Math.imul(q,Ze)|0,L=L+Math.imul(de,Ke)|0,z=z+Math.imul(de,Ze)|0;var lt=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(lt>>>26)|0,lt&=67108863,V=Math.imul(ve,it),L=Math.imul(ve,Le),L=L+Math.imul(ae,it)|0,z=Math.imul(ae,Le),V=V+Math.imul(S,Ke)|0,L=L+Math.imul(S,Ze)|0,L=L+Math.imul(F,Ke)|0,z=z+Math.imul(F,Ze)|0;var pt=(I+V|0)+((L&8191)<<13)|0;I=(z+(L>>>13)|0)+(pt>>>26)|0,pt&=67108863,V=Math.imul(ve,Ke),L=Math.imul(ve,Ze),L=L+Math.imul(ae,Ke)|0,z=Math.imul(ae,Ze);var mt=(I+V|0)+((L&8191)<<13)|0;return I=(z+(L>>>13)|0)+(mt>>>26)|0,mt&=67108863,G[0]=ne,G[1]=pe,G[2]=be,G[3]=Ee,G[4]=Te,G[5]=Oe,G[6]=Ie,G[7]=Ce,G[8]=We,G[9]=st,G[10]=at,G[11]=dt,G[12]=ot,G[13]=ct,G[14]=ut,G[15]=ft,G[16]=lt,G[17]=pt,G[18]=mt,I!==0&&(G[19]=I,T.length++),T};Math.imul||(P=O);function M(_,g,E){E.negative=g.negative^_.negative,E.length=_.length+g.length;for(var T=0,A=0,J=0;J<E.length-1;J++){var G=A;A=0;for(var I=T&67108863,V=Math.min(J,g.length-1),L=Math.max(0,J-_.length+1);L<=V;L++){var z=J-L,ie=_.words[z]|0,se=g.words[L]|0,me=ie*se,Se=me&67108863;G=G+(me/67108864|0)|0,Se=Se+I|0,I=Se&67108863,G=G+(Se>>>26)|0,A+=G>>>26,G&=67108863}E.words[J]=I,T=G,G=A}return T!==0?E.words[J]=T:E.length--,E._strip()}function D(_,g,E){return M(_,g,E)}o.prototype.mulTo=function(g,E){var T,A=this.length+g.length;return this.length===10&&g.length===10?T=P(this,g,E):A<63?T=O(this,g,E):A<1024?T=M(this,g,E):T=D(this,g,E),T},o.prototype.mul=function(g){var E=new o(null);return E.words=new Array(this.length+g.length),this.mulTo(g,E)},o.prototype.mulf=function(g){var E=new o(null);return E.words=new Array(this.length+g.length),D(this,g,E)},o.prototype.imul=function(g){return this.clone().mulTo(g,this)},o.prototype.imuln=function(g){var E=g<0;E&&(g=-g),s(typeof g=="number"),s(g<67108864);for(var T=0,A=0;A<this.length;A++){var J=(this.words[A]|0)*g,G=(J&67108863)+(T&67108863);T>>=26,T+=J/67108864|0,T+=G>>>26,this.words[A]=G&67108863}return T!==0&&(this.words[A]=T,this.length++),E?this.ineg():this},o.prototype.muln=function(g){return this.clone().imuln(g)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(g){var E=C(g);if(E.length===0)return new o(1);for(var T=this,A=0;A<E.length&&E[A]===0;A++,T=T.sqr());if(++A<E.length)for(var J=T.sqr();A<E.length;A++,J=J.sqr())E[A]!==0&&(T=T.mul(J));return T},o.prototype.iushln=function(g){s(typeof g=="number"&&g>=0);var E=g%26,T=(g-E)/26,A=67108863>>>26-E<<26-E,J;if(E!==0){var G=0;for(J=0;J<this.length;J++){var I=this.words[J]&A,V=(this.words[J]|0)-I<<E;this.words[J]=V|G,G=I>>>26-E}G&&(this.words[J]=G,this.length++)}if(T!==0){for(J=this.length-1;J>=0;J--)this.words[J+T]=this.words[J];for(J=0;J<T;J++)this.words[J]=0;this.length+=T}return this._strip()},o.prototype.ishln=function(g){return s(this.negative===0),this.iushln(g)},o.prototype.iushrn=function(g,E,T){s(typeof g=="number"&&g>=0);var A;E?A=(E-E%26)/26:A=0;var J=g%26,G=Math.min((g-J)/26,this.length),I=67108863^67108863>>>J<<J,V=T;if(A-=G,A=Math.max(0,A),V){for(var L=0;L<G;L++)V.words[L]=this.words[L];V.length=G}if(G!==0)if(this.length>G)for(this.length-=G,L=0;L<this.length;L++)this.words[L]=this.words[L+G];else this.words[0]=0,this.length=1;var z=0;for(L=this.length-1;L>=0&&(z!==0||L>=A);L--){var ie=this.words[L]|0;this.words[L]=z<<26-J|ie>>>J,z=ie&I}return V&&z!==0&&(V.words[V.length++]=z),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(g,E,T){return s(this.negative===0),this.iushrn(g,E,T)},o.prototype.shln=function(g){return this.clone().ishln(g)},o.prototype.ushln=function(g){return this.clone().iushln(g)},o.prototype.shrn=function(g){return this.clone().ishrn(g)},o.prototype.ushrn=function(g){return this.clone().iushrn(g)},o.prototype.testn=function(g){s(typeof g=="number"&&g>=0);var E=g%26,T=(g-E)/26,A=1<<E;if(this.length<=T)return!1;var J=this.words[T];return!!(J&A)},o.prototype.imaskn=function(g){s(typeof g=="number"&&g>=0);var E=g%26,T=(g-E)/26;if(s(this.negative===0,"imaskn works only with positive numbers"),this.length<=T)return this;if(E!==0&&T++,this.length=Math.min(T,this.length),E!==0){var A=67108863^67108863>>>E<<E;this.words[this.length-1]&=A}return this._strip()},o.prototype.maskn=function(g){return this.clone().imaskn(g)},o.prototype.iaddn=function(g){return s(typeof g=="number"),s(g<67108864),g<0?this.isubn(-g):this.negative!==0?this.length===1&&(this.words[0]|0)<=g?(this.words[0]=g-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(g),this.negative=1,this):this._iaddn(g)},o.prototype._iaddn=function(g){this.words[0]+=g;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},o.prototype.isubn=function(g){if(s(typeof g=="number"),s(g<67108864),g<0)return this.iaddn(-g);if(this.negative!==0)return this.negative=0,this.iaddn(g),this.negative=1,this;if(this.words[0]-=g,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this._strip()},o.prototype.addn=function(g){return this.clone().iaddn(g)},o.prototype.subn=function(g){return this.clone().isubn(g)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(g,E,T){var A=g.length+T,J;this._expand(A);var G,I=0;for(J=0;J<g.length;J++){G=(this.words[J+T]|0)+I;var V=(g.words[J]|0)*E;G-=V&67108863,I=(G>>26)-(V/67108864|0),this.words[J+T]=G&67108863}for(;J<this.length-T;J++)G=(this.words[J+T]|0)+I,I=G>>26,this.words[J+T]=G&67108863;if(I===0)return this._strip();for(s(I===-1),I=0,J=0;J<this.length;J++)G=-(this.words[J]|0)+I,I=G>>26,this.words[J]=G&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(g,E){var T=this.length-g.length,A=this.clone(),J=g,G=J.words[J.length-1]|0,I=this._countBits(G);T=26-I,T!==0&&(J=J.ushln(T),A.iushln(T),G=J.words[J.length-1]|0);var V=A.length-J.length,L;if(E!=="mod"){L=new o(null),L.length=V+1,L.words=new Array(L.length);for(var z=0;z<L.length;z++)L.words[z]=0}var ie=A.clone()._ishlnsubmul(J,1,V);ie.negative===0&&(A=ie,L&&(L.words[V]=1));for(var se=V-1;se>=0;se--){var me=(A.words[J.length+se]|0)*67108864+(A.words[J.length+se-1]|0);for(me=Math.min(me/G|0,67108863),A._ishlnsubmul(J,me,se);A.negative!==0;)me--,A.negative=0,A._ishlnsubmul(J,1,se),A.isZero()||(A.negative^=1);L&&(L.words[se]=me)}return L&&L._strip(),A._strip(),E!=="div"&&T!==0&&A.iushrn(T),{div:L||null,mod:A}},o.prototype.divmod=function(g,E,T){if(s(!g.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var A,J,G;return this.negative!==0&&g.negative===0?(G=this.neg().divmod(g,E),E!=="mod"&&(A=G.div.neg()),E!=="div"&&(J=G.mod.neg(),T&&J.negative!==0&&J.iadd(g)),{div:A,mod:J}):this.negative===0&&g.negative!==0?(G=this.divmod(g.neg(),E),E!=="mod"&&(A=G.div.neg()),{div:A,mod:G.mod}):this.negative&g.negative?(G=this.neg().divmod(g.neg(),E),E!=="div"&&(J=G.mod.neg(),T&&J.negative!==0&&J.isub(g)),{div:G.div,mod:J}):g.length>this.length||this.cmp(g)<0?{div:new o(0),mod:this}:g.length===1?E==="div"?{div:this.divn(g.words[0]),mod:null}:E==="mod"?{div:null,mod:new o(this.modrn(g.words[0]))}:{div:this.divn(g.words[0]),mod:new o(this.modrn(g.words[0]))}:this._wordDiv(g,E)},o.prototype.div=function(g){return this.divmod(g,"div",!1).div},o.prototype.mod=function(g){return this.divmod(g,"mod",!1).mod},o.prototype.umod=function(g){return this.divmod(g,"mod",!0).mod},o.prototype.divRound=function(g){var E=this.divmod(g);if(E.mod.isZero())return E.div;var T=E.div.negative!==0?E.mod.isub(g):E.mod,A=g.ushrn(1),J=g.andln(1),G=T.cmp(A);return G<0||J===1&&G===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},o.prototype.modrn=function(g){var E=g<0;E&&(g=-g),s(g<=67108863);for(var T=(1<<26)%g,A=0,J=this.length-1;J>=0;J--)A=(T*A+(this.words[J]|0))%g;return E?-A:A},o.prototype.modn=function(g){return this.modrn(g)},o.prototype.idivn=function(g){var E=g<0;E&&(g=-g),s(g<=67108863);for(var T=0,A=this.length-1;A>=0;A--){var J=(this.words[A]|0)+T*67108864;this.words[A]=J/g|0,T=J%g}return this._strip(),E?this.ineg():this},o.prototype.divn=function(g){return this.clone().idivn(g)},o.prototype.egcd=function(g){s(g.negative===0),s(!g.isZero());var E=this,T=g.clone();E.negative!==0?E=E.umod(g):E=E.clone();for(var A=new o(1),J=new o(0),G=new o(0),I=new o(1),V=0;E.isEven()&&T.isEven();)E.iushrn(1),T.iushrn(1),++V;for(var L=T.clone(),z=E.clone();!E.isZero();){for(var ie=0,se=1;!(E.words[0]&se)&&ie<26;++ie,se<<=1);if(ie>0)for(E.iushrn(ie);ie-- >0;)(A.isOdd()||J.isOdd())&&(A.iadd(L),J.isub(z)),A.iushrn(1),J.iushrn(1);for(var me=0,Se=1;!(T.words[0]&Se)&&me<26;++me,Se<<=1);if(me>0)for(T.iushrn(me);me-- >0;)(G.isOdd()||I.isOdd())&&(G.iadd(L),I.isub(z)),G.iushrn(1),I.iushrn(1);E.cmp(T)>=0?(E.isub(T),A.isub(G),J.isub(I)):(T.isub(E),G.isub(A),I.isub(J))}return{a:G,b:I,gcd:T.iushln(V)}},o.prototype._invmp=function(g){s(g.negative===0),s(!g.isZero());var E=this,T=g.clone();E.negative!==0?E=E.umod(g):E=E.clone();for(var A=new o(1),J=new o(0),G=T.clone();E.cmpn(1)>0&&T.cmpn(1)>0;){for(var I=0,V=1;!(E.words[0]&V)&&I<26;++I,V<<=1);if(I>0)for(E.iushrn(I);I-- >0;)A.isOdd()&&A.iadd(G),A.iushrn(1);for(var L=0,z=1;!(T.words[0]&z)&&L<26;++L,z<<=1);if(L>0)for(T.iushrn(L);L-- >0;)J.isOdd()&&J.iadd(G),J.iushrn(1);E.cmp(T)>=0?(E.isub(T),A.isub(J)):(T.isub(E),J.isub(A))}var ie;return E.cmpn(1)===0?ie=A:ie=J,ie.cmpn(0)<0&&ie.iadd(g),ie},o.prototype.gcd=function(g){if(this.isZero())return g.abs();if(g.isZero())return this.abs();var E=this.clone(),T=g.clone();E.negative=0,T.negative=0;for(var A=0;E.isEven()&&T.isEven();A++)E.iushrn(1),T.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;T.isEven();)T.iushrn(1);var J=E.cmp(T);if(J<0){var G=E;E=T,T=G}else if(J===0||T.cmpn(1)===0)break;E.isub(T)}while(!0);return T.iushln(A)},o.prototype.invm=function(g){return this.egcd(g).a.umod(g)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(g){return this.words[0]&g},o.prototype.bincn=function(g){s(typeof g=="number");var E=g%26,T=(g-E)/26,A=1<<E;if(this.length<=T)return this._expand(T+1),this.words[T]|=A,this;for(var J=A,G=T;J!==0&&G<this.length;G++){var I=this.words[G]|0;I+=J,J=I>>>26,I&=67108863,this.words[G]=I}return J!==0&&(this.words[G]=J,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(g){var E=g<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this._strip();var T;if(this.length>1)T=1;else{E&&(g=-g),s(g<=67108863,"Number is too big");var A=this.words[0]|0;T=A===g?0:A<g?-1:1}return this.negative!==0?-T|0:T},o.prototype.cmp=function(g){if(this.negative!==0&&g.negative===0)return-1;if(this.negative===0&&g.negative!==0)return 1;var E=this.ucmp(g);return this.negative!==0?-E|0:E},o.prototype.ucmp=function(g){if(this.length>g.length)return 1;if(this.length<g.length)return-1;for(var E=0,T=this.length-1;T>=0;T--){var A=this.words[T]|0,J=g.words[T]|0;if(A!==J){A<J?E=-1:A>J&&(E=1);break}}return E},o.prototype.gtn=function(g){return this.cmpn(g)===1},o.prototype.gt=function(g){return this.cmp(g)===1},o.prototype.gten=function(g){return this.cmpn(g)>=0},o.prototype.gte=function(g){return this.cmp(g)>=0},o.prototype.ltn=function(g){return this.cmpn(g)===-1},o.prototype.lt=function(g){return this.cmp(g)===-1},o.prototype.lten=function(g){return this.cmpn(g)<=0},o.prototype.lte=function(g){return this.cmp(g)<=0},o.prototype.eqn=function(g){return this.cmpn(g)===0},o.prototype.eq=function(g){return this.cmp(g)===0},o.red=function(g){return new x(g)},o.prototype.toRed=function(g){return s(!this.red,"Already a number in reduction context"),s(this.negative===0,"red works only with positives"),g.convertTo(this)._forceRed(g)},o.prototype.fromRed=function(){return s(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(g){return this.red=g,this},o.prototype.forceRed=function(g){return s(!this.red,"Already a number in reduction context"),this._forceRed(g)},o.prototype.redAdd=function(g){return s(this.red,"redAdd works only with red numbers"),this.red.add(this,g)},o.prototype.redIAdd=function(g){return s(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,g)},o.prototype.redSub=function(g){return s(this.red,"redSub works only with red numbers"),this.red.sub(this,g)},o.prototype.redISub=function(g){return s(this.red,"redISub works only with red numbers"),this.red.isub(this,g)},o.prototype.redShl=function(g){return s(this.red,"redShl works only with red numbers"),this.red.shl(this,g)},o.prototype.redMul=function(g){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.mul(this,g)},o.prototype.redIMul=function(g){return s(this.red,"redMul works only with red numbers"),this.red._verify2(this,g),this.red.imul(this,g)},o.prototype.redSqr=function(){return s(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return s(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return s(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return s(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return s(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(g){return s(this.red&&!g.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,g)};var $={k256:null,p224:null,p192:null,p25519:null};function H(_,g){this.name=_,this.p=new o(g,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}H.prototype._tmp=function(){var g=new o(null);return g.words=new Array(Math.ceil(this.n/13)),g},H.prototype.ireduce=function(g){var E=g,T;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),T=E.bitLength();while(T>this.n);var A=T<this.n?-1:E.ucmp(this.p);return A===0?(E.words[0]=0,E.length=1):A>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},H.prototype.split=function(g,E){g.iushrn(this.n,0,E)},H.prototype.imulK=function(g){return g.imul(this.k)};function Z(){H.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}d(Z,H),Z.prototype.split=function(g,E){for(var T=4194303,A=Math.min(g.length,9),J=0;J<A;J++)E.words[J]=g.words[J];if(E.length=A,g.length<=9){g.words[0]=0,g.length=1;return}var G=g.words[9];for(E.words[E.length++]=G&T,J=10;J<g.length;J++){var I=g.words[J]|0;g.words[J-10]=(I&T)<<4|G>>>22,G=I}G>>>=22,g.words[J-10]=G,G===0&&g.length>10?g.length-=10:g.length-=9},Z.prototype.imulK=function(g){g.words[g.length]=0,g.words[g.length+1]=0,g.length+=2;for(var E=0,T=0;T<g.length;T++){var A=g.words[T]|0;E+=A*977,g.words[T]=E&67108863,E=A*64+(E/67108864|0)}return g.words[g.length-1]===0&&(g.length--,g.words[g.length-1]===0&&g.length--),g};function re(){H.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}d(re,H);function Y(){H.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}d(Y,H);function N(){H.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}d(N,H),N.prototype.imulK=function(g){for(var E=0,T=0;T<g.length;T++){var A=(g.words[T]|0)*19+E,J=A&67108863;A>>>=26,g.words[T]=J,E=A}return E!==0&&(g.words[g.length++]=E),g},o._prime=function(g){if($[g])return $[g];var E;if(g==="k256")E=new Z;else if(g==="p224")E=new re;else if(g==="p192")E=new Y;else if(g==="p25519")E=new N;else throw new Error("Unknown prime "+g);return $[g]=E,E};function x(_){if(typeof _=="string"){var g=o._prime(_);this.m=g.p,this.prime=g}else s(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}x.prototype._verify1=function(g){s(g.negative===0,"red works only with positives"),s(g.red,"red works only with red numbers")},x.prototype._verify2=function(g,E){s((g.negative|E.negative)===0,"red works only with positives"),s(g.red&&g.red===E.red,"red works only with red numbers")},x.prototype.imod=function(g){return this.prime?this.prime.ireduce(g)._forceRed(this):(l(g,g.umod(this.m)._forceRed(this)),g)},x.prototype.neg=function(g){return g.isZero()?g.clone():this.m.sub(g)._forceRed(this)},x.prototype.add=function(g,E){this._verify2(g,E);var T=g.add(E);return T.cmp(this.m)>=0&&T.isub(this.m),T._forceRed(this)},x.prototype.iadd=function(g,E){this._verify2(g,E);var T=g.iadd(E);return T.cmp(this.m)>=0&&T.isub(this.m),T},x.prototype.sub=function(g,E){this._verify2(g,E);var T=g.sub(E);return T.cmpn(0)<0&&T.iadd(this.m),T._forceRed(this)},x.prototype.isub=function(g,E){this._verify2(g,E);var T=g.isub(E);return T.cmpn(0)<0&&T.iadd(this.m),T},x.prototype.shl=function(g,E){return this._verify1(g),this.imod(g.ushln(E))},x.prototype.imul=function(g,E){return this._verify2(g,E),this.imod(g.imul(E))},x.prototype.mul=function(g,E){return this._verify2(g,E),this.imod(g.mul(E))},x.prototype.isqr=function(g){return this.imul(g,g.clone())},x.prototype.sqr=function(g){return this.mul(g,g)},x.prototype.sqrt=function(g){if(g.isZero())return g.clone();var E=this.m.andln(3);if(s(E%2===1),E===3){var T=this.m.add(new o(1)).iushrn(2);return this.pow(g,T)}for(var A=this.m.subn(1),J=0;!A.isZero()&&A.andln(1)===0;)J++,A.iushrn(1);s(!A.isZero());var G=new o(1).toRed(this),I=G.redNeg(),V=this.m.subn(1).iushrn(1),L=this.m.bitLength();for(L=new o(2*L*L).toRed(this);this.pow(L,V).cmp(I)!==0;)L.redIAdd(I);for(var z=this.pow(L,A),ie=this.pow(g,A.addn(1).iushrn(1)),se=this.pow(g,A),me=J;se.cmp(G)!==0;){for(var Se=se,ke=0;Se.cmp(G)!==0;ke++)Se=Se.redSqr();s(ke<me);var oe=this.pow(z,new o(1).iushln(me-ke-1));ie=ie.redMul(oe),z=oe.redSqr(),se=se.redMul(z),me=ke}return ie},x.prototype.invm=function(g){var E=g._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},x.prototype.pow=function(g,E){if(E.isZero())return new o(1).toRed(this);if(E.cmpn(1)===0)return g.clone();var T=4,A=new Array(1<<T);A[0]=new o(1).toRed(this),A[1]=g;for(var J=2;J<A.length;J++)A[J]=this.mul(A[J-1],g);var G=A[0],I=0,V=0,L=E.bitLength()%26;for(L===0&&(L=26),J=E.length-1;J>=0;J--){for(var z=E.words[J],ie=L-1;ie>=0;ie--){var se=z>>ie&1;if(G!==A[0]&&(G=this.sqr(G)),se===0&&I===0){V=0;continue}I<<=1,I|=se,V++,!(V!==T&&(J!==0||ie!==0))&&(G=this.mul(G,A[I]),V=0,I=0)}L=26}return G},x.prototype.convertTo=function(g){var E=g.umod(this.m);return E===g?E.clone():E},x.prototype.convertFrom=function(g){var E=g.clone();return E.red=null,E},o.mont=function(g){return new b(g)};function b(_){x.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}d(b,x),b.prototype.convertTo=function(g){return this.imod(g.ushln(this.shift))},b.prototype.convertFrom=function(g){var E=this.imod(g.mul(this.rinv));return E.red=null,E},b.prototype.imul=function(g,E){if(g.isZero()||E.isZero())return g.words[0]=0,g.length=1,g;var T=g.imul(E),A=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),J=T.isub(A).iushrn(this.shift),G=J;return J.cmp(this.m)>=0?G=J.isub(this.m):J.cmpn(0)<0&&(G=J.iadd(this.m)),G._forceRed(this)},b.prototype.mul=function(g,E){if(g.isZero()||E.isZero())return new o(0)._forceRed(this);var T=g.mul(E),A=T.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),J=T.isub(A).iushrn(this.shift),G=J;return J.cmp(this.m)>=0?G=J.isub(this.m):J.cmpn(0)<0&&(G=J.iadd(this.m)),G._forceRed(this)},b.prototype.invm=function(g){var E=this.imod(g._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(typeof i>"u"||i,this)},{buffer:142}],141:[function(e,i,t){var n;i.exports=function(o){return n||(n=new a(null)),n.generate(o)};function a(d){this.rand=d}if(i.exports.Rand=a,a.prototype.generate=function(o){return this._rand(o)},a.prototype._rand=function(o){if(this.rand.getBytes)return this.rand.getBytes(o);for(var f=new Uint8Array(o),c=0;c<f.length;c++)f[c]=this.rand.getByte();return f},typeof self=="object")self.crypto&&self.crypto.getRandomValues?a.prototype._rand=function(o){var f=new Uint8Array(o);return self.crypto.getRandomValues(f),f}:self.msCrypto&&self.msCrypto.getRandomValues?a.prototype._rand=function(o){var f=new Uint8Array(o);return self.msCrypto.getRandomValues(f),f}:typeof window=="object"&&(a.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var s=e("crypto");if(typeof s.randomBytes!="function")throw new Error("Not supported");a.prototype._rand=function(o){return s.randomBytes(o)}}catch{}},{crypto:142}],142:[function(e,i,t){},{}],143:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(p){n.isBuffer(p)||(p=n.from(p));for(var v=p.length/4|0,l=new Array(v),u=0;u<v;u++)l[u]=p.readUInt32BE(u*4);return l}function s(p){for(var v=0;v<p.length;p++)p[v]=0}function d(p,v,l,u,h){for(var m=l[0],w=l[1],k=l[2],C=l[3],O=p[0]^v[0],P=p[1]^v[1],M=p[2]^v[2],D=p[3]^v[3],$,H,Z,re,Y=4,N=1;N<h;N++)$=m[O>>>24]^w[P>>>16&255]^k[M>>>8&255]^C[D&255]^v[Y++],H=m[P>>>24]^w[M>>>16&255]^k[D>>>8&255]^C[O&255]^v[Y++],Z=m[M>>>24]^w[D>>>16&255]^k[O>>>8&255]^C[P&255]^v[Y++],re=m[D>>>24]^w[O>>>16&255]^k[P>>>8&255]^C[M&255]^v[Y++],O=$,P=H,M=Z,D=re;return $=(u[O>>>24]<<24|u[P>>>16&255]<<16|u[M>>>8&255]<<8|u[D&255])^v[Y++],H=(u[P>>>24]<<24|u[M>>>16&255]<<16|u[D>>>8&255]<<8|u[O&255])^v[Y++],Z=(u[M>>>24]<<24|u[D>>>16&255]<<16|u[O>>>8&255]<<8|u[P&255])^v[Y++],re=(u[D>>>24]<<24|u[O>>>16&255]<<16|u[P>>>8&255]<<8|u[M&255])^v[Y++],$=$>>>0,H=H>>>0,Z=Z>>>0,re=re>>>0,[$,H,Z,re]}var o=[0,1,2,4,8,16,32,64,128,27,54],f=function(){for(var p=new Array(256),v=0;v<256;v++)v<128?p[v]=v<<1:p[v]=v<<1^283;for(var l=[],u=[],h=[[],[],[],[]],m=[[],[],[],[]],w=0,k=0,C=0;C<256;++C){var O=k^k<<1^k<<2^k<<3^k<<4;O=O>>>8^O&255^99,l[w]=O,u[O]=w;var P=p[w],M=p[P],D=p[M],$=p[O]*257^O*16843008;h[0][w]=$<<24|$>>>8,h[1][w]=$<<16|$>>>16,h[2][w]=$<<8|$>>>24,h[3][w]=$,$=D*16843009^M*65537^P*257^w*16843008,m[0][O]=$<<24|$>>>8,m[1][O]=$<<16|$>>>16,m[2][O]=$<<8|$>>>24,m[3][O]=$,w===0?w=k=1:(w=P^p[p[p[D^P]]],k^=p[p[k]])}return{SBOX:l,INV_SBOX:u,SUB_MIX:h,INV_SUB_MIX:m}}();function c(p){this._key=a(p),this._reset()}c.blockSize=4*4,c.keySize=256/8,c.prototype.blockSize=c.blockSize,c.prototype.keySize=c.keySize,c.prototype._reset=function(){for(var p=this._key,v=p.length,l=v+6,u=(l+1)*4,h=[],m=0;m<v;m++)h[m]=p[m];for(m=v;m<u;m++){var w=h[m-1];m%v===0?(w=w<<8|w>>>24,w=f.SBOX[w>>>24]<<24|f.SBOX[w>>>16&255]<<16|f.SBOX[w>>>8&255]<<8|f.SBOX[w&255],w^=o[m/v|0]<<24):v>6&&m%v===4&&(w=f.SBOX[w>>>24]<<24|f.SBOX[w>>>16&255]<<16|f.SBOX[w>>>8&255]<<8|f.SBOX[w&255]),h[m]=h[m-v]^w}for(var k=[],C=0;C<u;C++){var O=u-C,P=h[O-(C%4?0:4)];C<4||O<=4?k[C]=P:k[C]=f.INV_SUB_MIX[0][f.SBOX[P>>>24]]^f.INV_SUB_MIX[1][f.SBOX[P>>>16&255]]^f.INV_SUB_MIX[2][f.SBOX[P>>>8&255]]^f.INV_SUB_MIX[3][f.SBOX[P&255]]}this._nRounds=l,this._keySchedule=h,this._invKeySchedule=k},c.prototype.encryptBlockRaw=function(p){return p=a(p),d(p,this._keySchedule,f.SUB_MIX,f.SBOX,this._nRounds)},c.prototype.encryptBlock=function(p){var v=this.encryptBlockRaw(p),l=n.allocUnsafe(16);return l.writeUInt32BE(v[0],0),l.writeUInt32BE(v[1],4),l.writeUInt32BE(v[2],8),l.writeUInt32BE(v[3],12),l},c.prototype.decryptBlock=function(p){p=a(p);var v=p[1];p[1]=p[3],p[3]=v;var l=d(p,this._invKeySchedule,f.INV_SUB_MIX,f.INV_SBOX,this._nRounds),u=n.allocUnsafe(16);return u.writeUInt32BE(l[0],0),u.writeUInt32BE(l[3],4),u.writeUInt32BE(l[2],8),u.writeUInt32BE(l[1],12),u},c.prototype.scrub=function(){s(this._keySchedule),s(this._invKeySchedule),s(this._key)},i.exports.AES=c},{"safe-buffer":279}],144:[function(e,i,t){var n=e("./aes"),a=e("safe-buffer").Buffer,s=e("cipher-base"),d=e("inherits"),o=e("./ghash"),f=e("buffer-xor"),c=e("./incr32");function p(u,h){var m=0;u.length!==h.length&&m++;for(var w=Math.min(u.length,h.length),k=0;k<w;++k)m+=u[k]^h[k];return m}function v(u,h,m){if(h.length===12)return u._finID=a.concat([h,a.from([0,0,0,1])]),a.concat([h,a.from([0,0,0,2])]);var w=new o(m),k=h.length,C=k%16;w.update(h),C&&(C=16-C,w.update(a.alloc(C,0))),w.update(a.alloc(8,0));var O=k*8,P=a.alloc(8);P.writeUIntBE(O,0,8),w.update(P),u._finID=w.state;var M=a.from(u._finID);return c(M),M}function l(u,h,m,w){s.call(this);var k=a.alloc(4,0);this._cipher=new n.AES(h);var C=this._cipher.encryptBlock(k);this._ghash=new o(C),m=v(this,m,C),this._prev=a.from(m),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=w,this._alen=0,this._len=0,this._mode=u,this._authTag=null,this._called=!1}d(l,s),l.prototype._update=function(u){if(!this._called&&this._alen){var h=16-this._alen%16;h<16&&(h=a.alloc(h,0),this._ghash.update(h))}this._called=!0;var m=this._mode.encrypt(this,u);return this._decrypt?this._ghash.update(u):this._ghash.update(m),this._len+=u.length,m},l.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var u=f(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&p(u,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=u,this._cipher.scrub()},l.prototype.getAuthTag=function(){if(this._decrypt||!a.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},l.prototype.setAuthTag=function(h){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=h},l.prototype.setAAD=function(h){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(h),this._alen+=h.length},i.exports=l},{"./aes":143,"./ghash":148,"./incr32":149,"buffer-xor":170,"cipher-base":174,inherits:233,"safe-buffer":279}],145:[function(e,i,t){var n=e("./encrypter"),a=e("./decrypter"),s=e("./modes/list.json");function d(){return Object.keys(s)}t.createCipher=t.Cipher=n.createCipher,t.createCipheriv=t.Cipheriv=n.createCipheriv,t.createDecipher=t.Decipher=a.createDecipher,t.createDecipheriv=t.Decipheriv=a.createDecipheriv,t.listCiphers=t.getCiphers=d},{"./decrypter":146,"./encrypter":147,"./modes/list.json":157}],146:[function(e,i,t){var n=e("./authCipher"),a=e("safe-buffer").Buffer,s=e("./modes"),d=e("./streamCipher"),o=e("cipher-base"),f=e("./aes"),c=e("evp_bytestokey"),p=e("inherits");function v(w,k,C){o.call(this),this._cache=new l,this._last=void 0,this._cipher=new f.AES(k),this._prev=a.from(C),this._mode=w,this._autopadding=!0}p(v,o),v.prototype._update=function(w){this._cache.add(w);for(var k,C,O=[];k=this._cache.get(this._autopadding);)C=this._mode.decrypt(this,k),O.push(C);return a.concat(O)},v.prototype._final=function(){var w=this._cache.flush();if(this._autopadding)return u(this._mode.decrypt(this,w));if(w)throw new Error("data not multiple of block length")},v.prototype.setAutoPadding=function(w){return this._autopadding=!!w,this};function l(){this.cache=a.allocUnsafe(0)}l.prototype.add=function(w){this.cache=a.concat([this.cache,w])},l.prototype.get=function(w){var k;if(w){if(this.cache.length>16)return k=this.cache.slice(0,16),this.cache=this.cache.slice(16),k}else if(this.cache.length>=16)return k=this.cache.slice(0,16),this.cache=this.cache.slice(16),k;return null},l.prototype.flush=function(){if(this.cache.length)return this.cache};function u(w){var k=w[15];if(k<1||k>16)throw new Error("unable to decrypt data");for(var C=-1;++C<k;)if(w[C+(16-k)]!==k)throw new Error("unable to decrypt data");if(k!==16)return w.slice(0,16-k)}function h(w,k,C){var O=s[w.toLowerCase()];if(!O)throw new TypeError("invalid suite type");if(typeof C=="string"&&(C=a.from(C)),O.mode!=="GCM"&&C.length!==O.iv)throw new TypeError("invalid iv length "+C.length);if(typeof k=="string"&&(k=a.from(k)),k.length!==O.key/8)throw new TypeError("invalid key length "+k.length);return O.type==="stream"?new d(O.module,k,C,!0):O.type==="auth"?new n(O.module,k,C,!0):new v(O.module,k,C)}function m(w,k){var C=s[w.toLowerCase()];if(!C)throw new TypeError("invalid suite type");var O=c(k,!1,C.key,C.iv);return h(w,O.key,O.iv)}t.createDecipher=m,t.createDecipheriv=h},{"./aes":143,"./authCipher":144,"./modes":156,"./streamCipher":159,"cipher-base":174,evp_bytestokey:208,inherits:233,"safe-buffer":279}],147:[function(e,i,t){var n=e("./modes"),a=e("./authCipher"),s=e("safe-buffer").Buffer,d=e("./streamCipher"),o=e("cipher-base"),f=e("./aes"),c=e("evp_bytestokey"),p=e("inherits");function v(w,k,C){o.call(this),this._cache=new u,this._cipher=new f.AES(k),this._prev=s.from(C),this._mode=w,this._autopadding=!0}p(v,o),v.prototype._update=function(w){this._cache.add(w);for(var k,C,O=[];k=this._cache.get();)C=this._mode.encrypt(this,k),O.push(C);return s.concat(O)};var l=s.alloc(16,16);v.prototype._final=function(){var w=this._cache.flush();if(this._autopadding)return w=this._mode.encrypt(this,w),this._cipher.scrub(),w;if(!w.equals(l))throw this._cipher.scrub(),new Error("data not multiple of block length")},v.prototype.setAutoPadding=function(w){return this._autopadding=!!w,this};function u(){this.cache=s.allocUnsafe(0)}u.prototype.add=function(w){this.cache=s.concat([this.cache,w])},u.prototype.get=function(){if(this.cache.length>15){var w=this.cache.slice(0,16);return this.cache=this.cache.slice(16),w}return null},u.prototype.flush=function(){for(var w=16-this.cache.length,k=s.allocUnsafe(w),C=-1;++C<w;)k.writeUInt8(w,C);return s.concat([this.cache,k])};function h(w,k,C){var O=n[w.toLowerCase()];if(!O)throw new TypeError("invalid suite type");if(typeof k=="string"&&(k=s.from(k)),k.length!==O.key/8)throw new TypeError("invalid key length "+k.length);if(typeof C=="string"&&(C=s.from(C)),O.mode!=="GCM"&&C.length!==O.iv)throw new TypeError("invalid iv length "+C.length);return O.type==="stream"?new d(O.module,k,C):O.type==="auth"?new a(O.module,k,C):new v(O.module,k,C)}function m(w,k){var C=n[w.toLowerCase()];if(!C)throw new TypeError("invalid suite type");var O=c(k,!1,C.key,C.iv);return h(w,O.key,O.iv)}t.createCipheriv=h,t.createCipher=m},{"./aes":143,"./authCipher":144,"./modes":156,"./streamCipher":159,"cipher-base":174,evp_bytestokey:208,inherits:233,"safe-buffer":279}],148:[function(e,i,t){var n=e("safe-buffer").Buffer,a=n.alloc(16,0);function s(f){return[f.readUInt32BE(0),f.readUInt32BE(4),f.readUInt32BE(8),f.readUInt32BE(12)]}function d(f){var c=n.allocUnsafe(16);return c.writeUInt32BE(f[0]>>>0,0),c.writeUInt32BE(f[1]>>>0,4),c.writeUInt32BE(f[2]>>>0,8),c.writeUInt32BE(f[3]>>>0,12),c}function o(f){this.h=f,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}o.prototype.ghash=function(f){for(var c=-1;++c<f.length;)this.state[c]^=f[c];this._multiply()},o.prototype._multiply=function(){for(var f=s(this.h),c=[0,0,0,0],p,v,l,u=-1;++u<128;){for(v=(this.state[~~(u/8)]&1<<7-u%8)!==0,v&&(c[0]^=f[0],c[1]^=f[1],c[2]^=f[2],c[3]^=f[3]),l=(f[3]&1)!==0,p=3;p>0;p--)f[p]=f[p]>>>1|(f[p-1]&1)<<31;f[0]=f[0]>>>1,l&&(f[0]=f[0]^225<<24)}this.state=d(c)},o.prototype.update=function(f){this.cache=n.concat([this.cache,f]);for(var c;this.cache.length>=16;)c=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(c)},o.prototype.final=function(f,c){return this.cache.length&&this.ghash(n.concat([this.cache,a],16)),this.ghash(d([0,f,0,c])),this.state},i.exports=o},{"safe-buffer":279}],149:[function(e,i,t){function n(a){for(var s=a.length,d;s--;)if(d=a.readUInt8(s),d===255)a.writeUInt8(0,s);else{d++,a.writeUInt8(d,s);break}}i.exports=n},{}],150:[function(e,i,t){var n=e("buffer-xor");t.encrypt=function(a,s){var d=n(s,a._prev);return a._prev=a._cipher.encryptBlock(d),a._prev},t.decrypt=function(a,s){var d=a._prev;a._prev=s;var o=a._cipher.decryptBlock(s);return n(o,d)}},{"buffer-xor":170}],151:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("buffer-xor");function s(d,o,f){var c=o.length,p=a(o,d._cache);return d._cache=d._cache.slice(c),d._prev=n.concat([d._prev,f?o:p]),p}t.encrypt=function(d,o,f){for(var c=n.allocUnsafe(0),p;o.length;)if(d._cache.length===0&&(d._cache=d._cipher.encryptBlock(d._prev),d._prev=n.allocUnsafe(0)),d._cache.length<=o.length)p=d._cache.length,c=n.concat([c,s(d,o.slice(0,p),f)]),o=o.slice(p);else{c=n.concat([c,s(d,o,f)]);break}return c}},{"buffer-xor":170,"safe-buffer":279}],152:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(d,o,f){for(var c,p=-1,v=8,l=0,u,h;++p<v;)c=d._cipher.encryptBlock(d._prev),u=o&1<<7-p?128:0,h=c[0]^u,l+=(h&128)>>p%8,d._prev=s(d._prev,f?u:h);return l}function s(d,o){var f=d.length,c=-1,p=n.allocUnsafe(d.length);for(d=n.concat([d,n.from([o])]);++c<f;)p[c]=d[c]<<1|d[c+1]>>7;return p}t.encrypt=function(d,o,f){for(var c=o.length,p=n.allocUnsafe(c),v=-1;++v<c;)p[v]=a(d,o[v],f);return p}},{"safe-buffer":279}],153:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(s,d,o){var f=s._cipher.encryptBlock(s._prev),c=f[0]^d;return s._prev=n.concat([s._prev.slice(1),n.from([o?d:c])]),c}t.encrypt=function(s,d,o){for(var f=d.length,c=n.allocUnsafe(f),p=-1;++p<f;)c[p]=a(s,d[p],o);return c}},{"safe-buffer":279}],154:[function(e,i,t){var n=e("buffer-xor"),a=e("safe-buffer").Buffer,s=e("../incr32");function d(f){var c=f._cipher.encryptBlockRaw(f._prev);return s(f._prev),c}var o=16;t.encrypt=function(f,c){var p=Math.ceil(c.length/o),v=f._cache.length;f._cache=a.concat([f._cache,a.allocUnsafe(p*o)]);for(var l=0;l<p;l++){var u=d(f),h=v+l*o;f._cache.writeUInt32BE(u[0],h+0),f._cache.writeUInt32BE(u[1],h+4),f._cache.writeUInt32BE(u[2],h+8),f._cache.writeUInt32BE(u[3],h+12)}var m=f._cache.slice(0,c.length);return f._cache=f._cache.slice(c.length),n(c,m)}},{"../incr32":149,"buffer-xor":170,"safe-buffer":279}],155:[function(e,i,t){t.encrypt=function(n,a){return n._cipher.encryptBlock(a)},t.decrypt=function(n,a){return n._cipher.decryptBlock(a)}},{}],156:[function(e,i,t){var n={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},a=e("./list.json");for(var s in a)a[s].module=n[a[s].mode];i.exports=a},{"./cbc":150,"./cfb":151,"./cfb1":152,"./cfb8":153,"./ctr":154,"./ecb":155,"./list.json":157,"./ofb":158}],157:[function(e,i,t){i.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],158:[function(e,i,t){(function(n){(function(){var a=e("buffer-xor");function s(d){return d._prev=d._cipher.encryptBlock(d._prev),d._prev}t.encrypt=function(d,o){for(;d._cache.length<o.length;)d._cache=n.concat([d._cache,s(d)]);var f=d._cache.slice(0,o.length);return d._cache=d._cache.slice(o.length),a(o,f)}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:171,"buffer-xor":170}],159:[function(e,i,t){var n=e("./aes"),a=e("safe-buffer").Buffer,s=e("cipher-base"),d=e("inherits");function o(f,c,p,v){s.call(this),this._cipher=new n.AES(c),this._prev=a.from(p),this._cache=a.allocUnsafe(0),this._secCache=a.allocUnsafe(0),this._decrypt=v,this._mode=f}d(o,s),o.prototype._update=function(f){return this._mode.encrypt(this,f,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},i.exports=o},{"./aes":143,"cipher-base":174,inherits:233,"safe-buffer":279}],160:[function(e,i,t){var n=e("browserify-des"),a=e("browserify-aes/browser"),s=e("browserify-aes/modes"),d=e("browserify-des/modes"),o=e("evp_bytestokey");function f(u,h){u=u.toLowerCase();var m,w;if(s[u])m=s[u].key,w=s[u].iv;else if(d[u])m=d[u].key*8,w=d[u].iv;else throw new TypeError("invalid suite type");var k=o(h,!1,m,w);return p(u,k.key,k.iv)}function c(u,h){u=u.toLowerCase();var m,w;if(s[u])m=s[u].key,w=s[u].iv;else if(d[u])m=d[u].key*8,w=d[u].iv;else throw new TypeError("invalid suite type");var k=o(h,!1,m,w);return v(u,k.key,k.iv)}function p(u,h,m){if(u=u.toLowerCase(),s[u])return a.createCipheriv(u,h,m);if(d[u])return new n({key:h,iv:m,mode:u});throw new TypeError("invalid suite type")}function v(u,h,m){if(u=u.toLowerCase(),s[u])return a.createDecipheriv(u,h,m);if(d[u])return new n({key:h,iv:m,mode:u,decrypt:!0});throw new TypeError("invalid suite type")}function l(){return Object.keys(d).concat(a.getCiphers())}t.createCipher=t.Cipher=f,t.createCipheriv=t.Cipheriv=p,t.createDecipher=t.Decipher=c,t.createDecipheriv=t.Decipheriv=v,t.listCiphers=t.getCiphers=l},{"browserify-aes/browser":145,"browserify-aes/modes":156,"browserify-des":161,"browserify-des/modes":162,evp_bytestokey:208}],161:[function(e,i,t){var n=e("cipher-base"),a=e("des.js"),s=e("inherits"),d=e("safe-buffer").Buffer,o={"des-ede3-cbc":a.CBC.instantiate(a.EDE),"des-ede3":a.EDE,"des-ede-cbc":a.CBC.instantiate(a.EDE),"des-ede":a.EDE,"des-cbc":a.CBC.instantiate(a.DES),"des-ecb":a.DES};o.des=o["des-cbc"],o.des3=o["des-ede3-cbc"],i.exports=f,s(f,n);function f(c){n.call(this);var p=c.mode.toLowerCase(),v=o[p],l;c.decrypt?l="decrypt":l="encrypt";var u=c.key;d.isBuffer(u)||(u=d.from(u)),(p==="des-ede"||p==="des-ede-cbc")&&(u=d.concat([u,u.slice(0,8)]));var h=c.iv;d.isBuffer(h)||(h=d.from(h)),this._des=v.create({key:u,iv:h,type:l})}f.prototype._update=function(c){return d.from(this._des.update(c))},f.prototype._final=function(){return d.from(this._des.final())}},{"cipher-base":174,"des.js":181,inherits:233,"safe-buffer":279}],162:[function(e,i,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},{}],163:[function(e,i,t){(function(n){(function(){var a=e("bn.js"),s=e("randombytes");function d(c){var p=o(c),v=p.toRed(a.mont(c.modulus)).redPow(new a(c.publicExponent)).fromRed();return{blinder:v,unblinder:p.invm(c.modulus)}}function o(c){var p=c.modulus.byteLength(),v;do v=new a(s(p));while(v.cmp(c.modulus)>=0||!v.umod(c.prime1)||!v.umod(c.prime2));return v}function f(c,p){var v=d(p),l=p.modulus.byteLength(),u=new a(c).mul(v.blinder).umod(p.modulus),h=u.toRed(a.mont(p.prime1)),m=u.toRed(a.mont(p.prime2)),w=p.coefficient,k=p.prime1,C=p.prime2,O=h.redPow(p.exponent1).fromRed(),P=m.redPow(p.exponent2).fromRed(),M=O.isub(P).imul(w).umod(k).imul(C);return P.iadd(M).imul(v.unblinder).umod(p.modulus).toArrayLike(n,"be",l)}f.getr=o,i.exports=f}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":140,buffer:171,randombytes:261}],164:[function(e,i,t){i.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":165}],165:[function(e,i,t){i.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],166:[function(e,i,t){i.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],167:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("create-hash"),s=e("readable-stream"),d=e("inherits"),o=e("./sign"),f=e("./verify"),c=e("./algorithms.json");Object.keys(c).forEach(function(h){c[h].id=n.from(c[h].id,"hex"),c[h.toLowerCase()]=c[h]});function p(h){s.Writable.call(this);var m=c[h];if(!m)throw new Error("Unknown message digest");this._hashType=m.hash,this._hash=a(m.hash),this._tag=m.id,this._signType=m.sign}d(p,s.Writable),p.prototype._write=function(m,w,k){this._hash.update(m),k()},p.prototype.update=function(m,w){return typeof m=="string"&&(m=n.from(m,w)),this._hash.update(m),this},p.prototype.sign=function(m,w){this.end();var k=this._hash.digest(),C=o(k,m,this._hashType,this._signType,this._tag);return w?C.toString(w):C};function v(h){s.Writable.call(this);var m=c[h];if(!m)throw new Error("Unknown message digest");this._hash=a(m.hash),this._tag=m.id,this._signType=m.sign}d(v,s.Writable),v.prototype._write=function(m,w,k){this._hash.update(m),k()},v.prototype.update=function(m,w){return typeof m=="string"&&(m=n.from(m,w)),this._hash.update(m),this},v.prototype.verify=function(m,w,k){typeof w=="string"&&(w=n.from(w,k)),this.end();var C=this._hash.digest();return f(w,C,m,this._signType,this._tag)};function l(h){return new p(h)}function u(h){return new v(h)}i.exports={Sign:l,Verify:u,createSign:l,createVerify:u}},{"./algorithms.json":165,"./sign":168,"./verify":169,"create-hash":176,inherits:233,"readable-stream":277,"safe-buffer":279}],168:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("create-hmac"),s=e("browserify-rsa"),d=e("elliptic").ec,o=e("bn.js"),f=e("parse-asn1"),c=e("./curves.json");function p(O,P,M,D,$){var H=f(P);if(H.curve){if(D!=="ecdsa"&&D!=="ecdsa/rsa")throw new Error("wrong private key type");return v(O,H)}else if(H.type==="dsa"){if(D!=="dsa")throw new Error("wrong private key type");return l(O,H,M)}else if(D!=="rsa"&&D!=="ecdsa/rsa")throw new Error("wrong private key type");O=n.concat([$,O]);for(var Z=H.modulus.byteLength(),re=[0,1];O.length+re.length+1<Z;)re.push(255);re.push(0);for(var Y=-1;++Y<O.length;)re.push(O[Y]);var N=s(re,H);return N}function v(O,P){var M=c[P.curve.join(".")];if(!M)throw new Error("unknown curve "+P.curve.join("."));var D=new d(M),$=D.keyFromPrivate(P.privateKey),H=$.sign(O);return n.from(H.toDER())}function l(O,P,M){for(var D=P.params.priv_key,$=P.params.p,H=P.params.q,Z=P.params.g,re=new o(0),Y,N=m(O,H).mod(H),x=!1,b=h(D,H,O,M);x===!1;)Y=k(H,b,M),re=C(Z,Y,$,H),x=Y.invm(H).imul(N.add(D.mul(re))).mod(H),x.cmpn(0)===0&&(x=!1,re=new o(0));return u(re,x)}function u(O,P){O=O.toArray(),P=P.toArray(),O[0]&128&&(O=[0].concat(O)),P[0]&128&&(P=[0].concat(P));var M=O.length+P.length+4,D=[48,M,2,O.length];return D=D.concat(O,[2,P.length],P),n.from(D)}function h(O,P,M,D){if(O=n.from(O.toArray()),O.length<P.byteLength()){var $=n.alloc(P.byteLength()-O.length);O=n.concat([$,O])}var H=M.length,Z=w(M,P),re=n.alloc(H);re.fill(1);var Y=n.alloc(H);return Y=a(D,Y).update(re).update(n.from([0])).update(O).update(Z).digest(),re=a(D,Y).update(re).digest(),Y=a(D,Y).update(re).update(n.from([1])).update(O).update(Z).digest(),re=a(D,Y).update(re).digest(),{k:Y,v:re}}function m(O,P){var M=new o(O),D=(O.length<<3)-P.bitLength();return D>0&&M.ishrn(D),M}function w(O,P){O=m(O,P),O=O.mod(P);var M=n.from(O.toArray());if(M.length<P.byteLength()){var D=n.alloc(P.byteLength()-M.length);M=n.concat([D,M])}return M}function k(O,P,M){var D,$;do{for(D=n.alloc(0);D.length*8<O.bitLength();)P.v=a(M,P.k).update(P.v).digest(),D=n.concat([D,P.v]);$=m(D,O),P.k=a(M,P.k).update(P.v).update(n.from([0])).digest(),P.v=a(M,P.k).update(P.v).digest()}while($.cmp(O)!==-1);return $}function C(O,P,M,D){return O.toRed(o.mont(M)).redPow(P).fromRed().mod(D)}i.exports=p,i.exports.getKey=h,i.exports.makeKey=k},{"./curves.json":166,"bn.js":140,"browserify-rsa":163,"create-hmac":178,elliptic:191,"parse-asn1":247,"safe-buffer":279}],169:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("bn.js"),s=e("elliptic").ec,d=e("parse-asn1"),o=e("./curves.json");function f(l,u,h,m,w){var k=d(h);if(k.type==="ec"){if(m!=="ecdsa"&&m!=="ecdsa/rsa")throw new Error("wrong public key type");return c(l,u,k)}else if(k.type==="dsa"){if(m!=="dsa")throw new Error("wrong public key type");return p(l,u,k)}else if(m!=="rsa"&&m!=="ecdsa/rsa")throw new Error("wrong public key type");u=n.concat([w,u]);for(var C=k.modulus.byteLength(),O=[1],P=0;u.length+O.length+2<C;)O.push(255),P++;O.push(0);for(var M=-1;++M<u.length;)O.push(u[M]);O=n.from(O);var D=a.mont(k.modulus);l=new a(l).toRed(D),l=l.redPow(new a(k.publicExponent)),l=n.from(l.fromRed().toArray());var $=P<8?1:0;for(C=Math.min(l.length,O.length),l.length!==O.length&&($=1),M=-1;++M<C;)$|=l[M]^O[M];return $===0}function c(l,u,h){var m=o[h.data.algorithm.curve.join(".")];if(!m)throw new Error("unknown curve "+h.data.algorithm.curve.join("."));var w=new s(m),k=h.data.subjectPrivateKey.data;return w.verify(u,l,k)}function p(l,u,h){var m=h.data.p,w=h.data.q,k=h.data.g,C=h.data.pub_key,O=d.signature.decode(l,"der"),P=O.s,M=O.r;v(P,w),v(M,w);var D=a.mont(m),$=P.invm(w),H=k.toRed(D).redPow(new a(u).mul($).mod(w)).fromRed().mul(C.toRed(D).redPow(M.mul($).mod(w)).fromRed()).mod(m).mod(w);return H.cmp(M)===0}function v(l,u){if(l.cmpn(0)<=0)throw new Error("invalid sig");if(l.cmp(u)>=u)throw new Error("invalid sig")}i.exports=f},{"./curves.json":166,"bn.js":140,elliptic:191,"parse-asn1":247,"safe-buffer":279}],170:[function(e,i,t){(function(n){(function(){i.exports=function(s,d){for(var o=Math.min(s.length,d.length),f=new n(o),c=0;c<o;++c)f[c]=s[c]^d[c];return f}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:171}],171:[function(e,i,t){(function(n){(function(){var a=e("base64-js"),s=e("ieee754");t.Buffer=c,t.SlowBuffer=O,t.INSPECT_MAX_BYTES=50;var d=2147483647;t.kMaxLength=d,c.TYPED_ARRAY_SUPPORT=o(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{var Q=new Uint8Array(1);return Q.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Q.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function f(Q){if(Q>d)throw new RangeError('The value "'+Q+'" is invalid for option "size"');var B=new Uint8Array(Q);return B.__proto__=c.prototype,B}function c(Q,B,W){if(typeof Q=="number"){if(typeof B=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return u(Q)}return p(Q,B,W)}typeof Symbol<"u"&&Symbol.species!=null&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),c.poolSize=8192;function p(Q,B,W){if(typeof Q=="string")return h(Q,B);if(ArrayBuffer.isView(Q))return m(Q);if(Q==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q);if(ee(Q,ArrayBuffer)||Q&&ee(Q.buffer,ArrayBuffer))return w(Q,B,W);if(typeof Q=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var X=Q.valueOf&&Q.valueOf();if(X!=null&&X!==Q)return c.from(X,B,W);var ce=k(Q);if(ce)return ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Q[Symbol.toPrimitive]=="function")return c.from(Q[Symbol.toPrimitive]("string"),B,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Q)}c.from=function(Q,B,W){return p(Q,B,W)},c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array;function v(Q){if(typeof Q!="number")throw new TypeError('"size" argument must be of type number');if(Q<0)throw new RangeError('The value "'+Q+'" is invalid for option "size"')}function l(Q,B,W){return v(Q),Q<=0?f(Q):B!==void 0?typeof W=="string"?f(Q).fill(B,W):f(Q).fill(B):f(Q)}c.alloc=function(Q,B,W){return l(Q,B,W)};function u(Q){return v(Q),f(Q<0?0:C(Q)|0)}c.allocUnsafe=function(Q){return u(Q)},c.allocUnsafeSlow=function(Q){return u(Q)};function h(Q,B){if((typeof B!="string"||B==="")&&(B="utf8"),!c.isEncoding(B))throw new TypeError("Unknown encoding: "+B);var W=P(Q,B)|0,X=f(W),ce=X.write(Q,B);return ce!==W&&(X=X.slice(0,ce)),X}function m(Q){for(var B=Q.length<0?0:C(Q.length)|0,W=f(B),X=0;X<B;X+=1)W[X]=Q[X]&255;return W}function w(Q,B,W){if(B<0||Q.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(Q.byteLength<B+(W||0))throw new RangeError('"length" is outside of buffer bounds');var X;return B===void 0&&W===void 0?X=new Uint8Array(Q):W===void 0?X=new Uint8Array(Q,B):X=new Uint8Array(Q,B,W),X.__proto__=c.prototype,X}function k(Q){if(c.isBuffer(Q)){var B=C(Q.length)|0,W=f(B);return W.length===0||Q.copy(W,0,0,B),W}if(Q.length!==void 0)return typeof Q.length!="number"||te(Q.length)?f(0):m(Q);if(Q.type==="Buffer"&&Array.isArray(Q.data))return m(Q.data)}function C(Q){if(Q>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return Q|0}function O(Q){return+Q!=Q&&(Q=0),c.alloc(+Q)}c.isBuffer=function(B){return B!=null&&B._isBuffer===!0&&B!==c.prototype},c.compare=function(B,W){if(ee(B,Uint8Array)&&(B=c.from(B,B.offset,B.byteLength)),ee(W,Uint8Array)&&(W=c.from(W,W.offset,W.byteLength)),!c.isBuffer(B)||!c.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===W)return 0;for(var X=B.length,ce=W.length,he=0,ge=Math.min(X,ce);he<ge;++he)if(B[he]!==W[he]){X=B[he],ce=W[he];break}return X<ce?-1:ce<X?1:0},c.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(B,W){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return c.alloc(0);var X;if(W===void 0)for(W=0,X=0;X<B.length;++X)W+=B[X].length;var ce=c.allocUnsafe(W),he=0;for(X=0;X<B.length;++X){var ge=B[X];if(ee(ge,Uint8Array)&&(ge=c.from(ge)),!c.isBuffer(ge))throw new TypeError('"list" argument must be an Array of Buffers');ge.copy(ce,he),he+=ge.length}return ce};function P(Q,B){if(c.isBuffer(Q))return Q.length;if(ArrayBuffer.isView(Q)||ee(Q,ArrayBuffer))return Q.byteLength;if(typeof Q!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Q);var W=Q.length,X=arguments.length>2&&arguments[2]===!0;if(!X&&W===0)return 0;for(var ce=!1;;)switch(B){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return oe(Q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return we(Q).length;default:if(ce)return X?-1:oe(Q).length;B=(""+B).toLowerCase(),ce=!0}}c.byteLength=P;function M(Q,B,W){var X=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,B>>>=0,W<=B))return"";for(Q||(Q="utf8");;)switch(Q){case"hex":return G(this,B,W);case"utf8":case"utf-8":return g(this,B,W);case"ascii":return A(this,B,W);case"latin1":case"binary":return J(this,B,W);case"base64":return _(this,B,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,B,W);default:if(X)throw new TypeError("Unknown encoding: "+Q);Q=(Q+"").toLowerCase(),X=!0}}c.prototype._isBuffer=!0;function D(Q,B,W){var X=Q[B];Q[B]=Q[W],Q[W]=X}c.prototype.swap16=function(){var B=this.length;if(B%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var W=0;W<B;W+=2)D(this,W,W+1);return this},c.prototype.swap32=function(){var B=this.length;if(B%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var W=0;W<B;W+=4)D(this,W,W+3),D(this,W+1,W+2);return this},c.prototype.swap64=function(){var B=this.length;if(B%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var W=0;W<B;W+=8)D(this,W,W+7),D(this,W+1,W+6),D(this,W+2,W+5),D(this,W+3,W+4);return this},c.prototype.toString=function(){var B=this.length;return B===0?"":arguments.length===0?g(this,0,B):M.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(B){if(!c.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B?!0:c.compare(this,B)===0},c.prototype.inspect=function(){var B="",W=t.INSPECT_MAX_BYTES;return B=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(B+=" ... "),"<Buffer "+B+">"},c.prototype.compare=function(B,W,X,ce,he){if(ee(B,Uint8Array)&&(B=c.from(B,B.offset,B.byteLength)),!c.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(W===void 0&&(W=0),X===void 0&&(X=B?B.length:0),ce===void 0&&(ce=0),he===void 0&&(he=this.length),W<0||X>B.length||ce<0||he>this.length)throw new RangeError("out of range index");if(ce>=he&&W>=X)return 0;if(ce>=he)return-1;if(W>=X)return 1;if(W>>>=0,X>>>=0,ce>>>=0,he>>>=0,this===B)return 0;for(var ge=he-ce,fe=X-W,y=Math.min(ge,fe),U=this.slice(ce,he),q=B.slice(W,X),de=0;de<y;++de)if(U[de]!==q[de]){ge=U[de],fe=q[de];break}return ge<fe?-1:fe<ge?1:0};function $(Q,B,W,X,ce){if(Q.length===0)return-1;if(typeof W=="string"?(X=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,te(W)&&(W=ce?0:Q.length-1),W<0&&(W=Q.length+W),W>=Q.length){if(ce)return-1;W=Q.length-1}else if(W<0)if(ce)W=0;else return-1;if(typeof B=="string"&&(B=c.from(B,X)),c.isBuffer(B))return B.length===0?-1:H(Q,B,W,X,ce);if(typeof B=="number")return B=B&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(Q,B,W):Uint8Array.prototype.lastIndexOf.call(Q,B,W):H(Q,[B],W,X,ce);throw new TypeError("val must be string, number or Buffer")}function H(Q,B,W,X,ce){var he=1,ge=Q.length,fe=B.length;if(X!==void 0&&(X=String(X).toLowerCase(),X==="ucs2"||X==="ucs-2"||X==="utf16le"||X==="utf-16le")){if(Q.length<2||B.length<2)return-1;he=2,ge/=2,fe/=2,W/=2}function y(S,F){return he===1?S[F]:S.readUInt16BE(F*he)}var U;if(ce){var q=-1;for(U=W;U<ge;U++)if(y(Q,U)===y(B,q===-1?0:U-q)){if(q===-1&&(q=U),U-q+1===fe)return q*he}else q!==-1&&(U-=U-q),q=-1}else for(W+fe>ge&&(W=ge-fe),U=W;U>=0;U--){for(var de=!0,j=0;j<fe;j++)if(y(Q,U+j)!==y(B,j)){de=!1;break}if(de)return U}return-1}c.prototype.includes=function(B,W,X){return this.indexOf(B,W,X)!==-1},c.prototype.indexOf=function(B,W,X){return $(this,B,W,X,!0)},c.prototype.lastIndexOf=function(B,W,X){return $(this,B,W,X,!1)};function Z(Q,B,W,X){W=Number(W)||0;var ce=Q.length-W;X?(X=Number(X),X>ce&&(X=ce)):X=ce;var he=B.length;X>he/2&&(X=he/2);for(var ge=0;ge<X;++ge){var fe=parseInt(B.substr(ge*2,2),16);if(te(fe))return ge;Q[W+ge]=fe}return ge}function re(Q,B,W,X){return le(oe(B,Q.length-W),Q,W,X)}function Y(Q,B,W,X){return le(ue(B),Q,W,X)}function N(Q,B,W,X){return Y(Q,B,W,X)}function x(Q,B,W,X){return le(we(B),Q,W,X)}function b(Q,B,W,X){return le(ye(B,Q.length-W),Q,W,X)}c.prototype.write=function(B,W,X,ce){if(W===void 0)ce="utf8",X=this.length,W=0;else if(X===void 0&&typeof W=="string")ce=W,X=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(X)?(X=X>>>0,ce===void 0&&(ce="utf8")):(ce=X,X=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var he=this.length-W;if((X===void 0||X>he)&&(X=he),B.length>0&&(X<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");for(var ge=!1;;)switch(ce){case"hex":return Z(this,B,W,X);case"utf8":case"utf-8":return re(this,B,W,X);case"ascii":return Y(this,B,W,X);case"latin1":case"binary":return N(this,B,W,X);case"base64":return x(this,B,W,X);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,B,W,X);default:if(ge)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),ge=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(Q,B,W){return B===0&&W===Q.length?a.fromByteArray(Q):a.fromByteArray(Q.slice(B,W))}function g(Q,B,W){W=Math.min(Q.length,W);for(var X=[],ce=B;ce<W;){var he=Q[ce],ge=null,fe=he>239?4:he>223?3:he>191?2:1;if(ce+fe<=W){var y,U,q,de;switch(fe){case 1:he<128&&(ge=he);break;case 2:y=Q[ce+1],(y&192)===128&&(de=(he&31)<<6|y&63,de>127&&(ge=de));break;case 3:y=Q[ce+1],U=Q[ce+2],(y&192)===128&&(U&192)===128&&(de=(he&15)<<12|(y&63)<<6|U&63,de>2047&&(de<55296||de>57343)&&(ge=de));break;case 4:y=Q[ce+1],U=Q[ce+2],q=Q[ce+3],(y&192)===128&&(U&192)===128&&(q&192)===128&&(de=(he&15)<<18|(y&63)<<12|(U&63)<<6|q&63,de>65535&&de<1114112&&(ge=de))}}ge===null?(ge=65533,fe=1):ge>65535&&(ge-=65536,X.push(ge>>>10&1023|55296),ge=56320|ge&1023),X.push(ge),ce+=fe}return T(X)}var E=4096;function T(Q){var B=Q.length;if(B<=E)return String.fromCharCode.apply(String,Q);for(var W="",X=0;X<B;)W+=String.fromCharCode.apply(String,Q.slice(X,X+=E));return W}function A(Q,B,W){var X="";W=Math.min(Q.length,W);for(var ce=B;ce<W;++ce)X+=String.fromCharCode(Q[ce]&127);return X}function J(Q,B,W){var X="";W=Math.min(Q.length,W);for(var ce=B;ce<W;++ce)X+=String.fromCharCode(Q[ce]);return X}function G(Q,B,W){var X=Q.length;(!B||B<0)&&(B=0),(!W||W<0||W>X)&&(W=X);for(var ce="",he=B;he<W;++he)ce+=ke(Q[he]);return ce}function I(Q,B,W){for(var X=Q.slice(B,W),ce="",he=0;he<X.length;he+=2)ce+=String.fromCharCode(X[he]+X[he+1]*256);return ce}c.prototype.slice=function(B,W){var X=this.length;B=~~B,W=W===void 0?X:~~W,B<0?(B+=X,B<0&&(B=0)):B>X&&(B=X),W<0?(W+=X,W<0&&(W=0)):W>X&&(W=X),W<B&&(W=B);var ce=this.subarray(B,W);return ce.__proto__=c.prototype,ce};function V(Q,B,W){if(Q%1!==0||Q<0)throw new RangeError("offset is not uint");if(Q+B>W)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUIntLE=function(B,W,X){B=B>>>0,W=W>>>0,X||V(B,W,this.length);for(var ce=this[B],he=1,ge=0;++ge<W&&(he*=256);)ce+=this[B+ge]*he;return ce},c.prototype.readUIntBE=function(B,W,X){B=B>>>0,W=W>>>0,X||V(B,W,this.length);for(var ce=this[B+--W],he=1;W>0&&(he*=256);)ce+=this[B+--W]*he;return ce},c.prototype.readUInt8=function(B,W){return B=B>>>0,W||V(B,1,this.length),this[B]},c.prototype.readUInt16LE=function(B,W){return B=B>>>0,W||V(B,2,this.length),this[B]|this[B+1]<<8},c.prototype.readUInt16BE=function(B,W){return B=B>>>0,W||V(B,2,this.length),this[B]<<8|this[B+1]},c.prototype.readUInt32LE=function(B,W){return B=B>>>0,W||V(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+this[B+3]*16777216},c.prototype.readUInt32BE=function(B,W){return B=B>>>0,W||V(B,4,this.length),this[B]*16777216+(this[B+1]<<16|this[B+2]<<8|this[B+3])},c.prototype.readIntLE=function(B,W,X){B=B>>>0,W=W>>>0,X||V(B,W,this.length);for(var ce=this[B],he=1,ge=0;++ge<W&&(he*=256);)ce+=this[B+ge]*he;return he*=128,ce>=he&&(ce-=Math.pow(2,8*W)),ce},c.prototype.readIntBE=function(B,W,X){B=B>>>0,W=W>>>0,X||V(B,W,this.length);for(var ce=W,he=1,ge=this[B+--ce];ce>0&&(he*=256);)ge+=this[B+--ce]*he;return he*=128,ge>=he&&(ge-=Math.pow(2,8*W)),ge},c.prototype.readInt8=function(B,W){return B=B>>>0,W||V(B,1,this.length),this[B]&128?(255-this[B]+1)*-1:this[B]},c.prototype.readInt16LE=function(B,W){B=B>>>0,W||V(B,2,this.length);var X=this[B]|this[B+1]<<8;return X&32768?X|4294901760:X},c.prototype.readInt16BE=function(B,W){B=B>>>0,W||V(B,2,this.length);var X=this[B+1]|this[B]<<8;return X&32768?X|4294901760:X},c.prototype.readInt32LE=function(B,W){return B=B>>>0,W||V(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},c.prototype.readInt32BE=function(B,W){return B=B>>>0,W||V(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},c.prototype.readFloatLE=function(B,W){return B=B>>>0,W||V(B,4,this.length),s.read(this,B,!0,23,4)},c.prototype.readFloatBE=function(B,W){return B=B>>>0,W||V(B,4,this.length),s.read(this,B,!1,23,4)},c.prototype.readDoubleLE=function(B,W){return B=B>>>0,W||V(B,8,this.length),s.read(this,B,!0,52,8)},c.prototype.readDoubleBE=function(B,W){return B=B>>>0,W||V(B,8,this.length),s.read(this,B,!1,52,8)};function L(Q,B,W,X,ce,he){if(!c.isBuffer(Q))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>ce||B<he)throw new RangeError('"value" argument is out of bounds');if(W+X>Q.length)throw new RangeError("Index out of range")}c.prototype.writeUIntLE=function(B,W,X,ce){if(B=+B,W=W>>>0,X=X>>>0,!ce){var he=Math.pow(2,8*X)-1;L(this,B,W,X,he,0)}var ge=1,fe=0;for(this[W]=B&255;++fe<X&&(ge*=256);)this[W+fe]=B/ge&255;return W+X},c.prototype.writeUIntBE=function(B,W,X,ce){if(B=+B,W=W>>>0,X=X>>>0,!ce){var he=Math.pow(2,8*X)-1;L(this,B,W,X,he,0)}var ge=X-1,fe=1;for(this[W+ge]=B&255;--ge>=0&&(fe*=256);)this[W+ge]=B/fe&255;return W+X},c.prototype.writeUInt8=function(B,W,X){return B=+B,W=W>>>0,X||L(this,B,W,1,255,0),this[W]=B&255,W+1},c.prototype.writeUInt16LE=function(B,W,X){return B=+B,W=W>>>0,X||L(this,B,W,2,65535,0),this[W]=B&255,this[W+1]=B>>>8,W+2},c.prototype.writeUInt16BE=function(B,W,X){return B=+B,W=W>>>0,X||L(this,B,W,2,65535,0),this[W]=B>>>8,this[W+1]=B&255,W+2},c.prototype.writeUInt32LE=function(B,W,X){return B=+B,W=W>>>0,X||L(this,B,W,4,4294967295,0),this[W+3]=B>>>24,this[W+2]=B>>>16,this[W+1]=B>>>8,this[W]=B&255,W+4},c.prototype.writeUInt32BE=function(B,W,X){return B=+B,W=W>>>0,X||L(this,B,W,4,4294967295,0),this[W]=B>>>24,this[W+1]=B>>>16,this[W+2]=B>>>8,this[W+3]=B&255,W+4},c.prototype.writeIntLE=function(B,W,X,ce){if(B=+B,W=W>>>0,!ce){var he=Math.pow(2,8*X-1);L(this,B,W,X,he-1,-he)}var ge=0,fe=1,y=0;for(this[W]=B&255;++ge<X&&(fe*=256);)B<0&&y===0&&this[W+ge-1]!==0&&(y=1),this[W+ge]=(B/fe>>0)-y&255;return W+X},c.prototype.writeIntBE=function(B,W,X,ce){if(B=+B,W=W>>>0,!ce){var he=Math.pow(2,8*X-1);L(this,B,W,X,he-1,-he)}var ge=X-1,fe=1,y=0;for(this[W+ge]=B&255;--ge>=0&&(fe*=256);)B<0&&y===0&&this[W+ge+1]!==0&&(y=1),this[W+ge]=(B/fe>>0)-y&255;return W+X},c.prototype.writeInt8=function(B,W,X){return B=+B,W=W>>>0,X||L(this,B,W,1,127,-128),B<0&&(B=255+B+1),this[W]=B&255,W+1},c.prototype.writeInt16LE=function(B,W,X){return B=+B,W=W>>>0,X||L(this,B,W,2,32767,-32768),this[W]=B&255,this[W+1]=B>>>8,W+2},c.prototype.writeInt16BE=function(B,W,X){return B=+B,W=W>>>0,X||L(this,B,W,2,32767,-32768),this[W]=B>>>8,this[W+1]=B&255,W+2},c.prototype.writeInt32LE=function(B,W,X){return B=+B,W=W>>>0,X||L(this,B,W,4,2147483647,-2147483648),this[W]=B&255,this[W+1]=B>>>8,this[W+2]=B>>>16,this[W+3]=B>>>24,W+4},c.prototype.writeInt32BE=function(B,W,X){return B=+B,W=W>>>0,X||L(this,B,W,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[W]=B>>>24,this[W+1]=B>>>16,this[W+2]=B>>>8,this[W+3]=B&255,W+4};function z(Q,B,W,X,ce,he){if(W+X>Q.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function ie(Q,B,W,X,ce){return B=+B,W=W>>>0,ce||z(Q,B,W,4),s.write(Q,B,W,X,23,4),W+4}c.prototype.writeFloatLE=function(B,W,X){return ie(this,B,W,!0,X)},c.prototype.writeFloatBE=function(B,W,X){return ie(this,B,W,!1,X)};function se(Q,B,W,X,ce){return B=+B,W=W>>>0,ce||z(Q,B,W,8),s.write(Q,B,W,X,52,8),W+8}c.prototype.writeDoubleLE=function(B,W,X){return se(this,B,W,!0,X)},c.prototype.writeDoubleBE=function(B,W,X){return se(this,B,W,!1,X)},c.prototype.copy=function(B,W,X,ce){if(!c.isBuffer(B))throw new TypeError("argument should be a Buffer");if(X||(X=0),!ce&&ce!==0&&(ce=this.length),W>=B.length&&(W=B.length),W||(W=0),ce>0&&ce<X&&(ce=X),ce===X||B.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(X<0||X>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),B.length-W<ce-X&&(ce=B.length-W+X);var he=ce-X;if(this===B&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(W,X,ce);else if(this===B&&X<W&&W<ce)for(var ge=he-1;ge>=0;--ge)B[ge+W]=this[ge+X];else Uint8Array.prototype.set.call(B,this.subarray(X,ce),W);return he},c.prototype.fill=function(B,W,X,ce){if(typeof B=="string"){if(typeof W=="string"?(ce=W,W=0,X=this.length):typeof X=="string"&&(ce=X,X=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!c.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(B.length===1){var he=B.charCodeAt(0);(ce==="utf8"&&he<128||ce==="latin1")&&(B=he)}}else typeof B=="number"&&(B=B&255);if(W<0||this.length<W||this.length<X)throw new RangeError("Out of range index");if(X<=W)return this;W=W>>>0,X=X===void 0?this.length:X>>>0,B||(B=0);var ge;if(typeof B=="number")for(ge=W;ge<X;++ge)this[ge]=B;else{var fe=c.isBuffer(B)?B:c.from(B,ce),y=fe.length;if(y===0)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(ge=0;ge<X-W;++ge)this[ge+W]=fe[ge%y]}return this};var me=/[^+/0-9A-Za-z-_]/g;function Se(Q){if(Q=Q.split("=")[0],Q=Q.trim().replace(me,""),Q.length<2)return"";for(;Q.length%4!==0;)Q=Q+"=";return Q}function ke(Q){return Q<16?"0"+Q.toString(16):Q.toString(16)}function oe(Q,B){B=B||1/0;for(var W,X=Q.length,ce=null,he=[],ge=0;ge<X;++ge){if(W=Q.charCodeAt(ge),W>55295&&W<57344){if(!ce){if(W>56319){(B-=3)>-1&&he.push(239,191,189);continue}else if(ge+1===X){(B-=3)>-1&&he.push(239,191,189);continue}ce=W;continue}if(W<56320){(B-=3)>-1&&he.push(239,191,189),ce=W;continue}W=(ce-55296<<10|W-56320)+65536}else ce&&(B-=3)>-1&&he.push(239,191,189);if(ce=null,W<128){if((B-=1)<0)break;he.push(W)}else if(W<2048){if((B-=2)<0)break;he.push(W>>6|192,W&63|128)}else if(W<65536){if((B-=3)<0)break;he.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((B-=4)<0)break;he.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return he}function ue(Q){for(var B=[],W=0;W<Q.length;++W)B.push(Q.charCodeAt(W)&255);return B}function ye(Q,B){for(var W,X,ce,he=[],ge=0;ge<Q.length&&!((B-=2)<0);++ge)W=Q.charCodeAt(ge),X=W>>8,ce=W%256,he.push(ce),he.push(X);return he}function we(Q){return a.toByteArray(Se(Q))}function le(Q,B,W,X){for(var ce=0;ce<X&&!(ce+W>=B.length||ce>=Q.length);++ce)B[ce+W]=Q[ce];return ce}function ee(Q,B){return Q instanceof B||Q!=null&&Q.constructor!=null&&Q.constructor.name!=null&&Q.constructor.name===B.name}function te(Q){return Q!==Q}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":138,buffer:171,ieee754:232}],172:[function(e,i,t){var n=e("get-intrinsic"),a=e("./"),s=a(n("String.prototype.indexOf"));i.exports=function(o,f){var c=n(o,!!f);return typeof c=="function"&&s(o,".prototype.")>-1?a(c):c}},{"./":173,"get-intrinsic":212}],173:[function(e,i,t){var n=e("function-bind"),a=e("get-intrinsic"),s=a("%Function.prototype.apply%"),d=a("%Function.prototype.call%"),o=a("%Reflect.apply%",!0)||n.call(d,s),f=a("%Object.getOwnPropertyDescriptor%",!0),c=a("%Object.defineProperty%",!0),p=a("%Math.max%");if(c)try{c({},"a",{value:1})}catch{c=null}i.exports=function(u){var h=o(n,d,arguments);if(f&&c){var m=f(h,"length");m.configurable&&c(h,"length",{value:1+p(0,u.length-(arguments.length-1))})}return h};var v=function(){return o(n,s,arguments)};c?c(i.exports,"apply",{value:v}):i.exports.apply=v},{"function-bind":211,"get-intrinsic":212}],174:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("stream").Transform,s=e("string_decoder").StringDecoder,d=e("inherits");function o(f){a.call(this),this.hashMode=typeof f=="string",this.hashMode?this[f]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}d(o,a),o.prototype.update=function(f,c,p){typeof f=="string"&&(f=n.from(f,c));var v=this._update(f);return this.hashMode?this:(p&&(v=this._toString(v,p)),v)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(f,c,p){var v;try{this.hashMode?this._update(f):this.push(this._update(f))}catch(l){v=l}finally{p(v)}},o.prototype._flush=function(f){var c;try{this.push(this.__final())}catch(p){c=p}f(c)},o.prototype._finalOrDigest=function(f){var c=this.__final()||n.alloc(0);return f&&(c=this._toString(c,f,!0)),c},o.prototype._toString=function(f,c,p){if(this._decoder||(this._decoder=new s(c),this._encoding=c),this._encoding!==c)throw new Error("can't switch encodings");var v=this._decoder.write(f);return p&&(v+=this._decoder.end()),v},i.exports=o},{inherits:233,"safe-buffer":279,stream:289,string_decoder:290}],175:[function(e,i,t){(function(n){(function(){var a=e("elliptic"),s=e("bn.js");i.exports=function(p){return new o(p)};var d={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};d.p224=d.secp224r1,d.p256=d.secp256r1=d.prime256v1,d.p192=d.secp192r1=d.prime192v1,d.p384=d.secp384r1,d.p521=d.secp521r1;function o(c){this.curveType=d[c],this.curveType||(this.curveType={name:c}),this.curve=new a.ec(this.curveType.name),this.keys=void 0}o.prototype.generateKeys=function(c,p){return this.keys=this.curve.genKeyPair(),this.getPublicKey(c,p)},o.prototype.computeSecret=function(c,p,v){p=p||"utf8",n.isBuffer(c)||(c=new n(c,p));var l=this.curve.keyFromPublic(c).getPublic(),u=l.mul(this.keys.getPrivate()).getX();return f(u,v,this.curveType.byteLength)},o.prototype.getPublicKey=function(c,p){var v=this.keys.getPublic(p==="compressed",!0);return p==="hybrid"&&(v[v.length-1]%2?v[0]=7:v[0]=6),f(v,c)},o.prototype.getPrivateKey=function(c){return f(this.keys.getPrivate(),c)},o.prototype.setPublicKey=function(c,p){return p=p||"utf8",n.isBuffer(c)||(c=new n(c,p)),this.keys._importPublic(c),this},o.prototype.setPrivateKey=function(c,p){p=p||"utf8",n.isBuffer(c)||(c=new n(c,p));var v=new s(c);return v=v.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(v),this};function f(c,p,v){Array.isArray(c)||(c=c.toArray());var l=new n(c);if(v&&l.length<v){var u=new n(v-l.length);u.fill(0),l=n.concat([u,l])}return p?l.toString(p):l}}).call(this)}).call(this,e("buffer").Buffer)},{"bn.js":139,buffer:171,elliptic:191}],176:[function(e,i,t){var n=e("inherits"),a=e("md5.js"),s=e("ripemd160"),d=e("sha.js"),o=e("cipher-base");function f(c){o.call(this,"digest"),this._hash=c}n(f,o),f.prototype._update=function(c){this._hash.update(c)},f.prototype._final=function(){return this._hash.digest()},i.exports=function(p){return p=p.toLowerCase(),p==="md5"?new a:p==="rmd160"||p==="ripemd160"?new s:new f(d(p))}},{"cipher-base":174,inherits:233,"md5.js":239,ripemd160:278,"sha.js":282}],177:[function(e,i,t){var n=e("md5.js");i.exports=function(a){return new n().update(a).digest()}},{"md5.js":239}],178:[function(e,i,t){var n=e("inherits"),a=e("./legacy"),s=e("cipher-base"),d=e("safe-buffer").Buffer,o=e("create-hash/md5"),f=e("ripemd160"),c=e("sha.js"),p=d.alloc(128);function v(l,u){s.call(this,"digest"),typeof u=="string"&&(u=d.from(u));var h=l==="sha512"||l==="sha384"?128:64;if(this._alg=l,this._key=u,u.length>h){var m=l==="rmd160"?new f:c(l);u=m.update(u).digest()}else u.length<h&&(u=d.concat([u,p],h));for(var w=this._ipad=d.allocUnsafe(h),k=this._opad=d.allocUnsafe(h),C=0;C<h;C++)w[C]=u[C]^54,k[C]=u[C]^92;this._hash=l==="rmd160"?new f:c(l),this._hash.update(w)}n(v,s),v.prototype._update=function(l){this._hash.update(l)},v.prototype._final=function(){var l=this._hash.digest(),u=this._alg==="rmd160"?new f:c(this._alg);return u.update(this._opad).update(l).digest()},i.exports=function(u,h){return u=u.toLowerCase(),u==="rmd160"||u==="ripemd160"?new v("rmd160",h):u==="md5"?new a(o,h):new v(u,h)}},{"./legacy":179,"cipher-base":174,"create-hash/md5":177,inherits:233,ripemd160:278,"safe-buffer":279,"sha.js":282}],179:[function(e,i,t){var n=e("inherits"),a=e("safe-buffer").Buffer,s=e("cipher-base"),d=a.alloc(128),o=64;function f(c,p){s.call(this,"digest"),typeof p=="string"&&(p=a.from(p)),this._alg=c,this._key=p,p.length>o?p=c(p):p.length<o&&(p=a.concat([p,d],o));for(var v=this._ipad=a.allocUnsafe(o),l=this._opad=a.allocUnsafe(o),u=0;u<o;u++)v[u]=p[u]^54,l[u]=p[u]^92;this._hash=[v]}n(f,s),f.prototype._update=function(c){this._hash.push(c)},f.prototype._final=function(){var c=this._alg(a.concat(this._hash));return this._alg(a.concat([this._opad,c]))},i.exports=f},{"cipher-base":174,inherits:233,"safe-buffer":279}],180:[function(e,i,t){t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=e("randombytes"),t.createHash=t.Hash=e("create-hash"),t.createHmac=t.Hmac=e("create-hmac");var n=e("browserify-sign/algos"),a=Object.keys(n),s=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(a);t.getHashes=function(){return s};var d=e("pbkdf2");t.pbkdf2=d.pbkdf2,t.pbkdf2Sync=d.pbkdf2Sync;var o=e("browserify-cipher");t.Cipher=o.Cipher,t.createCipher=o.createCipher,t.Cipheriv=o.Cipheriv,t.createCipheriv=o.createCipheriv,t.Decipher=o.Decipher,t.createDecipher=o.createDecipher,t.Decipheriv=o.Decipheriv,t.createDecipheriv=o.createDecipheriv,t.getCiphers=o.getCiphers,t.listCiphers=o.listCiphers;var f=e("diffie-hellman");t.DiffieHellmanGroup=f.DiffieHellmanGroup,t.createDiffieHellmanGroup=f.createDiffieHellmanGroup,t.getDiffieHellman=f.getDiffieHellman,t.createDiffieHellman=f.createDiffieHellman,t.DiffieHellman=f.DiffieHellman;var c=e("browserify-sign");t.createSign=c.createSign,t.Sign=c.Sign,t.createVerify=c.createVerify,t.Verify=c.Verify,t.createECDH=e("create-ecdh");var p=e("public-encrypt");t.publicEncrypt=p.publicEncrypt,t.privateEncrypt=p.privateEncrypt,t.publicDecrypt=p.publicDecrypt,t.privateDecrypt=p.privateDecrypt;var v=e("randomfill");t.randomFill=v.randomFill,t.randomFillSync=v.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":160,"browserify-sign":167,"browserify-sign/algos":164,"create-ecdh":175,"create-hash":176,"create-hmac":178,"diffie-hellman":187,pbkdf2:248,"public-encrypt":255,randombytes:261,randomfill:262}],181:[function(e,i,t){t.utils=e("./des/utils"),t.Cipher=e("./des/cipher"),t.DES=e("./des/des"),t.CBC=e("./des/cbc"),t.EDE=e("./des/ede")},{"./des/cbc":182,"./des/cipher":183,"./des/des":184,"./des/ede":185,"./des/utils":186}],182:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits"),s={};function d(f){n.equal(f.length,8,"Invalid IV length"),this.iv=new Array(8);for(var c=0;c<this.iv.length;c++)this.iv[c]=f[c]}function o(f){function c(u){f.call(this,u),this._cbcInit()}a(c,f);for(var p=Object.keys(s),v=0;v<p.length;v++){var l=p[v];c.prototype[l]=s[l]}return c.create=function(h){return new c(h)},c}t.instantiate=o,s._cbcInit=function(){var c=new d(this.options.iv);this._cbcState=c},s._update=function(c,p,v,l){var u=this._cbcState,h=this.constructor.super_.prototype,m=u.iv;if(this.type==="encrypt"){for(var w=0;w<this.blockSize;w++)m[w]^=c[p+w];h._update.call(this,m,0,v,l);for(var w=0;w<this.blockSize;w++)m[w]=v[l+w]}else{h._update.call(this,c,p,v,l);for(var w=0;w<this.blockSize;w++)v[l+w]^=m[w];for(var w=0;w<this.blockSize;w++)m[w]=c[p+w]}}},{inherits:233,"minimalistic-assert":241}],183:[function(e,i,t){var n=e("minimalistic-assert");function a(s){this.options=s,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}i.exports=a,a.prototype._init=function(){},a.prototype.update=function(d){return d.length===0?[]:this.type==="decrypt"?this._updateDecrypt(d):this._updateEncrypt(d)},a.prototype._buffer=function(d,o){for(var f=Math.min(this.buffer.length-this.bufferOff,d.length-o),c=0;c<f;c++)this.buffer[this.bufferOff+c]=d[o+c];return this.bufferOff+=f,f},a.prototype._flushBuffer=function(d,o){return this._update(this.buffer,0,d,o),this.bufferOff=0,this.blockSize},a.prototype._updateEncrypt=function(d){var o=0,f=0,c=(this.bufferOff+d.length)/this.blockSize|0,p=new Array(c*this.blockSize);this.bufferOff!==0&&(o+=this._buffer(d,o),this.bufferOff===this.buffer.length&&(f+=this._flushBuffer(p,f)));for(var v=d.length-(d.length-o)%this.blockSize;o<v;o+=this.blockSize)this._update(d,o,p,f),f+=this.blockSize;for(;o<d.length;o++,this.bufferOff++)this.buffer[this.bufferOff]=d[o];return p},a.prototype._updateDecrypt=function(d){for(var o=0,f=0,c=Math.ceil((this.bufferOff+d.length)/this.blockSize)-1,p=new Array(c*this.blockSize);c>0;c--)o+=this._buffer(d,o),f+=this._flushBuffer(p,f);return o+=this._buffer(d,o),p},a.prototype.final=function(d){var o;d&&(o=this.update(d));var f;return this.type==="encrypt"?f=this._finalEncrypt():f=this._finalDecrypt(),o?o.concat(f):f},a.prototype._pad=function(d,o){if(o===0)return!1;for(;o<d.length;)d[o++]=0;return!0},a.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var d=new Array(this.blockSize);return this._update(this.buffer,0,d,0),d},a.prototype._unpad=function(d){return d},a.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var d=new Array(this.blockSize);return this._flushBuffer(d,0),this._unpad(d)}},{"minimalistic-assert":241}],184:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits"),s=e("./utils"),d=e("./cipher");function o(){this.tmp=new Array(2),this.keys=null}function f(p){d.call(this,p);var v=new o;this._desState=v,this.deriveKeys(v,p.key)}a(f,d),i.exports=f,f.create=function(v){return new f(v)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];f.prototype.deriveKeys=function(v,l){v.keys=new Array(16*2),n.equal(l.length,this.blockSize,"Invalid key length");var u=s.readUInt32BE(l,0),h=s.readUInt32BE(l,4);s.pc1(u,h,v.tmp,0),u=v.tmp[0],h=v.tmp[1];for(var m=0;m<v.keys.length;m+=2){var w=c[m>>>1];u=s.r28shl(u,w),h=s.r28shl(h,w),s.pc2(u,h,v.keys,m)}},f.prototype._update=function(v,l,u,h){var m=this._desState,w=s.readUInt32BE(v,l),k=s.readUInt32BE(v,l+4);s.ip(w,k,m.tmp,0),w=m.tmp[0],k=m.tmp[1],this.type==="encrypt"?this._encrypt(m,w,k,m.tmp,0):this._decrypt(m,w,k,m.tmp,0),w=m.tmp[0],k=m.tmp[1],s.writeUInt32BE(u,w,h),s.writeUInt32BE(u,k,h+4)},f.prototype._pad=function(v,l){for(var u=v.length-l,h=l;h<v.length;h++)v[h]=u;return!0},f.prototype._unpad=function(v){for(var l=v[v.length-1],u=v.length-l;u<v.length;u++)n.equal(v[u],l);return v.slice(0,v.length-l)},f.prototype._encrypt=function(v,l,u,h,m){for(var w=l,k=u,C=0;C<v.keys.length;C+=2){var O=v.keys[C],P=v.keys[C+1];s.expand(k,v.tmp,0),O^=v.tmp[0],P^=v.tmp[1];var M=s.substitute(O,P),D=s.permute(M),$=k;k=(w^D)>>>0,w=$}s.rip(k,w,h,m)},f.prototype._decrypt=function(v,l,u,h,m){for(var w=u,k=l,C=v.keys.length-2;C>=0;C-=2){var O=v.keys[C],P=v.keys[C+1];s.expand(w,v.tmp,0),O^=v.tmp[0],P^=v.tmp[1];var M=s.substitute(O,P),D=s.permute(M),$=w;w=(k^D)>>>0,k=$}s.rip(w,k,h,m)}},{"./cipher":183,"./utils":186,inherits:233,"minimalistic-assert":241}],185:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits"),s=e("./cipher"),d=e("./des");function o(c,p){n.equal(p.length,24,"Invalid key length");var v=p.slice(0,8),l=p.slice(8,16),u=p.slice(16,24);c==="encrypt"?this.ciphers=[d.create({type:"encrypt",key:v}),d.create({type:"decrypt",key:l}),d.create({type:"encrypt",key:u})]:this.ciphers=[d.create({type:"decrypt",key:u}),d.create({type:"encrypt",key:l}),d.create({type:"decrypt",key:v})]}function f(c){s.call(this,c);var p=new o(this.type,this.options.key);this._edeState=p}a(f,s),i.exports=f,f.create=function(p){return new f(p)},f.prototype._update=function(p,v,l,u){var h=this._edeState;h.ciphers[0]._update(p,v,l,u),h.ciphers[1]._update(l,u,l,u),h.ciphers[2]._update(l,u,l,u)},f.prototype._pad=d.prototype._pad,f.prototype._unpad=d.prototype._unpad},{"./cipher":183,"./des":184,inherits:233,"minimalistic-assert":241}],186:[function(e,i,t){t.readUInt32BE=function(o,f){var c=o[0+f]<<24|o[1+f]<<16|o[2+f]<<8|o[3+f];return c>>>0},t.writeUInt32BE=function(o,f,c){o[0+c]=f>>>24,o[1+c]=f>>>16&255,o[2+c]=f>>>8&255,o[3+c]=f&255},t.ip=function(o,f,c,p){for(var v=0,l=0,u=6;u>=0;u-=2){for(var h=0;h<=24;h+=8)v<<=1,v|=f>>>h+u&1;for(var h=0;h<=24;h+=8)v<<=1,v|=o>>>h+u&1}for(var u=6;u>=0;u-=2){for(var h=1;h<=25;h+=8)l<<=1,l|=f>>>h+u&1;for(var h=1;h<=25;h+=8)l<<=1,l|=o>>>h+u&1}c[p+0]=v>>>0,c[p+1]=l>>>0},t.rip=function(o,f,c,p){for(var v=0,l=0,u=0;u<4;u++)for(var h=24;h>=0;h-=8)v<<=1,v|=f>>>h+u&1,v<<=1,v|=o>>>h+u&1;for(var u=4;u<8;u++)for(var h=24;h>=0;h-=8)l<<=1,l|=f>>>h+u&1,l<<=1,l|=o>>>h+u&1;c[p+0]=v>>>0,c[p+1]=l>>>0},t.pc1=function(o,f,c,p){for(var v=0,l=0,u=7;u>=5;u--){for(var h=0;h<=24;h+=8)v<<=1,v|=f>>h+u&1;for(var h=0;h<=24;h+=8)v<<=1,v|=o>>h+u&1}for(var h=0;h<=24;h+=8)v<<=1,v|=f>>h+u&1;for(var u=1;u<=3;u++){for(var h=0;h<=24;h+=8)l<<=1,l|=f>>h+u&1;for(var h=0;h<=24;h+=8)l<<=1,l|=o>>h+u&1}for(var h=0;h<=24;h+=8)l<<=1,l|=o>>h+u&1;c[p+0]=v>>>0,c[p+1]=l>>>0},t.r28shl=function(o,f){return o<<f&268435455|o>>>28-f};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(o,f,c,p){for(var v=0,l=0,u=n.length>>>1,h=0;h<u;h++)v<<=1,v|=o>>>n[h]&1;for(var h=u;h<n.length;h++)l<<=1,l|=f>>>n[h]&1;c[p+0]=v>>>0,c[p+1]=l>>>0},t.expand=function(o,f,c){var p=0,v=0;p=(o&1)<<5|o>>>27;for(var l=23;l>=15;l-=4)p<<=6,p|=o>>>l&63;for(var l=11;l>=3;l-=4)v|=o>>>l&63,v<<=6;v|=(o&31)<<1|o>>>31,f[c+0]=p>>>0,f[c+1]=v>>>0};var a=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(o,f){for(var c=0,p=0;p<4;p++){var v=o>>>18-p*6&63,l=a[p*64+v];c<<=4,c|=l}for(var p=0;p<4;p++){var v=f>>>18-p*6&63,l=a[4*64+p*64+v];c<<=4,c|=l}return c>>>0};var s=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(o){for(var f=0,c=0;c<s.length;c++)f<<=1,f|=o>>>s[c]&1;return f>>>0},t.padSplit=function(o,f,c){for(var p=o.toString(2);p.length<f;)p="0"+p;for(var v=[],l=0;l<f;l+=c)v.push(p.slice(l,l+c));return v.join(" ")}},{}],187:[function(e,i,t){(function(n){(function(){var a=e("./lib/generatePrime"),s=e("./lib/primes.json"),d=e("./lib/dh");function o(p){var v=new n(s[p].prime,"hex"),l=new n(s[p].gen,"hex");return new d(v,l)}var f={binary:!0,hex:!0,base64:!0};function c(p,v,l,u){return n.isBuffer(v)||f[v]===void 0?c(p,"binary",v,l):(v=v||"binary",u=u||"binary",l=l||new n([2]),n.isBuffer(l)||(l=new n(l,u)),typeof p=="number"?new d(a(p,l),l,!0):(n.isBuffer(p)||(p=new n(p,v)),new d(p,l,!0)))}t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=o,t.createDiffieHellman=t.DiffieHellman=c}).call(this)}).call(this,e("buffer").Buffer)},{"./lib/dh":188,"./lib/generatePrime":189,"./lib/primes.json":190,buffer:171}],188:[function(e,i,t){(function(n){(function(){var a=e("bn.js"),s=e("miller-rabin"),d=new s,o=new a(24),f=new a(11),c=new a(10),p=new a(3),v=new a(7),l=e("./generatePrime"),u=e("randombytes");i.exports=C;function h(P,M){return M=M||"utf8",n.isBuffer(P)||(P=new n(P,M)),this._pub=new a(P),this}function m(P,M){return M=M||"utf8",n.isBuffer(P)||(P=new n(P,M)),this._priv=new a(P),this}var w={};function k(P,M){var D=M.toString("hex"),$=[D,P.toString(16)].join("_");if($ in w)return w[$];var H=0;if(P.isEven()||!l.simpleSieve||!l.fermatTest(P)||!d.test(P))return H+=1,D==="02"||D==="05"?H+=8:H+=4,w[$]=H,H;d.test(P.shrn(1))||(H+=2);var Z;switch(D){case"02":P.mod(o).cmp(f)&&(H+=8);break;case"05":Z=P.mod(c),Z.cmp(p)&&Z.cmp(v)&&(H+=8);break;default:H+=4}return w[$]=H,H}function C(P,M,D){this.setGenerator(M),this.__prime=new a(P),this._prime=a.mont(this.__prime),this._primeLen=P.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,D?(this.setPublicKey=h,this.setPrivateKey=m):this._primeCode=8}Object.defineProperty(C.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=k(this.__prime,this.__gen)),this._primeCode}}),C.prototype.generateKeys=function(){return this._priv||(this._priv=new a(u(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},C.prototype.computeSecret=function(P){P=new a(P),P=P.toRed(this._prime);var M=P.redPow(this._priv).fromRed(),D=new n(M.toArray()),$=this.getPrime();if(D.length<$.length){var H=new n($.length-D.length);H.fill(0),D=n.concat([H,D])}return D},C.prototype.getPublicKey=function(M){return O(this._pub,M)},C.prototype.getPrivateKey=function(M){return O(this._priv,M)},C.prototype.getPrime=function(P){return O(this.__prime,P)},C.prototype.getGenerator=function(P){return O(this._gen,P)},C.prototype.setGenerator=function(P,M){return M=M||"utf8",n.isBuffer(P)||(P=new n(P,M)),this.__gen=P,this._gen=new a(P),this};function O(P,M){var D=new n(P.toArray());return M?D.toString(M):D}}).call(this)}).call(this,e("buffer").Buffer)},{"./generatePrime":189,"bn.js":139,buffer:171,"miller-rabin":240,randombytes:261}],189:[function(e,i,t){var n=e("randombytes");i.exports=O,O.simpleSieve=k,O.fermatTest=C;var a=e("bn.js"),s=new a(24),d=e("miller-rabin"),o=new d,f=new a(1),c=new a(2),p=new a(5);new a(16),new a(8);var v=new a(10),l=new a(3);new a(7);var u=new a(11),h=new a(4);new a(12);var m=null;function w(){if(m!==null)return m;var P=1048576,M=[];M[0]=2;for(var D=1,$=3;$<P;$+=2){for(var H=Math.ceil(Math.sqrt($)),Z=0;Z<D&&M[Z]<=H&&$%M[Z]!==0;Z++);D!==Z&&M[Z]<=H||(M[D++]=$)}return m=M,M}function k(P){for(var M=w(),D=0;D<M.length;D++)if(P.modn(M[D])===0)return P.cmpn(M[D])===0;return!0}function C(P){var M=a.mont(P);return c.toRed(M).redPow(P.subn(1)).fromRed().cmpn(1)===0}function O(P,M){if(P<16)return M===2||M===5?new a([140,123]):new a([140,39]);M=new a(M);for(var D,$;;){for(D=new a(n(Math.ceil(P/8)));D.bitLength()>P;)D.ishrn(1);if(D.isEven()&&D.iadd(f),D.testn(1)||D.iadd(c),M.cmp(c)){if(!M.cmp(p))for(;D.mod(v).cmp(l);)D.iadd(h)}else for(;D.mod(s).cmp(u);)D.iadd(h);if($=D.shrn(1),k($)&&k(D)&&C($)&&C(D)&&o.test($)&&o.test(D))return D}}},{"bn.js":139,"miller-rabin":240,randombytes:261}],190:[function(e,i,t){i.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],191:[function(e,i,t){var n=t;n.version=e("../package.json").version,n.utils=e("./elliptic/utils"),n.rand=e("brorand"),n.curve=e("./elliptic/curve"),n.curves=e("./elliptic/curves"),n.ec=e("./elliptic/ec"),n.eddsa=e("./elliptic/eddsa")},{"../package.json":206,"./elliptic/curve":194,"./elliptic/curves":197,"./elliptic/ec":198,"./elliptic/eddsa":201,"./elliptic/utils":205,brorand:141}],192:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),s=a.getNAF,d=a.getJSF,o=a.assert;function f(p,v){this.type=p,this.p=new n(v.p,16),this.red=v.prime?n.red(v.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=v.n&&new n(v.n,16),this.g=v.g&&this.pointFromJSON(v.g,v.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var l=this.n&&this.p.div(this.n);!l||l.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}i.exports=f,f.prototype.point=function(){throw new Error("Not implemented")},f.prototype.validate=function(){throw new Error("Not implemented")},f.prototype._fixedNafMul=function(v,l){o(v.precomputed);var u=v._getDoubles(),h=s(l,1,this._bitLength),m=(1<<u.step+1)-(u.step%2===0?2:1);m/=3;var w=[],k,C;for(k=0;k<h.length;k+=u.step){C=0;for(var O=k+u.step-1;O>=k;O--)C=(C<<1)+h[O];w.push(C)}for(var P=this.jpoint(null,null,null),M=this.jpoint(null,null,null),D=m;D>0;D--){for(k=0;k<w.length;k++)C=w[k],C===D?M=M.mixedAdd(u.points[k]):C===-D&&(M=M.mixedAdd(u.points[k].neg()));P=P.add(M)}return P.toP()},f.prototype._wnafMul=function(v,l){var u=4,h=v._getNAFPoints(u);u=h.wnd;for(var m=h.points,w=s(l,u,this._bitLength),k=this.jpoint(null,null,null),C=w.length-1;C>=0;C--){for(var O=0;C>=0&&w[C]===0;C--)O++;if(C>=0&&O++,k=k.dblp(O),C<0)break;var P=w[C];o(P!==0),v.type==="affine"?P>0?k=k.mixedAdd(m[P-1>>1]):k=k.mixedAdd(m[-P-1>>1].neg()):P>0?k=k.add(m[P-1>>1]):k=k.add(m[-P-1>>1].neg())}return v.type==="affine"?k.toP():k},f.prototype._wnafMulAdd=function(v,l,u,h,m){var w=this._wnafT1,k=this._wnafT2,C=this._wnafT3,O=0,P,M,D;for(P=0;P<h;P++){D=l[P];var $=D._getNAFPoints(v);w[P]=$.wnd,k[P]=$.points}for(P=h-1;P>=1;P-=2){var H=P-1,Z=P;if(w[H]!==1||w[Z]!==1){C[H]=s(u[H],w[H],this._bitLength),C[Z]=s(u[Z],w[Z],this._bitLength),O=Math.max(C[H].length,O),O=Math.max(C[Z].length,O);continue}var re=[l[H],null,null,l[Z]];l[H].y.cmp(l[Z].y)===0?(re[1]=l[H].add(l[Z]),re[2]=l[H].toJ().mixedAdd(l[Z].neg())):l[H].y.cmp(l[Z].y.redNeg())===0?(re[1]=l[H].toJ().mixedAdd(l[Z]),re[2]=l[H].add(l[Z].neg())):(re[1]=l[H].toJ().mixedAdd(l[Z]),re[2]=l[H].toJ().mixedAdd(l[Z].neg()));var Y=[-3,-1,-5,-7,0,7,5,1,3],N=d(u[H],u[Z]);for(O=Math.max(N[0].length,O),C[H]=new Array(O),C[Z]=new Array(O),M=0;M<O;M++){var x=N[0][M]|0,b=N[1][M]|0;C[H][M]=Y[(x+1)*3+(b+1)],C[Z][M]=0,k[H]=re}}var _=this.jpoint(null,null,null),g=this._wnafT4;for(P=O;P>=0;P--){for(var E=0;P>=0;){var T=!0;for(M=0;M<h;M++)g[M]=C[M][P]|0,g[M]!==0&&(T=!1);if(!T)break;E++,P--}if(P>=0&&E++,_=_.dblp(E),P<0)break;for(M=0;M<h;M++){var A=g[M];A!==0&&(A>0?D=k[M][A-1>>1]:A<0&&(D=k[M][-A-1>>1].neg()),D.type==="affine"?_=_.mixedAdd(D):_=_.add(D))}}for(P=0;P<h;P++)k[P]=null;return m?_:_.toP()};function c(p,v){this.curve=p,this.type=v,this.precomputed=null}f.BasePoint=c,c.prototype.eq=function(){throw new Error("Not implemented")},c.prototype.validate=function(){return this.curve.validate(this)},f.prototype.decodePoint=function(v,l){v=a.toArray(v,l);var u=this.p.byteLength();if((v[0]===4||v[0]===6||v[0]===7)&&v.length-1===2*u){v[0]===6?o(v[v.length-1]%2===0):v[0]===7&&o(v[v.length-1]%2===1);var h=this.point(v.slice(1,1+u),v.slice(1+u,1+2*u));return h}else if((v[0]===2||v[0]===3)&&v.length-1===u)return this.pointFromX(v.slice(1,1+u),v[0]===3);throw new Error("Unknown point format")},c.prototype.encodeCompressed=function(v){return this.encode(v,!0)},c.prototype._encode=function(v){var l=this.curve.p.byteLength(),u=this.getX().toArray("be",l);return v?[this.getY().isEven()?2:3].concat(u):[4].concat(u,this.getY().toArray("be",l))},c.prototype.encode=function(v,l){return a.encode(this._encode(l),v)},c.prototype.precompute=function(v){if(this.precomputed)return this;var l={doubles:null,naf:null,beta:null};return l.naf=this._getNAFPoints(8),l.doubles=this._getDoubles(4,v),l.beta=this._getBeta(),this.precomputed=l,this},c.prototype._hasDoubles=function(v){if(!this.precomputed)return!1;var l=this.precomputed.doubles;return l?l.points.length>=Math.ceil((v.bitLength()+1)/l.step):!1},c.prototype._getDoubles=function(v,l){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var u=[this],h=this,m=0;m<l;m+=v){for(var w=0;w<v;w++)h=h.dbl();u.push(h)}return{step:v,points:u}},c.prototype._getNAFPoints=function(v){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var l=[this],u=(1<<v)-1,h=u===1?null:this.dbl(),m=1;m<u;m++)l[m]=l[m-1].add(h);return{wnd:v,points:l}},c.prototype._getBeta=function(){return null},c.prototype.dblp=function(v){for(var l=this,u=0;u<v;u++)l=l.dbl();return l}},{"../utils":205,"bn.js":139}],193:[function(e,i,t){var n=e("../utils"),a=e("bn.js"),s=e("inherits"),d=e("./base"),o=n.assert;function f(p){this.twisted=(p.a|0)!==1,this.mOneA=this.twisted&&(p.a|0)===-1,this.extended=this.mOneA,d.call(this,"edwards",p),this.a=new a(p.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(p.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(p.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(p.c|0)===1}s(f,d),i.exports=f,f.prototype._mulA=function(v){return this.mOneA?v.redNeg():this.a.redMul(v)},f.prototype._mulC=function(v){return this.oneC?v:this.c.redMul(v)},f.prototype.jpoint=function(v,l,u,h){return this.point(v,l,u,h)},f.prototype.pointFromX=function(v,l){v=new a(v,16),v.red||(v=v.toRed(this.red));var u=v.redSqr(),h=this.c2.redSub(this.a.redMul(u)),m=this.one.redSub(this.c2.redMul(this.d).redMul(u)),w=h.redMul(m.redInvm()),k=w.redSqrt();if(k.redSqr().redSub(w).cmp(this.zero)!==0)throw new Error("invalid point");var C=k.fromRed().isOdd();return(l&&!C||!l&&C)&&(k=k.redNeg()),this.point(v,k)},f.prototype.pointFromY=function(v,l){v=new a(v,16),v.red||(v=v.toRed(this.red));var u=v.redSqr(),h=u.redSub(this.c2),m=u.redMul(this.d).redMul(this.c2).redSub(this.a),w=h.redMul(m.redInvm());if(w.cmp(this.zero)===0){if(l)throw new Error("invalid point");return this.point(this.zero,v)}var k=w.redSqrt();if(k.redSqr().redSub(w).cmp(this.zero)!==0)throw new Error("invalid point");return k.fromRed().isOdd()!==l&&(k=k.redNeg()),this.point(k,v)},f.prototype.validate=function(v){if(v.isInfinity())return!0;v.normalize();var l=v.x.redSqr(),u=v.y.redSqr(),h=l.redMul(this.a).redAdd(u),m=this.c2.redMul(this.one.redAdd(this.d.redMul(l).redMul(u)));return h.cmp(m)===0};function c(p,v,l,u,h){d.BasePoint.call(this,p,"projective"),v===null&&l===null&&u===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(v,16),this.y=new a(l,16),this.z=u?new a(u,16):this.curve.one,this.t=h&&new a(h,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(c,d.BasePoint),f.prototype.pointFromJSON=function(v){return c.fromJSON(this,v)},f.prototype.point=function(v,l,u,h){return new c(this,v,l,u,h)},c.fromJSON=function(v,l){return new c(v,l[0],l[1],l[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},c.prototype._extDbl=function(){var v=this.x.redSqr(),l=this.y.redSqr(),u=this.z.redSqr();u=u.redIAdd(u);var h=this.curve._mulA(v),m=this.x.redAdd(this.y).redSqr().redISub(v).redISub(l),w=h.redAdd(l),k=w.redSub(u),C=h.redSub(l),O=m.redMul(k),P=w.redMul(C),M=m.redMul(C),D=k.redMul(w);return this.curve.point(O,P,D,M)},c.prototype._projDbl=function(){var v=this.x.redAdd(this.y).redSqr(),l=this.x.redSqr(),u=this.y.redSqr(),h,m,w,k,C,O;if(this.curve.twisted){k=this.curve._mulA(l);var P=k.redAdd(u);this.zOne?(h=v.redSub(l).redSub(u).redMul(P.redSub(this.curve.two)),m=P.redMul(k.redSub(u)),w=P.redSqr().redSub(P).redSub(P)):(C=this.z.redSqr(),O=P.redSub(C).redISub(C),h=v.redSub(l).redISub(u).redMul(O),m=P.redMul(k.redSub(u)),w=P.redMul(O))}else k=l.redAdd(u),C=this.curve._mulC(this.z).redSqr(),O=k.redSub(C).redSub(C),h=this.curve._mulC(v.redISub(k)).redMul(O),m=this.curve._mulC(k).redMul(l.redISub(u)),w=k.redMul(O);return this.curve.point(h,m,w)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(v){var l=this.y.redSub(this.x).redMul(v.y.redSub(v.x)),u=this.y.redAdd(this.x).redMul(v.y.redAdd(v.x)),h=this.t.redMul(this.curve.dd).redMul(v.t),m=this.z.redMul(v.z.redAdd(v.z)),w=u.redSub(l),k=m.redSub(h),C=m.redAdd(h),O=u.redAdd(l),P=w.redMul(k),M=C.redMul(O),D=w.redMul(O),$=k.redMul(C);return this.curve.point(P,M,$,D)},c.prototype._projAdd=function(v){var l=this.z.redMul(v.z),u=l.redSqr(),h=this.x.redMul(v.x),m=this.y.redMul(v.y),w=this.curve.d.redMul(h).redMul(m),k=u.redSub(w),C=u.redAdd(w),O=this.x.redAdd(this.y).redMul(v.x.redAdd(v.y)).redISub(h).redISub(m),P=l.redMul(k).redMul(O),M,D;return this.curve.twisted?(M=l.redMul(C).redMul(m.redSub(this.curve._mulA(h))),D=k.redMul(C)):(M=l.redMul(C).redMul(m.redSub(h)),D=this.curve._mulC(k).redMul(C)),this.curve.point(P,M,D)},c.prototype.add=function(v){return this.isInfinity()?v:v.isInfinity()?this:this.curve.extended?this._extAdd(v):this._projAdd(v)},c.prototype.mul=function(v){return this._hasDoubles(v)?this.curve._fixedNafMul(this,v):this.curve._wnafMul(this,v)},c.prototype.mulAdd=function(v,l,u){return this.curve._wnafMulAdd(1,[this,l],[v,u],2,!1)},c.prototype.jmulAdd=function(v,l,u){return this.curve._wnafMulAdd(1,[this,l],[v,u],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var v=this.z.redInvm();return this.x=this.x.redMul(v),this.y=this.y.redMul(v),this.t&&(this.t=this.t.redMul(v)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(v){return this===v||this.getX().cmp(v.getX())===0&&this.getY().cmp(v.getY())===0},c.prototype.eqXToP=function(v){var l=v.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(l)===0)return!0;for(var u=v.clone(),h=this.curve.redN.redMul(this.z);;){if(u.iadd(this.curve.n),u.cmp(this.curve.p)>=0)return!1;if(l.redIAdd(h),this.x.cmp(l)===0)return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},{"../utils":205,"./base":192,"bn.js":139,inherits:233}],194:[function(e,i,t){var n=t;n.base=e("./base"),n.short=e("./short"),n.mont=e("./mont"),n.edwards=e("./edwards")},{"./base":192,"./edwards":193,"./mont":195,"./short":196}],195:[function(e,i,t){var n=e("bn.js"),a=e("inherits"),s=e("./base"),d=e("../utils");function o(c){s.call(this,"mont",c),this.a=new n(c.a,16).toRed(this.red),this.b=new n(c.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}a(o,s),i.exports=o,o.prototype.validate=function(p){var v=p.normalize().x,l=v.redSqr(),u=l.redMul(v).redAdd(l.redMul(this.a)).redAdd(v),h=u.redSqrt();return h.redSqr().cmp(u)===0};function f(c,p,v){s.BasePoint.call(this,c,"projective"),p===null&&v===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(p,16),this.z=new n(v,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(f,s.BasePoint),o.prototype.decodePoint=function(p,v){return this.point(d.toArray(p,v),1)},o.prototype.point=function(p,v){return new f(this,p,v)},o.prototype.pointFromJSON=function(p){return f.fromJSON(this,p)},f.prototype.precompute=function(){},f.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},f.fromJSON=function(p,v){return new f(p,v[0],v[1]||p.one)},f.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},f.prototype.isInfinity=function(){return this.z.cmpn(0)===0},f.prototype.dbl=function(){var p=this.x.redAdd(this.z),v=p.redSqr(),l=this.x.redSub(this.z),u=l.redSqr(),h=v.redSub(u),m=v.redMul(u),w=h.redMul(u.redAdd(this.curve.a24.redMul(h)));return this.curve.point(m,w)},f.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.diffAdd=function(p,v){var l=this.x.redAdd(this.z),u=this.x.redSub(this.z),h=p.x.redAdd(p.z),m=p.x.redSub(p.z),w=m.redMul(l),k=h.redMul(u),C=v.z.redMul(w.redAdd(k).redSqr()),O=v.x.redMul(w.redISub(k).redSqr());return this.curve.point(C,O)},f.prototype.mul=function(p){for(var v=p.clone(),l=this,u=this.curve.point(null,null),h=this,m=[];v.cmpn(0)!==0;v.iushrn(1))m.push(v.andln(1));for(var w=m.length-1;w>=0;w--)m[w]===0?(l=l.diffAdd(u,h),u=u.dbl()):(u=l.diffAdd(u,h),l=l.dbl());return u},f.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},f.prototype.eq=function(p){return this.getX().cmp(p.getX())===0},f.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},f.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":205,"./base":192,"bn.js":139,inherits:233}],196:[function(e,i,t){var n=e("../utils"),a=e("bn.js"),s=e("inherits"),d=e("./base"),o=n.assert;function f(v){d.call(this,"short",v),this.a=new a(v.a,16).toRed(this.red),this.b=new a(v.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(v),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}s(f,d),i.exports=f,f.prototype._getEndomorphism=function(l){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var u,h;if(l.beta)u=new a(l.beta,16).toRed(this.red);else{var m=this._getEndoRoots(this.p);u=m[0].cmp(m[1])<0?m[0]:m[1],u=u.toRed(this.red)}if(l.lambda)h=new a(l.lambda,16);else{var w=this._getEndoRoots(this.n);this.g.mul(w[0]).x.cmp(this.g.x.redMul(u))===0?h=w[0]:(h=w[1],o(this.g.mul(h).x.cmp(this.g.x.redMul(u))===0))}var k;return l.basis?k=l.basis.map(function(C){return{a:new a(C.a,16),b:new a(C.b,16)}}):k=this._getEndoBasis(h),{beta:u,lambda:h,basis:k}}},f.prototype._getEndoRoots=function(l){var u=l===this.p?this.red:a.mont(l),h=new a(2).toRed(u).redInvm(),m=h.redNeg(),w=new a(3).toRed(u).redNeg().redSqrt().redMul(h),k=m.redAdd(w).fromRed(),C=m.redSub(w).fromRed();return[k,C]},f.prototype._getEndoBasis=function(l){for(var u=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=l,m=this.n.clone(),w=new a(1),k=new a(0),C=new a(0),O=new a(1),P,M,D,$,H,Z,re,Y=0,N,x;h.cmpn(0)!==0;){var b=m.div(h);N=m.sub(b.mul(h)),x=C.sub(b.mul(w));var _=O.sub(b.mul(k));if(!D&&N.cmp(u)<0)P=re.neg(),M=w,D=N.neg(),$=x;else if(D&&++Y===2)break;re=N,m=h,h=N,C=w,w=x,O=k,k=_}H=N.neg(),Z=x;var g=D.sqr().add($.sqr()),E=H.sqr().add(Z.sqr());return E.cmp(g)>=0&&(H=P,Z=M),D.negative&&(D=D.neg(),$=$.neg()),H.negative&&(H=H.neg(),Z=Z.neg()),[{a:D,b:$},{a:H,b:Z}]},f.prototype._endoSplit=function(l){var u=this.endo.basis,h=u[0],m=u[1],w=m.b.mul(l).divRound(this.n),k=h.b.neg().mul(l).divRound(this.n),C=w.mul(h.a),O=k.mul(m.a),P=w.mul(h.b),M=k.mul(m.b),D=l.sub(C).sub(O),$=P.add(M).neg();return{k1:D,k2:$}},f.prototype.pointFromX=function(l,u){l=new a(l,16),l.red||(l=l.toRed(this.red));var h=l.redSqr().redMul(l).redIAdd(l.redMul(this.a)).redIAdd(this.b),m=h.redSqrt();if(m.redSqr().redSub(h).cmp(this.zero)!==0)throw new Error("invalid point");var w=m.fromRed().isOdd();return(u&&!w||!u&&w)&&(m=m.redNeg()),this.point(l,m)},f.prototype.validate=function(l){if(l.inf)return!0;var u=l.x,h=l.y,m=this.a.redMul(u),w=u.redSqr().redMul(u).redIAdd(m).redIAdd(this.b);return h.redSqr().redISub(w).cmpn(0)===0},f.prototype._endoWnafMulAdd=function(l,u,h){for(var m=this._endoWnafT1,w=this._endoWnafT2,k=0;k<l.length;k++){var C=this._endoSplit(u[k]),O=l[k],P=O._getBeta();C.k1.negative&&(C.k1.ineg(),O=O.neg(!0)),C.k2.negative&&(C.k2.ineg(),P=P.neg(!0)),m[k*2]=O,m[k*2+1]=P,w[k*2]=C.k1,w[k*2+1]=C.k2}for(var M=this._wnafMulAdd(1,m,w,k*2,h),D=0;D<k*2;D++)m[D]=null,w[D]=null;return M};function c(v,l,u,h){d.BasePoint.call(this,v,"affine"),l===null&&u===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(l,16),this.y=new a(u,16),h&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}s(c,d.BasePoint),f.prototype.point=function(l,u,h){return new c(this,l,u,h)},f.prototype.pointFromJSON=function(l,u){return c.fromJSON(this,l,u)},c.prototype._getBeta=function(){if(this.curve.endo){var l=this.precomputed;if(l&&l.beta)return l.beta;var u=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(l){var h=this.curve,m=function(w){return h.point(w.x.redMul(h.endo.beta),w.y)};l.beta=u,u.precomputed={beta:null,naf:l.naf&&{wnd:l.naf.wnd,points:l.naf.points.map(m)},doubles:l.doubles&&{step:l.doubles.step,points:l.doubles.points.map(m)}}}return u}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(l,u,h){typeof u=="string"&&(u=JSON.parse(u));var m=l.point(u[0],u[1],h);if(!u[2])return m;function w(C){return l.point(C[0],C[1],h)}var k=u[2];return m.precomputed={beta:null,doubles:k.doubles&&{step:k.doubles.step,points:[m].concat(k.doubles.points.map(w))},naf:k.naf&&{wnd:k.naf.wnd,points:[m].concat(k.naf.points.map(w))}},m},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(l){if(this.inf)return l;if(l.inf)return this;if(this.eq(l))return this.dbl();if(this.neg().eq(l))return this.curve.point(null,null);if(this.x.cmp(l.x)===0)return this.curve.point(null,null);var u=this.y.redSub(l.y);u.cmpn(0)!==0&&(u=u.redMul(this.x.redSub(l.x).redInvm()));var h=u.redSqr().redISub(this.x).redISub(l.x),m=u.redMul(this.x.redSub(h)).redISub(this.y);return this.curve.point(h,m)},c.prototype.dbl=function(){if(this.inf)return this;var l=this.y.redAdd(this.y);if(l.cmpn(0)===0)return this.curve.point(null,null);var u=this.curve.a,h=this.x.redSqr(),m=l.redInvm(),w=h.redAdd(h).redIAdd(h).redIAdd(u).redMul(m),k=w.redSqr().redISub(this.x.redAdd(this.x)),C=w.redMul(this.x.redSub(k)).redISub(this.y);return this.curve.point(k,C)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(l){return l=new a(l,16),this.isInfinity()?this:this._hasDoubles(l)?this.curve._fixedNafMul(this,l):this.curve.endo?this.curve._endoWnafMulAdd([this],[l]):this.curve._wnafMul(this,l)},c.prototype.mulAdd=function(l,u,h){var m=[this,u],w=[l,h];return this.curve.endo?this.curve._endoWnafMulAdd(m,w):this.curve._wnafMulAdd(1,m,w,2)},c.prototype.jmulAdd=function(l,u,h){var m=[this,u],w=[l,h];return this.curve.endo?this.curve._endoWnafMulAdd(m,w,!0):this.curve._wnafMulAdd(1,m,w,2,!0)},c.prototype.eq=function(l){return this===l||this.inf===l.inf&&(this.inf||this.x.cmp(l.x)===0&&this.y.cmp(l.y)===0)},c.prototype.neg=function(l){if(this.inf)return this;var u=this.curve.point(this.x,this.y.redNeg());if(l&&this.precomputed){var h=this.precomputed,m=function(w){return w.neg()};u.precomputed={naf:h.naf&&{wnd:h.naf.wnd,points:h.naf.points.map(m)},doubles:h.doubles&&{step:h.doubles.step,points:h.doubles.points.map(m)}}}return u},c.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var l=this.curve.jpoint(this.x,this.y,this.curve.one);return l};function p(v,l,u,h){d.BasePoint.call(this,v,"jacobian"),l===null&&u===null&&h===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(l,16),this.y=new a(u,16),this.z=new a(h,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(p,d.BasePoint),f.prototype.jpoint=function(l,u,h){return new p(this,l,u,h)},p.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var l=this.z.redInvm(),u=l.redSqr(),h=this.x.redMul(u),m=this.y.redMul(u).redMul(l);return this.curve.point(h,m)},p.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},p.prototype.add=function(l){if(this.isInfinity())return l;if(l.isInfinity())return this;var u=l.z.redSqr(),h=this.z.redSqr(),m=this.x.redMul(u),w=l.x.redMul(h),k=this.y.redMul(u.redMul(l.z)),C=l.y.redMul(h.redMul(this.z)),O=m.redSub(w),P=k.redSub(C);if(O.cmpn(0)===0)return P.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var M=O.redSqr(),D=M.redMul(O),$=m.redMul(M),H=P.redSqr().redIAdd(D).redISub($).redISub($),Z=P.redMul($.redISub(H)).redISub(k.redMul(D)),re=this.z.redMul(l.z).redMul(O);return this.curve.jpoint(H,Z,re)},p.prototype.mixedAdd=function(l){if(this.isInfinity())return l.toJ();if(l.isInfinity())return this;var u=this.z.redSqr(),h=this.x,m=l.x.redMul(u),w=this.y,k=l.y.redMul(u).redMul(this.z),C=h.redSub(m),O=w.redSub(k);if(C.cmpn(0)===0)return O.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var P=C.redSqr(),M=P.redMul(C),D=h.redMul(P),$=O.redSqr().redIAdd(M).redISub(D).redISub(D),H=O.redMul(D.redISub($)).redISub(w.redMul(M)),Z=this.z.redMul(C);return this.curve.jpoint($,H,Z)},p.prototype.dblp=function(l){if(l===0)return this;if(this.isInfinity())return this;if(!l)return this.dbl();var u;if(this.curve.zeroA||this.curve.threeA){var h=this;for(u=0;u<l;u++)h=h.dbl();return h}var m=this.curve.a,w=this.curve.tinv,k=this.x,C=this.y,O=this.z,P=O.redSqr().redSqr(),M=C.redAdd(C);for(u=0;u<l;u++){var D=k.redSqr(),$=M.redSqr(),H=$.redSqr(),Z=D.redAdd(D).redIAdd(D).redIAdd(m.redMul(P)),re=k.redMul($),Y=Z.redSqr().redISub(re.redAdd(re)),N=re.redISub(Y),x=Z.redMul(N);x=x.redIAdd(x).redISub(H);var b=M.redMul(O);u+1<l&&(P=P.redMul(H)),k=Y,O=b,M=x}return this.curve.jpoint(k,M.redMul(w),O)},p.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},p.prototype._zeroDbl=function(){var l,u,h;if(this.zOne){var m=this.x.redSqr(),w=this.y.redSqr(),k=w.redSqr(),C=this.x.redAdd(w).redSqr().redISub(m).redISub(k);C=C.redIAdd(C);var O=m.redAdd(m).redIAdd(m),P=O.redSqr().redISub(C).redISub(C),M=k.redIAdd(k);M=M.redIAdd(M),M=M.redIAdd(M),l=P,u=O.redMul(C.redISub(P)).redISub(M),h=this.y.redAdd(this.y)}else{var D=this.x.redSqr(),$=this.y.redSqr(),H=$.redSqr(),Z=this.x.redAdd($).redSqr().redISub(D).redISub(H);Z=Z.redIAdd(Z);var re=D.redAdd(D).redIAdd(D),Y=re.redSqr(),N=H.redIAdd(H);N=N.redIAdd(N),N=N.redIAdd(N),l=Y.redISub(Z).redISub(Z),u=re.redMul(Z.redISub(l)).redISub(N),h=this.y.redMul(this.z),h=h.redIAdd(h)}return this.curve.jpoint(l,u,h)},p.prototype._threeDbl=function(){var l,u,h;if(this.zOne){var m=this.x.redSqr(),w=this.y.redSqr(),k=w.redSqr(),C=this.x.redAdd(w).redSqr().redISub(m).redISub(k);C=C.redIAdd(C);var O=m.redAdd(m).redIAdd(m).redIAdd(this.curve.a),P=O.redSqr().redISub(C).redISub(C);l=P;var M=k.redIAdd(k);M=M.redIAdd(M),M=M.redIAdd(M),u=O.redMul(C.redISub(P)).redISub(M),h=this.y.redAdd(this.y)}else{var D=this.z.redSqr(),$=this.y.redSqr(),H=this.x.redMul($),Z=this.x.redSub(D).redMul(this.x.redAdd(D));Z=Z.redAdd(Z).redIAdd(Z);var re=H.redIAdd(H);re=re.redIAdd(re);var Y=re.redAdd(re);l=Z.redSqr().redISub(Y),h=this.y.redAdd(this.z).redSqr().redISub($).redISub(D);var N=$.redSqr();N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N),u=Z.redMul(re.redISub(l)).redISub(N)}return this.curve.jpoint(l,u,h)},p.prototype._dbl=function(){var l=this.curve.a,u=this.x,h=this.y,m=this.z,w=m.redSqr().redSqr(),k=u.redSqr(),C=h.redSqr(),O=k.redAdd(k).redIAdd(k).redIAdd(l.redMul(w)),P=u.redAdd(u);P=P.redIAdd(P);var M=P.redMul(C),D=O.redSqr().redISub(M.redAdd(M)),$=M.redISub(D),H=C.redSqr();H=H.redIAdd(H),H=H.redIAdd(H),H=H.redIAdd(H);var Z=O.redMul($).redISub(H),re=h.redAdd(h).redMul(m);return this.curve.jpoint(D,Z,re)},p.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var l=this.x.redSqr(),u=this.y.redSqr(),h=this.z.redSqr(),m=u.redSqr(),w=l.redAdd(l).redIAdd(l),k=w.redSqr(),C=this.x.redAdd(u).redSqr().redISub(l).redISub(m);C=C.redIAdd(C),C=C.redAdd(C).redIAdd(C),C=C.redISub(k);var O=C.redSqr(),P=m.redIAdd(m);P=P.redIAdd(P),P=P.redIAdd(P),P=P.redIAdd(P);var M=w.redIAdd(C).redSqr().redISub(k).redISub(O).redISub(P),D=u.redMul(M);D=D.redIAdd(D),D=D.redIAdd(D);var $=this.x.redMul(O).redISub(D);$=$.redIAdd($),$=$.redIAdd($);var H=this.y.redMul(M.redMul(P.redISub(M)).redISub(C.redMul(O)));H=H.redIAdd(H),H=H.redIAdd(H),H=H.redIAdd(H);var Z=this.z.redAdd(C).redSqr().redISub(h).redISub(O);return this.curve.jpoint($,H,Z)},p.prototype.mul=function(l,u){return l=new a(l,u),this.curve._wnafMul(this,l)},p.prototype.eq=function(l){if(l.type==="affine")return this.eq(l.toJ());if(this===l)return!0;var u=this.z.redSqr(),h=l.z.redSqr();if(this.x.redMul(h).redISub(l.x.redMul(u)).cmpn(0)!==0)return!1;var m=u.redMul(this.z),w=h.redMul(l.z);return this.y.redMul(w).redISub(l.y.redMul(m)).cmpn(0)===0},p.prototype.eqXToP=function(l){var u=this.z.redSqr(),h=l.toRed(this.curve.red).redMul(u);if(this.x.cmp(h)===0)return!0;for(var m=l.clone(),w=this.curve.redN.redMul(u);;){if(m.iadd(this.curve.n),m.cmp(this.curve.p)>=0)return!1;if(h.redIAdd(w),this.x.cmp(h)===0)return!0}},p.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},p.prototype.isInfinity=function(){return this.z.cmpn(0)===0}},{"../utils":205,"./base":192,"bn.js":139,inherits:233}],197:[function(e,i,t){var n=t,a=e("hash.js"),s=e("./curve"),d=e("./utils"),o=d.assert;function f(v){v.type==="short"?this.curve=new s.short(v):v.type==="edwards"?this.curve=new s.edwards(v):this.curve=new s.mont(v),this.g=this.curve.g,this.n=this.curve.n,this.hash=v.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=f;function c(v,l){Object.defineProperty(n,v,{configurable:!0,enumerable:!0,get:function(){var u=new f(l);return Object.defineProperty(n,v,{configurable:!0,enumerable:!0,value:u}),u}})}c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var p;try{p=e("./precomputed/secp256k1")}catch{p=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",p]})},{"./curve":194,"./precomputed/secp256k1":204,"./utils":205,"hash.js":219}],198:[function(e,i,t){var n=e("bn.js"),a=e("hmac-drbg"),s=e("../utils"),d=e("../curves"),o=e("brorand"),f=s.assert,c=e("./key"),p=e("./signature");function v(l){if(!(this instanceof v))return new v(l);typeof l=="string"&&(f(Object.prototype.hasOwnProperty.call(d,l),"Unknown curve "+l),l=d[l]),l instanceof d.PresetCurve&&(l={curve:l}),this.curve=l.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=l.curve.g,this.g.precompute(l.curve.n.bitLength()+1),this.hash=l.hash||l.curve.hash}i.exports=v,v.prototype.keyPair=function(u){return new c(this,u)},v.prototype.keyFromPrivate=function(u,h){return c.fromPrivate(this,u,h)},v.prototype.keyFromPublic=function(u,h){return c.fromPublic(this,u,h)},v.prototype.genKeyPair=function(u){u||(u={});for(var h=new a({hash:this.hash,pers:u.pers,persEnc:u.persEnc||"utf8",entropy:u.entropy||o(this.hash.hmacStrength),entropyEnc:u.entropy&&u.entropyEnc||"utf8",nonce:this.n.toArray()}),m=this.n.byteLength(),w=this.n.sub(new n(2));;){var k=new n(h.generate(m));if(!(k.cmp(w)>0))return k.iaddn(1),this.keyFromPrivate(k)}},v.prototype._truncateToN=function(u,h){var m=u.byteLength()*8-this.n.bitLength();return m>0&&(u=u.ushrn(m)),!h&&u.cmp(this.n)>=0?u.sub(this.n):u},v.prototype.sign=function(u,h,m,w){typeof m=="object"&&(w=m,m=null),w||(w={}),h=this.keyFromPrivate(h,m),u=this._truncateToN(new n(u,16));for(var k=this.n.byteLength(),C=h.getPrivate().toArray("be",k),O=u.toArray("be",k),P=new a({hash:this.hash,entropy:C,nonce:O,pers:w.pers,persEnc:w.persEnc||"utf8"}),M=this.n.sub(new n(1)),D=0;;D++){var $=w.k?w.k(D):new n(P.generate(this.n.byteLength()));if($=this._truncateToN($,!0),!($.cmpn(1)<=0||$.cmp(M)>=0)){var H=this.g.mul($);if(!H.isInfinity()){var Z=H.getX(),re=Z.umod(this.n);if(re.cmpn(0)!==0){var Y=$.invm(this.n).mul(re.mul(h.getPrivate()).iadd(u));if(Y=Y.umod(this.n),Y.cmpn(0)!==0){var N=(H.getY().isOdd()?1:0)|(Z.cmp(re)!==0?2:0);return w.canonical&&Y.cmp(this.nh)>0&&(Y=this.n.sub(Y),N^=1),new p({r:re,s:Y,recoveryParam:N})}}}}}},v.prototype.verify=function(u,h,m,w){u=this._truncateToN(new n(u,16)),m=this.keyFromPublic(m,w),h=new p(h,"hex");var k=h.r,C=h.s;if(k.cmpn(1)<0||k.cmp(this.n)>=0||C.cmpn(1)<0||C.cmp(this.n)>=0)return!1;var O=C.invm(this.n),P=O.mul(u).umod(this.n),M=O.mul(k).umod(this.n),D;return this.curve._maxwellTrick?(D=this.g.jmulAdd(P,m.getPublic(),M),D.isInfinity()?!1:D.eqXToP(k)):(D=this.g.mulAdd(P,m.getPublic(),M),D.isInfinity()?!1:D.getX().umod(this.n).cmp(k)===0)},v.prototype.recoverPubKey=function(l,u,h,m){f((3&h)===h,"The recovery param is more than two bits"),u=new p(u,m);var w=this.n,k=new n(l),C=u.r,O=u.s,P=h&1,M=h>>1;if(C.cmp(this.curve.p.umod(this.curve.n))>=0&&M)throw new Error("Unable to find sencond key candinate");M?C=this.curve.pointFromX(C.add(this.curve.n),P):C=this.curve.pointFromX(C,P);var D=u.r.invm(w),$=w.sub(k).mul(D).umod(w),H=O.mul(D).umod(w);return this.g.mulAdd($,C,H)},v.prototype.getKeyRecoveryParam=function(l,u,h,m){if(u=new p(u,m),u.recoveryParam!==null)return u.recoveryParam;for(var w=0;w<4;w++){var k;try{k=this.recoverPubKey(l,u,w)}catch{continue}if(k.eq(h))return w}throw new Error("Unable to find valid recovery factor")}},{"../curves":197,"../utils":205,"./key":199,"./signature":200,"bn.js":139,brorand:141,"hmac-drbg":231}],199:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),s=a.assert;function d(o,f){this.ec=o,this.priv=null,this.pub=null,f.priv&&this._importPrivate(f.priv,f.privEnc),f.pub&&this._importPublic(f.pub,f.pubEnc)}i.exports=d,d.fromPublic=function(f,c,p){return c instanceof d?c:new d(f,{pub:c,pubEnc:p})},d.fromPrivate=function(f,c,p){return c instanceof d?c:new d(f,{priv:c,privEnc:p})},d.prototype.validate=function(){var f=this.getPublic();return f.isInfinity()?{result:!1,reason:"Invalid public key"}:f.validate()?f.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},d.prototype.getPublic=function(f,c){return typeof f=="string"&&(c=f,f=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),c?this.pub.encode(c,f):this.pub},d.prototype.getPrivate=function(f){return f==="hex"?this.priv.toString(16,2):this.priv},d.prototype._importPrivate=function(f,c){this.priv=new n(f,c||16),this.priv=this.priv.umod(this.ec.curve.n)},d.prototype._importPublic=function(f,c){if(f.x||f.y){this.ec.curve.type==="mont"?s(f.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&s(f.x&&f.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(f.x,f.y);return}this.pub=this.ec.curve.decodePoint(f,c)},d.prototype.derive=function(f){return f.validate()||s(f.validate(),"public point not validated"),f.mul(this.priv).getX()},d.prototype.sign=function(f,c,p){return this.ec.sign(f,this,c,p)},d.prototype.verify=function(f,c){return this.ec.verify(f,c,this)},d.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":205,"bn.js":139}],200:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),s=a.assert;function d(v,l){if(v instanceof d)return v;this._importDER(v,l)||(s(v.r&&v.s,"Signature without r or s"),this.r=new n(v.r,16),this.s=new n(v.s,16),v.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=v.recoveryParam)}i.exports=d;function o(){this.place=0}function f(v,l){var u=v[l.place++];if(!(u&128))return u;var h=u&15;if(h===0||h>4)return!1;for(var m=0,w=0,k=l.place;w<h;w++,k++)m<<=8,m|=v[k],m>>>=0;return m<=127?!1:(l.place=k,m)}function c(v){for(var l=0,u=v.length-1;!v[l]&&!(v[l+1]&128)&&l<u;)l++;return l===0?v:v.slice(l)}d.prototype._importDER=function(l,u){l=a.toArray(l,u);var h=new o;if(l[h.place++]!==48)return!1;var m=f(l,h);if(m===!1||m+h.place!==l.length||l[h.place++]!==2)return!1;var w=f(l,h);if(w===!1)return!1;var k=l.slice(h.place,w+h.place);if(h.place+=w,l[h.place++]!==2)return!1;var C=f(l,h);if(C===!1||l.length!==C+h.place)return!1;var O=l.slice(h.place,C+h.place);if(k[0]===0)if(k[1]&128)k=k.slice(1);else return!1;if(O[0]===0)if(O[1]&128)O=O.slice(1);else return!1;return this.r=new n(k),this.s=new n(O),this.recoveryParam=null,!0};function p(v,l){if(l<128){v.push(l);return}var u=1+(Math.log(l)/Math.LN2>>>3);for(v.push(u|128);--u;)v.push(l>>>(u<<3)&255);v.push(l)}d.prototype.toDER=function(l){var u=this.r.toArray(),h=this.s.toArray();for(u[0]&128&&(u=[0].concat(u)),h[0]&128&&(h=[0].concat(h)),u=c(u),h=c(h);!h[0]&&!(h[1]&128);)h=h.slice(1);var m=[2];p(m,u.length),m=m.concat(u),m.push(2),p(m,h.length);var w=m.concat(h),k=[48];return p(k,w.length),k=k.concat(w),a.encode(k,l)}},{"../utils":205,"bn.js":139}],201:[function(e,i,t){var n=e("hash.js"),a=e("../curves"),s=e("../utils"),d=s.assert,o=s.parseBytes,f=e("./key"),c=e("./signature");function p(v){if(d(v==="ed25519","only tested with ed25519 so far"),!(this instanceof p))return new p(v);v=a[v].curve,this.curve=v,this.g=v.g,this.g.precompute(v.n.bitLength()+1),this.pointClass=v.point().constructor,this.encodingLength=Math.ceil(v.n.bitLength()/8),this.hash=n.sha512}i.exports=p,p.prototype.sign=function(l,u){l=o(l);var h=this.keyFromSecret(u),m=this.hashInt(h.messagePrefix(),l),w=this.g.mul(m),k=this.encodePoint(w),C=this.hashInt(k,h.pubBytes(),l).mul(h.priv()),O=m.add(C).umod(this.curve.n);return this.makeSignature({R:w,S:O,Rencoded:k})},p.prototype.verify=function(l,u,h){l=o(l),u=this.makeSignature(u);var m=this.keyFromPublic(h),w=this.hashInt(u.Rencoded(),m.pubBytes(),l),k=this.g.mul(u.S()),C=u.R().add(m.pub().mul(w));return C.eq(k)},p.prototype.hashInt=function(){for(var l=this.hash(),u=0;u<arguments.length;u++)l.update(arguments[u]);return s.intFromLE(l.digest()).umod(this.curve.n)},p.prototype.keyFromPublic=function(l){return f.fromPublic(this,l)},p.prototype.keyFromSecret=function(l){return f.fromSecret(this,l)},p.prototype.makeSignature=function(l){return l instanceof c?l:new c(this,l)},p.prototype.encodePoint=function(l){var u=l.getY().toArray("le",this.encodingLength);return u[this.encodingLength-1]|=l.getX().isOdd()?128:0,u},p.prototype.decodePoint=function(l){l=s.parseBytes(l);var u=l.length-1,h=l.slice(0,u).concat(l[u]&-129),m=(l[u]&128)!==0,w=s.intFromLE(h);return this.curve.pointFromY(w,m)},p.prototype.encodeInt=function(l){return l.toArray("le",this.encodingLength)},p.prototype.decodeInt=function(l){return s.intFromLE(l)},p.prototype.isPoint=function(l){return l instanceof this.pointClass}},{"../curves":197,"../utils":205,"./key":202,"./signature":203,"hash.js":219}],202:[function(e,i,t){var n=e("../utils"),a=n.assert,s=n.parseBytes,d=n.cachedProperty;function o(f,c){this.eddsa=f,this._secret=s(c.secret),f.isPoint(c.pub)?this._pub=c.pub:this._pubBytes=s(c.pub)}o.fromPublic=function(c,p){return p instanceof o?p:new o(c,{pub:p})},o.fromSecret=function(c,p){return p instanceof o?p:new o(c,{secret:p})},o.prototype.secret=function(){return this._secret},d(o,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),d(o,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),d(o,"privBytes",function(){var c=this.eddsa,p=this.hash(),v=c.encodingLength-1,l=p.slice(0,c.encodingLength);return l[0]&=248,l[v]&=127,l[v]|=64,l}),d(o,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),d(o,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),d(o,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),o.prototype.sign=function(c){return a(this._secret,"KeyPair can only verify"),this.eddsa.sign(c,this)},o.prototype.verify=function(c,p){return this.eddsa.verify(c,p,this)},o.prototype.getSecret=function(c){return a(this._secret,"KeyPair is public only"),n.encode(this.secret(),c)},o.prototype.getPublic=function(c){return n.encode(this.pubBytes(),c)},i.exports=o},{"../utils":205}],203:[function(e,i,t){var n=e("bn.js"),a=e("../utils"),s=a.assert,d=a.cachedProperty,o=a.parseBytes;function f(c,p){this.eddsa=c,typeof p!="object"&&(p=o(p)),Array.isArray(p)&&(p={R:p.slice(0,c.encodingLength),S:p.slice(c.encodingLength)}),s(p.R&&p.S,"Signature without R or S"),c.isPoint(p.R)&&(this._R=p.R),p.S instanceof n&&(this._S=p.S),this._Rencoded=Array.isArray(p.R)?p.R:p.Rencoded,this._Sencoded=Array.isArray(p.S)?p.S:p.Sencoded}d(f,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),d(f,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),d(f,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),d(f,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),f.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},f.prototype.toHex=function(){return a.encode(this.toBytes(),"hex").toUpperCase()},i.exports=f},{"../utils":205,"bn.js":139}],204:[function(e,i,t){i.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],205:[function(e,i,t){var n=t,a=e("bn.js"),s=e("minimalistic-assert"),d=e("minimalistic-crypto-utils");n.assert=s,n.toArray=d.toArray,n.zero2=d.zero2,n.toHex=d.toHex,n.encode=d.encode;function o(l,u,h){var m=new Array(Math.max(l.bitLength(),h)+1);m.fill(0);for(var w=1<<u+1,k=l.clone(),C=0;C<m.length;C++){var O,P=k.andln(w-1);k.isOdd()?(P>(w>>1)-1?O=(w>>1)-P:O=P,k.isubn(O)):O=0,m[C]=O,k.iushrn(1)}return m}n.getNAF=o;function f(l,u){var h=[[],[]];l=l.clone(),u=u.clone();for(var m=0,w=0,k;l.cmpn(-m)>0||u.cmpn(-w)>0;){var C=l.andln(3)+m&3,O=u.andln(3)+w&3;C===3&&(C=-1),O===3&&(O=-1);var P;C&1?(k=l.andln(7)+m&7,(k===3||k===5)&&O===2?P=-C:P=C):P=0,h[0].push(P);var M;O&1?(k=u.andln(7)+w&7,(k===3||k===5)&&C===2?M=-O:M=O):M=0,h[1].push(M),2*m===P+1&&(m=1-m),2*w===M+1&&(w=1-w),l.iushrn(1),u.iushrn(1)}return h}n.getJSF=f;function c(l,u,h){var m="_"+u;l.prototype[u]=function(){return this[m]!==void 0?this[m]:this[m]=h.call(this)}}n.cachedProperty=c;function p(l){return typeof l=="string"?n.toArray(l,"hex"):l}n.parseBytes=p;function v(l){return new a(l,"hex","le")}n.intFromLE=v},{"bn.js":139,"minimalistic-assert":241,"minimalistic-crypto-utils":242}],206:[function(e,i,t){i.exports={name:"elliptic",version:"6.5.4",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}},{}],207:[function(e,i,t){var n=typeof Reflect=="object"?Reflect:null,a=n&&typeof n.apply=="function"?n.apply:function(H,Z,re){return Function.prototype.apply.call(H,Z,re)},s;n&&typeof n.ownKeys=="function"?s=n.ownKeys:Object.getOwnPropertySymbols?s=function(H){return Object.getOwnPropertyNames(H).concat(Object.getOwnPropertySymbols(H))}:s=function(H){return Object.getOwnPropertyNames(H)};function d($){console&&console.warn&&console.warn($)}var o=Number.isNaN||function(H){return H!==H};function f(){f.init.call(this)}i.exports=f,i.exports.once=P,f.EventEmitter=f,f.prototype._events=void 0,f.prototype._eventsCount=0,f.prototype._maxListeners=void 0;var c=10;function p($){if(typeof $!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof $)}Object.defineProperty(f,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function($){if(typeof $!="number"||$<0||o($))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+$+".");c=$}}),f.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},f.prototype.setMaxListeners=function(H){if(typeof H!="number"||H<0||o(H))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+H+".");return this._maxListeners=H,this};function v($){return $._maxListeners===void 0?f.defaultMaxListeners:$._maxListeners}f.prototype.getMaxListeners=function(){return v(this)},f.prototype.emit=function(H){for(var Z=[],re=1;re<arguments.length;re++)Z.push(arguments[re]);var Y=H==="error",N=this._events;if(N!==void 0)Y=Y&&N.error===void 0;else if(!Y)return!1;if(Y){var x;if(Z.length>0&&(x=Z[0]),x instanceof Error)throw x;var b=new Error("Unhandled error."+(x?" ("+x.message+")":""));throw b.context=x,b}var _=N[H];if(_===void 0)return!1;if(typeof _=="function")a(_,this,Z);else for(var g=_.length,E=k(_,g),re=0;re<g;++re)a(E[re],this,Z);return!0};function l($,H,Z,re){var Y,N,x;if(p(Z),N=$._events,N===void 0?(N=$._events=Object.create(null),$._eventsCount=0):(N.newListener!==void 0&&($.emit("newListener",H,Z.listener?Z.listener:Z),N=$._events),x=N[H]),x===void 0)x=N[H]=Z,++$._eventsCount;else if(typeof x=="function"?x=N[H]=re?[Z,x]:[x,Z]:re?x.unshift(Z):x.push(Z),Y=v($),Y>0&&x.length>Y&&!x.warned){x.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+x.length+" "+String(H)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=$,b.type=H,b.count=x.length,d(b)}return $}f.prototype.addListener=function(H,Z){return l(this,H,Z,!1)},f.prototype.on=f.prototype.addListener,f.prototype.prependListener=function(H,Z){return l(this,H,Z,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h($,H,Z){var re={fired:!1,wrapFn:void 0,target:$,type:H,listener:Z},Y=u.bind(re);return Y.listener=Z,re.wrapFn=Y,Y}f.prototype.once=function(H,Z){return p(Z),this.on(H,h(this,H,Z)),this},f.prototype.prependOnceListener=function(H,Z){return p(Z),this.prependListener(H,h(this,H,Z)),this},f.prototype.removeListener=function(H,Z){var re,Y,N,x,b;if(p(Z),Y=this._events,Y===void 0)return this;if(re=Y[H],re===void 0)return this;if(re===Z||re.listener===Z)--this._eventsCount===0?this._events=Object.create(null):(delete Y[H],Y.removeListener&&this.emit("removeListener",H,re.listener||Z));else if(typeof re!="function"){for(N=-1,x=re.length-1;x>=0;x--)if(re[x]===Z||re[x].listener===Z){b=re[x].listener,N=x;break}if(N<0)return this;N===0?re.shift():C(re,N),re.length===1&&(Y[H]=re[0]),Y.removeListener!==void 0&&this.emit("removeListener",H,b||Z)}return this},f.prototype.off=f.prototype.removeListener,f.prototype.removeAllListeners=function(H){var Z,re,Y;if(re=this._events,re===void 0)return this;if(re.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):re[H]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete re[H]),this;if(arguments.length===0){var N=Object.keys(re),x;for(Y=0;Y<N.length;++Y)x=N[Y],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(Z=re[H],typeof Z=="function")this.removeListener(H,Z);else if(Z!==void 0)for(Y=Z.length-1;Y>=0;Y--)this.removeListener(H,Z[Y]);return this};function m($,H,Z){var re=$._events;if(re===void 0)return[];var Y=re[H];return Y===void 0?[]:typeof Y=="function"?Z?[Y.listener||Y]:[Y]:Z?O(Y):k(Y,Y.length)}f.prototype.listeners=function(H){return m(this,H,!0)},f.prototype.rawListeners=function(H){return m(this,H,!1)},f.listenerCount=function($,H){return typeof $.listenerCount=="function"?$.listenerCount(H):w.call($,H)},f.prototype.listenerCount=w;function w($){var H=this._events;if(H!==void 0){var Z=H[$];if(typeof Z=="function")return 1;if(Z!==void 0)return Z.length}return 0}f.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function k($,H){for(var Z=new Array(H),re=0;re<H;++re)Z[re]=$[re];return Z}function C($,H){for(;H+1<$.length;H++)$[H]=$[H+1];$.pop()}function O($){for(var H=new Array($.length),Z=0;Z<H.length;++Z)H[Z]=$[Z].listener||$[Z];return H}function P($,H){return new Promise(function(Z,re){function Y(x){$.removeListener(H,N),re(x)}function N(){typeof $.removeListener=="function"&&$.removeListener("error",Y),Z([].slice.call(arguments))}D($,H,N,{once:!0}),H!=="error"&&M($,Y,{once:!0})})}function M($,H,Z){typeof $.on=="function"&&D($,"error",H,Z)}function D($,H,Z,re){if(typeof $.on=="function")re.once?$.once(H,Z):$.on(H,Z);else if(typeof $.addEventListener=="function")$.addEventListener(H,function Y(N){re.once&&$.removeEventListener(H,Y),Z(N)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof $)}},{}],208:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("md5.js");function s(d,o,f,c){if(n.isBuffer(d)||(d=n.from(d,"binary")),o&&(n.isBuffer(o)||(o=n.from(o,"binary")),o.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var p=f/8,v=n.alloc(p),l=n.alloc(c||0),u=n.alloc(0);p>0||c>0;){var h=new a;h.update(u),h.update(d),o&&h.update(o),u=h.digest();var m=0;if(p>0){var w=v.length-p;m=Math.min(p,u.length),u.copy(v,w,0,m),p-=m}if(m<u.length&&c>0){var k=l.length-c,C=Math.min(c,u.length-m);u.copy(l,k,m,m+C),c-=C}}return u.fill(0),{key:v,iv:l}}i.exports=s},{"md5.js":239,"safe-buffer":279}],209:[function(e,i,t){var n=e("is-callable"),a=Object.prototype.toString,s=Object.prototype.hasOwnProperty,d=function(v,l,u){for(var h=0,m=v.length;h<m;h++)s.call(v,h)&&(u==null?l(v[h],h,v):l.call(u,v[h],h,v))},o=function(v,l,u){for(var h=0,m=v.length;h<m;h++)u==null?l(v.charAt(h),h,v):l.call(u,v.charAt(h),h,v)},f=function(v,l,u){for(var h in v)s.call(v,h)&&(u==null?l(v[h],h,v):l.call(u,v[h],h,v))},c=function(v,l,u){if(!n(l))throw new TypeError("iterator must be a function");var h;arguments.length>=3&&(h=u),a.call(v)==="[object Array]"?d(v,l,h):typeof v=="string"?o(v,l,h):f(v,l,h)};i.exports=c},{"is-callable":236}],210:[function(e,i,t){var n="Function.prototype.bind called on incompatible ",a=Array.prototype.slice,s=Object.prototype.toString,d="[object Function]";i.exports=function(f){var c=this;if(typeof c!="function"||s.call(c)!==d)throw new TypeError(n+c);for(var p=a.call(arguments,1),v,l=function(){if(this instanceof v){var k=c.apply(this,p.concat(a.call(arguments)));return Object(k)===k?k:this}else return c.apply(f,p.concat(a.call(arguments)))},u=Math.max(0,c.length-p.length),h=[],m=0;m<u;m++)h.push("$"+m);if(v=Function("binder","return function ("+h.join(",")+"){ return binder.apply(this,arguments); }")(l),c.prototype){var w=function(){};w.prototype=c.prototype,v.prototype=new w,w.prototype=null}return v}},{}],211:[function(e,i,t){var n=e("./implementation");i.exports=Function.prototype.bind||n},{"./implementation":210}],212:[function(e,i,t){var n,a=SyntaxError,s=Function,d=TypeError,o=function(b){try{return s('"use strict"; return ('+b+").constructor;")()}catch{}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch{f=null}var c=function(){throw new d},p=f?function(){try{return arguments.callee,c}catch{try{return f(arguments,"callee").get}catch{return c}}}():c,v=e("has-symbols")(),l=Object.getPrototypeOf||function(b){return b.__proto__},u={},h=typeof Uint8Array>"u"?n:l(Uint8Array),m={"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":v?l([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":u,"%AsyncGenerator%":u,"%AsyncGeneratorFunction%":u,"%AsyncIteratorPrototype%":u,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":s,"%GeneratorFunction%":u,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":v?l(l([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!v?n:l(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!v?n:l(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":v?l(""[Symbol.iterator]()):n,"%Symbol%":v?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":p,"%TypedArray%":h,"%TypeError%":d,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet};try{null.error}catch(b){var w=l(l(b));m["%Error.prototype%"]=w}var k=function b(_){var g;if(_==="%AsyncFunction%")g=o("async function () {}");else if(_==="%GeneratorFunction%")g=o("function* () {}");else if(_==="%AsyncGeneratorFunction%")g=o("async function* () {}");else if(_==="%AsyncGenerator%"){var E=b("%AsyncGeneratorFunction%");E&&(g=E.prototype)}else if(_==="%AsyncIteratorPrototype%"){var T=b("%AsyncGenerator%");T&&(g=l(T.prototype))}return m[_]=g,g},C={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},O=e("function-bind"),P=e("has"),M=O.call(Function.call,Array.prototype.concat),D=O.call(Function.apply,Array.prototype.splice),$=O.call(Function.call,String.prototype.replace),H=O.call(Function.call,String.prototype.slice),Z=O.call(Function.call,RegExp.prototype.exec),re=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Y=/\\(\\)?/g,N=function(_){var g=H(_,0,1),E=H(_,-1);if(g==="%"&&E!=="%")throw new a("invalid intrinsic syntax, expected closing `%`");if(E==="%"&&g!=="%")throw new a("invalid intrinsic syntax, expected opening `%`");var T=[];return $(_,re,function(A,J,G,I){T[T.length]=G?$(I,Y,"$1"):J||A}),T},x=function(_,g){var E=_,T;if(P(C,E)&&(T=C[E],E="%"+T[0]+"%"),P(m,E)){var A=m[E];if(A===u&&(A=k(E)),typeof A>"u"&&!g)throw new d("intrinsic "+_+" exists, but is not available. Please file an issue!");return{alias:T,name:E,value:A}}throw new a("intrinsic "+_+" does not exist!")};i.exports=function(_,g){if(typeof _!="string"||_.length===0)throw new d("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof g!="boolean")throw new d('"allowMissing" argument must be a boolean');if(Z(/^%?[^%]*%?$/,_)===null)throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var E=N(_),T=E.length>0?E[0]:"",A=x("%"+T+"%",g),J=A.name,G=A.value,I=!1,V=A.alias;V&&(T=V[0],D(E,M([0,1],V)));for(var L=1,z=!0;L<E.length;L+=1){var ie=E[L],se=H(ie,0,1),me=H(ie,-1);if((se==='"'||se==="'"||se==="`"||me==='"'||me==="'"||me==="`")&&se!==me)throw new a("property names with quotes must have matching quotes");if((ie==="constructor"||!z)&&(I=!0),T+="."+ie,J="%"+T+"%",P(m,J))G=m[J];else if(G!=null){if(!(ie in G)){if(!g)throw new d("base intrinsic for "+_+" exists, but the property is not available.");return}if(f&&L+1>=E.length){var Se=f(G,ie);z=!!Se,z&&"get"in Se&&!("originalValue"in Se.get)?G=Se.get:G=G[ie]}else z=P(G,ie),G=G[ie];z&&!I&&(m[J]=G)}}return G}},{"function-bind":211,has:217,"has-symbols":214}],213:[function(e,i,t){var n=e("get-intrinsic"),a=n("%Object.getOwnPropertyDescriptor%",!0);if(a)try{a([],"length")}catch{a=null}i.exports=a},{"get-intrinsic":212}],214:[function(e,i,t){var n=typeof Symbol<"u"&&Symbol,a=e("./shams");i.exports=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:a()}},{"./shams":215}],215:[function(e,i,t){i.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var a={},s=Symbol("test"),d=Object(s);if(typeof s=="string"||Object.prototype.toString.call(s)!=="[object Symbol]"||Object.prototype.toString.call(d)!=="[object Symbol]")return!1;var o=42;a[s]=o;for(s in a)return!1;if(typeof Object.keys=="function"&&Object.keys(a).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(a).length!==0)return!1;var f=Object.getOwnPropertySymbols(a);if(f.length!==1||f[0]!==s||!Object.prototype.propertyIsEnumerable.call(a,s))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(a,s);if(c.value!==o||c.enumerable!==!0)return!1}return!0}},{}],216:[function(e,i,t){var n=e("has-symbols/shams");i.exports=function(){return n()&&!!Symbol.toStringTag}},{"has-symbols/shams":215}],217:[function(e,i,t){var n=e("function-bind");i.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},{"function-bind":211}],218:[function(e,i,t){var n=e("safe-buffer").Buffer,a=e("readable-stream").Transform,s=e("inherits");function d(f,c){if(!n.isBuffer(f)&&typeof f!="string")throw new TypeError(c+" must be a string or a buffer")}function o(f){a.call(this),this._block=n.allocUnsafe(f),this._blockSize=f,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}s(o,a),o.prototype._transform=function(f,c,p){var v=null;try{this.update(f,c)}catch(l){v=l}p(v)},o.prototype._flush=function(f){var c=null;try{this.push(this.digest())}catch(p){c=p}f(c)},o.prototype.update=function(f,c){if(d(f,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(f)||(f=n.from(f,c));for(var p=this._block,v=0;this._blockOffset+f.length-v>=this._blockSize;){for(var l=this._blockOffset;l<this._blockSize;)p[l++]=f[v++];this._update(),this._blockOffset=0}for(;v<f.length;)p[this._blockOffset++]=f[v++];for(var u=0,h=f.length*8;h>0;++u)this._length[u]+=h,h=this._length[u]/4294967296|0,h>0&&(this._length[u]-=4294967296*h);return this},o.prototype._update=function(){throw new Error("_update is not implemented")},o.prototype.digest=function(f){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var c=this._digest();f!==void 0&&(c=c.toString(f)),this._block.fill(0),this._blockOffset=0;for(var p=0;p<4;++p)this._length[p]=0;return c},o.prototype._digest=function(){throw new Error("_digest is not implemented")},i.exports=o},{inherits:233,"readable-stream":277,"safe-buffer":279}],219:[function(e,i,t){var n=t;n.utils=e("./hash/utils"),n.common=e("./hash/common"),n.sha=e("./hash/sha"),n.ripemd=e("./hash/ripemd"),n.hmac=e("./hash/hmac"),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160},{"./hash/common":220,"./hash/hmac":221,"./hash/ripemd":222,"./hash/sha":223,"./hash/utils":230}],220:[function(e,i,t){var n=e("./utils"),a=e("minimalistic-assert");function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=s,s.prototype.update=function(o,f){if(o=n.toArray(o,f),this.pending?this.pending=this.pending.concat(o):this.pending=o,this.pendingTotal+=o.length,this.pending.length>=this._delta8){o=this.pending;var c=o.length%this._delta8;this.pending=o.slice(o.length-c,o.length),this.pending.length===0&&(this.pending=null),o=n.join32(o,0,o.length-c,this.endian);for(var p=0;p<o.length;p+=this._delta32)this._update(o,p,p+this._delta32)}return this},s.prototype.digest=function(o){return this.update(this._pad()),a(this.pending===null),this._digest(o)},s.prototype._pad=function(){var o=this.pendingTotal,f=this._delta8,c=f-(o+this.padLength)%f,p=new Array(c+this.padLength);p[0]=128;for(var v=1;v<c;v++)p[v]=0;if(o<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)p[v++]=0;p[v++]=0,p[v++]=0,p[v++]=0,p[v++]=0,p[v++]=o>>>24&255,p[v++]=o>>>16&255,p[v++]=o>>>8&255,p[v++]=o&255}else for(p[v++]=o&255,p[v++]=o>>>8&255,p[v++]=o>>>16&255,p[v++]=o>>>24&255,p[v++]=0,p[v++]=0,p[v++]=0,p[v++]=0,l=8;l<this.padLength;l++)p[v++]=0;return p}},{"./utils":230,"minimalistic-assert":241}],221:[function(e,i,t){var n=e("./utils"),a=e("minimalistic-assert");function s(d,o,f){if(!(this instanceof s))return new s(d,o,f);this.Hash=d,this.blockSize=d.blockSize/8,this.outSize=d.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(o,f))}i.exports=s,s.prototype._init=function(o){o.length>this.blockSize&&(o=new this.Hash().update(o).digest()),a(o.length<=this.blockSize);for(var f=o.length;f<this.blockSize;f++)o.push(0);for(f=0;f<o.length;f++)o[f]^=54;for(this.inner=new this.Hash().update(o),f=0;f<o.length;f++)o[f]^=106;this.outer=new this.Hash().update(o)},s.prototype.update=function(o,f){return this.inner.update(o,f),this},s.prototype.digest=function(o){return this.outer.update(this.inner.digest()),this.outer.digest(o)}},{"./utils":230,"minimalistic-assert":241}],222:[function(e,i,t){var n=e("./utils"),a=e("./common"),s=n.rotl32,d=n.sum32,o=n.sum32_3,f=n.sum32_4,c=a.BlockHash;function p(){if(!(this instanceof p))return new p;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}n.inherits(p,c),t.ripemd160=p,p.blockSize=512,p.outSize=160,p.hmacStrength=192,p.padLength=64,p.prototype._update=function(O,P){for(var M=this.h[0],D=this.h[1],$=this.h[2],H=this.h[3],Z=this.h[4],re=M,Y=D,N=$,x=H,b=Z,_=0;_<80;_++){var g=d(s(f(M,v(_,D,$,H),O[h[_]+P],l(_)),w[_]),Z);M=Z,Z=H,H=s($,10),$=D,D=g,g=d(s(f(re,v(79-_,Y,N,x),O[m[_]+P],u(_)),k[_]),b),re=b,b=x,x=s(N,10),N=Y,Y=g}g=o(this.h[1],$,x),this.h[1]=o(this.h[2],H,b),this.h[2]=o(this.h[3],Z,re),this.h[3]=o(this.h[4],M,Y),this.h[4]=o(this.h[0],D,N),this.h[0]=g},p.prototype._digest=function(O){return O==="hex"?n.toHex32(this.h,"little"):n.split32(this.h,"little")};function v(C,O,P,M){return C<=15?O^P^M:C<=31?O&P|~O&M:C<=47?(O|~P)^M:C<=63?O&M|P&~M:O^(P|~M)}function l(C){return C<=15?0:C<=31?1518500249:C<=47?1859775393:C<=63?2400959708:2840853838}function u(C){return C<=15?1352829926:C<=31?1548603684:C<=47?1836072691:C<=63?2053994217:0}var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],w=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],k=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":220,"./utils":230}],223:[function(e,i,t){t.sha1=e("./sha/1"),t.sha224=e("./sha/224"),t.sha256=e("./sha/256"),t.sha384=e("./sha/384"),t.sha512=e("./sha/512")},{"./sha/1":224,"./sha/224":225,"./sha/256":226,"./sha/384":227,"./sha/512":228}],224:[function(e,i,t){var n=e("../utils"),a=e("../common"),s=e("./common"),d=n.rotl32,o=n.sum32,f=n.sum32_5,c=s.ft_1,p=a.BlockHash,v=[1518500249,1859775393,2400959708,3395469782];function l(){if(!(this instanceof l))return new l;p.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(l,p),i.exports=l,l.blockSize=512,l.outSize=160,l.hmacStrength=80,l.padLength=64,l.prototype._update=function(h,m){for(var w=this.W,k=0;k<16;k++)w[k]=h[m+k];for(;k<w.length;k++)w[k]=d(w[k-3]^w[k-8]^w[k-14]^w[k-16],1);var C=this.h[0],O=this.h[1],P=this.h[2],M=this.h[3],D=this.h[4];for(k=0;k<w.length;k++){var $=~~(k/20),H=f(d(C,5),c($,O,P,M),D,w[k],v[$]);D=M,M=P,P=d(O,30),O=C,C=H}this.h[0]=o(this.h[0],C),this.h[1]=o(this.h[1],O),this.h[2]=o(this.h[2],P),this.h[3]=o(this.h[3],M),this.h[4]=o(this.h[4],D)},l.prototype._digest=function(h){return h==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":220,"../utils":230,"./common":229}],225:[function(e,i,t){var n=e("../utils"),a=e("./256");function s(){if(!(this instanceof s))return new s;a.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(s,a),i.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(o){return o==="hex"?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},{"../utils":230,"./256":226}],226:[function(e,i,t){var n=e("../utils"),a=e("../common"),s=e("./common"),d=e("minimalistic-assert"),o=n.sum32,f=n.sum32_4,c=n.sum32_5,p=s.ch32,v=s.maj32,l=s.s0_256,u=s.s1_256,h=s.g0_256,m=s.g1_256,w=a.BlockHash,k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function C(){if(!(this instanceof C))return new C;w.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=k,this.W=new Array(64)}n.inherits(C,w),i.exports=C,C.blockSize=512,C.outSize=256,C.hmacStrength=192,C.padLength=64,C.prototype._update=function(P,M){for(var D=this.W,$=0;$<16;$++)D[$]=P[M+$];for(;$<D.length;$++)D[$]=f(m(D[$-2]),D[$-7],h(D[$-15]),D[$-16]);var H=this.h[0],Z=this.h[1],re=this.h[2],Y=this.h[3],N=this.h[4],x=this.h[5],b=this.h[6],_=this.h[7];for(d(this.k.length===D.length),$=0;$<D.length;$++){var g=c(_,u(N),p(N,x,b),this.k[$],D[$]),E=o(l(H),v(H,Z,re));_=b,b=x,x=N,N=o(Y,g),Y=re,re=Z,Z=H,H=o(g,E)}this.h[0]=o(this.h[0],H),this.h[1]=o(this.h[1],Z),this.h[2]=o(this.h[2],re),this.h[3]=o(this.h[3],Y),this.h[4]=o(this.h[4],N),this.h[5]=o(this.h[5],x),this.h[6]=o(this.h[6],b),this.h[7]=o(this.h[7],_)},C.prototype._digest=function(P){return P==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":220,"../utils":230,"./common":229,"minimalistic-assert":241}],227:[function(e,i,t){var n=e("../utils"),a=e("./512");function s(){if(!(this instanceof s))return new s;a.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(s,a),i.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(o){return o==="hex"?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},{"../utils":230,"./512":228}],228:[function(e,i,t){var n=e("../utils"),a=e("../common"),s=e("minimalistic-assert"),d=n.rotr64_hi,o=n.rotr64_lo,f=n.shr64_hi,c=n.shr64_lo,p=n.sum64,v=n.sum64_hi,l=n.sum64_lo,u=n.sum64_4_hi,h=n.sum64_4_lo,m=n.sum64_5_hi,w=n.sum64_5_lo,k=a.BlockHash,C=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function O(){if(!(this instanceof O))return new O;k.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=C,this.W=new Array(160)}n.inherits(O,k),i.exports=O,O.blockSize=1024,O.outSize=512,O.hmacStrength=192,O.padLength=128,O.prototype._prepareBlock=function(E,T){for(var A=this.W,J=0;J<32;J++)A[J]=E[T+J];for(;J<A.length;J+=2){var G=b(A[J-4],A[J-3]),I=_(A[J-4],A[J-3]),V=A[J-14],L=A[J-13],z=N(A[J-30],A[J-29]),ie=x(A[J-30],A[J-29]),se=A[J-32],me=A[J-31];A[J]=u(G,I,V,L,z,ie,se,me),A[J+1]=h(G,I,V,L,z,ie,se,me)}},O.prototype._update=function(E,T){this._prepareBlock(E,T);var A=this.W,J=this.h[0],G=this.h[1],I=this.h[2],V=this.h[3],L=this.h[4],z=this.h[5],ie=this.h[6],se=this.h[7],me=this.h[8],Se=this.h[9],ke=this.h[10],oe=this.h[11],ue=this.h[12],ye=this.h[13],we=this.h[14],le=this.h[15];s(this.k.length===A.length);for(var ee=0;ee<A.length;ee+=2){var te=we,Q=le,B=re(me,Se),W=Y(me,Se),X=P(me,Se,ke,oe,ue),ce=M(me,Se,ke,oe,ue,ye),he=this.k[ee],ge=this.k[ee+1],fe=A[ee],y=A[ee+1],U=m(te,Q,B,W,X,ce,he,ge,fe,y),q=w(te,Q,B,W,X,ce,he,ge,fe,y);te=H(J,G),Q=Z(J,G),B=D(J,G,I,V,L),W=$(J,G,I,V,L,z);var de=v(te,Q,B,W),j=l(te,Q,B,W);we=ue,le=ye,ue=ke,ye=oe,ke=me,oe=Se,me=v(ie,se,U,q),Se=l(se,se,U,q),ie=L,se=z,L=I,z=V,I=J,V=G,J=v(U,q,de,j),G=l(U,q,de,j)}p(this.h,0,J,G),p(this.h,2,I,V),p(this.h,4,L,z),p(this.h,6,ie,se),p(this.h,8,me,Se),p(this.h,10,ke,oe),p(this.h,12,ue,ye),p(this.h,14,we,le)},O.prototype._digest=function(E){return E==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")};function P(g,E,T,A,J){var G=g&T^~g&J;return G<0&&(G+=4294967296),G}function M(g,E,T,A,J,G){var I=E&A^~E&G;return I<0&&(I+=4294967296),I}function D(g,E,T,A,J){var G=g&T^g&J^T&J;return G<0&&(G+=4294967296),G}function $(g,E,T,A,J,G){var I=E&A^E&G^A&G;return I<0&&(I+=4294967296),I}function H(g,E){var T=d(g,E,28),A=d(E,g,2),J=d(E,g,7),G=T^A^J;return G<0&&(G+=4294967296),G}function Z(g,E){var T=o(g,E,28),A=o(E,g,2),J=o(E,g,7),G=T^A^J;return G<0&&(G+=4294967296),G}function re(g,E){var T=d(g,E,14),A=d(g,E,18),J=d(E,g,9),G=T^A^J;return G<0&&(G+=4294967296),G}function Y(g,E){var T=o(g,E,14),A=o(g,E,18),J=o(E,g,9),G=T^A^J;return G<0&&(G+=4294967296),G}function N(g,E){var T=d(g,E,1),A=d(g,E,8),J=f(g,E,7),G=T^A^J;return G<0&&(G+=4294967296),G}function x(g,E){var T=o(g,E,1),A=o(g,E,8),J=c(g,E,7),G=T^A^J;return G<0&&(G+=4294967296),G}function b(g,E){var T=d(g,E,19),A=d(E,g,29),J=f(g,E,6),G=T^A^J;return G<0&&(G+=4294967296),G}function _(g,E){var T=o(g,E,19),A=o(E,g,29),J=c(g,E,6),G=T^A^J;return G<0&&(G+=4294967296),G}},{"../common":220,"../utils":230,"minimalistic-assert":241}],229:[function(e,i,t){var n=e("../utils"),a=n.rotr32;function s(u,h,m,w){if(u===0)return d(h,m,w);if(u===1||u===3)return f(h,m,w);if(u===2)return o(h,m,w)}t.ft_1=s;function d(u,h,m){return u&h^~u&m}t.ch32=d;function o(u,h,m){return u&h^u&m^h&m}t.maj32=o;function f(u,h,m){return u^h^m}t.p32=f;function c(u){return a(u,2)^a(u,13)^a(u,22)}t.s0_256=c;function p(u){return a(u,6)^a(u,11)^a(u,25)}t.s1_256=p;function v(u){return a(u,7)^a(u,18)^u>>>3}t.g0_256=v;function l(u){return a(u,17)^a(u,19)^u>>>10}t.g1_256=l},{"../utils":230}],230:[function(e,i,t){var n=e("minimalistic-assert"),a=e("inherits");t.inherits=a;function s(_,g){return(_.charCodeAt(g)&64512)!==55296||g<0||g+1>=_.length?!1:(_.charCodeAt(g+1)&64512)===56320}function d(_,g){if(Array.isArray(_))return _.slice();if(!_)return[];var E=[];if(typeof _=="string")if(g){if(g==="hex")for(_=_.replace(/[^a-z0-9]+/ig,""),_.length%2!==0&&(_="0"+_),A=0;A<_.length;A+=2)E.push(parseInt(_[A]+_[A+1],16))}else for(var T=0,A=0;A<_.length;A++){var J=_.charCodeAt(A);J<128?E[T++]=J:J<2048?(E[T++]=J>>6|192,E[T++]=J&63|128):s(_,A)?(J=65536+((J&1023)<<10)+(_.charCodeAt(++A)&1023),E[T++]=J>>18|240,E[T++]=J>>12&63|128,E[T++]=J>>6&63|128,E[T++]=J&63|128):(E[T++]=J>>12|224,E[T++]=J>>6&63|128,E[T++]=J&63|128)}else for(A=0;A<_.length;A++)E[A]=_[A]|0;return E}t.toArray=d;function o(_){for(var g="",E=0;E<_.length;E++)g+=p(_[E].toString(16));return g}t.toHex=o;function f(_){var g=_>>>24|_>>>8&65280|_<<8&16711680|(_&255)<<24;return g>>>0}t.htonl=f;function c(_,g){for(var E="",T=0;T<_.length;T++){var A=_[T];g==="little"&&(A=f(A)),E+=v(A.toString(16))}return E}t.toHex32=c;function p(_){return _.length===1?"0"+_:_}t.zero2=p;function v(_){return _.length===7?"0"+_:_.length===6?"00"+_:_.length===5?"000"+_:_.length===4?"0000"+_:_.length===3?"00000"+_:_.length===2?"000000"+_:_.length===1?"0000000"+_:_}t.zero8=v;function l(_,g,E,T){var A=E-g;n(A%4===0);for(var J=new Array(A/4),G=0,I=g;G<J.length;G++,I+=4){var V;T==="big"?V=_[I]<<24|_[I+1]<<16|_[I+2]<<8|_[I+3]:V=_[I+3]<<24|_[I+2]<<16|_[I+1]<<8|_[I],J[G]=V>>>0}return J}t.join32=l;function u(_,g){for(var E=new Array(_.length*4),T=0,A=0;T<_.length;T++,A+=4){var J=_[T];g==="big"?(E[A]=J>>>24,E[A+1]=J>>>16&255,E[A+2]=J>>>8&255,E[A+3]=J&255):(E[A+3]=J>>>24,E[A+2]=J>>>16&255,E[A+1]=J>>>8&255,E[A]=J&255)}return E}t.split32=u;function h(_,g){return _>>>g|_<<32-g}t.rotr32=h;function m(_,g){return _<<g|_>>>32-g}t.rotl32=m;function w(_,g){return _+g>>>0}t.sum32=w;function k(_,g,E){return _+g+E>>>0}t.sum32_3=k;function C(_,g,E,T){return _+g+E+T>>>0}t.sum32_4=C;function O(_,g,E,T,A){return _+g+E+T+A>>>0}t.sum32_5=O;function P(_,g,E,T){var A=_[g],J=_[g+1],G=T+J>>>0,I=(G<T?1:0)+E+A;_[g]=I>>>0,_[g+1]=G}t.sum64=P;function M(_,g,E,T){var A=g+T>>>0,J=(A<g?1:0)+_+E;return J>>>0}t.sum64_hi=M;function D(_,g,E,T){var A=g+T;return A>>>0}t.sum64_lo=D;function $(_,g,E,T,A,J,G,I){var V=0,L=g;L=L+T>>>0,V+=L<g?1:0,L=L+J>>>0,V+=L<J?1:0,L=L+I>>>0,V+=L<I?1:0;var z=_+E+A+G+V;return z>>>0}t.sum64_4_hi=$;function H(_,g,E,T,A,J,G,I){var V=g+T+J+I;return V>>>0}t.sum64_4_lo=H;function Z(_,g,E,T,A,J,G,I,V,L){var z=0,ie=g;ie=ie+T>>>0,z+=ie<g?1:0,ie=ie+J>>>0,z+=ie<J?1:0,ie=ie+I>>>0,z+=ie<I?1:0,ie=ie+L>>>0,z+=ie<L?1:0;var se=_+E+A+G+V+z;return se>>>0}t.sum64_5_hi=Z;function re(_,g,E,T,A,J,G,I,V,L){var z=g+T+J+I+L;return z>>>0}t.sum64_5_lo=re;function Y(_,g,E){var T=g<<32-E|_>>>E;return T>>>0}t.rotr64_hi=Y;function N(_,g,E){var T=_<<32-E|g>>>E;return T>>>0}t.rotr64_lo=N;function x(_,g,E){return _>>>E}t.shr64_hi=x;function b(_,g,E){var T=_<<32-E|g>>>E;return T>>>0}t.shr64_lo=b},{inherits:233,"minimalistic-assert":241}],231:[function(e,i,t){var n=e("hash.js"),a=e("minimalistic-crypto-utils"),s=e("minimalistic-assert");function d(o){if(!(this instanceof d))return new d(o);this.hash=o.hash,this.predResist=!!o.predResist,this.outLen=this.hash.outSize,this.minEntropy=o.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var f=a.toArray(o.entropy,o.entropyEnc||"hex"),c=a.toArray(o.nonce,o.nonceEnc||"hex"),p=a.toArray(o.pers,o.persEnc||"hex");s(f.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(f,c,p)}i.exports=d,d.prototype._init=function(f,c,p){var v=f.concat(c).concat(p);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var l=0;l<this.V.length;l++)this.K[l]=0,this.V[l]=1;this._update(v),this._reseed=1,this.reseedInterval=281474976710656},d.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},d.prototype._update=function(f){var c=this._hmac().update(this.V).update([0]);f&&(c=c.update(f)),this.K=c.digest(),this.V=this._hmac().update(this.V).digest(),f&&(this.K=this._hmac().update(this.V).update([1]).update(f).digest(),this.V=this._hmac().update(this.V).digest())},d.prototype.reseed=function(f,c,p,v){typeof c!="string"&&(v=p,p=c,c=null),f=a.toArray(f,c),p=a.toArray(p,v),s(f.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(f.concat(p||[])),this._reseed=1},d.prototype.generate=function(f,c,p,v){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof c!="string"&&(v=p,p=c,c=null),p&&(p=a.toArray(p,v||"hex"),this._update(p));for(var l=[];l.length<f;)this.V=this._hmac().update(this.V).digest(),l=l.concat(this.V);var u=l.slice(0,f);return this._update(p),this._reseed++,a.encode(u,c)}},{"hash.js":219,"minimalistic-assert":241,"minimalistic-crypto-utils":242}],232:[function(e,i,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(n,a,s,d,o){var f,c,p=o*8-d-1,v=(1<<p)-1,l=v>>1,u=-7,h=s?o-1:0,m=s?-1:1,w=n[a+h];for(h+=m,f=w&(1<<-u)-1,w>>=-u,u+=p;u>0;f=f*256+n[a+h],h+=m,u-=8);for(c=f&(1<<-u)-1,f>>=-u,u+=d;u>0;c=c*256+n[a+h],h+=m,u-=8);if(f===0)f=1-l;else{if(f===v)return c?NaN:(w?-1:1)*(1/0);c=c+Math.pow(2,d),f=f-l}return(w?-1:1)*c*Math.pow(2,f-d)},t.write=function(n,a,s,d,o,f){var c,p,v,l=f*8-o-1,u=(1<<l)-1,h=u>>1,m=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=d?0:f-1,k=d?1:-1,C=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(p=isNaN(a)?1:0,c=u):(c=Math.floor(Math.log(a)/Math.LN2),a*(v=Math.pow(2,-c))<1&&(c--,v*=2),c+h>=1?a+=m/v:a+=m*Math.pow(2,1-h),a*v>=2&&(c++,v/=2),c+h>=u?(p=0,c=u):c+h>=1?(p=(a*v-1)*Math.pow(2,o),c=c+h):(p=a*Math.pow(2,h-1)*Math.pow(2,o),c=0));o>=8;n[s+w]=p&255,w+=k,p/=256,o-=8);for(c=c<<o|p,l+=o;l>0;n[s+w]=c&255,w+=k,c/=256,l-=8);n[s+w-k]|=C*128}},{}],233:[function(e,i,t){arguments[4][47][0].apply(t,arguments)},{dup:47}],234:[function(e,i,t){var n=e("has-tostringtag/shams")(),a=e("call-bind/callBound"),s=a("Object.prototype.toString"),d=function(p){return n&&p&&typeof p=="object"&&Symbol.toStringTag in p?!1:s(p)==="[object Arguments]"},o=function(p){return d(p)?!0:p!==null&&typeof p=="object"&&typeof p.length=="number"&&p.length>=0&&s(p)!=="[object Array]"&&s(p.callee)==="[object Function]"},f=function(){return d(arguments)}();d.isLegacyArguments=o,i.exports=f?d:o},{"call-bind/callBound":172,"has-tostringtag/shams":216}],235:[function(e,i,t){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */i.exports=function(s){return s!=null&&(n(s)||a(s)||!!s._isBuffer)};function n(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function a(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&n(s.slice(0,0))}},{}],236:[function(e,i,t){var n=Function.prototype.toString,a=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,s,d;if(typeof a=="function"&&typeof Object.defineProperty=="function")try{s=Object.defineProperty({},"length",{get:function(){throw d}}),d={},a(function(){throw 42},null,s)}catch(M){M!==d&&(a=null)}else a=null;var o=/^\s*class\b/,f=function(D){try{var $=n.call(D);return o.test($)}catch{return!1}},c=function(D){try{return f(D)?!1:(n.call(D),!0)}catch{return!1}},p=Object.prototype.toString,v="[object Object]",l="[object Function]",u="[object GeneratorFunction]",h="[object HTMLAllCollection]",m="[object HTML document.all class]",w="[object HTMLCollection]",k=typeof Symbol=="function"&&!!Symbol.toStringTag,C=!(0 in[,]),O=function(){return!1};if(typeof document=="object"){var P=document.all;p.call(P)===p.call(document.all)&&(O=function(D){if((C||!D)&&(typeof D>"u"||typeof D=="object"))try{var $=p.call(D);return($===h||$===m||$===w||$===v)&&D("")==null}catch{}return!1})}i.exports=a?function(D){if(O(D))return!0;if(!D||typeof D!="function"&&typeof D!="object")return!1;try{a(D,null,s)}catch($){if($!==d)return!1}return!f(D)&&c(D)}:function(D){if(O(D))return!0;if(!D||typeof D!="function"&&typeof D!="object")return!1;if(k)return c(D);if(f(D))return!1;var $=p.call(D);return $!==l&&$!==u&&!/^\[object HTML/.test($)?!1:c(D)}},{}],237:[function(e,i,t){var n=Object.prototype.toString,a=Function.prototype.toString,s=/^\s*(?:function)?\*/,d=e("has-tostringtag/shams")(),o=Object.getPrototypeOf,f=function(){if(!d)return!1;try{return Function("return function*() {}")()}catch{}},c;i.exports=function(v){if(typeof v!="function")return!1;if(s.test(a.call(v)))return!0;if(!d){var l=n.call(v);return l==="[object GeneratorFunction]"}if(!o)return!1;if(typeof c>"u"){var u=f();c=u?o(u):!1}return o(v)===c}},{"has-tostringtag/shams":216}],238:[function(e,i,t){(function(n){(function(){var a=e("for-each"),s=e("available-typed-arrays"),d=e("call-bind/callBound"),o=d("Object.prototype.toString"),f=e("has-tostringtag/shams")(),c=e("gopd"),p=typeof globalThis>"u"?n:globalThis,v=s(),l=d("Array.prototype.indexOf",!0)||function(C,O){for(var P=0;P<C.length;P+=1)if(C[P]===O)return P;return-1},u=d("String.prototype.slice"),h={},m=Object.getPrototypeOf;f&&c&&m&&a(v,function(k){var C=new p[k];if(Symbol.toStringTag in C){var O=m(C),P=c(O,Symbol.toStringTag);if(!P){var M=m(O);P=c(M,Symbol.toStringTag)}h[k]=P.get}});var w=function(C){var O=!1;return a(h,function(P,M){if(!O)try{O=P.call(C)===M}catch{}}),O};i.exports=function(C){if(!C||typeof C!="object")return!1;if(!f||!(Symbol.toStringTag in C)){var O=u(o(C),8,-1);return l(v,O)>-1}return c?w(C):!1}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":137,"call-bind/callBound":172,"for-each":209,gopd:213,"has-tostringtag/shams":216}],239:[function(e,i,t){var n=e("inherits"),a=e("hash-base"),s=e("safe-buffer").Buffer,d=new Array(16);function o(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}n(o,a),o.prototype._update=function(){for(var u=d,h=0;h<16;++h)u[h]=this._block.readInt32LE(h*4);var m=this._a,w=this._b,k=this._c,C=this._d;m=c(m,w,k,C,u[0],3614090360,7),C=c(C,m,w,k,u[1],3905402710,12),k=c(k,C,m,w,u[2],606105819,17),w=c(w,k,C,m,u[3],3250441966,22),m=c(m,w,k,C,u[4],4118548399,7),C=c(C,m,w,k,u[5],1200080426,12),k=c(k,C,m,w,u[6],2821735955,17),w=c(w,k,C,m,u[7],4249261313,22),m=c(m,w,k,C,u[8],1770035416,7),C=c(C,m,w,k,u[9],2336552879,12),k=c(k,C,m,w,u[10],4294925233,17),w=c(w,k,C,m,u[11],2304563134,22),m=c(m,w,k,C,u[12],1804603682,7),C=c(C,m,w,k,u[13],4254626195,12),k=c(k,C,m,w,u[14],2792965006,17),w=c(w,k,C,m,u[15],1236535329,22),m=p(m,w,k,C,u[1],4129170786,5),C=p(C,m,w,k,u[6],3225465664,9),k=p(k,C,m,w,u[11],643717713,14),w=p(w,k,C,m,u[0],3921069994,20),m=p(m,w,k,C,u[5],3593408605,5),C=p(C,m,w,k,u[10],38016083,9),k=p(k,C,m,w,u[15],3634488961,14),w=p(w,k,C,m,u[4],3889429448,20),m=p(m,w,k,C,u[9],568446438,5),C=p(C,m,w,k,u[14],3275163606,9),k=p(k,C,m,w,u[3],4107603335,14),w=p(w,k,C,m,u[8],1163531501,20),m=p(m,w,k,C,u[13],2850285829,5),C=p(C,m,w,k,u[2],4243563512,9),k=p(k,C,m,w,u[7],1735328473,14),w=p(w,k,C,m,u[12],2368359562,20),m=v(m,w,k,C,u[5],4294588738,4),C=v(C,m,w,k,u[8],2272392833,11),k=v(k,C,m,w,u[11],1839030562,16),w=v(w,k,C,m,u[14],4259657740,23),m=v(m,w,k,C,u[1],2763975236,4),C=v(C,m,w,k,u[4],1272893353,11),k=v(k,C,m,w,u[7],4139469664,16),w=v(w,k,C,m,u[10],3200236656,23),m=v(m,w,k,C,u[13],681279174,4),C=v(C,m,w,k,u[0],3936430074,11),k=v(k,C,m,w,u[3],3572445317,16),w=v(w,k,C,m,u[6],76029189,23),m=v(m,w,k,C,u[9],3654602809,4),C=v(C,m,w,k,u[12],3873151461,11),k=v(k,C,m,w,u[15],530742520,16),w=v(w,k,C,m,u[2],3299628645,23),m=l(m,w,k,C,u[0],4096336452,6),C=l(C,m,w,k,u[7],1126891415,10),k=l(k,C,m,w,u[14],2878612391,15),w=l(w,k,C,m,u[5],4237533241,21),m=l(m,w,k,C,u[12],1700485571,6),C=l(C,m,w,k,u[3],2399980690,10),k=l(k,C,m,w,u[10],4293915773,15),w=l(w,k,C,m,u[1],2240044497,21),m=l(m,w,k,C,u[8],1873313359,6),C=l(C,m,w,k,u[15],4264355552,10),k=l(k,C,m,w,u[6],2734768916,15),w=l(w,k,C,m,u[13],1309151649,21),m=l(m,w,k,C,u[4],4149444226,6),C=l(C,m,w,k,u[11],3174756917,10),k=l(k,C,m,w,u[2],718787259,15),w=l(w,k,C,m,u[9],3951481745,21),this._a=this._a+m|0,this._b=this._b+w|0,this._c=this._c+k|0,this._d=this._d+C|0},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var u=s.allocUnsafe(16);return u.writeInt32LE(this._a,0),u.writeInt32LE(this._b,4),u.writeInt32LE(this._c,8),u.writeInt32LE(this._d,12),u};function f(u,h){return u<<h|u>>>32-h}function c(u,h,m,w,k,C,O){return f(u+(h&m|~h&w)+k+C|0,O)+h|0}function p(u,h,m,w,k,C,O){return f(u+(h&w|m&~w)+k+C|0,O)+h|0}function v(u,h,m,w,k,C,O){return f(u+(h^m^w)+k+C|0,O)+h|0}function l(u,h,m,w,k,C,O){return f(u+(m^(h|~w))+k+C|0,O)+h|0}i.exports=o},{"hash-base":218,inherits:233,"safe-buffer":279}],240:[function(e,i,t){var n=e("bn.js"),a=e("brorand");function s(d){this.rand=d||new a.Rand}i.exports=s,s.create=function(o){return new s(o)},s.prototype._randbelow=function(o){var f=o.bitLength(),c=Math.ceil(f/8);do var p=new n(this.rand.generate(c));while(p.cmp(o)>=0);return p},s.prototype._randrange=function(o,f){var c=f.sub(o);return o.add(this._randbelow(c))},s.prototype.test=function(o,f,c){var p=o.bitLength(),v=n.mont(o),l=new n(1).toRed(v);f||(f=Math.max(1,p/48|0));for(var u=o.subn(1),h=0;!u.testn(h);h++);for(var m=o.shrn(h),w=u.toRed(v),k=!0;f>0;f--){var C=this._randrange(new n(2),u);c&&c(C);var O=C.toRed(v).redPow(m);if(!(O.cmp(l)===0||O.cmp(w)===0)){for(var P=1;P<h;P++){if(O=O.redSqr(),O.cmp(l)===0)return!1;if(O.cmp(w)===0)break}if(P===h)return!1}}return k},s.prototype.getDivisor=function(o,f){var c=o.bitLength(),p=n.mont(o),v=new n(1).toRed(p);f||(f=Math.max(1,c/48|0));for(var l=o.subn(1),u=0;!l.testn(u);u++);for(var h=o.shrn(u),m=l.toRed(p);f>0;f--){var w=this._randrange(new n(2),l),k=o.gcd(w);if(k.cmpn(1)!==0)return k;var C=w.toRed(p).redPow(h);if(!(C.cmp(v)===0||C.cmp(m)===0)){for(var O=1;O<u;O++){if(C=C.redSqr(),C.cmp(v)===0)return C.fromRed().subn(1).gcd(o);if(C.cmp(m)===0)break}if(O===u)return C=C.redSqr(),C.fromRed().subn(1).gcd(o)}}return!1}},{"bn.js":139,brorand:141}],241:[function(e,i,t){i.exports=n;function n(a,s){if(!a)throw new Error(s||"Assertion failed")}n.equal=function(s,d,o){if(s!=d)throw new Error(o||"Assertion failed: "+s+" != "+d)}},{}],242:[function(e,i,t){var n=t;function a(o,f){if(Array.isArray(o))return o.slice();if(!o)return[];var c=[];if(typeof o!="string"){for(var p=0;p<o.length;p++)c[p]=o[p]|0;return c}if(f==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var p=0;p<o.length;p+=2)c.push(parseInt(o[p]+o[p+1],16))}else for(var p=0;p<o.length;p++){var v=o.charCodeAt(p),l=v>>8,u=v&255;l?c.push(l,u):c.push(u)}return c}n.toArray=a;function s(o){return o.length===1?"0"+o:o}n.zero2=s;function d(o){for(var f="",c=0;c<o.length;c++)f+=s(o[c].toString(16));return f}n.toHex=d,n.encode=function(f,c){return c==="hex"?d(f):f}},{}],243:[function(e,i,t){i.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],244:[function(e,i,t){var n=e("asn1.js");t.certificate=e("./certificate");var a=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});t.RSAPrivateKey=a;var s=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});t.RSAPublicKey=s;var d=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())});t.PublicKey=d;var o=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),f=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(o),this.key("subjectPrivateKey").octstr())});t.PrivateKey=f;var c=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});t.EncryptedPrivateKey=c;var p=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});t.DSAPrivateKey=p,t.DSAparam=n.define("DSAparam",function(){this.int()});var v=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(l),this.key("publicKey").optional().explicit(1).bitstr())});t.ECPrivateKey=v;var l=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});t.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":245,"asn1.js":123}],245:[function(e,i,t){var n=e("asn1.js"),a=n.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),s=n.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),d=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),o=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(d),this.key("subjectPublicKey").bitstr())}),f=n.define("RelativeDistinguishedName",function(){this.setof(s)}),c=n.define("RDNSequence",function(){this.seqof(f)}),p=n.define("Name",function(){this.choice({rdnSequence:this.use(c)})}),v=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(a),this.key("notAfter").use(a))}),l=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),u=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(d),this.key("issuer").use(p),this.key("validity").use(v),this.key("subject").use(p),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(l).optional())}),h=n.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(u),this.key("signatureAlgorithm").use(d),this.key("signatureValue").bitstr())});i.exports=h},{"asn1.js":123}],246:[function(e,i,t){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,d=e("evp_bytestokey"),o=e("browserify-aes"),f=e("safe-buffer").Buffer;i.exports=function(c,p){var v=c.toString(),l=v.match(n),u;if(l){var m="aes"+l[1],w=f.from(l[2],"hex"),k=f.from(l[3].replace(/[\r\n]/g,""),"base64"),C=d(p,w.slice(0,8),parseInt(l[1],10)).key,O=[],P=o.createDecipheriv(m,C,w);O.push(P.update(k)),O.push(P.final()),u=f.concat(O)}else{var h=v.match(s);u=f.from(h[2].replace(/[\r\n]/g,""),"base64")}var M=v.match(a)[1];return{tag:M,data:u}}},{"browserify-aes":145,evp_bytestokey:208,"safe-buffer":279}],247:[function(e,i,t){var n=e("./asn1"),a=e("./aesid.json"),s=e("./fixProc"),d=e("browserify-aes"),o=e("pbkdf2"),f=e("safe-buffer").Buffer;i.exports=c;function c(v){var l;typeof v=="object"&&!f.isBuffer(v)&&(l=v.passphrase,v=v.key),typeof v=="string"&&(v=f.from(v));var u=s(v,l),h=u.tag,m=u.data,w,k;switch(h){case"CERTIFICATE":k=n.certificate.decode(m,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(k||(k=n.PublicKey.decode(m,"der")),w=k.algorithm.algorithm.join("."),w){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(k.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return k.subjectPrivateKey=k.subjectPublicKey,{type:"ec",data:k};case"1.2.840.10040.4.1":return k.algorithm.params.pub_key=n.DSAparam.decode(k.subjectPublicKey.data,"der"),{type:"dsa",data:k.algorithm.params};default:throw new Error("unknown key id "+w)}case"ENCRYPTED PRIVATE KEY":m=n.EncryptedPrivateKey.decode(m,"der"),m=p(m,l);case"PRIVATE KEY":switch(k=n.PrivateKey.decode(m,"der"),w=k.algorithm.algorithm.join("."),w){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(k.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:k.algorithm.curve,privateKey:n.ECPrivateKey.decode(k.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return k.algorithm.params.priv_key=n.DSAparam.decode(k.subjectPrivateKey,"der"),{type:"dsa",params:k.algorithm.params};default:throw new Error("unknown key id "+w)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(m,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(m,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(m,"der")};case"EC PRIVATE KEY":return m=n.ECPrivateKey.decode(m,"der"),{curve:m.parameters.value,privateKey:m.privateKey};default:throw new Error("unknown key type "+h)}}c.signature=n.signature;function p(v,l){var u=v.algorithm.decrypt.kde.kdeparams.salt,h=parseInt(v.algorithm.decrypt.kde.kdeparams.iters.toString(),10),m=a[v.algorithm.decrypt.cipher.algo.join(".")],w=v.algorithm.decrypt.cipher.iv,k=v.subjectPrivateKey,C=parseInt(m.split("-")[1],10)/8,O=o.pbkdf2Sync(l,u,h,C,"sha1"),P=d.createDecipheriv(m,O,w),M=[];return M.push(P.update(k)),M.push(P.final()),f.concat(M)}},{"./aesid.json":243,"./asn1":244,"./fixProc":246,"browserify-aes":145,pbkdf2:248,"safe-buffer":279}],248:[function(e,i,t){t.pbkdf2=e("./lib/async"),t.pbkdf2Sync=e("./lib/sync")},{"./lib/async":249,"./lib/sync":252}],249:[function(e,i,t){(function(n){(function(){var a=e("safe-buffer").Buffer,s=e("./precondition"),d=e("./default-encoding"),o=e("./sync"),f=e("./to-buffer"),c,p=n.crypto&&n.crypto.subtle,v={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},l=[];function u(C){if(n.process&&!n.process.browser||!p||!p.importKey||!p.deriveBits)return Promise.resolve(!1);if(l[C]!==void 0)return l[C];c=c||a.alloc(8);var O=w(c,c,10,128,C).then(function(){return!0}).catch(function(){return!1});return l[C]=O,O}var h;function m(){return h||(n.process&&n.process.nextTick?h=n.process.nextTick:n.queueMicrotask?h=n.queueMicrotask:n.setImmediate?h=n.setImmediate:h=n.setTimeout,h)}function w(C,O,P,M,D){return p.importKey("raw",C,{name:"PBKDF2"},!1,["deriveBits"]).then(function($){return p.deriveBits({name:"PBKDF2",salt:O,iterations:P,hash:{name:D}},$,M<<3)}).then(function($){return a.from($)})}function k(C,O){C.then(function(P){m()(function(){O(null,P)})},function(P){m()(function(){O(P)})})}i.exports=function(C,O,P,M,D,$){typeof D=="function"&&($=D,D=void 0),D=D||"sha1";var H=v[D.toLowerCase()];if(!H||typeof n.Promise!="function"){m()(function(){var Z;try{Z=o(C,O,P,M,D)}catch(re){return $(re)}$(null,Z)});return}if(s(P,M),C=f(C,d,"Password"),O=f(O,d,"Salt"),typeof $!="function")throw new Error("No callback provided to pbkdf2");k(u(H).then(function(Z){return Z?w(C,O,P,M,H):o(C,O,P,M,D)}),$)}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-encoding":250,"./precondition":251,"./sync":252,"./to-buffer":253,"safe-buffer":279}],250:[function(e,i,t){(function(n,a){(function(){var s;if(a.process&&a.process.browser)s="utf-8";else if(a.process&&a.process.version){var d=parseInt(n.version.split(".")[0].slice(1),10);s=d>=6?"utf-8":"binary"}else s="utf-8";i.exports=s}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:254}],251:[function(e,i,t){var n=Math.pow(2,30)-1;i.exports=function(a,s){if(typeof a!="number")throw new TypeError("Iterations not a number");if(a<0)throw new TypeError("Bad iterations");if(typeof s!="number")throw new TypeError("Key length not a number");if(s<0||s>n||s!==s)throw new TypeError("Bad key length")}},{}],252:[function(e,i,t){var n=e("create-hash/md5"),a=e("ripemd160"),s=e("sha.js"),d=e("safe-buffer").Buffer,o=e("./precondition"),f=e("./default-encoding"),c=e("./to-buffer"),p=d.alloc(128),v={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function l(m,w,k){var C=u(m),O=m==="sha512"||m==="sha384"?128:64;w.length>O?w=C(w):w.length<O&&(w=d.concat([w,p],O));for(var P=d.allocUnsafe(O+v[m]),M=d.allocUnsafe(O+v[m]),D=0;D<O;D++)P[D]=w[D]^54,M[D]=w[D]^92;var $=d.allocUnsafe(O+k+4);P.copy($,0,0,O),this.ipad1=$,this.ipad2=P,this.opad=M,this.alg=m,this.blocksize=O,this.hash=C,this.size=v[m]}l.prototype.run=function(m,w){m.copy(w,this.blocksize);var k=this.hash(w);return k.copy(this.opad,this.blocksize),this.hash(this.opad)};function u(m){function w(C){return s(m).update(C).digest()}function k(C){return new a().update(C).digest()}return m==="rmd160"||m==="ripemd160"?k:m==="md5"?n:w}function h(m,w,k,C,O){o(k,C),m=c(m,f,"Password"),w=c(w,f,"Salt"),O=O||"sha1";var P=new l(O,m,w.length),M=d.allocUnsafe(C),D=d.allocUnsafe(w.length+4);w.copy(D,0,0,w.length);for(var $=0,H=v[O],Z=Math.ceil(C/H),re=1;re<=Z;re++){D.writeUInt32BE(re,w.length);for(var Y=P.run(D,P.ipad1),N=Y,x=1;x<k;x++){N=P.run(N,P.ipad2);for(var b=0;b<H;b++)Y[b]^=N[b]}Y.copy(M,$),$+=H}return M}i.exports=h},{"./default-encoding":250,"./precondition":251,"./to-buffer":253,"create-hash/md5":177,ripemd160:278,"safe-buffer":279,"sha.js":282}],253:[function(e,i,t){var n=e("safe-buffer").Buffer;i.exports=function(a,s,d){if(n.isBuffer(a))return a;if(typeof a=="string")return n.from(a,s);if(ArrayBuffer.isView(a))return n.from(a.buffer);throw new TypeError(d+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":279}],254:[function(e,i,t){var n=i.exports={},a,s;function d(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=d}catch{a=d}try{typeof clearTimeout=="function"?s=clearTimeout:s=o}catch{s=o}})();function f(C){if(a===setTimeout)return setTimeout(C,0);if((a===d||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function c(C){if(s===clearTimeout)return clearTimeout(C);if((s===o||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(C);try{return s(C)}catch{try{return s.call(null,C)}catch{return s.call(this,C)}}}var p=[],v=!1,l,u=-1;function h(){!v||!l||(v=!1,l.length?p=l.concat(p):u=-1,p.length&&m())}function m(){if(!v){var C=f(h);v=!0;for(var O=p.length;O;){for(l=p,p=[];++u<O;)l&&l[u].run();u=-1,O=p.length}l=null,v=!1,c(C)}}n.nextTick=function(C){var O=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)O[P-1]=arguments[P];p.push(new w(C,O)),p.length===1&&!v&&f(m)};function w(C,O){this.fun=C,this.array=O}w.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function k(){}n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.prependListener=k,n.prependOnceListener=k,n.listeners=function(C){return[]},n.binding=function(C){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(C){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],255:[function(e,i,t){t.publicEncrypt=e("./publicEncrypt"),t.privateDecrypt=e("./privateDecrypt"),t.privateEncrypt=function(a,s){return t.publicEncrypt(a,s,!0)},t.publicDecrypt=function(a,s){return t.privateDecrypt(a,s,!0)}},{"./privateDecrypt":257,"./publicEncrypt":258}],256:[function(e,i,t){var n=e("create-hash"),a=e("safe-buffer").Buffer;i.exports=function(d,o){for(var f=a.alloc(0),c=0,p;f.length<o;)p=s(c++),f=a.concat([f,n("sha1").update(d).update(p).digest()]);return f.slice(0,o)};function s(d){var o=a.allocUnsafe(4);return o.writeUInt32BE(d,0),o}},{"create-hash":176,"safe-buffer":279}],257:[function(e,i,t){var n=e("parse-asn1"),a=e("./mgf"),s=e("./xor"),d=e("bn.js"),o=e("browserify-rsa"),f=e("create-hash"),c=e("./withPublic"),p=e("safe-buffer").Buffer;i.exports=function(m,w,k){var C;m.padding?C=m.padding:k?C=1:C=4;var O=n(m),P=O.modulus.byteLength();if(w.length>P||new d(w).cmp(O.modulus)>=0)throw new Error("decryption error");var M;k?M=c(new d(w),O):M=o(w,O);var D=p.alloc(P-M.length);if(M=p.concat([D,M],P),C===4)return v(O,M);if(C===1)return l(O,M,k);if(C===3)return M;throw new Error("unknown padding")};function v(h,m){var w=h.modulus.byteLength(),k=f("sha1").update(p.alloc(0)).digest(),C=k.length;if(m[0]!==0)throw new Error("decryption error");var O=m.slice(1,C+1),P=m.slice(C+1),M=s(O,a(P,C)),D=s(P,a(M,w-C-1));if(u(k,D.slice(0,C)))throw new Error("decryption error");for(var $=C;D[$]===0;)$++;if(D[$++]!==1)throw new Error("decryption error");return D.slice($)}function l(h,m,w){for(var k=m.slice(0,2),C=2,O=0;m[C++]!==0;)if(C>=m.length){O++;break}var P=m.slice(2,C-1);if((k.toString("hex")!=="0002"&&!w||k.toString("hex")!=="0001"&&w)&&O++,P.length<8&&O++,O)throw new Error("decryption error");return m.slice(C)}function u(h,m){h=p.from(h),m=p.from(m);var w=0,k=h.length;h.length!==m.length&&(w++,k=Math.min(h.length,m.length));for(var C=-1;++C<k;)w+=h[C]^m[C];return w}},{"./mgf":256,"./withPublic":259,"./xor":260,"bn.js":139,"browserify-rsa":163,"create-hash":176,"parse-asn1":247,"safe-buffer":279}],258:[function(e,i,t){var n=e("parse-asn1"),a=e("randombytes"),s=e("create-hash"),d=e("./mgf"),o=e("./xor"),f=e("bn.js"),c=e("./withPublic"),p=e("browserify-rsa"),v=e("safe-buffer").Buffer;i.exports=function(w,k,C){var O;w.padding?O=w.padding:C?O=1:O=4;var P=n(w),M;if(O===4)M=l(P,k);else if(O===1)M=u(P,k,C);else if(O===3){if(M=new f(k),M.cmp(P.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return C?p(M,P):c(M,P)};function l(m,w){var k=m.modulus.byteLength(),C=w.length,O=s("sha1").update(v.alloc(0)).digest(),P=O.length,M=2*P;if(C>k-M-2)throw new Error("message too long");var D=v.alloc(k-C-M-2),$=k-P-1,H=a(P),Z=o(v.concat([O,D,v.alloc(1,1),w],$),d(H,$)),re=o(H,d(Z,P));return new f(v.concat([v.alloc(1),re,Z],k))}function u(m,w,k){var C=w.length,O=m.modulus.byteLength();if(C>O-11)throw new Error("message too long");var P;return k?P=v.alloc(O-C-3,255):P=h(O-C-3),new f(v.concat([v.from([0,k?1:2]),P,v.alloc(1),w],O))}function h(m){for(var w=v.allocUnsafe(m),k=0,C=a(m*2),O=0,P;k<m;)O===C.length&&(C=a(m*2),O=0),P=C[O++],P&&(w[k++]=P);return w}},{"./mgf":256,"./withPublic":259,"./xor":260,"bn.js":139,"browserify-rsa":163,"create-hash":176,"parse-asn1":247,randombytes:261,"safe-buffer":279}],259:[function(e,i,t){var n=e("bn.js"),a=e("safe-buffer").Buffer;function s(d,o){return a.from(d.toRed(n.mont(o.modulus)).redPow(new n(o.publicExponent)).fromRed().toArray())}i.exports=s},{"bn.js":139,"safe-buffer":279}],260:[function(e,i,t){i.exports=function(a,s){for(var d=a.length,o=-1;++o<d;)a[o]^=s[o];return a}},{}],261:[function(e,i,t){arguments[4][102][0].apply(t,arguments)},{_process:254,dup:102,"safe-buffer":279}],262:[function(e,i,t){(function(n,a){(function(){function s(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var d=e("safe-buffer"),o=e("randombytes"),f=d.Buffer,c=d.kMaxLength,p=a.crypto||a.msCrypto,v=Math.pow(2,32)-1;function l(k,C){if(typeof k!="number"||k!==k)throw new TypeError("offset must be a number");if(k>v||k<0)throw new TypeError("offset must be a uint32");if(k>c||k>C)throw new RangeError("offset out of range")}function u(k,C,O){if(typeof k!="number"||k!==k)throw new TypeError("size must be a number");if(k>v||k<0)throw new TypeError("size must be a uint32");if(k+C>O||k>c)throw new RangeError("buffer too small")}p&&p.getRandomValues||!n.browser?(t.randomFill=h,t.randomFillSync=w):(t.randomFill=s,t.randomFillSync=s);function h(k,C,O,P){if(!f.isBuffer(k)&&!(k instanceof a.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof C=="function")P=C,C=0,O=k.length;else if(typeof O=="function")P=O,O=k.length-C;else if(typeof P!="function")throw new TypeError('"cb" argument must be a function');return l(C,k.length),u(O,C,k.length),m(k,C,O,P)}function m(k,C,O,P){if(n.browser){var M=k.buffer,D=new Uint8Array(M,C,O);if(p.getRandomValues(D),P){n.nextTick(function(){P(null,k)});return}return k}if(P){o(O,function(H,Z){if(H)return P(H);Z.copy(k,C),P(null,k)});return}var $=o(O);return $.copy(k,C),k}function w(k,C,O){if(typeof C>"u"&&(C=0),!f.isBuffer(k)&&!(k instanceof a.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return l(C,k.length),O===void 0&&(O=k.length-C),u(O,C,k.length),m(k,C,O)}}).call(this)}).call(this,e("_process"),typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{_process:254,randombytes:261,"safe-buffer":279}],263:[function(e,i,t){arguments[4][103][0].apply(t,arguments)},{dup:103}],264:[function(e,i,t){arguments[4][104][0].apply(t,arguments)},{"./_stream_readable":266,"./_stream_writable":268,_process:254,dup:104,inherits:233}],265:[function(e,i,t){arguments[4][105][0].apply(t,arguments)},{"./_stream_transform":267,dup:105,inherits:233}],266:[function(e,i,t){arguments[4][106][0].apply(t,arguments)},{"../errors":263,"./_stream_duplex":264,"./internal/streams/async_iterator":269,"./internal/streams/buffer_list":270,"./internal/streams/destroy":271,"./internal/streams/from":273,"./internal/streams/state":275,"./internal/streams/stream":276,_process:254,buffer:171,dup:106,events:207,inherits:233,"string_decoder/":290,util:142}],267:[function(e,i,t){arguments[4][107][0].apply(t,arguments)},{"../errors":263,"./_stream_duplex":264,dup:107,inherits:233}],268:[function(e,i,t){arguments[4][108][0].apply(t,arguments)},{"../errors":263,"./_stream_duplex":264,"./internal/streams/destroy":271,"./internal/streams/state":275,"./internal/streams/stream":276,_process:254,buffer:171,dup:108,inherits:233,"util-deprecate":291}],269:[function(e,i,t){arguments[4][109][0].apply(t,arguments)},{"./end-of-stream":272,_process:254,dup:109}],270:[function(e,i,t){arguments[4][110][0].apply(t,arguments)},{buffer:171,dup:110,util:142}],271:[function(e,i,t){arguments[4][111][0].apply(t,arguments)},{_process:254,dup:111}],272:[function(e,i,t){arguments[4][112][0].apply(t,arguments)},{"../../../errors":263,dup:112}],273:[function(e,i,t){arguments[4][113][0].apply(t,arguments)},{dup:113}],274:[function(e,i,t){arguments[4][114][0].apply(t,arguments)},{"../../../errors":263,"./end-of-stream":272,dup:114}],275:[function(e,i,t){arguments[4][115][0].apply(t,arguments)},{"../../../errors":263,dup:115}],276:[function(e,i,t){arguments[4][116][0].apply(t,arguments)},{dup:116,events:207}],277:[function(e,i,t){arguments[4][117][0].apply(t,arguments)},{"./lib/_stream_duplex.js":264,"./lib/_stream_passthrough.js":265,"./lib/_stream_readable.js":266,"./lib/_stream_transform.js":267,"./lib/_stream_writable.js":268,"./lib/internal/streams/end-of-stream.js":272,"./lib/internal/streams/pipeline.js":274,dup:117}],278:[function(e,i,t){var n=e("buffer").Buffer,a=e("inherits"),s=e("hash-base"),d=new Array(16),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],c=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],v=[0,1518500249,1859775393,2400959708,2840853838],l=[1352829926,1548603684,1836072691,2053994217,0];function u(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}a(u,s),u.prototype._update=function(){for(var P=d,M=0;M<16;++M)P[M]=this._block.readInt32LE(M*4);for(var D=this._a|0,$=this._b|0,H=this._c|0,Z=this._d|0,re=this._e|0,Y=this._a|0,N=this._b|0,x=this._c|0,b=this._d|0,_=this._e|0,g=0;g<80;g+=1){var E,T;g<16?(E=m(D,$,H,Z,re,P[o[g]],v[0],c[g]),T=O(Y,N,x,b,_,P[f[g]],l[0],p[g])):g<32?(E=w(D,$,H,Z,re,P[o[g]],v[1],c[g]),T=C(Y,N,x,b,_,P[f[g]],l[1],p[g])):g<48?(E=k(D,$,H,Z,re,P[o[g]],v[2],c[g]),T=k(Y,N,x,b,_,P[f[g]],l[2],p[g])):g<64?(E=C(D,$,H,Z,re,P[o[g]],v[3],c[g]),T=w(Y,N,x,b,_,P[f[g]],l[3],p[g])):(E=O(D,$,H,Z,re,P[o[g]],v[4],c[g]),T=m(Y,N,x,b,_,P[f[g]],l[4],p[g])),D=re,re=Z,Z=h(H,10),H=$,$=E,Y=_,_=b,b=h(x,10),x=N,N=T}var A=this._b+H+b|0;this._b=this._c+Z+_|0,this._c=this._d+re+Y|0,this._d=this._e+D+N|0,this._e=this._a+$+x|0,this._a=A},u.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var P=n.alloc?n.alloc(20):new n(20);return P.writeInt32LE(this._a,0),P.writeInt32LE(this._b,4),P.writeInt32LE(this._c,8),P.writeInt32LE(this._d,12),P.writeInt32LE(this._e,16),P};function h(P,M){return P<<M|P>>>32-M}function m(P,M,D,$,H,Z,re,Y){return h(P+(M^D^$)+Z+re|0,Y)+H|0}function w(P,M,D,$,H,Z,re,Y){return h(P+(M&D|~M&$)+Z+re|0,Y)+H|0}function k(P,M,D,$,H,Z,re,Y){return h(P+((M|~D)^$)+Z+re|0,Y)+H|0}function C(P,M,D,$,H,Z,re,Y){return h(P+(M&$|D&~$)+Z+re|0,Y)+H|0}function O(P,M,D,$,H,Z,re,Y){return h(P+(M^(D|~$))+Z+re|0,Y)+H|0}i.exports=u},{buffer:171,"hash-base":218,inherits:233}],279:[function(e,i,t){arguments[4][118][0].apply(t,arguments)},{buffer:171,dup:118}],280:[function(e,i,t){(function(n){(function(){var a=e("buffer"),s=a.Buffer,d={},o;for(o in a)a.hasOwnProperty(o)&&(o==="SlowBuffer"||o==="Buffer"||(d[o]=a[o]));var f=d.Buffer={};for(o in s)s.hasOwnProperty(o)&&(o==="allocUnsafe"||o==="allocUnsafeSlow"||(f[o]=s[o]));if(d.Buffer.prototype=s.prototype,(!f.from||f.from===Uint8Array.from)&&(f.from=function(c,p,v){if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof c);if(c&&typeof c.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);return s(c,p,v)}),f.alloc||(f.alloc=function(c,p,v){if(typeof c!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof c);if(c<0||c>=2*(1<<30))throw new RangeError('The value "'+c+'" is invalid for option "size"');var l=s(c);return!p||p.length===0?l.fill(0):typeof v=="string"?l.fill(p,v):l.fill(p),l}),!d.kStringMaxLength)try{d.kStringMaxLength=n.binding("buffer").kStringMaxLength}catch{}d.constants||(d.constants={MAX_LENGTH:d.kMaxLength},d.kStringMaxLength&&(d.constants.MAX_STRING_LENGTH=d.kStringMaxLength)),i.exports=d}).call(this)}).call(this,e("_process"))},{_process:254,buffer:171}],281:[function(e,i,t){var n=e("safe-buffer").Buffer;function a(s,d){this._block=n.alloc(s),this._finalSize=d,this._blockSize=s,this._len=0}a.prototype.update=function(s,d){typeof s=="string"&&(d=d||"utf8",s=n.from(s,d));for(var o=this._block,f=this._blockSize,c=s.length,p=this._len,v=0;v<c;){for(var l=p%f,u=Math.min(c-v,f-l),h=0;h<u;h++)o[l+h]=s[v+h];p+=u,v+=u,p%f===0&&this._update(o)}return this._len+=c,this},a.prototype.digest=function(s){var d=this._len%this._blockSize;this._block[d]=128,this._block.fill(0,d+1),d>=this._finalSize&&(this._update(this._block),this._block.fill(0));var o=this._len*8;if(o<=4294967295)this._block.writeUInt32BE(o,this._blockSize-4);else{var f=(o&4294967295)>>>0,c=(o-f)/4294967296;this._block.writeUInt32BE(c,this._blockSize-8),this._block.writeUInt32BE(f,this._blockSize-4)}this._update(this._block);var p=this._hash();return s?p.toString(s):p},a.prototype._update=function(){throw new Error("_update must be implemented by subclass")},i.exports=a},{"safe-buffer":279}],282:[function(e,i,n){var n=i.exports=function(s){s=s.toLowerCase();var d=n[s];if(!d)throw new Error(s+" is not supported (we accept pull requests)");return new d};n.sha=e("./sha"),n.sha1=e("./sha1"),n.sha224=e("./sha224"),n.sha256=e("./sha256"),n.sha384=e("./sha384"),n.sha512=e("./sha512")},{"./sha":283,"./sha1":284,"./sha224":285,"./sha256":286,"./sha384":287,"./sha512":288}],283:[function(e,i,t){var n=e("inherits"),a=e("./hash"),s=e("safe-buffer").Buffer,d=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function f(){this.init(),this._w=o,a.call(this,64,56)}n(f,a),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function c(l){return l<<5|l>>>27}function p(l){return l<<30|l>>>2}function v(l,u,h,m){return l===0?u&h|~u&m:l===2?u&h|u&m|h&m:u^h^m}f.prototype._update=function(l){for(var u=this._w,h=this._a|0,m=this._b|0,w=this._c|0,k=this._d|0,C=this._e|0,O=0;O<16;++O)u[O]=l.readInt32BE(O*4);for(;O<80;++O)u[O]=u[O-3]^u[O-8]^u[O-14]^u[O-16];for(var P=0;P<80;++P){var M=~~(P/20),D=c(h)+v(M,m,w,k)+C+u[P]+d[M]|0;C=k,k=w,w=p(m),m=h,h=D}this._a=h+this._a|0,this._b=m+this._b|0,this._c=w+this._c|0,this._d=k+this._d|0,this._e=C+this._e|0},f.prototype._hash=function(){var l=s.allocUnsafe(20);return l.writeInt32BE(this._a|0,0),l.writeInt32BE(this._b|0,4),l.writeInt32BE(this._c|0,8),l.writeInt32BE(this._d|0,12),l.writeInt32BE(this._e|0,16),l},i.exports=f},{"./hash":281,inherits:233,"safe-buffer":279}],284:[function(e,i,t){var n=e("inherits"),a=e("./hash"),s=e("safe-buffer").Buffer,d=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function f(){this.init(),this._w=o,a.call(this,64,56)}n(f,a),f.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function c(u){return u<<1|u>>>31}function p(u){return u<<5|u>>>27}function v(u){return u<<30|u>>>2}function l(u,h,m,w){return u===0?h&m|~h&w:u===2?h&m|h&w|m&w:h^m^w}f.prototype._update=function(u){for(var h=this._w,m=this._a|0,w=this._b|0,k=this._c|0,C=this._d|0,O=this._e|0,P=0;P<16;++P)h[P]=u.readInt32BE(P*4);for(;P<80;++P)h[P]=c(h[P-3]^h[P-8]^h[P-14]^h[P-16]);for(var M=0;M<80;++M){var D=~~(M/20),$=p(m)+l(D,w,k,C)+O+h[M]+d[D]|0;O=C,C=k,k=v(w),w=m,m=$}this._a=m+this._a|0,this._b=w+this._b|0,this._c=k+this._c|0,this._d=C+this._d|0,this._e=O+this._e|0},f.prototype._hash=function(){var u=s.allocUnsafe(20);return u.writeInt32BE(this._a|0,0),u.writeInt32BE(this._b|0,4),u.writeInt32BE(this._c|0,8),u.writeInt32BE(this._d|0,12),u.writeInt32BE(this._e|0,16),u},i.exports=f},{"./hash":281,inherits:233,"safe-buffer":279}],285:[function(e,i,t){var n=e("inherits"),a=e("./sha256"),s=e("./hash"),d=e("safe-buffer").Buffer,o=new Array(64);function f(){this.init(),this._w=o,s.call(this,64,56)}n(f,a),f.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},f.prototype._hash=function(){var c=d.allocUnsafe(28);return c.writeInt32BE(this._a,0),c.writeInt32BE(this._b,4),c.writeInt32BE(this._c,8),c.writeInt32BE(this._d,12),c.writeInt32BE(this._e,16),c.writeInt32BE(this._f,20),c.writeInt32BE(this._g,24),c},i.exports=f},{"./hash":281,"./sha256":286,inherits:233,"safe-buffer":279}],286:[function(e,i,t){var n=e("inherits"),a=e("./hash"),s=e("safe-buffer").Buffer,d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function f(){this.init(),this._w=o,a.call(this,64,56)}n(f,a),f.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function c(m,w,k){return k^m&(w^k)}function p(m,w,k){return m&w|k&(m|w)}function v(m){return(m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10)}function l(m){return(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7)}function u(m){return(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3}function h(m){return(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10}f.prototype._update=function(m){for(var w=this._w,k=this._a|0,C=this._b|0,O=this._c|0,P=this._d|0,M=this._e|0,D=this._f|0,$=this._g|0,H=this._h|0,Z=0;Z<16;++Z)w[Z]=m.readInt32BE(Z*4);for(;Z<64;++Z)w[Z]=h(w[Z-2])+w[Z-7]+u(w[Z-15])+w[Z-16]|0;for(var re=0;re<64;++re){var Y=H+l(M)+c(M,D,$)+d[re]+w[re]|0,N=v(k)+p(k,C,O)|0;H=$,$=D,D=M,M=P+Y|0,P=O,O=C,C=k,k=Y+N|0}this._a=k+this._a|0,this._b=C+this._b|0,this._c=O+this._c|0,this._d=P+this._d|0,this._e=M+this._e|0,this._f=D+this._f|0,this._g=$+this._g|0,this._h=H+this._h|0},f.prototype._hash=function(){var m=s.allocUnsafe(32);return m.writeInt32BE(this._a,0),m.writeInt32BE(this._b,4),m.writeInt32BE(this._c,8),m.writeInt32BE(this._d,12),m.writeInt32BE(this._e,16),m.writeInt32BE(this._f,20),m.writeInt32BE(this._g,24),m.writeInt32BE(this._h,28),m},i.exports=f},{"./hash":281,inherits:233,"safe-buffer":279}],287:[function(e,i,t){var n=e("inherits"),a=e("./sha512"),s=e("./hash"),d=e("safe-buffer").Buffer,o=new Array(160);function f(){this.init(),this._w=o,s.call(this,128,112)}n(f,a),f.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},f.prototype._hash=function(){var c=d.allocUnsafe(48);function p(v,l,u){c.writeInt32BE(v,u),c.writeInt32BE(l,u+4)}return p(this._ah,this._al,0),p(this._bh,this._bl,8),p(this._ch,this._cl,16),p(this._dh,this._dl,24),p(this._eh,this._el,32),p(this._fh,this._fl,40),c},i.exports=f},{"./hash":281,"./sha512":288,inherits:233,"safe-buffer":279}],288:[function(e,i,t){var n=e("inherits"),a=e("./hash"),s=e("safe-buffer").Buffer,d=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function f(){this.init(),this._w=o,a.call(this,128,112)}n(f,a),f.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function c(C,O,P){return P^C&(O^P)}function p(C,O,P){return C&O|P&(C|O)}function v(C,O){return(C>>>28|O<<4)^(O>>>2|C<<30)^(O>>>7|C<<25)}function l(C,O){return(C>>>14|O<<18)^(C>>>18|O<<14)^(O>>>9|C<<23)}function u(C,O){return(C>>>1|O<<31)^(C>>>8|O<<24)^C>>>7}function h(C,O){return(C>>>1|O<<31)^(C>>>8|O<<24)^(C>>>7|O<<25)}function m(C,O){return(C>>>19|O<<13)^(O>>>29|C<<3)^C>>>6}function w(C,O){return(C>>>19|O<<13)^(O>>>29|C<<3)^(C>>>6|O<<26)}function k(C,O){return C>>>0<O>>>0?1:0}f.prototype._update=function(C){for(var O=this._w,P=this._ah|0,M=this._bh|0,D=this._ch|0,$=this._dh|0,H=this._eh|0,Z=this._fh|0,re=this._gh|0,Y=this._hh|0,N=this._al|0,x=this._bl|0,b=this._cl|0,_=this._dl|0,g=this._el|0,E=this._fl|0,T=this._gl|0,A=this._hl|0,J=0;J<32;J+=2)O[J]=C.readInt32BE(J*4),O[J+1]=C.readInt32BE(J*4+4);for(;J<160;J+=2){var G=O[J-30],I=O[J-15*2+1],V=u(G,I),L=h(I,G);G=O[J-2*2],I=O[J-2*2+1];var z=m(G,I),ie=w(I,G),se=O[J-7*2],me=O[J-7*2+1],Se=O[J-16*2],ke=O[J-16*2+1],oe=L+me|0,ue=V+se+k(oe,L)|0;oe=oe+ie|0,ue=ue+z+k(oe,ie)|0,oe=oe+ke|0,ue=ue+Se+k(oe,ke)|0,O[J]=ue,O[J+1]=oe}for(var ye=0;ye<160;ye+=2){ue=O[ye],oe=O[ye+1];var we=p(P,M,D),le=p(N,x,b),ee=v(P,N),te=v(N,P),Q=l(H,g),B=l(g,H),W=d[ye],X=d[ye+1],ce=c(H,Z,re),he=c(g,E,T),ge=A+B|0,fe=Y+Q+k(ge,A)|0;ge=ge+he|0,fe=fe+ce+k(ge,he)|0,ge=ge+X|0,fe=fe+W+k(ge,X)|0,ge=ge+oe|0,fe=fe+ue+k(ge,oe)|0;var y=te+le|0,U=ee+we+k(y,te)|0;Y=re,A=T,re=Z,T=E,Z=H,E=g,g=_+ge|0,H=$+fe+k(g,_)|0,$=D,_=b,D=M,b=x,M=P,x=N,N=ge+y|0,P=fe+U+k(N,ge)|0}this._al=this._al+N|0,this._bl=this._bl+x|0,this._cl=this._cl+b|0,this._dl=this._dl+_|0,this._el=this._el+g|0,this._fl=this._fl+E|0,this._gl=this._gl+T|0,this._hl=this._hl+A|0,this._ah=this._ah+P+k(this._al,N)|0,this._bh=this._bh+M+k(this._bl,x)|0,this._ch=this._ch+D+k(this._cl,b)|0,this._dh=this._dh+$+k(this._dl,_)|0,this._eh=this._eh+H+k(this._el,g)|0,this._fh=this._fh+Z+k(this._fl,E)|0,this._gh=this._gh+re+k(this._gl,T)|0,this._hh=this._hh+Y+k(this._hl,A)|0},f.prototype._hash=function(){var C=s.allocUnsafe(64);function O(P,M,D){C.writeInt32BE(P,D),C.writeInt32BE(M,D+4)}return O(this._ah,this._al,0),O(this._bh,this._bl,8),O(this._ch,this._cl,16),O(this._dh,this._dl,24),O(this._eh,this._el,32),O(this._fh,this._fl,40),O(this._gh,this._gl,48),O(this._hh,this._hl,56),C},i.exports=f},{"./hash":281,inherits:233,"safe-buffer":279}],289:[function(e,i,t){i.exports=s;var n=e("events").EventEmitter,a=e("inherits");a(s,n),s.Readable=e("readable-stream/lib/_stream_readable.js"),s.Writable=e("readable-stream/lib/_stream_writable.js"),s.Duplex=e("readable-stream/lib/_stream_duplex.js"),s.Transform=e("readable-stream/lib/_stream_transform.js"),s.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),s.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),s.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),s.Stream=s;function s(){n.call(this)}s.prototype.pipe=function(d,o){var f=this;function c(w){d.writable&&d.write(w)===!1&&f.pause&&f.pause()}f.on("data",c);function p(){f.readable&&f.resume&&f.resume()}d.on("drain",p),!d._isStdio&&(!o||o.end!==!1)&&(f.on("end",l),f.on("close",u));var v=!1;function l(){v||(v=!0,d.end())}function u(){v||(v=!0,typeof d.destroy=="function"&&d.destroy())}function h(w){if(m(),n.listenerCount(this,"error")===0)throw w}f.on("error",h),d.on("error",h);function m(){f.removeListener("data",c),d.removeListener("drain",p),f.removeListener("end",l),f.removeListener("close",u),f.removeListener("error",h),d.removeListener("error",h),f.removeListener("end",m),f.removeListener("close",m),d.removeListener("close",m)}return f.on("end",m),f.on("close",m),d.on("close",m),d.emit("pipe",f),d}},{events:207,inherits:233,"readable-stream/lib/_stream_duplex.js":264,"readable-stream/lib/_stream_passthrough.js":265,"readable-stream/lib/_stream_readable.js":266,"readable-stream/lib/_stream_transform.js":267,"readable-stream/lib/_stream_writable.js":268,"readable-stream/lib/internal/streams/end-of-stream.js":272,"readable-stream/lib/internal/streams/pipeline.js":274}],290:[function(e,i,t){arguments[4][121][0].apply(t,arguments)},{dup:121,"safe-buffer":279}],291:[function(e,i,t){arguments[4][122][0].apply(t,arguments)},{dup:122}],292:[function(e,i,t){i.exports=function(a){return a&&typeof a=="object"&&typeof a.copy=="function"&&typeof a.fill=="function"&&typeof a.readUInt8=="function"}},{}],293:[function(e,i,t){var n=e("is-arguments"),a=e("is-generator-function"),s=e("which-typed-array"),d=e("is-typed-array");function o(X){return X.call.bind(X)}var f=typeof BigInt<"u",c=typeof Symbol<"u",p=o(Object.prototype.toString),v=o(Number.prototype.valueOf),l=o(String.prototype.valueOf),u=o(Boolean.prototype.valueOf);if(f)var h=o(BigInt.prototype.valueOf);if(c)var m=o(Symbol.prototype.valueOf);function w(X,ce){if(typeof X!="object")return!1;try{return ce(X),!0}catch{return!1}}t.isArgumentsObject=n,t.isGeneratorFunction=a,t.isTypedArray=d;function k(X){return typeof Promise<"u"&&X instanceof Promise||X!==null&&typeof X=="object"&&typeof X.then=="function"&&typeof X.catch=="function"}t.isPromise=k;function C(X){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(X):d(X)||z(X)}t.isArrayBufferView=C;function O(X){return s(X)==="Uint8Array"}t.isUint8Array=O;function P(X){return s(X)==="Uint8ClampedArray"}t.isUint8ClampedArray=P;function M(X){return s(X)==="Uint16Array"}t.isUint16Array=M;function D(X){return s(X)==="Uint32Array"}t.isUint32Array=D;function $(X){return s(X)==="Int8Array"}t.isInt8Array=$;function H(X){return s(X)==="Int16Array"}t.isInt16Array=H;function Z(X){return s(X)==="Int32Array"}t.isInt32Array=Z;function re(X){return s(X)==="Float32Array"}t.isFloat32Array=re;function Y(X){return s(X)==="Float64Array"}t.isFloat64Array=Y;function N(X){return s(X)==="BigInt64Array"}t.isBigInt64Array=N;function x(X){return s(X)==="BigUint64Array"}t.isBigUint64Array=x;function b(X){return p(X)==="[object Map]"}b.working=typeof Map<"u"&&b(new Map);function _(X){return typeof Map>"u"?!1:b.working?b(X):X instanceof Map}t.isMap=_;function g(X){return p(X)==="[object Set]"}g.working=typeof Set<"u"&&g(new Set);function E(X){return typeof Set>"u"?!1:g.working?g(X):X instanceof Set}t.isSet=E;function T(X){return p(X)==="[object WeakMap]"}T.working=typeof WeakMap<"u"&&T(new WeakMap);function A(X){return typeof WeakMap>"u"?!1:T.working?T(X):X instanceof WeakMap}t.isWeakMap=A;function J(X){return p(X)==="[object WeakSet]"}J.working=typeof WeakSet<"u"&&J(new WeakSet);function G(X){return J(X)}t.isWeakSet=G;function I(X){return p(X)==="[object ArrayBuffer]"}I.working=typeof ArrayBuffer<"u"&&I(new ArrayBuffer);function V(X){return typeof ArrayBuffer>"u"?!1:I.working?I(X):X instanceof ArrayBuffer}t.isArrayBuffer=V;function L(X){return p(X)==="[object DataView]"}L.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&L(new DataView(new ArrayBuffer(1),0,1));function z(X){return typeof DataView>"u"?!1:L.working?L(X):X instanceof DataView}t.isDataView=z;var ie=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function se(X){return p(X)==="[object SharedArrayBuffer]"}function me(X){return typeof ie>"u"?!1:(typeof se.working>"u"&&(se.working=se(new ie)),se.working?se(X):X instanceof ie)}t.isSharedArrayBuffer=me;function Se(X){return p(X)==="[object AsyncFunction]"}t.isAsyncFunction=Se;function ke(X){return p(X)==="[object Map Iterator]"}t.isMapIterator=ke;function oe(X){return p(X)==="[object Set Iterator]"}t.isSetIterator=oe;function ue(X){return p(X)==="[object Generator]"}t.isGeneratorObject=ue;function ye(X){return p(X)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=ye;function we(X){return w(X,v)}t.isNumberObject=we;function le(X){return w(X,l)}t.isStringObject=le;function ee(X){return w(X,u)}t.isBooleanObject=ee;function te(X){return f&&w(X,h)}t.isBigIntObject=te;function Q(X){return c&&w(X,m)}t.isSymbolObject=Q;function B(X){return we(X)||le(X)||ee(X)||te(X)||Q(X)}t.isBoxedPrimitive=B;function W(X){return typeof Uint8Array<"u"&&(V(X)||me(X))}t.isAnyArrayBuffer=W,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(X){Object.defineProperty(t,X,{enumerable:!1,value:function(){throw new Error(X+" is not supported in userland")}})})},{"is-arguments":234,"is-generator-function":237,"is-typed-array":238,"which-typed-array":295}],294:[function(e,i,t){(function(n){(function(){var a=Object.getOwnPropertyDescriptors||function(ie){for(var se=Object.keys(ie),me={},Se=0;Se<se.length;Se++)me[se[Se]]=Object.getOwnPropertyDescriptor(ie,se[Se]);return me},s=/%[sdj%]/g;t.format=function(z){if(!H(z)){for(var ie=[],se=0;se<arguments.length;se++)ie.push(c(arguments[se]));return ie.join(" ")}for(var se=1,me=arguments,Se=me.length,ke=String(z).replace(s,function(ue){if(ue==="%%")return"%";if(se>=Se)return ue;switch(ue){case"%s":return String(me[se++]);case"%d":return Number(me[se++]);case"%j":try{return JSON.stringify(me[se++])}catch{return"[Circular]"}default:return ue}}),oe=me[se];se<Se;oe=me[++se])M(oe)||!N(oe)?ke+=" "+oe:ke+=" "+c(oe);return ke},t.deprecate=function(z,ie){if(typeof n<"u"&&n.noDeprecation===!0)return z;if(typeof n>"u")return function(){return t.deprecate(z,ie).apply(this,arguments)};var se=!1;function me(){if(!se){if(n.throwDeprecation)throw new Error(ie);n.traceDeprecation?console.trace(ie):console.error(ie),se=!0}return z.apply(this,arguments)}return me};var d={},o=/^$/;if({}.NODE_DEBUG){var f={}.NODE_DEBUG;f=f.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+f+"$","i")}t.debuglog=function(z){if(z=z.toUpperCase(),!d[z])if(o.test(z)){var ie=n.pid;d[z]=function(){var se=t.format.apply(t,arguments);console.error("%s %d: %s",z,ie,se)}}else d[z]=function(){};return d[z]};function c(z,ie){var se={seen:[],stylize:v};return arguments.length>=3&&(se.depth=arguments[2]),arguments.length>=4&&(se.colors=arguments[3]),P(ie)?se.showHidden=ie:ie&&t._extend(se,ie),re(se.showHidden)&&(se.showHidden=!1),re(se.depth)&&(se.depth=2),re(se.colors)&&(se.colors=!1),re(se.customInspect)&&(se.customInspect=!0),se.colors&&(se.stylize=p),u(se,z,se.depth)}t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function p(z,ie){var se=c.styles[ie];return se?"\x1B["+c.colors[se][0]+"m"+z+"\x1B["+c.colors[se][1]+"m":z}function v(z,ie){return z}function l(z){var ie={};return z.forEach(function(se,me){ie[se]=!0}),ie}function u(z,ie,se){if(z.customInspect&&ie&&_(ie.inspect)&&ie.inspect!==t.inspect&&!(ie.constructor&&ie.constructor.prototype===ie)){var me=ie.inspect(se,z);return H(me)||(me=u(z,me,se)),me}var Se=h(z,ie);if(Se)return Se;var ke=Object.keys(ie),oe=l(ke);if(z.showHidden&&(ke=Object.getOwnPropertyNames(ie)),b(ie)&&(ke.indexOf("message")>=0||ke.indexOf("description")>=0))return m(ie);if(ke.length===0){if(_(ie)){var ue=ie.name?": "+ie.name:"";return z.stylize("[Function"+ue+"]","special")}if(Y(ie))return z.stylize(RegExp.prototype.toString.call(ie),"regexp");if(x(ie))return z.stylize(Date.prototype.toString.call(ie),"date");if(b(ie))return m(ie)}var ye="",we=!1,le=["{","}"];if(O(ie)&&(we=!0,le=["[","]"]),_(ie)){var ee=ie.name?": "+ie.name:"";ye=" [Function"+ee+"]"}if(Y(ie)&&(ye=" "+RegExp.prototype.toString.call(ie)),x(ie)&&(ye=" "+Date.prototype.toUTCString.call(ie)),b(ie)&&(ye=" "+m(ie)),ke.length===0&&(!we||ie.length==0))return le[0]+ye+le[1];if(se<0)return Y(ie)?z.stylize(RegExp.prototype.toString.call(ie),"regexp"):z.stylize("[Object]","special");z.seen.push(ie);var te;return we?te=w(z,ie,se,oe,ke):te=ke.map(function(Q){return k(z,ie,se,oe,Q,we)}),z.seen.pop(),C(te,ye,le)}function h(z,ie){if(re(ie))return z.stylize("undefined","undefined");if(H(ie)){var se="'"+JSON.stringify(ie).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(se,"string")}if($(ie))return z.stylize(""+ie,"number");if(P(ie))return z.stylize(""+ie,"boolean");if(M(ie))return z.stylize("null","null")}function m(z){return"["+Error.prototype.toString.call(z)+"]"}function w(z,ie,se,me,Se){for(var ke=[],oe=0,ue=ie.length;oe<ue;++oe)G(ie,String(oe))?ke.push(k(z,ie,se,me,String(oe),!0)):ke.push("");return Se.forEach(function(ye){ye.match(/^\d+$/)||ke.push(k(z,ie,se,me,ye,!0))}),ke}function k(z,ie,se,me,Se,ke){var oe,ue,ye;if(ye=Object.getOwnPropertyDescriptor(ie,Se)||{value:ie[Se]},ye.get?ye.set?ue=z.stylize("[Getter/Setter]","special"):ue=z.stylize("[Getter]","special"):ye.set&&(ue=z.stylize("[Setter]","special")),G(me,Se)||(oe="["+Se+"]"),ue||(z.seen.indexOf(ye.value)<0?(M(se)?ue=u(z,ye.value,null):ue=u(z,ye.value,se-1),ue.indexOf(`
`)>-1&&(ke?ue=ue.split(`
`).map(function(we){return"  "+we}).join(`
`).slice(2):ue=`
`+ue.split(`
`).map(function(we){return"   "+we}).join(`
`))):ue=z.stylize("[Circular]","special")),re(oe)){if(ke&&Se.match(/^\d+$/))return ue;oe=JSON.stringify(""+Se),oe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(oe=oe.slice(1,-1),oe=z.stylize(oe,"name")):(oe=oe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),oe=z.stylize(oe,"string"))}return oe+": "+ue}function C(z,ie,se){var me=z.reduce(function(Se,ke){return ke.indexOf(`
`)>=0,Se+ke.replace(/\u001b\[\d\d?m/g,"").length+1},0);return me>60?se[0]+(ie===""?"":ie+`
 `)+" "+z.join(`,
  `)+" "+se[1]:se[0]+ie+" "+z.join(", ")+" "+se[1]}t.types=e("./support/types");function O(z){return Array.isArray(z)}t.isArray=O;function P(z){return typeof z=="boolean"}t.isBoolean=P;function M(z){return z===null}t.isNull=M;function D(z){return z==null}t.isNullOrUndefined=D;function $(z){return typeof z=="number"}t.isNumber=$;function H(z){return typeof z=="string"}t.isString=H;function Z(z){return typeof z=="symbol"}t.isSymbol=Z;function re(z){return z===void 0}t.isUndefined=re;function Y(z){return N(z)&&E(z)==="[object RegExp]"}t.isRegExp=Y,t.types.isRegExp=Y;function N(z){return typeof z=="object"&&z!==null}t.isObject=N;function x(z){return N(z)&&E(z)==="[object Date]"}t.isDate=x,t.types.isDate=x;function b(z){return N(z)&&(E(z)==="[object Error]"||z instanceof Error)}t.isError=b,t.types.isNativeError=b;function _(z){return typeof z=="function"}t.isFunction=_;function g(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}t.isPrimitive=g,t.isBuffer=e("./support/isBuffer");function E(z){return Object.prototype.toString.call(z)}function T(z){return z<10?"0"+z.toString(10):z.toString(10)}var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function J(){var z=new Date,ie=[T(z.getHours()),T(z.getMinutes()),T(z.getSeconds())].join(":");return[z.getDate(),A[z.getMonth()],ie].join(" ")}t.log=function(){console.log("%s - %s",J(),t.format.apply(t,arguments))},t.inherits=e("inherits"),t._extend=function(z,ie){if(!ie||!N(ie))return z;for(var se=Object.keys(ie),me=se.length;me--;)z[se[me]]=ie[se[me]];return z};function G(z,ie){return Object.prototype.hasOwnProperty.call(z,ie)}var I=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(ie){if(typeof ie!="function")throw new TypeError('The "original" argument must be of type Function');if(I&&ie[I]){var se=ie[I];if(typeof se!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(se,I,{value:se,enumerable:!1,writable:!1,configurable:!0}),se}function se(){for(var me,Se,ke=new Promise(function(ye,we){me=ye,Se=we}),oe=[],ue=0;ue<arguments.length;ue++)oe.push(arguments[ue]);oe.push(function(ye,we){ye?Se(ye):me(we)});try{ie.apply(this,oe)}catch(ye){Se(ye)}return ke}return Object.setPrototypeOf(se,Object.getPrototypeOf(ie)),I&&Object.defineProperty(se,I,{value:se,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(se,a(ie))},t.promisify.custom=I;function V(z,ie){if(!z){var se=new Error("Promise was rejected with a falsy value");se.reason=z,z=se}return ie(z)}function L(z){if(typeof z!="function")throw new TypeError('The "original" argument must be of type Function');function ie(){for(var se=[],me=0;me<arguments.length;me++)se.push(arguments[me]);var Se=se.pop();if(typeof Se!="function")throw new TypeError("The last argument must be of type Function");var ke=this,oe=function(){return Se.apply(ke,arguments)};z.apply(this,se).then(function(ue){n.nextTick(oe.bind(null,null,ue))},function(ue){n.nextTick(V.bind(null,ue,oe))})}return Object.setPrototypeOf(ie,Object.getPrototypeOf(z)),Object.defineProperties(ie,a(z)),ie}t.callbackify=L}).call(this)}).call(this,e("_process"))},{"./support/isBuffer":292,"./support/types":293,_process:254,inherits:233}],295:[function(e,i,t){(function(n){(function(){var a=e("for-each"),s=e("available-typed-arrays"),d=e("call-bind/callBound"),o=e("gopd"),f=d("Object.prototype.toString"),c=e("has-tostringtag/shams")(),p=typeof globalThis>"u"?n:globalThis,v=s(),l=d("String.prototype.slice"),u={},h=Object.getPrototypeOf;c&&o&&h&&a(v,function(k){if(typeof p[k]=="function"){var C=new p[k];if(Symbol.toStringTag in C){var O=h(C),P=o(O,Symbol.toStringTag);if(!P){var M=h(O);P=o(M,Symbol.toStringTag)}u[k]=P.get}}});var m=function(C){var O=!1;return a(u,function(P,M){if(!O)try{var D=P.call(C);D===M&&(O=D)}catch{}}),O},w=e("is-typed-array");i.exports=function(C){return w(C)?!c||!(Symbol.toStringTag in C)?l(f(C),8,-1):m(C):!1}}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"available-typed-arrays":137,"call-bind/callBound":172,"for-each":209,gopd:213,"has-tostringtag/shams":216,"is-typed-array":238}]},{},[1])(1)});const SimplePeer=globalThis.SimplePeer;class SimplePeerConnection{constructor(i,t,n){ht(this,"p");ht(this,"msgSendQueue",[]);ht(this,"onMesssageRecived");ht(this,"onConnStateChange");ht(this,"onOutgoingSignalMsg");this.onMesssageRecived=a=>i(a),this.onConnStateChange=a=>t(a),this.onOutgoingSignalMsg=a=>n(a)}async start(i){this.p=new SimplePeer(i),this.p.on("signal",t=>{console.log("SIMPLEPEER sendSignallingMsgCallback: ",t),this.onOutgoingSignalMsg(ENCODE_TXT(JSON.stringify(t)))}),this.p.on("connect",()=>{this._emptyMsgQueue()}),this.p.on("data",t=>{console.log("SIMPLEPEER: got a dc message: ",t)}),this.p.on("stream",t=>{console.info("SIMPLEPEER: got video stream: ",t);var n=document.getElementById("direct_video");"srcObject"in n?n.srcObject=t:n.src=window.URL.createObjectURL(t),n.play()})}sendMessage(i){this.msgSendQueue.push(i),this._emptyMsgQueue()}_emptyMsgQueue(){if(!this.p||!this.p.connected)return!1;const i=this.msgSendQueue.length;for(let t=0;t<i;t++)this.p.send(this.msgSendQueue[t])}handleSignalingMsg(i){let t="";try{t=DECODE_TXT(i);const n=JSON.parse(t);this.p.signal(n)}catch(n){console.warn("failed to parse signalling message: ",t,n.message)}}}export{DefaultReconnectPolicy as D,MediaDeviceFailure as M,ParticipantEvent as P,Room as R,SimplePeerConnection as S,Track as T,VideoPresets as V,RoomEvent as a,appendLog as b,DataPacket_Kind as c,getWebsocketURL as g,waitfor as w};
//# sourceMappingURL=simplepeer-599b44cc.js.map
