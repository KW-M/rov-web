var DEFAULT_GAMEPAD_HELP_MSG="Press any button on your controller or onscreen.",GAME_CONTROLLER_BUTTONS=[{btnName:"button_1",btnFunction:"Todo: Lights On/Off"},{btnName:"button_2",btnFunction:"Todo: Start/Stop Recording"},{btnName:"button_3",btnFunction:"Todo: Take Phtoto"},{btnName:"button_4",btnFunction:"Todo: Something"},{btnName:"shoulder_btn_front_left",btnFunction:"TODO: Something"},{btnName:"shoulder_btn_front_right",btnFunction:"TODO: Something"},{btnName:"shoulder_trigger_back_left",btnFunction:"TODO: Open Claw"},{btnName:"shoulder_trigger_back_right",btnFunction:"TODO: Close Claw"},{btnName:"select",btnFunction:""},{btnName:"start",btnFunction:""},{btnName:"stick_button_left",btnFunction:"Lock Vertical Thruster"},{btnName:"stick_button_right",btnFunction:"Lock Horizontal"},{btnName:"d_pad_up",btnFunction:"Increase Camera Brightness"},{btnName:"d_pad_down",btnFunction:"Decreases Camera Brightness"},{btnName:"d_pad_left",btnFunction:"Decrease Bitrate (reduces latency & quality)"},{btnName:"d_pad_right",btnFunction:"Increase Bitrate (increases quality & latency)"},{btnName:"vendor",btnFunction:"Show this help"}];function initilizeGamepadInterface(e){var t={buttons:[],axes:[]},n={axesDidChange:!1,changedAxes:[],buttonsDidChange:!1,changedButtons:[]};function a(){var i=navigator.getGamepads()[0];if(null!=i){var o=t.buttons;n.buttonsDidChange=!1,n.changedButtons=i.buttons.map((function(e,t){return(null==o[t]||o[t].value!==e.value)&&(n.buttonsDidChange=!0,!0)}));var s=t.axes;n.axesDidChange=!1,n.changedAxes=i.axes.map((function(e,t){return(null==s[t]||s[t]!==e)&&(n.axesDidChange=!0,!0)})),(n.axesDidChange||n.buttonsDidChange)&&(e.handleGamepadStateChange(i,n),handleGamepadHelpHighlights(i.buttons,n.changedButtons)),t={buttons:i.buttons,axes:i.axes},setTimeout((function(){requestAnimationFrame(a)}),100)}}this.GAME_CONTROLLER_BUTTONS=GAME_CONTROLLER_BUTTONS,e.handleGamepadConnected.bind(this),e.handleGamepadDisconnected.bind(this),e.handleGamepadStateChange.bind(this),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,setupGamepadHelp(),navigator.getGamepads=navigator.getGamepads||navigator.webkitGamepads||navigator.webkitGetGamepads,navigator.getGamepads?(window.addEventListener("gamepadconnected",(function(t){e.handleGamepadConnected(t),requestAnimationFrame(a)})),window.addEventListener("gamepaddisconnected",(function(n){navigator.getGamepads().length>0||(t={buttons:[],axes:[]},e.handleGamepadDisconnected(n),gamepadHelpToggleButton.style.display="none")}))):alert("This browser does not support gamepads. Please update your browser - Any modern browser should work."),setupOnscreenGamepadEvents()}function setupOnscreenGamepadEvents(){for(var e=0;e<GAME_CONTROLLER_BUTTONS.length;e++){var t=GAME_CONTROLLER_BUTTONS[e],n=document.getElementById("".concat(t.btnName,"_highlight"));console.log(e,t,n),n&&(n.addEventListener("pointerover",(function(e){e.currentTarget.setAttribute("style","visibility:visible;opacity:0.5;")})),n.addEventListener("pointerout",(function(e){e.currentTarget.setAttribute("style","visibility:hidden;")})),n.addEventListener("pointerdown",(function(e){e.currentTarget.setAttribute("style","visibility:visible;opacity:1;")})),n.addEventListener("pointerup",(function(e){e.currentTarget.setAttribute("style","visibility:visible;opacity:0.5;")})))}}var gamepadHelpVisible=!1;function setupGamepadHelp(){var e=document.getElementById("gamepad-container"),t=document.getElementById("gamepad-help-button");t.onclick=function(){0==gamepadHelpVisible?(e.classList.add("help-open"),t.innerText="Close Help",gamepadHelpText.innerText="Press or click any button to see help"):(e.classList.remove("help-open"),t.innerText="Gamepad Help"),gamepadHelpVisible=!gamepadHelpVisible}}var gamepadHelpText=document.getElementById("gamepad-help-text"),pressedBtnCount=0;function handleGamepadHelpHighlights(e,t){for(var n=0;n<e.length;n++)if(1==t[n]){var a=GAME_CONTROLLER_BUTTONS[n],i=document.getElementById("".concat(a.btnName,"_highlight"));e[n].value>.1?(i&&i.setAttribute("style","visibility:visible"),gamepadHelpText.innerText=a.btnFunction,pressedBtnCount++):(i&&i.setAttribute("style","visibility:hidden"),pressedBtnCount--)}1!=pressedBtnCount&&(gamepadHelpText.innerText=DEFAULT_GAMEPAD_HELP_MSG)}
//# sourceMappingURL=gamepad-debug.2ea8d7e0.js.map
